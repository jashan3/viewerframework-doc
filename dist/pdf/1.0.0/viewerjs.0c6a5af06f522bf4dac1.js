!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("ViewerJS",[],t):"object"==typeof exports?exports.ViewerJS=t():e.ViewerJS=t()}(self,(()=>(()=>{var __webpack_modules__={122:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar globalThis = __webpack_require__(44576);\nvar microtask = __webpack_require__(91955);\nvar aCallable = __webpack_require__(79306);\nvar validateArgumentsLength = __webpack_require__(22812);\nvar fails = __webpack_require__(79039);\nvar DESCRIPTORS = __webpack_require__(43724);\n\n// Bun ~ 1.0.30 bug\n// https://github.com/oven-sh/bun/issues/9249\nvar WRONG_ARITY = fails(function () {\n  // getOwnPropertyDescriptor for prevent experimental warning in Node 11\n  // eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\n  return DESCRIPTORS && Object.getOwnPropertyDescriptor(globalThis, 'queueMicrotask').value.length !== 1;\n});\n\n// `queueMicrotask` method\n// https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-queuemicrotask\n$({ global: true, enumerable: true, dontCallGetSet: true, forced: WRONG_ARITY }, {\n  queueMicrotask: function queueMicrotask(fn) {\n    validateArgumentsLength(arguments.length, 1);\n    microtask(aCallable(fn));\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/web.queue-microtask.js?")},221:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar fails = __webpack_require__(79039);\nvar isObject = __webpack_require__(20034);\nvar classof = __webpack_require__(22195);\nvar ARRAY_BUFFER_NON_EXTENSIBLE = __webpack_require__(15652);\n\n// eslint-disable-next-line es/no-object-issealed -- safe\nvar $isSealed = Object.isSealed;\n\nvar FORCED = ARRAY_BUFFER_NON_EXTENSIBLE || fails(function () { $isSealed(1); });\n\n// `Object.isSealed` method\n// https://tc39.es/ecma262/#sec-object.issealed\n$({ target: 'Object', stat: true, forced: FORCED }, {\n  isSealed: function isSealed(it) {\n    if (!isObject(it)) return true;\n    if (ARRAY_BUFFER_NON_EXTENSIBLE && classof(it) === 'ArrayBuffer') return true;\n    return $isSealed ? $isSealed(it) : false;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.object.is-sealed.js?")},373:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar globalThis = __webpack_require__(44576);\nvar uncurryThis = __webpack_require__(27476);\nvar fails = __webpack_require__(79039);\nvar aCallable = __webpack_require__(79306);\nvar internalSort = __webpack_require__(74488);\nvar ArrayBufferViewCore = __webpack_require__(94644);\nvar FF = __webpack_require__(13709);\nvar IE_OR_EDGE = __webpack_require__(13763);\nvar V8 = __webpack_require__(39519);\nvar WEBKIT = __webpack_require__(3607);\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\nvar Uint16Array = globalThis.Uint16Array;\nvar nativeSort = Uint16Array && uncurryThis(Uint16Array.prototype.sort);\n\n// WebKit\nvar ACCEPT_INCORRECT_ARGUMENTS = !!nativeSort && !(fails(function () {\n  nativeSort(new Uint16Array(2), null);\n}) && fails(function () {\n  nativeSort(new Uint16Array(2), {});\n}));\n\nvar STABLE_SORT = !!nativeSort && !fails(function () {\n  // feature detection can be too slow, so check engines versions\n  if (V8) return V8 < 74;\n  if (FF) return FF < 67;\n  if (IE_OR_EDGE) return true;\n  if (WEBKIT) return WEBKIT < 602;\n\n  var array = new Uint16Array(516);\n  var expected = Array(516);\n  var index, mod;\n\n  for (index = 0; index < 516; index++) {\n    mod = index % 4;\n    array[index] = 515 - index;\n    expected[index] = index - 2 * mod + 3;\n  }\n\n  nativeSort(array, function (a, b) {\n    return (a / 4 | 0) - (b / 4 | 0);\n  });\n\n  for (index = 0; index < 516; index++) {\n    if (array[index] !== expected[index]) return true;\n  }\n});\n\nvar getSortCompare = function (comparefn) {\n  return function (x, y) {\n    if (comparefn !== undefined) return +comparefn(x, y) || 0;\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (y !== y) return -1;\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (x !== x) return 1;\n    if (x === 0 && y === 0) return 1 / x > 0 && 1 / y < 0 ? 1 : -1;\n    return x > y;\n  };\n};\n\n// `%TypedArray%.prototype.sort` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.sort\nexportTypedArrayMethod('sort', function sort(comparefn) {\n  if (comparefn !== undefined) aCallable(comparefn);\n  if (STABLE_SORT) return nativeSort(this, comparefn);\n\n  return internalSort(aTypedArray(this), getSortCompare(comparefn));\n}, !STABLE_SORT || ACCEPT_INCORRECT_ARGUMENTS);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.sort.js?")},599:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// https://github.com/tc39/proposal-math-sum\n__webpack_require__(4235);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/proposals/math-sum.js?")},616:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar uncurryThis = __webpack_require__(79504);\nvar hasOwn = __webpack_require__(39297);\n\nvar $SyntaxError = SyntaxError;\nvar $parseInt = parseInt;\nvar fromCharCode = String.fromCharCode;\nvar at = uncurryThis(''.charAt);\nvar slice = uncurryThis(''.slice);\nvar exec = uncurryThis(/./.exec);\n\nvar codePoints = {\n  '\\\\\"': '\"',\n  '\\\\\\\\': '\\\\',\n  '\\\\/': '/',\n  '\\\\b': '\\b',\n  '\\\\f': '\\f',\n  '\\\\n': '\\n',\n  '\\\\r': '\\r',\n  '\\\\t': '\\t'\n};\n\nvar IS_4_HEX_DIGITS = /^[\\da-f]{4}$/i;\n// eslint-disable-next-line regexp/no-control-character -- safe\nvar IS_C0_CONTROL_CODE = /^[\\u0000-\\u001F]$/;\n\nmodule.exports = function (source, i) {\n  var unterminated = true;\n  var value = '';\n  while (i < source.length) {\n    var chr = at(source, i);\n    if (chr === '\\\\') {\n      var twoChars = slice(source, i, i + 2);\n      if (hasOwn(codePoints, twoChars)) {\n        value += codePoints[twoChars];\n        i += 2;\n      } else if (twoChars === '\\\\u') {\n        i += 2;\n        var fourHexDigits = slice(source, i, i + 4);\n        if (!exec(IS_4_HEX_DIGITS, fourHexDigits)) throw new $SyntaxError('Bad Unicode escape at: ' + i);\n        value += fromCharCode($parseInt(fourHexDigits, 16));\n        i += 4;\n      } else throw new $SyntaxError('Unknown escape sequence: \"' + twoChars + '\"');\n    } else if (chr === '\"') {\n      unterminated = false;\n      i++;\n      break;\n    } else {\n      if (exec(IS_C0_CONTROL_CODE, chr)) throw new $SyntaxError('Bad control character in string literal at: ' + i);\n      value += chr;\n      i++;\n    }\n  }\n  if (unterminated) throw new $SyntaxError('Unterminated string at: ' + i);\n  return { value: value, end: i };\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/parse-json-string.js?")},655:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar classof = __webpack_require__(36955);\n\nvar $String = String;\n\nmodule.exports = function (argument) {\n  if (classof(argument) === 'Symbol') throw new TypeError('Cannot convert a Symbol value to a string');\n  return $String(argument);\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/to-string.js?")},944:module=>{"use strict";eval("\nvar $TypeError = TypeError;\n\nmodule.exports = function (options) {\n  var alphabet = options && options.alphabet;\n  if (alphabet === undefined || alphabet === 'base64' || alphabet === 'base64url') return alphabet || 'base64';\n  throw new $TypeError('Incorrect `alphabet` option');\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/get-alphabet-option.js?")},1103:module=>{"use strict";eval("\nmodule.exports = function (exec) {\n  try {\n    return { error: false, value: exec() };\n  } catch (error) {\n    return { error: true, value: error };\n  }\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/perform.js?")},1469:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar arraySpeciesConstructor = __webpack_require__(87433);\n\n// `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray, length) {\n  return new (arraySpeciesConstructor(originalArray))(length === 0 ? 0 : length);\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/array-species-create.js?")},1480:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar fails = __webpack_require__(79039);\nvar getOwnPropertyNames = (__webpack_require__(10298).f);\n\n// eslint-disable-next-line es/no-object-getownpropertynames -- required for testing\nvar FAILS_ON_PRIMITIVES = fails(function () { return !Object.getOwnPropertyNames(1); });\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  getOwnPropertyNames: getOwnPropertyNames\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.object.get-own-property-names.js?")},1548:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar globalThis = __webpack_require__(44576);\nvar fails = __webpack_require__(79039);\nvar V8 = __webpack_require__(39519);\nvar ENVIRONMENT = __webpack_require__(84215);\n\nvar structuredClone = globalThis.structuredClone;\n\nmodule.exports = !!structuredClone && !fails(function () {\n  // prevent V8 ArrayBufferDetaching protector cell invalidation and performance degradation\n  // https://github.com/zloirock/core-js/issues/679\n  if ((ENVIRONMENT === 'DENO' && V8 > 92) || (ENVIRONMENT === 'NODE' && V8 > 94) || (ENVIRONMENT === 'BROWSER' && V8 > 97)) return false;\n  var buffer = new ArrayBuffer(8);\n  var clone = structuredClone(buffer, { transfer: [buffer] });\n  return buffer.byteLength !== 0 || clone.byteLength !== 8;\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/structured-clone-proper-transfer.js?")},1625:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar uncurryThis = __webpack_require__(79504);\n\nmodule.exports = uncurryThis({}.isPrototypeOf);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/object-is-prototype-of.js?")},1688:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar toISOString = __webpack_require__(70380);\n\n// `Date.prototype.toISOString` method\n// https://tc39.es/ecma262/#sec-date.prototype.toisostring\n// PhantomJS / old WebKit has a broken implementations\n$({ target: 'Date', proto: true, forced: Date.prototype.toISOString !== toISOString }, {\n  toISOString: toISOString\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.date.to-iso-string.js?")},1767:module=>{"use strict";eval("\n// `GetIteratorDirect(obj)` abstract operation\n// https://tc39.es/proposal-iterator-helpers/#sec-getiteratordirect\nmodule.exports = function (obj) {\n  return {\n    iterator: obj,\n    next: obj.next,\n    done: false\n  };\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/get-iterator-direct.js?")},1886:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar call = __webpack_require__(69565);\nvar AsyncFromSyncIterator = __webpack_require__(24074);\nvar anObject = __webpack_require__(28551);\nvar getIterator = __webpack_require__(70081);\nvar getIteratorDirect = __webpack_require__(1767);\nvar getMethod = __webpack_require__(55966);\nvar wellKnownSymbol = __webpack_require__(78227);\n\nvar ASYNC_ITERATOR = wellKnownSymbol('asyncIterator');\n\nmodule.exports = function (it, usingIterator) {\n  var method = arguments.length < 2 ? getMethod(it, ASYNC_ITERATOR) : usingIterator;\n  return method ? anObject(call(method, it)) : new AsyncFromSyncIterator(getIteratorDirect(getIterator(it)));\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/get-async-iterator.js?")},1951:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";eval("\nvar wellKnownSymbol = __webpack_require__(78227);\n\nexports.f = wellKnownSymbol;\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/well-known-symbol-wrapped.js?")},2008:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar $filter = (__webpack_require__(59213).filter);\nvar arrayMethodHasSpeciesSupport = __webpack_require__(70597);\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('filter');\n\n// `Array.prototype.filter` method\n// https://tc39.es/ecma262/#sec-array.prototype.filter\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  filter: function filter(callbackfn /* , thisArg */) {\n    return $filter(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array.filter.js?")},2087:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar isObject = __webpack_require__(20034);\n\nvar floor = Math.floor;\n\n// `IsIntegralNumber` abstract operation\n// https://tc39.es/ecma262/#sec-isintegralnumber\n// eslint-disable-next-line es/no-number-isinteger -- safe\nmodule.exports = Number.isInteger || function isInteger(it) {\n  return !isObject(it) && isFinite(it) && floor(it) === it;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/is-integral-number.js?")},2222:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar getBuiltIn = __webpack_require__(97751);\nvar fails = __webpack_require__(79039);\nvar validateArgumentsLength = __webpack_require__(22812);\nvar toString = __webpack_require__(655);\nvar USE_NATIVE_URL = __webpack_require__(67416);\n\nvar URL = getBuiltIn('URL');\n\n// https://github.com/nodejs/node/issues/47505\n// https://github.com/denoland/deno/issues/18893\nvar THROWS_WITHOUT_ARGUMENTS = USE_NATIVE_URL && fails(function () {\n  URL.canParse();\n});\n\n// Bun ~ 1.0.30 bug\n// https://github.com/oven-sh/bun/issues/9250\nvar WRONG_ARITY = fails(function () {\n  return URL.canParse.length !== 1;\n});\n\n// `URL.canParse` method\n// https://url.spec.whatwg.org/#dom-url-canparse\n$({ target: 'URL', stat: true, forced: !THROWS_WITHOUT_ARGUMENTS || WRONG_ARITY }, {\n  canParse: function canParse(url) {\n    var length = validateArgumentsLength(arguments.length, 1);\n    var urlString = toString(url);\n    var base = length < 2 || arguments[1] === undefined ? undefined : toString(arguments[1]);\n    try {\n      return !!new URL(urlString, base);\n    } catch (error) {\n      return false;\n    }\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/web.url.can-parse.js?")},2259:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar defineWellKnownSymbol = __webpack_require__(70511);\n\n// `Symbol.iterator` well-known symbol\n// https://tc39.es/ecma262/#sec-symbol.iterator\ndefineWellKnownSymbol('iterator');\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.symbol.iterator.js?")},2293:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar anObject = __webpack_require__(28551);\nvar aConstructor = __webpack_require__(35548);\nvar isNullOrUndefined = __webpack_require__(64117);\nvar wellKnownSymbol = __webpack_require__(78227);\n\nvar SPECIES = wellKnownSymbol('species');\n\n// `SpeciesConstructor` abstract operation\n// https://tc39.es/ecma262/#sec-speciesconstructor\nmodule.exports = function (O, defaultConstructor) {\n  var C = anObject(O).constructor;\n  var S;\n  return C === undefined || isNullOrUndefined(S = anObject(C)[SPECIES]) ? defaultConstructor : aConstructor(S);\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/species-constructor.js?")},2360:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n/* global ActiveXObject -- old IE, WSH */\nvar anObject = __webpack_require__(28551);\nvar definePropertiesModule = __webpack_require__(96801);\nvar enumBugKeys = __webpack_require__(88727);\nvar hiddenKeys = __webpack_require__(30421);\nvar html = __webpack_require__(20397);\nvar documentCreateElement = __webpack_require__(4055);\nvar sharedKey = __webpack_require__(66119);\n\nvar GT = '>';\nvar LT = '<';\nvar PROTOTYPE = 'prototype';\nvar SCRIPT = 'script';\nvar IE_PROTO = sharedKey('IE_PROTO');\n\nvar EmptyConstructor = function () { /* empty */ };\n\nvar scriptTag = function (content) {\n  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;\n};\n\n// Create object with fake `null` prototype: use ActiveX Object with cleared prototype\nvar NullProtoObjectViaActiveX = function (activeXDocument) {\n  activeXDocument.write(scriptTag(''));\n  activeXDocument.close();\n  var temp = activeXDocument.parentWindow.Object;\n  // eslint-disable-next-line no-useless-assignment -- avoid memory leak\n  activeXDocument = null;\n  return temp;\n};\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar NullProtoObjectViaIFrame = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = documentCreateElement('iframe');\n  var JS = 'java' + SCRIPT + ':';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  html.appendChild(iframe);\n  // https://github.com/zloirock/core-js/issues/475\n  iframe.src = String(JS);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(scriptTag('document.F=Object'));\n  iframeDocument.close();\n  return iframeDocument.F;\n};\n\n// Check for document.domain and active x support\n// No need to use active x approach when document.domain is not set\n// see https://github.com/es-shims/es5-shim/issues/150\n// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\n// avoid IE GC bug\nvar activeXDocument;\nvar NullProtoObject = function () {\n  try {\n    activeXDocument = new ActiveXObject('htmlfile');\n  } catch (error) { /* ignore */ }\n  NullProtoObject = typeof document != 'undefined'\n    ? document.domain && activeXDocument\n      ? NullProtoObjectViaActiveX(activeXDocument) // old IE\n      : NullProtoObjectViaIFrame()\n    : NullProtoObjectViaActiveX(activeXDocument); // WSH\n  var length = enumBugKeys.length;\n  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];\n  return NullProtoObject();\n};\n\nhiddenKeys[IE_PROTO] = true;\n\n// `Object.create` method\n// https://tc39.es/ecma262/#sec-object.create\n// eslint-disable-next-line es/no-object-create -- safe\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    EmptyConstructor[PROTOTYPE] = anObject(O);\n    result = new EmptyConstructor();\n    EmptyConstructor[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = NullProtoObject();\n  return Properties === undefined ? result : definePropertiesModule.f(result, Properties);\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/object-create.js?")},2478:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar uncurryThis = __webpack_require__(79504);\nvar toObject = __webpack_require__(48981);\n\nvar floor = Math.floor;\nvar charAt = uncurryThis(''.charAt);\nvar replace = uncurryThis(''.replace);\nvar stringSlice = uncurryThis(''.slice);\n// eslint-disable-next-line redos/no-vulnerable -- safe\nvar SUBSTITUTION_SYMBOLS = /\\$([$&'`]|\\d{1,2}|<[^>]*>)/g;\nvar SUBSTITUTION_SYMBOLS_NO_NAMED = /\\$([$&'`]|\\d{1,2})/g;\n\n// `GetSubstitution` abstract operation\n// https://tc39.es/ecma262/#sec-getsubstitution\nmodule.exports = function (matched, str, position, captures, namedCaptures, replacement) {\n  var tailPos = position + matched.length;\n  var m = captures.length;\n  var symbols = SUBSTITUTION_SYMBOLS_NO_NAMED;\n  if (namedCaptures !== undefined) {\n    namedCaptures = toObject(namedCaptures);\n    symbols = SUBSTITUTION_SYMBOLS;\n  }\n  return replace(replacement, symbols, function (match, ch) {\n    var capture;\n    switch (charAt(ch, 0)) {\n      case '$': return '$';\n      case '&': return matched;\n      case '`': return stringSlice(str, 0, position);\n      case \"'\": return stringSlice(str, tailPos);\n      case '<':\n        capture = namedCaptures[stringSlice(ch, 1, -1)];\n        break;\n      default: // \\d\\d?\n        var n = +ch;\n        if (n === 0) return match;\n        if (n > m) {\n          var f = floor(n / 10);\n          if (f === 0) return match;\n          if (f <= m) return captures[f - 1] === undefined ? charAt(ch, 1) : captures[f - 1] + charAt(ch, 1);\n          return match;\n        }\n        capture = captures[n - 1];\n    }\n    return capture === undefined ? '' : capture;\n  });\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/get-substitution.js?")},2892:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar IS_PURE = __webpack_require__(96395);\nvar DESCRIPTORS = __webpack_require__(43724);\nvar globalThis = __webpack_require__(44576);\nvar path = __webpack_require__(19167);\nvar uncurryThis = __webpack_require__(79504);\nvar isForced = __webpack_require__(92796);\nvar hasOwn = __webpack_require__(39297);\nvar inheritIfRequired = __webpack_require__(23167);\nvar isPrototypeOf = __webpack_require__(1625);\nvar isSymbol = __webpack_require__(10757);\nvar toPrimitive = __webpack_require__(72777);\nvar fails = __webpack_require__(79039);\nvar getOwnPropertyNames = (__webpack_require__(38480).f);\nvar getOwnPropertyDescriptor = (__webpack_require__(77347).f);\nvar defineProperty = (__webpack_require__(24913).f);\nvar thisNumberValue = __webpack_require__(31240);\nvar trim = (__webpack_require__(43802).trim);\n\nvar NUMBER = 'Number';\nvar NativeNumber = globalThis[NUMBER];\nvar PureNumberNamespace = path[NUMBER];\nvar NumberPrototype = NativeNumber.prototype;\nvar TypeError = globalThis.TypeError;\nvar stringSlice = uncurryThis(''.slice);\nvar charCodeAt = uncurryThis(''.charCodeAt);\n\n// `ToNumeric` abstract operation\n// https://tc39.es/ecma262/#sec-tonumeric\nvar toNumeric = function (value) {\n  var primValue = toPrimitive(value, 'number');\n  return typeof primValue == 'bigint' ? primValue : toNumber(primValue);\n};\n\n// `ToNumber` abstract operation\n// https://tc39.es/ecma262/#sec-tonumber\nvar toNumber = function (argument) {\n  var it = toPrimitive(argument, 'number');\n  var first, third, radix, maxCode, digits, length, index, code;\n  if (isSymbol(it)) throw new TypeError('Cannot convert a Symbol value to a number');\n  if (typeof it == 'string' && it.length > 2) {\n    it = trim(it);\n    first = charCodeAt(it, 0);\n    if (first === 43 || first === 45) {\n      third = charCodeAt(it, 2);\n      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix\n    } else if (first === 48) {\n      switch (charCodeAt(it, 1)) {\n        // fast equal of /^0b[01]+$/i\n        case 66:\n        case 98:\n          radix = 2;\n          maxCode = 49;\n          break;\n        // fast equal of /^0o[0-7]+$/i\n        case 79:\n        case 111:\n          radix = 8;\n          maxCode = 55;\n          break;\n        default:\n          return +it;\n      }\n      digits = stringSlice(it, 2);\n      length = digits.length;\n      for (index = 0; index < length; index++) {\n        code = charCodeAt(digits, index);\n        // parseInt parses a string to a first unavailable symbol\n        // but ToNumber should return NaN if a string contains unavailable symbols\n        if (code < 48 || code > maxCode) return NaN;\n      } return parseInt(digits, radix);\n    }\n  } return +it;\n};\n\nvar FORCED = isForced(NUMBER, !NativeNumber(' 0o1') || !NativeNumber('0b1') || NativeNumber('+0x1'));\n\nvar calledWithNew = function (dummy) {\n  // includes check on 1..constructor(foo) case\n  return isPrototypeOf(NumberPrototype, dummy) && fails(function () { thisNumberValue(dummy); });\n};\n\n// `Number` constructor\n// https://tc39.es/ecma262/#sec-number-constructor\nvar NumberWrapper = function Number(value) {\n  var n = arguments.length < 1 ? 0 : NativeNumber(toNumeric(value));\n  return calledWithNew(this) ? inheritIfRequired(Object(n), this, NumberWrapper) : n;\n};\n\nNumberWrapper.prototype = NumberPrototype;\nif (FORCED && !IS_PURE) NumberPrototype.constructor = NumberWrapper;\n\n$({ global: true, constructor: true, wrap: true, forced: FORCED }, {\n  Number: NumberWrapper\n});\n\n// Use `internal/copy-constructor-properties` helper in `core-js@4`\nvar copyConstructorProperties = function (target, source) {\n  for (var keys = DESCRIPTORS ? getOwnPropertyNames(source) : (\n    // ES3:\n    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +\n    // ES2015 (in case, if modules with ES2015 Number statics required before):\n    'EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,' +\n    // ESNext\n    'fromString,range'\n  ).split(','), j = 0, key; keys.length > j; j++) {\n    if (hasOwn(source, key = keys[j]) && !hasOwn(target, key)) {\n      defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n    }\n  }\n};\n\nif (IS_PURE && PureNumberNamespace) copyConstructorProperties(path[NUMBER], PureNumberNamespace);\nif (FORCED || IS_PURE) copyConstructorProperties(path[NUMBER], NativeNumber);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.number.constructor.js?")},2945:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar globalThis = __webpack_require__(44576);\nvar getBuiltIn = __webpack_require__(97751);\nvar uncurryThis = __webpack_require__(79504);\nvar call = __webpack_require__(69565);\nvar fails = __webpack_require__(79039);\nvar toString = __webpack_require__(655);\nvar validateArgumentsLength = __webpack_require__(22812);\nvar c2i = (__webpack_require__(92804).c2i);\n\nvar disallowed = /[^\\d+/a-z]/i;\nvar whitespaces = /[\\t\\n\\f\\r ]+/g;\nvar finalEq = /[=]{1,2}$/;\n\nvar $atob = getBuiltIn('atob');\nvar fromCharCode = String.fromCharCode;\nvar charAt = uncurryThis(''.charAt);\nvar replace = uncurryThis(''.replace);\nvar exec = uncurryThis(disallowed.exec);\n\nvar BASIC = !!$atob && !fails(function () {\n  return $atob('aGk=') !== 'hi';\n});\n\nvar NO_SPACES_IGNORE = BASIC && fails(function () {\n  return $atob(' ') !== '';\n});\n\nvar NO_ENCODING_CHECK = BASIC && !fails(function () {\n  $atob('a');\n});\n\nvar NO_ARG_RECEIVING_CHECK = BASIC && !fails(function () {\n  $atob();\n});\n\nvar WRONG_ARITY = BASIC && $atob.length !== 1;\n\nvar FORCED = !BASIC || NO_SPACES_IGNORE || NO_ENCODING_CHECK || NO_ARG_RECEIVING_CHECK || WRONG_ARITY;\n\n// `atob` method\n// https://html.spec.whatwg.org/multipage/webappapis.html#dom-atob\n$({ global: true, bind: true, enumerable: true, forced: FORCED }, {\n  atob: function atob(data) {\n    validateArgumentsLength(arguments.length, 1);\n    // `webpack` dev server bug on IE global methods - use call(fn, global, ...)\n    if (BASIC && !NO_SPACES_IGNORE && !NO_ENCODING_CHECK) return call($atob, globalThis, data);\n    var string = replace(toString(data), whitespaces, '');\n    var output = '';\n    var position = 0;\n    var bc = 0;\n    var length, chr, bs;\n    if (string.length % 4 === 0) {\n      string = replace(string, finalEq, '');\n    }\n    length = string.length;\n    if (length % 4 === 1 || exec(disallowed, string)) {\n      throw new (getBuiltIn('DOMException'))('The string is not correctly encoded', 'InvalidCharacterError');\n    }\n    while (position < length) {\n      chr = charAt(string, position++);\n      bs = bc % 4 ? bs * 64 + c2i[chr] : c2i[chr];\n      if (bc++ % 4) output += fromCharCode(255 & bs >> (-2 * bc & 6));\n    } return output;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/web.atob.js?")},2952:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar bind = __webpack_require__(76080);\nvar uncurryThis = __webpack_require__(79504);\nvar IndexedObject = __webpack_require__(47055);\nvar toObject = __webpack_require__(48981);\nvar lengthOfArrayLike = __webpack_require__(26198);\nvar MapHelpers = __webpack_require__(72248);\n\nvar Map = MapHelpers.Map;\nvar mapGet = MapHelpers.get;\nvar mapHas = MapHelpers.has;\nvar mapSet = MapHelpers.set;\nvar push = uncurryThis([].push);\n\n// `Array.prototype.groupToMap` method\n// https://github.com/tc39/proposal-array-grouping\nmodule.exports = function groupToMap(callbackfn /* , thisArg */) {\n  var O = toObject(this);\n  var self = IndexedObject(O);\n  var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  var map = new Map();\n  var length = lengthOfArrayLike(self);\n  var index = 0;\n  var key, value;\n  for (;length > index; index++) {\n    value = self[index];\n    key = boundFunction(value, index, O);\n    if (mapHas(map, key)) push(mapGet(map, key), value);\n    else mapSet(map, key, [value]);\n  } return map;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/array-group-to-map.js?")},3064:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar $find = (__webpack_require__(36639).find);\n\n// `AsyncIterator.prototype.find` method\n// https://github.com/tc39/proposal-async-iterator-helpers\n$({ target: 'AsyncIterator', proto: true, real: true }, {\n  find: function find(predicate) {\n    return $find(this, predicate);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.async-iterator.find.js?")},3238:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar globalThis = __webpack_require__(44576);\nvar NATIVE_ARRAY_BUFFER = __webpack_require__(77811);\nvar arrayBufferByteLength = __webpack_require__(67394);\n\nvar DataView = globalThis.DataView;\n\nmodule.exports = function (O) {\n  if (!NATIVE_ARRAY_BUFFER || arrayBufferByteLength(O) !== 0) return false;\n  try {\n    // eslint-disable-next-line no-new -- thrower\n    new DataView(O);\n    return false;\n  } catch (error) {\n    return true;\n  }\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/array-buffer-is-detached.js?")},3296:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove this module from `core-js@4` since it's replaced to module below\n__webpack_require__(45806);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/web.url.js?")},3362:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove this module from `core-js@4` since it's split to modules listed below\n__webpack_require__(10436);\n__webpack_require__(16499);\n__webpack_require__(82003);\n__webpack_require__(7743);\n__webpack_require__(51481);\n__webpack_require__(40280);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.promise.js?")},3451:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar uncurryThis = __webpack_require__(79504);\nvar hiddenKeys = __webpack_require__(30421);\nvar isObject = __webpack_require__(20034);\nvar hasOwn = __webpack_require__(39297);\nvar defineProperty = (__webpack_require__(24913).f);\nvar getOwnPropertyNamesModule = __webpack_require__(38480);\nvar getOwnPropertyNamesExternalModule = __webpack_require__(10298);\nvar isExtensible = __webpack_require__(34124);\nvar uid = __webpack_require__(33392);\nvar FREEZING = __webpack_require__(92744);\n\nvar REQUIRED = false;\nvar METADATA = uid('meta');\nvar id = 0;\n\nvar setMetadata = function (it) {\n  defineProperty(it, METADATA, { value: {\n    objectID: 'O' + id++, // object ID\n    weakData: {}          // weak collections IDs\n  } });\n};\n\nvar fastKey = function (it, create) {\n  // return a primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!hasOwn(it, METADATA)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMetadata(it);\n  // return object ID\n  } return it[METADATA].objectID;\n};\n\nvar getWeakData = function (it, create) {\n  if (!hasOwn(it, METADATA)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMetadata(it);\n  // return the store of weak collections IDs\n  } return it[METADATA].weakData;\n};\n\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZING && REQUIRED && isExtensible(it) && !hasOwn(it, METADATA)) setMetadata(it);\n  return it;\n};\n\nvar enable = function () {\n  meta.enable = function () { /* empty */ };\n  REQUIRED = true;\n  var getOwnPropertyNames = getOwnPropertyNamesModule.f;\n  var splice = uncurryThis([].splice);\n  var test = {};\n  test[METADATA] = 1;\n\n  // prevent exposing of metadata key\n  if (getOwnPropertyNames(test).length) {\n    getOwnPropertyNamesModule.f = function (it) {\n      var result = getOwnPropertyNames(it);\n      for (var i = 0, length = result.length; i < length; i++) {\n        if (result[i] === METADATA) {\n          splice(result, i, 1);\n          break;\n        }\n      } return result;\n    };\n\n    $({ target: 'Object', stat: true, forced: true }, {\n      getOwnPropertyNames: getOwnPropertyNamesExternalModule.f\n    });\n  }\n};\n\nvar meta = module.exports = {\n  enable: enable,\n  fastKey: fastKey,\n  getWeakData: getWeakData,\n  onFreeze: onFreeze\n};\n\nhiddenKeys[METADATA] = true;\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/internal-metadata.js?")},3470:module=>{"use strict";eval("\n// `SameValue` abstract operation\n// https://tc39.es/ecma262/#sec-samevalue\n// eslint-disable-next-line es/no-object-is -- safe\nmodule.exports = Object.is || function is(x, y) {\n  // eslint-disable-next-line no-self-compare -- NaN check\n  return x === y ? x !== 0 || 1 / x === 1 / y : x !== x && y !== y;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/same-value.js?")},3607:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar userAgent = __webpack_require__(82839);\n\nvar webkit = userAgent.match(/AppleWebKit\\/(\\d+)\\./);\n\nmodule.exports = !!webkit && +webkit[1];\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/environment-webkit-version.js?")},3690:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar createTypedArrayConstructor = __webpack_require__(15823);\n\n// `Uint16Array` constructor\n// https://tc39.es/ecma262/#sec-typedarray-objects\ncreateTypedArrayConstructor('Uint16', function (init) {\n  return function Uint16Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.uint16-array.js?")},3717:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// based on https://github.com/bestiejs/punycode.js/blob/master/punycode.js\nvar uncurryThis = __webpack_require__(79504);\n\nvar maxInt = 2147483647; // aka. 0x7FFFFFFF or 2^31-1\nvar base = 36;\nvar tMin = 1;\nvar tMax = 26;\nvar skew = 38;\nvar damp = 700;\nvar initialBias = 72;\nvar initialN = 128; // 0x80\nvar delimiter = '-'; // '\\x2D'\nvar regexNonASCII = /[^\\0-\\u007E]/; // non-ASCII chars\nvar regexSeparators = /[.\\u3002\\uFF0E\\uFF61]/g; // RFC 3490 separators\nvar OVERFLOW_ERROR = 'Overflow: input needs wider integers to process';\nvar baseMinusTMin = base - tMin;\n\nvar $RangeError = RangeError;\nvar exec = uncurryThis(regexSeparators.exec);\nvar floor = Math.floor;\nvar fromCharCode = String.fromCharCode;\nvar charCodeAt = uncurryThis(''.charCodeAt);\nvar join = uncurryThis([].join);\nvar push = uncurryThis([].push);\nvar replace = uncurryThis(''.replace);\nvar split = uncurryThis(''.split);\nvar toLowerCase = uncurryThis(''.toLowerCase);\n\n/**\n * Creates an array containing the numeric code points of each Unicode\n * character in the string. While JavaScript uses UCS-2 internally,\n * this function will convert a pair of surrogate halves (each of which\n * UCS-2 exposes as separate characters) into a single code point,\n * matching UTF-16.\n */\nvar ucs2decode = function (string) {\n  var output = [];\n  var counter = 0;\n  var length = string.length;\n  while (counter < length) {\n    var value = charCodeAt(string, counter++);\n    if (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n      // It's a high surrogate, and there is a next character.\n      var extra = charCodeAt(string, counter++);\n      if ((extra & 0xFC00) === 0xDC00) { // Low surrogate.\n        push(output, ((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n      } else {\n        // It's an unmatched surrogate; only append this code unit, in case the\n        // next code unit is the high surrogate of a surrogate pair.\n        push(output, value);\n        counter--;\n      }\n    } else {\n      push(output, value);\n    }\n  }\n  return output;\n};\n\n/**\n * Converts a digit/integer into a basic code point.\n */\nvar digitToBasic = function (digit) {\n  //  0..25 map to ASCII a..z or A..Z\n  // 26..35 map to ASCII 0..9\n  return digit + 22 + 75 * (digit < 26);\n};\n\n/**\n * Bias adaptation function as per section 3.4 of RFC 3492.\n * https://tools.ietf.org/html/rfc3492#section-3.4\n */\nvar adapt = function (delta, numPoints, firstTime) {\n  var k = 0;\n  delta = firstTime ? floor(delta / damp) : delta >> 1;\n  delta += floor(delta / numPoints);\n  while (delta > baseMinusTMin * tMax >> 1) {\n    delta = floor(delta / baseMinusTMin);\n    k += base;\n  }\n  return floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n};\n\n/**\n * Converts a string of Unicode symbols (e.g. a domain name label) to a\n * Punycode string of ASCII-only symbols.\n */\nvar encode = function (input) {\n  var output = [];\n\n  // Convert the input in UCS-2 to an array of Unicode code points.\n  input = ucs2decode(input);\n\n  // Cache the length.\n  var inputLength = input.length;\n\n  // Initialize the state.\n  var n = initialN;\n  var delta = 0;\n  var bias = initialBias;\n  var i, currentValue;\n\n  // Handle the basic code points.\n  for (i = 0; i < input.length; i++) {\n    currentValue = input[i];\n    if (currentValue < 0x80) {\n      push(output, fromCharCode(currentValue));\n    }\n  }\n\n  var basicLength = output.length; // number of basic code points.\n  var handledCPCount = basicLength; // number of code points that have been handled;\n\n  // Finish the basic string with a delimiter unless it's empty.\n  if (basicLength) {\n    push(output, delimiter);\n  }\n\n  // Main encoding loop:\n  while (handledCPCount < inputLength) {\n    // All non-basic code points < n have been handled already. Find the next larger one:\n    var m = maxInt;\n    for (i = 0; i < input.length; i++) {\n      currentValue = input[i];\n      if (currentValue >= n && currentValue < m) {\n        m = currentValue;\n      }\n    }\n\n    // Increase `delta` enough to advance the decoder's <n,i> state to <m,0>, but guard against overflow.\n    var handledCPCountPlusOne = handledCPCount + 1;\n    if (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n      throw new $RangeError(OVERFLOW_ERROR);\n    }\n\n    delta += (m - n) * handledCPCountPlusOne;\n    n = m;\n\n    for (i = 0; i < input.length; i++) {\n      currentValue = input[i];\n      if (currentValue < n && ++delta > maxInt) {\n        throw new $RangeError(OVERFLOW_ERROR);\n      }\n      if (currentValue === n) {\n        // Represent delta as a generalized variable-length integer.\n        var q = delta;\n        var k = base;\n        while (true) {\n          var t = k <= bias ? tMin : k >= bias + tMax ? tMax : k - bias;\n          if (q < t) break;\n          var qMinusT = q - t;\n          var baseMinusT = base - t;\n          push(output, fromCharCode(digitToBasic(t + qMinusT % baseMinusT)));\n          q = floor(qMinusT / baseMinusT);\n          k += base;\n        }\n\n        push(output, fromCharCode(digitToBasic(q)));\n        bias = adapt(delta, handledCPCountPlusOne, handledCPCount === basicLength);\n        delta = 0;\n        handledCPCount++;\n      }\n    }\n\n    delta++;\n    n++;\n  }\n  return join(output, '');\n};\n\nmodule.exports = function (input) {\n  var encoded = [];\n  var labels = split(replace(toLowerCase(input), regexSeparators, '\\u002E'), '.');\n  var i, label;\n  for (i = 0; i < labels.length; i++) {\n    label = labels[i];\n    push(encoded, exec(regexNonASCII, label) ? 'xn--' + encode(label) : label);\n  }\n  return join(encoded, '.');\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/string-punycode-to-ascii.js?")},3949:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(7588);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.iterator.for-each.js?")},3995:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar uncurryThis = __webpack_require__(79504);\nvar aDataView = __webpack_require__(24194);\nvar toIndex = __webpack_require__(57696);\n// TODO: Replace with module dependency in `core-js@4`\nvar log2 = __webpack_require__(67787);\nvar roundTiesToEven = __webpack_require__(53602);\n\nvar pow = Math.pow;\n\nvar MIN_INFINITY16 = 65520; // (2 - 2 ** -11) * 2 ** 15\nvar MIN_NORMAL16 = 0.000061005353927612305; // (1 - 2 ** -11) * 2 ** -14\nvar REC_MIN_SUBNORMAL16 = 16777216; // 2 ** 10 * 2 ** 14\nvar REC_SIGNIFICAND_DENOM16 = 1024; // 2 ** 10;\n\nvar packFloat16 = function (value) {\n  // eslint-disable-next-line no-self-compare -- NaN check\n  if (value !== value) return 0x7E00; // NaN\n  if (value === 0) return (1 / value === -Infinity) << 15; // +0 or -0\n\n  var neg = value < 0;\n  if (neg) value = -value;\n  if (value >= MIN_INFINITY16) return neg << 15 | 0x7C00; // Infinity\n  if (value < MIN_NORMAL16) return neg << 15 | roundTiesToEven(value * REC_MIN_SUBNORMAL16); // subnormal\n\n  // normal\n  var exponent = log2(value) | 0;\n  if (exponent === -15) {\n    // we round from a value between 2 ** -15 * (1 + 1022/1024) (the largest subnormal) and 2 ** -14 * (1 + 0/1024) (the smallest normal)\n    // to the latter (former impossible because of the subnormal check above)\n    return neg << 15 | REC_SIGNIFICAND_DENOM16;\n  }\n  var significand = roundTiesToEven((value * pow(2, -exponent) - 1) * REC_SIGNIFICAND_DENOM16);\n  if (significand === REC_SIGNIFICAND_DENOM16) {\n    // we round from a value between 2 ** n * (1 + 1023/1024) and 2 ** (n + 1) * (1 + 0/1024) to the latter\n    return neg << 15 | exponent + 16 << 10;\n  }\n  return neg << 15 | exponent + 15 << 10 | significand;\n};\n\n// eslint-disable-next-line es/no-typed-arrays -- safe\nvar setUint16 = uncurryThis(DataView.prototype.setUint16);\n\n// `DataView.prototype.setFloat16` method\n// https://tc39.es/ecma262/#sec-dataview.prototype.setfloat16\n$({ target: 'DataView', proto: true }, {\n  setFloat16: function setFloat16(byteOffset, value /* , littleEndian */) {\n    aDataView(this);\n    var offset = toIndex(byteOffset);\n    var bytes = packFloat16(+value);\n    return setUint16(this, offset, bytes, arguments.length > 2 ? arguments[2] : false);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.data-view.set-float16.js?")},4055:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar globalThis = __webpack_require__(44576);\nvar isObject = __webpack_require__(20034);\n\nvar document = globalThis.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/document-create-element.js?")},4235:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// based on Shewchuk's algorithm for exactly floating point addition\n// adapted from https://github.com/tc39/proposal-math-sum/blob/3513d58323a1ae25560e8700aa5294500c6c9287/polyfill/polyfill.mjs\nvar $ = __webpack_require__(46518);\nvar uncurryThis = __webpack_require__(79504);\nvar iterate = __webpack_require__(72652);\n\nvar $RangeError = RangeError;\nvar $TypeError = TypeError;\nvar $Infinity = Infinity;\nvar $NaN = NaN;\nvar abs = Math.abs;\nvar pow = Math.pow;\nvar push = uncurryThis([].push);\n\nvar POW_2_1023 = pow(2, 1023);\nvar MAX_SAFE_INTEGER = pow(2, 53) - 1; // 2 ** 53 - 1 === 9007199254740992\nvar MAX_DOUBLE = Number.MAX_VALUE; // 2 ** 1024 - 2 ** (1023 - 52) === 1.79769313486231570815e+308\nvar MAX_ULP = pow(2, 971); // 2 ** (1023 - 52) === 1.99584030953471981166e+292\n\nvar NOT_A_NUMBER = {};\nvar MINUS_INFINITY = {};\nvar PLUS_INFINITY = {};\nvar MINUS_ZERO = {};\nvar FINITE = {};\n\n// prerequisite: abs(x) >= abs(y)\nvar twosum = function (x, y) {\n  var hi = x + y;\n  var lo = y - (hi - x);\n  return { hi: hi, lo: lo };\n};\n\n// `Math.sumPrecise` method\n// https://github.com/tc39/proposal-math-sum\n$({ target: 'Math', stat: true }, {\n  // eslint-disable-next-line max-statements -- ok\n  sumPrecise: function sumPrecise(items) {\n    var numbers = [];\n    var count = 0;\n    var state = MINUS_ZERO;\n\n    iterate(items, function (n) {\n      if (++count >= MAX_SAFE_INTEGER) throw new $RangeError('Maximum allowed index exceeded');\n      if (typeof n != 'number') throw new $TypeError('Value is not a number');\n      if (state !== NOT_A_NUMBER) {\n        // eslint-disable-next-line no-self-compare -- NaN check\n        if (n !== n) state = NOT_A_NUMBER;\n        else if (n === $Infinity) state = state === MINUS_INFINITY ? NOT_A_NUMBER : PLUS_INFINITY;\n        else if (n === -$Infinity) state = state === PLUS_INFINITY ? NOT_A_NUMBER : MINUS_INFINITY;\n        else if ((n !== 0 || (1 / n) === $Infinity) && (state === MINUS_ZERO || state === FINITE)) {\n          state = FINITE;\n          push(numbers, n);\n        }\n      }\n    });\n\n    switch (state) {\n      case NOT_A_NUMBER: return $NaN;\n      case MINUS_INFINITY: return -$Infinity;\n      case PLUS_INFINITY: return $Infinity;\n      case MINUS_ZERO: return -0;\n    }\n\n    var partials = [];\n    var overflow = 0; // conceptually 2 ** 1024 times this value; the final partial is biased by this amount\n    var x, y, sum, hi, lo, tmp;\n\n    for (var i = 0; i < numbers.length; i++) {\n      x = numbers[i];\n      var actuallyUsedPartials = 0;\n      for (var j = 0; j < partials.length; j++) {\n        y = partials[j];\n        if (abs(x) < abs(y)) {\n          tmp = x;\n          x = y;\n          y = tmp;\n        }\n        sum = twosum(x, y);\n        hi = sum.hi;\n        lo = sum.lo;\n        if (abs(hi) === $Infinity) {\n          var sign = hi === $Infinity ? 1 : -1;\n          overflow += sign;\n\n          x = (x - (sign * POW_2_1023)) - (sign * POW_2_1023);\n          if (abs(x) < abs(y)) {\n            tmp = x;\n            x = y;\n            y = tmp;\n          }\n          sum = twosum(x, y);\n          hi = sum.hi;\n          lo = sum.lo;\n        }\n        if (lo !== 0) partials[actuallyUsedPartials++] = lo;\n        x = hi;\n      }\n      partials.length = actuallyUsedPartials;\n      if (x !== 0) push(partials, x);\n    }\n\n    // compute the exact sum of partials, stopping once we lose precision\n    var n = partials.length - 1;\n    hi = 0;\n    lo = 0;\n\n    if (overflow !== 0) {\n      var next = n >= 0 ? partials[n] : 0;\n      n--;\n      if (abs(overflow) > 1 || (overflow > 0 && next > 0) || (overflow < 0 && next < 0)) {\n        return overflow > 0 ? $Infinity : -$Infinity;\n      }\n      // here we actually have to do the arithmetic\n      // drop a factor of 2 so we can do it without overflow\n      // assert(abs(overflow) === 1)\n      sum = twosum(overflow * POW_2_1023, next / 2);\n      hi = sum.hi;\n      lo = sum.lo;\n      lo *= 2;\n      if (abs(2 * hi) === $Infinity) {\n        // rounding to the maximum value\n        if (hi > 0) {\n          return (hi === POW_2_1023 && lo === -(MAX_ULP / 2) && n >= 0 && partials[n] < 0) ? MAX_DOUBLE : $Infinity;\n        } return (hi === -POW_2_1023 && lo === (MAX_ULP / 2) && n >= 0 && partials[n] > 0) ? -MAX_DOUBLE : -$Infinity;\n      }\n\n      if (lo !== 0) {\n        partials[++n] = lo;\n        lo = 0;\n      }\n\n      hi *= 2;\n    }\n\n    while (n >= 0) {\n      sum = twosum(hi, partials[n--]);\n      hi = sum.hi;\n      lo = sum.lo;\n      if (lo !== 0) break;\n    }\n\n    if (n >= 0 && ((lo < 0 && partials[n] < 0) || (lo > 0 && partials[n] > 0))) {\n      y = lo * 2;\n      x = hi + y;\n      if (y === x - hi) hi = x;\n    }\n\n    return hi;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.math.sum-precise.js?")},4294:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar getBuiltIn = __webpack_require__(97751);\nvar apply = __webpack_require__(18745);\nvar fails = __webpack_require__(79039);\nvar wrapErrorConstructorWithCause = __webpack_require__(14601);\n\nvar AGGREGATE_ERROR = 'AggregateError';\nvar $AggregateError = getBuiltIn(AGGREGATE_ERROR);\n\nvar FORCED = !fails(function () {\n  return $AggregateError([1]).errors[0] !== 1;\n}) && fails(function () {\n  return $AggregateError([1], AGGREGATE_ERROR, { cause: 7 }).cause !== 7;\n});\n\n// https://tc39.es/ecma262/#sec-aggregate-error\n$({ global: true, constructor: true, arity: 2, forced: FORCED }, {\n  AggregateError: wrapErrorConstructorWithCause(AGGREGATE_ERROR, function (init) {\n    // eslint-disable-next-line no-unused-vars -- required for functions `.length`\n    return function AggregateError(errors, message) { return apply(init, this, arguments); };\n  }, FORCED, true)\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.aggregate-error.cause.js?")},4360:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar floatRound = __webpack_require__(33164);\n\nvar FLOAT16_EPSILON = 0.0009765625;\nvar FLOAT16_MAX_VALUE = 65504;\nvar FLOAT16_MIN_VALUE = 6.103515625e-05;\n\n// `Math.f16round` method\n// https://tc39.es/ecma262/#sec-math.f16round\n$({ target: 'Math', stat: true }, {\n  f16round: function f16round(x) {\n    return floatRound(x, FLOAT16_EPSILON, FLOAT16_MAX_VALUE, FLOAT16_MIN_VALUE);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.math.f16round.js?")},4495:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n/* eslint-disable es/no-symbol -- required for testing */\nvar V8_VERSION = __webpack_require__(39519);\nvar fails = __webpack_require__(79039);\nvar globalThis = __webpack_require__(44576);\n\nvar $String = globalThis.String;\n\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- required for testing\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  var symbol = Symbol('symbol detection');\n  // Chrome 38 Symbol has incorrect toString conversion\n  // `get-own-property-symbols` polyfill symbols converted to object are not Symbol instances\n  // nb: Do not call `String` directly to avoid this being optimized out to `symbol+''` which will,\n  // of course, fail.\n  return !$String(symbol) || !(Object(symbol) instanceof Symbol) ||\n    // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances\n    !Symbol.sham && V8_VERSION && V8_VERSION < 41;\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/symbol-constructor-detection.js?")},4731:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar globalThis = __webpack_require__(44576);\nvar setToStringTag = __webpack_require__(10687);\n\n// JSON[@@toStringTag] property\n// https://tc39.es/ecma262/#sec-json-@@tostringtag\nsetToStringTag(globalThis.JSON, 'JSON', true);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.json.to-string-tag.js?")},5240:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar collection = __webpack_require__(16468);\nvar collectionWeak = __webpack_require__(91625);\n\n// `WeakSet` constructor\n// https://tc39.es/ecma262/#sec-weakset-constructor\ncollection('WeakSet', function (init) {\n  return function WeakSet() { return init(this, arguments.length ? arguments[0] : undefined); };\n}, collectionWeak);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.weak-set.constructor.js?")},5506:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar $entries = (__webpack_require__(32357).entries);\n\n// `Object.entries` method\n// https://tc39.es/ecma262/#sec-object.entries\n$({ target: 'Object', stat: true }, {\n  entries: function entries(O) {\n    return $entries(O);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.object.entries.js?")},5745:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar createHTML = __webpack_require__(77240);\nvar forcedStringHTMLMethod = __webpack_require__(23061);\n\n// `String.prototype.bold` method\n// https://tc39.es/ecma262/#sec-string.prototype.bold\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('bold') }, {\n  bold: function bold() {\n    return createHTML(this, 'b', '', '');\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.string.bold.js?")},5746:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar call = __webpack_require__(69565);\nvar fixRegExpWellKnownSymbolLogic = __webpack_require__(89228);\nvar anObject = __webpack_require__(28551);\nvar isNullOrUndefined = __webpack_require__(64117);\nvar requireObjectCoercible = __webpack_require__(67750);\nvar sameValue = __webpack_require__(3470);\nvar toString = __webpack_require__(655);\nvar getMethod = __webpack_require__(55966);\nvar regExpExec = __webpack_require__(56682);\n\n// @@search logic\nfixRegExpWellKnownSymbolLogic('search', function (SEARCH, nativeSearch, maybeCallNative) {\n  return [\n    // `String.prototype.search` method\n    // https://tc39.es/ecma262/#sec-string.prototype.search\n    function search(regexp) {\n      var O = requireObjectCoercible(this);\n      var searcher = isNullOrUndefined(regexp) ? undefined : getMethod(regexp, SEARCH);\n      return searcher ? call(searcher, regexp, O) : new RegExp(regexp)[SEARCH](toString(O));\n    },\n    // `RegExp.prototype[@@search]` method\n    // https://tc39.es/ecma262/#sec-regexp.prototype-@@search\n    function (string) {\n      var rx = anObject(this);\n      var S = toString(string);\n      var res = maybeCallNative(nativeSearch, rx, S);\n\n      if (res.done) return res.value;\n\n      var previousLastIndex = rx.lastIndex;\n      if (!sameValue(previousLastIndex, 0)) rx.lastIndex = 0;\n      var result = regExpExec(rx, S);\n      if (!sameValue(rx.lastIndex, previousLastIndex)) rx.lastIndex = previousLastIndex;\n      return result === null ? -1 : result.index;\n    }\n  ];\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.string.search.js?")},5914:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar sign = __webpack_require__(77782);\n\n// `Math.sign` method\n// https://tc39.es/ecma262/#sec-math.sign\n$({ target: 'Math', stat: true }, {\n  sign: sign\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.math.sign.js?")},6469:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar wellKnownSymbol = __webpack_require__(78227);\nvar create = __webpack_require__(2360);\nvar defineProperty = (__webpack_require__(24913).f);\n\nvar UNSCOPABLES = wellKnownSymbol('unscopables');\nvar ArrayPrototype = Array.prototype;\n\n// Array.prototype[@@unscopables]\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\nif (ArrayPrototype[UNSCOPABLES] === undefined) {\n  defineProperty(ArrayPrototype, UNSCOPABLES, {\n    configurable: true,\n    value: create(null)\n  });\n}\n\n// add a key to Array.prototype[@@unscopables]\nmodule.exports = function (key) {\n  ArrayPrototype[UNSCOPABLES][key] = true;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/add-to-unscopables.js?")},6761:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar globalThis = __webpack_require__(44576);\nvar call = __webpack_require__(69565);\nvar uncurryThis = __webpack_require__(79504);\nvar IS_PURE = __webpack_require__(96395);\nvar DESCRIPTORS = __webpack_require__(43724);\nvar NATIVE_SYMBOL = __webpack_require__(4495);\nvar fails = __webpack_require__(79039);\nvar hasOwn = __webpack_require__(39297);\nvar isPrototypeOf = __webpack_require__(1625);\nvar anObject = __webpack_require__(28551);\nvar toIndexedObject = __webpack_require__(25397);\nvar toPropertyKey = __webpack_require__(56969);\nvar $toString = __webpack_require__(655);\nvar createPropertyDescriptor = __webpack_require__(6980);\nvar nativeObjectCreate = __webpack_require__(2360);\nvar objectKeys = __webpack_require__(71072);\nvar getOwnPropertyNamesModule = __webpack_require__(38480);\nvar getOwnPropertyNamesExternal = __webpack_require__(10298);\nvar getOwnPropertySymbolsModule = __webpack_require__(33717);\nvar getOwnPropertyDescriptorModule = __webpack_require__(77347);\nvar definePropertyModule = __webpack_require__(24913);\nvar definePropertiesModule = __webpack_require__(96801);\nvar propertyIsEnumerableModule = __webpack_require__(48773);\nvar defineBuiltIn = __webpack_require__(36840);\nvar defineBuiltInAccessor = __webpack_require__(62106);\nvar shared = __webpack_require__(25745);\nvar sharedKey = __webpack_require__(66119);\nvar hiddenKeys = __webpack_require__(30421);\nvar uid = __webpack_require__(33392);\nvar wellKnownSymbol = __webpack_require__(78227);\nvar wrappedWellKnownSymbolModule = __webpack_require__(1951);\nvar defineWellKnownSymbol = __webpack_require__(70511);\nvar defineSymbolToPrimitive = __webpack_require__(58242);\nvar setToStringTag = __webpack_require__(10687);\nvar InternalStateModule = __webpack_require__(91181);\nvar $forEach = (__webpack_require__(59213).forEach);\n\nvar HIDDEN = sharedKey('hidden');\nvar SYMBOL = 'Symbol';\nvar PROTOTYPE = 'prototype';\n\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(SYMBOL);\n\nvar ObjectPrototype = Object[PROTOTYPE];\nvar $Symbol = globalThis.Symbol;\nvar SymbolPrototype = $Symbol && $Symbol[PROTOTYPE];\nvar RangeError = globalThis.RangeError;\nvar TypeError = globalThis.TypeError;\nvar QObject = globalThis.QObject;\nvar nativeGetOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\nvar nativeDefineProperty = definePropertyModule.f;\nvar nativeGetOwnPropertyNames = getOwnPropertyNamesExternal.f;\nvar nativePropertyIsEnumerable = propertyIsEnumerableModule.f;\nvar push = uncurryThis([].push);\n\nvar AllSymbols = shared('symbols');\nvar ObjectPrototypeSymbols = shared('op-symbols');\nvar WellKnownSymbolsStore = shared('wks');\n\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar USE_SETTER = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar fallbackDefineProperty = function (O, P, Attributes) {\n  var ObjectPrototypeDescriptor = nativeGetOwnPropertyDescriptor(ObjectPrototype, P);\n  if (ObjectPrototypeDescriptor) delete ObjectPrototype[P];\n  nativeDefineProperty(O, P, Attributes);\n  if (ObjectPrototypeDescriptor && O !== ObjectPrototype) {\n    nativeDefineProperty(ObjectPrototype, P, ObjectPrototypeDescriptor);\n  }\n};\n\nvar setSymbolDescriptor = DESCRIPTORS && fails(function () {\n  return nativeObjectCreate(nativeDefineProperty({}, 'a', {\n    get: function () { return nativeDefineProperty(this, 'a', { value: 7 }).a; }\n  })).a !== 7;\n}) ? fallbackDefineProperty : nativeDefineProperty;\n\nvar wrap = function (tag, description) {\n  var symbol = AllSymbols[tag] = nativeObjectCreate(SymbolPrototype);\n  setInternalState(symbol, {\n    type: SYMBOL,\n    tag: tag,\n    description: description\n  });\n  if (!DESCRIPTORS) symbol.description = description;\n  return symbol;\n};\n\nvar $defineProperty = function defineProperty(O, P, Attributes) {\n  if (O === ObjectPrototype) $defineProperty(ObjectPrototypeSymbols, P, Attributes);\n  anObject(O);\n  var key = toPropertyKey(P);\n  anObject(Attributes);\n  if (hasOwn(AllSymbols, key)) {\n    if (!Attributes.enumerable) {\n      if (!hasOwn(O, HIDDEN)) nativeDefineProperty(O, HIDDEN, createPropertyDescriptor(1, nativeObjectCreate(null)));\n      O[HIDDEN][key] = true;\n    } else {\n      if (hasOwn(O, HIDDEN) && O[HIDDEN][key]) O[HIDDEN][key] = false;\n      Attributes = nativeObjectCreate(Attributes, { enumerable: createPropertyDescriptor(0, false) });\n    } return setSymbolDescriptor(O, key, Attributes);\n  } return nativeDefineProperty(O, key, Attributes);\n};\n\nvar $defineProperties = function defineProperties(O, Properties) {\n  anObject(O);\n  var properties = toIndexedObject(Properties);\n  var keys = objectKeys(properties).concat($getOwnPropertySymbols(properties));\n  $forEach(keys, function (key) {\n    if (!DESCRIPTORS || call($propertyIsEnumerable, properties, key)) $defineProperty(O, key, properties[key]);\n  });\n  return O;\n};\n\nvar $create = function create(O, Properties) {\n  return Properties === undefined ? nativeObjectCreate(O) : $defineProperties(nativeObjectCreate(O), Properties);\n};\n\nvar $propertyIsEnumerable = function propertyIsEnumerable(V) {\n  var P = toPropertyKey(V);\n  var enumerable = call(nativePropertyIsEnumerable, this, P);\n  if (this === ObjectPrototype && hasOwn(AllSymbols, P) && !hasOwn(ObjectPrototypeSymbols, P)) return false;\n  return enumerable || !hasOwn(this, P) || !hasOwn(AllSymbols, P) || hasOwn(this, HIDDEN) && this[HIDDEN][P]\n    ? enumerable : true;\n};\n\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(O, P) {\n  var it = toIndexedObject(O);\n  var key = toPropertyKey(P);\n  if (it === ObjectPrototype && hasOwn(AllSymbols, key) && !hasOwn(ObjectPrototypeSymbols, key)) return;\n  var descriptor = nativeGetOwnPropertyDescriptor(it, key);\n  if (descriptor && hasOwn(AllSymbols, key) && !(hasOwn(it, HIDDEN) && it[HIDDEN][key])) {\n    descriptor.enumerable = true;\n  }\n  return descriptor;\n};\n\nvar $getOwnPropertyNames = function getOwnPropertyNames(O) {\n  var names = nativeGetOwnPropertyNames(toIndexedObject(O));\n  var result = [];\n  $forEach(names, function (key) {\n    if (!hasOwn(AllSymbols, key) && !hasOwn(hiddenKeys, key)) push(result, key);\n  });\n  return result;\n};\n\nvar $getOwnPropertySymbols = function (O) {\n  var IS_OBJECT_PROTOTYPE = O === ObjectPrototype;\n  var names = nativeGetOwnPropertyNames(IS_OBJECT_PROTOTYPE ? ObjectPrototypeSymbols : toIndexedObject(O));\n  var result = [];\n  $forEach(names, function (key) {\n    if (hasOwn(AllSymbols, key) && (!IS_OBJECT_PROTOTYPE || hasOwn(ObjectPrototype, key))) {\n      push(result, AllSymbols[key]);\n    }\n  });\n  return result;\n};\n\n// `Symbol` constructor\n// https://tc39.es/ecma262/#sec-symbol-constructor\nif (!NATIVE_SYMBOL) {\n  $Symbol = function Symbol() {\n    if (isPrototypeOf(SymbolPrototype, this)) throw new TypeError('Symbol is not a constructor');\n    var description = !arguments.length || arguments[0] === undefined ? undefined : $toString(arguments[0]);\n    var tag = uid(description);\n    var setter = function (value) {\n      var $this = this === undefined ? globalThis : this;\n      if ($this === ObjectPrototype) call(setter, ObjectPrototypeSymbols, value);\n      if (hasOwn($this, HIDDEN) && hasOwn($this[HIDDEN], tag)) $this[HIDDEN][tag] = false;\n      var descriptor = createPropertyDescriptor(1, value);\n      try {\n        setSymbolDescriptor($this, tag, descriptor);\n      } catch (error) {\n        if (!(error instanceof RangeError)) throw error;\n        fallbackDefineProperty($this, tag, descriptor);\n      }\n    };\n    if (DESCRIPTORS && USE_SETTER) setSymbolDescriptor(ObjectPrototype, tag, { configurable: true, set: setter });\n    return wrap(tag, description);\n  };\n\n  SymbolPrototype = $Symbol[PROTOTYPE];\n\n  defineBuiltIn(SymbolPrototype, 'toString', function toString() {\n    return getInternalState(this).tag;\n  });\n\n  defineBuiltIn($Symbol, 'withoutSetter', function (description) {\n    return wrap(uid(description), description);\n  });\n\n  propertyIsEnumerableModule.f = $propertyIsEnumerable;\n  definePropertyModule.f = $defineProperty;\n  definePropertiesModule.f = $defineProperties;\n  getOwnPropertyDescriptorModule.f = $getOwnPropertyDescriptor;\n  getOwnPropertyNamesModule.f = getOwnPropertyNamesExternal.f = $getOwnPropertyNames;\n  getOwnPropertySymbolsModule.f = $getOwnPropertySymbols;\n\n  wrappedWellKnownSymbolModule.f = function (name) {\n    return wrap(wellKnownSymbol(name), name);\n  };\n\n  if (DESCRIPTORS) {\n    // https://github.com/tc39/proposal-Symbol-description\n    defineBuiltInAccessor(SymbolPrototype, 'description', {\n      configurable: true,\n      get: function description() {\n        return getInternalState(this).description;\n      }\n    });\n    if (!IS_PURE) {\n      defineBuiltIn(ObjectPrototype, 'propertyIsEnumerable', $propertyIsEnumerable, { unsafe: true });\n    }\n  }\n}\n\n$({ global: true, constructor: true, wrap: true, forced: !NATIVE_SYMBOL, sham: !NATIVE_SYMBOL }, {\n  Symbol: $Symbol\n});\n\n$forEach(objectKeys(WellKnownSymbolsStore), function (name) {\n  defineWellKnownSymbol(name);\n});\n\n$({ target: SYMBOL, stat: true, forced: !NATIVE_SYMBOL }, {\n  useSetter: function () { USE_SETTER = true; },\n  useSimple: function () { USE_SETTER = false; }\n});\n\n$({ target: 'Object', stat: true, forced: !NATIVE_SYMBOL, sham: !DESCRIPTORS }, {\n  // `Object.create` method\n  // https://tc39.es/ecma262/#sec-object.create\n  create: $create,\n  // `Object.defineProperty` method\n  // https://tc39.es/ecma262/#sec-object.defineproperty\n  defineProperty: $defineProperty,\n  // `Object.defineProperties` method\n  // https://tc39.es/ecma262/#sec-object.defineproperties\n  defineProperties: $defineProperties,\n  // `Object.getOwnPropertyDescriptor` method\n  // https://tc39.es/ecma262/#sec-object.getownpropertydescriptors\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor\n});\n\n$({ target: 'Object', stat: true, forced: !NATIVE_SYMBOL }, {\n  // `Object.getOwnPropertyNames` method\n  // https://tc39.es/ecma262/#sec-object.getownpropertynames\n  getOwnPropertyNames: $getOwnPropertyNames\n});\n\n// `Symbol.prototype[@@toPrimitive]` method\n// https://tc39.es/ecma262/#sec-symbol.prototype-@@toprimitive\ndefineSymbolToPrimitive();\n\n// `Symbol.prototype[@@toStringTag]` property\n// https://tc39.es/ecma262/#sec-symbol.prototype-@@tostringtag\nsetToStringTag($Symbol, SYMBOL);\n\nhiddenKeys[HIDDEN] = true;\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.symbol.constructor.js?")},6980:module=>{"use strict";eval("\nmodule.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/create-property-descriptor.js?")},6986:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\nvar $ = __webpack_require__(46518);\nvar $group = __webpack_require__(77957);\nvar arrayMethodIsStrict = __webpack_require__(34598);\nvar addToUnscopables = __webpack_require__(6469);\n\n// `Array.prototype.groupBy` method\n// https://github.com/tc39/proposal-array-grouping\n// https://bugs.webkit.org/show_bug.cgi?id=236541\n$({ target: 'Array', proto: true, forced: !arrayMethodIsStrict('groupBy') }, {\n  groupBy: function groupBy(callbackfn /* , thisArg */) {\n    var thisArg = arguments.length > 1 ? arguments[1] : undefined;\n    return $group(this, callbackfn, thisArg);\n  }\n});\n\naddToUnscopables('groupBy');\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.array.group-by.js?")},7040:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n/* eslint-disable es/no-symbol -- required for testing */\nvar NATIVE_SYMBOL = __webpack_require__(4495);\n\nmodule.exports = NATIVE_SYMBOL &&\n  !Symbol.sham &&\n  typeof Symbol.iterator == 'symbol';\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/use-symbol-as-uid.js?")},7225:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// https://github.com/tc39/proposal-iterator-helpers\n__webpack_require__(98992);\n__webpack_require__(64743);\n__webpack_require__(23215);\n__webpack_require__(54520);\n__webpack_require__(72577);\n__webpack_require__(30670);\n__webpack_require__(3949);\n__webpack_require__(45882);\n__webpack_require__(81454);\n__webpack_require__(8872);\n__webpack_require__(37550);\n__webpack_require__(27413);\n__webpack_require__(41795);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/proposals/iterator-helpers-stage-3-2.js?")},7588:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar iterate = __webpack_require__(72652);\nvar aCallable = __webpack_require__(79306);\nvar anObject = __webpack_require__(28551);\nvar getIteratorDirect = __webpack_require__(1767);\n\n// `Iterator.prototype.forEach` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.foreach\n$({ target: 'Iterator', proto: true, real: true }, {\n  forEach: function forEach(fn) {\n    anObject(this);\n    aCallable(fn);\n    var record = getIteratorDirect(this);\n    var counter = 0;\n    iterate(record, function (value) {\n      fn(value, counter++);\n    }, { IS_RECORD: true });\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.iterator.for-each.js?")},7740:module=>{"use strict";eval("\nvar log = Math.log;\n\n// `Math.log1p` method implementation\n// https://tc39.es/ecma262/#sec-math.log1p\n// eslint-disable-next-line es/no-math-log1p -- safe\nmodule.exports = Math.log1p || function log1p(x) {\n  var n = +x;\n  return n > -1e-8 && n < 1e-8 ? n - n * n / 2 : log(1 + n);\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/math-log1p.js?")},7743:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar call = __webpack_require__(69565);\nvar aCallable = __webpack_require__(79306);\nvar newPromiseCapabilityModule = __webpack_require__(36043);\nvar perform = __webpack_require__(1103);\nvar iterate = __webpack_require__(72652);\nvar PROMISE_STATICS_INCORRECT_ITERATION = __webpack_require__(90537);\n\n// `Promise.race` method\n// https://tc39.es/ecma262/#sec-promise.race\n$({ target: 'Promise', stat: true, forced: PROMISE_STATICS_INCORRECT_ITERATION }, {\n  race: function race(iterable) {\n    var C = this;\n    var capability = newPromiseCapabilityModule.f(C);\n    var reject = capability.reject;\n    var result = perform(function () {\n      var $promiseResolve = aCallable(C.resolve);\n      iterate(iterable, function (promise) {\n        call($promiseResolve, C, promise).then(capability.resolve, reject);\n      });\n    });\n    if (result.error) reject(result.value);\n    return capability.promise;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.promise.race.js?")},7860:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar userAgent = __webpack_require__(82839);\n\nmodule.exports = /web0s(?!.*chrome)/i.test(userAgent);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/environment-is-webos-webkit.js?")},7904:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar DESCRIPTORS = __webpack_require__(43724);\nvar FORCED = __webpack_require__(42551);\nvar toObject = __webpack_require__(48981);\nvar toPropertyKey = __webpack_require__(56969);\nvar getPrototypeOf = __webpack_require__(42787);\nvar getOwnPropertyDescriptor = (__webpack_require__(77347).f);\n\n// `Object.prototype.__lookupSetter__` method\n// https://tc39.es/ecma262/#sec-object.prototype.__lookupSetter__\nif (DESCRIPTORS) {\n  $({ target: 'Object', proto: true, forced: FORCED }, {\n    __lookupSetter__: function __lookupSetter__(P) {\n      var O = toObject(this);\n      var key = toPropertyKey(P);\n      var desc;\n      do {\n        if (desc = getOwnPropertyDescriptor(O, key)) return desc.set;\n      } while (O = getPrototypeOf(O));\n    }\n  });\n}\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.object.lookup-setter.js?")},8045:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar bind = __webpack_require__(76080);\nvar uncurryThis = __webpack_require__(79504);\nvar toObject = __webpack_require__(48981);\nvar isConstructor = __webpack_require__(33517);\nvar getAsyncIterator = __webpack_require__(1886);\nvar getIterator = __webpack_require__(70081);\nvar getIteratorDirect = __webpack_require__(1767);\nvar getIteratorMethod = __webpack_require__(50851);\nvar getMethod = __webpack_require__(55966);\nvar getBuiltIn = __webpack_require__(97751);\nvar getBuiltInPrototypeMethod = __webpack_require__(44124);\nvar wellKnownSymbol = __webpack_require__(78227);\nvar AsyncFromSyncIterator = __webpack_require__(24074);\nvar toArray = (__webpack_require__(36639).toArray);\n\nvar ASYNC_ITERATOR = wellKnownSymbol('asyncIterator');\nvar arrayIterator = uncurryThis(getBuiltInPrototypeMethod('Array', 'values'));\nvar arrayIteratorNext = uncurryThis(arrayIterator([]).next);\n\nvar safeArrayIterator = function () {\n  return new SafeArrayIterator(this);\n};\n\nvar SafeArrayIterator = function (O) {\n  this.iterator = arrayIterator(O);\n};\n\nSafeArrayIterator.prototype.next = function () {\n  return arrayIteratorNext(this.iterator);\n};\n\n// `Array.fromAsync` method implementation\n// https://github.com/tc39/proposal-array-from-async\nmodule.exports = function fromAsync(asyncItems /* , mapfn = undefined, thisArg = undefined */) {\n  var C = this;\n  var argumentsLength = arguments.length;\n  var mapfn = argumentsLength > 1 ? arguments[1] : undefined;\n  var thisArg = argumentsLength > 2 ? arguments[2] : undefined;\n  return new (getBuiltIn('Promise'))(function (resolve) {\n    var O = toObject(asyncItems);\n    if (mapfn !== undefined) mapfn = bind(mapfn, thisArg);\n    var usingAsyncIterator = getMethod(O, ASYNC_ITERATOR);\n    var usingSyncIterator = usingAsyncIterator ? undefined : getIteratorMethod(O) || safeArrayIterator;\n    var A = isConstructor(C) ? new C() : [];\n    var iterator = usingAsyncIterator\n      ? getAsyncIterator(O, usingAsyncIterator)\n      : new AsyncFromSyncIterator(getIteratorDirect(getIterator(O, usingSyncIterator)));\n    resolve(toArray(iterator, mapfn, A));\n  });\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/array-from-async.js?")},8085:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\n\nvar floor = Math.floor;\nvar log = Math.log;\nvar LOG2E = Math.LOG2E;\n\n// `Math.clz32` method\n// https://tc39.es/ecma262/#sec-math.clz32\n$({ target: 'Math', stat: true }, {\n  clz32: function clz32(x) {\n    var n = x >>> 0;\n    return n ? 31 - floor(log(n + 0.5) * LOG2E) : 32;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.math.clz32.js?")},8159:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar $some = (__webpack_require__(36639).some);\n\n// `AsyncIterator.prototype.some` method\n// https://github.com/tc39/proposal-async-iterator-helpers\n$({ target: 'AsyncIterator', proto: true, real: true }, {\n  some: function some(predicate) {\n    return $some(this, predicate);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.async-iterator.some.js?")},8379:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n/* eslint-disable es/no-array-prototype-lastindexof -- safe */\nvar apply = __webpack_require__(18745);\nvar toIndexedObject = __webpack_require__(25397);\nvar toIntegerOrInfinity = __webpack_require__(91291);\nvar lengthOfArrayLike = __webpack_require__(26198);\nvar arrayMethodIsStrict = __webpack_require__(34598);\n\nvar min = Math.min;\nvar $lastIndexOf = [].lastIndexOf;\nvar NEGATIVE_ZERO = !!$lastIndexOf && 1 / [1].lastIndexOf(1, -0) < 0;\nvar STRICT_METHOD = arrayMethodIsStrict('lastIndexOf');\nvar FORCED = NEGATIVE_ZERO || !STRICT_METHOD;\n\n// `Array.prototype.lastIndexOf` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.lastindexof\nmodule.exports = FORCED ? function lastIndexOf(searchElement /* , fromIndex = @[*-1] */) {\n  // convert -0 to +0\n  if (NEGATIVE_ZERO) return apply($lastIndexOf, this, arguments) || 0;\n  var O = toIndexedObject(this);\n  var length = lengthOfArrayLike(O);\n  if (length === 0) return -1;\n  var index = length - 1;\n  if (arguments.length > 1) index = min(index, toIntegerOrInfinity(arguments[1]));\n  if (index < 0) index = length + index;\n  for (;index >= 0; index--) if (index in O && O[index] === searchElement) return index || 0;\n  return -1;\n} : $lastIndexOf;\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/array-last-index-of.js?")},8872:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(18237);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.iterator.reduce.js?")},8921:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar lastIndexOf = __webpack_require__(8379);\n\n// `Array.prototype.lastIndexOf` method\n// https://tc39.es/ecma262/#sec-array.prototype.lastindexof\n// eslint-disable-next-line es/no-array-prototype-lastindexof -- required for testing\n$({ target: 'Array', proto: true, forced: lastIndexOf !== [].lastIndexOf }, {\n  lastIndexOf: lastIndexOf\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array.last-index-of.js?")},8995:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar ArrayBufferViewCore = __webpack_require__(94644);\nvar $map = (__webpack_require__(59213).map);\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar getTypedArrayConstructor = ArrayBufferViewCore.getTypedArrayConstructor;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.map` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.map\nexportTypedArrayMethod('map', function map(mapfn /* , thisArg */) {\n  return $map(aTypedArray(this), mapfn, arguments.length > 1 ? arguments[1] : undefined, function (O, length) {\n    return new (getTypedArrayConstructor(O))(length);\n  });\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.map.js?")},9065:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar DESCRIPTORS = __webpack_require__(43724);\nvar anObject = __webpack_require__(28551);\nvar getOwnPropertyDescriptorModule = __webpack_require__(77347);\n\n// `Reflect.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-reflect.getownpropertydescriptor\n$({ target: 'Reflect', stat: true, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptor: function getOwnPropertyDescriptor(target, propertyKey) {\n    return getOwnPropertyDescriptorModule.f(anObject(target), propertyKey);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.reflect.get-own-property-descriptor.js?")},9220:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar DESCRIPTORS = __webpack_require__(43724);\nvar FORCED = __webpack_require__(42551);\nvar toObject = __webpack_require__(48981);\nvar toPropertyKey = __webpack_require__(56969);\nvar getPrototypeOf = __webpack_require__(42787);\nvar getOwnPropertyDescriptor = (__webpack_require__(77347).f);\n\n// `Object.prototype.__lookupGetter__` method\n// https://tc39.es/ecma262/#sec-object.prototype.__lookupGetter__\nif (DESCRIPTORS) {\n  $({ target: 'Object', proto: true, forced: FORCED }, {\n    __lookupGetter__: function __lookupGetter__(P) {\n      var O = toObject(this);\n      var key = toPropertyKey(P);\n      var desc;\n      do {\n        if (desc = getOwnPropertyDescriptor(O, key)) return desc.get;\n      } while (O = getPrototypeOf(O));\n    }\n  });\n}\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.object.lookup-getter.js?")},9391:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar IS_PURE = __webpack_require__(96395);\nvar NativePromiseConstructor = __webpack_require__(80550);\nvar fails = __webpack_require__(79039);\nvar getBuiltIn = __webpack_require__(97751);\nvar isCallable = __webpack_require__(94901);\nvar speciesConstructor = __webpack_require__(2293);\nvar promiseResolve = __webpack_require__(93438);\nvar defineBuiltIn = __webpack_require__(36840);\n\nvar NativePromisePrototype = NativePromiseConstructor && NativePromiseConstructor.prototype;\n\n// Safari bug https://bugs.webkit.org/show_bug.cgi?id=200829\nvar NON_GENERIC = !!NativePromiseConstructor && fails(function () {\n  // eslint-disable-next-line unicorn/no-thenable -- required for testing\n  NativePromisePrototype['finally'].call({ then: function () { /* empty */ } }, function () { /* empty */ });\n});\n\n// `Promise.prototype.finally` method\n// https://tc39.es/ecma262/#sec-promise.prototype.finally\n$({ target: 'Promise', proto: true, real: true, forced: NON_GENERIC }, {\n  'finally': function (onFinally) {\n    var C = speciesConstructor(this, getBuiltIn('Promise'));\n    var isFunction = isCallable(onFinally);\n    return this.then(\n      isFunction ? function (x) {\n        return promiseResolve(C, onFinally()).then(function () { return x; });\n      } : onFinally,\n      isFunction ? function (e) {\n        return promiseResolve(C, onFinally()).then(function () { throw e; });\n      } : onFinally\n    );\n  }\n});\n\n// makes sure that native promise-based APIs `Promise#finally` properly works with patched `Promise#then`\nif (!IS_PURE && isCallable(NativePromiseConstructor)) {\n  var method = getBuiltIn('Promise').prototype['finally'];\n  if (NativePromisePrototype['finally'] !== method) {\n    defineBuiltIn(NativePromisePrototype, 'finally', method, { unsafe: true });\n  }\n}\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.promise.finally.js?")},9539:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar call = __webpack_require__(69565);\nvar anObject = __webpack_require__(28551);\nvar getMethod = __webpack_require__(55966);\n\nmodule.exports = function (iterator, kind, value) {\n  var innerResult, innerError;\n  anObject(iterator);\n  try {\n    innerResult = getMethod(iterator, 'return');\n    if (!innerResult) {\n      if (kind === 'throw') throw value;\n      return value;\n    }\n    innerResult = call(innerResult, iterator);\n  } catch (error) {\n    innerError = true;\n    innerResult = error;\n  }\n  if (kind === 'throw') throw value;\n  if (innerError) throw innerResult;\n  anObject(innerResult);\n  return value;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/iterator-close.js?")},9678:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar arrayToReversed = __webpack_require__(37628);\nvar toIndexedObject = __webpack_require__(25397);\nvar addToUnscopables = __webpack_require__(6469);\n\nvar $Array = Array;\n\n// `Array.prototype.toReversed` method\n// https://tc39.es/ecma262/#sec-array.prototype.toreversed\n$({ target: 'Array', proto: true }, {\n  toReversed: function toReversed() {\n    return arrayToReversed(toIndexedObject(this), $Array);\n  }\n});\n\naddToUnscopables('toReversed');\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array.to-reversed.js?")},9730:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(3995);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.data-view.set-float16.js?")},9868:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar uncurryThis = __webpack_require__(79504);\nvar toIntegerOrInfinity = __webpack_require__(91291);\nvar thisNumberValue = __webpack_require__(31240);\nvar $repeat = __webpack_require__(72333);\nvar fails = __webpack_require__(79039);\n\nvar $RangeError = RangeError;\nvar $String = String;\nvar floor = Math.floor;\nvar repeat = uncurryThis($repeat);\nvar stringSlice = uncurryThis(''.slice);\nvar nativeToFixed = uncurryThis(1.0.toFixed);\n\nvar pow = function (x, n, acc) {\n  return n === 0 ? acc : n % 2 === 1 ? pow(x, n - 1, acc * x) : pow(x * x, n / 2, acc);\n};\n\nvar log = function (x) {\n  var n = 0;\n  var x2 = x;\n  while (x2 >= 4096) {\n    n += 12;\n    x2 /= 4096;\n  }\n  while (x2 >= 2) {\n    n += 1;\n    x2 /= 2;\n  } return n;\n};\n\nvar multiply = function (data, n, c) {\n  var index = -1;\n  var c2 = c;\n  while (++index < 6) {\n    c2 += n * data[index];\n    data[index] = c2 % 1e7;\n    c2 = floor(c2 / 1e7);\n  }\n};\n\nvar divide = function (data, n) {\n  var index = 6;\n  var c = 0;\n  while (--index >= 0) {\n    c += data[index];\n    data[index] = floor(c / n);\n    c = (c % n) * 1e7;\n  }\n};\n\nvar dataToString = function (data) {\n  var index = 6;\n  var s = '';\n  while (--index >= 0) {\n    if (s !== '' || index === 0 || data[index] !== 0) {\n      var t = $String(data[index]);\n      s = s === '' ? t : s + repeat('0', 7 - t.length) + t;\n    }\n  } return s;\n};\n\nvar FORCED = fails(function () {\n  return nativeToFixed(0.00008, 3) !== '0.000' ||\n    nativeToFixed(0.9, 0) !== '1' ||\n    nativeToFixed(1.255, 2) !== '1.25' ||\n    nativeToFixed(1000000000000000128.0, 0) !== '1000000000000000128';\n}) || !fails(function () {\n  // V8 ~ Android 4.3-\n  nativeToFixed({});\n});\n\n// `Number.prototype.toFixed` method\n// https://tc39.es/ecma262/#sec-number.prototype.tofixed\n$({ target: 'Number', proto: true, forced: FORCED }, {\n  toFixed: function toFixed(fractionDigits) {\n    var number = thisNumberValue(this);\n    var fractDigits = toIntegerOrInfinity(fractionDigits);\n    var data = [0, 0, 0, 0, 0, 0];\n    var sign = '';\n    var result = '0';\n    var e, z, j, k;\n\n    // TODO: ES2018 increased the maximum number of fraction digits to 100, need to improve the implementation\n    if (fractDigits < 0 || fractDigits > 20) throw new $RangeError('Incorrect fraction digits');\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (number !== number) return 'NaN';\n    if (number <= -1e21 || number >= 1e21) return $String(number);\n    if (number < 0) {\n      sign = '-';\n      number = -number;\n    }\n    if (number > 1e-21) {\n      e = log(number * pow(2, 69, 1)) - 69;\n      z = e < 0 ? number * pow(2, -e, 1) : number / pow(2, e, 1);\n      z *= 0x10000000000000;\n      e = 52 - e;\n      if (e > 0) {\n        multiply(data, 0, z);\n        j = fractDigits;\n        while (j >= 7) {\n          multiply(data, 1e7, 0);\n          j -= 7;\n        }\n        multiply(data, pow(10, j, 1), 0);\n        j = e - 1;\n        while (j >= 23) {\n          divide(data, 1 << 23);\n          j -= 23;\n        }\n        divide(data, 1 << j);\n        multiply(data, 1, 1);\n        divide(data, 2);\n        result = dataToString(data);\n      } else {\n        multiply(data, 0, z);\n        multiply(data, 1 << -e, 0);\n        result = dataToString(data) + repeat('0', fractDigits);\n      }\n    }\n    if (fractDigits > 0) {\n      k = result.length;\n      result = sign + (k <= fractDigits\n        ? '0.' + repeat('0', fractDigits - k) + result\n        : stringSlice(result, 0, k - fractDigits) + '.' + stringSlice(result, k - fractDigits));\n    } else {\n      result = sign + result;\n    } return result;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.number.to-fixed.js?")},9920:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar $forEach = (__webpack_require__(36639).forEach);\n\n// `AsyncIterator.prototype.forEach` method\n// https://github.com/tc39/proposal-async-iterator-helpers\n$({ target: 'AsyncIterator', proto: true, real: true }, {\n  forEach: function forEach(fn) {\n    return $forEach(this, fn);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.async-iterator.for-each.js?")},10149:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(44732);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.typed-array.to-sorted.js?")},10255:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar uncurryThis = __webpack_require__(79504);\n\nvar pow = Math.pow;\n\nvar EXP_MASK16 = 31; // 2 ** 5 - 1\nvar SIGNIFICAND_MASK16 = 1023; // 2 ** 10 - 1\nvar MIN_SUBNORMAL16 = pow(2, -24); // 2 ** -10 * 2 ** -14\nvar SIGNIFICAND_DENOM16 = 0.0009765625; // 2 ** -10\n\nvar unpackFloat16 = function (bytes) {\n  var sign = bytes >>> 15;\n  var exponent = bytes >>> 10 & EXP_MASK16;\n  var significand = bytes & SIGNIFICAND_MASK16;\n  if (exponent === EXP_MASK16) return significand === 0 ? (sign === 0 ? Infinity : -Infinity) : NaN;\n  if (exponent === 0) return significand * (sign === 0 ? MIN_SUBNORMAL16 : -MIN_SUBNORMAL16);\n  return pow(2, exponent - 15) * (sign === 0 ? 1 + significand * SIGNIFICAND_DENOM16 : -1 - significand * SIGNIFICAND_DENOM16);\n};\n\n// eslint-disable-next-line es/no-typed-arrays -- safe\nvar getUint16 = uncurryThis(DataView.prototype.getUint16);\n\n// `DataView.prototype.getFloat16` method\n// https://tc39.es/ecma262/#sec-dataview.prototype.getfloat16\n$({ target: 'DataView', proto: true }, {\n  getFloat16: function getFloat16(byteOffset /* , littleEndian */) {\n    var uint16 = getUint16(this, byteOffset, arguments.length > 1 ? arguments[1] : false);\n    return unpackFloat16(uint16);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.data-view.get-float16.js?")},10287:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar setPrototypeOf = __webpack_require__(52967);\n\n// `Object.setPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.setprototypeof\n$({ target: 'Object', stat: true }, {\n  setPrototypeOf: setPrototypeOf\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.object.set-prototype-of.js?")},10298:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n/* eslint-disable es/no-object-getownpropertynames -- safe */\nvar classof = __webpack_require__(22195);\nvar toIndexedObject = __webpack_require__(25397);\nvar $getOwnPropertyNames = (__webpack_require__(38480).f);\nvar arraySlice = __webpack_require__(67680);\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return $getOwnPropertyNames(it);\n  } catch (error) {\n    return arraySlice(windowNames);\n  }\n};\n\n// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && classof(it) === 'Window'\n    ? getWindowNames(it)\n    : $getOwnPropertyNames(toIndexedObject(it));\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/object-get-own-property-names-external.js?")},10350:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar DESCRIPTORS = __webpack_require__(43724);\nvar hasOwn = __webpack_require__(39297);\n\nvar FunctionPrototype = Function.prototype;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getDescriptor = DESCRIPTORS && Object.getOwnPropertyDescriptor;\n\nvar EXISTS = hasOwn(FunctionPrototype, 'name');\n// additional protection from minified / mangled / dropped function names\nvar PROPER = EXISTS && (function something() { /* empty */ }).name === 'something';\nvar CONFIGURABLE = EXISTS && (!DESCRIPTORS || (DESCRIPTORS && getDescriptor(FunctionPrototype, 'name').configurable));\n\nmodule.exports = {\n  EXISTS: EXISTS,\n  PROPER: PROPER,\n  CONFIGURABLE: CONFIGURABLE\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/function-name.js?")},10436:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar IS_PURE = __webpack_require__(96395);\nvar IS_NODE = __webpack_require__(16193);\nvar globalThis = __webpack_require__(44576);\nvar call = __webpack_require__(69565);\nvar defineBuiltIn = __webpack_require__(36840);\nvar setPrototypeOf = __webpack_require__(52967);\nvar setToStringTag = __webpack_require__(10687);\nvar setSpecies = __webpack_require__(87633);\nvar aCallable = __webpack_require__(79306);\nvar isCallable = __webpack_require__(94901);\nvar isObject = __webpack_require__(20034);\nvar anInstance = __webpack_require__(90679);\nvar speciesConstructor = __webpack_require__(2293);\nvar task = (__webpack_require__(59225).set);\nvar microtask = __webpack_require__(91955);\nvar hostReportErrors = __webpack_require__(90757);\nvar perform = __webpack_require__(1103);\nvar Queue = __webpack_require__(18265);\nvar InternalStateModule = __webpack_require__(91181);\nvar NativePromiseConstructor = __webpack_require__(80550);\nvar PromiseConstructorDetection = __webpack_require__(10916);\nvar newPromiseCapabilityModule = __webpack_require__(36043);\n\nvar PROMISE = 'Promise';\nvar FORCED_PROMISE_CONSTRUCTOR = PromiseConstructorDetection.CONSTRUCTOR;\nvar NATIVE_PROMISE_REJECTION_EVENT = PromiseConstructorDetection.REJECTION_EVENT;\nvar NATIVE_PROMISE_SUBCLASSING = PromiseConstructorDetection.SUBCLASSING;\nvar getInternalPromiseState = InternalStateModule.getterFor(PROMISE);\nvar setInternalState = InternalStateModule.set;\nvar NativePromisePrototype = NativePromiseConstructor && NativePromiseConstructor.prototype;\nvar PromiseConstructor = NativePromiseConstructor;\nvar PromisePrototype = NativePromisePrototype;\nvar TypeError = globalThis.TypeError;\nvar document = globalThis.document;\nvar process = globalThis.process;\nvar newPromiseCapability = newPromiseCapabilityModule.f;\nvar newGenericPromiseCapability = newPromiseCapability;\n\nvar DISPATCH_EVENT = !!(document && document.createEvent && globalThis.dispatchEvent);\nvar UNHANDLED_REJECTION = 'unhandledrejection';\nvar REJECTION_HANDLED = 'rejectionhandled';\nvar PENDING = 0;\nvar FULFILLED = 1;\nvar REJECTED = 2;\nvar HANDLED = 1;\nvar UNHANDLED = 2;\n\nvar Internal, OwnPromiseCapability, PromiseWrapper, nativeThen;\n\n// helpers\nvar isThenable = function (it) {\n  var then;\n  return isObject(it) && isCallable(then = it.then) ? then : false;\n};\n\nvar callReaction = function (reaction, state) {\n  var value = state.value;\n  var ok = state.state === FULFILLED;\n  var handler = ok ? reaction.ok : reaction.fail;\n  var resolve = reaction.resolve;\n  var reject = reaction.reject;\n  var domain = reaction.domain;\n  var result, then, exited;\n  try {\n    if (handler) {\n      if (!ok) {\n        if (state.rejection === UNHANDLED) onHandleUnhandled(state);\n        state.rejection = HANDLED;\n      }\n      if (handler === true) result = value;\n      else {\n        if (domain) domain.enter();\n        result = handler(value); // can throw\n        if (domain) {\n          domain.exit();\n          exited = true;\n        }\n      }\n      if (result === reaction.promise) {\n        reject(new TypeError('Promise-chain cycle'));\n      } else if (then = isThenable(result)) {\n        call(then, result, resolve, reject);\n      } else resolve(result);\n    } else reject(value);\n  } catch (error) {\n    if (domain && !exited) domain.exit();\n    reject(error);\n  }\n};\n\nvar notify = function (state, isReject) {\n  if (state.notified) return;\n  state.notified = true;\n  microtask(function () {\n    var reactions = state.reactions;\n    var reaction;\n    while (reaction = reactions.get()) {\n      callReaction(reaction, state);\n    }\n    state.notified = false;\n    if (isReject && !state.rejection) onUnhandled(state);\n  });\n};\n\nvar dispatchEvent = function (name, promise, reason) {\n  var event, handler;\n  if (DISPATCH_EVENT) {\n    event = document.createEvent('Event');\n    event.promise = promise;\n    event.reason = reason;\n    event.initEvent(name, false, true);\n    globalThis.dispatchEvent(event);\n  } else event = { promise: promise, reason: reason };\n  if (!NATIVE_PROMISE_REJECTION_EVENT && (handler = globalThis['on' + name])) handler(event);\n  else if (name === UNHANDLED_REJECTION) hostReportErrors('Unhandled promise rejection', reason);\n};\n\nvar onUnhandled = function (state) {\n  call(task, globalThis, function () {\n    var promise = state.facade;\n    var value = state.value;\n    var IS_UNHANDLED = isUnhandled(state);\n    var result;\n    if (IS_UNHANDLED) {\n      result = perform(function () {\n        if (IS_NODE) {\n          process.emit('unhandledRejection', value, promise);\n        } else dispatchEvent(UNHANDLED_REJECTION, promise, value);\n      });\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n      state.rejection = IS_NODE || isUnhandled(state) ? UNHANDLED : HANDLED;\n      if (result.error) throw result.value;\n    }\n  });\n};\n\nvar isUnhandled = function (state) {\n  return state.rejection !== HANDLED && !state.parent;\n};\n\nvar onHandleUnhandled = function (state) {\n  call(task, globalThis, function () {\n    var promise = state.facade;\n    if (IS_NODE) {\n      process.emit('rejectionHandled', promise);\n    } else dispatchEvent(REJECTION_HANDLED, promise, state.value);\n  });\n};\n\nvar bind = function (fn, state, unwrap) {\n  return function (value) {\n    fn(state, value, unwrap);\n  };\n};\n\nvar internalReject = function (state, value, unwrap) {\n  if (state.done) return;\n  state.done = true;\n  if (unwrap) state = unwrap;\n  state.value = value;\n  state.state = REJECTED;\n  notify(state, true);\n};\n\nvar internalResolve = function (state, value, unwrap) {\n  if (state.done) return;\n  state.done = true;\n  if (unwrap) state = unwrap;\n  try {\n    if (state.facade === value) throw new TypeError(\"Promise can't be resolved itself\");\n    var then = isThenable(value);\n    if (then) {\n      microtask(function () {\n        var wrapper = { done: false };\n        try {\n          call(then, value,\n            bind(internalResolve, wrapper, state),\n            bind(internalReject, wrapper, state)\n          );\n        } catch (error) {\n          internalReject(wrapper, error, state);\n        }\n      });\n    } else {\n      state.value = value;\n      state.state = FULFILLED;\n      notify(state, false);\n    }\n  } catch (error) {\n    internalReject({ done: false }, error, state);\n  }\n};\n\n// constructor polyfill\nif (FORCED_PROMISE_CONSTRUCTOR) {\n  // 25.4.3.1 Promise(executor)\n  PromiseConstructor = function Promise(executor) {\n    anInstance(this, PromisePrototype);\n    aCallable(executor);\n    call(Internal, this);\n    var state = getInternalPromiseState(this);\n    try {\n      executor(bind(internalResolve, state), bind(internalReject, state));\n    } catch (error) {\n      internalReject(state, error);\n    }\n  };\n\n  PromisePrototype = PromiseConstructor.prototype;\n\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  Internal = function Promise(executor) {\n    setInternalState(this, {\n      type: PROMISE,\n      done: false,\n      notified: false,\n      parent: false,\n      reactions: new Queue(),\n      rejection: false,\n      state: PENDING,\n      value: null\n    });\n  };\n\n  // `Promise.prototype.then` method\n  // https://tc39.es/ecma262/#sec-promise.prototype.then\n  Internal.prototype = defineBuiltIn(PromisePrototype, 'then', function then(onFulfilled, onRejected) {\n    var state = getInternalPromiseState(this);\n    var reaction = newPromiseCapability(speciesConstructor(this, PromiseConstructor));\n    state.parent = true;\n    reaction.ok = isCallable(onFulfilled) ? onFulfilled : true;\n    reaction.fail = isCallable(onRejected) && onRejected;\n    reaction.domain = IS_NODE ? process.domain : undefined;\n    if (state.state === PENDING) state.reactions.add(reaction);\n    else microtask(function () {\n      callReaction(reaction, state);\n    });\n    return reaction.promise;\n  });\n\n  OwnPromiseCapability = function () {\n    var promise = new Internal();\n    var state = getInternalPromiseState(promise);\n    this.promise = promise;\n    this.resolve = bind(internalResolve, state);\n    this.reject = bind(internalReject, state);\n  };\n\n  newPromiseCapabilityModule.f = newPromiseCapability = function (C) {\n    return C === PromiseConstructor || C === PromiseWrapper\n      ? new OwnPromiseCapability(C)\n      : newGenericPromiseCapability(C);\n  };\n\n  if (!IS_PURE && isCallable(NativePromiseConstructor) && NativePromisePrototype !== Object.prototype) {\n    nativeThen = NativePromisePrototype.then;\n\n    if (!NATIVE_PROMISE_SUBCLASSING) {\n      // make `Promise#then` return a polyfilled `Promise` for native promise-based APIs\n      defineBuiltIn(NativePromisePrototype, 'then', function then(onFulfilled, onRejected) {\n        var that = this;\n        return new PromiseConstructor(function (resolve, reject) {\n          call(nativeThen, that, resolve, reject);\n        }).then(onFulfilled, onRejected);\n      // https://github.com/zloirock/core-js/issues/640\n      }, { unsafe: true });\n    }\n\n    // make `.constructor === Promise` work for native promise-based APIs\n    try {\n      delete NativePromisePrototype.constructor;\n    } catch (error) { /* empty */ }\n\n    // make `instanceof Promise` work for native promise-based APIs\n    if (setPrototypeOf) {\n      setPrototypeOf(NativePromisePrototype, PromisePrototype);\n    }\n  }\n}\n\n// `Promise` constructor\n// https://tc39.es/ecma262/#sec-promise-executor\n$({ global: true, constructor: true, wrap: true, forced: FORCED_PROMISE_CONSTRUCTOR }, {\n  Promise: PromiseConstructor\n});\n\nsetToStringTag(PromiseConstructor, PROMISE, false, true);\nsetSpecies(PROMISE);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.promise.constructor.js?")},10687:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar defineProperty = (__webpack_require__(24913).f);\nvar hasOwn = __webpack_require__(39297);\nvar wellKnownSymbol = __webpack_require__(78227);\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\n\nmodule.exports = function (target, TAG, STATIC) {\n  if (target && !STATIC) target = target.prototype;\n  if (target && !hasOwn(target, TO_STRING_TAG)) {\n    defineProperty(target, TO_STRING_TAG, { configurable: true, value: TAG });\n  }\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/set-to-string-tag.js?")},10757:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar getBuiltIn = __webpack_require__(97751);\nvar isCallable = __webpack_require__(94901);\nvar isPrototypeOf = __webpack_require__(1625);\nvar USE_SYMBOL_AS_UID = __webpack_require__(7040);\n\nvar $Object = Object;\n\nmodule.exports = USE_SYMBOL_AS_UID ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  var $Symbol = getBuiltIn('Symbol');\n  return isCallable($Symbol) && isPrototypeOf($Symbol.prototype, $Object(it));\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/is-symbol.js?")},10838:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar $findLast = (__webpack_require__(43839).findLast);\nvar addToUnscopables = __webpack_require__(6469);\n\n// `Array.prototype.findLast` method\n// https://tc39.es/ecma262/#sec-array.prototype.findlast\n$({ target: 'Array', proto: true }, {\n  findLast: function findLast(callbackfn /* , that = undefined */) {\n    return $findLast(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\naddToUnscopables('findLast');\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array.find-last.js?")},10916:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar globalThis = __webpack_require__(44576);\nvar NativePromiseConstructor = __webpack_require__(80550);\nvar isCallable = __webpack_require__(94901);\nvar isForced = __webpack_require__(92796);\nvar inspectSource = __webpack_require__(33706);\nvar wellKnownSymbol = __webpack_require__(78227);\nvar ENVIRONMENT = __webpack_require__(84215);\nvar IS_PURE = __webpack_require__(96395);\nvar V8_VERSION = __webpack_require__(39519);\n\nvar NativePromisePrototype = NativePromiseConstructor && NativePromiseConstructor.prototype;\nvar SPECIES = wellKnownSymbol('species');\nvar SUBCLASSING = false;\nvar NATIVE_PROMISE_REJECTION_EVENT = isCallable(globalThis.PromiseRejectionEvent);\n\nvar FORCED_PROMISE_CONSTRUCTOR = isForced('Promise', function () {\n  var PROMISE_CONSTRUCTOR_SOURCE = inspectSource(NativePromiseConstructor);\n  var GLOBAL_CORE_JS_PROMISE = PROMISE_CONSTRUCTOR_SOURCE !== String(NativePromiseConstructor);\n  // V8 6.6 (Node 10 and Chrome 66) have a bug with resolving custom thenables\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=830565\n  // We can't detect it synchronously, so just check versions\n  if (!GLOBAL_CORE_JS_PROMISE && V8_VERSION === 66) return true;\n  // We need Promise#{ catch, finally } in the pure version for preventing prototype pollution\n  if (IS_PURE && !(NativePromisePrototype['catch'] && NativePromisePrototype['finally'])) return true;\n  // We can't use @@species feature detection in V8 since it causes\n  // deoptimization and performance degradation\n  // https://github.com/zloirock/core-js/issues/679\n  if (!V8_VERSION || V8_VERSION < 51 || !/native code/.test(PROMISE_CONSTRUCTOR_SOURCE)) {\n    // Detect correctness of subclassing with @@species support\n    var promise = new NativePromiseConstructor(function (resolve) { resolve(1); });\n    var FakePromise = function (exec) {\n      exec(function () { /* empty */ }, function () { /* empty */ });\n    };\n    var constructor = promise.constructor = {};\n    constructor[SPECIES] = FakePromise;\n    SUBCLASSING = promise.then(function () { /* empty */ }) instanceof FakePromise;\n    if (!SUBCLASSING) return true;\n  // Unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n  } return !GLOBAL_CORE_JS_PROMISE && (ENVIRONMENT === 'BROWSER' || ENVIRONMENT === 'DENO') && !NATIVE_PROMISE_REJECTION_EVENT;\n});\n\nmodule.exports = {\n  CONSTRUCTOR: FORCED_PROMISE_CONSTRUCTOR,\n  REJECTION_EVENT: NATIVE_PROMISE_REJECTION_EVENT,\n  SUBCLASSING: SUBCLASSING\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/promise-constructor-detection.js?")},11056:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar defineProperty = (__webpack_require__(24913).f);\n\nmodule.exports = function (Target, Source, key) {\n  key in Target || defineProperty(Target, key, {\n    configurable: true,\n    get: function () { return Source[key]; },\n    set: function (it) { Source[key] = it; }\n  });\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/proxy-accessor.js?")},11367:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar log2 = __webpack_require__(67787);\n\n// `Math.log2` method\n// https://tc39.es/ecma262/#sec-math.log2\n$({ target: 'Math', stat: true }, {\n  log2: log2\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.math.log2.js?")},11392:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar uncurryThis = __webpack_require__(27476);\nvar getOwnPropertyDescriptor = (__webpack_require__(77347).f);\nvar toLength = __webpack_require__(18014);\nvar toString = __webpack_require__(655);\nvar notARegExp = __webpack_require__(60511);\nvar requireObjectCoercible = __webpack_require__(67750);\nvar correctIsRegExpLogic = __webpack_require__(41436);\nvar IS_PURE = __webpack_require__(96395);\n\nvar stringSlice = uncurryThis(''.slice);\nvar min = Math.min;\n\nvar CORRECT_IS_REGEXP_LOGIC = correctIsRegExpLogic('startsWith');\n// https://github.com/zloirock/core-js/pull/702\nvar MDN_POLYFILL_BUG = !IS_PURE && !CORRECT_IS_REGEXP_LOGIC && !!function () {\n  var descriptor = getOwnPropertyDescriptor(String.prototype, 'startsWith');\n  return descriptor && !descriptor.writable;\n}();\n\n// `String.prototype.startsWith` method\n// https://tc39.es/ecma262/#sec-string.prototype.startswith\n$({ target: 'String', proto: true, forced: !MDN_POLYFILL_BUG && !CORRECT_IS_REGEXP_LOGIC }, {\n  startsWith: function startsWith(searchString /* , position = 0 */) {\n    var that = toString(requireObjectCoercible(this));\n    notARegExp(searchString);\n    var index = toLength(min(arguments.length > 1 ? arguments[1] : undefined, that.length));\n    var search = toString(searchString);\n    return stringSlice(that, index, index + search.length) === search;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.string.starts-with.js?")},11558:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar arrayWith = __webpack_require__(39928);\nvar toIndexedObject = __webpack_require__(25397);\n\nvar $Array = Array;\n\n// `Array.prototype.with` method\n// https://tc39.es/ecma262/#sec-array.prototype.with\n$({ target: 'Array', proto: true }, {\n  'with': function (index, value) {\n    return arrayWith(toIndexedObject(this), $Array, index, value);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array.with.js?")},11641:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// https://github.com/tc39/proposal-change-array-by-copy\n__webpack_require__(54151);\n__webpack_require__(72400);\n__webpack_require__(73677);\n__webpack_require__(85901);\n__webpack_require__(43250);\n__webpack_require__(10149);\n__webpack_require__(24082);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/proposals/change-array-by-copy-stage-4.js?")},11745:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar uncurryThis = __webpack_require__(27476);\nvar fails = __webpack_require__(79039);\nvar ArrayBufferModule = __webpack_require__(66346);\nvar anObject = __webpack_require__(28551);\nvar toAbsoluteIndex = __webpack_require__(35610);\nvar toLength = __webpack_require__(18014);\n\nvar ArrayBuffer = ArrayBufferModule.ArrayBuffer;\nvar DataView = ArrayBufferModule.DataView;\nvar DataViewPrototype = DataView.prototype;\nvar nativeArrayBufferSlice = uncurryThis(ArrayBuffer.prototype.slice);\nvar getUint8 = uncurryThis(DataViewPrototype.getUint8);\nvar setUint8 = uncurryThis(DataViewPrototype.setUint8);\n\nvar INCORRECT_SLICE = fails(function () {\n  return !new ArrayBuffer(2).slice(1, undefined).byteLength;\n});\n\n// `ArrayBuffer.prototype.slice` method\n// https://tc39.es/ecma262/#sec-arraybuffer.prototype.slice\n$({ target: 'ArrayBuffer', proto: true, unsafe: true, forced: INCORRECT_SLICE }, {\n  slice: function slice(start, end) {\n    if (nativeArrayBufferSlice && end === undefined) {\n      return nativeArrayBufferSlice(anObject(this), start); // FF fix\n    }\n    var length = anObject(this).byteLength;\n    var first = toAbsoluteIndex(start, length);\n    var fin = toAbsoluteIndex(end === undefined ? length : end, length);\n    var result = new ArrayBuffer(toLength(fin - first));\n    var viewSource = new DataView(this);\n    var viewTarget = new DataView(result);\n    var index = 0;\n    while (first < fin) {\n      setUint8(viewTarget, index++, getUint8(viewSource, first++));\n    } return result;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array-buffer.slice.js?")},11799:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// https://github.com/tc39/proposal-accessible-object-hasownproperty\n__webpack_require__(84208);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/proposals/accessible-object-hasownproperty.js?")},11898:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar createHTML = __webpack_require__(77240);\nvar forcedStringHTMLMethod = __webpack_require__(23061);\n\n// `String.prototype.big` method\n// https://tc39.es/ecma262/#sec-string.prototype.big\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('big') }, {\n  big: function big() {\n    return createHTML(this, 'big', '', '');\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.string.big.js?")},12041:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(79978);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.string.replace-all.js?")},12211:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar fails = __webpack_require__(79039);\n\nmodule.exports = !fails(function () {\n  function F() { /* empty */ }\n  F.prototype.constructor = null;\n  // eslint-disable-next-line es/no-object-getprototypeof -- required for testing\n  return Object.getPrototypeOf(new F()) !== F.prototype;\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/correct-prototype-getter.js?")},12330:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// https://github.com/tc39/proposal-explicit-resource-management\n__webpack_require__(39687);\n__webpack_require__(82750);\n__webpack_require__(74147);\n__webpack_require__(66557);\n__webpack_require__(16037);\n__webpack_require__(81202);\n__webpack_require__(43275);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/proposals/explicit-resource-management.js?")},12424:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// https://github.com/tc39/proposal-relative-indexing-method\n__webpack_require__(67357);\n__webpack_require__(34504);\n__webpack_require__(51839);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/proposals/relative-indexing-method.js?")},12887:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar globalThis = __webpack_require__(44576);\nvar fails = __webpack_require__(79039);\nvar uncurryThis = __webpack_require__(79504);\nvar ArrayBufferViewCore = __webpack_require__(94644);\nvar ArrayIterators = __webpack_require__(23792);\nvar wellKnownSymbol = __webpack_require__(78227);\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar Uint8Array = globalThis.Uint8Array;\nvar arrayValues = uncurryThis(ArrayIterators.values);\nvar arrayKeys = uncurryThis(ArrayIterators.keys);\nvar arrayEntries = uncurryThis(ArrayIterators.entries);\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\nvar TypedArrayPrototype = Uint8Array && Uint8Array.prototype;\n\nvar GENERIC = !fails(function () {\n  TypedArrayPrototype[ITERATOR].call([1]);\n});\n\nvar ITERATOR_IS_VALUES = !!TypedArrayPrototype\n  && TypedArrayPrototype.values\n  && TypedArrayPrototype[ITERATOR] === TypedArrayPrototype.values\n  && TypedArrayPrototype.values.name === 'values';\n\nvar typedArrayValues = function values() {\n  return arrayValues(aTypedArray(this));\n};\n\n// `%TypedArray%.prototype.entries` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.entries\nexportTypedArrayMethod('entries', function entries() {\n  return arrayEntries(aTypedArray(this));\n}, GENERIC);\n// `%TypedArray%.prototype.keys` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.keys\nexportTypedArrayMethod('keys', function keys() {\n  return arrayKeys(aTypedArray(this));\n}, GENERIC);\n// `%TypedArray%.prototype.values` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.values\nexportTypedArrayMethod('values', typedArrayValues, GENERIC || !ITERATOR_IS_VALUES, { name: 'values' });\n// `%TypedArray%.prototype[@@iterator]` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype-@@iterator\nexportTypedArrayMethod(ITERATOR, typedArrayValues, GENERIC || !ITERATOR_IS_VALUES, { name: 'values' });\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.iterator.js?")},13152:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";eval('\n\n__webpack_require__(52675);\n__webpack_require__(89463);\n__webpack_require__(2259);\n__webpack_require__(23418);\n__webpack_require__(64346);\n__webpack_require__(23792);\n__webpack_require__(94490);\n__webpack_require__(34782);\n__webpack_require__(23288);\n__webpack_require__(62010);\n__webpack_require__(59904);\n__webpack_require__(84185);\n__webpack_require__(40875);\n__webpack_require__(10287);\n__webpack_require__(3362);\n__webpack_require__(27495);\n__webpack_require__(38781);\n__webpack_require__(47764);\n__webpack_require__(62953);\nObject.defineProperty(exports, "__esModule", ({\n  value: true\n}));\nexports.PrintManager = void 0;\n__webpack_require__(45700);\n__webpack_require__(28706);\n__webpack_require__(2008);\n__webpack_require__(51629);\n__webpack_require__(62062);\n__webpack_require__(72712);\n__webpack_require__(89572);\n__webpack_require__(2892);\n__webpack_require__(26099);\n__webpack_require__(23500);\nvar _ui = __webpack_require__(32604);\nvar _Renderer = __webpack_require__(82485);\nfunction _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a \'" + n + "\' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }\nfunction _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }\nfunction _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }\nfunction _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }\nvar PrintManager = exports.PrintManager = /*#__PURE__*/_createClass(function PrintManager(_ref) {\n  var _this = this;\n  var pdfDocument = _ref.pdfDocument;\n  _classCallCheck(this, PrintManager);\n  _defineProperty(this, "handleBeforePrint", function () {\n    var rect = _this.printContainer.getBoundingClientRect();\n    _this.list.forEach(function (view) {\n      view.preCalc(rect, false, 1);\n      view.update();\n    });\n    var width = Math.min.apply(Math, _toConsumableArray(_this.list.map(function (it) {\n      return it.pageSize.width;\n    })));\n    var height = _this.list.reduce(function (sum, item) {\n      return sum + item.pageSize.height;\n    }, 0);\n    _this.printScrollContents.style = "\\n          cursor: default;\\n          margin: auto;\\n          outline: none;\\n          -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\\n          user-select: none;\\n          width: ".concat(width, "px;\\n          height: ").concat(height, "px;\\n          visibility: visible;\\n          page-break-after: avoid;\\n          page-break-inside: avoid;\\n      ");\n  });\n  _defineProperty(this, "handleAfterPrint", function () {\n    _this.list = [];\n    _this.removeElementAndChildren(_this.container);\n    _this.printContainer = null;\n    _this.printScrollContents = null;\n    _this.container = null;\n  });\n  _defineProperty(this, "removeElementAndChildren", function (element) {\n    if (!element) {\n      return;\n    }\n    // 자식 노드 모두 제거\n    while (element.firstChild) {\n      element.removeChild(element.firstChild);\n    }\n\n    // 자신도 부모에서 제거\n    if (element.parentNode) {\n      element.parentNode.removeChild(element);\n    }\n  });\n  _defineProperty(this, "run", /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n    var totalPageNum, rect, index, page, devicePixelRatio, view, canvas, ctx, viewport, _viewport, llxParent, llyParent, urxParent, uryParent, originalWidth, originalHeight, optimalScale, finalScale, viewportRescale, renderContext, width, height;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          if (!_this.printContainer) {\n            _context.next = 2;\n            break;\n          }\n          return _context.abrupt("return");\n        case 2:\n          if (!_this.printContainer) {\n            _this.container = document.createElement(\'div\');\n            _this.container.style.width = \'100%\';\n            _this.container.style.height = \'100%\';\n            _this.container.style.overflow = \'visible\';\n            _this.printContainer = document.createElement(\'div\');\n            _this.printContainer.classList.add(\'print-layer\');\n            _this.printContainer.style = "display: flex;\\n          flex-direction: column; \\n          flex: 1;\\n          width: 100%;\\n          height: 100%;\\n          overflow: auto;\\n          overscroll-behavior: none;\\n          z-index: 9999;\\n          background: white;\\n          visibility: visible;\\n          position: static !important;\\n              left: auto !important;\\n        top: auto !important;\\n          ";\n            _this.printScrollContents = document.createElement(\'div\');\n            _this.container.appendChild(_this.printContainer);\n            _this.printContainer.appendChild(_this.printScrollContents);\n            document.body.prepend(_this.container);\n          }\n          totalPageNum = _this.pdfDocument.numPages;\n          rect = _this.printContainer.getBoundingClientRect();\n          index = 1;\n        case 6:\n          if (!(index <= totalPageNum)) {\n            _context.next = 37;\n            break;\n          }\n          _context.next = 9;\n          return _this.pdfDocument.getPage(index);\n        case 9:\n          page = _context.sent;\n          devicePixelRatio = window.devicePixelRatio == 1 ? 1.5 : window.devicePixelRatio;\n          view = new _Renderer.PageSectionView({\n            pageNum: index,\n            id: \'pageSection\' + index,\n            pageInfo: page._pageInfo,\n            viewBox: page.getViewport(1).viewBox,\n            rotation: page.getViewport(1).rotation\n          });\n          view.preCalc(rect, false, 1);\n          canvas = document.createElement(\'canvas\');\n          canvas.style.position = \'absolute\';\n          canvas.style.filter = \'none\';\n          ctx = canvas.getContext(\'2d\', {\n            alpha: false,\n            willReadFrequently: false\n          });\n          ctx.imageSmoothingEnabled = false;\n          viewport = page.view;\n          _viewport = _slicedToArray(viewport, 4), llxParent = _viewport[0], llyParent = _viewport[1], urxParent = _viewport[2], uryParent = _viewport[3];\n          originalWidth = urxParent - llxParent;\n          originalHeight = uryParent - llyParent;\n          optimalScale = (0, _ui.calculateOptimalScale)(view.pageSize.width, view.pageSize.height, originalWidth, originalHeight);\n          finalScale = optimalScale * devicePixelRatio; // 디바이스 픽셀 비율 반영\n          viewportRescale = page.getViewport({\n            scale: finalScale\n          });\n          renderContext = {\n            canvasContext: ctx,\n            viewport: viewportRescale,\n            enableWebGL: true\n          };\n          canvas.width = Math.floor(viewportRescale.width);\n          canvas.height = Math.floor(viewportRescale.height);\n          _context.next = 30;\n          return page.render(renderContext).promise;\n        case 30:\n          view.pageContainer.appendChild(canvas);\n          view.update();\n          _this.printScrollContents.appendChild(view.element);\n          _this.list.push(view);\n        case 34:\n          index++;\n          _context.next = 6;\n          break;\n        case 37:\n          width = Math.min.apply(Math, _toConsumableArray(_this.list.map(function (it) {\n            return it.pageSize.width;\n          })));\n          height = _this.list.reduce(function (sum, item) {\n            return sum + item.pageSize.height;\n          }, 0);\n          _this.printScrollContents.style = "\\n        cursor: default;\\n        margin: auto;\\n        outline: none;\\n        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\\n        user-select: none;\\n        width: ".concat(width, "px;\\n        height: ").concat(height, "px;\\n        visibility: visible;\\n        page-break-after: avoid;\\n        page-break-inside: avoid;\\n    ");\n          window.print();\n        case 41:\n        case "end":\n          return _context.stop();\n      }\n    }, _callee);\n  })));\n  _defineProperty(this, "destroy", function () {});\n  this.printStatus = 0;\n  /** @type {HTMLElement} 스크롤되는 컨테이너 */\n  this.printContainer = null;\n  /** @type {HTMLElement} 스크롤안쪽 컨텐츠 */\n  this.printScrollContents = null;\n  this.container = null;\n  this.pdfDocument = pdfDocument;\n  this.list = [];\n  window.addEventListener(\'beforeprint\', function (e) {\n    _this.handleBeforePrint();\n  }); // 프린트 직전 호출 :contentReference[oaicite:4]{index=4}\n  window.addEventListener(\'afterprint\', this.handleAfterPrint);\n});\n\n//# sourceURL=webpack://ViewerJS/./src/pdf/core/PrintManager.js?')},13394:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";eval('__webpack_require__(45700);__webpack_require__(78125);__webpack_require__(51629);__webpack_require__(89572);__webpack_require__(4731);__webpack_require__(60479);__webpack_require__(2892);__webpack_require__(67945);__webpack_require__(83851);__webpack_require__(81278);__webpack_require__(10287);__webpack_require__(60825);__webpack_require__(40888);__webpack_require__(23500);Object.defineProperty(exports, "__esModule", ({value:true}));exports.version=exports.stopEvent=exports.shadow=exports.setLayerDimensions=exports.normalizeUnicode=exports.noContextMenu=exports.isPdfFile=exports.isDataScheme=exports.getXfaPageViewport=exports.getUuid=exports.getPdfFilenameFromUrl=exports.getFilenameFromUrl=exports.getDocument=exports.fetchData=exports.createValidAbsoluteUrl=exports.build=exports.XfaLayer=exports.VerbosityLevel=exports.Util=exports.TouchManager=exports.TextLayer=exports.SupportedImageMimeTypes=exports.SignatureExtractor=exports.ResponseException=exports.RenderingCancelledException=exports.PixelsPerInch=exports.PermissionFlag=exports.PasswordResponses=exports.PDFWorker=exports.PDFDateString=exports.PDFDataRangeTransport=exports.OutputScale=exports.OPS=exports.InvalidPDFException=exports.ImageKind=exports.GlobalWorkerOptions=exports.FeatureTest=exports.DrawLayer=exports.DOMSVGFactory=exports.ColorPicker=exports.AnnotationType=exports.AnnotationMode=exports.AnnotationLayer=exports.AnnotationEditorUIManager=exports.AnnotationEditorType=exports.AnnotationEditorParamsType=exports.AnnotationEditorLayer=exports.AbortException=void 0;__webpack_require__(52675);__webpack_require__(89463);__webpack_require__(66412);__webpack_require__(2259);__webpack_require__(28706);__webpack_require__(88431);__webpack_require__(33771);__webpack_require__(2008);__webpack_require__(48980);__webpack_require__(78350);__webpack_require__(23418);__webpack_require__(74423);__webpack_require__(25276);__webpack_require__(64346);__webpack_require__(23792);__webpack_require__(48598);__webpack_require__(8921);__webpack_require__(62062);__webpack_require__(72712);__webpack_require__(94490);__webpack_require__(34782);__webpack_require__(15086);__webpack_require__(26910);__webpack_require__(54554);__webpack_require__(30237);__webpack_require__(54743);__webpack_require__(46761);__webpack_require__(11745);__webpack_require__(38309);__webpack_require__(59089);__webpack_require__(60739);__webpack_require__(23288);__webpack_require__(94170);__webpack_require__(62010);__webpack_require__(36033);__webpack_require__(60605);__webpack_require__(39469);__webpack_require__(11367);__webpack_require__(5914);__webpack_require__(32637);__webpack_require__(9868);__webpack_require__(69085);__webpack_require__(59904);__webpack_require__(84185);__webpack_require__(5506);__webpack_require__(52811);__webpack_require__(40875);__webpack_require__(79432);__webpack_require__(26099);__webpack_require__(16034);__webpack_require__(78459);__webpack_require__(58940);__webpack_require__(3362);__webpack_require__(9391);__webpack_require__(84864);__webpack_require__(27495);__webpack_require__(38781);__webpack_require__(31415);__webpack_require__(99449);__webpack_require__(21699);__webpack_require__(47764);__webpack_require__(71761);__webpack_require__(35701);__webpack_require__(68156);__webpack_require__(25440);__webpack_require__(90744);__webpack_require__(11392);__webpack_require__(42762);__webpack_require__(39202);__webpack_require__(43359);__webpack_require__(5745);__webpack_require__(20781);__webpack_require__(34594);__webpack_require__(29833);__webpack_require__(46594);__webpack_require__(72107);__webpack_require__(95477);__webpack_require__(21489);__webpack_require__(22134);__webpack_require__(3690);__webpack_require__(61740);__webpack_require__(81630);__webpack_require__(72170);__webpack_require__(75044);__webpack_require__(69539);__webpack_require__(31694);__webpack_require__(89955);__webpack_require__(33206);__webpack_require__(48345);__webpack_require__(44496);__webpack_require__(66651);__webpack_require__(12887);__webpack_require__(19369);__webpack_require__(66812);__webpack_require__(8995);__webpack_require__(31575);__webpack_require__(36072);__webpack_require__(88747);__webpack_require__(28845);__webpack_require__(29423);__webpack_require__(57301);__webpack_require__(373);__webpack_require__(86614);__webpack_require__(41405);__webpack_require__(33684);__webpack_require__(73772);__webpack_require__(30958);__webpack_require__(62480);__webpack_require__(35874);__webpack_require__(47628);__webpack_require__(12041);__webpack_require__(62953);__webpack_require__(76031);__webpack_require__(3296);__webpack_require__(27208);__webpack_require__(48408);var _Util2,_PixelsPerInch2,_ImageManager,_TouchManager2,_AnnotationEditor,_TextLayer2,_PDFWorker2,_FreeTextEditor,_ColorPicker2,_HighlightEditor,_DrawingEditor,_SignatureExtractor2,_DrawLayer2;function _toSetter(t,e,n){e||(e=[]);var r=e.length++;return Object.defineProperty({},"_",{set:function set(o){e[r]=o,t.apply(n,e);}});}function _superPropGet(t,o,e,r){var p=_get2(_getPrototypeOf(1&r?t.prototype:t),o,e);return 2&r&&"function"==typeof p?function(t){return p.apply(e,t);}:p;}function _get2(){return _get2="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var p=_superPropBase(e,t);if(p){var n=Object.getOwnPropertyDescriptor(p,t);return n.get?n.get.call(arguments.length<3?e:r):n.value;}},_get2.apply(null,arguments);}function _superPropBase(t,o){for(;!{}.hasOwnProperty.call(t,o)&&null!==(t=_getPrototypeOf(t)););return t;}function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap(),t=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?t:r;})(e);}function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=_typeof(e)&&"function"!=typeof e)return{"default":e};var t=_getRequireWildcardCache(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&{}.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u];}return n["default"]=e,t&&t.set(e,n),n;}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}function _toArray(r){return _arrayWithHoles(r)||_iterableToArray(r)||_unsupportedIterableToArray(r)||_nonIterableRest();}function _toConsumableArray(r){return _arrayWithoutHoles(r)||_iterableToArray(r)||_unsupportedIterableToArray(r)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArray(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r);}function _arrayWithoutHoles(r){if(Array.isArray(r))return _arrayLikeToArray(r);}function _readOnlyError(r){throw new TypeError(\'"\'+r+\'" is read-only\');}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator["return"]&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a \'"+n+"\' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},"catch":function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function _classPrivateMethodInitSpec(e,a){_checkPrivateRedeclaration(e,a),a.add(e);}function _classPrivateFieldInitSpec(e,t,a){_checkPrivateRedeclaration(e,t),t.set(e,a);}function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object");}function _classPrivateGetter(s,r,a){return a(_assertClassBrand(s,r));}function _classPrivateFieldGet(s,a){return s.get(_assertClassBrand(s,a));}function _classPrivateFieldSet(s,a,r){return s.set(_assertClassBrand(s,a),r),r;}function asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value;}catch(n){return void e(n);}i.done?t(u):Promise.resolve(u).then(r,o);}function _asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){asyncGeneratorStep(a,r,o,_next,_throw,"next",n);}function _throw(n){asyncGeneratorStep(a,r,o,_next,_throw,"throw",n);}_next(void 0);});};}function _defineProperty(e,r,t){return(r=_toPropertyKey(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e;}function _assertClassBrand(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object");}function _slicedToArray(r,e){return _arrayWithHoles(r)||_iterableToArrayLimit(r,e)||_unsupportedIterableToArray(r,e)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t["return"]&&(u=t["return"](),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function _arrayWithHoles(r){if(Array.isArray(r))return r;}function _createForOfIteratorHelper(r,e){var t="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=_unsupportedIterableToArray(r))||e&&r&&"number"==typeof r.length){t&&(r=t);var _n2=0,F=function F(){};return{s:F,n:function n(){return _n2>=r.length?{done:!0}:{done:!1,value:r[_n2++]};},e:function e(r){throw r;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var o,a=!0,u=!1;return{s:function s(){t=t.call(r);},n:function n(){var r=t.next();return a=r.done,r;},e:function e(r){u=!0,o=r;},f:function f(){try{a||null==t["return"]||t["return"]();}finally{if(u)throw o;}}};}function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0;}}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n;}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o);}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e;}function _toPropertyKey(t){var i=_toPrimitive(t,"string");return"symbol"==_typeof(i)?i:i+"";}function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}function _classCallCheck(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function");}function _callSuper(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _possibleConstructorReturn(t,e){if(e&&("object"==_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t);}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return e;}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t);},_getPrototypeOf(t);}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e);}function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t;},_setPrototypeOf(t,e);}function _typeof(o){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},_typeof(o);}function _asyncIterator(r){var n,t,o,e=2;for("undefined"!=typeof Symbol&&(t=Symbol.asyncIterator,o=Symbol.iterator);e--;){if(t&&null!=(n=r[t]))return n.call(r);if(o&&null!=(n=r[o]))return new AsyncFromSyncIterator(n.call(r));t="@@asyncIterator",o="@@iterator";}throw new TypeError("Object is not async iterable");}function AsyncFromSyncIterator(r){function AsyncFromSyncIteratorContinuation(r){if(Object(r)!==r)return Promise.reject(new TypeError(r+" is not an object."));var n=r.done;return Promise.resolve(r.value).then(function(r){return{value:r,done:n};});}return AsyncFromSyncIterator=function AsyncFromSyncIterator(r){this.s=r,this.n=r.next;},AsyncFromSyncIterator.prototype={s:null,n:null,next:function next(){return AsyncFromSyncIteratorContinuation(this.n.apply(this.s,arguments));},"return":function _return(r){var n=this.s["return"];return void 0===n?Promise.resolve({value:r,done:!0}):AsyncFromSyncIteratorContinuation(n.apply(this.s,arguments));},"throw":function _throw(r){var n=this.s["return"];return void 0===n?Promise.reject(r):AsyncFromSyncIteratorContinuation(n.apply(this.s,arguments));}},new AsyncFromSyncIterator(r);}/**\n * @licstart The following is the entire license notice for the\n * JavaScript code in this page\n *\n * Copyright 2024 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * @licend The above is the entire license notice for the\n * JavaScript code in this page\n *//******/var __webpack_modules__={/***/12:(/***/function _(module,exports,__nested_webpack_require_26186__){;(function(root,factory,undef){if(true){module.exports=exports=factory(__nested_webpack_require_26186__(494),__nested_webpack_require_26186__(358),__nested_webpack_require_26186__(858));}else{}})(this,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var Base=C_lib.Base;var WordArray=C_lib.WordArray;var C_algo=C.algo;var SHA256=C_algo.SHA256;var HMAC=C_algo.HMAC;var PBKDF2=C_algo.PBKDF2=Base.extend({cfg:Base.extend({keySize:128/32,hasher:SHA256,iterations:250000}),init:function init(cfg){this.cfg=this.cfg.extend(cfg);},compute:function compute(password,salt){var cfg=this.cfg;var hmac=HMAC.create(cfg.hasher,password);var derivedKey=WordArray.create();var blockIndex=WordArray.create([0x00000001]);var derivedKeyWords=derivedKey.words;var blockIndexWords=blockIndex.words;var keySize=cfg.keySize;var iterations=cfg.iterations;while(derivedKeyWords.length<keySize){var block=hmac.update(salt).finalize(blockIndex);hmac.reset();var blockWords=block.words;var blockWordsLength=blockWords.length;var intermediate=block;for(var i=1;i<iterations;i++){intermediate=hmac.finalize(intermediate);hmac.reset();var intermediateWords=intermediate.words;for(var j=0;j<blockWordsLength;j++){blockWords[j]^=intermediateWords[j];}}derivedKey.concat(block);blockIndexWords[0]++;}derivedKey.sigBytes=keySize*4;return derivedKey;}});C.PBKDF2=function(password,salt,cfg){return PBKDF2.create(cfg).compute(password,salt);};})();return CryptoJS.PBKDF2;});/***/}),/***/69:(/***/function _(module,exports,__nested_webpack_require_27666__){;(function(root,factory,undef){if(true){module.exports=exports=factory(__nested_webpack_require_27666__(494),__nested_webpack_require_27666__(89),__nested_webpack_require_27666__(525),__nested_webpack_require_27666__(801),__nested_webpack_require_27666__(432));}else{}})(this,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var StreamCipher=C_lib.StreamCipher;var C_algo=C.algo;var S=[];var C_=[];var G=[];var RabbitLegacy=C_algo.RabbitLegacy=StreamCipher.extend({_doReset:function _doReset(){var K=this._key.words;var iv=this.cfg.iv;var X=this._X=[K[0],K[3]<<16|K[2]>>>16,K[1],K[0]<<16|K[3]>>>16,K[2],K[1]<<16|K[0]>>>16,K[3],K[2]<<16|K[1]>>>16];var C=this._C=[K[2]<<16|K[2]>>>16,K[0]&0xffff0000|K[1]&0x0000ffff,K[3]<<16|K[3]>>>16,K[1]&0xffff0000|K[2]&0x0000ffff,K[0]<<16|K[0]>>>16,K[2]&0xffff0000|K[3]&0x0000ffff,K[1]<<16|K[1]>>>16,K[3]&0xffff0000|K[0]&0x0000ffff];this._b=0;for(var i=0;i<4;i++){nextState.call(this);}for(var i=0;i<8;i++){C[i]^=X[i+4&7];}if(iv){var IV=iv.words;var IV_0=IV[0];var IV_1=IV[1];var i0=(IV_0<<8|IV_0>>>24)&0x00ff00ff|(IV_0<<24|IV_0>>>8)&0xff00ff00;var i2=(IV_1<<8|IV_1>>>24)&0x00ff00ff|(IV_1<<24|IV_1>>>8)&0xff00ff00;var i1=i0>>>16|i2&0xffff0000;var i3=i2<<16|i0&0x0000ffff;C[0]^=i0;C[1]^=i1;C[2]^=i2;C[3]^=i3;C[4]^=i0;C[5]^=i1;C[6]^=i2;C[7]^=i3;for(var i=0;i<4;i++){nextState.call(this);}}},_doProcessBlock:function _doProcessBlock(M,offset){var X=this._X;nextState.call(this);S[0]=X[0]^X[5]>>>16^X[3]<<16;S[1]=X[2]^X[7]>>>16^X[5]<<16;S[2]=X[4]^X[1]>>>16^X[7]<<16;S[3]=X[6]^X[3]>>>16^X[1]<<16;for(var i=0;i<4;i++){S[i]=(S[i]<<8|S[i]>>>24)&0x00ff00ff|(S[i]<<24|S[i]>>>8)&0xff00ff00;M[offset+i]^=S[i];}},blockSize:128/32,ivSize:64/32});function nextState(){var X=this._X;var C=this._C;for(var i=0;i<8;i++){C_[i]=C[i];}C[0]=C[0]+0x4d34d34d+this._b|0;C[1]=C[1]+0xd34d34d3+(C[0]>>>0<C_[0]>>>0?1:0)|0;C[2]=C[2]+0x34d34d34+(C[1]>>>0<C_[1]>>>0?1:0)|0;C[3]=C[3]+0x4d34d34d+(C[2]>>>0<C_[2]>>>0?1:0)|0;C[4]=C[4]+0xd34d34d3+(C[3]>>>0<C_[3]>>>0?1:0)|0;C[5]=C[5]+0x34d34d34+(C[4]>>>0<C_[4]>>>0?1:0)|0;C[6]=C[6]+0x4d34d34d+(C[5]>>>0<C_[5]>>>0?1:0)|0;C[7]=C[7]+0xd34d34d3+(C[6]>>>0<C_[6]>>>0?1:0)|0;this._b=C[7]>>>0<C_[7]>>>0?1:0;for(var i=0;i<8;i++){var gx=X[i]+C[i];var ga=gx&0xffff;var gb=gx>>>16;var gh=((ga*ga>>>17)+ga*gb>>>15)+gb*gb;var gl=((gx&0xffff0000)*gx|0)+((gx&0x0000ffff)*gx|0);G[i]=gh^gl;}X[0]=G[0]+(G[7]<<16|G[7]>>>16)+(G[6]<<16|G[6]>>>16)|0;X[1]=G[1]+(G[0]<<8|G[0]>>>24)+G[7]|0;X[2]=G[2]+(G[1]<<16|G[1]>>>16)+(G[0]<<16|G[0]>>>16)|0;X[3]=G[3]+(G[2]<<8|G[2]>>>24)+G[1]|0;X[4]=G[4]+(G[3]<<16|G[3]>>>16)+(G[2]<<16|G[2]>>>16)|0;X[5]=G[5]+(G[4]<<8|G[4]>>>24)+G[3]|0;X[6]=G[6]+(G[5]<<16|G[5]>>>16)+(G[4]<<16|G[4]>>>16)|0;X[7]=G[7]+(G[6]<<8|G[6]>>>24)+G[5]|0;}C.RabbitLegacy=StreamCipher._createHelper(RabbitLegacy);})();return CryptoJS.RabbitLegacy;});/***/}),/***/75:(/***/function _(module,exports,__nested_webpack_require_30461__){;(function(root,factory,undef){if(true){module.exports=exports=factory(__nested_webpack_require_30461__(494),__nested_webpack_require_30461__(89),__nested_webpack_require_30461__(525),__nested_webpack_require_30461__(801),__nested_webpack_require_30461__(432));}else{}})(this,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var BlockCipher=C_lib.BlockCipher;var C_algo=C.algo;var N=16;var ORIG_P=[0x243F6A88,0x85A308D3,0x13198A2E,0x03707344,0xA4093822,0x299F31D0,0x082EFA98,0xEC4E6C89,0x452821E6,0x38D01377,0xBE5466CF,0x34E90C6C,0xC0AC29B7,0xC97C50DD,0x3F84D5B5,0xB5470917,0x9216D5D9,0x8979FB1B];var ORIG_S=[[0xD1310BA6,0x98DFB5AC,0x2FFD72DB,0xD01ADFB7,0xB8E1AFED,0x6A267E96,0xBA7C9045,0xF12C7F99,0x24A19947,0xB3916CF7,0x0801F2E2,0x858EFC16,0x636920D8,0x71574E69,0xA458FEA3,0xF4933D7E,0x0D95748F,0x728EB658,0x718BCD58,0x82154AEE,0x7B54A41D,0xC25A59B5,0x9C30D539,0x2AF26013,0xC5D1B023,0x286085F0,0xCA417918,0xB8DB38EF,0x8E79DCB0,0x603A180E,0x6C9E0E8B,0xB01E8A3E,0xD71577C1,0xBD314B27,0x78AF2FDA,0x55605C60,0xE65525F3,0xAA55AB94,0x57489862,0x63E81440,0x55CA396A,0x2AAB10B6,0xB4CC5C34,0x1141E8CE,0xA15486AF,0x7C72E993,0xB3EE1411,0x636FBC2A,0x2BA9C55D,0x741831F6,0xCE5C3E16,0x9B87931E,0xAFD6BA33,0x6C24CF5C,0x7A325381,0x28958677,0x3B8F4898,0x6B4BB9AF,0xC4BFE81B,0x66282193,0x61D809CC,0xFB21A991,0x487CAC60,0x5DEC8032,0xEF845D5D,0xE98575B1,0xDC262302,0xEB651B88,0x23893E81,0xD396ACC5,0x0F6D6FF3,0x83F44239,0x2E0B4482,0xA4842004,0x69C8F04A,0x9E1F9B5E,0x21C66842,0xF6E96C9A,0x670C9C61,0xABD388F0,0x6A51A0D2,0xD8542F68,0x960FA728,0xAB5133A3,0x6EEF0B6C,0x137A3BE4,0xBA3BF050,0x7EFB2A98,0xA1F1651D,0x39AF0176,0x66CA593E,0x82430E88,0x8CEE8619,0x456F9FB4,0x7D84A5C3,0x3B8B5EBE,0xE06F75D8,0x85C12073,0x401A449F,0x56C16AA6,0x4ED3AA62,0x363F7706,0x1BFEDF72,0x429B023D,0x37D0D724,0xD00A1248,0xDB0FEAD3,0x49F1C09B,0x075372C9,0x80991B7B,0x25D479D8,0xF6E8DEF7,0xE3FE501A,0xB6794C3B,0x976CE0BD,0x04C006BA,0xC1A94FB6,0x409F60C4,0x5E5C9EC2,0x196A2463,0x68FB6FAF,0x3E6C53B5,0x1339B2EB,0x3B52EC6F,0x6DFC511F,0x9B30952C,0xCC814544,0xAF5EBD09,0xBEE3D004,0xDE334AFD,0x660F2807,0x192E4BB3,0xC0CBA857,0x45C8740F,0xD20B5F39,0xB9D3FBDB,0x5579C0BD,0x1A60320A,0xD6A100C6,0x402C7279,0x679F25FE,0xFB1FA3CC,0x8EA5E9F8,0xDB3222F8,0x3C7516DF,0xFD616B15,0x2F501EC8,0xAD0552AB,0x323DB5FA,0xFD238760,0x53317B48,0x3E00DF82,0x9E5C57BB,0xCA6F8CA0,0x1A87562E,0xDF1769DB,0xD542A8F6,0x287EFFC3,0xAC6732C6,0x8C4F5573,0x695B27B0,0xBBCA58C8,0xE1FFA35D,0xB8F011A0,0x10FA3D98,0xFD2183B8,0x4AFCB56C,0x2DD1D35B,0x9A53E479,0xB6F84565,0xD28E49BC,0x4BFB9790,0xE1DDF2DA,0xA4CB7E33,0x62FB1341,0xCEE4C6E8,0xEF20CADA,0x36774C01,0xD07E9EFE,0x2BF11FB4,0x95DBDA4D,0xAE909198,0xEAAD8E71,0x6B93D5A0,0xD08ED1D0,0xAFC725E0,0x8E3C5B2F,0x8E7594B7,0x8FF6E2FB,0xF2122B64,0x8888B812,0x900DF01C,0x4FAD5EA0,0x688FC31C,0xD1CFF191,0xB3A8C1AD,0x2F2F2218,0xBE0E1777,0xEA752DFE,0x8B021FA1,0xE5A0CC0F,0xB56F74E8,0x18ACF3D6,0xCE89E299,0xB4A84FE0,0xFD13E0B7,0x7CC43B81,0xD2ADA8D9,0x165FA266,0x80957705,0x93CC7314,0x211A1477,0xE6AD2065,0x77B5FA86,0xC75442F5,0xFB9D35CF,0xEBCDAF0C,0x7B3E89A0,0xD6411BD3,0xAE1E7E49,0x00250E2D,0x2071B35E,0x226800BB,0x57B8E0AF,0x2464369B,0xF009B91E,0x5563911D,0x59DFA6AA,0x78C14389,0xD95A537F,0x207D5BA2,0x02E5B9C5,0x83260376,0x6295CFA9,0x11C81968,0x4E734A41,0xB3472DCA,0x7B14A94A,0x1B510052,0x9A532915,0xD60F573F,0xBC9BC6E4,0x2B60A476,0x81E67400,0x08BA6FB5,0x571BE91F,0xF296EC6B,0x2A0DD915,0xB6636521,0xE7B9F9B6,0xFF34052E,0xC5855664,0x53B02D5D,0xA99F8FA1,0x08BA4799,0x6E85076A],[0x4B7A70E9,0xB5B32944,0xDB75092E,0xC4192623,0xAD6EA6B0,0x49A7DF7D,0x9CEE60B8,0x8FEDB266,0xECAA8C71,0x699A17FF,0x5664526C,0xC2B19EE1,0x193602A5,0x75094C29,0xA0591340,0xE4183A3E,0x3F54989A,0x5B429D65,0x6B8FE4D6,0x99F73FD6,0xA1D29C07,0xEFE830F5,0x4D2D38E6,0xF0255DC1,0x4CDD2086,0x8470EB26,0x6382E9C6,0x021ECC5E,0x09686B3F,0x3EBAEFC9,0x3C971814,0x6B6A70A1,0x687F3584,0x52A0E286,0xB79C5305,0xAA500737,0x3E07841C,0x7FDEAE5C,0x8E7D44EC,0x5716F2B8,0xB03ADA37,0xF0500C0D,0xF01C1F04,0x0200B3FF,0xAE0CF51A,0x3CB574B2,0x25837A58,0xDC0921BD,0xD19113F9,0x7CA92FF6,0x94324773,0x22F54701,0x3AE5E581,0x37C2DADC,0xC8B57634,0x9AF3DDA7,0xA9446146,0x0FD0030E,0xECC8C73E,0xA4751E41,0xE238CD99,0x3BEA0E2F,0x3280BBA1,0x183EB331,0x4E548B38,0x4F6DB908,0x6F420D03,0xF60A04BF,0x2CB81290,0x24977C79,0x5679B072,0xBCAF89AF,0xDE9A771F,0xD9930810,0xB38BAE12,0xDCCF3F2E,0x5512721F,0x2E6B7124,0x501ADDE6,0x9F84CD87,0x7A584718,0x7408DA17,0xBC9F9ABC,0xE94B7D8C,0xEC7AEC3A,0xDB851DFA,0x63094366,0xC464C3D2,0xEF1C1847,0x3215D908,0xDD433B37,0x24C2BA16,0x12A14D43,0x2A65C451,0x50940002,0x133AE4DD,0x71DFF89E,0x10314E55,0x81AC77D6,0x5F11199B,0x043556F1,0xD7A3C76B,0x3C11183B,0x5924A509,0xF28FE6ED,0x97F1FBFA,0x9EBABF2C,0x1E153C6E,0x86E34570,0xEAE96FB1,0x860E5E0A,0x5A3E2AB3,0x771FE71C,0x4E3D06FA,0x2965DCB9,0x99E71D0F,0x803E89D6,0x5266C825,0x2E4CC978,0x9C10B36A,0xC6150EBA,0x94E2EA78,0xA5FC3C53,0x1E0A2DF4,0xF2F74EA7,0x361D2B3D,0x1939260F,0x19C27960,0x5223A708,0xF71312B6,0xEBADFE6E,0xEAC31F66,0xE3BC4595,0xA67BC883,0xB17F37D1,0x018CFF28,0xC332DDEF,0xBE6C5AA5,0x65582185,0x68AB9802,0xEECEA50F,0xDB2F953B,0x2AEF7DAD,0x5B6E2F84,0x1521B628,0x29076170,0xECDD4775,0x619F1510,0x13CCA830,0xEB61BD96,0x0334FE1E,0xAA0363CF,0xB5735C90,0x4C70A239,0xD59E9E0B,0xCBAADE14,0xEECC86BC,0x60622CA7,0x9CAB5CAB,0xB2F3846E,0x648B1EAF,0x19BDF0CA,0xA02369B9,0x655ABB50,0x40685A32,0x3C2AB4B3,0x319EE9D5,0xC021B8F7,0x9B540B19,0x875FA099,0x95F7997E,0x623D7DA8,0xF837889A,0x97E32D77,0x11ED935F,0x16681281,0x0E358829,0xC7E61FD6,0x96DEDFA1,0x7858BA99,0x57F584A5,0x1B227263,0x9B83C3FF,0x1AC24696,0xCDB30AEB,0x532E3054,0x8FD948E4,0x6DBC3128,0x58EBF2EF,0x34C6FFEA,0xFE28ED61,0xEE7C3C73,0x5D4A14D9,0xE864B7E3,0x42105D14,0x203E13E0,0x45EEE2B6,0xA3AAABEA,0xDB6C4F15,0xFACB4FD0,0xC742F442,0xEF6ABBB5,0x654F3B1D,0x41CD2105,0xD81E799E,0x86854DC7,0xE44B476A,0x3D816250,0xCF62A1F2,0x5B8D2646,0xFC8883A0,0xC1C7B6A3,0x7F1524C3,0x69CB7492,0x47848A0B,0x5692B285,0x095BBF00,0xAD19489D,0x1462B174,0x23820E00,0x58428D2A,0x0C55F5EA,0x1DADF43E,0x233F7061,0x3372F092,0x8D937E41,0xD65FECF1,0x6C223BDB,0x7CDE3759,0xCBEE7460,0x4085F2A7,0xCE77326E,0xA6078084,0x19F8509E,0xE8EFD855,0x61D99735,0xA969A7AA,0xC50C06C2,0x5A04ABFC,0x800BCADC,0x9E447A2E,0xC3453484,0xFDD56705,0x0E1E9EC9,0xDB73DBD3,0x105588CD,0x675FDA79,0xE3674340,0xC5C43465,0x713E38D8,0x3D28F89E,0xF16DFF20,0x153E21E7,0x8FB03D4A,0xE6E39F2B,0xDB83ADF7],[0xE93D5A68,0x948140F7,0xF64C261C,0x94692934,0x411520F7,0x7602D4F7,0xBCF46B2E,0xD4A20068,0xD4082471,0x3320F46A,0x43B7D4B7,0x500061AF,0x1E39F62E,0x97244546,0x14214F74,0xBF8B8840,0x4D95FC1D,0x96B591AF,0x70F4DDD3,0x66A02F45,0xBFBC09EC,0x03BD9785,0x7FAC6DD0,0x31CB8504,0x96EB27B3,0x55FD3941,0xDA2547E6,0xABCA0A9A,0x28507825,0x530429F4,0x0A2C86DA,0xE9B66DFB,0x68DC1462,0xD7486900,0x680EC0A4,0x27A18DEE,0x4F3FFEA2,0xE887AD8C,0xB58CE006,0x7AF4D6B6,0xAACE1E7C,0xD3375FEC,0xCE78A399,0x406B2A42,0x20FE9E35,0xD9F385B9,0xEE39D7AB,0x3B124E8B,0x1DC9FAF7,0x4B6D1856,0x26A36631,0xEAE397B2,0x3A6EFA74,0xDD5B4332,0x6841E7F7,0xCA7820FB,0xFB0AF54E,0xD8FEB397,0x454056AC,0xBA489527,0x55533A3A,0x20838D87,0xFE6BA9B7,0xD096954B,0x55A867BC,0xA1159A58,0xCCA92963,0x99E1DB33,0xA62A4A56,0x3F3125F9,0x5EF47E1C,0x9029317C,0xFDF8E802,0x04272F70,0x80BB155C,0x05282CE3,0x95C11548,0xE4C66D22,0x48C1133F,0xC70F86DC,0x07F9C9EE,0x41041F0F,0x404779A4,0x5D886E17,0x325F51EB,0xD59BC0D1,0xF2BCC18F,0x41113564,0x257B7834,0x602A9C60,0xDFF8E8A3,0x1F636C1B,0x0E12B4C2,0x02E1329E,0xAF664FD1,0xCAD18115,0x6B2395E0,0x333E92E1,0x3B240B62,0xEEBEB922,0x85B2A20E,0xE6BA0D99,0xDE720C8C,0x2DA2F728,0xD0127845,0x95B794FD,0x647D0862,0xE7CCF5F0,0x5449A36F,0x877D48FA,0xC39DFD27,0xF33E8D1E,0x0A476341,0x992EFF74,0x3A6F6EAB,0xF4F8FD37,0xA812DC60,0xA1EBDDF8,0x991BE14C,0xDB6E6B0D,0xC67B5510,0x6D672C37,0x2765D43B,0xDCD0E804,0xF1290DC7,0xCC00FFA3,0xB5390F92,0x690FED0B,0x667B9FFB,0xCEDB7D9C,0xA091CF0B,0xD9155EA3,0xBB132F88,0x515BAD24,0x7B9479BF,0x763BD6EB,0x37392EB3,0xCC115979,0x8026E297,0xF42E312D,0x6842ADA7,0xC66A2B3B,0x12754CCC,0x782EF11C,0x6A124237,0xB79251E7,0x06A1BBE6,0x4BFB6350,0x1A6B1018,0x11CAEDFA,0x3D25BDD8,0xE2E1C3C9,0x44421659,0x0A121386,0xD90CEC6E,0xD5ABEA2A,0x64AF674E,0xDA86A85F,0xBEBFE988,0x64E4C3FE,0x9DBC8057,0xF0F7C086,0x60787BF8,0x6003604D,0xD1FD8346,0xF6381FB0,0x7745AE04,0xD736FCCC,0x83426B33,0xF01EAB71,0xB0804187,0x3C005E5F,0x77A057BE,0xBDE8AE24,0x55464299,0xBF582E61,0x4E58F48F,0xF2DDFDA2,0xF474EF38,0x8789BDC2,0x5366F9C3,0xC8B38E74,0xB475F255,0x46FCD9B9,0x7AEB2661,0x8B1DDF84,0x846A0E79,0x915F95E2,0x466E598E,0x20B45770,0x8CD55591,0xC902DE4C,0xB90BACE1,0xBB8205D0,0x11A86248,0x7574A99E,0xB77F19B6,0xE0A9DC09,0x662D09A1,0xC4324633,0xE85A1F02,0x09F0BE8C,0x4A99A025,0x1D6EFE10,0x1AB93D1D,0x0BA5A4DF,0xA186F20F,0x2868F169,0xDCB7DA83,0x573906FE,0xA1E2CE9B,0x4FCD7F52,0x50115E01,0xA70683FA,0xA002B5C4,0x0DE6D027,0x9AF88C27,0x773F8641,0xC3604C06,0x61A806B5,0xF0177A28,0xC0F586E0,0x006058AA,0x30DC7D62,0x11E69ED7,0x2338EA63,0x53C2DD94,0xC2C21634,0xBBCBEE56,0x90BCB6DE,0xEBFC7DA1,0xCE591D76,0x6F05E409,0x4B7C0188,0x39720A3D,0x7C927C24,0x86E3725F,0x724D9DB9,0x1AC15BB4,0xD39EB8FC,0xED545578,0x08FCA5B5,0xD83D7CD3,0x4DAD0FC4,0x1E50EF5E,0xB161E6F8,0xA28514D9,0x6C51133C,0x6FD5C7E7,0x56E14EC4,0x362ABFCE,0xDDC6C837,0xD79A3234,0x92638212,0x670EFA8E,0x406000E0],[0x3A39CE37,0xD3FAF5CF,0xABC27737,0x5AC52D1B,0x5CB0679E,0x4FA33742,0xD3822740,0x99BC9BBE,0xD5118E9D,0xBF0F7315,0xD62D1C7E,0xC700C47B,0xB78C1B6B,0x21A19045,0xB26EB1BE,0x6A366EB4,0x5748AB2F,0xBC946E79,0xC6A376D2,0x6549C2C8,0x530FF8EE,0x468DDE7D,0xD5730A1D,0x4CD04DC6,0x2939BBDB,0xA9BA4650,0xAC9526E8,0xBE5EE304,0xA1FAD5F0,0x6A2D519A,0x63EF8CE2,0x9A86EE22,0xC089C2B8,0x43242EF6,0xA51E03AA,0x9CF2D0A4,0x83C061BA,0x9BE96A4D,0x8FE51550,0xBA645BD6,0x2826A2F9,0xA73A3AE1,0x4BA99586,0xEF5562E9,0xC72FEFD3,0xF752F7DA,0x3F046F69,0x77FA0A59,0x80E4A915,0x87B08601,0x9B09E6AD,0x3B3EE593,0xE990FD5A,0x9E34D797,0x2CF0B7D9,0x022B8B51,0x96D5AC3A,0x017DA67D,0xD1CF3ED6,0x7C7D2D28,0x1F9F25CF,0xADF2B89B,0x5AD6B472,0x5A88F54C,0xE029AC71,0xE019A5E6,0x47B0ACFD,0xED93FA9B,0xE8D3C48D,0x283B57CC,0xF8D56629,0x79132E28,0x785F0191,0xED756055,0xF7960E44,0xE3D35E8C,0x15056DD4,0x88F46DBA,0x03A16125,0x0564F0BD,0xC3EB9E15,0x3C9057A2,0x97271AEC,0xA93A072A,0x1B3F6D9B,0x1E6321F5,0xF59C66FB,0x26DCF319,0x7533D928,0xB155FDF5,0x03563482,0x8ABA3CBB,0x28517711,0xC20AD9F8,0xABCC5167,0xCCAD925F,0x4DE81751,0x3830DC8E,0x379D5862,0x9320F991,0xEA7A90C2,0xFB3E7BCE,0x5121CE64,0x774FBE32,0xA8B6E37E,0xC3293D46,0x48DE5369,0x6413E680,0xA2AE0810,0xDD6DB224,0x69852DFD,0x09072166,0xB39A460A,0x6445C0DD,0x586CDECF,0x1C20C8AE,0x5BBEF7DD,0x1B588D40,0xCCD2017F,0x6BB4E3BB,0xDDA26A7E,0x3A59FF45,0x3E350A44,0xBCB4CDD5,0x72EACEA8,0xFA6484BB,0x8D6612AE,0xBF3C6F47,0xD29BE463,0x542F5D9E,0xAEC2771B,0xF64E6370,0x740E0D8D,0xE75B1357,0xF8721671,0xAF537D5D,0x4040CB08,0x4EB4E2CC,0x34D2466A,0x0115AF84,0xE1B00428,0x95983A1D,0x06B89FB4,0xCE6EA048,0x6F3F3B82,0x3520AB82,0x011A1D4B,0x277227F8,0x611560B1,0xE7933FDC,0xBB3A792B,0x344525BD,0xA08839E1,0x51CE794B,0x2F32C9B7,0xA01FBAC9,0xE01CC87E,0xBCC7D1F6,0xCF0111C3,0xA1E8AAC7,0x1A908749,0xD44FBD9A,0xD0DADECB,0xD50ADA38,0x0339C32A,0xC6913667,0x8DF9317C,0xE0B12B4F,0xF79E59B7,0x43F5BB3A,0xF2D519FF,0x27D9459C,0xBF97222C,0x15E6FC2A,0x0F91FC71,0x9B941525,0xFAE59361,0xCEB69CEB,0xC2A86459,0x12BAA8D1,0xB6C1075E,0xE3056A0C,0x10D25065,0xCB03A442,0xE0EC6E0E,0x1698DB3B,0x4C98A0BE,0x3278E964,0x9F1F9532,0xE0D392DF,0xD3A0342B,0x8971F21E,0x1B0A7441,0x4BA3348C,0xC5BE7120,0xC37632D8,0xDF359F8D,0x9B992F2E,0xE60B6F47,0x0FE3F11D,0xE54CDA54,0x1EDAD891,0xCE6279CF,0xCD3E7E6F,0x1618B166,0xFD2C1D05,0x848FD2C5,0xF6FB2299,0xF523F357,0xA6327623,0x93A83531,0x56CCCD02,0xACF08162,0x5A75EBB5,0x6E163697,0x88D273CC,0xDE966292,0x81B949D0,0x4C50901B,0x71C65614,0xE6C6C7BD,0x327A140A,0x45E1D006,0xC3F27B9A,0xC9AA53FD,0x62A80F00,0xBB25BFE2,0x35BDD2F6,0x71126905,0xB2040222,0xB6CBCF7C,0xCD769C2B,0x53113EC0,0x1640E3D3,0x38ABBD60,0x2547ADF0,0xBA38209C,0xF746CE76,0x77AFA1C5,0x20756060,0x85CBFE4E,0x8AE88DD8,0x7AAAF9B0,0x4CF9AA7E,0x1948C25C,0x02FB8A8C,0x01C36AE4,0xD6EBE1F9,0x90D4F869,0xA65CDEA0,0x3F09252D,0xC208E69F,0xB74E6132,0xCE77E25B,0x578FDFE3,0x3AC372E6]];var BLOWFISH_CTX={pbox:[],sbox:[]};function F(ctx,x){var a=x>>24&0xFF;var b=x>>16&0xFF;var c=x>>8&0xFF;var d=x&0xFF;var y=ctx.sbox[0][a]+ctx.sbox[1][b];y=y^ctx.sbox[2][c];y=y+ctx.sbox[3][d];return y;}function BlowFish_Encrypt(ctx,left,right){var Xl=left;var Xr=right;var temp;for(var i=0;i<N;++i){Xl=Xl^ctx.pbox[i];Xr=F(ctx,Xl)^Xr;temp=Xl;Xl=Xr;Xr=temp;}temp=Xl;Xl=Xr;Xr=temp;Xr=Xr^ctx.pbox[N];Xl=Xl^ctx.pbox[N+1];return{left:Xl,right:Xr};}function BlowFish_Decrypt(ctx,left,right){var Xl=left;var Xr=right;var temp;for(var i=N+1;i>1;--i){Xl=Xl^ctx.pbox[i];Xr=F(ctx,Xl)^Xr;temp=Xl;Xl=Xr;Xr=temp;}temp=Xl;Xl=Xr;Xr=temp;Xr=Xr^ctx.pbox[1];Xl=Xl^ctx.pbox[0];return{left:Xl,right:Xr};}function BlowFishInit(ctx,key,keysize){for(var Row=0;Row<4;Row++){ctx.sbox[Row]=[];for(var Col=0;Col<256;Col++){ctx.sbox[Row][Col]=ORIG_S[Row][Col];}}var keyIndex=0;for(var index=0;index<N+2;index++){ctx.pbox[index]=ORIG_P[index]^key[keyIndex];keyIndex++;if(keyIndex>=keysize){keyIndex=0;}}var Data1=0;var Data2=0;var res=0;for(var i=0;i<N+2;i+=2){res=BlowFish_Encrypt(ctx,Data1,Data2);Data1=res.left;Data2=res.right;ctx.pbox[i]=Data1;ctx.pbox[i+1]=Data2;}for(var _i=0;_i<4;_i++){for(var j=0;j<256;j+=2){res=BlowFish_Encrypt(ctx,Data1,Data2);Data1=res.left;Data2=res.right;ctx.sbox[_i][j]=Data1;ctx.sbox[_i][j+1]=Data2;}}return true;}var Blowfish=C_algo.Blowfish=BlockCipher.extend({_doReset:function _doReset(){if(this._keyPriorReset===this._key){return;}var key=this._keyPriorReset=this._key;var keyWords=key.words;var keySize=key.sigBytes/4;BlowFishInit(BLOWFISH_CTX,keyWords,keySize);},encryptBlock:function encryptBlock(M,offset){var res=BlowFish_Encrypt(BLOWFISH_CTX,M[offset],M[offset+1]);M[offset]=res.left;M[offset+1]=res.right;},decryptBlock:function decryptBlock(M,offset){var res=BlowFish_Decrypt(BLOWFISH_CTX,M[offset],M[offset+1]);M[offset]=res.left;M[offset+1]=res.right;},blockSize:64/32,keySize:128/32,ivSize:64/32});C.Blowfish=BlockCipher._createHelper(Blowfish);})();return CryptoJS.Blowfish;});/***/}),/***/89:(/***/function _(module,exports,__nested_webpack_require_44354__){;(function(root,factory){if(true){module.exports=exports=factory(__nested_webpack_require_44354__(494));}else{}})(this,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var WordArray=C_lib.WordArray;var C_enc=C.enc;var Base64=C_enc.Base64={stringify:function stringify(wordArray){var words=wordArray.words;var sigBytes=wordArray.sigBytes;var map=this._map;wordArray.clamp();var base64Chars=[];for(var i=0;i<sigBytes;i+=3){var byte1=words[i>>>2]>>>24-i%4*8&0xff;var byte2=words[i+1>>>2]>>>24-(i+1)%4*8&0xff;var byte3=words[i+2>>>2]>>>24-(i+2)%4*8&0xff;var triplet=byte1<<16|byte2<<8|byte3;for(var j=0;j<4&&i+j*0.75<sigBytes;j++){base64Chars.push(map.charAt(triplet>>>6*(3-j)&0x3f));}}var paddingChar=map.charAt(64);if(paddingChar){while(base64Chars.length%4){base64Chars.push(paddingChar);}}return base64Chars.join(\'\');},parse:function parse(base64Str){var base64StrLength=base64Str.length;var map=this._map;var reverseMap=this._reverseMap;if(!reverseMap){reverseMap=this._reverseMap=[];for(var j=0;j<map.length;j++){reverseMap[map.charCodeAt(j)]=j;}}var paddingChar=map.charAt(64);if(paddingChar){var paddingIndex=base64Str.indexOf(paddingChar);if(paddingIndex!==-1){base64StrLength=paddingIndex;}}return parseLoop(base64Str,base64StrLength,reverseMap);},_map:\'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\'};function parseLoop(base64Str,base64StrLength,reverseMap){var words=[];var nBytes=0;for(var i=0;i<base64StrLength;i++){if(i%4){var bits1=reverseMap[base64Str.charCodeAt(i-1)]<<i%4*2;var bits2=reverseMap[base64Str.charCodeAt(i)]>>>6-i%4*2;var bitsCombined=bits1|bits2;words[nBytes>>>2]|=bitsCombined<<24-nBytes%4*8;nBytes++;}}return WordArray.create(words,nBytes);}})();return CryptoJS.enc.Base64;});/***/}),/***/109:(/***/function _(module,exports,__nested_webpack_require_46150__){;(function(root,factory){if(true){module.exports=exports=factory(__nested_webpack_require_46150__(494));}else{}})(this,function(CryptoJS){(function(){if(typeof ArrayBuffer!=\'function\'){return;}var C=CryptoJS;var C_lib=C.lib;var WordArray=C_lib.WordArray;var superInit=WordArray.init;var subInit=WordArray.init=function(typedArray){if(typedArray instanceof ArrayBuffer){typedArray=new Uint8Array(typedArray);}if(typedArray instanceof Int8Array||typeof Uint8ClampedArray!=="undefined"&&typedArray instanceof Uint8ClampedArray||typedArray instanceof Int16Array||typedArray instanceof Uint16Array||typedArray instanceof Int32Array||typedArray instanceof Uint32Array||typedArray instanceof Float32Array||typedArray instanceof Float64Array){typedArray=new Uint8Array(typedArray.buffer,typedArray.byteOffset,typedArray.byteLength);}if(typedArray instanceof Uint8Array){var typedArrayByteLength=typedArray.byteLength;var words=[];for(var i=0;i<typedArrayByteLength;i++){words[i>>>2]|=typedArray[i]<<24-i%4*8;}superInit.call(this,words,typedArrayByteLength);}else{superInit.apply(this,arguments);}};subInit.prototype=WordArray;})();return CryptoJS.lib.WordArray;});/***/}),/***/119:(/***/function _(module,exports,__nested_webpack_require_47363__){;(function(root,factory,undef){if(true){module.exports=exports=factory(__nested_webpack_require_47363__(494),__nested_webpack_require_47363__(839));}else{}})(this,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var Hasher=C_lib.Hasher;var C_x64=C.x64;var X64Word=C_x64.Word;var X64WordArray=C_x64.WordArray;var C_algo=C.algo;function X64Word_create(){return X64Word.create.apply(X64Word,arguments);}var K=[X64Word_create(0x428a2f98,0xd728ae22),X64Word_create(0x71374491,0x23ef65cd),X64Word_create(0xb5c0fbcf,0xec4d3b2f),X64Word_create(0xe9b5dba5,0x8189dbbc),X64Word_create(0x3956c25b,0xf348b538),X64Word_create(0x59f111f1,0xb605d019),X64Word_create(0x923f82a4,0xaf194f9b),X64Word_create(0xab1c5ed5,0xda6d8118),X64Word_create(0xd807aa98,0xa3030242),X64Word_create(0x12835b01,0x45706fbe),X64Word_create(0x243185be,0x4ee4b28c),X64Word_create(0x550c7dc3,0xd5ffb4e2),X64Word_create(0x72be5d74,0xf27b896f),X64Word_create(0x80deb1fe,0x3b1696b1),X64Word_create(0x9bdc06a7,0x25c71235),X64Word_create(0xc19bf174,0xcf692694),X64Word_create(0xe49b69c1,0x9ef14ad2),X64Word_create(0xefbe4786,0x384f25e3),X64Word_create(0x0fc19dc6,0x8b8cd5b5),X64Word_create(0x240ca1cc,0x77ac9c65),X64Word_create(0x2de92c6f,0x592b0275),X64Word_create(0x4a7484aa,0x6ea6e483),X64Word_create(0x5cb0a9dc,0xbd41fbd4),X64Word_create(0x76f988da,0x831153b5),X64Word_create(0x983e5152,0xee66dfab),X64Word_create(0xa831c66d,0x2db43210),X64Word_create(0xb00327c8,0x98fb213f),X64Word_create(0xbf597fc7,0xbeef0ee4),X64Word_create(0xc6e00bf3,0x3da88fc2),X64Word_create(0xd5a79147,0x930aa725),X64Word_create(0x06ca6351,0xe003826f),X64Word_create(0x14292967,0x0a0e6e70),X64Word_create(0x27b70a85,0x46d22ffc),X64Word_create(0x2e1b2138,0x5c26c926),X64Word_create(0x4d2c6dfc,0x5ac42aed),X64Word_create(0x53380d13,0x9d95b3df),X64Word_create(0x650a7354,0x8baf63de),X64Word_create(0x766a0abb,0x3c77b2a8),X64Word_create(0x81c2c92e,0x47edaee6),X64Word_create(0x92722c85,0x1482353b),X64Word_create(0xa2bfe8a1,0x4cf10364),X64Word_create(0xa81a664b,0xbc423001),X64Word_create(0xc24b8b70,0xd0f89791),X64Word_create(0xc76c51a3,0x0654be30),X64Word_create(0xd192e819,0xd6ef5218),X64Word_create(0xd6990624,0x5565a910),X64Word_create(0xf40e3585,0x5771202a),X64Word_create(0x106aa070,0x32bbd1b8),X64Word_create(0x19a4c116,0xb8d2d0c8),X64Word_create(0x1e376c08,0x5141ab53),X64Word_create(0x2748774c,0xdf8eeb99),X64Word_create(0x34b0bcb5,0xe19b48a8),X64Word_create(0x391c0cb3,0xc5c95a63),X64Word_create(0x4ed8aa4a,0xe3418acb),X64Word_create(0x5b9cca4f,0x7763e373),X64Word_create(0x682e6ff3,0xd6b2b8a3),X64Word_create(0x748f82ee,0x5defb2fc),X64Word_create(0x78a5636f,0x43172f60),X64Word_create(0x84c87814,0xa1f0ab72),X64Word_create(0x8cc70208,0x1a6439ec),X64Word_create(0x90befffa,0x23631e28),X64Word_create(0xa4506ceb,0xde82bde9),X64Word_create(0xbef9a3f7,0xb2c67915),X64Word_create(0xc67178f2,0xe372532b),X64Word_create(0xca273ece,0xea26619c),X64Word_create(0xd186b8c7,0x21c0c207),X64Word_create(0xeada7dd6,0xcde0eb1e),X64Word_create(0xf57d4f7f,0xee6ed178),X64Word_create(0x06f067aa,0x72176fba),X64Word_create(0x0a637dc5,0xa2c898a6),X64Word_create(0x113f9804,0xbef90dae),X64Word_create(0x1b710b35,0x131c471b),X64Word_create(0x28db77f5,0x23047d84),X64Word_create(0x32caab7b,0x40c72493),X64Word_create(0x3c9ebe0a,0x15c9bebc),X64Word_create(0x431d67c4,0x9c100d4c),X64Word_create(0x4cc5d4be,0xcb3e42b6),X64Word_create(0x597f299c,0xfc657e2a),X64Word_create(0x5fcb6fab,0x3ad6faec),X64Word_create(0x6c44198c,0x4a475817)];var W=[];(function(){for(var i=0;i<80;i++){W[i]=X64Word_create();}})();var SHA512=C_algo.SHA512=Hasher.extend({_doReset:function _doReset(){this._hash=new X64WordArray.init([new X64Word.init(0x6a09e667,0xf3bcc908),new X64Word.init(0xbb67ae85,0x84caa73b),new X64Word.init(0x3c6ef372,0xfe94f82b),new X64Word.init(0xa54ff53a,0x5f1d36f1),new X64Word.init(0x510e527f,0xade682d1),new X64Word.init(0x9b05688c,0x2b3e6c1f),new X64Word.init(0x1f83d9ab,0xfb41bd6b),new X64Word.init(0x5be0cd19,0x137e2179)]);},_doProcessBlock:function _doProcessBlock(M,offset){var H=this._hash.words;var H0=H[0];var H1=H[1];var H2=H[2];var H3=H[3];var H4=H[4];var H5=H[5];var H6=H[6];var H7=H[7];var H0h=H0.high;var H0l=H0.low;var H1h=H1.high;var H1l=H1.low;var H2h=H2.high;var H2l=H2.low;var H3h=H3.high;var H3l=H3.low;var H4h=H4.high;var H4l=H4.low;var H5h=H5.high;var H5l=H5.low;var H6h=H6.high;var H6l=H6.low;var H7h=H7.high;var H7l=H7.low;var ah=H0h;var al=H0l;var bh=H1h;var bl=H1l;var ch=H2h;var cl=H2l;var dh=H3h;var dl=H3l;var eh=H4h;var el=H4l;var fh=H5h;var fl=H5l;var gh=H6h;var gl=H6l;var hh=H7h;var hl=H7l;for(var i=0;i<80;i++){var Wil;var Wih;var Wi=W[i];if(i<16){Wih=Wi.high=M[offset+i*2]|0;Wil=Wi.low=M[offset+i*2+1]|0;}else{var gamma0x=W[i-15];var gamma0xh=gamma0x.high;var gamma0xl=gamma0x.low;var gamma0h=(gamma0xh>>>1|gamma0xl<<31)^(gamma0xh>>>8|gamma0xl<<24)^gamma0xh>>>7;var gamma0l=(gamma0xl>>>1|gamma0xh<<31)^(gamma0xl>>>8|gamma0xh<<24)^(gamma0xl>>>7|gamma0xh<<25);var gamma1x=W[i-2];var gamma1xh=gamma1x.high;var gamma1xl=gamma1x.low;var gamma1h=(gamma1xh>>>19|gamma1xl<<13)^(gamma1xh<<3|gamma1xl>>>29)^gamma1xh>>>6;var gamma1l=(gamma1xl>>>19|gamma1xh<<13)^(gamma1xl<<3|gamma1xh>>>29)^(gamma1xl>>>6|gamma1xh<<26);var Wi7=W[i-7];var Wi7h=Wi7.high;var Wi7l=Wi7.low;var Wi16=W[i-16];var Wi16h=Wi16.high;var Wi16l=Wi16.low;Wil=gamma0l+Wi7l;Wih=gamma0h+Wi7h+(Wil>>>0<gamma0l>>>0?1:0);Wil=Wil+gamma1l;Wih=Wih+gamma1h+(Wil>>>0<gamma1l>>>0?1:0);Wil=Wil+Wi16l;Wih=Wih+Wi16h+(Wil>>>0<Wi16l>>>0?1:0);Wi.high=Wih;Wi.low=Wil;}var chh=eh&fh^~eh&gh;var chl=el&fl^~el&gl;var majh=ah&bh^ah&ch^bh&ch;var majl=al&bl^al&cl^bl&cl;var sigma0h=(ah>>>28|al<<4)^(ah<<30|al>>>2)^(ah<<25|al>>>7);var sigma0l=(al>>>28|ah<<4)^(al<<30|ah>>>2)^(al<<25|ah>>>7);var sigma1h=(eh>>>14|el<<18)^(eh>>>18|el<<14)^(eh<<23|el>>>9);var sigma1l=(el>>>14|eh<<18)^(el>>>18|eh<<14)^(el<<23|eh>>>9);var Ki=K[i];var Kih=Ki.high;var Kil=Ki.low;var t1l=hl+sigma1l;var t1h=hh+sigma1h+(t1l>>>0<hl>>>0?1:0);var t1l=t1l+chl;var t1h=t1h+chh+(t1l>>>0<chl>>>0?1:0);var t1l=t1l+Kil;var t1h=t1h+Kih+(t1l>>>0<Kil>>>0?1:0);var t1l=t1l+Wil;var t1h=t1h+Wih+(t1l>>>0<Wil>>>0?1:0);var t2l=sigma0l+majl;var t2h=sigma0h+majh+(t2l>>>0<sigma0l>>>0?1:0);hh=gh;hl=gl;gh=fh;gl=fl;fh=eh;fl=el;el=dl+t1l|0;eh=dh+t1h+(el>>>0<dl>>>0?1:0)|0;dh=ch;dl=cl;ch=bh;cl=bl;bh=ah;bl=al;al=t1l+t2l|0;ah=t1h+t2h+(al>>>0<t1l>>>0?1:0)|0;}H0l=H0.low=H0l+al;H0.high=H0h+ah+(H0l>>>0<al>>>0?1:0);H1l=H1.low=H1l+bl;H1.high=H1h+bh+(H1l>>>0<bl>>>0?1:0);H2l=H2.low=H2l+cl;H2.high=H2h+ch+(H2l>>>0<cl>>>0?1:0);H3l=H3.low=H3l+dl;H3.high=H3h+dh+(H3l>>>0<dl>>>0?1:0);H4l=H4.low=H4l+el;H4.high=H4h+eh+(H4l>>>0<el>>>0?1:0);H5l=H5.low=H5l+fl;H5.high=H5h+fh+(H5l>>>0<fl>>>0?1:0);H6l=H6.low=H6l+gl;H6.high=H6h+gh+(H6l>>>0<gl>>>0?1:0);H7l=H7.low=H7l+hl;H7.high=H7h+hh+(H7l>>>0<hl>>>0?1:0);},_doFinalize:function _doFinalize(){var data=this._data;var dataWords=data.words;var nBitsTotal=this._nDataBytes*8;var nBitsLeft=data.sigBytes*8;dataWords[nBitsLeft>>>5]|=0x80<<24-nBitsLeft%32;dataWords[(nBitsLeft+128>>>10<<5)+30]=Math.floor(nBitsTotal/0x100000000);dataWords[(nBitsLeft+128>>>10<<5)+31]=nBitsTotal;data.sigBytes=dataWords.length*4;this._process();var hash=this._hash.toX32();return hash;},clone:function clone(){var clone=Hasher.clone.call(this);clone._hash=this._hash.clone();return clone;},blockSize:1024/32});C.SHA512=Hasher._createHelper(SHA512);C.HmacSHA512=Hasher._createHmacHelper(SHA512);})();return CryptoJS.SHA512;});/***/}),/***/198:(/***/function _(module,exports,__nested_webpack_require_54792__){;(function(root,factory,undef){if(true){module.exports=exports=factory(__nested_webpack_require_54792__(494),__nested_webpack_require_54792__(839),__nested_webpack_require_54792__(119));}else{}})(this,function(CryptoJS){(function(){var C=CryptoJS;var C_x64=C.x64;var X64Word=C_x64.Word;var X64WordArray=C_x64.WordArray;var C_algo=C.algo;var SHA512=C_algo.SHA512;var SHA384=C_algo.SHA384=SHA512.extend({_doReset:function _doReset(){this._hash=new X64WordArray.init([new X64Word.init(0xcbbb9d5d,0xc1059ed8),new X64Word.init(0x629a292a,0x367cd507),new X64Word.init(0x9159015a,0x3070dd17),new X64Word.init(0x152fecd8,0xf70e5939),new X64Word.init(0x67332667,0xffc00b31),new X64Word.init(0x8eb44a87,0x68581511),new X64Word.init(0xdb0c2e0d,0x64f98fa7),new X64Word.init(0x47b5481d,0xbefa4fa4)]);},_doFinalize:function _doFinalize(){var hash=SHA512._doFinalize.call(this);hash.sigBytes-=16;return hash;}});C.SHA384=SHA512._createHelper(SHA384);C.HmacSHA384=SHA512._createHmacHelper(SHA384);})();return CryptoJS.SHA384;});/***/}),/***/223:(/***/function _(module,exports,__nested_webpack_require_55835__){;(function(root,factory,undef){if(true){module.exports=exports=factory(__nested_webpack_require_55835__(494),__nested_webpack_require_55835__(432));}else{}})(this,function(CryptoJS){CryptoJS.mode.CTRGladman=function(){var CTRGladman=CryptoJS.lib.BlockCipherMode.extend();function incWord(word){if((word>>24&0xff)===0xff){var b1=word>>16&0xff;var b2=word>>8&0xff;var b3=word&0xff;if(b1===0xff){b1=0;if(b2===0xff){b2=0;if(b3===0xff){b3=0;}else{++b3;}}else{++b2;}}else{++b1;}word=0;word+=b1<<16;word+=b2<<8;word+=b3;}else{word+=0x01<<24;}return word;}function incCounter(counter){if((counter[0]=incWord(counter[0]))===0){counter[1]=incWord(counter[1]);}return counter;}var Encryptor=CTRGladman.Encryptor=CTRGladman.extend({processBlock:function processBlock(words,offset){var cipher=this._cipher;var blockSize=cipher.blockSize;var iv=this._iv;var counter=this._counter;if(iv){counter=this._counter=iv.slice(0);this._iv=undefined;}incCounter(counter);var keystream=counter.slice(0);cipher.encryptBlock(keystream,0);for(var i=0;i<blockSize;i++){words[offset+i]^=keystream[i];}}});CTRGladman.Decryptor=Encryptor;return CTRGladman;}();return CryptoJS.mode.CTRGladman;});/***/}),/***/224:(/***/function _(module,exports,__nested_webpack_require_57042__){;(function(root,factory){if(true){module.exports=exports=factory(__nested_webpack_require_57042__(494));}else{}})(this,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var WordArray=C_lib.WordArray;var Hasher=C_lib.Hasher;var C_algo=C.algo;var W=[];var SHA1=C_algo.SHA1=Hasher.extend({_doReset:function _doReset(){this._hash=new WordArray.init([0x67452301,0xefcdab89,0x98badcfe,0x10325476,0xc3d2e1f0]);},_doProcessBlock:function _doProcessBlock(M,offset){var H=this._hash.words;var a=H[0];var b=H[1];var c=H[2];var d=H[3];var e=H[4];for(var i=0;i<80;i++){if(i<16){W[i]=M[offset+i]|0;}else{var n=W[i-3]^W[i-8]^W[i-14]^W[i-16];W[i]=n<<1|n>>>31;}var t=(a<<5|a>>>27)+e+W[i];if(i<20){t+=(b&c|~b&d)+0x5a827999;}else if(i<40){t+=(b^c^d)+0x6ed9eba1;}else if(i<60){t+=(b&c|b&d|c&d)-0x70e44324;}else{t+=(b^c^d)-0x359d3e2a;}e=d;d=c;c=b<<30|b>>>2;b=a;a=t;}H[0]=H[0]+a|0;H[1]=H[1]+b|0;H[2]=H[2]+c|0;H[3]=H[3]+d|0;H[4]=H[4]+e|0;},_doFinalize:function _doFinalize(){var data=this._data;var dataWords=data.words;var nBitsTotal=this._nDataBytes*8;var nBitsLeft=data.sigBytes*8;dataWords[nBitsLeft>>>5]|=0x80<<24-nBitsLeft%32;dataWords[(nBitsLeft+64>>>9<<4)+14]=Math.floor(nBitsTotal/0x100000000);dataWords[(nBitsLeft+64>>>9<<4)+15]=nBitsTotal;data.sigBytes=dataWords.length*4;this._process();return this._hash;},clone:function clone(){var clone=Hasher.clone.call(this);clone._hash=this._hash.clone();return clone;}});C.SHA1=Hasher._createHelper(SHA1);C.HmacSHA1=Hasher._createHmacHelper(SHA1);})();return CryptoJS.SHA1;});/***/}),/***/226:(/***/function _(module,exports,__nested_webpack_require_58617__){;(function(root,factory,undef){if(true){module.exports=exports=factory(__nested_webpack_require_58617__(494),__nested_webpack_require_58617__(432));}else{}})(this,function(CryptoJS){CryptoJS.mode.CFB=function(){var CFB=CryptoJS.lib.BlockCipherMode.extend();CFB.Encryptor=CFB.extend({processBlock:function processBlock(words,offset){var cipher=this._cipher;var blockSize=cipher.blockSize;generateKeystreamAndEncrypt.call(this,words,offset,blockSize,cipher);this._prevBlock=words.slice(offset,offset+blockSize);}});CFB.Decryptor=CFB.extend({processBlock:function processBlock(words,offset){var cipher=this._cipher;var blockSize=cipher.blockSize;var thisBlock=words.slice(offset,offset+blockSize);generateKeystreamAndEncrypt.call(this,words,offset,blockSize,cipher);this._prevBlock=thisBlock;}});function generateKeystreamAndEncrypt(words,offset,blockSize,cipher){var keystream;var iv=this._iv;if(iv){keystream=iv.slice(0);this._iv=undefined;}else{keystream=this._prevBlock;}cipher.encryptBlock(keystream,0);for(var i=0;i<blockSize;i++){words[offset+i]^=keystream[i];}}return CFB;}();return CryptoJS.mode.CFB;});/***/}),/***/273:(/***/function _(module,exports,__nested_webpack_require_59770__){;(function(root,factory,undef){if(true){module.exports=exports=factory(__nested_webpack_require_59770__(494),__nested_webpack_require_59770__(432));}else{}})(this,function(CryptoJS){CryptoJS.mode.ECB=function(){var ECB=CryptoJS.lib.BlockCipherMode.extend();ECB.Encryptor=ECB.extend({processBlock:function processBlock(words,offset){this._cipher.encryptBlock(words,offset);}});ECB.Decryptor=ECB.extend({processBlock:function processBlock(words,offset){this._cipher.decryptBlock(words,offset);}});return ECB;}();return CryptoJS.mode.ECB;});/***/}),/***/332:(/***/function _(module,exports,__nested_webpack_require_60352__){;(function(root,factory,undef){if(true){module.exports=exports=factory(__nested_webpack_require_60352__(494),__nested_webpack_require_60352__(89),__nested_webpack_require_60352__(525),__nested_webpack_require_60352__(801),__nested_webpack_require_60352__(432));}else{}})(this,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var StreamCipher=C_lib.StreamCipher;var C_algo=C.algo;var RC4=C_algo.RC4=StreamCipher.extend({_doReset:function _doReset(){var key=this._key;var keyWords=key.words;var keySigBytes=key.sigBytes;var S=this._S=[];for(var i=0;i<256;i++){S[i]=i;}for(var i=0,j=0;i<256;i++){var keyByteIndex=i%keySigBytes;var keyByte=keyWords[keyByteIndex>>>2]>>>24-keyByteIndex%4*8&0xff;j=(j+S[i]+keyByte)%256;var t=S[i];S[i]=S[j];S[j]=t;}this._i=this._j=0;},_doProcessBlock:function _doProcessBlock(M,offset){M[offset]^=generateKeystreamWord.call(this);},keySize:256/32,ivSize:0});function generateKeystreamWord(){var S=this._S;var i=this._i;var j=this._j;var keystreamWord=0;for(var n=0;n<4;n++){i=(i+1)%256;j=(j+S[i])%256;var t=S[i];S[i]=S[j];S[j]=t;keystreamWord|=S[(S[i]+S[j])%256]<<24-n*8;}this._i=i;this._j=j;return keystreamWord;}C.RC4=StreamCipher._createHelper(RC4);var RC4Drop=C_algo.RC4Drop=RC4.extend({cfg:RC4.cfg.extend({drop:192}),_doReset:function _doReset(){RC4._doReset.call(this);for(var i=this.cfg.drop;i>0;i--){generateKeystreamWord.call(this);}}});C.RC4Drop=StreamCipher._createHelper(RC4Drop);})();return CryptoJS.RC4;});/***/}),/***/334:(/***/function _(module,exports,__nested_webpack_require_61817__){;(function(root,factory){if(true){module.exports=exports=factory(__nested_webpack_require_61817__(494));}else{}})(this,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var WordArray=C_lib.WordArray;var C_enc=C.enc;var Utf16BE=C_enc.Utf16=C_enc.Utf16BE={stringify:function stringify(wordArray){var words=wordArray.words;var sigBytes=wordArray.sigBytes;var utf16Chars=[];for(var i=0;i<sigBytes;i+=2){var codePoint=words[i>>>2]>>>16-i%4*8&0xffff;utf16Chars.push(String.fromCharCode(codePoint));}return utf16Chars.join(\'\');},parse:function parse(utf16Str){var utf16StrLength=utf16Str.length;var words=[];for(var i=0;i<utf16StrLength;i++){words[i>>>1]|=utf16Str.charCodeAt(i)<<16-i%2*16;}return WordArray.create(words,utf16StrLength*2);}};C_enc.Utf16LE={stringify:function stringify(wordArray){var words=wordArray.words;var sigBytes=wordArray.sigBytes;var utf16Chars=[];for(var i=0;i<sigBytes;i+=2){var codePoint=swapEndian(words[i>>>2]>>>16-i%4*8&0xffff);utf16Chars.push(String.fromCharCode(codePoint));}return utf16Chars.join(\'\');},parse:function parse(utf16Str){var utf16StrLength=utf16Str.length;var words=[];for(var i=0;i<utf16StrLength;i++){words[i>>>1]|=swapEndian(utf16Str.charCodeAt(i)<<16-i%2*16);}return WordArray.create(words,utf16StrLength*2);}};function swapEndian(word){return word<<8&0xff00ff00|word>>>8&0x00ff00ff;}})();return CryptoJS.enc.Utf16;});/***/}),/***/358:(/***/function _(module,exports,__nested_webpack_require_63248__){;(function(root,factory){if(true){module.exports=exports=factory(__nested_webpack_require_63248__(494));}else{}})(this,function(CryptoJS){(function(Math){var C=CryptoJS;var C_lib=C.lib;var WordArray=C_lib.WordArray;var Hasher=C_lib.Hasher;var C_algo=C.algo;var H=[];var K=[];(function(){function isPrime(n){var sqrtN=Math.sqrt(n);for(var factor=2;factor<=sqrtN;factor++){if(!(n%factor)){return false;}}return true;}function getFractionalBits(n){return(n-(n|0))*0x100000000|0;}var n=2;var nPrime=0;while(nPrime<64){if(isPrime(n)){if(nPrime<8){H[nPrime]=getFractionalBits(Math.pow(n,1/2));}K[nPrime]=getFractionalBits(Math.pow(n,1/3));nPrime++;}n++;}})();var W=[];var SHA256=C_algo.SHA256=Hasher.extend({_doReset:function _doReset(){this._hash=new WordArray.init(H.slice(0));},_doProcessBlock:function _doProcessBlock(M,offset){var H=this._hash.words;var a=H[0];var b=H[1];var c=H[2];var d=H[3];var e=H[4];var f=H[5];var g=H[6];var h=H[7];for(var i=0;i<64;i++){if(i<16){W[i]=M[offset+i]|0;}else{var gamma0x=W[i-15];var gamma0=(gamma0x<<25|gamma0x>>>7)^(gamma0x<<14|gamma0x>>>18)^gamma0x>>>3;var gamma1x=W[i-2];var gamma1=(gamma1x<<15|gamma1x>>>17)^(gamma1x<<13|gamma1x>>>19)^gamma1x>>>10;W[i]=gamma0+W[i-7]+gamma1+W[i-16];}var ch=e&f^~e&g;var maj=a&b^a&c^b&c;var sigma0=(a<<30|a>>>2)^(a<<19|a>>>13)^(a<<10|a>>>22);var sigma1=(e<<26|e>>>6)^(e<<21|e>>>11)^(e<<7|e>>>25);var t1=h+sigma1+ch+K[i]+W[i];var t2=sigma0+maj;h=g;g=f;f=e;e=d+t1|0;d=c;c=b;b=a;a=t1+t2|0;}H[0]=H[0]+a|0;H[1]=H[1]+b|0;H[2]=H[2]+c|0;H[3]=H[3]+d|0;H[4]=H[4]+e|0;H[5]=H[5]+f|0;H[6]=H[6]+g|0;H[7]=H[7]+h|0;},_doFinalize:function _doFinalize(){var data=this._data;var dataWords=data.words;var nBitsTotal=this._nDataBytes*8;var nBitsLeft=data.sigBytes*8;dataWords[nBitsLeft>>>5]|=0x80<<24-nBitsLeft%32;dataWords[(nBitsLeft+64>>>9<<4)+14]=Math.floor(nBitsTotal/0x100000000);dataWords[(nBitsLeft+64>>>9<<4)+15]=nBitsTotal;data.sigBytes=dataWords.length*4;this._process();return this._hash;},clone:function clone(){var clone=Hasher.clone.call(this);clone._hash=this._hash.clone();return clone;}});C.SHA256=Hasher._createHelper(SHA256);C.HmacSHA256=Hasher._createHmacHelper(SHA256);})(Math);return CryptoJS.SHA256;});/***/}),/***/361:(/***/function _(module,exports,__nested_webpack_require_65479__){;(function(root,factory,undef){if(true){module.exports=exports=factory(__nested_webpack_require_65479__(494),__nested_webpack_require_65479__(89),__nested_webpack_require_65479__(525),__nested_webpack_require_65479__(801),__nested_webpack_require_65479__(432));}else{}})(this,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var WordArray=C_lib.WordArray;var BlockCipher=C_lib.BlockCipher;var C_algo=C.algo;var PC1=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4];var PC2=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32];var BIT_SHIFTS=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28];var SBOX_P=[{0x0:0x808200,0x10000000:0x8000,0x20000000:0x808002,0x30000000:0x2,0x40000000:0x200,0x50000000:0x808202,0x60000000:0x800202,0x70000000:0x800000,0x80000000:0x202,0x90000000:0x800200,0xa0000000:0x8200,0xb0000000:0x808000,0xc0000000:0x8002,0xd0000000:0x800002,0xe0000000:0x0,0xf0000000:0x8202,0x8000000:0x0,0x18000000:0x808202,0x28000000:0x8202,0x38000000:0x8000,0x48000000:0x808200,0x58000000:0x200,0x68000000:0x808002,0x78000000:0x2,0x88000000:0x800200,0x98000000:0x8200,0xa8000000:0x808000,0xb8000000:0x800202,0xc8000000:0x800002,0xd8000000:0x8002,0xe8000000:0x202,0xf8000000:0x800000,0x1:0x8000,0x10000001:0x2,0x20000001:0x808200,0x30000001:0x800000,0x40000001:0x808002,0x50000001:0x8200,0x60000001:0x200,0x70000001:0x800202,0x80000001:0x808202,0x90000001:0x808000,0xa0000001:0x800002,0xb0000001:0x8202,0xc0000001:0x202,0xd0000001:0x800200,0xe0000001:0x8002,0xf0000001:0x0,0x8000001:0x808202,0x18000001:0x808000,0x28000001:0x800000,0x38000001:0x200,0x48000001:0x8000,0x58000001:0x800002,0x68000001:0x2,0x78000001:0x8202,0x88000001:0x8002,0x98000001:0x800202,0xa8000001:0x202,0xb8000001:0x808200,0xc8000001:0x800200,0xd8000001:0x0,0xe8000001:0x8200,0xf8000001:0x808002},{0x0:0x40084010,0x1000000:0x4000,0x2000000:0x80000,0x3000000:0x40080010,0x4000000:0x40000010,0x5000000:0x40084000,0x6000000:0x40004000,0x7000000:0x10,0x8000000:0x84000,0x9000000:0x40004010,0xa000000:0x40000000,0xb000000:0x84010,0xc000000:0x80010,0xd000000:0x0,0xe000000:0x4010,0xf000000:0x40080000,0x800000:0x40004000,0x1800000:0x84010,0x2800000:0x10,0x3800000:0x40004010,0x4800000:0x40084010,0x5800000:0x40000000,0x6800000:0x80000,0x7800000:0x40080010,0x8800000:0x80010,0x9800000:0x0,0xa800000:0x4000,0xb800000:0x40080000,0xc800000:0x40000010,0xd800000:0x84000,0xe800000:0x40084000,0xf800000:0x4010,0x10000000:0x0,0x11000000:0x40080010,0x12000000:0x40004010,0x13000000:0x40084000,0x14000000:0x40080000,0x15000000:0x10,0x16000000:0x84010,0x17000000:0x4000,0x18000000:0x4010,0x19000000:0x80000,0x1a000000:0x80010,0x1b000000:0x40000010,0x1c000000:0x84000,0x1d000000:0x40004000,0x1e000000:0x40000000,0x1f000000:0x40084010,0x10800000:0x84010,0x11800000:0x80000,0x12800000:0x40080000,0x13800000:0x4000,0x14800000:0x40004000,0x15800000:0x40084010,0x16800000:0x10,0x17800000:0x40000000,0x18800000:0x40084000,0x19800000:0x40000010,0x1a800000:0x40004010,0x1b800000:0x80010,0x1c800000:0x0,0x1d800000:0x4010,0x1e800000:0x40080010,0x1f800000:0x84000},{0x0:0x104,0x100000:0x0,0x200000:0x4000100,0x300000:0x10104,0x400000:0x10004,0x500000:0x4000004,0x600000:0x4010104,0x700000:0x4010000,0x800000:0x4000000,0x900000:0x4010100,0xa00000:0x10100,0xb00000:0x4010004,0xc00000:0x4000104,0xd00000:0x10000,0xe00000:0x4,0xf00000:0x100,0x80000:0x4010100,0x180000:0x4010004,0x280000:0x0,0x380000:0x4000100,0x480000:0x4000004,0x580000:0x10000,0x680000:0x10004,0x780000:0x104,0x880000:0x4,0x980000:0x100,0xa80000:0x4010000,0xb80000:0x10104,0xc80000:0x10100,0xd80000:0x4000104,0xe80000:0x4010104,0xf80000:0x4000000,0x1000000:0x4010100,0x1100000:0x10004,0x1200000:0x10000,0x1300000:0x4000100,0x1400000:0x100,0x1500000:0x4010104,0x1600000:0x4000004,0x1700000:0x0,0x1800000:0x4000104,0x1900000:0x4000000,0x1a00000:0x4,0x1b00000:0x10100,0x1c00000:0x4010000,0x1d00000:0x104,0x1e00000:0x10104,0x1f00000:0x4010004,0x1080000:0x4000000,0x1180000:0x104,0x1280000:0x4010100,0x1380000:0x0,0x1480000:0x10004,0x1580000:0x4000100,0x1680000:0x100,0x1780000:0x4010004,0x1880000:0x10000,0x1980000:0x4010104,0x1a80000:0x10104,0x1b80000:0x4000004,0x1c80000:0x4000104,0x1d80000:0x4010000,0x1e80000:0x4,0x1f80000:0x10100},{0x0:0x80401000,0x10000:0x80001040,0x20000:0x401040,0x30000:0x80400000,0x40000:0x0,0x50000:0x401000,0x60000:0x80000040,0x70000:0x400040,0x80000:0x80000000,0x90000:0x400000,0xa0000:0x40,0xb0000:0x80001000,0xc0000:0x80400040,0xd0000:0x1040,0xe0000:0x1000,0xf0000:0x80401040,0x8000:0x80001040,0x18000:0x40,0x28000:0x80400040,0x38000:0x80001000,0x48000:0x401000,0x58000:0x80401040,0x68000:0x0,0x78000:0x80400000,0x88000:0x1000,0x98000:0x80401000,0xa8000:0x400000,0xb8000:0x1040,0xc8000:0x80000000,0xd8000:0x400040,0xe8000:0x401040,0xf8000:0x80000040,0x100000:0x400040,0x110000:0x401000,0x120000:0x80000040,0x130000:0x0,0x140000:0x1040,0x150000:0x80400040,0x160000:0x80401000,0x170000:0x80001040,0x180000:0x80401040,0x190000:0x80000000,0x1a0000:0x80400000,0x1b0000:0x401040,0x1c0000:0x80001000,0x1d0000:0x400000,0x1e0000:0x40,0x1f0000:0x1000,0x108000:0x80400000,0x118000:0x80401040,0x128000:0x0,0x138000:0x401000,0x148000:0x400040,0x158000:0x80000000,0x168000:0x80001040,0x178000:0x40,0x188000:0x80000040,0x198000:0x1000,0x1a8000:0x80001000,0x1b8000:0x80400040,0x1c8000:0x1040,0x1d8000:0x80401000,0x1e8000:0x400000,0x1f8000:0x401040},{0x0:0x80,0x1000:0x1040000,0x2000:0x40000,0x3000:0x20000000,0x4000:0x20040080,0x5000:0x1000080,0x6000:0x21000080,0x7000:0x40080,0x8000:0x1000000,0x9000:0x20040000,0xa000:0x20000080,0xb000:0x21040080,0xc000:0x21040000,0xd000:0x0,0xe000:0x1040080,0xf000:0x21000000,0x800:0x1040080,0x1800:0x21000080,0x2800:0x80,0x3800:0x1040000,0x4800:0x40000,0x5800:0x20040080,0x6800:0x21040000,0x7800:0x20000000,0x8800:0x20040000,0x9800:0x0,0xa800:0x21040080,0xb800:0x1000080,0xc800:0x20000080,0xd800:0x21000000,0xe800:0x1000000,0xf800:0x40080,0x10000:0x40000,0x11000:0x80,0x12000:0x20000000,0x13000:0x21000080,0x14000:0x1000080,0x15000:0x21040000,0x16000:0x20040080,0x17000:0x1000000,0x18000:0x21040080,0x19000:0x21000000,0x1a000:0x1040000,0x1b000:0x20040000,0x1c000:0x40080,0x1d000:0x20000080,0x1e000:0x0,0x1f000:0x1040080,0x10800:0x21000080,0x11800:0x1000000,0x12800:0x1040000,0x13800:0x20040080,0x14800:0x20000000,0x15800:0x1040080,0x16800:0x80,0x17800:0x21040000,0x18800:0x40080,0x19800:0x21040080,0x1a800:0x0,0x1b800:0x21000000,0x1c800:0x1000080,0x1d800:0x40000,0x1e800:0x20040000,0x1f800:0x20000080},{0x0:0x10000008,0x100:0x2000,0x200:0x10200000,0x300:0x10202008,0x400:0x10002000,0x500:0x200000,0x600:0x200008,0x700:0x10000000,0x800:0x0,0x900:0x10002008,0xa00:0x202000,0xb00:0x8,0xc00:0x10200008,0xd00:0x202008,0xe00:0x2008,0xf00:0x10202000,0x80:0x10200000,0x180:0x10202008,0x280:0x8,0x380:0x200000,0x480:0x202008,0x580:0x10000008,0x680:0x10002000,0x780:0x2008,0x880:0x200008,0x980:0x2000,0xa80:0x10002008,0xb80:0x10200008,0xc80:0x0,0xd80:0x10202000,0xe80:0x202000,0xf80:0x10000000,0x1000:0x10002000,0x1100:0x10200008,0x1200:0x10202008,0x1300:0x2008,0x1400:0x200000,0x1500:0x10000000,0x1600:0x10000008,0x1700:0x202000,0x1800:0x202008,0x1900:0x0,0x1a00:0x8,0x1b00:0x10200000,0x1c00:0x2000,0x1d00:0x10002008,0x1e00:0x10202000,0x1f00:0x200008,0x1080:0x8,0x1180:0x202000,0x1280:0x200000,0x1380:0x10000008,0x1480:0x10002000,0x1580:0x2008,0x1680:0x10202008,0x1780:0x10200000,0x1880:0x10202000,0x1980:0x10200008,0x1a80:0x2000,0x1b80:0x202008,0x1c80:0x200008,0x1d80:0x0,0x1e80:0x10000000,0x1f80:0x10002008},{0x0:0x100000,0x10:0x2000401,0x20:0x400,0x30:0x100401,0x40:0x2100401,0x50:0x0,0x60:0x1,0x70:0x2100001,0x80:0x2000400,0x90:0x100001,0xa0:0x2000001,0xb0:0x2100400,0xc0:0x2100000,0xd0:0x401,0xe0:0x100400,0xf0:0x2000000,0x8:0x2100001,0x18:0x0,0x28:0x2000401,0x38:0x2100400,0x48:0x100000,0x58:0x2000001,0x68:0x2000000,0x78:0x401,0x88:0x100401,0x98:0x2000400,0xa8:0x2100000,0xb8:0x100001,0xc8:0x400,0xd8:0x2100401,0xe8:0x1,0xf8:0x100400,0x100:0x2000000,0x110:0x100000,0x120:0x2000401,0x130:0x2100001,0x140:0x100001,0x150:0x2000400,0x160:0x2100400,0x170:0x100401,0x180:0x401,0x190:0x2100401,0x1a0:0x100400,0x1b0:0x1,0x1c0:0x0,0x1d0:0x2100000,0x1e0:0x2000001,0x1f0:0x400,0x108:0x100400,0x118:0x2000401,0x128:0x2100001,0x138:0x1,0x148:0x2000000,0x158:0x100000,0x168:0x401,0x178:0x2100400,0x188:0x2000001,0x198:0x2100000,0x1a8:0x0,0x1b8:0x2100401,0x1c8:0x100401,0x1d8:0x400,0x1e8:0x2000400,0x1f8:0x100001},{0x0:0x8000820,0x1:0x20000,0x2:0x8000000,0x3:0x20,0x4:0x20020,0x5:0x8020820,0x6:0x8020800,0x7:0x800,0x8:0x8020000,0x9:0x8000800,0xa:0x20800,0xb:0x8020020,0xc:0x820,0xd:0x0,0xe:0x8000020,0xf:0x20820,0x80000000:0x800,0x80000001:0x8020820,0x80000002:0x8000820,0x80000003:0x8000000,0x80000004:0x8020000,0x80000005:0x20800,0x80000006:0x20820,0x80000007:0x20,0x80000008:0x8000020,0x80000009:0x820,0x8000000a:0x20020,0x8000000b:0x8020800,0x8000000c:0x0,0x8000000d:0x8020020,0x8000000e:0x8000800,0x8000000f:0x20000,0x10:0x20820,0x11:0x8020800,0x12:0x20,0x13:0x800,0x14:0x8000800,0x15:0x8000020,0x16:0x8020020,0x17:0x20000,0x18:0x0,0x19:0x20020,0x1a:0x8020000,0x1b:0x8000820,0x1c:0x8020820,0x1d:0x20800,0x1e:0x820,0x1f:0x8000000,0x80000010:0x20000,0x80000011:0x800,0x80000012:0x8020020,0x80000013:0x20820,0x80000014:0x20,0x80000015:0x8020000,0x80000016:0x8000000,0x80000017:0x8000820,0x80000018:0x8020820,0x80000019:0x8000020,0x8000001a:0x8000800,0x8000001b:0x0,0x8000001c:0x20800,0x8000001d:0x820,0x8000001e:0x20020,0x8000001f:0x8020800}];var SBOX_MASK=[0xf8000001,0x1f800000,0x01f80000,0x001f8000,0x0001f800,0x00001f80,0x000001f8,0x8000001f];var DES=C_algo.DES=BlockCipher.extend({_doReset:function _doReset(){var key=this._key;var keyWords=key.words;var keyBits=[];for(var i=0;i<56;i++){var keyBitPos=PC1[i]-1;keyBits[i]=keyWords[keyBitPos>>>5]>>>31-keyBitPos%32&1;}var subKeys=this._subKeys=[];for(var nSubKey=0;nSubKey<16;nSubKey++){var subKey=subKeys[nSubKey]=[];var bitShift=BIT_SHIFTS[nSubKey];for(var i=0;i<24;i++){subKey[i/6|0]|=keyBits[(PC2[i]-1+bitShift)%28]<<31-i%6;subKey[4+(i/6|0)]|=keyBits[28+(PC2[i+24]-1+bitShift)%28]<<31-i%6;}subKey[0]=subKey[0]<<1|subKey[0]>>>31;for(var i=1;i<7;i++){subKey[i]=subKey[i]>>>(i-1)*4+3;}subKey[7]=subKey[7]<<5|subKey[7]>>>27;}var invSubKeys=this._invSubKeys=[];for(var i=0;i<16;i++){invSubKeys[i]=subKeys[15-i];}},encryptBlock:function encryptBlock(M,offset){this._doCryptBlock(M,offset,this._subKeys);},decryptBlock:function decryptBlock(M,offset){this._doCryptBlock(M,offset,this._invSubKeys);},_doCryptBlock:function _doCryptBlock(M,offset,subKeys){this._lBlock=M[offset];this._rBlock=M[offset+1];exchangeLR.call(this,4,0x0f0f0f0f);exchangeLR.call(this,16,0x0000ffff);exchangeRL.call(this,2,0x33333333);exchangeRL.call(this,8,0x00ff00ff);exchangeLR.call(this,1,0x55555555);for(var round=0;round<16;round++){var subKey=subKeys[round];var lBlock=this._lBlock;var rBlock=this._rBlock;var f=0;for(var i=0;i<8;i++){f|=SBOX_P[i][((rBlock^subKey[i])&SBOX_MASK[i])>>>0];}this._lBlock=rBlock;this._rBlock=lBlock^f;}var t=this._lBlock;this._lBlock=this._rBlock;this._rBlock=t;exchangeLR.call(this,1,0x55555555);exchangeRL.call(this,8,0x00ff00ff);exchangeRL.call(this,2,0x33333333);exchangeLR.call(this,16,0x0000ffff);exchangeLR.call(this,4,0x0f0f0f0f);M[offset]=this._lBlock;M[offset+1]=this._rBlock;},keySize:64/32,ivSize:64/32,blockSize:64/32});function exchangeLR(offset,mask){var t=(this._lBlock>>>offset^this._rBlock)&mask;this._rBlock^=t;this._lBlock^=t<<offset;}function exchangeRL(offset,mask){var t=(this._rBlock>>>offset^this._lBlock)&mask;this._lBlock^=t;this._rBlock^=t<<offset;}C.DES=BlockCipher._createHelper(DES);var TripleDES=C_algo.TripleDES=BlockCipher.extend({_doReset:function _doReset(){var key=this._key;var keyWords=key.words;if(keyWords.length!==2&&keyWords.length!==4&&keyWords.length<6){throw new Error(\'Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.\');}var key1=keyWords.slice(0,2);var key2=keyWords.length<4?keyWords.slice(0,2):keyWords.slice(2,4);var key3=keyWords.length<6?keyWords.slice(0,2):keyWords.slice(4,6);this._des1=DES.createEncryptor(WordArray.create(key1));this._des2=DES.createEncryptor(WordArray.create(key2));this._des3=DES.createEncryptor(WordArray.create(key3));},encryptBlock:function encryptBlock(M,offset){this._des1.encryptBlock(M,offset);this._des2.decryptBlock(M,offset);this._des3.encryptBlock(M,offset);},decryptBlock:function decryptBlock(M,offset){this._des3.decryptBlock(M,offset);this._des2.encryptBlock(M,offset);this._des1.decryptBlock(M,offset);},keySize:192/32,ivSize:64/32,blockSize:64/32});C.TripleDES=BlockCipher._createHelper(TripleDES);})();return CryptoJS.TripleDES;});/***/}),/***/390:(/***/function _(module,exports,__nested_webpack_require_78149__){;(function(root,factory,undef){if(true){module.exports=exports=factory(__nested_webpack_require_78149__(494),__nested_webpack_require_78149__(432));}else{}})(this,function(CryptoJS){CryptoJS.pad.AnsiX923={pad:function pad(data,blockSize){var dataSigBytes=data.sigBytes;var blockSizeBytes=blockSize*4;var nPaddingBytes=blockSizeBytes-dataSigBytes%blockSizeBytes;var lastBytePos=dataSigBytes+nPaddingBytes-1;data.clamp();data.words[lastBytePos>>>2]|=nPaddingBytes<<24-lastBytePos%4*8;data.sigBytes+=nPaddingBytes;},unpad:function unpad(data){var nPaddingBytes=data.words[data.sigBytes-1>>>2]&0xff;data.sigBytes-=nPaddingBytes;}};return CryptoJS.pad.Ansix923;});/***/}),/***/401:(/***/function _(module,exports,__nested_webpack_require_78852__){;(function(root,factory,undef){if(true){module.exports=exports=factory(__nested_webpack_require_78852__(494),__nested_webpack_require_78852__(432));}else{}})(this,function(CryptoJS){CryptoJS.pad.Iso97971={pad:function pad(data,blockSize){data.concat(CryptoJS.lib.WordArray.create([0x80000000],1));CryptoJS.pad.ZeroPadding.pad(data,blockSize);},unpad:function unpad(data){CryptoJS.pad.ZeroPadding.unpad(data);data.sigBytes--;}};return CryptoJS.pad.Iso97971;});/***/}),/***/432:(/***/function _(module,exports,__nested_webpack_require_79355__){;(function(root,factory,undef){if(true){module.exports=exports=factory(__nested_webpack_require_79355__(494),__nested_webpack_require_79355__(801));}else{}})(this,function(CryptoJS){CryptoJS.lib.Cipher||function(undefined){var C=CryptoJS;var C_lib=C.lib;var Base=C_lib.Base;var WordArray=C_lib.WordArray;var BufferedBlockAlgorithm=C_lib.BufferedBlockAlgorithm;var C_enc=C.enc;var Utf8=C_enc.Utf8;var Base64=C_enc.Base64;var C_algo=C.algo;var EvpKDF=C_algo.EvpKDF;var Cipher=C_lib.Cipher=BufferedBlockAlgorithm.extend({cfg:Base.extend(),createEncryptor:function createEncryptor(key,cfg){return this.create(this._ENC_XFORM_MODE,key,cfg);},createDecryptor:function createDecryptor(key,cfg){return this.create(this._DEC_XFORM_MODE,key,cfg);},init:function init(xformMode,key,cfg){this.cfg=this.cfg.extend(cfg);this._xformMode=xformMode;this._key=key;this.reset();},reset:function reset(){BufferedBlockAlgorithm.reset.call(this);this._doReset();},process:function process(dataUpdate){this._append(dataUpdate);return this._process();},finalize:function finalize(dataUpdate){if(dataUpdate){this._append(dataUpdate);}var finalProcessedData=this._doFinalize();return finalProcessedData;},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function selectCipherStrategy(key){if(typeof key==\'string\'){return PasswordBasedCipher;}else{return SerializableCipher;}}return function(cipher){return{encrypt:function encrypt(message,key,cfg){return selectCipherStrategy(key).encrypt(cipher,message,key,cfg);},decrypt:function decrypt(ciphertext,key,cfg){return selectCipherStrategy(key).decrypt(cipher,ciphertext,key,cfg);}};};}()});var StreamCipher=C_lib.StreamCipher=Cipher.extend({_doFinalize:function _doFinalize(){var finalProcessedBlocks=this._process(!!\'flush\');return finalProcessedBlocks;},blockSize:1});var C_mode=C.mode={};var BlockCipherMode=C_lib.BlockCipherMode=Base.extend({createEncryptor:function createEncryptor(cipher,iv){return this.Encryptor.create(cipher,iv);},createDecryptor:function createDecryptor(cipher,iv){return this.Decryptor.create(cipher,iv);},init:function init(cipher,iv){this._cipher=cipher;this._iv=iv;}});var CBC=C_mode.CBC=function(){var CBC=BlockCipherMode.extend();CBC.Encryptor=CBC.extend({processBlock:function processBlock(words,offset){var cipher=this._cipher;var blockSize=cipher.blockSize;xorBlock.call(this,words,offset,blockSize);cipher.encryptBlock(words,offset);this._prevBlock=words.slice(offset,offset+blockSize);}});CBC.Decryptor=CBC.extend({processBlock:function processBlock(words,offset){var cipher=this._cipher;var blockSize=cipher.blockSize;var thisBlock=words.slice(offset,offset+blockSize);cipher.decryptBlock(words,offset);xorBlock.call(this,words,offset,blockSize);this._prevBlock=thisBlock;}});function xorBlock(words,offset,blockSize){var block;var iv=this._iv;if(iv){block=iv;this._iv=undefined;}else{block=this._prevBlock;}for(var i=0;i<blockSize;i++){words[offset+i]^=block[i];}}return CBC;}();var C_pad=C.pad={};var Pkcs7=C_pad.Pkcs7={pad:function pad(data,blockSize){var blockSizeBytes=blockSize*4;var nPaddingBytes=blockSizeBytes-data.sigBytes%blockSizeBytes;var paddingWord=nPaddingBytes<<24|nPaddingBytes<<16|nPaddingBytes<<8|nPaddingBytes;var paddingWords=[];for(var i=0;i<nPaddingBytes;i+=4){paddingWords.push(paddingWord);}var padding=WordArray.create(paddingWords,nPaddingBytes);data.concat(padding);},unpad:function unpad(data){var nPaddingBytes=data.words[data.sigBytes-1>>>2]&0xff;data.sigBytes-=nPaddingBytes;}};var BlockCipher=C_lib.BlockCipher=Cipher.extend({cfg:Cipher.cfg.extend({mode:CBC,padding:Pkcs7}),reset:function reset(){var modeCreator;Cipher.reset.call(this);var cfg=this.cfg;var iv=cfg.iv;var mode=cfg.mode;if(this._xformMode==this._ENC_XFORM_MODE){modeCreator=mode.createEncryptor;}else{modeCreator=mode.createDecryptor;this._minBufferSize=1;}if(this._mode&&this._mode.__creator==modeCreator){this._mode.init(this,iv&&iv.words);}else{this._mode=modeCreator.call(mode,this,iv&&iv.words);this._mode.__creator=modeCreator;}},_doProcessBlock:function _doProcessBlock(words,offset){this._mode.processBlock(words,offset);},_doFinalize:function _doFinalize(){var finalProcessedBlocks;var padding=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){padding.pad(this._data,this.blockSize);finalProcessedBlocks=this._process(!!\'flush\');}else{finalProcessedBlocks=this._process(!!\'flush\');padding.unpad(finalProcessedBlocks);}return finalProcessedBlocks;},blockSize:128/32});var CipherParams=C_lib.CipherParams=Base.extend({init:function init(cipherParams){this.mixIn(cipherParams);},toString:function toString(formatter){return(formatter||this.formatter).stringify(this);}});var C_format=C.format={};var OpenSSLFormatter=C_format.OpenSSL={stringify:function stringify(cipherParams){var wordArray;var ciphertext=cipherParams.ciphertext;var salt=cipherParams.salt;if(salt){wordArray=WordArray.create([0x53616c74,0x65645f5f]).concat(salt).concat(ciphertext);}else{wordArray=ciphertext;}return wordArray.toString(Base64);},parse:function parse(openSSLStr){var salt;var ciphertext=Base64.parse(openSSLStr);var ciphertextWords=ciphertext.words;if(ciphertextWords[0]==0x53616c74&&ciphertextWords[1]==0x65645f5f){salt=WordArray.create(ciphertextWords.slice(2,4));ciphertextWords.splice(0,4);ciphertext.sigBytes-=16;}return CipherParams.create({ciphertext:ciphertext,salt:salt});}};var SerializableCipher=C_lib.SerializableCipher=Base.extend({cfg:Base.extend({format:OpenSSLFormatter}),encrypt:function encrypt(cipher,message,key,cfg){cfg=this.cfg.extend(cfg);var encryptor=cipher.createEncryptor(key,cfg);var ciphertext=encryptor.finalize(message);var cipherCfg=encryptor.cfg;return CipherParams.create({ciphertext:ciphertext,key:key,iv:cipherCfg.iv,algorithm:cipher,mode:cipherCfg.mode,padding:cipherCfg.padding,blockSize:cipher.blockSize,formatter:cfg.format});},decrypt:function decrypt(cipher,ciphertext,key,cfg){cfg=this.cfg.extend(cfg);ciphertext=this._parse(ciphertext,cfg.format);var plaintext=cipher.createDecryptor(key,cfg).finalize(ciphertext.ciphertext);return plaintext;},_parse:function _parse(ciphertext,format){if(typeof ciphertext==\'string\'){return format.parse(ciphertext,this);}else{return ciphertext;}}});var C_kdf=C.kdf={};var OpenSSLKdf=C_kdf.OpenSSL={execute:function execute(password,keySize,ivSize,salt,hasher){if(!salt){salt=WordArray.random(64/8);}if(!hasher){var key=EvpKDF.create({keySize:keySize+ivSize}).compute(password,salt);}else{var key=EvpKDF.create({keySize:keySize+ivSize,hasher:hasher}).compute(password,salt);}var iv=WordArray.create(key.words.slice(keySize),ivSize*4);key.sigBytes=keySize*4;return CipherParams.create({key:key,iv:iv,salt:salt});}};var PasswordBasedCipher=C_lib.PasswordBasedCipher=SerializableCipher.extend({cfg:SerializableCipher.cfg.extend({kdf:OpenSSLKdf}),encrypt:function encrypt(cipher,message,password,cfg){cfg=this.cfg.extend(cfg);var derivedParams=cfg.kdf.execute(password,cipher.keySize,cipher.ivSize,cfg.salt,cfg.hasher);cfg.iv=derivedParams.iv;var ciphertext=SerializableCipher.encrypt.call(this,cipher,message,derivedParams.key,cfg);ciphertext.mixIn(derivedParams);return ciphertext;},decrypt:function decrypt(cipher,ciphertext,password,cfg){cfg=this.cfg.extend(cfg);ciphertext=this._parse(ciphertext,cfg.format);var derivedParams=cfg.kdf.execute(password,cipher.keySize,cipher.ivSize,ciphertext.salt,cfg.hasher);cfg.iv=derivedParams.iv;var plaintext=SerializableCipher.decrypt.call(this,cipher,ciphertext,derivedParams.key,cfg);return plaintext;}});}();});/***/}),/***/477:(/***/function _(){/* (ignored) *//***/}),/***/494:(/***/function _(module,exports,__nested_webpack_require_86984__){;(function(root,factory){if(true){module.exports=exports=factory();}else{}})(this,function(){var CryptoJS=CryptoJS||function(Math,undefined){var crypto;if(typeof window!==\'undefined\'&&window.crypto){crypto=window.crypto;}if(typeof self!==\'undefined\'&&self.crypto){crypto=self.crypto;}if(typeof globalThis!==\'undefined\'&&globalThis.crypto){crypto=globalThis.crypto;}if(!crypto&&typeof window!==\'undefined\'&&window.msCrypto){crypto=window.msCrypto;}if(!crypto&&typeof __webpack_require__.g!==\'undefined\'&&__webpack_require__.g.crypto){crypto=__webpack_require__.g.crypto;}if(!crypto&&"function"===\'function\'){try{crypto=__nested_webpack_require_86984__(477);}catch(err){}}var cryptoSecureRandomInt=function cryptoSecureRandomInt(){if(crypto){if(typeof crypto.getRandomValues===\'function\'){try{return crypto.getRandomValues(new Uint32Array(1))[0];}catch(err){}}if(typeof crypto.randomBytes===\'function\'){try{return crypto.randomBytes(4).readInt32LE();}catch(err){}}}throw new Error(\'Native crypto module could not be used to get secure random number.\');};var create=Object.create||function(){function F(){}return function(obj){var subtype;F.prototype=obj;subtype=new F();F.prototype=null;return subtype;};}();var C={};var C_lib=C.lib={};var Base=C_lib.Base=function(){return{extend:function extend(overrides){var subtype=create(this);if(overrides){subtype.mixIn(overrides);}if(!subtype.hasOwnProperty(\'init\')||this.init===subtype.init){subtype.init=function(){subtype.$super.init.apply(this,arguments);};}subtype.init.prototype=subtype;subtype.$super=this;return subtype;},create:function create(){var instance=this.extend();instance.init.apply(instance,arguments);return instance;},init:function init(){},mixIn:function mixIn(properties){for(var propertyName in properties){if(properties.hasOwnProperty(propertyName)){this[propertyName]=properties[propertyName];}}if(properties.hasOwnProperty(\'toString\')){this.toString=properties.toString;}},clone:function clone(){return this.init.prototype.extend(this);}};}();var WordArray=C_lib.WordArray=Base.extend({init:function init(words,sigBytes){words=this.words=words||[];if(sigBytes!=undefined){this.sigBytes=sigBytes;}else{this.sigBytes=words.length*4;}},toString:function toString(encoder){return(encoder||Hex).stringify(this);},concat:function concat(wordArray){var thisWords=this.words;var thatWords=wordArray.words;var thisSigBytes=this.sigBytes;var thatSigBytes=wordArray.sigBytes;this.clamp();if(thisSigBytes%4){for(var i=0;i<thatSigBytes;i++){var thatByte=thatWords[i>>>2]>>>24-i%4*8&0xff;thisWords[thisSigBytes+i>>>2]|=thatByte<<24-(thisSigBytes+i)%4*8;}}else{for(var j=0;j<thatSigBytes;j+=4){thisWords[thisSigBytes+j>>>2]=thatWords[j>>>2];}}this.sigBytes+=thatSigBytes;return this;},clamp:function clamp(){var words=this.words;var sigBytes=this.sigBytes;words[sigBytes>>>2]&=0xffffffff<<32-sigBytes%4*8;words.length=Math.ceil(sigBytes/4);},clone:function clone(){var clone=Base.clone.call(this);clone.words=this.words.slice(0);return clone;},random:function random(nBytes){var words=[];for(var i=0;i<nBytes;i+=4){words.push(cryptoSecureRandomInt());}return new WordArray.init(words,nBytes);}});var C_enc=C.enc={};var Hex=C_enc.Hex={stringify:function stringify(wordArray){var words=wordArray.words;var sigBytes=wordArray.sigBytes;var hexChars=[];for(var i=0;i<sigBytes;i++){var bite=words[i>>>2]>>>24-i%4*8&0xff;hexChars.push((bite>>>4).toString(16));hexChars.push((bite&0x0f).toString(16));}return hexChars.join(\'\');},parse:function parse(hexStr){var hexStrLength=hexStr.length;var words=[];for(var i=0;i<hexStrLength;i+=2){words[i>>>3]|=parseInt(hexStr.substr(i,2),16)<<24-i%8*4;}return new WordArray.init(words,hexStrLength/2);}};var Latin1=C_enc.Latin1={stringify:function stringify(wordArray){var words=wordArray.words;var sigBytes=wordArray.sigBytes;var latin1Chars=[];for(var i=0;i<sigBytes;i++){var bite=words[i>>>2]>>>24-i%4*8&0xff;latin1Chars.push(String.fromCharCode(bite));}return latin1Chars.join(\'\');},parse:function parse(latin1Str){var latin1StrLength=latin1Str.length;var words=[];for(var i=0;i<latin1StrLength;i++){words[i>>>2]|=(latin1Str.charCodeAt(i)&0xff)<<24-i%4*8;}return new WordArray.init(words,latin1StrLength);}};var Utf8=C_enc.Utf8={stringify:function stringify(wordArray){try{return decodeURIComponent(escape(Latin1.stringify(wordArray)));}catch(e){throw new Error(\'Malformed UTF-8 data\');}},parse:function parse(utf8Str){return Latin1.parse(unescape(encodeURIComponent(utf8Str)));}};var BufferedBlockAlgorithm=C_lib.BufferedBlockAlgorithm=Base.extend({reset:function reset(){this._data=new WordArray.init();this._nDataBytes=0;},_append:function _append(data){if(typeof data==\'string\'){data=Utf8.parse(data);}this._data.concat(data);this._nDataBytes+=data.sigBytes;},_process:function _process(doFlush){var processedWords;var data=this._data;var dataWords=data.words;var dataSigBytes=data.sigBytes;var blockSize=this.blockSize;var blockSizeBytes=blockSize*4;var nBlocksReady=dataSigBytes/blockSizeBytes;if(doFlush){nBlocksReady=Math.ceil(nBlocksReady);}else{nBlocksReady=Math.max((nBlocksReady|0)-this._minBufferSize,0);}var nWordsReady=nBlocksReady*blockSize;var nBytesReady=Math.min(nWordsReady*4,dataSigBytes);if(nWordsReady){for(var offset=0;offset<nWordsReady;offset+=blockSize){this._doProcessBlock(dataWords,offset);}processedWords=dataWords.splice(0,nWordsReady);data.sigBytes-=nBytesReady;}return new WordArray.init(processedWords,nBytesReady);},clone:function clone(){var clone=Base.clone.call(this);clone._data=this._data.clone();return clone;},_minBufferSize:0});var Hasher=C_lib.Hasher=BufferedBlockAlgorithm.extend({cfg:Base.extend(),init:function init(cfg){this.cfg=this.cfg.extend(cfg);this.reset();},reset:function reset(){BufferedBlockAlgorithm.reset.call(this);this._doReset();},update:function update(messageUpdate){this._append(messageUpdate);this._process();return this;},finalize:function finalize(messageUpdate){if(messageUpdate){this._append(messageUpdate);}var hash=this._doFinalize();return hash;},blockSize:512/32,_createHelper:function _createHelper(hasher){return function(message,cfg){return new hasher.init(cfg).finalize(message);};},_createHmacHelper:function _createHmacHelper(hasher){return function(message,key){return new C_algo.HMAC.init(hasher,key).finalize(message);};}});var C_algo=C.algo={};return C;}(Math);return CryptoJS;});/***/}),/***/525:(/***/function _(module,exports,__nested_webpack_require_93350__){;(function(root,factory){if(true){module.exports=exports=factory(__nested_webpack_require_93350__(494));}else{}})(this,function(CryptoJS){(function(Math){var C=CryptoJS;var C_lib=C.lib;var WordArray=C_lib.WordArray;var Hasher=C_lib.Hasher;var C_algo=C.algo;var T=[];(function(){for(var i=0;i<64;i++){T[i]=Math.abs(Math.sin(i+1))*0x100000000|0;}})();var MD5=C_algo.MD5=Hasher.extend({_doReset:function _doReset(){this._hash=new WordArray.init([0x67452301,0xefcdab89,0x98badcfe,0x10325476]);},_doProcessBlock:function _doProcessBlock(M,offset){for(var i=0;i<16;i++){var offset_i=offset+i;var M_offset_i=M[offset_i];M[offset_i]=(M_offset_i<<8|M_offset_i>>>24)&0x00ff00ff|(M_offset_i<<24|M_offset_i>>>8)&0xff00ff00;}var H=this._hash.words;var M_offset_0=M[offset+0];var M_offset_1=M[offset+1];var M_offset_2=M[offset+2];var M_offset_3=M[offset+3];var M_offset_4=M[offset+4];var M_offset_5=M[offset+5];var M_offset_6=M[offset+6];var M_offset_7=M[offset+7];var M_offset_8=M[offset+8];var M_offset_9=M[offset+9];var M_offset_10=M[offset+10];var M_offset_11=M[offset+11];var M_offset_12=M[offset+12];var M_offset_13=M[offset+13];var M_offset_14=M[offset+14];var M_offset_15=M[offset+15];var a=H[0];var b=H[1];var c=H[2];var d=H[3];a=FF(a,b,c,d,M_offset_0,7,T[0]);d=FF(d,a,b,c,M_offset_1,12,T[1]);c=FF(c,d,a,b,M_offset_2,17,T[2]);b=FF(b,c,d,a,M_offset_3,22,T[3]);a=FF(a,b,c,d,M_offset_4,7,T[4]);d=FF(d,a,b,c,M_offset_5,12,T[5]);c=FF(c,d,a,b,M_offset_6,17,T[6]);b=FF(b,c,d,a,M_offset_7,22,T[7]);a=FF(a,b,c,d,M_offset_8,7,T[8]);d=FF(d,a,b,c,M_offset_9,12,T[9]);c=FF(c,d,a,b,M_offset_10,17,T[10]);b=FF(b,c,d,a,M_offset_11,22,T[11]);a=FF(a,b,c,d,M_offset_12,7,T[12]);d=FF(d,a,b,c,M_offset_13,12,T[13]);c=FF(c,d,a,b,M_offset_14,17,T[14]);b=FF(b,c,d,a,M_offset_15,22,T[15]);a=GG(a,b,c,d,M_offset_1,5,T[16]);d=GG(d,a,b,c,M_offset_6,9,T[17]);c=GG(c,d,a,b,M_offset_11,14,T[18]);b=GG(b,c,d,a,M_offset_0,20,T[19]);a=GG(a,b,c,d,M_offset_5,5,T[20]);d=GG(d,a,b,c,M_offset_10,9,T[21]);c=GG(c,d,a,b,M_offset_15,14,T[22]);b=GG(b,c,d,a,M_offset_4,20,T[23]);a=GG(a,b,c,d,M_offset_9,5,T[24]);d=GG(d,a,b,c,M_offset_14,9,T[25]);c=GG(c,d,a,b,M_offset_3,14,T[26]);b=GG(b,c,d,a,M_offset_8,20,T[27]);a=GG(a,b,c,d,M_offset_13,5,T[28]);d=GG(d,a,b,c,M_offset_2,9,T[29]);c=GG(c,d,a,b,M_offset_7,14,T[30]);b=GG(b,c,d,a,M_offset_12,20,T[31]);a=HH(a,b,c,d,M_offset_5,4,T[32]);d=HH(d,a,b,c,M_offset_8,11,T[33]);c=HH(c,d,a,b,M_offset_11,16,T[34]);b=HH(b,c,d,a,M_offset_14,23,T[35]);a=HH(a,b,c,d,M_offset_1,4,T[36]);d=HH(d,a,b,c,M_offset_4,11,T[37]);c=HH(c,d,a,b,M_offset_7,16,T[38]);b=HH(b,c,d,a,M_offset_10,23,T[39]);a=HH(a,b,c,d,M_offset_13,4,T[40]);d=HH(d,a,b,c,M_offset_0,11,T[41]);c=HH(c,d,a,b,M_offset_3,16,T[42]);b=HH(b,c,d,a,M_offset_6,23,T[43]);a=HH(a,b,c,d,M_offset_9,4,T[44]);d=HH(d,a,b,c,M_offset_12,11,T[45]);c=HH(c,d,a,b,M_offset_15,16,T[46]);b=HH(b,c,d,a,M_offset_2,23,T[47]);a=II(a,b,c,d,M_offset_0,6,T[48]);d=II(d,a,b,c,M_offset_7,10,T[49]);c=II(c,d,a,b,M_offset_14,15,T[50]);b=II(b,c,d,a,M_offset_5,21,T[51]);a=II(a,b,c,d,M_offset_12,6,T[52]);d=II(d,a,b,c,M_offset_3,10,T[53]);c=II(c,d,a,b,M_offset_10,15,T[54]);b=II(b,c,d,a,M_offset_1,21,T[55]);a=II(a,b,c,d,M_offset_8,6,T[56]);d=II(d,a,b,c,M_offset_15,10,T[57]);c=II(c,d,a,b,M_offset_6,15,T[58]);b=II(b,c,d,a,M_offset_13,21,T[59]);a=II(a,b,c,d,M_offset_4,6,T[60]);d=II(d,a,b,c,M_offset_11,10,T[61]);c=II(c,d,a,b,M_offset_2,15,T[62]);b=II(b,c,d,a,M_offset_9,21,T[63]);H[0]=H[0]+a|0;H[1]=H[1]+b|0;H[2]=H[2]+c|0;H[3]=H[3]+d|0;},_doFinalize:function _doFinalize(){var data=this._data;var dataWords=data.words;var nBitsTotal=this._nDataBytes*8;var nBitsLeft=data.sigBytes*8;dataWords[nBitsLeft>>>5]|=0x80<<24-nBitsLeft%32;var nBitsTotalH=Math.floor(nBitsTotal/0x100000000);var nBitsTotalL=nBitsTotal;dataWords[(nBitsLeft+64>>>9<<4)+15]=(nBitsTotalH<<8|nBitsTotalH>>>24)&0x00ff00ff|(nBitsTotalH<<24|nBitsTotalH>>>8)&0xff00ff00;dataWords[(nBitsLeft+64>>>9<<4)+14]=(nBitsTotalL<<8|nBitsTotalL>>>24)&0x00ff00ff|(nBitsTotalL<<24|nBitsTotalL>>>8)&0xff00ff00;data.sigBytes=(dataWords.length+1)*4;this._process();var hash=this._hash;var H=hash.words;for(var i=0;i<4;i++){var H_i=H[i];H[i]=(H_i<<8|H_i>>>24)&0x00ff00ff|(H_i<<24|H_i>>>8)&0xff00ff00;}return hash;},clone:function clone(){var clone=Hasher.clone.call(this);clone._hash=this._hash.clone();return clone;}});function FF(a,b,c,d,x,s,t){var n=a+(b&c|~b&d)+x+t;return(n<<s|n>>>32-s)+b;}function GG(a,b,c,d,x,s,t){var n=a+(b&d|c&~d)+x+t;return(n<<s|n>>>32-s)+b;}function HH(a,b,c,d,x,s,t){var n=a+(b^c^d)+x+t;return(n<<s|n>>>32-s)+b;}function II(a,b,c,d,x,s,t){var n=a+(c^(b|~d))+x+t;return(n<<s|n>>>32-s)+b;}C.MD5=Hasher._createHelper(MD5);C.HmacMD5=Hasher._createHmacHelper(MD5);})(Math);return CryptoJS.MD5;});/***/}),/***/532:(/***/function _(module,exports,__nested_webpack_require_98088__){;(function(root,factory){if(true){module.exports=exports=factory(__nested_webpack_require_98088__(494));}else{}})(this,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var WordArray=C_lib.WordArray;var C_enc=C.enc;var Base64url=C_enc.Base64url={stringify:function stringify(wordArray,urlSafe){if(urlSafe===undefined){urlSafe=true;}var words=wordArray.words;var sigBytes=wordArray.sigBytes;var map=urlSafe?this._safe_map:this._map;wordArray.clamp();var base64Chars=[];for(var i=0;i<sigBytes;i+=3){var byte1=words[i>>>2]>>>24-i%4*8&0xff;var byte2=words[i+1>>>2]>>>24-(i+1)%4*8&0xff;var byte3=words[i+2>>>2]>>>24-(i+2)%4*8&0xff;var triplet=byte1<<16|byte2<<8|byte3;for(var j=0;j<4&&i+j*0.75<sigBytes;j++){base64Chars.push(map.charAt(triplet>>>6*(3-j)&0x3f));}}var paddingChar=map.charAt(64);if(paddingChar){while(base64Chars.length%4){base64Chars.push(paddingChar);}}return base64Chars.join(\'\');},parse:function parse(base64Str,urlSafe){if(urlSafe===undefined){urlSafe=true;}var base64StrLength=base64Str.length;var map=urlSafe?this._safe_map:this._map;var reverseMap=this._reverseMap;if(!reverseMap){reverseMap=this._reverseMap=[];for(var j=0;j<map.length;j++){reverseMap[map.charCodeAt(j)]=j;}}var paddingChar=map.charAt(64);if(paddingChar){var paddingIndex=base64Str.indexOf(paddingChar);if(paddingIndex!==-1){base64StrLength=paddingIndex;}}return parseLoop(base64Str,base64StrLength,reverseMap);},_map:\'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\',_safe_map:\'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_\'};function parseLoop(base64Str,base64StrLength,reverseMap){var words=[];var nBytes=0;for(var i=0;i<base64StrLength;i++){if(i%4){var bits1=reverseMap[base64Str.charCodeAt(i-1)]<<i%4*2;var bits2=reverseMap[base64Str.charCodeAt(i)]>>>6-i%4*2;var bitsCombined=bits1|bits2;words[nBytes>>>2]|=bitsCombined<<24-nBytes%4*8;nBytes++;}}return WordArray.create(words,nBytes);}})();return CryptoJS.enc.Base64url;});/***/}),/***/549:(/***/function _(module,exports,__nested_webpack_require_100108__){;(function(root,factory,undef){if(true){module.exports=exports=factory(__nested_webpack_require_100108__(494),__nested_webpack_require_100108__(432));}else{}})(this,function(CryptoJS){CryptoJS.pad.NoPadding={pad:function pad(){},unpad:function unpad(){}};return CryptoJS.pad.NoPadding;});/***/}),/***/552:(/***/function _(module,exports,__nested_webpack_require_100438__){;(function(root,factory,undef){if(true){module.exports=exports=factory(__nested_webpack_require_100438__(494),__nested_webpack_require_100438__(432));}else{}})(this,function(CryptoJS){CryptoJS.mode.CTR=function(){var CTR=CryptoJS.lib.BlockCipherMode.extend();var Encryptor=CTR.Encryptor=CTR.extend({processBlock:function processBlock(words,offset){var cipher=this._cipher;var blockSize=cipher.blockSize;var iv=this._iv;var counter=this._counter;if(iv){counter=this._counter=iv.slice(0);this._iv=undefined;}var keystream=counter.slice(0);cipher.encryptBlock(keystream,0);counter[blockSize-1]=counter[blockSize-1]+1|0;for(var i=0;i<blockSize;i++){words[offset+i]^=keystream[i];}}});CTR.Decryptor=Encryptor;return CTR;}();return CryptoJS.mode.CTR;});/***/}),/***/558:(/***/function _(module,exports,__nested_webpack_require_101227__){;(function(root,factory,undef){if(true){module.exports=exports=factory(__nested_webpack_require_101227__(494),__nested_webpack_require_101227__(432));}else{}})(this,function(CryptoJS){CryptoJS.mode.OFB=function(){var OFB=CryptoJS.lib.BlockCipherMode.extend();var Encryptor=OFB.Encryptor=OFB.extend({processBlock:function processBlock(words,offset){var cipher=this._cipher;var blockSize=cipher.blockSize;var iv=this._iv;var keystream=this._keystream;if(iv){keystream=this._keystream=iv.slice(0);this._iv=undefined;}cipher.encryptBlock(keystream,0);for(var i=0;i<blockSize;i++){words[offset+i]^=keystream[i];}}});OFB.Decryptor=Encryptor;return OFB;}();return CryptoJS.mode.OFB;});/***/}),/***/614:(/***/function _(module,exports,__nested_webpack_require_101947__){;(function(root,factory,undef){if(true){module.exports=exports=factory(__nested_webpack_require_101947__(494),__nested_webpack_require_101947__(89),__nested_webpack_require_101947__(525),__nested_webpack_require_101947__(801),__nested_webpack_require_101947__(432));}else{}})(this,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var BlockCipher=C_lib.BlockCipher;var C_algo=C.algo;var SBOX=[];var INV_SBOX=[];var SUB_MIX_0=[];var SUB_MIX_1=[];var SUB_MIX_2=[];var SUB_MIX_3=[];var INV_SUB_MIX_0=[];var INV_SUB_MIX_1=[];var INV_SUB_MIX_2=[];var INV_SUB_MIX_3=[];(function(){var d=[];for(var i=0;i<256;i++){if(i<128){d[i]=i<<1;}else{d[i]=i<<1^0x11b;}}var x=0;var xi=0;for(var i=0;i<256;i++){var sx=xi^xi<<1^xi<<2^xi<<3^xi<<4;sx=sx>>>8^sx&0xff^0x63;SBOX[x]=sx;INV_SBOX[sx]=x;var x2=d[x];var x4=d[x2];var x8=d[x4];var t=d[sx]*0x101^sx*0x1010100;SUB_MIX_0[x]=t<<24|t>>>8;SUB_MIX_1[x]=t<<16|t>>>16;SUB_MIX_2[x]=t<<8|t>>>24;SUB_MIX_3[x]=t;var t=x8*0x1010101^x4*0x10001^x2*0x101^x*0x1010100;INV_SUB_MIX_0[sx]=t<<24|t>>>8;INV_SUB_MIX_1[sx]=t<<16|t>>>16;INV_SUB_MIX_2[sx]=t<<8|t>>>24;INV_SUB_MIX_3[sx]=t;if(!x){x=xi=1;}else{x=x2^d[d[d[x8^x2]]];xi^=d[d[xi]];}}})();var RCON=[0x00,0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80,0x1b,0x36];var AES=C_algo.AES=BlockCipher.extend({_doReset:function _doReset(){var t;if(this._nRounds&&this._keyPriorReset===this._key){return;}var key=this._keyPriorReset=this._key;var keyWords=key.words;var keySize=key.sigBytes/4;var nRounds=this._nRounds=keySize+6;var ksRows=(nRounds+1)*4;var keySchedule=this._keySchedule=[];for(var ksRow=0;ksRow<ksRows;ksRow++){if(ksRow<keySize){keySchedule[ksRow]=keyWords[ksRow];}else{t=keySchedule[ksRow-1];if(!(ksRow%keySize)){t=t<<8|t>>>24;t=SBOX[t>>>24]<<24|SBOX[t>>>16&0xff]<<16|SBOX[t>>>8&0xff]<<8|SBOX[t&0xff];t^=RCON[ksRow/keySize|0]<<24;}else if(keySize>6&&ksRow%keySize==4){t=SBOX[t>>>24]<<24|SBOX[t>>>16&0xff]<<16|SBOX[t>>>8&0xff]<<8|SBOX[t&0xff];}keySchedule[ksRow]=keySchedule[ksRow-keySize]^t;}}var invKeySchedule=this._invKeySchedule=[];for(var invKsRow=0;invKsRow<ksRows;invKsRow++){var ksRow=ksRows-invKsRow;if(invKsRow%4){var t=keySchedule[ksRow];}else{var t=keySchedule[ksRow-4];}if(invKsRow<4||ksRow<=4){invKeySchedule[invKsRow]=t;}else{invKeySchedule[invKsRow]=INV_SUB_MIX_0[SBOX[t>>>24]]^INV_SUB_MIX_1[SBOX[t>>>16&0xff]]^INV_SUB_MIX_2[SBOX[t>>>8&0xff]]^INV_SUB_MIX_3[SBOX[t&0xff]];}}},encryptBlock:function encryptBlock(M,offset){this._doCryptBlock(M,offset,this._keySchedule,SUB_MIX_0,SUB_MIX_1,SUB_MIX_2,SUB_MIX_3,SBOX);},decryptBlock:function decryptBlock(M,offset){var t=M[offset+1];M[offset+1]=M[offset+3];M[offset+3]=t;this._doCryptBlock(M,offset,this._invKeySchedule,INV_SUB_MIX_0,INV_SUB_MIX_1,INV_SUB_MIX_2,INV_SUB_MIX_3,INV_SBOX);var t=M[offset+1];M[offset+1]=M[offset+3];M[offset+3]=t;},_doCryptBlock:function _doCryptBlock(M,offset,keySchedule,SUB_MIX_0,SUB_MIX_1,SUB_MIX_2,SUB_MIX_3,SBOX){var nRounds=this._nRounds;var s0=M[offset]^keySchedule[0];var s1=M[offset+1]^keySchedule[1];var s2=M[offset+2]^keySchedule[2];var s3=M[offset+3]^keySchedule[3];var ksRow=4;for(var round=1;round<nRounds;round++){var t0=SUB_MIX_0[s0>>>24]^SUB_MIX_1[s1>>>16&0xff]^SUB_MIX_2[s2>>>8&0xff]^SUB_MIX_3[s3&0xff]^keySchedule[ksRow++];var t1=SUB_MIX_0[s1>>>24]^SUB_MIX_1[s2>>>16&0xff]^SUB_MIX_2[s3>>>8&0xff]^SUB_MIX_3[s0&0xff]^keySchedule[ksRow++];var t2=SUB_MIX_0[s2>>>24]^SUB_MIX_1[s3>>>16&0xff]^SUB_MIX_2[s0>>>8&0xff]^SUB_MIX_3[s1&0xff]^keySchedule[ksRow++];var t3=SUB_MIX_0[s3>>>24]^SUB_MIX_1[s0>>>16&0xff]^SUB_MIX_2[s1>>>8&0xff]^SUB_MIX_3[s2&0xff]^keySchedule[ksRow++];s0=t0;s1=t1;s2=t2;s3=t3;}var t0=(SBOX[s0>>>24]<<24|SBOX[s1>>>16&0xff]<<16|SBOX[s2>>>8&0xff]<<8|SBOX[s3&0xff])^keySchedule[ksRow++];var t1=(SBOX[s1>>>24]<<24|SBOX[s2>>>16&0xff]<<16|SBOX[s3>>>8&0xff]<<8|SBOX[s0&0xff])^keySchedule[ksRow++];var t2=(SBOX[s2>>>24]<<24|SBOX[s3>>>16&0xff]<<16|SBOX[s0>>>8&0xff]<<8|SBOX[s1&0xff])^keySchedule[ksRow++];var t3=(SBOX[s3>>>24]<<24|SBOX[s0>>>16&0xff]<<16|SBOX[s1>>>8&0xff]<<8|SBOX[s2&0xff])^keySchedule[ksRow++];M[offset]=t0;M[offset+1]=t1;M[offset+2]=t2;M[offset+3]=t3;},keySize:256/32});C.AES=BlockCipher._createHelper(AES);})();return CryptoJS.AES;});/***/}),/***/646:(/***/function _(module,exports,__nested_webpack_require_106090__){;(function(root,factory,undef){if(true){module.exports=exports=factory(__nested_webpack_require_106090__(494),__nested_webpack_require_106090__(432));}else{}})(this,function(CryptoJS){CryptoJS.pad.Iso10126={pad:function pad(data,blockSize){var blockSizeBytes=blockSize*4;var nPaddingBytes=blockSizeBytes-data.sigBytes%blockSizeBytes;data.concat(CryptoJS.lib.WordArray.random(nPaddingBytes-1)).concat(CryptoJS.lib.WordArray.create([nPaddingBytes<<24],1));},unpad:function unpad(data){var nPaddingBytes=data.words[data.sigBytes-1>>>2]&0xff;data.sigBytes-=nPaddingBytes;}};return CryptoJS.pad.Iso10126;});/***/}),/***/717:(/***/function _(module,exports,__nested_webpack_require_106734__){;(function(root,factory){if(true){module.exports=exports=factory(__nested_webpack_require_106734__(494));}else{}})(this,function(CryptoJS){(function(Math){var C=CryptoJS;var C_lib=C.lib;var WordArray=C_lib.WordArray;var Hasher=C_lib.Hasher;var C_algo=C.algo;var _zl=WordArray.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]);var _zr=WordArray.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]);var _sl=WordArray.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]);var _sr=WordArray.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]);var _hl=WordArray.create([0x00000000,0x5A827999,0x6ED9EBA1,0x8F1BBCDC,0xA953FD4E]);var _hr=WordArray.create([0x50A28BE6,0x5C4DD124,0x6D703EF3,0x7A6D76E9,0x00000000]);var RIPEMD160=C_algo.RIPEMD160=Hasher.extend({_doReset:function _doReset(){this._hash=WordArray.create([0x67452301,0xEFCDAB89,0x98BADCFE,0x10325476,0xC3D2E1F0]);},_doProcessBlock:function _doProcessBlock(M,offset){for(var i=0;i<16;i++){var offset_i=offset+i;var M_offset_i=M[offset_i];M[offset_i]=(M_offset_i<<8|M_offset_i>>>24)&0x00ff00ff|(M_offset_i<<24|M_offset_i>>>8)&0xff00ff00;}var H=this._hash.words;var hl=_hl.words;var hr=_hr.words;var zl=_zl.words;var zr=_zr.words;var sl=_sl.words;var sr=_sr.words;var al,bl,cl,dl,el;var ar,br,cr,dr,er;ar=al=H[0];br=bl=H[1];cr=cl=H[2];dr=dl=H[3];er=el=H[4];var t;for(var i=0;i<80;i+=1){t=al+M[offset+zl[i]]|0;if(i<16){t+=f1(bl,cl,dl)+hl[0];}else if(i<32){t+=f2(bl,cl,dl)+hl[1];}else if(i<48){t+=f3(bl,cl,dl)+hl[2];}else if(i<64){t+=f4(bl,cl,dl)+hl[3];}else{t+=f5(bl,cl,dl)+hl[4];}t=t|0;t=rotl(t,sl[i]);t=t+el|0;al=el;el=dl;dl=rotl(cl,10);cl=bl;bl=t;t=ar+M[offset+zr[i]]|0;if(i<16){t+=f5(br,cr,dr)+hr[0];}else if(i<32){t+=f4(br,cr,dr)+hr[1];}else if(i<48){t+=f3(br,cr,dr)+hr[2];}else if(i<64){t+=f2(br,cr,dr)+hr[3];}else{t+=f1(br,cr,dr)+hr[4];}t=t|0;t=rotl(t,sr[i]);t=t+er|0;ar=er;er=dr;dr=rotl(cr,10);cr=br;br=t;}t=H[1]+cl+dr|0;H[1]=H[2]+dl+er|0;H[2]=H[3]+el+ar|0;H[3]=H[4]+al+br|0;H[4]=H[0]+bl+cr|0;H[0]=t;},_doFinalize:function _doFinalize(){var data=this._data;var dataWords=data.words;var nBitsTotal=this._nDataBytes*8;var nBitsLeft=data.sigBytes*8;dataWords[nBitsLeft>>>5]|=0x80<<24-nBitsLeft%32;dataWords[(nBitsLeft+64>>>9<<4)+14]=(nBitsTotal<<8|nBitsTotal>>>24)&0x00ff00ff|(nBitsTotal<<24|nBitsTotal>>>8)&0xff00ff00;data.sigBytes=(dataWords.length+1)*4;this._process();var hash=this._hash;var H=hash.words;for(var i=0;i<5;i++){var H_i=H[i];H[i]=(H_i<<8|H_i>>>24)&0x00ff00ff|(H_i<<24|H_i>>>8)&0xff00ff00;}return hash;},clone:function clone(){var clone=Hasher.clone.call(this);clone._hash=this._hash.clone();return clone;}});function f1(x,y,z){return x^y^z;}function f2(x,y,z){return x&y|~x&z;}function f3(x,y,z){return(x|~y)^z;}function f4(x,y,z){return x&z|y&~z;}function f5(x,y,z){return x^(y|~z);}function rotl(x,n){return x<<n|x>>>32-n;}C.RIPEMD160=Hasher._createHelper(RIPEMD160);C.HmacRIPEMD160=Hasher._createHmacHelper(RIPEMD160);})(Math);return CryptoJS.RIPEMD160;});/***/}),/***/721:(/***/function _(module,exports,__nested_webpack_require_110332__){;(function(root,factory,undef){if(true){module.exports=exports=factory(__nested_webpack_require_110332__(494),__nested_webpack_require_110332__(839),__nested_webpack_require_110332__(109),__nested_webpack_require_110332__(334),__nested_webpack_require_110332__(89),__nested_webpack_require_110332__(532),__nested_webpack_require_110332__(525),__nested_webpack_require_110332__(224),__nested_webpack_require_110332__(358),__nested_webpack_require_110332__(807),__nested_webpack_require_110332__(119),__nested_webpack_require_110332__(198),__nested_webpack_require_110332__(842),__nested_webpack_require_110332__(717),__nested_webpack_require_110332__(858),__nested_webpack_require_110332__(12),__nested_webpack_require_110332__(801),__nested_webpack_require_110332__(432),__nested_webpack_require_110332__(226),__nested_webpack_require_110332__(552),__nested_webpack_require_110332__(223),__nested_webpack_require_110332__(558),__nested_webpack_require_110332__(273),__nested_webpack_require_110332__(390),__nested_webpack_require_110332__(646),__nested_webpack_require_110332__(401),__nested_webpack_require_110332__(934),__nested_webpack_require_110332__(549),__nested_webpack_require_110332__(738),__nested_webpack_require_110332__(614),__nested_webpack_require_110332__(361),__nested_webpack_require_110332__(332),__nested_webpack_require_110332__(817),__nested_webpack_require_110332__(69),__nested_webpack_require_110332__(75));}else{}})(this,function(CryptoJS){return CryptoJS;});/***/}),/***/738:(/***/function _(module,exports,__nested_webpack_require_111398__){;(function(root,factory,undef){if(true){module.exports=exports=factory(__nested_webpack_require_111398__(494),__nested_webpack_require_111398__(432));}else{}})(this,function(CryptoJS){(function(undefined){var C=CryptoJS;var C_lib=C.lib;var CipherParams=C_lib.CipherParams;var C_enc=C.enc;var Hex=C_enc.Hex;var C_format=C.format;var HexFormatter=C_format.Hex={stringify:function stringify(cipherParams){return cipherParams.ciphertext.toString(Hex);},parse:function parse(input){var ciphertext=Hex.parse(input);return CipherParams.create({ciphertext:ciphertext});}};})();return CryptoJS.format.Hex;});/***/}),/***/801:(/***/function _(module,exports,__nested_webpack_require_112039__){;(function(root,factory,undef){if(true){module.exports=exports=factory(__nested_webpack_require_112039__(494),__nested_webpack_require_112039__(224),__nested_webpack_require_112039__(858));}else{}})(this,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var Base=C_lib.Base;var WordArray=C_lib.WordArray;var C_algo=C.algo;var MD5=C_algo.MD5;var EvpKDF=C_algo.EvpKDF=Base.extend({cfg:Base.extend({keySize:128/32,hasher:MD5,iterations:1}),init:function init(cfg){this.cfg=this.cfg.extend(cfg);},compute:function compute(password,salt){var block;var cfg=this.cfg;var hasher=cfg.hasher.create();var derivedKey=WordArray.create();var derivedKeyWords=derivedKey.words;var keySize=cfg.keySize;var iterations=cfg.iterations;while(derivedKeyWords.length<keySize){if(block){hasher.update(block);}block=hasher.update(password).finalize(salt);hasher.reset();for(var i=1;i<iterations;i++){block=hasher.finalize(block);hasher.reset();}derivedKey.concat(block);}derivedKey.sigBytes=keySize*4;return derivedKey;}});C.EvpKDF=function(password,salt,cfg){return EvpKDF.create(cfg).compute(password,salt);};})();return CryptoJS.EvpKDF;});/***/}),/***/807:(/***/function _(module,exports,__nested_webpack_require_113197__){;(function(root,factory,undef){if(true){module.exports=exports=factory(__nested_webpack_require_113197__(494),__nested_webpack_require_113197__(358));}else{}})(this,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var WordArray=C_lib.WordArray;var C_algo=C.algo;var SHA256=C_algo.SHA256;var SHA224=C_algo.SHA224=SHA256.extend({_doReset:function _doReset(){this._hash=new WordArray.init([0xc1059ed8,0x367cd507,0x3070dd17,0xf70e5939,0xffc00b31,0x68581511,0x64f98fa7,0xbefa4fa4]);},_doFinalize:function _doFinalize(){var hash=SHA256._doFinalize.call(this);hash.sigBytes-=4;return hash;}});C.SHA224=SHA256._createHelper(SHA224);C.HmacSHA224=SHA256._createHmacHelper(SHA224);})();return CryptoJS.SHA224;});/***/}),/***/817:(/***/function _(module,exports,__nested_webpack_require_113953__){;(function(root,factory,undef){if(true){module.exports=exports=factory(__nested_webpack_require_113953__(494),__nested_webpack_require_113953__(89),__nested_webpack_require_113953__(525),__nested_webpack_require_113953__(801),__nested_webpack_require_113953__(432));}else{}})(this,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var StreamCipher=C_lib.StreamCipher;var C_algo=C.algo;var S=[];var C_=[];var G=[];var Rabbit=C_algo.Rabbit=StreamCipher.extend({_doReset:function _doReset(){var K=this._key.words;var iv=this.cfg.iv;for(var i=0;i<4;i++){K[i]=(K[i]<<8|K[i]>>>24)&0x00ff00ff|(K[i]<<24|K[i]>>>8)&0xff00ff00;}var X=this._X=[K[0],K[3]<<16|K[2]>>>16,K[1],K[0]<<16|K[3]>>>16,K[2],K[1]<<16|K[0]>>>16,K[3],K[2]<<16|K[1]>>>16];var C=this._C=[K[2]<<16|K[2]>>>16,K[0]&0xffff0000|K[1]&0x0000ffff,K[3]<<16|K[3]>>>16,K[1]&0xffff0000|K[2]&0x0000ffff,K[0]<<16|K[0]>>>16,K[2]&0xffff0000|K[3]&0x0000ffff,K[1]<<16|K[1]>>>16,K[3]&0xffff0000|K[0]&0x0000ffff];this._b=0;for(var i=0;i<4;i++){nextState.call(this);}for(var i=0;i<8;i++){C[i]^=X[i+4&7];}if(iv){var IV=iv.words;var IV_0=IV[0];var IV_1=IV[1];var i0=(IV_0<<8|IV_0>>>24)&0x00ff00ff|(IV_0<<24|IV_0>>>8)&0xff00ff00;var i2=(IV_1<<8|IV_1>>>24)&0x00ff00ff|(IV_1<<24|IV_1>>>8)&0xff00ff00;var i1=i0>>>16|i2&0xffff0000;var i3=i2<<16|i0&0x0000ffff;C[0]^=i0;C[1]^=i1;C[2]^=i2;C[3]^=i3;C[4]^=i0;C[5]^=i1;C[6]^=i2;C[7]^=i3;for(var i=0;i<4;i++){nextState.call(this);}}},_doProcessBlock:function _doProcessBlock(M,offset){var X=this._X;nextState.call(this);S[0]=X[0]^X[5]>>>16^X[3]<<16;S[1]=X[2]^X[7]>>>16^X[5]<<16;S[2]=X[4]^X[1]>>>16^X[7]<<16;S[3]=X[6]^X[3]>>>16^X[1]<<16;for(var i=0;i<4;i++){S[i]=(S[i]<<8|S[i]>>>24)&0x00ff00ff|(S[i]<<24|S[i]>>>8)&0xff00ff00;M[offset+i]^=S[i];}},blockSize:128/32,ivSize:64/32});function nextState(){var X=this._X;var C=this._C;for(var i=0;i<8;i++){C_[i]=C[i];}C[0]=C[0]+0x4d34d34d+this._b|0;C[1]=C[1]+0xd34d34d3+(C[0]>>>0<C_[0]>>>0?1:0)|0;C[2]=C[2]+0x34d34d34+(C[1]>>>0<C_[1]>>>0?1:0)|0;C[3]=C[3]+0x4d34d34d+(C[2]>>>0<C_[2]>>>0?1:0)|0;C[4]=C[4]+0xd34d34d3+(C[3]>>>0<C_[3]>>>0?1:0)|0;C[5]=C[5]+0x34d34d34+(C[4]>>>0<C_[4]>>>0?1:0)|0;C[6]=C[6]+0x4d34d34d+(C[5]>>>0<C_[5]>>>0?1:0)|0;C[7]=C[7]+0xd34d34d3+(C[6]>>>0<C_[6]>>>0?1:0)|0;this._b=C[7]>>>0<C_[7]>>>0?1:0;for(var i=0;i<8;i++){var gx=X[i]+C[i];var ga=gx&0xffff;var gb=gx>>>16;var gh=((ga*ga>>>17)+ga*gb>>>15)+gb*gb;var gl=((gx&0xffff0000)*gx|0)+((gx&0x0000ffff)*gx|0);G[i]=gh^gl;}X[0]=G[0]+(G[7]<<16|G[7]>>>16)+(G[6]<<16|G[6]>>>16)|0;X[1]=G[1]+(G[0]<<8|G[0]>>>24)+G[7]|0;X[2]=G[2]+(G[1]<<16|G[1]>>>16)+(G[0]<<16|G[0]>>>16)|0;X[3]=G[3]+(G[2]<<8|G[2]>>>24)+G[1]|0;X[4]=G[4]+(G[3]<<16|G[3]>>>16)+(G[2]<<16|G[2]>>>16)|0;X[5]=G[5]+(G[4]<<8|G[4]>>>24)+G[3]|0;X[6]=G[6]+(G[5]<<16|G[5]>>>16)+(G[4]<<16|G[4]>>>16)|0;X[7]=G[7]+(G[6]<<8|G[6]>>>24)+G[5]|0;}C.Rabbit=StreamCipher._createHelper(Rabbit);})();return CryptoJS.Rabbit;});/***/}),/***/839:(/***/function _(module,exports,__nested_webpack_require_116808__){;(function(root,factory){if(true){module.exports=exports=factory(__nested_webpack_require_116808__(494));}else{}})(this,function(CryptoJS){(function(undefined){var C=CryptoJS;var C_lib=C.lib;var Base=C_lib.Base;var X32WordArray=C_lib.WordArray;var C_x64=C.x64={};var X64Word=C_x64.Word=Base.extend({init:function init(high,low){this.high=high;this.low=low;}});var X64WordArray=C_x64.WordArray=Base.extend({init:function init(words,sigBytes){words=this.words=words||[];if(sigBytes!=undefined){this.sigBytes=sigBytes;}else{this.sigBytes=words.length*8;}},toX32:function toX32(){var x64Words=this.words;var x64WordsLength=x64Words.length;var x32Words=[];for(var i=0;i<x64WordsLength;i++){var x64Word=x64Words[i];x32Words.push(x64Word.high);x32Words.push(x64Word.low);}return X32WordArray.create(x32Words,this.sigBytes);},clone:function clone(){var clone=Base.clone.call(this);var words=clone.words=this.words.slice(0);var wordsLength=words.length;for(var i=0;i<wordsLength;i++){words[i]=words[i].clone();}return clone;}});})();return CryptoJS;});/***/}),/***/842:(/***/function _(module,exports,__nested_webpack_require_117907__){;(function(root,factory,undef){if(true){module.exports=exports=factory(__nested_webpack_require_117907__(494),__nested_webpack_require_117907__(839));}else{}})(this,function(CryptoJS){(function(Math){var C=CryptoJS;var C_lib=C.lib;var WordArray=C_lib.WordArray;var Hasher=C_lib.Hasher;var C_x64=C.x64;var X64Word=C_x64.Word;var C_algo=C.algo;var RHO_OFFSETS=[];var PI_INDEXES=[];var ROUND_CONSTANTS=[];(function(){var x=1,y=0;for(var t=0;t<24;t++){RHO_OFFSETS[x+5*y]=(t+1)*(t+2)/2%64;var newX=y%5;var newY=(2*x+3*y)%5;x=newX;y=newY;}for(var x=0;x<5;x++){for(var y=0;y<5;y++){PI_INDEXES[x+5*y]=y+(2*x+3*y)%5*5;}}var LFSR=0x01;for(var i=0;i<24;i++){var roundConstantMsw=0;var roundConstantLsw=0;for(var j=0;j<7;j++){if(LFSR&0x01){var bitPosition=(1<<j)-1;if(bitPosition<32){roundConstantLsw^=1<<bitPosition;}else{roundConstantMsw^=1<<bitPosition-32;}}if(LFSR&0x80){LFSR=LFSR<<1^0x71;}else{LFSR<<=1;}}ROUND_CONSTANTS[i]=X64Word.create(roundConstantMsw,roundConstantLsw);}})();var T=[];(function(){for(var i=0;i<25;i++){T[i]=X64Word.create();}})();var SHA3=C_algo.SHA3=Hasher.extend({cfg:Hasher.cfg.extend({outputLength:512}),_doReset:function _doReset(){var state=this._state=[];for(var i=0;i<25;i++){state[i]=new X64Word.init();}this.blockSize=(1600-2*this.cfg.outputLength)/32;},_doProcessBlock:function _doProcessBlock(M,offset){var state=this._state;var nBlockSizeLanes=this.blockSize/2;for(var i=0;i<nBlockSizeLanes;i++){var M2i=M[offset+2*i];var M2i1=M[offset+2*i+1];M2i=(M2i<<8|M2i>>>24)&0x00ff00ff|(M2i<<24|M2i>>>8)&0xff00ff00;M2i1=(M2i1<<8|M2i1>>>24)&0x00ff00ff|(M2i1<<24|M2i1>>>8)&0xff00ff00;var lane=state[i];lane.high^=M2i1;lane.low^=M2i;}for(var round=0;round<24;round++){for(var x=0;x<5;x++){var tMsw=0,tLsw=0;for(var y=0;y<5;y++){var lane=state[x+5*y];tMsw^=lane.high;tLsw^=lane.low;}var Tx=T[x];Tx.high=tMsw;Tx.low=tLsw;}for(var x=0;x<5;x++){var Tx4=T[(x+4)%5];var Tx1=T[(x+1)%5];var Tx1Msw=Tx1.high;var Tx1Lsw=Tx1.low;var tMsw=Tx4.high^(Tx1Msw<<1|Tx1Lsw>>>31);var tLsw=Tx4.low^(Tx1Lsw<<1|Tx1Msw>>>31);for(var y=0;y<5;y++){var lane=state[x+5*y];lane.high^=tMsw;lane.low^=tLsw;}}for(var laneIndex=1;laneIndex<25;laneIndex++){var tMsw;var tLsw;var lane=state[laneIndex];var laneMsw=lane.high;var laneLsw=lane.low;var rhoOffset=RHO_OFFSETS[laneIndex];if(rhoOffset<32){tMsw=laneMsw<<rhoOffset|laneLsw>>>32-rhoOffset;tLsw=laneLsw<<rhoOffset|laneMsw>>>32-rhoOffset;}else{tMsw=laneLsw<<rhoOffset-32|laneMsw>>>64-rhoOffset;tLsw=laneMsw<<rhoOffset-32|laneLsw>>>64-rhoOffset;}var TPiLane=T[PI_INDEXES[laneIndex]];TPiLane.high=tMsw;TPiLane.low=tLsw;}var T0=T[0];var state0=state[0];T0.high=state0.high;T0.low=state0.low;for(var x=0;x<5;x++){for(var y=0;y<5;y++){var laneIndex=x+5*y;var lane=state[laneIndex];var TLane=T[laneIndex];var Tx1Lane=T[(x+1)%5+5*y];var Tx2Lane=T[(x+2)%5+5*y];lane.high=TLane.high^~Tx1Lane.high&Tx2Lane.high;lane.low=TLane.low^~Tx1Lane.low&Tx2Lane.low;}}var lane=state[0];var roundConstant=ROUND_CONSTANTS[round];lane.high^=roundConstant.high;lane.low^=roundConstant.low;}},_doFinalize:function _doFinalize(){var data=this._data;var dataWords=data.words;var nBitsTotal=this._nDataBytes*8;var nBitsLeft=data.sigBytes*8;var blockSizeBits=this.blockSize*32;dataWords[nBitsLeft>>>5]|=0x1<<24-nBitsLeft%32;dataWords[(Math.ceil((nBitsLeft+1)/blockSizeBits)*blockSizeBits>>>5)-1]|=0x80;data.sigBytes=dataWords.length*4;this._process();var state=this._state;var outputLengthBytes=this.cfg.outputLength/8;var outputLengthLanes=outputLengthBytes/8;var hashWords=[];for(var i=0;i<outputLengthLanes;i++){var lane=state[i];var laneMsw=lane.high;var laneLsw=lane.low;laneMsw=(laneMsw<<8|laneMsw>>>24)&0x00ff00ff|(laneMsw<<24|laneMsw>>>8)&0xff00ff00;laneLsw=(laneLsw<<8|laneLsw>>>24)&0x00ff00ff|(laneLsw<<24|laneLsw>>>8)&0xff00ff00;hashWords.push(laneLsw);hashWords.push(laneMsw);}return new WordArray.init(hashWords,outputLengthBytes);},clone:function clone(){var clone=Hasher.clone.call(this);var state=clone._state=this._state.slice(0);for(var i=0;i<25;i++){state[i]=state[i].clone();}return clone;}});C.SHA3=Hasher._createHelper(SHA3);C.HmacSHA3=Hasher._createHmacHelper(SHA3);})(Math);return CryptoJS.SHA3;});/***/}),/***/858:(/***/function _(module,exports,__nested_webpack_require_122075__){;(function(root,factory){if(true){module.exports=exports=factory(__nested_webpack_require_122075__(494));}else{}})(this,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var Base=C_lib.Base;var C_enc=C.enc;var Utf8=C_enc.Utf8;var C_algo=C.algo;var HMAC=C_algo.HMAC=Base.extend({init:function init(hasher,key){hasher=this._hasher=new hasher.init();if(typeof key==\'string\'){key=Utf8.parse(key);}var hasherBlockSize=hasher.blockSize;var hasherBlockSizeBytes=hasherBlockSize*4;if(key.sigBytes>hasherBlockSizeBytes){key=hasher.finalize(key);}key.clamp();var oKey=this._oKey=key.clone();var iKey=this._iKey=key.clone();var oKeyWords=oKey.words;var iKeyWords=iKey.words;for(var i=0;i<hasherBlockSize;i++){oKeyWords[i]^=0x5c5c5c5c;iKeyWords[i]^=0x36363636;}oKey.sigBytes=iKey.sigBytes=hasherBlockSizeBytes;this.reset();},reset:function reset(){var hasher=this._hasher;hasher.reset();hasher.update(this._iKey);},update:function update(messageUpdate){this._hasher.update(messageUpdate);return this;},finalize:function finalize(messageUpdate){var hasher=this._hasher;var innerHash=hasher.finalize(messageUpdate);hasher.reset();var hmac=hasher.finalize(this._oKey.clone().concat(innerHash));return hmac;}});})();});/***/}),/***/934:(/***/function _(module,exports,__nested_webpack_require_123346__){;(function(root,factory,undef){if(true){module.exports=exports=factory(__nested_webpack_require_123346__(494),__nested_webpack_require_123346__(432));}else{}})(this,function(CryptoJS){CryptoJS.pad.ZeroPadding={pad:function pad(data,blockSize){var blockSizeBytes=blockSize*4;data.clamp();data.sigBytes+=blockSizeBytes-(data.sigBytes%blockSizeBytes||blockSizeBytes);},unpad:function unpad(data){var dataWords=data.words;var i=data.sigBytes-1;for(var i=data.sigBytes-1;i>=0;i--){if(dataWords[i>>>2]>>>24-i%4*8&0xff){data.sigBytes=i+1;break;}}}};return CryptoJS.pad.ZeroPadding;});/***/})/******/};/************************************************************************//******/// The module cache\n/******/var __webpack_module_cache__={};/******//******/// The require function\n/******/function __nested_webpack_require_124123__(moduleId){/******/// Check if module is in cache\n/******/var cachedModule=__webpack_module_cache__[moduleId];/******/if(cachedModule!==undefined){/******/return cachedModule.exports;/******/}/******/// Create a new module (and put it into the cache)\n/******/var module=__webpack_module_cache__[moduleId]={/******/// no module.id needed\n/******/// no module.loaded needed\n/******/exports:{}/******/};/******//******/// Execute the module function\n/******/__webpack_modules__[moduleId].call(module.exports,module,module.exports,__nested_webpack_require_124123__);/******//******/// Return the exports of the module\n/******/return module.exports;/******/}/******//************************************************************************//******//* webpack/runtime/define property getters *//******/(function(){/******/// define getter functions for harmony exports\n/******/__nested_webpack_require_124123__.d=function(exports,definition){/******/for(var key in definition){/******/if(__nested_webpack_require_124123__.o(definition,key)&&!__nested_webpack_require_124123__.o(exports,key)){/******/Object.defineProperty(exports,key,{enumerable:true,get:definition[key]});/******/}/******/}/******/};/******/})();/******//******//* webpack/runtime/hasOwnProperty shorthand *//******/(function(){/******/__nested_webpack_require_124123__.o=function(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop);};/******/})();/******//************************************************************************/var __nested_webpack_exports__=globalThis.pdfjsLib={};// EXPORTS\n__nested_webpack_require_124123__.d(__nested_webpack_exports__,{AbortException:function AbortException(){return/* reexport */_AbortException;},AnnotationEditorLayer:function AnnotationEditorLayer(){return/* reexport */_AnnotationEditorLayer;},AnnotationEditorParamsType:function AnnotationEditorParamsType(){return/* reexport */_AnnotationEditorParamsType;},AnnotationEditorType:function AnnotationEditorType(){return/* reexport */_AnnotationEditorType;},AnnotationEditorUIManager:function AnnotationEditorUIManager(){return/* reexport */_AnnotationEditorUIManager;},AnnotationLayer:function AnnotationLayer(){return/* reexport */_AnnotationLayer;},AnnotationMode:function AnnotationMode(){return/* reexport */_AnnotationMode;},AnnotationType:function AnnotationType(){return/* reexport */_AnnotationType;},ColorPicker:function ColorPicker(){return/* reexport */_ColorPicker;},DOMSVGFactory:function DOMSVGFactory(){return/* reexport */_DOMSVGFactory;},DrawLayer:function DrawLayer(){return/* reexport */_DrawLayer;},FeatureTest:function FeatureTest(){return/* reexport */util_FeatureTest;},GlobalWorkerOptions:function GlobalWorkerOptions(){return/* reexport */_GlobalWorkerOptions;},ImageKind:function ImageKind(){return/* reexport */util_ImageKind;},InvalidPDFException:function InvalidPDFException(){return/* reexport */_InvalidPDFException;},OPS:function OPS(){return/* reexport */_OPS;},OutputScale:function OutputScale(){return/* reexport */_OutputScale;},PDFDataRangeTransport:function PDFDataRangeTransport(){return/* reexport */_PDFDataRangeTransport;},PDFDateString:function PDFDateString(){return/* reexport */_PDFDateString;},PDFWorker:function PDFWorker(){return/* reexport */_PDFWorker;},PasswordResponses:function PasswordResponses(){return/* reexport */_PasswordResponses;},PermissionFlag:function PermissionFlag(){return/* reexport */_PermissionFlag;},PixelsPerInch:function PixelsPerInch(){return/* reexport */_PixelsPerInch;},RenderingCancelledException:function RenderingCancelledException(){return/* reexport */_RenderingCancelledException;},ResponseException:function ResponseException(){return/* reexport */_ResponseException;},SignatureExtractor:function SignatureExtractor(){return/* reexport */_SignatureExtractor;},SupportedImageMimeTypes:function SupportedImageMimeTypes(){return/* reexport */_SupportedImageMimeTypes;},TextLayer:function TextLayer(){return/* reexport */_TextLayer;},TouchManager:function TouchManager(){return/* reexport */_TouchManager;},Util:function Util(){return/* reexport */_Util;},VerbosityLevel:function VerbosityLevel(){return/* reexport */_VerbosityLevel;},XfaLayer:function XfaLayer(){return/* reexport */_XfaLayer;},build:function build(){return/* reexport */_build;},createValidAbsoluteUrl:function createValidAbsoluteUrl(){return/* reexport */_createValidAbsoluteUrl;},fetchData:function fetchData(){return/* reexport */_fetchData;},getDocument:function getDocument(){return/* reexport */_getDocument;},getFilenameFromUrl:function getFilenameFromUrl(){return/* reexport */_getFilenameFromUrl;},getPdfFilenameFromUrl:function getPdfFilenameFromUrl(){return/* reexport */_getPdfFilenameFromUrl;},getUuid:function getUuid(){return/* reexport */_getUuid;},getXfaPageViewport:function getXfaPageViewport(){return/* reexport */_getXfaPageViewport;},isDataScheme:function isDataScheme(){return/* reexport */_isDataScheme;},isPdfFile:function isPdfFile(){return/* reexport */_isPdfFile;},noContextMenu:function noContextMenu(){return/* reexport */_noContextMenu;},normalizeUnicode:function normalizeUnicode(){return/* reexport */_normalizeUnicode;},setLayerDimensions:function setLayerDimensions(){return/* reexport */_setLayerDimensions;},shadow:function shadow(){return/* reexport */_shadow;},stopEvent:function stopEvent(){return/* reexport */_stopEvent;},version:function version(){return/* reexport */_version;}});;// ./src/shared/util.js\nvar isNodeJS=(typeof process==="undefined"?"undefined":_typeof(process))==="object"&&process+""==="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");var IDENTITY_MATRIX=[1,0,0,1,0,0];var FONT_IDENTITY_MATRIX=[0.001,0,0,0.001,0,0];var LINE_FACTOR=1.35;var LINE_DESCENT_FACTOR=0.35;var BASELINE_FACTOR=LINE_DESCENT_FACTOR/LINE_FACTOR;var RenderingIntentFlag={ANY:0x01,DISPLAY:0x02,PRINT:0x04,SAVE:0x08,ANNOTATIONS_FORMS:0x10,ANNOTATIONS_STORAGE:0x20,ANNOTATIONS_DISABLE:0x40,IS_EDITING:0x80,OPLIST:0x100};var _AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};var AnnotationEditorPrefix="pdfjs_internal_editor_";var _AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101};var _AnnotationEditorParamsType={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41};var _PermissionFlag={PRINT:0x04,MODIFY_CONTENTS:0x08,COPY:0x10,MODIFY_ANNOTATIONS:0x20,FILL_INTERACTIVE_FORMS:0x100,COPY_FOR_ACCESSIBILITY:0x200,ASSEMBLE:0x400,PRINT_HIGH_QUALITY:0x800};var TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};var util_ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};var _AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};var AnnotationReplyType={GROUP:"Group",REPLY:"R"};var AnnotationFlag={INVISIBLE:0x01,HIDDEN:0x02,PRINT:0x04,NOZOOM:0x08,NOROTATE:0x10,NOVIEW:0x20,READONLY:0x40,LOCKED:0x80,TOGGLENOVIEW:0x100,LOCKEDCONTENTS:0x200};var AnnotationFieldFlag={READONLY:0x0000001,REQUIRED:0x0000002,NOEXPORT:0x0000004,MULTILINE:0x0001000,PASSWORD:0x0002000,NOTOGGLETOOFF:0x0004000,RADIO:0x0008000,PUSHBUTTON:0x0010000,COMBO:0x0020000,EDIT:0x0040000,SORT:0x0080000,FILESELECT:0x0100000,MULTISELECT:0x0200000,DONOTSPELLCHECK:0x0400000,DONOTSCROLL:0x0800000,COMB:0x1000000,RICHTEXT:0x2000000,RADIOSINUNISON:0x2000000,COMMITONSELCHANGE:0x4000000};var AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};var AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};var DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};var PageActionEventType={O:"PageOpen",C:"PageClose"};var _VerbosityLevel={ERRORS:0,WARNINGS:1,INFOS:5};var _OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93};var _PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};var verbosity=_VerbosityLevel.WARNINGS;function setVerbosityLevel(level){if(Number.isInteger(level)){verbosity=level;}}function getVerbosityLevel(){return verbosity;}function info(msg){if(verbosity>=_VerbosityLevel.INFOS){console.log("Info: ".concat(msg));}}function warn(msg){if(verbosity>=_VerbosityLevel.WARNINGS){console.log("Warning: ".concat(msg));}}function unreachable(msg){throw new Error(msg);}function assert(cond,msg){if(!cond){unreachable(msg);}}function _isValidProtocol(url){switch(url===null||url===void 0?void 0:url.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return true;default:return false;}}function _createValidAbsoluteUrl(url){var baseUrl=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(!url){return null;}if(options&&typeof url==="string"){if(options.addDefaultProtocol&&url.startsWith("www.")){var dots=url.match(/\\./g);if((dots===null||dots===void 0?void 0:dots.length)>=2){url="http://".concat(url);}}if(options.tryConvertEncoding){try{url=stringToUTF8String(url);}catch(_unused){}}}var absoluteUrl=baseUrl?URL.parse(url,baseUrl):URL.parse(url);return _isValidProtocol(absoluteUrl)?absoluteUrl:null;}function _shadow(obj,prop,value){var nonSerializable=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;Object.defineProperty(obj,prop,{value:value,enumerable:!nonSerializable,configurable:true,writable:false});return value;}var BaseException=function BaseExceptionClosure(){function BaseException(message,name){this.message=message;this.name=name;}BaseException.prototype=new Error();BaseException.constructor=BaseException;return BaseException;}();var PasswordException=/*#__PURE__*/function(_BaseException){function PasswordException(msg,code){var _this;_classCallCheck(this,PasswordException);_this=_callSuper(this,PasswordException,[msg,"PasswordException"]);_this.code=code;return _this;}_inherits(PasswordException,_BaseException);return _createClass(PasswordException);}(BaseException);var UnknownErrorException=/*#__PURE__*/function(_BaseException2){function UnknownErrorException(msg,details){var _this2;_classCallCheck(this,UnknownErrorException);_this2=_callSuper(this,UnknownErrorException,[msg,"UnknownErrorException"]);_this2.details=details;return _this2;}_inherits(UnknownErrorException,_BaseException2);return _createClass(UnknownErrorException);}(BaseException);var _InvalidPDFException=/*#__PURE__*/function(_BaseException3){function _InvalidPDFException(msg){_classCallCheck(this,_InvalidPDFException);return _callSuper(this,_InvalidPDFException,[msg,"InvalidPDFException"]);}_inherits(_InvalidPDFException,_BaseException3);return _createClass(_InvalidPDFException);}(BaseException);var _ResponseException=/*#__PURE__*/function(_BaseException4){function _ResponseException(msg,status,missing){var _this3;_classCallCheck(this,_ResponseException);_this3=_callSuper(this,_ResponseException,[msg,"ResponseException"]);_this3.status=status;_this3.missing=missing;return _this3;}_inherits(_ResponseException,_BaseException4);return _createClass(_ResponseException);}(BaseException);var FormatError=/*#__PURE__*/function(_BaseException5){function FormatError(msg){_classCallCheck(this,FormatError);return _callSuper(this,FormatError,[msg,"FormatError"]);}_inherits(FormatError,_BaseException5);return _createClass(FormatError);}(BaseException);var _AbortException=/*#__PURE__*/function(_BaseException6){function _AbortException(msg){_classCallCheck(this,_AbortException);return _callSuper(this,_AbortException,[msg,"AbortException"]);}_inherits(_AbortException,_BaseException6);return _createClass(_AbortException);}(BaseException);function bytesToString(bytes){if(_typeof(bytes)!=="object"||(bytes===null||bytes===void 0?void 0:bytes.length)===undefined){unreachable("Invalid argument for bytesToString");}var length=bytes.length;var MAX_ARGUMENT_COUNT=8192;if(length<MAX_ARGUMENT_COUNT){return String.fromCharCode.apply(null,bytes);}var strBuf=[];for(var i=0;i<length;i+=MAX_ARGUMENT_COUNT){var chunkEnd=Math.min(i+MAX_ARGUMENT_COUNT,length);var chunk=bytes.subarray(i,chunkEnd);strBuf.push(String.fromCharCode.apply(null,chunk));}return strBuf.join("");}function stringToBytes(str){if(typeof str!=="string"){unreachable("Invalid argument for stringToBytes");}var length=str.length;var bytes=new Uint8Array(length);for(var i=0;i<length;++i){bytes[i]=str.charCodeAt(i)&0xff;}return bytes;}function string32(value){return String.fromCharCode(value>>24&0xff,value>>16&0xff,value>>8&0xff,value&0xff);}function objectSize(obj){return Object.keys(obj).length;}function objectFromMap(map){var obj=Object.create(null);var _iterator2=_createForOfIteratorHelper(map),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _step2$value=_slicedToArray(_step2.value,2),key=_step2$value[0],value=_step2$value[1];obj[key]=value;}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return obj;}function isLittleEndian(){var buffer8=new Uint8Array(4);buffer8[0]=1;var view32=new Uint32Array(buffer8.buffer,0,1);return view32[0]===1;}function isEvalSupported(){try{new Function("");return true;}catch(_unused2){return false;}}var util_FeatureTest=/*#__PURE__*/function(){function util_FeatureTest(){_classCallCheck(this,util_FeatureTest);}return _createClass(util_FeatureTest,null,[{key:"isLittleEndian",get:function get(){return _shadow(this,"isLittleEndian",isLittleEndian());}},{key:"isEvalSupported",get:function get(){return _shadow(this,"isEvalSupported",isEvalSupported());}},{key:"isOffscreenCanvasSupported",get:function get(){return _shadow(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas!=="undefined");}},{key:"isImageDecoderSupported",get:function get(){return _shadow(this,"isImageDecoderSupported",typeof ImageDecoder!=="undefined");}},{key:"platform",get:function get(){var _navigator,_navigator2;if(typeof navigator!=="undefined"&&typeof((_navigator=navigator)===null||_navigator===void 0?void 0:_navigator.platform)==="string"&&typeof((_navigator2=navigator)===null||_navigator2===void 0?void 0:_navigator2.userAgent)==="string"){var _navigator3=navigator,platform=_navigator3.platform,userAgent=_navigator3.userAgent;return _shadow(this,"platform",{isAndroid:userAgent.includes("Android"),isLinux:platform.includes("Linux"),isMac:platform.includes("Mac"),isWindows:platform.includes("Win"),isFirefox:userAgent.includes("Firefox")});}return _shadow(this,"platform",{isAndroid:false,isLinux:false,isMac:false,isWindows:false,isFirefox:false});}},{key:"isCSSRoundSupported",get:function get(){var _globalThis$CSS,_globalThis$CSS$suppo;return _shadow(this,"isCSSRoundSupported",(_globalThis$CSS=globalThis.CSS)===null||_globalThis$CSS===void 0||(_globalThis$CSS$suppo=_globalThis$CSS.supports)===null||_globalThis$CSS$suppo===void 0?void 0:_globalThis$CSS$suppo.call(_globalThis$CSS,"width: round(1.5px, 1px)"));}}]);}();var hexNumbers=Array.from(Array(256).keys(),function(n){return n.toString(16).padStart(2,"0");});var _Util=/*#__PURE__*/function(){function _Util(){_classCallCheck(this,_Util);}return _createClass(_Util,null,[{key:"makeHexColor",value:function makeHexColor(r,g,b){return"#".concat(hexNumbers[r]).concat(hexNumbers[g]).concat(hexNumbers[b]);}},{key:"scaleMinMax",value:function scaleMinMax(transform,minMax){var temp;if(transform[0]){if(transform[0]<0){temp=minMax[0];minMax[0]=minMax[2];minMax[2]=temp;}minMax[0]*=transform[0];minMax[2]*=transform[0];if(transform[3]<0){temp=minMax[1];minMax[1]=minMax[3];minMax[3]=temp;}minMax[1]*=transform[3];minMax[3]*=transform[3];}else{temp=minMax[0];minMax[0]=minMax[1];minMax[1]=temp;temp=minMax[2];minMax[2]=minMax[3];minMax[3]=temp;if(transform[1]<0){temp=minMax[1];minMax[1]=minMax[3];minMax[3]=temp;}minMax[1]*=transform[1];minMax[3]*=transform[1];if(transform[2]<0){temp=minMax[0];minMax[0]=minMax[2];minMax[2]=temp;}minMax[0]*=transform[2];minMax[2]*=transform[2];}minMax[0]+=transform[4];minMax[1]+=transform[5];minMax[2]+=transform[4];minMax[3]+=transform[5];}},{key:"transform",value:function transform(m1,m2){return[m1[0]*m2[0]+m1[2]*m2[1],m1[1]*m2[0]+m1[3]*m2[1],m1[0]*m2[2]+m1[2]*m2[3],m1[1]*m2[2]+m1[3]*m2[3],m1[0]*m2[4]+m1[2]*m2[5]+m1[4],m1[1]*m2[4]+m1[3]*m2[5]+m1[5]];}},{key:"applyTransform",value:function applyTransform(p,m){var xt=p[0]*m[0]+p[1]*m[2]+m[4];var yt=p[0]*m[1]+p[1]*m[3]+m[5];return[xt,yt];}},{key:"applyInverseTransform",value:function applyInverseTransform(p,m){var d=m[0]*m[3]-m[1]*m[2];var xt=(p[0]*m[3]-p[1]*m[2]+m[2]*m[5]-m[4]*m[3])/d;var yt=(-p[0]*m[1]+p[1]*m[0]+m[4]*m[1]-m[5]*m[0])/d;return[xt,yt];}},{key:"getAxialAlignedBoundingBox",value:function getAxialAlignedBoundingBox(r,m){var p1=this.applyTransform(r,m);var p2=this.applyTransform(r.slice(2,4),m);var p3=this.applyTransform([r[0],r[3]],m);var p4=this.applyTransform([r[2],r[1]],m);return[Math.min(p1[0],p2[0],p3[0],p4[0]),Math.min(p1[1],p2[1],p3[1],p4[1]),Math.max(p1[0],p2[0],p3[0],p4[0]),Math.max(p1[1],p2[1],p3[1],p4[1])];}},{key:"inverseTransform",value:function inverseTransform(m){var d=m[0]*m[3]-m[1]*m[2];return[m[3]/d,-m[1]/d,-m[2]/d,m[0]/d,(m[2]*m[5]-m[4]*m[3])/d,(m[4]*m[1]-m[5]*m[0])/d];}},{key:"singularValueDecompose2dScale",value:function singularValueDecompose2dScale(m){var transpose=[m[0],m[2],m[1],m[3]];var a=m[0]*transpose[0]+m[1]*transpose[2];var b=m[0]*transpose[1]+m[1]*transpose[3];var c=m[2]*transpose[0]+m[3]*transpose[2];var d=m[2]*transpose[1]+m[3]*transpose[3];var first=(a+d)/2;var second=Math.sqrt(Math.pow(a+d,2)-4*(a*d-c*b))/2;var sx=first+second||1;var sy=first-second||1;return[Math.sqrt(sx),Math.sqrt(sy)];}},{key:"normalizeRect",value:function normalizeRect(rect){var r=rect.slice(0);if(rect[0]>rect[2]){r[0]=rect[2];r[2]=rect[0];}if(rect[1]>rect[3]){r[1]=rect[3];r[3]=rect[1];}return r;}},{key:"intersect",value:function intersect(rect1,rect2){var xLow=Math.max(Math.min(rect1[0],rect1[2]),Math.min(rect2[0],rect2[2]));var xHigh=Math.min(Math.max(rect1[0],rect1[2]),Math.max(rect2[0],rect2[2]));if(xLow>xHigh){return null;}var yLow=Math.max(Math.min(rect1[1],rect1[3]),Math.min(rect2[1],rect2[3]));var yHigh=Math.min(Math.max(rect1[1],rect1[3]),Math.max(rect2[1],rect2[3]));if(yLow>yHigh){return null;}return[xLow,yLow,xHigh,yHigh];}},{key:"bezierBoundingBox",value:function bezierBoundingBox(x0,y0,x1,y1,x2,y2,x3,y3,minMax){if(minMax){minMax[0]=Math.min(minMax[0],x0,x3);minMax[1]=Math.min(minMax[1],y0,y3);minMax[2]=Math.max(minMax[2],x0,x3);minMax[3]=Math.max(minMax[3],y0,y3);}else{minMax=[Math.min(x0,x3),Math.min(y0,y3),Math.max(x0,x3),Math.max(y0,y3)];}_assertClassBrand(_Util,this,_getExtremum).call(this,x0,x1,x2,x3,y0,y1,y2,y3,3*(-x0+3*(x1-x2)+x3),6*(x0-2*x1+x2),3*(x1-x0),minMax);_assertClassBrand(_Util,this,_getExtremum).call(this,x0,x1,x2,x3,y0,y1,y2,y3,3*(-y0+3*(y1-y2)+y3),6*(y0-2*y1+y2),3*(y1-y0),minMax);return minMax;}}]);}();_Util2=_Util;function _getExtremumOnCurve(x0,x1,x2,x3,y0,y1,y2,y3,t,minMax){if(t<=0||t>=1){return;}var mt=1-t;var tt=t*t;var ttt=tt*t;var x=mt*(mt*(mt*x0+3*t*x1)+3*tt*x2)+ttt*x3;var y=mt*(mt*(mt*y0+3*t*y1)+3*tt*y2)+ttt*y3;minMax[0]=Math.min(minMax[0],x);minMax[1]=Math.min(minMax[1],y);minMax[2]=Math.max(minMax[2],x);minMax[3]=Math.max(minMax[3],y);}function _getExtremum(x0,x1,x2,x3,y0,y1,y2,y3,a,b,c,minMax){if(Math.abs(a)<1e-12){if(Math.abs(b)>=1e-12){_assertClassBrand(_Util2,this,_getExtremumOnCurve).call(this,x0,x1,x2,x3,y0,y1,y2,y3,-c/b,minMax);}return;}var delta=Math.pow(b,2)-4*c*a;if(delta<0){return;}var sqrtDelta=Math.sqrt(delta);var a2=2*a;_assertClassBrand(_Util2,this,_getExtremumOnCurve).call(this,x0,x1,x2,x3,y0,y1,y2,y3,(-b+sqrtDelta)/a2,minMax);_assertClassBrand(_Util2,this,_getExtremumOnCurve).call(this,x0,x1,x2,x3,y0,y1,y2,y3,(-b-sqrtDelta)/a2,minMax);}var PDFStringTranslateTable=/* unused pure expression or super */(/* unused pure expression or super */ null && (null&&0));function stringToPDFString(str){if(str[0]>="\\xEF"){var encoding;if(str[0]==="\\xFE"&&str[1]==="\\xFF"){encoding="utf-16be";if(str.length%2===1){str=str.slice(0,-1);}}else if(str[0]==="\\xFF"&&str[1]==="\\xFE"){encoding="utf-16le";if(str.length%2===1){str=str.slice(0,-1);}}else if(str[0]==="\\xEF"&&str[1]==="\\xBB"&&str[2]==="\\xBF"){encoding="utf-8";}if(encoding){try{var decoder=new TextDecoder(encoding,{fatal:true});var buffer=stringToBytes(str);var decoded=decoder.decode(buffer);if(!decoded.includes("\\x1b")){return decoded;}return decoded.replaceAll(/\\x1b[^\\x1b]*(?:\\x1b|$)/g,"");}catch(ex){warn("stringToPDFString: \\"".concat(ex,"\\"."));}}}var strBuf=[];for(var i=0,ii=str.length;i<ii;i++){var charCode=str.charCodeAt(i);if(charCode===0x1b){while(++i<ii&&str.charCodeAt(i)!==0x1b){}continue;}var code=PDFStringTranslateTable[charCode];strBuf.push(code?String.fromCharCode(code):str.charAt(i));}return strBuf.join("");}function stringToUTF8String(str){return decodeURIComponent(escape(str));}function utf8StringToString(str){return unescape(encodeURIComponent(str));}function isArrayEqual(arr1,arr2){if(arr1.length!==arr2.length){return false;}for(var i=0,ii=arr1.length;i<ii;i++){if(arr1[i]!==arr2[i]){return false;}}return true;}function getModificationDate(){var date=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new Date();var buffer=[date.getUTCFullYear().toString(),(date.getUTCMonth()+1).toString().padStart(2,"0"),date.getUTCDate().toString().padStart(2,"0"),date.getUTCHours().toString().padStart(2,"0"),date.getUTCMinutes().toString().padStart(2,"0"),date.getUTCSeconds().toString().padStart(2,"0")];return buffer.join("");}var NormalizeRegex=null;var NormalizationMap=null;function _normalizeUnicode(str){if(!NormalizeRegex){NormalizeRegex=/([\\xA0\\xB5\\u037E\\u0EB3\\u2000-\\u200A\\u202F\\u2126\\uFB00-\\uFB04\\uFB06\\uFB20-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBA1\\uFBA4-\\uFBA9\\uFBAE-\\uFBB1\\uFBD3-\\uFBDC\\uFBDE-\\uFBE7\\uFBEA-\\uFBF8\\uFBFC\\uFBFD\\uFC00-\\uFC5D\\uFC64-\\uFCF1\\uFCF5-\\uFD3D\\uFD88\\uFDF4\\uFDFA\\uFDFB\\uFE71\\uFE77\\uFE79\\uFE7B\\uFE7D]+)|(\\uFB05+)/g;NormalizationMap=new Map([["ﬅ","ſt"]]);}return str.replaceAll(NormalizeRegex,function(_,p1,p2){return p1?p1.normalize("NFKC"):NormalizationMap.get(p2);});}function _getUuid(){if(typeof crypto.randomUUID==="function"){return crypto.randomUUID();}var buf=new Uint8Array(32);crypto.getRandomValues(buf);return bytesToString(buf);}var AnnotationPrefix="pdfjs_internal_id_";function toHexUtil(arr){if(Uint8Array.prototype.toHex){return arr.toHex();}return Array.from(arr,function(num){return hexNumbers[num];}).join("");}function toBase64Util(arr){if(Uint8Array.prototype.toBase64){return arr.toBase64();}return btoa(bytesToString(arr));}function fromBase64Util(str){if(Uint8Array.fromBase64){return Uint8Array.fromBase64(str);}return stringToBytes(atob(str));}if(typeof Promise["try"]!=="function"){Promise["try"]=function(fn){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key];}return new Promise(function(resolve){resolve(fn.apply(void 0,args));});};};// ./src/display/display_utils.js\nvar SVG_NS="http://www.w3.org/2000/svg";var _PixelsPerInch=/*#__PURE__*/_createClass(function _PixelsPerInch(){_classCallCheck(this,_PixelsPerInch);});_PixelsPerInch2=_PixelsPerInch;_defineProperty(_PixelsPerInch,"CSS",96.0);_defineProperty(_PixelsPerInch,"PDF",72.0);_defineProperty(_PixelsPerInch,"PDF_TO_CSS_UNITS",_PixelsPerInch2.CSS/_PixelsPerInch2.PDF);function _fetchData(_x2){return _fetchData2.apply(this,arguments);}function _fetchData2(){_fetchData2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee61(url){var type,response,_args62=arguments;return _regeneratorRuntime().wrap(function _callee61$(_context62){while(1)switch(_context62.prev=_context62.next){case 0:type=_args62.length>1&&_args62[1]!==undefined?_args62[1]:"text";if(!isValidFetchUrl(url,document.baseURI)){_context62.next=14;break;}_context62.next=4;return fetch(url);case 4:response=_context62.sent;if(response.ok){_context62.next=7;break;}throw new Error(response.statusText);case 7:_context62.t0=type;_context62.next=_context62.t0==="arraybuffer"?10:_context62.t0==="blob"?11:_context62.t0==="json"?12:13;break;case 10:return _context62.abrupt("return",response.arrayBuffer());case 11:return _context62.abrupt("return",response.blob());case 12:return _context62.abrupt("return",response.json());case 13:return _context62.abrupt("return",response.text());case 14:return _context62.abrupt("return",new Promise(function(resolve,reject){var request=new XMLHttpRequest();request.open("GET",url,true);request.responseType=type;request.onreadystatechange=function(){if(request.readyState!==XMLHttpRequest.DONE){return;}if(request.status===200||request.status===0){switch(type){case"arraybuffer":case"blob":case"json":resolve(request.response);return;}resolve(request.responseText);return;}reject(new Error(request.statusText));};request.send(null);}));case 15:case"end":return _context62.stop();}},_callee61);}));return _fetchData2.apply(this,arguments);}var PageViewport=/*#__PURE__*/function(){function PageViewport(_ref){var viewBox=_ref.viewBox,userUnit=_ref.userUnit,scale=_ref.scale,rotation=_ref.rotation,_ref$offsetX=_ref.offsetX,offsetX=_ref$offsetX===void 0?0:_ref$offsetX,_ref$offsetY=_ref.offsetY,offsetY=_ref$offsetY===void 0?0:_ref$offsetY,_ref$dontFlip=_ref.dontFlip,dontFlip=_ref$dontFlip===void 0?false:_ref$dontFlip;_classCallCheck(this,PageViewport);this.viewBox=viewBox;this.userUnit=userUnit;this.scale=scale;this.rotation=rotation;this.offsetX=offsetX;this.offsetY=offsetY;scale*=userUnit;var centerX=(viewBox[2]+viewBox[0])/2;var centerY=(viewBox[3]+viewBox[1])/2;var rotateA,rotateB,rotateC,rotateD;rotation%=360;if(rotation<0){rotation+=360;}switch(rotation){case 180:rotateA=-1;rotateB=0;rotateC=0;rotateD=1;break;case 90:rotateA=0;rotateB=1;rotateC=1;rotateD=0;break;case 270:rotateA=0;rotateB=-1;rotateC=-1;rotateD=0;break;case 0:rotateA=1;rotateB=0;rotateC=0;rotateD=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.");}if(dontFlip){rotateC=-rotateC;rotateD=-rotateD;}var offsetCanvasX,offsetCanvasY;var width,height;if(rotateA===0){offsetCanvasX=Math.abs(centerY-viewBox[1])*scale+offsetX;offsetCanvasY=Math.abs(centerX-viewBox[0])*scale+offsetY;width=(viewBox[3]-viewBox[1])*scale;height=(viewBox[2]-viewBox[0])*scale;}else{offsetCanvasX=Math.abs(centerX-viewBox[0])*scale+offsetX;offsetCanvasY=Math.abs(centerY-viewBox[1])*scale+offsetY;width=(viewBox[2]-viewBox[0])*scale;height=(viewBox[3]-viewBox[1])*scale;}this.transform=[rotateA*scale,rotateB*scale,rotateC*scale,rotateD*scale,offsetCanvasX-rotateA*scale*centerX-rotateC*scale*centerY,offsetCanvasY-rotateB*scale*centerX-rotateD*scale*centerY];this.width=width;this.height=height;}return _createClass(PageViewport,[{key:"rawDims",get:function get(){var dims=this.viewBox;return _shadow(this,"rawDims",{pageWidth:dims[2]-dims[0],pageHeight:dims[3]-dims[1],pageX:dims[0],pageY:dims[1]});}},{key:"clone",value:function clone(){var _ref2=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref2$scale=_ref2.scale,scale=_ref2$scale===void 0?this.scale:_ref2$scale,_ref2$rotation=_ref2.rotation,rotation=_ref2$rotation===void 0?this.rotation:_ref2$rotation,_ref2$offsetX=_ref2.offsetX,offsetX=_ref2$offsetX===void 0?this.offsetX:_ref2$offsetX,_ref2$offsetY=_ref2.offsetY,offsetY=_ref2$offsetY===void 0?this.offsetY:_ref2$offsetY,_ref2$dontFlip=_ref2.dontFlip,dontFlip=_ref2$dontFlip===void 0?false:_ref2$dontFlip;return new PageViewport({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:scale,rotation:rotation,offsetX:offsetX,offsetY:offsetY,dontFlip:dontFlip});}},{key:"convertToViewportPoint",value:function convertToViewportPoint(x,y){return _Util.applyTransform([x,y],this.transform);}},{key:"convertToViewportRectangle",value:function convertToViewportRectangle(rect){var topLeft=_Util.applyTransform([rect[0],rect[1]],this.transform);var bottomRight=_Util.applyTransform([rect[2],rect[3]],this.transform);return[topLeft[0],topLeft[1],bottomRight[0],bottomRight[1]];}},{key:"convertToPdfPoint",value:function convertToPdfPoint(x,y){return _Util.applyInverseTransform([x,y],this.transform);}}]);}();var _RenderingCancelledException=/*#__PURE__*/function(_BaseException7){function _RenderingCancelledException(msg){var _this4;var extraDelay=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;_classCallCheck(this,_RenderingCancelledException);_this4=_callSuper(this,_RenderingCancelledException,[msg,"RenderingCancelledException"]);_this4.extraDelay=extraDelay;return _this4;}_inherits(_RenderingCancelledException,_BaseException7);return _createClass(_RenderingCancelledException);}(BaseException);function _isDataScheme(url){var ii=url.length;var i=0;while(i<ii&&url[i].trim()===""){i++;}return url.substring(i,i+5).toLowerCase()==="data:";}function _isPdfFile(filename){return typeof filename==="string"&&/\\.pdf$/i.test(filename);}function _getFilenameFromUrl(url){var _url$split=url.split(/[#?]/,1);var _url$split2=_slicedToArray(_url$split,1);url=_url$split2[0];return url.substring(url.lastIndexOf("/")+1);}function _getPdfFilenameFromUrl(url){var defaultFilename=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"document.pdf";if(typeof url!=="string"){return defaultFilename;}if(_isDataScheme(url)){warn(\'getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.\');return defaultFilename;}var reURI=/^(?:(?:[^:]+:)?\\/\\/[^/]+)?([^?#]*)(\\?[^#]*)?(#.*)?$/;var reFilename=/[^/?#=]+\\.pdf\\b(?!.*\\.pdf\\b)/i;var splitURI=reURI.exec(url);var suggestedFilename=reFilename.exec(splitURI[1])||reFilename.exec(splitURI[2])||reFilename.exec(splitURI[3]);if(suggestedFilename){suggestedFilename=suggestedFilename[0];if(suggestedFilename.includes("%")){try{suggestedFilename=reFilename.exec(decodeURIComponent(suggestedFilename))[0];}catch(_unused3){}}}return suggestedFilename||defaultFilename;}var StatTimer=/*#__PURE__*/function(){function StatTimer(){_classCallCheck(this,StatTimer);_defineProperty(this,"started",Object.create(null));_defineProperty(this,"times",[]);}return _createClass(StatTimer,[{key:"time",value:function time(name){if(name in this.started){warn("Timer is already running for ".concat(name));}this.started[name]=Date.now();}},{key:"timeEnd",value:function timeEnd(name){if(!(name in this.started)){warn("Timer has not been started for ".concat(name));}this.times.push({name:name,start:this.started[name],end:Date.now()});delete this.started[name];}},{key:"toString",value:function toString(){var outBuf=[];var longest=0;var _iterator3=_createForOfIteratorHelper(this.times),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var name=_step3.value.name;longest=Math.max(name.length,longest);}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}var _iterator4=_createForOfIteratorHelper(this.times),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var _step4$value=_step4.value,_name=_step4$value.name,start=_step4$value.start,end=_step4$value.end;outBuf.push("".concat(_name.padEnd(longest)," ").concat(end-start,"ms\\n"));}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}return outBuf.join("");}}]);}();function isValidFetchUrl(url,baseUrl){var res=baseUrl?URL.parse(url,baseUrl):URL.parse(url);return(res===null||res===void 0?void 0:res.protocol)==="http:"||(res===null||res===void 0?void 0:res.protocol)==="https:";}function _noContextMenu(e){e.preventDefault();}function _stopEvent(e){e.preventDefault();e.stopPropagation();}function deprecated(details){console.log("Deprecated API usage: "+details);}var _PDFDateString=/*#__PURE__*/function(){function _PDFDateString(){_classCallCheck(this,_PDFDateString);}return _createClass(_PDFDateString,null,[{key:"toDateObject",value:function toDateObject(input){if(!input||typeof input!=="string"){return null;}_assertClassBrand(_PDFDateString,this,_regex)._||(_regex._=_assertClassBrand(_PDFDateString,this,new RegExp("^D:"+"(\\\\d{4})"+"(\\\\d{2})?"+"(\\\\d{2})?"+"(\\\\d{2})?"+"(\\\\d{2})?"+"(\\\\d{2})?"+"([Z|+|-])?"+"(\\\\d{2})?"+"\'?"+"(\\\\d{2})?"+"\'?")));var matches=_assertClassBrand(_PDFDateString,this,_regex)._.exec(input);if(!matches){return null;}var year=parseInt(matches[1],10);var month=parseInt(matches[2],10);month=month>=1&&month<=12?month-1:0;var day=parseInt(matches[3],10);day=day>=1&&day<=31?day:1;var hour=parseInt(matches[4],10);hour=hour>=0&&hour<=23?hour:0;var minute=parseInt(matches[5],10);minute=minute>=0&&minute<=59?minute:0;var second=parseInt(matches[6],10);second=second>=0&&second<=59?second:0;var universalTimeRelation=matches[7]||"Z";var offsetHour=parseInt(matches[8],10);offsetHour=offsetHour>=0&&offsetHour<=23?offsetHour:0;var offsetMinute=parseInt(matches[9],10)||0;offsetMinute=offsetMinute>=0&&offsetMinute<=59?offsetMinute:0;if(universalTimeRelation==="-"){hour+=offsetHour;minute+=offsetMinute;}else if(universalTimeRelation==="+"){hour-=offsetHour;minute-=offsetMinute;}return new Date(Date.UTC(year,month,day,hour,minute,second));}}]);}();var _regex={_:void 0};function _getXfaPageViewport(xfaPage,_ref3){var _ref3$scale=_ref3.scale,scale=_ref3$scale===void 0?1:_ref3$scale,_ref3$rotation=_ref3.rotation,rotation=_ref3$rotation===void 0?0:_ref3$rotation;var _xfaPage$attributes$s=xfaPage.attributes.style,width=_xfaPage$attributes$s.width,height=_xfaPage$attributes$s.height;var viewBox=[0,0,parseInt(width),parseInt(height)];return new PageViewport({viewBox:viewBox,userUnit:1,scale:scale,rotation:rotation});}function getRGB(color){if(color.startsWith("#")){var colorRGB=parseInt(color.slice(1),16);return[(colorRGB&0xff0000)>>16,(colorRGB&0x00ff00)>>8,colorRGB&0x0000ff];}if(color.startsWith("rgb(")){return color.slice(4,-1).split(",").map(function(x){return parseInt(x);});}if(color.startsWith("rgba(")){return color.slice(5,-1).split(",").map(function(x){return parseInt(x);}).slice(0,3);}warn("Not a valid color format: \\"".concat(color,"\\""));return[0,0,0];}function getColorValues(colors){var span=document.createElement("span");span.style.visibility="hidden";document.body.append(span);var _iterator5=_createForOfIteratorHelper(colors.keys()),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var name=_step5.value;span.style.color=name;var computedColor=window.getComputedStyle(span).color;colors.set(name,getRGB(computedColor));}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}span.remove();}function getCurrentTransform(ctx){var _ctx$getTransform=ctx.getTransform(),a=_ctx$getTransform.a,b=_ctx$getTransform.b,c=_ctx$getTransform.c,d=_ctx$getTransform.d,e=_ctx$getTransform.e,f=_ctx$getTransform.f;return[a,b,c,d,e,f];}function getCurrentTransformInverse(ctx){var _ctx$getTransform$inv=ctx.getTransform().invertSelf(),a=_ctx$getTransform$inv.a,b=_ctx$getTransform$inv.b,c=_ctx$getTransform$inv.c,d=_ctx$getTransform$inv.d,e=_ctx$getTransform$inv.e,f=_ctx$getTransform$inv.f;return[a,b,c,d,e,f];}function _setLayerDimensions(div,viewport){var mustFlip=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var mustRotate=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;if(viewport instanceof PageViewport){var _viewport$rawDims=viewport.rawDims,pageWidth=_viewport$rawDims.pageWidth,pageHeight=_viewport$rawDims.pageHeight;var style=div.style;var useRound=util_FeatureTest.isCSSRoundSupported;var w="var(--total-scale-factor) * ".concat(pageWidth,"px"),h="var(--total-scale-factor) * ".concat(pageHeight,"px");var widthStr=useRound?"round(down, ".concat(w,", var(--scale-round-x))"):"calc(".concat(w,")"),heightStr=useRound?"round(down, ".concat(h,", var(--scale-round-y))"):"calc(".concat(h,")");if(!mustFlip||viewport.rotation%180===0){style.width=widthStr;style.height=heightStr;}else{style.width=heightStr;style.height=widthStr;}}if(mustRotate){div.setAttribute("data-main-rotation",viewport.rotation);}}var _OutputScale=/*#__PURE__*/function(){function _OutputScale(){_classCallCheck(this,_OutputScale);var pixelRatio=window.devicePixelRatio||1;this.sx=pixelRatio;this.sy=pixelRatio;}return _createClass(_OutputScale,[{key:"scaled",get:function get(){return this.sx!==1||this.sy!==1;}},{key:"symmetric",get:function get(){return this.sx===this.sy;}}]);}();var _SupportedImageMimeTypes=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];;// ./src/display/editor/toolbar.js\nvar _toolbar=/*#__PURE__*/new WeakMap();var _colorPicker=/*#__PURE__*/new WeakMap();var _editor=/*#__PURE__*/new WeakMap();var _buttons=/*#__PURE__*/new WeakMap();var _altText=/*#__PURE__*/new WeakMap();var _signatureDescriptionButton=/*#__PURE__*/new WeakMap();var _EditorToolbar_brand=/*#__PURE__*/new WeakSet();var EditorToolbar=/*#__PURE__*/function(){function EditorToolbar(editor){_classCallCheck(this,EditorToolbar);_classPrivateMethodInitSpec(this,_EditorToolbar_brand);_classPrivateFieldInitSpec(this,_toolbar,null);_classPrivateFieldInitSpec(this,_colorPicker,null);_classPrivateFieldInitSpec(this,_editor,void 0);_classPrivateFieldInitSpec(this,_buttons,null);_classPrivateFieldInitSpec(this,_altText,null);_classPrivateFieldInitSpec(this,_signatureDescriptionButton,null);_classPrivateFieldSet(_editor,this,editor);_l10nRemove._||(_l10nRemove._=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}));}return _createClass(EditorToolbar,[{key:"render",value:function render(){var editToolbar=_classPrivateFieldSet(_toolbar,this,document.createElement("div"));editToolbar.classList.add("editToolbar","hidden");editToolbar.setAttribute("role","toolbar");var signal=_classPrivateFieldGet(_editor,this)._uiManager._signal;editToolbar.addEventListener("contextmenu",_noContextMenu,{signal:signal});editToolbar.addEventListener("pointerdown",_pointerDown,{signal:signal});var buttons=_classPrivateFieldSet(_buttons,this,document.createElement("div"));buttons.className="buttons";editToolbar.append(buttons);var position=_classPrivateFieldGet(_editor,this).toolbarPosition;if(position){var style=editToolbar.style;var x=_classPrivateFieldGet(_editor,this)._uiManager.direction==="ltr"?1-position[0]:position[0];style.insetInlineEnd="".concat(100*x,"%");style.top="calc(".concat(100*position[1],"% + var(--editor-toolbar-vert-offset))");}_assertClassBrand(_EditorToolbar_brand,this,_addDeleteButton).call(this);return editToolbar;}},{key:"div",get:function get(){return _classPrivateFieldGet(_toolbar,this);}},{key:"hide",value:function hide(){var _classPrivateFieldGet2;_classPrivateFieldGet(_toolbar,this).classList.add("hidden");(_classPrivateFieldGet2=_classPrivateFieldGet(_colorPicker,this))===null||_classPrivateFieldGet2===void 0||_classPrivateFieldGet2.hideDropdown();}},{key:"show",value:function show(){var _classPrivateFieldGet3;_classPrivateFieldGet(_toolbar,this).classList.remove("hidden");(_classPrivateFieldGet3=_classPrivateFieldGet(_altText,this))===null||_classPrivateFieldGet3===void 0||_classPrivateFieldGet3.shown();}},{key:"addAltText",value:function(){var _addAltText=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(altText){var button;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return altText.render();case 2:button=_context.sent;_assertClassBrand(_EditorToolbar_brand,this,_addListenersToElement).call(this,button);_classPrivateFieldGet(_buttons,this).prepend(button,_classPrivateGetter(_EditorToolbar_brand,this,_get_divider));_classPrivateFieldSet(_altText,this,altText);case 6:case"end":return _context.stop();}},_callee,this);}));function addAltText(_x3){return _addAltText.apply(this,arguments);}return addAltText;}()},{key:"addColorPicker",value:function addColorPicker(colorPicker){_classPrivateFieldSet(_colorPicker,this,colorPicker);var button=colorPicker.renderButton();_assertClassBrand(_EditorToolbar_brand,this,_addListenersToElement).call(this,button);_classPrivateFieldGet(_buttons,this).prepend(button,_classPrivateGetter(_EditorToolbar_brand,this,_get_divider));}},{key:"addEditSignatureButton",value:function(){var _addEditSignatureButton=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(signatureManager){var button;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.t0=_classPrivateFieldSet;_context2.t1=_signatureDescriptionButton;_context2.t2=this;_context2.next=5;return signatureManager.renderEditButton(_classPrivateFieldGet(_editor,this));case 5:_context2.t3=_context2.sent;button=(0,_context2.t0)(_context2.t1,_context2.t2,_context2.t3);_assertClassBrand(_EditorToolbar_brand,this,_addListenersToElement).call(this,button);_classPrivateFieldGet(_buttons,this).prepend(button,_classPrivateGetter(_EditorToolbar_brand,this,_get_divider));case 9:case"end":return _context2.stop();}},_callee2,this);}));function addEditSignatureButton(_x4){return _addEditSignatureButton.apply(this,arguments);}return addEditSignatureButton;}()},{key:"updateEditSignatureButton",value:function updateEditSignatureButton(description){if(_classPrivateFieldGet(_signatureDescriptionButton,this)){_classPrivateFieldGet(_signatureDescriptionButton,this).title=description;}}},{key:"remove",value:function remove(){var _classPrivateFieldGet4;_classPrivateFieldGet(_toolbar,this).remove();(_classPrivateFieldGet4=_classPrivateFieldGet(_colorPicker,this))===null||_classPrivateFieldGet4===void 0||_classPrivateFieldGet4.destroy();_classPrivateFieldSet(_colorPicker,this,null);}}]);}();function _pointerDown(e){e.stopPropagation();}function _focusIn(e){_classPrivateFieldGet(_editor,this)._focusEventsAllowed=false;_stopEvent(e);}function _focusOut(e){_classPrivateFieldGet(_editor,this)._focusEventsAllowed=true;_stopEvent(e);}function _addListenersToElement(element){var signal=_classPrivateFieldGet(_editor,this)._uiManager._signal;element.addEventListener("focusin",_assertClassBrand(_EditorToolbar_brand,this,_focusIn).bind(this),{capture:true,signal:signal});element.addEventListener("focusout",_assertClassBrand(_EditorToolbar_brand,this,_focusOut).bind(this),{capture:true,signal:signal});element.addEventListener("contextmenu",_noContextMenu,{signal:signal});}function _addDeleteButton(){var _classPrivateFieldGet131=_classPrivateFieldGet(_editor,this),editorType=_classPrivateFieldGet131.editorType,_uiManager=_classPrivateFieldGet131._uiManager;var button=document.createElement("button");button.className="delete";button.tabIndex=0;button.setAttribute("data-l10n-id",_l10nRemove._[editorType]);_assertClassBrand(_EditorToolbar_brand,this,_addListenersToElement).call(this,button);button.addEventListener("click",function(e){_uiManager["delete"]();},{signal:_uiManager._signal});_classPrivateFieldGet(_buttons,this).append(button);}function _get_divider(_this5){var divider=document.createElement("div");divider.className="divider";return divider;}var _l10nRemove={_:null};var _buttons2=/*#__PURE__*/new WeakMap();var _toolbar2=/*#__PURE__*/new WeakMap();var _uiManager2=/*#__PURE__*/new WeakMap();var _HighlightToolbar_brand=/*#__PURE__*/new WeakSet();var HighlightToolbar=/*#__PURE__*/function(){function HighlightToolbar(uiManager){_classCallCheck(this,HighlightToolbar);_classPrivateMethodInitSpec(this,_HighlightToolbar_brand);_classPrivateFieldInitSpec(this,_buttons2,null);_classPrivateFieldInitSpec(this,_toolbar2,null);_classPrivateFieldInitSpec(this,_uiManager2,void 0);_classPrivateFieldSet(_uiManager2,this,uiManager);}return _createClass(HighlightToolbar,[{key:"show",value:function show(parent,boxes,isLTR){var _assertClassBrand$cal=_assertClassBrand(_HighlightToolbar_brand,this,_getLastPoint).call(this,boxes,isLTR),_assertClassBrand$cal2=_slicedToArray(_assertClassBrand$cal,2),x=_assertClassBrand$cal2[0],y=_assertClassBrand$cal2[1];var _ref4=_classPrivateFieldGet(_toolbar2,this)||_classPrivateFieldSet(_toolbar2,this,_assertClassBrand(_HighlightToolbar_brand,this,_render).call(this)),style=_ref4.style;parent.append(_classPrivateFieldGet(_toolbar2,this));style.insetInlineEnd="".concat(100*x,"%");style.top="calc(".concat(100*y,"% + var(--editor-toolbar-vert-offset))");}},{key:"hide",value:function hide(){_classPrivateFieldGet(_toolbar2,this).remove();}}]);}();function _render(){var editToolbar=_classPrivateFieldSet(_toolbar2,this,document.createElement("div"));editToolbar.className="editToolbar";editToolbar.setAttribute("role","toolbar");editToolbar.addEventListener("contextmenu",_noContextMenu,{signal:_classPrivateFieldGet(_uiManager2,this)._signal});var buttons=_classPrivateFieldSet(_buttons2,this,document.createElement("div"));buttons.className="buttons";editToolbar.append(buttons);_assertClassBrand(_HighlightToolbar_brand,this,_addHighlightButton).call(this);return editToolbar;}function _getLastPoint(boxes,isLTR){var lastY=0;var lastX=0;var _iterator171=_createForOfIteratorHelper(boxes),_step171;try{for(_iterator171.s();!(_step171=_iterator171.n()).done;){var box=_step171.value;var y=box.y+box.height;if(y<lastY){continue;}var x=box.x+(isLTR?box.width:0);if(y>lastY){lastX=x;lastY=y;continue;}if(isLTR){if(x>lastX){lastX=x;}}else if(x<lastX){lastX=x;}}}catch(err){_iterator171.e(err);}finally{_iterator171.f();}return[isLTR?1-lastX:lastX,lastY];}function _addHighlightButton(){var _this109=this;var button=document.createElement("button");button.className="highlightButton";button.tabIndex=0;button.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");var span=document.createElement("span");button.append(span);span.className="visuallyHidden";span.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");var signal=_classPrivateFieldGet(_uiManager2,this)._signal;button.addEventListener("contextmenu",_noContextMenu,{signal:signal});button.addEventListener("click",function(){_classPrivateFieldGet(_uiManager2,_this109).highlightSelection("floating_button");},{signal:signal});_classPrivateFieldGet(_buttons2,this).append(button);};// ./src/display/editor/tools.js\nfunction bindEvents(obj,element,names){var _iterator6=_createForOfIteratorHelper(names),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var name=_step6.value;element.addEventListener(name,obj[name].bind(obj));}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}}function opacityToHex(opacity){return Math.round(Math.min(255,Math.max(1,255*opacity))).toString(16).padStart(2,"0");}var _id=/*#__PURE__*/new WeakMap();var IdManager=/*#__PURE__*/function(){function IdManager(){_classCallCheck(this,IdManager);_classPrivateFieldInitSpec(this,_id,0);}return _createClass(IdManager,[{key:"id",get:function get(){var _this$id,_this$id2;return"".concat(AnnotationEditorPrefix).concat((_classPrivateFieldSet(_id,this,(_this$id=_classPrivateFieldGet(_id,this),_this$id2=_this$id++,_this$id)),_this$id2));}}]);}();var _baseId=/*#__PURE__*/new WeakMap();var _id2=/*#__PURE__*/new WeakMap();var _cache=/*#__PURE__*/new WeakMap();var _ImageManager_brand=/*#__PURE__*/new WeakSet();var ImageManager=/*#__PURE__*/function(){function ImageManager(){_classCallCheck(this,ImageManager);_classPrivateMethodInitSpec(this,_ImageManager_brand);_classPrivateFieldInitSpec(this,_baseId,_getUuid());_classPrivateFieldInitSpec(this,_id2,0);_classPrivateFieldInitSpec(this,_cache,null);}return _createClass(ImageManager,[{key:"getFromFile",value:function(){var _getFromFile=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(file){var lastModified,name,size,type;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:lastModified=file.lastModified,name=file.name,size=file.size,type=file.type;return _context3.abrupt("return",_assertClassBrand(_ImageManager_brand,this,_get).call(this,"".concat(lastModified,"_").concat(name,"_").concat(size,"_").concat(type),file));case 2:case"end":return _context3.stop();}},_callee3,this);}));function getFromFile(_x5){return _getFromFile.apply(this,arguments);}return getFromFile;}()},{key:"getFromUrl",value:function(){var _getFromUrl=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(url){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _context4.abrupt("return",_assertClassBrand(_ImageManager_brand,this,_get).call(this,url,url));case 1:case"end":return _context4.stop();}},_callee4,this);}));function getFromUrl(_x6){return _getFromUrl.apply(this,arguments);}return getFromUrl;}()},{key:"getFromBlob",value:function(){var _getFromBlob=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(id,blobPromise){var blob;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:_context5.next=2;return blobPromise;case 2:blob=_context5.sent;return _context5.abrupt("return",_assertClassBrand(_ImageManager_brand,this,_get).call(this,id,blob));case 4:case"end":return _context5.stop();}},_callee5,this);}));function getFromBlob(_x7,_x8){return _getFromBlob.apply(this,arguments);}return getFromBlob;}()},{key:"getFromId",value:function(){var _getFromId=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(id){var data,blobPromise;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:_classPrivateFieldGet(_cache,this)||_classPrivateFieldSet(_cache,this,new Map());data=_classPrivateFieldGet(_cache,this).get(id);if(data){_context6.next=4;break;}return _context6.abrupt("return",null);case 4:if(!data.bitmap){_context6.next=7;break;}data.refCounter+=1;return _context6.abrupt("return",data);case 7:if(!data.file){_context6.next=9;break;}return _context6.abrupt("return",this.getFromFile(data.file));case 9:if(!data.blobPromise){_context6.next=13;break;}blobPromise=data.blobPromise;delete data.blobPromise;return _context6.abrupt("return",this.getFromBlob(data.id,blobPromise));case 13:return _context6.abrupt("return",this.getFromUrl(data.url));case 14:case"end":return _context6.stop();}},_callee6,this);}));function getFromId(_x9){return _getFromId.apply(this,arguments);}return getFromId;}()},{key:"getFromCanvas",value:function getFromCanvas(id,canvas){var _this$id5,_this$id6,_data2;_classPrivateFieldGet(_cache,this)||_classPrivateFieldSet(_cache,this,new Map());var data=_classPrivateFieldGet(_cache,this).get(id);if((_data2=data)!==null&&_data2!==void 0&&_data2.bitmap){data.refCounter+=1;return data;}var offscreen=new OffscreenCanvas(canvas.width,canvas.height);var ctx=offscreen.getContext("2d");ctx.drawImage(canvas,0,0);data={bitmap:offscreen.transferToImageBitmap(),id:"image_".concat(_classPrivateFieldGet(_baseId,this),"_").concat((_classPrivateFieldSet(_id2,this,(_this$id5=_classPrivateFieldGet(_id2,this),_this$id6=_this$id5++,_this$id5)),_this$id6)),refCounter:1,isSvg:false};_classPrivateFieldGet(_cache,this).set(id,data);_classPrivateFieldGet(_cache,this).set(data.id,data);return data;}},{key:"getSvgUrl",value:function getSvgUrl(id){var data=_classPrivateFieldGet(_cache,this).get(id);if(!(data!==null&&data!==void 0&&data.isSvg)){return null;}return data.svgUrl;}},{key:"deleteId",value:function deleteId(id){var _bitmap$close;_classPrivateFieldGet(_cache,this)||_classPrivateFieldSet(_cache,this,new Map());var data=_classPrivateFieldGet(_cache,this).get(id);if(!data){return;}data.refCounter-=1;if(data.refCounter!==0){return;}var bitmap=data.bitmap;if(!data.url&&!data.file){var canvas=new OffscreenCanvas(bitmap.width,bitmap.height);var ctx=canvas.getContext("bitmaprenderer");ctx.transferFromImageBitmap(bitmap);data.blobPromise=canvas.convertToBlob();}(_bitmap$close=bitmap.close)===null||_bitmap$close===void 0||_bitmap$close.call(bitmap);data.bitmap=null;}},{key:"isValidId",value:function isValidId(id){return id.startsWith("image_".concat(_classPrivateFieldGet(_baseId,this),"_"));}}],[{key:"_isSVGFittingCanvas",get:function get(){var svg="data:image/svg+xml;charset=UTF-8,<svg viewBox=\\"0 0 1 1\\" width=\\"1\\" height=\\"1\\" xmlns=\\"http://www.w3.org/2000/svg\\"><rect width=\\"1\\" height=\\"1\\" style=\\"fill:red;\\"/></svg>";var canvas=new OffscreenCanvas(1,3);var ctx=canvas.getContext("2d",{willReadFrequently:true});var image=new Image();image.src=svg;var promise=image.decode().then(function(){ctx.drawImage(image,0,0,1,1,0,0,1,3);return new Uint32Array(ctx.getImageData(0,0,1,1).data.buffer)[0]===0;});return _shadow(this,"_isSVGFittingCanvas",promise);}}]);}();_ImageManager=ImageManager;function _get(_x64,_x65){return _get3.apply(this,arguments);}function _get3(){_get3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee65(key,rawData){var _data11;var data,_this$id3,_this$id4,image,mustRemoveAspectRatioPromise,fileReader,imageElement,imagePromise;return _regeneratorRuntime().wrap(function _callee65$(_context66){while(1)switch(_context66.prev=_context66.next){case 0:_classPrivateFieldGet(_cache,this)||_classPrivateFieldSet(_cache,this,new Map());data=_classPrivateFieldGet(_cache,this).get(key);if(!(data===null)){_context66.next=4;break;}return _context66.abrupt("return",null);case 4:if(!((_data11=data)!==null&&_data11!==void 0&&_data11.bitmap)){_context66.next=7;break;}data.refCounter+=1;return _context66.abrupt("return",data);case 7:_context66.prev=7;data||(data={bitmap:null,id:"image_".concat(_classPrivateFieldGet(_baseId,this),"_").concat((_classPrivateFieldSet(_id2,this,(_this$id3=_classPrivateFieldGet(_id2,this),_this$id4=_this$id3++,_this$id3)),_this$id4)),refCounter:0,isSvg:false});if(!(typeof rawData==="string")){_context66.next=16;break;}data.url=rawData;_context66.next=13;return _fetchData(rawData,"blob");case 13:image=_context66.sent;_context66.next=17;break;case 16:if(rawData instanceof File){image=data.file=rawData;}else if(rawData instanceof Blob){image=rawData;}case 17:if(!(image.type==="image/svg+xml")){_context66.next=27;break;}mustRemoveAspectRatioPromise=_ImageManager._isSVGFittingCanvas;fileReader=new FileReader();imageElement=new Image();imagePromise=new Promise(function(resolve,reject){imageElement.onload=function(){data.bitmap=imageElement;data.isSvg=true;resolve();};fileReader.onload=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee64(){var url;return _regeneratorRuntime().wrap(function _callee64$(_context65){while(1)switch(_context65.prev=_context65.next){case 0:url=data.svgUrl=fileReader.result;_context65.next=3;return mustRemoveAspectRatioPromise;case 3:if(!_context65.sent){_context65.next=7;break;}_context65.t0="".concat(url,"#svgView(preserveAspectRatio(none))");_context65.next=8;break;case 7:_context65.t0=url;case 8:imageElement.src=_context65.t0;case 9:case"end":return _context65.stop();}},_callee64);}));imageElement.onerror=fileReader.onerror=reject;});fileReader.readAsDataURL(image);_context66.next=25;return imagePromise;case 25:_context66.next=30;break;case 27:_context66.next=29;return createImageBitmap(image);case 29:data.bitmap=_context66.sent;case 30:data.refCounter=1;_context66.next=37;break;case 33:_context66.prev=33;_context66.t0=_context66["catch"](7);warn(_context66.t0);data=null;case 37:_classPrivateFieldGet(_cache,this).set(key,data);if(data){_classPrivateFieldGet(_cache,this).set(data.id,data);}return _context66.abrupt("return",data);case 40:case"end":return _context66.stop();}},_callee65,this,[[7,33]]);}));return _get3.apply(this,arguments);}var _commands=/*#__PURE__*/new WeakMap();var _locked=/*#__PURE__*/new WeakMap();var _maxSize=/*#__PURE__*/new WeakMap();var _position=/*#__PURE__*/new WeakMap();var CommandManager=/*#__PURE__*/function(){function CommandManager(){var maxSize=arguments.length>0&&arguments[0]!==undefined?arguments[0]:128;_classCallCheck(this,CommandManager);_classPrivateFieldInitSpec(this,_commands,[]);_classPrivateFieldInitSpec(this,_locked,false);_classPrivateFieldInitSpec(this,_maxSize,void 0);_classPrivateFieldInitSpec(this,_position,-1);_classPrivateFieldSet(_maxSize,this,maxSize);}return _createClass(CommandManager,[{key:"add",value:function add(_ref5){var cmd=_ref5.cmd,undo=_ref5.undo,post=_ref5.post,mustExec=_ref5.mustExec,_ref5$type=_ref5.type,type=_ref5$type===void 0?NaN:_ref5$type,_ref5$overwriteIfSame=_ref5.overwriteIfSameType,overwriteIfSameType=_ref5$overwriteIfSame===void 0?false:_ref5$overwriteIfSame,_ref5$keepUndo=_ref5.keepUndo,keepUndo=_ref5$keepUndo===void 0?false:_ref5$keepUndo;if(mustExec){cmd();}if(_classPrivateFieldGet(_locked,this)){return;}var save={cmd:cmd,undo:undo,post:post,type:type};if(_classPrivateFieldGet(_position,this)===-1){if(_classPrivateFieldGet(_commands,this).length>0){_classPrivateFieldGet(_commands,this).length=0;}_classPrivateFieldSet(_position,this,0);_classPrivateFieldGet(_commands,this).push(save);return;}if(overwriteIfSameType&&_classPrivateFieldGet(_commands,this)[_classPrivateFieldGet(_position,this)].type===type){if(keepUndo){save.undo=_classPrivateFieldGet(_commands,this)[_classPrivateFieldGet(_position,this)].undo;}_classPrivateFieldGet(_commands,this)[_classPrivateFieldGet(_position,this)]=save;return;}var next=_classPrivateFieldGet(_position,this)+1;if(next===_classPrivateFieldGet(_maxSize,this)){_classPrivateFieldGet(_commands,this).splice(0,1);}else{_classPrivateFieldSet(_position,this,next);if(next<_classPrivateFieldGet(_commands,this).length){_classPrivateFieldGet(_commands,this).splice(next);}}_classPrivateFieldGet(_commands,this).push(save);}},{key:"undo",value:function undo(){if(_classPrivateFieldGet(_position,this)===-1){return;}_classPrivateFieldSet(_locked,this,true);var _classPrivateFieldGet5=_classPrivateFieldGet(_commands,this)[_classPrivateFieldGet(_position,this)],undo=_classPrivateFieldGet5.undo,post=_classPrivateFieldGet5.post;undo();post===null||post===void 0||post();_classPrivateFieldSet(_locked,this,false);_classPrivateFieldSet(_position,this,_classPrivateFieldGet(_position,this)-1);}},{key:"redo",value:function redo(){if(_classPrivateFieldGet(_position,this)<_classPrivateFieldGet(_commands,this).length-1){_classPrivateFieldSet(_position,this,_classPrivateFieldGet(_position,this)+1);_classPrivateFieldSet(_locked,this,true);var _classPrivateFieldGet6=_classPrivateFieldGet(_commands,this)[_classPrivateFieldGet(_position,this)],cmd=_classPrivateFieldGet6.cmd,post=_classPrivateFieldGet6.post;cmd();post===null||post===void 0||post();_classPrivateFieldSet(_locked,this,false);}}},{key:"hasSomethingToUndo",value:function hasSomethingToUndo(){return _classPrivateFieldGet(_position,this)!==-1;}},{key:"hasSomethingToRedo",value:function hasSomethingToRedo(){return _classPrivateFieldGet(_position,this)<_classPrivateFieldGet(_commands,this).length-1;}},{key:"cleanType",value:function cleanType(type){if(_classPrivateFieldGet(_position,this)===-1){return;}for(var i=_classPrivateFieldGet(_position,this);i>=0;i--){if(_classPrivateFieldGet(_commands,this)[i].type!==type){_classPrivateFieldGet(_commands,this).splice(i+1,_classPrivateFieldGet(_position,this)-i);_classPrivateFieldSet(_position,this,i);return;}}_classPrivateFieldGet(_commands,this).length=0;_classPrivateFieldSet(_position,this,-1);}},{key:"destroy",value:function destroy(){_classPrivateFieldSet(_commands,this,null);}}]);}();var _KeyboardManager_brand=/*#__PURE__*/new WeakSet();var KeyboardManager=/*#__PURE__*/function(){function KeyboardManager(callbacks){_classCallCheck(this,KeyboardManager);_classPrivateMethodInitSpec(this,_KeyboardManager_brand);this.buffer=[];this.callbacks=new Map();this.allKeys=new Set();var isMac=util_FeatureTest.platform.isMac;var _iterator7=_createForOfIteratorHelper(callbacks),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var _step7$value=_slicedToArray(_step7.value,3),keys=_step7$value[0],callback=_step7$value[1],_step7$value$=_step7$value[2],options=_step7$value$===void 0?{}:_step7$value$;var _iterator8=_createForOfIteratorHelper(keys),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var key=_step8.value;var isMacKey=key.startsWith("mac+");if(isMac&&isMacKey){this.callbacks.set(key.slice(4),{callback:callback,options:options});this.allKeys.add(key.split("+").at(-1));}else if(!isMac&&!isMacKey){this.callbacks.set(key,{callback:callback,options:options});this.allKeys.add(key.split("+").at(-1));}}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}}return _createClass(KeyboardManager,[{key:"exec",value:function exec(self,event){if(!this.allKeys.has(event.key)){return;}var info=this.callbacks.get(_assertClassBrand(_KeyboardManager_brand,this,_serialize).call(this,event));if(!info){return;}var callback=info.callback,_info$options=info.options,_info$options$bubbles=_info$options.bubbles,bubbles=_info$options$bubbles===void 0?false:_info$options$bubbles,_info$options$args=_info$options.args,args=_info$options$args===void 0?[]:_info$options$args,_info$options$checker=_info$options.checker,checker=_info$options$checker===void 0?null:_info$options$checker;if(checker&&!checker(self,event)){return;}callback.bind.apply(callback,[self].concat(_toConsumableArray(args),[event]))();if(!bubbles){_stopEvent(event);}}}]);}();function _serialize(event){if(event.altKey){this.buffer.push("alt");}if(event.ctrlKey){this.buffer.push("ctrl");}if(event.metaKey){this.buffer.push("meta");}if(event.shiftKey){this.buffer.push("shift");}this.buffer.push(event.key);var str=this.buffer.join("+");this.buffer.length=0;return str;}var ColorManager=/*#__PURE__*/function(){function ColorManager(){_classCallCheck(this,ColorManager);}return _createClass(ColorManager,[{key:"_colors",get:function get(){var colors=new Map([["CanvasText",null],["Canvas",null]]);getColorValues(colors);return _shadow(this,"_colors",colors);}},{key:"convert",value:function convert(color){var rgb=getRGB(color);if(!window.matchMedia("(forced-colors: active)").matches){return rgb;}var _iterator9=_createForOfIteratorHelper(this._colors),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var _step9$value=_slicedToArray(_step9.value,2),name=_step9$value[0],RGB=_step9$value[1];if(RGB.every(function(x,i){return x===rgb[i];})){return ColorManager._colorsMapping.get(name);}}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}return rgb;}},{key:"getHexCode",value:function getHexCode(name){var rgb=this._colors.get(name);if(!rgb){return name;}return _Util.makeHexColor.apply(_Util,_toConsumableArray(rgb));}}]);}();_defineProperty(ColorManager,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var _abortController=/*#__PURE__*/new WeakMap();var _activeEditor=/*#__PURE__*/new WeakMap();var _allEditors=/*#__PURE__*/new WeakMap();var _allLayers=/*#__PURE__*/new WeakMap();var _altTextManager=/*#__PURE__*/new WeakMap();var _annotationStorage=/*#__PURE__*/new WeakMap();var _changedExistingAnnotations=/*#__PURE__*/new WeakMap();var _commandManager=/*#__PURE__*/new WeakMap();var _copyPasteAC=/*#__PURE__*/new WeakMap();var _currentDrawingSession=/*#__PURE__*/new WeakMap();var _currentPageIndex=/*#__PURE__*/new WeakMap();var _deletedAnnotationsElementIds=/*#__PURE__*/new WeakMap();var _draggingEditors=/*#__PURE__*/new WeakMap();var _editorTypes=/*#__PURE__*/new WeakMap();var _editorsToRescale=/*#__PURE__*/new WeakMap();var _enableHighlightFloatingButton=/*#__PURE__*/new WeakMap();var _enableUpdatedAddImage=/*#__PURE__*/new WeakMap();var _enableNewAltTextWhenAddingImage=/*#__PURE__*/new WeakMap();var _filterFactory=/*#__PURE__*/new WeakMap();var _focusMainContainerTimeoutId=/*#__PURE__*/new WeakMap();var _focusManagerAC=/*#__PURE__*/new WeakMap();var _highlightColors=/*#__PURE__*/new WeakMap();var _highlightWhenShiftUp=/*#__PURE__*/new WeakMap();var _highlightToolbar=/*#__PURE__*/new WeakMap();var _idManager=/*#__PURE__*/new WeakMap();var _isEnabled=/*#__PURE__*/new WeakMap();var _isWaiting=/*#__PURE__*/new WeakMap();var _keyboardManagerAC=/*#__PURE__*/new WeakMap();var _lastActiveElement=/*#__PURE__*/new WeakMap();var _mainHighlightColorPicker=/*#__PURE__*/new WeakMap();var _missingCanvases=/*#__PURE__*/new WeakMap();var _mlManager=/*#__PURE__*/new WeakMap();var _mode=/*#__PURE__*/new WeakMap();var _selectedEditors=/*#__PURE__*/new WeakMap();var _selectedTextNode=/*#__PURE__*/new WeakMap();var _signatureManager=/*#__PURE__*/new WeakMap();var _pageColors=/*#__PURE__*/new WeakMap();var _showAllStates=/*#__PURE__*/new WeakMap();var _previousStates=/*#__PURE__*/new WeakMap();var _translation=/*#__PURE__*/new WeakMap();var _translationTimeoutId=/*#__PURE__*/new WeakMap();var _container=/*#__PURE__*/new WeakMap();var _viewer=/*#__PURE__*/new WeakMap();var _updateModeCapability=/*#__PURE__*/new WeakMap();var _AnnotationEditorUIManager_brand=/*#__PURE__*/new WeakSet();var _AnnotationEditorUIManager=/*#__PURE__*/function(){function _AnnotationEditorUIManager(container,viewer,altTextManager,signatureManager,eventBus,pdfDocument,pageColors,highlightColors,enableHighlightFloatingButton,enableUpdatedAddImage,enableNewAltTextWhenAddingImage,mlManager,editorUndoBar,supportsPinchToZoom){var _this7=this;_classCallCheck(this,_AnnotationEditorUIManager);_classPrivateMethodInitSpec(this,_AnnotationEditorUIManager_brand);_classPrivateFieldInitSpec(this,_abortController,new AbortController());_classPrivateFieldInitSpec(this,_activeEditor,null);_classPrivateFieldInitSpec(this,_allEditors,new Map());_classPrivateFieldInitSpec(this,_allLayers,new Map());_classPrivateFieldInitSpec(this,_altTextManager,null);_classPrivateFieldInitSpec(this,_annotationStorage,null);_classPrivateFieldInitSpec(this,_changedExistingAnnotations,null);_classPrivateFieldInitSpec(this,_commandManager,new CommandManager());_classPrivateFieldInitSpec(this,_copyPasteAC,null);_classPrivateFieldInitSpec(this,_currentDrawingSession,null);_classPrivateFieldInitSpec(this,_currentPageIndex,0);_classPrivateFieldInitSpec(this,_deletedAnnotationsElementIds,new Set());_classPrivateFieldInitSpec(this,_draggingEditors,null);_classPrivateFieldInitSpec(this,_editorTypes,null);_classPrivateFieldInitSpec(this,_editorsToRescale,new Set());_defineProperty(this,"_editorUndoBar",null);_classPrivateFieldInitSpec(this,_enableHighlightFloatingButton,false);_classPrivateFieldInitSpec(this,_enableUpdatedAddImage,false);_classPrivateFieldInitSpec(this,_enableNewAltTextWhenAddingImage,false);_classPrivateFieldInitSpec(this,_filterFactory,null);_classPrivateFieldInitSpec(this,_focusMainContainerTimeoutId,null);_classPrivateFieldInitSpec(this,_focusManagerAC,null);_classPrivateFieldInitSpec(this,_highlightColors,null);_classPrivateFieldInitSpec(this,_highlightWhenShiftUp,false);_classPrivateFieldInitSpec(this,_highlightToolbar,null);_classPrivateFieldInitSpec(this,_idManager,new IdManager());_classPrivateFieldInitSpec(this,_isEnabled,false);_classPrivateFieldInitSpec(this,_isWaiting,false);_classPrivateFieldInitSpec(this,_keyboardManagerAC,null);_classPrivateFieldInitSpec(this,_lastActiveElement,null);_classPrivateFieldInitSpec(this,_mainHighlightColorPicker,null);_classPrivateFieldInitSpec(this,_missingCanvases,null);_classPrivateFieldInitSpec(this,_mlManager,null);_classPrivateFieldInitSpec(this,_mode,_AnnotationEditorType.NONE);_classPrivateFieldInitSpec(this,_selectedEditors,new Set());_classPrivateFieldInitSpec(this,_selectedTextNode,null);_classPrivateFieldInitSpec(this,_signatureManager,null);_classPrivateFieldInitSpec(this,_pageColors,null);_classPrivateFieldInitSpec(this,_showAllStates,null);_classPrivateFieldInitSpec(this,_previousStates,{isEditing:false,isEmpty:true,hasSomethingToUndo:false,hasSomethingToRedo:false,hasSelectedEditor:false,hasSelectedText:false});_classPrivateFieldInitSpec(this,_translation,[0,0]);_classPrivateFieldInitSpec(this,_translationTimeoutId,null);_classPrivateFieldInitSpec(this,_container,null);_classPrivateFieldInitSpec(this,_viewer,null);_classPrivateFieldInitSpec(this,_updateModeCapability,null);var _signal=this._signal=_classPrivateFieldGet(_abortController,this).signal;_classPrivateFieldSet(_container,this,container);_classPrivateFieldSet(_viewer,this,viewer);_classPrivateFieldSet(_altTextManager,this,altTextManager);_classPrivateFieldSet(_signatureManager,this,signatureManager);this._eventBus=eventBus;eventBus._on("editingaction",this.onEditingAction.bind(this),{signal:_signal});eventBus._on("pagechanging",this.onPageChanging.bind(this),{signal:_signal});eventBus._on("scalechanging",this.onScaleChanging.bind(this),{signal:_signal});eventBus._on("rotationchanging",this.onRotationChanging.bind(this),{signal:_signal});eventBus._on("setpreference",this.onSetPreference.bind(this),{signal:_signal});eventBus._on("switchannotationeditorparams",function(evt){return _this7.updateParams(evt.type,evt.value);},{signal:_signal});_assertClassBrand(_AnnotationEditorUIManager_brand,this,_addSelectionListener).call(this);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_addDragAndDropListeners).call(this);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_addKeyboardManager).call(this);_classPrivateFieldSet(_annotationStorage,this,pdfDocument.annotationStorage);_classPrivateFieldSet(_filterFactory,this,pdfDocument.filterFactory);_classPrivateFieldSet(_pageColors,this,pageColors);_classPrivateFieldSet(_highlightColors,this,highlightColors||null);_classPrivateFieldSet(_enableHighlightFloatingButton,this,enableHighlightFloatingButton);_classPrivateFieldSet(_enableUpdatedAddImage,this,enableUpdatedAddImage);_classPrivateFieldSet(_enableNewAltTextWhenAddingImage,this,enableNewAltTextWhenAddingImage);_classPrivateFieldSet(_mlManager,this,mlManager||null);this.viewParameters={realScale:_PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0};this.isShiftKeyDown=false;this._editorUndoBar=editorUndoBar||null;this._supportsPinchToZoom=supportsPinchToZoom!==false;}return _createClass(_AnnotationEditorUIManager,[{key:"destroy",value:function destroy(){var _classPrivateFieldGet7,_classPrivateFieldGet8,_classPrivateFieldGet9,_classPrivateFieldGet10,_classPrivateFieldGet11,_classPrivateFieldGet12,_classPrivateFieldGet13,_this$_editorUndoBar;(_classPrivateFieldGet7=_classPrivateFieldGet(_updateModeCapability,this))===null||_classPrivateFieldGet7===void 0||_classPrivateFieldGet7.resolve();_classPrivateFieldSet(_updateModeCapability,this,null);(_classPrivateFieldGet8=_classPrivateFieldGet(_abortController,this))===null||_classPrivateFieldGet8===void 0||_classPrivateFieldGet8.abort();_classPrivateFieldSet(_abortController,this,null);this._signal=null;var _iterator10=_createForOfIteratorHelper(_classPrivateFieldGet(_allLayers,this).values()),_step10;try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var layer=_step10.value;layer.destroy();}}catch(err){_iterator10.e(err);}finally{_iterator10.f();}_classPrivateFieldGet(_allLayers,this).clear();_classPrivateFieldGet(_allEditors,this).clear();_classPrivateFieldGet(_editorsToRescale,this).clear();(_classPrivateFieldGet9=_classPrivateFieldGet(_missingCanvases,this))===null||_classPrivateFieldGet9===void 0||_classPrivateFieldGet9.clear();_classPrivateFieldSet(_activeEditor,this,null);_classPrivateFieldGet(_selectedEditors,this).clear();_classPrivateFieldGet(_commandManager,this).destroy();(_classPrivateFieldGet10=_classPrivateFieldGet(_altTextManager,this))===null||_classPrivateFieldGet10===void 0||_classPrivateFieldGet10.destroy();(_classPrivateFieldGet11=_classPrivateFieldGet(_signatureManager,this))===null||_classPrivateFieldGet11===void 0||_classPrivateFieldGet11.destroy();(_classPrivateFieldGet12=_classPrivateFieldGet(_highlightToolbar,this))===null||_classPrivateFieldGet12===void 0||_classPrivateFieldGet12.hide();_classPrivateFieldSet(_highlightToolbar,this,null);(_classPrivateFieldGet13=_classPrivateFieldGet(_mainHighlightColorPicker,this))===null||_classPrivateFieldGet13===void 0||_classPrivateFieldGet13.destroy();_classPrivateFieldSet(_mainHighlightColorPicker,this,null);if(_classPrivateFieldGet(_focusMainContainerTimeoutId,this)){clearTimeout(_classPrivateFieldGet(_focusMainContainerTimeoutId,this));_classPrivateFieldSet(_focusMainContainerTimeoutId,this,null);}if(_classPrivateFieldGet(_translationTimeoutId,this)){clearTimeout(_classPrivateFieldGet(_translationTimeoutId,this));_classPrivateFieldSet(_translationTimeoutId,this,null);}(_this$_editorUndoBar=this._editorUndoBar)===null||_this$_editorUndoBar===void 0||_this$_editorUndoBar.destroy();}},{key:"combinedSignal",value:function combinedSignal(ac){return AbortSignal.any([this._signal,ac.signal]);}},{key:"mlManager",get:function get(){return _classPrivateFieldGet(_mlManager,this);}},{key:"useNewAltTextFlow",get:function get(){return _classPrivateFieldGet(_enableUpdatedAddImage,this);}},{key:"useNewAltTextWhenAddingImage",get:function get(){return _classPrivateFieldGet(_enableNewAltTextWhenAddingImage,this);}},{key:"hcmFilter",get:function get(){return _shadow(this,"hcmFilter",_classPrivateFieldGet(_pageColors,this)?_classPrivateFieldGet(_filterFactory,this).addHCMFilter(_classPrivateFieldGet(_pageColors,this).foreground,_classPrivateFieldGet(_pageColors,this).background):"none");}},{key:"direction",get:function get(){return _shadow(this,"direction",getComputedStyle(_classPrivateFieldGet(_container,this)).direction);}},{key:"highlightColors",get:function get(){return _shadow(this,"highlightColors",_classPrivateFieldGet(_highlightColors,this)?new Map(_classPrivateFieldGet(_highlightColors,this).split(",").map(function(pair){return pair.split("=").map(function(x){return x.trim();});})):null);}},{key:"highlightColorNames",get:function get(){return _shadow(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,function(e){return e.reverse();})):null);}},{key:"setCurrentDrawingSession",value:function setCurrentDrawingSession(layer){if(layer){this.unselectAll();this.disableUserSelect(true);}else{this.disableUserSelect(false);}_classPrivateFieldSet(_currentDrawingSession,this,layer);}},{key:"setMainHighlightColorPicker",value:function setMainHighlightColorPicker(colorPicker){_classPrivateFieldSet(_mainHighlightColorPicker,this,colorPicker);}},{key:"editAltText",value:function editAltText(editor){var _classPrivateFieldGet14;var firstTime=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;(_classPrivateFieldGet14=_classPrivateFieldGet(_altTextManager,this))===null||_classPrivateFieldGet14===void 0||_classPrivateFieldGet14.editAltText(this,editor,firstTime);}},{key:"getSignature",value:function getSignature(editor){var _classPrivateFieldGet15;(_classPrivateFieldGet15=_classPrivateFieldGet(_signatureManager,this))===null||_classPrivateFieldGet15===void 0||_classPrivateFieldGet15.getSignature({uiManager:this,editor:editor});}},{key:"signatureManager",get:function get(){return _classPrivateFieldGet(_signatureManager,this);}},{key:"switchToMode",value:function switchToMode(mode,callback){this._eventBus.on("annotationeditormodechanged",callback,{once:true,signal:this._signal});this._eventBus.dispatch("showannotationeditorui",{source:this,mode:mode});}},{key:"setPreference",value:function setPreference(name,value){this._eventBus.dispatch("setpreference",{source:this,name:name,value:value});}},{key:"onSetPreference",value:function onSetPreference(_ref6){var name=_ref6.name,value=_ref6.value;switch(name){case"enableNewAltTextWhenAddingImage":_classPrivateFieldSet(_enableNewAltTextWhenAddingImage,this,value);break;}}},{key:"onPageChanging",value:function onPageChanging(_ref7){var pageNumber=_ref7.pageNumber;_classPrivateFieldSet(_currentPageIndex,this,pageNumber-1);}},{key:"focusMainContainer",value:function focusMainContainer(){_classPrivateFieldGet(_container,this).focus();}},{key:"findParent",value:function findParent(x,y){var _iterator11=_createForOfIteratorHelper(_classPrivateFieldGet(_allLayers,this).values()),_step11;try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var layer=_step11.value;var _layer$div$getBoundin=layer.div.getBoundingClientRect(),layerX=_layer$div$getBoundin.x,layerY=_layer$div$getBoundin.y,width=_layer$div$getBoundin.width,height=_layer$div$getBoundin.height;if(x>=layerX&&x<=layerX+width&&y>=layerY&&y<=layerY+height){return layer;}}}catch(err){_iterator11.e(err);}finally{_iterator11.f();}return null;}},{key:"disableUserSelect",value:function disableUserSelect(){var value=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;_classPrivateFieldGet(_viewer,this).classList.toggle("noUserSelect",value);}},{key:"addShouldRescale",value:function addShouldRescale(editor){_classPrivateFieldGet(_editorsToRescale,this).add(editor);}},{key:"removeShouldRescale",value:function removeShouldRescale(editor){_classPrivateFieldGet(_editorsToRescale,this)["delete"](editor);}},{key:"onScaleChanging",value:function onScaleChanging(_ref8){var _classPrivateFieldGet16;var scale=_ref8.scale;this.commitOrRemove();this.viewParameters.realScale=scale*_PixelsPerInch.PDF_TO_CSS_UNITS;var _iterator12=_createForOfIteratorHelper(_classPrivateFieldGet(_editorsToRescale,this)),_step12;try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var editor=_step12.value;editor.onScaleChanging();}}catch(err){_iterator12.e(err);}finally{_iterator12.f();}(_classPrivateFieldGet16=_classPrivateFieldGet(_currentDrawingSession,this))===null||_classPrivateFieldGet16===void 0||_classPrivateFieldGet16.onScaleChanging();}},{key:"onRotationChanging",value:function onRotationChanging(_ref9){var pagesRotation=_ref9.pagesRotation;this.commitOrRemove();this.viewParameters.rotation=pagesRotation;}},{key:"highlightSelection",value:function highlightSelection(){var _this8=this;var methodOfCreation=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var selection=document.getSelection();if(!selection||selection.isCollapsed){return;}var anchorNode=selection.anchorNode,anchorOffset=selection.anchorOffset,focusNode=selection.focusNode,focusOffset=selection.focusOffset;var text=selection.toString();var anchorElement=_assertClassBrand(_AnnotationEditorUIManager_brand,this,_getAnchorElementForSelection).call(this,selection);var textLayer=anchorElement.closest(".textLayer");var boxes=this.getSelectionBoxes(textLayer);if(!boxes){return;}selection.empty();var layer=_assertClassBrand(_AnnotationEditorUIManager_brand,this,_getLayerForTextLayer).call(this,textLayer);var isNoneMode=_classPrivateFieldGet(_mode,this)===_AnnotationEditorType.NONE;var callback=function callback(){layer===null||layer===void 0||layer.createAndAddNewEditor({x:0,y:0},false,{methodOfCreation:methodOfCreation,boxes:boxes,anchorNode:anchorNode,anchorOffset:anchorOffset,focusNode:focusNode,focusOffset:focusOffset,text:text});if(isNoneMode){_this8.showAllEditors("highlight",true,true);}};if(isNoneMode){this.switchToMode(_AnnotationEditorType.HIGHLIGHT,callback);return;}callback();}},{key:"addToAnnotationStorage",value:function addToAnnotationStorage(editor){if(!editor.isEmpty()&&_classPrivateFieldGet(_annotationStorage,this)&&!_classPrivateFieldGet(_annotationStorage,this).has(editor.id)){_classPrivateFieldGet(_annotationStorage,this).setValue(editor.id,editor);}}},{key:"blur",value:function blur(){this.isShiftKeyDown=false;if(_classPrivateFieldGet(_highlightWhenShiftUp,this)){_classPrivateFieldSet(_highlightWhenShiftUp,this,false);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_onSelectEnd).call(this,"main_toolbar");}if(!this.hasSelection){return;}var _document=document,activeElement=_document.activeElement;var _iterator13=_createForOfIteratorHelper(_classPrivateFieldGet(_selectedEditors,this)),_step13;try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var editor=_step13.value;if(editor.div.contains(activeElement)){_classPrivateFieldSet(_lastActiveElement,this,[editor,activeElement]);editor._focusEventsAllowed=false;break;}}}catch(err){_iterator13.e(err);}finally{_iterator13.f();}}},{key:"focus",value:function focus(){if(!_classPrivateFieldGet(_lastActiveElement,this)){return;}var _classPrivateFieldGet17=_classPrivateFieldGet(_lastActiveElement,this),_classPrivateFieldGet18=_slicedToArray(_classPrivateFieldGet17,2),lastEditor=_classPrivateFieldGet18[0],lastActiveElement=_classPrivateFieldGet18[1];_classPrivateFieldSet(_lastActiveElement,this,null);lastActiveElement.addEventListener("focusin",function(){lastEditor._focusEventsAllowed=true;},{once:true,signal:this._signal});lastActiveElement.focus();}},{key:"addEditListeners",value:function addEditListeners(){_assertClassBrand(_AnnotationEditorUIManager_brand,this,_addKeyboardManager).call(this);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_addCopyPasteListeners).call(this);}},{key:"removeEditListeners",value:function removeEditListeners(){_assertClassBrand(_AnnotationEditorUIManager_brand,this,_removeKeyboardManager).call(this);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_removeCopyPasteListeners).call(this);}},{key:"dragOver",value:function dragOver(event){var _iterator14=_createForOfIteratorHelper(event.dataTransfer.items),_step14;try{for(_iterator14.s();!(_step14=_iterator14.n()).done;){var type=_step14.value.type;var _iterator15=_createForOfIteratorHelper(_classPrivateFieldGet(_editorTypes,this)),_step15;try{for(_iterator15.s();!(_step15=_iterator15.n()).done;){var editorType=_step15.value;if(editorType.isHandlingMimeForPasting(type)){event.dataTransfer.dropEffect="copy";event.preventDefault();return;}}}catch(err){_iterator15.e(err);}finally{_iterator15.f();}}}catch(err){_iterator14.e(err);}finally{_iterator14.f();}}},{key:"drop",value:function drop(event){var _iterator16=_createForOfIteratorHelper(event.dataTransfer.items),_step16;try{for(_iterator16.s();!(_step16=_iterator16.n()).done;){var item=_step16.value;var _iterator17=_createForOfIteratorHelper(_classPrivateFieldGet(_editorTypes,this)),_step17;try{for(_iterator17.s();!(_step17=_iterator17.n()).done;){var editorType=_step17.value;if(editorType.isHandlingMimeForPasting(item.type)){editorType.paste(item,this.currentLayer);event.preventDefault();return;}}}catch(err){_iterator17.e(err);}finally{_iterator17.f();}}}catch(err){_iterator16.e(err);}finally{_iterator16.f();}}},{key:"copy",value:function copy(event){var _classPrivateFieldGet19;event.preventDefault();(_classPrivateFieldGet19=_classPrivateFieldGet(_activeEditor,this))===null||_classPrivateFieldGet19===void 0||_classPrivateFieldGet19.commitOrRemove();if(!this.hasSelection){return;}var editors=[];var _iterator18=_createForOfIteratorHelper(_classPrivateFieldGet(_selectedEditors,this)),_step18;try{for(_iterator18.s();!(_step18=_iterator18.n()).done;){var editor=_step18.value;var serialized=editor.serialize(true);if(serialized){editors.push(serialized);}}}catch(err){_iterator18.e(err);}finally{_iterator18.f();}if(editors.length===0){return;}event.clipboardData.setData("application/pdfjs",JSON.stringify(editors));}},{key:"cut",value:function cut(event){this.copy(event);this["delete"]();}},{key:"paste",value:function(){var _paste=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(event){var _this9=this;var clipboardData,_iterator19,_step19,item,_iterator21,_step21,editorType,data,layer,newEditors,_iterator20,_step20,editor,deserializedEditor,cmd,undo;return _regeneratorRuntime().wrap(function _callee7$(_context7){while(1)switch(_context7.prev=_context7.next){case 0:event.preventDefault();clipboardData=event.clipboardData;_iterator19=_createForOfIteratorHelper(clipboardData.items);_context7.prev=3;_iterator19.s();case 5:if((_step19=_iterator19.n()).done){_context7.next=27;break;}item=_step19.value;_iterator21=_createForOfIteratorHelper(_classPrivateFieldGet(_editorTypes,this));_context7.prev=8;_iterator21.s();case 10:if((_step21=_iterator21.n()).done){_context7.next=17;break;}editorType=_step21.value;if(!editorType.isHandlingMimeForPasting(item.type)){_context7.next=15;break;}editorType.paste(item,this.currentLayer);return _context7.abrupt("return");case 15:_context7.next=10;break;case 17:_context7.next=22;break;case 19:_context7.prev=19;_context7.t0=_context7["catch"](8);_iterator21.e(_context7.t0);case 22:_context7.prev=22;_iterator21.f();return _context7.finish(22);case 25:_context7.next=5;break;case 27:_context7.next=32;break;case 29:_context7.prev=29;_context7.t1=_context7["catch"](3);_iterator19.e(_context7.t1);case 32:_context7.prev=32;_iterator19.f();return _context7.finish(32);case 35:data=clipboardData.getData("application/pdfjs");if(data){_context7.next=38;break;}return _context7.abrupt("return");case 38:_context7.prev=38;data=JSON.parse(data);_context7.next=46;break;case 42:_context7.prev=42;_context7.t2=_context7["catch"](38);warn("paste: \\"".concat(_context7.t2.message,"\\"."));return _context7.abrupt("return");case 46:if(Array.isArray(data)){_context7.next=48;break;}return _context7.abrupt("return");case 48:this.unselectAll();layer=this.currentLayer;_context7.prev=50;newEditors=[];_iterator20=_createForOfIteratorHelper(data);_context7.prev=53;_iterator20.s();case 55:if((_step20=_iterator20.n()).done){_context7.next=65;break;}editor=_step20.value;_context7.next=59;return layer.deserialize(editor);case 59:deserializedEditor=_context7.sent;if(deserializedEditor){_context7.next=62;break;}return _context7.abrupt("return");case 62:newEditors.push(deserializedEditor);case 63:_context7.next=55;break;case 65:_context7.next=70;break;case 67:_context7.prev=67;_context7.t3=_context7["catch"](53);_iterator20.e(_context7.t3);case 70:_context7.prev=70;_iterator20.f();return _context7.finish(70);case 73:cmd=function cmd(){for(var _i2=0,_newEditors=newEditors;_i2<_newEditors.length;_i2++){var editor=_newEditors[_i2];_assertClassBrand(_AnnotationEditorUIManager_brand,_this9,_addEditorToLayer).call(_this9,editor);}_assertClassBrand(_AnnotationEditorUIManager_brand,_this9,_selectEditors).call(_this9,newEditors);};undo=function undo(){for(var _i3=0,_newEditors2=newEditors;_i3<_newEditors2.length;_i3++){var editor=_newEditors2[_i3];editor.remove();}};this.addCommands({cmd:cmd,undo:undo,mustExec:true});_context7.next=81;break;case 78:_context7.prev=78;_context7.t4=_context7["catch"](50);warn("paste: \\"".concat(_context7.t4.message,"\\"."));case 81:case"end":return _context7.stop();}},_callee7,this,[[3,29,32,35],[8,19,22,25],[38,42],[50,78],[53,67,70,73]]);}));function paste(_x10){return _paste.apply(this,arguments);}return paste;}()},{key:"keydown",value:function keydown(event){if(!this.isShiftKeyDown&&event.key==="Shift"){this.isShiftKeyDown=true;}if(_classPrivateFieldGet(_mode,this)!==_AnnotationEditorType.NONE&&!this.isEditorHandlingKeyboard){_AnnotationEditorUIManager._keyboardManager.exec(this,event);}}},{key:"keyup",value:function keyup(event){if(this.isShiftKeyDown&&event.key==="Shift"){this.isShiftKeyDown=false;if(_classPrivateFieldGet(_highlightWhenShiftUp,this)){_classPrivateFieldSet(_highlightWhenShiftUp,this,false);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_onSelectEnd).call(this,"main_toolbar");}}}},{key:"onEditingAction",value:function onEditingAction(_ref10){var name=_ref10.name;switch(name){case"undo":case"redo":case"delete":case"selectAll":this[name]();break;case"highlightSelection":this.highlightSelection("context_menu");break;}}},{key:"setEditingState",value:function setEditingState(isEditing){if(isEditing){_assertClassBrand(_AnnotationEditorUIManager_brand,this,_addFocusManager).call(this);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_addCopyPasteListeners).call(this);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{isEditing:_classPrivateFieldGet(_mode,this)!==_AnnotationEditorType.NONE,isEmpty:_assertClassBrand(_AnnotationEditorUIManager_brand,this,_isEmpty).call(this),hasSomethingToUndo:_classPrivateFieldGet(_commandManager,this).hasSomethingToUndo(),hasSomethingToRedo:_classPrivateFieldGet(_commandManager,this).hasSomethingToRedo(),hasSelectedEditor:false});}else{_assertClassBrand(_AnnotationEditorUIManager_brand,this,_removeFocusManager).call(this);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_removeCopyPasteListeners).call(this);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{isEditing:false});this.disableUserSelect(false);}}},{key:"registerEditorTypes",value:function registerEditorTypes(types){if(_classPrivateFieldGet(_editorTypes,this)){return;}_classPrivateFieldSet(_editorTypes,this,types);var _iterator22=_createForOfIteratorHelper(_classPrivateFieldGet(_editorTypes,this)),_step22;try{for(_iterator22.s();!(_step22=_iterator22.n()).done;){var editorType=_step22.value;_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateUI).call(this,editorType.defaultPropertiesToUpdate);}}catch(err){_iterator22.e(err);}finally{_iterator22.f();}}},{key:"getId",value:function getId(){return _classPrivateFieldGet(_idManager,this).id;}},{key:"currentLayer",get:function get(){return _classPrivateFieldGet(_allLayers,this).get(_classPrivateFieldGet(_currentPageIndex,this));}},{key:"getLayer",value:function getLayer(pageIndex){return _classPrivateFieldGet(_allLayers,this).get(pageIndex);}},{key:"currentPageIndex",get:function get(){return _classPrivateFieldGet(_currentPageIndex,this);}},{key:"addLayer",value:function addLayer(layer){_classPrivateFieldGet(_allLayers,this).set(layer.pageIndex,layer);if(_classPrivateFieldGet(_isEnabled,this)){layer.enable();}else{layer.disable();}}},{key:"removeLayer",value:function removeLayer(layer){_classPrivateFieldGet(_allLayers,this)["delete"](layer.pageIndex);}},{key:"updateMode",value:function(){var _updateMode=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(mode){var editId,isFromKeyboard,_this$_editorUndoBar2,_classPrivateFieldGet20,_iterator23,_step23,layer,_iterator24,_step24,editor,_args8=arguments;return _regeneratorRuntime().wrap(function _callee8$(_context8){while(1)switch(_context8.prev=_context8.next){case 0:editId=_args8.length>1&&_args8[1]!==undefined?_args8[1]:null;isFromKeyboard=_args8.length>2&&_args8[2]!==undefined?_args8[2]:false;if(!(_classPrivateFieldGet(_mode,this)===mode)){_context8.next=4;break;}return _context8.abrupt("return");case 4:if(!_classPrivateFieldGet(_updateModeCapability,this)){_context8.next=9;break;}_context8.next=7;return _classPrivateFieldGet(_updateModeCapability,this).promise;case 7:if(_classPrivateFieldGet(_updateModeCapability,this)){_context8.next=9;break;}return _context8.abrupt("return");case 9:_classPrivateFieldSet(_updateModeCapability,this,Promise.withResolvers());_classPrivateFieldSet(_mode,this,mode);if(!(mode===_AnnotationEditorType.NONE)){_context8.next=17;break;}this.setEditingState(false);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_disableAll).call(this);(_this$_editorUndoBar2=this._editorUndoBar)===null||_this$_editorUndoBar2===void 0||_this$_editorUndoBar2.hide();_classPrivateFieldGet(_updateModeCapability,this).resolve();return _context8.abrupt("return");case 17:if(!(mode===_AnnotationEditorType.SIGNATURE)){_context8.next=20;break;}_context8.next=20;return(_classPrivateFieldGet20=_classPrivateFieldGet(_signatureManager,this))===null||_classPrivateFieldGet20===void 0?void 0:_classPrivateFieldGet20.loadSignatures();case 20:this.setEditingState(true);_context8.next=23;return _assertClassBrand(_AnnotationEditorUIManager_brand,this,_enableAll).call(this);case 23:this.unselectAll();_iterator23=_createForOfIteratorHelper(_classPrivateFieldGet(_allLayers,this).values());try{for(_iterator23.s();!(_step23=_iterator23.n()).done;){layer=_step23.value;layer.updateMode(mode);}}catch(err){_iterator23.e(err);}finally{_iterator23.f();}if(editId){_context8.next=30;break;}if(isFromKeyboard){this.addNewEditorFromKeyboard();}_classPrivateFieldGet(_updateModeCapability,this).resolve();return _context8.abrupt("return");case 30:_iterator24=_createForOfIteratorHelper(_classPrivateFieldGet(_allEditors,this).values());try{for(_iterator24.s();!(_step24=_iterator24.n()).done;){editor=_step24.value;if(editor.annotationElementId===editId){this.setSelected(editor);editor.enterInEditMode();}else{editor.unselect();}}}catch(err){_iterator24.e(err);}finally{_iterator24.f();}_classPrivateFieldGet(_updateModeCapability,this).resolve();case 33:case"end":return _context8.stop();}},_callee8,this);}));function updateMode(_x11){return _updateMode.apply(this,arguments);}return updateMode;}()},{key:"addNewEditorFromKeyboard",value:function addNewEditorFromKeyboard(){if(this.currentLayer.canCreateNewEmptyEditor()){this.currentLayer.addNewEditor();}}},{key:"updateToolbar",value:function updateToolbar(mode){if(mode===_classPrivateFieldGet(_mode,this)){return;}this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:mode});}},{key:"updateParams",value:function updateParams(type,value){var _classPrivateFieldGet21;if(!_classPrivateFieldGet(_editorTypes,this)){return;}switch(type){case _AnnotationEditorParamsType.CREATE:this.currentLayer.addNewEditor(value);return;case _AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:(_classPrivateFieldGet21=_classPrivateFieldGet(_mainHighlightColorPicker,this))===null||_classPrivateFieldGet21===void 0||_classPrivateFieldGet21.updateColor(value);break;case _AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}});(_classPrivateFieldGet(_showAllStates,this)||_classPrivateFieldSet(_showAllStates,this,new Map())).set(type,value);this.showAllEditors("highlight",value);break;}var _iterator25=_createForOfIteratorHelper(_classPrivateFieldGet(_selectedEditors,this)),_step25;try{for(_iterator25.s();!(_step25=_iterator25.n()).done;){var editor=_step25.value;editor.updateParams(type,value);}}catch(err){_iterator25.e(err);}finally{_iterator25.f();}var _iterator26=_createForOfIteratorHelper(_classPrivateFieldGet(_editorTypes,this)),_step26;try{for(_iterator26.s();!(_step26=_iterator26.n()).done;){var editorType=_step26.value;editorType.updateDefaultParams(type,value);}}catch(err){_iterator26.e(err);}finally{_iterator26.f();}}},{key:"showAllEditors",value:function showAllEditors(type,visible){var _classPrivateFieldGet22,_classPrivateFieldGet23;var updateButton=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var _iterator27=_createForOfIteratorHelper(_classPrivateFieldGet(_allEditors,this).values()),_step27;try{for(_iterator27.s();!(_step27=_iterator27.n()).done;){var editor=_step27.value;if(editor.editorType===type){editor.show(visible);}}}catch(err){_iterator27.e(err);}finally{_iterator27.f();}var state=(_classPrivateFieldGet22=(_classPrivateFieldGet23=_classPrivateFieldGet(_showAllStates,this))===null||_classPrivateFieldGet23===void 0?void 0:_classPrivateFieldGet23.get(_AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL))!==null&&_classPrivateFieldGet22!==void 0?_classPrivateFieldGet22:true;if(state!==visible){_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateUI).call(this,[[_AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL,visible]]);}}},{key:"enableWaiting",value:function enableWaiting(){var mustWait=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(_classPrivateFieldGet(_isWaiting,this)===mustWait){return;}_classPrivateFieldSet(_isWaiting,this,mustWait);var _iterator28=_createForOfIteratorHelper(_classPrivateFieldGet(_allLayers,this).values()),_step28;try{for(_iterator28.s();!(_step28=_iterator28.n()).done;){var layer=_step28.value;if(mustWait){layer.disableClick();}else{layer.enableClick();}layer.div.classList.toggle("waiting",mustWait);}}catch(err){_iterator28.e(err);}finally{_iterator28.f();}}},{key:"getEditors",value:function getEditors(pageIndex){var editors=[];var _iterator29=_createForOfIteratorHelper(_classPrivateFieldGet(_allEditors,this).values()),_step29;try{for(_iterator29.s();!(_step29=_iterator29.n()).done;){var editor=_step29.value;if(editor.pageIndex===pageIndex){editors.push(editor);}}}catch(err){_iterator29.e(err);}finally{_iterator29.f();}return editors;}},{key:"getEditor",value:function getEditor(id){return _classPrivateFieldGet(_allEditors,this).get(id);}},{key:"addEditor",value:function addEditor(editor){_classPrivateFieldGet(_allEditors,this).set(editor.id,editor);}},{key:"removeEditor",value:function removeEditor(editor){var _this10=this;if(editor.div.contains(document.activeElement)){if(_classPrivateFieldGet(_focusMainContainerTimeoutId,this)){clearTimeout(_classPrivateFieldGet(_focusMainContainerTimeoutId,this));}_classPrivateFieldSet(_focusMainContainerTimeoutId,this,setTimeout(function(){_this10.focusMainContainer();_classPrivateFieldSet(_focusMainContainerTimeoutId,_this10,null);},0));}_classPrivateFieldGet(_allEditors,this)["delete"](editor.id);if(editor.annotationElementId){var _classPrivateFieldGet24;(_classPrivateFieldGet24=_classPrivateFieldGet(_missingCanvases,this))===null||_classPrivateFieldGet24===void 0||_classPrivateFieldGet24["delete"](editor.annotationElementId);}this.unselect(editor);if(!editor.annotationElementId||!_classPrivateFieldGet(_deletedAnnotationsElementIds,this).has(editor.annotationElementId)){var _classPrivateFieldGet25;(_classPrivateFieldGet25=_classPrivateFieldGet(_annotationStorage,this))===null||_classPrivateFieldGet25===void 0||_classPrivateFieldGet25.remove(editor.id);}}},{key:"addDeletedAnnotationElement",value:function addDeletedAnnotationElement(editor){_classPrivateFieldGet(_deletedAnnotationsElementIds,this).add(editor.annotationElementId);this.addChangedExistingAnnotation(editor);editor.deleted=true;}},{key:"isDeletedAnnotationElement",value:function isDeletedAnnotationElement(annotationElementId){return _classPrivateFieldGet(_deletedAnnotationsElementIds,this).has(annotationElementId);}},{key:"removeDeletedAnnotationElement",value:function removeDeletedAnnotationElement(editor){_classPrivateFieldGet(_deletedAnnotationsElementIds,this)["delete"](editor.annotationElementId);this.removeChangedExistingAnnotation(editor);editor.deleted=false;}},{key:"setActiveEditor",value:function setActiveEditor(editor){if(_classPrivateFieldGet(_activeEditor,this)===editor){return;}_classPrivateFieldSet(_activeEditor,this,editor);if(editor){_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateUI).call(this,editor.propertiesToUpdate);}}},{key:"updateUI",value:function updateUI(editor){if(_classPrivateGetter(_AnnotationEditorUIManager_brand,this,_get_lastSelectedEditor)===editor){_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateUI).call(this,editor.propertiesToUpdate);}}},{key:"updateUIForDefaultProperties",value:function updateUIForDefaultProperties(editorType){_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateUI).call(this,editorType.defaultPropertiesToUpdate);}},{key:"toggleSelected",value:function toggleSelected(editor){if(_classPrivateFieldGet(_selectedEditors,this).has(editor)){_classPrivateFieldGet(_selectedEditors,this)["delete"](editor);editor.unselect();_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSelectedEditor:this.hasSelection});return;}_classPrivateFieldGet(_selectedEditors,this).add(editor);editor.select();_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateUI).call(this,editor.propertiesToUpdate);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSelectedEditor:true});}},{key:"setSelected",value:function setSelected(editor){var _classPrivateFieldGet26;(_classPrivateFieldGet26=_classPrivateFieldGet(_currentDrawingSession,this))===null||_classPrivateFieldGet26===void 0||_classPrivateFieldGet26.commitOrRemove();var _iterator30=_createForOfIteratorHelper(_classPrivateFieldGet(_selectedEditors,this)),_step30;try{for(_iterator30.s();!(_step30=_iterator30.n()).done;){var ed=_step30.value;if(ed!==editor){ed.unselect();}}}catch(err){_iterator30.e(err);}finally{_iterator30.f();}_classPrivateFieldGet(_selectedEditors,this).clear();_classPrivateFieldGet(_selectedEditors,this).add(editor);editor.select();_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateUI).call(this,editor.propertiesToUpdate);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSelectedEditor:true});}},{key:"isSelected",value:function isSelected(editor){return _classPrivateFieldGet(_selectedEditors,this).has(editor);}},{key:"firstSelectedEditor",get:function get(){return _classPrivateFieldGet(_selectedEditors,this).values().next().value;}},{key:"unselect",value:function unselect(editor){editor.unselect();_classPrivateFieldGet(_selectedEditors,this)["delete"](editor);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSelectedEditor:this.hasSelection});}},{key:"hasSelection",get:function get(){return _classPrivateFieldGet(_selectedEditors,this).size!==0;}},{key:"isEnterHandled",get:function get(){return _classPrivateFieldGet(_selectedEditors,this).size===1&&this.firstSelectedEditor.isEnterHandled;}},{key:"undo",value:function undo(){var _this$_editorUndoBar3;_classPrivateFieldGet(_commandManager,this).undo();_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSomethingToUndo:_classPrivateFieldGet(_commandManager,this).hasSomethingToUndo(),hasSomethingToRedo:true,isEmpty:_assertClassBrand(_AnnotationEditorUIManager_brand,this,_isEmpty).call(this)});(_this$_editorUndoBar3=this._editorUndoBar)===null||_this$_editorUndoBar3===void 0||_this$_editorUndoBar3.hide();}},{key:"redo",value:function redo(){_classPrivateFieldGet(_commandManager,this).redo();_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSomethingToUndo:true,hasSomethingToRedo:_classPrivateFieldGet(_commandManager,this).hasSomethingToRedo(),isEmpty:_assertClassBrand(_AnnotationEditorUIManager_brand,this,_isEmpty).call(this)});}},{key:"addCommands",value:function addCommands(params){_classPrivateFieldGet(_commandManager,this).add(params);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSomethingToUndo:true,hasSomethingToRedo:false,isEmpty:_assertClassBrand(_AnnotationEditorUIManager_brand,this,_isEmpty).call(this)});}},{key:"cleanUndoStack",value:function cleanUndoStack(type){_classPrivateFieldGet(_commandManager,this).cleanType(type);}},{key:"delete",value:function _delete(){var _this$currentLayer,_this11=this;this.commitOrRemove();var drawingEditor=(_this$currentLayer=this.currentLayer)===null||_this$currentLayer===void 0?void 0:_this$currentLayer.endDrawingSession(true);if(!this.hasSelection&&!drawingEditor){return;}var editors=drawingEditor?[drawingEditor]:_toConsumableArray(_classPrivateFieldGet(_selectedEditors,this));var cmd=function cmd(){var _this11$_editorUndoBa;(_this11$_editorUndoBa=_this11._editorUndoBar)===null||_this11$_editorUndoBa===void 0||_this11$_editorUndoBa.show(undo,editors.length===1?editors[0].editorType:editors.length);var _iterator31=_createForOfIteratorHelper(editors),_step31;try{for(_iterator31.s();!(_step31=_iterator31.n()).done;){var editor=_step31.value;editor.remove();}}catch(err){_iterator31.e(err);}finally{_iterator31.f();}};var undo=function undo(){var _iterator32=_createForOfIteratorHelper(editors),_step32;try{for(_iterator32.s();!(_step32=_iterator32.n()).done;){var editor=_step32.value;_assertClassBrand(_AnnotationEditorUIManager_brand,_this11,_addEditorToLayer).call(_this11,editor);}}catch(err){_iterator32.e(err);}finally{_iterator32.f();}};this.addCommands({cmd:cmd,undo:undo,mustExec:true});}},{key:"commitOrRemove",value:function commitOrRemove(){var _classPrivateFieldGet27;(_classPrivateFieldGet27=_classPrivateFieldGet(_activeEditor,this))===null||_classPrivateFieldGet27===void 0||_classPrivateFieldGet27.commitOrRemove();}},{key:"hasSomethingToControl",value:function hasSomethingToControl(){return _classPrivateFieldGet(_activeEditor,this)||this.hasSelection;}},{key:"selectAll",value:function selectAll(){var _iterator33=_createForOfIteratorHelper(_classPrivateFieldGet(_selectedEditors,this)),_step33;try{for(_iterator33.s();!(_step33=_iterator33.n()).done;){var editor=_step33.value;editor.commit();}}catch(err){_iterator33.e(err);}finally{_iterator33.f();}_assertClassBrand(_AnnotationEditorUIManager_brand,this,_selectEditors).call(this,_classPrivateFieldGet(_allEditors,this).values());}},{key:"unselectAll",value:function unselectAll(){var _classPrivateFieldGet28;if(_classPrivateFieldGet(_activeEditor,this)){_classPrivateFieldGet(_activeEditor,this).commitOrRemove();if(_classPrivateFieldGet(_mode,this)!==_AnnotationEditorType.NONE){return;}}if((_classPrivateFieldGet28=_classPrivateFieldGet(_currentDrawingSession,this))!==null&&_classPrivateFieldGet28!==void 0&&_classPrivateFieldGet28.commitOrRemove()){return;}if(!this.hasSelection){return;}var _iterator34=_createForOfIteratorHelper(_classPrivateFieldGet(_selectedEditors,this)),_step34;try{for(_iterator34.s();!(_step34=_iterator34.n()).done;){var editor=_step34.value;editor.unselect();}}catch(err){_iterator34.e(err);}finally{_iterator34.f();}_classPrivateFieldGet(_selectedEditors,this).clear();_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSelectedEditor:false});}},{key:"translateSelectedEditors",value:function translateSelectedEditors(x,y){var _this12=this;var noCommit=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(!noCommit){this.commitOrRemove();}if(!this.hasSelection){return;}_classPrivateFieldGet(_translation,this)[0]+=x;_classPrivateFieldGet(_translation,this)[1]+=y;var _classPrivateFieldGet29=_classPrivateFieldGet(_translation,this),_classPrivateFieldGet30=_slicedToArray(_classPrivateFieldGet29,2),totalX=_classPrivateFieldGet30[0],totalY=_classPrivateFieldGet30[1];var editors=_toConsumableArray(_classPrivateFieldGet(_selectedEditors,this));var TIME_TO_WAIT=1000;if(_classPrivateFieldGet(_translationTimeoutId,this)){clearTimeout(_classPrivateFieldGet(_translationTimeoutId,this));}_classPrivateFieldSet(_translationTimeoutId,this,setTimeout(function(){_classPrivateFieldSet(_translationTimeoutId,_this12,null);_classPrivateFieldGet(_translation,_this12)[0]=_classPrivateFieldGet(_translation,_this12)[1]=0;_this12.addCommands({cmd:function cmd(){var _iterator35=_createForOfIteratorHelper(editors),_step35;try{for(_iterator35.s();!(_step35=_iterator35.n()).done;){var editor=_step35.value;if(_classPrivateFieldGet(_allEditors,_this12).has(editor.id)){editor.translateInPage(totalX,totalY);editor.translationDone();}}}catch(err){_iterator35.e(err);}finally{_iterator35.f();}},undo:function undo(){var _iterator36=_createForOfIteratorHelper(editors),_step36;try{for(_iterator36.s();!(_step36=_iterator36.n()).done;){var editor=_step36.value;if(_classPrivateFieldGet(_allEditors,_this12).has(editor.id)){editor.translateInPage(-totalX,-totalY);editor.translationDone();}}}catch(err){_iterator36.e(err);}finally{_iterator36.f();}},mustExec:false});},TIME_TO_WAIT));var _iterator37=_createForOfIteratorHelper(editors),_step37;try{for(_iterator37.s();!(_step37=_iterator37.n()).done;){var editor=_step37.value;editor.translateInPage(x,y);editor.translationDone();}}catch(err){_iterator37.e(err);}finally{_iterator37.f();}}},{key:"setUpDragSession",value:function setUpDragSession(){if(!this.hasSelection){return;}this.disableUserSelect(true);_classPrivateFieldSet(_draggingEditors,this,new Map());var _iterator38=_createForOfIteratorHelper(_classPrivateFieldGet(_selectedEditors,this)),_step38;try{for(_iterator38.s();!(_step38=_iterator38.n()).done;){var editor=_step38.value;_classPrivateFieldGet(_draggingEditors,this).set(editor,{savedX:editor.x,savedY:editor.y,savedPageIndex:editor.pageIndex,newX:0,newY:0,newPageIndex:-1});}}catch(err){_iterator38.e(err);}finally{_iterator38.f();}}},{key:"endDragSession",value:function endDragSession(){var _this13=this;if(!_classPrivateFieldGet(_draggingEditors,this)){return false;}this.disableUserSelect(false);var map=_classPrivateFieldGet(_draggingEditors,this);_classPrivateFieldSet(_draggingEditors,this,null);var mustBeAddedInUndoStack=false;var _iterator39=_createForOfIteratorHelper(map),_step39;try{for(_iterator39.s();!(_step39=_iterator39.n()).done;){var _step39$value=_slicedToArray(_step39.value,2),_step39$value$=_step39$value[0],x=_step39$value$.x,y=_step39$value$.y,pageIndex=_step39$value$.pageIndex,value=_step39$value[1];value.newX=x;value.newY=y;value.newPageIndex=pageIndex;mustBeAddedInUndoStack||(mustBeAddedInUndoStack=x!==value.savedX||y!==value.savedY||pageIndex!==value.savedPageIndex);}}catch(err){_iterator39.e(err);}finally{_iterator39.f();}if(!mustBeAddedInUndoStack){return false;}var move=function move(editor,x,y,pageIndex){if(_classPrivateFieldGet(_allEditors,_this13).has(editor.id)){var parent=_classPrivateFieldGet(_allLayers,_this13).get(pageIndex);if(parent){editor._setParentAndPosition(parent,x,y);}else{editor.pageIndex=pageIndex;editor.x=x;editor.y=y;}}};this.addCommands({cmd:function cmd(){var _iterator40=_createForOfIteratorHelper(map),_step40;try{for(_iterator40.s();!(_step40=_iterator40.n()).done;){var _step40$value=_slicedToArray(_step40.value,2),editor=_step40$value[0],_step40$value$=_step40$value[1],newX=_step40$value$.newX,newY=_step40$value$.newY,newPageIndex=_step40$value$.newPageIndex;move(editor,newX,newY,newPageIndex);}}catch(err){_iterator40.e(err);}finally{_iterator40.f();}},undo:function undo(){var _iterator41=_createForOfIteratorHelper(map),_step41;try{for(_iterator41.s();!(_step41=_iterator41.n()).done;){var _step41$value=_slicedToArray(_step41.value,2),editor=_step41$value[0],_step41$value$=_step41$value[1],savedX=_step41$value$.savedX,savedY=_step41$value$.savedY,savedPageIndex=_step41$value$.savedPageIndex;move(editor,savedX,savedY,savedPageIndex);}}catch(err){_iterator41.e(err);}finally{_iterator41.f();}},mustExec:true});return true;}},{key:"dragSelectedEditors",value:function dragSelectedEditors(tx,ty){if(!_classPrivateFieldGet(_draggingEditors,this)){return;}var _iterator42=_createForOfIteratorHelper(_classPrivateFieldGet(_draggingEditors,this).keys()),_step42;try{for(_iterator42.s();!(_step42=_iterator42.n()).done;){var editor=_step42.value;editor.drag(tx,ty);}}catch(err){_iterator42.e(err);}finally{_iterator42.f();}}},{key:"rebuild",value:function rebuild(editor){if(editor.parent===null){var parent=this.getLayer(editor.pageIndex);if(parent){parent.changeParent(editor);parent.addOrRebuild(editor);}else{this.addEditor(editor);this.addToAnnotationStorage(editor);editor.rebuild();}}else{editor.parent.addOrRebuild(editor);}}},{key:"isEditorHandlingKeyboard",get:function get(){var _this$getActive;return((_this$getActive=this.getActive())===null||_this$getActive===void 0?void 0:_this$getActive.shouldGetKeyboardEvents())||_classPrivateFieldGet(_selectedEditors,this).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents();}},{key:"isActive",value:function isActive(editor){return _classPrivateFieldGet(_activeEditor,this)===editor;}},{key:"getActive",value:function getActive(){return _classPrivateFieldGet(_activeEditor,this);}},{key:"getMode",value:function getMode(){return _classPrivateFieldGet(_mode,this);}},{key:"imageManager",get:function get(){return _shadow(this,"imageManager",new ImageManager());}},{key:"getSelectionBoxes",value:function getSelectionBoxes(textLayer){if(!textLayer){return null;}var selection=document.getSelection();for(var i=0,ii=selection.rangeCount;i<ii;i++){if(!textLayer.contains(selection.getRangeAt(i).commonAncestorContainer)){return null;}}var _textLayer$getBoundin=textLayer.getBoundingClientRect(),layerX=_textLayer$getBoundin.x,layerY=_textLayer$getBoundin.y,parentWidth=_textLayer$getBoundin.width,parentHeight=_textLayer$getBoundin.height;var rotator;switch(textLayer.getAttribute("data-main-rotation")){case"90":rotator=function rotator(x,y,w,h){return{x:(y-layerY)/parentHeight,y:1-(x+w-layerX)/parentWidth,width:h/parentHeight,height:w/parentWidth};};break;case"180":rotator=function rotator(x,y,w,h){return{x:1-(x+w-layerX)/parentWidth,y:1-(y+h-layerY)/parentHeight,width:w/parentWidth,height:h/parentHeight};};break;case"270":rotator=function rotator(x,y,w,h){return{x:1-(y+h-layerY)/parentHeight,y:(x-layerX)/parentWidth,width:h/parentHeight,height:w/parentWidth};};break;default:rotator=function rotator(x,y,w,h){return{x:(x-layerX)/parentWidth,y:(y-layerY)/parentHeight,width:w/parentWidth,height:h/parentHeight};};break;}var boxes=[];for(var _i4=0,_ii=selection.rangeCount;_i4<_ii;_i4++){var range=selection.getRangeAt(_i4);if(range.collapsed){continue;}var _iterator43=_createForOfIteratorHelper(range.getClientRects()),_step43;try{for(_iterator43.s();!(_step43=_iterator43.n()).done;){var _step43$value=_step43.value,x=_step43$value.x,y=_step43$value.y,width=_step43$value.width,height=_step43$value.height;if(width===0||height===0){continue;}boxes.push(rotator(x,y,width,height));}}catch(err){_iterator43.e(err);}finally{_iterator43.f();}}return boxes.length===0?null:boxes;}},{key:"addChangedExistingAnnotation",value:function addChangedExistingAnnotation(_ref11){var annotationElementId=_ref11.annotationElementId,id=_ref11.id;(_classPrivateFieldGet(_changedExistingAnnotations,this)||_classPrivateFieldSet(_changedExistingAnnotations,this,new Map())).set(annotationElementId,id);}},{key:"removeChangedExistingAnnotation",value:function removeChangedExistingAnnotation(_ref12){var _classPrivateFieldGet31;var annotationElementId=_ref12.annotationElementId;(_classPrivateFieldGet31=_classPrivateFieldGet(_changedExistingAnnotations,this))===null||_classPrivateFieldGet31===void 0||_classPrivateFieldGet31["delete"](annotationElementId);}},{key:"renderAnnotationElement",value:function renderAnnotationElement(annotation){var _classPrivateFieldGet32;var editorId=(_classPrivateFieldGet32=_classPrivateFieldGet(_changedExistingAnnotations,this))===null||_classPrivateFieldGet32===void 0?void 0:_classPrivateFieldGet32.get(annotation.data.id);if(!editorId){return;}var editor=_classPrivateFieldGet(_annotationStorage,this).getRawValue(editorId);if(!editor){return;}if(_classPrivateFieldGet(_mode,this)===_AnnotationEditorType.NONE&&!editor.hasBeenModified){return;}editor.renderAnnotationElement(annotation);}},{key:"setMissingCanvas",value:function setMissingCanvas(annotationId,annotationElementId,canvas){var _classPrivateFieldGet33;var editor=(_classPrivateFieldGet33=_classPrivateFieldGet(_missingCanvases,this))===null||_classPrivateFieldGet33===void 0?void 0:_classPrivateFieldGet33.get(annotationId);if(!editor){return;}editor.setCanvas(annotationElementId,canvas);_classPrivateFieldGet(_missingCanvases,this)["delete"](annotationId);}},{key:"addMissingCanvas",value:function addMissingCanvas(annotationId,editor){(_classPrivateFieldGet(_missingCanvases,this)||_classPrivateFieldSet(_missingCanvases,this,new Map())).set(annotationId,editor);}}],[{key:"_keyboardManager",get:function get(){var proto=_AnnotationEditorUIManager.prototype;var arrowChecker=function arrowChecker(self){return _classPrivateFieldGet(_container,self).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&self.hasSomethingToControl();};var textInputChecker=function textInputChecker(_self,_ref13){var el=_ref13.target;if(el instanceof HTMLInputElement){var type=el.type;return type!=="text"&&type!=="number";}return true;};var small=this.TRANSLATE_SMALL;var big=this.TRANSLATE_BIG;return _shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+a","mac+meta+a"],proto.selectAll,{checker:textInputChecker}],[["ctrl+z","mac+meta+z"],proto.undo,{checker:textInputChecker}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],proto.redo,{checker:textInputChecker}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],proto["delete"],{checker:textInputChecker}],[["Enter","mac+Enter"],proto.addNewEditorFromKeyboard,{checker:function checker(self,_ref14){var el=_ref14.target;return!(el instanceof HTMLButtonElement)&&_classPrivateFieldGet(_container,self).contains(el)&&!self.isEnterHandled;}}],[[" ","mac+ "],proto.addNewEditorFromKeyboard,{checker:function checker(self,_ref15){var el=_ref15.target;return!(el instanceof HTMLButtonElement)&&_classPrivateFieldGet(_container,self).contains(document.activeElement);}}],[["Escape","mac+Escape"],proto.unselectAll],[["ArrowLeft","mac+ArrowLeft"],proto.translateSelectedEditors,{args:[-small,0],checker:arrowChecker}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],proto.translateSelectedEditors,{args:[-big,0],checker:arrowChecker}],[["ArrowRight","mac+ArrowRight"],proto.translateSelectedEditors,{args:[small,0],checker:arrowChecker}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],proto.translateSelectedEditors,{args:[big,0],checker:arrowChecker}],[["ArrowUp","mac+ArrowUp"],proto.translateSelectedEditors,{args:[0,-small],checker:arrowChecker}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],proto.translateSelectedEditors,{args:[0,-big],checker:arrowChecker}],[["ArrowDown","mac+ArrowDown"],proto.translateSelectedEditors,{args:[0,small],checker:arrowChecker}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],proto.translateSelectedEditors,{args:[0,big],checker:arrowChecker}]]));}}]);}();function _getAnchorElementForSelection(_ref135){var anchorNode=_ref135.anchorNode;return anchorNode.nodeType===Node.TEXT_NODE?anchorNode.parentElement:anchorNode;}function _getLayerForTextLayer(textLayer){var currentLayer=this.currentLayer;if(currentLayer.hasTextLayer(textLayer)){return currentLayer;}var _iterator172=_createForOfIteratorHelper(_classPrivateFieldGet(_allLayers,this).values()),_step172;try{for(_iterator172.s();!(_step172=_iterator172.n()).done;){var layer=_step172.value;if(layer.hasTextLayer(textLayer)){return layer;}}}catch(err){_iterator172.e(err);}finally{_iterator172.f();}return null;}function _displayHighlightToolbar(){var selection=document.getSelection();if(!selection||selection.isCollapsed){return;}var anchorElement=_assertClassBrand(_AnnotationEditorUIManager_brand,this,_getAnchorElementForSelection).call(this,selection);var textLayer=anchorElement.closest(".textLayer");var boxes=this.getSelectionBoxes(textLayer);if(!boxes){return;}_classPrivateFieldGet(_highlightToolbar,this)||_classPrivateFieldSet(_highlightToolbar,this,new HighlightToolbar(this));_classPrivateFieldGet(_highlightToolbar,this).show(textLayer,boxes,this.direction==="ltr");}function _selectionChange(){var _classPrivateFieldGet134,_this110=this;var selection=document.getSelection();if(!selection||selection.isCollapsed){if(_classPrivateFieldGet(_selectedTextNode,this)){var _classPrivateFieldGet132;(_classPrivateFieldGet132=_classPrivateFieldGet(_highlightToolbar,this))===null||_classPrivateFieldGet132===void 0||_classPrivateFieldGet132.hide();_classPrivateFieldSet(_selectedTextNode,this,null);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSelectedText:false});}return;}var anchorNode=selection.anchorNode;if(anchorNode===_classPrivateFieldGet(_selectedTextNode,this)){return;}var anchorElement=_assertClassBrand(_AnnotationEditorUIManager_brand,this,_getAnchorElementForSelection).call(this,selection);var textLayer=anchorElement.closest(".textLayer");if(!textLayer){if(_classPrivateFieldGet(_selectedTextNode,this)){var _classPrivateFieldGet133;(_classPrivateFieldGet133=_classPrivateFieldGet(_highlightToolbar,this))===null||_classPrivateFieldGet133===void 0||_classPrivateFieldGet133.hide();_classPrivateFieldSet(_selectedTextNode,this,null);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSelectedText:false});}return;}(_classPrivateFieldGet134=_classPrivateFieldGet(_highlightToolbar,this))===null||_classPrivateFieldGet134===void 0||_classPrivateFieldGet134.hide();_classPrivateFieldSet(_selectedTextNode,this,anchorNode);_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSelectedText:true});if(_classPrivateFieldGet(_mode,this)!==_AnnotationEditorType.HIGHLIGHT&&_classPrivateFieldGet(_mode,this)!==_AnnotationEditorType.NONE){return;}if(_classPrivateFieldGet(_mode,this)===_AnnotationEditorType.HIGHLIGHT){this.showAllEditors("highlight",true,true);}_classPrivateFieldSet(_highlightWhenShiftUp,this,this.isShiftKeyDown);if(!this.isShiftKeyDown){var activeLayer=_classPrivateFieldGet(_mode,this)===_AnnotationEditorType.HIGHLIGHT?_assertClassBrand(_AnnotationEditorUIManager_brand,this,_getLayerForTextLayer).call(this,textLayer):null;activeLayer===null||activeLayer===void 0||activeLayer.toggleDrawing();var ac=new AbortController();var signal=this.combinedSignal(ac);var pointerup=function pointerup(e){if(e.type==="pointerup"&&e.button!==0){return;}ac.abort();activeLayer===null||activeLayer===void 0||activeLayer.toggleDrawing(true);if(e.type==="pointerup"){_assertClassBrand(_AnnotationEditorUIManager_brand,_this110,_onSelectEnd).call(_this110,"main_toolbar");}};window.addEventListener("pointerup",pointerup,{signal:signal});window.addEventListener("blur",pointerup,{signal:signal});}}function _onSelectEnd(){var methodOfCreation=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";if(_classPrivateFieldGet(_mode,this)===_AnnotationEditorType.HIGHLIGHT){this.highlightSelection(methodOfCreation);}else if(_classPrivateFieldGet(_enableHighlightFloatingButton,this)){_assertClassBrand(_AnnotationEditorUIManager_brand,this,_displayHighlightToolbar).call(this);}}function _addSelectionListener(){document.addEventListener("selectionchange",_assertClassBrand(_AnnotationEditorUIManager_brand,this,_selectionChange).bind(this),{signal:this._signal});}function _addFocusManager(){if(_classPrivateFieldGet(_focusManagerAC,this)){return;}_classPrivateFieldSet(_focusManagerAC,this,new AbortController());var signal=this.combinedSignal(_classPrivateFieldGet(_focusManagerAC,this));window.addEventListener("focus",this.focus.bind(this),{signal:signal});window.addEventListener("blur",this.blur.bind(this),{signal:signal});}function _removeFocusManager(){var _classPrivateFieldGet135;(_classPrivateFieldGet135=_classPrivateFieldGet(_focusManagerAC,this))===null||_classPrivateFieldGet135===void 0||_classPrivateFieldGet135.abort();_classPrivateFieldSet(_focusManagerAC,this,null);}function _addKeyboardManager(){if(_classPrivateFieldGet(_keyboardManagerAC,this)){return;}_classPrivateFieldSet(_keyboardManagerAC,this,new AbortController());var signal=this.combinedSignal(_classPrivateFieldGet(_keyboardManagerAC,this));window.addEventListener("keydown",this.keydown.bind(this),{signal:signal});window.addEventListener("keyup",this.keyup.bind(this),{signal:signal});}function _removeKeyboardManager(){var _classPrivateFieldGet136;(_classPrivateFieldGet136=_classPrivateFieldGet(_keyboardManagerAC,this))===null||_classPrivateFieldGet136===void 0||_classPrivateFieldGet136.abort();_classPrivateFieldSet(_keyboardManagerAC,this,null);}function _addCopyPasteListeners(){if(_classPrivateFieldGet(_copyPasteAC,this)){return;}_classPrivateFieldSet(_copyPasteAC,this,new AbortController());var signal=this.combinedSignal(_classPrivateFieldGet(_copyPasteAC,this));document.addEventListener("copy",this.copy.bind(this),{signal:signal});document.addEventListener("cut",this.cut.bind(this),{signal:signal});document.addEventListener("paste",this.paste.bind(this),{signal:signal});}function _removeCopyPasteListeners(){var _classPrivateFieldGet137;(_classPrivateFieldGet137=_classPrivateFieldGet(_copyPasteAC,this))===null||_classPrivateFieldGet137===void 0||_classPrivateFieldGet137.abort();_classPrivateFieldSet(_copyPasteAC,this,null);}function _addDragAndDropListeners(){var signal=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:signal});document.addEventListener("drop",this.drop.bind(this),{signal:signal});}function _dispatchUpdateStates(details){var _this111=this;var hasChanged=Object.entries(details).some(function(_ref136){var _ref137=_slicedToArray(_ref136,2),key=_ref137[0],value=_ref137[1];return _classPrivateFieldGet(_previousStates,_this111)[key]!==value;});if(hasChanged){this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(_classPrivateFieldGet(_previousStates,this),details)});if(_classPrivateFieldGet(_mode,this)===_AnnotationEditorType.HIGHLIGHT&&details.hasSelectedEditor===false){_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateUI).call(this,[[_AnnotationEditorParamsType.HIGHLIGHT_FREE,true]]);}}}function _dispatchUpdateUI(details){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:details});}function _enableAll(){return _enableAll2.apply(this,arguments);}function _enableAll2(){_enableAll2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee66(){var promises,_iterator194,_step194,layer,_iterator195,_step195,editor;return _regeneratorRuntime().wrap(function _callee66$(_context67){while(1)switch(_context67.prev=_context67.next){case 0:if(_classPrivateFieldGet(_isEnabled,this)){_context67.next=9;break;}_classPrivateFieldSet(_isEnabled,this,true);promises=[];_iterator194=_createForOfIteratorHelper(_classPrivateFieldGet(_allLayers,this).values());try{for(_iterator194.s();!(_step194=_iterator194.n()).done;){layer=_step194.value;promises.push(layer.enable());}}catch(err){_iterator194.e(err);}finally{_iterator194.f();}_context67.next=7;return Promise.all(promises);case 7:_iterator195=_createForOfIteratorHelper(_classPrivateFieldGet(_allEditors,this).values());try{for(_iterator195.s();!(_step195=_iterator195.n()).done;){editor=_step195.value;editor.enable();}}catch(err){_iterator195.e(err);}finally{_iterator195.f();}case 9:case"end":return _context67.stop();}},_callee66,this);}));return _enableAll2.apply(this,arguments);}function _disableAll(){this.unselectAll();if(_classPrivateFieldGet(_isEnabled,this)){_classPrivateFieldSet(_isEnabled,this,false);var _iterator173=_createForOfIteratorHelper(_classPrivateFieldGet(_allLayers,this).values()),_step173;try{for(_iterator173.s();!(_step173=_iterator173.n()).done;){var layer=_step173.value;layer.disable();}}catch(err){_iterator173.e(err);}finally{_iterator173.f();}var _iterator174=_createForOfIteratorHelper(_classPrivateFieldGet(_allEditors,this).values()),_step174;try{for(_iterator174.s();!(_step174=_iterator174.n()).done;){var editor=_step174.value;editor.disable();}}catch(err){_iterator174.e(err);}finally{_iterator174.f();}}}function _addEditorToLayer(editor){var layer=_classPrivateFieldGet(_allLayers,this).get(editor.pageIndex);if(layer){layer.addOrRebuild(editor);}else{this.addEditor(editor);this.addToAnnotationStorage(editor);}}function _get_lastSelectedEditor(_this6){var ed=null;var _iterator175=_createForOfIteratorHelper(_classPrivateFieldGet(_selectedEditors,_this6)),_step175;try{for(_iterator175.s();!(_step175=_iterator175.n()).done;){ed=_step175.value;}}catch(err){_iterator175.e(err);}finally{_iterator175.f();}return ed;}function _isEmpty(){if(_classPrivateFieldGet(_allEditors,this).size===0){return true;}if(_classPrivateFieldGet(_allEditors,this).size===1){var _iterator176=_createForOfIteratorHelper(_classPrivateFieldGet(_allEditors,this).values()),_step176;try{for(_iterator176.s();!(_step176=_iterator176.n()).done;){var editor=_step176.value;return editor.isEmpty();}}catch(err){_iterator176.e(err);}finally{_iterator176.f();}}return false;}function _selectEditors(editors){var _iterator177=_createForOfIteratorHelper(_classPrivateFieldGet(_selectedEditors,this)),_step177;try{for(_iterator177.s();!(_step177=_iterator177.n()).done;){var editor=_step177.value;editor.unselect();}}catch(err){_iterator177.e(err);}finally{_iterator177.f();}_classPrivateFieldGet(_selectedEditors,this).clear();var _iterator178=_createForOfIteratorHelper(editors),_step178;try{for(_iterator178.s();!(_step178=_iterator178.n()).done;){var _editor6=_step178.value;if(_editor6.isEmpty()){continue;}_classPrivateFieldGet(_selectedEditors,this).add(_editor6);_editor6.select();}}catch(err){_iterator178.e(err);}finally{_iterator178.f();}_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSelectedEditor:this.hasSelection});}_defineProperty(_AnnotationEditorUIManager,"TRANSLATE_SMALL",1);_defineProperty(_AnnotationEditorUIManager,"TRANSLATE_BIG",10);;// ./src/display/editor/alt_text.js\nvar _altText2=/*#__PURE__*/new WeakMap();var _altTextDecorative=/*#__PURE__*/new WeakMap();var _altTextButton=/*#__PURE__*/new WeakMap();var _altTextButtonLabel=/*#__PURE__*/new WeakMap();var _altTextTooltip=/*#__PURE__*/new WeakMap();var _altTextTooltipTimeout=/*#__PURE__*/new WeakMap();var _altTextWasFromKeyBoard=/*#__PURE__*/new WeakMap();var _badge=/*#__PURE__*/new WeakMap();var _editor2=/*#__PURE__*/new WeakMap();var _guessedText=/*#__PURE__*/new WeakMap();var _textWithDisclaimer=/*#__PURE__*/new WeakMap();var _useNewAltTextFlow=/*#__PURE__*/new WeakMap();var _AltText_brand=/*#__PURE__*/new WeakSet();var AltText=/*#__PURE__*/function(){function AltText(editor){_classCallCheck(this,AltText);_classPrivateMethodInitSpec(this,_AltText_brand);_classPrivateFieldInitSpec(this,_altText2,null);_classPrivateFieldInitSpec(this,_altTextDecorative,false);_classPrivateFieldInitSpec(this,_altTextButton,null);_classPrivateFieldInitSpec(this,_altTextButtonLabel,null);_classPrivateFieldInitSpec(this,_altTextTooltip,null);_classPrivateFieldInitSpec(this,_altTextTooltipTimeout,null);_classPrivateFieldInitSpec(this,_altTextWasFromKeyBoard,false);_classPrivateFieldInitSpec(this,_badge,null);_classPrivateFieldInitSpec(this,_editor2,null);_classPrivateFieldInitSpec(this,_guessedText,null);_classPrivateFieldInitSpec(this,_textWithDisclaimer,null);_classPrivateFieldInitSpec(this,_useNewAltTextFlow,false);_classPrivateFieldSet(_editor2,this,editor);_classPrivateFieldSet(_useNewAltTextFlow,this,editor._uiManager.useNewAltTextFlow);_l10nNewButton._||(_l10nNewButton._=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}));}return _createClass(AltText,[{key:"render",value:function(){var _render2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9(){var _this15=this;var altText,label,signal,onClick;return _regeneratorRuntime().wrap(function _callee9$(_context9){while(1)switch(_context9.prev=_context9.next){case 0:altText=_classPrivateFieldSet(_altTextButton,this,document.createElement("button"));altText.className="altText";altText.tabIndex="0";label=_classPrivateFieldSet(_altTextButtonLabel,this,document.createElement("span"));altText.append(label);if(_classPrivateFieldGet(_useNewAltTextFlow,this)){altText.classList.add("new");altText.setAttribute("data-l10n-id",_l10nNewButton._.missing);label.setAttribute("data-l10n-id",_l10nNewButton._["missing-label"]);}else{altText.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button");label.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label");}signal=_classPrivateFieldGet(_editor2,this)._uiManager._signal;altText.addEventListener("contextmenu",_noContextMenu,{signal:signal});altText.addEventListener("pointerdown",function(event){return event.stopPropagation();},{signal:signal});onClick=function onClick(event){event.preventDefault();_classPrivateFieldGet(_editor2,_this15)._uiManager.editAltText(_classPrivateFieldGet(_editor2,_this15));if(_classPrivateFieldGet(_useNewAltTextFlow,_this15)){_classPrivateFieldGet(_editor2,_this15)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:_classPrivateGetter(_AltText_brand,_this15,_get_label)}});}};altText.addEventListener("click",onClick,{capture:true,signal:signal});altText.addEventListener("keydown",function(event){if(event.target===altText&&event.key==="Enter"){_classPrivateFieldSet(_altTextWasFromKeyBoard,_this15,true);onClick(event);}},{signal:signal});_context9.next=14;return _assertClassBrand(_AltText_brand,this,_setState).call(this);case 14:return _context9.abrupt("return",altText);case 15:case"end":return _context9.stop();}},_callee9,this);}));function render(){return _render2.apply(this,arguments);}return render;}()},{key:"finish",value:function finish(){if(!_classPrivateFieldGet(_altTextButton,this)){return;}_classPrivateFieldGet(_altTextButton,this).focus({focusVisible:_classPrivateFieldGet(_altTextWasFromKeyBoard,this)});_classPrivateFieldSet(_altTextWasFromKeyBoard,this,false);}},{key:"isEmpty",value:function isEmpty(){if(_classPrivateFieldGet(_useNewAltTextFlow,this)){return _classPrivateFieldGet(_altText2,this)===null;}return!_classPrivateFieldGet(_altText2,this)&&!_classPrivateFieldGet(_altTextDecorative,this);}},{key:"hasData",value:function hasData(){if(_classPrivateFieldGet(_useNewAltTextFlow,this)){return _classPrivateFieldGet(_altText2,this)!==null||!!_classPrivateFieldGet(_guessedText,this);}return this.isEmpty();}},{key:"guessedText",get:function get(){return _classPrivateFieldGet(_guessedText,this);}},{key:"setGuessedText",value:function(){var _setGuessedText=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee10(guessedText){return _regeneratorRuntime().wrap(function _callee10$(_context10){while(1)switch(_context10.prev=_context10.next){case 0:if(!(_classPrivateFieldGet(_altText2,this)!==null)){_context10.next=2;break;}return _context10.abrupt("return");case 2:_classPrivateFieldSet(_guessedText,this,guessedText);_context10.t0=_classPrivateFieldSet;_context10.t1=_textWithDisclaimer;_context10.t2=this;_context10.next=8;return AltText._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:guessedText});case 8:_context10.t3=_context10.sent;(0,_context10.t0)(_context10.t1,_context10.t2,_context10.t3);_assertClassBrand(_AltText_brand,this,_setState).call(this);case 11:case"end":return _context10.stop();}},_callee10,this);}));function setGuessedText(_x12){return _setGuessedText.apply(this,arguments);}return setGuessedText;}()},{key:"toggleAltTextBadge",value:function toggleAltTextBadge(){var visibility=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(!_classPrivateFieldGet(_useNewAltTextFlow,this)||_classPrivateFieldGet(_altText2,this)){var _classPrivateFieldGet34;(_classPrivateFieldGet34=_classPrivateFieldGet(_badge,this))===null||_classPrivateFieldGet34===void 0||_classPrivateFieldGet34.remove();_classPrivateFieldSet(_badge,this,null);return;}if(!_classPrivateFieldGet(_badge,this)){var badge=_classPrivateFieldSet(_badge,this,document.createElement("div"));badge.className="noAltTextBadge";_classPrivateFieldGet(_editor2,this).div.append(badge);}_classPrivateFieldGet(_badge,this).classList.toggle("hidden",!visibility);}},{key:"serialize",value:function serialize(isForCopying){var altText=_classPrivateFieldGet(_altText2,this);if(!isForCopying&&_classPrivateFieldGet(_guessedText,this)===altText){altText=_classPrivateFieldGet(_textWithDisclaimer,this);}return{altText:altText,decorative:_classPrivateFieldGet(_altTextDecorative,this),guessedText:_classPrivateFieldGet(_guessedText,this),textWithDisclaimer:_classPrivateFieldGet(_textWithDisclaimer,this)};}},{key:"data",get:function get(){return{altText:_classPrivateFieldGet(_altText2,this),decorative:_classPrivateFieldGet(_altTextDecorative,this)};},set:function set(_ref16){var altText=_ref16.altText,decorative=_ref16.decorative,guessedText=_ref16.guessedText,textWithDisclaimer=_ref16.textWithDisclaimer,_ref16$cancel=_ref16.cancel,cancel=_ref16$cancel===void 0?false:_ref16$cancel;if(guessedText){_classPrivateFieldSet(_guessedText,this,guessedText);_classPrivateFieldSet(_textWithDisclaimer,this,textWithDisclaimer);}if(_classPrivateFieldGet(_altText2,this)===altText&&_classPrivateFieldGet(_altTextDecorative,this)===decorative){return;}if(!cancel){_classPrivateFieldSet(_altText2,this,altText);_classPrivateFieldSet(_altTextDecorative,this,decorative);}_assertClassBrand(_AltText_brand,this,_setState).call(this);}},{key:"toggle",value:function toggle(){var enabled=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(!_classPrivateFieldGet(_altTextButton,this)){return;}if(!enabled&&_classPrivateFieldGet(_altTextTooltipTimeout,this)){clearTimeout(_classPrivateFieldGet(_altTextTooltipTimeout,this));_classPrivateFieldSet(_altTextTooltipTimeout,this,null);}_classPrivateFieldGet(_altTextButton,this).disabled=!enabled;}},{key:"shown",value:function shown(){_classPrivateFieldGet(_editor2,this)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:_classPrivateGetter(_AltText_brand,this,_get_label)}});}},{key:"destroy",value:function destroy(){var _classPrivateFieldGet35,_classPrivateFieldGet36;(_classPrivateFieldGet35=_classPrivateFieldGet(_altTextButton,this))===null||_classPrivateFieldGet35===void 0||_classPrivateFieldGet35.remove();_classPrivateFieldSet(_altTextButton,this,null);_classPrivateFieldSet(_altTextButtonLabel,this,null);_classPrivateFieldSet(_altTextTooltip,this,null);(_classPrivateFieldGet36=_classPrivateFieldGet(_badge,this))===null||_classPrivateFieldGet36===void 0||_classPrivateFieldGet36.remove();_classPrivateFieldSet(_badge,this,null);}}],[{key:"initialize",value:function initialize(l10n){var _AltText$_l10n;(_AltText$_l10n=AltText._l10n)!==null&&_AltText$_l10n!==void 0?_AltText$_l10n:AltText._l10n=l10n;}}]);}();function _get_label(_this14){return _classPrivateFieldGet(_altText2,_this14)&&"added"||_classPrivateFieldGet(_altText2,_this14)===null&&_this14.guessedText&&"review"||"missing";}function _setState(){return _setState2.apply(this,arguments);}function _setState2(){_setState2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee67(){var _this123=this;var button,_classPrivateFieldGet180,_classPrivateFieldGet181,_classPrivateFieldGet182,tooltip,DELAY_TO_SHOW_TOOLTIP,signal,element;return _regeneratorRuntime().wrap(function _callee67$(_context68){while(1)switch(_context68.prev=_context68.next){case 0:button=_classPrivateFieldGet(_altTextButton,this);if(button){_context68.next=3;break;}return _context68.abrupt("return");case 3:if(!_classPrivateFieldGet(_useNewAltTextFlow,this)){_context68.next=12;break;}button.classList.toggle("done",!!_classPrivateFieldGet(_altText2,this));button.setAttribute("data-l10n-id",_l10nNewButton._[_classPrivateGetter(_AltText_brand,this,_get_label)]);(_classPrivateFieldGet180=_classPrivateFieldGet(_altTextButtonLabel,this))===null||_classPrivateFieldGet180===void 0||_classPrivateFieldGet180.setAttribute("data-l10n-id",_l10nNewButton._["".concat(_classPrivateGetter(_AltText_brand,this,_get_label),"-label")]);if(_classPrivateFieldGet(_altText2,this)){_context68.next=10;break;}(_classPrivateFieldGet181=_classPrivateFieldGet(_altTextTooltip,this))===null||_classPrivateFieldGet181===void 0||_classPrivateFieldGet181.remove();return _context68.abrupt("return");case 10:_context68.next=18;break;case 12:if(!(!_classPrivateFieldGet(_altText2,this)&&!_classPrivateFieldGet(_altTextDecorative,this))){_context68.next=16;break;}button.classList.remove("done");(_classPrivateFieldGet182=_classPrivateFieldGet(_altTextTooltip,this))===null||_classPrivateFieldGet182===void 0||_classPrivateFieldGet182.remove();return _context68.abrupt("return");case 16:button.classList.add("done");button.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button");case 18:tooltip=_classPrivateFieldGet(_altTextTooltip,this);if(!tooltip){_classPrivateFieldSet(_altTextTooltip,this,tooltip=document.createElement("span"));tooltip.className="tooltip";tooltip.setAttribute("role","tooltip");tooltip.id="alt-text-tooltip-".concat(_classPrivateFieldGet(_editor2,this).id);DELAY_TO_SHOW_TOOLTIP=100;signal=_classPrivateFieldGet(_editor2,this)._uiManager._signal;signal.addEventListener("abort",function(){clearTimeout(_classPrivateFieldGet(_altTextTooltipTimeout,_this123));_classPrivateFieldSet(_altTextTooltipTimeout,_this123,null);},{once:true});button.addEventListener("mouseenter",function(){_classPrivateFieldSet(_altTextTooltipTimeout,_this123,setTimeout(function(){_classPrivateFieldSet(_altTextTooltipTimeout,_this123,null);_classPrivateFieldGet(_altTextTooltip,_this123).classList.add("show");_classPrivateFieldGet(_editor2,_this123)._reportTelemetry({action:"alt_text_tooltip"});},DELAY_TO_SHOW_TOOLTIP));},{signal:signal});button.addEventListener("mouseleave",function(){var _classPrivateFieldGet183;if(_classPrivateFieldGet(_altTextTooltipTimeout,_this123)){clearTimeout(_classPrivateFieldGet(_altTextTooltipTimeout,_this123));_classPrivateFieldSet(_altTextTooltipTimeout,_this123,null);}(_classPrivateFieldGet183=_classPrivateFieldGet(_altTextTooltip,_this123))===null||_classPrivateFieldGet183===void 0||_classPrivateFieldGet183.classList.remove("show");},{signal:signal});}if(_classPrivateFieldGet(_altTextDecorative,this)){tooltip.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip");}else{tooltip.removeAttribute("data-l10n-id");tooltip.textContent=_classPrivateFieldGet(_altText2,this);}if(!tooltip.parentNode){button.append(tooltip);}element=_classPrivateFieldGet(_editor2,this).getImageForAltText();element===null||element===void 0||element.setAttribute("aria-describedby",tooltip.id);case 24:case"end":return _context68.stop();}},_callee67,this);}));return _setState2.apply(this,arguments);}var _l10nNewButton={_:null};_defineProperty(AltText,"_l10n",null);;// ./src/display/touch_manager.js\nvar _container2=/*#__PURE__*/new WeakMap();var _isPinching=/*#__PURE__*/new WeakMap();var _isPinchingStopped=/*#__PURE__*/new WeakMap();var _isPinchingDisabled=/*#__PURE__*/new WeakMap();var _onPinchStart=/*#__PURE__*/new WeakMap();var _onPinching=/*#__PURE__*/new WeakMap();var _onPinchEnd=/*#__PURE__*/new WeakMap();var _pointerDownAC=/*#__PURE__*/new WeakMap();var _signal2=/*#__PURE__*/new WeakMap();var _touchInfo=/*#__PURE__*/new WeakMap();var _touchManagerAC=/*#__PURE__*/new WeakMap();var _touchMoveAC=/*#__PURE__*/new WeakMap();var _TouchManager_brand=/*#__PURE__*/new WeakSet();var _TouchManager=/*#__PURE__*/function(){function _TouchManager(_ref17){var _container3=_ref17.container,_ref17$isPinchingDisa=_ref17.isPinchingDisabled,isPinchingDisabled=_ref17$isPinchingDisa===void 0?null:_ref17$isPinchingDisa,_ref17$isPinchingStop=_ref17.isPinchingStopped,isPinchingStopped=_ref17$isPinchingStop===void 0?null:_ref17$isPinchingStop,_ref17$onPinchStart=_ref17.onPinchStart,onPinchStart=_ref17$onPinchStart===void 0?null:_ref17$onPinchStart,_ref17$onPinching=_ref17.onPinching,onPinching=_ref17$onPinching===void 0?null:_ref17$onPinching,_ref17$onPinchEnd=_ref17.onPinchEnd,onPinchEnd=_ref17$onPinchEnd===void 0?null:_ref17$onPinchEnd,_signal3=_ref17.signal;_classCallCheck(this,_TouchManager);_classPrivateMethodInitSpec(this,_TouchManager_brand);_classPrivateFieldInitSpec(this,_container2,void 0);_classPrivateFieldInitSpec(this,_isPinching,false);_classPrivateFieldInitSpec(this,_isPinchingStopped,null);_classPrivateFieldInitSpec(this,_isPinchingDisabled,void 0);_classPrivateFieldInitSpec(this,_onPinchStart,void 0);_classPrivateFieldInitSpec(this,_onPinching,void 0);_classPrivateFieldInitSpec(this,_onPinchEnd,void 0);_classPrivateFieldInitSpec(this,_pointerDownAC,null);_classPrivateFieldInitSpec(this,_signal2,void 0);_classPrivateFieldInitSpec(this,_touchInfo,null);_classPrivateFieldInitSpec(this,_touchManagerAC,void 0);_classPrivateFieldInitSpec(this,_touchMoveAC,null);_classPrivateFieldSet(_container2,this,_container3);_classPrivateFieldSet(_isPinchingStopped,this,isPinchingStopped);_classPrivateFieldSet(_isPinchingDisabled,this,isPinchingDisabled);_classPrivateFieldSet(_onPinchStart,this,onPinchStart);_classPrivateFieldSet(_onPinching,this,onPinching);_classPrivateFieldSet(_onPinchEnd,this,onPinchEnd);_classPrivateFieldSet(_touchManagerAC,this,new AbortController());_classPrivateFieldSet(_signal2,this,AbortSignal.any([_signal3,_classPrivateFieldGet(_touchManagerAC,this).signal]));_container3.addEventListener("touchstart",_assertClassBrand(_TouchManager_brand,this,_onTouchStart).bind(this),{passive:false,signal:_classPrivateFieldGet(_signal2,this)});}return _createClass(_TouchManager,[{key:"MIN_TOUCH_DISTANCE_TO_PINCH",get:function get(){return _shadow(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1));}},{key:"destroy",value:function destroy(){var _classPrivateFieldGet37,_classPrivateFieldGet38;(_classPrivateFieldGet37=_classPrivateFieldGet(_touchManagerAC,this))===null||_classPrivateFieldGet37===void 0||_classPrivateFieldGet37.abort();_classPrivateFieldSet(_touchManagerAC,this,null);(_classPrivateFieldGet38=_classPrivateFieldGet(_pointerDownAC,this))===null||_classPrivateFieldGet38===void 0||_classPrivateFieldGet38.abort();_classPrivateFieldSet(_pointerDownAC,this,null);}}]);}();_TouchManager2=_TouchManager;function _onTouchStart(evt){var _classPrivateFieldGet138,_this112=this,_classPrivateFieldGet141;if((_classPrivateFieldGet138=_classPrivateFieldGet(_isPinchingDisabled,this))!==null&&_classPrivateFieldGet138!==void 0&&_classPrivateFieldGet138.call(this)){return;}if(evt.touches.length===1){if(_classPrivateFieldGet(_pointerDownAC,this)){return;}var pointerDownAC=_classPrivateFieldSet(_pointerDownAC,this,new AbortController());var signal=AbortSignal.any([_classPrivateFieldGet(_signal2,this),pointerDownAC.signal]);var container=_classPrivateFieldGet(_container2,this);var opts={capture:true,signal:signal,passive:false};var cancelPointerDown=function cancelPointerDown(e){if(e.pointerType==="touch"){var _classPrivateFieldGet139;(_classPrivateFieldGet139=_classPrivateFieldGet(_pointerDownAC,_this112))===null||_classPrivateFieldGet139===void 0||_classPrivateFieldGet139.abort();_classPrivateFieldSet(_pointerDownAC,_this112,null);}};container.addEventListener("pointerdown",function(e){if(e.pointerType==="touch"){_stopEvent(e);cancelPointerDown(e);}},opts);container.addEventListener("pointerup",cancelPointerDown,opts);container.addEventListener("pointercancel",cancelPointerDown,opts);return;}if(!_classPrivateFieldGet(_touchMoveAC,this)){var _classPrivateFieldGet140;_classPrivateFieldSet(_touchMoveAC,this,new AbortController());var _signal4=AbortSignal.any([_classPrivateFieldGet(_signal2,this),_classPrivateFieldGet(_touchMoveAC,this).signal]);var _container6=_classPrivateFieldGet(_container2,this);var opt={signal:_signal4,capture:false,passive:false};_container6.addEventListener("touchmove",_assertClassBrand(_TouchManager_brand,this,_onTouchMove).bind(this),opt);var onTouchEnd=_assertClassBrand(_TouchManager_brand,this,_onTouchEnd).bind(this);_container6.addEventListener("touchend",onTouchEnd,opt);_container6.addEventListener("touchcancel",onTouchEnd,opt);opt.capture=true;_container6.addEventListener("pointerdown",_stopEvent,opt);_container6.addEventListener("pointermove",_stopEvent,opt);_container6.addEventListener("pointercancel",_stopEvent,opt);_container6.addEventListener("pointerup",_stopEvent,opt);(_classPrivateFieldGet140=_classPrivateFieldGet(_onPinchStart,this))===null||_classPrivateFieldGet140===void 0||_classPrivateFieldGet140.call(this);}_stopEvent(evt);if(evt.touches.length!==2||(_classPrivateFieldGet141=_classPrivateFieldGet(_isPinchingStopped,this))!==null&&_classPrivateFieldGet141!==void 0&&_classPrivateFieldGet141.call(this)){_classPrivateFieldSet(_touchInfo,this,null);return;}var _evt$touches=_slicedToArray(evt.touches,2),touch0=_evt$touches[0],touch1=_evt$touches[1];if(touch0.identifier>touch1.identifier){var _ref138=[touch1,touch0];touch0=_ref138[0];touch1=_ref138[1];}_classPrivateFieldSet(_touchInfo,this,{touch0X:touch0.screenX,touch0Y:touch0.screenY,touch1X:touch1.screenX,touch1Y:touch1.screenY});}function _onTouchMove(evt){var _classPrivateFieldGet142;if(!_classPrivateFieldGet(_touchInfo,this)||evt.touches.length!==2){return;}_stopEvent(evt);var _evt$touches2=_slicedToArray(evt.touches,2),touch0=_evt$touches2[0],touch1=_evt$touches2[1];if(touch0.identifier>touch1.identifier){var _ref139=[touch1,touch0];touch0=_ref139[0];touch1=_ref139[1];}var _touch=touch0,screen0X=_touch.screenX,screen0Y=_touch.screenY;var _touch2=touch1,screen1X=_touch2.screenX,screen1Y=_touch2.screenY;var touchInfo=_classPrivateFieldGet(_touchInfo,this);var pTouch0X=touchInfo.touch0X,pTouch0Y=touchInfo.touch0Y,pTouch1X=touchInfo.touch1X,pTouch1Y=touchInfo.touch1Y;var prevGapX=pTouch1X-pTouch0X;var prevGapY=pTouch1Y-pTouch0Y;var currGapX=screen1X-screen0X;var currGapY=screen1Y-screen0Y;var distance=Math.hypot(currGapX,currGapY)||1;var pDistance=Math.hypot(prevGapX,prevGapY)||1;if(!_classPrivateFieldGet(_isPinching,this)&&Math.abs(pDistance-distance)<=_TouchManager2.MIN_TOUCH_DISTANCE_TO_PINCH){return;}touchInfo.touch0X=screen0X;touchInfo.touch0Y=screen0Y;touchInfo.touch1X=screen1X;touchInfo.touch1Y=screen1Y;if(!_classPrivateFieldGet(_isPinching,this)){_classPrivateFieldSet(_isPinching,this,true);return;}var origin=[(screen0X+screen1X)/2,(screen0Y+screen1Y)/2];(_classPrivateFieldGet142=_classPrivateFieldGet(_onPinching,this))===null||_classPrivateFieldGet142===void 0||_classPrivateFieldGet142.call(this,origin,pDistance,distance);}function _onTouchEnd(evt){var _classPrivateFieldGet143;if(evt.touches.length>=2){return;}_classPrivateFieldGet(_touchMoveAC,this).abort();_classPrivateFieldSet(_touchMoveAC,this,null);(_classPrivateFieldGet143=_classPrivateFieldGet(_onPinchEnd,this))===null||_classPrivateFieldGet143===void 0||_classPrivateFieldGet143.call(this);if(!_classPrivateFieldGet(_touchInfo,this)){return;}_stopEvent(evt);_classPrivateFieldSet(_touchInfo,this,null);_classPrivateFieldSet(_isPinching,this,false);};// ./src/display/editor/editor.js\nvar _accessibilityData=/*#__PURE__*/new WeakMap();var _allResizerDivs=/*#__PURE__*/new WeakMap();var _altText3=/*#__PURE__*/new WeakMap();var _disabled=/*#__PURE__*/new WeakMap();var _dragPointerId=/*#__PURE__*/new WeakMap();var _dragPointerType=/*#__PURE__*/new WeakMap();var _keepAspectRatio=/*#__PURE__*/new WeakMap();var _resizersDiv=/*#__PURE__*/new WeakMap();var _lastPointerCoords=/*#__PURE__*/new WeakMap();var _savedDimensions=/*#__PURE__*/new WeakMap();var _focusAC=/*#__PURE__*/new WeakMap();var _focusedResizerName=/*#__PURE__*/new WeakMap();var _hasBeenClicked=/*#__PURE__*/new WeakMap();var _initialRect=/*#__PURE__*/new WeakMap();var _isEditing=/*#__PURE__*/new WeakMap();var _isInEditMode=/*#__PURE__*/new WeakMap();var _isResizerEnabledForKeyboard=/*#__PURE__*/new WeakMap();var _moveInDOMTimeout=/*#__PURE__*/new WeakMap();var _prevDragX=/*#__PURE__*/new WeakMap();var _prevDragY=/*#__PURE__*/new WeakMap();var _telemetryTimeouts=/*#__PURE__*/new WeakMap();var _touchManager=/*#__PURE__*/new WeakMap();var _isDraggable=/*#__PURE__*/new WeakMap();var _zIndex=/*#__PURE__*/new WeakMap();var _AnnotationEditor_brand=/*#__PURE__*/new WeakSet();var AnnotationEditor=/*#__PURE__*/function(){function AnnotationEditor(parameters){_classCallCheck(this,AnnotationEditor);_classPrivateMethodInitSpec(this,_AnnotationEditor_brand);_classPrivateFieldInitSpec(this,_accessibilityData,null);_classPrivateFieldInitSpec(this,_allResizerDivs,null);_classPrivateFieldInitSpec(this,_altText3,null);_classPrivateFieldInitSpec(this,_disabled,false);_classPrivateFieldInitSpec(this,_dragPointerId,null);_classPrivateFieldInitSpec(this,_dragPointerType,"");_classPrivateFieldInitSpec(this,_keepAspectRatio,false);_classPrivateFieldInitSpec(this,_resizersDiv,null);_classPrivateFieldInitSpec(this,_lastPointerCoords,null);_classPrivateFieldInitSpec(this,_savedDimensions,null);_classPrivateFieldInitSpec(this,_focusAC,null);_classPrivateFieldInitSpec(this,_focusedResizerName,"");_classPrivateFieldInitSpec(this,_hasBeenClicked,false);_classPrivateFieldInitSpec(this,_initialRect,null);_classPrivateFieldInitSpec(this,_isEditing,false);_classPrivateFieldInitSpec(this,_isInEditMode,false);_classPrivateFieldInitSpec(this,_isResizerEnabledForKeyboard,false);_classPrivateFieldInitSpec(this,_moveInDOMTimeout,null);_classPrivateFieldInitSpec(this,_prevDragX,0);_classPrivateFieldInitSpec(this,_prevDragY,0);_classPrivateFieldInitSpec(this,_telemetryTimeouts,null);_classPrivateFieldInitSpec(this,_touchManager,null);_defineProperty(this,"_isCopy",false);_defineProperty(this,"_editToolbar",null);_defineProperty(this,"_initialOptions",Object.create(null));_defineProperty(this,"_initialData",null);_defineProperty(this,"_isVisible",true);_defineProperty(this,"_uiManager",null);_defineProperty(this,"_focusEventsAllowed",true);_classPrivateFieldInitSpec(this,_isDraggable,false);_classPrivateFieldInitSpec(this,_zIndex,AnnotationEditor._zIndex++);this.parent=parameters.parent;this.id=parameters.id;this.width=this.height=null;this.pageIndex=parameters.parent.pageIndex;this.name=parameters.name;this.div=null;this._uiManager=parameters.uiManager;this.annotationElementId=null;this._willKeepAspectRatio=false;this._initialOptions.isCentered=parameters.isCentered;this._structTreeParentId=null;var _this$parent$viewport=this.parent.viewport,_rotation2=_this$parent$viewport.rotation,_this$parent$viewport2=_this$parent$viewport.rawDims,_pageWidth2=_this$parent$viewport2.pageWidth,_pageHeight2=_this$parent$viewport2.pageHeight,pageX=_this$parent$viewport2.pageX,pageY=_this$parent$viewport2.pageY;this.rotation=_rotation2;this.pageRotation=(360+_rotation2-this._uiManager.viewParameters.rotation)%360;this.pageDimensions=[_pageWidth2,_pageHeight2];this.pageTranslation=[pageX,pageY];var _this$parentDimension=_slicedToArray(this.parentDimensions,2),_width=_this$parentDimension[0],_height=_this$parentDimension[1];this.x=parameters.x/_width;this.y=parameters.y/_height;this.isAttachedToDOM=false;this.deleted=false;}return _createClass(AnnotationEditor,[{key:"editorType",get:function get(){return Object.getPrototypeOf(this).constructor._type;}},{key:"propertiesToUpdate",get:function get(){return[];}},{key:"_isDraggable",get:function get(){return _classPrivateFieldGet(_isDraggable,this);},set:function set(value){var _this$div;_classPrivateFieldSet(_isDraggable,this,value);(_this$div=this.div)===null||_this$div===void 0||_this$div.classList.toggle("draggable",value);}},{key:"isEnterHandled",get:function get(){return true;}},{key:"center",value:function center(){var _this$pageDimensions=_slicedToArray(this.pageDimensions,2),pageWidth=_this$pageDimensions[0],pageHeight=_this$pageDimensions[1];switch(this.parentRotation){case 90:this.x-=this.height*pageHeight/(pageWidth*2);this.y+=this.width*pageWidth/(pageHeight*2);break;case 180:this.x+=this.width/2;this.y+=this.height/2;break;case 270:this.x+=this.height*pageHeight/(pageWidth*2);this.y-=this.width*pageWidth/(pageHeight*2);break;default:this.x-=this.width/2;this.y-=this.height/2;break;}this.fixAndSetPosition();}},{key:"addCommands",value:function addCommands(params){this._uiManager.addCommands(params);}},{key:"currentLayer",get:function get(){return this._uiManager.currentLayer;}},{key:"setInBackground",value:function setInBackground(){this.div.style.zIndex=0;}},{key:"setInForeground",value:function setInForeground(){this.div.style.zIndex=_classPrivateFieldGet(_zIndex,this);}},{key:"setParent",value:function setParent(parent){if(parent!==null){this.pageIndex=parent.pageIndex;this.pageDimensions=parent.pageDimensions;}else{_assertClassBrand(_AnnotationEditor_brand,this,_stopResizing).call(this);}this.parent=parent;}},{key:"focusin",value:function focusin(event){if(!this._focusEventsAllowed){return;}if(!_classPrivateFieldGet(_hasBeenClicked,this)){this.parent.setSelected(this);}else{_classPrivateFieldSet(_hasBeenClicked,this,false);}}},{key:"focusout",value:function focusout(event){var _this$parent;if(!this._focusEventsAllowed){return;}if(!this.isAttachedToDOM){return;}var target=event.relatedTarget;if(target!==null&&target!==void 0&&target.closest("#".concat(this.id))){return;}event.preventDefault();if(!((_this$parent=this.parent)!==null&&_this$parent!==void 0&&_this$parent.isMultipleSelection)){this.commitOrRemove();}}},{key:"commitOrRemove",value:function commitOrRemove(){if(this.isEmpty()){this.remove();}else{this.commit();}}},{key:"commit",value:function commit(){this.addToAnnotationStorage();}},{key:"addToAnnotationStorage",value:function addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this);}},{key:"setAt",value:function setAt(x,y,tx,ty){var _this$parentDimension2=_slicedToArray(this.parentDimensions,2),width=_this$parentDimension2[0],height=_this$parentDimension2[1];var _this$screenToPageTra=this.screenToPageTranslation(tx,ty);var _this$screenToPageTra2=_slicedToArray(_this$screenToPageTra,2);tx=_this$screenToPageTra2[0];ty=_this$screenToPageTra2[1];this.x=(x+tx)/width;this.y=(y+ty)/height;this.fixAndSetPosition();}},{key:"_moveAfterPaste",value:function _moveAfterPaste(baseX,baseY){var _this$parentDimension3=_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension3[0],parentHeight=_this$parentDimension3[1];this.setAt(baseX*parentWidth,baseY*parentHeight,this.width*parentWidth,this.height*parentHeight);this._onTranslated();}},{key:"translate",value:function translate(x,y){_assertClassBrand(_AnnotationEditor_brand,this,_translate).call(this,this.parentDimensions,x,y);}},{key:"translateInPage",value:function translateInPage(x,y){_classPrivateFieldGet(_initialRect,this)||_classPrivateFieldSet(_initialRect,this,[this.x,this.y,this.width,this.height]);_assertClassBrand(_AnnotationEditor_brand,this,_translate).call(this,this.pageDimensions,x,y);this.div.scrollIntoView({block:"nearest"});}},{key:"translationDone",value:function translationDone(){this._onTranslated(this.x,this.y);}},{key:"drag",value:function drag(tx,ty){_classPrivateFieldGet(_initialRect,this)||_classPrivateFieldSet(_initialRect,this,[this.x,this.y,this.width,this.height]);var div=this.div,_this$parentDimension4=_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension4[0],parentHeight=_this$parentDimension4[1];this.x+=tx/parentWidth;this.y+=ty/parentHeight;if(this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){var _this$div$getBounding=this.div.getBoundingClientRect(),_x13=_this$div$getBounding.x,_y2=_this$div$getBounding.y;if(this.parent.findNewParent(this,_x13,_y2)){this.x-=Math.floor(this.x);this.y-=Math.floor(this.y);}}var x=this.x,y=this.y;var _this$getBaseTranslat=this.getBaseTranslation(),_this$getBaseTranslat2=_slicedToArray(_this$getBaseTranslat,2),bx=_this$getBaseTranslat2[0],by=_this$getBaseTranslat2[1];x+=bx;y+=by;var style=div.style;style.left="".concat((100*x).toFixed(2),"%");style.top="".concat((100*y).toFixed(2),"%");this._onTranslating(x,y);div.scrollIntoView({block:"nearest"});}},{key:"_onTranslating",value:function _onTranslating(x,y){}},{key:"_onTranslated",value:function _onTranslated(x,y){}},{key:"_hasBeenMoved",get:function get(){return!!_classPrivateFieldGet(_initialRect,this)&&(_classPrivateFieldGet(_initialRect,this)[0]!==this.x||_classPrivateFieldGet(_initialRect,this)[1]!==this.y);}},{key:"_hasBeenResized",get:function get(){return!!_classPrivateFieldGet(_initialRect,this)&&(_classPrivateFieldGet(_initialRect,this)[2]!==this.width||_classPrivateFieldGet(_initialRect,this)[3]!==this.height);}},{key:"getBaseTranslation",value:function getBaseTranslation(){var _this$parentDimension5=_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension5[0],parentHeight=_this$parentDimension5[1];var _borderLineWidth=AnnotationEditor._borderLineWidth;var x=_borderLineWidth/parentWidth;var y=_borderLineWidth/parentHeight;switch(this.rotation){case 90:return[-x,y];case 180:return[x,y];case 270:return[x,-y];default:return[-x,-y];}}},{key:"_mustFixPosition",get:function get(){return true;}},{key:"fixAndSetPosition",value:function fixAndSetPosition(){var rotation=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.rotation;var style=this.div.style,_this$pageDimensions2=_slicedToArray(this.pageDimensions,2),pageWidth=_this$pageDimensions2[0],pageHeight=_this$pageDimensions2[1];var x=this.x,y=this.y,width=this.width,height=this.height;width*=pageWidth;height*=pageHeight;x*=pageWidth;y*=pageHeight;if(this._mustFixPosition){switch(rotation){case 0:x=Math.max(0,Math.min(pageWidth-width,x));y=Math.max(0,Math.min(pageHeight-height,y));break;case 90:x=Math.max(0,Math.min(pageWidth-height,x));y=Math.min(pageHeight,Math.max(width,y));break;case 180:x=Math.min(pageWidth,Math.max(width,x));y=Math.min(pageHeight,Math.max(height,y));break;case 270:x=Math.min(pageWidth,Math.max(height,x));y=Math.max(0,Math.min(pageHeight-width,y));break;}}this.x=x/=pageWidth;this.y=y/=pageHeight;var _this$getBaseTranslat3=this.getBaseTranslation(),_this$getBaseTranslat4=_slicedToArray(_this$getBaseTranslat3,2),bx=_this$getBaseTranslat4[0],by=_this$getBaseTranslat4[1];x+=bx;y+=by;style.left="".concat((100*x).toFixed(2),"%");style.top="".concat((100*y).toFixed(2),"%");this.moveInDOM();}},{key:"screenToPageTranslation",value:function screenToPageTranslation(x,y){return _rotatePoint.call(AnnotationEditor,x,y,this.parentRotation);}},{key:"pageTranslationToScreen",value:function pageTranslationToScreen(x,y){return _rotatePoint.call(AnnotationEditor,x,y,360-this.parentRotation);}},{key:"parentScale",get:function get(){return this._uiManager.viewParameters.realScale;}},{key:"parentRotation",get:function get(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360;}},{key:"parentDimensions",get:function get(){var parentScale=this.parentScale,_this$pageDimensions3=_slicedToArray(this.pageDimensions,2),pageWidth=_this$pageDimensions3[0],pageHeight=_this$pageDimensions3[1];return[pageWidth*parentScale,pageHeight*parentScale];}},{key:"setDims",value:function setDims(width,height){var _this$parentDimension6=_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension6[0],parentHeight=_this$parentDimension6[1];var style=this.div.style;style.width="".concat((100*width/parentWidth).toFixed(2),"%");if(!_classPrivateFieldGet(_keepAspectRatio,this)){style.height="".concat((100*height/parentHeight).toFixed(2),"%");}}},{key:"fixDims",value:function fixDims(){var style=this.div.style;var height=style.height,width=style.width;var widthPercent=width.endsWith("%");var heightPercent=!_classPrivateFieldGet(_keepAspectRatio,this)&&height.endsWith("%");if(widthPercent&&heightPercent){return;}var _this$parentDimension7=_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension7[0],parentHeight=_this$parentDimension7[1];if(!widthPercent){style.width="".concat((100*parseFloat(width)/parentWidth).toFixed(2),"%");}if(!_classPrivateFieldGet(_keepAspectRatio,this)&&!heightPercent){style.height="".concat((100*parseFloat(height)/parentHeight).toFixed(2),"%");}}},{key:"getInitialTranslation",value:function getInitialTranslation(){return[0,0];}},{key:"_onResized",value:function _onResized(){}},{key:"_onResizing",value:function _onResizing(){}},{key:"altTextFinish",value:function altTextFinish(){var _classPrivateFieldGet39;(_classPrivateFieldGet39=_classPrivateFieldGet(_altText3,this))===null||_classPrivateFieldGet39===void 0||_classPrivateFieldGet39.finish();}},{key:"addEditToolbar",value:function(){var _addEditToolbar=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee11(){return _regeneratorRuntime().wrap(function _callee11$(_context11){while(1)switch(_context11.prev=_context11.next){case 0:if(!(this._editToolbar||_classPrivateFieldGet(_isInEditMode,this))){_context11.next=2;break;}return _context11.abrupt("return",this._editToolbar);case 2:this._editToolbar=new EditorToolbar(this);this.div.append(this._editToolbar.render());if(!_classPrivateFieldGet(_altText3,this)){_context11.next=7;break;}_context11.next=7;return this._editToolbar.addAltText(_classPrivateFieldGet(_altText3,this));case 7:return _context11.abrupt("return",this._editToolbar);case 8:case"end":return _context11.stop();}},_callee11,this);}));function addEditToolbar(){return _addEditToolbar.apply(this,arguments);}return addEditToolbar;}()},{key:"removeEditToolbar",value:function removeEditToolbar(){var _classPrivateFieldGet40;if(!this._editToolbar){return;}this._editToolbar.remove();this._editToolbar=null;(_classPrivateFieldGet40=_classPrivateFieldGet(_altText3,this))===null||_classPrivateFieldGet40===void 0||_classPrivateFieldGet40.destroy();}},{key:"addContainer",value:function addContainer(container){var _this$_editToolbar;var editToolbarDiv=(_this$_editToolbar=this._editToolbar)===null||_this$_editToolbar===void 0?void 0:_this$_editToolbar.div;if(editToolbarDiv){editToolbarDiv.before(container);}else{this.div.append(container);}}},{key:"getClientDimensions",value:function getClientDimensions(){return this.div.getBoundingClientRect();}},{key:"addAltTextButton",value:function(){var _addAltTextButton=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee12(){return _regeneratorRuntime().wrap(function _callee12$(_context12){while(1)switch(_context12.prev=_context12.next){case 0:if(!_classPrivateFieldGet(_altText3,this)){_context12.next=2;break;}return _context12.abrupt("return");case 2:AltText.initialize(AnnotationEditor._l10n);_classPrivateFieldSet(_altText3,this,new AltText(this));if(_classPrivateFieldGet(_accessibilityData,this)){_classPrivateFieldGet(_altText3,this).data=_classPrivateFieldGet(_accessibilityData,this);_classPrivateFieldSet(_accessibilityData,this,null);}_context12.next=7;return this.addEditToolbar();case 7:case"end":return _context12.stop();}},_callee12,this);}));function addAltTextButton(){return _addAltTextButton.apply(this,arguments);}return addAltTextButton;}()},{key:"altTextData",get:function get(){var _classPrivateFieldGet41;return(_classPrivateFieldGet41=_classPrivateFieldGet(_altText3,this))===null||_classPrivateFieldGet41===void 0?void 0:_classPrivateFieldGet41.data;},set:function set(data){if(!_classPrivateFieldGet(_altText3,this)){return;}_classPrivateFieldGet(_altText3,this).data=data;}},{key:"guessedAltText",get:function get(){var _classPrivateFieldGet42;return(_classPrivateFieldGet42=_classPrivateFieldGet(_altText3,this))===null||_classPrivateFieldGet42===void 0?void 0:_classPrivateFieldGet42.guessedText;}},{key:"setGuessedAltText",value:function(){var _setGuessedAltText=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee13(text){var _classPrivateFieldGet43;return _regeneratorRuntime().wrap(function _callee13$(_context13){while(1)switch(_context13.prev=_context13.next){case 0:_context13.next=2;return(_classPrivateFieldGet43=_classPrivateFieldGet(_altText3,this))===null||_classPrivateFieldGet43===void 0?void 0:_classPrivateFieldGet43.setGuessedText(text);case 2:case"end":return _context13.stop();}},_callee13,this);}));function setGuessedAltText(_x14){return _setGuessedAltText.apply(this,arguments);}return setGuessedAltText;}()},{key:"serializeAltText",value:function serializeAltText(isForCopying){var _classPrivateFieldGet44;return(_classPrivateFieldGet44=_classPrivateFieldGet(_altText3,this))===null||_classPrivateFieldGet44===void 0?void 0:_classPrivateFieldGet44.serialize(isForCopying);}},{key:"hasAltText",value:function hasAltText(){return!!_classPrivateFieldGet(_altText3,this)&&!_classPrivateFieldGet(_altText3,this).isEmpty();}},{key:"hasAltTextData",value:function hasAltTextData(){var _classPrivateFieldGet45,_classPrivateFieldGet46;return(_classPrivateFieldGet45=(_classPrivateFieldGet46=_classPrivateFieldGet(_altText3,this))===null||_classPrivateFieldGet46===void 0?void 0:_classPrivateFieldGet46.hasData())!==null&&_classPrivateFieldGet45!==void 0?_classPrivateFieldGet45:false;}},{key:"render",value:function render(){var _this16=this,_this$_uiManager$_edi;this.div=document.createElement("div");this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360);this.div.className=this.name;this.div.setAttribute("id",this.id);this.div.tabIndex=_classPrivateFieldGet(_disabled,this)?-1:0;if(!this._isVisible){this.div.classList.add("hidden");}this.setInForeground();_assertClassBrand(_AnnotationEditor_brand,this,_addFocusListeners).call(this);var _this$parentDimension8=_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension8[0],parentHeight=_this$parentDimension8[1];if(this.parentRotation%180!==0){this.div.style.maxWidth="".concat((100*parentHeight/parentWidth).toFixed(2),"%");this.div.style.maxHeight="".concat((100*parentWidth/parentHeight).toFixed(2),"%");}var _this$getInitialTrans=this.getInitialTranslation(),_this$getInitialTrans2=_slicedToArray(_this$getInitialTrans,2),tx=_this$getInitialTrans2[0],ty=_this$getInitialTrans2[1];this.translate(tx,ty);bindEvents(this,this.div,["pointerdown"]);if(this.isResizable&&this._uiManager._supportsPinchToZoom){_classPrivateFieldGet(_touchManager,this)||_classPrivateFieldSet(_touchManager,this,new _TouchManager({container:this.div,isPinchingDisabled:function isPinchingDisabled(){return!_this16.isSelected;},onPinchStart:_assertClassBrand(_AnnotationEditor_brand,this,_touchPinchStartCallback).bind(this),onPinching:_assertClassBrand(_AnnotationEditor_brand,this,_touchPinchCallback).bind(this),onPinchEnd:_assertClassBrand(_AnnotationEditor_brand,this,_touchPinchEndCallback).bind(this),signal:this._uiManager._signal}));}(_this$_uiManager$_edi=this._uiManager._editorUndoBar)===null||_this$_uiManager$_edi===void 0||_this$_uiManager$_edi.hide();return this.div;}},{key:"pointerdown",value:function pointerdown(event){var isMac=util_FeatureTest.platform.isMac;if(event.button!==0||event.ctrlKey&&isMac){event.preventDefault();return;}_classPrivateFieldSet(_hasBeenClicked,this,true);if(this._isDraggable){_assertClassBrand(_AnnotationEditor_brand,this,_setUpDragSession).call(this,event);return;}_assertClassBrand(_AnnotationEditor_brand,this,_selectOnPointerEvent).call(this,event);}},{key:"isSelected",get:function get(){return this._uiManager.isSelected(this);}},{key:"_onStartDragging",value:function _onStartDragging(){}},{key:"_onStopDragging",value:function _onStopDragging(){}},{key:"moveInDOM",value:function moveInDOM(){var _this17=this;if(_classPrivateFieldGet(_moveInDOMTimeout,this)){clearTimeout(_classPrivateFieldGet(_moveInDOMTimeout,this));}_classPrivateFieldSet(_moveInDOMTimeout,this,setTimeout(function(){var _this17$parent;_classPrivateFieldSet(_moveInDOMTimeout,_this17,null);(_this17$parent=_this17.parent)===null||_this17$parent===void 0||_this17$parent.moveEditorInDOM(_this17);},0));}},{key:"_setParentAndPosition",value:function _setParentAndPosition(parent,x,y){parent.changeParent(this);this.x=x;this.y=y;this.fixAndSetPosition();this._onTranslated();}},{key:"getRect",value:function getRect(tx,ty){var rotation=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this.rotation;var scale=this.parentScale;var _this$pageDimensions4=_slicedToArray(this.pageDimensions,2),pageWidth=_this$pageDimensions4[0],pageHeight=_this$pageDimensions4[1];var _this$pageTranslation=_slicedToArray(this.pageTranslation,2),pageX=_this$pageTranslation[0],pageY=_this$pageTranslation[1];var shiftX=tx/scale;var shiftY=ty/scale;var x=this.x*pageWidth;var y=this.y*pageHeight;var width=this.width*pageWidth;var height=this.height*pageHeight;switch(rotation){case 0:return[x+shiftX+pageX,pageHeight-y-shiftY-height+pageY,x+shiftX+width+pageX,pageHeight-y-shiftY+pageY];case 90:return[x+shiftY+pageX,pageHeight-y+shiftX+pageY,x+shiftY+height+pageX,pageHeight-y+shiftX+width+pageY];case 180:return[x-shiftX-width+pageX,pageHeight-y+shiftY+pageY,x-shiftX+pageX,pageHeight-y+shiftY+height+pageY];case 270:return[x-shiftY-height+pageX,pageHeight-y-shiftX-width+pageY,x-shiftY+pageX,pageHeight-y-shiftX+pageY];default:throw new Error("Invalid rotation");}}},{key:"getRectInCurrentCoords",value:function getRectInCurrentCoords(rect,pageHeight){var _rect=_slicedToArray(rect,4),x1=_rect[0],y1=_rect[1],x2=_rect[2],y2=_rect[3];var width=x2-x1;var height=y2-y1;switch(this.rotation){case 0:return[x1,pageHeight-y2,width,height];case 90:return[x1,pageHeight-y1,height,width];case 180:return[x2,pageHeight-y1,width,height];case 270:return[x2,pageHeight-y2,height,width];default:throw new Error("Invalid rotation");}}},{key:"onceAdded",value:function onceAdded(focus){}},{key:"isEmpty",value:function isEmpty(){return false;}},{key:"enableEditMode",value:function enableEditMode(){_classPrivateFieldSet(_isInEditMode,this,true);}},{key:"disableEditMode",value:function disableEditMode(){_classPrivateFieldSet(_isInEditMode,this,false);}},{key:"isInEditMode",value:function isInEditMode(){return _classPrivateFieldGet(_isInEditMode,this);}},{key:"shouldGetKeyboardEvents",value:function shouldGetKeyboardEvents(){return _classPrivateFieldGet(_isResizerEnabledForKeyboard,this);}},{key:"needsToBeRebuilt",value:function needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM;}},{key:"isOnScreen",get:function get(){var _this$getClientDimens=this.getClientDimensions(),top=_this$getClientDimens.top,left=_this$getClientDimens.left,bottom=_this$getClientDimens.bottom,right=_this$getClientDimens.right;var _window=window,innerHeight=_window.innerHeight,innerWidth=_window.innerWidth;return left<innerWidth&&right>0&&top<innerHeight&&bottom>0;}},{key:"rebuild",value:function rebuild(){_assertClassBrand(_AnnotationEditor_brand,this,_addFocusListeners).call(this);}},{key:"rotate",value:function rotate(_angle){}},{key:"resize",value:function resize(){}},{key:"serializeDeleted",value:function serializeDeleted(){var _this$_initialData;return{id:this.annotationElementId,deleted:true,pageIndex:this.pageIndex,popupRef:((_this$_initialData=this._initialData)===null||_this$_initialData===void 0?void 0:_this$_initialData.popupRef)||""};}},{key:"serialize",value:function serialize(){var isForCopying=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var context=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;unreachable("An editor must be serializable");}},{key:"hasBeenModified",get:function get(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null);}},{key:"remove",value:function remove(){var _classPrivateFieldGet47,_classPrivateFieldGet48;(_classPrivateFieldGet47=_classPrivateFieldGet(_focusAC,this))===null||_classPrivateFieldGet47===void 0||_classPrivateFieldGet47.abort();_classPrivateFieldSet(_focusAC,this,null);if(!this.isEmpty()){this.commit();}if(this.parent){this.parent.remove(this);}else{this._uiManager.removeEditor(this);}if(_classPrivateFieldGet(_moveInDOMTimeout,this)){clearTimeout(_classPrivateFieldGet(_moveInDOMTimeout,this));_classPrivateFieldSet(_moveInDOMTimeout,this,null);}_assertClassBrand(_AnnotationEditor_brand,this,_stopResizing).call(this);this.removeEditToolbar();if(_classPrivateFieldGet(_telemetryTimeouts,this)){var _iterator44=_createForOfIteratorHelper(_classPrivateFieldGet(_telemetryTimeouts,this).values()),_step44;try{for(_iterator44.s();!(_step44=_iterator44.n()).done;){var timeout=_step44.value;clearTimeout(timeout);}}catch(err){_iterator44.e(err);}finally{_iterator44.f();}_classPrivateFieldSet(_telemetryTimeouts,this,null);}this.parent=null;(_classPrivateFieldGet48=_classPrivateFieldGet(_touchManager,this))===null||_classPrivateFieldGet48===void 0||_classPrivateFieldGet48.destroy();_classPrivateFieldSet(_touchManager,this,null);}},{key:"isResizable",get:function get(){return false;}},{key:"makeResizable",value:function makeResizable(){if(this.isResizable){_assertClassBrand(_AnnotationEditor_brand,this,_createResizers).call(this);_classPrivateFieldGet(_resizersDiv,this).classList.remove("hidden");bindEvents(this,this.div,["keydown"]);}}},{key:"toolbarPosition",get:function get(){return null;}},{key:"keydown",value:function keydown(event){if(!this.isResizable||event.target!==this.div||event.key!=="Enter"){return;}this._uiManager.setSelected(this);_classPrivateFieldSet(_savedDimensions,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});var children=_classPrivateFieldGet(_resizersDiv,this).children;if(!_classPrivateFieldGet(_allResizerDivs,this)){_classPrivateFieldSet(_allResizerDivs,this,Array.from(children));var boundResizerKeydown=_assertClassBrand(_AnnotationEditor_brand,this,_resizerKeydown).bind(this);var boundResizerBlur=_assertClassBrand(_AnnotationEditor_brand,this,_resizerBlur).bind(this);var signal=this._uiManager._signal;var _iterator45=_createForOfIteratorHelper(_classPrivateFieldGet(_allResizerDivs,this)),_step45;try{for(_iterator45.s();!(_step45=_iterator45.n()).done;){var div=_step45.value;var name=div.getAttribute("data-resizer-name");div.setAttribute("role","spinbutton");div.addEventListener("keydown",boundResizerKeydown,{signal:signal});div.addEventListener("blur",boundResizerBlur,{signal:signal});div.addEventListener("focus",_assertClassBrand(_AnnotationEditor_brand,this,_resizerFocus).bind(this,name),{signal:signal});div.setAttribute("data-l10n-id",AnnotationEditor._l10nResizer[name]);}}catch(err){_iterator45.e(err);}finally{_iterator45.f();}}var first=_classPrivateFieldGet(_allResizerDivs,this)[0];var firstPosition=0;var _iterator46=_createForOfIteratorHelper(children),_step46;try{for(_iterator46.s();!(_step46=_iterator46.n()).done;){var _div2=_step46.value;if(_div2===first){break;}firstPosition++;}}catch(err){_iterator46.e(err);}finally{_iterator46.f();}var nextFirstPosition=(360-this.rotation+this.parentRotation)%360/90*(_classPrivateFieldGet(_allResizerDivs,this).length/4);if(nextFirstPosition!==firstPosition){if(nextFirstPosition<firstPosition){for(var _i5=0;_i5<firstPosition-nextFirstPosition;_i5++){_classPrivateFieldGet(_resizersDiv,this).append(_classPrivateFieldGet(_resizersDiv,this).firstChild);}}else if(nextFirstPosition>firstPosition){for(var _i6=0;_i6<nextFirstPosition-firstPosition;_i6++){_classPrivateFieldGet(_resizersDiv,this).firstChild.before(_classPrivateFieldGet(_resizersDiv,this).lastChild);}}var i=0;var _iterator47=_createForOfIteratorHelper(children),_step47;try{for(_iterator47.s();!(_step47=_iterator47.n()).done;){var child=_step47.value;var _div=_classPrivateFieldGet(_allResizerDivs,this)[i++];var _name2=_div.getAttribute("data-resizer-name");child.setAttribute("data-l10n-id",AnnotationEditor._l10nResizer[_name2]);}}catch(err){_iterator47.e(err);}finally{_iterator47.f();}}_assertClassBrand(_AnnotationEditor_brand,this,_setResizerTabIndex).call(this,0);_classPrivateFieldSet(_isResizerEnabledForKeyboard,this,true);_classPrivateFieldGet(_resizersDiv,this).firstChild.focus({focusVisible:true});event.preventDefault();event.stopImmediatePropagation();}},{key:"_resizeWithKeyboard",value:function _resizeWithKeyboard(x,y){if(!_classPrivateFieldGet(_isResizerEnabledForKeyboard,this)){return;}_assertClassBrand(_AnnotationEditor_brand,this,_resizerPointermove).call(this,_classPrivateFieldGet(_focusedResizerName,this),{deltaX:x,deltaY:y,fromKeyboard:true});}},{key:"_stopResizingWithKeyboard",value:function _stopResizingWithKeyboard(){_assertClassBrand(_AnnotationEditor_brand,this,_stopResizing).call(this);this.div.focus();}},{key:"select",value:function select(){var _this$div2,_this18=this,_this$_editToolbar2,_classPrivateFieldGet49;this.makeResizable();(_this$div2=this.div)===null||_this$div2===void 0||_this$div2.classList.add("selectedEditor");if(!this._editToolbar){this.addEditToolbar().then(function(){var _this18$div;if((_this18$div=_this18.div)!==null&&_this18$div!==void 0&&_this18$div.classList.contains("selectedEditor")){var _this18$_editToolbar;(_this18$_editToolbar=_this18._editToolbar)===null||_this18$_editToolbar===void 0||_this18$_editToolbar.show();}});return;}(_this$_editToolbar2=this._editToolbar)===null||_this$_editToolbar2===void 0||_this$_editToolbar2.show();(_classPrivateFieldGet49=_classPrivateFieldGet(_altText3,this))===null||_classPrivateFieldGet49===void 0||_classPrivateFieldGet49.toggleAltTextBadge(false);}},{key:"unselect",value:function unselect(){var _classPrivateFieldGet50,_this$div3,_this$div4,_this$_editToolbar3,_classPrivateFieldGet51;(_classPrivateFieldGet50=_classPrivateFieldGet(_resizersDiv,this))===null||_classPrivateFieldGet50===void 0||_classPrivateFieldGet50.classList.add("hidden");(_this$div3=this.div)===null||_this$div3===void 0||_this$div3.classList.remove("selectedEditor");if((_this$div4=this.div)!==null&&_this$div4!==void 0&&_this$div4.contains(document.activeElement)){this._uiManager.currentLayer.div.focus({preventScroll:true});}(_this$_editToolbar3=this._editToolbar)===null||_this$_editToolbar3===void 0||_this$_editToolbar3.hide();(_classPrivateFieldGet51=_classPrivateFieldGet(_altText3,this))===null||_classPrivateFieldGet51===void 0||_classPrivateFieldGet51.toggleAltTextBadge(true);}},{key:"updateParams",value:function updateParams(type,value){}},{key:"disableEditing",value:function disableEditing(){}},{key:"enableEditing",value:function enableEditing(){}},{key:"enterInEditMode",value:function enterInEditMode(){}},{key:"getImageForAltText",value:function getImageForAltText(){return null;}},{key:"contentDiv",get:function get(){return this.div;}},{key:"isEditing",get:function get(){return _classPrivateFieldGet(_isEditing,this);},set:function set(value){_classPrivateFieldSet(_isEditing,this,value);if(!this.parent){return;}if(value){this.parent.setSelected(this);this.parent.setActiveEditor(this);}else{this.parent.setActiveEditor(null);}}},{key:"setAspectRatio",value:function setAspectRatio(width,height){_classPrivateFieldSet(_keepAspectRatio,this,true);var aspectRatio=width/height;var style=this.div.style;style.aspectRatio=aspectRatio;style.height="auto";}},{key:"telemetryInitialData",get:function get(){return{action:"added"};}},{key:"telemetryFinalData",get:function get(){return null;}},{key:"_reportTelemetry",value:function _reportTelemetry(data){var _this19=this;var mustWait=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(mustWait){_classPrivateFieldGet(_telemetryTimeouts,this)||_classPrivateFieldSet(_telemetryTimeouts,this,new Map());var action=data.action;var timeout=_classPrivateFieldGet(_telemetryTimeouts,this).get(action);if(timeout){clearTimeout(timeout);}timeout=setTimeout(function(){_this19._reportTelemetry(data);_classPrivateFieldGet(_telemetryTimeouts,_this19)["delete"](action);if(_classPrivateFieldGet(_telemetryTimeouts,_this19).size===0){_classPrivateFieldSet(_telemetryTimeouts,_this19,null);}},AnnotationEditor._telemetryTimeout);_classPrivateFieldGet(_telemetryTimeouts,this).set(action,timeout);return;}data.type||(data.type=this.editorType);this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:data}});}},{key:"show",value:function show(){var visible=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this._isVisible;this.div.classList.toggle("hidden",!visible);this._isVisible=visible;}},{key:"enable",value:function enable(){if(this.div){this.div.tabIndex=0;}_classPrivateFieldSet(_disabled,this,false);}},{key:"disable",value:function disable(){if(this.div){this.div.tabIndex=-1;}_classPrivateFieldSet(_disabled,this,true);}},{key:"renderAnnotationElement",value:function renderAnnotationElement(annotation){var content=annotation.container.querySelector(".annotationContent");if(!content){content=document.createElement("div");content.classList.add("annotationContent",this.editorType);annotation.container.prepend(content);}else if(content.nodeName==="CANVAS"){var canvas=content;content=document.createElement("div");content.classList.add("annotationContent",this.editorType);canvas.before(content);}return content;}},{key:"resetAnnotationElement",value:function resetAnnotationElement(annotation){var firstChild=annotation.container.firstChild;if((firstChild===null||firstChild===void 0?void 0:firstChild.nodeName)==="DIV"&&firstChild.classList.contains("annotationContent")){firstChild.remove();}}}],[{key:"_resizerKeyboardManager",get:function get(){var resize=AnnotationEditor.prototype._resizeWithKeyboard;var small=_AnnotationEditorUIManager.TRANSLATE_SMALL;var big=_AnnotationEditorUIManager.TRANSLATE_BIG;return _shadow(this,"_resizerKeyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],resize,{args:[-small,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],resize,{args:[-big,0]}],[["ArrowRight","mac+ArrowRight"],resize,{args:[small,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],resize,{args:[big,0]}],[["ArrowUp","mac+ArrowUp"],resize,{args:[0,-small]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],resize,{args:[0,-big]}],[["ArrowDown","mac+ArrowDown"],resize,{args:[0,small]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],resize,{args:[0,big]}],[["Escape","mac+Escape"],AnnotationEditor.prototype._stopResizingWithKeyboard]]));}},{key:"isDrawer",get:function get(){return false;}},{key:"_defaultLineColor",get:function get(){return _shadow(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"));}},{key:"deleteAnnotationElement",value:function deleteAnnotationElement(editor){var fakeEditor=new FakeEditor({id:editor.parent.getNextId(),parent:editor.parent,uiManager:editor._uiManager});fakeEditor.annotationElementId=editor.annotationElementId;fakeEditor.deleted=true;fakeEditor._uiManager.addToAnnotationStorage(fakeEditor);}},{key:"initialize",value:function initialize(l10n,_uiManager){var _AnnotationEditor$_l;(_AnnotationEditor$_l=AnnotationEditor._l10n)!==null&&_AnnotationEditor$_l!==void 0?_AnnotationEditor$_l:AnnotationEditor._l10n=l10n;AnnotationEditor._l10nResizer||(AnnotationEditor._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}));if(AnnotationEditor._borderLineWidth!==-1){return;}var style=getComputedStyle(document.documentElement);AnnotationEditor._borderLineWidth=parseFloat(style.getPropertyValue("--outline-width"))||0;}},{key:"updateDefaultParams",value:function updateDefaultParams(_type,_value){}},{key:"defaultPropertiesToUpdate",get:function get(){return[];}},{key:"isHandlingMimeForPasting",value:function isHandlingMimeForPasting(mime){return false;}},{key:"paste",value:function paste(item,parent){unreachable("Not implemented");}},{key:"_round",value:function _round(x){return Math.round(x*10000)/10000;}},{key:"deserialize",value:function(){var _deserialize=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee14(data,parent,uiManager){var editor,_editor$pageDimension,pageWidth,pageHeight,_editor$getRectInCurr,_editor$getRectInCurr2,x,y,width,height;return _regeneratorRuntime().wrap(function _callee14$(_context14){while(1)switch(_context14.prev=_context14.next){case 0:editor=new this.prototype.constructor({parent:parent,id:parent.getNextId(),uiManager:uiManager});editor.rotation=data.rotation;_classPrivateFieldSet(_accessibilityData,editor,data.accessibilityData);editor._isCopy=data.isCopy||false;_editor$pageDimension=_slicedToArray(editor.pageDimensions,2),pageWidth=_editor$pageDimension[0],pageHeight=_editor$pageDimension[1];_editor$getRectInCurr=editor.getRectInCurrentCoords(data.rect,pageHeight),_editor$getRectInCurr2=_slicedToArray(_editor$getRectInCurr,4),x=_editor$getRectInCurr2[0],y=_editor$getRectInCurr2[1],width=_editor$getRectInCurr2[2],height=_editor$getRectInCurr2[3];editor.x=x/pageWidth;editor.y=y/pageHeight;editor.width=width/pageWidth;editor.height=height/pageHeight;return _context14.abrupt("return",editor);case 11:case"end":return _context14.stop();}},_callee14,this);}));function deserialize(_x15,_x16,_x17){return _deserialize.apply(this,arguments);}return deserialize;}()},{key:"MIN_SIZE",get:function get(){return 16;}},{key:"canCreateNewEmptyEditor",value:function canCreateNewEmptyEditor(){return true;}}]);}();_AnnotationEditor=AnnotationEditor;function _translate(_ref140,x,y){var _ref141=_slicedToArray(_ref140,2),width=_ref141[0],height=_ref141[1];var _this$screenToPageTra3=this.screenToPageTranslation(x,y);var _this$screenToPageTra4=_slicedToArray(_this$screenToPageTra3,2);x=_this$screenToPageTra4[0];y=_this$screenToPageTra4[1];this.x+=x/width;this.y+=y/height;this._onTranslating(this.x,this.y);this.fixAndSetPosition();}function _rotatePoint(x,y,angle){switch(angle){case 90:return[y,-x];case 180:return[-x,-y];case 270:return[-y,x];default:return[x,y];}}function _getRotationMatrix(rotation){switch(rotation){case 90:{var _this$pageDimensions8=_slicedToArray(this.pageDimensions,2),pageWidth=_this$pageDimensions8[0],pageHeight=_this$pageDimensions8[1];return[0,-pageWidth/pageHeight,pageHeight/pageWidth,0];}case 180:return[-1,0,0,-1];case 270:{var _this$pageDimensions9=_slicedToArray(this.pageDimensions,2),_pageWidth4=_this$pageDimensions9[0],_pageHeight4=_this$pageDimensions9[1];return[0,_pageWidth4/_pageHeight4,-_pageHeight4/_pageWidth4,0];}default:return[1,0,0,1];}}function _createResizers(){if(_classPrivateFieldGet(_resizersDiv,this)){return;}_classPrivateFieldSet(_resizersDiv,this,document.createElement("div"));_classPrivateFieldGet(_resizersDiv,this).classList.add("resizers");var classes=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"];var signal=this._uiManager._signal;for(var _i34=0,_classes=classes;_i34<_classes.length;_i34++){var name=_classes[_i34];var div=document.createElement("div");_classPrivateFieldGet(_resizersDiv,this).append(div);div.classList.add("resizer",name);div.setAttribute("data-resizer-name",name);div.addEventListener("pointerdown",_assertClassBrand(_AnnotationEditor_brand,this,_resizerPointerdown).bind(this,name),{signal:signal});div.addEventListener("contextmenu",_noContextMenu,{signal:signal});div.tabIndex=-1;}this.div.prepend(_classPrivateFieldGet(_resizersDiv,this));}function _resizerPointerdown(name,event){var _classPrivateFieldGet144,_this113=this;event.preventDefault();var isMac=util_FeatureTest.platform.isMac;if(event.button!==0||event.ctrlKey&&isMac){return;}(_classPrivateFieldGet144=_classPrivateFieldGet(_altText3,this))===null||_classPrivateFieldGet144===void 0||_classPrivateFieldGet144.toggle(false);var savedDraggable=this._isDraggable;this._isDraggable=false;_classPrivateFieldSet(_lastPointerCoords,this,[event.screenX,event.screenY]);var ac=new AbortController();var signal=this._uiManager.combinedSignal(ac);this.parent.togglePointerEvents(false);window.addEventListener("pointermove",_assertClassBrand(_AnnotationEditor_brand,this,_resizerPointermove).bind(this,name),{passive:true,capture:true,signal:signal});window.addEventListener("touchmove",_stopEvent,{passive:false,signal:signal});window.addEventListener("contextmenu",_noContextMenu,{signal:signal});_classPrivateFieldSet(_savedDimensions,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});var savedParentCursor=this.parent.div.style.cursor;var savedCursor=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(event.target).cursor;var pointerUpCallback=function pointerUpCallback(){var _classPrivateFieldGet145;ac.abort();_this113.parent.togglePointerEvents(true);(_classPrivateFieldGet145=_classPrivateFieldGet(_altText3,_this113))===null||_classPrivateFieldGet145===void 0||_classPrivateFieldGet145.toggle(true);_this113._isDraggable=savedDraggable;_this113.parent.div.style.cursor=savedParentCursor;_this113.div.style.cursor=savedCursor;_assertClassBrand(_AnnotationEditor_brand,_this113,_addResizeToUndoStack).call(_this113);};window.addEventListener("pointerup",pointerUpCallback,{signal:signal});window.addEventListener("blur",pointerUpCallback,{signal:signal});}function _resize(x,y,width,height){this.width=width;this.height=height;this.x=x;this.y=y;var _this$parentDimension13=_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension13[0],parentHeight=_this$parentDimension13[1];this.setDims(parentWidth*width,parentHeight*height);this.fixAndSetPosition();this._onResized();}function _addResizeToUndoStack(){if(!_classPrivateFieldGet(_savedDimensions,this)){return;}var _classPrivateFieldGet146=_classPrivateFieldGet(_savedDimensions,this),savedX=_classPrivateFieldGet146.savedX,savedY=_classPrivateFieldGet146.savedY,savedWidth=_classPrivateFieldGet146.savedWidth,savedHeight=_classPrivateFieldGet146.savedHeight;_classPrivateFieldSet(_savedDimensions,this,null);var newX=this.x;var newY=this.y;var newWidth=this.width;var newHeight=this.height;if(newX===savedX&&newY===savedY&&newWidth===savedWidth&&newHeight===savedHeight){return;}this.addCommands({cmd:_assertClassBrand(_AnnotationEditor_brand,this,_resize).bind(this,newX,newY,newWidth,newHeight),undo:_assertClassBrand(_AnnotationEditor_brand,this,_resize).bind(this,savedX,savedY,savedWidth,savedHeight),mustExec:true});}function _resizerPointermove(name,event){var _this$parentDimension14=_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension14[0],parentHeight=_this$parentDimension14[1];var savedX=this.x;var savedY=this.y;var savedWidth=this.width;var savedHeight=this.height;var minWidth=_AnnotationEditor.MIN_SIZE/parentWidth;var minHeight=_AnnotationEditor.MIN_SIZE/parentHeight;var rotationMatrix=_assertClassBrand(_AnnotationEditor_brand,this,_getRotationMatrix).call(this,this.rotation);var transf=function transf(x,y){return[rotationMatrix[0]*x+rotationMatrix[2]*y,rotationMatrix[1]*x+rotationMatrix[3]*y];};var invRotationMatrix=_assertClassBrand(_AnnotationEditor_brand,this,_getRotationMatrix).call(this,360-this.rotation);var invTransf=function invTransf(x,y){return[invRotationMatrix[0]*x+invRotationMatrix[2]*y,invRotationMatrix[1]*x+invRotationMatrix[3]*y];};var getPoint;var getOpposite;var isDiagonal=false;var isHorizontal=false;switch(name){case"topLeft":isDiagonal=true;getPoint=function getPoint(w,h){return[0,0];};getOpposite=function getOpposite(w,h){return[w,h];};break;case"topMiddle":getPoint=function getPoint(w,h){return[w/2,0];};getOpposite=function getOpposite(w,h){return[w/2,h];};break;case"topRight":isDiagonal=true;getPoint=function getPoint(w,h){return[w,0];};getOpposite=function getOpposite(w,h){return[0,h];};break;case"middleRight":isHorizontal=true;getPoint=function getPoint(w,h){return[w,h/2];};getOpposite=function getOpposite(w,h){return[0,h/2];};break;case"bottomRight":isDiagonal=true;getPoint=function getPoint(w,h){return[w,h];};getOpposite=function getOpposite(w,h){return[0,0];};break;case"bottomMiddle":getPoint=function getPoint(w,h){return[w/2,h];};getOpposite=function getOpposite(w,h){return[w/2,0];};break;case"bottomLeft":isDiagonal=true;getPoint=function getPoint(w,h){return[0,h];};getOpposite=function getOpposite(w,h){return[w,0];};break;case"middleLeft":isHorizontal=true;getPoint=function getPoint(w,h){return[0,h/2];};getOpposite=function getOpposite(w,h){return[w,h/2];};break;}var point=getPoint(savedWidth,savedHeight);var oppositePoint=getOpposite(savedWidth,savedHeight);var transfOppositePoint=transf.apply(void 0,_toConsumableArray(oppositePoint));var oppositeX=_AnnotationEditor._round(savedX+transfOppositePoint[0]);var oppositeY=_AnnotationEditor._round(savedY+transfOppositePoint[1]);var ratioX=1;var ratioY=1;var deltaX,deltaY;if(!event.fromKeyboard){var screenX=event.screenX,screenY=event.screenY;var _classPrivateFieldGet147=_classPrivateFieldGet(_lastPointerCoords,this),_classPrivateFieldGet148=_slicedToArray(_classPrivateFieldGet147,2),lastScreenX=_classPrivateFieldGet148[0],lastScreenY=_classPrivateFieldGet148[1];var _this$screenToPageTra5=this.screenToPageTranslation(screenX-lastScreenX,screenY-lastScreenY);var _this$screenToPageTra6=_slicedToArray(_this$screenToPageTra5,2);deltaX=_this$screenToPageTra6[0];deltaY=_this$screenToPageTra6[1];_classPrivateFieldGet(_lastPointerCoords,this)[0]=screenX;_classPrivateFieldGet(_lastPointerCoords,this)[1]=screenY;}else{deltaX=event.deltaX;deltaY=event.deltaY;}var _invTransf=invTransf(deltaX/parentWidth,deltaY/parentHeight);var _invTransf2=_slicedToArray(_invTransf,2);deltaX=_invTransf2[0];deltaY=_invTransf2[1];if(isDiagonal){var oldDiag=Math.hypot(savedWidth,savedHeight);ratioX=ratioY=Math.max(Math.min(Math.hypot(oppositePoint[0]-point[0]-deltaX,oppositePoint[1]-point[1]-deltaY)/oldDiag,1/savedWidth,1/savedHeight),minWidth/savedWidth,minHeight/savedHeight);}else if(isHorizontal){ratioX=Math.max(minWidth,Math.min(1,Math.abs(oppositePoint[0]-point[0]-deltaX)))/savedWidth;}else{ratioY=Math.max(minHeight,Math.min(1,Math.abs(oppositePoint[1]-point[1]-deltaY)))/savedHeight;}var newWidth=_AnnotationEditor._round(savedWidth*ratioX);var newHeight=_AnnotationEditor._round(savedHeight*ratioY);transfOppositePoint=transf.apply(void 0,_toConsumableArray(getOpposite(newWidth,newHeight)));var newX=oppositeX-transfOppositePoint[0];var newY=oppositeY-transfOppositePoint[1];_classPrivateFieldGet(_initialRect,this)||_classPrivateFieldSet(_initialRect,this,[this.x,this.y,this.width,this.height]);this.width=newWidth;this.height=newHeight;this.x=newX;this.y=newY;this.setDims(parentWidth*newWidth,parentHeight*newHeight);this.fixAndSetPosition();this._onResizing();}function _touchPinchStartCallback(){var _classPrivateFieldGet149;_classPrivateFieldSet(_savedDimensions,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});(_classPrivateFieldGet149=_classPrivateFieldGet(_altText3,this))===null||_classPrivateFieldGet149===void 0||_classPrivateFieldGet149.toggle(false);this.parent.togglePointerEvents(false);}function _touchPinchCallback(_origin,prevDistance,distance){var slowDownFactor=0.7;var factor=slowDownFactor*(distance/prevDistance)+1-slowDownFactor;if(factor===1){return;}var rotationMatrix=_assertClassBrand(_AnnotationEditor_brand,this,_getRotationMatrix).call(this,this.rotation);var transf=function transf(x,y){return[rotationMatrix[0]*x+rotationMatrix[2]*y,rotationMatrix[1]*x+rotationMatrix[3]*y];};var _this$parentDimension15=_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension15[0],parentHeight=_this$parentDimension15[1];var savedX=this.x;var savedY=this.y;var savedWidth=this.width;var savedHeight=this.height;var minWidth=_AnnotationEditor.MIN_SIZE/parentWidth;var minHeight=_AnnotationEditor.MIN_SIZE/parentHeight;factor=Math.max(Math.min(factor,1/savedWidth,1/savedHeight),minWidth/savedWidth,minHeight/savedHeight);var newWidth=_AnnotationEditor._round(savedWidth*factor);var newHeight=_AnnotationEditor._round(savedHeight*factor);if(newWidth===savedWidth&&newHeight===savedHeight){return;}_classPrivateFieldGet(_initialRect,this)||_classPrivateFieldSet(_initialRect,this,[savedX,savedY,savedWidth,savedHeight]);var transfCenterPoint=transf(savedWidth/2,savedHeight/2);var centerX=_AnnotationEditor._round(savedX+transfCenterPoint[0]);var centerY=_AnnotationEditor._round(savedY+transfCenterPoint[1]);var newTransfCenterPoint=transf(newWidth/2,newHeight/2);this.x=centerX-newTransfCenterPoint[0];this.y=centerY-newTransfCenterPoint[1];this.width=newWidth;this.height=newHeight;this.setDims(parentWidth*newWidth,parentHeight*newHeight);this.fixAndSetPosition();this._onResizing();}function _touchPinchEndCallback(){var _classPrivateFieldGet150;(_classPrivateFieldGet150=_classPrivateFieldGet(_altText3,this))===null||_classPrivateFieldGet150===void 0||_classPrivateFieldGet150.toggle(true);this.parent.togglePointerEvents(true);_assertClassBrand(_AnnotationEditor_brand,this,_addResizeToUndoStack).call(this);}function _selectOnPointerEvent(event){var isMac=util_FeatureTest.platform.isMac;if(event.ctrlKey&&!isMac||event.shiftKey||event.metaKey&&isMac){this.parent.toggleSelected(this);}else{this.parent.setSelected(this);}}function _setUpDragSession(event){var _this114=this;var isSelected=this.isSelected;this._uiManager.setUpDragSession();var hasDraggingStarted=false;var ac=new AbortController();var signal=this._uiManager.combinedSignal(ac);var opts={capture:true,passive:false,signal:signal};var cancelDrag=function cancelDrag(e){ac.abort();_classPrivateFieldSet(_dragPointerId,_this114,null);_classPrivateFieldSet(_hasBeenClicked,_this114,false);if(!_this114._uiManager.endDragSession()){_assertClassBrand(_AnnotationEditor_brand,_this114,_selectOnPointerEvent).call(_this114,e);}if(hasDraggingStarted){_this114._onStopDragging();}};if(isSelected){_classPrivateFieldSet(_prevDragX,this,event.clientX);_classPrivateFieldSet(_prevDragY,this,event.clientY);_classPrivateFieldSet(_dragPointerId,this,event.pointerId);_classPrivateFieldSet(_dragPointerType,this,event.pointerType);window.addEventListener("pointermove",function(e){if(!hasDraggingStarted){hasDraggingStarted=true;_this114._onStartDragging();}var x=e.clientX,y=e.clientY,pointerId=e.pointerId;if(pointerId!==_classPrivateFieldGet(_dragPointerId,_this114)){_stopEvent(e);return;}var _this114$screenToPage=_this114.screenToPageTranslation(x-_classPrivateFieldGet(_prevDragX,_this114),y-_classPrivateFieldGet(_prevDragY,_this114)),_this114$screenToPage2=_slicedToArray(_this114$screenToPage,2),tx=_this114$screenToPage2[0],ty=_this114$screenToPage2[1];_classPrivateFieldSet(_prevDragX,_this114,x);_classPrivateFieldSet(_prevDragY,_this114,y);_this114._uiManager.dragSelectedEditors(tx,ty);},opts);window.addEventListener("touchmove",_stopEvent,opts);window.addEventListener("pointerdown",function(e){if(e.pointerType===_classPrivateFieldGet(_dragPointerType,_this114)){if(_classPrivateFieldGet(_touchManager,_this114)||e.isPrimary){cancelDrag(e);}}_stopEvent(e);},opts);}var pointerUpCallback=function pointerUpCallback(e){if(!_classPrivateFieldGet(_dragPointerId,_this114)||_classPrivateFieldGet(_dragPointerId,_this114)===e.pointerId){cancelDrag(e);return;}_stopEvent(e);};window.addEventListener("pointerup",pointerUpCallback,{signal:signal});window.addEventListener("blur",pointerUpCallback,{signal:signal});}function _addFocusListeners(){if(_classPrivateFieldGet(_focusAC,this)||!this.div){return;}_classPrivateFieldSet(_focusAC,this,new AbortController());var signal=this._uiManager.combinedSignal(_classPrivateFieldGet(_focusAC,this));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:signal});this.div.addEventListener("focusout",this.focusout.bind(this),{signal:signal});}function _resizerKeydown(event){_AnnotationEditor._resizerKeyboardManager.exec(this,event);}function _resizerBlur(event){var _event$relatedTarget;if(_classPrivateFieldGet(_isResizerEnabledForKeyboard,this)&&((_event$relatedTarget=event.relatedTarget)===null||_event$relatedTarget===void 0?void 0:_event$relatedTarget.parentNode)!==_classPrivateFieldGet(_resizersDiv,this)){_assertClassBrand(_AnnotationEditor_brand,this,_stopResizing).call(this);}}function _resizerFocus(name){_classPrivateFieldSet(_focusedResizerName,this,_classPrivateFieldGet(_isResizerEnabledForKeyboard,this)?name:"");}function _setResizerTabIndex(value){if(!_classPrivateFieldGet(_allResizerDivs,this)){return;}var _iterator179=_createForOfIteratorHelper(_classPrivateFieldGet(_allResizerDivs,this)),_step179;try{for(_iterator179.s();!(_step179=_iterator179.n()).done;){var div=_step179.value;div.tabIndex=value;}}catch(err){_iterator179.e(err);}finally{_iterator179.f();}}function _stopResizing(){_classPrivateFieldSet(_isResizerEnabledForKeyboard,this,false);_assertClassBrand(_AnnotationEditor_brand,this,_setResizerTabIndex).call(this,-1);_assertClassBrand(_AnnotationEditor_brand,this,_addResizeToUndoStack).call(this);}_defineProperty(AnnotationEditor,"_l10n",null);_defineProperty(AnnotationEditor,"_l10nResizer",null);_defineProperty(AnnotationEditor,"_borderLineWidth",-1);_defineProperty(AnnotationEditor,"_colorManager",new ColorManager());_defineProperty(AnnotationEditor,"_zIndex",1);_defineProperty(AnnotationEditor,"_telemetryTimeout",1000);var FakeEditor=/*#__PURE__*/function(_AnnotationEditor2){function FakeEditor(params){var _this20;_classCallCheck(this,FakeEditor);_this20=_callSuper(this,FakeEditor,[params]);_this20.annotationElementId=params.annotationElementId;_this20.deleted=true;return _this20;}_inherits(FakeEditor,_AnnotationEditor2);return _createClass(FakeEditor,[{key:"serialize",value:function serialize(){return this.serializeDeleted();}}]);}(AnnotationEditor);;// ./src/shared/murmurhash3.js\nvar SEED=0xc3d2e1f0;var MASK_HIGH=0xffff0000;var MASK_LOW=0xffff;var MurmurHash3_64=/*#__PURE__*/function(){function MurmurHash3_64(seed){_classCallCheck(this,MurmurHash3_64);this.h1=seed?seed&0xffffffff:SEED;this.h2=seed?seed&0xffffffff:SEED;}return _createClass(MurmurHash3_64,[{key:"update",value:function update(input){var data,length;if(typeof input==="string"){data=new Uint8Array(input.length*2);length=0;for(var i=0,ii=input.length;i<ii;i++){var code=input.charCodeAt(i);if(code<=0xff){data[length++]=code;}else{data[length++]=code>>>8;data[length++]=code&0xff;}}}else if(ArrayBuffer.isView(input)){data=input.slice();length=data.byteLength;}else{throw new Error("Invalid data format, must be a string or TypedArray.");}var blockCounts=length>>2;var tailLength=length-blockCounts*4;var dataUint32=new Uint32Array(data.buffer,0,blockCounts);var k1=0,k2=0;var h1=this.h1,h2=this.h2;var C1=0xcc9e2d51,C2=0x1b873593;var C1_LOW=C1&MASK_LOW,C2_LOW=C2&MASK_LOW;for(var _i7=0;_i7<blockCounts;_i7++){if(_i7&1){k1=dataUint32[_i7];k1=k1*C1&MASK_HIGH|k1*C1_LOW&MASK_LOW;k1=k1<<15|k1>>>17;k1=k1*C2&MASK_HIGH|k1*C2_LOW&MASK_LOW;h1^=k1;h1=h1<<13|h1>>>19;h1=h1*5+0xe6546b64;}else{k2=dataUint32[_i7];k2=k2*C1&MASK_HIGH|k2*C1_LOW&MASK_LOW;k2=k2<<15|k2>>>17;k2=k2*C2&MASK_HIGH|k2*C2_LOW&MASK_LOW;h2^=k2;h2=h2<<13|h2>>>19;h2=h2*5+0xe6546b64;}}k1=0;switch(tailLength){case 3:k1^=data[blockCounts*4+2]<<16;case 2:k1^=data[blockCounts*4+1]<<8;case 1:k1^=data[blockCounts*4];k1=k1*C1&MASK_HIGH|k1*C1_LOW&MASK_LOW;k1=k1<<15|k1>>>17;k1=k1*C2&MASK_HIGH|k1*C2_LOW&MASK_LOW;if(blockCounts&1){h1^=k1;}else{h2^=k1;}}this.h1=h1;this.h2=h2;}},{key:"hexdigest",value:function hexdigest(){var h1=this.h1,h2=this.h2;h1^=h2>>>1;h1=h1*0xed558ccd&MASK_HIGH|h1*0x8ccd&MASK_LOW;h2=h2*0xff51afd7&MASK_HIGH|((h2<<16|h1>>>16)*0xafd7ed55&MASK_HIGH)>>>16;h1^=h2>>>1;h1=h1*0x1a85ec53&MASK_HIGH|h1*0xec53&MASK_LOW;h2=h2*0xc4ceb9fe&MASK_HIGH|((h2<<16|h1>>>16)*0xb9fe1a85&MASK_HIGH)>>>16;h1^=h2>>>1;return(h1>>>0).toString(16).padStart(8,"0")+(h2>>>0).toString(16).padStart(8,"0");}}]);}();;// ./src/display/annotation_storage.js\nvar SerializableEmpty=Object.freeze({map:null,hash:"",transfer:undefined});var _modified=/*#__PURE__*/new WeakMap();var _modifiedIds=/*#__PURE__*/new WeakMap();var _storage=/*#__PURE__*/new WeakMap();var _AnnotationStorage_brand=/*#__PURE__*/new WeakSet();var AnnotationStorage=/*#__PURE__*/function(){function AnnotationStorage(){_classCallCheck(this,AnnotationStorage);_classPrivateMethodInitSpec(this,_AnnotationStorage_brand);_classPrivateFieldInitSpec(this,_modified,false);_classPrivateFieldInitSpec(this,_modifiedIds,null);_classPrivateFieldInitSpec(this,_storage,new Map());this.onSetModified=null;this.onResetModified=null;this.onAnnotationEditor=null;}return _createClass(AnnotationStorage,[{key:"getValue",value:function getValue(key,defaultValue){var value=_classPrivateFieldGet(_storage,this).get(key);if(value===undefined){return defaultValue;}return Object.assign(defaultValue,value);}},{key:"getRawValue",value:function getRawValue(key){return _classPrivateFieldGet(_storage,this).get(key);}},{key:"remove",value:function remove(key){_classPrivateFieldGet(_storage,this)["delete"](key);if(_classPrivateFieldGet(_storage,this).size===0){this.resetModified();}if(typeof this.onAnnotationEditor==="function"){var _iterator48=_createForOfIteratorHelper(_classPrivateFieldGet(_storage,this).values()),_step48;try{for(_iterator48.s();!(_step48=_iterator48.n()).done;){var value=_step48.value;if(value instanceof AnnotationEditor){return;}}}catch(err){_iterator48.e(err);}finally{_iterator48.f();}this.onAnnotationEditor(null);}}},{key:"setValue",value:function setValue(key,value){var obj=_classPrivateFieldGet(_storage,this).get(key);var modified=false;if(obj!==undefined){for(var _i8=0,_Object$entries=Object.entries(value);_i8<_Object$entries.length;_i8++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i8],2),entry=_Object$entries$_i[0],val=_Object$entries$_i[1];if(obj[entry]!==val){modified=true;obj[entry]=val;}}}else{modified=true;_classPrivateFieldGet(_storage,this).set(key,value);}if(modified){_assertClassBrand(_AnnotationStorage_brand,this,_setModified).call(this);}if(value instanceof AnnotationEditor&&typeof this.onAnnotationEditor==="function"){this.onAnnotationEditor(value.constructor._type);}}},{key:"has",value:function has(key){return _classPrivateFieldGet(_storage,this).has(key);}},{key:"getAll",value:function getAll(){return _classPrivateFieldGet(_storage,this).size>0?objectFromMap(_classPrivateFieldGet(_storage,this)):null;}},{key:"setAll",value:function setAll(obj){for(var _i9=0,_Object$entries2=Object.entries(obj);_i9<_Object$entries2.length;_i9++){var _Object$entries2$_i=_slicedToArray(_Object$entries2[_i9],2),key=_Object$entries2$_i[0],val=_Object$entries2$_i[1];this.setValue(key,val);}}},{key:"size",get:function get(){return _classPrivateFieldGet(_storage,this).size;}},{key:"resetModified",value:function resetModified(){if(_classPrivateFieldGet(_modified,this)){_classPrivateFieldSet(_modified,this,false);if(typeof this.onResetModified==="function"){this.onResetModified();}}}},{key:"print",get:function get(){return new PrintAnnotationStorage(this);}},{key:"serializable",get:function get(){if(_classPrivateFieldGet(_storage,this).size===0){return SerializableEmpty;}var map=new Map(),hash=new MurmurHash3_64(),transfer=[];var context=Object.create(null);var hasBitmap=false;var _iterator49=_createForOfIteratorHelper(_classPrivateFieldGet(_storage,this)),_step49;try{for(_iterator49.s();!(_step49=_iterator49.n()).done;){var _step49$value=_slicedToArray(_step49.value,2),key=_step49$value[0],val=_step49$value[1];var serialized=val instanceof AnnotationEditor?val.serialize(false,context):val;if(serialized){map.set(key,serialized);hash.update("".concat(key,":").concat(JSON.stringify(serialized)));hasBitmap||(hasBitmap=!!serialized.bitmap);}}}catch(err){_iterator49.e(err);}finally{_iterator49.f();}if(hasBitmap){var _iterator50=_createForOfIteratorHelper(map.values()),_step50;try{for(_iterator50.s();!(_step50=_iterator50.n()).done;){var value=_step50.value;if(value.bitmap){transfer.push(value.bitmap);}}}catch(err){_iterator50.e(err);}finally{_iterator50.f();}}return map.size>0?{map:map,hash:hash.hexdigest(),transfer:transfer}:SerializableEmpty;}},{key:"editorStats",get:function get(){var stats=null;var typeToEditor=new Map();var _iterator51=_createForOfIteratorHelper(_classPrivateFieldGet(_storage,this).values()),_step51;try{for(_iterator51.s();!(_step51=_iterator51.n()).done;){var _stats;var value=_step51.value;if(!(value instanceof AnnotationEditor)){continue;}var editorStats=value.telemetryFinalData;if(!editorStats){continue;}var type=editorStats.type;if(!typeToEditor.has(type)){typeToEditor.set(type,Object.getPrototypeOf(value).constructor);}stats||(stats=Object.create(null));var map=(_stats=stats)[type]||(_stats[type]=new Map());for(var _i10=0,_Object$entries3=Object.entries(editorStats);_i10<_Object$entries3.length;_i10++){var _counters$get;var _Object$entries3$_i=_slicedToArray(_Object$entries3[_i10],2),key=_Object$entries3$_i[0],val=_Object$entries3$_i[1];if(key==="type"){continue;}var counters=map.get(key);if(!counters){counters=new Map();map.set(key,counters);}var count=(_counters$get=counters.get(val))!==null&&_counters$get!==void 0?_counters$get:0;counters.set(val,count+1);}}}catch(err){_iterator51.e(err);}finally{_iterator51.f();}var _iterator52=_createForOfIteratorHelper(typeToEditor),_step52;try{for(_iterator52.s();!(_step52=_iterator52.n()).done;){var _step52$value=_slicedToArray(_step52.value,2),_type2=_step52$value[0],editor=_step52$value[1];stats[_type2]=editor.computeTelemetryFinalData(stats[_type2]);}}catch(err){_iterator52.e(err);}finally{_iterator52.f();}return stats;}},{key:"resetModifiedIds",value:function resetModifiedIds(){_classPrivateFieldSet(_modifiedIds,this,null);}},{key:"modifiedIds",get:function get(){if(_classPrivateFieldGet(_modifiedIds,this)){return _classPrivateFieldGet(_modifiedIds,this);}var ids=[];var _iterator53=_createForOfIteratorHelper(_classPrivateFieldGet(_storage,this).values()),_step53;try{for(_iterator53.s();!(_step53=_iterator53.n()).done;){var value=_step53.value;if(!(value instanceof AnnotationEditor)||!value.annotationElementId||!value.serialize()){continue;}ids.push(value.annotationElementId);}}catch(err){_iterator53.e(err);}finally{_iterator53.f();}return _classPrivateFieldSet(_modifiedIds,this,{ids:new Set(ids),hash:ids.join(",")});}}]);}();function _setModified(){if(!_classPrivateFieldGet(_modified,this)){_classPrivateFieldSet(_modified,this,true);if(typeof this.onSetModified==="function"){this.onSetModified();}}}var _serializable=/*#__PURE__*/new WeakMap();var PrintAnnotationStorage=/*#__PURE__*/function(_AnnotationStorage2){function PrintAnnotationStorage(parent){var _this21;_classCallCheck(this,PrintAnnotationStorage);_this21=_callSuper(this,PrintAnnotationStorage);_classPrivateFieldInitSpec(_this21,_serializable,void 0);var _parent$serializable=parent.serializable,map=_parent$serializable.map,hash=_parent$serializable.hash,transfer=_parent$serializable.transfer;var clone=structuredClone(map,transfer?{transfer:transfer}:null);_classPrivateFieldSet(_serializable,_this21,{map:clone,hash:hash,transfer:transfer});return _this21;}_inherits(PrintAnnotationStorage,_AnnotationStorage2);return _createClass(PrintAnnotationStorage,[{key:"print",get:function get(){unreachable("Should not call PrintAnnotationStorage.print");}},{key:"serializable",get:function get(){return _classPrivateFieldGet(_serializable,this);}},{key:"modifiedIds",get:function get(){return _shadow(this,"modifiedIds",{ids:new Set(),hash:""});}}]);}(AnnotationStorage);;// ./src/display/font_loader.js\nvar _systemFonts=/*#__PURE__*/new WeakMap();var FontLoader=/*#__PURE__*/function(){function FontLoader(_ref18){var _ref18$ownerDocument=_ref18.ownerDocument,ownerDocument=_ref18$ownerDocument===void 0?globalThis.document:_ref18$ownerDocument,_ref18$styleElement=_ref18.styleElement,styleElement=_ref18$styleElement===void 0?null:_ref18$styleElement;_classCallCheck(this,FontLoader);_classPrivateFieldInitSpec(this,_systemFonts,new Set());this._document=ownerDocument;this.nativeFontFaces=new Set();this.styleElement=null;this.loadingRequests=[];this.loadTestFontId=0;}return _createClass(FontLoader,[{key:"addNativeFontFace",value:function addNativeFontFace(nativeFontFace){this.nativeFontFaces.add(nativeFontFace);this._document.fonts.add(nativeFontFace);}},{key:"removeNativeFontFace",value:function removeNativeFontFace(nativeFontFace){this.nativeFontFaces["delete"](nativeFontFace);this._document.fonts["delete"](nativeFontFace);}},{key:"insertRule",value:function insertRule(rule){if(!this.styleElement){this.styleElement=this._document.createElement("style");this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement);}var styleSheet=this.styleElement.sheet;styleSheet.insertRule(rule,styleSheet.cssRules.length);}},{key:"clear",value:function clear(){var _iterator54=_createForOfIteratorHelper(this.nativeFontFaces),_step54;try{for(_iterator54.s();!(_step54=_iterator54.n()).done;){var nativeFontFace=_step54.value;this._document.fonts["delete"](nativeFontFace);}}catch(err){_iterator54.e(err);}finally{_iterator54.f();}this.nativeFontFaces.clear();_classPrivateFieldGet(_systemFonts,this).clear();if(this.styleElement){this.styleElement.remove();this.styleElement=null;}}},{key:"loadSystemFont",value:function(){var _loadSystemFont=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee15(_ref19){var info,disableFontFace,_inspectFont,loadedName,src,style,fontFace;return _regeneratorRuntime().wrap(function _callee15$(_context15){while(1)switch(_context15.prev=_context15.next){case 0:info=_ref19.systemFontInfo,disableFontFace=_ref19.disableFontFace,_inspectFont=_ref19._inspectFont;if(!(!info||_classPrivateFieldGet(_systemFonts,this).has(info.loadedName))){_context15.next=3;break;}return _context15.abrupt("return");case 3:assert(!disableFontFace,"loadSystemFont shouldn\'t be called when `disableFontFace` is set.");if(!this.isFontLoadingAPISupported){_context15.next=20;break;}loadedName=info.loadedName,src=info.src,style=info.style;fontFace=new FontFace(loadedName,src,style);this.addNativeFontFace(fontFace);_context15.prev=8;_context15.next=11;return fontFace.load();case 11:_classPrivateFieldGet(_systemFonts,this).add(loadedName);_inspectFont===null||_inspectFont===void 0||_inspectFont(info);_context15.next=19;break;case 15:_context15.prev=15;_context15.t0=_context15["catch"](8);warn("Cannot load system font: ".concat(info.baseFontName,", installing it could help to improve PDF rendering."));this.removeNativeFontFace(fontFace);case 19:return _context15.abrupt("return");case 20:unreachable("Not implemented: loadSystemFont without the Font Loading API.");case 21:case"end":return _context15.stop();}},_callee15,this,[[8,15]]);}));function loadSystemFont(_x18){return _loadSystemFont.apply(this,arguments);}return loadSystemFont;}()},{key:"bind",value:function(){var _bind=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee16(font){var _this22=this;var nativeFontFace,rule;return _regeneratorRuntime().wrap(function _callee16$(_context16){while(1)switch(_context16.prev=_context16.next){case 0:if(!(font.attached||font.missingFile&&!font.systemFontInfo)){_context16.next=2;break;}return _context16.abrupt("return");case 2:font.attached=true;if(!font.systemFontInfo){_context16.next=7;break;}_context16.next=6;return this.loadSystemFont(font);case 6:return _context16.abrupt("return");case 7:if(!this.isFontLoadingAPISupported){_context16.next=22;break;}nativeFontFace=font.createNativeFontFace();if(!nativeFontFace){_context16.next=21;break;}this.addNativeFontFace(nativeFontFace);_context16.prev=11;_context16.next=14;return nativeFontFace.loaded;case 14:_context16.next=21;break;case 16:_context16.prev=16;_context16.t0=_context16["catch"](11);warn("Failed to load font \'".concat(nativeFontFace.family,"\': \'").concat(_context16.t0,"\'."));font.disableFontFace=true;throw _context16.t0;case 21:return _context16.abrupt("return");case 22:rule=font.createFontFaceRule();if(!rule){_context16.next=29;break;}this.insertRule(rule);if(!this.isSyncFontLoadingSupported){_context16.next=27;break;}return _context16.abrupt("return");case 27:_context16.next=29;return new Promise(function(resolve){var request=_this22._queueLoadingCallback(resolve);_this22._prepareFontLoadEvent(font,request);});case 29:case"end":return _context16.stop();}},_callee16,this,[[11,16]]);}));function bind(_x19){return _bind.apply(this,arguments);}return bind;}()},{key:"isFontLoadingAPISupported",get:function get(){var _this$_document;var hasFonts=!!((_this$_document=this._document)!==null&&_this$_document!==void 0&&_this$_document.fonts);return _shadow(this,"isFontLoadingAPISupported",hasFonts);}},{key:"isSyncFontLoadingSupported",get:function get(){return _shadow(this,"isSyncFontLoadingSupported",isNodeJS||util_FeatureTest.platform.isFirefox);}},{key:"_queueLoadingCallback",value:function _queueLoadingCallback(callback){function completeRequest(){assert(!request.done,"completeRequest() cannot be called twice.");request.done=true;while(loadingRequests.length>0&&loadingRequests[0].done){var otherRequest=loadingRequests.shift();setTimeout(otherRequest.callback,0);}}var loadingRequests=this.loadingRequests;var request={done:false,complete:completeRequest,callback:callback};loadingRequests.push(request);return request;}},{key:"_loadTestFont",get:function get(){var testFont=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQA"+"FQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAA"+"ALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgA"+"AAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1"+"AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD"+"6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACM"+"AooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4D"+"IP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAA"+"AAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUA"+"AQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgAB"+"AAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABY"+"AAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAA"+"AC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"+"AAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAA"+"AAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQAC"+"AQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3"+"Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTj"+"FQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return _shadow(this,"_loadTestFont",testFont);}},{key:"_prepareFontLoadEvent",value:function _prepareFontLoadEvent(font,request){function int32(data,offset){return data.charCodeAt(offset)<<24|data.charCodeAt(offset+1)<<16|data.charCodeAt(offset+2)<<8|data.charCodeAt(offset+3)&0xff;}function spliceString(s,offset,remove,insert){var chunk1=s.substring(0,offset);var chunk2=s.substring(offset+remove);return chunk1+insert+chunk2;}var i,ii;var canvas=this._document.createElement("canvas");canvas.width=1;canvas.height=1;var ctx=canvas.getContext("2d");var called=0;function isFontReady(name,callback){if(++called>30){warn("Load test font never loaded.");callback();return;}ctx.font="30px "+name;ctx.fillText(".",0,20);var imageData=ctx.getImageData(0,0,1,1);if(imageData.data[3]>0){callback();return;}setTimeout(isFontReady.bind(null,name,callback));}var loadTestFontId="lt".concat(Date.now()).concat(this.loadTestFontId++);var data=this._loadTestFont;var COMMENT_OFFSET=976;data=spliceString(data,COMMENT_OFFSET,loadTestFontId.length,loadTestFontId);var CFF_CHECKSUM_OFFSET=16;var XXXX_VALUE=0x58585858;var checksum=int32(data,CFF_CHECKSUM_OFFSET);for(i=0,ii=loadTestFontId.length-3;i<ii;i+=4){checksum=checksum-XXXX_VALUE+int32(loadTestFontId,i)|0;}if(i<loadTestFontId.length){checksum=checksum-XXXX_VALUE+int32(loadTestFontId+"XXX",i)|0;}data=spliceString(data,CFF_CHECKSUM_OFFSET,4,string32(checksum));var url="url(data:font/opentype;base64,".concat(btoa(data),");");var rule="@font-face {font-family:\\"".concat(loadTestFontId,"\\";src:").concat(url,"}");this.insertRule(rule);var div=this._document.createElement("div");div.style.visibility="hidden";div.style.width=div.style.height="10px";div.style.position="absolute";div.style.top=div.style.left="0px";for(var _i11=0,_arr=[font.loadedName,loadTestFontId];_i11<_arr.length;_i11++){var name=_arr[_i11];var span=this._document.createElement("span");span.textContent="Hi";span.style.fontFamily=name;div.append(span);}this._document.body.append(div);isFontReady(loadTestFontId,function(){div.remove();request.complete();});}}]);}();var FontFaceObject=/*#__PURE__*/function(){function FontFaceObject(translatedData){var inspectFont=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;_classCallCheck(this,FontFaceObject);this.compiledGlyphs=Object.create(null);for(var i in translatedData){this[i]=translatedData[i];}this._inspectFont=inspectFont;}return _createClass(FontFaceObject,[{key:"createNativeFontFace",value:function createNativeFontFace(){var _this$_inspectFont;if(!this.data||this.disableFontFace){return null;}var nativeFontFace;if(!this.cssFontInfo){nativeFontFace=new FontFace(this.loadedName,this.data,{});}else{var css={weight:this.cssFontInfo.fontWeight};if(this.cssFontInfo.italicAngle){css.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg");}nativeFontFace=new FontFace(this.cssFontInfo.fontFamily,this.data,css);}(_this$_inspectFont=this._inspectFont)===null||_this$_inspectFont===void 0||_this$_inspectFont.call(this,this);return nativeFontFace;}},{key:"createFontFaceRule",value:function createFontFaceRule(){var _this$_inspectFont2;if(!this.data||this.disableFontFace){return null;}var url="url(data:".concat(this.mimetype,";base64,").concat(toBase64Util(this.data),");");var rule;if(!this.cssFontInfo){rule="@font-face {font-family:\\"".concat(this.loadedName,"\\";src:").concat(url,"}");}else{var css="font-weight: ".concat(this.cssFontInfo.fontWeight,";");if(this.cssFontInfo.italicAngle){css+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;");}rule="@font-face {font-family:\\"".concat(this.cssFontInfo.fontFamily,"\\";").concat(css,"src:").concat(url,"}");}(_this$_inspectFont2=this._inspectFont)===null||_this$_inspectFont2===void 0||_this$_inspectFont2.call(this,this,url);return rule;}},{key:"getPathGenerator",value:function getPathGenerator(objs,character){if(this.compiledGlyphs[character]!==undefined){return this.compiledGlyphs[character];}var objId=this.loadedName+"_path_"+character;var cmds;try{cmds=objs.get(objId);}catch(ex){warn("getPathGenerator - ignoring character: \\"".concat(ex,"\\"."));}var path=new Path2D(cmds||"");if(!this.fontExtraProperties){objs["delete"](objId);}return this.compiledGlyphs[character]=path;}}]);}();;// ./src/shared/message_handler.js\nvar CallbackKind={DATA:1,ERROR:2};var StreamKind={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function onFn(){}function wrapReason(ex){if(ex instanceof _AbortException||ex instanceof _InvalidPDFException||ex instanceof PasswordException||ex instanceof _ResponseException||ex instanceof UnknownErrorException){return ex;}if(!(ex instanceof Error||_typeof(ex)==="object"&&ex!==null)){unreachable(\'wrapReason: Expected "reason" to be a (possibly cloned) Error.\');}switch(ex.name){case"AbortException":return new _AbortException(ex.message);case"InvalidPDFException":return new _InvalidPDFException(ex.message);case"PasswordException":return new PasswordException(ex.message,ex.code);case"ResponseException":return new _ResponseException(ex.message,ex.status,ex.missing);case"UnknownErrorException":return new UnknownErrorException(ex.message,ex.details);}return new UnknownErrorException(ex.message,ex.toString());}var _messageAC=/*#__PURE__*/new WeakMap();var _MessageHandler_brand=/*#__PURE__*/new WeakSet();var MessageHandler=/*#__PURE__*/function(){function MessageHandler(_sourceName,_targetName,_comObj){_classCallCheck(this,MessageHandler);_classPrivateMethodInitSpec(this,_MessageHandler_brand);_classPrivateFieldInitSpec(this,_messageAC,new AbortController());this.sourceName=_sourceName;this.targetName=_targetName;this.comObj=_comObj;this.callbackId=1;this.streamId=1;this.streamSinks=Object.create(null);this.streamControllers=Object.create(null);this.callbackCapabilities=Object.create(null);this.actionHandler=Object.create(null);_comObj.addEventListener("message",_assertClassBrand(_MessageHandler_brand,this,_onMessage).bind(this),{signal:_classPrivateFieldGet(_messageAC,this).signal});}return _createClass(MessageHandler,[{key:"on",value:function on(actionName,handler){var ah=this.actionHandler;if(ah[actionName]){throw new Error("There is already an actionName called \\"".concat(actionName,"\\""));}ah[actionName]=handler;}},{key:"send",value:function send(actionName,data,transfers){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:actionName,data:data},transfers);}},{key:"sendWithPromise",value:function sendWithPromise(actionName,data,transfers){var callbackId=this.callbackId++;var capability=Promise.withResolvers();this.callbackCapabilities[callbackId]=capability;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:actionName,callbackId:callbackId,data:data},transfers);}catch(ex){capability.reject(ex);}return capability.promise;}},{key:"sendWithStream",value:function sendWithStream(actionName,data,queueingStrategy,transfers){var _this23=this;var streamId=this.streamId++,sourceName=this.sourceName,targetName=this.targetName,comObj=this.comObj;return new ReadableStream({start:function start(controller){var startCapability=Promise.withResolvers();_this23.streamControllers[streamId]={controller:controller,startCall:startCapability,pullCall:null,cancelCall:null,isClosed:false};comObj.postMessage({sourceName:sourceName,targetName:targetName,action:actionName,streamId:streamId,data:data,desiredSize:controller.desiredSize},transfers);return startCapability.promise;},pull:function pull(controller){var pullCapability=Promise.withResolvers();_this23.streamControllers[streamId].pullCall=pullCapability;comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.PULL,streamId:streamId,desiredSize:controller.desiredSize});return pullCapability.promise;},cancel:function cancel(reason){assert(reason instanceof Error,"cancel must have a valid reason");var cancelCapability=Promise.withResolvers();_this23.streamControllers[streamId].cancelCall=cancelCapability;_this23.streamControllers[streamId].isClosed=true;comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.CANCEL,streamId:streamId,reason:wrapReason(reason)});return cancelCapability.promise;}},queueingStrategy);}},{key:"destroy",value:function destroy(){var _classPrivateFieldGet52;(_classPrivateFieldGet52=_classPrivateFieldGet(_messageAC,this))===null||_classPrivateFieldGet52===void 0||_classPrivateFieldGet52.abort();_classPrivateFieldSet(_messageAC,this,null);}}]);}();function _onMessage(_ref142){var data=_ref142.data;if(data.targetName!==this.sourceName){return;}if(data.stream){_assertClassBrand(_MessageHandler_brand,this,_processStreamMessage).call(this,data);return;}if(data.callback){var callbackId=data.callbackId;var capability=this.callbackCapabilities[callbackId];if(!capability){throw new Error("Cannot resolve callback ".concat(callbackId));}delete this.callbackCapabilities[callbackId];if(data.callback===CallbackKind.DATA){capability.resolve(data.data);}else if(data.callback===CallbackKind.ERROR){capability.reject(wrapReason(data.reason));}else{throw new Error("Unexpected callback case");}return;}var action=this.actionHandler[data.action];if(!action){throw new Error("Unknown action from worker: ".concat(data.action));}if(data.callbackId){var sourceName=this.sourceName,targetName=data.sourceName,comObj=this.comObj;Promise["try"](action,data.data).then(function(result){comObj.postMessage({sourceName:sourceName,targetName:targetName,callback:CallbackKind.DATA,callbackId:data.callbackId,data:result});},function(reason){comObj.postMessage({sourceName:sourceName,targetName:targetName,callback:CallbackKind.ERROR,callbackId:data.callbackId,reason:wrapReason(reason)});});return;}if(data.streamId){_assertClassBrand(_MessageHandler_brand,this,_createStreamSink).call(this,data);return;}action(data.data);}function _createStreamSink(data){var streamId=data.streamId,sourceName=this.sourceName,targetName=data.sourceName,comObj=this.comObj;var self=this,action=this.actionHandler[data.action];var streamSink={enqueue:function enqueue(chunk){var size=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var transfers=arguments.length>2?arguments[2]:undefined;if(this.isCancelled){return;}var lastDesiredSize=this.desiredSize;this.desiredSize-=size;if(lastDesiredSize>0&&this.desiredSize<=0){this.sinkCapability=Promise.withResolvers();this.ready=this.sinkCapability.promise;}comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.ENQUEUE,streamId:streamId,chunk:chunk},transfers);},close:function close(){if(this.isCancelled){return;}this.isCancelled=true;comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.CLOSE,streamId:streamId});delete self.streamSinks[streamId];},error:function error(reason){assert(reason instanceof Error,"error must have a valid reason");if(this.isCancelled){return;}this.isCancelled=true;comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.ERROR,streamId:streamId,reason:wrapReason(reason)});},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:false,desiredSize:data.desiredSize,ready:null};streamSink.sinkCapability.resolve();streamSink.ready=streamSink.sinkCapability.promise;this.streamSinks[streamId]=streamSink;Promise["try"](action,data.data,streamSink).then(function(){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.START_COMPLETE,streamId:streamId,success:true});},function(reason){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.START_COMPLETE,streamId:streamId,reason:wrapReason(reason)});});}function _processStreamMessage(data){var streamId=data.streamId,sourceName=this.sourceName,targetName=data.sourceName,comObj=this.comObj;var streamController=this.streamControllers[streamId],streamSink=this.streamSinks[streamId];switch(data.stream){case StreamKind.START_COMPLETE:if(data.success){streamController.startCall.resolve();}else{streamController.startCall.reject(wrapReason(data.reason));}break;case StreamKind.PULL_COMPLETE:if(data.success){streamController.pullCall.resolve();}else{streamController.pullCall.reject(wrapReason(data.reason));}break;case StreamKind.PULL:if(!streamSink){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.PULL_COMPLETE,streamId:streamId,success:true});break;}if(streamSink.desiredSize<=0&&data.desiredSize>0){streamSink.sinkCapability.resolve();}streamSink.desiredSize=data.desiredSize;Promise["try"](streamSink.onPull||onFn).then(function(){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.PULL_COMPLETE,streamId:streamId,success:true});},function(reason){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.PULL_COMPLETE,streamId:streamId,reason:wrapReason(reason)});});break;case StreamKind.ENQUEUE:assert(streamController,"enqueue should have stream controller");if(streamController.isClosed){break;}streamController.controller.enqueue(data.chunk);break;case StreamKind.CLOSE:assert(streamController,"close should have stream controller");if(streamController.isClosed){break;}streamController.isClosed=true;streamController.controller.close();_assertClassBrand(_MessageHandler_brand,this,_deleteStreamController).call(this,streamController,streamId);break;case StreamKind.ERROR:assert(streamController,"error should have stream controller");streamController.controller.error(wrapReason(data.reason));_assertClassBrand(_MessageHandler_brand,this,_deleteStreamController).call(this,streamController,streamId);break;case StreamKind.CANCEL_COMPLETE:if(data.success){streamController.cancelCall.resolve();}else{streamController.cancelCall.reject(wrapReason(data.reason));}_assertClassBrand(_MessageHandler_brand,this,_deleteStreamController).call(this,streamController,streamId);break;case StreamKind.CANCEL:if(!streamSink){break;}var dataReason=wrapReason(data.reason);Promise["try"](streamSink.onCancel||onFn,dataReason).then(function(){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.CANCEL_COMPLETE,streamId:streamId,success:true});},function(reason){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.CANCEL_COMPLETE,streamId:streamId,reason:wrapReason(reason)});});streamSink.sinkCapability.reject(dataReason);streamSink.isCancelled=true;delete this.streamSinks[streamId];break;default:throw new Error("Unexpected stream case");}}function _deleteStreamController(_x66,_x67){return _deleteStreamController2.apply(this,arguments);}function _deleteStreamController2(){_deleteStreamController2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee68(streamController,streamId){var _streamController$sta,_streamController$pul,_streamController$can;return _regeneratorRuntime().wrap(function _callee68$(_context69){while(1)switch(_context69.prev=_context69.next){case 0:_context69.next=2;return Promise.allSettled([(_streamController$sta=streamController.startCall)===null||_streamController$sta===void 0?void 0:_streamController$sta.promise,(_streamController$pul=streamController.pullCall)===null||_streamController$pul===void 0?void 0:_streamController$pul.promise,(_streamController$can=streamController.cancelCall)===null||_streamController$can===void 0?void 0:_streamController$can.promise]);case 2:delete this.streamControllers[streamId];case 3:case"end":return _context69.stop();}},_callee68,this);}));return _deleteStreamController2.apply(this,arguments);};// ./src/display/canvas_factory.js\nvar _enableHWA=/*#__PURE__*/new WeakMap();var BaseCanvasFactory=/*#__PURE__*/function(){function BaseCanvasFactory(_ref20){var _ref20$enableHWA=_ref20.enableHWA,enableHWA=_ref20$enableHWA===void 0?false:_ref20$enableHWA;_classCallCheck(this,BaseCanvasFactory);_classPrivateFieldInitSpec(this,_enableHWA,false);_classPrivateFieldSet(_enableHWA,this,enableHWA);}return _createClass(BaseCanvasFactory,[{key:"create",value:function create(width,height){if(width<=0||height<=0){throw new Error("Invalid canvas size");}var canvas=this._createCanvas(width,height);return{canvas:canvas,context:canvas.getContext("2d",{willReadFrequently:!_classPrivateFieldGet(_enableHWA,this)})};}},{key:"reset",value:function reset(canvasAndContext,width,height){if(!canvasAndContext.canvas){throw new Error("Canvas is not specified");}if(width<=0||height<=0){throw new Error("Invalid canvas size");}canvasAndContext.canvas.width=width;canvasAndContext.canvas.height=height;}},{key:"destroy",value:function destroy(canvasAndContext){if(!canvasAndContext.canvas){throw new Error("Canvas is not specified");}canvasAndContext.canvas.width=0;canvasAndContext.canvas.height=0;canvasAndContext.canvas=null;canvasAndContext.context=null;}},{key:"_createCanvas",value:function _createCanvas(width,height){unreachable("Abstract method `_createCanvas` called.");}}]);}();var DOMCanvasFactory=/*#__PURE__*/function(_BaseCanvasFactory2){function DOMCanvasFactory(_ref21){var _this24;var _ref21$ownerDocument=_ref21.ownerDocument,ownerDocument=_ref21$ownerDocument===void 0?globalThis.document:_ref21$ownerDocument,_ref21$enableHWA=_ref21.enableHWA,enableHWA=_ref21$enableHWA===void 0?false:_ref21$enableHWA;_classCallCheck(this,DOMCanvasFactory);_this24=_callSuper(this,DOMCanvasFactory,[{enableHWA:enableHWA}]);_this24._document=ownerDocument;return _this24;}_inherits(DOMCanvasFactory,_BaseCanvasFactory2);return _createClass(DOMCanvasFactory,[{key:"_createCanvas",value:function _createCanvas(width,height){var canvas=this._document.createElement("canvas");canvas.width=width;canvas.height=height;return canvas;}}]);}(BaseCanvasFactory);;// ./src/display/cmap_reader_factory.js\nvar BaseCMapReaderFactory=/*#__PURE__*/function(){function BaseCMapReaderFactory(_ref22){var _ref22$baseUrl=_ref22.baseUrl,baseUrl=_ref22$baseUrl===void 0?null:_ref22$baseUrl,_ref22$isCompressed=_ref22.isCompressed,isCompressed=_ref22$isCompressed===void 0?true:_ref22$isCompressed;_classCallCheck(this,BaseCMapReaderFactory);this.baseUrl=baseUrl;this.isCompressed=isCompressed;}return _createClass(BaseCMapReaderFactory,[{key:"fetch",value:function(){var _fetch2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee17(_ref23){var _this25=this;var name,url;return _regeneratorRuntime().wrap(function _callee17$(_context17){while(1)switch(_context17.prev=_context17.next){case 0:name=_ref23.name;if(this.baseUrl){_context17.next=3;break;}throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");case 3:if(name){_context17.next=5;break;}throw new Error("CMap name must be specified.");case 5:url=this.baseUrl+name+(this.isCompressed?".bcmap":"");return _context17.abrupt("return",this._fetch(url).then(function(cMapData){return{cMapData:cMapData,isCompressed:_this25.isCompressed};})["catch"](function(reason){throw new Error("Unable to load ".concat(_this25.isCompressed?"binary ":"","CMap at: ").concat(url));}));case 7:case"end":return _context17.stop();}},_callee17,this);}));function fetch(_x20){return _fetch2.apply(this,arguments);}return fetch;}()},{key:"_fetch",value:function(){var _fetch3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee18(url){return _regeneratorRuntime().wrap(function _callee18$(_context18){while(1)switch(_context18.prev=_context18.next){case 0:unreachable("Abstract method `_fetch` called.");case 1:case"end":return _context18.stop();}},_callee18);}));function _fetch(_x21){return _fetch3.apply(this,arguments);}return _fetch;}()}]);}();var DOMCMapReaderFactory=/*#__PURE__*/function(_BaseCMapReaderFactor){function DOMCMapReaderFactory(){_classCallCheck(this,DOMCMapReaderFactory);return _callSuper(this,DOMCMapReaderFactory,arguments);}_inherits(DOMCMapReaderFactory,_BaseCMapReaderFactor);return _createClass(DOMCMapReaderFactory,[{key:"_fetch",value:function(){var _fetch4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee19(url){var data;return _regeneratorRuntime().wrap(function _callee19$(_context19){while(1)switch(_context19.prev=_context19.next){case 0:_context19.next=2;return _fetchData(url,this.isCompressed?"arraybuffer":"text");case 2:data=_context19.sent;return _context19.abrupt("return",data instanceof ArrayBuffer?new Uint8Array(data):stringToBytes(data));case 4:case"end":return _context19.stop();}},_callee19,this);}));function _fetch(_x22){return _fetch4.apply(this,arguments);}return _fetch;}()}]);}(BaseCMapReaderFactory);;// ./src/display/filter_factory.js\nvar BaseFilterFactory=/*#__PURE__*/function(){function BaseFilterFactory(){_classCallCheck(this,BaseFilterFactory);}return _createClass(BaseFilterFactory,[{key:"addFilter",value:function addFilter(maps){return"none";}},{key:"addHCMFilter",value:function addHCMFilter(fgColor,bgColor){return"none";}},{key:"addAlphaFilter",value:function addAlphaFilter(map){return"none";}},{key:"addLuminosityFilter",value:function addLuminosityFilter(map){return"none";}},{key:"addHighlightHCMFilter",value:function addHighlightHCMFilter(filterName,fgColor,bgColor,newFgColor,newBgColor){return"none";}},{key:"destroy",value:function destroy(){var keepHCM=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;}}]);}();var _baseUrl=/*#__PURE__*/new WeakMap();var _cache2=/*#__PURE__*/new WeakMap();var _defs=/*#__PURE__*/new WeakMap();var _docId=/*#__PURE__*/new WeakMap();var _document2=/*#__PURE__*/new WeakMap();var _hcmCache=/*#__PURE__*/new WeakMap();var _id3=/*#__PURE__*/new WeakMap();var _DOMFilterFactory_brand=/*#__PURE__*/new WeakSet();var DOMFilterFactory=/*#__PURE__*/function(_BaseFilterFactory){function DOMFilterFactory(_ref24){var _this29;var docId=_ref24.docId,_ref24$ownerDocument=_ref24.ownerDocument,ownerDocument=_ref24$ownerDocument===void 0?globalThis.document:_ref24$ownerDocument;_classCallCheck(this,DOMFilterFactory);_this29=_callSuper(this,DOMFilterFactory);_classPrivateMethodInitSpec(_this29,_DOMFilterFactory_brand);_classPrivateFieldInitSpec(_this29,_baseUrl,void 0);_classPrivateFieldInitSpec(_this29,_cache2,void 0);_classPrivateFieldInitSpec(_this29,_defs,void 0);_classPrivateFieldInitSpec(_this29,_docId,void 0);_classPrivateFieldInitSpec(_this29,_document2,void 0);_classPrivateFieldInitSpec(_this29,_hcmCache,void 0);_classPrivateFieldInitSpec(_this29,_id3,0);_classPrivateFieldSet(_docId,_this29,docId);_classPrivateFieldSet(_document2,_this29,ownerDocument);return _this29;}_inherits(DOMFilterFactory,_BaseFilterFactory);return _createClass(DOMFilterFactory,[{key:"addFilter",value:function addFilter(maps){var _this$id7,_this$id8;if(!maps){return"none";}var value=_classPrivateGetter(_DOMFilterFactory_brand,this,_get_cache).get(maps);if(value){return value;}var _assertClassBrand$cal3=_assertClassBrand(_DOMFilterFactory_brand,this,_createTables).call(this,maps),_assertClassBrand$cal4=_slicedToArray(_assertClassBrand$cal3,3),tableR=_assertClassBrand$cal4[0],tableG=_assertClassBrand$cal4[1],tableB=_assertClassBrand$cal4[2];var key=maps.length===1?tableR:"".concat(tableR).concat(tableG).concat(tableB);value=_classPrivateGetter(_DOMFilterFactory_brand,this,_get_cache).get(key);if(value){_classPrivateGetter(_DOMFilterFactory_brand,this,_get_cache).set(maps,value);return value;}var id="g_".concat(_classPrivateFieldGet(_docId,this),"_transfer_map_").concat((_classPrivateFieldSet(_id3,this,(_this$id7=_classPrivateFieldGet(_id3,this),_this$id8=_this$id7++,_this$id7)),_this$id8));var url=_assertClassBrand(_DOMFilterFactory_brand,this,_createUrl).call(this,id);_classPrivateGetter(_DOMFilterFactory_brand,this,_get_cache).set(maps,url);_classPrivateGetter(_DOMFilterFactory_brand,this,_get_cache).set(key,url);var filter=_assertClassBrand(_DOMFilterFactory_brand,this,_createFilter).call(this,id);_assertClassBrand(_DOMFilterFactory_brand,this,_addTransferMapConversion).call(this,tableR,tableG,tableB,filter);return url;}},{key:"addHCMFilter",value:function addHCMFilter(fgColor,bgColor){var _info;var key="".concat(fgColor,"-").concat(bgColor);var filterName="base";var info=_classPrivateGetter(_DOMFilterFactory_brand,this,_get_hcmCache).get(filterName);if(((_info=info)===null||_info===void 0?void 0:_info.key)===key){return info.url;}if(info){var _info$filter;(_info$filter=info.filter)===null||_info$filter===void 0||_info$filter.remove();info.key=key;info.url="none";info.filter=null;}else{info={key:key,url:"none",filter:null};_classPrivateGetter(_DOMFilterFactory_brand,this,_get_hcmCache).set(filterName,info);}if(!fgColor||!bgColor){return info.url;}var fgRGB=_assertClassBrand(_DOMFilterFactory_brand,this,_getRGB).call(this,fgColor);fgColor=_Util.makeHexColor.apply(_Util,_toConsumableArray(fgRGB));var bgRGB=_assertClassBrand(_DOMFilterFactory_brand,this,_getRGB).call(this,bgColor);bgColor=_Util.makeHexColor.apply(_Util,_toConsumableArray(bgRGB));_classPrivateGetter(_DOMFilterFactory_brand,this,_get_defs).style.color="";if(fgColor==="#000000"&&bgColor==="#ffffff"||fgColor===bgColor){return info.url;}var map=new Array(256);for(var i=0;i<=255;i++){var x=i/255;map[i]=x<=0.03928?x/12.92:Math.pow((x+0.055)/1.055,2.4);}var table=map.join(",");var id="g_".concat(_classPrivateFieldGet(_docId,this),"_hcm_filter");var filter=info.filter=_assertClassBrand(_DOMFilterFactory_brand,this,_createFilter).call(this,id);_assertClassBrand(_DOMFilterFactory_brand,this,_addTransferMapConversion).call(this,table,table,table,filter);_assertClassBrand(_DOMFilterFactory_brand,this,_addGrayConversion).call(this,filter);var getSteps=function getSteps(c,n){var start=fgRGB[c]/255;var end=bgRGB[c]/255;var arr=new Array(n+1);for(var _i12=0;_i12<=n;_i12++){arr[_i12]=start+_i12/n*(end-start);}return arr.join(",");};_assertClassBrand(_DOMFilterFactory_brand,this,_addTransferMapConversion).call(this,getSteps(0,5),getSteps(1,5),getSteps(2,5),filter);info.url=_assertClassBrand(_DOMFilterFactory_brand,this,_createUrl).call(this,id);return info.url;}},{key:"addAlphaFilter",value:function addAlphaFilter(map){var _this$id9,_this$id10;var value=_classPrivateGetter(_DOMFilterFactory_brand,this,_get_cache).get(map);if(value){return value;}var _assertClassBrand$cal5=_assertClassBrand(_DOMFilterFactory_brand,this,_createTables).call(this,[map]),_assertClassBrand$cal6=_slicedToArray(_assertClassBrand$cal5,1),tableA=_assertClassBrand$cal6[0];var key="alpha_".concat(tableA);value=_classPrivateGetter(_DOMFilterFactory_brand,this,_get_cache).get(key);if(value){_classPrivateGetter(_DOMFilterFactory_brand,this,_get_cache).set(map,value);return value;}var id="g_".concat(_classPrivateFieldGet(_docId,this),"_alpha_map_").concat((_classPrivateFieldSet(_id3,this,(_this$id9=_classPrivateFieldGet(_id3,this),_this$id10=_this$id9++,_this$id9)),_this$id10));var url=_assertClassBrand(_DOMFilterFactory_brand,this,_createUrl).call(this,id);_classPrivateGetter(_DOMFilterFactory_brand,this,_get_cache).set(map,url);_classPrivateGetter(_DOMFilterFactory_brand,this,_get_cache).set(key,url);var filter=_assertClassBrand(_DOMFilterFactory_brand,this,_createFilter).call(this,id);_assertClassBrand(_DOMFilterFactory_brand,this,_addTransferMapAlphaConversion).call(this,tableA,filter);return url;}},{key:"addLuminosityFilter",value:function addLuminosityFilter(map){var _this$id11,_this$id12;var value=_classPrivateGetter(_DOMFilterFactory_brand,this,_get_cache).get(map||"luminosity");if(value){return value;}var tableA,key;if(map){var _assertClassBrand$cal7=_assertClassBrand(_DOMFilterFactory_brand,this,_createTables).call(this,[map]);var _assertClassBrand$cal8=_slicedToArray(_assertClassBrand$cal7,1);tableA=_assertClassBrand$cal8[0];key="luminosity_".concat(tableA);}else{key="luminosity";}value=_classPrivateGetter(_DOMFilterFactory_brand,this,_get_cache).get(key);if(value){_classPrivateGetter(_DOMFilterFactory_brand,this,_get_cache).set(map,value);return value;}var id="g_".concat(_classPrivateFieldGet(_docId,this),"_luminosity_map_").concat((_classPrivateFieldSet(_id3,this,(_this$id11=_classPrivateFieldGet(_id3,this),_this$id12=_this$id11++,_this$id11)),_this$id12));var url=_assertClassBrand(_DOMFilterFactory_brand,this,_createUrl).call(this,id);_classPrivateGetter(_DOMFilterFactory_brand,this,_get_cache).set(map,url);_classPrivateGetter(_DOMFilterFactory_brand,this,_get_cache).set(key,url);var filter=_assertClassBrand(_DOMFilterFactory_brand,this,_createFilter).call(this,id);_assertClassBrand(_DOMFilterFactory_brand,this,_addLuminosityConversion).call(this,filter);if(map){_assertClassBrand(_DOMFilterFactory_brand,this,_addTransferMapAlphaConversion).call(this,tableA,filter);}return url;}},{key:"addHighlightHCMFilter",value:function addHighlightHCMFilter(filterName,fgColor,bgColor,newFgColor,newBgColor){var _info2;var key="".concat(fgColor,"-").concat(bgColor,"-").concat(newFgColor,"-").concat(newBgColor);var info=_classPrivateGetter(_DOMFilterFactory_brand,this,_get_hcmCache).get(filterName);if(((_info2=info)===null||_info2===void 0?void 0:_info2.key)===key){return info.url;}if(info){var _info$filter2;(_info$filter2=info.filter)===null||_info$filter2===void 0||_info$filter2.remove();info.key=key;info.url="none";info.filter=null;}else{info={key:key,url:"none",filter:null};_classPrivateGetter(_DOMFilterFactory_brand,this,_get_hcmCache).set(filterName,info);}if(!fgColor||!bgColor){return info.url;}var _map=[fgColor,bgColor].map(_assertClassBrand(_DOMFilterFactory_brand,this,_getRGB).bind(this)),_map2=_slicedToArray(_map,2),fgRGB=_map2[0],bgRGB=_map2[1];var fgGray=Math.round(0.2126*fgRGB[0]+0.7152*fgRGB[1]+0.0722*fgRGB[2]);var bgGray=Math.round(0.2126*bgRGB[0]+0.7152*bgRGB[1]+0.0722*bgRGB[2]);var _map3=[newFgColor,newBgColor].map(_assertClassBrand(_DOMFilterFactory_brand,this,_getRGB).bind(this)),_map4=_slicedToArray(_map3,2),newFgRGB=_map4[0],newBgRGB=_map4[1];if(bgGray<fgGray){var _ref25=[bgGray,fgGray,newBgRGB,newFgRGB];fgGray=_ref25[0];bgGray=_ref25[1];newFgRGB=_ref25[2];newBgRGB=_ref25[3];}_classPrivateGetter(_DOMFilterFactory_brand,this,_get_defs).style.color="";var getSteps=function getSteps(fg,bg,n){var arr=new Array(256);var step=(bgGray-fgGray)/n;var newStart=fg/255;var newStep=(bg-fg)/(255*n);var prev=0;for(var i=0;i<=n;i++){var k=Math.round(fgGray+i*step);var value=newStart+i*newStep;for(var j=prev;j<=k;j++){arr[j]=value;}prev=k+1;}for(var _i13=prev;_i13<256;_i13++){arr[_i13]=arr[prev-1];}return arr.join(",");};var id="g_".concat(_classPrivateFieldGet(_docId,this),"_hcm_").concat(filterName,"_filter");var filter=info.filter=_assertClassBrand(_DOMFilterFactory_brand,this,_createFilter).call(this,id);_assertClassBrand(_DOMFilterFactory_brand,this,_addGrayConversion).call(this,filter);_assertClassBrand(_DOMFilterFactory_brand,this,_addTransferMapConversion).call(this,getSteps(newFgRGB[0],newBgRGB[0],5),getSteps(newFgRGB[1],newBgRGB[1],5),getSteps(newFgRGB[2],newBgRGB[2],5),filter);info.url=_assertClassBrand(_DOMFilterFactory_brand,this,_createUrl).call(this,id);return info.url;}},{key:"destroy",value:function destroy(){var _classPrivateFieldGet53,_classPrivateFieldGet54,_classPrivateFieldGet55,_classPrivateFieldGet56;var keepHCM=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(keepHCM&&(_classPrivateFieldGet53=_classPrivateFieldGet(_hcmCache,this))!==null&&_classPrivateFieldGet53!==void 0&&_classPrivateFieldGet53.size){return;}(_classPrivateFieldGet54=_classPrivateFieldGet(_defs,this))===null||_classPrivateFieldGet54===void 0||_classPrivateFieldGet54.parentNode.parentNode.remove();_classPrivateFieldSet(_defs,this,null);(_classPrivateFieldGet55=_classPrivateFieldGet(_cache2,this))===null||_classPrivateFieldGet55===void 0||_classPrivateFieldGet55.clear();_classPrivateFieldSet(_cache2,this,null);(_classPrivateFieldGet56=_classPrivateFieldGet(_hcmCache,this))===null||_classPrivateFieldGet56===void 0||_classPrivateFieldGet56.clear();_classPrivateFieldSet(_hcmCache,this,null);_classPrivateFieldSet(_id3,this,0);}}]);}(BaseFilterFactory);function _get_cache(_this26){return _classPrivateFieldGet(_cache2,_this26)||_classPrivateFieldSet(_cache2,_this26,new Map());}function _get_hcmCache(_this27){return _classPrivateFieldGet(_hcmCache,_this27)||_classPrivateFieldSet(_hcmCache,_this27,new Map());}function _get_defs(_this28){if(!_classPrivateFieldGet(_defs,_this28)){var div=_classPrivateFieldGet(_document2,_this28).createElement("div");var style=div.style;style.visibility="hidden";style.contain="strict";style.width=style.height=0;style.position="absolute";style.top=style.left=0;style.zIndex=-1;var svg=_classPrivateFieldGet(_document2,_this28).createElementNS(SVG_NS,"svg");svg.setAttribute("width",0);svg.setAttribute("height",0);_classPrivateFieldSet(_defs,_this28,_classPrivateFieldGet(_document2,_this28).createElementNS(SVG_NS,"defs"));div.append(svg);svg.append(_classPrivateFieldGet(_defs,_this28));_classPrivateFieldGet(_document2,_this28).body.append(div);}return _classPrivateFieldGet(_defs,_this28);}function _createTables(maps){if(maps.length===1){var _mapR=maps[0];var buffer=new Array(256);for(var i=0;i<256;i++){buffer[i]=_mapR[i]/255;}var table=buffer.join(",");return[table,table,table];}var _maps=_slicedToArray(maps,3),mapR=_maps[0],mapG=_maps[1],mapB=_maps[2];var bufferR=new Array(256);var bufferG=new Array(256);var bufferB=new Array(256);for(var _i35=0;_i35<256;_i35++){bufferR[_i35]=mapR[_i35]/255;bufferG[_i35]=mapG[_i35]/255;bufferB[_i35]=mapB[_i35]/255;}return[bufferR.join(","),bufferG.join(","),bufferB.join(",")];}function _createUrl(id){if(_classPrivateFieldGet(_baseUrl,this)===undefined){_classPrivateFieldSet(_baseUrl,this,"");var url=_classPrivateFieldGet(_document2,this).URL;if(url!==_classPrivateFieldGet(_document2,this).baseURI){if(_isDataScheme(url)){warn(\'#createUrl: ignore "data:"-URL for performance reasons.\');}else{_classPrivateFieldSet(_baseUrl,this,url.split("#",1)[0]);}}}return"url(".concat(_classPrivateFieldGet(_baseUrl,this),"#").concat(id,")");}function _addLuminosityConversion(filter){var feColorMatrix=_classPrivateFieldGet(_document2,this).createElementNS(SVG_NS,"feColorMatrix");feColorMatrix.setAttribute("type","matrix");feColorMatrix.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0");filter.append(feColorMatrix);}function _addGrayConversion(filter){var feColorMatrix=_classPrivateFieldGet(_document2,this).createElementNS(SVG_NS,"feColorMatrix");feColorMatrix.setAttribute("type","matrix");feColorMatrix.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0");filter.append(feColorMatrix);}function _createFilter(id){var filter=_classPrivateFieldGet(_document2,this).createElementNS(SVG_NS,"filter");filter.setAttribute("color-interpolation-filters","sRGB");filter.setAttribute("id",id);_classPrivateGetter(_DOMFilterFactory_brand,this,_get_defs).append(filter);return filter;}function _appendFeFunc(feComponentTransfer,func,table){var feFunc=_classPrivateFieldGet(_document2,this).createElementNS(SVG_NS,func);feFunc.setAttribute("type","discrete");feFunc.setAttribute("tableValues",table);feComponentTransfer.append(feFunc);}function _addTransferMapConversion(rTable,gTable,bTable,filter){var feComponentTransfer=_classPrivateFieldGet(_document2,this).createElementNS(SVG_NS,"feComponentTransfer");filter.append(feComponentTransfer);_assertClassBrand(_DOMFilterFactory_brand,this,_appendFeFunc).call(this,feComponentTransfer,"feFuncR",rTable);_assertClassBrand(_DOMFilterFactory_brand,this,_appendFeFunc).call(this,feComponentTransfer,"feFuncG",gTable);_assertClassBrand(_DOMFilterFactory_brand,this,_appendFeFunc).call(this,feComponentTransfer,"feFuncB",bTable);}function _addTransferMapAlphaConversion(aTable,filter){var feComponentTransfer=_classPrivateFieldGet(_document2,this).createElementNS(SVG_NS,"feComponentTransfer");filter.append(feComponentTransfer);_assertClassBrand(_DOMFilterFactory_brand,this,_appendFeFunc).call(this,feComponentTransfer,"feFuncA",aTable);}function _getRGB(color){_classPrivateGetter(_DOMFilterFactory_brand,this,_get_defs).style.color=color;return getRGB(getComputedStyle(_classPrivateGetter(_DOMFilterFactory_brand,this,_get_defs)).getPropertyValue("color"));};// ./src/display/standard_fontdata_factory.js\nvar BaseStandardFontDataFactory=/*#__PURE__*/function(){function BaseStandardFontDataFactory(_ref26){var _ref26$baseUrl=_ref26.baseUrl,baseUrl=_ref26$baseUrl===void 0?null:_ref26$baseUrl;_classCallCheck(this,BaseStandardFontDataFactory);this.baseUrl=baseUrl;}return _createClass(BaseStandardFontDataFactory,[{key:"fetch",value:function(){var _fetch5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee20(_ref27){var filename,url;return _regeneratorRuntime().wrap(function _callee20$(_context20){while(1)switch(_context20.prev=_context20.next){case 0:filename=_ref27.filename;if(this.baseUrl){_context20.next=3;break;}throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");case 3:if(filename){_context20.next=5;break;}throw new Error("Font filename must be specified.");case 5:url="".concat(this.baseUrl).concat(filename);return _context20.abrupt("return",this._fetch(url)["catch"](function(reason){throw new Error("Unable to load font data at: ".concat(url));}));case 7:case"end":return _context20.stop();}},_callee20,this);}));function fetch(_x23){return _fetch5.apply(this,arguments);}return fetch;}()},{key:"_fetch",value:function(){var _fetch6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee21(url){return _regeneratorRuntime().wrap(function _callee21$(_context21){while(1)switch(_context21.prev=_context21.next){case 0:unreachable("Abstract method `_fetch` called.");case 1:case"end":return _context21.stop();}},_callee21);}));function _fetch(_x24){return _fetch6.apply(this,arguments);}return _fetch;}()}]);}();var DOMStandardFontDataFactory=/*#__PURE__*/function(_BaseStandardFontData){function DOMStandardFontDataFactory(){_classCallCheck(this,DOMStandardFontDataFactory);return _callSuper(this,DOMStandardFontDataFactory,arguments);}_inherits(DOMStandardFontDataFactory,_BaseStandardFontData);return _createClass(DOMStandardFontDataFactory,[{key:"_fetch",value:function(){var _fetch7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee22(url){var data;return _regeneratorRuntime().wrap(function _callee22$(_context22){while(1)switch(_context22.prev=_context22.next){case 0:_context22.next=2;return _fetchData(url,"arraybuffer");case 2:data=_context22.sent;return _context22.abrupt("return",new Uint8Array(data));case 4:case"end":return _context22.stop();}},_callee22);}));function _fetch(_x25){return _fetch7.apply(this,arguments);}return _fetch;}()}]);}(BaseStandardFontDataFactory);;// ./src/display/wasm_factory.js\nvar BaseWasmFactory=/*#__PURE__*/function(){function BaseWasmFactory(_ref28){var _ref28$baseUrl=_ref28.baseUrl,baseUrl=_ref28$baseUrl===void 0?null:_ref28$baseUrl;_classCallCheck(this,BaseWasmFactory);this.baseUrl=baseUrl;}return _createClass(BaseWasmFactory,[{key:"fetch",value:function(){var _fetch8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee23(_ref29){var filename,url;return _regeneratorRuntime().wrap(function _callee23$(_context23){while(1)switch(_context23.prev=_context23.next){case 0:filename=_ref29.filename;if(this.baseUrl){_context23.next=3;break;}throw new Error("Ensure that the `wasmUrl` API parameter is provided.");case 3:if(filename){_context23.next=5;break;}throw new Error("Wasm filename must be specified.");case 5:url="".concat(this.baseUrl).concat(filename);return _context23.abrupt("return",this._fetch(url)["catch"](function(reason){throw new Error("Unable to load wasm data at: ".concat(url));}));case 7:case"end":return _context23.stop();}},_callee23,this);}));function fetch(_x26){return _fetch8.apply(this,arguments);}return fetch;}()},{key:"_fetch",value:function(){var _fetch9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee24(url){return _regeneratorRuntime().wrap(function _callee24$(_context24){while(1)switch(_context24.prev=_context24.next){case 0:unreachable("Abstract method `_fetch` called.");case 1:case"end":return _context24.stop();}},_callee24);}));function _fetch(_x27){return _fetch9.apply(this,arguments);}return _fetch;}()}]);}();var DOMWasmFactory=/*#__PURE__*/function(_BaseWasmFactory){function DOMWasmFactory(){_classCallCheck(this,DOMWasmFactory);return _callSuper(this,DOMWasmFactory,arguments);}_inherits(DOMWasmFactory,_BaseWasmFactory);return _createClass(DOMWasmFactory,[{key:"_fetch",value:function(){var _fetch10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee25(url){var data;return _regeneratorRuntime().wrap(function _callee25$(_context25){while(1)switch(_context25.prev=_context25.next){case 0:_context25.next=2;return _fetchData(url,"arraybuffer");case 2:data=_context25.sent;return _context25.abrupt("return",new Uint8Array(data));case 4:case"end":return _context25.stop();}},_callee25);}));function _fetch(_x28){return _fetch10.apply(this,arguments);}return _fetch;}()}]);}(BaseWasmFactory);;// ./src/display/node_utils.js\nif(isNodeJS){warn("Please use the `legacy` build in Node.js environments.");}function node_utils_fetchData(_x29){return _node_utils_fetchData.apply(this,arguments);}function _node_utils_fetchData(){_node_utils_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee62(url){var fs,data;return _regeneratorRuntime().wrap(function _callee62$(_context63){while(1)switch(_context63.prev=_context63.next){case 0:fs=process.getBuiltinModule("fs");_context63.next=3;return fs.promises.readFile(url);case 3:data=_context63.sent;return _context63.abrupt("return",new Uint8Array(data));case 5:case"end":return _context63.stop();}},_callee62);}));return _node_utils_fetchData.apply(this,arguments);}var NodeFilterFactory=/*#__PURE__*/function(_BaseFilterFactory2){function NodeFilterFactory(){_classCallCheck(this,NodeFilterFactory);return _callSuper(this,NodeFilterFactory,arguments);}_inherits(NodeFilterFactory,_BaseFilterFactory2);return _createClass(NodeFilterFactory);}(BaseFilterFactory);var NodeCanvasFactory=/*#__PURE__*/function(_BaseCanvasFactory3){function NodeCanvasFactory(){_classCallCheck(this,NodeCanvasFactory);return _callSuper(this,NodeCanvasFactory,arguments);}_inherits(NodeCanvasFactory,_BaseCanvasFactory3);return _createClass(NodeCanvasFactory,[{key:"_createCanvas",value:function _createCanvas(width,height){var require=process.getBuiltinModule("module").createRequire("file:///Users/hansangjun/Desktop/workspace/nodejs/viewer-framework/pdfjs-local/build/dist/build/pdf.js");var canvas=require("@napi-rs/canvas");return canvas.createCanvas(width,height);}}]);}(BaseCanvasFactory);var NodeCMapReaderFactory=/*#__PURE__*/function(_BaseCMapReaderFactor2){function NodeCMapReaderFactory(){_classCallCheck(this,NodeCMapReaderFactory);return _callSuper(this,NodeCMapReaderFactory,arguments);}_inherits(NodeCMapReaderFactory,_BaseCMapReaderFactor2);return _createClass(NodeCMapReaderFactory,[{key:"_fetch",value:function(){var _fetch11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee26(url){return _regeneratorRuntime().wrap(function _callee26$(_context26){while(1)switch(_context26.prev=_context26.next){case 0:return _context26.abrupt("return",node_utils_fetchData(url));case 1:case"end":return _context26.stop();}},_callee26);}));function _fetch(_x30){return _fetch11.apply(this,arguments);}return _fetch;}()}]);}(BaseCMapReaderFactory);var NodeStandardFontDataFactory=/*#__PURE__*/function(_BaseStandardFontData2){function NodeStandardFontDataFactory(){_classCallCheck(this,NodeStandardFontDataFactory);return _callSuper(this,NodeStandardFontDataFactory,arguments);}_inherits(NodeStandardFontDataFactory,_BaseStandardFontData2);return _createClass(NodeStandardFontDataFactory,[{key:"_fetch",value:function(){var _fetch12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee27(url){return _regeneratorRuntime().wrap(function _callee27$(_context27){while(1)switch(_context27.prev=_context27.next){case 0:return _context27.abrupt("return",node_utils_fetchData(url));case 1:case"end":return _context27.stop();}},_callee27);}));function _fetch(_x31){return _fetch12.apply(this,arguments);}return _fetch;}()}]);}(BaseStandardFontDataFactory);var NodeWasmFactory=/*#__PURE__*/function(_BaseWasmFactory2){function NodeWasmFactory(){_classCallCheck(this,NodeWasmFactory);return _callSuper(this,NodeWasmFactory,arguments);}_inherits(NodeWasmFactory,_BaseWasmFactory2);return _createClass(NodeWasmFactory,[{key:"_fetch",value:function(){var _fetch13=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee28(url){return _regeneratorRuntime().wrap(function _callee28$(_context28){while(1)switch(_context28.prev=_context28.next){case 0:return _context28.abrupt("return",node_utils_fetchData(url));case 1:case"end":return _context28.stop();}},_callee28);}));function _fetch(_x32){return _fetch13.apply(this,arguments);}return _fetch;}()}]);}(BaseWasmFactory);;// ./src/display/pattern_helper.js\nvar PathType={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function applyBoundingBox(ctx,bbox){if(!bbox){return;}var width=bbox[2]-bbox[0];var height=bbox[3]-bbox[1];var region=new Path2D();region.rect(bbox[0],bbox[1],width,height);ctx.clip(region);}var BaseShadingPattern=/*#__PURE__*/function(){function BaseShadingPattern(){_classCallCheck(this,BaseShadingPattern);}return _createClass(BaseShadingPattern,[{key:"getPattern",value:function getPattern(){unreachable("Abstract method `getPattern` called.");}}]);}();var RadialAxialShadingPattern=/*#__PURE__*/function(_BaseShadingPattern){function RadialAxialShadingPattern(IR){var _this30;_classCallCheck(this,RadialAxialShadingPattern);_this30=_callSuper(this,RadialAxialShadingPattern);_this30._type=IR[1];_this30._bbox=IR[2];_this30._colorStops=IR[3];_this30._p0=IR[4];_this30._p1=IR[5];_this30._r0=IR[6];_this30._r1=IR[7];_this30.matrix=null;return _this30;}_inherits(RadialAxialShadingPattern,_BaseShadingPattern);return _createClass(RadialAxialShadingPattern,[{key:"_createGradient",value:function _createGradient(ctx){var grad;if(this._type==="axial"){grad=ctx.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]);}else if(this._type==="radial"){grad=ctx.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1);}var _iterator55=_createForOfIteratorHelper(this._colorStops),_step55;try{for(_iterator55.s();!(_step55=_iterator55.n()).done;){var colorStop=_step55.value;grad.addColorStop(colorStop[0],colorStop[1]);}}catch(err){_iterator55.e(err);}finally{_iterator55.f();}return grad;}},{key:"getPattern",value:function getPattern(ctx,owner,inverse,pathType){var pattern;if(pathType===PathType.STROKE||pathType===PathType.FILL){var ownerBBox=owner.current.getClippedPathBoundingBox(pathType,getCurrentTransform(ctx))||[0,0,0,0];var width=Math.ceil(ownerBBox[2]-ownerBBox[0])||1;var height=Math.ceil(ownerBBox[3]-ownerBBox[1])||1;var tmpCanvas=owner.cachedCanvases.getCanvas("pattern",width,height);var tmpCtx=tmpCanvas.context;tmpCtx.clearRect(0,0,tmpCtx.canvas.width,tmpCtx.canvas.height);tmpCtx.beginPath();tmpCtx.rect(0,0,tmpCtx.canvas.width,tmpCtx.canvas.height);tmpCtx.translate(-ownerBBox[0],-ownerBBox[1]);inverse=_Util.transform(inverse,[1,0,0,1,ownerBBox[0],ownerBBox[1]]);tmpCtx.transform.apply(tmpCtx,_toConsumableArray(owner.baseTransform));if(this.matrix){tmpCtx.transform.apply(tmpCtx,_toConsumableArray(this.matrix));}applyBoundingBox(tmpCtx,this._bbox);tmpCtx.fillStyle=this._createGradient(tmpCtx);tmpCtx.fill();pattern=ctx.createPattern(tmpCanvas.canvas,"no-repeat");var domMatrix=new DOMMatrix(inverse);pattern.setTransform(domMatrix);}else{applyBoundingBox(ctx,this._bbox);pattern=this._createGradient(ctx);}return pattern;}}]);}(BaseShadingPattern);function drawTriangle(data,context,p1,p2,p3,c1,c2,c3){var coords=context.coords,colors=context.colors;var bytes=data.data,rowSize=data.width*4;var tmp;if(coords[p1+1]>coords[p2+1]){tmp=p1;p1=p2;p2=tmp;tmp=c1;c1=c2;c2=tmp;}if(coords[p2+1]>coords[p3+1]){tmp=p2;p2=p3;p3=tmp;tmp=c2;c2=c3;c3=tmp;}if(coords[p1+1]>coords[p2+1]){tmp=p1;p1=p2;p2=tmp;tmp=c1;c1=c2;c2=tmp;}var x1=(coords[p1]+context.offsetX)*context.scaleX;var y1=(coords[p1+1]+context.offsetY)*context.scaleY;var x2=(coords[p2]+context.offsetX)*context.scaleX;var y2=(coords[p2+1]+context.offsetY)*context.scaleY;var x3=(coords[p3]+context.offsetX)*context.scaleX;var y3=(coords[p3+1]+context.offsetY)*context.scaleY;if(y1>=y3){return;}var c1r=colors[c1],c1g=colors[c1+1],c1b=colors[c1+2];var c2r=colors[c2],c2g=colors[c2+1],c2b=colors[c2+2];var c3r=colors[c3],c3g=colors[c3+1],c3b=colors[c3+2];var minY=Math.round(y1),maxY=Math.round(y3);var xa,car,cag,cab;var xb,cbr,cbg,cbb;for(var y=minY;y<=maxY;y++){if(y<y2){var _k=y<y1?0:(y1-y)/(y1-y2);xa=x1-(x1-x2)*_k;car=c1r-(c1r-c2r)*_k;cag=c1g-(c1g-c2g)*_k;cab=c1b-(c1b-c2b)*_k;}else{var _k2=void 0;if(y>y3){_k2=1;}else if(y2===y3){_k2=0;}else{_k2=(y2-y)/(y2-y3);}xa=x2-(x2-x3)*_k2;car=c2r-(c2r-c3r)*_k2;cag=c2g-(c2g-c3g)*_k2;cab=c2b-(c2b-c3b)*_k2;}var k=void 0;if(y<y1){k=0;}else if(y>y3){k=1;}else{k=(y1-y)/(y1-y3);}xb=x1-(x1-x3)*k;cbr=c1r-(c1r-c3r)*k;cbg=c1g-(c1g-c3g)*k;cbb=c1b-(c1b-c3b)*k;var x1_=Math.round(Math.min(xa,xb));var x2_=Math.round(Math.max(xa,xb));var j=rowSize*y+x1_*4;for(var x=x1_;x<=x2_;x++){k=(xa-x)/(xa-xb);if(k<0){k=0;}else if(k>1){k=1;}bytes[j++]=car-(car-cbr)*k|0;bytes[j++]=cag-(cag-cbg)*k|0;bytes[j++]=cab-(cab-cbb)*k|0;bytes[j++]=255;}}}function drawFigure(data,figure,context){var ps=figure.coords;var cs=figure.colors;var i,ii;switch(figure.type){case"lattice":var verticesPerRow=figure.verticesPerRow;var rows=Math.floor(ps.length/verticesPerRow)-1;var cols=verticesPerRow-1;for(i=0;i<rows;i++){var q=i*verticesPerRow;for(var j=0;j<cols;j++,q++){drawTriangle(data,context,ps[q],ps[q+1],ps[q+verticesPerRow],cs[q],cs[q+1],cs[q+verticesPerRow]);drawTriangle(data,context,ps[q+verticesPerRow+1],ps[q+1],ps[q+verticesPerRow],cs[q+verticesPerRow+1],cs[q+1],cs[q+verticesPerRow]);}}break;case"triangles":for(i=0,ii=ps.length;i<ii;i+=3){drawTriangle(data,context,ps[i],ps[i+1],ps[i+2],cs[i],cs[i+1],cs[i+2]);}break;default:throw new Error("illegal figure");}}var MeshShadingPattern=/*#__PURE__*/function(_BaseShadingPattern2){function MeshShadingPattern(IR){var _this31;_classCallCheck(this,MeshShadingPattern);_this31=_callSuper(this,MeshShadingPattern);_this31._coords=IR[2];_this31._colors=IR[3];_this31._figures=IR[4];_this31._bounds=IR[5];_this31._bbox=IR[6];_this31._background=IR[7];_this31.matrix=null;return _this31;}_inherits(MeshShadingPattern,_BaseShadingPattern2);return _createClass(MeshShadingPattern,[{key:"_createMeshCanvas",value:function _createMeshCanvas(combinedScale,backgroundColor,cachedCanvases){var EXPECTED_SCALE=1.1;var MAX_PATTERN_SIZE=3000;var BORDER_SIZE=2;var offsetX=Math.floor(this._bounds[0]);var offsetY=Math.floor(this._bounds[1]);var boundsWidth=Math.ceil(this._bounds[2])-offsetX;var boundsHeight=Math.ceil(this._bounds[3])-offsetY;var width=Math.min(Math.ceil(Math.abs(boundsWidth*combinedScale[0]*EXPECTED_SCALE)),MAX_PATTERN_SIZE);var height=Math.min(Math.ceil(Math.abs(boundsHeight*combinedScale[1]*EXPECTED_SCALE)),MAX_PATTERN_SIZE);var scaleX=boundsWidth/width;var scaleY=boundsHeight/height;var context={coords:this._coords,colors:this._colors,offsetX:-offsetX,offsetY:-offsetY,scaleX:1/scaleX,scaleY:1/scaleY};var paddedWidth=width+BORDER_SIZE*2;var paddedHeight=height+BORDER_SIZE*2;var tmpCanvas=cachedCanvases.getCanvas("mesh",paddedWidth,paddedHeight);var tmpCtx=tmpCanvas.context;var data=tmpCtx.createImageData(width,height);if(backgroundColor){var bytes=data.data;for(var i=0,ii=bytes.length;i<ii;i+=4){bytes[i]=backgroundColor[0];bytes[i+1]=backgroundColor[1];bytes[i+2]=backgroundColor[2];bytes[i+3]=255;}}var _iterator56=_createForOfIteratorHelper(this._figures),_step56;try{for(_iterator56.s();!(_step56=_iterator56.n()).done;){var figure=_step56.value;drawFigure(data,figure,context);}}catch(err){_iterator56.e(err);}finally{_iterator56.f();}tmpCtx.putImageData(data,BORDER_SIZE,BORDER_SIZE);var canvas=tmpCanvas.canvas;return{canvas:canvas,offsetX:offsetX-BORDER_SIZE*scaleX,offsetY:offsetY-BORDER_SIZE*scaleY,scaleX:scaleX,scaleY:scaleY};}},{key:"getPattern",value:function getPattern(ctx,owner,inverse,pathType){applyBoundingBox(ctx,this._bbox);var scale;if(pathType===PathType.SHADING){scale=_Util.singularValueDecompose2dScale(getCurrentTransform(ctx));}else{scale=_Util.singularValueDecompose2dScale(owner.baseTransform);if(this.matrix){var matrixScale=_Util.singularValueDecompose2dScale(this.matrix);scale=[scale[0]*matrixScale[0],scale[1]*matrixScale[1]];}}var temporaryPatternCanvas=this._createMeshCanvas(scale,pathType===PathType.SHADING?null:this._background,owner.cachedCanvases);if(pathType!==PathType.SHADING){ctx.setTransform.apply(ctx,_toConsumableArray(owner.baseTransform));if(this.matrix){ctx.transform.apply(ctx,_toConsumableArray(this.matrix));}}ctx.translate(temporaryPatternCanvas.offsetX,temporaryPatternCanvas.offsetY);ctx.scale(temporaryPatternCanvas.scaleX,temporaryPatternCanvas.scaleY);return ctx.createPattern(temporaryPatternCanvas.canvas,"no-repeat");}}]);}(BaseShadingPattern);var DummyShadingPattern=/*#__PURE__*/function(_BaseShadingPattern3){function DummyShadingPattern(){_classCallCheck(this,DummyShadingPattern);return _callSuper(this,DummyShadingPattern,arguments);}_inherits(DummyShadingPattern,_BaseShadingPattern3);return _createClass(DummyShadingPattern,[{key:"getPattern",value:function getPattern(){return"hotpink";}}]);}(BaseShadingPattern);function getShadingPattern(IR){switch(IR[0]){case"RadialAxial":return new RadialAxialShadingPattern(IR);case"Mesh":return new MeshShadingPattern(IR);case"Dummy":return new DummyShadingPattern();}throw new Error("Unknown IR type: ".concat(IR[0]));}var PaintType={COLORED:1,UNCOLORED:2};var TilingPattern=/*#__PURE__*/function(){function TilingPattern(IR,color,ctx,canvasGraphicsFactory,baseTransform){_classCallCheck(this,TilingPattern);this.operatorList=IR[2];this.matrix=IR[3];this.bbox=IR[4];this.xstep=IR[5];this.ystep=IR[6];this.paintType=IR[7];this.tilingType=IR[8];this.color=color;this.ctx=ctx;this.canvasGraphicsFactory=canvasGraphicsFactory;this.baseTransform=baseTransform;}return _createClass(TilingPattern,[{key:"createPatternCanvas",value:function createPatternCanvas(owner){var bbox=this.bbox,operatorList=this.operatorList,paintType=this.paintType,tilingType=this.tilingType,color=this.color,canvasGraphicsFactory=this.canvasGraphicsFactory;var xstep=this.xstep,ystep=this.ystep;xstep=Math.abs(xstep);ystep=Math.abs(ystep);info("TilingType: "+tilingType);var x0=bbox[0],y0=bbox[1],x1=bbox[2],y1=bbox[3];var width=x1-x0;var height=y1-y0;var matrixScale=_Util.singularValueDecompose2dScale(this.matrix);var curMatrixScale=_Util.singularValueDecompose2dScale(this.baseTransform);var combinedScaleX=matrixScale[0]*curMatrixScale[0];var combinedScaleY=matrixScale[1]*curMatrixScale[1];var canvasWidth=width,canvasHeight=height,redrawHorizontally=false,redrawVertically=false;var xScaledStep=Math.ceil(xstep*combinedScaleX);var yScaledStep=Math.ceil(ystep*combinedScaleY);var xScaledWidth=Math.ceil(width*combinedScaleX);var yScaledHeight=Math.ceil(height*combinedScaleY);if(xScaledStep>=xScaledWidth){canvasWidth=xstep;}else{redrawHorizontally=true;}if(yScaledStep>=yScaledHeight){canvasHeight=ystep;}else{redrawVertically=true;}var dimx=this.getSizeAndScale(canvasWidth,this.ctx.canvas.width,combinedScaleX);var dimy=this.getSizeAndScale(canvasHeight,this.ctx.canvas.height,combinedScaleY);var tmpCanvas=owner.cachedCanvases.getCanvas("pattern",dimx.size,dimy.size);var tmpCtx=tmpCanvas.context;var graphics=canvasGraphicsFactory.createCanvasGraphics(tmpCtx);graphics.groupLevel=owner.groupLevel;this.setFillAndStrokeStyleToContext(graphics,paintType,color);tmpCtx.translate(-dimx.scale*x0,-dimy.scale*y0);graphics.transform(dimx.scale,0,0,dimy.scale,0,0);tmpCtx.save();this.clipBbox(graphics,x0,y0,x1,y1);graphics.baseTransform=getCurrentTransform(graphics.ctx);graphics.executeOperatorList(operatorList);graphics.endDrawing();tmpCtx.restore();if(redrawHorizontally||redrawVertically){var image=tmpCanvas.canvas;if(redrawHorizontally){canvasWidth=xstep;}if(redrawVertically){canvasHeight=ystep;}var dimx2=this.getSizeAndScale(canvasWidth,this.ctx.canvas.width,combinedScaleX);var dimy2=this.getSizeAndScale(canvasHeight,this.ctx.canvas.height,combinedScaleY);var xSize=dimx2.size;var ySize=dimy2.size;var tmpCanvas2=owner.cachedCanvases.getCanvas("pattern-workaround",xSize,ySize);var tmpCtx2=tmpCanvas2.context;var ii=redrawHorizontally?Math.floor(width/xstep):0;var jj=redrawVertically?Math.floor(height/ystep):0;for(var i=0;i<=ii;i++){for(var j=0;j<=jj;j++){tmpCtx2.drawImage(image,xSize*i,ySize*j,xSize,ySize,0,0,xSize,ySize);}}return{canvas:tmpCanvas2.canvas,scaleX:dimx2.scale,scaleY:dimy2.scale,offsetX:x0,offsetY:y0};}return{canvas:tmpCanvas.canvas,scaleX:dimx.scale,scaleY:dimy.scale,offsetX:x0,offsetY:y0};}},{key:"getSizeAndScale",value:function getSizeAndScale(step,realOutputSize,scale){var maxSize=Math.max(TilingPattern.MAX_PATTERN_SIZE,realOutputSize);var size=Math.ceil(step*scale);if(size>=maxSize){size=maxSize;}else{scale=size/step;}return{scale:scale,size:size};}},{key:"clipBbox",value:function clipBbox(graphics,x0,y0,x1,y1){var bboxWidth=x1-x0;var bboxHeight=y1-y0;graphics.ctx.rect(x0,y0,bboxWidth,bboxHeight);graphics.current.updateRectMinMax(getCurrentTransform(graphics.ctx),[x0,y0,x1,y1]);graphics.clip();graphics.endPath();}},{key:"setFillAndStrokeStyleToContext",value:function setFillAndStrokeStyleToContext(graphics,paintType,color){var context=graphics.ctx,current=graphics.current;switch(paintType){case PaintType.COLORED:var ctx=this.ctx;context.fillStyle=ctx.fillStyle;context.strokeStyle=ctx.strokeStyle;current.fillColor=ctx.fillStyle;current.strokeColor=ctx.strokeStyle;break;case PaintType.UNCOLORED:var cssColor=_Util.makeHexColor(color[0],color[1],color[2]);context.fillStyle=cssColor;context.strokeStyle=cssColor;current.fillColor=cssColor;current.strokeColor=cssColor;break;default:throw new FormatError("Unsupported paint type: ".concat(paintType));}}},{key:"getPattern",value:function getPattern(ctx,owner,inverse,pathType){var matrix=inverse;if(pathType!==PathType.SHADING){matrix=_Util.transform(matrix,owner.baseTransform);if(this.matrix){matrix=_Util.transform(matrix,this.matrix);}}var temporaryPatternCanvas=this.createPatternCanvas(owner);var domMatrix=new DOMMatrix(matrix);domMatrix=domMatrix.translate(temporaryPatternCanvas.offsetX,temporaryPatternCanvas.offsetY);domMatrix=domMatrix.scale(1/temporaryPatternCanvas.scaleX,1/temporaryPatternCanvas.scaleY);var pattern=ctx.createPattern(temporaryPatternCanvas.canvas,"repeat");pattern.setTransform(domMatrix);return pattern;}}]);}();_defineProperty(TilingPattern,"MAX_PATTERN_SIZE",3000);;// ./src/shared/image_utils.js\nfunction convertToRGBA(params){switch(params.kind){case ImageKind.GRAYSCALE_1BPP:return convertBlackAndWhiteToRGBA(params);case ImageKind.RGB_24BPP:return convertRGBToRGBA(params);}return null;}function convertBlackAndWhiteToRGBA(_ref30){var src=_ref30.src,_ref30$srcPos=_ref30.srcPos,srcPos=_ref30$srcPos===void 0?0:_ref30$srcPos,dest=_ref30.dest,width=_ref30.width,height=_ref30.height,_ref30$nonBlackColor=_ref30.nonBlackColor,nonBlackColor=_ref30$nonBlackColor===void 0?0xffffffff:_ref30$nonBlackColor,_ref30$inverseDecode=_ref30.inverseDecode,inverseDecode=_ref30$inverseDecode===void 0?false:_ref30$inverseDecode;var black=util_FeatureTest.isLittleEndian?0xff000000:0x000000ff;var _ref31=inverseDecode?[nonBlackColor,black]:[black,nonBlackColor],_ref32=_slicedToArray(_ref31,2),zeroMapping=_ref32[0],oneMapping=_ref32[1];var widthInSource=width>>3;var widthRemainder=width&7;var srcLength=src.length;dest=new Uint32Array(dest.buffer);var destPos=0;for(var i=0;i<height;i++){for(var max=srcPos+widthInSource;srcPos<max;srcPos++){var _elem=srcPos<srcLength?src[srcPos]:255;dest[destPos++]=_elem&128?oneMapping:zeroMapping;dest[destPos++]=_elem&64?oneMapping:zeroMapping;dest[destPos++]=_elem&32?oneMapping:zeroMapping;dest[destPos++]=_elem&16?oneMapping:zeroMapping;dest[destPos++]=_elem&8?oneMapping:zeroMapping;dest[destPos++]=_elem&4?oneMapping:zeroMapping;dest[destPos++]=_elem&2?oneMapping:zeroMapping;dest[destPos++]=_elem&1?oneMapping:zeroMapping;}if(widthRemainder===0){continue;}var elem=srcPos<srcLength?src[srcPos++]:255;for(var j=0;j<widthRemainder;j++){dest[destPos++]=elem&1<<7-j?oneMapping:zeroMapping;}}return{srcPos:srcPos,destPos:destPos};}function convertRGBToRGBA(_ref33){var src=_ref33.src,_ref33$srcPos=_ref33.srcPos,srcPos=_ref33$srcPos===void 0?0:_ref33$srcPos,dest=_ref33.dest,_ref33$destPos=_ref33.destPos,destPos=_ref33$destPos===void 0?0:_ref33$destPos,width=_ref33.width,height=_ref33.height;var i=0;var len=width*height*3;var len32=len>>2;var src32=new Uint32Array(src.buffer,srcPos,len32);if(FeatureTest.isLittleEndian){for(;i<len32-2;i+=3,destPos+=4){var s1=src32[i];var s2=src32[i+1];var s3=src32[i+2];dest[destPos]=s1|0xff000000;dest[destPos+1]=s1>>>24|s2<<8|0xff000000;dest[destPos+2]=s2>>>16|s3<<16|0xff000000;dest[destPos+3]=s3>>>8|0xff000000;}for(var j=i*4,jj=srcPos+len;j<jj;j+=3){dest[destPos++]=src[j]|src[j+1]<<8|src[j+2]<<16|0xff000000;}}else{for(;i<len32-2;i+=3,destPos+=4){var _s=src32[i];var _s2=src32[i+1];var _s3=src32[i+2];dest[destPos]=_s|0xff;dest[destPos+1]=_s<<24|_s2>>>8|0xff;dest[destPos+2]=_s2<<16|_s3>>>16|0xff;dest[destPos+3]=_s3<<8|0xff;}for(var _j=i*4,_jj=srcPos+len;_j<_jj;_j+=3){dest[destPos++]=src[_j]<<24|src[_j+1]<<16|src[_j+2]<<8|0xff;}}return{srcPos:srcPos+len,destPos:destPos};}function grayToRGBA(src,dest){if(FeatureTest.isLittleEndian){for(var i=0,ii=src.length;i<ii;i++){dest[i]=src[i]*0x10101|0xff000000;}}else{for(var _i14=0,_ii2=src.length;_i14<_ii2;_i14++){dest[_i14]=src[_i14]*0x1010100|0x000000ff;}}};// ./src/display/canvas.js\nvar MIN_FONT_SIZE=16;var MAX_FONT_SIZE=100;var EXECUTION_TIME=15;var EXECUTION_STEPS=10;var MAX_SIZE_TO_COMPILE=1000;var FULL_CHUNK_HEIGHT=16;function mirrorContextOperations(ctx,destCtx){if(ctx._removeMirroring){throw new Error("Context is already forwarding operations.");}ctx.__originalSave=ctx.save;ctx.__originalRestore=ctx.restore;ctx.__originalRotate=ctx.rotate;ctx.__originalScale=ctx.scale;ctx.__originalTranslate=ctx.translate;ctx.__originalTransform=ctx.transform;ctx.__originalSetTransform=ctx.setTransform;ctx.__originalResetTransform=ctx.resetTransform;ctx.__originalClip=ctx.clip;ctx.__originalMoveTo=ctx.moveTo;ctx.__originalLineTo=ctx.lineTo;ctx.__originalBezierCurveTo=ctx.bezierCurveTo;ctx.__originalRect=ctx.rect;ctx.__originalClosePath=ctx.closePath;ctx.__originalBeginPath=ctx.beginPath;ctx._removeMirroring=function(){ctx.save=ctx.__originalSave;ctx.restore=ctx.__originalRestore;ctx.rotate=ctx.__originalRotate;ctx.scale=ctx.__originalScale;ctx.translate=ctx.__originalTranslate;ctx.transform=ctx.__originalTransform;ctx.setTransform=ctx.__originalSetTransform;ctx.resetTransform=ctx.__originalResetTransform;ctx.clip=ctx.__originalClip;ctx.moveTo=ctx.__originalMoveTo;ctx.lineTo=ctx.__originalLineTo;ctx.bezierCurveTo=ctx.__originalBezierCurveTo;ctx.rect=ctx.__originalRect;ctx.closePath=ctx.__originalClosePath;ctx.beginPath=ctx.__originalBeginPath;delete ctx._removeMirroring;};ctx.save=function ctxSave(){destCtx.save();this.__originalSave();};ctx.restore=function ctxRestore(){destCtx.restore();this.__originalRestore();};ctx.translate=function ctxTranslate(x,y){destCtx.translate(x,y);this.__originalTranslate(x,y);};ctx.scale=function ctxScale(x,y){destCtx.scale(x,y);this.__originalScale(x,y);};ctx.transform=function ctxTransform(a,b,c,d,e,f){destCtx.transform(a,b,c,d,e,f);this.__originalTransform(a,b,c,d,e,f);};ctx.setTransform=function ctxSetTransform(a,b,c,d,e,f){destCtx.setTransform(a,b,c,d,e,f);this.__originalSetTransform(a,b,c,d,e,f);};ctx.resetTransform=function ctxResetTransform(){destCtx.resetTransform();this.__originalResetTransform();};ctx.rotate=function ctxRotate(angle){destCtx.rotate(angle);this.__originalRotate(angle);};ctx.clip=function ctxRotate(rule){destCtx.clip(rule);this.__originalClip(rule);};ctx.moveTo=function(x,y){destCtx.moveTo(x,y);this.__originalMoveTo(x,y);};ctx.lineTo=function(x,y){destCtx.lineTo(x,y);this.__originalLineTo(x,y);};ctx.bezierCurveTo=function(cp1x,cp1y,cp2x,cp2y,x,y){destCtx.bezierCurveTo(cp1x,cp1y,cp2x,cp2y,x,y);this.__originalBezierCurveTo(cp1x,cp1y,cp2x,cp2y,x,y);};ctx.rect=function(x,y,width,height){destCtx.rect(x,y,width,height);this.__originalRect(x,y,width,height);};ctx.closePath=function(){destCtx.closePath();this.__originalClosePath();};ctx.beginPath=function(){destCtx.beginPath();this.__originalBeginPath();};}var CachedCanvases=/*#__PURE__*/function(){function CachedCanvases(canvasFactory){_classCallCheck(this,CachedCanvases);this.canvasFactory=canvasFactory;this.cache=Object.create(null);}return _createClass(CachedCanvases,[{key:"getCanvas",value:function getCanvas(id,width,height){var canvasEntry;if(this.cache[id]!==undefined){canvasEntry=this.cache[id];this.canvasFactory.reset(canvasEntry,width,height);}else{canvasEntry=this.canvasFactory.create(width,height);this.cache[id]=canvasEntry;}return canvasEntry;}},{key:"delete",value:function _delete(id){delete this.cache[id];}},{key:"clear",value:function clear(){for(var id in this.cache){var canvasEntry=this.cache[id];this.canvasFactory.destroy(canvasEntry);delete this.cache[id];}}}]);}();function drawImageAtIntegerCoords(ctx,srcImg,srcX,srcY,srcW,srcH,destX,destY,destW,destH){var _getCurrentTransform=getCurrentTransform(ctx),_getCurrentTransform2=_slicedToArray(_getCurrentTransform,6),a=_getCurrentTransform2[0],b=_getCurrentTransform2[1],c=_getCurrentTransform2[2],d=_getCurrentTransform2[3],tx=_getCurrentTransform2[4],ty=_getCurrentTransform2[5];if(b===0&&c===0){var tlX=destX*a+tx;var rTlX=Math.round(tlX);var tlY=destY*d+ty;var rTlY=Math.round(tlY);var brX=(destX+destW)*a+tx;var rWidth=Math.abs(Math.round(brX)-rTlX)||1;var brY=(destY+destH)*d+ty;var rHeight=Math.abs(Math.round(brY)-rTlY)||1;ctx.setTransform(Math.sign(a),0,0,Math.sign(d),rTlX,rTlY);ctx.drawImage(srcImg,srcX,srcY,srcW,srcH,0,0,rWidth,rHeight);ctx.setTransform(a,b,c,d,tx,ty);return[rWidth,rHeight];}if(a===0&&d===0){var _tlX=destY*c+tx;var _rTlX=Math.round(_tlX);var _tlY=destX*b+ty;var _rTlY=Math.round(_tlY);var _brX=(destY+destH)*c+tx;var _rWidth=Math.abs(Math.round(_brX)-_rTlX)||1;var _brY=(destX+destW)*b+ty;var _rHeight=Math.abs(Math.round(_brY)-_rTlY)||1;ctx.setTransform(0,Math.sign(b),Math.sign(c),0,_rTlX,_rTlY);ctx.drawImage(srcImg,srcX,srcY,srcW,srcH,0,0,_rHeight,_rWidth);ctx.setTransform(a,b,c,d,tx,ty);return[_rHeight,_rWidth];}ctx.drawImage(srcImg,srcX,srcY,srcW,srcH,destX,destY,destW,destH);var scaleX=Math.hypot(a,b);var scaleY=Math.hypot(c,d);return[scaleX*destW,scaleY*destH];}function compileType3Glyph(imgData){var width=imgData.width,height=imgData.height;if(width>MAX_SIZE_TO_COMPILE||height>MAX_SIZE_TO_COMPILE){return null;}var POINT_TO_PROCESS_LIMIT=1000;var POINT_TYPES=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]);var width1=width+1;var points=new Uint8Array(width1*(height+1));var i,j,j0;var lineSize=width+7&~7;var data=new Uint8Array(lineSize*height),pos=0;var _iterator57=_createForOfIteratorHelper(imgData.data),_step57;try{for(_iterator57.s();!(_step57=_iterator57.n()).done;){var elem=_step57.value;var mask=128;while(mask>0){data[pos++]=elem&mask?0:255;mask>>=1;}}}catch(err){_iterator57.e(err);}finally{_iterator57.f();}var count=0;pos=0;if(data[pos]!==0){points[0]=1;++count;}for(j=1;j<width;j++){if(data[pos]!==data[pos+1]){points[j]=data[pos]?2:1;++count;}pos++;}if(data[pos]!==0){points[j]=2;++count;}for(i=1;i<height;i++){pos=i*lineSize;j0=i*width1;if(data[pos-lineSize]!==data[pos]){points[j0]=data[pos]?1:8;++count;}var sum=(data[pos]?4:0)+(data[pos-lineSize]?8:0);for(j=1;j<width;j++){sum=(sum>>2)+(data[pos+1]?4:0)+(data[pos-lineSize+1]?8:0);if(POINT_TYPES[sum]){points[j0+j]=POINT_TYPES[sum];++count;}pos++;}if(data[pos-lineSize]!==data[pos]){points[j0+j]=data[pos]?2:4;++count;}if(count>POINT_TO_PROCESS_LIMIT){return null;}}pos=lineSize*(height-1);j0=i*width1;if(data[pos]!==0){points[j0]=8;++count;}for(j=1;j<width;j++){if(data[pos]!==data[pos+1]){points[j0+j]=data[pos]?4:8;++count;}pos++;}if(data[pos]!==0){points[j0+j]=4;++count;}if(count>POINT_TO_PROCESS_LIMIT){return null;}var steps=new Int32Array([0,width1,-1,0,-width1,0,0,0,1]);var path=new Path2D();for(i=0;count&&i<=height;i++){var p=i*width1;var end=p+width;while(p<end&&!points[p]){p++;}if(p===end){continue;}path.moveTo(p%width1,i);var p0=p;var type=points[p];do{var step=steps[type];do{p+=step;}while(!points[p]);var pp=points[p];if(pp!==5&&pp!==10){type=pp;points[p]=0;}else{type=pp&0x33*type>>4;points[p]&=type>>2|type<<2;}path.lineTo(p%width1,p/width1|0);if(!points[p]){--count;}}while(p0!==p);--i;}data=null;points=null;var drawOutline=function drawOutline(c){c.save();c.scale(1/width,-1/height);c.translate(0,-height);c.fill(path);c.beginPath();c.restore();};return drawOutline;}var CanvasExtraState=/*#__PURE__*/function(){function CanvasExtraState(width,height){_classCallCheck(this,CanvasExtraState);this.alphaIsShape=false;this.fontSize=0;this.fontSizeScale=1;this.textMatrix=IDENTITY_MATRIX;this.textMatrixScale=1;this.fontMatrix=FONT_IDENTITY_MATRIX;this.leading=0;this.x=0;this.y=0;this.lineX=0;this.lineY=0;this.charSpacing=0;this.wordSpacing=0;this.textHScale=1;this.textRenderingMode=TextRenderingMode.FILL;this.textRise=0;this.fillColor="#000000";this.strokeColor="#000000";this.patternFill=false;this.patternStroke=false;this.fillAlpha=1;this.strokeAlpha=1;this.lineWidth=1;this.activeSMask=null;this.transferMaps="none";this.startNewPathAndClipBox([0,0,width,height]);}return _createClass(CanvasExtraState,[{key:"clone",value:function clone(){var clone=Object.create(this);clone.clipBox=this.clipBox.slice();return clone;}},{key:"setCurrentPoint",value:function setCurrentPoint(x,y){this.x=x;this.y=y;}},{key:"updatePathMinMax",value:function updatePathMinMax(transform,x,y){var _Util$applyTransform=_Util.applyTransform([x,y],transform);var _Util$applyTransform2=_slicedToArray(_Util$applyTransform,2);x=_Util$applyTransform2[0];y=_Util$applyTransform2[1];this.minX=Math.min(this.minX,x);this.minY=Math.min(this.minY,y);this.maxX=Math.max(this.maxX,x);this.maxY=Math.max(this.maxY,y);}},{key:"updateRectMinMax",value:function updateRectMinMax(transform,rect){var p1=_Util.applyTransform(rect,transform);var p2=_Util.applyTransform(rect.slice(2),transform);var p3=_Util.applyTransform([rect[0],rect[3]],transform);var p4=_Util.applyTransform([rect[2],rect[1]],transform);this.minX=Math.min(this.minX,p1[0],p2[0],p3[0],p4[0]);this.minY=Math.min(this.minY,p1[1],p2[1],p3[1],p4[1]);this.maxX=Math.max(this.maxX,p1[0],p2[0],p3[0],p4[0]);this.maxY=Math.max(this.maxY,p1[1],p2[1],p3[1],p4[1]);}},{key:"updateScalingPathMinMax",value:function updateScalingPathMinMax(transform,minMax){_Util.scaleMinMax(transform,minMax);this.minX=Math.min(this.minX,minMax[0]);this.minY=Math.min(this.minY,minMax[1]);this.maxX=Math.max(this.maxX,minMax[2]);this.maxY=Math.max(this.maxY,minMax[3]);}},{key:"updateCurvePathMinMax",value:function updateCurvePathMinMax(transform,x0,y0,x1,y1,x2,y2,x3,y3,minMax){var box=_Util.bezierBoundingBox(x0,y0,x1,y1,x2,y2,x3,y3,minMax);if(minMax){return;}this.updateRectMinMax(transform,box);}},{key:"getPathBoundingBox",value:function getPathBoundingBox(){var pathType=arguments.length>0&&arguments[0]!==undefined?arguments[0]:PathType.FILL;var transform=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var box=[this.minX,this.minY,this.maxX,this.maxY];if(pathType===PathType.STROKE){if(!transform){unreachable("Stroke bounding box must include transform.");}var scale=_Util.singularValueDecompose2dScale(transform);var xStrokePad=scale[0]*this.lineWidth/2;var yStrokePad=scale[1]*this.lineWidth/2;box[0]-=xStrokePad;box[1]-=yStrokePad;box[2]+=xStrokePad;box[3]+=yStrokePad;}return box;}},{key:"updateClipFromPath",value:function updateClipFromPath(){var intersect=_Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(intersect||[0,0,0,0]);}},{key:"isEmptyClip",value:function isEmptyClip(){return this.minX===Infinity;}},{key:"startNewPathAndClipBox",value:function startNewPathAndClipBox(box){this.clipBox=box;this.minX=Infinity;this.minY=Infinity;this.maxX=0;this.maxY=0;}},{key:"getClippedPathBoundingBox",value:function getClippedPathBoundingBox(){var pathType=arguments.length>0&&arguments[0]!==undefined?arguments[0]:PathType.FILL;var transform=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return _Util.intersect(this.clipBox,this.getPathBoundingBox(pathType,transform));}}]);}();function putBinaryImageData(ctx,imgData){if(imgData instanceof ImageData){ctx.putImageData(imgData,0,0);return;}var height=imgData.height,width=imgData.width;var partialChunkHeight=height%FULL_CHUNK_HEIGHT;var fullChunks=(height-partialChunkHeight)/FULL_CHUNK_HEIGHT;var totalChunks=partialChunkHeight===0?fullChunks:fullChunks+1;var chunkImgData=ctx.createImageData(width,FULL_CHUNK_HEIGHT);var srcPos=0,destPos;var src=imgData.data;var dest=chunkImgData.data;var i,j,thisChunkHeight,elemsInThisChunk;if(imgData.kind===util_ImageKind.GRAYSCALE_1BPP){var srcLength=src.byteLength;var dest32=new Uint32Array(dest.buffer,0,dest.byteLength>>2);var dest32DataLength=dest32.length;var fullSrcDiff=width+7>>3;var white=0xffffffff;var black=util_FeatureTest.isLittleEndian?0xff000000:0x000000ff;for(i=0;i<totalChunks;i++){thisChunkHeight=i<fullChunks?FULL_CHUNK_HEIGHT:partialChunkHeight;destPos=0;for(j=0;j<thisChunkHeight;j++){var srcDiff=srcLength-srcPos;var k=0;var kEnd=srcDiff>fullSrcDiff?width:srcDiff*8-7;var kEndUnrolled=kEnd&~7;var mask=0;var srcByte=0;for(;k<kEndUnrolled;k+=8){srcByte=src[srcPos++];dest32[destPos++]=srcByte&128?white:black;dest32[destPos++]=srcByte&64?white:black;dest32[destPos++]=srcByte&32?white:black;dest32[destPos++]=srcByte&16?white:black;dest32[destPos++]=srcByte&8?white:black;dest32[destPos++]=srcByte&4?white:black;dest32[destPos++]=srcByte&2?white:black;dest32[destPos++]=srcByte&1?white:black;}for(;k<kEnd;k++){if(mask===0){srcByte=src[srcPos++];mask=128;}dest32[destPos++]=srcByte&mask?white:black;mask>>=1;}}while(destPos<dest32DataLength){dest32[destPos++]=0;}ctx.putImageData(chunkImgData,0,i*FULL_CHUNK_HEIGHT);}}else if(imgData.kind===util_ImageKind.RGBA_32BPP){j=0;elemsInThisChunk=width*FULL_CHUNK_HEIGHT*4;for(i=0;i<fullChunks;i++){dest.set(src.subarray(srcPos,srcPos+elemsInThisChunk));srcPos+=elemsInThisChunk;ctx.putImageData(chunkImgData,0,j);j+=FULL_CHUNK_HEIGHT;}if(i<totalChunks){elemsInThisChunk=width*partialChunkHeight*4;dest.set(src.subarray(srcPos,srcPos+elemsInThisChunk));ctx.putImageData(chunkImgData,0,j);}}else if(imgData.kind===util_ImageKind.RGB_24BPP){thisChunkHeight=FULL_CHUNK_HEIGHT;elemsInThisChunk=width*thisChunkHeight;for(i=0;i<totalChunks;i++){if(i>=fullChunks){thisChunkHeight=partialChunkHeight;elemsInThisChunk=width*thisChunkHeight;}destPos=0;for(j=elemsInThisChunk;j--;){dest[destPos++]=src[srcPos++];dest[destPos++]=src[srcPos++];dest[destPos++]=src[srcPos++];dest[destPos++]=255;}ctx.putImageData(chunkImgData,0,i*FULL_CHUNK_HEIGHT);}}else{throw new Error("bad image kind: ".concat(imgData.kind));}}function putBinaryImageMask(ctx,imgData){if(imgData.bitmap){ctx.drawImage(imgData.bitmap,0,0);return;}var height=imgData.height,width=imgData.width;var partialChunkHeight=height%FULL_CHUNK_HEIGHT;var fullChunks=(height-partialChunkHeight)/FULL_CHUNK_HEIGHT;var totalChunks=partialChunkHeight===0?fullChunks:fullChunks+1;var chunkImgData=ctx.createImageData(width,FULL_CHUNK_HEIGHT);var srcPos=0;var src=imgData.data;var dest=chunkImgData.data;for(var i=0;i<totalChunks;i++){var thisChunkHeight=i<fullChunks?FULL_CHUNK_HEIGHT:partialChunkHeight;var _convertBlackAndWhite=convertBlackAndWhiteToRGBA({src:src,srcPos:srcPos,dest:dest,width:width,height:thisChunkHeight,nonBlackColor:0});srcPos=_convertBlackAndWhite.srcPos;ctx.putImageData(chunkImgData,0,i*FULL_CHUNK_HEIGHT);}}function copyCtxState(sourceCtx,destCtx){var properties=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(var _i15=0,_properties=properties;_i15<_properties.length;_i15++){var property=_properties[_i15];if(sourceCtx[property]!==undefined){destCtx[property]=sourceCtx[property];}}if(sourceCtx.setLineDash!==undefined){destCtx.setLineDash(sourceCtx.getLineDash());destCtx.lineDashOffset=sourceCtx.lineDashOffset;}}function resetCtxToDefault(ctx){ctx.strokeStyle=ctx.fillStyle="#000000";ctx.fillRule="nonzero";ctx.globalAlpha=1;ctx.lineWidth=1;ctx.lineCap="butt";ctx.lineJoin="miter";ctx.miterLimit=10;ctx.globalCompositeOperation="source-over";ctx.font="10px sans-serif";if(ctx.setLineDash!==undefined){ctx.setLineDash([]);ctx.lineDashOffset=0;}if(!isNodeJS){var filter=ctx.filter;if(filter!=="none"&&filter!==""){ctx.filter="none";}}}function getImageSmoothingEnabled(transform,interpolate){if(interpolate){return true;}var scale=_Util.singularValueDecompose2dScale(transform);scale[0]=Math.fround(scale[0]);scale[1]=Math.fround(scale[1]);var actualScale=Math.fround((globalThis.devicePixelRatio||1)*_PixelsPerInch.PDF_TO_CSS_UNITS);return scale[0]<=actualScale&&scale[1]<=actualScale;}var LINE_CAP_STYLES=["butt","round","square"];var LINE_JOIN_STYLES=["miter","round","bevel"];var NORMAL_CLIP={};var EO_CLIP={};var _CanvasGraphics_brand=/*#__PURE__*/new WeakSet();var CanvasGraphics=/*#__PURE__*/function(){function CanvasGraphics(canvasCtx,commonObjs,objs,canvasFactory,filterFactory,_ref34,annotationCanvasMap,pageColors){var optionalContentConfig=_ref34.optionalContentConfig,_ref34$markedContentS=_ref34.markedContentStack,markedContentStack=_ref34$markedContentS===void 0?null:_ref34$markedContentS;_classCallCheck(this,CanvasGraphics);_classPrivateMethodInitSpec(this,_CanvasGraphics_brand);this.ctx=canvasCtx;this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height);this.stateStack=[];this.pendingClip=null;this.pendingEOFill=false;this.res=null;this.xobjs=null;this.commonObjs=commonObjs;this.objs=objs;this.canvasFactory=canvasFactory;this.filterFactory=filterFactory;this.groupStack=[];this.processingType3=null;this.baseTransform=null;this.baseTransformStack=[];this.groupLevel=0;this.smaskStack=[];this.smaskCounter=0;this.tempSMask=null;this.suspendedCtx=null;this.contentVisible=true;this.markedContentStack=markedContentStack||[];this.optionalContentConfig=optionalContentConfig;this.cachedCanvases=new CachedCanvases(this.canvasFactory);this.cachedPatterns=new Map();this.annotationCanvasMap=annotationCanvasMap;this.viewportScale=1;this.outputScaleX=1;this.outputScaleY=1;this.pageColors=pageColors;this._cachedScaleForStroking=[-1,0];this._cachedGetSinglePixelWidth=null;this._cachedBitmapsMap=new Map();}return _createClass(CanvasGraphics,[{key:"getObject",value:function getObject(data){var fallback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(typeof data==="string"){return data.startsWith("g_")?this.commonObjs.get(data):this.objs.get(data);}return fallback;}},{key:"beginDrawing",value:function beginDrawing(_ref35){var _this$ctx3;var transform=_ref35.transform,viewport=_ref35.viewport,_ref35$transparency=_ref35.transparency,transparency=_ref35$transparency===void 0?false:_ref35$transparency,_ref35$background=_ref35.background,background=_ref35$background===void 0?null:_ref35$background;var width=this.ctx.canvas.width;var height=this.ctx.canvas.height;var savedFillStyle=this.ctx.fillStyle;this.ctx.fillStyle=background||"#ffffff";this.ctx.fillRect(0,0,width,height);this.ctx.fillStyle=savedFillStyle;if(transparency){var _this$ctx;var transparentCanvas=this.cachedCanvases.getCanvas("transparent",width,height);this.compositeCtx=this.ctx;this.transparentCanvas=transparentCanvas.canvas;this.ctx=transparentCanvas.context;this.ctx.save();(_this$ctx=this.ctx).transform.apply(_this$ctx,_toConsumableArray(getCurrentTransform(this.compositeCtx)));}this.ctx.save();resetCtxToDefault(this.ctx);if(transform){var _this$ctx2;(_this$ctx2=this.ctx).transform.apply(_this$ctx2,_toConsumableArray(transform));this.outputScaleX=transform[0];this.outputScaleY=transform[0];}(_this$ctx3=this.ctx).transform.apply(_this$ctx3,_toConsumableArray(viewport.transform));this.viewportScale=viewport.scale;this.baseTransform=getCurrentTransform(this.ctx);}},{key:"executeOperatorList",value:function executeOperatorList(operatorList,executionStartIdx,continueCallback,stepper){var argsArray=operatorList.argsArray;var fnArray=operatorList.fnArray;var i=executionStartIdx||0;var argsArrayLen=argsArray.length;if(argsArrayLen===i){return i;}var chunkOperations=argsArrayLen-i>EXECUTION_STEPS&&typeof continueCallback==="function";var endTime=chunkOperations?Date.now()+EXECUTION_TIME:0;var steps=0;var commonObjs=this.commonObjs;var objs=this.objs;var fnId;while(true){if(stepper!==undefined&&i===stepper.nextBreakPoint){stepper.breakIt(i,continueCallback);return i;}fnId=fnArray[i];if(fnId!==_OPS.dependency){this[fnId].apply(this,argsArray[i]);}else{var _iterator58=_createForOfIteratorHelper(argsArray[i]),_step58;try{for(_iterator58.s();!(_step58=_iterator58.n()).done;){var depObjId=_step58.value;var objsPool=depObjId.startsWith("g_")?commonObjs:objs;if(!objsPool.has(depObjId)){objsPool.get(depObjId,continueCallback);return i;}}}catch(err){_iterator58.e(err);}finally{_iterator58.f();}}i++;if(i===argsArrayLen){return i;}if(chunkOperations&&++steps>EXECUTION_STEPS){if(Date.now()>endTime){continueCallback();return i;}steps=0;}}}},{key:"endDrawing",value:function endDrawing(){_assertClassBrand(_CanvasGraphics_brand,this,_restoreInitialState).call(this);this.cachedCanvases.clear();this.cachedPatterns.clear();var _iterator59=_createForOfIteratorHelper(this._cachedBitmapsMap.values()),_step59;try{for(_iterator59.s();!(_step59=_iterator59.n()).done;){var cache=_step59.value;var _iterator60=_createForOfIteratorHelper(cache.values()),_step60;try{for(_iterator60.s();!(_step60=_iterator60.n()).done;){var canvas=_step60.value;if(typeof HTMLCanvasElement!=="undefined"&&canvas instanceof HTMLCanvasElement){canvas.width=canvas.height=0;}}}catch(err){_iterator60.e(err);}finally{_iterator60.f();}cache.clear();}}catch(err){_iterator59.e(err);}finally{_iterator59.f();}this._cachedBitmapsMap.clear();_assertClassBrand(_CanvasGraphics_brand,this,_drawFilter).call(this);}},{key:"_scaleImage",value:function _scaleImage(img,inverseTransform){var _img$width,_img$height;var width=(_img$width=img.width)!==null&&_img$width!==void 0?_img$width:img.displayWidth;var height=(_img$height=img.height)!==null&&_img$height!==void 0?_img$height:img.displayHeight;var widthScale=Math.max(Math.hypot(inverseTransform[0],inverseTransform[1]),1);var heightScale=Math.max(Math.hypot(inverseTransform[2],inverseTransform[3]),1);var paintWidth=width,paintHeight=height;var tmpCanvasId="prescale1";var tmpCanvas,tmpCtx;while(widthScale>2&&paintWidth>1||heightScale>2&&paintHeight>1){var newWidth=paintWidth,newHeight=paintHeight;if(widthScale>2&&paintWidth>1){newWidth=paintWidth>=16384?Math.floor(paintWidth/2)-1||1:Math.ceil(paintWidth/2);widthScale/=paintWidth/newWidth;}if(heightScale>2&&paintHeight>1){newHeight=paintHeight>=16384?Math.floor(paintHeight/2)-1||1:Math.ceil(paintHeight)/2;heightScale/=paintHeight/newHeight;}tmpCanvas=this.cachedCanvases.getCanvas(tmpCanvasId,newWidth,newHeight);tmpCtx=tmpCanvas.context;tmpCtx.clearRect(0,0,newWidth,newHeight);tmpCtx.drawImage(img,0,0,paintWidth,paintHeight,0,0,newWidth,newHeight);img=tmpCanvas.canvas;paintWidth=newWidth;paintHeight=newHeight;tmpCanvasId=tmpCanvasId==="prescale1"?"prescale2":"prescale1";}return{img:img,paintWidth:paintWidth,paintHeight:paintHeight};}},{key:"_createMaskCanvas",value:function _createMaskCanvas(img){var ctx=this.ctx;var width=img.width,height=img.height;var fillColor=this.current.fillColor;var isPatternFill=this.current.patternFill;var currentTransform=getCurrentTransform(ctx);var cache,cacheKey,scaled,maskCanvas;if((img.bitmap||img.data)&&img.count>1){var mainKey=img.bitmap||img.data.buffer;cacheKey=JSON.stringify(isPatternFill?currentTransform:[currentTransform.slice(0,4),fillColor]);cache=this._cachedBitmapsMap.get(mainKey);if(!cache){cache=new Map();this._cachedBitmapsMap.set(mainKey,cache);}var cachedImage=cache.get(cacheKey);if(cachedImage&&!isPatternFill){var _offsetX=Math.round(Math.min(currentTransform[0],currentTransform[2])+currentTransform[4]);var _offsetY=Math.round(Math.min(currentTransform[1],currentTransform[3])+currentTransform[5]);return{canvas:cachedImage,offsetX:_offsetX,offsetY:_offsetY};}scaled=cachedImage;}if(!scaled){maskCanvas=this.cachedCanvases.getCanvas("maskCanvas",width,height);putBinaryImageMask(maskCanvas.context,img);}var maskToCanvas=_Util.transform(currentTransform,[1/width,0,0,-1/height,0,0]);maskToCanvas=_Util.transform(maskToCanvas,[1,0,0,1,0,-height]);var _Util$getAxialAligned=_Util.getAxialAlignedBoundingBox([0,0,width,height],maskToCanvas),_Util$getAxialAligned2=_slicedToArray(_Util$getAxialAligned,4),minX=_Util$getAxialAligned2[0],minY=_Util$getAxialAligned2[1],maxX=_Util$getAxialAligned2[2],maxY=_Util$getAxialAligned2[3];var drawnWidth=Math.round(maxX-minX)||1;var drawnHeight=Math.round(maxY-minY)||1;var fillCanvas=this.cachedCanvases.getCanvas("fillCanvas",drawnWidth,drawnHeight);var fillCtx=fillCanvas.context;var offsetX=minX;var offsetY=minY;fillCtx.translate(-offsetX,-offsetY);fillCtx.transform.apply(fillCtx,_toConsumableArray(maskToCanvas));if(!scaled){scaled=this._scaleImage(maskCanvas.canvas,getCurrentTransformInverse(fillCtx));scaled=scaled.img;if(cache&&isPatternFill){cache.set(cacheKey,scaled);}}fillCtx.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(fillCtx),img.interpolate);drawImageAtIntegerCoords(fillCtx,scaled,0,0,scaled.width,scaled.height,0,0,width,height);fillCtx.globalCompositeOperation="source-in";var inverse=_Util.transform(getCurrentTransformInverse(fillCtx),[1,0,0,1,-offsetX,-offsetY]);fillCtx.fillStyle=isPatternFill?fillColor.getPattern(ctx,this,inverse,PathType.FILL):fillColor;fillCtx.fillRect(0,0,width,height);if(cache&&!isPatternFill){this.cachedCanvases["delete"]("fillCanvas");cache.set(cacheKey,fillCanvas.canvas);}return{canvas:fillCanvas.canvas,offsetX:Math.round(offsetX),offsetY:Math.round(offsetY)};}},{key:"setLineWidth",value:function setLineWidth(width){if(width!==this.current.lineWidth){this._cachedScaleForStroking[0]=-1;}this.current.lineWidth=width;this.ctx.lineWidth=width;}},{key:"setLineCap",value:function setLineCap(style){this.ctx.lineCap=LINE_CAP_STYLES[style];}},{key:"setLineJoin",value:function setLineJoin(style){this.ctx.lineJoin=LINE_JOIN_STYLES[style];}},{key:"setMiterLimit",value:function setMiterLimit(limit){this.ctx.miterLimit=limit;}},{key:"setDash",value:function setDash(dashArray,dashPhase){var ctx=this.ctx;if(ctx.setLineDash!==undefined){ctx.setLineDash(dashArray);ctx.lineDashOffset=dashPhase;}}},{key:"setRenderingIntent",value:function setRenderingIntent(intent){}},{key:"setFlatness",value:function setFlatness(flatness){}},{key:"setGState",value:function setGState(states){var _iterator61=_createForOfIteratorHelper(states),_step61;try{for(_iterator61.s();!(_step61=_iterator61.n()).done;){var _step61$value=_slicedToArray(_step61.value,2),key=_step61$value[0],value=_step61$value[1];switch(key){case"LW":this.setLineWidth(value);break;case"LC":this.setLineCap(value);break;case"LJ":this.setLineJoin(value);break;case"ML":this.setMiterLimit(value);break;case"D":this.setDash(value[0],value[1]);break;case"RI":this.setRenderingIntent(value);break;case"FL":this.setFlatness(value);break;case"Font":this.setFont(value[0],value[1]);break;case"CA":this.current.strokeAlpha=value;break;case"ca":this.current.fillAlpha=value;this.ctx.globalAlpha=value;break;case"BM":this.ctx.globalCompositeOperation=value;break;case"SMask":this.current.activeSMask=value?this.tempSMask:null;this.tempSMask=null;this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(value);break;}}}catch(err){_iterator61.e(err);}finally{_iterator61.f();}}},{key:"inSMaskMode",get:function get(){return!!this.suspendedCtx;}},{key:"checkSMaskState",value:function checkSMaskState(){var inSMaskMode=this.inSMaskMode;if(this.current.activeSMask&&!inSMaskMode){this.beginSMaskMode();}else if(!this.current.activeSMask&&inSMaskMode){this.endSMaskMode();}}},{key:"beginSMaskMode",value:function beginSMaskMode(){if(this.inSMaskMode){throw new Error("beginSMaskMode called while already in smask mode");}var drawnWidth=this.ctx.canvas.width;var drawnHeight=this.ctx.canvas.height;var cacheId="smaskGroupAt"+this.groupLevel;var scratchCanvas=this.cachedCanvases.getCanvas(cacheId,drawnWidth,drawnHeight);this.suspendedCtx=this.ctx;this.ctx=scratchCanvas.context;var ctx=this.ctx;ctx.setTransform.apply(ctx,_toConsumableArray(getCurrentTransform(this.suspendedCtx)));copyCtxState(this.suspendedCtx,ctx);mirrorContextOperations(ctx,this.suspendedCtx);this.setGState([["BM","source-over"],["ca",1],["CA",1]]);}},{key:"endSMaskMode",value:function endSMaskMode(){if(!this.inSMaskMode){throw new Error("endSMaskMode called while not in smask mode");}this.ctx._removeMirroring();copyCtxState(this.ctx,this.suspendedCtx);this.ctx=this.suspendedCtx;this.suspendedCtx=null;}},{key:"compose",value:function compose(dirtyBox){if(!this.current.activeSMask){return;}if(!dirtyBox){dirtyBox=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];}else{dirtyBox[0]=Math.floor(dirtyBox[0]);dirtyBox[1]=Math.floor(dirtyBox[1]);dirtyBox[2]=Math.ceil(dirtyBox[2]);dirtyBox[3]=Math.ceil(dirtyBox[3]);}var smask=this.current.activeSMask;var suspendedCtx=this.suspendedCtx;this.composeSMask(suspendedCtx,smask,this.ctx,dirtyBox);this.ctx.save();this.ctx.setTransform(1,0,0,1,0,0);this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height);this.ctx.restore();}},{key:"composeSMask",value:function composeSMask(ctx,smask,layerCtx,layerBox){var layerOffsetX=layerBox[0];var layerOffsetY=layerBox[1];var layerWidth=layerBox[2]-layerOffsetX;var layerHeight=layerBox[3]-layerOffsetY;if(layerWidth===0||layerHeight===0){return;}this.genericComposeSMask(smask.context,layerCtx,layerWidth,layerHeight,smask.subtype,smask.backdrop,smask.transferMap,layerOffsetX,layerOffsetY,smask.offsetX,smask.offsetY);ctx.save();ctx.globalAlpha=1;ctx.globalCompositeOperation="source-over";ctx.setTransform(1,0,0,1,0,0);ctx.drawImage(layerCtx.canvas,0,0);ctx.restore();}},{key:"genericComposeSMask",value:function genericComposeSMask(maskCtx,layerCtx,width,height,subtype,backdrop,transferMap,layerOffsetX,layerOffsetY,maskOffsetX,maskOffsetY){var maskCanvas=maskCtx.canvas;var maskX=layerOffsetX-maskOffsetX;var maskY=layerOffsetY-maskOffsetY;if(backdrop){var backdropRGB=_Util.makeHexColor.apply(_Util,_toConsumableArray(backdrop));if(maskX<0||maskY<0||maskX+width>maskCanvas.width||maskY+height>maskCanvas.height){var canvas=this.cachedCanvases.getCanvas("maskExtension",width,height);var ctx=canvas.context;ctx.drawImage(maskCanvas,-maskX,-maskY);ctx.globalCompositeOperation="destination-atop";ctx.fillStyle=backdropRGB;ctx.fillRect(0,0,width,height);ctx.globalCompositeOperation="source-over";maskCanvas=canvas.canvas;maskX=maskY=0;}else{maskCtx.save();maskCtx.globalAlpha=1;maskCtx.setTransform(1,0,0,1,0,0);var _clip=new Path2D();_clip.rect(maskX,maskY,width,height);maskCtx.clip(_clip);maskCtx.globalCompositeOperation="destination-atop";maskCtx.fillStyle=backdropRGB;maskCtx.fillRect(maskX,maskY,width,height);maskCtx.restore();}}layerCtx.save();layerCtx.globalAlpha=1;layerCtx.setTransform(1,0,0,1,0,0);if(subtype==="Alpha"&&transferMap){layerCtx.filter=this.filterFactory.addAlphaFilter(transferMap);}else if(subtype==="Luminosity"){layerCtx.filter=this.filterFactory.addLuminosityFilter(transferMap);}var clip=new Path2D();clip.rect(layerOffsetX,layerOffsetY,width,height);layerCtx.clip(clip);layerCtx.globalCompositeOperation="destination-in";layerCtx.drawImage(maskCanvas,maskX,maskY,width,height,layerOffsetX,layerOffsetY,width,height);layerCtx.restore();}},{key:"save",value:function save(){if(this.inSMaskMode){copyCtxState(this.ctx,this.suspendedCtx);this.suspendedCtx.save();}else{this.ctx.save();}var old=this.current;this.stateStack.push(old);this.current=old.clone();}},{key:"restore",value:function restore(){if(this.stateStack.length===0&&this.inSMaskMode){this.endSMaskMode();}if(this.stateStack.length!==0){this.current=this.stateStack.pop();if(this.inSMaskMode){this.suspendedCtx.restore();copyCtxState(this.suspendedCtx,this.ctx);}else{this.ctx.restore();}this.checkSMaskState();this.pendingClip=null;this._cachedScaleForStroking[0]=-1;this._cachedGetSinglePixelWidth=null;}}},{key:"transform",value:function transform(a,b,c,d,e,f){this.ctx.transform(a,b,c,d,e,f);this._cachedScaleForStroking[0]=-1;this._cachedGetSinglePixelWidth=null;}},{key:"constructPath",value:function constructPath(ops,args,minMax){var ctx=this.ctx;var current=this.current;var x=current.x,y=current.y;var startX,startY;var currentTransform=getCurrentTransform(ctx);var isScalingMatrix=currentTransform[0]===0&&currentTransform[3]===0||currentTransform[1]===0&&currentTransform[2]===0;var minMaxForBezier=isScalingMatrix?minMax.slice(0):null;for(var i=0,j=0,ii=ops.length;i<ii;i++){switch(ops[i]|0){case _OPS.rectangle:x=args[j++];y=args[j++];var width=args[j++];var height=args[j++];var xw=x+width;var yh=y+height;ctx.moveTo(x,y);if(width===0||height===0){ctx.lineTo(xw,yh);}else{ctx.lineTo(xw,y);ctx.lineTo(xw,yh);ctx.lineTo(x,yh);}if(!isScalingMatrix){current.updateRectMinMax(currentTransform,[x,y,xw,yh]);}ctx.closePath();break;case _OPS.moveTo:x=args[j++];y=args[j++];ctx.moveTo(x,y);if(!isScalingMatrix){current.updatePathMinMax(currentTransform,x,y);}break;case _OPS.lineTo:x=args[j++];y=args[j++];ctx.lineTo(x,y);if(!isScalingMatrix){current.updatePathMinMax(currentTransform,x,y);}break;case _OPS.curveTo:startX=x;startY=y;x=args[j+4];y=args[j+5];ctx.bezierCurveTo(args[j],args[j+1],args[j+2],args[j+3],x,y);current.updateCurvePathMinMax(currentTransform,startX,startY,args[j],args[j+1],args[j+2],args[j+3],x,y,minMaxForBezier);j+=6;break;case _OPS.curveTo2:startX=x;startY=y;ctx.bezierCurveTo(x,y,args[j],args[j+1],args[j+2],args[j+3]);current.updateCurvePathMinMax(currentTransform,startX,startY,x,y,args[j],args[j+1],args[j+2],args[j+3],minMaxForBezier);x=args[j+2];y=args[j+3];j+=4;break;case _OPS.curveTo3:startX=x;startY=y;x=args[j+2];y=args[j+3];ctx.bezierCurveTo(args[j],args[j+1],x,y,x,y);current.updateCurvePathMinMax(currentTransform,startX,startY,args[j],args[j+1],x,y,x,y,minMaxForBezier);j+=4;break;case _OPS.closePath:ctx.closePath();break;}}if(isScalingMatrix){current.updateScalingPathMinMax(currentTransform,minMaxForBezier);}current.setCurrentPoint(x,y);}},{key:"closePath",value:function closePath(){this.ctx.closePath();}},{key:"stroke",value:function stroke(){var consumePath=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var ctx=this.ctx;var strokeColor=this.current.strokeColor;ctx.globalAlpha=this.current.strokeAlpha;if(this.contentVisible){if(_typeof(strokeColor)==="object"&&strokeColor!==null&&strokeColor!==void 0&&strokeColor.getPattern){ctx.save();ctx.strokeStyle=strokeColor.getPattern(ctx,this,getCurrentTransformInverse(ctx),PathType.STROKE);this.rescaleAndStroke(false);ctx.restore();}else{this.rescaleAndStroke(true);}}if(consumePath){this.consumePath(this.current.getClippedPathBoundingBox());}ctx.globalAlpha=this.current.fillAlpha;}},{key:"closeStroke",value:function closeStroke(){this.closePath();this.stroke();}},{key:"fill",value:function fill(){var consumePath=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var ctx=this.ctx;var fillColor=this.current.fillColor;var isPatternFill=this.current.patternFill;var needRestore=false;if(isPatternFill){ctx.save();ctx.fillStyle=fillColor.getPattern(ctx,this,getCurrentTransformInverse(ctx),PathType.FILL);needRestore=true;}var intersect=this.current.getClippedPathBoundingBox();if(this.contentVisible&&intersect!==null){if(this.pendingEOFill){ctx.fill("evenodd");this.pendingEOFill=false;}else{ctx.fill();}}if(needRestore){ctx.restore();}if(consumePath){this.consumePath(intersect);}}},{key:"eoFill",value:function eoFill(){this.pendingEOFill=true;this.fill();}},{key:"fillStroke",value:function fillStroke(){this.fill(false);this.stroke(false);this.consumePath();}},{key:"eoFillStroke",value:function eoFillStroke(){this.pendingEOFill=true;this.fillStroke();}},{key:"closeFillStroke",value:function closeFillStroke(){this.closePath();this.fillStroke();}},{key:"closeEOFillStroke",value:function closeEOFillStroke(){this.pendingEOFill=true;this.closePath();this.fillStroke();}},{key:"endPath",value:function endPath(){this.consumePath();}},{key:"clip",value:function clip(){this.pendingClip=NORMAL_CLIP;}},{key:"eoClip",value:function eoClip(){this.pendingClip=EO_CLIP;}},{key:"beginText",value:function beginText(){this.current.textMatrix=IDENTITY_MATRIX;this.current.textMatrixScale=1;this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0;}},{key:"endText",value:function endText(){var paths=this.pendingTextPaths;var ctx=this.ctx;if(paths===undefined){ctx.beginPath();return;}var newPath=new Path2D();var invTransf=ctx.getTransform().invertSelf();var _iterator62=_createForOfIteratorHelper(paths),_step62;try{for(_iterator62.s();!(_step62=_iterator62.n()).done;){var _step62$value=_step62.value,transform=_step62$value.transform,x=_step62$value.x,y=_step62$value.y,fontSize=_step62$value.fontSize,path=_step62$value.path;newPath.addPath(path,new DOMMatrix(transform).preMultiplySelf(invTransf).translate(x,y).scale(fontSize,-fontSize));}}catch(err){_iterator62.e(err);}finally{_iterator62.f();}ctx.clip(newPath);ctx.beginPath();delete this.pendingTextPaths;}},{key:"setCharSpacing",value:function setCharSpacing(spacing){this.current.charSpacing=spacing;}},{key:"setWordSpacing",value:function setWordSpacing(spacing){this.current.wordSpacing=spacing;}},{key:"setHScale",value:function setHScale(scale){this.current.textHScale=scale/100;}},{key:"setLeading",value:function setLeading(leading){this.current.leading=-leading;}},{key:"setFont",value:function setFont(fontRefName,size){var _fontObj$systemFontIn;var fontObj=this.commonObjs.get(fontRefName);var current=this.current;if(!fontObj){throw new Error("Can\'t find font for ".concat(fontRefName));}current.fontMatrix=fontObj.fontMatrix||FONT_IDENTITY_MATRIX;if(current.fontMatrix[0]===0||current.fontMatrix[3]===0){warn("Invalid font matrix for font "+fontRefName);}if(size<0){size=-size;current.fontDirection=-1;}else{current.fontDirection=1;}this.current.font=fontObj;this.current.fontSize=size;if(fontObj.isType3Font){return;}var name=fontObj.loadedName||"sans-serif";var typeface=((_fontObj$systemFontIn=fontObj.systemFontInfo)===null||_fontObj$systemFontIn===void 0?void 0:_fontObj$systemFontIn.css)||"\\"".concat(name,"\\", ").concat(fontObj.fallbackName);var bold="normal";if(fontObj.black){bold="900";}else if(fontObj.bold){bold="bold";}var italic=fontObj.italic?"italic":"normal";var browserFontSize=size;if(size<MIN_FONT_SIZE){browserFontSize=MIN_FONT_SIZE;}else if(size>MAX_FONT_SIZE){browserFontSize=MAX_FONT_SIZE;}this.current.fontSizeScale=size/browserFontSize;this.ctx.font="".concat(italic," ").concat(bold," ").concat(browserFontSize,"px ").concat(typeface);}},{key:"setTextRenderingMode",value:function setTextRenderingMode(mode){this.current.textRenderingMode=mode;}},{key:"setTextRise",value:function setTextRise(rise){this.current.textRise=rise;}},{key:"moveText",value:function moveText(x,y){this.current.x=this.current.lineX+=x;this.current.y=this.current.lineY+=y;}},{key:"setLeadingMoveText",value:function setLeadingMoveText(x,y){this.setLeading(-y);this.moveText(x,y);}},{key:"setTextMatrix",value:function setTextMatrix(a,b,c,d,e,f){this.current.textMatrix=[a,b,c,d,e,f];this.current.textMatrixScale=Math.hypot(a,b);this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0;}},{key:"nextLine",value:function nextLine(){this.moveText(0,this.current.leading);}},{key:"paintChar",value:function paintChar(character,x,y,patternFillTransform,patternStrokeTransform){var ctx=this.ctx;var current=this.current;var font=current.font;var textRenderingMode=current.textRenderingMode;var fontSize=current.fontSize/current.fontSizeScale;var fillStrokeMode=textRenderingMode&TextRenderingMode.FILL_STROKE_MASK;var isAddToPathSet=!!(textRenderingMode&TextRenderingMode.ADD_TO_PATH_FLAG);var patternFill=current.patternFill&&!font.missingFile;var patternStroke=current.patternStroke&&!font.missingFile;var path;if(font.disableFontFace||isAddToPathSet||patternFill||patternStroke){path=font.getPathGenerator(this.commonObjs,character);}if(font.disableFontFace||patternFill||patternStroke){ctx.save();ctx.translate(x,y);ctx.scale(fontSize,-fontSize);var currentTransform;if(fillStrokeMode===TextRenderingMode.FILL||fillStrokeMode===TextRenderingMode.FILL_STROKE){if(patternFillTransform){currentTransform=ctx.getTransform();ctx.setTransform.apply(ctx,_toConsumableArray(patternFillTransform));ctx.fill(_assertClassBrand(_CanvasGraphics_brand,this,_getScaledPath).call(this,path,currentTransform,patternFillTransform));}else{ctx.fill(path);}}if(fillStrokeMode===TextRenderingMode.STROKE||fillStrokeMode===TextRenderingMode.FILL_STROKE){if(patternStrokeTransform){currentTransform||(currentTransform=ctx.getTransform());ctx.setTransform.apply(ctx,_toConsumableArray(patternStrokeTransform));var _currentTransform=currentTransform,a=_currentTransform.a,b=_currentTransform.b,c=_currentTransform.c,d=_currentTransform.d;var invPatternTransform=_Util.inverseTransform(patternStrokeTransform);var transf=_Util.transform([a,b,c,d,0,0],invPatternTransform);var _Util$singularValueDe=_Util.singularValueDecompose2dScale(transf),_Util$singularValueDe2=_slicedToArray(_Util$singularValueDe,2),sx=_Util$singularValueDe2[0],sy=_Util$singularValueDe2[1];ctx.lineWidth*=Math.max(sx,sy)/fontSize;ctx.stroke(_assertClassBrand(_CanvasGraphics_brand,this,_getScaledPath).call(this,path,currentTransform,patternStrokeTransform));}else{ctx.lineWidth/=fontSize;ctx.stroke(path);}}ctx.restore();}else{if(fillStrokeMode===TextRenderingMode.FILL||fillStrokeMode===TextRenderingMode.FILL_STROKE){ctx.fillText(character,x,y);}if(fillStrokeMode===TextRenderingMode.STROKE||fillStrokeMode===TextRenderingMode.FILL_STROKE){ctx.strokeText(character,x,y);}}if(isAddToPathSet){var paths=this.pendingTextPaths||(this.pendingTextPaths=[]);paths.push({transform:getCurrentTransform(ctx),x:x,y:y,fontSize:fontSize,path:path});}}},{key:"isFontSubpixelAAEnabled",get:function get(){var _this$cachedCanvases$=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10),ctx=_this$cachedCanvases$.context;ctx.scale(1.5,1);ctx.fillText("I",0,10);var data=ctx.getImageData(0,0,10,10).data;var enabled=false;for(var i=3;i<data.length;i+=4){if(data[i]>0&&data[i]<255){enabled=true;break;}}return _shadow(this,"isFontSubpixelAAEnabled",enabled);}},{key:"showText",value:function showText(glyphs){var current=this.current;var font=current.font;if(font.isType3Font){return this.showType3Text(glyphs);}var fontSize=current.fontSize;if(fontSize===0){return undefined;}var ctx=this.ctx;var fontSizeScale=current.fontSizeScale;var charSpacing=current.charSpacing;var wordSpacing=current.wordSpacing;var fontDirection=current.fontDirection;var textHScale=current.textHScale*fontDirection;var glyphsLength=glyphs.length;var vertical=font.vertical;var spacingDir=vertical?1:-1;var defaultVMetrics=font.defaultVMetrics;var widthAdvanceScale=fontSize*current.fontMatrix[0];var simpleFillText=current.textRenderingMode===TextRenderingMode.FILL&&!font.disableFontFace&&!current.patternFill;ctx.save();ctx.transform.apply(ctx,_toConsumableArray(current.textMatrix));ctx.translate(current.x,current.y+current.textRise);if(fontDirection>0){ctx.scale(textHScale,-1);}else{ctx.scale(textHScale,1);}var patternFillTransform,patternStrokeTransform;if(current.patternFill){ctx.save();var pattern=current.fillColor.getPattern(ctx,this,getCurrentTransformInverse(ctx),PathType.FILL);patternFillTransform=getCurrentTransform(ctx);ctx.restore();ctx.fillStyle=pattern;}if(current.patternStroke){ctx.save();var _pattern=current.strokeColor.getPattern(ctx,this,getCurrentTransformInverse(ctx),PathType.STROKE);patternStrokeTransform=getCurrentTransform(ctx);ctx.restore();ctx.strokeStyle=_pattern;}var lineWidth=current.lineWidth;var scale=current.textMatrixScale;if(scale===0||lineWidth===0){var fillStrokeMode=current.textRenderingMode&TextRenderingMode.FILL_STROKE_MASK;if(fillStrokeMode===TextRenderingMode.STROKE||fillStrokeMode===TextRenderingMode.FILL_STROKE){lineWidth=this.getSinglePixelWidth();}}else{lineWidth/=scale;}if(fontSizeScale!==1.0){ctx.scale(fontSizeScale,fontSizeScale);lineWidth/=fontSizeScale;}ctx.lineWidth=lineWidth;if(font.isInvalidPDFjsFont){var chars=[];var width=0;var _iterator63=_createForOfIteratorHelper(glyphs),_step63;try{for(_iterator63.s();!(_step63=_iterator63.n()).done;){var glyph=_step63.value;chars.push(glyph.unicode);width+=glyph.width;}}catch(err){_iterator63.e(err);}finally{_iterator63.f();}ctx.fillText(chars.join(""),0,0);current.x+=width*widthAdvanceScale*textHScale;ctx.restore();this.compose();return undefined;}var x=0,i;for(i=0;i<glyphsLength;++i){var _glyph=glyphs[i];if(typeof _glyph==="number"){x+=spacingDir*_glyph*fontSize/1000;continue;}var restoreNeeded=false;var spacing=(_glyph.isSpace?wordSpacing:0)+charSpacing;var character=_glyph.fontChar;var accent=_glyph.accent;var scaledX=void 0,scaledY=void 0;var _width2=_glyph.width;if(vertical){var vmetric=_glyph.vmetric||defaultVMetrics;var vx=-(_glyph.vmetric?vmetric[1]:_width2*0.5)*widthAdvanceScale;var vy=vmetric[2]*widthAdvanceScale;_width2=vmetric?-vmetric[0]:_width2;scaledX=vx/fontSizeScale;scaledY=(x+vy)/fontSizeScale;}else{scaledX=x/fontSizeScale;scaledY=0;}if(font.remeasure&&_width2>0){var measuredWidth=ctx.measureText(character).width*1000/fontSize*fontSizeScale;if(_width2<measuredWidth&&this.isFontSubpixelAAEnabled){var characterScaleX=_width2/measuredWidth;restoreNeeded=true;ctx.save();ctx.scale(characterScaleX,1);scaledX/=characterScaleX;}else if(_width2!==measuredWidth){scaledX+=(_width2-measuredWidth)/2000*fontSize/fontSizeScale;}}if(this.contentVisible&&(_glyph.isInFont||font.missingFile)){if(simpleFillText&&!accent){ctx.fillText(character,scaledX,scaledY);}else{this.paintChar(character,scaledX,scaledY,patternFillTransform,patternStrokeTransform);if(accent){var scaledAccentX=scaledX+fontSize*accent.offset.x/fontSizeScale;var scaledAccentY=scaledY-fontSize*accent.offset.y/fontSizeScale;this.paintChar(accent.fontChar,scaledAccentX,scaledAccentY,patternFillTransform,patternStrokeTransform);}}}var charWidth=vertical?_width2*widthAdvanceScale-spacing*fontDirection:_width2*widthAdvanceScale+spacing*fontDirection;x+=charWidth;if(restoreNeeded){ctx.restore();}}if(vertical){current.y-=x;}else{current.x+=x*textHScale;}ctx.restore();this.compose();return undefined;}},{key:"showType3Text",value:function showType3Text(glyphs){var ctx=this.ctx;var current=this.current;var font=current.font;var fontSize=current.fontSize;var fontDirection=current.fontDirection;var spacingDir=font.vertical?1:-1;var charSpacing=current.charSpacing;var wordSpacing=current.wordSpacing;var textHScale=current.textHScale*fontDirection;var fontMatrix=current.fontMatrix||FONT_IDENTITY_MATRIX;var glyphsLength=glyphs.length;var isTextInvisible=current.textRenderingMode===TextRenderingMode.INVISIBLE;var i,glyph,width,spacingLength;if(isTextInvisible||fontSize===0){return;}this._cachedScaleForStroking[0]=-1;this._cachedGetSinglePixelWidth=null;ctx.save();ctx.transform.apply(ctx,_toConsumableArray(current.textMatrix));ctx.translate(current.x,current.y+current.textRise);ctx.scale(textHScale,fontDirection);for(i=0;i<glyphsLength;++i){glyph=glyphs[i];if(typeof glyph==="number"){spacingLength=spacingDir*glyph*fontSize/1000;this.ctx.translate(spacingLength,0);current.x+=spacingLength*textHScale;continue;}var spacing=(glyph.isSpace?wordSpacing:0)+charSpacing;var operatorList=font.charProcOperatorList[glyph.operatorListId];if(!operatorList){warn("Type3 character \\"".concat(glyph.operatorListId,"\\" is not available."));continue;}if(this.contentVisible){this.processingType3=glyph;this.save();ctx.scale(fontSize,fontSize);ctx.transform.apply(ctx,_toConsumableArray(fontMatrix));this.executeOperatorList(operatorList);this.restore();}var transformed=_Util.applyTransform([glyph.width,0],fontMatrix);width=transformed[0]*fontSize+spacing;ctx.translate(width,0);current.x+=width*textHScale;}ctx.restore();this.processingType3=null;}},{key:"setCharWidth",value:function setCharWidth(xWidth,yWidth){}},{key:"setCharWidthAndBounds",value:function setCharWidthAndBounds(xWidth,yWidth,llx,lly,urx,ury){this.ctx.rect(llx,lly,urx-llx,ury-lly);this.ctx.clip();this.endPath();}},{key:"getColorN_Pattern",value:function getColorN_Pattern(IR){var _this32=this;var pattern;if(IR[0]==="TilingPattern"){var color=IR[1];var baseTransform=this.baseTransform||getCurrentTransform(this.ctx);var canvasGraphicsFactory={createCanvasGraphics:function createCanvasGraphics(ctx){return new CanvasGraphics(ctx,_this32.commonObjs,_this32.objs,_this32.canvasFactory,_this32.filterFactory,{optionalContentConfig:_this32.optionalContentConfig,markedContentStack:_this32.markedContentStack});}};pattern=new TilingPattern(IR,color,this.ctx,canvasGraphicsFactory,baseTransform);}else{pattern=this._getPattern(IR[1],IR[2]);}return pattern;}},{key:"setStrokeColorN",value:function setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments);this.current.patternStroke=true;}},{key:"setFillColorN",value:function setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments);this.current.patternFill=true;}},{key:"setStrokeRGBColor",value:function setStrokeRGBColor(r,g,b){this.ctx.strokeStyle=this.current.strokeColor=_Util.makeHexColor(r,g,b);this.current.patternStroke=false;}},{key:"setStrokeTransparent",value:function setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent";this.current.patternStroke=false;}},{key:"setFillRGBColor",value:function setFillRGBColor(r,g,b){this.ctx.fillStyle=this.current.fillColor=_Util.makeHexColor(r,g,b);this.current.patternFill=false;}},{key:"setFillTransparent",value:function setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent";this.current.patternFill=false;}},{key:"_getPattern",value:function _getPattern(objId){var matrix=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var pattern;if(this.cachedPatterns.has(objId)){pattern=this.cachedPatterns.get(objId);}else{pattern=getShadingPattern(this.getObject(objId));this.cachedPatterns.set(objId,pattern);}if(matrix){pattern.matrix=matrix;}return pattern;}},{key:"shadingFill",value:function shadingFill(objId){if(!this.contentVisible){return;}var ctx=this.ctx;this.save();var pattern=this._getPattern(objId);ctx.fillStyle=pattern.getPattern(ctx,this,getCurrentTransformInverse(ctx),PathType.SHADING);var inv=getCurrentTransformInverse(ctx);if(inv){var _ctx$canvas=ctx.canvas,width=_ctx$canvas.width,height=_ctx$canvas.height;var _Util$getAxialAligned3=_Util.getAxialAlignedBoundingBox([0,0,width,height],inv),_Util$getAxialAligned4=_slicedToArray(_Util$getAxialAligned3,4),x0=_Util$getAxialAligned4[0],y0=_Util$getAxialAligned4[1],x1=_Util$getAxialAligned4[2],y1=_Util$getAxialAligned4[3];this.ctx.fillRect(x0,y0,x1-x0,y1-y0);}else{this.ctx.fillRect(-1e10,-1e10,2e10,2e10);}this.compose(this.current.getClippedPathBoundingBox());this.restore();}},{key:"beginInlineImage",value:function beginInlineImage(){unreachable("Should not call beginInlineImage");}},{key:"beginImageData",value:function beginImageData(){unreachable("Should not call beginImageData");}},{key:"paintFormXObjectBegin",value:function paintFormXObjectBegin(matrix,bbox){if(!this.contentVisible){return;}this.save();this.baseTransformStack.push(this.baseTransform);if(matrix){this.transform.apply(this,_toConsumableArray(matrix));}this.baseTransform=getCurrentTransform(this.ctx);if(bbox){var width=bbox[2]-bbox[0];var height=bbox[3]-bbox[1];this.ctx.rect(bbox[0],bbox[1],width,height);this.current.updateRectMinMax(getCurrentTransform(this.ctx),bbox);this.clip();this.endPath();}}},{key:"paintFormXObjectEnd",value:function paintFormXObjectEnd(){if(!this.contentVisible){return;}this.restore();this.baseTransform=this.baseTransformStack.pop();}},{key:"beginGroup",value:function beginGroup(group){if(!this.contentVisible){return;}this.save();if(this.inSMaskMode){this.endSMaskMode();this.current.activeSMask=null;}var currentCtx=this.ctx;if(!group.isolated){info("TODO: Support non-isolated groups.");}if(group.knockout){warn("Knockout groups not supported.");}var currentTransform=getCurrentTransform(currentCtx);if(group.matrix){currentCtx.transform.apply(currentCtx,_toConsumableArray(group.matrix));}if(!group.bbox){throw new Error("Bounding box is required.");}var bounds=_Util.getAxialAlignedBoundingBox(group.bbox,getCurrentTransform(currentCtx));var canvasBounds=[0,0,currentCtx.canvas.width,currentCtx.canvas.height];bounds=_Util.intersect(bounds,canvasBounds)||[0,0,0,0];var offsetX=Math.floor(bounds[0]);var offsetY=Math.floor(bounds[1]);var drawnWidth=Math.max(Math.ceil(bounds[2])-offsetX,1);var drawnHeight=Math.max(Math.ceil(bounds[3])-offsetY,1);this.current.startNewPathAndClipBox([0,0,drawnWidth,drawnHeight]);var cacheId="groupAt"+this.groupLevel;if(group.smask){cacheId+="_smask_"+this.smaskCounter++%2;}var scratchCanvas=this.cachedCanvases.getCanvas(cacheId,drawnWidth,drawnHeight);var groupCtx=scratchCanvas.context;groupCtx.translate(-offsetX,-offsetY);groupCtx.transform.apply(groupCtx,_toConsumableArray(currentTransform));if(group.smask){this.smaskStack.push({canvas:scratchCanvas.canvas,context:groupCtx,offsetX:offsetX,offsetY:offsetY,subtype:group.smask.subtype,backdrop:group.smask.backdrop,transferMap:group.smask.transferMap||null,startTransformInverse:null});}else{currentCtx.setTransform(1,0,0,1,0,0);currentCtx.translate(offsetX,offsetY);currentCtx.save();}copyCtxState(currentCtx,groupCtx);this.ctx=groupCtx;this.setGState([["BM","source-over"],["ca",1],["CA",1]]);this.groupStack.push(currentCtx);this.groupLevel++;}},{key:"endGroup",value:function endGroup(group){if(!this.contentVisible){return;}this.groupLevel--;var groupCtx=this.ctx;var ctx=this.groupStack.pop();this.ctx=ctx;this.ctx.imageSmoothingEnabled=false;if(group.smask){this.tempSMask=this.smaskStack.pop();this.restore();}else{var _this$ctx4;this.ctx.restore();var currentMtx=getCurrentTransform(this.ctx);this.restore();this.ctx.save();(_this$ctx4=this.ctx).setTransform.apply(_this$ctx4,_toConsumableArray(currentMtx));var dirtyBox=_Util.getAxialAlignedBoundingBox([0,0,groupCtx.canvas.width,groupCtx.canvas.height],currentMtx);this.ctx.drawImage(groupCtx.canvas,0,0);this.ctx.restore();this.compose(dirtyBox);}}},{key:"beginAnnotation",value:function beginAnnotation(id,rect,transform,matrix,hasOwnCanvas){_assertClassBrand(_CanvasGraphics_brand,this,_restoreInitialState).call(this);resetCtxToDefault(this.ctx);this.ctx.save();this.save();if(this.baseTransform){var _this$ctx5;(_this$ctx5=this.ctx).setTransform.apply(_this$ctx5,_toConsumableArray(this.baseTransform));}if(rect){var width=rect[2]-rect[0];var height=rect[3]-rect[1];if(hasOwnCanvas&&this.annotationCanvasMap){transform=transform.slice();transform[4]-=rect[0];transform[5]-=rect[1];rect=rect.slice();rect[0]=rect[1]=0;rect[2]=width;rect[3]=height;var _Util$singularValueDe3=_Util.singularValueDecompose2dScale(getCurrentTransform(this.ctx)),_Util$singularValueDe4=_slicedToArray(_Util$singularValueDe3,2),scaleX=_Util$singularValueDe4[0],scaleY=_Util$singularValueDe4[1];var viewportScale=this.viewportScale;var canvasWidth=Math.ceil(width*this.outputScaleX*viewportScale);var canvasHeight=Math.ceil(height*this.outputScaleY*viewportScale);this.annotationCanvas=this.canvasFactory.create(canvasWidth,canvasHeight);var _this$annotationCanva=this.annotationCanvas,canvas=_this$annotationCanva.canvas,context=_this$annotationCanva.context;this.annotationCanvasMap.set(id,canvas);this.annotationCanvas.savedCtx=this.ctx;this.ctx=context;this.ctx.save();this.ctx.setTransform(scaleX,0,0,-scaleY,0,height*scaleY);resetCtxToDefault(this.ctx);}else{resetCtxToDefault(this.ctx);this.endPath();this.ctx.rect(rect[0],rect[1],width,height);this.ctx.clip();this.ctx.beginPath();}}this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height);this.transform.apply(this,_toConsumableArray(transform));this.transform.apply(this,_toConsumableArray(matrix));}},{key:"endAnnotation",value:function endAnnotation(){if(this.annotationCanvas){this.ctx.restore();_assertClassBrand(_CanvasGraphics_brand,this,_drawFilter).call(this);this.ctx=this.annotationCanvas.savedCtx;delete this.annotationCanvas.savedCtx;delete this.annotationCanvas;}}},{key:"paintImageMaskXObject",value:function paintImageMaskXObject(img){if(!this.contentVisible){return;}var count=img.count;img=this.getObject(img.data,img);img.count=count;var ctx=this.ctx;var glyph=this.processingType3;if(glyph){if(glyph.compiled===undefined){glyph.compiled=compileType3Glyph(img);}if(glyph.compiled){glyph.compiled(ctx);return;}}var mask=this._createMaskCanvas(img);var maskCanvas=mask.canvas;ctx.save();ctx.setTransform(1,0,0,1,0,0);ctx.drawImage(maskCanvas,mask.offsetX,mask.offsetY);ctx.restore();this.compose();}},{key:"paintImageMaskXObjectRepeat",value:function paintImageMaskXObjectRepeat(img,scaleX){var skewX=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var skewY=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;var scaleY=arguments.length>4?arguments[4]:undefined;var positions=arguments.length>5?arguments[5]:undefined;if(!this.contentVisible){return;}img=this.getObject(img.data,img);var ctx=this.ctx;ctx.save();var currentTransform=getCurrentTransform(ctx);ctx.transform(scaleX,skewX,skewY,scaleY,0,0);var mask=this._createMaskCanvas(img);ctx.setTransform(1,0,0,1,mask.offsetX-currentTransform[4],mask.offsetY-currentTransform[5]);for(var i=0,ii=positions.length;i<ii;i+=2){var trans=_Util.transform(currentTransform,[scaleX,skewX,skewY,scaleY,positions[i],positions[i+1]]);var _Util$applyTransform3=_Util.applyTransform([0,0],trans),_Util$applyTransform4=_slicedToArray(_Util$applyTransform3,2),x=_Util$applyTransform4[0],y=_Util$applyTransform4[1];ctx.drawImage(mask.canvas,x,y);}ctx.restore();this.compose();}},{key:"paintImageMaskXObjectGroup",value:function paintImageMaskXObjectGroup(images){if(!this.contentVisible){return;}var ctx=this.ctx;var fillColor=this.current.fillColor;var isPatternFill=this.current.patternFill;var _iterator64=_createForOfIteratorHelper(images),_step64;try{for(_iterator64.s();!(_step64=_iterator64.n()).done;){var image=_step64.value;var data=image.data,width=image.width,height=image.height,transform=image.transform;var maskCanvas=this.cachedCanvases.getCanvas("maskCanvas",width,height);var maskCtx=maskCanvas.context;maskCtx.save();var img=this.getObject(data,image);putBinaryImageMask(maskCtx,img);maskCtx.globalCompositeOperation="source-in";maskCtx.fillStyle=isPatternFill?fillColor.getPattern(maskCtx,this,getCurrentTransformInverse(ctx),PathType.FILL):fillColor;maskCtx.fillRect(0,0,width,height);maskCtx.restore();ctx.save();ctx.transform.apply(ctx,_toConsumableArray(transform));ctx.scale(1,-1);drawImageAtIntegerCoords(ctx,maskCanvas.canvas,0,0,width,height,0,-1,1,1);ctx.restore();}}catch(err){_iterator64.e(err);}finally{_iterator64.f();}this.compose();}},{key:"paintImageXObject",value:function paintImageXObject(objId){if(!this.contentVisible){return;}var imgData=this.getObject(objId);if(!imgData){warn("Dependent image isn\'t ready yet");return;}this.paintInlineImageXObject(imgData);}},{key:"paintImageXObjectRepeat",value:function paintImageXObjectRepeat(objId,scaleX,scaleY,positions){if(!this.contentVisible){return;}var imgData=this.getObject(objId);if(!imgData){warn("Dependent image isn\'t ready yet");return;}var width=imgData.width;var height=imgData.height;var map=[];for(var i=0,ii=positions.length;i<ii;i+=2){map.push({transform:[scaleX,0,0,scaleY,positions[i],positions[i+1]],x:0,y:0,w:width,h:height});}this.paintInlineImageXObjectGroup(imgData,map);}},{key:"applyTransferMapsToCanvas",value:function applyTransferMapsToCanvas(ctx){if(this.current.transferMaps!=="none"){ctx.filter=this.current.transferMaps;ctx.drawImage(ctx.canvas,0,0);ctx.filter="none";}return ctx.canvas;}},{key:"applyTransferMapsToBitmap",value:function applyTransferMapsToBitmap(imgData){if(this.current.transferMaps==="none"){return imgData.bitmap;}var bitmap=imgData.bitmap,width=imgData.width,height=imgData.height;var tmpCanvas=this.cachedCanvases.getCanvas("inlineImage",width,height);var tmpCtx=tmpCanvas.context;tmpCtx.filter=this.current.transferMaps;tmpCtx.drawImage(bitmap,0,0);tmpCtx.filter="none";return tmpCanvas.canvas;}},{key:"paintInlineImageXObject",value:function paintInlineImageXObject(imgData){if(!this.contentVisible){return;}var width=imgData.width;var height=imgData.height;var ctx=this.ctx;this.save();if(!isNodeJS){var filter=ctx.filter;if(filter!=="none"&&filter!==""){ctx.filter="none";}}ctx.scale(1/width,-1/height);var imgToPaint;if(imgData.bitmap){imgToPaint=this.applyTransferMapsToBitmap(imgData);}else if(typeof HTMLElement==="function"&&imgData instanceof HTMLElement||!imgData.data){imgToPaint=imgData;}else{var tmpCanvas=this.cachedCanvases.getCanvas("inlineImage",width,height);var tmpCtx=tmpCanvas.context;putBinaryImageData(tmpCtx,imgData);imgToPaint=this.applyTransferMapsToCanvas(tmpCtx);}var scaled=this._scaleImage(imgToPaint,getCurrentTransformInverse(ctx));ctx.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(ctx),imgData.interpolate);drawImageAtIntegerCoords(ctx,scaled.img,0,0,scaled.paintWidth,scaled.paintHeight,0,-height,width,height);this.compose();this.restore();}},{key:"paintInlineImageXObjectGroup",value:function paintInlineImageXObjectGroup(imgData,map){if(!this.contentVisible){return;}var ctx=this.ctx;var imgToPaint;if(imgData.bitmap){imgToPaint=imgData.bitmap;}else{var w=imgData.width;var h=imgData.height;var tmpCanvas=this.cachedCanvases.getCanvas("inlineImage",w,h);var tmpCtx=tmpCanvas.context;putBinaryImageData(tmpCtx,imgData);imgToPaint=this.applyTransferMapsToCanvas(tmpCtx);}var _iterator65=_createForOfIteratorHelper(map),_step65;try{for(_iterator65.s();!(_step65=_iterator65.n()).done;){var entry=_step65.value;ctx.save();ctx.transform.apply(ctx,_toConsumableArray(entry.transform));ctx.scale(1,-1);drawImageAtIntegerCoords(ctx,imgToPaint,entry.x,entry.y,entry.w,entry.h,0,-1,1,1);ctx.restore();}}catch(err){_iterator65.e(err);}finally{_iterator65.f();}this.compose();}},{key:"paintSolidColorImageMask",value:function paintSolidColorImageMask(){if(!this.contentVisible){return;}this.ctx.fillRect(0,0,1,1);this.compose();}},{key:"markPoint",value:function markPoint(tag){}},{key:"markPointProps",value:function markPointProps(tag,properties){}},{key:"beginMarkedContent",value:function beginMarkedContent(tag){this.markedContentStack.push({visible:true});}},{key:"beginMarkedContentProps",value:function beginMarkedContentProps(tag,properties){if(tag==="OC"){this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(properties)});}else{this.markedContentStack.push({visible:true});}this.contentVisible=this.isContentVisible();}},{key:"endMarkedContent",value:function endMarkedContent(){this.markedContentStack.pop();this.contentVisible=this.isContentVisible();}},{key:"beginCompat",value:function beginCompat(){}},{key:"endCompat",value:function endCompat(){}},{key:"consumePath",value:function consumePath(clipBox){var isEmpty=this.current.isEmptyClip();if(this.pendingClip){this.current.updateClipFromPath();}if(!this.pendingClip){this.compose(clipBox);}var ctx=this.ctx;if(this.pendingClip){if(!isEmpty){if(this.pendingClip===EO_CLIP){ctx.clip("evenodd");}else{ctx.clip();}}this.pendingClip=null;}this.current.startNewPathAndClipBox(this.current.clipBox);ctx.beginPath();}},{key:"getSinglePixelWidth",value:function getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){var m=getCurrentTransform(this.ctx);if(m[1]===0&&m[2]===0){this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(m[0]),Math.abs(m[3]));}else{var absDet=Math.abs(m[0]*m[3]-m[2]*m[1]);var normX=Math.hypot(m[0],m[2]);var normY=Math.hypot(m[1],m[3]);this._cachedGetSinglePixelWidth=Math.max(normX,normY)/absDet;}}return this._cachedGetSinglePixelWidth;}},{key:"getScaleForStroking",value:function getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){var lineWidth=this.current.lineWidth;var _this$ctx$getTransfor=this.ctx.getTransform(),a=_this$ctx$getTransfor.a,b=_this$ctx$getTransfor.b,c=_this$ctx$getTransfor.c,d=_this$ctx$getTransfor.d;var scaleX,scaleY;if(b===0&&c===0){var normX=Math.abs(a);var normY=Math.abs(d);if(normX===normY){if(lineWidth===0){scaleX=scaleY=1/normX;}else{var scaledLineWidth=normX*lineWidth;scaleX=scaleY=scaledLineWidth<1?1/scaledLineWidth:1;}}else if(lineWidth===0){scaleX=1/normX;scaleY=1/normY;}else{var scaledXLineWidth=normX*lineWidth;var scaledYLineWidth=normY*lineWidth;scaleX=scaledXLineWidth<1?1/scaledXLineWidth:1;scaleY=scaledYLineWidth<1?1/scaledYLineWidth:1;}}else{var absDet=Math.abs(a*d-b*c);var _normX=Math.hypot(a,b);var _normY=Math.hypot(c,d);if(lineWidth===0){scaleX=_normY/absDet;scaleY=_normX/absDet;}else{var baseArea=lineWidth*absDet;scaleX=_normY>baseArea?_normY/baseArea:1;scaleY=_normX>baseArea?_normX/baseArea:1;}}this._cachedScaleForStroking[0]=scaleX;this._cachedScaleForStroking[1]=scaleY;}return this._cachedScaleForStroking;}},{key:"rescaleAndStroke",value:function rescaleAndStroke(saveRestore){var ctx=this.ctx;var lineWidth=this.current.lineWidth;var _this$getScaleForStro=this.getScaleForStroking(),_this$getScaleForStro2=_slicedToArray(_this$getScaleForStro,2),scaleX=_this$getScaleForStro2[0],scaleY=_this$getScaleForStro2[1];ctx.lineWidth=lineWidth||1;if(scaleX===1&&scaleY===1){ctx.stroke();return;}var dashes=ctx.getLineDash();if(saveRestore){ctx.save();}ctx.scale(scaleX,scaleY);if(dashes.length>0){var scale=Math.max(scaleX,scaleY);ctx.setLineDash(dashes.map(function(x){return x/scale;}));ctx.lineDashOffset/=scale;}ctx.stroke();if(saveRestore){ctx.restore();}}},{key:"isContentVisible",value:function isContentVisible(){for(var i=this.markedContentStack.length-1;i>=0;i--){if(!this.markedContentStack[i].visible){return false;}}return true;}}]);}();function _restoreInitialState(){while(this.stateStack.length||this.inSMaskMode){this.restore();}this.current.activeSMask=null;this.ctx.restore();if(this.transparentCanvas){this.ctx=this.compositeCtx;this.ctx.save();this.ctx.setTransform(1,0,0,1,0,0);this.ctx.drawImage(this.transparentCanvas,0,0);this.ctx.restore();this.transparentCanvas=null;}}function _drawFilter(){if(this.pageColors){var hcmFilterId=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(hcmFilterId!=="none"){var savedFilter=this.ctx.filter;this.ctx.filter=hcmFilterId;this.ctx.drawImage(this.ctx.canvas,0,0);this.ctx.filter=savedFilter;}}}function _getScaledPath(path,currentTransform,transform){var newPath=new Path2D();newPath.addPath(path,new DOMMatrix(transform).invertSelf().multiplySelf(currentTransform));return newPath;}for(var op in _OPS){if(CanvasGraphics.prototype[op]!==undefined){CanvasGraphics.prototype[_OPS[op]]=CanvasGraphics.prototype[op];}};// ./src/display/worker_options.js\nvar _GlobalWorkerOptions=/*#__PURE__*/function(){function _GlobalWorkerOptions(){_classCallCheck(this,_GlobalWorkerOptions);}return _createClass(_GlobalWorkerOptions,null,[{key:"workerPort",get:function get(){return _assertClassBrand(_GlobalWorkerOptions,this,_port)._;},set:function set(val){if(!(typeof Worker!=="undefined"&&val instanceof Worker)&&val!==null){throw new Error("Invalid `workerPort` type.");}_port._=_assertClassBrand(_GlobalWorkerOptions,this,val);}},{key:"workerSrc",get:function get(){return _assertClassBrand(_GlobalWorkerOptions,this,_src)._;},set:function set(val){if(typeof val!=="string"){throw new Error("Invalid `workerSrc` type.");}_src._=_assertClassBrand(_GlobalWorkerOptions,this,val);}}]);}();var _port={_:null};var _src={_:""};;// ./src/display/metadata.js\nvar _metadataMap=/*#__PURE__*/new WeakMap();var _data3=/*#__PURE__*/new WeakMap();var Metadata=/*#__PURE__*/function(){function Metadata(_ref36){var parsedData=_ref36.parsedData,rawData=_ref36.rawData;_classCallCheck(this,Metadata);_classPrivateFieldInitSpec(this,_metadataMap,void 0);_classPrivateFieldInitSpec(this,_data3,void 0);_classPrivateFieldSet(_metadataMap,this,parsedData);_classPrivateFieldSet(_data3,this,rawData);}return _createClass(Metadata,[{key:"getRaw",value:function getRaw(){return _classPrivateFieldGet(_data3,this);}},{key:"get",value:function get(name){var _classPrivateFieldGet57;return(_classPrivateFieldGet57=_classPrivateFieldGet(_metadataMap,this).get(name))!==null&&_classPrivateFieldGet57!==void 0?_classPrivateFieldGet57:null;}},{key:"getAll",value:function getAll(){return objectFromMap(_classPrivateFieldGet(_metadataMap,this));}},{key:"has",value:function has(name){return _classPrivateFieldGet(_metadataMap,this).has(name);}}]);}();;// ./src/display/optional_content_config.js\nvar INTERNAL=Symbol("INTERNAL");var _isDisplay=/*#__PURE__*/new WeakMap();var _isPrint=/*#__PURE__*/new WeakMap();var _userSet=/*#__PURE__*/new WeakMap();var _visible=/*#__PURE__*/new WeakMap();var OptionalContentGroup=/*#__PURE__*/function(){function OptionalContentGroup(renderingIntent,_ref37){var name=_ref37.name,intent=_ref37.intent,usage=_ref37.usage,rbGroups=_ref37.rbGroups;_classCallCheck(this,OptionalContentGroup);_classPrivateFieldInitSpec(this,_isDisplay,false);_classPrivateFieldInitSpec(this,_isPrint,false);_classPrivateFieldInitSpec(this,_userSet,false);_classPrivateFieldInitSpec(this,_visible,true);_classPrivateFieldSet(_isDisplay,this,!!(renderingIntent&RenderingIntentFlag.DISPLAY));_classPrivateFieldSet(_isPrint,this,!!(renderingIntent&RenderingIntentFlag.PRINT));this.name=name;this.intent=intent;this.usage=usage;this.rbGroups=rbGroups;}return _createClass(OptionalContentGroup,[{key:"visible",get:function get(){if(_classPrivateFieldGet(_userSet,this)){return _classPrivateFieldGet(_visible,this);}if(!_classPrivateFieldGet(_visible,this)){return false;}var _this$usage=this.usage,print=_this$usage.print,view=_this$usage.view;if(_classPrivateFieldGet(_isDisplay,this)){return(view===null||view===void 0?void 0:view.viewState)!=="OFF";}else if(_classPrivateFieldGet(_isPrint,this)){return(print===null||print===void 0?void 0:print.printState)!=="OFF";}return true;}},{key:"_setVisible",value:function _setVisible(internal,visible){var userSet=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(internal!==INTERNAL){unreachable("Internal method `_setVisible` called.");}_classPrivateFieldSet(_userSet,this,userSet);_classPrivateFieldSet(_visible,this,visible);}}]);}();var _cachedGetHash=/*#__PURE__*/new WeakMap();var _groups=/*#__PURE__*/new WeakMap();var _initialHash=/*#__PURE__*/new WeakMap();var _order=/*#__PURE__*/new WeakMap();var _OptionalContentConfig_brand=/*#__PURE__*/new WeakSet();var OptionalContentConfig=/*#__PURE__*/function(){function OptionalContentConfig(data){var renderingIntent=arguments.length>1&&arguments[1]!==undefined?arguments[1]:RenderingIntentFlag.DISPLAY;_classCallCheck(this,OptionalContentConfig);_classPrivateMethodInitSpec(this,_OptionalContentConfig_brand);_classPrivateFieldInitSpec(this,_cachedGetHash,null);_classPrivateFieldInitSpec(this,_groups,new Map());_classPrivateFieldInitSpec(this,_initialHash,null);_classPrivateFieldInitSpec(this,_order,null);this.renderingIntent=renderingIntent;this.name=null;this.creator=null;if(data===null){return;}this.name=data.name;this.creator=data.creator;_classPrivateFieldSet(_order,this,data.order);var _iterator66=_createForOfIteratorHelper(data.groups),_step66;try{for(_iterator66.s();!(_step66=_iterator66.n()).done;){var _group=_step66.value;_classPrivateFieldGet(_groups,this).set(_group.id,new OptionalContentGroup(renderingIntent,_group));}}catch(err){_iterator66.e(err);}finally{_iterator66.f();}if(data.baseState==="OFF"){var _iterator67=_createForOfIteratorHelper(_classPrivateFieldGet(_groups,this).values()),_step67;try{for(_iterator67.s();!(_step67=_iterator67.n()).done;){var group=_step67.value;group._setVisible(INTERNAL,false);}}catch(err){_iterator67.e(err);}finally{_iterator67.f();}}var _iterator68=_createForOfIteratorHelper(data.on),_step68;try{for(_iterator68.s();!(_step68=_iterator68.n()).done;){var on=_step68.value;_classPrivateFieldGet(_groups,this).get(on)._setVisible(INTERNAL,true);}}catch(err){_iterator68.e(err);}finally{_iterator68.f();}var _iterator69=_createForOfIteratorHelper(data.off),_step69;try{for(_iterator69.s();!(_step69=_iterator69.n()).done;){var off=_step69.value;_classPrivateFieldGet(_groups,this).get(off)._setVisible(INTERNAL,false);}}catch(err){_iterator69.e(err);}finally{_iterator69.f();}_classPrivateFieldSet(_initialHash,this,this.getHash());}return _createClass(OptionalContentConfig,[{key:"isVisible",value:function isVisible(group){if(_classPrivateFieldGet(_groups,this).size===0){return true;}if(!group){info("Optional content group not defined.");return true;}if(group.type==="OCG"){if(!_classPrivateFieldGet(_groups,this).has(group.id)){warn("Optional content group not found: ".concat(group.id));return true;}return _classPrivateFieldGet(_groups,this).get(group.id).visible;}else if(group.type==="OCMD"){if(group.expression){return _assertClassBrand(_OptionalContentConfig_brand,this,_evaluateVisibilityExpression).call(this,group.expression);}if(!group.policy||group.policy==="AnyOn"){var _iterator70=_createForOfIteratorHelper(group.ids),_step70;try{for(_iterator70.s();!(_step70=_iterator70.n()).done;){var id=_step70.value;if(!_classPrivateFieldGet(_groups,this).has(id)){warn("Optional content group not found: ".concat(id));return true;}if(_classPrivateFieldGet(_groups,this).get(id).visible){return true;}}}catch(err){_iterator70.e(err);}finally{_iterator70.f();}return false;}else if(group.policy==="AllOn"){var _iterator71=_createForOfIteratorHelper(group.ids),_step71;try{for(_iterator71.s();!(_step71=_iterator71.n()).done;){var _id4=_step71.value;if(!_classPrivateFieldGet(_groups,this).has(_id4)){warn("Optional content group not found: ".concat(_id4));return true;}if(!_classPrivateFieldGet(_groups,this).get(_id4).visible){return false;}}}catch(err){_iterator71.e(err);}finally{_iterator71.f();}return true;}else if(group.policy==="AnyOff"){var _iterator72=_createForOfIteratorHelper(group.ids),_step72;try{for(_iterator72.s();!(_step72=_iterator72.n()).done;){var _id5=_step72.value;if(!_classPrivateFieldGet(_groups,this).has(_id5)){warn("Optional content group not found: ".concat(_id5));return true;}if(!_classPrivateFieldGet(_groups,this).get(_id5).visible){return true;}}}catch(err){_iterator72.e(err);}finally{_iterator72.f();}return false;}else if(group.policy==="AllOff"){var _iterator73=_createForOfIteratorHelper(group.ids),_step73;try{for(_iterator73.s();!(_step73=_iterator73.n()).done;){var _id6=_step73.value;if(!_classPrivateFieldGet(_groups,this).has(_id6)){warn("Optional content group not found: ".concat(_id6));return true;}if(_classPrivateFieldGet(_groups,this).get(_id6).visible){return false;}}}catch(err){_iterator73.e(err);}finally{_iterator73.f();}return true;}warn("Unknown optional content policy ".concat(group.policy,"."));return true;}warn("Unknown group type ".concat(group.type,"."));return true;}},{key:"setVisibility",value:function setVisibility(id){var visible=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var preserveRB=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var group=_classPrivateFieldGet(_groups,this).get(id);if(!group){warn("Optional content group not found: ".concat(id));return;}if(preserveRB&&visible&&group.rbGroups.length){var _iterator74=_createForOfIteratorHelper(group.rbGroups),_step74;try{for(_iterator74.s();!(_step74=_iterator74.n()).done;){var rbGroup=_step74.value;var _iterator75=_createForOfIteratorHelper(rbGroup),_step75;try{for(_iterator75.s();!(_step75=_iterator75.n()).done;){var otherId=_step75.value;if(otherId!==id){var _classPrivateFieldGet58;(_classPrivateFieldGet58=_classPrivateFieldGet(_groups,this).get(otherId))===null||_classPrivateFieldGet58===void 0||_classPrivateFieldGet58._setVisible(INTERNAL,false,true);}}}catch(err){_iterator75.e(err);}finally{_iterator75.f();}}}catch(err){_iterator74.e(err);}finally{_iterator74.f();}}group._setVisible(INTERNAL,!!visible,true);_classPrivateFieldSet(_cachedGetHash,this,null);}},{key:"setOCGState",value:function setOCGState(_ref38){var state=_ref38.state,preserveRB=_ref38.preserveRB;var operator;var _iterator76=_createForOfIteratorHelper(state),_step76;try{for(_iterator76.s();!(_step76=_iterator76.n()).done;){var elem=_step76.value;switch(elem){case"ON":case"OFF":case"Toggle":operator=elem;continue;}var group=_classPrivateFieldGet(_groups,this).get(elem);if(!group){continue;}switch(operator){case"ON":this.setVisibility(elem,true,preserveRB);break;case"OFF":this.setVisibility(elem,false,preserveRB);break;case"Toggle":this.setVisibility(elem,!group.visible,preserveRB);break;}}}catch(err){_iterator76.e(err);}finally{_iterator76.f();}_classPrivateFieldSet(_cachedGetHash,this,null);}},{key:"hasInitialVisibility",get:function get(){return _classPrivateFieldGet(_initialHash,this)===null||this.getHash()===_classPrivateFieldGet(_initialHash,this);}},{key:"getOrder",value:function getOrder(){if(!_classPrivateFieldGet(_groups,this).size){return null;}if(_classPrivateFieldGet(_order,this)){return _classPrivateFieldGet(_order,this).slice();}return _toConsumableArray(_classPrivateFieldGet(_groups,this).keys());}},{key:"getGroups",value:function getGroups(){return _classPrivateFieldGet(_groups,this).size>0?objectFromMap(_classPrivateFieldGet(_groups,this)):null;}},{key:"getGroup",value:function getGroup(id){return _classPrivateFieldGet(_groups,this).get(id)||null;}},{key:"getHash",value:function getHash(){if(_classPrivateFieldGet(_cachedGetHash,this)!==null){return _classPrivateFieldGet(_cachedGetHash,this);}var hash=new MurmurHash3_64();var _iterator77=_createForOfIteratorHelper(_classPrivateFieldGet(_groups,this)),_step77;try{for(_iterator77.s();!(_step77=_iterator77.n()).done;){var _step77$value=_slicedToArray(_step77.value,2),id=_step77$value[0],group=_step77$value[1];hash.update("".concat(id,":").concat(group.visible));}}catch(err){_iterator77.e(err);}finally{_iterator77.f();}return _classPrivateFieldSet(_cachedGetHash,this,hash.hexdigest());}}]);}();function _evaluateVisibilityExpression(array){var length=array.length;if(length<2){return true;}var operator=array[0];for(var i=1;i<length;i++){var element=array[i];var state=void 0;if(Array.isArray(element)){state=_assertClassBrand(_OptionalContentConfig_brand,this,_evaluateVisibilityExpression).call(this,element);}else if(_classPrivateFieldGet(_groups,this).has(element)){state=_classPrivateFieldGet(_groups,this).get(element).visible;}else{warn("Optional content group not found: ".concat(element));return true;}switch(operator){case"And":if(!state){return false;}break;case"Or":if(state){return true;}break;case"Not":return!state;default:return true;}}return operator==="And";};// ./src/display/transport_stream.js\nvar PDFDataTransportStream=/*#__PURE__*/function(){function PDFDataTransportStream(pdfDataRangeTransport,_ref39){var _this33=this;var _ref39$disableRange=_ref39.disableRange,disableRange=_ref39$disableRange===void 0?false:_ref39$disableRange,_ref39$disableStream=_ref39.disableStream,disableStream=_ref39$disableStream===void 0?false:_ref39$disableStream;_classCallCheck(this,PDFDataTransportStream);assert(pdfDataRangeTransport,\'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.\');var length=pdfDataRangeTransport.length,initialData=pdfDataRangeTransport.initialData,progressiveDone=pdfDataRangeTransport.progressiveDone,contentDispositionFilename=pdfDataRangeTransport.contentDispositionFilename;this._queuedChunks=[];this._progressiveDone=progressiveDone;this._contentDispositionFilename=contentDispositionFilename;if((initialData===null||initialData===void 0?void 0:initialData.length)>0){var buffer=initialData instanceof Uint8Array&&initialData.byteLength===initialData.buffer.byteLength?initialData.buffer:new Uint8Array(initialData).buffer;this._queuedChunks.push(buffer);}this._pdfDataRangeTransport=pdfDataRangeTransport;this._isStreamingSupported=!disableStream;this._isRangeSupported=!disableRange;this._contentLength=length;this._fullRequestReader=null;this._rangeReaders=[];pdfDataRangeTransport.addRangeListener(function(begin,chunk){_this33._onReceiveData({begin:begin,chunk:chunk});});pdfDataRangeTransport.addProgressListener(function(loaded,total){_this33._onProgress({loaded:loaded,total:total});});pdfDataRangeTransport.addProgressiveReadListener(function(chunk){_this33._onReceiveData({chunk:chunk});});pdfDataRangeTransport.addProgressiveDoneListener(function(){_this33._onProgressiveDone();});pdfDataRangeTransport.transportReady();console.log(\'##PDFDataTransportStream\',pdfDataRangeTransport);}return _createClass(PDFDataTransportStream,[{key:"_onReceiveData",value:function _onReceiveData(_ref40){var begin=_ref40.begin,chunk=_ref40.chunk;var buffer=chunk instanceof Uint8Array&&chunk.byteLength===chunk.buffer.byteLength?chunk.buffer:new Uint8Array(chunk).buffer;if(begin===undefined){if(this._fullRequestReader){this._fullRequestReader._enqueue(buffer);}else{this._queuedChunks.push(buffer);}}else{var found=this._rangeReaders.some(function(rangeReader){if(rangeReader._begin!==begin){return false;}rangeReader._enqueue(buffer);return true;});assert(found,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.");}}},{key:"_progressiveDataLength",get:function get(){var _this$_fullRequestRea,_this$_fullRequestRea2;return(_this$_fullRequestRea=(_this$_fullRequestRea2=this._fullRequestReader)===null||_this$_fullRequestRea2===void 0?void 0:_this$_fullRequestRea2._loaded)!==null&&_this$_fullRequestRea!==void 0?_this$_fullRequestRea:0;}},{key:"_onProgress",value:function _onProgress(evt){if(evt.total===undefined){var _this$_rangeReaders$,_this$_rangeReaders$$;(_this$_rangeReaders$=this._rangeReaders[0])===null||_this$_rangeReaders$===void 0||(_this$_rangeReaders$$=_this$_rangeReaders$.onProgress)===null||_this$_rangeReaders$$===void 0||_this$_rangeReaders$$.call(_this$_rangeReaders$,{loaded:evt.loaded});}else{var _this$_fullRequestRea3,_this$_fullRequestRea4;(_this$_fullRequestRea3=this._fullRequestReader)===null||_this$_fullRequestRea3===void 0||(_this$_fullRequestRea4=_this$_fullRequestRea3.onProgress)===null||_this$_fullRequestRea4===void 0||_this$_fullRequestRea4.call(_this$_fullRequestRea3,{loaded:evt.loaded,total:evt.total});}}},{key:"_onProgressiveDone",value:function _onProgressiveDone(){var _this$_fullRequestRea5;(_this$_fullRequestRea5=this._fullRequestReader)===null||_this$_fullRequestRea5===void 0||_this$_fullRequestRea5.progressiveDone();this._progressiveDone=true;}},{key:"_removeRangeReader",value:function _removeRangeReader(reader){var i=this._rangeReaders.indexOf(reader);if(i>=0){this._rangeReaders.splice(i,1);}}},{key:"getFullReader",value:function getFullReader(){assert(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");var queuedChunks=this._queuedChunks;this._queuedChunks=null;return new PDFDataTransportStreamReader(this,queuedChunks,this._progressiveDone,this._contentDispositionFilename);}},{key:"getRangeReader",value:function getRangeReader(begin,end){if(end<=this._progressiveDataLength){return null;}var reader=new PDFDataTransportStreamRangeReader(this,begin,end);this._pdfDataRangeTransport.requestDataRange(begin,end);this._rangeReaders.push(reader);return reader;}},{key:"cancelAllRequests",value:function cancelAllRequests(reason){var _this$_fullRequestRea6;(_this$_fullRequestRea6=this._fullRequestReader)===null||_this$_fullRequestRea6===void 0||_this$_fullRequestRea6.cancel(reason);var _iterator78=_createForOfIteratorHelper(this._rangeReaders.slice(0)),_step78;try{for(_iterator78.s();!(_step78=_iterator78.n()).done;){var reader=_step78.value;reader.cancel(reason);}}catch(err){_iterator78.e(err);}finally{_iterator78.f();}this._pdfDataRangeTransport.abort();}}]);}();var PDFDataTransportStreamReader=/*#__PURE__*/function(){function PDFDataTransportStreamReader(stream,queuedChunks){var progressiveDone=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var contentDispositionFilename=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;_classCallCheck(this,PDFDataTransportStreamReader);this._stream=stream;this._done=progressiveDone||false;this._filename=_isPdfFile(contentDispositionFilename)?contentDispositionFilename:null;this._queuedChunks=queuedChunks||[];this._loaded=0;var _iterator79=_createForOfIteratorHelper(this._queuedChunks),_step79;try{for(_iterator79.s();!(_step79=_iterator79.n()).done;){var chunk=_step79.value;this._loaded+=chunk.byteLength;}}catch(err){_iterator79.e(err);}finally{_iterator79.f();}this._requests=[];this._headersReady=Promise.resolve();stream._fullRequestReader=this;this.onProgress=null;this.options=stream.options;console.log(\'##PDFDataTransportStreamReader\',this.options);}return _createClass(PDFDataTransportStreamReader,[{key:"_enqueue",value:function _enqueue(chunk){if(this._done){return;}if(this._requests.length>0){var requestCapability=this._requests.shift();requestCapability.resolve({value:chunk,done:false});}else{this._queuedChunks.push(chunk);}this._loaded+=chunk.byteLength;}},{key:"headersReady",get:function get(){return this._headersReady;}},{key:"filename",get:function get(){return this._filename;}},{key:"isRangeSupported",get:function get(){return this._stream._isRangeSupported;}},{key:"isStreamingSupported",get:function get(){return this._stream._isStreamingSupported;}},{key:"contentLength",get:function get(){return this._stream._contentLength;}},{key:"read",value:function(){var _read=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee29(){var chunk,requestCapability;return _regeneratorRuntime().wrap(function _callee29$(_context29){while(1)switch(_context29.prev=_context29.next){case 0:if(!(this._queuedChunks.length>0)){_context29.next=3;break;}chunk=this._queuedChunks.shift();return _context29.abrupt("return",{value:chunk,done:false});case 3:if(!this._done){_context29.next=5;break;}return _context29.abrupt("return",{value:undefined,done:true});case 5:requestCapability=Promise.withResolvers();this._requests.push(requestCapability);return _context29.abrupt("return",requestCapability.promise);case 8:case"end":return _context29.stop();}},_callee29,this);}));function read(){return _read.apply(this,arguments);}return read;}()},{key:"cancel",value:function cancel(reason){this._done=true;var _iterator80=_createForOfIteratorHelper(this._requests),_step80;try{for(_iterator80.s();!(_step80=_iterator80.n()).done;){var requestCapability=_step80.value;requestCapability.resolve({value:undefined,done:true});}}catch(err){_iterator80.e(err);}finally{_iterator80.f();}this._requests.length=0;}},{key:"progressiveDone",value:function progressiveDone(){if(this._done){return;}this._done=true;}}]);}();var PDFDataTransportStreamRangeReader=/*#__PURE__*/function(){function PDFDataTransportStreamRangeReader(stream,begin,end){_classCallCheck(this,PDFDataTransportStreamRangeReader);this._stream=stream;this._begin=begin;this._end=end;this._queuedChunk=null;this._requests=[];this._done=false;this.onProgress=null;this.options=stream.options;console.log(\'##PDFDataTransportStreamRangeReader\',this.options);}return _createClass(PDFDataTransportStreamRangeReader,[{key:"_enqueue",value:function _enqueue(chunk){if(this._done){return;}if(this._requests.length===0){this._queuedChunk=chunk;}else{var requestsCapability=this._requests.shift();requestsCapability.resolve({value:chunk,done:false});var _iterator81=_createForOfIteratorHelper(this._requests),_step81;try{for(_iterator81.s();!(_step81=_iterator81.n()).done;){var requestCapability=_step81.value;requestCapability.resolve({value:undefined,done:true});}}catch(err){_iterator81.e(err);}finally{_iterator81.f();}this._requests.length=0;}this._done=true;this._stream._removeRangeReader(this);}},{key:"isStreamingSupported",get:function get(){return false;}},{key:"read",value:function(){var _read2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee30(){var chunk,requestCapability;return _regeneratorRuntime().wrap(function _callee30$(_context30){while(1)switch(_context30.prev=_context30.next){case 0:if(!this._queuedChunk){_context30.next=4;break;}chunk=this._queuedChunk;this._queuedChunk=null;return _context30.abrupt("return",{value:chunk,done:false});case 4:if(!this._done){_context30.next=6;break;}return _context30.abrupt("return",{value:undefined,done:true});case 6:requestCapability=Promise.withResolvers();this._requests.push(requestCapability);return _context30.abrupt("return",requestCapability.promise);case 9:case"end":return _context30.stop();}},_callee30,this);}));function read(){return _read2.apply(this,arguments);}return read;}()},{key:"cancel",value:function cancel(reason){this._done=true;var _iterator82=_createForOfIteratorHelper(this._requests),_step82;try{for(_iterator82.s();!(_step82=_iterator82.n()).done;){var requestCapability=_step82.value;requestCapability.resolve({value:undefined,done:true});}}catch(err){_iterator82.e(err);}finally{_iterator82.f();}this._requests.length=0;this._stream._removeRangeReader(this);}}]);}();;// ./src/display/content_disposition.js\nfunction getFilenameFromContentDispositionHeader(contentDisposition){var needsEncodingFixup=true;var tmp=toParamRegExp("filename\\\\*","i").exec(contentDisposition);if(tmp){tmp=tmp[1];var filename=rfc2616unquote(tmp);filename=unescape(filename);filename=rfc5987decode(filename);filename=rfc2047decode(filename);return fixupEncoding(filename);}tmp=rfc2231getparam(contentDisposition);if(tmp){var _filename=rfc2047decode(tmp);return fixupEncoding(_filename);}tmp=toParamRegExp("filename","i").exec(contentDisposition);if(tmp){tmp=tmp[1];var _filename2=rfc2616unquote(tmp);_filename2=rfc2047decode(_filename2);return fixupEncoding(_filename2);}function toParamRegExp(attributePattern,flags){return new RegExp("(?:^|;)\\\\s*"+attributePattern+"\\\\s*=\\\\s*"+"("+\'[^";\\\\s][^;\\\\s]*\'+"|"+\'"(?:[^"\\\\\\\\]|\\\\\\\\"?)+"?\'+")",flags);}function textdecode(encoding,value){if(encoding){if(!/^[\\x00-\\xFF]+$/.test(value)){return value;}try{var decoder=new TextDecoder(encoding,{fatal:true});var buffer=stringToBytes(value);value=decoder.decode(buffer);needsEncodingFixup=false;}catch(_unused5){}}return value;}function fixupEncoding(value){if(needsEncodingFixup&&/[\\x80-\\xff]/.test(value)){value=textdecode("utf-8",value);if(needsEncodingFixup){value=textdecode("iso-8859-1",value);}}return value;}function rfc2231getparam(contentDispositionStr){var matches=[];var match;var iter=toParamRegExp("filename\\\\*((?!0\\\\d)\\\\d+)(\\\\*?)","ig");while((match=iter.exec(contentDispositionStr))!==null){var _match=match,_match2=_slicedToArray(_match,4),n=_match2[1],quot=_match2[2],part=_match2[3];n=parseInt(n,10);if(n in matches){if(n===0){break;}continue;}matches[n]=[quot,part];}var parts=[];for(var _n=0;_n<matches.length;++_n){if(!(_n in matches)){break;}var _matches$_n=_slicedToArray(matches[_n],2),_quot=_matches$_n[0],_part=_matches$_n[1];_part=rfc2616unquote(_part);if(_quot){_part=unescape(_part);if(_n===0){_part=rfc5987decode(_part);}}parts.push(_part);}return parts.join("");}function rfc2616unquote(value){if(value.startsWith(\'"\')){var parts=value.slice(1).split(\'\\\\"\');for(var i=0;i<parts.length;++i){var quotindex=parts[i].indexOf(\'"\');if(quotindex!==-1){parts[i]=parts[i].slice(0,quotindex);parts.length=i+1;}parts[i]=parts[i].replaceAll(/\\\\(.)/g,"$1");}value=parts.join(\'"\');}return value;}function rfc5987decode(extvalue){var encodingend=extvalue.indexOf("\'");if(encodingend===-1){return extvalue;}var encoding=extvalue.slice(0,encodingend);var langvalue=extvalue.slice(encodingend+1);var value=langvalue.replace(/^[^\']*\'/,"");return textdecode(encoding,value);}function rfc2047decode(value){if(!value.startsWith("=?")||/[\\x00-\\x19\\x80-\\xff]/.test(value)){return value;}return value.replaceAll(/=\\?([\\w-]*)\\?([QqBb])\\?((?:[^?]|\\?(?!=))*)\\?=/g,function(matches,charset,encoding,text){if(encoding==="q"||encoding==="Q"){text=text.replaceAll("_"," ");text=text.replaceAll(/=([0-9a-fA-F]{2})/g,function(match,hex){return String.fromCharCode(parseInt(hex,16));});return textdecode(charset,text);}try{text=atob(text);}catch(_unused6){}return textdecode(charset,text);});}return"";};// ./src/display/network_utils.js\nfunction createHeaders(isHttp,httpHeaders){var headers=new Headers();if(!isHttp||!httpHeaders||_typeof(httpHeaders)!=="object"){return headers;}for(var key in httpHeaders){var val=httpHeaders[key];if(val!==undefined){headers.append(key,val);}}return headers;}function getResponseOrigin(url){var _URL$parse$origin,_URL$parse;return(_URL$parse$origin=(_URL$parse=URL.parse(url))===null||_URL$parse===void 0?void 0:_URL$parse.origin)!==null&&_URL$parse$origin!==void 0?_URL$parse$origin:null;}function validateRangeRequestCapabilities(_ref41){var responseHeaders=_ref41.responseHeaders,isHttp=_ref41.isHttp,rangeChunkSize=_ref41.rangeChunkSize,disableRange=_ref41.disableRange,options=_ref41.options;var returnValues={allowRangeRequests:false,suggestedLength:undefined};var optionLen=parseInt(options.contentLength,10);if(Number.isInteger(optionLen)){returnValues.suggestedLength=optionLen;returnValues.allowRangeRequests=true;return returnValues;}var length=parseInt(responseHeaders.get("Content-Length"),10);if(!Number.isInteger(length)){return returnValues;}returnValues.suggestedLength=length;if(length<=2*rangeChunkSize){return returnValues;}if(disableRange||!isHttp){return returnValues;}if(responseHeaders.get("Accept-Ranges")!=="bytes"){return returnValues;}var contentEncoding=responseHeaders.get("Content-Encoding")||"identity";if(contentEncoding!=="identity"){return returnValues;}returnValues.allowRangeRequests=true;return returnValues;}function extractFilenameFromHeader(responseHeaders){var contentDisposition=responseHeaders.get("Content-Disposition");if(contentDisposition){var filename=getFilenameFromContentDispositionHeader(contentDisposition);if(filename.includes("%")){try{filename=decodeURIComponent(filename);}catch(_unused7){}}if(_isPdfFile(filename)){return filename;}}return null;}function createResponseError(status,url){return new _ResponseException("Unexpected server response (".concat(status,") while retrieving PDF \\"").concat(url,"\\"."),status,status===404||status===0&&url.startsWith("file:"));}function validateResponseStatus(status){return status===200||status===206;}// EXTERNAL MODULE: ./node_modules/crypto-js/index.js\nvar crypto_js=__nested_webpack_require_124123__(721);;// ./src/display/fetch_stream.js\nfunction createFetchOptions(headers,withCredentials,abortController){if(!abortController){return{method:"GET",headers:headers,mode:"cors",credentials:withCredentials?"include":"same-origin",redirect:"follow"};}return{method:"GET",headers:headers,signal:abortController.signal,mode:"cors",credentials:withCredentials?"include":"same-origin",redirect:"follow"};}function getArrayBuffer(val){if(val instanceof Uint8Array){return val.buffer;}if(val instanceof ArrayBuffer){return val;}warn("getArrayBuffer - unexpected data format: ".concat(val));return new Uint8Array(val).buffer;}function makeKey(finger){var newFinger=_toConsumableArray(finger);for(var i=0;i<newFinger.length;i++){newFinger[i]=newFinger[i]>>2;}return Uint8Array.from(newFinger);}function makeIV(bcd,sbcd){if(typeof bcd!="string"){throw new Error("unknown Error(c1)");}if(typeof sbcd!="string"){throw new Error("unknown Error(c2)");}if(!bcd){throw new Error("unknown Error(c1)");}if(!sbcd){throw new Error("unknown Error(c2)");}var ei=bcd.substring(bcd.length-8)+sbcd.substring(sbcd.length-8);var iv=Uint8Array.from(Array.from(ei).map(function(letter){return letter.charCodeAt(0);}));return iv;}function decrypt(arrayBufferValue,key,iv,nopadding){var encryptedData=crypto_js.lib.WordArray.create(arrayBufferValue);var decryptedWordArray=crypto_js.AES.decrypt({ciphertext:encryptedData},crypto_js.lib.WordArray.create(key),{iv:crypto_js.lib.WordArray.create(iv),mode:crypto_js.mode.CBC,padding:crypto_js.pad.Pkcs7});var decrypted=w2u(decryptedWordArray);return decrypted;}function w2u(w){var len=w.words.length,u8_array=new Uint8Array(len<<2),offset=0,word,i;for(i=0;i<len;i++){word=w.words[i];u8_array[offset++]=word>>24;u8_array[offset++]=word>>16&0xff;u8_array[offset++]=word>>8&0xff;u8_array[offset++]=word&0xff;}return u8_array;}var CreateReadableStreamWithOffset=function CreateReadableStreamWithOffset(arrayBuffer,begin,end,offset,key){var remain=begin%offset==0?offset:offset+(offset-begin%offset);var isValidateArrayBuffer=false;var iv=null;var de=null;try{if(arrayBuffer instanceof ArrayBuffer){if(arrayBuffer.byteLength>end-begin){isValidateArrayBuffer=true;}}if(!isValidateArrayBuffer){console.warn("[PDFJS]Not Validate ArrayBuffer Size");}iv=new Uint8Array(arrayBuffer.slice(0,offset));de=arrayBuffer.slice(remain,arrayBuffer.byteLength);return CreateReadable(de,key,iv);}catch(err){console.error(err);}finally{remain=null;isValidateArrayBuffer=null;iv=null;de=null;}};var CreateReadable=function CreateReadable(arrayBuffer,key,iv){if(key&&iv){var dc=decrypt(new Uint8Array(arrayBuffer),key,iv);return new ReadableStream({start:function start(controller){controller.enqueue(dc);controller.close();}}).getReader();}else{return new ReadableStream({start:function start(controller){controller.enqueue(new Uint8Array(arrayBuffer));controller.close();}}).getReader();}};var PDFFetchStream=/*#__PURE__*/function(){function PDFFetchStream(source){_classCallCheck(this,PDFFetchStream);_defineProperty(this,"_responseOrigin",null);this.source=source;this.isHttp=/^https?:/i.test(source.url);this.headers=createHeaders(this.isHttp,source.httpHeaders);this._fullRequestReader=null;this._rangeRequestReaders=[];this.options=null;if(source!==null&&source!==void 0&&source.options){this.options=source===null||source===void 0?void 0:source.options;}}return _createClass(PDFFetchStream,[{key:"_progressiveDataLength",get:function get(){var _this$_fullRequestRea7,_this$_fullRequestRea8;return(_this$_fullRequestRea7=(_this$_fullRequestRea8=this._fullRequestReader)===null||_this$_fullRequestRea8===void 0?void 0:_this$_fullRequestRea8._loaded)!==null&&_this$_fullRequestRea7!==void 0?_this$_fullRequestRea7:0;}},{key:"getFullReader",value:function getFullReader(options){if(options){this.options=options;}assert(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once.");this._fullRequestReader=new PDFFetchStreamReader(this);return this._fullRequestReader;}},{key:"getRangeReader",value:function getRangeReader(begin,end){if(end<=this._progressiveDataLength){return null;}var reader=new PDFFetchStreamRangeReader(this,begin,end);this._rangeRequestReaders.push(reader);return reader;}},{key:"cancelAllRequests",value:function cancelAllRequests(reason){var _this$_fullRequestRea9;(_this$_fullRequestRea9=this._fullRequestReader)===null||_this$_fullRequestRea9===void 0||_this$_fullRequestRea9.cancel(reason);var _iterator83=_createForOfIteratorHelper(this._rangeRequestReaders.slice(0)),_step83;try{for(_iterator83.s();!(_step83=_iterator83.n()).done;){var reader=_step83.value;reader.cancel(reason);}}catch(err){_iterator83.e(err);}finally{_iterator83.f();}}}]);}();var PDFFetchStreamReader=/*#__PURE__*/function(){function PDFFetchStreamReader(stream){var _this34=this;_classCallCheck(this,PDFFetchStreamReader);this._stream=stream;this._reader=null;this._loaded=0;this._filename=null;var source=stream.source;this._withCredentials=source.withCredentials||false;this._contentLength=source.length;this._headersCapability=Promise.withResolvers();this._disableRange=source.disableRange||false;this._rangeChunkSize=source.rangeChunkSize;if(!this._rangeChunkSize&&!this._disableRange){this._disableRange=true;}this._abortController=new AbortController();this._isStreamingSupported=!source.disableStream;this._isRangeSupported=!source.disableRange;var headers=new Headers(stream.headers);var url=source.url;fetch(url,createFetchOptions(headers,this._withCredentials,this._abortController)).then(function(response){stream._responseOrigin=getResponseOrigin(response.url);if(!validateResponseStatus(response.status)){throw createResponseError(response.status,url);}_this34._reader=response.body.getReader();_this34._headersCapability.resolve();var responseHeaders=response.headers;var _validateRangeRequest=validateRangeRequestCapabilities({responseHeaders:responseHeaders,isHttp:stream.isHttp,rangeChunkSize:_this34._rangeChunkSize,disableRange:_this34._disableRange,options:_this34._stream.options}),allowRangeRequests=_validateRangeRequest.allowRangeRequests,suggestedLength=_validateRangeRequest.suggestedLength;_this34._isRangeSupported=allowRangeRequests;_this34._contentLength=suggestedLength||_this34._contentLength;_this34._filename=extractFilenameFromHeader(responseHeaders);if(!_this34._isStreamingSupported&&_this34._isRangeSupported){_this34.cancel(new _AbortException("Streaming is disabled."));}_this34.cancel(new _AbortException("강제취소"));})["catch"](this._headersCapability.reject);this.onProgress=null;}return _createClass(PDFFetchStreamReader,[{key:"headersReady",get:function get(){return this._headersCapability.promise;}},{key:"filename",get:function get(){return this._filename;}},{key:"contentLength",get:function get(){return this._contentLength;}},{key:"isRangeSupported",get:function get(){return this._isRangeSupported;}},{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported;}},{key:"read",value:function(){var _read3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee31(){var _this$onProgress;var _yield$this$_reader$r,value,done;return _regeneratorRuntime().wrap(function _callee31$(_context31){while(1)switch(_context31.prev=_context31.next){case 0:_context31.next=2;return this._headersCapability.promise;case 2:_context31.next=4;return this._reader.read();case 4:_yield$this$_reader$r=_context31.sent;value=_yield$this$_reader$r.value;done=_yield$this$_reader$r.done;if(!done){_context31.next=9;break;}return _context31.abrupt("return",{value:value,done:done});case 9:this._loaded+=value.byteLength;(_this$onProgress=this.onProgress)===null||_this$onProgress===void 0||_this$onProgress.call(this,{loaded:this._loaded,total:this._contentLength});return _context31.abrupt("return",{value:getArrayBuffer(value),done:false});case 12:case"end":return _context31.stop();}},_callee31,this);}));function read(){return _read3.apply(this,arguments);}return read;}()},{key:"cancel",value:function cancel(reason){var _this$_reader;(_this$_reader=this._reader)===null||_this$_reader===void 0||_this$_reader.cancel(reason);this._abortController.abort();}}]);}();var PDFFetchStreamRangeReader=/*#__PURE__*/function(){function PDFFetchStreamRangeReader(stream,begin,end){var _this35=this;_classCallCheck(this,PDFFetchStreamRangeReader);this._stream=stream;this._reader=null;this._loaded=0;var source=stream.source;this._withCredentials=source.withCredentials||false;this._readCapability=Promise.withResolvers();this._isStreamingSupported=!source.disableStream;this._abortController=new AbortController();var url=source.url;if(this.isSupportEnc()){if(begin>0){var headers=new Headers(stream.headers);headers.append("Range","bytes=".concat(begin-16,"-").concat(end-1));fetch(url,createFetchOptions(headers,this._withCredentials,this._abortController)).then(function(response){if(!validateResponseStatus(response.status)){throw createResponseError(response.status,url);}response.arrayBuffer().then(function(arrayBuffer){_this35._readCapability.resolve();_this35._reader=CreateReadableStreamWithOffset(arrayBuffer,begin,end,16,makeKey(_this35._stream.options.finger));})["catch"](function(err){console.error(err);_this35._readCapability.reject(err);});})["catch"](function(err){console.error(err);_this35._readCapability.reject(err);});}else{var _headers=new Headers(stream.headers);_headers.append("Range","bytes=".concat(begin,"-").concat(end-1));fetch(url,createFetchOptions(_headers,this._withCredentials,this._abortController)).then(function(response){if(!validateResponseStatus(response.status)){throw createResponseError(response.status,url);}response.arrayBuffer().then(function(arrayBuffer){_this35._readCapability.resolve();_this35._reader=CreateReadable(arrayBuffer,makeKey(_this35._stream.options.finger),makeIV(_this35._stream.options.bcd,_this35._stream.options.sbcd));})["catch"](function(err){console.error(err);_this35._readCapability.reject(err);});})["catch"](function(err){console.error(err);_this35._readCapability.reject(err);});}}else{var _headers2=new Headers(stream.headers);_headers2.append("Range","bytes=".concat(begin,"-").concat(end-1));fetch(url,createFetchOptions(_headers2,this._withCredentials,this._abortController)).then(function(response){var responseOrigin=getResponseOrigin(response.url);if(responseOrigin!==stream._responseOrigin){throw new Error("Expected range response-origin \\"".concat(responseOrigin,"\\" to match \\"").concat(stream._responseOrigin,"\\"."));}if(!validateResponseStatus(response.status)){throw createResponseError(response.status,url);}_this35._readCapability.resolve();_this35._reader=response.body.getReader();})["catch"](this._readCapability.reject);}this.onProgress=null;}return _createClass(PDFFetchStreamRangeReader,[{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported;}},{key:"read",value:function(){var _read4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee32(){var _this$onProgress2;var _yield$this$_reader$r2,value,done;return _regeneratorRuntime().wrap(function _callee32$(_context32){while(1)switch(_context32.prev=_context32.next){case 0:_context32.next=2;return this._readCapability.promise;case 2:_context32.next=4;return this._reader.read();case 4:_yield$this$_reader$r2=_context32.sent;value=_yield$this$_reader$r2.value;done=_yield$this$_reader$r2.done;if(!done){_context32.next=9;break;}return _context32.abrupt("return",{value:value,done:done});case 9:this._loaded+=value.byteLength;(_this$onProgress2=this.onProgress)===null||_this$onProgress2===void 0||_this$onProgress2.call(this,{loaded:this._loaded});return _context32.abrupt("return",{value:getArrayBuffer(value),done:false});case 12:case"end":return _context32.stop();}},_callee32,this);}));function read(){return _read4.apply(this,arguments);}return read;}()},{key:"cancel",value:function cancel(reason){var _this$_reader2;(_this$_reader2=this._reader)===null||_this$_reader2===void 0||_this$_reader2.cancel(reason);this._abortController.abort();}},{key:"isSupportEnc",value:function isSupportEnc(){return this._stream.options&&this._stream.options.bcd&&this._stream.options.sbcd&&this._stream.options.finger;}}]);}();;// ./src/display/network.js\nvar OK_RESPONSE=200;var PARTIAL_CONTENT_RESPONSE=206;function network_getArrayBuffer(xhr){var data=xhr.response;if(typeof data!=="string"){return data;}return stringToBytes(data).buffer;}var NetworkManager=/*#__PURE__*/function(){function NetworkManager(_ref42){var url=_ref42.url,httpHeaders=_ref42.httpHeaders,withCredentials=_ref42.withCredentials;_classCallCheck(this,NetworkManager);_defineProperty(this,"_responseOrigin",null);this.url=url;this.isHttp=/^https?:/i.test(url);this.headers=createHeaders(this.isHttp,httpHeaders);this.withCredentials=withCredentials||false;this.currXhrId=0;this.pendingRequests=Object.create(null);}return _createClass(NetworkManager,[{key:"request",value:function request(args){var xhr=new XMLHttpRequest();var xhrId=this.currXhrId++;var pendingRequest=this.pendingRequests[xhrId]={xhr:xhr};xhr.open("GET",this.url);xhr.withCredentials=this.withCredentials;var _iterator84=_createForOfIteratorHelper(this.headers),_step84;try{for(_iterator84.s();!(_step84=_iterator84.n()).done;){var _step84$value=_slicedToArray(_step84.value,2),key=_step84$value[0],val=_step84$value[1];xhr.setRequestHeader(key,val);}}catch(err){_iterator84.e(err);}finally{_iterator84.f();}if(this.isHttp&&"begin"in args&&"end"in args){xhr.setRequestHeader("Range","bytes=".concat(args.begin,"-").concat(args.end-1));pendingRequest.expectedStatus=PARTIAL_CONTENT_RESPONSE;}else{pendingRequest.expectedStatus=OK_RESPONSE;}xhr.responseType="arraybuffer";assert(args.onError,"Expected `onError` callback to be provided.");xhr.onerror=function(){args.onError(xhr.status);};xhr.onreadystatechange=this.onStateChange.bind(this,xhrId);xhr.onprogress=this.onProgress.bind(this,xhrId);pendingRequest.onHeadersReceived=args.onHeadersReceived;pendingRequest.onDone=args.onDone;pendingRequest.onError=args.onError;pendingRequest.onProgress=args.onProgress;xhr.send(null);return xhrId;}},{key:"onProgress",value:function onProgress(xhrId,evt){var _pendingRequest$onPro;var pendingRequest=this.pendingRequests[xhrId];if(!pendingRequest){return;}(_pendingRequest$onPro=pendingRequest.onProgress)===null||_pendingRequest$onPro===void 0||_pendingRequest$onPro.call(pendingRequest,evt);}},{key:"onStateChange",value:function onStateChange(xhrId,evt){var pendingRequest=this.pendingRequests[xhrId];if(!pendingRequest){return;}var xhr=pendingRequest.xhr;if(xhr.readyState>=2&&pendingRequest.onHeadersReceived){pendingRequest.onHeadersReceived();delete pendingRequest.onHeadersReceived;}if(xhr.readyState!==4){return;}if(!(xhrId in this.pendingRequests)){return;}delete this.pendingRequests[xhrId];if(xhr.status===0&&this.isHttp){pendingRequest.onError(xhr.status);return;}var xhrStatus=xhr.status||OK_RESPONSE;var ok_response_on_range_request=xhrStatus===OK_RESPONSE&&pendingRequest.expectedStatus===PARTIAL_CONTENT_RESPONSE;if(!ok_response_on_range_request&&xhrStatus!==pendingRequest.expectedStatus){pendingRequest.onError(xhr.status);return;}var chunk=network_getArrayBuffer(xhr);if(xhrStatus===PARTIAL_CONTENT_RESPONSE){var rangeHeader=xhr.getResponseHeader("Content-Range");var matches=/bytes (\\d+)-(\\d+)\\/(\\d+)/.exec(rangeHeader);if(matches){pendingRequest.onDone({begin:parseInt(matches[1],10),chunk:chunk});}else{warn("Missing or invalid \\"Content-Range\\" header.");pendingRequest.onError(0);}}else if(chunk){pendingRequest.onDone({begin:0,chunk:chunk});}else{pendingRequest.onError(xhr.status);}}},{key:"getRequestXhr",value:function getRequestXhr(xhrId){return this.pendingRequests[xhrId].xhr;}},{key:"isPendingRequest",value:function isPendingRequest(xhrId){return xhrId in this.pendingRequests;}},{key:"abortRequest",value:function abortRequest(xhrId){var xhr=this.pendingRequests[xhrId].xhr;delete this.pendingRequests[xhrId];xhr.abort();}}]);}();var PDFNetworkStream=/*#__PURE__*/function(){function PDFNetworkStream(source){_classCallCheck(this,PDFNetworkStream);this._source=source;this._manager=new NetworkManager(source);this._rangeChunkSize=source.rangeChunkSize;this._fullRequestReader=null;this._rangeRequestReaders=[];}return _createClass(PDFNetworkStream,[{key:"_onRangeRequestReaderClosed",value:function _onRangeRequestReaderClosed(reader){var i=this._rangeRequestReaders.indexOf(reader);if(i>=0){this._rangeRequestReaders.splice(i,1);}}},{key:"getFullReader",value:function getFullReader(){assert(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once.");this._fullRequestReader=new PDFNetworkStreamFullRequestReader(this._manager,this._source);return this._fullRequestReader;}},{key:"getRangeReader",value:function getRangeReader(begin,end){var reader=new PDFNetworkStreamRangeRequestReader(this._manager,begin,end);reader.onClosed=this._onRangeRequestReaderClosed.bind(this);this._rangeRequestReaders.push(reader);return reader;}},{key:"cancelAllRequests",value:function cancelAllRequests(reason){var _this$_fullRequestRea10;(_this$_fullRequestRea10=this._fullRequestReader)===null||_this$_fullRequestRea10===void 0||_this$_fullRequestRea10.cancel(reason);var _iterator85=_createForOfIteratorHelper(this._rangeRequestReaders.slice(0)),_step85;try{for(_iterator85.s();!(_step85=_iterator85.n()).done;){var reader=_step85.value;reader.cancel(reason);}}catch(err){_iterator85.e(err);}finally{_iterator85.f();}}}]);}();var PDFNetworkStreamFullRequestReader=/*#__PURE__*/function(){function PDFNetworkStreamFullRequestReader(manager,source){_classCallCheck(this,PDFNetworkStreamFullRequestReader);this._manager=manager;this._url=source.url;this._fullRequestId=manager.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)});this._headersCapability=Promise.withResolvers();this._disableRange=source.disableRange||false;this._contentLength=source.length;this._rangeChunkSize=source.rangeChunkSize;if(!this._rangeChunkSize&&!this._disableRange){this._disableRange=true;}this._isStreamingSupported=false;this._isRangeSupported=false;this._cachedChunks=[];this._requests=[];this._done=false;this._storedError=undefined;this._filename=null;this.onProgress=null;}return _createClass(PDFNetworkStreamFullRequestReader,[{key:"_onHeadersReceived",value:function _onHeadersReceived(){var fullRequestXhrId=this._fullRequestId;var fullRequestXhr=this._manager.getRequestXhr(fullRequestXhrId);this._manager._responseOrigin=getResponseOrigin(fullRequestXhr.responseURL);var rawResponseHeaders=fullRequestXhr.getAllResponseHeaders();var responseHeaders=new Headers(rawResponseHeaders?rawResponseHeaders.trimStart().replace(/[^\\S ]+$/,"").split(/[\\r\\n]+/).map(function(x){var _x$split=x.split(": "),_x$split2=_toArray(_x$split),key=_x$split2[0],val=_x$split2.slice(1);return[key,val.join(": ")];}):[]);var _validateRangeRequest2=validateRangeRequestCapabilities({responseHeaders:responseHeaders,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange}),allowRangeRequests=_validateRangeRequest2.allowRangeRequests,suggestedLength=_validateRangeRequest2.suggestedLength;if(allowRangeRequests){this._isRangeSupported=true;}this._contentLength=suggestedLength||this._contentLength;this._filename=extractFilenameFromHeader(responseHeaders);if(this._isRangeSupported){this._manager.abortRequest(fullRequestXhrId);}this._headersCapability.resolve();}},{key:"_onDone",value:function _onDone(data){if(data){if(this._requests.length>0){var requestCapability=this._requests.shift();requestCapability.resolve({value:data.chunk,done:false});}else{this._cachedChunks.push(data.chunk);}}this._done=true;if(this._cachedChunks.length>0){return;}var _iterator86=_createForOfIteratorHelper(this._requests),_step86;try{for(_iterator86.s();!(_step86=_iterator86.n()).done;){var _requestCapability=_step86.value;_requestCapability.resolve({value:undefined,done:true});}}catch(err){_iterator86.e(err);}finally{_iterator86.f();}this._requests.length=0;}},{key:"_onError",value:function _onError(status){this._storedError=createResponseError(status,this._url);this._headersCapability.reject(this._storedError);var _iterator87=_createForOfIteratorHelper(this._requests),_step87;try{for(_iterator87.s();!(_step87=_iterator87.n()).done;){var requestCapability=_step87.value;requestCapability.reject(this._storedError);}}catch(err){_iterator87.e(err);}finally{_iterator87.f();}this._requests.length=0;this._cachedChunks.length=0;}},{key:"_onProgress",value:function _onProgress(evt){var _this$onProgress3;(_this$onProgress3=this.onProgress)===null||_this$onProgress3===void 0||_this$onProgress3.call(this,{loaded:evt.loaded,total:evt.lengthComputable?evt.total:this._contentLength});}},{key:"filename",get:function get(){return this._filename;}},{key:"isRangeSupported",get:function get(){return this._isRangeSupported;}},{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported;}},{key:"contentLength",get:function get(){return this._contentLength;}},{key:"headersReady",get:function get(){return this._headersCapability.promise;}},{key:"read",value:function(){var _read5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee33(){var chunk,requestCapability;return _regeneratorRuntime().wrap(function _callee33$(_context33){while(1)switch(_context33.prev=_context33.next){case 0:_context33.next=2;return this._headersCapability.promise;case 2:if(!this._storedError){_context33.next=4;break;}throw this._storedError;case 4:if(!(this._cachedChunks.length>0)){_context33.next=7;break;}chunk=this._cachedChunks.shift();return _context33.abrupt("return",{value:chunk,done:false});case 7:if(!this._done){_context33.next=9;break;}return _context33.abrupt("return",{value:undefined,done:true});case 9:requestCapability=Promise.withResolvers();this._requests.push(requestCapability);return _context33.abrupt("return",requestCapability.promise);case 12:case"end":return _context33.stop();}},_callee33,this);}));function read(){return _read5.apply(this,arguments);}return read;}()},{key:"cancel",value:function cancel(reason){this._done=true;this._headersCapability.reject(reason);var _iterator88=_createForOfIteratorHelper(this._requests),_step88;try{for(_iterator88.s();!(_step88=_iterator88.n()).done;){var requestCapability=_step88.value;requestCapability.resolve({value:undefined,done:true});}}catch(err){_iterator88.e(err);}finally{_iterator88.f();}this._requests.length=0;if(this._manager.isPendingRequest(this._fullRequestId)){this._manager.abortRequest(this._fullRequestId);}this._fullRequestReader=null;}}]);}();var PDFNetworkStreamRangeRequestReader=/*#__PURE__*/function(){function PDFNetworkStreamRangeRequestReader(manager,begin,end){_classCallCheck(this,PDFNetworkStreamRangeRequestReader);this._manager=manager;this._url=manager.url;this._requestId=manager.request({begin:begin,end:end,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)});this._requests=[];this._queuedChunk=null;this._done=false;this._storedError=undefined;this.onProgress=null;this.onClosed=null;}return _createClass(PDFNetworkStreamRangeRequestReader,[{key:"_onHeadersReceived",value:function _onHeadersReceived(){var _this$_manager$getReq;var responseOrigin=getResponseOrigin((_this$_manager$getReq=this._manager.getRequestXhr(this._requestId))===null||_this$_manager$getReq===void 0?void 0:_this$_manager$getReq.responseURL);if(responseOrigin!==this._manager._responseOrigin){this._storedError=new Error("Expected range response-origin \\"".concat(responseOrigin,"\\" to match \\"").concat(this._manager._responseOrigin,"\\"."));this._onError(0);}}},{key:"_close",value:function _close(){var _this$onClosed;(_this$onClosed=this.onClosed)===null||_this$onClosed===void 0||_this$onClosed.call(this,this);}},{key:"_onDone",value:function _onDone(data){var chunk=data.chunk;if(this._requests.length>0){var requestCapability=this._requests.shift();requestCapability.resolve({value:chunk,done:false});}else{this._queuedChunk=chunk;}this._done=true;var _iterator89=_createForOfIteratorHelper(this._requests),_step89;try{for(_iterator89.s();!(_step89=_iterator89.n()).done;){var _requestCapability2=_step89.value;_requestCapability2.resolve({value:undefined,done:true});}}catch(err){_iterator89.e(err);}finally{_iterator89.f();}this._requests.length=0;this._close();}},{key:"_onError",value:function _onError(status){var _this$_storedError;(_this$_storedError=this._storedError)!==null&&_this$_storedError!==void 0?_this$_storedError:this._storedError=createResponseError(status,this._url);var _iterator90=_createForOfIteratorHelper(this._requests),_step90;try{for(_iterator90.s();!(_step90=_iterator90.n()).done;){var requestCapability=_step90.value;requestCapability.reject(this._storedError);}}catch(err){_iterator90.e(err);}finally{_iterator90.f();}this._requests.length=0;this._queuedChunk=null;}},{key:"_onProgress",value:function _onProgress(evt){if(!this.isStreamingSupported){var _this$onProgress4;(_this$onProgress4=this.onProgress)===null||_this$onProgress4===void 0||_this$onProgress4.call(this,{loaded:evt.loaded});}}},{key:"isStreamingSupported",get:function get(){return false;}},{key:"read",value:function(){var _read6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee34(){var chunk,requestCapability;return _regeneratorRuntime().wrap(function _callee34$(_context34){while(1)switch(_context34.prev=_context34.next){case 0:if(!this._storedError){_context34.next=2;break;}throw this._storedError;case 2:if(!(this._queuedChunk!==null)){_context34.next=6;break;}chunk=this._queuedChunk;this._queuedChunk=null;return _context34.abrupt("return",{value:chunk,done:false});case 6:if(!this._done){_context34.next=8;break;}return _context34.abrupt("return",{value:undefined,done:true});case 8:requestCapability=Promise.withResolvers();this._requests.push(requestCapability);return _context34.abrupt("return",requestCapability.promise);case 11:case"end":return _context34.stop();}},_callee34,this);}));function read(){return _read6.apply(this,arguments);}return read;}()},{key:"cancel",value:function cancel(reason){this._done=true;var _iterator91=_createForOfIteratorHelper(this._requests),_step91;try{for(_iterator91.s();!(_step91=_iterator91.n()).done;){var requestCapability=_step91.value;requestCapability.resolve({value:undefined,done:true});}}catch(err){_iterator91.e(err);}finally{_iterator91.f();}this._requests.length=0;if(this._manager.isPendingRequest(this._requestId)){this._manager.abortRequest(this._requestId);}this._close();}}]);}();;// ./src/display/node_stream.js\nvar urlRegex=/^[a-z][a-z0-9\\-+.]+:/i;function parseUrlOrPath(sourceUrl){if(urlRegex.test(sourceUrl)){return new URL(sourceUrl);}var url=process.getBuiltinModule("url");return new URL(url.pathToFileURL(sourceUrl));}var PDFNodeStream=/*#__PURE__*/function(){function PDFNodeStream(source){_classCallCheck(this,PDFNodeStream);this.source=source;this.url=parseUrlOrPath(source.url);assert(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs.");this._fullRequestReader=null;this._rangeRequestReaders=[];}return _createClass(PDFNodeStream,[{key:"_progressiveDataLength",get:function get(){var _this$_fullRequestRea11,_this$_fullRequestRea12;return(_this$_fullRequestRea11=(_this$_fullRequestRea12=this._fullRequestReader)===null||_this$_fullRequestRea12===void 0?void 0:_this$_fullRequestRea12._loaded)!==null&&_this$_fullRequestRea11!==void 0?_this$_fullRequestRea11:0;}},{key:"getFullReader",value:function getFullReader(){assert(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once.");this._fullRequestReader=new PDFNodeStreamFsFullReader(this);return this._fullRequestReader;}},{key:"getRangeReader",value:function getRangeReader(start,end){if(end<=this._progressiveDataLength){return null;}var rangeReader=new PDFNodeStreamFsRangeReader(this,start,end);this._rangeRequestReaders.push(rangeReader);return rangeReader;}},{key:"cancelAllRequests",value:function cancelAllRequests(reason){var _this$_fullRequestRea13;(_this$_fullRequestRea13=this._fullRequestReader)===null||_this$_fullRequestRea13===void 0||_this$_fullRequestRea13.cancel(reason);var _iterator92=_createForOfIteratorHelper(this._rangeRequestReaders.slice(0)),_step92;try{for(_iterator92.s();!(_step92=_iterator92.n()).done;){var reader=_step92.value;reader.cancel(reason);}}catch(err){_iterator92.e(err);}finally{_iterator92.f();}}}]);}();var PDFNodeStreamFsFullReader=/*#__PURE__*/function(){function PDFNodeStreamFsFullReader(stream){var _this36=this;_classCallCheck(this,PDFNodeStreamFsFullReader);this._url=stream.url;this._done=false;this._storedError=null;this.onProgress=null;var source=stream.source;this._contentLength=source.length;this._loaded=0;this._filename=null;this._disableRange=source.disableRange||false;this._rangeChunkSize=source.rangeChunkSize;if(!this._rangeChunkSize&&!this._disableRange){this._disableRange=true;}this._isStreamingSupported=!source.disableStream;this._isRangeSupported=!source.disableRange;this._readableStream=null;this._readCapability=Promise.withResolvers();this._headersCapability=Promise.withResolvers();var fs=process.getBuiltinModule("fs");fs.promises.lstat(this._url).then(function(stat){_this36._contentLength=stat.size;_this36._setReadableStream(fs.createReadStream(_this36._url));_this36._headersCapability.resolve();},function(error){if(error.code==="ENOENT"){error=createResponseError(0,_this36._url.href);}_this36._storedError=error;_this36._headersCapability.reject(error);});}return _createClass(PDFNodeStreamFsFullReader,[{key:"headersReady",get:function get(){return this._headersCapability.promise;}},{key:"filename",get:function get(){return this._filename;}},{key:"contentLength",get:function get(){return this._contentLength;}},{key:"isRangeSupported",get:function get(){return this._isRangeSupported;}},{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported;}},{key:"read",value:function(){var _read7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee35(){var _this$onProgress5;var chunk,buffer;return _regeneratorRuntime().wrap(function _callee35$(_context35){while(1)switch(_context35.prev=_context35.next){case 0:_context35.next=2;return this._readCapability.promise;case 2:if(!this._done){_context35.next=4;break;}return _context35.abrupt("return",{value:undefined,done:true});case 4:if(!this._storedError){_context35.next=6;break;}throw this._storedError;case 6:chunk=this._readableStream.read();if(!(chunk===null)){_context35.next=10;break;}this._readCapability=Promise.withResolvers();return _context35.abrupt("return",this.read());case 10:this._loaded+=chunk.length;(_this$onProgress5=this.onProgress)===null||_this$onProgress5===void 0||_this$onProgress5.call(this,{loaded:this._loaded,total:this._contentLength});buffer=new Uint8Array(chunk).buffer;return _context35.abrupt("return",{value:buffer,done:false});case 14:case"end":return _context35.stop();}},_callee35,this);}));function read(){return _read7.apply(this,arguments);}return read;}()},{key:"cancel",value:function cancel(reason){if(!this._readableStream){this._error(reason);return;}this._readableStream.destroy(reason);}},{key:"_error",value:function _error(reason){this._storedError=reason;this._readCapability.resolve();}},{key:"_setReadableStream",value:function _setReadableStream(readableStream){var _this37=this;this._readableStream=readableStream;readableStream.on("readable",function(){_this37._readCapability.resolve();});readableStream.on("end",function(){readableStream.destroy();_this37._done=true;_this37._readCapability.resolve();});readableStream.on("error",function(reason){_this37._error(reason);});if(!this._isStreamingSupported&&this._isRangeSupported){this._error(new _AbortException("streaming is disabled"));}if(this._storedError){this._readableStream.destroy(this._storedError);}}}]);}();var PDFNodeStreamFsRangeReader=/*#__PURE__*/function(){function PDFNodeStreamFsRangeReader(stream,start,end){_classCallCheck(this,PDFNodeStreamFsRangeReader);this._url=stream.url;this._done=false;this._storedError=null;this.onProgress=null;this._loaded=0;this._readableStream=null;this._readCapability=Promise.withResolvers();var source=stream.source;this._isStreamingSupported=!source.disableStream;var fs=process.getBuiltinModule("fs");this._setReadableStream(fs.createReadStream(this._url,{start:start,end:end-1}));}return _createClass(PDFNodeStreamFsRangeReader,[{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported;}},{key:"read",value:function(){var _read8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee36(){var _this$onProgress6;var chunk,buffer;return _regeneratorRuntime().wrap(function _callee36$(_context36){while(1)switch(_context36.prev=_context36.next){case 0:_context36.next=2;return this._readCapability.promise;case 2:if(!this._done){_context36.next=4;break;}return _context36.abrupt("return",{value:undefined,done:true});case 4:if(!this._storedError){_context36.next=6;break;}throw this._storedError;case 6:chunk=this._readableStream.read();if(!(chunk===null)){_context36.next=10;break;}this._readCapability=Promise.withResolvers();return _context36.abrupt("return",this.read());case 10:this._loaded+=chunk.length;(_this$onProgress6=this.onProgress)===null||_this$onProgress6===void 0||_this$onProgress6.call(this,{loaded:this._loaded});buffer=new Uint8Array(chunk).buffer;return _context36.abrupt("return",{value:buffer,done:false});case 14:case"end":return _context36.stop();}},_callee36,this);}));function read(){return _read8.apply(this,arguments);}return read;}()},{key:"cancel",value:function cancel(reason){if(!this._readableStream){this._error(reason);return;}this._readableStream.destroy(reason);}},{key:"_error",value:function _error(reason){this._storedError=reason;this._readCapability.resolve();}},{key:"_setReadableStream",value:function _setReadableStream(readableStream){var _this38=this;this._readableStream=readableStream;readableStream.on("readable",function(){_this38._readCapability.resolve();});readableStream.on("end",function(){readableStream.destroy();_this38._done=true;_this38._readCapability.resolve();});readableStream.on("error",function(reason){_this38._error(reason);});if(this._storedError){this._readableStream.destroy(this._storedError);}}}]);}();;// ./src/display/text_layer.js\nvar MAX_TEXT_DIVS_TO_RENDER=100000;var DEFAULT_FONT_SIZE=30;var _capability=/*#__PURE__*/new WeakMap();var _container4=/*#__PURE__*/new WeakMap();var _disableProcessItems=/*#__PURE__*/new WeakMap();var _fontInspectorEnabled=/*#__PURE__*/new WeakMap();var _lang=/*#__PURE__*/new WeakMap();var _layoutTextParams=/*#__PURE__*/new WeakMap();var _pageHeight3=/*#__PURE__*/new WeakMap();var _pageWidth3=/*#__PURE__*/new WeakMap();var _reader=/*#__PURE__*/new WeakMap();var _rootContainer=/*#__PURE__*/new WeakMap();var _rotation3=/*#__PURE__*/new WeakMap();var _scale=/*#__PURE__*/new WeakMap();var _styleCache=/*#__PURE__*/new WeakMap();var _textContentItemsStr=/*#__PURE__*/new WeakMap();var _textContentSource=/*#__PURE__*/new WeakMap();var _textDivs=/*#__PURE__*/new WeakMap();var _textDivProperties=/*#__PURE__*/new WeakMap();var _transform=/*#__PURE__*/new WeakMap();var _TextLayer_brand=/*#__PURE__*/new WeakSet();var _TextLayer=/*#__PURE__*/function(){function _TextLayer(_ref43){var _globalThis$FontInspe,_this39=this;var textContentSource=_ref43.textContentSource,container=_ref43.container,viewport=_ref43.viewport;_classCallCheck(this,_TextLayer);_classPrivateMethodInitSpec(this,_TextLayer_brand);_classPrivateFieldInitSpec(this,_capability,Promise.withResolvers());_classPrivateFieldInitSpec(this,_container4,null);_classPrivateFieldInitSpec(this,_disableProcessItems,false);_classPrivateFieldInitSpec(this,_fontInspectorEnabled,!!((_globalThis$FontInspe=globalThis.FontInspector)!==null&&_globalThis$FontInspe!==void 0&&_globalThis$FontInspe.enabled));_classPrivateFieldInitSpec(this,_lang,null);_classPrivateFieldInitSpec(this,_layoutTextParams,null);_classPrivateFieldInitSpec(this,_pageHeight3,0);_classPrivateFieldInitSpec(this,_pageWidth3,0);_classPrivateFieldInitSpec(this,_reader,null);_classPrivateFieldInitSpec(this,_rootContainer,null);_classPrivateFieldInitSpec(this,_rotation3,0);_classPrivateFieldInitSpec(this,_scale,0);_classPrivateFieldInitSpec(this,_styleCache,Object.create(null));_classPrivateFieldInitSpec(this,_textContentItemsStr,[]);_classPrivateFieldInitSpec(this,_textContentSource,null);_classPrivateFieldInitSpec(this,_textDivs,[]);_classPrivateFieldInitSpec(this,_textDivProperties,new WeakMap());_classPrivateFieldInitSpec(this,_transform,null);if(textContentSource instanceof ReadableStream){_classPrivateFieldSet(_textContentSource,this,textContentSource);}else if(_typeof(textContentSource)==="object"){_classPrivateFieldSet(_textContentSource,this,new ReadableStream({start:function start(controller){controller.enqueue(textContentSource);controller.close();}}));}else{throw new Error(\'No "textContentSource" parameter specified.\');}_classPrivateFieldSet(_container4,this,_classPrivateFieldSet(_rootContainer,this,container));_classPrivateFieldSet(_scale,this,viewport.scale*(globalThis.devicePixelRatio||1));_classPrivateFieldSet(_rotation3,this,viewport.rotation);_classPrivateFieldSet(_layoutTextParams,this,{div:null,properties:null,ctx:null});var _viewport$rawDims2=viewport.rawDims,pageWidth=_viewport$rawDims2.pageWidth,pageHeight=_viewport$rawDims2.pageHeight,pageX=_viewport$rawDims2.pageX,pageY=_viewport$rawDims2.pageY;_classPrivateFieldSet(_transform,this,[1,0,0,-1,-pageX,pageY+pageHeight]);_classPrivateFieldSet(_pageWidth3,this,pageWidth);_classPrivateFieldSet(_pageHeight3,this,pageHeight);_ensureMinFontSizeComputed.call(_TextLayer);_setLayerDimensions(container,viewport);_classPrivateFieldGet(_capability,this).promise["finally"](function(){_pendingTextLayers._["delete"](_this39);_classPrivateFieldSet(_layoutTextParams,_this39,null);_classPrivateFieldSet(_styleCache,_this39,null);})["catch"](function(){});}return _createClass(_TextLayer,[{key:"render",value:function render(){var _this40=this;var _pump=function pump(){_classPrivateFieldGet(_reader,_this40).read().then(function(_ref44){var _classPrivateFieldGet59;var value=_ref44.value,done=_ref44.done;if(done){_classPrivateFieldGet(_capability,_this40).resolve();return;}(_classPrivateFieldGet59=_classPrivateFieldGet(_lang,_this40))!==null&&_classPrivateFieldGet59!==void 0?_classPrivateFieldGet59:_classPrivateFieldSet(_lang,_this40,value.lang);Object.assign(_classPrivateFieldGet(_styleCache,_this40),value.styles);_assertClassBrand(_TextLayer_brand,_this40,_processItems).call(_this40,value.items);_pump();},_classPrivateFieldGet(_capability,_this40).reject);};_classPrivateFieldSet(_reader,this,_classPrivateFieldGet(_textContentSource,this).getReader());_pendingTextLayers._.add(this);_pump();return _classPrivateFieldGet(_capability,this).promise;}},{key:"update",value:function update(_ref45){var viewport=_ref45.viewport,_ref45$onBefore=_ref45.onBefore,onBefore=_ref45$onBefore===void 0?null:_ref45$onBefore;var scale=viewport.scale*(globalThis.devicePixelRatio||1);var rotation=viewport.rotation;if(rotation!==_classPrivateFieldGet(_rotation3,this)){onBefore===null||onBefore===void 0||onBefore();_classPrivateFieldSet(_rotation3,this,rotation);_setLayerDimensions(_classPrivateFieldGet(_rootContainer,this),{rotation:rotation});}if(scale!==_classPrivateFieldGet(_scale,this)){onBefore===null||onBefore===void 0||onBefore();_classPrivateFieldSet(_scale,this,scale);var params={div:null,properties:null,ctx:_getCtx.call(_TextLayer,_classPrivateFieldGet(_lang,this))};var _iterator93=_createForOfIteratorHelper(_classPrivateFieldGet(_textDivs,this)),_step93;try{for(_iterator93.s();!(_step93=_iterator93.n()).done;){var div=_step93.value;params.properties=_classPrivateFieldGet(_textDivProperties,this).get(div);params.div=div;_assertClassBrand(_TextLayer_brand,this,_layout).call(this,params);}}catch(err){_iterator93.e(err);}finally{_iterator93.f();}}}},{key:"cancel",value:function cancel(){var _classPrivateFieldGet60;var abortEx=new _AbortException("TextLayer task cancelled.");(_classPrivateFieldGet60=_classPrivateFieldGet(_reader,this))===null||_classPrivateFieldGet60===void 0||_classPrivateFieldGet60.cancel(abortEx)["catch"](function(){});_classPrivateFieldSet(_reader,this,null);_classPrivateFieldGet(_capability,this).reject(abortEx);}},{key:"textDivs",get:function get(){return _classPrivateFieldGet(_textDivs,this);}},{key:"textContentItemsStr",get:function get(){return _classPrivateFieldGet(_textContentItemsStr,this);}}],[{key:"fontFamilyMap",get:function get(){var _util_FeatureTest$pla=util_FeatureTest.platform,isWindows=_util_FeatureTest$pla.isWindows,isFirefox=_util_FeatureTest$pla.isFirefox;return _shadow(this,"fontFamilyMap",new Map([["sans-serif","".concat(isWindows&&isFirefox?"Calibri, ":"","sans-serif")],["monospace","".concat(isWindows&&isFirefox?"Lucida Console, ":"","monospace")]]));}},{key:"cleanup",value:function cleanup(){if(_assertClassBrand(_TextLayer,this,_pendingTextLayers)._.size>0){return;}_assertClassBrand(_TextLayer,this,_ascentCache)._.clear();var _iterator94=_createForOfIteratorHelper(_assertClassBrand(_TextLayer,this,_canvasContexts)._.values()),_step94;try{for(_iterator94.s();!(_step94=_iterator94.n()).done;){var canvas=_step94.value.canvas;canvas.remove();}}catch(err){_iterator94.e(err);}finally{_iterator94.f();}_assertClassBrand(_TextLayer,this,_canvasContexts)._.clear();}}]);}();_TextLayer2=_TextLayer;function _processItems(items){var _classPrivateFieldGet151,_classPrivateFieldGet152;if(_classPrivateFieldGet(_disableProcessItems,this)){return;}(_classPrivateFieldGet152=(_classPrivateFieldGet151=_classPrivateFieldGet(_layoutTextParams,this)).ctx)!==null&&_classPrivateFieldGet152!==void 0?_classPrivateFieldGet152:_classPrivateFieldGet151.ctx=_getCtx.call(_TextLayer2,_classPrivateFieldGet(_lang,this));var textDivs=_classPrivateFieldGet(_textDivs,this),textContentItemsStr=_classPrivateFieldGet(_textContentItemsStr,this);var _iterator180=_createForOfIteratorHelper(items),_step180;try{for(_iterator180.s();!(_step180=_iterator180.n()).done;){var item=_step180.value;if(textDivs.length>MAX_TEXT_DIVS_TO_RENDER){warn("Ignoring additional textDivs for performance reasons.");_classPrivateFieldSet(_disableProcessItems,this,true);return;}if(item.str===undefined){if(item.type==="beginMarkedContentProps"||item.type==="beginMarkedContent"){var parent=_classPrivateFieldGet(_container4,this);_classPrivateFieldSet(_container4,this,document.createElement("span"));_classPrivateFieldGet(_container4,this).classList.add("markedContent");if(item.id!==null){_classPrivateFieldGet(_container4,this).setAttribute("id","".concat(item.id));}parent.append(_classPrivateFieldGet(_container4,this));}else if(item.type==="endMarkedContent"){_classPrivateFieldSet(_container4,this,_classPrivateFieldGet(_container4,this).parentNode);}continue;}textContentItemsStr.push(item.str);_assertClassBrand(_TextLayer_brand,this,_appendText).call(this,item);}}catch(err){_iterator180.e(err);}finally{_iterator180.f();}}function _appendText(geom){var textDiv=document.createElement("span");var textDivProperties={angle:0,canvasWidth:0,hasText:geom.str!=="",hasEOL:geom.hasEOL,fontSize:0};_classPrivateFieldGet(_textDivs,this).push(textDiv);var tx=_Util.transform(_classPrivateFieldGet(_transform,this),geom.transform);var angle=Math.atan2(tx[1],tx[0]);var style=_classPrivateFieldGet(_styleCache,this)[geom.fontName];if(style.vertical){angle+=Math.PI/2;}var fontFamily=_classPrivateFieldGet(_fontInspectorEnabled,this)&&style.fontSubstitution||style.fontFamily;fontFamily=_TextLayer2.fontFamilyMap.get(fontFamily)||fontFamily;var fontHeight=Math.hypot(tx[2],tx[3]);var fontAscent=fontHeight*_getAscent.call(_TextLayer2,fontFamily,style,_classPrivateFieldGet(_lang,this));var left,top;if(angle===0){left=tx[4];top=tx[5]-fontAscent;}else{left=tx[4]+fontAscent*Math.sin(angle);top=tx[5]-fontAscent*Math.cos(angle);}var scaleFactorStr="calc(var(--total-scale-factor) *";var divStyle=textDiv.style;if(_classPrivateFieldGet(_container4,this)===_classPrivateFieldGet(_rootContainer,this)){divStyle.left="".concat((100*left/_classPrivateFieldGet(_pageWidth3,this)).toFixed(2),"%");divStyle.top="".concat((100*top/_classPrivateFieldGet(_pageHeight3,this)).toFixed(2),"%");}else{divStyle.left="".concat(scaleFactorStr).concat(left.toFixed(2),"px)");divStyle.top="".concat(scaleFactorStr).concat(top.toFixed(2),"px)");}divStyle.fontSize="".concat(scaleFactorStr).concat((_minFontSize._*fontHeight).toFixed(2),"px)");divStyle.fontFamily=fontFamily;textDivProperties.fontSize=fontHeight;textDiv.setAttribute("role","presentation");textDiv.textContent=geom.str;textDiv.dir=geom.dir;if(_classPrivateFieldGet(_fontInspectorEnabled,this)){textDiv.dataset.fontName=style.fontSubstitutionLoadedName||geom.fontName;}if(angle!==0){textDivProperties.angle=angle*(180/Math.PI);}var shouldScaleText=false;if(geom.str.length>1){shouldScaleText=true;}else if(geom.str!==" "&&geom.transform[0]!==geom.transform[3]){var absScaleX=Math.abs(geom.transform[0]),absScaleY=Math.abs(geom.transform[3]);if(absScaleX!==absScaleY&&Math.max(absScaleX,absScaleY)/Math.min(absScaleX,absScaleY)>1.5){shouldScaleText=true;}}if(shouldScaleText){textDivProperties.canvasWidth=style.vertical?geom.height:geom.width;}_classPrivateFieldGet(_textDivProperties,this).set(textDiv,textDivProperties);_classPrivateFieldGet(_layoutTextParams,this).div=textDiv;_classPrivateFieldGet(_layoutTextParams,this).properties=textDivProperties;_assertClassBrand(_TextLayer_brand,this,_layout).call(this,_classPrivateFieldGet(_layoutTextParams,this));if(textDivProperties.hasText){_classPrivateFieldGet(_container4,this).append(textDiv);}if(textDivProperties.hasEOL){var br=document.createElement("br");br.setAttribute("role","presentation");_classPrivateFieldGet(_container4,this).append(br);}}function _layout(params){var div=params.div,properties=params.properties,ctx=params.ctx;var style=div.style;var transform="";if(_minFontSize._>1){transform="scale(".concat(1/_minFontSize._,")");}if(properties.canvasWidth!==0&&properties.hasText){var fontFamily=style.fontFamily;var canvasWidth=properties.canvasWidth,fontSize=properties.fontSize;_ensureCtxFont.call(_TextLayer2,ctx,fontSize*_classPrivateFieldGet(_scale,this),fontFamily);var _ctx$measureText2=ctx.measureText(div.textContent),width=_ctx$measureText2.width;if(width>0){transform="scaleX(".concat(canvasWidth*_classPrivateFieldGet(_scale,this)/width,") ").concat(transform);}}if(properties.angle!==0){transform="rotate(".concat(properties.angle,"deg) ").concat(transform);}if(transform.length>0){style.transform=transform;}}function _getCtx(){var lang=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var ctx=_assertClassBrand(_TextLayer2,this,_canvasContexts)._.get(lang||(lang=""));if(!ctx){var canvas=document.createElement("canvas");canvas.className="hiddenCanvasElement";canvas.lang=lang;document.body.append(canvas);ctx=canvas.getContext("2d",{alpha:false,willReadFrequently:true});_assertClassBrand(_TextLayer2,this,_canvasContexts)._.set(lang,ctx);_assertClassBrand(_TextLayer2,this,_canvasCtxFonts)._.set(ctx,{size:0,family:""});}return ctx;}function _ensureCtxFont(ctx,size,family){var cached=_assertClassBrand(_TextLayer2,this,_canvasCtxFonts)._.get(ctx);if(size===cached.size&&family===cached.family){return;}ctx.font="".concat(size,"px ").concat(family);cached.size=size;cached.family=family;}function _ensureMinFontSizeComputed(){if(_assertClassBrand(_TextLayer2,this,_minFontSize)._!==null){return;}var div=document.createElement("div");div.style.opacity=0;div.style.lineHeight=1;div.style.fontSize="1px";div.style.position="absolute";div.textContent="X";document.body.append(div);_minFontSize._=_assertClassBrand(_TextLayer2,this,div.getBoundingClientRect().height);div.remove();}function _getAscent(fontFamily,style,lang){var cachedAscent=_assertClassBrand(_TextLayer2,this,_ascentCache)._.get(fontFamily);if(cachedAscent){return cachedAscent;}var ctx=_assertClassBrand(_TextLayer2,this,_getCtx).call(this,lang);ctx.canvas.width=ctx.canvas.height=DEFAULT_FONT_SIZE;_assertClassBrand(_TextLayer2,this,_ensureCtxFont).call(this,ctx,DEFAULT_FONT_SIZE,fontFamily);var metrics=ctx.measureText("");var ascent=metrics.fontBoundingBoxAscent;var descent=Math.abs(metrics.fontBoundingBoxDescent);ctx.canvas.width=ctx.canvas.height=0;var ratio=0.8;if(ascent){ratio=ascent/(ascent+descent);}else{if(util_FeatureTest.platform.isFirefox){warn("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference "+"in `about:config` to improve TextLayer rendering.");}if(style.ascent){ratio=style.ascent;}else if(style.descent){ratio=1+style.descent;}}_assertClassBrand(_TextLayer2,this,_ascentCache)._.set(fontFamily,ratio);return ratio;}var _ascentCache={_:new Map()};var _canvasContexts={_:new Map()};var _canvasCtxFonts={_:new WeakMap()};var _minFontSize={_:null};var _pendingTextLayers={_:new Set()};;// ./src/display/xfa_text.js\nvar XfaText=/*#__PURE__*/function(){function XfaText(){_classCallCheck(this,XfaText);}return _createClass(XfaText,null,[{key:"textContent",value:function textContent(xfa){var items=[];var output={items:items,styles:Object.create(null)};function walk(node){var _node$attributes;if(!node){return;}var str=null;var name=node.name;if(name==="#text"){str=node.value;}else if(!XfaText.shouldBuildText(name)){return;}else if(node!==null&&node!==void 0&&(_node$attributes=node.attributes)!==null&&_node$attributes!==void 0&&_node$attributes.textContent){str=node.attributes.textContent;}else if(node.value){str=node.value;}if(str!==null){items.push({str:str});}if(!node.children){return;}var _iterator95=_createForOfIteratorHelper(node.children),_step95;try{for(_iterator95.s();!(_step95=_iterator95.n()).done;){var child=_step95.value;walk(child);}}catch(err){_iterator95.e(err);}finally{_iterator95.f();}}walk(xfa);return output;}},{key:"shouldBuildText",value:function shouldBuildText(name){return!(name==="textarea"||name==="input"||name==="option"||name==="select");}}]);}();;// ./src/display/api.js\nvar DEFAULT_RANGE_CHUNK_SIZE=65536;var RENDERING_CANCELLED_TIMEOUT=100;function _getDocument(){var _src$password,_src$length,_src2;var src=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(typeof src==="string"||src instanceof URL){src={url:src};}else if(src instanceof ArrayBuffer||ArrayBuffer.isView(src)){src={data:src};}var task=new PDFDocumentLoadingTask();var docId=task.docId;var url=src.url?getUrlProp(src.url):null;var data=src.data?getDataProp(src.data):null;var httpHeaders=src.httpHeaders||null;var withCredentials=src.withCredentials===true;var password=(_src$password=src.password)!==null&&_src$password!==void 0?_src$password:null;var rangeTransport=src.range instanceof _PDFDataRangeTransport?src.range:null;var rangeChunkSize=Number.isInteger(src.rangeChunkSize)&&src.rangeChunkSize>0?src.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;var worker=src.worker instanceof _PDFWorker?src.worker:null;var verbosity=src.verbosity;var docBaseUrl=typeof src.docBaseUrl==="string"&&!_isDataScheme(src.docBaseUrl)?src.docBaseUrl:null;var cMapUrl=getFactoryUrlProp(src.cMapUrl);var cMapPacked=src.cMapPacked!==false;var CMapReaderFactory=src.CMapReaderFactory||(isNodeJS?NodeCMapReaderFactory:DOMCMapReaderFactory);var standardFontDataUrl=getFactoryUrlProp(src.standardFontDataUrl);var StandardFontDataFactory=src.StandardFontDataFactory||(isNodeJS?NodeStandardFontDataFactory:DOMStandardFontDataFactory);var wasmUrl=getFactoryUrlProp(src.wasmUrl);var WasmFactory=src.WasmFactory||(isNodeJS?NodeWasmFactory:DOMWasmFactory);var ignoreErrors=src.stopAtErrors!==true;var maxImageSize=Number.isInteger(src.maxImageSize)&&src.maxImageSize>-1?src.maxImageSize:-1;var isEvalSupported=src.isEvalSupported!==false;var isOffscreenCanvasSupported=typeof src.isOffscreenCanvasSupported==="boolean"?src.isOffscreenCanvasSupported:!isNodeJS;var isImageDecoderSupported=typeof src.isImageDecoderSupported==="boolean"?src.isImageDecoderSupported:!isNodeJS&&(util_FeatureTest.platform.isFirefox||!globalThis.chrome);var canvasMaxAreaInBytes=Number.isInteger(src.canvasMaxAreaInBytes)?src.canvasMaxAreaInBytes:-1;var disableFontFace=typeof src.disableFontFace==="boolean"?src.disableFontFace:isNodeJS;var fontExtraProperties=src.fontExtraProperties===true;var enableXfa=src.enableXfa===true;var ownerDocument=src.ownerDocument||globalThis.document;var disableRange=src.disableRange===true;var disableStream=src.disableStream===true;var disableAutoFetch=src.disableAutoFetch===true;var pdfBug=src.pdfBug===true;var CanvasFactory=src.CanvasFactory||(isNodeJS?NodeCanvasFactory:DOMCanvasFactory);var FilterFactory=src.FilterFactory||(isNodeJS?NodeFilterFactory:DOMFilterFactory);var enableHWA=src.enableHWA===true;var useWasm=src.useWasm!==false;var length=rangeTransport?rangeTransport.length:(_src$length=src.length)!==null&&_src$length!==void 0?_src$length:NaN;var useSystemFonts=typeof src.useSystemFonts==="boolean"?src.useSystemFonts:!isNodeJS&&!disableFontFace;var useWorkerFetch=typeof src.useWorkerFetch==="boolean"?src.useWorkerFetch:!!(CMapReaderFactory===DOMCMapReaderFactory&&StandardFontDataFactory===DOMStandardFontDataFactory&&WasmFactory===DOMWasmFactory&&cMapUrl&&standardFontDataUrl&&wasmUrl&&isValidFetchUrl(cMapUrl,document.baseURI)&&isValidFetchUrl(standardFontDataUrl,document.baseURI)&&isValidFetchUrl(wasmUrl,document.baseURI));var styleElement=null;setVerbosityLevel(verbosity);var transportFactory={canvasFactory:new CanvasFactory({ownerDocument:ownerDocument,enableHWA:enableHWA}),filterFactory:new FilterFactory({docId:docId,ownerDocument:ownerDocument}),cMapReaderFactory:useWorkerFetch?null:new CMapReaderFactory({baseUrl:cMapUrl,isCompressed:cMapPacked}),standardFontDataFactory:useWorkerFetch?null:new StandardFontDataFactory({baseUrl:standardFontDataUrl}),wasmFactory:useWorkerFetch?null:new WasmFactory({baseUrl:wasmUrl})};if(!worker){var workerParams={verbosity:verbosity,port:_GlobalWorkerOptions.workerPort};worker=workerParams.port?_PDFWorker.fromPort(workerParams):new _PDFWorker(workerParams);task._worker=worker;}var options=_objectSpread({},(_src2=src)===null||_src2===void 0?void 0:_src2.options);var docParams={docId:docId,apiVersion:"5.0.0",data:data,password:password,disableAutoFetch:disableAutoFetch,rangeChunkSize:rangeChunkSize,length:length,docBaseUrl:docBaseUrl,enableXfa:enableXfa,evaluatorOptions:{maxImageSize:maxImageSize,disableFontFace:disableFontFace,ignoreErrors:ignoreErrors,isEvalSupported:isEvalSupported,isOffscreenCanvasSupported:isOffscreenCanvasSupported,isImageDecoderSupported:isImageDecoderSupported,canvasMaxAreaInBytes:canvasMaxAreaInBytes,fontExtraProperties:fontExtraProperties,useSystemFonts:useSystemFonts,useWasm:useWasm,useWorkerFetch:useWorkerFetch,cMapUrl:cMapUrl,standardFontDataUrl:standardFontDataUrl,wasmUrl:wasmUrl},options:options};var transportParams={ownerDocument:ownerDocument,pdfBug:pdfBug,styleElement:styleElement,loadingParams:{disableAutoFetch:disableAutoFetch,enableXfa:enableXfa},options:options};worker.promise.then(function(){if(task.destroyed){throw new Error("Loading aborted");}if(worker.destroyed){throw new Error("Worker was destroyed");}var workerIdPromise=worker.messageHandler.sendWithPromise("GetDocRequest",docParams,data?[data.buffer]:null);var networkStream;if(rangeTransport){networkStream=new PDFDataTransportStream(rangeTransport,{disableRange:disableRange,disableStream:disableStream});}else if(!data){if(!url){throw new Error("getDocument - no `url` parameter provided.");}var NetworkStream;if(isNodeJS){if(isValidFetchUrl(url)){if(typeof fetch==="undefined"||typeof Response==="undefined"||!("body"in Response.prototype)){throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");}NetworkStream=PDFFetchStream;}else{NetworkStream=PDFNodeStream;}}else{NetworkStream=isValidFetchUrl(url)?PDFFetchStream:PDFNetworkStream;}networkStream=new NetworkStream({url:url,length:length,httpHeaders:httpHeaders,withCredentials:withCredentials,rangeChunkSize:rangeChunkSize,disableRange:disableRange,disableStream:disableStream,options:transportParams.options});}return workerIdPromise.then(function(workerId){if(task.destroyed){throw new Error("Loading aborted");}if(worker.destroyed){throw new Error("Worker was destroyed");}var messageHandler=new MessageHandler(docId,workerId,worker.port);var transport=new WorkerTransport(messageHandler,task,networkStream,transportParams,transportFactory);task._transport=transport;messageHandler.send("Ready",null);});})["catch"](task._capability.reject);return task;}function getUrlProp(val){if(val instanceof URL){return val.href;}if(typeof val==="string"){if(isNodeJS){return val;}var url=URL.parse(val,window.location);if(url){return url.href;}}throw new Error("Invalid PDF url data: "+"either string or URL-object is expected in the url property.");}function getDataProp(val){if(isNodeJS&&typeof Buffer!=="undefined"&&val instanceof Buffer){throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");}if(val instanceof Uint8Array&&val.byteLength===val.buffer.byteLength){return val;}if(typeof val==="string"){return stringToBytes(val);}if(val instanceof ArrayBuffer||ArrayBuffer.isView(val)||_typeof(val)==="object"&&!isNaN(val===null||val===void 0?void 0:val.length)){return new Uint8Array(val);}throw new Error("Invalid PDF binary data: either TypedArray, "+"string, or array-like object is expected in the data property.");}function getFactoryUrlProp(val){if(typeof val!=="string"){return null;}if(val.endsWith("/")){return val;}throw new Error("Invalid factory url: \\"".concat(val,"\\" must include trailing slash."));}function isRefProxy(ref){return _typeof(ref)==="object"&&Number.isInteger(ref===null||ref===void 0?void 0:ref.num)&&ref.num>=0&&Number.isInteger(ref===null||ref===void 0?void 0:ref.gen)&&ref.gen>=0;}var PDFDocumentLoadingTask=/*#__PURE__*/function(){function PDFDocumentLoadingTask(){var _PDFDocumentLoadingTa,_PDFDocumentLoadingTa2;_classCallCheck(this,PDFDocumentLoadingTask);this._capability=Promise.withResolvers();this._transport=null;this._worker=null;this.docId="d".concat((_docId2._=(_PDFDocumentLoadingTa=_docId2._,_PDFDocumentLoadingTa2=_PDFDocumentLoadingTa++,_PDFDocumentLoadingTa),_PDFDocumentLoadingTa2));this.destroyed=false;this.onPassword=null;this.onProgress=null;}return _createClass(PDFDocumentLoadingTask,[{key:"promise",get:function get(){return this._capability.promise;}},{key:"destroy",value:function(){var _destroy=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee37(){var _this$_worker3;var _this$_worker,_this$_transport,_this$_worker2;return _regeneratorRuntime().wrap(function _callee37$(_context37){while(1)switch(_context37.prev=_context37.next){case 0:this.destroyed=true;_context37.prev=1;if((_this$_worker=this._worker)!==null&&_this$_worker!==void 0&&_this$_worker.port){this._worker._pendingDestroy=true;}_context37.next=5;return(_this$_transport=this._transport)===null||_this$_transport===void 0?void 0:_this$_transport.destroy();case 5:_context37.next=11;break;case 7:_context37.prev=7;_context37.t0=_context37["catch"](1);if((_this$_worker2=this._worker)!==null&&_this$_worker2!==void 0&&_this$_worker2.port){delete this._worker._pendingDestroy;}throw _context37.t0;case 11:this._transport=null;(_this$_worker3=this._worker)===null||_this$_worker3===void 0||_this$_worker3.destroy();this._worker=null;case 14:case"end":return _context37.stop();}},_callee37,this,[[1,7]]);}));function destroy(){return _destroy.apply(this,arguments);}return destroy;}()}]);}();var _docId2={_:0};var _PDFDataRangeTransport=/*#__PURE__*/function(){function _PDFDataRangeTransport(length,initialData){var progressiveDone=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var contentDispositionFilename=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;_classCallCheck(this,_PDFDataRangeTransport);this.length=length;this.initialData=initialData;this.progressiveDone=progressiveDone;this.contentDispositionFilename=contentDispositionFilename;this._rangeListeners=[];this._progressListeners=[];this._progressiveReadListeners=[];this._progressiveDoneListeners=[];this._readyCapability=Promise.withResolvers();}return _createClass(_PDFDataRangeTransport,[{key:"addRangeListener",value:function addRangeListener(listener){this._rangeListeners.push(listener);}},{key:"addProgressListener",value:function addProgressListener(listener){this._progressListeners.push(listener);}},{key:"addProgressiveReadListener",value:function addProgressiveReadListener(listener){this._progressiveReadListeners.push(listener);}},{key:"addProgressiveDoneListener",value:function addProgressiveDoneListener(listener){this._progressiveDoneListeners.push(listener);}},{key:"onDataRange",value:function onDataRange(begin,chunk){var _iterator96=_createForOfIteratorHelper(this._rangeListeners),_step96;try{for(_iterator96.s();!(_step96=_iterator96.n()).done;){var listener=_step96.value;listener(begin,chunk);}}catch(err){_iterator96.e(err);}finally{_iterator96.f();}}},{key:"onDataProgress",value:function onDataProgress(loaded,total){var _this41=this;this._readyCapability.promise.then(function(){var _iterator97=_createForOfIteratorHelper(_this41._progressListeners),_step97;try{for(_iterator97.s();!(_step97=_iterator97.n()).done;){var listener=_step97.value;listener(loaded,total);}}catch(err){_iterator97.e(err);}finally{_iterator97.f();}});}},{key:"onDataProgressiveRead",value:function onDataProgressiveRead(chunk){var _this42=this;this._readyCapability.promise.then(function(){var _iterator98=_createForOfIteratorHelper(_this42._progressiveReadListeners),_step98;try{for(_iterator98.s();!(_step98=_iterator98.n()).done;){var listener=_step98.value;listener(chunk);}}catch(err){_iterator98.e(err);}finally{_iterator98.f();}});}},{key:"onDataProgressiveDone",value:function onDataProgressiveDone(){var _this43=this;this._readyCapability.promise.then(function(){var _iterator99=_createForOfIteratorHelper(_this43._progressiveDoneListeners),_step99;try{for(_iterator99.s();!(_step99=_iterator99.n()).done;){var listener=_step99.value;listener();}}catch(err){_iterator99.e(err);}finally{_iterator99.f();}});}},{key:"transportReady",value:function transportReady(){this._readyCapability.resolve();}},{key:"requestDataRange",value:function requestDataRange(begin,end){unreachable("Abstract method PDFDataRangeTransport.requestDataRange");}},{key:"abort",value:function abort(){}}]);}();var PDFDocumentProxy=/*#__PURE__*/function(){function PDFDocumentProxy(pdfInfo,transport){_classCallCheck(this,PDFDocumentProxy);this._pdfInfo=pdfInfo;this._transport=transport;}return _createClass(PDFDocumentProxy,[{key:"annotationStorage",get:function get(){return this._transport.annotationStorage;}},{key:"canvasFactory",get:function get(){return this._transport.canvasFactory;}},{key:"filterFactory",get:function get(){return this._transport.filterFactory;}},{key:"numPages",get:function get(){return this._pdfInfo.numPages;}},{key:"fingerprints",get:function get(){return this._pdfInfo.fingerprints;}},{key:"isPureXfa",get:function get(){return _shadow(this,"isPureXfa",!!this._transport._htmlForXfa);}},{key:"allXfaHtml",get:function get(){return this._transport._htmlForXfa;}},{key:"getPage",value:function getPage(pageNumber){return this._transport.getPage(pageNumber);}},{key:"getPageIndex",value:function getPageIndex(ref){return this._transport.getPageIndex(ref);}},{key:"getDestinations",value:function getDestinations(){return this._transport.getDestinations();}},{key:"getDestination",value:function getDestination(id){return this._transport.getDestination(id);}},{key:"getPageLabels",value:function getPageLabels(){return this._transport.getPageLabels();}},{key:"getPageLayout",value:function getPageLayout(){return this._transport.getPageLayout();}},{key:"getPageMode",value:function getPageMode(){return this._transport.getPageMode();}},{key:"getViewerPreferences",value:function getViewerPreferences(){return this._transport.getViewerPreferences();}},{key:"getOpenAction",value:function getOpenAction(){return this._transport.getOpenAction();}},{key:"getAttachments",value:function getAttachments(){return this._transport.getAttachments();}},{key:"getJSActions",value:function getJSActions(){return this._transport.getDocJSActions();}},{key:"getOutline",value:function getOutline(){return this._transport.getOutline();}},{key:"getOptionalContentConfig",value:function getOptionalContentConfig(){var _ref46=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref46$intent=_ref46.intent,intent=_ref46$intent===void 0?"display":_ref46$intent;var _this$_transport$getR=this._transport.getRenderingIntent(intent),renderingIntent=_this$_transport$getR.renderingIntent;return this._transport.getOptionalContentConfig(renderingIntent);}},{key:"getPermissions",value:function getPermissions(){return this._transport.getPermissions();}},{key:"getMetadata",value:function getMetadata(){return this._transport.getMetadata();}},{key:"getMarkInfo",value:function getMarkInfo(){return this._transport.getMarkInfo();}},{key:"getData",value:function getData(){return this._transport.getData();}},{key:"saveDocument",value:function saveDocument(){return this._transport.saveDocument();}},{key:"getDownloadInfo",value:function getDownloadInfo(){return this._transport.downloadInfoCapability.promise;}},{key:"cleanup",value:function cleanup(){var keepLoadedFonts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;return this._transport.startCleanup(keepLoadedFonts||this.isPureXfa);}},{key:"destroy",value:function destroy(){return this.loadingTask.destroy();}},{key:"cachedPageNumber",value:function cachedPageNumber(ref){return this._transport.cachedPageNumber(ref);}},{key:"loadingParams",get:function get(){return this._transport.loadingParams;}},{key:"loadingTask",get:function get(){return this._transport.loadingTask;}},{key:"getFieldObjects",value:function getFieldObjects(){return this._transport.getFieldObjects();}},{key:"hasJSActions",value:function hasJSActions(){return this._transport.hasJSActions();}},{key:"getCalculationOrderIds",value:function getCalculationOrderIds(){return this._transport.getCalculationOrderIds();}}]);}();var _pendingCleanup=/*#__PURE__*/new WeakMap();var _PDFPageProxy_brand=/*#__PURE__*/new WeakSet();var PDFPageProxy=/*#__PURE__*/function(){function PDFPageProxy(pageIndex,pageInfo,transport){var pdfBug=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;_classCallCheck(this,PDFPageProxy);_classPrivateMethodInitSpec(this,_PDFPageProxy_brand);_classPrivateFieldInitSpec(this,_pendingCleanup,false);this._pageIndex=pageIndex;this._pageInfo=pageInfo;this._transport=transport;this._stats=pdfBug?new StatTimer():null;this._pdfBug=pdfBug;this.commonObjs=transport.commonObjs;this.objs=new PDFObjects();this._intentStates=new Map();this.destroyed=false;}return _createClass(PDFPageProxy,[{key:"pageNumber",get:function get(){return this._pageIndex+1;}},{key:"rotate",get:function get(){return this._pageInfo.rotate;}},{key:"ref",get:function get(){return this._pageInfo.ref;}},{key:"userUnit",get:function get(){return this._pageInfo.userUnit;}},{key:"view",get:function get(){return this._pageInfo.view;}},{key:"getViewport",value:function getViewport(){var _ref47=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},scale=_ref47.scale,_ref47$rotation=_ref47.rotation,rotation=_ref47$rotation===void 0?this.rotate:_ref47$rotation,_ref47$offsetX=_ref47.offsetX,offsetX=_ref47$offsetX===void 0?0:_ref47$offsetX,_ref47$offsetY=_ref47.offsetY,offsetY=_ref47$offsetY===void 0?0:_ref47$offsetY,_ref47$dontFlip=_ref47.dontFlip,dontFlip=_ref47$dontFlip===void 0?false:_ref47$dontFlip;return new PageViewport({viewBox:this.view,userUnit:this.userUnit,scale:scale,rotation:rotation,offsetX:offsetX,offsetY:offsetY,dontFlip:dontFlip});}},{key:"getAnnotations",value:function getAnnotations(){var _ref48=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref48$intent=_ref48.intent,intent=_ref48$intent===void 0?"display":_ref48$intent;var _this$_transport$getR2=this._transport.getRenderingIntent(intent),renderingIntent=_this$_transport$getR2.renderingIntent;return this._transport.getAnnotations(this._pageIndex,renderingIntent);}},{key:"getJSActions",value:function getJSActions(){return this._transport.getPageJSActions(this._pageIndex);}},{key:"filterFactory",get:function get(){return this._transport.filterFactory;}},{key:"isPureXfa",get:function get(){return _shadow(this,"isPureXfa",!!this._transport._htmlForXfa);}},{key:"getXfa",value:function(){var _getXfa=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee38(){var _this$_transport$_htm;return _regeneratorRuntime().wrap(function _callee38$(_context38){while(1)switch(_context38.prev=_context38.next){case 0:return _context38.abrupt("return",((_this$_transport$_htm=this._transport._htmlForXfa)===null||_this$_transport$_htm===void 0?void 0:_this$_transport$_htm.children[this._pageIndex])||null);case 1:case"end":return _context38.stop();}},_callee38,this);}));function getXfa(){return _getXfa.apply(this,arguments);}return getXfa;}()},{key:"render",value:function render(_ref49){var _this$_stats,_this44=this,_intentState;var canvasContext=_ref49.canvasContext,viewport=_ref49.viewport,_ref49$intent=_ref49.intent,intent=_ref49$intent===void 0?"display":_ref49$intent,_ref49$annotationMode=_ref49.annotationMode,annotationMode=_ref49$annotationMode===void 0?_AnnotationMode.ENABLE:_ref49$annotationMode,_ref49$transform=_ref49.transform,transform=_ref49$transform===void 0?null:_ref49$transform,_ref49$background=_ref49.background,background=_ref49$background===void 0?null:_ref49$background,_ref49$optionalConten=_ref49.optionalContentConfigPromise,optionalContentConfigPromise=_ref49$optionalConten===void 0?null:_ref49$optionalConten,_ref49$annotationCanv=_ref49.annotationCanvasMap,annotationCanvasMap=_ref49$annotationCanv===void 0?null:_ref49$annotationCanv,_ref49$pageColors=_ref49.pageColors,pageColors=_ref49$pageColors===void 0?null:_ref49$pageColors,_ref49$printAnnotatio=_ref49.printAnnotationStorage,printAnnotationStorage=_ref49$printAnnotatio===void 0?null:_ref49$printAnnotatio,_ref49$isEditing=_ref49.isEditing,isEditing=_ref49$isEditing===void 0?false:_ref49$isEditing;(_this$_stats=this._stats)===null||_this$_stats===void 0||_this$_stats.time("Overall");var intentArgs=this._transport.getRenderingIntent(intent,annotationMode,printAnnotationStorage,isEditing);var renderingIntent=intentArgs.renderingIntent,cacheKey=intentArgs.cacheKey;_classPrivateFieldSet(_pendingCleanup,this,false);optionalContentConfigPromise||(optionalContentConfigPromise=this._transport.getOptionalContentConfig(renderingIntent));var intentState=this._intentStates.get(cacheKey);if(!intentState){intentState=Object.create(null);this._intentStates.set(cacheKey,intentState);}if(intentState.streamReaderCancelTimeout){clearTimeout(intentState.streamReaderCancelTimeout);intentState.streamReaderCancelTimeout=null;}var intentPrint=!!(renderingIntent&RenderingIntentFlag.PRINT);if(!intentState.displayReadyCapability){var _this$_stats2;intentState.displayReadyCapability=Promise.withResolvers();intentState.operatorList={fnArray:[],argsArray:[],lastChunk:false,separateAnnots:null};(_this$_stats2=this._stats)===null||_this$_stats2===void 0||_this$_stats2.time("Page Request");this._pumpOperatorList(intentArgs);}var complete=function complete(error){intentState.renderTasks["delete"](internalRenderTask);if(intentPrint){_classPrivateFieldSet(_pendingCleanup,_this44,true);}_assertClassBrand(_PDFPageProxy_brand,_this44,_tryCleanup).call(_this44);if(error){internalRenderTask.capability.reject(error);_this44._abortOperatorList({intentState:intentState,reason:error instanceof Error?error:new Error(error)});}else{internalRenderTask.capability.resolve();}if(_this44._stats){var _globalThis$Stats;_this44._stats.timeEnd("Rendering");_this44._stats.timeEnd("Overall");if((_globalThis$Stats=globalThis.Stats)!==null&&_globalThis$Stats!==void 0&&_globalThis$Stats.enabled){globalThis.Stats.add(_this44.pageNumber,_this44._stats);}}};var internalRenderTask=new InternalRenderTask({callback:complete,params:{canvasContext:canvasContext,viewport:viewport,transform:transform,background:background},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:annotationCanvasMap,operatorList:intentState.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!intentPrint,pdfBug:this._pdfBug,pageColors:pageColors});((_intentState=intentState).renderTasks||(_intentState.renderTasks=new Set())).add(internalRenderTask);var renderTask=internalRenderTask.task;Promise.all([intentState.displayReadyCapability.promise,optionalContentConfigPromise]).then(function(_ref50){var _this44$_stats;var _ref51=_slicedToArray(_ref50,2),transparency=_ref51[0],optionalContentConfig=_ref51[1];if(_this44.destroyed){complete();return;}(_this44$_stats=_this44._stats)===null||_this44$_stats===void 0||_this44$_stats.time("Rendering");if(!(optionalContentConfig.renderingIntent&renderingIntent)){throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` "+"and `PDFDocumentProxy.getOptionalContentConfig` methods.");}internalRenderTask.initializeGraphics({transparency:transparency,optionalContentConfig:optionalContentConfig});internalRenderTask.operatorListChanged();})["catch"](complete);return renderTask;}},{key:"getOperatorList",value:function getOperatorList(){var _ref52=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref52$intent=_ref52.intent,intent=_ref52$intent===void 0?"display":_ref52$intent,_ref52$annotationMode=_ref52.annotationMode,annotationMode=_ref52$annotationMode===void 0?_AnnotationMode.ENABLE:_ref52$annotationMode,_ref52$printAnnotatio=_ref52.printAnnotationStorage,printAnnotationStorage=_ref52$printAnnotatio===void 0?null:_ref52$printAnnotatio,_ref52$isEditing=_ref52.isEditing,isEditing=_ref52$isEditing===void 0?false:_ref52$isEditing;function operatorListChanged(){if(intentState.operatorList.lastChunk){intentState.opListReadCapability.resolve(intentState.operatorList);intentState.renderTasks["delete"](opListTask);}}var intentArgs=this._transport.getRenderingIntent(intent,annotationMode,printAnnotationStorage,isEditing,true);var intentState=this._intentStates.get(intentArgs.cacheKey);if(!intentState){intentState=Object.create(null);this._intentStates.set(intentArgs.cacheKey,intentState);}var opListTask;if(!intentState.opListReadCapability){var _intentState2,_this$_stats3;opListTask=Object.create(null);opListTask.operatorListChanged=operatorListChanged;intentState.opListReadCapability=Promise.withResolvers();((_intentState2=intentState).renderTasks||(_intentState2.renderTasks=new Set())).add(opListTask);intentState.operatorList={fnArray:[],argsArray:[],lastChunk:false,separateAnnots:null};(_this$_stats3=this._stats)===null||_this$_stats3===void 0||_this$_stats3.time("Page Request");this._pumpOperatorList(intentArgs);}return intentState.opListReadCapability.promise;}},{key:"streamTextContent",value:function streamTextContent(){var _ref53=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref53$includeMarkedC=_ref53.includeMarkedContent,includeMarkedContent=_ref53$includeMarkedC===void 0?false:_ref53$includeMarkedC,_ref53$disableNormali=_ref53.disableNormalization,disableNormalization=_ref53$disableNormali===void 0?false:_ref53$disableNormali;var TEXT_CONTENT_CHUNK_SIZE=100;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:includeMarkedContent===true,disableNormalization:disableNormalization===true},{highWaterMark:TEXT_CONTENT_CHUNK_SIZE,size:function size(textContent){return textContent.items.length;}});}},{key:"getTextContent",value:function getTextContent(){var params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(this._transport._htmlForXfa){return this.getXfa().then(function(xfa){return XfaText.textContent(xfa);});}var readableStream=this.streamTextContent(params);return new Promise(function(resolve,reject){function pump(){reader.read().then(function(_ref54){var _textContent$lang,_textContent$items;var value=_ref54.value,done=_ref54.done;if(done){resolve(textContent);return;}(_textContent$lang=textContent.lang)!==null&&_textContent$lang!==void 0?_textContent$lang:textContent.lang=value.lang;Object.assign(textContent.styles,value.styles);(_textContent$items=textContent.items).push.apply(_textContent$items,_toConsumableArray(value.items));pump();},reject);}var reader=readableStream.getReader();var textContent={items:[],styles:Object.create(null),lang:null};pump();});}},{key:"getStructTree",value:function getStructTree(){return this._transport.getStructTree(this._pageIndex);}},{key:"_destroy",value:function _destroy(){this.destroyed=true;var waitOn=[];var _iterator100=_createForOfIteratorHelper(this._intentStates.values()),_step100;try{for(_iterator100.s();!(_step100=_iterator100.n()).done;){var intentState=_step100.value;this._abortOperatorList({intentState:intentState,reason:new Error("Page was destroyed."),force:true});if(intentState.opListReadCapability){continue;}var _iterator101=_createForOfIteratorHelper(intentState.renderTasks),_step101;try{for(_iterator101.s();!(_step101=_iterator101.n()).done;){var internalRenderTask=_step101.value;waitOn.push(internalRenderTask.completed);internalRenderTask.cancel();}}catch(err){_iterator101.e(err);}finally{_iterator101.f();}}}catch(err){_iterator100.e(err);}finally{_iterator100.f();}this.objs.clear();_classPrivateFieldSet(_pendingCleanup,this,false);return Promise.all(waitOn);}},{key:"cleanup",value:function cleanup(){var resetStats=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;_classPrivateFieldSet(_pendingCleanup,this,true);var success=_assertClassBrand(_PDFPageProxy_brand,this,_tryCleanup).call(this);if(resetStats&&success){this._stats&&(this._stats=new StatTimer());}return success;}},{key:"_startRenderPage",value:function _startRenderPage(transparency,cacheKey){var _this$_stats4,_intentState$displayR;var intentState=this._intentStates.get(cacheKey);if(!intentState){return;}(_this$_stats4=this._stats)===null||_this$_stats4===void 0||_this$_stats4.timeEnd("Page Request");(_intentState$displayR=intentState.displayReadyCapability)===null||_intentState$displayR===void 0||_intentState$displayR.resolve(transparency);}},{key:"_renderPageChunk",value:function _renderPageChunk(operatorListChunk,intentState){for(var i=0,ii=operatorListChunk.length;i<ii;i++){intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]);intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i]);}intentState.operatorList.lastChunk=operatorListChunk.lastChunk;intentState.operatorList.separateAnnots=operatorListChunk.separateAnnots;var _iterator102=_createForOfIteratorHelper(intentState.renderTasks),_step102;try{for(_iterator102.s();!(_step102=_iterator102.n()).done;){var internalRenderTask=_step102.value;internalRenderTask.operatorListChanged();}}catch(err){_iterator102.e(err);}finally{_iterator102.f();}if(operatorListChunk.lastChunk){_assertClassBrand(_PDFPageProxy_brand,this,_tryCleanup).call(this);}}},{key:"_pumpOperatorList",value:function _pumpOperatorList(_ref55){var _this45=this;var renderingIntent=_ref55.renderingIntent,cacheKey=_ref55.cacheKey,annotationStorageSerializable=_ref55.annotationStorageSerializable,modifiedIds=_ref55.modifiedIds;var map=annotationStorageSerializable.map,transfer=annotationStorageSerializable.transfer;var readableStream=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:renderingIntent,cacheKey:cacheKey,annotationStorage:map,modifiedIds:modifiedIds},transfer);var reader=readableStream.getReader();var intentState=this._intentStates.get(cacheKey);intentState.streamReader=reader;var _pump2=function pump(){reader.read().then(function(_ref56){var value=_ref56.value,done=_ref56.done;if(done){intentState.streamReader=null;return;}if(_this45._transport.destroyed){return;}_this45._renderPageChunk(value,intentState);_pump2();},function(reason){intentState.streamReader=null;if(_this45._transport.destroyed){return;}if(intentState.operatorList){intentState.operatorList.lastChunk=true;var _iterator103=_createForOfIteratorHelper(intentState.renderTasks),_step103;try{for(_iterator103.s();!(_step103=_iterator103.n()).done;){var internalRenderTask=_step103.value;internalRenderTask.operatorListChanged();}}catch(err){_iterator103.e(err);}finally{_iterator103.f();}_assertClassBrand(_PDFPageProxy_brand,_this45,_tryCleanup).call(_this45);}if(intentState.displayReadyCapability){intentState.displayReadyCapability.reject(reason);}else if(intentState.opListReadCapability){intentState.opListReadCapability.reject(reason);}else{throw reason;}});};_pump2();}},{key:"_abortOperatorList",value:function _abortOperatorList(_ref57){var _this46=this;var intentState=_ref57.intentState,reason=_ref57.reason,_ref57$force=_ref57.force,force=_ref57$force===void 0?false:_ref57$force;if(!intentState.streamReader){return;}if(intentState.streamReaderCancelTimeout){clearTimeout(intentState.streamReaderCancelTimeout);intentState.streamReaderCancelTimeout=null;}if(!force){if(intentState.renderTasks.size>0){return;}if(reason instanceof _RenderingCancelledException){var delay=RENDERING_CANCELLED_TIMEOUT;if(reason.extraDelay>0&&reason.extraDelay<1000){delay+=reason.extraDelay;}intentState.streamReaderCancelTimeout=setTimeout(function(){intentState.streamReaderCancelTimeout=null;_this46._abortOperatorList({intentState:intentState,reason:reason,force:true});},delay);return;}}intentState.streamReader.cancel(new _AbortException(reason.message))["catch"](function(){});intentState.streamReader=null;if(this._transport.destroyed){return;}var _iterator104=_createForOfIteratorHelper(this._intentStates),_step104;try{for(_iterator104.s();!(_step104=_iterator104.n()).done;){var _step104$value=_slicedToArray(_step104.value,2),curCacheKey=_step104$value[0],curIntentState=_step104$value[1];if(curIntentState===intentState){this._intentStates["delete"](curCacheKey);break;}}}catch(err){_iterator104.e(err);}finally{_iterator104.f();}this.cleanup();}},{key:"stats",get:function get(){return this._stats;}}]);}();function _tryCleanup(){if(!_classPrivateFieldGet(_pendingCleanup,this)||this.destroyed){return false;}var _iterator181=_createForOfIteratorHelper(this._intentStates.values()),_step181;try{for(_iterator181.s();!(_step181=_iterator181.n()).done;){var _step181$value=_step181.value,renderTasks=_step181$value.renderTasks,operatorList=_step181$value.operatorList;if(renderTasks.size>0||!operatorList.lastChunk){return false;}}}catch(err){_iterator181.e(err);}finally{_iterator181.f();}this._intentStates.clear();this.objs.clear();_classPrivateFieldSet(_pendingCleanup,this,false);return true;}var _listeners=/*#__PURE__*/new WeakMap();var _deferred=/*#__PURE__*/new WeakMap();var LoopbackPort=/*#__PURE__*/function(){function LoopbackPort(){_classCallCheck(this,LoopbackPort);_classPrivateFieldInitSpec(this,_listeners,new Map());_classPrivateFieldInitSpec(this,_deferred,Promise.resolve());}return _createClass(LoopbackPort,[{key:"postMessage",value:function postMessage(obj,transfer){var _this47=this;var event={data:structuredClone(obj,transfer?{transfer:transfer}:null)};_classPrivateFieldGet(_deferred,this).then(function(){var _iterator105=_createForOfIteratorHelper(_classPrivateFieldGet(_listeners,_this47)),_step105;try{for(_iterator105.s();!(_step105=_iterator105.n()).done;){var _step105$value=_slicedToArray(_step105.value,1),listener=_step105$value[0];listener.call(_this47,event);}}catch(err){_iterator105.e(err);}finally{_iterator105.f();}});}},{key:"addEventListener",value:function addEventListener(name,listener){var _this48=this;var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var rmAbort=null;if((options===null||options===void 0?void 0:options.signal)instanceof AbortSignal){var signal=options.signal;if(signal.aborted){warn("LoopbackPort - cannot use an `aborted` signal.");return;}var onAbort=function onAbort(){return _this48.removeEventListener(name,listener);};rmAbort=function rmAbort(){return signal.removeEventListener("abort",onAbort);};signal.addEventListener("abort",onAbort);}_classPrivateFieldGet(_listeners,this).set(listener,rmAbort);}},{key:"removeEventListener",value:function removeEventListener(name,listener){var rmAbort=_classPrivateFieldGet(_listeners,this).get(listener);rmAbort===null||rmAbort===void 0||rmAbort();_classPrivateFieldGet(_listeners,this)["delete"](listener);}},{key:"terminate",value:function terminate(){var _iterator106=_createForOfIteratorHelper(_classPrivateFieldGet(_listeners,this)),_step106;try{for(_iterator106.s();!(_step106=_iterator106.n()).done;){var _step106$value=_slicedToArray(_step106.value,2),rmAbort=_step106$value[1];rmAbort===null||rmAbort===void 0||rmAbort();}}catch(err){_iterator106.e(err);}finally{_iterator106.f();}_classPrivateFieldGet(_listeners,this).clear();}}]);}();var _PDFWorker_brand=/*#__PURE__*/new WeakSet();var _PDFWorker=/*#__PURE__*/function(){function _PDFWorker(){var _ref58=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref58$name=_ref58.name,name=_ref58$name===void 0?null:_ref58$name,_ref58$port=_ref58.port,port=_ref58$port===void 0?null:_ref58$port,_ref58$verbosity=_ref58.verbosity,verbosity=_ref58$verbosity===void 0?getVerbosityLevel():_ref58$verbosity;_classCallCheck(this,_PDFWorker);_classPrivateMethodInitSpec(this,_PDFWorker_brand);this.name=name;this.destroyed=false;this.verbosity=verbosity;this._readyCapability=Promise.withResolvers();this._port=null;this._webWorker=null;this._messageHandler=null;if(port){var _workerPorts$_;if((_workerPorts$_=_workerPorts._)!==null&&_workerPorts$_!==void 0&&_workerPorts$_.has(port)){throw new Error("Cannot use more than one PDFWorker per port.");}(_workerPorts._||(_workerPorts._=new WeakMap())).set(port,this);this._initializeFromPort(port);return;}this._initialize();}return _createClass(_PDFWorker,[{key:"promise",get:function get(){return this._readyCapability.promise;}},{key:"port",get:function get(){return this._port;}},{key:"messageHandler",get:function get(){return this._messageHandler;}},{key:"_initializeFromPort",value:function _initializeFromPort(port){this._port=port;this._messageHandler=new MessageHandler("main","worker",port);this._messageHandler.on("ready",function(){});_assertClassBrand(_PDFWorker_brand,this,_resolve).call(this);}},{key:"_initialize",value:function _initialize(){var _this50=this;if(_isWorkerDisabled._||_get_mainThreadWorkerMessageHandler(_PDFWorker)){this._setupFakeWorker();return;}var workerSrc=_PDFWorker.workerSrc;try{if(!_PDFWorker._isSameOrigin(window.location,workerSrc)){workerSrc=_PDFWorker._createCDNWrapper(new URL(workerSrc,window.location).href);}var worker=new Worker(workerSrc,{type:"module"});var messageHandler=new MessageHandler("main","worker",worker);var terminateEarly=function terminateEarly(){ac.abort();messageHandler.destroy();worker.terminate();if(_this50.destroyed){_this50._readyCapability.reject(new Error("Worker was destroyed"));}else{_this50._setupFakeWorker();}};var ac=new AbortController();worker.addEventListener("error",function(){if(!_this50._webWorker){terminateEarly();}},{signal:ac.signal});messageHandler.on("test",function(data){ac.abort();if(_this50.destroyed||!data){terminateEarly();return;}_this50._messageHandler=messageHandler;_this50._port=worker;_this50._webWorker=worker;_assertClassBrand(_PDFWorker_brand,_this50,_resolve).call(_this50);});messageHandler.on("ready",function(data){ac.abort();if(_this50.destroyed){terminateEarly();return;}try{sendTest();}catch(_unused8){_this50._setupFakeWorker();}});var sendTest=function sendTest(){var testObj=new Uint8Array();messageHandler.send("test",testObj,[testObj.buffer]);};sendTest();return;}catch(_unused9){info("The worker has been disabled.");}this._setupFakeWorker();}},{key:"_setupFakeWorker",value:function _setupFakeWorker(){var _this51=this;if(!_isWorkerDisabled._){warn("Setting up fake worker.");_isWorkerDisabled._=true;}_PDFWorker._setupFakeWorkerGlobal.then(function(WorkerMessageHandler){var _PDFWorker$fakeWorker,_PDFWorker$fakeWorker2;if(_this51.destroyed){_this51._readyCapability.reject(new Error("Worker was destroyed"));return;}var port=new LoopbackPort();_this51._port=port;var id="fake".concat((_fakeWorkerId._=(_PDFWorker$fakeWorker=_fakeWorkerId._,_PDFWorker$fakeWorker2=_PDFWorker$fakeWorker++,_PDFWorker$fakeWorker),_PDFWorker$fakeWorker2));var workerHandler=new MessageHandler(id+"_worker",id,port);WorkerMessageHandler.setup(workerHandler,port);_this51._messageHandler=new MessageHandler(id,id+"_worker",port);_assertClassBrand(_PDFWorker_brand,_this51,_resolve).call(_this51);})["catch"](function(reason){_this51._readyCapability.reject(new Error("Setting up fake worker failed: \\"".concat(reason.message,"\\".")));});}},{key:"destroy",value:function destroy(){var _this$_webWorker,_workerPorts$_2,_this$_messageHandler;this.destroyed=true;(_this$_webWorker=this._webWorker)===null||_this$_webWorker===void 0||_this$_webWorker.terminate();this._webWorker=null;(_workerPorts$_2=_workerPorts._)===null||_workerPorts$_2===void 0||_workerPorts$_2["delete"](this._port);this._port=null;(_this$_messageHandler=this._messageHandler)===null||_this$_messageHandler===void 0||_this$_messageHandler.destroy();this._messageHandler=null;}}],[{key:"fromPort",value:function fromPort(params){var _assertClassBrand$_;if(!(params!==null&&params!==void 0&&params.port)){throw new Error("PDFWorker.fromPort - invalid method signature.");}var cachedPort=(_assertClassBrand$_=_assertClassBrand(_PDFWorker,this,_workerPorts)._)===null||_assertClassBrand$_===void 0?void 0:_assertClassBrand$_.get(params.port);if(cachedPort){if(cachedPort._pendingDestroy){throw new Error("PDFWorker.fromPort - the worker is being destroyed.\\n"+"Please remember to await `PDFDocumentLoadingTask.destroy()`-calls.");}return cachedPort;}return new _PDFWorker(params);}},{key:"workerSrc",get:function get(){if(_GlobalWorkerOptions.workerSrc){return _GlobalWorkerOptions.workerSrc;}throw new Error(\'No "GlobalWorkerOptions.workerSrc" specified.\');}},{key:"_setupFakeWorkerGlobal",get:function get(){var _this52=this;var loader=/*#__PURE__*/function(){var _ref59=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee39(){var worker;return _regeneratorRuntime().wrap(function _callee39$(_context39){while(1)switch(_context39.prev=_context39.next){case 0:if(!_classPrivateGetter(_PDFWorker,_this52,_get_mainThreadWorkerMessageHandler)){_context39.next=2;break;}return _context39.abrupt("return",_classPrivateGetter(_PDFWorker,_this52,_get_mainThreadWorkerMessageHandler));case 2:_context39.next=4;return function(specifier){return new Promise(function(r){return r("".concat(specifier));}).then(function(s){return _interopRequireWildcard(__webpack_require__(58029)(s));});}(/*webpackIgnore: true*/_this52.workerSrc);case 4:worker=_context39.sent;return _context39.abrupt("return",worker.WorkerMessageHandler);case 6:case"end":return _context39.stop();}},_callee39);}));return function loader(){return _ref59.apply(this,arguments);};}();return _shadow(this,"_setupFakeWorkerGlobal",loader());}}]);}();_PDFWorker2=_PDFWorker;function _resolve(){this._readyCapability.resolve();this._messageHandler.send("configure",{verbosity:this.verbosity});}function _get_mainThreadWorkerMessageHandler(_this49){try{var _globalThis$pdfjsWork;return((_globalThis$pdfjsWork=globalThis.pdfjsWorker)===null||_globalThis$pdfjsWork===void 0?void 0:_globalThis$pdfjsWork.WorkerMessageHandler)||null;}catch(_unused10){return null;}}var _fakeWorkerId={_:0};var _isWorkerDisabled={_:false};var _workerPorts={_:void 0};(function(){if(isNodeJS){_isWorkerDisabled._=_assertClassBrand(_PDFWorker2,_PDFWorker2,true);_GlobalWorkerOptions.workerSrc||(_GlobalWorkerOptions.workerSrc="./pdf.worker.mjs");}_PDFWorker2._isSameOrigin=function(baseUrl,otherUrl){var base=URL.parse(baseUrl);if(!(base!==null&&base!==void 0&&base.origin)||base.origin==="null"){return false;}var other=new URL(otherUrl,base);return base.origin===other.origin;};_PDFWorker2._createCDNWrapper=function(url){var wrapper="await import(\\"".concat(url,"\\");");return URL.createObjectURL(new Blob([wrapper],{type:"text/javascript"}));};})();var _methodPromises=/*#__PURE__*/new WeakMap();var _pageCache=/*#__PURE__*/new WeakMap();var _pagePromises=/*#__PURE__*/new WeakMap();var _pageRefCache=/*#__PURE__*/new WeakMap();var _passwordCapability=/*#__PURE__*/new WeakMap();var _WorkerTransport_brand=/*#__PURE__*/new WeakSet();var WorkerTransport=/*#__PURE__*/function(){function WorkerTransport(messageHandler,loadingTask,networkStream,params,factory){_classCallCheck(this,WorkerTransport);_classPrivateMethodInitSpec(this,_WorkerTransport_brand);_classPrivateFieldInitSpec(this,_methodPromises,new Map());_classPrivateFieldInitSpec(this,_pageCache,new Map());_classPrivateFieldInitSpec(this,_pagePromises,new Map());_classPrivateFieldInitSpec(this,_pageRefCache,new Map());_classPrivateFieldInitSpec(this,_passwordCapability,null);this.messageHandler=messageHandler;this.loadingTask=loadingTask;this.commonObjs=new PDFObjects();this.fontLoader=new FontLoader({ownerDocument:params.ownerDocument,styleElement:params.styleElement});this.loadingParams=params.loadingParams;this._params=params;this.canvasFactory=factory.canvasFactory;this.filterFactory=factory.filterFactory;this.cMapReaderFactory=factory.cMapReaderFactory;this.standardFontDataFactory=factory.standardFontDataFactory;this.wasmFactory=factory.wasmFactory;this.destroyed=false;this.destroyCapability=null;this._networkStream=networkStream;this._fullReader=null;this._lastProgress=null;this.downloadInfoCapability=Promise.withResolvers();this.setupMessageHandler();}return _createClass(WorkerTransport,[{key:"annotationStorage",get:function get(){return _shadow(this,"annotationStorage",new AnnotationStorage());}},{key:"getRenderingIntent",value:function getRenderingIntent(intent){var annotationMode=arguments.length>1&&arguments[1]!==undefined?arguments[1]:_AnnotationMode.ENABLE;var printAnnotationStorage=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var isEditing=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var isOpList=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;var renderingIntent=RenderingIntentFlag.DISPLAY;var annotationStorageSerializable=SerializableEmpty;switch(intent){case"any":renderingIntent=RenderingIntentFlag.ANY;break;case"display":break;case"print":renderingIntent=RenderingIntentFlag.PRINT;break;default:warn("getRenderingIntent - invalid intent: ".concat(intent));}var annotationStorage=renderingIntent&RenderingIntentFlag.PRINT&&printAnnotationStorage instanceof PrintAnnotationStorage?printAnnotationStorage:this.annotationStorage;switch(annotationMode){case _AnnotationMode.DISABLE:renderingIntent+=RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _AnnotationMode.ENABLE:break;case _AnnotationMode.ENABLE_FORMS:renderingIntent+=RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _AnnotationMode.ENABLE_STORAGE:renderingIntent+=RenderingIntentFlag.ANNOTATIONS_STORAGE;annotationStorageSerializable=annotationStorage.serializable;break;default:warn("getRenderingIntent - invalid annotationMode: ".concat(annotationMode));}if(isEditing){renderingIntent+=RenderingIntentFlag.IS_EDITING;}if(isOpList){renderingIntent+=RenderingIntentFlag.OPLIST;}var _annotationStorage$mo=annotationStorage.modifiedIds,modifiedIds=_annotationStorage$mo.ids,modifiedIdsHash=_annotationStorage$mo.hash;var cacheKeyBuf=[renderingIntent,annotationStorageSerializable.hash,modifiedIdsHash];return{renderingIntent:renderingIntent,cacheKey:cacheKeyBuf.join("_"),annotationStorageSerializable:annotationStorageSerializable,modifiedIds:modifiedIds};}},{key:"destroy",value:function destroy(){var _classPrivateFieldGet61,_this53=this;if(this.destroyCapability){return this.destroyCapability.promise;}this.destroyed=true;this.destroyCapability=Promise.withResolvers();(_classPrivateFieldGet61=_classPrivateFieldGet(_passwordCapability,this))===null||_classPrivateFieldGet61===void 0||_classPrivateFieldGet61.reject(new Error("Worker was destroyed during onPassword callback"));var waitOn=[];var _iterator107=_createForOfIteratorHelper(_classPrivateFieldGet(_pageCache,this).values()),_step107;try{for(_iterator107.s();!(_step107=_iterator107.n()).done;){var page=_step107.value;waitOn.push(page._destroy());}}catch(err){_iterator107.e(err);}finally{_iterator107.f();}_classPrivateFieldGet(_pageCache,this).clear();_classPrivateFieldGet(_pagePromises,this).clear();_classPrivateFieldGet(_pageRefCache,this).clear();if(this.hasOwnProperty("annotationStorage")){this.annotationStorage.resetModified();}var terminated=this.messageHandler.sendWithPromise("Terminate",null);waitOn.push(terminated);Promise.all(waitOn).then(function(){var _this53$_networkStrea,_this53$messageHandle;_this53.commonObjs.clear();_this53.fontLoader.clear();_classPrivateFieldGet(_methodPromises,_this53).clear();_this53.filterFactory.destroy();_TextLayer.cleanup();(_this53$_networkStrea=_this53._networkStream)===null||_this53$_networkStrea===void 0||_this53$_networkStrea.cancelAllRequests(new _AbortException("Worker was terminated."));(_this53$messageHandle=_this53.messageHandler)===null||_this53$messageHandle===void 0||_this53$messageHandle.destroy();_this53.messageHandler=null;_this53.destroyCapability.resolve();},this.destroyCapability.reject);return this.destroyCapability.promise;}},{key:"setupMessageHandler",value:function setupMessageHandler(){var _this54=this;var messageHandler=this.messageHandler,loadingTask=this.loadingTask;messageHandler.on("GetReader",function(data,sink){assert(_this54._networkStream,"GetReader - no `IPDFStream` instance available.");_this54._fullReader=_this54._networkStream.getFullReader();_this54._fullReader.onProgress=function(evt){_this54._lastProgress={loaded:evt.loaded,total:evt.total};};sink.onPull=function(){_this54._fullReader.read().then(function(_ref60){var value=_ref60.value,done=_ref60.done;if(done){sink.close();return;}assert(value instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer.");sink.enqueue(new Uint8Array(value),1,[value]);})["catch"](function(reason){sink.error(reason);});};sink.onCancel=function(reason){_this54._fullReader.cancel(reason);sink.ready["catch"](function(readyReason){if(_this54.destroyed){return;}throw readyReason;});};});messageHandler.on("ReaderHeadersReady",/*#__PURE__*/function(){var _ref61=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee40(data){var _this54$_fullReader,isStreamingSupported,isRangeSupported,contentLength,_loadingTask$onProgre;return _regeneratorRuntime().wrap(function _callee40$(_context40){while(1)switch(_context40.prev=_context40.next){case 0:_context40.next=2;return _this54._fullReader.headersReady;case 2:_this54$_fullReader=_this54._fullReader,isStreamingSupported=_this54$_fullReader.isStreamingSupported,isRangeSupported=_this54$_fullReader.isRangeSupported,contentLength=_this54$_fullReader.contentLength;if(!isStreamingSupported||!isRangeSupported){if(_this54._lastProgress){(_loadingTask$onProgre=loadingTask.onProgress)===null||_loadingTask$onProgre===void 0||_loadingTask$onProgre.call(loadingTask,_this54._lastProgress);}_this54._fullReader.onProgress=function(evt){var _loadingTask$onProgre2;(_loadingTask$onProgre2=loadingTask.onProgress)===null||_loadingTask$onProgre2===void 0||_loadingTask$onProgre2.call(loadingTask,{loaded:evt.loaded,total:evt.total});};}return _context40.abrupt("return",{isStreamingSupported:isStreamingSupported,isRangeSupported:isRangeSupported,contentLength:contentLength});case 5:case"end":return _context40.stop();}},_callee40);}));return function(_x33){return _ref61.apply(this,arguments);};}());messageHandler.on("GetRangeReader",function(data,sink){assert(_this54._networkStream,"GetRangeReader - no `IPDFStream` instance available.");var rangeReader=_this54._networkStream.getRangeReader(data.begin,data.end);if(!rangeReader){sink.close();return;}sink.onPull=function(){rangeReader.read().then(function(_ref62){var value=_ref62.value,done=_ref62.done;if(done){sink.close();return;}assert(value instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer.");sink.enqueue(new Uint8Array(value),1,[value]);})["catch"](function(reason){sink.error(reason);});};sink.onCancel=function(reason){rangeReader.cancel(reason);sink.ready["catch"](function(readyReason){if(_this54.destroyed){return;}throw readyReason;});};});messageHandler.on("GetDoc",function(_ref63){var pdfInfo=_ref63.pdfInfo;_this54._numPages=pdfInfo.numPages;_this54._htmlForXfa=pdfInfo.htmlForXfa;delete pdfInfo.htmlForXfa;loadingTask._capability.resolve(new PDFDocumentProxy(pdfInfo,_this54));});messageHandler.on("DocException",function(ex){loadingTask._capability.reject(wrapReason(ex));});messageHandler.on("PasswordRequest",function(ex){_classPrivateFieldSet(_passwordCapability,_this54,Promise.withResolvers());try{if(!loadingTask.onPassword){throw wrapReason(ex);}var updatePassword=function updatePassword(password){if(password instanceof Error){_classPrivateFieldGet(_passwordCapability,_this54).reject(password);}else{_classPrivateFieldGet(_passwordCapability,_this54).resolve({password:password});}};loadingTask.onPassword(updatePassword,ex.code);}catch(err){_classPrivateFieldGet(_passwordCapability,_this54).reject(err);}return _classPrivateFieldGet(_passwordCapability,_this54).promise;});messageHandler.on("DataLoaded",function(data){var _loadingTask$onProgre3;(_loadingTask$onProgre3=loadingTask.onProgress)===null||_loadingTask$onProgre3===void 0||_loadingTask$onProgre3.call(loadingTask,{loaded:data.length,total:data.length});_this54.downloadInfoCapability.resolve(data);});messageHandler.on("StartRenderPage",function(data){if(_this54.destroyed){return;}var page=_classPrivateFieldGet(_pageCache,_this54).get(data.pageIndex);page._startRenderPage(data.transparency,data.cacheKey);});messageHandler.on("commonobj",function(_ref64){var _globalThis$FontInspe2;var _ref65=_slicedToArray(_ref64,3),id=_ref65[0],type=_ref65[1],exportedData=_ref65[2];if(_this54.destroyed){return null;}if(_this54.commonObjs.has(id)){return null;}switch(type){case"Font":if("error"in exportedData){var exportedError=exportedData.error;warn("Error during font loading: ".concat(exportedError));_this54.commonObjs.resolve(id,exportedError);break;}var inspectFont=_this54._params.pdfBug&&(_globalThis$FontInspe2=globalThis.FontInspector)!==null&&_globalThis$FontInspe2!==void 0&&_globalThis$FontInspe2.enabled?function(font,url){return globalThis.FontInspector.fontAdded(font,url);}:null;var font=new FontFaceObject(exportedData,inspectFont);_this54.fontLoader.bind(font)["catch"](function(){return messageHandler.sendWithPromise("FontFallback",{id:id});})["finally"](function(){if(!font.fontExtraProperties&&font.data){font.data=null;}_this54.commonObjs.resolve(id,font);});break;case"CopyLocalImage":var imageRef=exportedData.imageRef;assert(imageRef,"The imageRef must be defined.");var _iterator108=_createForOfIteratorHelper(_classPrivateFieldGet(_pageCache,_this54).values()),_step108;try{for(_iterator108.s();!(_step108=_iterator108.n()).done;){var pageProxy=_step108.value;var _iterator109=_createForOfIteratorHelper(pageProxy.objs),_step109;try{for(_iterator109.s();!(_step109=_iterator109.n()).done;){var _step109$value=_slicedToArray(_step109.value,2),data=_step109$value[1];if((data===null||data===void 0?void 0:data.ref)!==imageRef){continue;}if(!data.dataLen){return null;}_this54.commonObjs.resolve(id,structuredClone(data));return data.dataLen;}}catch(err){_iterator109.e(err);}finally{_iterator109.f();}}}catch(err){_iterator108.e(err);}finally{_iterator108.f();}break;case"FontPath":case"Image":case"Pattern":_this54.commonObjs.resolve(id,exportedData);break;default:throw new Error("Got unknown common object type ".concat(type));}return null;});messageHandler.on("obj",function(_ref66){var _ref67=_slicedToArray(_ref66,4),id=_ref67[0],pageIndex=_ref67[1],type=_ref67[2],imageData=_ref67[3];if(_this54.destroyed){return;}var pageProxy=_classPrivateFieldGet(_pageCache,_this54).get(pageIndex);if(pageProxy.objs.has(id)){return;}if(pageProxy._intentStates.size===0){var _imageData$bitmap;imageData===null||imageData===void 0||(_imageData$bitmap=imageData.bitmap)===null||_imageData$bitmap===void 0||_imageData$bitmap.close();return;}switch(type){case"Image":case"Pattern":pageProxy.objs.resolve(id,imageData);break;default:throw new Error("Got unknown object type ".concat(type));}});messageHandler.on("DocProgress",function(data){var _loadingTask$onProgre4;if(_this54.destroyed){return;}(_loadingTask$onProgre4=loadingTask.onProgress)===null||_loadingTask$onProgre4===void 0||_loadingTask$onProgre4.call(loadingTask,{loaded:data.loaded,total:data.total});});messageHandler.on("FetchBinaryData",/*#__PURE__*/function(){var _ref68=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee41(data){var factory;return _regeneratorRuntime().wrap(function _callee41$(_context41){while(1)switch(_context41.prev=_context41.next){case 0:if(!_this54.destroyed){_context41.next=2;break;}throw new Error("Worker was destroyed.");case 2:factory=_this54[data.type];if(factory){_context41.next=5;break;}throw new Error("".concat(data.type," not initialized, see the `useWorkerFetch` parameter."));case 5:return _context41.abrupt("return",factory.fetch(data));case 6:case"end":return _context41.stop();}},_callee41);}));return function(_x34){return _ref68.apply(this,arguments);};}());}},{key:"getData",value:function getData(){return this.messageHandler.sendWithPromise("GetData",null);}},{key:"saveDocument",value:function saveDocument(){var _this$_fullReader$fil,_this$_fullReader,_this55=this;if(this.annotationStorage.size<=0){warn("saveDocument called while `annotationStorage` is empty, "+"please use the getData-method instead.");}var _this$annotationStora=this.annotationStorage.serializable,map=_this$annotationStora.map,transfer=_this$annotationStora.transfer;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:map,filename:(_this$_fullReader$fil=(_this$_fullReader=this._fullReader)===null||_this$_fullReader===void 0?void 0:_this$_fullReader.filename)!==null&&_this$_fullReader$fil!==void 0?_this$_fullReader$fil:null},transfer)["finally"](function(){_this55.annotationStorage.resetModified();});}},{key:"getPage",value:function getPage(pageNumber){var _this56=this;if(!Number.isInteger(pageNumber)||pageNumber<=0||pageNumber>this._numPages){return Promise.reject(new Error("Invalid page request."));}var pageIndex=pageNumber-1,cachedPromise=_classPrivateFieldGet(_pagePromises,this).get(pageIndex);if(cachedPromise){return cachedPromise;}var promise=this.messageHandler.sendWithPromise("GetPage",{pageIndex:pageIndex}).then(function(pageInfo){if(_this56.destroyed){throw new Error("Transport destroyed");}if(pageInfo.refStr){_classPrivateFieldGet(_pageRefCache,_this56).set(pageInfo.refStr,pageNumber);}var page=new PDFPageProxy(pageIndex,pageInfo,_this56,_this56._params.pdfBug);_classPrivateFieldGet(_pageCache,_this56).set(pageIndex,page);return page;});_classPrivateFieldGet(_pagePromises,this).set(pageIndex,promise);return promise;}},{key:"getPageIndex",value:function getPageIndex(ref){if(!isRefProxy(ref)){return Promise.reject(new Error("Invalid pageIndex request."));}return this.messageHandler.sendWithPromise("GetPageIndex",{num:ref.num,gen:ref.gen});}},{key:"getAnnotations",value:function getAnnotations(pageIndex,intent){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:pageIndex,intent:intent});}},{key:"getFieldObjects",value:function getFieldObjects(){return _assertClassBrand(_WorkerTransport_brand,this,_cacheSimpleMethod).call(this,"GetFieldObjects");}},{key:"hasJSActions",value:function hasJSActions(){return _assertClassBrand(_WorkerTransport_brand,this,_cacheSimpleMethod).call(this,"HasJSActions");}},{key:"getCalculationOrderIds",value:function getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null);}},{key:"getDestinations",value:function getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null);}},{key:"getDestination",value:function getDestination(id){if(typeof id!=="string"){return Promise.reject(new Error("Invalid destination request."));}return this.messageHandler.sendWithPromise("GetDestination",{id:id});}},{key:"getPageLabels",value:function getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null);}},{key:"getPageLayout",value:function getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null);}},{key:"getPageMode",value:function getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null);}},{key:"getViewerPreferences",value:function getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null);}},{key:"getOpenAction",value:function getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null);}},{key:"getAttachments",value:function getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null);}},{key:"getDocJSActions",value:function getDocJSActions(){return _assertClassBrand(_WorkerTransport_brand,this,_cacheSimpleMethod).call(this,"GetDocJSActions");}},{key:"getPageJSActions",value:function getPageJSActions(pageIndex){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:pageIndex});}},{key:"getStructTree",value:function getStructTree(pageIndex){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:pageIndex});}},{key:"getOutline",value:function getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null);}},{key:"getOptionalContentConfig",value:function getOptionalContentConfig(renderingIntent){return _assertClassBrand(_WorkerTransport_brand,this,_cacheSimpleMethod).call(this,"GetOptionalContentConfig").then(function(data){return new OptionalContentConfig(data,renderingIntent);});}},{key:"getPermissions",value:function getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null);}},{key:"getMetadata",value:function getMetadata(){var _this57=this;var name="GetMetadata",cachedPromise=_classPrivateFieldGet(_methodPromises,this).get(name);if(cachedPromise){return cachedPromise;}var promise=this.messageHandler.sendWithPromise(name,null).then(function(results){var _this57$_fullReader$f,_this57$_fullReader,_this57$_fullReader$c,_this57$_fullReader2;return{info:results[0],metadata:results[1]?new Metadata(results[1]):null,contentDispositionFilename:(_this57$_fullReader$f=(_this57$_fullReader=_this57._fullReader)===null||_this57$_fullReader===void 0?void 0:_this57$_fullReader.filename)!==null&&_this57$_fullReader$f!==void 0?_this57$_fullReader$f:null,contentLength:(_this57$_fullReader$c=(_this57$_fullReader2=_this57._fullReader)===null||_this57$_fullReader2===void 0?void 0:_this57$_fullReader2.contentLength)!==null&&_this57$_fullReader$c!==void 0?_this57$_fullReader$c:null};});_classPrivateFieldGet(_methodPromises,this).set(name,promise);return promise;}},{key:"getMarkInfo",value:function getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null);}},{key:"startCleanup",value:function(){var _startCleanup=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee42(){var keepLoadedFonts,_iterator110,_step110,page,cleanupSuccessful,_args42=arguments;return _regeneratorRuntime().wrap(function _callee42$(_context42){while(1)switch(_context42.prev=_context42.next){case 0:keepLoadedFonts=_args42.length>0&&_args42[0]!==undefined?_args42[0]:false;if(!this.destroyed){_context42.next=3;break;}return _context42.abrupt("return");case 3:_context42.next=5;return this.messageHandler.sendWithPromise("Cleanup",null);case 5:_iterator110=_createForOfIteratorHelper(_classPrivateFieldGet(_pageCache,this).values());_context42.prev=6;_iterator110.s();case 8:if((_step110=_iterator110.n()).done){_context42.next=15;break;}page=_step110.value;cleanupSuccessful=page.cleanup();if(cleanupSuccessful){_context42.next=13;break;}throw new Error("startCleanup: Page ".concat(page.pageNumber," is currently rendering."));case 13:_context42.next=8;break;case 15:_context42.next=20;break;case 17:_context42.prev=17;_context42.t0=_context42["catch"](6);_iterator110.e(_context42.t0);case 20:_context42.prev=20;_iterator110.f();return _context42.finish(20);case 23:this.commonObjs.clear();if(!keepLoadedFonts){this.fontLoader.clear();}_classPrivateFieldGet(_methodPromises,this).clear();this.filterFactory.destroy(true);_TextLayer.cleanup();case 28:case"end":return _context42.stop();}},_callee42,this,[[6,17,20,23]]);}));function startCleanup(){return _startCleanup.apply(this,arguments);}return startCleanup;}()},{key:"cachedPageNumber",value:function cachedPageNumber(ref){var _classPrivateFieldGet62;if(!isRefProxy(ref)){return null;}var refStr=ref.gen===0?"".concat(ref.num,"R"):"".concat(ref.num,"R").concat(ref.gen);return(_classPrivateFieldGet62=_classPrivateFieldGet(_pageRefCache,this).get(refStr))!==null&&_classPrivateFieldGet62!==void 0?_classPrivateFieldGet62:null;}}]);}();function _cacheSimpleMethod(name){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var cachedPromise=_classPrivateFieldGet(_methodPromises,this).get(name);if(cachedPromise){return cachedPromise;}var promise=this.messageHandler.sendWithPromise(name,data);_classPrivateFieldGet(_methodPromises,this).set(name,promise);return promise;}var INITIAL_DATA=Symbol("INITIAL_DATA");var _objs=/*#__PURE__*/new WeakMap();var _PDFObjects_brand=/*#__PURE__*/new WeakSet();var PDFObjects=/*#__PURE__*/function(){function PDFObjects(){_classCallCheck(this,PDFObjects);_classPrivateMethodInitSpec(this,_PDFObjects_brand);_classPrivateFieldInitSpec(this,_objs,Object.create(null));}return _createClass(PDFObjects,[{key:"get",value:function get(objId){var callback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(callback){var _obj=_assertClassBrand(_PDFObjects_brand,this,_ensureObj).call(this,objId);_obj.promise.then(function(){return callback(_obj.data);});return null;}var obj=_classPrivateFieldGet(_objs,this)[objId];if(!obj||obj.data===INITIAL_DATA){throw new Error("Requesting object that isn\'t resolved yet ".concat(objId,"."));}return obj.data;}},{key:"has",value:function has(objId){var obj=_classPrivateFieldGet(_objs,this)[objId];return!!obj&&obj.data!==INITIAL_DATA;}},{key:"delete",value:function _delete(objId){var obj=_classPrivateFieldGet(_objs,this)[objId];if(!obj||obj.data===INITIAL_DATA){return false;}delete _classPrivateFieldGet(_objs,this)[objId];return true;}},{key:"resolve",value:function resolve(objId){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var obj=_assertClassBrand(_PDFObjects_brand,this,_ensureObj).call(this,objId);obj.data=data;obj.resolve();}},{key:"clear",value:function clear(){for(var objId in _classPrivateFieldGet(_objs,this)){var _data$bitmap;var data=_classPrivateFieldGet(_objs,this)[objId].data;data===null||data===void 0||(_data$bitmap=data.bitmap)===null||_data$bitmap===void 0||_data$bitmap.close();}_classPrivateFieldSet(_objs,this,Object.create(null));}},{key:Symbol.iterator,value:/*#__PURE__*/_regeneratorRuntime().mark(function value(){var objId,data;return _regeneratorRuntime().wrap(function value$(_context43){while(1)switch(_context43.prev=_context43.next){case 0:_context43.t0=_regeneratorRuntime().keys(_classPrivateFieldGet(_objs,this));case 1:if((_context43.t1=_context43.t0()).done){_context43.next=10;break;}objId=_context43.t1.value;data=_classPrivateFieldGet(_objs,this)[objId].data;if(!(data===INITIAL_DATA)){_context43.next=6;break;}return _context43.abrupt("continue",1);case 6:_context43.next=8;return[objId,data];case 8:_context43.next=1;break;case 10:case"end":return _context43.stop();}},value,this);})}]);}();function _ensureObj(objId){var _classPrivateFieldGet153;return(_classPrivateFieldGet153=_classPrivateFieldGet(_objs,this))[objId]||(_classPrivateFieldGet153[objId]=_objectSpread(_objectSpread({},Promise.withResolvers()),{},{data:INITIAL_DATA}));}var _internalRenderTask=/*#__PURE__*/new WeakMap();var RenderTask=/*#__PURE__*/function(){function RenderTask(internalRenderTask){_classCallCheck(this,RenderTask);_classPrivateFieldInitSpec(this,_internalRenderTask,null);_defineProperty(this,"onContinue",null);_defineProperty(this,"onError",null);_classPrivateFieldSet(_internalRenderTask,this,internalRenderTask);}return _createClass(RenderTask,[{key:"promise",get:function get(){return _classPrivateFieldGet(_internalRenderTask,this).capability.promise;}},{key:"cancel",value:function cancel(){var extraDelay=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;_classPrivateFieldGet(_internalRenderTask,this).cancel(null,extraDelay);}},{key:"separateAnnots",get:function get(){var separateAnnots=_classPrivateFieldGet(_internalRenderTask,this).operatorList.separateAnnots;if(!separateAnnots){return false;}var _classPrivateFieldGet63=_classPrivateFieldGet(_internalRenderTask,this),annotationCanvasMap=_classPrivateFieldGet63.annotationCanvasMap;return separateAnnots.form||separateAnnots.canvas&&(annotationCanvasMap===null||annotationCanvasMap===void 0?void 0:annotationCanvasMap.size)>0;}}]);}();var _rAF=/*#__PURE__*/new WeakMap();var InternalRenderTask=/*#__PURE__*/function(){function InternalRenderTask(_ref69){var callback=_ref69.callback,params=_ref69.params,objs=_ref69.objs,commonObjs=_ref69.commonObjs,annotationCanvasMap=_ref69.annotationCanvasMap,operatorList=_ref69.operatorList,pageIndex=_ref69.pageIndex,canvasFactory=_ref69.canvasFactory,filterFactory=_ref69.filterFactory,_ref69$useRequestAnim=_ref69.useRequestAnimationFrame,useRequestAnimationFrame=_ref69$useRequestAnim===void 0?false:_ref69$useRequestAnim,_ref69$pdfBug=_ref69.pdfBug,pdfBug=_ref69$pdfBug===void 0?false:_ref69$pdfBug,_ref69$pageColors=_ref69.pageColors,pageColors=_ref69$pageColors===void 0?null:_ref69$pageColors;_classCallCheck(this,InternalRenderTask);_classPrivateFieldInitSpec(this,_rAF,null);this.callback=callback;this.params=params;this.objs=objs;this.commonObjs=commonObjs;this.annotationCanvasMap=annotationCanvasMap;this.operatorListIdx=null;this.operatorList=operatorList;this._pageIndex=pageIndex;this.canvasFactory=canvasFactory;this.filterFactory=filterFactory;this._pdfBug=pdfBug;this.pageColors=pageColors;this.running=false;this.graphicsReadyCallback=null;this.graphicsReady=false;this._useRequestAnimationFrame=useRequestAnimationFrame===true&&typeof window!=="undefined";this.cancelled=false;this.capability=Promise.withResolvers();this.task=new RenderTask(this);this._cancelBound=this.cancel.bind(this);this._continueBound=this._continue.bind(this);this._scheduleNextBound=this._scheduleNext.bind(this);this._nextBound=this._next.bind(this);this._canvas=params.canvasContext.canvas;}return _createClass(InternalRenderTask,[{key:"completed",get:function get(){return this.capability.promise["catch"](function(){});}},{key:"initializeGraphics",value:function initializeGraphics(_ref70){var _globalThis$StepperMa,_this$graphicsReadyCa;var _ref70$transparency=_ref70.transparency,transparency=_ref70$transparency===void 0?false:_ref70$transparency,optionalContentConfig=_ref70.optionalContentConfig;if(this.cancelled){return;}if(this._canvas){if(_canvasInUse._.has(this._canvas)){throw new Error("Cannot use the same canvas during multiple render() operations. "+"Use different canvas or ensure previous operations were "+"cancelled or completed.");}_canvasInUse._.add(this._canvas);}if(this._pdfBug&&(_globalThis$StepperMa=globalThis.StepperManager)!==null&&_globalThis$StepperMa!==void 0&&_globalThis$StepperMa.enabled){this.stepper=globalThis.StepperManager.create(this._pageIndex);this.stepper.init(this.operatorList);this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint();}var _this$params=this.params,canvasContext=_this$params.canvasContext,viewport=_this$params.viewport,transform=_this$params.transform,background=_this$params.background;this.gfx=new CanvasGraphics(canvasContext,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:optionalContentConfig},this.annotationCanvasMap,this.pageColors);this.gfx.beginDrawing({transform:transform,viewport:viewport,transparency:transparency,background:background});this.operatorListIdx=0;this.graphicsReady=true;(_this$graphicsReadyCa=this.graphicsReadyCallback)===null||_this$graphicsReadyCa===void 0||_this$graphicsReadyCa.call(this);}},{key:"cancel",value:function cancel(){var _this$gfx,_this$task$onError,_this$task;var error=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var extraDelay=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this.running=false;this.cancelled=true;(_this$gfx=this.gfx)===null||_this$gfx===void 0||_this$gfx.endDrawing();if(_classPrivateFieldGet(_rAF,this)){window.cancelAnimationFrame(_classPrivateFieldGet(_rAF,this));_classPrivateFieldSet(_rAF,this,null);}_canvasInUse._["delete"](this._canvas);error||(error=new _RenderingCancelledException("Rendering cancelled, page ".concat(this._pageIndex+1),extraDelay));this.callback(error);(_this$task$onError=(_this$task=this.task).onError)===null||_this$task$onError===void 0||_this$task$onError.call(_this$task,error);}},{key:"operatorListChanged",value:function operatorListChanged(){var _this$stepper;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return;}(_this$stepper=this.stepper)===null||_this$stepper===void 0||_this$stepper.updateOperatorList(this.operatorList);if(this.running){return;}this._continue();}},{key:"_continue",value:function _continue(){this.running=true;if(this.cancelled){return;}if(this.task.onContinue){this.task.onContinue(this._scheduleNextBound);}else{this._scheduleNext();}}},{key:"_scheduleNext",value:function _scheduleNext(){var _this58=this;if(this._useRequestAnimationFrame){_classPrivateFieldSet(_rAF,this,window.requestAnimationFrame(function(){_classPrivateFieldSet(_rAF,_this58,null);_this58._nextBound()["catch"](_this58._cancelBound);}));}else{Promise.resolve().then(this._nextBound)["catch"](this._cancelBound);}}},{key:"_next",value:function(){var _next2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee43(){return _regeneratorRuntime().wrap(function _callee43$(_context44){while(1)switch(_context44.prev=_context44.next){case 0:if(!this.cancelled){_context44.next=2;break;}return _context44.abrupt("return");case 2:this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper);if(this.operatorListIdx===this.operatorList.argsArray.length){this.running=false;if(this.operatorList.lastChunk){this.gfx.endDrawing();_canvasInUse._["delete"](this._canvas);this.callback();}}case 4:case"end":return _context44.stop();}},_callee43,this);}));function _next(){return _next2.apply(this,arguments);}return _next;}()}]);}();var _canvasInUse={_:new WeakSet()};var _version="5.0.0";var _build="a5ccc2a";;// ./src/shared/scripting_utils.js\nfunction makeColorComp(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0");}function scaleAndClamp(x){return Math.max(0,Math.min(255,255*x));}var ColorConverters=/*#__PURE__*/function(){function ColorConverters(){_classCallCheck(this,ColorConverters);}return _createClass(ColorConverters,null,[{key:"CMYK_G",value:function CMYK_G(_ref71){var _ref72=_slicedToArray(_ref71,4),c=_ref72[0],y=_ref72[1],m=_ref72[2],k=_ref72[3];return["G",1-Math.min(1,0.3*c+0.59*m+0.11*y+k)];}},{key:"G_CMYK",value:function G_CMYK(_ref73){var _ref74=_slicedToArray(_ref73,1),g=_ref74[0];return["CMYK",0,0,0,1-g];}},{key:"G_RGB",value:function G_RGB(_ref75){var _ref76=_slicedToArray(_ref75,1),g=_ref76[0];return["RGB",g,g,g];}},{key:"G_rgb",value:function G_rgb(_ref77){var _ref78=_slicedToArray(_ref77,1),g=_ref78[0];g=scaleAndClamp(g);return[g,g,g];}},{key:"G_HTML",value:function G_HTML(_ref79){var _ref80=_slicedToArray(_ref79,1),g=_ref80[0];var G=makeColorComp(g);return"#".concat(G).concat(G).concat(G);}},{key:"RGB_G",value:function RGB_G(_ref81){var _ref82=_slicedToArray(_ref81,3),r=_ref82[0],g=_ref82[1],b=_ref82[2];return["G",0.3*r+0.59*g+0.11*b];}},{key:"RGB_rgb",value:function RGB_rgb(color){return color.map(scaleAndClamp);}},{key:"RGB_HTML",value:function RGB_HTML(color){return"#".concat(color.map(makeColorComp).join(""));}},{key:"T_HTML",value:function T_HTML(){return"#00000000";}},{key:"T_rgb",value:function T_rgb(){return[null];}},{key:"CMYK_RGB",value:function CMYK_RGB(_ref83){var _ref84=_slicedToArray(_ref83,4),c=_ref84[0],y=_ref84[1],m=_ref84[2],k=_ref84[3];return["RGB",1-Math.min(1,c+k),1-Math.min(1,m+k),1-Math.min(1,y+k)];}},{key:"CMYK_rgb",value:function CMYK_rgb(_ref85){var _ref86=_slicedToArray(_ref85,4),c=_ref86[0],y=_ref86[1],m=_ref86[2],k=_ref86[3];return[scaleAndClamp(1-Math.min(1,c+k)),scaleAndClamp(1-Math.min(1,m+k)),scaleAndClamp(1-Math.min(1,y+k))];}},{key:"CMYK_HTML",value:function CMYK_HTML(components){var rgb=this.CMYK_RGB(components).slice(1);return this.RGB_HTML(rgb);}},{key:"RGB_CMYK",value:function RGB_CMYK(_ref87){var _ref88=_slicedToArray(_ref87,3),r=_ref88[0],g=_ref88[1],b=_ref88[2];var c=1-r;var m=1-g;var y=1-b;var k=Math.min(c,m,y);return["CMYK",c,m,y,k];}}]);}();;// ./src/display/svg_factory.js\nvar BaseSVGFactory=/*#__PURE__*/function(){function BaseSVGFactory(){_classCallCheck(this,BaseSVGFactory);}return _createClass(BaseSVGFactory,[{key:"create",value:function create(width,height){var skipDimensions=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(width<=0||height<=0){throw new Error("Invalid SVG dimensions");}var svg=this._createSVG("svg:svg");svg.setAttribute("version","1.1");if(!skipDimensions){svg.setAttribute("width","".concat(width,"px"));svg.setAttribute("height","".concat(height,"px"));}svg.setAttribute("preserveAspectRatio","none");svg.setAttribute("viewBox","0 0 ".concat(width," ").concat(height));return svg;}},{key:"createElement",value:function createElement(type){if(typeof type!=="string"){throw new Error("Invalid SVG element type");}return this._createSVG(type);}},{key:"_createSVG",value:function _createSVG(type){unreachable("Abstract method `_createSVG` called.");}}]);}();var _DOMSVGFactory=/*#__PURE__*/function(_BaseSVGFactory){function _DOMSVGFactory(){_classCallCheck(this,_DOMSVGFactory);return _callSuper(this,_DOMSVGFactory,arguments);}_inherits(_DOMSVGFactory,_BaseSVGFactory);return _createClass(_DOMSVGFactory,[{key:"_createSVG",value:function _createSVG(type){return document.createElementNS(SVG_NS,type);}}]);}(BaseSVGFactory);;// ./src/display/xfa_layer.js\nvar _XfaLayer=/*#__PURE__*/function(){function _XfaLayer(){_classCallCheck(this,_XfaLayer);}return _createClass(_XfaLayer,null,[{key:"setupStorage",value:function setupStorage(html,id,element,storage,intent){var storedData=storage.getValue(id,{value:null});switch(element.name){case"textarea":if(storedData.value!==null){html.textContent=storedData.value;}if(intent==="print"){break;}html.addEventListener("input",function(event){storage.setValue(id,{value:event.target.value});});break;case"input":if(element.attributes.type==="radio"||element.attributes.type==="checkbox"){if(storedData.value===element.attributes.xfaOn){html.setAttribute("checked",true);}else if(storedData.value===element.attributes.xfaOff){html.removeAttribute("checked");}if(intent==="print"){break;}html.addEventListener("change",function(event){storage.setValue(id,{value:event.target.checked?event.target.getAttribute("xfaOn"):event.target.getAttribute("xfaOff")});});}else{if(storedData.value!==null){html.setAttribute("value",storedData.value);}if(intent==="print"){break;}html.addEventListener("input",function(event){storage.setValue(id,{value:event.target.value});});}break;case"select":if(storedData.value!==null){html.setAttribute("value",storedData.value);var _iterator111=_createForOfIteratorHelper(element.children),_step111;try{for(_iterator111.s();!(_step111=_iterator111.n()).done;){var option=_step111.value;if(option.attributes.value===storedData.value){option.attributes.selected=true;}else if(option.attributes.hasOwnProperty("selected")){delete option.attributes.selected;}}}catch(err){_iterator111.e(err);}finally{_iterator111.f();}}html.addEventListener("input",function(event){var options=event.target.options;var value=options.selectedIndex===-1?"":options[options.selectedIndex].value;storage.setValue(id,{value:value});});break;}}},{key:"setAttributes",value:function setAttributes(_ref89){var html=_ref89.html,element=_ref89.element,_ref89$storage=_ref89.storage,storage=_ref89$storage===void 0?null:_ref89$storage,intent=_ref89.intent,linkService=_ref89.linkService;var attributes=element.attributes;var isHTMLAnchorElement=html instanceof HTMLAnchorElement;if(attributes.type==="radio"){attributes.name="".concat(attributes.name,"-").concat(intent);}for(var _i16=0,_Object$entries4=Object.entries(attributes);_i16<_Object$entries4.length;_i16++){var _Object$entries4$_i=_slicedToArray(_Object$entries4[_i16],2),key=_Object$entries4$_i[0],value=_Object$entries4$_i[1];if(value===null||value===undefined){continue;}switch(key){case"class":if(value.length){html.setAttribute(key,value.join(" "));}break;case"dataId":break;case"id":html.setAttribute("data-element-id",value);break;case"style":Object.assign(html.style,value);break;case"textContent":html.textContent=value;break;default:if(!isHTMLAnchorElement||key!=="href"&&key!=="newWindow"){html.setAttribute(key,value);}}}if(isHTMLAnchorElement){linkService.addLinkAttributes(html,attributes.href,attributes.newWindow);}if(storage&&attributes.dataId){this.setupStorage(html,attributes.dataId,element,storage);}}},{key:"render",value:function render(parameters){var storage=parameters.annotationStorage;var linkService=parameters.linkService;var root=parameters.xfaHtml;var intent=parameters.intent||"display";var rootHtml=document.createElement(root.name);if(root.attributes){this.setAttributes({html:rootHtml,element:root,intent:intent,linkService:linkService});}var isNotForRichText=intent!=="richText";var rootDiv=parameters.div;rootDiv.append(rootHtml);if(parameters.viewport){var transform="matrix(".concat(parameters.viewport.transform.join(","),")");rootDiv.style.transform=transform;}if(isNotForRichText){rootDiv.setAttribute("class","xfaLayer xfaFont");}var textDivs=[];if(root.children.length===0){if(root.value){var node=document.createTextNode(root.value);rootHtml.append(node);if(isNotForRichText&&XfaText.shouldBuildText(root.name)){textDivs.push(node);}}return{textDivs:textDivs};}var stack=[[root,-1,rootHtml]];while(stack.length>0){var _child$attributes,_child$children;var _stack$at=stack.at(-1),_stack$at2=_slicedToArray(_stack$at,3),parent=_stack$at2[0],i=_stack$at2[1],html=_stack$at2[2];if(i+1===parent.children.length){stack.pop();continue;}var child=parent.children[++stack.at(-1)[1]];if(child===null){continue;}var name=child.name;if(name==="#text"){var _node=document.createTextNode(child.value);textDivs.push(_node);html.append(_node);continue;}var childHtml=child!==null&&child!==void 0&&(_child$attributes=child.attributes)!==null&&_child$attributes!==void 0&&_child$attributes.xmlns?document.createElementNS(child.attributes.xmlns,name):document.createElement(name);html.append(childHtml);if(child.attributes){this.setAttributes({html:childHtml,element:child,storage:storage,intent:intent,linkService:linkService});}if(((_child$children=child.children)===null||_child$children===void 0?void 0:_child$children.length)>0){stack.push([child,-1,childHtml]);}else if(child.value){var _node2=document.createTextNode(child.value);if(isNotForRichText&&XfaText.shouldBuildText(name)){textDivs.push(_node2);}childHtml.append(_node2);}}var _iterator112=_createForOfIteratorHelper(rootDiv.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea")),_step112;try{for(_iterator112.s();!(_step112=_iterator112.n()).done;){var el=_step112.value;el.setAttribute("readOnly",true);}}catch(err){_iterator112.e(err);}finally{_iterator112.f();}return{textDivs:textDivs};}},{key:"update",value:function update(parameters){var transform="matrix(".concat(parameters.viewport.transform.join(","),")");parameters.div.style.transform=transform;parameters.div.hidden=false;}}]);}();;// ./src/display/annotation_layer.js\nvar DEFAULT_TAB_INDEX=1000;var annotation_layer_DEFAULT_FONT_SIZE=9;var GetElementsByNameSet=new WeakSet();var AnnotationElementFactory=/*#__PURE__*/function(){function AnnotationElementFactory(){_classCallCheck(this,AnnotationElementFactory);}return _createClass(AnnotationElementFactory,null,[{key:"create",value:function create(parameters){var subtype=parameters.data.annotationType;switch(subtype){case _AnnotationType.LINK:return new LinkAnnotationElement(parameters);case _AnnotationType.TEXT:return new TextAnnotationElement(parameters);case _AnnotationType.WIDGET:var fieldType=parameters.data.fieldType;switch(fieldType){case"Tx":return new TextWidgetAnnotationElement(parameters);case"Btn":if(parameters.data.radioButton){return new RadioButtonWidgetAnnotationElement(parameters);}else if(parameters.data.checkBox){return new CheckboxWidgetAnnotationElement(parameters);}return new PushButtonWidgetAnnotationElement(parameters);case"Ch":return new ChoiceWidgetAnnotationElement(parameters);case"Sig":return new SignatureWidgetAnnotationElement(parameters);}return new WidgetAnnotationElement(parameters);case _AnnotationType.POPUP:return new PopupAnnotationElement(parameters);case _AnnotationType.FREETEXT:return new FreeTextAnnotationElement(parameters);case _AnnotationType.LINE:return new LineAnnotationElement(parameters);case _AnnotationType.SQUARE:return new SquareAnnotationElement(parameters);case _AnnotationType.CIRCLE:return new CircleAnnotationElement(parameters);case _AnnotationType.POLYLINE:return new PolylineAnnotationElement(parameters);case _AnnotationType.CARET:return new CaretAnnotationElement(parameters);case _AnnotationType.INK:return new InkAnnotationElement(parameters);case _AnnotationType.POLYGON:return new PolygonAnnotationElement(parameters);case _AnnotationType.HIGHLIGHT:return new HighlightAnnotationElement(parameters);case _AnnotationType.UNDERLINE:return new UnderlineAnnotationElement(parameters);case _AnnotationType.SQUIGGLY:return new SquigglyAnnotationElement(parameters);case _AnnotationType.STRIKEOUT:return new StrikeOutAnnotationElement(parameters);case _AnnotationType.STAMP:return new StampAnnotationElement(parameters);case _AnnotationType.FILEATTACHMENT:return new FileAttachmentAnnotationElement(parameters);default:return new AnnotationElement(parameters);}}}]);}();var _updates=/*#__PURE__*/new WeakMap();var _hasBorder=/*#__PURE__*/new WeakMap();var _popupElement=/*#__PURE__*/new WeakMap();var _AnnotationElement_brand=/*#__PURE__*/new WeakSet();var AnnotationElement=/*#__PURE__*/function(){function AnnotationElement(parameters){var _ref90=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref90$isRenderable=_ref90.isRenderable,isRenderable=_ref90$isRenderable===void 0?false:_ref90$isRenderable,_ref90$ignoreBorder=_ref90.ignoreBorder,ignoreBorder=_ref90$ignoreBorder===void 0?false:_ref90$ignoreBorder,_ref90$createQuadrila=_ref90.createQuadrilaterals,createQuadrilaterals=_ref90$createQuadrila===void 0?false:_ref90$createQuadrila;_classCallCheck(this,AnnotationElement);_classPrivateMethodInitSpec(this,_AnnotationElement_brand);_classPrivateFieldInitSpec(this,_updates,null);_classPrivateFieldInitSpec(this,_hasBorder,false);_classPrivateFieldInitSpec(this,_popupElement,null);this.isRenderable=isRenderable;this.data=parameters.data;this.layer=parameters.layer;this.linkService=parameters.linkService;this.downloadManager=parameters.downloadManager;this.imageResourcesPath=parameters.imageResourcesPath;this.renderForms=parameters.renderForms;this.svgFactory=parameters.svgFactory;this.annotationStorage=parameters.annotationStorage;this.enableScripting=parameters.enableScripting;this.hasJSActions=parameters.hasJSActions;this._fieldObjects=parameters.fieldObjects;this.parent=parameters.parent;if(isRenderable){this.container=this._createContainer(ignoreBorder);}if(createQuadrilaterals){this._createQuadrilaterals();}}return _createClass(AnnotationElement,[{key:"_isEditable",get:function get(){return this.data.isEditable;}},{key:"hasPopupData",get:function get(){return AnnotationElement._hasPopupData(this.data);}},{key:"updateEdited",value:function updateEdited(params){var _classPrivateFieldGet64;if(!this.container){return;}_classPrivateFieldGet(_updates,this)||_classPrivateFieldSet(_updates,this,{rect:this.data.rect.slice(0)});var rect=params.rect;if(rect){_assertClassBrand(_AnnotationElement_brand,this,_setRectEdited).call(this,rect);}(_classPrivateFieldGet64=_classPrivateFieldGet(_popupElement,this))===null||_classPrivateFieldGet64===void 0||_classPrivateFieldGet64.popup.updateEdited(params);}},{key:"resetEdited",value:function resetEdited(){var _classPrivateFieldGet65;if(!_classPrivateFieldGet(_updates,this)){return;}_assertClassBrand(_AnnotationElement_brand,this,_setRectEdited).call(this,_classPrivateFieldGet(_updates,this).rect);(_classPrivateFieldGet65=_classPrivateFieldGet(_popupElement,this))===null||_classPrivateFieldGet65===void 0||_classPrivateFieldGet65.popup.resetEdited();_classPrivateFieldSet(_updates,this,null);}},{key:"_createContainer",value:function _createContainer(ignoreBorder){var data=this.data,_this$parent2=this.parent,page=_this$parent2.page,viewport=_this$parent2.viewport;var container=document.createElement("section");container.setAttribute("data-annotation-id",data.id);if(!(this instanceof WidgetAnnotationElement)){container.tabIndex=DEFAULT_TAB_INDEX;}var style=container.style;style.zIndex=this.parent.zIndex++;if(data.alternativeText){container.title=data.alternativeText;}if(data.noRotate){container.classList.add("norotate");}if(!data.rect||this instanceof PopupAnnotationElement){var _rotation4=data.rotation;if(!data.hasOwnCanvas&&_rotation4!==0){this.setRotation(_rotation4,container);}return container;}var width=this.width,height=this.height;if(!ignoreBorder&&data.borderStyle.width>0){style.borderWidth="".concat(data.borderStyle.width,"px");var horizontalRadius=data.borderStyle.horizontalCornerRadius;var verticalRadius=data.borderStyle.verticalCornerRadius;if(horizontalRadius>0||verticalRadius>0){var radius="calc(".concat(horizontalRadius,"px * var(--total-scale-factor)) / calc(").concat(verticalRadius,"px * var(--total-scale-factor))");style.borderRadius=radius;}else if(this instanceof RadioButtonWidgetAnnotationElement){var _radius="calc(".concat(width,"px * var(--total-scale-factor)) / calc(").concat(height,"px * var(--total-scale-factor))");style.borderRadius=_radius;}switch(data.borderStyle.style){case AnnotationBorderStyleType.SOLID:style.borderStyle="solid";break;case AnnotationBorderStyleType.DASHED:style.borderStyle="dashed";break;case AnnotationBorderStyleType.BEVELED:warn("Unimplemented border style: beveled");break;case AnnotationBorderStyleType.INSET:warn("Unimplemented border style: inset");break;case AnnotationBorderStyleType.UNDERLINE:style.borderBottomStyle="solid";break;default:break;}var borderColor=data.borderColor||null;if(borderColor){_classPrivateFieldSet(_hasBorder,this,true);style.borderColor=_Util.makeHexColor(borderColor[0]|0,borderColor[1]|0,borderColor[2]|0);}else{style.borderWidth=0;}}var rect=_Util.normalizeRect([data.rect[0],page.view[3]-data.rect[1]+page.view[1],data.rect[2],page.view[3]-data.rect[3]+page.view[1]]);var _viewport$rawDims3=viewport.rawDims,pageWidth=_viewport$rawDims3.pageWidth,pageHeight=_viewport$rawDims3.pageHeight,pageX=_viewport$rawDims3.pageX,pageY=_viewport$rawDims3.pageY;style.left="".concat(100*(rect[0]-pageX)/pageWidth,"%");style.top="".concat(100*(rect[1]-pageY)/pageHeight,"%");var rotation=data.rotation;if(data.hasOwnCanvas||rotation===0){style.width="".concat(100*width/pageWidth,"%");style.height="".concat(100*height/pageHeight,"%");}else{this.setRotation(rotation,container);}return container;}},{key:"setRotation",value:function setRotation(angle){var container=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.container;if(!this.data.rect){return;}var _this$parent$viewport3=this.parent.viewport.rawDims,pageWidth=_this$parent$viewport3.pageWidth,pageHeight=_this$parent$viewport3.pageHeight;var width=this.width,height=this.height;if(angle%180!==0){var _ref91=[height,width];width=_ref91[0];height=_ref91[1];}container.style.width="".concat(100*width/pageWidth,"%");container.style.height="".concat(100*height/pageHeight,"%");container.setAttribute("data-main-rotation",(360-angle)%360);}},{key:"_commonActions",get:function get(){var _this59=this;var setColor=function setColor(jsName,styleName,event){var color=event.detail[jsName];var colorType=color[0];var colorArray=color.slice(1);event.target.style[styleName]=ColorConverters["".concat(colorType,"_HTML")](colorArray);_this59.annotationStorage.setValue(_this59.data.id,_defineProperty({},styleName,ColorConverters["".concat(colorType,"_rgb")](colorArray)));};return _shadow(this,"_commonActions",{display:function display(event){var display=event.detail.display;var hidden=display%2===1;_this59.container.style.visibility=hidden?"hidden":"visible";_this59.annotationStorage.setValue(_this59.data.id,{noView:hidden,noPrint:display===1||display===2});},print:function print(event){_this59.annotationStorage.setValue(_this59.data.id,{noPrint:!event.detail.print});},hidden:function hidden(event){var hidden=event.detail.hidden;_this59.container.style.visibility=hidden?"hidden":"visible";_this59.annotationStorage.setValue(_this59.data.id,{noPrint:hidden,noView:hidden});},focus:function focus(event){setTimeout(function(){return event.target.focus({preventScroll:false});},0);},userName:function userName(event){event.target.title=event.detail.userName;},readonly:function readonly(event){event.target.disabled=event.detail.readonly;},required:function required(event){_this59._setRequired(event.target,event.detail.required);},bgColor:function bgColor(event){setColor("bgColor","backgroundColor",event);},fillColor:function fillColor(event){setColor("fillColor","backgroundColor",event);},fgColor:function fgColor(event){setColor("fgColor","color",event);},textColor:function textColor(event){setColor("textColor","color",event);},borderColor:function borderColor(event){setColor("borderColor","borderColor",event);},strokeColor:function strokeColor(event){setColor("strokeColor","borderColor",event);},rotation:function rotation(event){var angle=event.detail.rotation;_this59.setRotation(angle);_this59.annotationStorage.setValue(_this59.data.id,{rotation:angle});}});}},{key:"_dispatchEventFromSandbox",value:function _dispatchEventFromSandbox(actions,jsEvent){var commonActions=this._commonActions;for(var _i17=0,_Object$keys=Object.keys(jsEvent.detail);_i17<_Object$keys.length;_i17++){var name=_Object$keys[_i17];var action=actions[name]||commonActions[name];action===null||action===void 0||action(jsEvent);}}},{key:"_setDefaultPropertiesFromJS",value:function _setDefaultPropertiesFromJS(element){if(!this.enableScripting){return;}var storedData=this.annotationStorage.getRawValue(this.data.id);if(!storedData){return;}var commonActions=this._commonActions;for(var _i18=0,_Object$entries5=Object.entries(storedData);_i18<_Object$entries5.length;_i18++){var _Object$entries5$_i=_slicedToArray(_Object$entries5[_i18],2),actionName=_Object$entries5$_i[0],detail=_Object$entries5$_i[1];var action=commonActions[actionName];if(action){var eventProxy={detail:_defineProperty({},actionName,detail),target:element};action(eventProxy);delete storedData[actionName];}}}},{key:"_createQuadrilaterals",value:function _createQuadrilaterals(){if(!this.container){return;}var quadPoints=this.data.quadPoints;if(!quadPoints){return;}var _this$data$rect$map=this.data.rect.map(function(x){return Math.fround(x);}),_this$data$rect$map2=_slicedToArray(_this$data$rect$map,4),rectBlX=_this$data$rect$map2[0],rectBlY=_this$data$rect$map2[1],rectTrX=_this$data$rect$map2[2],rectTrY=_this$data$rect$map2[3];if(quadPoints.length===8){var _quadPoints$subarray=quadPoints.subarray(2,6),_quadPoints$subarray2=_slicedToArray(_quadPoints$subarray,4),trX=_quadPoints$subarray2[0],trY=_quadPoints$subarray2[1],blX=_quadPoints$subarray2[2],blY=_quadPoints$subarray2[3];if(rectTrX===trX&&rectTrY===trY&&rectBlX===blX&&rectBlY===blY){return;}}var style=this.container.style;var svgBuffer;if(_classPrivateFieldGet(_hasBorder,this)){var borderColor=style.borderColor,borderWidth=style.borderWidth;style.borderWidth=0;svgBuffer=["url(\'data:image/svg+xml;utf8,","<svg xmlns=\\"http://www.w3.org/2000/svg\\""," preserveAspectRatio=\\"none\\" viewBox=\\"0 0 1 1\\">","<g fill=\\"transparent\\" stroke=\\"".concat(borderColor,"\\" stroke-width=\\"").concat(borderWidth,"\\">")];this.container.classList.add("hasBorder");}var width=rectTrX-rectBlX;var height=rectTrY-rectBlY;var svgFactory=this.svgFactory;var svg=svgFactory.createElement("svg");svg.classList.add("quadrilateralsContainer");svg.setAttribute("width",0);svg.setAttribute("height",0);var defs=svgFactory.createElement("defs");svg.append(defs);var clipPath=svgFactory.createElement("clipPath");var id="clippath_".concat(this.data.id);clipPath.setAttribute("id",id);clipPath.setAttribute("clipPathUnits","objectBoundingBox");defs.append(clipPath);for(var i=2,ii=quadPoints.length;i<ii;i+=8){var _svgBuffer;var _trX=quadPoints[i];var _trY=quadPoints[i+1];var _blX=quadPoints[i+2];var _blY=quadPoints[i+3];var rect=svgFactory.createElement("rect");var x=(_blX-rectBlX)/width;var y=(rectTrY-_trY)/height;var rectWidth=(_trX-_blX)/width;var rectHeight=(_trY-_blY)/height;rect.setAttribute("x",x);rect.setAttribute("y",y);rect.setAttribute("width",rectWidth);rect.setAttribute("height",rectHeight);clipPath.append(rect);(_svgBuffer=svgBuffer)===null||_svgBuffer===void 0||_svgBuffer.push("<rect vector-effect=\\"non-scaling-stroke\\" x=\\"".concat(x,"\\" y=\\"").concat(y,"\\" width=\\"").concat(rectWidth,"\\" height=\\"").concat(rectHeight,"\\"/>"));}if(_classPrivateFieldGet(_hasBorder,this)){svgBuffer.push("</g></svg>\')");style.backgroundImage=svgBuffer.join("");}this.container.append(svg);this.container.style.clipPath="url(#".concat(id,")");}},{key:"_createPopup",value:function _createPopup(){var data=this.data;var popup=_classPrivateFieldSet(_popupElement,this,new PopupAnnotationElement({data:{color:data.color,titleObj:data.titleObj,modificationDate:data.modificationDate,contentsObj:data.contentsObj,richText:data.richText,parentRect:data.rect,borderStyle:0,id:"popup_".concat(data.id),rotation:data.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(popup.render());}},{key:"render",value:function render(){unreachable("Abstract method `AnnotationElement.render` called");}},{key:"_getElementsByName",value:function _getElementsByName(name){var skipId=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var fields=[];if(this._fieldObjects){var fieldObj=this._fieldObjects[name];if(fieldObj){var _iterator113=_createForOfIteratorHelper(fieldObj),_step113;try{for(_iterator113.s();!(_step113=_iterator113.n()).done;){var _step113$value=_step113.value,page=_step113$value.page,id=_step113$value.id,exportValues=_step113$value.exportValues;if(page===-1){continue;}if(id===skipId){continue;}var exportValue=typeof exportValues==="string"?exportValues:null;var domElement=document.querySelector("[data-element-id=\\"".concat(id,"\\"]"));if(domElement&&!GetElementsByNameSet.has(domElement)){warn("_getElementsByName - element not allowed: ".concat(id));continue;}fields.push({id:id,exportValue:exportValue,domElement:domElement});}}catch(err){_iterator113.e(err);}finally{_iterator113.f();}}return fields;}var _iterator114=_createForOfIteratorHelper(document.getElementsByName(name)),_step114;try{for(_iterator114.s();!(_step114=_iterator114.n()).done;){var _domElement=_step114.value;var _exportValue=_domElement.exportValue;var _id7=_domElement.getAttribute("data-element-id");if(_id7===skipId){continue;}if(!GetElementsByNameSet.has(_domElement)){continue;}fields.push({id:_id7,exportValue:_exportValue,domElement:_domElement});}}catch(err){_iterator114.e(err);}finally{_iterator114.f();}return fields;}},{key:"show",value:function show(){var _this$popup;if(this.container){this.container.hidden=false;}(_this$popup=this.popup)===null||_this$popup===void 0||_this$popup.maybeShow();}},{key:"hide",value:function hide(){var _this$popup2;if(this.container){this.container.hidden=true;}(_this$popup2=this.popup)===null||_this$popup2===void 0||_this$popup2.forceHide();}},{key:"getElementsToTriggerPopup",value:function getElementsToTriggerPopup(){return this.container;}},{key:"addHighlightArea",value:function addHighlightArea(){var triggers=this.getElementsToTriggerPopup();if(Array.isArray(triggers)){var _iterator115=_createForOfIteratorHelper(triggers),_step115;try{for(_iterator115.s();!(_step115=_iterator115.n()).done;){var element=_step115.value;element.classList.add("highlightArea");}}catch(err){_iterator115.e(err);}finally{_iterator115.f();}}else{triggers.classList.add("highlightArea");}}},{key:"_editOnDoubleClick",value:function _editOnDoubleClick(){var _this60=this;if(!this._isEditable){return;}var mode=this.annotationEditorType,editId=this.data.id;this.container.addEventListener("dblclick",function(){var _this60$linkService$e;(_this60$linkService$e=_this60.linkService.eventBus)===null||_this60$linkService$e===void 0||_this60$linkService$e.dispatch("switchannotationeditormode",{source:_this60,mode:mode,editId:editId});});}},{key:"width",get:function get(){return this.data.rect[2]-this.data.rect[0];}},{key:"height",get:function get(){return this.data.rect[3]-this.data.rect[1];}}],[{key:"_hasPopupData",value:function _hasPopupData(_ref92){var titleObj=_ref92.titleObj,contentsObj=_ref92.contentsObj,richText=_ref92.richText;return!!(titleObj!==null&&titleObj!==void 0&&titleObj.str||contentsObj!==null&&contentsObj!==void 0&&contentsObj.str||richText!==null&&richText!==void 0&&richText.str);}}]);}();function _setRectEdited(rect){var style=this.container.style,_this$data3=this.data,currentRect=_this$data3.rect,rotation=_this$data3.rotation,_this$parent$viewport12=this.parent.viewport.rawDims,pageWidth=_this$parent$viewport12.pageWidth,pageHeight=_this$parent$viewport12.pageHeight,pageX=_this$parent$viewport12.pageX,pageY=_this$parent$viewport12.pageY;currentRect===null||currentRect===void 0||currentRect.splice.apply(currentRect,[0,4].concat(_toConsumableArray(rect)));style.left="".concat(100*(rect[0]-pageX)/pageWidth,"%");style.top="".concat(100*(pageHeight-rect[3]+pageY)/pageHeight,"%");if(rotation===0){style.width="".concat(100*(rect[2]-rect[0])/pageWidth,"%");style.height="".concat(100*(rect[3]-rect[1])/pageHeight,"%");}else{this.setRotation(rotation);}}var _LinkAnnotationElement_brand=/*#__PURE__*/new WeakSet();var LinkAnnotationElement=/*#__PURE__*/function(_AnnotationElement2){function LinkAnnotationElement(parameters){var _this61;var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;_classCallCheck(this,LinkAnnotationElement);_this61=_callSuper(this,LinkAnnotationElement,[parameters,{isRenderable:true,ignoreBorder:!!(options!==null&&options!==void 0&&options.ignoreBorder),createQuadrilaterals:true}]);_classPrivateMethodInitSpec(_this61,_LinkAnnotationElement_brand);_this61.isTooltipOnly=parameters.data.isTooltipOnly;return _this61;}_inherits(LinkAnnotationElement,_AnnotationElement2);return _createClass(LinkAnnotationElement,[{key:"render",value:function render(){var data=this.data,linkService=this.linkService;var link=document.createElement("a");link.setAttribute("data-element-id",data.id);var isBound=false;if(data.url){linkService.addLinkAttributes(link,data.url,data.newWindow);isBound=true;}else if(data.action){this._bindNamedAction(link,data.action);isBound=true;}else if(data.attachment){_assertClassBrand(_LinkAnnotationElement_brand,this,_bindAttachment).call(this,link,data.attachment,data.attachmentDest);isBound=true;}else if(data.setOCGState){_assertClassBrand(_LinkAnnotationElement_brand,this,_bindSetOCGState).call(this,link,data.setOCGState);isBound=true;}else if(data.dest){this._bindLink(link,data.dest);isBound=true;}else{if(data.actions&&(data.actions.Action||data.actions["Mouse Up"]||data.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions){this._bindJSAction(link,data);isBound=true;}if(data.resetForm){this._bindResetFormAction(link,data.resetForm);isBound=true;}else if(this.isTooltipOnly&&!isBound){this._bindLink(link,"");isBound=true;}}this.container.classList.add("linkAnnotation");if(isBound){this.container.append(link);}return this.container;}},{key:"_bindLink",value:function _bindLink(link,destination){var _this62=this;link.href=this.linkService.getDestinationHash(destination);link.onclick=function(){if(destination){_this62.linkService.goToDestination(destination);}return false;};if(destination||destination===""){_assertClassBrand(_LinkAnnotationElement_brand,this,_setInternalLink).call(this);}}},{key:"_bindNamedAction",value:function _bindNamedAction(link,action){var _this63=this;link.href=this.linkService.getAnchorUrl("");link.onclick=function(){_this63.linkService.executeNamedAction(action);return false;};_assertClassBrand(_LinkAnnotationElement_brand,this,_setInternalLink).call(this);}},{key:"_bindJSAction",value:function _bindJSAction(link,data){var _this64=this;link.href=this.linkService.getAnchorUrl("");var map=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);var _loop=function _loop(){var name=_Object$keys2[_i19];var jsName=map.get(name);if(!jsName){return 1;// continue\n}link[jsName]=function(){var _this64$linkService$e;(_this64$linkService$e=_this64.linkService.eventBus)===null||_this64$linkService$e===void 0||_this64$linkService$e.dispatch("dispatcheventinsandbox",{source:_this64,detail:{id:data.id,name:name}});return false;};};for(var _i19=0,_Object$keys2=Object.keys(data.actions);_i19<_Object$keys2.length;_i19++){if(_loop())continue;}if(!link.onclick){link.onclick=function(){return false;};}_assertClassBrand(_LinkAnnotationElement_brand,this,_setInternalLink).call(this);}},{key:"_bindResetFormAction",value:function _bindResetFormAction(link,resetForm){var _this65=this;var otherClickAction=link.onclick;if(!otherClickAction){link.href=this.linkService.getAnchorUrl("");}_assertClassBrand(_LinkAnnotationElement_brand,this,_setInternalLink).call(this);if(!this._fieldObjects){warn("_bindResetFormAction - \\"resetForm\\" action not supported, "+"ensure that the `fieldObjects` parameter is provided.");if(!otherClickAction){link.onclick=function(){return false;};}return;}link.onclick=function(){otherClickAction===null||otherClickAction===void 0||otherClickAction();var resetFormFields=resetForm.fields,resetFormRefs=resetForm.refs,include=resetForm.include;var allFields=[];if(resetFormFields.length!==0||resetFormRefs.length!==0){var fieldIds=new Set(resetFormRefs);var _iterator116=_createForOfIteratorHelper(resetFormFields),_step116;try{for(_iterator116.s();!(_step116=_iterator116.n()).done;){var fieldName=_step116.value;var _fields=_this65._fieldObjects[fieldName]||[];var _iterator118=_createForOfIteratorHelper(_fields),_step118;try{for(_iterator118.s();!(_step118=_iterator118.n()).done;){var id=_step118.value.id;fieldIds.add(id);}}catch(err){_iterator118.e(err);}finally{_iterator118.f();}}}catch(err){_iterator116.e(err);}finally{_iterator116.f();}for(var _i20=0,_Object$values=Object.values(_this65._fieldObjects);_i20<_Object$values.length;_i20++){var fields=_Object$values[_i20];var _iterator117=_createForOfIteratorHelper(fields),_step117;try{for(_iterator117.s();!(_step117=_iterator117.n()).done;){var field=_step117.value;if(fieldIds.has(field.id)===include){allFields.push(field);}}}catch(err){_iterator117.e(err);}finally{_iterator117.f();}}}else{for(var _i21=0,_Object$values2=Object.values(_this65._fieldObjects);_i21<_Object$values2.length;_i21++){var _fields2=_Object$values2[_i21];allFields.push.apply(allFields,_toConsumableArray(_fields2));}}var storage=_this65.annotationStorage;var allIds=[];for(var _i22=0,_allFields=allFields;_i22<_allFields.length;_i22++){var _field=_allFields[_i22];var _id8=_field.id;allIds.push(_id8);switch(_field.type){case"text":{var value=_field.defaultValue||"";storage.setValue(_id8,{value:value});break;}case"checkbox":case"radiobutton":{var _value2=_field.defaultValue===_field.exportValues;storage.setValue(_id8,{value:_value2});break;}case"combobox":case"listbox":{var _value3=_field.defaultValue||"";storage.setValue(_id8,{value:_value3});break;}default:continue;}var domElement=document.querySelector("[data-element-id=\\"".concat(_id8,"\\"]"));if(!domElement){continue;}else if(!GetElementsByNameSet.has(domElement)){warn("_bindResetFormAction - element not allowed: ".concat(_id8));continue;}domElement.dispatchEvent(new Event("resetform"));}if(_this65.enableScripting){var _this65$linkService$e;(_this65$linkService$e=_this65.linkService.eventBus)===null||_this65$linkService$e===void 0||_this65$linkService$e.dispatch("dispatcheventinsandbox",{source:_this65,detail:{id:"app",ids:allIds,name:"ResetForm"}});}return false;};}}]);}(AnnotationElement);function _setInternalLink(){this.container.setAttribute("data-internal-link","");}function _bindAttachment(link,attachment){var _this115=this;var dest=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;link.href=this.linkService.getAnchorUrl("");if(attachment.description){link.title=attachment.description;}link.onclick=function(){var _this115$downloadMana;(_this115$downloadMana=_this115.downloadManager)===null||_this115$downloadMana===void 0||_this115$downloadMana.openOrDownloadData(attachment.content,attachment.filename,dest);return false;};_assertClassBrand(_LinkAnnotationElement_brand,this,_setInternalLink).call(this);}function _bindSetOCGState(link,action){var _this116=this;link.href=this.linkService.getAnchorUrl("");link.onclick=function(){_this116.linkService.executeSetOCGState(action);return false;};_assertClassBrand(_LinkAnnotationElement_brand,this,_setInternalLink).call(this);}var TextAnnotationElement=/*#__PURE__*/function(_AnnotationElement3){function TextAnnotationElement(parameters){_classCallCheck(this,TextAnnotationElement);return _callSuper(this,TextAnnotationElement,[parameters,{isRenderable:true}]);}_inherits(TextAnnotationElement,_AnnotationElement3);return _createClass(TextAnnotationElement,[{key:"render",value:function render(){this.container.classList.add("textAnnotation");var image=document.createElement("img");image.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg";image.setAttribute("data-l10n-id","pdfjs-text-annotation-type");image.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name}));if(!this.data.popupRef&&this.hasPopupData){this._createPopup();}this.container.append(image);return this.container;}}]);}(AnnotationElement);var WidgetAnnotationElement=/*#__PURE__*/function(_AnnotationElement4){function WidgetAnnotationElement(){_classCallCheck(this,WidgetAnnotationElement);return _callSuper(this,WidgetAnnotationElement,arguments);}_inherits(WidgetAnnotationElement,_AnnotationElement4);return _createClass(WidgetAnnotationElement,[{key:"render",value:function render(){return this.container;}},{key:"showElementAndHideCanvas",value:function showElementAndHideCanvas(element){if(this.data.hasOwnCanvas){var _element$previousSibl;if(((_element$previousSibl=element.previousSibling)===null||_element$previousSibl===void 0?void 0:_element$previousSibl.nodeName)==="CANVAS"){element.previousSibling.hidden=true;}element.hidden=false;}}},{key:"_getKeyModifier",value:function _getKeyModifier(event){return util_FeatureTest.platform.isMac?event.metaKey:event.ctrlKey;}},{key:"_setEventListener",value:function _setEventListener(element,elementData,baseName,eventName,valueGetter){var _this66=this;if(baseName.includes("mouse")){element.addEventListener(baseName,function(event){var _this66$linkService$e;(_this66$linkService$e=_this66.linkService.eventBus)===null||_this66$linkService$e===void 0||_this66$linkService$e.dispatch("dispatcheventinsandbox",{source:_this66,detail:{id:_this66.data.id,name:eventName,value:valueGetter(event),shift:event.shiftKey,modifier:_this66._getKeyModifier(event)}});});}else{element.addEventListener(baseName,function(event){var _this66$linkService$e2;if(baseName==="blur"){if(!elementData.focused||!event.relatedTarget){return;}elementData.focused=false;}else if(baseName==="focus"){if(elementData.focused){return;}elementData.focused=true;}if(!valueGetter){return;}(_this66$linkService$e2=_this66.linkService.eventBus)===null||_this66$linkService$e2===void 0||_this66$linkService$e2.dispatch("dispatcheventinsandbox",{source:_this66,detail:{id:_this66.data.id,name:eventName,value:valueGetter(event)}});});}}},{key:"_setEventListeners",value:function _setEventListeners(element,elementData,names,getter){var _iterator119=_createForOfIteratorHelper(names),_step119;try{for(_iterator119.s();!(_step119=_iterator119.n()).done;){var _this$data$actions;var _step119$value=_slicedToArray(_step119.value,2),baseName=_step119$value[0],eventName=_step119$value[1];if(eventName==="Action"||(_this$data$actions=this.data.actions)!==null&&_this$data$actions!==void 0&&_this$data$actions[eventName]){var _this$data$actions2,_this$data$actions3;if(eventName==="Focus"||eventName==="Blur"){elementData||(elementData={focused:false});}this._setEventListener(element,elementData,baseName,eventName,getter);if(eventName==="Focus"&&!((_this$data$actions2=this.data.actions)!==null&&_this$data$actions2!==void 0&&_this$data$actions2.Blur)){this._setEventListener(element,elementData,"blur","Blur",null);}else if(eventName==="Blur"&&!((_this$data$actions3=this.data.actions)!==null&&_this$data$actions3!==void 0&&_this$data$actions3.Focus)){this._setEventListener(element,elementData,"focus","Focus",null);}}}}catch(err){_iterator119.e(err);}finally{_iterator119.f();}}},{key:"_setBackgroundColor",value:function _setBackgroundColor(element){var color=this.data.backgroundColor||null;element.style.backgroundColor=color===null?"transparent":_Util.makeHexColor(color[0],color[1],color[2]);}},{key:"_setTextStyle",value:function _setTextStyle(element){var TEXT_ALIGNMENT=["left","center","right"];var fontColor=this.data.defaultAppearanceData.fontColor;var fontSize=this.data.defaultAppearanceData.fontSize||annotation_layer_DEFAULT_FONT_SIZE;var style=element.style;var computedFontSize;var BORDER_SIZE=2;var roundToOneDecimal=function roundToOneDecimal(x){return Math.round(10*x)/10;};if(this.data.multiLine){var height=Math.abs(this.data.rect[3]-this.data.rect[1]-BORDER_SIZE);var numberOfLines=Math.round(height/(LINE_FACTOR*fontSize))||1;var lineHeight=height/numberOfLines;computedFontSize=Math.min(fontSize,roundToOneDecimal(lineHeight/LINE_FACTOR));}else{var _height2=Math.abs(this.data.rect[3]-this.data.rect[1]-BORDER_SIZE);computedFontSize=Math.min(fontSize,roundToOneDecimal(_height2/LINE_FACTOR));}style.fontSize="calc(".concat(computedFontSize,"px * var(--total-scale-factor))");style.color=_Util.makeHexColor(fontColor[0],fontColor[1],fontColor[2]);if(this.data.textAlignment!==null){style.textAlign=TEXT_ALIGNMENT[this.data.textAlignment];}}},{key:"_setRequired",value:function _setRequired(element,isRequired){if(isRequired){element.setAttribute("required",true);}else{element.removeAttribute("required");}element.setAttribute("aria-required",isRequired);}}]);}(AnnotationElement);var TextWidgetAnnotationElement=/*#__PURE__*/function(_WidgetAnnotationElem){function TextWidgetAnnotationElement(parameters){_classCallCheck(this,TextWidgetAnnotationElement);var isRenderable=parameters.renderForms||parameters.data.hasOwnCanvas||!parameters.data.hasAppearance&&!!parameters.data.fieldValue;return _callSuper(this,TextWidgetAnnotationElement,[parameters,{isRenderable:isRenderable}]);}_inherits(TextWidgetAnnotationElement,_WidgetAnnotationElem);return _createClass(TextWidgetAnnotationElement,[{key:"setPropertyOnSiblings",value:function setPropertyOnSiblings(base,key,value,keyInStorage){var storage=this.annotationStorage;var _iterator120=_createForOfIteratorHelper(this._getElementsByName(base.name,base.id)),_step120;try{for(_iterator120.s();!(_step120=_iterator120.n()).done;){var element=_step120.value;if(element.domElement){element.domElement[key]=value;}storage.setValue(element.id,_defineProperty({},keyInStorage,value));}}catch(err){_iterator120.e(err);}finally{_iterator120.f();}}},{key:"render",value:function render(){var _this67=this;var storage=this.annotationStorage;var id=this.data.id;this.container.classList.add("textWidgetAnnotation");var element=null;if(this.renderForms){var _this$data$textConten;var storedData=storage.getValue(id,{value:this.data.fieldValue});var textContent=storedData.value||"";var maxLen=storage.getValue(id,{charLimit:this.data.maxLen}).charLimit;if(maxLen&&textContent.length>maxLen){textContent=textContent.slice(0,maxLen);}var fieldFormattedValues=storedData.formattedValue||((_this$data$textConten=this.data.textContent)===null||_this$data$textConten===void 0?void 0:_this$data$textConten.join("\\n"))||null;if(fieldFormattedValues&&this.data.comb){fieldFormattedValues=fieldFormattedValues.replaceAll(/\\s+/g,"");}var elementData={userValue:textContent,formattedValue:fieldFormattedValues,lastCommittedValue:null,commitKey:1,focused:false};if(this.data.multiLine){element=document.createElement("textarea");element.textContent=fieldFormattedValues!==null&&fieldFormattedValues!==void 0?fieldFormattedValues:textContent;if(this.data.doNotScroll){element.style.overflowY="hidden";}}else{element=document.createElement("input");element.type=this.data.password?"password":"text";element.setAttribute("value",fieldFormattedValues!==null&&fieldFormattedValues!==void 0?fieldFormattedValues:textContent);if(this.data.doNotScroll){element.style.overflowX="hidden";}}if(this.data.hasOwnCanvas){element.hidden=true;}GetElementsByNameSet.add(element);element.setAttribute("data-element-id",id);element.disabled=this.data.readOnly;element.name=this.data.fieldName;element.tabIndex=DEFAULT_TAB_INDEX;this._setRequired(element,this.data.required);if(maxLen){element.maxLength=maxLen;}element.addEventListener("input",function(event){storage.setValue(id,{value:event.target.value});_this67.setPropertyOnSiblings(element,"value",event.target.value,"value");elementData.formattedValue=null;});element.addEventListener("resetform",function(event){var _this67$data$defaultF;var defaultValue=(_this67$data$defaultF=_this67.data.defaultFieldValue)!==null&&_this67$data$defaultF!==void 0?_this67$data$defaultF:"";element.value=elementData.userValue=defaultValue;elementData.formattedValue=null;});var blurListener=function blurListener(event){var formattedValue=elementData.formattedValue;if(formattedValue!==null&&formattedValue!==undefined){event.target.value=formattedValue;}event.target.scrollLeft=0;};if(this.enableScripting&&this.hasJSActions){var _this$data$actions4;element.addEventListener("focus",function(event){var _this67$data$actions;if(elementData.focused){return;}var target=event.target;if(elementData.userValue){target.value=elementData.userValue;}elementData.lastCommittedValue=target.value;elementData.commitKey=1;if(!((_this67$data$actions=_this67.data.actions)!==null&&_this67$data$actions!==void 0&&_this67$data$actions.Focus)){elementData.focused=true;}});element.addEventListener("updatefromsandbox",function(jsEvent){_this67.showElementAndHideCanvas(jsEvent.target);var actions={value:function value(event){var _event$detail$value;elementData.userValue=(_event$detail$value=event.detail.value)!==null&&_event$detail$value!==void 0?_event$detail$value:"";storage.setValue(id,{value:elementData.userValue.toString()});event.target.value=elementData.userValue;},formattedValue:function formattedValue(event){var formattedValue=event.detail.formattedValue;elementData.formattedValue=formattedValue;if(formattedValue!==null&&formattedValue!==undefined&&event.target!==document.activeElement){event.target.value=formattedValue;}storage.setValue(id,{formattedValue:formattedValue});},selRange:function selRange(event){var _event$target;(_event$target=event.target).setSelectionRange.apply(_event$target,_toConsumableArray(event.detail.selRange));},charLimit:function charLimit(event){var _this67$linkService$e;var charLimit=event.detail.charLimit;var target=event.target;if(charLimit===0){target.removeAttribute("maxLength");return;}target.setAttribute("maxLength",charLimit);var value=elementData.userValue;if(!value||value.length<=charLimit){return;}value=value.slice(0,charLimit);target.value=elementData.userValue=value;storage.setValue(id,{value:value});(_this67$linkService$e=_this67.linkService.eventBus)===null||_this67$linkService$e===void 0||_this67$linkService$e.dispatch("dispatcheventinsandbox",{source:_this67,detail:{id:id,name:"Keystroke",value:value,willCommit:true,commitKey:1,selStart:target.selectionStart,selEnd:target.selectionEnd}});}};_this67._dispatchEventFromSandbox(actions,jsEvent);});element.addEventListener("keydown",function(event){var _this67$linkService$e2;elementData.commitKey=1;var commitKey=-1;if(event.key==="Escape"){commitKey=0;}else if(event.key==="Enter"&&!_this67.data.multiLine){commitKey=2;}else if(event.key==="Tab"){elementData.commitKey=3;}if(commitKey===-1){return;}var value=event.target.value;if(elementData.lastCommittedValue===value){return;}elementData.lastCommittedValue=value;elementData.userValue=value;(_this67$linkService$e2=_this67.linkService.eventBus)===null||_this67$linkService$e2===void 0||_this67$linkService$e2.dispatch("dispatcheventinsandbox",{source:_this67,detail:{id:id,name:"Keystroke",value:value,willCommit:true,commitKey:commitKey,selStart:event.target.selectionStart,selEnd:event.target.selectionEnd}});});var _blurListener=blurListener;blurListener=null;element.addEventListener("blur",function(event){var _this67$data$actions2;if(!elementData.focused||!event.relatedTarget){return;}if(!((_this67$data$actions2=_this67.data.actions)!==null&&_this67$data$actions2!==void 0&&_this67$data$actions2.Blur)){elementData.focused=false;}var value=event.target.value;elementData.userValue=value;if(elementData.lastCommittedValue!==value){var _this67$linkService$e3;(_this67$linkService$e3=_this67.linkService.eventBus)===null||_this67$linkService$e3===void 0||_this67$linkService$e3.dispatch("dispatcheventinsandbox",{source:_this67,detail:{id:id,name:"Keystroke",value:value,willCommit:true,commitKey:elementData.commitKey,selStart:event.target.selectionStart,selEnd:event.target.selectionEnd}});}_blurListener(event);});if((_this$data$actions4=this.data.actions)!==null&&_this$data$actions4!==void 0&&_this$data$actions4.Keystroke){element.addEventListener("beforeinput",function(event){var _this67$linkService$e4;elementData.lastCommittedValue=null;var data=event.data,target=event.target;var value=target.value,selectionStart=target.selectionStart,selectionEnd=target.selectionEnd;var selStart=selectionStart,selEnd=selectionEnd;switch(event.inputType){case"deleteWordBackward":{var match=value.substring(0,selectionStart).match(/\\w*[^\\w]*$/);if(match){selStart-=match[0].length;}break;}case"deleteWordForward":{var _match3=value.substring(selectionStart).match(/^[^\\w]*\\w*/);if(_match3){selEnd+=_match3[0].length;}break;}case"deleteContentBackward":if(selectionStart===selectionEnd){selStart-=1;}break;case"deleteContentForward":if(selectionStart===selectionEnd){selEnd+=1;}break;}event.preventDefault();(_this67$linkService$e4=_this67.linkService.eventBus)===null||_this67$linkService$e4===void 0||_this67$linkService$e4.dispatch("dispatcheventinsandbox",{source:_this67,detail:{id:id,name:"Keystroke",value:value,change:data||"",willCommit:false,selStart:selStart,selEnd:selEnd}});});}this._setEventListeners(element,elementData,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(event){return event.target.value;});}if(blurListener){element.addEventListener("blur",blurListener);}if(this.data.comb){var fieldWidth=this.data.rect[2]-this.data.rect[0];var combWidth=fieldWidth/maxLen;element.classList.add("comb");element.style.letterSpacing="calc(".concat(combWidth,"px * var(--total-scale-factor) - 1ch)");}}else{element=document.createElement("div");element.textContent=this.data.fieldValue;element.style.verticalAlign="middle";element.style.display="table-cell";if(this.data.hasOwnCanvas){element.hidden=true;}}this._setTextStyle(element);this._setBackgroundColor(element);this._setDefaultPropertiesFromJS(element);this.container.append(element);return this.container;}}]);}(WidgetAnnotationElement);var SignatureWidgetAnnotationElement=/*#__PURE__*/function(_WidgetAnnotationElem2){function SignatureWidgetAnnotationElement(parameters){_classCallCheck(this,SignatureWidgetAnnotationElement);return _callSuper(this,SignatureWidgetAnnotationElement,[parameters,{isRenderable:!!parameters.data.hasOwnCanvas}]);}_inherits(SignatureWidgetAnnotationElement,_WidgetAnnotationElem2);return _createClass(SignatureWidgetAnnotationElement);}(WidgetAnnotationElement);var CheckboxWidgetAnnotationElement=/*#__PURE__*/function(_WidgetAnnotationElem3){function CheckboxWidgetAnnotationElement(parameters){_classCallCheck(this,CheckboxWidgetAnnotationElement);return _callSuper(this,CheckboxWidgetAnnotationElement,[parameters,{isRenderable:parameters.renderForms}]);}_inherits(CheckboxWidgetAnnotationElement,_WidgetAnnotationElem3);return _createClass(CheckboxWidgetAnnotationElement,[{key:"render",value:function render(){var _this68=this;var storage=this.annotationStorage;var data=this.data;var id=data.id;var value=storage.getValue(id,{value:data.exportValue===data.fieldValue}).value;if(typeof value==="string"){value=value!=="Off";storage.setValue(id,{value:value});}this.container.classList.add("buttonWidgetAnnotation","checkBox");var element=document.createElement("input");GetElementsByNameSet.add(element);element.setAttribute("data-element-id",id);element.disabled=data.readOnly;this._setRequired(element,this.data.required);element.type="checkbox";element.name=data.fieldName;if(value){element.setAttribute("checked",true);}element.setAttribute("exportValue",data.exportValue);element.tabIndex=DEFAULT_TAB_INDEX;element.addEventListener("change",function(event){var _event$target2=event.target,name=_event$target2.name,checked=_event$target2.checked;var _iterator121=_createForOfIteratorHelper(_this68._getElementsByName(name,id)),_step121;try{for(_iterator121.s();!(_step121=_iterator121.n()).done;){var checkbox=_step121.value;var curChecked=checked&&checkbox.exportValue===data.exportValue;if(checkbox.domElement){checkbox.domElement.checked=curChecked;}storage.setValue(checkbox.id,{value:curChecked});}}catch(err){_iterator121.e(err);}finally{_iterator121.f();}storage.setValue(id,{value:checked});});element.addEventListener("resetform",function(event){var defaultValue=data.defaultFieldValue||"Off";event.target.checked=defaultValue===data.exportValue;});if(this.enableScripting&&this.hasJSActions){element.addEventListener("updatefromsandbox",function(jsEvent){var actions={value:function value(event){event.target.checked=event.detail.value!=="Off";storage.setValue(id,{value:event.target.checked});}};_this68._dispatchEventFromSandbox(actions,jsEvent);});this._setEventListeners(element,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(event){return event.target.checked;});}this._setBackgroundColor(element);this._setDefaultPropertiesFromJS(element);this.container.append(element);return this.container;}}]);}(WidgetAnnotationElement);var RadioButtonWidgetAnnotationElement=/*#__PURE__*/function(_WidgetAnnotationElem4){function RadioButtonWidgetAnnotationElement(parameters){_classCallCheck(this,RadioButtonWidgetAnnotationElement);return _callSuper(this,RadioButtonWidgetAnnotationElement,[parameters,{isRenderable:parameters.renderForms}]);}_inherits(RadioButtonWidgetAnnotationElement,_WidgetAnnotationElem4);return _createClass(RadioButtonWidgetAnnotationElement,[{key:"render",value:function render(){var _this69=this;this.container.classList.add("buttonWidgetAnnotation","radioButton");var storage=this.annotationStorage;var data=this.data;var id=data.id;var value=storage.getValue(id,{value:data.fieldValue===data.buttonValue}).value;if(typeof value==="string"){value=value!==data.buttonValue;storage.setValue(id,{value:value});}if(value){var _iterator122=_createForOfIteratorHelper(this._getElementsByName(data.fieldName,id)),_step122;try{for(_iterator122.s();!(_step122=_iterator122.n()).done;){var radio=_step122.value;storage.setValue(radio.id,{value:false});}}catch(err){_iterator122.e(err);}finally{_iterator122.f();}}var element=document.createElement("input");GetElementsByNameSet.add(element);element.setAttribute("data-element-id",id);element.disabled=data.readOnly;this._setRequired(element,this.data.required);element.type="radio";element.name=data.fieldName;if(value){element.setAttribute("checked",true);}element.tabIndex=DEFAULT_TAB_INDEX;element.addEventListener("change",function(event){var _event$target3=event.target,name=_event$target3.name,checked=_event$target3.checked;var _iterator123=_createForOfIteratorHelper(_this69._getElementsByName(name,id)),_step123;try{for(_iterator123.s();!(_step123=_iterator123.n()).done;){var _radio=_step123.value;storage.setValue(_radio.id,{value:false});}}catch(err){_iterator123.e(err);}finally{_iterator123.f();}storage.setValue(id,{value:checked});});element.addEventListener("resetform",function(event){var defaultValue=data.defaultFieldValue;event.target.checked=defaultValue!==null&&defaultValue!==undefined&&defaultValue===data.buttonValue;});if(this.enableScripting&&this.hasJSActions){var pdfButtonValue=data.buttonValue;element.addEventListener("updatefromsandbox",function(jsEvent){var actions={value:function value(event){var checked=pdfButtonValue===event.detail.value;var _iterator124=_createForOfIteratorHelper(_this69._getElementsByName(event.target.name)),_step124;try{for(_iterator124.s();!(_step124=_iterator124.n()).done;){var _radio2=_step124.value;var curChecked=checked&&_radio2.id===id;if(_radio2.domElement){_radio2.domElement.checked=curChecked;}storage.setValue(_radio2.id,{value:curChecked});}}catch(err){_iterator124.e(err);}finally{_iterator124.f();}}};_this69._dispatchEventFromSandbox(actions,jsEvent);});this._setEventListeners(element,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(event){return event.target.checked;});}this._setBackgroundColor(element);this._setDefaultPropertiesFromJS(element);this.container.append(element);return this.container;}}]);}(WidgetAnnotationElement);var PushButtonWidgetAnnotationElement=/*#__PURE__*/function(_LinkAnnotationElemen){function PushButtonWidgetAnnotationElement(parameters){_classCallCheck(this,PushButtonWidgetAnnotationElement);return _callSuper(this,PushButtonWidgetAnnotationElement,[parameters,{ignoreBorder:parameters.data.hasAppearance}]);}_inherits(PushButtonWidgetAnnotationElement,_LinkAnnotationElemen);return _createClass(PushButtonWidgetAnnotationElement,[{key:"render",value:function render(){var _this70=this;var container=_superPropGet(PushButtonWidgetAnnotationElement,"render",this,3)([]);container.classList.add("buttonWidgetAnnotation","pushButton");var linkElement=container.lastChild;if(this.enableScripting&&this.hasJSActions&&linkElement){this._setDefaultPropertiesFromJS(linkElement);linkElement.addEventListener("updatefromsandbox",function(jsEvent){_this70._dispatchEventFromSandbox({},jsEvent);});}return container;}}]);}(LinkAnnotationElement);var ChoiceWidgetAnnotationElement=/*#__PURE__*/function(_WidgetAnnotationElem5){function ChoiceWidgetAnnotationElement(parameters){_classCallCheck(this,ChoiceWidgetAnnotationElement);return _callSuper(this,ChoiceWidgetAnnotationElement,[parameters,{isRenderable:parameters.renderForms}]);}_inherits(ChoiceWidgetAnnotationElement,_WidgetAnnotationElem5);return _createClass(ChoiceWidgetAnnotationElement,[{key:"render",value:function render(){var _this71=this;this.container.classList.add("choiceWidgetAnnotation");var storage=this.annotationStorage;var id=this.data.id;var storedData=storage.getValue(id,{value:this.data.fieldValue});var selectElement=document.createElement("select");GetElementsByNameSet.add(selectElement);selectElement.setAttribute("data-element-id",id);selectElement.disabled=this.data.readOnly;this._setRequired(selectElement,this.data.required);selectElement.name=this.data.fieldName;selectElement.tabIndex=DEFAULT_TAB_INDEX;var addAnEmptyEntry=this.data.combo&&this.data.options.length>0;if(!this.data.combo){selectElement.size=this.data.options.length;if(this.data.multiSelect){selectElement.multiple=true;}}selectElement.addEventListener("resetform",function(event){var defaultValue=_this71.data.defaultFieldValue;var _iterator125=_createForOfIteratorHelper(selectElement.options),_step125;try{for(_iterator125.s();!(_step125=_iterator125.n()).done;){var option=_step125.value;option.selected=option.value===defaultValue;}}catch(err){_iterator125.e(err);}finally{_iterator125.f();}});var _iterator126=_createForOfIteratorHelper(this.data.options),_step126;try{for(_iterator126.s();!(_step126=_iterator126.n()).done;){var option=_step126.value;var optionElement=document.createElement("option");optionElement.textContent=option.displayValue;optionElement.value=option.exportValue;if(storedData.value.includes(option.exportValue)){optionElement.setAttribute("selected",true);addAnEmptyEntry=false;}selectElement.append(optionElement);}}catch(err){_iterator126.e(err);}finally{_iterator126.f();}var _removeEmptyEntry=null;if(addAnEmptyEntry){var noneOptionElement=document.createElement("option");noneOptionElement.value=" ";noneOptionElement.setAttribute("hidden",true);noneOptionElement.setAttribute("selected",true);selectElement.prepend(noneOptionElement);_removeEmptyEntry=function removeEmptyEntry(){noneOptionElement.remove();selectElement.removeEventListener("input",_removeEmptyEntry);_removeEmptyEntry=null;};selectElement.addEventListener("input",_removeEmptyEntry);}var getValue=function getValue(isExport){var name=isExport?"value":"textContent";var options=selectElement.options,multiple=selectElement.multiple;if(!multiple){return options.selectedIndex===-1?null:options[options.selectedIndex][name];}return Array.prototype.filter.call(options,function(option){return option.selected;}).map(function(option){return option[name];});};var selectedValues=getValue(false);var getItems=function getItems(event){var options=event.target.options;return Array.prototype.map.call(options,function(option){return{displayValue:option.textContent,exportValue:option.value};});};if(this.enableScripting&&this.hasJSActions){selectElement.addEventListener("updatefromsandbox",function(jsEvent){var actions={value:function value(event){var _removeEmptyEntry2;(_removeEmptyEntry2=_removeEmptyEntry)===null||_removeEmptyEntry2===void 0||_removeEmptyEntry2();var value=event.detail.value;var values=new Set(Array.isArray(value)?value:[value]);var _iterator127=_createForOfIteratorHelper(selectElement.options),_step127;try{for(_iterator127.s();!(_step127=_iterator127.n()).done;){var option=_step127.value;option.selected=values.has(option.value);}}catch(err){_iterator127.e(err);}finally{_iterator127.f();}storage.setValue(id,{value:getValue(true)});selectedValues=getValue(false);},multipleSelection:function multipleSelection(event){selectElement.multiple=true;},remove:function remove(event){var options=selectElement.options;var index=event.detail.remove;options[index].selected=false;selectElement.remove(index);if(options.length>0){var i=Array.prototype.findIndex.call(options,function(option){return option.selected;});if(i===-1){options[0].selected=true;}}storage.setValue(id,{value:getValue(true),items:getItems(event)});selectedValues=getValue(false);},clear:function clear(event){while(selectElement.length!==0){selectElement.remove(0);}storage.setValue(id,{value:null,items:[]});selectedValues=getValue(false);},insert:function insert(event){var _event$detail$insert=event.detail.insert,index=_event$detail$insert.index,displayValue=_event$detail$insert.displayValue,exportValue=_event$detail$insert.exportValue;var selectChild=selectElement.children[index];var optionElement=document.createElement("option");optionElement.textContent=displayValue;optionElement.value=exportValue;if(selectChild){selectChild.before(optionElement);}else{selectElement.append(optionElement);}storage.setValue(id,{value:getValue(true),items:getItems(event)});selectedValues=getValue(false);},items:function items(event){var items=event.detail.items;while(selectElement.length!==0){selectElement.remove(0);}var _iterator128=_createForOfIteratorHelper(items),_step128;try{for(_iterator128.s();!(_step128=_iterator128.n()).done;){var item=_step128.value;var displayValue=item.displayValue,exportValue=item.exportValue;var optionElement=document.createElement("option");optionElement.textContent=displayValue;optionElement.value=exportValue;selectElement.append(optionElement);}}catch(err){_iterator128.e(err);}finally{_iterator128.f();}if(selectElement.options.length>0){selectElement.options[0].selected=true;}storage.setValue(id,{value:getValue(true),items:getItems(event)});selectedValues=getValue(false);},indices:function indices(event){var indices=new Set(event.detail.indices);var _iterator129=_createForOfIteratorHelper(event.target.options),_step129;try{for(_iterator129.s();!(_step129=_iterator129.n()).done;){var option=_step129.value;option.selected=indices.has(option.index);}}catch(err){_iterator129.e(err);}finally{_iterator129.f();}storage.setValue(id,{value:getValue(true)});selectedValues=getValue(false);},editable:function editable(event){event.target.disabled=!event.detail.editable;}};_this71._dispatchEventFromSandbox(actions,jsEvent);});selectElement.addEventListener("input",function(event){var _this71$linkService$e;var exportValue=getValue(true);var change=getValue(false);storage.setValue(id,{value:exportValue});event.preventDefault();(_this71$linkService$e=_this71.linkService.eventBus)===null||_this71$linkService$e===void 0||_this71$linkService$e.dispatch("dispatcheventinsandbox",{source:_this71,detail:{id:id,name:"Keystroke",value:selectedValues,change:change,changeEx:exportValue,willCommit:false,commitKey:1,keyDown:false}});});this._setEventListeners(selectElement,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],function(event){return event.target.value;});}else{selectElement.addEventListener("input",function(event){storage.setValue(id,{value:getValue(true)});});}if(this.data.combo){this._setTextStyle(selectElement);}else{}this._setBackgroundColor(selectElement);this._setDefaultPropertiesFromJS(selectElement);this.container.append(selectElement);return this.container;}}]);}(WidgetAnnotationElement);var PopupAnnotationElement=/*#__PURE__*/function(_AnnotationElement5){function PopupAnnotationElement(parameters){var _this72;_classCallCheck(this,PopupAnnotationElement);var data=parameters.data,elements=parameters.elements;_this72=_callSuper(this,PopupAnnotationElement,[parameters,{isRenderable:AnnotationElement._hasPopupData(data)}]);_this72.elements=elements;_this72.popup=null;return _this72;}_inherits(PopupAnnotationElement,_AnnotationElement5);return _createClass(PopupAnnotationElement,[{key:"render",value:function render(){this.container.classList.add("popupAnnotation");var popup=this.popup=new PopupElement({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open});var elementIds=[];var _iterator130=_createForOfIteratorHelper(this.elements),_step130;try{for(_iterator130.s();!(_step130=_iterator130.n()).done;){var element=_step130.value;element.popup=popup;element.container.ariaHasPopup="dialog";elementIds.push(element.data.id);element.addHighlightArea();}}catch(err){_iterator130.e(err);}finally{_iterator130.f();}this.container.setAttribute("aria-controls",elementIds.map(function(id){return"".concat(AnnotationPrefix).concat(id);}).join(","));return this.container;}}]);}(AnnotationElement);var _boundKeyDown=/*#__PURE__*/new WeakMap();var _boundHide=/*#__PURE__*/new WeakMap();var _boundShow=/*#__PURE__*/new WeakMap();var _boundToggle=/*#__PURE__*/new WeakMap();var _color=/*#__PURE__*/new WeakMap();var _container5=/*#__PURE__*/new WeakMap();var _contentsObj=/*#__PURE__*/new WeakMap();var _dateObj=/*#__PURE__*/new WeakMap();var _elements=/*#__PURE__*/new WeakMap();var _parent=/*#__PURE__*/new WeakMap();var _parentRect=/*#__PURE__*/new WeakMap();var _pinned=/*#__PURE__*/new WeakMap();var _popup=/*#__PURE__*/new WeakMap();var _position2=/*#__PURE__*/new WeakMap();var _rect2=/*#__PURE__*/new WeakMap();var _richText=/*#__PURE__*/new WeakMap();var _titleObj=/*#__PURE__*/new WeakMap();var _updates2=/*#__PURE__*/new WeakMap();var _wasVisible=/*#__PURE__*/new WeakMap();var _PopupElement_brand=/*#__PURE__*/new WeakSet();var PopupElement=/*#__PURE__*/function(){function PopupElement(_ref93){var container=_ref93.container,color=_ref93.color,elements=_ref93.elements,titleObj=_ref93.titleObj,modificationDate=_ref93.modificationDate,_contentsObj2=_ref93.contentsObj,_richText2=_ref93.richText,parent=_ref93.parent,_rect3=_ref93.rect,parentRect=_ref93.parentRect,open=_ref93.open;_classCallCheck(this,PopupElement);_classPrivateMethodInitSpec(this,_PopupElement_brand);_classPrivateFieldInitSpec(this,_boundKeyDown,_assertClassBrand(_PopupElement_brand,this,_keyDown).bind(this));_classPrivateFieldInitSpec(this,_boundHide,_assertClassBrand(_PopupElement_brand,this,_hide).bind(this));_classPrivateFieldInitSpec(this,_boundShow,_assertClassBrand(_PopupElement_brand,this,_show).bind(this));_classPrivateFieldInitSpec(this,_boundToggle,_assertClassBrand(_PopupElement_brand,this,_toggle).bind(this));_classPrivateFieldInitSpec(this,_color,null);_classPrivateFieldInitSpec(this,_container5,null);_classPrivateFieldInitSpec(this,_contentsObj,null);_classPrivateFieldInitSpec(this,_dateObj,null);_classPrivateFieldInitSpec(this,_elements,null);_classPrivateFieldInitSpec(this,_parent,null);_classPrivateFieldInitSpec(this,_parentRect,null);_classPrivateFieldInitSpec(this,_pinned,false);_classPrivateFieldInitSpec(this,_popup,null);_classPrivateFieldInitSpec(this,_position2,null);_classPrivateFieldInitSpec(this,_rect2,null);_classPrivateFieldInitSpec(this,_richText,null);_classPrivateFieldInitSpec(this,_titleObj,null);_classPrivateFieldInitSpec(this,_updates2,null);_classPrivateFieldInitSpec(this,_wasVisible,false);_classPrivateFieldSet(_container5,this,container);_classPrivateFieldSet(_titleObj,this,titleObj);_classPrivateFieldSet(_contentsObj,this,_contentsObj2);_classPrivateFieldSet(_richText,this,_richText2);_classPrivateFieldSet(_parent,this,parent);_classPrivateFieldSet(_color,this,color);_classPrivateFieldSet(_rect2,this,_rect3);_classPrivateFieldSet(_parentRect,this,parentRect);_classPrivateFieldSet(_elements,this,elements);_classPrivateFieldSet(_dateObj,this,_PDFDateString.toDateObject(modificationDate));this.trigger=elements.flatMap(function(e){return e.getElementsToTriggerPopup();});var _iterator131=_createForOfIteratorHelper(this.trigger),_step131;try{for(_iterator131.s();!(_step131=_iterator131.n()).done;){var element=_step131.value;element.addEventListener("click",_classPrivateFieldGet(_boundToggle,this));element.addEventListener("mouseenter",_classPrivateFieldGet(_boundShow,this));element.addEventListener("mouseleave",_classPrivateFieldGet(_boundHide,this));element.classList.add("popupTriggerArea");}}catch(err){_iterator131.e(err);}finally{_iterator131.f();}var _iterator132=_createForOfIteratorHelper(elements),_step132;try{for(_iterator132.s();!(_step132=_iterator132.n()).done;){var _element$container;var _element=_step132.value;(_element$container=_element.container)===null||_element$container===void 0||_element$container.addEventListener("keydown",_classPrivateFieldGet(_boundKeyDown,this));}}catch(err){_iterator132.e(err);}finally{_iterator132.f();}_classPrivateFieldGet(_container5,this).hidden=true;if(open){_assertClassBrand(_PopupElement_brand,this,_toggle).call(this);}}return _createClass(PopupElement,[{key:"render",value:function render(){if(_classPrivateFieldGet(_popup,this)){return;}var popup=_classPrivateFieldSet(_popup,this,document.createElement("div"));popup.className="popup";if(_classPrivateFieldGet(_color,this)){var baseColor=popup.style.outlineColor=_Util.makeHexColor.apply(_Util,_toConsumableArray(_classPrivateFieldGet(_color,this)));popup.style.backgroundColor="color-mix(in srgb, ".concat(baseColor," 30%, white)");}var header=document.createElement("span");header.className="header";var title=document.createElement("h1");header.append(title);var _classPrivateFieldGet66=_classPrivateFieldGet(_titleObj,this);title.dir=_classPrivateFieldGet66.dir;title.textContent=_classPrivateFieldGet66.str;popup.append(header);if(_classPrivateFieldGet(_dateObj,this)){var modificationDate=document.createElement("span");modificationDate.classList.add("popupDate");modificationDate.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string");modificationDate.setAttribute("data-l10n-args",JSON.stringify({dateObj:_classPrivateFieldGet(_dateObj,this).valueOf()}));header.append(modificationDate);}var html=_classPrivateGetter(_PopupElement_brand,this,_get_html);if(html){_XfaLayer.render({xfaHtml:html,intent:"richText",div:popup});popup.lastChild.classList.add("richText","popupContent");}else{var contents=this._formatContents(_classPrivateFieldGet(_contentsObj,this));popup.append(contents);}_classPrivateFieldGet(_container5,this).append(popup);}},{key:"_formatContents",value:function _formatContents(_ref94){var str=_ref94.str,dir=_ref94.dir;var p=document.createElement("p");p.classList.add("popupContent");p.dir=dir;var lines=str.split(/(?:\\r\\n?|\\n)/);for(var i=0,ii=lines.length;i<ii;++i){var line=lines[i];p.append(document.createTextNode(line));if(i<ii-1){p.append(document.createElement("br"));}}return p;}},{key:"updateEdited",value:function updateEdited(_ref95){var _classPrivateFieldGet67;var rect=_ref95.rect,popupContent=_ref95.popupContent;_classPrivateFieldGet(_updates2,this)||_classPrivateFieldSet(_updates2,this,{contentsObj:_classPrivateFieldGet(_contentsObj,this),richText:_classPrivateFieldGet(_richText,this)});if(rect){_classPrivateFieldSet(_position2,this,null);}if(popupContent){_classPrivateFieldSet(_richText,this,_assertClassBrand(_PopupElement_brand,this,_makePopupContent).call(this,popupContent));_classPrivateFieldSet(_contentsObj,this,null);}(_classPrivateFieldGet67=_classPrivateFieldGet(_popup,this))===null||_classPrivateFieldGet67===void 0||_classPrivateFieldGet67.remove();_classPrivateFieldSet(_popup,this,null);}},{key:"resetEdited",value:function resetEdited(){var _classPrivateFieldGet69;if(!_classPrivateFieldGet(_updates2,this)){return;}var _classPrivateFieldGet68=_classPrivateFieldGet(_updates2,this);_toSetter(_classPrivateFieldSet,[_contentsObj,this])._=_classPrivateFieldGet68.contentsObj;_toSetter(_classPrivateFieldSet,[_richText,this])._=_classPrivateFieldGet68.richText;_classPrivateFieldSet(_updates2,this,null);(_classPrivateFieldGet69=_classPrivateFieldGet(_popup,this))===null||_classPrivateFieldGet69===void 0||_classPrivateFieldGet69.remove();_classPrivateFieldSet(_popup,this,null);_classPrivateFieldSet(_position2,this,null);}},{key:"forceHide",value:function forceHide(){_classPrivateFieldSet(_wasVisible,this,this.isVisible);if(!_classPrivateFieldGet(_wasVisible,this)){return;}_classPrivateFieldGet(_container5,this).hidden=true;}},{key:"maybeShow",value:function maybeShow(){if(!_classPrivateFieldGet(_wasVisible,this)){return;}if(!_classPrivateFieldGet(_popup,this)){_assertClassBrand(_PopupElement_brand,this,_show).call(this);}_classPrivateFieldSet(_wasVisible,this,false);_classPrivateFieldGet(_container5,this).hidden=false;}},{key:"isVisible",get:function get(){return _classPrivateFieldGet(_container5,this).hidden===false;}}]);}();function _get_html(_this73){var richText=_classPrivateFieldGet(_richText,_this73);var contentsObj=_classPrivateFieldGet(_contentsObj,_this73);if(richText!==null&&richText!==void 0&&richText.str&&(!(contentsObj!==null&&contentsObj!==void 0&&contentsObj.str)||contentsObj.str===richText.str)){return _classPrivateFieldGet(_richText,_this73).html||null;}return null;}function _get_fontSize(_this74){var _classPrivateGetter5;return((_classPrivateGetter5=_classPrivateGetter(_PopupElement_brand,_this74,_get_html))===null||_classPrivateGetter5===void 0||(_classPrivateGetter5=_classPrivateGetter5.attributes)===null||_classPrivateGetter5===void 0||(_classPrivateGetter5=_classPrivateGetter5.style)===null||_classPrivateGetter5===void 0?void 0:_classPrivateGetter5.fontSize)||0;}function _get_fontColor(_this75){var _classPrivateGetter6;return((_classPrivateGetter6=_classPrivateGetter(_PopupElement_brand,_this75,_get_html))===null||_classPrivateGetter6===void 0||(_classPrivateGetter6=_classPrivateGetter6.attributes)===null||_classPrivateGetter6===void 0||(_classPrivateGetter6=_classPrivateGetter6.style)===null||_classPrivateGetter6===void 0?void 0:_classPrivateGetter6.color)||null;}function _makePopupContent(text){var popupLines=[];var popupContent={str:text,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:popupLines}]}};var lineAttributes={style:{color:_classPrivateGetter(_PopupElement_brand,this,_get_fontColor),fontSize:_classPrivateGetter(_PopupElement_brand,this,_get_fontSize)?"calc(".concat(_classPrivateGetter(_PopupElement_brand,this,_get_fontSize),"px * var(--total-scale-factor))"):""}};var _iterator182=_createForOfIteratorHelper(text.split("\\n")),_step182;try{for(_iterator182.s();!(_step182=_iterator182.n()).done;){var line=_step182.value;popupLines.push({name:"span",value:line,attributes:lineAttributes});}}catch(err){_iterator182.e(err);}finally{_iterator182.f();}return popupContent;}function _keyDown(event){if(event.altKey||event.shiftKey||event.ctrlKey||event.metaKey){return;}if(event.key==="Enter"||event.key==="Escape"&&_classPrivateFieldGet(_pinned,this)){_assertClassBrand(_PopupElement_brand,this,_toggle).call(this);}}function _setPosition(){if(_classPrivateFieldGet(_position2,this)!==null){return;}var _classPrivateFieldGet154=_classPrivateFieldGet(_parent,this),view=_classPrivateFieldGet154.page.view,_classPrivateFieldGet155=_classPrivateFieldGet154.viewport.rawDims,pageWidth=_classPrivateFieldGet155.pageWidth,pageHeight=_classPrivateFieldGet155.pageHeight,pageX=_classPrivateFieldGet155.pageX,pageY=_classPrivateFieldGet155.pageY;var useParentRect=!!_classPrivateFieldGet(_parentRect,this);var rect=useParentRect?_classPrivateFieldGet(_parentRect,this):_classPrivateFieldGet(_rect2,this);var _iterator183=_createForOfIteratorHelper(_classPrivateFieldGet(_elements,this)),_step183;try{for(_iterator183.s();!(_step183=_iterator183.n()).done;){var element=_step183.value;if(!rect||_Util.intersect(element.data.rect,rect)!==null){rect=element.data.rect;useParentRect=true;break;}}}catch(err){_iterator183.e(err);}finally{_iterator183.f();}var normalizedRect=_Util.normalizeRect([rect[0],view[3]-rect[1]+view[1],rect[2],view[3]-rect[3]+view[1]]);var HORIZONTAL_SPACE_AFTER_ANNOTATION=5;var parentWidth=useParentRect?rect[2]-rect[0]+HORIZONTAL_SPACE_AFTER_ANNOTATION:0;var popupLeft=normalizedRect[0]+parentWidth;var popupTop=normalizedRect[1];_classPrivateFieldSet(_position2,this,[100*(popupLeft-pageX)/pageWidth,100*(popupTop-pageY)/pageHeight]);var _classPrivateFieldGet156=_classPrivateFieldGet(_container5,this),style=_classPrivateFieldGet156.style;style.left="".concat(_classPrivateFieldGet(_position2,this)[0],"%");style.top="".concat(_classPrivateFieldGet(_position2,this)[1],"%");}function _toggle(){_classPrivateFieldSet(_pinned,this,!_classPrivateFieldGet(_pinned,this));if(_classPrivateFieldGet(_pinned,this)){_assertClassBrand(_PopupElement_brand,this,_show).call(this);_classPrivateFieldGet(_container5,this).addEventListener("click",_classPrivateFieldGet(_boundToggle,this));_classPrivateFieldGet(_container5,this).addEventListener("keydown",_classPrivateFieldGet(_boundKeyDown,this));}else{_assertClassBrand(_PopupElement_brand,this,_hide).call(this);_classPrivateFieldGet(_container5,this).removeEventListener("click",_classPrivateFieldGet(_boundToggle,this));_classPrivateFieldGet(_container5,this).removeEventListener("keydown",_classPrivateFieldGet(_boundKeyDown,this));}}function _show(){if(!_classPrivateFieldGet(_popup,this)){this.render();}if(!this.isVisible){_assertClassBrand(_PopupElement_brand,this,_setPosition).call(this);_classPrivateFieldGet(_container5,this).hidden=false;_classPrivateFieldGet(_container5,this).style.zIndex=parseInt(_classPrivateFieldGet(_container5,this).style.zIndex)+1000;}else if(_classPrivateFieldGet(_pinned,this)){_classPrivateFieldGet(_container5,this).classList.add("focused");}}function _hide(){_classPrivateFieldGet(_container5,this).classList.remove("focused");if(_classPrivateFieldGet(_pinned,this)||!this.isVisible){return;}_classPrivateFieldGet(_container5,this).hidden=true;_classPrivateFieldGet(_container5,this).style.zIndex=parseInt(_classPrivateFieldGet(_container5,this).style.zIndex)-1000;}var FreeTextAnnotationElement=/*#__PURE__*/function(_AnnotationElement6){function FreeTextAnnotationElement(parameters){var _this76;_classCallCheck(this,FreeTextAnnotationElement);_this76=_callSuper(this,FreeTextAnnotationElement,[parameters,{isRenderable:true,ignoreBorder:true}]);_this76.textContent=parameters.data.textContent;_this76.textPosition=parameters.data.textPosition;_this76.annotationEditorType=_AnnotationEditorType.FREETEXT;return _this76;}_inherits(FreeTextAnnotationElement,_AnnotationElement6);return _createClass(FreeTextAnnotationElement,[{key:"render",value:function render(){this.container.classList.add("freeTextAnnotation");if(this.textContent){var content=document.createElement("div");content.classList.add("annotationTextContent");content.setAttribute("role","comment");var _iterator133=_createForOfIteratorHelper(this.textContent),_step133;try{for(_iterator133.s();!(_step133=_iterator133.n()).done;){var line=_step133.value;var lineSpan=document.createElement("span");lineSpan.textContent=line;content.append(lineSpan);}}catch(err){_iterator133.e(err);}finally{_iterator133.f();}this.container.append(content);}if(!this.data.popupRef&&this.hasPopupData){this._createPopup();}this._editOnDoubleClick();return this.container;}}]);}(AnnotationElement);var _line=/*#__PURE__*/new WeakMap();var LineAnnotationElement=/*#__PURE__*/function(_AnnotationElement7){function LineAnnotationElement(parameters){var _this77;_classCallCheck(this,LineAnnotationElement);_this77=_callSuper(this,LineAnnotationElement,[parameters,{isRenderable:true,ignoreBorder:true}]);_classPrivateFieldInitSpec(_this77,_line,null);return _this77;}_inherits(LineAnnotationElement,_AnnotationElement7);return _createClass(LineAnnotationElement,[{key:"render",value:function render(){this.container.classList.add("lineAnnotation");var data=this.data,width=this.width,height=this.height;var svg=this.svgFactory.create(width,height,true);var line=_classPrivateFieldSet(_line,this,this.svgFactory.createElement("svg:line"));line.setAttribute("x1",data.rect[2]-data.lineCoordinates[0]);line.setAttribute("y1",data.rect[3]-data.lineCoordinates[1]);line.setAttribute("x2",data.rect[2]-data.lineCoordinates[2]);line.setAttribute("y2",data.rect[3]-data.lineCoordinates[3]);line.setAttribute("stroke-width",data.borderStyle.width||1);line.setAttribute("stroke","transparent");line.setAttribute("fill","transparent");svg.append(line);this.container.append(svg);if(!data.popupRef&&this.hasPopupData){this._createPopup();}return this.container;}},{key:"getElementsToTriggerPopup",value:function getElementsToTriggerPopup(){return _classPrivateFieldGet(_line,this);}},{key:"addHighlightArea",value:function addHighlightArea(){this.container.classList.add("highlightArea");}}]);}(AnnotationElement);var _square=/*#__PURE__*/new WeakMap();var SquareAnnotationElement=/*#__PURE__*/function(_AnnotationElement8){function SquareAnnotationElement(parameters){var _this78;_classCallCheck(this,SquareAnnotationElement);_this78=_callSuper(this,SquareAnnotationElement,[parameters,{isRenderable:true,ignoreBorder:true}]);_classPrivateFieldInitSpec(_this78,_square,null);return _this78;}_inherits(SquareAnnotationElement,_AnnotationElement8);return _createClass(SquareAnnotationElement,[{key:"render",value:function render(){this.container.classList.add("squareAnnotation");var data=this.data,width=this.width,height=this.height;var svg=this.svgFactory.create(width,height,true);var borderWidth=data.borderStyle.width;var square=_classPrivateFieldSet(_square,this,this.svgFactory.createElement("svg:rect"));square.setAttribute("x",borderWidth/2);square.setAttribute("y",borderWidth/2);square.setAttribute("width",width-borderWidth);square.setAttribute("height",height-borderWidth);square.setAttribute("stroke-width",borderWidth||1);square.setAttribute("stroke","transparent");square.setAttribute("fill","transparent");svg.append(square);this.container.append(svg);if(!data.popupRef&&this.hasPopupData){this._createPopup();}return this.container;}},{key:"getElementsToTriggerPopup",value:function getElementsToTriggerPopup(){return _classPrivateFieldGet(_square,this);}},{key:"addHighlightArea",value:function addHighlightArea(){this.container.classList.add("highlightArea");}}]);}(AnnotationElement);var _circle=/*#__PURE__*/new WeakMap();var CircleAnnotationElement=/*#__PURE__*/function(_AnnotationElement9){function CircleAnnotationElement(parameters){var _this79;_classCallCheck(this,CircleAnnotationElement);_this79=_callSuper(this,CircleAnnotationElement,[parameters,{isRenderable:true,ignoreBorder:true}]);_classPrivateFieldInitSpec(_this79,_circle,null);return _this79;}_inherits(CircleAnnotationElement,_AnnotationElement9);return _createClass(CircleAnnotationElement,[{key:"render",value:function render(){this.container.classList.add("circleAnnotation");var data=this.data,width=this.width,height=this.height;var svg=this.svgFactory.create(width,height,true);var borderWidth=data.borderStyle.width;var circle=_classPrivateFieldSet(_circle,this,this.svgFactory.createElement("svg:ellipse"));circle.setAttribute("cx",width/2);circle.setAttribute("cy",height/2);circle.setAttribute("rx",width/2-borderWidth/2);circle.setAttribute("ry",height/2-borderWidth/2);circle.setAttribute("stroke-width",borderWidth||1);circle.setAttribute("stroke","transparent");circle.setAttribute("fill","transparent");svg.append(circle);this.container.append(svg);if(!data.popupRef&&this.hasPopupData){this._createPopup();}return this.container;}},{key:"getElementsToTriggerPopup",value:function getElementsToTriggerPopup(){return _classPrivateFieldGet(_circle,this);}},{key:"addHighlightArea",value:function addHighlightArea(){this.container.classList.add("highlightArea");}}]);}(AnnotationElement);var _polyline=/*#__PURE__*/new WeakMap();var PolylineAnnotationElement=/*#__PURE__*/function(_AnnotationElement10){function PolylineAnnotationElement(parameters){var _this80;_classCallCheck(this,PolylineAnnotationElement);_this80=_callSuper(this,PolylineAnnotationElement,[parameters,{isRenderable:true,ignoreBorder:true}]);_classPrivateFieldInitSpec(_this80,_polyline,null);_this80.containerClassName="polylineAnnotation";_this80.svgElementName="svg:polyline";return _this80;}_inherits(PolylineAnnotationElement,_AnnotationElement10);return _createClass(PolylineAnnotationElement,[{key:"render",value:function render(){this.container.classList.add(this.containerClassName);var _this$data=this.data,rect=_this$data.rect,vertices=_this$data.vertices,borderStyle=_this$data.borderStyle,popupRef=_this$data.popupRef,width=this.width,height=this.height;if(!vertices){return this.container;}var svg=this.svgFactory.create(width,height,true);var points=[];for(var i=0,ii=vertices.length;i<ii;i+=2){var x=vertices[i]-rect[0];var y=rect[3]-vertices[i+1];points.push("".concat(x,",").concat(y));}points=points.join(" ");var polyline=_classPrivateFieldSet(_polyline,this,this.svgFactory.createElement(this.svgElementName));polyline.setAttribute("points",points);polyline.setAttribute("stroke-width",borderStyle.width||1);polyline.setAttribute("stroke","transparent");polyline.setAttribute("fill","transparent");svg.append(polyline);this.container.append(svg);if(!popupRef&&this.hasPopupData){this._createPopup();}return this.container;}},{key:"getElementsToTriggerPopup",value:function getElementsToTriggerPopup(){return _classPrivateFieldGet(_polyline,this);}},{key:"addHighlightArea",value:function addHighlightArea(){this.container.classList.add("highlightArea");}}]);}(AnnotationElement);var PolygonAnnotationElement=/*#__PURE__*/function(_PolylineAnnotationEl){function PolygonAnnotationElement(parameters){var _this81;_classCallCheck(this,PolygonAnnotationElement);_this81=_callSuper(this,PolygonAnnotationElement,[parameters]);_this81.containerClassName="polygonAnnotation";_this81.svgElementName="svg:polygon";return _this81;}_inherits(PolygonAnnotationElement,_PolylineAnnotationEl);return _createClass(PolygonAnnotationElement);}(PolylineAnnotationElement);var CaretAnnotationElement=/*#__PURE__*/function(_AnnotationElement11){function CaretAnnotationElement(parameters){_classCallCheck(this,CaretAnnotationElement);return _callSuper(this,CaretAnnotationElement,[parameters,{isRenderable:true,ignoreBorder:true}]);}_inherits(CaretAnnotationElement,_AnnotationElement11);return _createClass(CaretAnnotationElement,[{key:"render",value:function render(){this.container.classList.add("caretAnnotation");if(!this.data.popupRef&&this.hasPopupData){this._createPopup();}return this.container;}}]);}(AnnotationElement);var _polylinesGroupElement=/*#__PURE__*/new WeakMap();var _polylines=/*#__PURE__*/new WeakMap();var _InkAnnotationElement_brand=/*#__PURE__*/new WeakSet();var InkAnnotationElement=/*#__PURE__*/function(_AnnotationElement12){function InkAnnotationElement(parameters){var _this82;_classCallCheck(this,InkAnnotationElement);_this82=_callSuper(this,InkAnnotationElement,[parameters,{isRenderable:true,ignoreBorder:true}]);_classPrivateMethodInitSpec(_this82,_InkAnnotationElement_brand);_classPrivateFieldInitSpec(_this82,_polylinesGroupElement,null);_classPrivateFieldInitSpec(_this82,_polylines,[]);_this82.containerClassName="inkAnnotation";_this82.svgElementName="svg:polyline";_this82.annotationEditorType=_this82.data.it==="InkHighlight"?_AnnotationEditorType.HIGHLIGHT:_AnnotationEditorType.INK;return _this82;}_inherits(InkAnnotationElement,_AnnotationElement12);return _createClass(InkAnnotationElement,[{key:"render",value:function render(){this.container.classList.add(this.containerClassName);var _this$data2=this.data,rect=_this$data2.rect,rotation=_this$data2.rotation,inkLists=_this$data2.inkLists,borderStyle=_this$data2.borderStyle,popupRef=_this$data2.popupRef;var _assertClassBrand$cal9=_assertClassBrand(_InkAnnotationElement_brand,this,_getTransform).call(this,rotation,rect),transform=_assertClassBrand$cal9.transform,width=_assertClassBrand$cal9.width,height=_assertClassBrand$cal9.height;var svg=this.svgFactory.create(width,height,true);var g=_classPrivateFieldSet(_polylinesGroupElement,this,this.svgFactory.createElement("svg:g"));svg.append(g);g.setAttribute("stroke-width",borderStyle.width||1);g.setAttribute("stroke-linecap","round");g.setAttribute("stroke-linejoin","round");g.setAttribute("stroke-miterlimit",10);g.setAttribute("stroke","transparent");g.setAttribute("fill","transparent");g.setAttribute("transform",transform);for(var i=0,ii=inkLists.length;i<ii;i++){var polyline=this.svgFactory.createElement(this.svgElementName);_classPrivateFieldGet(_polylines,this).push(polyline);polyline.setAttribute("points",inkLists[i].join(","));g.append(polyline);}if(!popupRef&&this.hasPopupData){this._createPopup();}this.container.append(svg);this._editOnDoubleClick();return this.container;}},{key:"updateEdited",value:function updateEdited(params){_superPropGet(InkAnnotationElement,"updateEdited",this,3)([params]);var thickness=params.thickness,points=params.points,rect=params.rect;var g=_classPrivateFieldGet(_polylinesGroupElement,this);if(thickness>=0){g.setAttribute("stroke-width",thickness||1);}if(points){for(var i=0,ii=_classPrivateFieldGet(_polylines,this).length;i<ii;i++){_classPrivateFieldGet(_polylines,this)[i].setAttribute("points",points[i].join(","));}}if(rect){var _assertClassBrand$cal10=_assertClassBrand(_InkAnnotationElement_brand,this,_getTransform).call(this,this.data.rotation,rect),transform=_assertClassBrand$cal10.transform,width=_assertClassBrand$cal10.width,height=_assertClassBrand$cal10.height;var root=g.parentElement;root.setAttribute("viewBox","0 0 ".concat(width," ").concat(height));g.setAttribute("transform",transform);}}},{key:"getElementsToTriggerPopup",value:function getElementsToTriggerPopup(){return _classPrivateFieldGet(_polylines,this);}},{key:"addHighlightArea",value:function addHighlightArea(){this.container.classList.add("highlightArea");}}]);}(AnnotationElement);function _getTransform(rotation,rect){switch(rotation){case 90:return{transform:"rotate(90) translate(".concat(-rect[0],",").concat(rect[1],") scale(1,-1)"),width:rect[3]-rect[1],height:rect[2]-rect[0]};case 180:return{transform:"rotate(180) translate(".concat(-rect[2],",").concat(rect[1],") scale(1,-1)"),width:rect[2]-rect[0],height:rect[3]-rect[1]};case 270:return{transform:"rotate(270) translate(".concat(-rect[2],",").concat(rect[3],") scale(1,-1)"),width:rect[3]-rect[1],height:rect[2]-rect[0]};default:return{transform:"translate(".concat(-rect[0],",").concat(rect[3],") scale(1,-1)"),width:rect[2]-rect[0],height:rect[3]-rect[1]};}}var HighlightAnnotationElement=/*#__PURE__*/function(_AnnotationElement13){function HighlightAnnotationElement(parameters){var _this83;_classCallCheck(this,HighlightAnnotationElement);_this83=_callSuper(this,HighlightAnnotationElement,[parameters,{isRenderable:true,ignoreBorder:true,createQuadrilaterals:true}]);_this83.annotationEditorType=_AnnotationEditorType.HIGHLIGHT;return _this83;}_inherits(HighlightAnnotationElement,_AnnotationElement13);return _createClass(HighlightAnnotationElement,[{key:"render",value:function render(){if(!this.data.popupRef&&this.hasPopupData){this._createPopup();}this.container.classList.add("highlightAnnotation");this._editOnDoubleClick();return this.container;}}]);}(AnnotationElement);var UnderlineAnnotationElement=/*#__PURE__*/function(_AnnotationElement14){function UnderlineAnnotationElement(parameters){_classCallCheck(this,UnderlineAnnotationElement);return _callSuper(this,UnderlineAnnotationElement,[parameters,{isRenderable:true,ignoreBorder:true,createQuadrilaterals:true}]);}_inherits(UnderlineAnnotationElement,_AnnotationElement14);return _createClass(UnderlineAnnotationElement,[{key:"render",value:function render(){if(!this.data.popupRef&&this.hasPopupData){this._createPopup();}this.container.classList.add("underlineAnnotation");return this.container;}}]);}(AnnotationElement);var SquigglyAnnotationElement=/*#__PURE__*/function(_AnnotationElement15){function SquigglyAnnotationElement(parameters){_classCallCheck(this,SquigglyAnnotationElement);return _callSuper(this,SquigglyAnnotationElement,[parameters,{isRenderable:true,ignoreBorder:true,createQuadrilaterals:true}]);}_inherits(SquigglyAnnotationElement,_AnnotationElement15);return _createClass(SquigglyAnnotationElement,[{key:"render",value:function render(){if(!this.data.popupRef&&this.hasPopupData){this._createPopup();}this.container.classList.add("squigglyAnnotation");return this.container;}}]);}(AnnotationElement);var StrikeOutAnnotationElement=/*#__PURE__*/function(_AnnotationElement16){function StrikeOutAnnotationElement(parameters){_classCallCheck(this,StrikeOutAnnotationElement);return _callSuper(this,StrikeOutAnnotationElement,[parameters,{isRenderable:true,ignoreBorder:true,createQuadrilaterals:true}]);}_inherits(StrikeOutAnnotationElement,_AnnotationElement16);return _createClass(StrikeOutAnnotationElement,[{key:"render",value:function render(){if(!this.data.popupRef&&this.hasPopupData){this._createPopup();}this.container.classList.add("strikeoutAnnotation");return this.container;}}]);}(AnnotationElement);var StampAnnotationElement=/*#__PURE__*/function(_AnnotationElement17){function StampAnnotationElement(parameters){var _this84;_classCallCheck(this,StampAnnotationElement);_this84=_callSuper(this,StampAnnotationElement,[parameters,{isRenderable:true,ignoreBorder:true}]);_this84.annotationEditorType=_AnnotationEditorType.STAMP;return _this84;}_inherits(StampAnnotationElement,_AnnotationElement17);return _createClass(StampAnnotationElement,[{key:"render",value:function render(){this.container.classList.add("stampAnnotation");this.container.setAttribute("role","img");if(!this.data.popupRef&&this.hasPopupData){this._createPopup();}this._editOnDoubleClick();return this.container;}}]);}(AnnotationElement);var _trigger=/*#__PURE__*/new WeakMap();var _FileAttachmentAnnotationElement_brand=/*#__PURE__*/new WeakSet();var FileAttachmentAnnotationElement=/*#__PURE__*/function(_AnnotationElement18){function FileAttachmentAnnotationElement(parameters){var _this85$linkService$e;var _this85;_classCallCheck(this,FileAttachmentAnnotationElement);_this85=_callSuper(this,FileAttachmentAnnotationElement,[parameters,{isRenderable:true}]);_classPrivateMethodInitSpec(_this85,_FileAttachmentAnnotationElement_brand);_classPrivateFieldInitSpec(_this85,_trigger,null);var file=_this85.data.file;_this85.filename=file.filename;_this85.content=file.content;(_this85$linkService$e=_this85.linkService.eventBus)===null||_this85$linkService$e===void 0||_this85$linkService$e.dispatch("fileattachmentannotation",_objectSpread({source:_this85},file));return _this85;}_inherits(FileAttachmentAnnotationElement,_AnnotationElement18);return _createClass(FileAttachmentAnnotationElement,[{key:"render",value:function render(){var _this86=this;this.container.classList.add("fileAttachmentAnnotation");var container=this.container,data=this.data;var trigger;if(data.hasAppearance||data.fillAlpha===0){trigger=document.createElement("div");}else{trigger=document.createElement("img");trigger.src="".concat(this.imageResourcesPath,"annotation-").concat(/paperclip/i.test(data.name)?"paperclip":"pushpin",".svg");if(data.fillAlpha&&data.fillAlpha<1){trigger.style="filter: opacity(".concat(Math.round(data.fillAlpha*100),"%);");}}trigger.addEventListener("dblclick",_assertClassBrand(_FileAttachmentAnnotationElement_brand,this,_download).bind(this));_classPrivateFieldSet(_trigger,this,trigger);var isMac=util_FeatureTest.platform.isMac;container.addEventListener("keydown",function(evt){if(evt.key==="Enter"&&(isMac?evt.metaKey:evt.ctrlKey)){_assertClassBrand(_FileAttachmentAnnotationElement_brand,_this86,_download).call(_this86);}});if(!data.popupRef&&this.hasPopupData){this._createPopup();}else{trigger.classList.add("popupTriggerArea");}container.append(trigger);return container;}},{key:"getElementsToTriggerPopup",value:function getElementsToTriggerPopup(){return _classPrivateFieldGet(_trigger,this);}},{key:"addHighlightArea",value:function addHighlightArea(){this.container.classList.add("highlightArea");}}]);}(AnnotationElement);function _download(){var _this$downloadManager;(_this$downloadManager=this.downloadManager)===null||_this$downloadManager===void 0||_this$downloadManager.openOrDownloadData(this.content,this.filename);}var _accessibilityManager=/*#__PURE__*/new WeakMap();var _annotationCanvasMap=/*#__PURE__*/new WeakMap();var _editableAnnotations=/*#__PURE__*/new WeakMap();var _structTreeLayer=/*#__PURE__*/new WeakMap();var _AnnotationLayer_brand=/*#__PURE__*/new WeakSet();var _AnnotationLayer=/*#__PURE__*/function(){function _AnnotationLayer(_ref96){var div=_ref96.div,accessibilityManager=_ref96.accessibilityManager,annotationCanvasMap=_ref96.annotationCanvasMap,annotationEditorUIManager=_ref96.annotationEditorUIManager,page=_ref96.page,viewport=_ref96.viewport,structTreeLayer=_ref96.structTreeLayer;_classCallCheck(this,_AnnotationLayer);_classPrivateMethodInitSpec(this,_AnnotationLayer_brand);_classPrivateFieldInitSpec(this,_accessibilityManager,null);_classPrivateFieldInitSpec(this,_annotationCanvasMap,null);_classPrivateFieldInitSpec(this,_editableAnnotations,new Map());_classPrivateFieldInitSpec(this,_structTreeLayer,null);this.div=div;_classPrivateFieldSet(_accessibilityManager,this,accessibilityManager);_classPrivateFieldSet(_annotationCanvasMap,this,annotationCanvasMap);_classPrivateFieldSet(_structTreeLayer,this,structTreeLayer||null);this.page=page;this.viewport=viewport;this.zIndex=0;this._annotationEditorUIManager=annotationEditorUIManager;}return _createClass(_AnnotationLayer,[{key:"hasEditableAnnotations",value:function hasEditableAnnotations(){return _classPrivateFieldGet(_editableAnnotations,this).size>0;}},{key:"render",value:function(){var _render3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee44(params){var annotations,layer,popupToElements,elementParams,_iterator134,_step134,data,isPopupAnnotation,elements,element,_elements2,rendered,_this$_annotationEdit;return _regeneratorRuntime().wrap(function _callee44$(_context45){while(1)switch(_context45.prev=_context45.next){case 0:annotations=params.annotations;layer=this.div;_setLayerDimensions(layer,this.viewport);popupToElements=new Map();elementParams={data:null,layer:layer,linkService:params.linkService,downloadManager:params.downloadManager,imageResourcesPath:params.imageResourcesPath||"",renderForms:params.renderForms!==false,svgFactory:new _DOMSVGFactory(),annotationStorage:params.annotationStorage||new AnnotationStorage(),enableScripting:params.enableScripting===true,hasJSActions:params.hasJSActions,fieldObjects:params.fieldObjects,parent:this,elements:null};_iterator134=_createForOfIteratorHelper(annotations);_context45.prev=6;_iterator134.s();case 8:if((_step134=_iterator134.n()).done){_context45.next=34;break;}data=_step134.value;if(!data.noHTML){_context45.next=12;break;}return _context45.abrupt("continue",32);case 12:isPopupAnnotation=data.annotationType===_AnnotationType.POPUP;if(isPopupAnnotation){_context45.next=18;break;}if(!(data.rect[2]===data.rect[0]||data.rect[3]===data.rect[1])){_context45.next=16;break;}return _context45.abrupt("continue",32);case 16:_context45.next=22;break;case 18:elements=popupToElements.get(data.id);if(elements){_context45.next=21;break;}return _context45.abrupt("continue",32);case 21:elementParams.elements=elements;case 22:elementParams.data=data;element=AnnotationElementFactory.create(elementParams);if(element.isRenderable){_context45.next=26;break;}return _context45.abrupt("continue",32);case 26:if(!isPopupAnnotation&&data.popupRef){_elements2=popupToElements.get(data.popupRef);if(!_elements2){popupToElements.set(data.popupRef,[element]);}else{_elements2.push(element);}}rendered=element.render();if(data.hidden){rendered.style.visibility="hidden";}_context45.next=31;return _assertClassBrand(_AnnotationLayer_brand,this,_appendElement).call(this,rendered,data.id);case 31:if(element._isEditable){_classPrivateFieldGet(_editableAnnotations,this).set(element.data.id,element);(_this$_annotationEdit=this._annotationEditorUIManager)===null||_this$_annotationEdit===void 0||_this$_annotationEdit.renderAnnotationElement(element);}case 32:_context45.next=8;break;case 34:_context45.next=39;break;case 36:_context45.prev=36;_context45.t0=_context45["catch"](6);_iterator134.e(_context45.t0);case 39:_context45.prev=39;_iterator134.f();return _context45.finish(39);case 42:_assertClassBrand(_AnnotationLayer_brand,this,_setAnnotationCanvasMap).call(this);case 43:case"end":return _context45.stop();}},_callee44,this,[[6,36,39,42]]);}));function render(_x35){return _render3.apply(this,arguments);}return render;}()},{key:"addLinkAnnotations",value:function(){var _addLinkAnnotations=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee45(annotations,linkService){var elementParams,_iterator135,_step135,data,element,rendered;return _regeneratorRuntime().wrap(function _callee45$(_context46){while(1)switch(_context46.prev=_context46.next){case 0:elementParams={data:null,layer:this.div,linkService:linkService,svgFactory:new _DOMSVGFactory(),parent:this};_iterator135=_createForOfIteratorHelper(annotations);_context46.prev=2;_iterator135.s();case 4:if((_step135=_iterator135.n()).done){_context46.next=16;break;}data=_step135.value;data.borderStyle||(data.borderStyle=_AnnotationLayer._defaultBorderStyle);elementParams.data=data;element=AnnotationElementFactory.create(elementParams);if(element.isRenderable){_context46.next=11;break;}return _context46.abrupt("continue",14);case 11:rendered=element.render();_context46.next=14;return _assertClassBrand(_AnnotationLayer_brand,this,_appendElement).call(this,rendered,data.id);case 14:_context46.next=4;break;case 16:_context46.next=21;break;case 18:_context46.prev=18;_context46.t0=_context46["catch"](2);_iterator135.e(_context46.t0);case 21:_context46.prev=21;_iterator135.f();return _context46.finish(21);case 24:case"end":return _context46.stop();}},_callee45,this,[[2,18,21,24]]);}));function addLinkAnnotations(_x36,_x37){return _addLinkAnnotations.apply(this,arguments);}return addLinkAnnotations;}()},{key:"update",value:function update(_ref97){var viewport=_ref97.viewport;var layer=this.div;this.viewport=viewport;_setLayerDimensions(layer,{rotation:viewport.rotation});_assertClassBrand(_AnnotationLayer_brand,this,_setAnnotationCanvasMap).call(this);layer.hidden=false;}},{key:"getEditableAnnotations",value:function getEditableAnnotations(){return Array.from(_classPrivateFieldGet(_editableAnnotations,this).values());}},{key:"getEditableAnnotation",value:function getEditableAnnotation(id){return _classPrivateFieldGet(_editableAnnotations,this).get(id);}}],[{key:"_defaultBorderStyle",get:function get(){return _shadow(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:AnnotationBorderStyleType.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}));}}]);}();function _appendElement(_x68,_x69){return _appendElement2.apply(this,arguments);}function _appendElement2(){_appendElement2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee69(element,id){var _classPrivateFieldGet184,_classPrivateFieldGet185;var contentElement,annotationId,ariaAttributes,_iterator196,_step196,_step196$value,key,value;return _regeneratorRuntime().wrap(function _callee69$(_context70){while(1)switch(_context70.prev=_context70.next){case 0:contentElement=element.firstChild||element;annotationId=contentElement.id="".concat(AnnotationPrefix).concat(id);_context70.next=4;return(_classPrivateFieldGet184=_classPrivateFieldGet(_structTreeLayer,this))===null||_classPrivateFieldGet184===void 0?void 0:_classPrivateFieldGet184.getAriaAttributes(annotationId);case 4:ariaAttributes=_context70.sent;if(ariaAttributes){_iterator196=_createForOfIteratorHelper(ariaAttributes);try{for(_iterator196.s();!(_step196=_iterator196.n()).done;){_step196$value=_slicedToArray(_step196.value,2),key=_step196$value[0],value=_step196$value[1];contentElement.setAttribute(key,value);}}catch(err){_iterator196.e(err);}finally{_iterator196.f();}}this.div.append(element);(_classPrivateFieldGet185=_classPrivateFieldGet(_accessibilityManager,this))===null||_classPrivateFieldGet185===void 0||_classPrivateFieldGet185.moveElementInDOM(this.div,element,contentElement,false);case 8:case"end":return _context70.stop();}},_callee69,this);}));return _appendElement2.apply(this,arguments);}function _setAnnotationCanvasMap(){if(!_classPrivateFieldGet(_annotationCanvasMap,this)){return;}var layer=this.div;var _iterator184=_createForOfIteratorHelper(_classPrivateFieldGet(_annotationCanvasMap,this)),_step184;try{for(_iterator184.s();!(_step184=_iterator184.n()).done;){var _step184$value=_slicedToArray(_step184.value,2),id=_step184$value[0],canvas=_step184$value[1];var element=layer.querySelector("[data-annotation-id=\\"".concat(id,"\\"]"));if(!element){continue;}canvas.className="annotationContent";var firstChild=element.firstChild;if(!firstChild){element.append(canvas);}else if(firstChild.nodeName==="CANVAS"){firstChild.replaceWith(canvas);}else if(!firstChild.classList.contains("annotationContent")){firstChild.before(canvas);}else{firstChild.after(canvas);}var editableAnnotation=_classPrivateFieldGet(_editableAnnotations,this).get(id);if(!editableAnnotation){continue;}if(editableAnnotation._hasNoCanvas){var _this$_annotationEdit2;(_this$_annotationEdit2=this._annotationEditorUIManager)===null||_this$_annotationEdit2===void 0||_this$_annotationEdit2.setMissingCanvas(id,element.id,canvas);editableAnnotation._hasNoCanvas=false;}else{editableAnnotation.canvas=canvas;}}}catch(err){_iterator184.e(err);}finally{_iterator184.f();}_classPrivateFieldGet(_annotationCanvasMap,this).clear();};// ./src/display/editor/freetext.js\nvar EOL_PATTERN=/\\r\\n?|\\n/g;var _color2=/*#__PURE__*/new WeakMap();var _content=/*#__PURE__*/new WeakMap();var _editorDivId=/*#__PURE__*/new WeakMap();var _editModeAC=/*#__PURE__*/new WeakMap();var _fontSize=/*#__PURE__*/new WeakMap();var _FreeTextEditor_brand=/*#__PURE__*/new WeakSet();var FreeTextEditor=/*#__PURE__*/function(_AnnotationEditor3){function FreeTextEditor(params){var _this87;_classCallCheck(this,FreeTextEditor);_this87=_callSuper(this,FreeTextEditor,[_objectSpread(_objectSpread({},params),{},{name:"freeTextEditor"})]);_classPrivateMethodInitSpec(_this87,_FreeTextEditor_brand);_classPrivateFieldInitSpec(_this87,_color2,void 0);_classPrivateFieldInitSpec(_this87,_content,"");_classPrivateFieldInitSpec(_this87,_editorDivId,"".concat(_this87.id,"-editor"));_classPrivateFieldInitSpec(_this87,_editModeAC,null);_classPrivateFieldInitSpec(_this87,_fontSize,void 0);_classPrivateFieldSet(_color2,_this87,params.color||FreeTextEditor._defaultColor||AnnotationEditor._defaultLineColor);_classPrivateFieldSet(_fontSize,_this87,params.fontSize||FreeTextEditor._defaultFontSize);return _this87;}_inherits(FreeTextEditor,_AnnotationEditor3);return _createClass(FreeTextEditor,[{key:"updateParams",value:function updateParams(type,value){switch(type){case _AnnotationEditorParamsType.FREETEXT_SIZE:_assertClassBrand(_FreeTextEditor_brand,this,_updateFontSize).call(this,value);break;case _AnnotationEditorParamsType.FREETEXT_COLOR:_assertClassBrand(_FreeTextEditor_brand,this,_updateColor).call(this,value);break;}}},{key:"propertiesToUpdate",get:function get(){return[[_AnnotationEditorParamsType.FREETEXT_SIZE,_classPrivateFieldGet(_fontSize,this)],[_AnnotationEditorParamsType.FREETEXT_COLOR,_classPrivateFieldGet(_color2,this)]];}},{key:"_translateEmpty",value:function _translateEmpty(x,y){this._uiManager.translateSelectedEditors(x,y,true);}},{key:"getInitialTranslation",value:function getInitialTranslation(){var scale=this.parentScale;return[-FreeTextEditor._internalPadding*scale,-(FreeTextEditor._internalPadding+_classPrivateFieldGet(_fontSize,this))*scale];}},{key:"rebuild",value:function rebuild(){if(!this.parent){return;}_superPropGet(FreeTextEditor,"rebuild",this,3)([]);if(this.div===null){return;}if(!this.isAttachedToDOM){this.parent.add(this);}}},{key:"enableEditMode",value:function enableEditMode(){if(this.isInEditMode()){return;}this.parent.setEditingState(false);this.parent.updateToolbar(_AnnotationEditorType.FREETEXT);_superPropGet(FreeTextEditor,"enableEditMode",this,3)([]);this.overlayDiv.classList.remove("enabled");this.editorDiv.contentEditable=true;this._isDraggable=false;this.div.removeAttribute("aria-activedescendant");_classPrivateFieldSet(_editModeAC,this,new AbortController());var signal=this._uiManager.combinedSignal(_classPrivateFieldGet(_editModeAC,this));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:signal});this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:signal});this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:signal});this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:signal});this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:signal});}},{key:"disableEditMode",value:function disableEditMode(){var _classPrivateFieldGet70;if(!this.isInEditMode()){return;}this.parent.setEditingState(true);_superPropGet(FreeTextEditor,"disableEditMode",this,3)([]);this.overlayDiv.classList.add("enabled");this.editorDiv.contentEditable=false;this.div.setAttribute("aria-activedescendant",_classPrivateFieldGet(_editorDivId,this));this._isDraggable=true;(_classPrivateFieldGet70=_classPrivateFieldGet(_editModeAC,this))===null||_classPrivateFieldGet70===void 0||_classPrivateFieldGet70.abort();_classPrivateFieldSet(_editModeAC,this,null);this.div.focus({preventScroll:true});this.isEditing=false;this.parent.div.classList.add("freetextEditing");}},{key:"focusin",value:function focusin(event){if(!this._focusEventsAllowed){return;}_superPropGet(FreeTextEditor,"focusin",this,3)([event]);if(event.target!==this.editorDiv){this.editorDiv.focus();}}},{key:"onceAdded",value:function onceAdded(focus){var _this$_initialOptions;if(this.width){return;}this.enableEditMode();if(focus){this.editorDiv.focus();}if((_this$_initialOptions=this._initialOptions)!==null&&_this$_initialOptions!==void 0&&_this$_initialOptions.isCentered){this.center();}this._initialOptions=null;}},{key:"isEmpty",value:function isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()==="";}},{key:"remove",value:function remove(){this.isEditing=false;if(this.parent){this.parent.setEditingState(true);this.parent.div.classList.add("freetextEditing");}_superPropGet(FreeTextEditor,"remove",this,3)([]);}},{key:"commit",value:function commit(){var _this88=this;if(!this.isInEditMode()){return;}_superPropGet(FreeTextEditor,"commit",this,3)([]);this.disableEditMode();var savedText=_classPrivateFieldGet(_content,this);var newText=_classPrivateFieldSet(_content,this,_assertClassBrand(_FreeTextEditor_brand,this,_extractText).call(this).trimEnd());if(savedText===newText){return;}var setText=function setText(text){_classPrivateFieldSet(_content,_this88,text);if(!text){_this88.remove();return;}_assertClassBrand(_FreeTextEditor_brand,_this88,_setContent).call(_this88);_this88._uiManager.rebuild(_this88);_assertClassBrand(_FreeTextEditor_brand,_this88,_setEditorDimensions).call(_this88);};this.addCommands({cmd:function cmd(){setText(newText);},undo:function undo(){setText(savedText);},mustExec:false});_assertClassBrand(_FreeTextEditor_brand,this,_setEditorDimensions).call(this);}},{key:"shouldGetKeyboardEvents",value:function shouldGetKeyboardEvents(){return this.isInEditMode();}},{key:"enterInEditMode",value:function enterInEditMode(){this.enableEditMode();this.editorDiv.focus();}},{key:"dblclick",value:function dblclick(event){this.enterInEditMode();}},{key:"keydown",value:function keydown(event){if(event.target===this.div&&event.key==="Enter"){this.enterInEditMode();event.preventDefault();}}},{key:"editorDivKeydown",value:function editorDivKeydown(event){FreeTextEditor._keyboardManager.exec(this,event);}},{key:"editorDivFocus",value:function editorDivFocus(event){this.isEditing=true;}},{key:"editorDivBlur",value:function editorDivBlur(event){this.isEditing=false;}},{key:"editorDivInput",value:function editorDivInput(event){this.parent.div.classList.toggle("freetextEditing",this.isEmpty());}},{key:"disableEditing",value:function disableEditing(){this.editorDiv.setAttribute("role","comment");this.editorDiv.removeAttribute("aria-multiline");}},{key:"enableEditing",value:function enableEditing(){this.editorDiv.setAttribute("role","textbox");this.editorDiv.setAttribute("aria-multiline",true);}},{key:"render",value:function render(){if(this.div){return this.div;}var baseX,baseY;if(this._isCopy||this.annotationElementId){baseX=this.x;baseY=this.y;}_superPropGet(FreeTextEditor,"render",this,3)([]);this.editorDiv=document.createElement("div");this.editorDiv.className="internal";this.editorDiv.setAttribute("id",_classPrivateFieldGet(_editorDivId,this));this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2");this.editorDiv.setAttribute("data-l10n-attrs","default-content");this.enableEditing();this.editorDiv.contentEditable=true;var style=this.editorDiv.style;style.fontSize="calc(".concat(_classPrivateFieldGet(_fontSize,this),"px * var(--total-scale-factor))");style.color=_classPrivateFieldGet(_color2,this);this.div.append(this.editorDiv);this.overlayDiv=document.createElement("div");this.overlayDiv.classList.add("overlay","enabled");this.div.append(this.overlayDiv);bindEvents(this,this.div,["dblclick","keydown"]);if(this._isCopy||this.annotationElementId){var _this$parentDimension9=_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension9[0],parentHeight=_this$parentDimension9[1];if(this.annotationElementId){var position=this._initialData.position;var _this$getInitialTrans3=this.getInitialTranslation(),_this$getInitialTrans4=_slicedToArray(_this$getInitialTrans3,2),tx=_this$getInitialTrans4[0],ty=_this$getInitialTrans4[1];var _this$pageTranslation2=this.pageTranslationToScreen(tx,ty);var _this$pageTranslation3=_slicedToArray(_this$pageTranslation2,2);tx=_this$pageTranslation3[0];ty=_this$pageTranslation3[1];var _this$pageDimensions5=_slicedToArray(this.pageDimensions,2),pageWidth=_this$pageDimensions5[0],pageHeight=_this$pageDimensions5[1];var _this$pageTranslation4=_slicedToArray(this.pageTranslation,2),pageX=_this$pageTranslation4[0],pageY=_this$pageTranslation4[1];var posX,posY;switch(this.rotation){case 0:posX=baseX+(position[0]-pageX)/pageWidth;posY=baseY+this.height-(position[1]-pageY)/pageHeight;break;case 90:posX=baseX+(position[0]-pageX)/pageWidth;posY=baseY-(position[1]-pageY)/pageHeight;var _ref98=[ty,-tx];tx=_ref98[0];ty=_ref98[1];break;case 180:posX=baseX-this.width+(position[0]-pageX)/pageWidth;posY=baseY-(position[1]-pageY)/pageHeight;var _ref99=[-tx,-ty];tx=_ref99[0];ty=_ref99[1];break;case 270:posX=baseX+(position[0]-pageX-this.height*pageHeight)/pageWidth;posY=baseY+(position[1]-pageY-this.width*pageWidth)/pageHeight;var _ref100=[-ty,tx];tx=_ref100[0];ty=_ref100[1];break;}this.setAt(posX*parentWidth,posY*parentHeight,tx,ty);}else{this._moveAfterPaste(baseX,baseY);}_assertClassBrand(_FreeTextEditor_brand,this,_setContent).call(this);this._isDraggable=true;this.editorDiv.contentEditable=false;}else{this._isDraggable=false;this.editorDiv.contentEditable=true;}return this.div;}},{key:"editorDivPaste",value:function editorDivPaste(event){var clipboardData=event.clipboardData||window.clipboardData;var types=clipboardData.types;if(types.length===1&&types[0]==="text/plain"){return;}event.preventDefault();var paste=_deserializeContent.call(FreeTextEditor,clipboardData.getData("text")||"").replaceAll(EOL_PATTERN,"\\n");if(!paste){return;}var selection=window.getSelection();if(!selection.rangeCount){return;}this.editorDiv.normalize();selection.deleteFromDocument();var range=selection.getRangeAt(0);if(!paste.includes("\\n")){range.insertNode(document.createTextNode(paste));this.editorDiv.normalize();selection.collapseToStart();return;}var startContainer=range.startContainer,startOffset=range.startOffset;var bufferBefore=[];var bufferAfter=[];if(startContainer.nodeType===Node.TEXT_NODE){var parent=startContainer.parentElement;bufferAfter.push(startContainer.nodeValue.slice(startOffset).replaceAll(EOL_PATTERN,""));if(parent!==this.editorDiv){var buffer=bufferBefore;var _iterator136=_createForOfIteratorHelper(this.editorDiv.childNodes),_step136;try{for(_iterator136.s();!(_step136=_iterator136.n()).done;){var child=_step136.value;if(child===parent){buffer=bufferAfter;continue;}buffer.push(_getNodeContent.call(FreeTextEditor,child));}}catch(err){_iterator136.e(err);}finally{_iterator136.f();}}bufferBefore.push(startContainer.nodeValue.slice(0,startOffset).replaceAll(EOL_PATTERN,""));}else if(startContainer===this.editorDiv){var _buffer=bufferBefore;var i=0;var _iterator137=_createForOfIteratorHelper(this.editorDiv.childNodes),_step137;try{for(_iterator137.s();!(_step137=_iterator137.n()).done;){var _child=_step137.value;if(i++===startOffset){_buffer=bufferAfter;}_buffer.push(_getNodeContent.call(FreeTextEditor,_child));}}catch(err){_iterator137.e(err);}finally{_iterator137.f();}}_classPrivateFieldSet(_content,this,"".concat(bufferBefore.join("\\n")).concat(paste).concat(bufferAfter.join("\\n")));_assertClassBrand(_FreeTextEditor_brand,this,_setContent).call(this);var newRange=new Range();var beforeLength=bufferBefore.reduce(function(acc,line){return acc+line.length;},0);var _iterator138=_createForOfIteratorHelper(this.editorDiv.childNodes),_step138;try{for(_iterator138.s();!(_step138=_iterator138.n()).done;){var firstChild=_step138.value.firstChild;if(firstChild.nodeType===Node.TEXT_NODE){var length=firstChild.nodeValue.length;if(beforeLength<=length){newRange.setStart(firstChild,beforeLength);newRange.setEnd(firstChild,beforeLength);break;}beforeLength-=length;}}}catch(err){_iterator138.e(err);}finally{_iterator138.f();}selection.removeAllRanges();selection.addRange(newRange);}},{key:"contentDiv",get:function get(){return this.editorDiv;}},{key:"serialize",value:function serialize(){var isForCopying=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(this.isEmpty()){return null;}if(this.deleted){return this.serializeDeleted();}var padding=FreeTextEditor._internalPadding*this.parentScale;var rect=this.getRect(padding,padding);var color=AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:_classPrivateFieldGet(_color2,this));var serialized={annotationType:_AnnotationEditorType.FREETEXT,color:color,fontSize:_classPrivateFieldGet(_fontSize,this),value:_assertClassBrand(_FreeTextEditor_brand,this,_serializeContent).call(this),pageIndex:this.pageIndex,rect:rect,rotation:this.rotation,structTreeParentId:this._structTreeParentId};if(isForCopying){serialized.isCopy=true;return serialized;}if(this.annotationElementId&&!_assertClassBrand(_FreeTextEditor_brand,this,_hasElementChanged).call(this,serialized)){return null;}serialized.id=this.annotationElementId;return serialized;}},{key:"renderAnnotationElement",value:function renderAnnotationElement(annotation){var content=_superPropGet(FreeTextEditor,"renderAnnotationElement",this,3)([annotation]);if(this.deleted){return content;}var style=content.style;style.fontSize="calc(".concat(_classPrivateFieldGet(_fontSize,this),"px * var(--total-scale-factor))");style.color=_classPrivateFieldGet(_color2,this);content.replaceChildren();var _iterator139=_createForOfIteratorHelper(_classPrivateFieldGet(_content,this).split("\\n")),_step139;try{for(_iterator139.s();!(_step139=_iterator139.n()).done;){var line=_step139.value;var div=document.createElement("div");div.append(line?document.createTextNode(line):document.createElement("br"));content.append(div);}}catch(err){_iterator139.e(err);}finally{_iterator139.f();}var padding=FreeTextEditor._internalPadding*this.parentScale;annotation.updateEdited({rect:this.getRect(padding,padding),popupContent:_classPrivateFieldGet(_content,this)});return content;}},{key:"resetAnnotationElement",value:function resetAnnotationElement(annotation){_superPropGet(FreeTextEditor,"resetAnnotationElement",this,3)([annotation]);annotation.resetEdited();}}],[{key:"_keyboardManager",get:function get(){var proto=FreeTextEditor.prototype;var arrowChecker=function arrowChecker(self){return self.isEmpty();};var small=_AnnotationEditorUIManager.TRANSLATE_SMALL;var big=_AnnotationEditorUIManager.TRANSLATE_BIG;return _shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],proto.commitOrRemove,{bubbles:true}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],proto.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],proto._translateEmpty,{args:[-small,0],checker:arrowChecker}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],proto._translateEmpty,{args:[-big,0],checker:arrowChecker}],[["ArrowRight","mac+ArrowRight"],proto._translateEmpty,{args:[small,0],checker:arrowChecker}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],proto._translateEmpty,{args:[big,0],checker:arrowChecker}],[["ArrowUp","mac+ArrowUp"],proto._translateEmpty,{args:[0,-small],checker:arrowChecker}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],proto._translateEmpty,{args:[0,-big],checker:arrowChecker}],[["ArrowDown","mac+ArrowDown"],proto._translateEmpty,{args:[0,small],checker:arrowChecker}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],proto._translateEmpty,{args:[0,big],checker:arrowChecker}]]));}},{key:"initialize",value:function initialize(l10n,uiManager){AnnotationEditor.initialize(l10n,uiManager);var style=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(style.getPropertyValue("--freetext-padding"));}},{key:"updateDefaultParams",value:function updateDefaultParams(type,value){switch(type){case _AnnotationEditorParamsType.FREETEXT_SIZE:FreeTextEditor._defaultFontSize=value;break;case _AnnotationEditorParamsType.FREETEXT_COLOR:FreeTextEditor._defaultColor=value;break;}}},{key:"defaultPropertiesToUpdate",get:function get(){return[[_AnnotationEditorParamsType.FREETEXT_SIZE,FreeTextEditor._defaultFontSize],[_AnnotationEditorParamsType.FREETEXT_COLOR,FreeTextEditor._defaultColor||AnnotationEditor._defaultLineColor]];}},{key:"deserialize",value:function(){var _deserialize2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee46(data,parent,uiManager){var initialData,_data4,_data4$data,_data4$data$defaultAp,fontSize,fontColor,rect,rotation,id,popupRef,textContent,textPosition,pageNumber,editor;return _regeneratorRuntime().wrap(function _callee46$(_context47){while(1)switch(_context47.prev=_context47.next){case 0:initialData=null;if(!(data instanceof FreeTextAnnotationElement)){_context47.next=6;break;}_data4=data,_data4$data=_data4.data,_data4$data$defaultAp=_data4$data.defaultAppearanceData,fontSize=_data4$data$defaultAp.fontSize,fontColor=_data4$data$defaultAp.fontColor,rect=_data4$data.rect,rotation=_data4$data.rotation,id=_data4$data.id,popupRef=_data4$data.popupRef,textContent=_data4.textContent,textPosition=_data4.textPosition,pageNumber=_data4.parent.page.pageNumber;if(!(!textContent||textContent.length===0)){_context47.next=5;break;}return _context47.abrupt("return",null);case 5:initialData=data={annotationType:_AnnotationEditorType.FREETEXT,color:Array.from(fontColor),fontSize:fontSize,value:textContent.join("\\n"),position:textPosition,pageIndex:pageNumber-1,rect:rect.slice(0),rotation:rotation,id:id,deleted:false,popupRef:popupRef};case 6:_context47.next=8;return _superPropGet(FreeTextEditor,"deserialize",this,2)([data,parent,uiManager]);case 8:editor=_context47.sent;_classPrivateFieldSet(_fontSize,editor,data.fontSize);_classPrivateFieldSet(_color2,editor,_Util.makeHexColor.apply(_Util,_toConsumableArray(data.color)));_classPrivateFieldSet(_content,editor,_deserializeContent.call(FreeTextEditor,data.value));editor.annotationElementId=data.id||null;editor._initialData=initialData;return _context47.abrupt("return",editor);case 15:case"end":return _context47.stop();}},_callee46,this);}));function deserialize(_x38,_x39,_x40){return _deserialize2.apply(this,arguments);}return deserialize;}()}]);}(AnnotationEditor);_FreeTextEditor=FreeTextEditor;function _updateFontSize(fontSize){var _this117=this;var setFontsize=function setFontsize(size){_this117.editorDiv.style.fontSize="calc(".concat(size,"px * var(--total-scale-factor))");_this117.translate(0,-(size-_classPrivateFieldGet(_fontSize,_this117))*_this117.parentScale);_classPrivateFieldSet(_fontSize,_this117,size);_assertClassBrand(_FreeTextEditor_brand,_this117,_setEditorDimensions).call(_this117);};var savedFontsize=_classPrivateFieldGet(_fontSize,this);this.addCommands({cmd:setFontsize.bind(this,fontSize),undo:setFontsize.bind(this,savedFontsize),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:true,type:_AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:true,keepUndo:true});}function _updateColor(color){var _this118=this;var setColor=function setColor(col){_classPrivateFieldSet(_color2,_this118,_this118.editorDiv.style.color=col);};var savedColor=_classPrivateFieldGet(_color2,this);this.addCommands({cmd:setColor.bind(this,color),undo:setColor.bind(this,savedColor),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:true,type:_AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:true,keepUndo:true});}function _extractText(){var buffer=[];this.editorDiv.normalize();var prevChild=null;var _iterator185=_createForOfIteratorHelper(this.editorDiv.childNodes),_step185;try{for(_iterator185.s();!(_step185=_iterator185.n()).done;){var _prevChild;var child=_step185.value;if(((_prevChild=prevChild)===null||_prevChild===void 0?void 0:_prevChild.nodeType)===Node.TEXT_NODE&&child.nodeName==="BR"){continue;}buffer.push(_getNodeContent.call(_FreeTextEditor,child));prevChild=child;}}catch(err){_iterator185.e(err);}finally{_iterator185.f();}return buffer.join("\\n");}function _setEditorDimensions(){var _this$parentDimension16=_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension16[0],parentHeight=_this$parentDimension16[1];var rect;if(this.isAttachedToDOM){rect=this.div.getBoundingClientRect();}else{var currentLayer=this.currentLayer,div=this.div;var savedDisplay=div.style.display;var savedVisibility=div.classList.contains("hidden");div.classList.remove("hidden");div.style.display="hidden";currentLayer.div.append(this.div);rect=div.getBoundingClientRect();div.remove();div.style.display=savedDisplay;div.classList.toggle("hidden",savedVisibility);}if(this.rotation%180===this.parentRotation%180){this.width=rect.width/parentWidth;this.height=rect.height/parentHeight;}else{this.width=rect.height/parentWidth;this.height=rect.width/parentHeight;}this.fixAndSetPosition();}function _getNodeContent(node){return(node.nodeType===Node.TEXT_NODE?node.nodeValue:node.innerText).replaceAll(EOL_PATTERN,"");}function _setContent(){this.editorDiv.replaceChildren();if(!_classPrivateFieldGet(_content,this)){return;}var _iterator186=_createForOfIteratorHelper(_classPrivateFieldGet(_content,this).split("\\n")),_step186;try{for(_iterator186.s();!(_step186=_iterator186.n()).done;){var line=_step186.value;var div=document.createElement("div");div.append(line?document.createTextNode(line):document.createElement("br"));this.editorDiv.append(div);}}catch(err){_iterator186.e(err);}finally{_iterator186.f();}}function _serializeContent(){return _classPrivateFieldGet(_content,this).replaceAll("\\xa0"," ");}function _deserializeContent(content){return content.replaceAll(" ","\\xa0");}function _hasElementChanged(serialized){var _this$_initialData2=this._initialData,value=_this$_initialData2.value,fontSize=_this$_initialData2.fontSize,color=_this$_initialData2.color,pageIndex=_this$_initialData2.pageIndex;return this._hasBeenMoved||serialized.value!==value||serialized.fontSize!==fontSize||serialized.color.some(function(c,i){return c!==color[i];})||serialized.pageIndex!==pageIndex;}_defineProperty(FreeTextEditor,"_freeTextDefaultContent","");_defineProperty(FreeTextEditor,"_internalPadding",0);_defineProperty(FreeTextEditor,"_defaultColor",null);_defineProperty(FreeTextEditor,"_defaultFontSize",10);_defineProperty(FreeTextEditor,"_type","freetext");_defineProperty(FreeTextEditor,"_editorType",_AnnotationEditorType.FREETEXT);;// ./src/display/editor/drawers/outline.js\nvar Outline=/*#__PURE__*/function(){function Outline(){_classCallCheck(this,Outline);}return _createClass(Outline,[{key:"toSVGPath",value:function toSVGPath(){unreachable("Abstract method `toSVGPath` must be implemented.");}},{key:"box",get:function get(){unreachable("Abstract getter `box` must be implemented.");}},{key:"serialize",value:function serialize(_bbox,_rotation){unreachable("Abstract method `serialize` must be implemented.");}}],[{key:"_rescale",value:function _rescale(src,tx,ty,sx,sy,dest){dest||(dest=new Float32Array(src.length));for(var i=0,ii=src.length;i<ii;i+=2){dest[i]=tx+src[i]*sx;dest[i+1]=ty+src[i+1]*sy;}return dest;}},{key:"_rescaleAndSwap",value:function _rescaleAndSwap(src,tx,ty,sx,sy,dest){dest||(dest=new Float32Array(src.length));for(var i=0,ii=src.length;i<ii;i+=2){dest[i]=tx+src[i+1]*sx;dest[i+1]=ty+src[i]*sy;}return dest;}},{key:"_translate",value:function _translate(src,tx,ty,dest){dest||(dest=new Float32Array(src.length));for(var i=0,ii=src.length;i<ii;i+=2){dest[i]=tx+src[i];dest[i+1]=ty+src[i+1];}return dest;}},{key:"svgRound",value:function svgRound(x){return Math.round(x*10000);}},{key:"_normalizePoint",value:function _normalizePoint(x,y,parentWidth,parentHeight,rotation){switch(rotation){case 90:return[1-y/parentWidth,x/parentHeight];case 180:return[1-x/parentWidth,1-y/parentHeight];case 270:return[y/parentWidth,1-x/parentHeight];default:return[x/parentWidth,y/parentHeight];}}},{key:"_normalizePagePoint",value:function _normalizePagePoint(x,y,rotation){switch(rotation){case 90:return[1-y,x];case 180:return[1-x,1-y];case 270:return[y,1-x];default:return[x,y];}}},{key:"createBezierPoints",value:function createBezierPoints(x1,y1,x2,y2,x3,y3){return[(x1+5*x2)/6,(y1+5*y2)/6,(5*x2+x3)/6,(5*y2+y3)/6,(x2+x3)/2,(y2+y3)/2];}}]);}();_defineProperty(Outline,"PRECISION",1e-4);;// ./src/display/editor/drawers/freedraw.js\nvar _box=/*#__PURE__*/new WeakMap();var _bottom=/*#__PURE__*/new WeakMap();var _innerMargin=/*#__PURE__*/new WeakMap();var _isLTR2=/*#__PURE__*/new WeakMap();var _top=/*#__PURE__*/new WeakMap();var _last=/*#__PURE__*/new WeakMap();var _lastX=/*#__PURE__*/new WeakMap();var _lastY=/*#__PURE__*/new WeakMap();var _min=/*#__PURE__*/new WeakMap();var _min_dist=/*#__PURE__*/new WeakMap();var _scaleFactor=/*#__PURE__*/new WeakMap();var _thickness=/*#__PURE__*/new WeakMap();var _points=/*#__PURE__*/new WeakMap();var _FreeDrawOutliner_brand=/*#__PURE__*/new WeakSet();var FreeDrawOutliner=/*#__PURE__*/function(){function FreeDrawOutliner(_ref101,box,scaleFactor,thickness,isLTR){var _x41=_ref101.x,_y3=_ref101.y;var innerMargin=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;_classCallCheck(this,FreeDrawOutliner);_classPrivateMethodInitSpec(this,_FreeDrawOutliner_brand);_classPrivateFieldInitSpec(this,_box,void 0);_classPrivateFieldInitSpec(this,_bottom,[]);_classPrivateFieldInitSpec(this,_innerMargin,void 0);_classPrivateFieldInitSpec(this,_isLTR2,void 0);_classPrivateFieldInitSpec(this,_top,[]);_classPrivateFieldInitSpec(this,_last,new Float32Array(18));_classPrivateFieldInitSpec(this,_lastX,void 0);_classPrivateFieldInitSpec(this,_lastY,void 0);_classPrivateFieldInitSpec(this,_min,void 0);_classPrivateFieldInitSpec(this,_min_dist,void 0);_classPrivateFieldInitSpec(this,_scaleFactor,void 0);_classPrivateFieldInitSpec(this,_thickness,void 0);_classPrivateFieldInitSpec(this,_points,[]);_classPrivateFieldSet(_box,this,box);_classPrivateFieldSet(_thickness,this,thickness*scaleFactor);_classPrivateFieldSet(_isLTR2,this,isLTR);_classPrivateFieldGet(_last,this).set([NaN,NaN,NaN,NaN,_x41,_y3],6);_classPrivateFieldSet(_innerMargin,this,innerMargin);_classPrivateFieldSet(_min_dist,this,_MIN_DIST._*scaleFactor);_classPrivateFieldSet(_min,this,_MIN._*scaleFactor);_classPrivateFieldSet(_scaleFactor,this,scaleFactor);_classPrivateFieldGet(_points,this).push(_x41,_y3);}return _createClass(FreeDrawOutliner,[{key:"isEmpty",value:function isEmpty(){return isNaN(_classPrivateFieldGet(_last,this)[8]);}},{key:"add",value:function add(_ref102){var _classPrivateFieldGet75;var x=_ref102.x,y=_ref102.y;_classPrivateFieldSet(_lastX,this,x);_classPrivateFieldSet(_lastY,this,y);var _classPrivateFieldGet71=_classPrivateFieldGet(_box,this),_classPrivateFieldGet72=_slicedToArray(_classPrivateFieldGet71,4),layerX=_classPrivateFieldGet72[0],layerY=_classPrivateFieldGet72[1],layerWidth=_classPrivateFieldGet72[2],layerHeight=_classPrivateFieldGet72[3];var _classPrivateFieldGet73=_classPrivateFieldGet(_last,this).subarray(8,12),_classPrivateFieldGet74=_slicedToArray(_classPrivateFieldGet73,4),x1=_classPrivateFieldGet74[0],y1=_classPrivateFieldGet74[1],x2=_classPrivateFieldGet74[2],y2=_classPrivateFieldGet74[3];var diffX=x-x2;var diffY=y-y2;var d=Math.hypot(diffX,diffY);if(d<_classPrivateFieldGet(_min,this)){return false;}var diffD=d-_classPrivateFieldGet(_min_dist,this);var K=diffD/d;var shiftX=K*diffX;var shiftY=K*diffY;var x0=x1;var y0=y1;x1=x2;y1=y2;x2+=shiftX;y2+=shiftY;(_classPrivateFieldGet75=_classPrivateFieldGet(_points,this))===null||_classPrivateFieldGet75===void 0||_classPrivateFieldGet75.push(x,y);var nX=-shiftY/diffD;var nY=shiftX/diffD;var thX=nX*_classPrivateFieldGet(_thickness,this);var thY=nY*_classPrivateFieldGet(_thickness,this);_classPrivateFieldGet(_last,this).set(_classPrivateFieldGet(_last,this).subarray(2,8),0);_classPrivateFieldGet(_last,this).set([x2+thX,y2+thY],4);_classPrivateFieldGet(_last,this).set(_classPrivateFieldGet(_last,this).subarray(14,18),12);_classPrivateFieldGet(_last,this).set([x2-thX,y2-thY],16);if(isNaN(_classPrivateFieldGet(_last,this)[6])){if(_classPrivateFieldGet(_top,this).length===0){_classPrivateFieldGet(_last,this).set([x1+thX,y1+thY],2);_classPrivateFieldGet(_top,this).push(NaN,NaN,NaN,NaN,(x1+thX-layerX)/layerWidth,(y1+thY-layerY)/layerHeight);_classPrivateFieldGet(_last,this).set([x1-thX,y1-thY],14);_classPrivateFieldGet(_bottom,this).push(NaN,NaN,NaN,NaN,(x1-thX-layerX)/layerWidth,(y1-thY-layerY)/layerHeight);}_classPrivateFieldGet(_last,this).set([x0,y0,x1,y1,x2,y2],6);return!this.isEmpty();}_classPrivateFieldGet(_last,this).set([x0,y0,x1,y1,x2,y2],6);var angle=Math.abs(Math.atan2(y0-y1,x0-x1)-Math.atan2(shiftY,shiftX));if(angle<Math.PI/2){var _classPrivateFieldGet76=_classPrivateFieldGet(_last,this).subarray(2,6);var _classPrivateFieldGet77=_slicedToArray(_classPrivateFieldGet76,4);x1=_classPrivateFieldGet77[0];y1=_classPrivateFieldGet77[1];x2=_classPrivateFieldGet77[2];y2=_classPrivateFieldGet77[3];_classPrivateFieldGet(_top,this).push(NaN,NaN,NaN,NaN,((x1+x2)/2-layerX)/layerWidth,((y1+y2)/2-layerY)/layerHeight);var _classPrivateFieldGet78=_classPrivateFieldGet(_last,this).subarray(14,18);var _classPrivateFieldGet79=_slicedToArray(_classPrivateFieldGet78,4);x1=_classPrivateFieldGet79[0];y1=_classPrivateFieldGet79[1];x0=_classPrivateFieldGet79[2];y0=_classPrivateFieldGet79[3];_classPrivateFieldGet(_bottom,this).push(NaN,NaN,NaN,NaN,((x0+x1)/2-layerX)/layerWidth,((y0+y1)/2-layerY)/layerHeight);return true;}var _classPrivateFieldGet80=_classPrivateFieldGet(_last,this).subarray(0,6);var _classPrivateFieldGet81=_slicedToArray(_classPrivateFieldGet80,6);x0=_classPrivateFieldGet81[0];y0=_classPrivateFieldGet81[1];x1=_classPrivateFieldGet81[2];y1=_classPrivateFieldGet81[3];x2=_classPrivateFieldGet81[4];y2=_classPrivateFieldGet81[5];_classPrivateFieldGet(_top,this).push(((x0+5*x1)/6-layerX)/layerWidth,((y0+5*y1)/6-layerY)/layerHeight,((5*x1+x2)/6-layerX)/layerWidth,((5*y1+y2)/6-layerY)/layerHeight,((x1+x2)/2-layerX)/layerWidth,((y1+y2)/2-layerY)/layerHeight);var _classPrivateFieldGet82=_classPrivateFieldGet(_last,this).subarray(12,18);var _classPrivateFieldGet83=_slicedToArray(_classPrivateFieldGet82,6);x2=_classPrivateFieldGet83[0];y2=_classPrivateFieldGet83[1];x1=_classPrivateFieldGet83[2];y1=_classPrivateFieldGet83[3];x0=_classPrivateFieldGet83[4];y0=_classPrivateFieldGet83[5];_classPrivateFieldGet(_bottom,this).push(((x0+5*x1)/6-layerX)/layerWidth,((y0+5*y1)/6-layerY)/layerHeight,((5*x1+x2)/6-layerX)/layerWidth,((5*y1+y2)/6-layerY)/layerHeight,((x1+x2)/2-layerX)/layerWidth,((y1+y2)/2-layerY)/layerHeight);return true;}},{key:"toSVGPath",value:function toSVGPath(){if(this.isEmpty()){return"";}var top=_classPrivateFieldGet(_top,this);var bottom=_classPrivateFieldGet(_bottom,this);if(isNaN(_classPrivateFieldGet(_last,this)[6])&&!this.isEmpty()){return _assertClassBrand(_FreeDrawOutliner_brand,this,_toSVGPathTwoPoints).call(this);}var buffer=[];buffer.push("M".concat(top[4]," ").concat(top[5]));for(var i=6;i<top.length;i+=6){if(isNaN(top[i])){buffer.push("L".concat(top[i+4]," ").concat(top[i+5]));}else{buffer.push("C".concat(top[i]," ").concat(top[i+1]," ").concat(top[i+2]," ").concat(top[i+3]," ").concat(top[i+4]," ").concat(top[i+5]));}}_assertClassBrand(_FreeDrawOutliner_brand,this,_toSVGPathEnd).call(this,buffer);for(var _i23=bottom.length-6;_i23>=6;_i23-=6){if(isNaN(bottom[_i23])){buffer.push("L".concat(bottom[_i23+4]," ").concat(bottom[_i23+5]));}else{buffer.push("C".concat(bottom[_i23]," ").concat(bottom[_i23+1]," ").concat(bottom[_i23+2]," ").concat(bottom[_i23+3]," ").concat(bottom[_i23+4]," ").concat(bottom[_i23+5]));}}_assertClassBrand(_FreeDrawOutliner_brand,this,_toSVGPathStart).call(this,buffer);return buffer.join(" ");}},{key:"newFreeDrawOutline",value:function newFreeDrawOutline(outline,points,box,scaleFactor,innerMargin,isLTR){return new FreeDrawOutline(outline,points,box,scaleFactor,innerMargin,isLTR);}},{key:"getOutlines",value:function getOutlines(){var _classPrivateFieldGet86,_classPrivateFieldGet87;var top=_classPrivateFieldGet(_top,this);var bottom=_classPrivateFieldGet(_bottom,this);var last=_classPrivateFieldGet(_last,this);var _classPrivateFieldGet84=_classPrivateFieldGet(_box,this),_classPrivateFieldGet85=_slicedToArray(_classPrivateFieldGet84,4),layerX=_classPrivateFieldGet85[0],layerY=_classPrivateFieldGet85[1],layerWidth=_classPrivateFieldGet85[2],layerHeight=_classPrivateFieldGet85[3];var points=new Float32Array(((_classPrivateFieldGet86=(_classPrivateFieldGet87=_classPrivateFieldGet(_points,this))===null||_classPrivateFieldGet87===void 0?void 0:_classPrivateFieldGet87.length)!==null&&_classPrivateFieldGet86!==void 0?_classPrivateFieldGet86:0)+2);for(var i=0,ii=points.length-2;i<ii;i+=2){points[i]=(_classPrivateFieldGet(_points,this)[i]-layerX)/layerWidth;points[i+1]=(_classPrivateFieldGet(_points,this)[i+1]-layerY)/layerHeight;}points[points.length-2]=(_classPrivateFieldGet(_lastX,this)-layerX)/layerWidth;points[points.length-1]=(_classPrivateFieldGet(_lastY,this)-layerY)/layerHeight;if(isNaN(last[6])&&!this.isEmpty()){return _assertClassBrand(_FreeDrawOutliner_brand,this,_getOutlineTwoPoints).call(this,points);}var outline=new Float32Array(_classPrivateFieldGet(_top,this).length+24+_classPrivateFieldGet(_bottom,this).length);var N=top.length;for(var _i24=0;_i24<N;_i24+=2){if(isNaN(top[_i24])){outline[_i24]=outline[_i24+1]=NaN;continue;}outline[_i24]=top[_i24];outline[_i24+1]=top[_i24+1];}N=_assertClassBrand(_FreeDrawOutliner_brand,this,_getOutlineEnd).call(this,outline,N);for(var _i25=bottom.length-6;_i25>=6;_i25-=6){for(var j=0;j<6;j+=2){if(isNaN(bottom[_i25+j])){outline[N]=outline[N+1]=NaN;N+=2;continue;}outline[N]=bottom[_i25+j];outline[N+1]=bottom[_i25+j+1];N+=2;}}_assertClassBrand(_FreeDrawOutliner_brand,this,_getOutlineStart).call(this,outline,N);return this.newFreeDrawOutline(outline,points,_classPrivateFieldGet(_box,this),_classPrivateFieldGet(_scaleFactor,this),_classPrivateFieldGet(_innerMargin,this),_classPrivateFieldGet(_isLTR2,this));}}]);}();function _getLastCoords(){var lastTop=_classPrivateFieldGet(_last,this).subarray(4,6);var lastBottom=_classPrivateFieldGet(_last,this).subarray(16,18);var _classPrivateFieldGet157=_classPrivateFieldGet(_box,this),_classPrivateFieldGet158=_slicedToArray(_classPrivateFieldGet157,4),x=_classPrivateFieldGet158[0],y=_classPrivateFieldGet158[1],width=_classPrivateFieldGet158[2],height=_classPrivateFieldGet158[3];return[(_classPrivateFieldGet(_lastX,this)+(lastTop[0]-lastBottom[0])/2-x)/width,(_classPrivateFieldGet(_lastY,this)+(lastTop[1]-lastBottom[1])/2-y)/height,(_classPrivateFieldGet(_lastX,this)+(lastBottom[0]-lastTop[0])/2-x)/width,(_classPrivateFieldGet(_lastY,this)+(lastBottom[1]-lastTop[1])/2-y)/height];}function _toSVGPathTwoPoints(){var _classPrivateFieldGet159=_classPrivateFieldGet(_box,this),_classPrivateFieldGet160=_slicedToArray(_classPrivateFieldGet159,4),x=_classPrivateFieldGet160[0],y=_classPrivateFieldGet160[1],width=_classPrivateFieldGet160[2],height=_classPrivateFieldGet160[3];var _assertClassBrand$cal32=_assertClassBrand(_FreeDrawOutliner_brand,this,_getLastCoords).call(this),_assertClassBrand$cal33=_slicedToArray(_assertClassBrand$cal32,4),lastTopX=_assertClassBrand$cal33[0],lastTopY=_assertClassBrand$cal33[1],lastBottomX=_assertClassBrand$cal33[2],lastBottomY=_assertClassBrand$cal33[3];return"M".concat((_classPrivateFieldGet(_last,this)[2]-x)/width," ").concat((_classPrivateFieldGet(_last,this)[3]-y)/height," L").concat((_classPrivateFieldGet(_last,this)[4]-x)/width," ").concat((_classPrivateFieldGet(_last,this)[5]-y)/height," L").concat(lastTopX," ").concat(lastTopY," L").concat(lastBottomX," ").concat(lastBottomY," L").concat((_classPrivateFieldGet(_last,this)[16]-x)/width," ").concat((_classPrivateFieldGet(_last,this)[17]-y)/height," L").concat((_classPrivateFieldGet(_last,this)[14]-x)/width," ").concat((_classPrivateFieldGet(_last,this)[15]-y)/height," Z");}function _toSVGPathStart(buffer){var bottom=_classPrivateFieldGet(_bottom,this);buffer.push("L".concat(bottom[4]," ").concat(bottom[5]," Z"));}function _toSVGPathEnd(buffer){var _classPrivateFieldGet161=_classPrivateFieldGet(_box,this),_classPrivateFieldGet162=_slicedToArray(_classPrivateFieldGet161,4),x=_classPrivateFieldGet162[0],y=_classPrivateFieldGet162[1],width=_classPrivateFieldGet162[2],height=_classPrivateFieldGet162[3];var lastTop=_classPrivateFieldGet(_last,this).subarray(4,6);var lastBottom=_classPrivateFieldGet(_last,this).subarray(16,18);var _assertClassBrand$cal34=_assertClassBrand(_FreeDrawOutliner_brand,this,_getLastCoords).call(this),_assertClassBrand$cal35=_slicedToArray(_assertClassBrand$cal34,4),lastTopX=_assertClassBrand$cal35[0],lastTopY=_assertClassBrand$cal35[1],lastBottomX=_assertClassBrand$cal35[2],lastBottomY=_assertClassBrand$cal35[3];buffer.push("L".concat((lastTop[0]-x)/width," ").concat((lastTop[1]-y)/height," L").concat(lastTopX," ").concat(lastTopY," L").concat(lastBottomX," ").concat(lastBottomY," L").concat((lastBottom[0]-x)/width," ").concat((lastBottom[1]-y)/height));}function _getOutlineTwoPoints(points){var last=_classPrivateFieldGet(_last,this);var _classPrivateFieldGet163=_classPrivateFieldGet(_box,this),_classPrivateFieldGet164=_slicedToArray(_classPrivateFieldGet163,4),layerX=_classPrivateFieldGet164[0],layerY=_classPrivateFieldGet164[1],layerWidth=_classPrivateFieldGet164[2],layerHeight=_classPrivateFieldGet164[3];var _assertClassBrand$cal36=_assertClassBrand(_FreeDrawOutliner_brand,this,_getLastCoords).call(this),_assertClassBrand$cal37=_slicedToArray(_assertClassBrand$cal36,4),lastTopX=_assertClassBrand$cal37[0],lastTopY=_assertClassBrand$cal37[1],lastBottomX=_assertClassBrand$cal37[2],lastBottomY=_assertClassBrand$cal37[3];var outline=new Float32Array(36);outline.set([NaN,NaN,NaN,NaN,(last[2]-layerX)/layerWidth,(last[3]-layerY)/layerHeight,NaN,NaN,NaN,NaN,(last[4]-layerX)/layerWidth,(last[5]-layerY)/layerHeight,NaN,NaN,NaN,NaN,lastTopX,lastTopY,NaN,NaN,NaN,NaN,lastBottomX,lastBottomY,NaN,NaN,NaN,NaN,(last[16]-layerX)/layerWidth,(last[17]-layerY)/layerHeight,NaN,NaN,NaN,NaN,(last[14]-layerX)/layerWidth,(last[15]-layerY)/layerHeight],0);return this.newFreeDrawOutline(outline,points,_classPrivateFieldGet(_box,this),_classPrivateFieldGet(_scaleFactor,this),_classPrivateFieldGet(_innerMargin,this),_classPrivateFieldGet(_isLTR2,this));}function _getOutlineStart(outline,pos){var bottom=_classPrivateFieldGet(_bottom,this);outline.set([NaN,NaN,NaN,NaN,bottom[4],bottom[5]],pos);return pos+=6;}function _getOutlineEnd(outline,pos){var lastTop=_classPrivateFieldGet(_last,this).subarray(4,6);var lastBottom=_classPrivateFieldGet(_last,this).subarray(16,18);var _classPrivateFieldGet165=_classPrivateFieldGet(_box,this),_classPrivateFieldGet166=_slicedToArray(_classPrivateFieldGet165,4),layerX=_classPrivateFieldGet166[0],layerY=_classPrivateFieldGet166[1],layerWidth=_classPrivateFieldGet166[2],layerHeight=_classPrivateFieldGet166[3];var _assertClassBrand$cal38=_assertClassBrand(_FreeDrawOutliner_brand,this,_getLastCoords).call(this),_assertClassBrand$cal39=_slicedToArray(_assertClassBrand$cal38,4),lastTopX=_assertClassBrand$cal39[0],lastTopY=_assertClassBrand$cal39[1],lastBottomX=_assertClassBrand$cal39[2],lastBottomY=_assertClassBrand$cal39[3];outline.set([NaN,NaN,NaN,NaN,(lastTop[0]-layerX)/layerWidth,(lastTop[1]-layerY)/layerHeight,NaN,NaN,NaN,NaN,lastTopX,lastTopY,NaN,NaN,NaN,NaN,lastBottomX,lastBottomY,NaN,NaN,NaN,NaN,(lastBottom[0]-layerX)/layerWidth,(lastBottom[1]-layerY)/layerHeight],pos);return pos+=24;}var _MIN_DIST={_:8};var _MIN_DIFF={_:2};var _MIN={_:_MIN_DIST._+_MIN_DIFF._};var _box2=/*#__PURE__*/new WeakMap();var _bbox2=/*#__PURE__*/new WeakMap();var _innerMargin2=/*#__PURE__*/new WeakMap();var _isLTR3=/*#__PURE__*/new WeakMap();var _points2=/*#__PURE__*/new WeakMap();var _scaleFactor2=/*#__PURE__*/new WeakMap();var _outline=/*#__PURE__*/new WeakMap();var _FreeDrawOutline_brand=/*#__PURE__*/new WeakSet();var FreeDrawOutline=/*#__PURE__*/function(_Outline2){function FreeDrawOutline(_outline2,points,box,scaleFactor,innerMargin,_isLTR4){var _this89;_classCallCheck(this,FreeDrawOutline);_this89=_callSuper(this,FreeDrawOutline);_classPrivateMethodInitSpec(_this89,_FreeDrawOutline_brand);_classPrivateFieldInitSpec(_this89,_box2,void 0);_classPrivateFieldInitSpec(_this89,_bbox2,new Float32Array(4));_classPrivateFieldInitSpec(_this89,_innerMargin2,void 0);_classPrivateFieldInitSpec(_this89,_isLTR3,void 0);_classPrivateFieldInitSpec(_this89,_points2,void 0);_classPrivateFieldInitSpec(_this89,_scaleFactor2,void 0);_classPrivateFieldInitSpec(_this89,_outline,void 0);_classPrivateFieldSet(_outline,_this89,_outline2);_classPrivateFieldSet(_points2,_this89,points);_classPrivateFieldSet(_box2,_this89,box);_classPrivateFieldSet(_scaleFactor2,_this89,scaleFactor);_classPrivateFieldSet(_innerMargin2,_this89,innerMargin);_classPrivateFieldSet(_isLTR3,_this89,_isLTR4);_this89.lastPoint=[NaN,NaN];_assertClassBrand(_FreeDrawOutline_brand,_this89,_computeMinMax).call(_this89,_isLTR4);var _classPrivateFieldGet88=_classPrivateFieldGet(_bbox2,_this89),_classPrivateFieldGet89=_slicedToArray(_classPrivateFieldGet88,4),x=_classPrivateFieldGet89[0],y=_classPrivateFieldGet89[1],width=_classPrivateFieldGet89[2],height=_classPrivateFieldGet89[3];for(var i=0,ii=_outline2.length;i<ii;i+=2){_outline2[i]=(_outline2[i]-x)/width;_outline2[i+1]=(_outline2[i+1]-y)/height;}for(var _i26=0,_ii3=points.length;_i26<_ii3;_i26+=2){points[_i26]=(points[_i26]-x)/width;points[_i26+1]=(points[_i26+1]-y)/height;}return _this89;}_inherits(FreeDrawOutline,_Outline2);return _createClass(FreeDrawOutline,[{key:"toSVGPath",value:function toSVGPath(){var buffer=["M".concat(_classPrivateFieldGet(_outline,this)[4]," ").concat(_classPrivateFieldGet(_outline,this)[5])];for(var i=6,ii=_classPrivateFieldGet(_outline,this).length;i<ii;i+=6){if(isNaN(_classPrivateFieldGet(_outline,this)[i])){buffer.push("L".concat(_classPrivateFieldGet(_outline,this)[i+4]," ").concat(_classPrivateFieldGet(_outline,this)[i+5]));continue;}buffer.push("C".concat(_classPrivateFieldGet(_outline,this)[i]," ").concat(_classPrivateFieldGet(_outline,this)[i+1]," ").concat(_classPrivateFieldGet(_outline,this)[i+2]," ").concat(_classPrivateFieldGet(_outline,this)[i+3]," ").concat(_classPrivateFieldGet(_outline,this)[i+4]," ").concat(_classPrivateFieldGet(_outline,this)[i+5]));}buffer.push("Z");return buffer.join(" ");}},{key:"serialize",value:function serialize(_ref103,rotation){var _ref104=_slicedToArray(_ref103,4),blX=_ref104[0],blY=_ref104[1],trX=_ref104[2],trY=_ref104[3];var width=trX-blX;var height=trY-blY;var outline;var points;switch(rotation){case 0:outline=Outline._rescale(_classPrivateFieldGet(_outline,this),blX,trY,width,-height);points=Outline._rescale(_classPrivateFieldGet(_points2,this),blX,trY,width,-height);break;case 90:outline=Outline._rescaleAndSwap(_classPrivateFieldGet(_outline,this),blX,blY,width,height);points=Outline._rescaleAndSwap(_classPrivateFieldGet(_points2,this),blX,blY,width,height);break;case 180:outline=Outline._rescale(_classPrivateFieldGet(_outline,this),trX,blY,-width,height);points=Outline._rescale(_classPrivateFieldGet(_points2,this),trX,blY,-width,height);break;case 270:outline=Outline._rescaleAndSwap(_classPrivateFieldGet(_outline,this),trX,trY,-width,-height);points=Outline._rescaleAndSwap(_classPrivateFieldGet(_points2,this),trX,trY,-width,-height);break;}return{outline:Array.from(outline),points:[Array.from(points)]};}},{key:"box",get:function get(){return _classPrivateFieldGet(_bbox2,this);}},{key:"newOutliner",value:function newOutliner(point,box,scaleFactor,thickness,isLTR){var innerMargin=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;return new FreeDrawOutliner(point,box,scaleFactor,thickness,isLTR,innerMargin);}},{key:"getNewOutline",value:function getNewOutline(thickness,innerMargin){var _classPrivateFieldGet90=_classPrivateFieldGet(_bbox2,this),_classPrivateFieldGet91=_slicedToArray(_classPrivateFieldGet90,4),x=_classPrivateFieldGet91[0],y=_classPrivateFieldGet91[1],width=_classPrivateFieldGet91[2],height=_classPrivateFieldGet91[3];var _classPrivateFieldGet92=_classPrivateFieldGet(_box2,this),_classPrivateFieldGet93=_slicedToArray(_classPrivateFieldGet92,4),layerX=_classPrivateFieldGet93[0],layerY=_classPrivateFieldGet93[1],layerWidth=_classPrivateFieldGet93[2],layerHeight=_classPrivateFieldGet93[3];var sx=width*layerWidth;var sy=height*layerHeight;var tx=x*layerWidth+layerX;var ty=y*layerHeight+layerY;var outliner=this.newOutliner({x:_classPrivateFieldGet(_points2,this)[0]*sx+tx,y:_classPrivateFieldGet(_points2,this)[1]*sy+ty},_classPrivateFieldGet(_box2,this),_classPrivateFieldGet(_scaleFactor2,this),thickness,_classPrivateFieldGet(_isLTR3,this),innerMargin!==null&&innerMargin!==void 0?innerMargin:_classPrivateFieldGet(_innerMargin2,this));for(var i=2;i<_classPrivateFieldGet(_points2,this).length;i+=2){outliner.add({x:_classPrivateFieldGet(_points2,this)[i]*sx+tx,y:_classPrivateFieldGet(_points2,this)[i+1]*sy+ty});}return outliner.getOutlines();}}]);}(Outline);function _computeMinMax(isLTR){var outline=_classPrivateFieldGet(_outline,this);var lastX=outline[4];var lastY=outline[5];var minX=lastX;var minY=lastY;var maxX=lastX;var maxY=lastY;var lastPointX=lastX;var lastPointY=lastY;var ltrCallback=isLTR?Math.max:Math.min;for(var i=6,ii=outline.length;i<ii;i+=6){if(isNaN(outline[i])){minX=Math.min(minX,outline[i+4]);minY=Math.min(minY,outline[i+5]);maxX=Math.max(maxX,outline[i+4]);maxY=Math.max(maxY,outline[i+5]);if(lastPointY<outline[i+5]){lastPointX=outline[i+4];lastPointY=outline[i+5];}else if(lastPointY===outline[i+5]){lastPointX=ltrCallback(lastPointX,outline[i+4]);}}else{var _bbox5=_Util.bezierBoundingBox.apply(_Util,[lastX,lastY].concat(_toConsumableArray(outline.slice(i,i+6))));minX=Math.min(minX,_bbox5[0]);minY=Math.min(minY,_bbox5[1]);maxX=Math.max(maxX,_bbox5[2]);maxY=Math.max(maxY,_bbox5[3]);if(lastPointY<_bbox5[3]){lastPointX=_bbox5[2];lastPointY=_bbox5[3];}else if(lastPointY===_bbox5[3]){lastPointX=ltrCallback(lastPointX,_bbox5[2]);}}lastX=outline[i+4];lastY=outline[i+5];}var bbox=_classPrivateFieldGet(_bbox2,this);bbox[0]=minX-_classPrivateFieldGet(_innerMargin2,this);bbox[1]=minY-_classPrivateFieldGet(_innerMargin2,this);bbox[2]=maxX-minX+2*_classPrivateFieldGet(_innerMargin2,this);bbox[3]=maxY-minY+2*_classPrivateFieldGet(_innerMargin2,this);this.lastPoint=[lastPointX,lastPointY];};// ./src/display/editor/drawers/highlight.js\nvar _box3=/*#__PURE__*/new WeakMap();var _lastPoint=/*#__PURE__*/new WeakMap();var _verticalEdges=/*#__PURE__*/new WeakMap();var _intervals=/*#__PURE__*/new WeakMap();var _HighlightOutliner_brand=/*#__PURE__*/new WeakSet();var HighlightOutliner=/*#__PURE__*/function(){function HighlightOutliner(boxes){var borderWidth=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var innerMargin=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var isLTR=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;_classCallCheck(this,HighlightOutliner);_classPrivateMethodInitSpec(this,_HighlightOutliner_brand);_classPrivateFieldInitSpec(this,_box3,void 0);_classPrivateFieldInitSpec(this,_lastPoint,void 0);_classPrivateFieldInitSpec(this,_verticalEdges,[]);_classPrivateFieldInitSpec(this,_intervals,[]);var minX=Infinity;var maxX=-Infinity;var minY=Infinity;var maxY=-Infinity;var NUMBER_OF_DIGITS=4;var EPSILON=Math.pow(10,-NUMBER_OF_DIGITS);var _iterator140=_createForOfIteratorHelper(boxes),_step140;try{for(_iterator140.s();!(_step140=_iterator140.n()).done;){var _step140$value=_step140.value,x=_step140$value.x,y=_step140$value.y,width=_step140$value.width,height=_step140$value.height;var x1=Math.floor((x-borderWidth)/EPSILON)*EPSILON;var x2=Math.ceil((x+width+borderWidth)/EPSILON)*EPSILON;var y1=Math.floor((y-borderWidth)/EPSILON)*EPSILON;var y2=Math.ceil((y+height+borderWidth)/EPSILON)*EPSILON;var left=[x1,y1,y2,true];var right=[x2,y1,y2,false];_classPrivateFieldGet(_verticalEdges,this).push(left,right);minX=Math.min(minX,x1);maxX=Math.max(maxX,x2);minY=Math.min(minY,y1);maxY=Math.max(maxY,y2);}}catch(err){_iterator140.e(err);}finally{_iterator140.f();}var bboxWidth=maxX-minX+2*innerMargin;var bboxHeight=maxY-minY+2*innerMargin;var shiftedMinX=minX-innerMargin;var shiftedMinY=minY-innerMargin;var lastEdge=_classPrivateFieldGet(_verticalEdges,this).at(isLTR?-1:-2);var lastPoint=[lastEdge[0],lastEdge[2]];var _iterator141=_createForOfIteratorHelper(_classPrivateFieldGet(_verticalEdges,this)),_step141;try{for(_iterator141.s();!(_step141=_iterator141.n()).done;){var edge=_step141.value;var _edge=_slicedToArray(edge,3),_x42=_edge[0],_y4=_edge[1],_y5=_edge[2];edge[0]=(_x42-shiftedMinX)/bboxWidth;edge[1]=(_y4-shiftedMinY)/bboxHeight;edge[2]=(_y5-shiftedMinY)/bboxHeight;}}catch(err){_iterator141.e(err);}finally{_iterator141.f();}_classPrivateFieldSet(_box3,this,new Float32Array([shiftedMinX,shiftedMinY,bboxWidth,bboxHeight]));_classPrivateFieldSet(_lastPoint,this,lastPoint);}return _createClass(HighlightOutliner,[{key:"getOutlines",value:function getOutlines(){_classPrivateFieldGet(_verticalEdges,this).sort(function(a,b){return a[0]-b[0]||a[1]-b[1]||a[2]-b[2];});var outlineVerticalEdges=[];var _iterator142=_createForOfIteratorHelper(_classPrivateFieldGet(_verticalEdges,this)),_step142;try{for(_iterator142.s();!(_step142=_iterator142.n()).done;){var edge=_step142.value;if(edge[3]){outlineVerticalEdges.push.apply(outlineVerticalEdges,_toConsumableArray(_assertClassBrand(_HighlightOutliner_brand,this,_breakEdge).call(this,edge)));_assertClassBrand(_HighlightOutliner_brand,this,_insert).call(this,edge);}else{_assertClassBrand(_HighlightOutliner_brand,this,_remove).call(this,edge);outlineVerticalEdges.push.apply(outlineVerticalEdges,_toConsumableArray(_assertClassBrand(_HighlightOutliner_brand,this,_breakEdge).call(this,edge)));}}}catch(err){_iterator142.e(err);}finally{_iterator142.f();}return _assertClassBrand(_HighlightOutliner_brand,this,_getOutlines).call(this,outlineVerticalEdges);}}]);}();function _getOutlines(outlineVerticalEdges){var edges=[];var allEdges=new Set();var _iterator187=_createForOfIteratorHelper(outlineVerticalEdges),_step187;try{for(_iterator187.s();!(_step187=_iterator187.n()).done;){var _edge5=_step187.value;var _edge6=_slicedToArray(_edge5,3),_x70=_edge6[0],_y7=_edge6[1],_y8=_edge6[2];edges.push([_x70,_y7,_edge5],[_x70,_y8,_edge5]);}}catch(err){_iterator187.e(err);}finally{_iterator187.f();}edges.sort(function(a,b){return a[1]-b[1]||a[0]-b[0];});for(var i=0,ii=edges.length;i<ii;i+=2){var edge1=edges[i][2];var edge2=edges[i+1][2];edge1.push(edge2);edge2.push(edge1);allEdges.add(edge1);allEdges.add(edge2);}var outlines=[];var outline;while(allEdges.size>0){var edge=allEdges.values().next().value;var _edge2=_slicedToArray(edge,5),x=_edge2[0],y1=_edge2[1],y2=_edge2[2],_edge3=_edge2[3],_edge4=_edge2[4];allEdges["delete"](edge);var lastPointX=x;var lastPointY=y1;outline=[x,y2];outlines.push(outline);while(true){var e=void 0;if(allEdges.has(_edge3)){e=_edge3;}else if(allEdges.has(_edge4)){e=_edge4;}else{break;}allEdges["delete"](e);var _e=e;var _e2=_slicedToArray(_e,5);x=_e2[0];y1=_e2[1];y2=_e2[2];_edge3=_e2[3];_edge4=_e2[4];if(lastPointX!==x){outline.push(lastPointX,lastPointY,x,lastPointY===y1?y1:y2);lastPointX=x;}lastPointY=lastPointY===y1?y2:y1;}outline.push(lastPointX,lastPointY);}return new HighlightOutline(outlines,_classPrivateFieldGet(_box3,this),_classPrivateFieldGet(_lastPoint,this));}function _binarySearch(y){var array=_classPrivateFieldGet(_intervals,this);var start=0;var end=array.length-1;while(start<=end){var middle=start+end>>1;var y1=array[middle][0];if(y1===y){return middle;}if(y1<y){start=middle+1;}else{end=middle-1;}}return end+1;}function _insert(_ref143){var _ref144=_slicedToArray(_ref143,3),y1=_ref144[1],y2=_ref144[2];var index=_assertClassBrand(_HighlightOutliner_brand,this,_binarySearch).call(this,y1);_classPrivateFieldGet(_intervals,this).splice(index,0,[y1,y2]);}function _remove(_ref145){var _ref146=_slicedToArray(_ref145,3),y1=_ref146[1],y2=_ref146[2];var index=_assertClassBrand(_HighlightOutliner_brand,this,_binarySearch).call(this,y1);for(var i=index;i<_classPrivateFieldGet(_intervals,this).length;i++){var _classPrivateFieldGet167=_slicedToArray(_classPrivateFieldGet(_intervals,this)[i],2),start=_classPrivateFieldGet167[0],end=_classPrivateFieldGet167[1];if(start!==y1){break;}if(start===y1&&end===y2){_classPrivateFieldGet(_intervals,this).splice(i,1);return;}}for(var _i36=index-1;_i36>=0;_i36--){var _classPrivateFieldGet168=_slicedToArray(_classPrivateFieldGet(_intervals,this)[_i36],2),_start=_classPrivateFieldGet168[0],_end=_classPrivateFieldGet168[1];if(_start!==y1){break;}if(_start===y1&&_end===y2){_classPrivateFieldGet(_intervals,this).splice(_i36,1);return;}}}function _breakEdge(edge){var _edge7=_slicedToArray(edge,3),x=_edge7[0],y1=_edge7[1],y2=_edge7[2];var results=[[x,y1,y2]];var index=_assertClassBrand(_HighlightOutliner_brand,this,_binarySearch).call(this,y2);for(var i=0;i<index;i++){var _classPrivateFieldGet169=_slicedToArray(_classPrivateFieldGet(_intervals,this)[i],2),start=_classPrivateFieldGet169[0],end=_classPrivateFieldGet169[1];for(var j=0,jj=results.length;j<jj;j++){var _results$j=_slicedToArray(results[j],3),y3=_results$j[1],y4=_results$j[2];if(end<=y3||y4<=start){continue;}if(y3>=start){if(y4>end){results[j][1]=end;}else{if(jj===1){return[];}results.splice(j,1);j--;jj--;}continue;}results[j][2]=start;if(y4>end){results.push([x,end,y4]);}}}return results;}var _box4=/*#__PURE__*/new WeakMap();var _outlines=/*#__PURE__*/new WeakMap();var HighlightOutline=/*#__PURE__*/function(_Outline3){function HighlightOutline(outlines,box,lastPoint){var _this90;_classCallCheck(this,HighlightOutline);_this90=_callSuper(this,HighlightOutline);_classPrivateFieldInitSpec(_this90,_box4,void 0);_classPrivateFieldInitSpec(_this90,_outlines,void 0);_classPrivateFieldSet(_outlines,_this90,outlines);_classPrivateFieldSet(_box4,_this90,box);_this90.lastPoint=lastPoint;return _this90;}_inherits(HighlightOutline,_Outline3);return _createClass(HighlightOutline,[{key:"toSVGPath",value:function toSVGPath(){var buffer=[];var _iterator143=_createForOfIteratorHelper(_classPrivateFieldGet(_outlines,this)),_step143;try{for(_iterator143.s();!(_step143=_iterator143.n()).done;){var polygon=_step143.value;var _polygon=_slicedToArray(polygon,2),prevX=_polygon[0],prevY=_polygon[1];buffer.push("M".concat(prevX," ").concat(prevY));for(var i=2;i<polygon.length;i+=2){var x=polygon[i];var y=polygon[i+1];if(x===prevX){buffer.push("V".concat(y));prevY=y;}else if(y===prevY){buffer.push("H".concat(x));prevX=x;}}buffer.push("Z");}}catch(err){_iterator143.e(err);}finally{_iterator143.f();}return buffer.join(" ");}},{key:"serialize",value:function serialize(_ref105,_rotation){var _ref106=_slicedToArray(_ref105,4),blX=_ref106[0],blY=_ref106[1],trX=_ref106[2],trY=_ref106[3];var outlines=[];var width=trX-blX;var height=trY-blY;var _iterator144=_createForOfIteratorHelper(_classPrivateFieldGet(_outlines,this)),_step144;try{for(_iterator144.s();!(_step144=_iterator144.n()).done;){var outline=_step144.value;var points=new Array(outline.length);for(var i=0;i<outline.length;i+=2){points[i]=blX+outline[i]*width;points[i+1]=trY-outline[i+1]*height;}outlines.push(points);}}catch(err){_iterator144.e(err);}finally{_iterator144.f();}return outlines;}},{key:"box",get:function get(){return _classPrivateFieldGet(_box4,this);}},{key:"classNamesForOutlining",get:function get(){return["highlightOutline"];}}]);}(Outline);var FreeHighlightOutliner=/*#__PURE__*/function(_FreeDrawOutliner2){function FreeHighlightOutliner(){_classCallCheck(this,FreeHighlightOutliner);return _callSuper(this,FreeHighlightOutliner,arguments);}_inherits(FreeHighlightOutliner,_FreeDrawOutliner2);return _createClass(FreeHighlightOutliner,[{key:"newFreeDrawOutline",value:function newFreeDrawOutline(outline,points,box,scaleFactor,innerMargin,isLTR){return new FreeHighlightOutline(outline,points,box,scaleFactor,innerMargin,isLTR);}}]);}(FreeDrawOutliner);var FreeHighlightOutline=/*#__PURE__*/function(_FreeDrawOutline2){function FreeHighlightOutline(){_classCallCheck(this,FreeHighlightOutline);return _callSuper(this,FreeHighlightOutline,arguments);}_inherits(FreeHighlightOutline,_FreeDrawOutline2);return _createClass(FreeHighlightOutline,[{key:"newOutliner",value:function newOutliner(point,box,scaleFactor,thickness,isLTR){var innerMargin=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;return new FreeHighlightOutliner(point,box,scaleFactor,thickness,isLTR,innerMargin);}}]);}(FreeDrawOutline);;// ./src/display/editor/color_picker.js\nvar _button=/*#__PURE__*/new WeakMap();var _buttonSwatch=/*#__PURE__*/new WeakMap();var _defaultColor=/*#__PURE__*/new WeakMap();var _dropdown=/*#__PURE__*/new WeakMap();var _dropdownWasFromKeyboard=/*#__PURE__*/new WeakMap();var _isMainColorPicker=/*#__PURE__*/new WeakMap();var _editor3=/*#__PURE__*/new WeakMap();var _eventBus=/*#__PURE__*/new WeakMap();var _openDropdownAC=/*#__PURE__*/new WeakMap();var _uiManager3=/*#__PURE__*/new WeakMap();var _type3=/*#__PURE__*/new WeakMap();var _ColorPicker_brand=/*#__PURE__*/new WeakSet();var _ColorPicker=/*#__PURE__*/function(){function _ColorPicker(_ref107){var _classPrivateFieldGet94;var _ref107$editor=_ref107.editor,editor=_ref107$editor===void 0?null:_ref107$editor,_ref107$uiManager=_ref107.uiManager,uiManager=_ref107$uiManager===void 0?null:_ref107$uiManager;_classCallCheck(this,_ColorPicker);_classPrivateMethodInitSpec(this,_ColorPicker_brand);_classPrivateFieldInitSpec(this,_button,null);_classPrivateFieldInitSpec(this,_buttonSwatch,null);_classPrivateFieldInitSpec(this,_defaultColor,void 0);_classPrivateFieldInitSpec(this,_dropdown,null);_classPrivateFieldInitSpec(this,_dropdownWasFromKeyboard,false);_classPrivateFieldInitSpec(this,_isMainColorPicker,false);_classPrivateFieldInitSpec(this,_editor3,null);_classPrivateFieldInitSpec(this,_eventBus,void 0);_classPrivateFieldInitSpec(this,_openDropdownAC,null);_classPrivateFieldInitSpec(this,_uiManager3,null);_classPrivateFieldInitSpec(this,_type3,void 0);if(editor){_classPrivateFieldSet(_isMainColorPicker,this,false);_classPrivateFieldSet(_type3,this,_AnnotationEditorParamsType.HIGHLIGHT_COLOR);_classPrivateFieldSet(_editor3,this,editor);}else{_classPrivateFieldSet(_isMainColorPicker,this,true);_classPrivateFieldSet(_type3,this,_AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR);}_classPrivateFieldSet(_uiManager3,this,(editor===null||editor===void 0?void 0:editor._uiManager)||uiManager);_classPrivateFieldSet(_eventBus,this,_classPrivateFieldGet(_uiManager3,this)._eventBus);_classPrivateFieldSet(_defaultColor,this,(editor===null||editor===void 0?void 0:editor.color)||((_classPrivateFieldGet94=_classPrivateFieldGet(_uiManager3,this))===null||_classPrivateFieldGet94===void 0?void 0:_classPrivateFieldGet94.highlightColors.values().next().value)||"#FFFF98");_l10nColor._||(_l10nColor._=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}));}return _createClass(_ColorPicker,[{key:"renderButton",value:function renderButton(){var button=_classPrivateFieldSet(_button,this,document.createElement("button"));button.className="colorPicker";button.tabIndex="0";button.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button");button.setAttribute("aria-haspopup",true);var signal=_classPrivateFieldGet(_uiManager3,this)._signal;button.addEventListener("click",_assertClassBrand(_ColorPicker_brand,this,_openDropdown).bind(this),{signal:signal});button.addEventListener("keydown",_assertClassBrand(_ColorPicker_brand,this,_keyDown2).bind(this),{signal:signal});var swatch=_classPrivateFieldSet(_buttonSwatch,this,document.createElement("span"));swatch.className="swatch";swatch.setAttribute("aria-hidden",true);swatch.style.backgroundColor=_classPrivateFieldGet(_defaultColor,this);button.append(swatch);return button;}},{key:"renderMainDropdown",value:function renderMainDropdown(){var dropdown=_classPrivateFieldSet(_dropdown,this,_assertClassBrand(_ColorPicker_brand,this,_getDropdownRoot).call(this));dropdown.setAttribute("aria-orientation","horizontal");dropdown.setAttribute("aria-labelledby","highlightColorPickerLabel");return dropdown;}},{key:"_colorSelectFromKeyboard",value:function _colorSelectFromKeyboard(event){if(event.target===_classPrivateFieldGet(_button,this)){_assertClassBrand(_ColorPicker_brand,this,_openDropdown).call(this,event);return;}var color=event.target.getAttribute("data-color");if(!color){return;}_assertClassBrand(_ColorPicker_brand,this,_colorSelect).call(this,color,event);}},{key:"_moveToNext",value:function _moveToNext(event){var _event$target$nextSib;if(!_classPrivateGetter(_ColorPicker_brand,this,_get_isDropdownVisible)){_assertClassBrand(_ColorPicker_brand,this,_openDropdown).call(this,event);return;}if(event.target===_classPrivateFieldGet(_button,this)){var _classPrivateFieldGet95;(_classPrivateFieldGet95=_classPrivateFieldGet(_dropdown,this).firstChild)===null||_classPrivateFieldGet95===void 0||_classPrivateFieldGet95.focus();return;}(_event$target$nextSib=event.target.nextSibling)===null||_event$target$nextSib===void 0||_event$target$nextSib.focus();}},{key:"_moveToPrevious",value:function _moveToPrevious(event){var _classPrivateFieldGet96,_event$target$previou;if(event.target===((_classPrivateFieldGet96=_classPrivateFieldGet(_dropdown,this))===null||_classPrivateFieldGet96===void 0?void 0:_classPrivateFieldGet96.firstChild)||event.target===_classPrivateFieldGet(_button,this)){if(_classPrivateGetter(_ColorPicker_brand,this,_get_isDropdownVisible)){this._hideDropdownFromKeyboard();}return;}if(!_classPrivateGetter(_ColorPicker_brand,this,_get_isDropdownVisible)){_assertClassBrand(_ColorPicker_brand,this,_openDropdown).call(this,event);}(_event$target$previou=event.target.previousSibling)===null||_event$target$previou===void 0||_event$target$previou.focus();}},{key:"_moveToBeginning",value:function _moveToBeginning(event){var _classPrivateFieldGet97;if(!_classPrivateGetter(_ColorPicker_brand,this,_get_isDropdownVisible)){_assertClassBrand(_ColorPicker_brand,this,_openDropdown).call(this,event);return;}(_classPrivateFieldGet97=_classPrivateFieldGet(_dropdown,this).firstChild)===null||_classPrivateFieldGet97===void 0||_classPrivateFieldGet97.focus();}},{key:"_moveToEnd",value:function _moveToEnd(event){var _classPrivateFieldGet98;if(!_classPrivateGetter(_ColorPicker_brand,this,_get_isDropdownVisible)){_assertClassBrand(_ColorPicker_brand,this,_openDropdown).call(this,event);return;}(_classPrivateFieldGet98=_classPrivateFieldGet(_dropdown,this).lastChild)===null||_classPrivateFieldGet98===void 0||_classPrivateFieldGet98.focus();}},{key:"hideDropdown",value:function hideDropdown(){var _classPrivateFieldGet99,_classPrivateFieldGet100;(_classPrivateFieldGet99=_classPrivateFieldGet(_dropdown,this))===null||_classPrivateFieldGet99===void 0||_classPrivateFieldGet99.classList.add("hidden");(_classPrivateFieldGet100=_classPrivateFieldGet(_openDropdownAC,this))===null||_classPrivateFieldGet100===void 0||_classPrivateFieldGet100.abort();_classPrivateFieldSet(_openDropdownAC,this,null);}},{key:"_hideDropdownFromKeyboard",value:function _hideDropdownFromKeyboard(){if(_classPrivateFieldGet(_isMainColorPicker,this)){return;}if(!_classPrivateGetter(_ColorPicker_brand,this,_get_isDropdownVisible)){var _classPrivateFieldGet101;(_classPrivateFieldGet101=_classPrivateFieldGet(_editor3,this))===null||_classPrivateFieldGet101===void 0||_classPrivateFieldGet101.unselect();return;}this.hideDropdown();_classPrivateFieldGet(_button,this).focus({preventScroll:true,focusVisible:_classPrivateFieldGet(_dropdownWasFromKeyboard,this)});}},{key:"updateColor",value:function updateColor(color){if(_classPrivateFieldGet(_buttonSwatch,this)){_classPrivateFieldGet(_buttonSwatch,this).style.backgroundColor=color;}if(!_classPrivateFieldGet(_dropdown,this)){return;}var i=_classPrivateFieldGet(_uiManager3,this).highlightColors.values();var _iterator145=_createForOfIteratorHelper(_classPrivateFieldGet(_dropdown,this).children),_step145;try{for(_iterator145.s();!(_step145=_iterator145.n()).done;){var child=_step145.value;child.setAttribute("aria-selected",i.next().value===color);}}catch(err){_iterator145.e(err);}finally{_iterator145.f();}}},{key:"destroy",value:function destroy(){var _classPrivateFieldGet102,_classPrivateFieldGet103;(_classPrivateFieldGet102=_classPrivateFieldGet(_button,this))===null||_classPrivateFieldGet102===void 0||_classPrivateFieldGet102.remove();_classPrivateFieldSet(_button,this,null);_classPrivateFieldSet(_buttonSwatch,this,null);(_classPrivateFieldGet103=_classPrivateFieldGet(_dropdown,this))===null||_classPrivateFieldGet103===void 0||_classPrivateFieldGet103.remove();_classPrivateFieldSet(_dropdown,this,null);}}],[{key:"_keyboardManager",get:function get(){return _shadow(this,"_keyboardManager",new KeyboardManager([[["Escape","mac+Escape"],_ColorPicker.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],_ColorPicker.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],_ColorPicker.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],_ColorPicker.prototype._moveToPrevious],[["Home","mac+Home"],_ColorPicker.prototype._moveToBeginning],[["End","mac+End"],_ColorPicker.prototype._moveToEnd]]));}}]);}();_ColorPicker2=_ColorPicker;function _getDropdownRoot(){var div=document.createElement("div");var signal=_classPrivateFieldGet(_uiManager3,this)._signal;div.addEventListener("contextmenu",_noContextMenu,{signal:signal});div.className="dropdown";div.role="listbox";div.setAttribute("aria-multiselectable",false);div.setAttribute("aria-orientation","vertical");div.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");var _iterator188=_createForOfIteratorHelper(_classPrivateFieldGet(_uiManager3,this).highlightColors),_step188;try{for(_iterator188.s();!(_step188=_iterator188.n()).done;){var _step188$value=_slicedToArray(_step188.value,2),name=_step188$value[0],color=_step188$value[1];var button=document.createElement("button");button.tabIndex="0";button.role="option";button.setAttribute("data-color",color);button.title=name;button.setAttribute("data-l10n-id",_l10nColor._[name]);var swatch=document.createElement("span");button.append(swatch);swatch.className="swatch";swatch.style.backgroundColor=color;button.setAttribute("aria-selected",color===_classPrivateFieldGet(_defaultColor,this));button.addEventListener("click",_assertClassBrand(_ColorPicker_brand,this,_colorSelect).bind(this,color),{signal:signal});div.append(button);}}catch(err){_iterator188.e(err);}finally{_iterator188.f();}div.addEventListener("keydown",_assertClassBrand(_ColorPicker_brand,this,_keyDown2).bind(this),{signal:signal});return div;}function _colorSelect(color,event){event.stopPropagation();_classPrivateFieldGet(_eventBus,this).dispatch("switchannotationeditorparams",{source:this,type:_classPrivateFieldGet(_type3,this),value:color});}function _keyDown2(event){_ColorPicker2._keyboardManager.exec(this,event);}function _openDropdown(event){if(_classPrivateGetter(_ColorPicker_brand,this,_get_isDropdownVisible)){this.hideDropdown();return;}_classPrivateFieldSet(_dropdownWasFromKeyboard,this,event.detail===0);if(!_classPrivateFieldGet(_openDropdownAC,this)){_classPrivateFieldSet(_openDropdownAC,this,new AbortController());window.addEventListener("pointerdown",_assertClassBrand(_ColorPicker_brand,this,_pointerDown3).bind(this),{signal:_classPrivateFieldGet(_uiManager3,this).combinedSignal(_classPrivateFieldGet(_openDropdownAC,this))});}if(_classPrivateFieldGet(_dropdown,this)){_classPrivateFieldGet(_dropdown,this).classList.remove("hidden");return;}var root=_classPrivateFieldSet(_dropdown,this,_assertClassBrand(_ColorPicker_brand,this,_getDropdownRoot).call(this));_classPrivateFieldGet(_button,this).append(root);}function _pointerDown3(event){var _classPrivateFieldGet170;if((_classPrivateFieldGet170=_classPrivateFieldGet(_dropdown,this))!==null&&_classPrivateFieldGet170!==void 0&&_classPrivateFieldGet170.contains(event.target)){return;}this.hideDropdown();}function _get_isDropdownVisible(_this91){return _classPrivateFieldGet(_dropdown,_this91)&&!_classPrivateFieldGet(_dropdown,_this91).classList.contains("hidden");}var _l10nColor={_:null};;// ./src/display/editor/highlight.js\nvar _anchorNode=/*#__PURE__*/new WeakMap();var _anchorOffset=/*#__PURE__*/new WeakMap();var _boxes=/*#__PURE__*/new WeakMap();var _clipPathId=/*#__PURE__*/new WeakMap();var _colorPicker2=/*#__PURE__*/new WeakMap();var _focusOutlines=/*#__PURE__*/new WeakMap();var _focusNode=/*#__PURE__*/new WeakMap();var _focusOffset=/*#__PURE__*/new WeakMap();var _highlightDiv=/*#__PURE__*/new WeakMap();var _highlightOutlines=/*#__PURE__*/new WeakMap();var _id9=/*#__PURE__*/new WeakMap();var _isFreeHighlight=/*#__PURE__*/new WeakMap();var _lastPoint2=/*#__PURE__*/new WeakMap();var _opacity=/*#__PURE__*/new WeakMap();var _outlineId=/*#__PURE__*/new WeakMap();var _text=/*#__PURE__*/new WeakMap();var _thickness2=/*#__PURE__*/new WeakMap();var _methodOfCreation=/*#__PURE__*/new WeakMap();var _HighlightEditor_brand=/*#__PURE__*/new WeakSet();var HighlightEditor=/*#__PURE__*/function(_AnnotationEditor4){function HighlightEditor(params){var _this92;_classCallCheck(this,HighlightEditor);_this92=_callSuper(this,HighlightEditor,[_objectSpread(_objectSpread({},params),{},{name:"highlightEditor"})]);_classPrivateMethodInitSpec(_this92,_HighlightEditor_brand);_classPrivateFieldInitSpec(_this92,_anchorNode,null);_classPrivateFieldInitSpec(_this92,_anchorOffset,0);_classPrivateFieldInitSpec(_this92,_boxes,void 0);_classPrivateFieldInitSpec(_this92,_clipPathId,null);_classPrivateFieldInitSpec(_this92,_colorPicker2,null);_classPrivateFieldInitSpec(_this92,_focusOutlines,null);_classPrivateFieldInitSpec(_this92,_focusNode,null);_classPrivateFieldInitSpec(_this92,_focusOffset,0);_classPrivateFieldInitSpec(_this92,_highlightDiv,null);_classPrivateFieldInitSpec(_this92,_highlightOutlines,null);_classPrivateFieldInitSpec(_this92,_id9,null);_classPrivateFieldInitSpec(_this92,_isFreeHighlight,false);_classPrivateFieldInitSpec(_this92,_lastPoint2,null);_classPrivateFieldInitSpec(_this92,_opacity,void 0);_classPrivateFieldInitSpec(_this92,_outlineId,null);_classPrivateFieldInitSpec(_this92,_text,"");_classPrivateFieldInitSpec(_this92,_thickness2,void 0);_classPrivateFieldInitSpec(_this92,_methodOfCreation,"");_this92.color=params.color||HighlightEditor._defaultColor;_classPrivateFieldSet(_thickness2,_this92,params.thickness||HighlightEditor._defaultThickness);_classPrivateFieldSet(_opacity,_this92,params.opacity||HighlightEditor._defaultOpacity);_classPrivateFieldSet(_boxes,_this92,params.boxes||null);_classPrivateFieldSet(_methodOfCreation,_this92,params.methodOfCreation||"");_classPrivateFieldSet(_text,_this92,params.text||"");_this92._isDraggable=false;if(params.highlightId>-1){_classPrivateFieldSet(_isFreeHighlight,_this92,true);_assertClassBrand(_HighlightEditor_brand,_this92,_createFreeOutlines).call(_this92,params);_assertClassBrand(_HighlightEditor_brand,_this92,_addToDrawLayer).call(_this92);}else if(_classPrivateFieldGet(_boxes,_this92)){_classPrivateFieldSet(_anchorNode,_this92,params.anchorNode);_classPrivateFieldSet(_anchorOffset,_this92,params.anchorOffset);_classPrivateFieldSet(_focusNode,_this92,params.focusNode);_classPrivateFieldSet(_focusOffset,_this92,params.focusOffset);_assertClassBrand(_HighlightEditor_brand,_this92,_createOutlines).call(_this92);_assertClassBrand(_HighlightEditor_brand,_this92,_addToDrawLayer).call(_this92);_this92.rotate(_this92.rotation);}return _this92;}_inherits(HighlightEditor,_AnnotationEditor4);return _createClass(HighlightEditor,[{key:"telemetryInitialData",get:function get(){return{action:"added",type:_classPrivateFieldGet(_isFreeHighlight,this)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:_classPrivateFieldGet(_thickness2,this),methodOfCreation:_classPrivateFieldGet(_methodOfCreation,this)};}},{key:"telemetryFinalData",get:function get(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)};}},{key:"translateInPage",value:function translateInPage(x,y){}},{key:"toolbarPosition",get:function get(){return _classPrivateFieldGet(_lastPoint2,this);}},{key:"updateParams",value:function updateParams(type,value){switch(type){case _AnnotationEditorParamsType.HIGHLIGHT_COLOR:_assertClassBrand(_HighlightEditor_brand,this,_updateColor2).call(this,value);break;case _AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:_assertClassBrand(_HighlightEditor_brand,this,_updateThickness).call(this,value);break;}}},{key:"propertiesToUpdate",get:function get(){return[[_AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.color||HighlightEditor._defaultColor],[_AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,_classPrivateFieldGet(_thickness2,this)||HighlightEditor._defaultThickness],[_AnnotationEditorParamsType.HIGHLIGHT_FREE,_classPrivateFieldGet(_isFreeHighlight,this)]];}},{key:"addEditToolbar",value:function(){var _addEditToolbar2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee47(){var toolbar;return _regeneratorRuntime().wrap(function _callee47$(_context48){while(1)switch(_context48.prev=_context48.next){case 0:_context48.next=2;return _superPropGet(HighlightEditor,"addEditToolbar",this,3)([]);case 2:toolbar=_context48.sent;if(toolbar){_context48.next=5;break;}return _context48.abrupt("return",null);case 5:if(this._uiManager.highlightColors){_classPrivateFieldSet(_colorPicker2,this,new _ColorPicker({editor:this}));toolbar.addColorPicker(_classPrivateFieldGet(_colorPicker2,this));}return _context48.abrupt("return",toolbar);case 7:case"end":return _context48.stop();}},_callee47,this);}));function addEditToolbar(){return _addEditToolbar2.apply(this,arguments);}return addEditToolbar;}()},{key:"disableEditing",value:function disableEditing(){_superPropGet(HighlightEditor,"disableEditing",this,3)([]);this.div.classList.toggle("disabled",true);}},{key:"enableEditing",value:function enableEditing(){_superPropGet(HighlightEditor,"enableEditing",this,3)([]);this.div.classList.toggle("disabled",false);}},{key:"fixAndSetPosition",value:function fixAndSetPosition(){return _superPropGet(HighlightEditor,"fixAndSetPosition",this,3)([_assertClassBrand(_HighlightEditor_brand,this,_getRotation).call(this)]);}},{key:"getBaseTranslation",value:function getBaseTranslation(){return[0,0];}},{key:"getRect",value:function getRect(tx,ty){return _superPropGet(HighlightEditor,"getRect",this,3)([tx,ty,_assertClassBrand(_HighlightEditor_brand,this,_getRotation).call(this)]);}},{key:"onceAdded",value:function onceAdded(focus){if(!this.annotationElementId){this.parent.addUndoableEditor(this);}if(focus){this.div.focus();}}},{key:"remove",value:function remove(){_assertClassBrand(_HighlightEditor_brand,this,_cleanDrawLayer).call(this);this._reportTelemetry({action:"deleted"});_superPropGet(HighlightEditor,"remove",this,3)([]);}},{key:"rebuild",value:function rebuild(){if(!this.parent){return;}_superPropGet(HighlightEditor,"rebuild",this,3)([]);if(this.div===null){return;}_assertClassBrand(_HighlightEditor_brand,this,_addToDrawLayer).call(this);if(!this.isAttachedToDOM){this.parent.add(this);}}},{key:"setParent",value:function setParent(parent){var mustBeSelected=false;if(this.parent&&!parent){_assertClassBrand(_HighlightEditor_brand,this,_cleanDrawLayer).call(this);}else if(parent){var _this$div5;_assertClassBrand(_HighlightEditor_brand,this,_addToDrawLayer).call(this,parent);mustBeSelected=!this.parent&&((_this$div5=this.div)===null||_this$div5===void 0?void 0:_this$div5.classList.contains("selectedEditor"));}_superPropGet(HighlightEditor,"setParent",this,3)([parent]);this.show(this._isVisible);if(mustBeSelected){this.select();}}},{key:"rotate",value:function rotate(angle){var drawLayer=this.parent.drawLayer;var box;if(_classPrivateFieldGet(_isFreeHighlight,this)){angle=(angle-this.rotation+360)%360;box=_rotateBbox.call(HighlightEditor,_classPrivateFieldGet(_highlightOutlines,this).box,angle);}else{box=_rotateBbox.call(HighlightEditor,[this.x,this.y,this.width,this.height],angle);}drawLayer.updateProperties(_classPrivateFieldGet(_id9,this),{bbox:box,root:{"data-main-rotation":angle}});drawLayer.updateProperties(_classPrivateFieldGet(_outlineId,this),{bbox:_rotateBbox.call(HighlightEditor,_classPrivateFieldGet(_focusOutlines,this).box,angle),root:{"data-main-rotation":angle}});}},{key:"render",value:function render(){if(this.div){return this.div;}var div=_superPropGet(HighlightEditor,"render",this,3)([]);if(_classPrivateFieldGet(_text,this)){div.setAttribute("aria-label",_classPrivateFieldGet(_text,this));div.setAttribute("role","mark");}if(_classPrivateFieldGet(_isFreeHighlight,this)){div.classList.add("free");}else{this.div.addEventListener("keydown",_assertClassBrand(_HighlightEditor_brand,this,_keydown).bind(this),{signal:this._uiManager._signal});}var highlightDiv=_classPrivateFieldSet(_highlightDiv,this,document.createElement("div"));div.append(highlightDiv);highlightDiv.setAttribute("aria-hidden","true");highlightDiv.className="internal";highlightDiv.style.clipPath=_classPrivateFieldGet(_clipPathId,this);var _this$parentDimension10=_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension10[0],parentHeight=_this$parentDimension10[1];this.setDims(this.width*parentWidth,this.height*parentHeight);bindEvents(this,_classPrivateFieldGet(_highlightDiv,this),["pointerover","pointerleave"]);this.enableEditing();return div;}},{key:"pointerover",value:function pointerover(){if(!this.isSelected){var _this$parent3;(_this$parent3=this.parent)===null||_this$parent3===void 0||_this$parent3.drawLayer.updateProperties(_classPrivateFieldGet(_outlineId,this),{rootClass:{hovered:true}});}}},{key:"pointerleave",value:function pointerleave(){if(!this.isSelected){var _this$parent4;(_this$parent4=this.parent)===null||_this$parent4===void 0||_this$parent4.drawLayer.updateProperties(_classPrivateFieldGet(_outlineId,this),{rootClass:{hovered:false}});}}},{key:"_moveCaret",value:function _moveCaret(direction){this.parent.unselect(this);switch(direction){case 0:case 2:_assertClassBrand(_HighlightEditor_brand,this,_setCaret).call(this,true);break;case 1:case 3:_assertClassBrand(_HighlightEditor_brand,this,_setCaret).call(this,false);break;}}},{key:"select",value:function select(){var _this$parent5;_superPropGet(HighlightEditor,"select",this,3)([]);if(!_classPrivateFieldGet(_outlineId,this)){return;}(_this$parent5=this.parent)===null||_this$parent5===void 0||_this$parent5.drawLayer.updateProperties(_classPrivateFieldGet(_outlineId,this),{rootClass:{hovered:false,selected:true}});}},{key:"unselect",value:function unselect(){var _this$parent6;_superPropGet(HighlightEditor,"unselect",this,3)([]);if(!_classPrivateFieldGet(_outlineId,this)){return;}(_this$parent6=this.parent)===null||_this$parent6===void 0||_this$parent6.drawLayer.updateProperties(_classPrivateFieldGet(_outlineId,this),{rootClass:{selected:false}});if(!_classPrivateFieldGet(_isFreeHighlight,this)){_assertClassBrand(_HighlightEditor_brand,this,_setCaret).call(this,false);}}},{key:"_mustFixPosition",get:function get(){return!_classPrivateFieldGet(_isFreeHighlight,this);}},{key:"show",value:function show(){var visible=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this._isVisible;_superPropGet(HighlightEditor,"show",this,3)([visible]);if(this.parent){this.parent.drawLayer.updateProperties(_classPrivateFieldGet(_id9,this),{rootClass:{hidden:!visible}});this.parent.drawLayer.updateProperties(_classPrivateFieldGet(_outlineId,this),{rootClass:{hidden:!visible}});}}},{key:"serialize",value:function serialize(){var isForCopying=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(this.isEmpty()||isForCopying){return null;}if(this.deleted){return this.serializeDeleted();}var rect=this.getRect(0,0);var color=AnnotationEditor._colorManager.convert(this.color);var serialized={annotationType:_AnnotationEditorType.HIGHLIGHT,color:color,opacity:_classPrivateFieldGet(_opacity,this),thickness:_classPrivateFieldGet(_thickness2,this),quadPoints:_assertClassBrand(_HighlightEditor_brand,this,_serializeBoxes).call(this),outlines:_assertClassBrand(_HighlightEditor_brand,this,_serializeOutlines).call(this,rect),pageIndex:this.pageIndex,rect:rect,rotation:_assertClassBrand(_HighlightEditor_brand,this,_getRotation).call(this),structTreeParentId:this._structTreeParentId};if(this.annotationElementId&&!_assertClassBrand(_HighlightEditor_brand,this,_hasElementChanged2).call(this,serialized)){return null;}serialized.id=this.annotationElementId;return serialized;}},{key:"renderAnnotationElement",value:function renderAnnotationElement(annotation){annotation.updateEdited({rect:this.getRect(0,0)});return null;}}],[{key:"_keyboardManager",get:function get(){var proto=HighlightEditor.prototype;return _shadow(this,"_keyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],proto._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],proto._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],proto._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],proto._moveCaret,{args:[3]}]]));}},{key:"computeTelemetryFinalData",value:function computeTelemetryFinalData(data){return{numberOfColors:data.get("color").size};}},{key:"initialize",value:function initialize(l10n,uiManager){var _uiManager$highlightC;AnnotationEditor.initialize(l10n,uiManager);HighlightEditor._defaultColor||(HighlightEditor._defaultColor=((_uiManager$highlightC=uiManager.highlightColors)===null||_uiManager$highlightC===void 0?void 0:_uiManager$highlightC.values().next().value)||"#fff066");}},{key:"updateDefaultParams",value:function updateDefaultParams(type,value){switch(type){case _AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:HighlightEditor._defaultColor=value;break;case _AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:HighlightEditor._defaultThickness=value;break;}}},{key:"defaultPropertiesToUpdate",get:function get(){return[[_AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR,HighlightEditor._defaultColor],[_AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,HighlightEditor._defaultThickness]];}},{key:"startHighlighting",value:function startHighlighting(parent,isLTR,_ref108){var _this93=this;var textLayer=_ref108.target,x=_ref108.x,y=_ref108.y;var _textLayer$getBoundin2=textLayer.getBoundingClientRect(),layerX=_textLayer$getBoundin2.x,layerY=_textLayer$getBoundin2.y,parentWidth=_textLayer$getBoundin2.width,parentHeight=_textLayer$getBoundin2.height;var ac=new AbortController();var signal=parent.combinedSignal(ac);var pointerUpCallback=function pointerUpCallback(e){ac.abort();_assertClassBrand(HighlightEditor,_this93,_endHighlight).call(_this93,parent,e);};window.addEventListener("blur",pointerUpCallback,{signal:signal});window.addEventListener("pointerup",pointerUpCallback,{signal:signal});window.addEventListener("pointerdown",_stopEvent,{capture:true,passive:false,signal:signal});window.addEventListener("contextmenu",_noContextMenu,{signal:signal});textLayer.addEventListener("pointermove",_assertClassBrand(HighlightEditor,this,_highlightMove).bind(this,parent),{signal:signal});this._freeHighlight=new FreeHighlightOutliner({x:x,y:y},[layerX,layerY,parentWidth,parentHeight],parent.scale,this._defaultThickness/2,isLTR,0.001);var _parent$drawLayer$dra=parent.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:true,free:true},path:{d:this._freeHighlight.toSVGPath()}},true,true);this._freeHighlightId=_parent$drawLayer$dra.id;this._freeHighlightClipId=_parent$drawLayer$dra.clipPathId;}},{key:"deserialize",value:function(){var _deserialize3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee48(data,parent,uiManager){var initialData,_data5,_data5$data,_quadPoints,rect,rotation,id,_color3,_opacity2,popupRef,pageNumber,_data6,_data6$data,_inkLists,_rect4,_rotation5,_id10,_color4,thickness,_popupRef,_pageNumber,_data7,color,quadPoints,inkLists,opacity,editor,_editor$pageDimension2,pageWidth,pageHeight,_editor$pageTranslati,pageX,pageY,boxes,i,points,point,outliner,_i27,ii,_parent$drawLayer$dra2,_id11,clipPathId;return _regeneratorRuntime().wrap(function _callee48$(_context49){while(1)switch(_context49.prev=_context49.next){case 0:initialData=null;if(data instanceof HighlightAnnotationElement){_data5=data,_data5$data=_data5.data,_quadPoints=_data5$data.quadPoints,rect=_data5$data.rect,rotation=_data5$data.rotation,id=_data5$data.id,_color3=_data5$data.color,_opacity2=_data5$data.opacity,popupRef=_data5$data.popupRef,pageNumber=_data5.parent.page.pageNumber;initialData=data={annotationType:_AnnotationEditorType.HIGHLIGHT,color:Array.from(_color3),opacity:_opacity2,quadPoints:_quadPoints,boxes:null,pageIndex:pageNumber-1,rect:rect.slice(0),rotation:rotation,id:id,deleted:false,popupRef:popupRef};}else if(data instanceof InkAnnotationElement){_data6=data,_data6$data=_data6.data,_inkLists=_data6$data.inkLists,_rect4=_data6$data.rect,_rotation5=_data6$data.rotation,_id10=_data6$data.id,_color4=_data6$data.color,thickness=_data6$data.borderStyle.rawWidth,_popupRef=_data6$data.popupRef,_pageNumber=_data6.parent.page.pageNumber;initialData=data={annotationType:_AnnotationEditorType.HIGHLIGHT,color:Array.from(_color4),thickness:thickness,inkLists:_inkLists,boxes:null,pageIndex:_pageNumber-1,rect:_rect4.slice(0),rotation:_rotation5,id:_id10,deleted:false,popupRef:_popupRef};}_data7=data,color=_data7.color,quadPoints=_data7.quadPoints,inkLists=_data7.inkLists,opacity=_data7.opacity;_context49.next=5;return _superPropGet(HighlightEditor,"deserialize",this,2)([data,parent,uiManager]);case 5:editor=_context49.sent;editor.color=_Util.makeHexColor.apply(_Util,_toConsumableArray(color));_classPrivateFieldSet(_opacity,editor,opacity||1);if(inkLists){_classPrivateFieldSet(_thickness2,editor,data.thickness);}editor.annotationElementId=data.id||null;editor._initialData=initialData;_editor$pageDimension2=_slicedToArray(editor.pageDimensions,2),pageWidth=_editor$pageDimension2[0],pageHeight=_editor$pageDimension2[1];_editor$pageTranslati=_slicedToArray(editor.pageTranslation,2),pageX=_editor$pageTranslati[0],pageY=_editor$pageTranslati[1];if(quadPoints){boxes=_classPrivateFieldSet(_boxes,editor,[]);for(i=0;i<quadPoints.length;i+=8){boxes.push({x:(quadPoints[i]-pageX)/pageWidth,y:1-(quadPoints[i+1]-pageY)/pageHeight,width:(quadPoints[i+2]-quadPoints[i])/pageWidth,height:(quadPoints[i+1]-quadPoints[i+5])/pageHeight});}_assertClassBrand(_HighlightEditor_brand,editor,_createOutlines).call(editor);_assertClassBrand(_HighlightEditor_brand,editor,_addToDrawLayer).call(editor);editor.rotate(editor.rotation);}else if(inkLists){_classPrivateFieldSet(_isFreeHighlight,editor,true);points=inkLists[0];point={x:points[0]-pageX,y:pageHeight-(points[1]-pageY)};outliner=new FreeHighlightOutliner(point,[0,0,pageWidth,pageHeight],1,_classPrivateFieldGet(_thickness2,editor)/2,true,0.001);for(_i27=0,ii=points.length;_i27<ii;_i27+=2){point.x=points[_i27]-pageX;point.y=pageHeight-(points[_i27+1]-pageY);outliner.add(point);}_parent$drawLayer$dra2=parent.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:editor.color,"fill-opacity":editor._defaultOpacity},rootClass:{highlight:true,free:true},path:{d:outliner.toSVGPath()}},true,true),_id11=_parent$drawLayer$dra2.id,clipPathId=_parent$drawLayer$dra2.clipPathId;_assertClassBrand(_HighlightEditor_brand,editor,_createFreeOutlines).call(editor,{highlightOutlines:outliner.getOutlines(),highlightId:_id11,clipPathId:clipPathId});_assertClassBrand(_HighlightEditor_brand,editor,_addToDrawLayer).call(editor);}return _context49.abrupt("return",editor);case 15:case"end":return _context49.stop();}},_callee48,this);}));function deserialize(_x43,_x44,_x45){return _deserialize3.apply(this,arguments);}return deserialize;}()},{key:"canCreateNewEmptyEditor",value:function canCreateNewEmptyEditor(){return false;}}]);}(AnnotationEditor);_HighlightEditor=HighlightEditor;function _createOutlines(){var outliner=new HighlightOutliner(_classPrivateFieldGet(_boxes,this),0.001);_classPrivateFieldSet(_highlightOutlines,this,outliner.getOutlines());var _classPrivateFieldGet171=_slicedToArray(_classPrivateFieldGet(_highlightOutlines,this).box,4);this.x=_classPrivateFieldGet171[0];this.y=_classPrivateFieldGet171[1];this.width=_classPrivateFieldGet171[2];this.height=_classPrivateFieldGet171[3];var outlinerForOutline=new HighlightOutliner(_classPrivateFieldGet(_boxes,this),0.0025,0.001,this._uiManager.direction==="ltr");_classPrivateFieldSet(_focusOutlines,this,outlinerForOutline.getOutlines());var _classPrivateFieldGet172=_classPrivateFieldGet(_focusOutlines,this),lastPoint=_classPrivateFieldGet172.lastPoint;_classPrivateFieldSet(_lastPoint2,this,[(lastPoint[0]-this.x)/this.width,(lastPoint[1]-this.y)/this.height]);}function _createFreeOutlines(_ref147){var highlightOutlines=_ref147.highlightOutlines,highlightId=_ref147.highlightId,clipPathId=_ref147.clipPathId;_classPrivateFieldSet(_highlightOutlines,this,highlightOutlines);var extraThickness=1.5;_classPrivateFieldSet(_focusOutlines,this,highlightOutlines.getNewOutline(_classPrivateFieldGet(_thickness2,this)/2+extraThickness,0.0025));if(highlightId>=0){_classPrivateFieldSet(_id9,this,highlightId);_classPrivateFieldSet(_clipPathId,this,clipPathId);this.parent.drawLayer.finalizeDraw(highlightId,{bbox:highlightOutlines.box,path:{d:highlightOutlines.toSVGPath()}});_classPrivateFieldSet(_outlineId,this,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:true,free:true},bbox:_classPrivateFieldGet(_focusOutlines,this).box,path:{d:_classPrivateFieldGet(_focusOutlines,this).toSVGPath()}},true));}else if(this.parent){var angle=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(_classPrivateFieldGet(_id9,this),{bbox:_rotateBbox.call(_HighlightEditor,_classPrivateFieldGet(_highlightOutlines,this).box,(angle-this.rotation+360)%360),path:{d:highlightOutlines.toSVGPath()}});this.parent.drawLayer.updateProperties(_classPrivateFieldGet(_outlineId,this),{bbox:_rotateBbox.call(_HighlightEditor,_classPrivateFieldGet(_focusOutlines,this).box,angle),path:{d:_classPrivateFieldGet(_focusOutlines,this).toSVGPath()}});}var _highlightOutlines$bo=_slicedToArray(highlightOutlines.box,4),x=_highlightOutlines$bo[0],y=_highlightOutlines$bo[1],width=_highlightOutlines$bo[2],height=_highlightOutlines$bo[3];switch(this.rotation){case 0:this.x=x;this.y=y;this.width=width;this.height=height;break;case 90:{var _this$parentDimension17=_slicedToArray(this.parentDimensions,2),pageWidth=_this$parentDimension17[0],pageHeight=_this$parentDimension17[1];this.x=y;this.y=1-x;this.width=width*pageHeight/pageWidth;this.height=height*pageWidth/pageHeight;break;}case 180:this.x=1-x;this.y=1-y;this.width=width;this.height=height;break;case 270:{var _this$parentDimension18=_slicedToArray(this.parentDimensions,2),_pageWidth5=_this$parentDimension18[0],_pageHeight5=_this$parentDimension18[1];this.x=1-y;this.y=x;this.width=width*_pageHeight5/_pageWidth5;this.height=height*_pageWidth5/_pageHeight5;break;}}var _classPrivateFieldGet173=_classPrivateFieldGet(_focusOutlines,this),lastPoint=_classPrivateFieldGet173.lastPoint;_classPrivateFieldSet(_lastPoint2,this,[(lastPoint[0]-x)/width,(lastPoint[1]-y)/height]);}function _updateColor2(color){var _this119=this;var setColorAndOpacity=function setColorAndOpacity(col,opa){var _this119$parent,_classPrivateFieldGet174;_this119.color=col;_classPrivateFieldSet(_opacity,_this119,opa);(_this119$parent=_this119.parent)===null||_this119$parent===void 0||_this119$parent.drawLayer.updateProperties(_classPrivateFieldGet(_id9,_this119),{root:{fill:col,"fill-opacity":opa}});(_classPrivateFieldGet174=_classPrivateFieldGet(_colorPicker2,_this119))===null||_classPrivateFieldGet174===void 0||_classPrivateFieldGet174.updateColor(col);};var savedColor=this.color;var savedOpacity=_classPrivateFieldGet(_opacity,this);this.addCommands({cmd:setColorAndOpacity.bind(this,color,_HighlightEditor._defaultOpacity),undo:setColorAndOpacity.bind(this,savedColor,savedOpacity),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:true,type:_AnnotationEditorParamsType.HIGHLIGHT_COLOR,overwriteIfSameType:true,keepUndo:true});this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(color)},true);}function _updateThickness(thickness){var _this120=this;var savedThickness=_classPrivateFieldGet(_thickness2,this);var setThickness=function setThickness(th){_classPrivateFieldSet(_thickness2,_this120,th);_assertClassBrand(_HighlightEditor_brand,_this120,_changeThickness).call(_this120,th);};this.addCommands({cmd:setThickness.bind(this,thickness),undo:setThickness.bind(this,savedThickness),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:true,type:_AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:true,keepUndo:true});this._reportTelemetry({action:"thickness_changed",thickness:thickness},true);}function _changeThickness(thickness){if(!_classPrivateFieldGet(_isFreeHighlight,this)){return;}_assertClassBrand(_HighlightEditor_brand,this,_createFreeOutlines).call(this,{highlightOutlines:_classPrivateFieldGet(_highlightOutlines,this).getNewOutline(thickness/2)});this.fixAndSetPosition();var _this$parentDimension19=_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension19[0],parentHeight=_this$parentDimension19[1];this.setDims(this.width*parentWidth,this.height*parentHeight);}function _cleanDrawLayer(){if(_classPrivateFieldGet(_id9,this)===null||!this.parent){return;}this.parent.drawLayer.remove(_classPrivateFieldGet(_id9,this));_classPrivateFieldSet(_id9,this,null);this.parent.drawLayer.remove(_classPrivateFieldGet(_outlineId,this));_classPrivateFieldSet(_outlineId,this,null);}function _addToDrawLayer(){var parent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.parent;if(_classPrivateFieldGet(_id9,this)!==null){return;}var _parent$drawLayer$dra4=parent.drawLayer.draw({bbox:_classPrivateFieldGet(_highlightOutlines,this).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":_classPrivateFieldGet(_opacity,this)},rootClass:{highlight:true,free:_classPrivateFieldGet(_isFreeHighlight,this)},path:{d:_classPrivateFieldGet(_highlightOutlines,this).toSVGPath()}},false,true);_toSetter(_classPrivateFieldSet,[_id9,this])._=_parent$drawLayer$dra4.id;_toSetter(_classPrivateFieldSet,[_clipPathId,this])._=_parent$drawLayer$dra4.clipPathId;_classPrivateFieldSet(_outlineId,this,parent.drawLayer.drawOutline({rootClass:{highlightOutline:true,free:_classPrivateFieldGet(_isFreeHighlight,this)},bbox:_classPrivateFieldGet(_focusOutlines,this).box,path:{d:_classPrivateFieldGet(_focusOutlines,this).toSVGPath()}},_classPrivateFieldGet(_isFreeHighlight,this)));if(_classPrivateFieldGet(_highlightDiv,this)){_classPrivateFieldGet(_highlightDiv,this).style.clipPath=_classPrivateFieldGet(_clipPathId,this);}}function _rotateBbox(_ref148,angle){var _ref149=_slicedToArray(_ref148,4),x=_ref149[0],y=_ref149[1],width=_ref149[2],height=_ref149[3];switch(angle){case 90:return[1-y-height,x,height,width];case 180:return[1-x-width,1-y-height,width,height];case 270:return[y,1-x-width,height,width];}return[x,y,width,height];}function _keydown(event){_HighlightEditor._keyboardManager.exec(this,event);}function _setCaret(start){if(!_classPrivateFieldGet(_anchorNode,this)){return;}var selection=window.getSelection();if(start){selection.setPosition(_classPrivateFieldGet(_anchorNode,this),_classPrivateFieldGet(_anchorOffset,this));}else{selection.setPosition(_classPrivateFieldGet(_focusNode,this),_classPrivateFieldGet(_focusOffset,this));}}function _getRotation(){return _classPrivateFieldGet(_isFreeHighlight,this)?this.rotation:0;}function _serializeBoxes(){if(_classPrivateFieldGet(_isFreeHighlight,this)){return null;}var _this$pageDimensions10=_slicedToArray(this.pageDimensions,2),pageWidth=_this$pageDimensions10[0],pageHeight=_this$pageDimensions10[1];var _this$pageTranslation6=_slicedToArray(this.pageTranslation,2),pageX=_this$pageTranslation6[0],pageY=_this$pageTranslation6[1];var boxes=_classPrivateFieldGet(_boxes,this);var quadPoints=new Float32Array(boxes.length*8);var i=0;var _iterator189=_createForOfIteratorHelper(boxes),_step189;try{for(_iterator189.s();!(_step189=_iterator189.n()).done;){var _step189$value=_step189.value,x=_step189$value.x,y=_step189$value.y,width=_step189$value.width,height=_step189$value.height;var sx=x*pageWidth+pageX;var sy=(1-y)*pageHeight+pageY;quadPoints[i]=quadPoints[i+4]=sx;quadPoints[i+1]=quadPoints[i+3]=sy;quadPoints[i+2]=quadPoints[i+6]=sx+width*pageWidth;quadPoints[i+5]=quadPoints[i+7]=sy-height*pageHeight;i+=8;}}catch(err){_iterator189.e(err);}finally{_iterator189.f();}return quadPoints;}function _serializeOutlines(rect){return _classPrivateFieldGet(_highlightOutlines,this).serialize(rect,_assertClassBrand(_HighlightEditor_brand,this,_getRotation).call(this));}function _highlightMove(parent,event){if(this._freeHighlight.add(event)){parent.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}});}}function _endHighlight(parent,event){if(!this._freeHighlight.isEmpty()){parent.createAndAddNewEditor(event,false,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"});}else{parent.drawLayer.remove(this._freeHighlightId);}this._freeHighlightId=-1;this._freeHighlight=null;this._freeHighlightClipId="";}function _hasElementChanged2(serialized){var color=this._initialData.color;return serialized.color.some(function(c,i){return c!==color[i];});}_defineProperty(HighlightEditor,"_defaultColor",null);_defineProperty(HighlightEditor,"_defaultOpacity",1);_defineProperty(HighlightEditor,"_defaultThickness",12);_defineProperty(HighlightEditor,"_type","highlight");_defineProperty(HighlightEditor,"_editorType",_AnnotationEditorType.HIGHLIGHT);_defineProperty(HighlightEditor,"_freeHighlightId",-1);_defineProperty(HighlightEditor,"_freeHighlight",null);_defineProperty(HighlightEditor,"_freeHighlightClipId","");;// ./src/display/editor/draw.js\nvar _svgProperties=/*#__PURE__*/new WeakMap();var DrawingOptions=/*#__PURE__*/function(){function DrawingOptions(){_classCallCheck(this,DrawingOptions);_classPrivateFieldInitSpec(this,_svgProperties,Object.create(null));}return _createClass(DrawingOptions,[{key:"updateProperty",value:function updateProperty(name,value){this[name]=value;this.updateSVGProperty(name,value);}},{key:"updateProperties",value:function updateProperties(properties){if(!properties){return;}for(var _i28=0,_Object$entries6=Object.entries(properties);_i28<_Object$entries6.length;_i28++){var _Object$entries6$_i=_slicedToArray(_Object$entries6[_i28],2),name=_Object$entries6$_i[0],value=_Object$entries6$_i[1];if(!name.startsWith("_")){this.updateProperty(name,value);}}}},{key:"updateSVGProperty",value:function updateSVGProperty(name,value){_classPrivateFieldGet(_svgProperties,this)[name]=value;}},{key:"toSVGProperties",value:function toSVGProperties(){var root=_classPrivateFieldGet(_svgProperties,this);_classPrivateFieldSet(_svgProperties,this,Object.create(null));return{root:root};}},{key:"reset",value:function reset(){_classPrivateFieldSet(_svgProperties,this,Object.create(null));}},{key:"updateAll",value:function updateAll(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this;this.updateProperties(options);}},{key:"clone",value:function clone(){unreachable("Not implemented");}}]);}();var _drawOutlines=/*#__PURE__*/new WeakMap();var _mustBeCommitted=/*#__PURE__*/new WeakMap();var _DrawingEditor_brand=/*#__PURE__*/new WeakSet();var DrawingEditor=/*#__PURE__*/function(_AnnotationEditor5){function DrawingEditor(params){var _this94;_classCallCheck(this,DrawingEditor);_this94=_callSuper(this,DrawingEditor,[params]);_classPrivateMethodInitSpec(_this94,_DrawingEditor_brand);_classPrivateFieldInitSpec(_this94,_drawOutlines,null);_classPrivateFieldInitSpec(_this94,_mustBeCommitted,void 0);_defineProperty(_this94,"_drawId",null);_classPrivateFieldSet(_mustBeCommitted,_this94,params.mustBeCommitted||false);_this94._addOutlines(params);return _this94;}_inherits(DrawingEditor,_AnnotationEditor5);return _createClass(DrawingEditor,[{key:"_addOutlines",value:function _addOutlines(params){if(params.drawOutlines){_assertClassBrand(_DrawingEditor_brand,this,_createDrawOutlines).call(this,params);_assertClassBrand(_DrawingEditor_brand,this,_addToDrawLayer2).call(this);}}},{key:"updateParams",value:function updateParams(type,value){var propertyName=this.constructor.typesMap.get(type);if(propertyName){this._updateProperty(type,propertyName,value);}}},{key:"propertiesToUpdate",get:function get(){var properties=[];var _drawingOptions=this._drawingOptions;var _iterator146=_createForOfIteratorHelper(this.constructor.typesMap),_step146;try{for(_iterator146.s();!(_step146=_iterator146.n()).done;){var _step146$value=_slicedToArray(_step146.value,2),type=_step146$value[0],name=_step146$value[1];properties.push([type,_drawingOptions[name]]);}}catch(err){_iterator146.e(err);}finally{_iterator146.f();}return properties;}},{key:"_updateProperty",value:function _updateProperty(type,name,value){var _this95=this;var options=this._drawingOptions;var savedValue=options[name];var setter=function setter(val){var _this95$parent;options.updateProperty(name,val);var bbox=_classPrivateFieldGet(_drawOutlines,_this95).updateProperty(name,val);if(bbox){_assertClassBrand(_DrawingEditor_brand,_this95,_updateBbox).call(_this95,bbox);}(_this95$parent=_this95.parent)===null||_this95$parent===void 0||_this95$parent.drawLayer.updateProperties(_this95._drawId,options.toSVGProperties());};this.addCommands({cmd:setter.bind(this,value),undo:setter.bind(this,savedValue),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:true,type:type,overwriteIfSameType:true,keepUndo:true});}},{key:"_onResizing",value:function _onResizing(){var _this$parent7;(_this$parent7=this.parent)===null||_this$parent7===void 0||_this$parent7.drawLayer.updateProperties(this._drawId,DrawingEditor._mergeSVGProperties(_classPrivateFieldGet(_drawOutlines,this).getPathResizingSVGProperties(_assertClassBrand(_DrawingEditor_brand,this,_convertToDrawSpace).call(this)),{bbox:_assertClassBrand(_DrawingEditor_brand,this,_rotateBox).call(this)}));}},{key:"_onResized",value:function _onResized(){var _this$parent8;(_this$parent8=this.parent)===null||_this$parent8===void 0||_this$parent8.drawLayer.updateProperties(this._drawId,DrawingEditor._mergeSVGProperties(_classPrivateFieldGet(_drawOutlines,this).getPathResizedSVGProperties(_assertClassBrand(_DrawingEditor_brand,this,_convertToDrawSpace).call(this)),{bbox:_assertClassBrand(_DrawingEditor_brand,this,_rotateBox).call(this)}));}},{key:"_onTranslating",value:function _onTranslating(_x,_y){var _this$parent9;(_this$parent9=this.parent)===null||_this$parent9===void 0||_this$parent9.drawLayer.updateProperties(this._drawId,{bbox:_assertClassBrand(_DrawingEditor_brand,this,_rotateBox).call(this)});}},{key:"_onTranslated",value:function _onTranslated(){var _this$parent10;(_this$parent10=this.parent)===null||_this$parent10===void 0||_this$parent10.drawLayer.updateProperties(this._drawId,DrawingEditor._mergeSVGProperties(_classPrivateFieldGet(_drawOutlines,this).getPathTranslatedSVGProperties(_assertClassBrand(_DrawingEditor_brand,this,_convertToDrawSpace).call(this),this.parentDimensions),{bbox:_assertClassBrand(_DrawingEditor_brand,this,_rotateBox).call(this)}));}},{key:"_onStartDragging",value:function _onStartDragging(){var _this$parent11;(_this$parent11=this.parent)===null||_this$parent11===void 0||_this$parent11.drawLayer.updateProperties(this._drawId,{rootClass:{moving:true}});}},{key:"_onStopDragging",value:function _onStopDragging(){var _this$parent12;(_this$parent12=this.parent)===null||_this$parent12===void 0||_this$parent12.drawLayer.updateProperties(this._drawId,{rootClass:{moving:false}});}},{key:"commit",value:function commit(){_superPropGet(DrawingEditor,"commit",this,3)([]);this.disableEditMode();this.disableEditing();}},{key:"disableEditing",value:function disableEditing(){_superPropGet(DrawingEditor,"disableEditing",this,3)([]);this.div.classList.toggle("disabled",true);}},{key:"enableEditing",value:function enableEditing(){_superPropGet(DrawingEditor,"enableEditing",this,3)([]);this.div.classList.toggle("disabled",false);}},{key:"getBaseTranslation",value:function getBaseTranslation(){return[0,0];}},{key:"isResizable",get:function get(){return true;}},{key:"onceAdded",value:function onceAdded(focus){if(!this.annotationElementId){this.parent.addUndoableEditor(this);}this._isDraggable=true;if(_classPrivateFieldGet(_mustBeCommitted,this)){_classPrivateFieldSet(_mustBeCommitted,this,false);this.commit();this.parent.setSelected(this);if(focus&&this.isOnScreen){this.div.focus();}}}},{key:"remove",value:function remove(){_assertClassBrand(_DrawingEditor_brand,this,_cleanDrawLayer2).call(this);_superPropGet(DrawingEditor,"remove",this,3)([]);}},{key:"rebuild",value:function rebuild(){if(!this.parent){return;}_superPropGet(DrawingEditor,"rebuild",this,3)([]);if(this.div===null){return;}_assertClassBrand(_DrawingEditor_brand,this,_addToDrawLayer2).call(this);_assertClassBrand(_DrawingEditor_brand,this,_updateBbox).call(this,_classPrivateFieldGet(_drawOutlines,this).box);if(!this.isAttachedToDOM){this.parent.add(this);}}},{key:"setParent",value:function setParent(parent){var mustBeSelected=false;if(this.parent&&!parent){this._uiManager.removeShouldRescale(this);_assertClassBrand(_DrawingEditor_brand,this,_cleanDrawLayer2).call(this);}else if(parent){var _this$div6;this._uiManager.addShouldRescale(this);_assertClassBrand(_DrawingEditor_brand,this,_addToDrawLayer2).call(this,parent);mustBeSelected=!this.parent&&((_this$div6=this.div)===null||_this$div6===void 0?void 0:_this$div6.classList.contains("selectedEditor"));}_superPropGet(DrawingEditor,"setParent",this,3)([parent]);if(mustBeSelected){this.select();}}},{key:"rotate",value:function rotate(){if(!this.parent){return;}this.parent.drawLayer.updateProperties(this._drawId,DrawingEditor._mergeSVGProperties({bbox:_assertClassBrand(_DrawingEditor_brand,this,_rotateBox).call(this)},_classPrivateFieldGet(_drawOutlines,this).updateRotation((this.parentRotation-this.rotation+360)%360)));}},{key:"onScaleChanging",value:function onScaleChanging(){if(!this.parent){return;}_assertClassBrand(_DrawingEditor_brand,this,_updateBbox).call(this,_classPrivateFieldGet(_drawOutlines,this).updateParentDimensions(this.parentDimensions,this.parent.scale));}},{key:"render",value:function render(){if(this.div){return this.div;}var baseX,baseY;if(this._isCopy){baseX=this.x;baseY=this.y;}var div=_superPropGet(DrawingEditor,"render",this,3)([]);div.classList.add("draw");var drawDiv=document.createElement("div");div.append(drawDiv);drawDiv.setAttribute("aria-hidden","true");drawDiv.className="internal";var _this$parentDimension11=_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension11[0],parentHeight=_this$parentDimension11[1];this.setDims(this.width*parentWidth,this.height*parentHeight);this._uiManager.addShouldRescale(this);this.disableEditing();if(this._isCopy){this._moveAfterPaste(baseX,baseY);}return div;}},{key:"createDrawingOptions",value:function createDrawingOptions(_data){}},{key:"serializeDraw",value:function serializeDraw(isForCopying){var _this$pageTranslation5=_slicedToArray(this.pageTranslation,2),pageX=_this$pageTranslation5[0],pageY=_this$pageTranslation5[1];var _this$pageDimensions6=_slicedToArray(this.pageDimensions,2),pageWidth=_this$pageDimensions6[0],pageHeight=_this$pageDimensions6[1];return _classPrivateFieldGet(_drawOutlines,this).serialize([pageX,pageY,pageWidth,pageHeight],isForCopying);}},{key:"renderAnnotationElement",value:function renderAnnotationElement(annotation){annotation.updateEdited({rect:this.getRect(0,0)});return null;}}],[{key:"_mergeSVGProperties",value:function _mergeSVGProperties(p1,p2){var p1Keys=new Set(Object.keys(p1));for(var _i29=0,_Object$entries7=Object.entries(p2);_i29<_Object$entries7.length;_i29++){var _Object$entries7$_i=_slicedToArray(_Object$entries7[_i29],2),key=_Object$entries7$_i[0],value=_Object$entries7$_i[1];if(p1Keys.has(key)){Object.assign(p1[key],value);}else{p1[key]=value;}}return p1;}},{key:"getDefaultDrawingOptions",value:function getDefaultDrawingOptions(_options){unreachable("Not implemented");}},{key:"typesMap",get:function get(){unreachable("Not implemented");}},{key:"isDrawer",get:function get(){return true;}},{key:"supportMultipleDrawings",get:function get(){return false;}},{key:"updateDefaultParams",value:function updateDefaultParams(type,value){var propertyName=this.typesMap.get(type);if(propertyName){this._defaultDrawingOptions.updateProperty(propertyName,value);}if(this._currentParent){_currentDraw._.updateProperty(propertyName,value);this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties());}}},{key:"defaultPropertiesToUpdate",get:function get(){var properties=[];var options=this._defaultDrawingOptions;var _iterator147=_createForOfIteratorHelper(this.typesMap),_step147;try{for(_iterator147.s();!(_step147=_iterator147.n()).done;){var _step147$value=_slicedToArray(_step147.value,2),type=_step147$value[0],name=_step147$value[1];properties.push([type,options[name]]);}}catch(err){_iterator147.e(err);}finally{_iterator147.f();}return properties;}},{key:"onScaleChangingWhenDrawing",value:function onScaleChangingWhenDrawing(){}},{key:"createDrawerInstance",value:function createDrawerInstance(_x,_y,_parentWidth,_parentHeight,_rotation){unreachable("Not implemented");}},{key:"startDrawing",value:function startDrawing(parent,uiManager,_isLTR,event){var _currentPointerType$_,_this96=this,_uiManager$_editorUnd;var target=event.target,x=event.offsetX,y=event.offsetY,pointerId=event.pointerId,pointerType=event.pointerType;if(_currentPointerType._&&_currentPointerType._!==pointerType){return;}var rotation=parent.viewport.rotation;var _target$getBoundingCl=target.getBoundingClientRect(),parentWidth=_target$getBoundingCl.width,parentHeight=_target$getBoundingCl.height;var ac=_currentDrawingAC._=new AbortController();var signal=parent.combinedSignal(ac);_currentPointerId._||(_currentPointerId._=pointerId);(_currentPointerType$_=_currentPointerType._)!==null&&_currentPointerType$_!==void 0?_currentPointerType$_:_currentPointerType._=pointerType;window.addEventListener("pointerup",function(e){if(_currentPointerId._===e.pointerId){_this96._endDraw(e);}else{var _currentPointerIds$_;(_currentPointerIds$_=_currentPointerIds._)===null||_currentPointerIds$_===void 0||_currentPointerIds$_["delete"](e.pointerId);}},{signal:signal});window.addEventListener("pointercancel",function(e){if(_currentPointerId._===e.pointerId){_this96._currentParent.endDrawingSession();}else{var _currentPointerIds$_2;(_currentPointerIds$_2=_currentPointerIds._)===null||_currentPointerIds$_2===void 0||_currentPointerIds$_2["delete"](e.pointerId);}},{signal:signal});window.addEventListener("pointerdown",function(e){if(_currentPointerType._!==e.pointerType){return;}(_currentPointerIds._||(_currentPointerIds._=new Set())).add(e.pointerId);if(_currentDraw._.isCancellable()){_currentDraw._.removeLastElement();if(_currentDraw._.isEmpty()){_this96._currentParent.endDrawingSession(true);}else{_this96._endDraw(null);}}},{capture:true,passive:false,signal:signal});window.addEventListener("contextmenu",_noContextMenu,{signal:signal});target.addEventListener("pointermove",this._drawMove.bind(this),{signal:signal});target.addEventListener("touchmove",function(e){if(e.timeStamp===_currentMoveTimestamp._){_stopEvent(e);}},{signal:signal});parent.toggleDrawing();(_uiManager$_editorUnd=uiManager._editorUndoBar)===null||_uiManager$_editorUnd===void 0||_uiManager$_editorUnd.hide();if(_currentDraw._){parent.drawLayer.updateProperties(this._currentDrawId,_currentDraw._.startNew(x,y,parentWidth,parentHeight,rotation));return;}uiManager.updateUIForDefaultProperties(this);_currentDraw._=this.createDrawerInstance(x,y,parentWidth,parentHeight,rotation);_currentDrawingOptions._=this.getDefaultDrawingOptions();this._currentParent=parent;var _parent$drawLayer$dra3=parent.drawLayer.draw(this._mergeSVGProperties(_currentDrawingOptions._.toSVGProperties(),_currentDraw._.defaultSVGProperties),true,false);this._currentDrawId=_parent$drawLayer$dra3.id;}},{key:"_drawMove",value:function _drawMove(event){var _currentPointerIds$_3;_currentMoveTimestamp._=-1;if(!_currentDraw._){return;}var offsetX=event.offsetX,offsetY=event.offsetY,pointerId=event.pointerId;if(_currentPointerId._!==pointerId){return;}if(((_currentPointerIds$_3=_currentPointerIds._)===null||_currentPointerIds$_3===void 0?void 0:_currentPointerIds$_3.size)>=1){this._endDraw(event);return;}this._currentParent.drawLayer.updateProperties(this._currentDrawId,_currentDraw._.add(offsetX,offsetY));_currentMoveTimestamp._=event.timeStamp;_stopEvent(event);}},{key:"_cleanup",value:function _cleanup(all){if(all){this._currentDrawId=-1;this._currentParent=null;_currentDraw._=null;_currentDrawingOptions._=null;_currentPointerType._=null;_currentMoveTimestamp._=NaN;}if(_currentDrawingAC._){_currentDrawingAC._.abort();_currentDrawingAC._=null;_currentPointerId._=NaN;_currentPointerIds._=null;}}},{key:"_endDraw",value:function _endDraw(event){var parent=this._currentParent;if(!parent){return;}parent.toggleDrawing(true);this._cleanup(false);if((event===null||event===void 0?void 0:event.target)===parent.div){parent.drawLayer.updateProperties(this._currentDrawId,_currentDraw._.end(event.offsetX,event.offsetY));}if(this.supportMultipleDrawings){var draw=_currentDraw._;var drawId=this._currentDrawId;var lastElement=draw.getLastElement();parent.addCommands({cmd:function cmd(){parent.drawLayer.updateProperties(drawId,draw.setLastElement(lastElement));},undo:function undo(){parent.drawLayer.updateProperties(drawId,draw.removeLastElement());},mustExec:false,type:_AnnotationEditorParamsType.DRAW_STEP});return;}this.endDrawing(false);}},{key:"endDrawing",value:function endDrawing(isAborted){var parent=this._currentParent;if(!parent){return null;}parent.toggleDrawing(true);parent.cleanUndoStack(_AnnotationEditorParamsType.DRAW_STEP);if(!_currentDraw._.isEmpty()){var _parent$pageDimension=_slicedToArray(parent.pageDimensions,2),pageWidth=_parent$pageDimension[0],pageHeight=_parent$pageDimension[1],scale=parent.scale;var editor=parent.createAndAddNewEditor({offsetX:0,offsetY:0},false,{drawId:this._currentDrawId,drawOutlines:_currentDraw._.getOutlines(pageWidth*scale,pageHeight*scale,scale,this._INNER_MARGIN),drawingOptions:_currentDrawingOptions._,mustBeCommitted:!isAborted});this._cleanup(true);return editor;}parent.drawLayer.remove(this._currentDrawId);this._cleanup(true);return null;}},{key:"deserializeDraw",value:function deserializeDraw(_pageX,_pageY,_pageWidth,_pageHeight,_innerWidth,_data){unreachable("Not implemented");}},{key:"deserialize",value:function(){var _deserialize4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee49(data,parent,uiManager){var _parent$viewport$rawD,pageWidth,pageHeight,pageX,pageY,drawOutlines,editor;return _regeneratorRuntime().wrap(function _callee49$(_context50){while(1)switch(_context50.prev=_context50.next){case 0:_parent$viewport$rawD=parent.viewport.rawDims,pageWidth=_parent$viewport$rawD.pageWidth,pageHeight=_parent$viewport$rawD.pageHeight,pageX=_parent$viewport$rawD.pageX,pageY=_parent$viewport$rawD.pageY;drawOutlines=this.deserializeDraw(pageX,pageY,pageWidth,pageHeight,this._INNER_MARGIN,data);_context50.next=4;return _superPropGet(DrawingEditor,"deserialize",this,2)([data,parent,uiManager]);case 4:editor=_context50.sent;editor.createDrawingOptions(data);_assertClassBrand(_DrawingEditor_brand,editor,_createDrawOutlines).call(editor,{drawOutlines:drawOutlines});_assertClassBrand(_DrawingEditor_brand,editor,_addToDrawLayer2).call(editor);editor.onScaleChanging();editor.rotate();return _context50.abrupt("return",editor);case 11:case"end":return _context50.stop();}},_callee49,this);}));function deserialize(_x46,_x47,_x48){return _deserialize4.apply(this,arguments);}return deserialize;}()},{key:"canCreateNewEmptyEditor",value:function canCreateNewEmptyEditor(){return false;}}]);}(AnnotationEditor);_DrawingEditor=DrawingEditor;function _createDrawOutlines(_ref150){var drawOutlines=_ref150.drawOutlines,drawId=_ref150.drawId,drawingOptions=_ref150.drawingOptions;_classPrivateFieldSet(_drawOutlines,this,drawOutlines);this._drawingOptions||(this._drawingOptions=drawingOptions);if(drawId>=0){this._drawId=drawId;this.parent.drawLayer.finalizeDraw(drawId,drawOutlines.defaultProperties);}else{this._drawId=_assertClassBrand(_DrawingEditor_brand,this,_createDrawing).call(this,drawOutlines,this.parent);}_assertClassBrand(_DrawingEditor_brand,this,_updateBbox).call(this,drawOutlines.box);}function _createDrawing(drawOutlines,parent){var _parent$drawLayer$dra5=parent.drawLayer.draw(_DrawingEditor._mergeSVGProperties(this._drawingOptions.toSVGProperties(),drawOutlines.defaultSVGProperties),false,false),id=_parent$drawLayer$dra5.id;return id;}function _cleanDrawLayer2(){if(this._drawId===null||!this.parent){return;}this.parent.drawLayer.remove(this._drawId);this._drawId=null;this._drawingOptions.reset();}function _addToDrawLayer2(){var parent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.parent;if(this._drawId!==null&&this.parent===parent){return;}if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,parent.drawLayer);return;}this._drawingOptions.updateAll();this._drawId=_assertClassBrand(_DrawingEditor_brand,this,_createDrawing).call(this,_classPrivateFieldGet(_drawOutlines,this),parent);}function _convertToParentSpace(_ref151){var _ref152=_slicedToArray(_ref151,4),x=_ref152[0],y=_ref152[1],width=_ref152[2],height=_ref152[3];var _this$parentDimension20=_slicedToArray(this.parentDimensions,2),pW=_this$parentDimension20[0],pH=_this$parentDimension20[1],rotation=this.rotation;switch(rotation){case 90:return[y,1-x,width*(pH/pW),height*(pW/pH)];case 180:return[1-x,1-y,width,height];case 270:return[1-y,x,width*(pH/pW),height*(pW/pH)];default:return[x,y,width,height];}}function _convertToDrawSpace(){var x=this.x,y=this.y,width=this.width,height=this.height,_this$parentDimension21=_slicedToArray(this.parentDimensions,2),pW=_this$parentDimension21[0],pH=_this$parentDimension21[1],rotation=this.rotation;switch(rotation){case 90:return[1-y,x,width*(pW/pH),height*(pH/pW)];case 180:return[1-x,1-y,width,height];case 270:return[y,1-x,width*(pW/pH),height*(pH/pW)];default:return[x,y,width,height];}}function _updateBbox(bbox){var _assertClassBrand$cal40=_assertClassBrand(_DrawingEditor_brand,this,_convertToParentSpace).call(this,bbox);var _assertClassBrand$cal41=_slicedToArray(_assertClassBrand$cal40,4);this.x=_assertClassBrand$cal41[0];this.y=_assertClassBrand$cal41[1];this.width=_assertClassBrand$cal41[2];this.height=_assertClassBrand$cal41[3];if(this.div){this.fixAndSetPosition();var _this$parentDimension22=_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension22[0],parentHeight=_this$parentDimension22[1];this.setDims(this.width*parentWidth,this.height*parentHeight);}this._onResized();}function _rotateBox(){var x=this.x,y=this.y,width=this.width,height=this.height,rotation=this.rotation,parentRotation=this.parentRotation,_this$parentDimension23=_slicedToArray(this.parentDimensions,2),pW=_this$parentDimension23[0],pH=_this$parentDimension23[1];switch((rotation*4+parentRotation)/90){case 1:return[1-y-height,x,height,width];case 2:return[1-x-width,1-y-height,width,height];case 3:return[y,1-x-width,height,width];case 4:return[x,y-width*(pW/pH),height*(pH/pW),width*(pW/pH)];case 5:return[1-y,x,width*(pW/pH),height*(pH/pW)];case 6:return[1-x-height*(pH/pW),1-y,height*(pH/pW),width*(pW/pH)];case 7:return[y-width*(pW/pH),1-x-height*(pH/pW),width*(pW/pH),height*(pH/pW)];case 8:return[x-width,y-height,width,height];case 9:return[1-y,x-width,height,width];case 10:return[1-x,1-y,width,height];case 11:return[y-height,1-x,height,width];case 12:return[x-height*(pH/pW),y,height*(pH/pW),width*(pW/pH)];case 13:return[1-y-width*(pW/pH),x-height*(pH/pW),width*(pW/pH),height*(pH/pW)];case 14:return[1-x,1-y-width*(pW/pH),height*(pH/pW),width*(pW/pH)];case 15:return[y,1-x,width*(pW/pH),height*(pH/pW)];default:return[x,y,width,height];}}_defineProperty(DrawingEditor,"_currentDrawId",-1);_defineProperty(DrawingEditor,"_currentParent",null);var _currentDraw={_:null};var _currentDrawingAC={_:null};var _currentDrawingOptions={_:null};var _currentPointerId={_:NaN};var _currentPointerType={_:null};var _currentPointerIds={_:null};var _currentMoveTimestamp={_:NaN};_defineProperty(DrawingEditor,"_INNER_MARGIN",3);;// ./src/display/editor/drawers/inkdraw.js\nvar _last2=/*#__PURE__*/new WeakMap();var _line2=/*#__PURE__*/new WeakMap();var _lines=/*#__PURE__*/new WeakMap();var _rotation6=/*#__PURE__*/new WeakMap();var _thickness3=/*#__PURE__*/new WeakMap();var _points3=/*#__PURE__*/new WeakMap();var _lastSVGPath=/*#__PURE__*/new WeakMap();var _lastIndex=/*#__PURE__*/new WeakMap();var _outlines2=/*#__PURE__*/new WeakMap();var _parentWidth2=/*#__PURE__*/new WeakMap();var _parentHeight2=/*#__PURE__*/new WeakMap();var _InkDrawOutliner_brand=/*#__PURE__*/new WeakSet();var InkDrawOutliner=/*#__PURE__*/function(){function InkDrawOutliner(_x49,_y6,parentWidth,parentHeight,rotation,thickness){_classCallCheck(this,InkDrawOutliner);_classPrivateMethodInitSpec(this,_InkDrawOutliner_brand);_classPrivateFieldInitSpec(this,_last2,new Float64Array(6));_classPrivateFieldInitSpec(this,_line2,void 0);_classPrivateFieldInitSpec(this,_lines,void 0);_classPrivateFieldInitSpec(this,_rotation6,void 0);_classPrivateFieldInitSpec(this,_thickness3,void 0);_classPrivateFieldInitSpec(this,_points3,void 0);_classPrivateFieldInitSpec(this,_lastSVGPath,"");_classPrivateFieldInitSpec(this,_lastIndex,0);_classPrivateFieldInitSpec(this,_outlines2,new InkDrawOutline());_classPrivateFieldInitSpec(this,_parentWidth2,void 0);_classPrivateFieldInitSpec(this,_parentHeight2,void 0);_classPrivateFieldSet(_parentWidth2,this,parentWidth);_classPrivateFieldSet(_parentHeight2,this,parentHeight);_classPrivateFieldSet(_rotation6,this,rotation);_classPrivateFieldSet(_thickness3,this,thickness);var _assertClassBrand$cal11=_assertClassBrand(_InkDrawOutliner_brand,this,_normalizePoint2).call(this,_x49,_y6);var _assertClassBrand$cal12=_slicedToArray(_assertClassBrand$cal11,2);_x49=_assertClassBrand$cal12[0];_y6=_assertClassBrand$cal12[1];var line=_classPrivateFieldSet(_line2,this,[NaN,NaN,NaN,NaN,_x49,_y6]);_classPrivateFieldSet(_points3,this,[_x49,_y6]);_classPrivateFieldSet(_lines,this,[{line:line,points:_classPrivateFieldGet(_points3,this)}]);_classPrivateFieldGet(_last2,this).set(line,0);}return _createClass(InkDrawOutliner,[{key:"updateProperty",value:function updateProperty(name,value){if(name==="stroke-width"){_classPrivateFieldSet(_thickness3,this,value);}}},{key:"isEmpty",value:function isEmpty(){return!_classPrivateFieldGet(_lines,this)||_classPrivateFieldGet(_lines,this).length===0;}},{key:"isCancellable",value:function isCancellable(){return _classPrivateFieldGet(_points3,this).length<=10;}},{key:"add",value:function add(x,y){var _classPrivateFieldGet106;var _assertClassBrand$cal13=_assertClassBrand(_InkDrawOutliner_brand,this,_normalizePoint2).call(this,x,y);var _assertClassBrand$cal14=_slicedToArray(_assertClassBrand$cal13,2);x=_assertClassBrand$cal14[0];y=_assertClassBrand$cal14[1];var _classPrivateFieldGet104=_classPrivateFieldGet(_last2,this).subarray(2,6),_classPrivateFieldGet105=_slicedToArray(_classPrivateFieldGet104,4),x1=_classPrivateFieldGet105[0],y1=_classPrivateFieldGet105[1],x2=_classPrivateFieldGet105[2],y2=_classPrivateFieldGet105[3];var diffX=x-x2;var diffY=y-y2;var d=Math.hypot(_classPrivateFieldGet(_parentWidth2,this)*diffX,_classPrivateFieldGet(_parentHeight2,this)*diffY);if(d<=2){return null;}_classPrivateFieldGet(_points3,this).push(x,y);if(isNaN(x1)){_classPrivateFieldGet(_last2,this).set([x2,y2,x,y],2);_classPrivateFieldGet(_line2,this).push(NaN,NaN,NaN,NaN,x,y);return{path:{d:this.toSVGPath()}};}if(isNaN(_classPrivateFieldGet(_last2,this)[0])){_classPrivateFieldGet(_line2,this).splice(6,6);}_classPrivateFieldGet(_last2,this).set([x1,y1,x2,y2,x,y],0);(_classPrivateFieldGet106=_classPrivateFieldGet(_line2,this)).push.apply(_classPrivateFieldGet106,_toConsumableArray(Outline.createBezierPoints(x1,y1,x2,y2,x,y)));return{path:{d:this.toSVGPath()}};}},{key:"end",value:function end(x,y){var change=this.add(x,y);if(change){return change;}if(_classPrivateFieldGet(_points3,this).length===2){return{path:{d:this.toSVGPath()}};}return null;}},{key:"startNew",value:function startNew(x,y,parentWidth,parentHeight,rotation){_classPrivateFieldSet(_parentWidth2,this,parentWidth);_classPrivateFieldSet(_parentHeight2,this,parentHeight);_classPrivateFieldSet(_rotation6,this,rotation);var _assertClassBrand$cal15=_assertClassBrand(_InkDrawOutliner_brand,this,_normalizePoint2).call(this,x,y);var _assertClassBrand$cal16=_slicedToArray(_assertClassBrand$cal15,2);x=_assertClassBrand$cal16[0];y=_assertClassBrand$cal16[1];var line=_classPrivateFieldSet(_line2,this,[NaN,NaN,NaN,NaN,x,y]);_classPrivateFieldSet(_points3,this,[x,y]);var last=_classPrivateFieldGet(_lines,this).at(-1);if(last){last.line=new Float32Array(last.line);last.points=new Float32Array(last.points);}_classPrivateFieldGet(_lines,this).push({line:line,points:_classPrivateFieldGet(_points3,this)});_classPrivateFieldGet(_last2,this).set(line,0);_classPrivateFieldSet(_lastIndex,this,0);this.toSVGPath();return null;}},{key:"getLastElement",value:function getLastElement(){return _classPrivateFieldGet(_lines,this).at(-1);}},{key:"setLastElement",value:function setLastElement(element){if(!_classPrivateFieldGet(_lines,this)){return _classPrivateFieldGet(_outlines2,this).setLastElement(element);}_classPrivateFieldGet(_lines,this).push(element);_classPrivateFieldSet(_line2,this,element.line);_classPrivateFieldSet(_points3,this,element.points);_classPrivateFieldSet(_lastIndex,this,0);return{path:{d:this.toSVGPath()}};}},{key:"removeLastElement",value:function removeLastElement(){if(!_classPrivateFieldGet(_lines,this)){return _classPrivateFieldGet(_outlines2,this).removeLastElement();}_classPrivateFieldGet(_lines,this).pop();_classPrivateFieldSet(_lastSVGPath,this,"");for(var i=0,ii=_classPrivateFieldGet(_lines,this).length;i<ii;i++){var _classPrivateFieldGet107=_classPrivateFieldGet(_lines,this)[i],line=_classPrivateFieldGet107.line,points=_classPrivateFieldGet107.points;_classPrivateFieldSet(_line2,this,line);_classPrivateFieldSet(_points3,this,points);_classPrivateFieldSet(_lastIndex,this,0);this.toSVGPath();}return{path:{d:_classPrivateFieldGet(_lastSVGPath,this)}};}},{key:"toSVGPath",value:function toSVGPath(){var firstX=Outline.svgRound(_classPrivateFieldGet(_line2,this)[4]);var firstY=Outline.svgRound(_classPrivateFieldGet(_line2,this)[5]);if(_classPrivateFieldGet(_points3,this).length===2){_classPrivateFieldSet(_lastSVGPath,this,"".concat(_classPrivateFieldGet(_lastSVGPath,this)," M ").concat(firstX," ").concat(firstY," Z"));return _classPrivateFieldGet(_lastSVGPath,this);}if(_classPrivateFieldGet(_points3,this).length<=6){var i=_classPrivateFieldGet(_lastSVGPath,this).lastIndexOf("M");_classPrivateFieldSet(_lastSVGPath,this,"".concat(_classPrivateFieldGet(_lastSVGPath,this).slice(0,i)," M ").concat(firstX," ").concat(firstY));_classPrivateFieldSet(_lastIndex,this,6);}if(_classPrivateFieldGet(_points3,this).length===4){var secondX=Outline.svgRound(_classPrivateFieldGet(_line2,this)[10]);var secondY=Outline.svgRound(_classPrivateFieldGet(_line2,this)[11]);_classPrivateFieldSet(_lastSVGPath,this,"".concat(_classPrivateFieldGet(_lastSVGPath,this)," L ").concat(secondX," ").concat(secondY));_classPrivateFieldSet(_lastIndex,this,12);return _classPrivateFieldGet(_lastSVGPath,this);}var buffer=[];if(_classPrivateFieldGet(_lastIndex,this)===0){buffer.push("M ".concat(firstX," ").concat(firstY));_classPrivateFieldSet(_lastIndex,this,6);}for(var _i30=_classPrivateFieldGet(_lastIndex,this),ii=_classPrivateFieldGet(_line2,this).length;_i30<ii;_i30+=6){var _classPrivateFieldGet108=_classPrivateFieldGet(_line2,this).slice(_i30,_i30+6).map(Outline.svgRound),_classPrivateFieldGet109=_slicedToArray(_classPrivateFieldGet108,6),c1x=_classPrivateFieldGet109[0],c1y=_classPrivateFieldGet109[1],c2x=_classPrivateFieldGet109[2],c2y=_classPrivateFieldGet109[3],x=_classPrivateFieldGet109[4],y=_classPrivateFieldGet109[5];buffer.push("C".concat(c1x," ").concat(c1y," ").concat(c2x," ").concat(c2y," ").concat(x," ").concat(y));}_classPrivateFieldSet(_lastSVGPath,this,_classPrivateFieldGet(_lastSVGPath,this)+buffer.join(" "));_classPrivateFieldSet(_lastIndex,this,_classPrivateFieldGet(_line2,this).length);return _classPrivateFieldGet(_lastSVGPath,this);}},{key:"getOutlines",value:function getOutlines(parentWidth,parentHeight,scale,innerMargin){var last=_classPrivateFieldGet(_lines,this).at(-1);last.line=new Float32Array(last.line);last.points=new Float32Array(last.points);_classPrivateFieldGet(_outlines2,this).build(_classPrivateFieldGet(_lines,this),parentWidth,parentHeight,scale,_classPrivateFieldGet(_rotation6,this),_classPrivateFieldGet(_thickness3,this),innerMargin);_classPrivateFieldSet(_last2,this,null);_classPrivateFieldSet(_line2,this,null);_classPrivateFieldSet(_lines,this,null);_classPrivateFieldSet(_lastSVGPath,this,null);return _classPrivateFieldGet(_outlines2,this);}},{key:"defaultSVGProperties",get:function get(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:true},bbox:[0,0,1,1]};}}]);}();function _normalizePoint2(x,y){return Outline._normalizePoint(x,y,_classPrivateFieldGet(_parentWidth2,this),_classPrivateFieldGet(_parentHeight2,this),_classPrivateFieldGet(_rotation6,this));}var _bbox3=/*#__PURE__*/new WeakMap();var _currentRotation=/*#__PURE__*/new WeakMap();var _innerMargin3=/*#__PURE__*/new WeakMap();var _lines2=/*#__PURE__*/new WeakMap();var _parentWidth3=/*#__PURE__*/new WeakMap();var _parentHeight3=/*#__PURE__*/new WeakMap();var _parentScale=/*#__PURE__*/new WeakMap();var _rotation7=/*#__PURE__*/new WeakMap();var _thickness4=/*#__PURE__*/new WeakMap();var _InkDrawOutline_brand=/*#__PURE__*/new WeakSet();var InkDrawOutline=/*#__PURE__*/function(_Outline4){function InkDrawOutline(){var _this97;_classCallCheck(this,InkDrawOutline);for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}_this97=_callSuper(this,InkDrawOutline,[].concat(args));_classPrivateMethodInitSpec(_this97,_InkDrawOutline_brand);_classPrivateFieldInitSpec(_this97,_bbox3,void 0);_classPrivateFieldInitSpec(_this97,_currentRotation,0);_classPrivateFieldInitSpec(_this97,_innerMargin3,void 0);_classPrivateFieldInitSpec(_this97,_lines2,void 0);_classPrivateFieldInitSpec(_this97,_parentWidth3,void 0);_classPrivateFieldInitSpec(_this97,_parentHeight3,void 0);_classPrivateFieldInitSpec(_this97,_parentScale,void 0);_classPrivateFieldInitSpec(_this97,_rotation7,void 0);_classPrivateFieldInitSpec(_this97,_thickness4,void 0);return _this97;}_inherits(InkDrawOutline,_Outline4);return _createClass(InkDrawOutline,[{key:"build",value:function build(lines,parentWidth,parentHeight,parentScale,rotation,thickness,innerMargin){_classPrivateFieldSet(_parentWidth3,this,parentWidth);_classPrivateFieldSet(_parentHeight3,this,parentHeight);_classPrivateFieldSet(_parentScale,this,parentScale);_classPrivateFieldSet(_rotation7,this,rotation);_classPrivateFieldSet(_thickness4,this,thickness);_classPrivateFieldSet(_innerMargin3,this,innerMargin!==null&&innerMargin!==void 0?innerMargin:0);_classPrivateFieldSet(_lines2,this,lines);_assertClassBrand(_InkDrawOutline_brand,this,_computeBbox).call(this);}},{key:"thickness",get:function get(){return _classPrivateFieldGet(_thickness4,this);}},{key:"setLastElement",value:function setLastElement(element){_classPrivateFieldGet(_lines2,this).push(element);return{path:{d:this.toSVGPath()}};}},{key:"removeLastElement",value:function removeLastElement(){_classPrivateFieldGet(_lines2,this).pop();return{path:{d:this.toSVGPath()}};}},{key:"toSVGPath",value:function toSVGPath(){var buffer=[];var _iterator148=_createForOfIteratorHelper(_classPrivateFieldGet(_lines2,this)),_step148;try{for(_iterator148.s();!(_step148=_iterator148.n()).done;){var line=_step148.value.line;buffer.push("M".concat(Outline.svgRound(line[4])," ").concat(Outline.svgRound(line[5])));if(line.length===6){buffer.push("Z");continue;}if(line.length===12&&isNaN(line[6])){buffer.push("L".concat(Outline.svgRound(line[10])," ").concat(Outline.svgRound(line[11])));continue;}for(var i=6,ii=line.length;i<ii;i+=6){var _line$subarray$map=line.subarray(i,i+6).map(Outline.svgRound),_line$subarray$map2=_slicedToArray(_line$subarray$map,6),c1x=_line$subarray$map2[0],c1y=_line$subarray$map2[1],c2x=_line$subarray$map2[2],c2y=_line$subarray$map2[3],x=_line$subarray$map2[4],y=_line$subarray$map2[5];buffer.push("C".concat(c1x," ").concat(c1y," ").concat(c2x," ").concat(c2y," ").concat(x," ").concat(y));}}}catch(err){_iterator148.e(err);}finally{_iterator148.f();}return buffer.join("");}},{key:"serialize",value:function serialize(_ref109,isForCopying){var _ref110=_slicedToArray(_ref109,4),pageX=_ref110[0],pageY=_ref110[1],pageWidth=_ref110[2],pageHeight=_ref110[3];var serializedLines=[];var serializedPoints=[];var _assertClassBrand$cal17=_assertClassBrand(_InkDrawOutline_brand,this,_getBBoxWithNoMargin).call(this),_assertClassBrand$cal18=_slicedToArray(_assertClassBrand$cal17,4),x=_assertClassBrand$cal18[0],y=_assertClassBrand$cal18[1],width=_assertClassBrand$cal18[2],height=_assertClassBrand$cal18[3];var tx,ty,sx,sy,x1,y1,x2,y2,rescaleFn;switch(_classPrivateFieldGet(_rotation7,this)){case 0:rescaleFn=Outline._rescale;tx=pageX;ty=pageY+pageHeight;sx=pageWidth;sy=-pageHeight;x1=pageX+x*pageWidth;y1=pageY+(1-y-height)*pageHeight;x2=pageX+(x+width)*pageWidth;y2=pageY+(1-y)*pageHeight;break;case 90:rescaleFn=Outline._rescaleAndSwap;tx=pageX;ty=pageY;sx=pageWidth;sy=pageHeight;x1=pageX+y*pageWidth;y1=pageY+x*pageHeight;x2=pageX+(y+height)*pageWidth;y2=pageY+(x+width)*pageHeight;break;case 180:rescaleFn=Outline._rescale;tx=pageX+pageWidth;ty=pageY;sx=-pageWidth;sy=pageHeight;x1=pageX+(1-x-width)*pageWidth;y1=pageY+y*pageHeight;x2=pageX+(1-x)*pageWidth;y2=pageY+(y+height)*pageHeight;break;case 270:rescaleFn=Outline._rescaleAndSwap;tx=pageX+pageWidth;ty=pageY+pageHeight;sx=-pageWidth;sy=-pageHeight;x1=pageX+(1-y-height)*pageWidth;y1=pageY+(1-x-width)*pageHeight;x2=pageX+(1-y)*pageWidth;y2=pageY+(1-x)*pageHeight;break;}var _iterator149=_createForOfIteratorHelper(_classPrivateFieldGet(_lines2,this)),_step149;try{for(_iterator149.s();!(_step149=_iterator149.n()).done;){var _step149$value=_step149.value,line=_step149$value.line,points=_step149$value.points;serializedLines.push(rescaleFn(line,tx,ty,sx,sy,isForCopying?new Array(line.length):null));serializedPoints.push(rescaleFn(points,tx,ty,sx,sy,isForCopying?new Array(points.length):null));}}catch(err){_iterator149.e(err);}finally{_iterator149.f();}return{lines:serializedLines,points:serializedPoints,rect:[x1,y1,x2,y2]};}},{key:"box",get:function get(){return _classPrivateFieldGet(_bbox3,this);}},{key:"updateProperty",value:function updateProperty(name,value){if(name==="stroke-width"){return _assertClassBrand(_InkDrawOutline_brand,this,_updateThickness2).call(this,value);}return null;}},{key:"updateParentDimensions",value:function updateParentDimensions(_ref111,scale){var _ref112=_slicedToArray(_ref111,2),width=_ref112[0],height=_ref112[1];var _assertClassBrand$cal19=_assertClassBrand(_InkDrawOutline_brand,this,_getMarginComponents).call(this),_assertClassBrand$cal20=_slicedToArray(_assertClassBrand$cal19,2),oldMarginX=_assertClassBrand$cal20[0],oldMarginY=_assertClassBrand$cal20[1];_classPrivateFieldSet(_parentWidth3,this,width);_classPrivateFieldSet(_parentHeight3,this,height);_classPrivateFieldSet(_parentScale,this,scale);var _assertClassBrand$cal21=_assertClassBrand(_InkDrawOutline_brand,this,_getMarginComponents).call(this),_assertClassBrand$cal22=_slicedToArray(_assertClassBrand$cal21,2),newMarginX=_assertClassBrand$cal22[0],newMarginY=_assertClassBrand$cal22[1];var diffMarginX=newMarginX-oldMarginX;var diffMarginY=newMarginY-oldMarginY;var bbox=_classPrivateFieldGet(_bbox3,this);bbox[0]-=diffMarginX;bbox[1]-=diffMarginY;bbox[2]+=2*diffMarginX;bbox[3]+=2*diffMarginY;return bbox;}},{key:"updateRotation",value:function updateRotation(rotation){_classPrivateFieldSet(_currentRotation,this,rotation);return{path:{transform:this.rotationTransform}};}},{key:"viewBox",get:function get(){return _classPrivateFieldGet(_bbox3,this).map(Outline.svgRound).join(" ");}},{key:"defaultProperties",get:function get(){var _classPrivateFieldGet110=_classPrivateFieldGet(_bbox3,this),_classPrivateFieldGet111=_slicedToArray(_classPrivateFieldGet110,2),x=_classPrivateFieldGet111[0],y=_classPrivateFieldGet111[1];return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(Outline.svgRound(x)," ").concat(Outline.svgRound(y))}};}},{key:"rotationTransform",get:function get(){var _classPrivateFieldGet112=_classPrivateFieldGet(_bbox3,this),_classPrivateFieldGet113=_slicedToArray(_classPrivateFieldGet112,4),width=_classPrivateFieldGet113[2],height=_classPrivateFieldGet113[3];var a=0,b=0,c=0,d=0,e=0,f=0;switch(_classPrivateFieldGet(_currentRotation,this)){case 90:b=height/width;c=-width/height;e=width;break;case 180:a=-1;d=-1;e=width;f=height;break;case 270:b=-height/width;c=width/height;f=height;break;default:return"";}return"matrix(".concat(a," ").concat(b," ").concat(c," ").concat(d," ").concat(Outline.svgRound(e)," ").concat(Outline.svgRound(f),")");}},{key:"getPathResizingSVGProperties",value:function getPathResizingSVGProperties(_ref113){var _ref114=_slicedToArray(_ref113,4),newX=_ref114[0],newY=_ref114[1],newWidth=_ref114[2],newHeight=_ref114[3];var _assertClassBrand$cal23=_assertClassBrand(_InkDrawOutline_brand,this,_getMarginComponents).call(this),_assertClassBrand$cal24=_slicedToArray(_assertClassBrand$cal23,2),marginX=_assertClassBrand$cal24[0],marginY=_assertClassBrand$cal24[1];var _classPrivateFieldGet114=_classPrivateFieldGet(_bbox3,this),_classPrivateFieldGet115=_slicedToArray(_classPrivateFieldGet114,4),x=_classPrivateFieldGet115[0],y=_classPrivateFieldGet115[1],width=_classPrivateFieldGet115[2],height=_classPrivateFieldGet115[3];if(Math.abs(width-marginX)<=Outline.PRECISION||Math.abs(height-marginY)<=Outline.PRECISION){var tx=newX+newWidth/2-(x+width/2);var ty=newY+newHeight/2-(y+height/2);return{path:{"transform-origin":"".concat(Outline.svgRound(newX)," ").concat(Outline.svgRound(newY)),transform:"".concat(this.rotationTransform," translate(").concat(tx," ").concat(ty,")")}};}var s1x=(newWidth-2*marginX)/(width-2*marginX);var s1y=(newHeight-2*marginY)/(height-2*marginY);var s2x=width/newWidth;var s2y=height/newHeight;return{path:{"transform-origin":"".concat(Outline.svgRound(x)," ").concat(Outline.svgRound(y)),transform:"".concat(this.rotationTransform," scale(").concat(s2x," ").concat(s2y,") ")+"translate(".concat(Outline.svgRound(marginX)," ").concat(Outline.svgRound(marginY),") scale(").concat(s1x," ").concat(s1y,") ")+"translate(".concat(Outline.svgRound(-marginX)," ").concat(Outline.svgRound(-marginY),")")}};}},{key:"getPathResizedSVGProperties",value:function getPathResizedSVGProperties(_ref115){var _ref116=_slicedToArray(_ref115,4),newX=_ref116[0],newY=_ref116[1],newWidth=_ref116[2],newHeight=_ref116[3];var _assertClassBrand$cal25=_assertClassBrand(_InkDrawOutline_brand,this,_getMarginComponents).call(this),_assertClassBrand$cal26=_slicedToArray(_assertClassBrand$cal25,2),marginX=_assertClassBrand$cal26[0],marginY=_assertClassBrand$cal26[1];var bbox=_classPrivateFieldGet(_bbox3,this);var _bbox4=_slicedToArray(bbox,4),x=_bbox4[0],y=_bbox4[1],width=_bbox4[2],height=_bbox4[3];bbox[0]=newX;bbox[1]=newY;bbox[2]=newWidth;bbox[3]=newHeight;if(Math.abs(width-marginX)<=Outline.PRECISION||Math.abs(height-marginY)<=Outline.PRECISION){var _tx=newX+newWidth/2-(x+width/2);var _ty=newY+newHeight/2-(y+height/2);var _iterator150=_createForOfIteratorHelper(_classPrivateFieldGet(_lines2,this)),_step150;try{for(_iterator150.s();!(_step150=_iterator150.n()).done;){var _step150$value=_step150.value,line=_step150$value.line,points=_step150$value.points;Outline._translate(line,_tx,_ty,line);Outline._translate(points,_tx,_ty,points);}}catch(err){_iterator150.e(err);}finally{_iterator150.f();}return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(Outline.svgRound(newX)," ").concat(Outline.svgRound(newY)),transform:this.rotationTransform||null,d:this.toSVGPath()}};}var s1x=(newWidth-2*marginX)/(width-2*marginX);var s1y=(newHeight-2*marginY)/(height-2*marginY);var tx=-s1x*(x+marginX)+newX+marginX;var ty=-s1y*(y+marginY)+newY+marginY;if(s1x!==1||s1y!==1||tx!==0||ty!==0){var _iterator151=_createForOfIteratorHelper(_classPrivateFieldGet(_lines2,this)),_step151;try{for(_iterator151.s();!(_step151=_iterator151.n()).done;){var _step151$value=_step151.value,_line3=_step151$value.line,_points4=_step151$value.points;Outline._rescale(_line3,tx,ty,s1x,s1y,_line3);Outline._rescale(_points4,tx,ty,s1x,s1y,_points4);}}catch(err){_iterator151.e(err);}finally{_iterator151.f();}}return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(Outline.svgRound(newX)," ").concat(Outline.svgRound(newY)),transform:this.rotationTransform||null,d:this.toSVGPath()}};}},{key:"getPathTranslatedSVGProperties",value:function getPathTranslatedSVGProperties(_ref117,parentDimensions){var _ref118=_slicedToArray(_ref117,2),newX=_ref118[0],newY=_ref118[1];var _parentDimensions=_slicedToArray(parentDimensions,2),newParentWidth=_parentDimensions[0],newParentHeight=_parentDimensions[1];var bbox=_classPrivateFieldGet(_bbox3,this);var tx=newX-bbox[0];var ty=newY-bbox[1];if(_classPrivateFieldGet(_parentWidth3,this)===newParentWidth&&_classPrivateFieldGet(_parentHeight3,this)===newParentHeight){var _iterator152=_createForOfIteratorHelper(_classPrivateFieldGet(_lines2,this)),_step152;try{for(_iterator152.s();!(_step152=_iterator152.n()).done;){var _step152$value=_step152.value,line=_step152$value.line,points=_step152$value.points;Outline._translate(line,tx,ty,line);Outline._translate(points,tx,ty,points);}}catch(err){_iterator152.e(err);}finally{_iterator152.f();}}else{var sx=_classPrivateFieldGet(_parentWidth3,this)/newParentWidth;var sy=_classPrivateFieldGet(_parentHeight3,this)/newParentHeight;_classPrivateFieldSet(_parentWidth3,this,newParentWidth);_classPrivateFieldSet(_parentHeight3,this,newParentHeight);var _iterator153=_createForOfIteratorHelper(_classPrivateFieldGet(_lines2,this)),_step153;try{for(_iterator153.s();!(_step153=_iterator153.n()).done;){var _step153$value=_step153.value,_line4=_step153$value.line,_points5=_step153$value.points;Outline._rescale(_line4,tx,ty,sx,sy,_line4);Outline._rescale(_points5,tx,ty,sx,sy,_points5);}}catch(err){_iterator153.e(err);}finally{_iterator153.f();}bbox[2]*=sx;bbox[3]*=sy;}bbox[0]=newX;bbox[1]=newY;return{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":"".concat(Outline.svgRound(newX)," ").concat(Outline.svgRound(newY))}};}},{key:"defaultSVGProperties",get:function get(){var bbox=_classPrivateFieldGet(_bbox3,this);return{root:{viewBox:this.viewBox},rootClass:{draw:true},path:{d:this.toSVGPath(),"transform-origin":"".concat(Outline.svgRound(bbox[0])," ").concat(Outline.svgRound(bbox[1])),transform:this.rotationTransform||null},bbox:bbox};}}],[{key:"deserialize",value:function deserialize(pageX,pageY,pageWidth,pageHeight,innerMargin,_ref119){var _ref119$paths=_ref119.paths,lines=_ref119$paths.lines,points=_ref119$paths.points,rotation=_ref119.rotation,thickness=_ref119.thickness;var newLines=[];var tx,ty,sx,sy,rescaleFn;switch(rotation){case 0:rescaleFn=Outline._rescale;tx=-pageX/pageWidth;ty=pageY/pageHeight+1;sx=1/pageWidth;sy=-1/pageHeight;break;case 90:rescaleFn=Outline._rescaleAndSwap;tx=-pageY/pageHeight;ty=-pageX/pageWidth;sx=1/pageHeight;sy=1/pageWidth;break;case 180:rescaleFn=Outline._rescale;tx=pageX/pageWidth+1;ty=-pageY/pageHeight;sx=-1/pageWidth;sy=1/pageHeight;break;case 270:rescaleFn=Outline._rescaleAndSwap;tx=pageY/pageHeight+1;ty=pageX/pageWidth+1;sx=-1/pageHeight;sy=-1/pageWidth;break;}if(!lines){lines=[];var _iterator154=_createForOfIteratorHelper(points),_step154;try{for(_iterator154.s();!(_step154=_iterator154.n()).done;){var point=_step154.value;var len=point.length;if(len===2){lines.push(new Float32Array([NaN,NaN,NaN,NaN,point[0],point[1]]));continue;}if(len===4){lines.push(new Float32Array([NaN,NaN,NaN,NaN,point[0],point[1],NaN,NaN,NaN,NaN,point[2],point[3]]));continue;}var line=new Float32Array(3*(len-2));lines.push(line);var _point$subarray=point.subarray(0,4),_point$subarray2=_slicedToArray(_point$subarray,4),x1=_point$subarray2[0],y1=_point$subarray2[1],x2=_point$subarray2[2],y2=_point$subarray2[3];line.set([NaN,NaN,NaN,NaN,x1,y1],0);for(var i=4;i<len;i+=2){var x=point[i];var y=point[i+1];line.set(Outline.createBezierPoints(x1,y1,x2,y2,x,y),(i-2)*3);var _ref120=[x2,y2,x,y];x1=_ref120[0];y1=_ref120[1];x2=_ref120[2];y2=_ref120[3];}}}catch(err){_iterator154.e(err);}finally{_iterator154.f();}}for(var _i31=0,ii=lines.length;_i31<ii;_i31++){newLines.push({line:rescaleFn(lines[_i31].map(function(x){return x!==null&&x!==void 0?x:NaN;}),tx,ty,sx,sy),points:rescaleFn(points[_i31].map(function(x){return x!==null&&x!==void 0?x:NaN;}),tx,ty,sx,sy)});}var outlines=new this.prototype.constructor();outlines.build(newLines,pageWidth,pageHeight,1,rotation,thickness,innerMargin);return outlines;}}]);}(Outline);function _getMarginComponents(){var thickness=arguments.length>0&&arguments[0]!==undefined?arguments[0]:_classPrivateFieldGet(_thickness4,this);var margin=_classPrivateFieldGet(_innerMargin3,this)+thickness/2*_classPrivateFieldGet(_parentScale,this);return _classPrivateFieldGet(_rotation7,this)%180===0?[margin/_classPrivateFieldGet(_parentWidth3,this),margin/_classPrivateFieldGet(_parentHeight3,this)]:[margin/_classPrivateFieldGet(_parentHeight3,this),margin/_classPrivateFieldGet(_parentWidth3,this)];}function _getBBoxWithNoMargin(){var _classPrivateFieldGet175=_classPrivateFieldGet(_bbox3,this),_classPrivateFieldGet176=_slicedToArray(_classPrivateFieldGet175,4),x=_classPrivateFieldGet176[0],y=_classPrivateFieldGet176[1],width=_classPrivateFieldGet176[2],height=_classPrivateFieldGet176[3];var _assertClassBrand$cal42=_assertClassBrand(_InkDrawOutline_brand,this,_getMarginComponents).call(this,0),_assertClassBrand$cal43=_slicedToArray(_assertClassBrand$cal42,2),marginX=_assertClassBrand$cal43[0],marginY=_assertClassBrand$cal43[1];return[x+marginX,y+marginY,width-2*marginX,height-2*marginY];}function _computeBbox(){var bbox=_classPrivateFieldSet(_bbox3,this,new Float32Array([Infinity,Infinity,-Infinity,-Infinity]));var _iterator190=_createForOfIteratorHelper(_classPrivateFieldGet(_lines2,this)),_step190;try{for(_iterator190.s();!(_step190=_iterator190.n()).done;){var line=_step190.value.line;if(line.length<=12){for(var i=4,ii=line.length;i<ii;i+=6){var _line$subarray=line.subarray(i,i+2),_line$subarray2=_slicedToArray(_line$subarray,2),x=_line$subarray2[0],y=_line$subarray2[1];bbox[0]=Math.min(bbox[0],x);bbox[1]=Math.min(bbox[1],y);bbox[2]=Math.max(bbox[2],x);bbox[3]=Math.max(bbox[3],y);}continue;}var lastX=line[4],lastY=line[5];for(var _i37=6,_ii5=line.length;_i37<_ii5;_i37+=6){var _line$subarray3=line.subarray(_i37,_i37+6),_line$subarray4=_slicedToArray(_line$subarray3,6),c1x=_line$subarray4[0],c1y=_line$subarray4[1],c2x=_line$subarray4[2],c2y=_line$subarray4[3],_x71=_line$subarray4[4],_y9=_line$subarray4[5];_Util.bezierBoundingBox(lastX,lastY,c1x,c1y,c2x,c2y,_x71,_y9,bbox);lastX=_x71;lastY=_y9;}}}catch(err){_iterator190.e(err);}finally{_iterator190.f();}var _assertClassBrand$cal44=_assertClassBrand(_InkDrawOutline_brand,this,_getMarginComponents).call(this),_assertClassBrand$cal45=_slicedToArray(_assertClassBrand$cal44,2),marginX=_assertClassBrand$cal45[0],marginY=_assertClassBrand$cal45[1];bbox[0]=Math.min(1,Math.max(0,bbox[0]-marginX));bbox[1]=Math.min(1,Math.max(0,bbox[1]-marginY));bbox[2]=Math.min(1,Math.max(0,bbox[2]+marginX));bbox[3]=Math.min(1,Math.max(0,bbox[3]+marginY));bbox[2]-=bbox[0];bbox[3]-=bbox[1];}function _updateThickness2(thickness){var _assertClassBrand$cal46=_assertClassBrand(_InkDrawOutline_brand,this,_getMarginComponents).call(this),_assertClassBrand$cal47=_slicedToArray(_assertClassBrand$cal46,2),oldMarginX=_assertClassBrand$cal47[0],oldMarginY=_assertClassBrand$cal47[1];_classPrivateFieldSet(_thickness4,this,thickness);var _assertClassBrand$cal48=_assertClassBrand(_InkDrawOutline_brand,this,_getMarginComponents).call(this),_assertClassBrand$cal49=_slicedToArray(_assertClassBrand$cal48,2),newMarginX=_assertClassBrand$cal49[0],newMarginY=_assertClassBrand$cal49[1];var diffMarginX=newMarginX-oldMarginX,diffMarginY=newMarginY-oldMarginY;var bbox=_classPrivateFieldGet(_bbox3,this);bbox[0]-=diffMarginX;bbox[1]-=diffMarginY;bbox[2]+=2*diffMarginX;bbox[3]+=2*diffMarginY;return bbox;};// ./src/display/editor/ink.js\nvar InkDrawingOptions=/*#__PURE__*/function(_DrawingOptions2){function InkDrawingOptions(viewerParameters){var _this98;_classCallCheck(this,InkDrawingOptions);_this98=_callSuper(this,InkDrawingOptions);_this98._viewParameters=viewerParameters;_superPropGet((_this98,InkDrawingOptions),"updateProperties",_this98,3)([{fill:"none",stroke:AnnotationEditor._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10}]);return _this98;}_inherits(InkDrawingOptions,_DrawingOptions2);return _createClass(InkDrawingOptions,[{key:"updateSVGProperty",value:function updateSVGProperty(name,value){if(name==="stroke-width"){value!==null&&value!==void 0?value:value=this["stroke-width"];value*=this._viewParameters.realScale;}_superPropGet(InkDrawingOptions,"updateSVGProperty",this,3)([name,value]);}},{key:"clone",value:function clone(){var clone=new InkDrawingOptions(this._viewParameters);clone.updateAll(this);return clone;}}]);}(DrawingOptions);var _InkEditor_brand=/*#__PURE__*/new WeakSet();var InkEditor=/*#__PURE__*/function(_DrawingEditor2){function InkEditor(params){var _this99;_classCallCheck(this,InkEditor);_this99=_callSuper(this,InkEditor,[_objectSpread(_objectSpread({},params),{},{name:"inkEditor"})]);_classPrivateMethodInitSpec(_this99,_InkEditor_brand);_this99._willKeepAspectRatio=true;return _this99;}_inherits(InkEditor,_DrawingEditor2);return _createClass(InkEditor,[{key:"onScaleChanging",value:function onScaleChanging(){if(!this.parent){return;}_superPropGet(InkEditor,"onScaleChanging",this,3)([]);var _drawId=this._drawId,_drawingOptions=this._drawingOptions,parent=this.parent;_drawingOptions.updateSVGProperty("stroke-width");parent.drawLayer.updateProperties(_drawId,_drawingOptions.toSVGProperties());}},{key:"createDrawingOptions",value:function createDrawingOptions(_ref121){var color=_ref121.color,thickness=_ref121.thickness,opacity=_ref121.opacity;this._drawingOptions=InkEditor.getDefaultDrawingOptions({stroke:_Util.makeHexColor.apply(_Util,_toConsumableArray(color)),"stroke-width":thickness,"stroke-opacity":opacity});}},{key:"serialize",value:function serialize(){var isForCopying=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(this.isEmpty()){return null;}if(this.deleted){return this.serializeDeleted();}var _this$serializeDraw=this.serializeDraw(isForCopying),lines=_this$serializeDraw.lines,points=_this$serializeDraw.points,rect=_this$serializeDraw.rect;var _this$_drawingOptions=this._drawingOptions,stroke=_this$_drawingOptions.stroke,opacity=_this$_drawingOptions["stroke-opacity"],thickness=_this$_drawingOptions["stroke-width"];var serialized={annotationType:_AnnotationEditorType.INK,color:AnnotationEditor._colorManager.convert(stroke),opacity:opacity,thickness:thickness,paths:{lines:lines,points:points},pageIndex:this.pageIndex,rect:rect,rotation:this.rotation,structTreeParentId:this._structTreeParentId};if(isForCopying){serialized.isCopy=true;return serialized;}if(this.annotationElementId&&!_assertClassBrand(_InkEditor_brand,this,_hasElementChanged3).call(this,serialized)){return null;}serialized.id=this.annotationElementId;return serialized;}},{key:"renderAnnotationElement",value:function renderAnnotationElement(annotation){var _this$serializeDraw2=this.serializeDraw(false),points=_this$serializeDraw2.points,rect=_this$serializeDraw2.rect;annotation.updateEdited({rect:rect,thickness:this._drawingOptions["stroke-width"],points:points});return null;}}],[{key:"initialize",value:function initialize(l10n,uiManager){AnnotationEditor.initialize(l10n,uiManager);this._defaultDrawingOptions=new InkDrawingOptions(uiManager.viewParameters);}},{key:"getDefaultDrawingOptions",value:function getDefaultDrawingOptions(options){var clone=this._defaultDrawingOptions.clone();clone.updateProperties(options);return clone;}},{key:"supportMultipleDrawings",get:function get(){return true;}},{key:"typesMap",get:function get(){return _shadow(this,"typesMap",new Map([[_AnnotationEditorParamsType.INK_THICKNESS,"stroke-width"],[_AnnotationEditorParamsType.INK_COLOR,"stroke"],[_AnnotationEditorParamsType.INK_OPACITY,"stroke-opacity"]]));}},{key:"createDrawerInstance",value:function createDrawerInstance(x,y,parentWidth,parentHeight,rotation){return new InkDrawOutliner(x,y,parentWidth,parentHeight,rotation,this._defaultDrawingOptions["stroke-width"]);}},{key:"deserializeDraw",value:function deserializeDraw(pageX,pageY,pageWidth,pageHeight,innerMargin,data){return InkDrawOutline.deserialize(pageX,pageY,pageWidth,pageHeight,innerMargin,data);}},{key:"deserialize",value:function(){var _deserialize5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee50(data,parent,uiManager){var initialData,_data8,_data8$data,inkLists,rect,rotation,id,color,opacity,thickness,popupRef,pageNumber,editor;return _regeneratorRuntime().wrap(function _callee50$(_context51){while(1)switch(_context51.prev=_context51.next){case 0:initialData=null;if(data instanceof InkAnnotationElement){_data8=data,_data8$data=_data8.data,inkLists=_data8$data.inkLists,rect=_data8$data.rect,rotation=_data8$data.rotation,id=_data8$data.id,color=_data8$data.color,opacity=_data8$data.opacity,thickness=_data8$data.borderStyle.rawWidth,popupRef=_data8$data.popupRef,pageNumber=_data8.parent.page.pageNumber;initialData=data={annotationType:_AnnotationEditorType.INK,color:Array.from(color),thickness:thickness,opacity:opacity,paths:{points:inkLists},boxes:null,pageIndex:pageNumber-1,rect:rect.slice(0),rotation:rotation,id:id,deleted:false,popupRef:popupRef};}_context51.next=4;return _superPropGet(InkEditor,"deserialize",this,2)([data,parent,uiManager]);case 4:editor=_context51.sent;editor.annotationElementId=data.id||null;editor._initialData=initialData;return _context51.abrupt("return",editor);case 8:case"end":return _context51.stop();}},_callee50,this);}));function deserialize(_x50,_x51,_x52){return _deserialize5.apply(this,arguments);}return deserialize;}()},{key:"onScaleChangingWhenDrawing",value:function onScaleChangingWhenDrawing(){var parent=this._currentParent;if(!parent){return;}_superPropGet(InkEditor,"onScaleChangingWhenDrawing",this,2)([]);this._defaultDrawingOptions.updateSVGProperty("stroke-width");parent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties());}}]);}(DrawingEditor);function _hasElementChanged3(serialized){var _this$_initialData3=this._initialData,color=_this$_initialData3.color,thickness=_this$_initialData3.thickness,opacity=_this$_initialData3.opacity,pageIndex=_this$_initialData3.pageIndex;return this._hasBeenMoved||this._hasBeenResized||serialized.color.some(function(c,i){return c!==color[i];})||serialized.thickness!==thickness||serialized.opacity!==opacity||serialized.pageIndex!==pageIndex;}_defineProperty(InkEditor,"_type","ink");_defineProperty(InkEditor,"_editorType",_AnnotationEditorType.INK);_defineProperty(InkEditor,"_defaultDrawingOptions",null);;// ./src/display/editor/drawers/contour.js\nvar ContourDrawOutline=/*#__PURE__*/function(_InkDrawOutline2){function ContourDrawOutline(){_classCallCheck(this,ContourDrawOutline);return _callSuper(this,ContourDrawOutline,arguments);}_inherits(ContourDrawOutline,_InkDrawOutline2);return _createClass(ContourDrawOutline,[{key:"toSVGPath",value:function toSVGPath(){var path=_superPropGet(ContourDrawOutline,"toSVGPath",this,3)([]);if(!path.endsWith("Z")){path+="Z";}return path;}}]);}(InkDrawOutline);;// ./src/display/editor/drawers/signaturedraw.js\nvar BASE_HEADER_LENGTH=8;var POINTS_PROPERTIES_NUMBER=3;var _SignatureExtractor=/*#__PURE__*/function(){function _SignatureExtractor(){_classCallCheck(this,_SignatureExtractor);}return _createClass(_SignatureExtractor,null,[{key:"extractContoursFromText",value:function extractContoursFromText(text,_ref122,pageWidth,pageHeight,rotation,innerMargin){var fontFamily=_ref122.fontFamily,fontStyle=_ref122.fontStyle,fontWeight=_ref122.fontWeight;var canvas=new OffscreenCanvas(1,1);var ctx=canvas.getContext("2d",{alpha:false});var fontSize=200;var font=ctx.font="".concat(fontStyle," ").concat(fontWeight," ").concat(fontSize,"px ").concat(fontFamily);var _ctx$measureText=ctx.measureText(text),actualBoundingBoxLeft=_ctx$measureText.actualBoundingBoxLeft,actualBoundingBoxRight=_ctx$measureText.actualBoundingBoxRight,actualBoundingBoxAscent=_ctx$measureText.actualBoundingBoxAscent,actualBoundingBoxDescent=_ctx$measureText.actualBoundingBoxDescent,fontBoundingBoxAscent=_ctx$measureText.fontBoundingBoxAscent,fontBoundingBoxDescent=_ctx$measureText.fontBoundingBoxDescent,width=_ctx$measureText.width;var SCALE=1.5;var canvasWidth=Math.ceil(Math.max(Math.abs(actualBoundingBoxLeft)+Math.abs(actualBoundingBoxRight)||0,width)*SCALE);var canvasHeight=Math.ceil(Math.max(Math.abs(actualBoundingBoxAscent)+Math.abs(actualBoundingBoxDescent)||fontSize,Math.abs(fontBoundingBoxAscent)+Math.abs(fontBoundingBoxDescent)||fontSize)*SCALE);canvas=new OffscreenCanvas(canvasWidth,canvasHeight);ctx=canvas.getContext("2d",{alpha:true,willReadFrequently:true});ctx.font=font;ctx.filter="grayscale(1)";ctx.fillStyle="white";ctx.fillRect(0,0,canvasWidth,canvasHeight);ctx.fillStyle="black";ctx.fillText(text,canvasWidth*(SCALE-1)/2,canvasHeight*(3-SCALE)/2);var uint8Buf=_assertClassBrand(_SignatureExtractor,this,_toUint).call(this,ctx.getImageData(0,0,canvasWidth,canvasHeight).data);var histogram=_assertClassBrand(_SignatureExtractor,this,_getHistogram).call(this,uint8Buf);var threshold=_assertClassBrand(_SignatureExtractor,this,_guessThreshold).call(this,histogram);var contourList=_assertClassBrand(_SignatureExtractor,this,_findContours).call(this,uint8Buf,canvasWidth,canvasHeight,threshold);return this.processDrawnLines({lines:{curves:contourList,width:canvasWidth,height:canvasHeight},pageWidth:pageWidth,pageHeight:pageHeight,rotation:rotation,innerMargin:innerMargin,mustSmooth:true,areContours:true});}},{key:"process",value:function process(bitmap,pageWidth,pageHeight,rotation,innerMargin){var _assertClassBrand$cal27=_assertClassBrand(_SignatureExtractor,this,_getGrayPixels).call(this,bitmap),_assertClassBrand$cal28=_slicedToArray(_assertClassBrand$cal27,3),uint8Buf=_assertClassBrand$cal28[0],width=_assertClassBrand$cal28[1],height=_assertClassBrand$cal28[2];var _assertClassBrand$cal29=_assertClassBrand(_SignatureExtractor,this,_bilateralFilter).call(this,uint8Buf,width,height,Math.hypot(width,height)*_assertClassBrand(_SignatureExtractor,this,_PARAMETERS)._.sigmaSFactor,_assertClassBrand(_SignatureExtractor,this,_PARAMETERS)._.sigmaR,_assertClassBrand(_SignatureExtractor,this,_PARAMETERS)._.kernelSize),_assertClassBrand$cal30=_slicedToArray(_assertClassBrand$cal29,2),buffer=_assertClassBrand$cal30[0],histogram=_assertClassBrand$cal30[1];var threshold=_assertClassBrand(_SignatureExtractor,this,_guessThreshold).call(this,histogram);var contourList=_assertClassBrand(_SignatureExtractor,this,_findContours).call(this,buffer,width,height,threshold);return this.processDrawnLines({lines:{curves:contourList,width:width,height:height},pageWidth:pageWidth,pageHeight:pageHeight,rotation:rotation,innerMargin:innerMargin,mustSmooth:true,areContours:true});}},{key:"processDrawnLines",value:function processDrawnLines(_ref123){var _lines$thickness;var lines=_ref123.lines,pageWidth=_ref123.pageWidth,pageHeight=_ref123.pageHeight,rotation=_ref123.rotation,innerMargin=_ref123.innerMargin,mustSmooth=_ref123.mustSmooth,areContours=_ref123.areContours;if(rotation%180!==0){var _ref124=[pageHeight,pageWidth];pageWidth=_ref124[0];pageHeight=_ref124[1];}var curves=lines.curves,width=lines.width,height=lines.height;var thickness=(_lines$thickness=lines.thickness)!==null&&_lines$thickness!==void 0?_lines$thickness:0;var linesAndPoints=[];var ratio=Math.min(pageWidth/width,pageHeight/height);var xScale=ratio/pageWidth;var yScale=ratio/pageHeight;var newCurves=[];var _iterator155=_createForOfIteratorHelper(curves),_step155;try{for(_iterator155.s();!(_step155=_iterator155.n()).done;){var points=_step155.value.points;var reducedPoints=mustSmooth?_assertClassBrand(_SignatureExtractor,this,_douglasPeucker).call(this,points):points;if(!reducedPoints){continue;}newCurves.push(reducedPoints);var len=reducedPoints.length;var newPoints=new Float32Array(len);var line=new Float32Array(3*(len===2?2:len-2));linesAndPoints.push({line:line,points:newPoints});if(len===2){newPoints[0]=reducedPoints[0]*xScale;newPoints[1]=reducedPoints[1]*yScale;line.set([NaN,NaN,NaN,NaN,newPoints[0],newPoints[1]],0);continue;}var _reducedPoints=_slicedToArray(reducedPoints,4),x1=_reducedPoints[0],y1=_reducedPoints[1],x2=_reducedPoints[2],y2=_reducedPoints[3];x1*=xScale;y1*=yScale;x2*=xScale;y2*=yScale;newPoints.set([x1,y1,x2,y2],0);line.set([NaN,NaN,NaN,NaN,x1,y1],0);for(var i=4;i<len;i+=2){var x=newPoints[i]=reducedPoints[i]*xScale;var y=newPoints[i+1]=reducedPoints[i+1]*yScale;line.set(Outline.createBezierPoints(x1,y1,x2,y2,x,y),(i-2)*3);var _ref125=[x2,y2,x,y];x1=_ref125[0];y1=_ref125[1];x2=_ref125[2];y2=_ref125[3];}}}catch(err){_iterator155.e(err);}finally{_iterator155.f();}if(linesAndPoints.length===0){return null;}var outline=areContours?new ContourDrawOutline():new InkDrawOutline();outline.build(linesAndPoints,pageWidth,pageHeight,1,rotation,areContours?0:thickness,innerMargin);return{outline:outline,newCurves:newCurves,areContours:areContours,thickness:thickness,width:width,height:height};}},{key:"compressSignature",value:function(){var _compressSignature=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee51(_ref126){var outlines,areContours,thickness,width,height,minDiff,maxDiff,outlinesLength,_iterator156,_step156,points,i,ii,dx,bufferType,len,headerLength,header,offset,_iterator157,_step157,_points6,cs,writer,BufferCtor,_iterator158,_step158,_points7,diffs,_i32,_ii4,buf,bytes;return _regeneratorRuntime().wrap(function _callee51$(_context52){while(1)switch(_context52.prev=_context52.next){case 0:outlines=_ref126.outlines,areContours=_ref126.areContours,thickness=_ref126.thickness,width=_ref126.width,height=_ref126.height;minDiff=Infinity;maxDiff=-Infinity;outlinesLength=0;_iterator156=_createForOfIteratorHelper(outlines);try{for(_iterator156.s();!(_step156=_iterator156.n()).done;){points=_step156.value;outlinesLength+=points.length;for(i=2,ii=points.length;i<ii;i++){dx=points[i]-points[i-2];minDiff=Math.min(minDiff,dx);maxDiff=Math.max(maxDiff,dx);}}}catch(err){_iterator156.e(err);}finally{_iterator156.f();}if(minDiff>=-128&&maxDiff<=127){bufferType=Int8Array;}else if(minDiff>=-32768&&maxDiff<=32767){bufferType=Int16Array;}else{bufferType=Int32Array;}len=outlines.length;headerLength=BASE_HEADER_LENGTH+POINTS_PROPERTIES_NUMBER*len;header=new Uint32Array(headerLength);offset=0;header[offset++]=headerLength*Uint32Array.BYTES_PER_ELEMENT+(outlinesLength-2*len)*bufferType.BYTES_PER_ELEMENT;header[offset++]=0;header[offset++]=width;header[offset++]=height;header[offset++]=areContours?0:1;header[offset++]=Math.max(0,Math.floor(thickness!==null&&thickness!==void 0?thickness:0));header[offset++]=len;header[offset++]=bufferType.BYTES_PER_ELEMENT;_iterator157=_createForOfIteratorHelper(outlines);try{for(_iterator157.s();!(_step157=_iterator157.n()).done;){_points6=_step157.value;header[offset++]=_points6.length-2;header[offset++]=_points6[0];header[offset++]=_points6[1];}}catch(err){_iterator157.e(err);}finally{_iterator157.f();}cs=new CompressionStream("deflate-raw");writer=cs.writable.getWriter();_context52.next=25;return writer.ready;case 25:writer.write(header);BufferCtor=bufferType.prototype.constructor;_iterator158=_createForOfIteratorHelper(outlines);try{for(_iterator158.s();!(_step158=_iterator158.n()).done;){_points7=_step158.value;diffs=new BufferCtor(_points7.length-2);for(_i32=2,_ii4=_points7.length;_i32<_ii4;_i32++){diffs[_i32-2]=_points7[_i32]-_points7[_i32-2];}writer.write(diffs);}}catch(err){_iterator158.e(err);}finally{_iterator158.f();}writer.close();_context52.next=32;return new Response(cs.readable).arrayBuffer();case 32:buf=_context52.sent;bytes=new Uint8Array(buf);return _context52.abrupt("return",toBase64Util(bytes));case 35:case"end":return _context52.stop();}},_callee51);}));function compressSignature(_x53){return _compressSignature.apply(this,arguments);}return compressSignature;}()},{key:"decompressSignature",value:function(){var _decompressSignature=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee53(signatureData){var bytes,_DecompressionStream,readable,writable,writer,data,offset,_iteratorAbruptCompletion,_didIteratorError,_iteratorError,_iterator,_step,chunk,header,version,width,height,areContours,thickness,numberOfDrawings,bufferType,outlines,diffsOffset,diffs,i,len,points,j,_j2;return _regeneratorRuntime().wrap(function _callee53$(_context54){while(1)switch(_context54.prev=_context54.next){case 0:_context54.prev=0;bytes=fromBase64Util(signatureData);_DecompressionStream=new DecompressionStream("deflate-raw"),readable=_DecompressionStream.readable,writable=_DecompressionStream.writable;writer=writable.getWriter();_context54.next=6;return writer.ready;case 6:writer.write(bytes).then(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee52(){return _regeneratorRuntime().wrap(function _callee52$(_context53){while(1)switch(_context53.prev=_context53.next){case 0:_context53.next=2;return writer.ready;case 2:_context53.next=4;return writer.close();case 4:case"end":return _context53.stop();}},_callee52);})))["catch"](function(){});data=null;offset=0;_iteratorAbruptCompletion=false;_didIteratorError=false;_context54.prev=11;_iterator=_asyncIterator(readable);case 13:_context54.next=15;return _iterator.next();case 15:if(!(_iteratorAbruptCompletion=!(_step=_context54.sent).done)){_context54.next=23;break;}chunk=_step.value;data||(data=new Uint8Array(new Uint32Array(chunk.buffer,0,4)[0]));data.set(chunk,offset);offset+=chunk.length;case 20:_iteratorAbruptCompletion=false;_context54.next=13;break;case 23:_context54.next=29;break;case 25:_context54.prev=25;_context54.t0=_context54["catch"](11);_didIteratorError=true;_iteratorError=_context54.t0;case 29:_context54.prev=29;_context54.prev=30;if(!(_iteratorAbruptCompletion&&_iterator["return"]!=null)){_context54.next=34;break;}_context54.next=34;return _iterator["return"]();case 34:_context54.prev=34;if(!_didIteratorError){_context54.next=37;break;}throw _iteratorError;case 37:return _context54.finish(34);case 38:return _context54.finish(29);case 39:header=new Uint32Array(data.buffer,0,data.length>>2);version=header[1];if(!(version!==0)){_context54.next=43;break;}throw new Error("Invalid version: ".concat(version));case 43:width=header[2];height=header[3];areContours=header[4]===0;thickness=header[5];numberOfDrawings=header[6];bufferType=header[7];outlines=[];diffsOffset=(BASE_HEADER_LENGTH+POINTS_PROPERTIES_NUMBER*numberOfDrawings)*Uint32Array.BYTES_PER_ELEMENT;_context54.t1=bufferType;_context54.next=_context54.t1===Int8Array.BYTES_PER_ELEMENT?54:_context54.t1===Int16Array.BYTES_PER_ELEMENT?56:_context54.t1===Int32Array.BYTES_PER_ELEMENT?58:60;break;case 54:diffs=new Int8Array(data.buffer,diffsOffset);return _context54.abrupt("break",60);case 56:diffs=new Int16Array(data.buffer,diffsOffset);return _context54.abrupt("break",60);case 58:diffs=new Int32Array(data.buffer,diffsOffset);return _context54.abrupt("break",60);case 60:offset=0;for(i=0;i<numberOfDrawings;i++){len=header[POINTS_PROPERTIES_NUMBER*i+BASE_HEADER_LENGTH];points=new Float32Array(len+2);outlines.push(points);for(j=0;j<POINTS_PROPERTIES_NUMBER-1;j++){points[j]=header[POINTS_PROPERTIES_NUMBER*i+BASE_HEADER_LENGTH+j+1];}for(_j2=0;_j2<len;_j2++){points[_j2+2]=points[_j2]+diffs[offset++];}}return _context54.abrupt("return",{areContours:areContours,thickness:thickness,outlines:outlines,width:width,height:height});case 65:_context54.prev=65;_context54.t2=_context54["catch"](0);warn("decompressSignature: ".concat(_context54.t2));return _context54.abrupt("return",null);case 69:case"end":return _context54.stop();}},_callee53,null,[[0,65],[11,25,29,39],[30,,34,38]]);}));function decompressSignature(_x54){return _decompressSignature.apply(this,arguments);}return decompressSignature;}()}]);}();_SignatureExtractor2=_SignatureExtractor;function _neighborIndexToId(i0,j0,i,j){i-=i0;j-=j0;if(i===0){return j>0?0:4;}if(i===1){return j+6;}return 2-j;}function _clockwiseNonZero(buf,width,i0,j0,i,j,offset){var id=_assertClassBrand(_SignatureExtractor2,this,_neighborIndexToId).call(this,i0,j0,i,j);for(var k=0;k<8;k++){var kk=(-k+id-offset+16)%8;var shiftI=_assertClassBrand(_SignatureExtractor2,this,_neighborIdToIndex)._[2*kk];var shiftJ=_assertClassBrand(_SignatureExtractor2,this,_neighborIdToIndex)._[2*kk+1];if(buf[(i0+shiftI)*width+(j0+shiftJ)]!==0){return kk;}}return-1;}function _counterClockwiseNonZero(buf,width,i0,j0,i,j,offset){var id=_assertClassBrand(_SignatureExtractor2,this,_neighborIndexToId).call(this,i0,j0,i,j);for(var k=0;k<8;k++){var kk=(k+id+offset+16)%8;var shiftI=_assertClassBrand(_SignatureExtractor2,this,_neighborIdToIndex)._[2*kk];var shiftJ=_assertClassBrand(_SignatureExtractor2,this,_neighborIdToIndex)._[2*kk+1];if(buf[(i0+shiftI)*width+(j0+shiftJ)]!==0){return kk;}}return-1;}function _findContours(buf,width,height,threshold){var N=buf.length;var types=new Int32Array(N);for(var i=0;i<N;i++){types[i]=buf[i]<=threshold?1:0;}for(var _i38=1;_i38<height-1;_i38++){types[_i38*width]=types[_i38*width+width-1]=0;}for(var _i39=0;_i39<width;_i39++){types[_i39]=types[width*height-1-_i39]=0;}var nbd=1;var lnbd;var contours=[];for(var _i40=1;_i40<height-1;_i40++){lnbd=1;for(var j=1;j<width-1;j++){var ij=_i40*width+j;var pix=types[ij];if(pix===0){continue;}var i2=_i40;var j2=j;if(pix===1&&types[ij-1]===0){nbd+=1;j2-=1;}else if(pix>=1&&types[ij+1]===0){nbd+=1;j2+=1;if(pix>1){lnbd=pix;}}else{if(pix!==1){lnbd=Math.abs(pix);}continue;}var points=[j,_i40];var isHole=j2===j+1;var contour={isHole:isHole,points:points,id:nbd,parent:0};contours.push(contour);var contour0=void 0;var _iterator191=_createForOfIteratorHelper(contours),_step191;try{for(_iterator191.s();!(_step191=_iterator191.n()).done;){var c=_step191.value;if(c.id===lnbd){contour0=c;break;}}}catch(err){_iterator191.e(err);}finally{_iterator191.f();}if(!contour0){contour.parent=isHole?lnbd:0;}else if(contour0.isHole){contour.parent=isHole?contour0.parent:lnbd;}else{contour.parent=isHole?lnbd:contour0.parent;}var k=_assertClassBrand(_SignatureExtractor2,this,_clockwiseNonZero).call(this,types,width,_i40,j,i2,j2,0);if(k===-1){types[ij]=-nbd;if(types[ij]!==1){lnbd=Math.abs(types[ij]);}continue;}var shiftI=_assertClassBrand(_SignatureExtractor2,this,_neighborIdToIndex)._[2*k];var shiftJ=_assertClassBrand(_SignatureExtractor2,this,_neighborIdToIndex)._[2*k+1];var i1=_i40+shiftI;var j1=j+shiftJ;i2=i1;j2=j1;var i3=_i40;var j3=j;while(true){var kk=_assertClassBrand(_SignatureExtractor2,this,_counterClockwiseNonZero).call(this,types,width,i3,j3,i2,j2,1);shiftI=_assertClassBrand(_SignatureExtractor2,this,_neighborIdToIndex)._[2*kk];shiftJ=_assertClassBrand(_SignatureExtractor2,this,_neighborIdToIndex)._[2*kk+1];var i4=i3+shiftI;var j4=j3+shiftJ;points.push(j4,i4);var ij3=i3*width+j3;if(types[ij3+1]===0){types[ij3]=-nbd;}else if(types[ij3]===1){types[ij3]=nbd;}if(i4===_i40&&j4===j&&i3===i1&&j3===j1){if(types[ij]!==1){lnbd=Math.abs(types[ij]);}break;}else{i2=i3;j2=j3;i3=i4;j3=j4;}}}}return contours;}function _douglasPeuckerHelper(points,start,end,output){if(end-start<=4){for(var i=start;i<end-2;i+=2){output.push(points[i],points[i+1]);}return;}var ax=points[start];var ay=points[start+1];var abx=points[end-4]-ax;var aby=points[end-3]-ay;var dist=Math.hypot(abx,aby);var nabx=abx/dist;var naby=aby/dist;var aa=nabx*ay-naby*ax;var m=aby/abx;var invS=1/dist;var phi=Math.atan(m);var cosPhi=Math.cos(phi);var sinPhi=Math.sin(phi);var tmax=invS*(Math.abs(cosPhi)+Math.abs(sinPhi));var poly=invS*(1-tmax+Math.pow(tmax,2));var partialPhi=Math.max(Math.atan(Math.abs(sinPhi+cosPhi)*poly),Math.atan(Math.abs(sinPhi-cosPhi)*poly));var dmax=0;var index=start;for(var _i41=start+2;_i41<end-2;_i41+=2){var d=Math.abs(aa-nabx*points[_i41+1]+naby*points[_i41]);if(d>dmax){index=_i41;dmax=d;}}if(dmax>Math.pow(dist*partialPhi,2)){_assertClassBrand(_SignatureExtractor2,this,_douglasPeuckerHelper).call(this,points,start,index+2,output);_assertClassBrand(_SignatureExtractor2,this,_douglasPeuckerHelper).call(this,points,index,end,output);}else{output.push(ax,ay);}}function _douglasPeucker(points){var output=[];var len=points.length;_assertClassBrand(_SignatureExtractor2,this,_douglasPeuckerHelper).call(this,points,0,len,output);output.push(points[len-2],points[len-1]);return output.length<=4?null:output;}function _bilateralFilter(buf,width,height,sigmaS,sigmaR,kernelSize){var kernel=new Float32Array(Math.pow(kernelSize,2));var sigmaS2=-2*Math.pow(sigmaS,2);var halfSize=kernelSize>>1;for(var i=0;i<kernelSize;i++){var x=Math.pow(i-halfSize,2);for(var j=0;j<kernelSize;j++){kernel[i*kernelSize+j]=Math.exp((x+Math.pow(j-halfSize,2))/sigmaS2);}}var rangeValues=new Float32Array(256);var sigmaR2=-2*Math.pow(sigmaR,2);for(var _i42=0;_i42<256;_i42++){rangeValues[_i42]=Math.exp(Math.pow(_i42,2)/sigmaR2);}var N=buf.length;var out=new Uint8Array(N);var histogram=new Uint32Array(256);for(var _i43=0;_i43<height;_i43++){for(var _j3=0;_j3<width;_j3++){var ij=_i43*width+_j3;var center=buf[ij];var sum=0;var norm=0;for(var k=0;k<kernelSize;k++){var y=_i43+k-halfSize;if(y<0||y>=height){continue;}for(var l=0;l<kernelSize;l++){var _x72=_j3+l-halfSize;if(_x72<0||_x72>=width){continue;}var neighbour=buf[y*width+_x72];var w=kernel[k*kernelSize+l]*rangeValues[Math.abs(neighbour-center)];sum+=neighbour*w;norm+=w;}}var pix=out[ij]=Math.round(sum/norm);histogram[pix]++;}}return[out,histogram];}function _getHistogram(buf){var histogram=new Uint32Array(256);var _iterator192=_createForOfIteratorHelper(buf),_step192;try{for(_iterator192.s();!(_step192=_iterator192.n()).done;){var g=_step192.value;histogram[g]++;}}catch(err){_iterator192.e(err);}finally{_iterator192.f();}return histogram;}function _toUint(buf){var N=buf.length;var out=new Uint8ClampedArray(N>>2);var max=-Infinity;var min=Infinity;for(var i=0,ii=out.length;i<ii;i++){var A=buf[(i<<2)+3];if(A===0){max=out[i]=0xff;continue;}var pix=out[i]=buf[i<<2];if(pix>max){max=pix;}if(pix<min){min=pix;}}var ratio=255/(max-min);for(var _i44=0;_i44<N;_i44++){out[_i44]=(out[_i44]-min)*ratio;}return out;}function _guessThreshold(histogram){var i;var M=-Infinity;var L=-Infinity;var min=histogram.findIndex(function(v){return v!==0;});var pos=min;var spos=min;for(i=min;i<256;i++){var v=histogram[i];if(v>M){if(i-pos>L){L=i-pos;spos=i-1;}M=v;pos=i;}}for(i=spos-1;i>=0;i--){if(histogram[i]>histogram[i+1]){break;}}return i;}function _getGrayPixels(bitmap){var originalBitmap=bitmap;var _bitmap3=bitmap,width=_bitmap3.width,height=_bitmap3.height;var maxDim=_assertClassBrand(_SignatureExtractor2,this,_PARAMETERS)._.maxDim;var newWidth=width;var newHeight=height;if(width>maxDim||height>maxDim){var prevWidth=width;var prevHeight=height;var steps=Math.log2(Math.max(width,height)/maxDim);var isteps=Math.floor(steps);steps=steps===isteps?isteps-1:isteps;for(var i=0;i<steps;i++){newWidth=prevWidth;newHeight=prevHeight;if(newWidth>maxDim){newWidth=Math.ceil(newWidth/2);}if(newHeight>maxDim){newHeight=Math.ceil(newHeight/2);}var _offscreen=new OffscreenCanvas(newWidth,newHeight);var _ctx=_offscreen.getContext("2d");_ctx.drawImage(bitmap,0,0,prevWidth,prevHeight,0,0,newWidth,newHeight);prevWidth=newWidth;prevHeight=newHeight;if(bitmap!==originalBitmap){bitmap.close();}bitmap=_offscreen.transferToImageBitmap();}var ratio=Math.min(maxDim/newWidth,maxDim/newHeight);newWidth=Math.round(newWidth*ratio);newHeight=Math.round(newHeight*ratio);}var offscreen=new OffscreenCanvas(newWidth,newHeight);var ctx=offscreen.getContext("2d",{willReadFrequently:true});ctx.filter="grayscale(1)";ctx.drawImage(bitmap,0,0,bitmap.width,bitmap.height,0,0,newWidth,newHeight);var grayImage=ctx.getImageData(0,0,newWidth,newHeight).data;var uint8Buf=_assertClassBrand(_SignatureExtractor2,this,_toUint).call(this,grayImage);return[uint8Buf,newWidth,newHeight];}var _PARAMETERS={_:{maxDim:512,sigmaSFactor:0.02,sigmaR:25,kernelSize:16}};var _neighborIdToIndex={_:new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1])};;// ./src/display/editor/signature.js\nvar SignatureOptions=/*#__PURE__*/function(_DrawingOptions3){function SignatureOptions(){var _this100;_classCallCheck(this,SignatureOptions);_this100=_callSuper(this,SignatureOptions);_superPropGet((_this100,SignatureOptions),"updateProperties",_this100,3)([{fill:"CanvasText","stroke-width":0}]);return _this100;}_inherits(SignatureOptions,_DrawingOptions3);return _createClass(SignatureOptions,[{key:"clone",value:function clone(){var clone=new SignatureOptions();clone.updateAll(this);return clone;}}]);}(DrawingOptions);var DrawnSignatureOptions=/*#__PURE__*/function(_InkDrawingOptions){function DrawnSignatureOptions(viewerParameters){var _this101;_classCallCheck(this,DrawnSignatureOptions);_this101=_callSuper(this,DrawnSignatureOptions,[viewerParameters]);_superPropGet((_this101,DrawnSignatureOptions),"updateProperties",_this101,3)([{stroke:"CanvasText","stroke-width":1}]);return _this101;}_inherits(DrawnSignatureOptions,_InkDrawingOptions);return _createClass(DrawnSignatureOptions,[{key:"clone",value:function clone(){var clone=new DrawnSignatureOptions(this._viewParameters);clone.updateAll(this);return clone;}}]);}(InkDrawingOptions);var _isExtracted=/*#__PURE__*/new WeakMap();var _description=/*#__PURE__*/new WeakMap();var _signatureData=/*#__PURE__*/new WeakMap();var _signatureUUID=/*#__PURE__*/new WeakMap();var SignatureEditor=/*#__PURE__*/function(_DrawingEditor3){function SignatureEditor(params){var _this102;_classCallCheck(this,SignatureEditor);_this102=_callSuper(this,SignatureEditor,[_objectSpread(_objectSpread({},params),{},{mustBeCommitted:true,name:"signatureEditor"})]);_classPrivateFieldInitSpec(_this102,_isExtracted,false);_classPrivateFieldInitSpec(_this102,_description,null);_classPrivateFieldInitSpec(_this102,_signatureData,null);_classPrivateFieldInitSpec(_this102,_signatureUUID,null);_this102._willKeepAspectRatio=true;_classPrivateFieldSet(_signatureData,_this102,params.signatureData||null);_classPrivateFieldSet(_description,_this102,null);return _this102;}_inherits(SignatureEditor,_DrawingEditor3);return _createClass(SignatureEditor,[{key:"telemetryFinalData",get:function get(){return{type:"signature",hasDescription:!!_classPrivateFieldGet(_description,this)};}},{key:"isResizable",get:function get(){return true;}},{key:"onScaleChanging",value:function onScaleChanging(){if(this._drawId===null){return;}_superPropGet(SignatureEditor,"onScaleChanging",this,3)([]);}},{key:"render",value:function render(){if(this.div){return this.div;}var baseX,baseY;var _isCopy=this._isCopy;if(_isCopy){this._isCopy=false;baseX=this.x;baseY=this.y;}_superPropGet(SignatureEditor,"render",this,3)([]);this.div.setAttribute("role","figure");if(this._drawId===null){if(_classPrivateFieldGet(_signatureData,this)){var _classPrivateFieldGet116=_classPrivateFieldGet(_signatureData,this),lines=_classPrivateFieldGet116.lines,mustSmooth=_classPrivateFieldGet116.mustSmooth,areContours=_classPrivateFieldGet116.areContours,description=_classPrivateFieldGet116.description,uuid=_classPrivateFieldGet116.uuid,heightInPage=_classPrivateFieldGet116.heightInPage;var _this$parent$viewport4=this.parent.viewport,_this$parent$viewport5=_this$parent$viewport4.rawDims,pageWidth=_this$parent$viewport5.pageWidth,pageHeight=_this$parent$viewport5.pageHeight,rotation=_this$parent$viewport4.rotation;var outline=_SignatureExtractor.processDrawnLines({lines:lines,pageWidth:pageWidth,pageHeight:pageHeight,rotation:rotation,innerMargin:SignatureEditor._INNER_MARGIN,mustSmooth:mustSmooth,areContours:areContours});this.addSignature(outline,heightInPage,description,uuid);}else{this.div.hidden=true;this._uiManager.getSignature(this);}}if(_isCopy){this._isCopy=true;this._moveAfterPaste(baseX,baseY);}return this.div;}},{key:"setUuid",value:function setUuid(uuid){_classPrivateFieldSet(_signatureUUID,this,uuid);this.addEditToolbar();}},{key:"getUuid",value:function getUuid(){return _classPrivateFieldGet(_signatureUUID,this);}},{key:"description",get:function get(){return _classPrivateFieldGet(_description,this);},set:function set(description){_classPrivateFieldSet(_description,this,description);_superPropGet(SignatureEditor,"addEditToolbar",this,3)([]).then(function(toolbar){toolbar===null||toolbar===void 0||toolbar.updateEditSignatureButton(description);});}},{key:"getSignaturePreview",value:function getSignaturePreview(){var _classPrivateFieldGet117=_classPrivateFieldGet(_signatureData,this),newCurves=_classPrivateFieldGet117.newCurves,areContours=_classPrivateFieldGet117.areContours,thickness=_classPrivateFieldGet117.thickness,width=_classPrivateFieldGet117.width,height=_classPrivateFieldGet117.height;var maxDim=Math.max(width,height);var outlineData=_SignatureExtractor.processDrawnLines({lines:{curves:newCurves.map(function(points){return{points:points};}),thickness:thickness,width:width,height:height},pageWidth:maxDim,pageHeight:maxDim,rotation:0,innerMargin:0,mustSmooth:false,areContours:areContours});return{areContours:areContours,outline:outlineData.outline};}},{key:"addEditToolbar",value:function(){var _addEditToolbar3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee54(){var toolbar;return _regeneratorRuntime().wrap(function _callee54$(_context55){while(1)switch(_context55.prev=_context55.next){case 0:_context55.next=2;return _superPropGet(SignatureEditor,"addEditToolbar",this,3)([]);case 2:toolbar=_context55.sent;if(toolbar){_context55.next=5;break;}return _context55.abrupt("return",null);case 5:if(!(this._uiManager.signatureManager&&_classPrivateFieldGet(_description,this)!==null)){_context55.next=9;break;}_context55.next=8;return toolbar.addEditSignatureButton(this._uiManager.signatureManager,_classPrivateFieldGet(_signatureUUID,this),_classPrivateFieldGet(_description,this));case 8:toolbar.show();case 9:return _context55.abrupt("return",toolbar);case 10:case"end":return _context55.stop();}},_callee54,this);}));function addEditToolbar(){return _addEditToolbar3.apply(this,arguments);}return addEditToolbar;}()},{key:"addSignature",value:function addSignature(data,heightInPage,description,uuid){var savedX=this.x,savedY=this.y;var _classPrivateFieldSet2=_classPrivateFieldSet(_signatureData,this,data),outline=_classPrivateFieldSet2.outline;_classPrivateFieldSet(_isExtracted,this,outline instanceof ContourDrawOutline);_classPrivateFieldSet(_description,this,description);var drawingOptions;if(_classPrivateFieldGet(_isExtracted,this)){drawingOptions=SignatureEditor.getDefaultDrawingOptions();}else{drawingOptions=SignatureEditor._defaultDrawnSignatureOptions.clone();drawingOptions.updateProperties({"stroke-width":outline.thickness});}this._addOutlines({drawOutlines:outline,drawingOptions:drawingOptions});var _this$parentDimension12=_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension12[0],parentHeight=_this$parentDimension12[1];var _this$pageDimensions7=_slicedToArray(this.pageDimensions,2),pageHeight=_this$pageDimensions7[1];var newHeight=heightInPage/pageHeight;newHeight=newHeight>=1?0.5:newHeight;this.width*=newHeight/this.height;if(this.width>=1){newHeight*=0.9/this.width;this.width=0.9;}this.height=newHeight;this.setDims(parentWidth*this.width,parentHeight*this.height);this.x=savedX;this.y=savedY;this.center();this._onResized();this.onScaleChanging();this.rotate();this._uiManager.addToAnnotationStorage(this);this.setUuid(uuid);this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!uuid,hasDescription:!!description}});this.div.hidden=false;}},{key:"getFromImage",value:function getFromImage(bitmap){var _this$parent$viewport6=this.parent.viewport,_this$parent$viewport7=_this$parent$viewport6.rawDims,pageWidth=_this$parent$viewport7.pageWidth,pageHeight=_this$parent$viewport7.pageHeight,rotation=_this$parent$viewport6.rotation;return _SignatureExtractor.process(bitmap,pageWidth,pageHeight,rotation,SignatureEditor._INNER_MARGIN);}},{key:"getFromText",value:function getFromText(text,fontInfo){var _this$parent$viewport8=this.parent.viewport,_this$parent$viewport9=_this$parent$viewport8.rawDims,pageWidth=_this$parent$viewport9.pageWidth,pageHeight=_this$parent$viewport9.pageHeight,rotation=_this$parent$viewport8.rotation;return _SignatureExtractor.extractContoursFromText(text,fontInfo,pageWidth,pageHeight,rotation,SignatureEditor._INNER_MARGIN);}},{key:"getDrawnSignature",value:function getDrawnSignature(curves){var _this$parent$viewport10=this.parent.viewport,_this$parent$viewport11=_this$parent$viewport10.rawDims,pageWidth=_this$parent$viewport11.pageWidth,pageHeight=_this$parent$viewport11.pageHeight,rotation=_this$parent$viewport10.rotation;return _SignatureExtractor.processDrawnLines({lines:curves,pageWidth:pageWidth,pageHeight:pageHeight,rotation:rotation,innerMargin:SignatureEditor._INNER_MARGIN,mustSmooth:false,areContours:false});}},{key:"createDrawingOptions",value:function createDrawingOptions(_ref128){var areContours=_ref128.areContours,thickness=_ref128.thickness;if(areContours){this._drawingOptions=SignatureEditor.getDefaultDrawingOptions();}else{this._drawingOptions=SignatureEditor._defaultDrawnSignatureOptions.clone();this._drawingOptions.updateProperties({"stroke-width":thickness});}}},{key:"serialize",value:function serialize(){var isForCopying=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(this.isEmpty()){return null;}var _this$serializeDraw3=this.serializeDraw(isForCopying),lines=_this$serializeDraw3.lines,points=_this$serializeDraw3.points,rect=_this$serializeDraw3.rect;var thickness=this._drawingOptions["stroke-width"];var serialized={annotationType:_AnnotationEditorType.SIGNATURE,isSignature:true,areContours:_classPrivateFieldGet(_isExtracted,this),color:[0,0,0],thickness:_classPrivateFieldGet(_isExtracted,this)?0:thickness,pageIndex:this.pageIndex,rect:rect,rotation:this.rotation,structTreeParentId:this._structTreeParentId};if(isForCopying){serialized.paths={lines:lines,points:points};serialized.uuid=_classPrivateFieldGet(_signatureUUID,this);serialized.isCopy=true;}else{serialized.lines=lines;}if(_classPrivateFieldGet(_description,this)){serialized.accessibilityData={type:"Figure",alt:_classPrivateFieldGet(_description,this)};}return serialized;}}],[{key:"initialize",value:function initialize(l10n,uiManager){AnnotationEditor.initialize(l10n,uiManager);this._defaultDrawingOptions=new SignatureOptions();this._defaultDrawnSignatureOptions=new DrawnSignatureOptions(uiManager.viewParameters);}},{key:"getDefaultDrawingOptions",value:function getDefaultDrawingOptions(options){var clone=this._defaultDrawingOptions.clone();clone.updateProperties(options);return clone;}},{key:"supportMultipleDrawings",get:function get(){return false;}},{key:"typesMap",get:function get(){return _shadow(this,"typesMap",new Map());}},{key:"isDrawer",get:function get(){return false;}},{key:"computeTelemetryFinalData",value:function computeTelemetryFinalData(data){var _hasDescriptionStats$,_hasDescriptionStats$2;var hasDescriptionStats=data.get("hasDescription");return{hasAltText:(_hasDescriptionStats$=hasDescriptionStats.get(true))!==null&&_hasDescriptionStats$!==void 0?_hasDescriptionStats$:0,hasNoAltText:(_hasDescriptionStats$2=hasDescriptionStats.get(false))!==null&&_hasDescriptionStats$2!==void 0?_hasDescriptionStats$2:0};}},{key:"deserializeDraw",value:function deserializeDraw(pageX,pageY,pageWidth,pageHeight,innerMargin,data){if(data.areContours){return ContourDrawOutline.deserialize(pageX,pageY,pageWidth,pageHeight,innerMargin,data);}return InkDrawOutline.deserialize(pageX,pageY,pageWidth,pageHeight,innerMargin,data);}},{key:"deserialize",value:function(){var _deserialize6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee55(data,parent,uiManager){var _data$accessibilityDa;var editor;return _regeneratorRuntime().wrap(function _callee55$(_context56){while(1)switch(_context56.prev=_context56.next){case 0:_context56.next=2;return _superPropGet(SignatureEditor,"deserialize",this,2)([data,parent,uiManager]);case 2:editor=_context56.sent;_classPrivateFieldSet(_isExtracted,editor,data.areContours);_classPrivateFieldSet(_description,editor,((_data$accessibilityDa=data.accessibilityData)===null||_data$accessibilityDa===void 0?void 0:_data$accessibilityDa.alt)||"");_classPrivateFieldSet(_signatureUUID,editor,data.uuid);return _context56.abrupt("return",editor);case 7:case"end":return _context56.stop();}},_callee55,this);}));function deserialize(_x55,_x56,_x57){return _deserialize6.apply(this,arguments);}return deserialize;}()}]);}(DrawingEditor);_defineProperty(SignatureEditor,"_type","signature");_defineProperty(SignatureEditor,"_editorType",_AnnotationEditorType.SIGNATURE);_defineProperty(SignatureEditor,"_defaultDrawingOptions",null);;// ./src/display/editor/stamp.js\nvar _bitmap=/*#__PURE__*/new WeakMap();var _bitmapId=/*#__PURE__*/new WeakMap();var _bitmapPromise=/*#__PURE__*/new WeakMap();var _bitmapUrl=/*#__PURE__*/new WeakMap();var _bitmapFile=/*#__PURE__*/new WeakMap();var _bitmapFileName=/*#__PURE__*/new WeakMap();var _canvas=/*#__PURE__*/new WeakMap();var _missingCanvas=/*#__PURE__*/new WeakMap();var _resizeTimeoutId=/*#__PURE__*/new WeakMap();var _isSvg=/*#__PURE__*/new WeakMap();var _hasBeenAddedInUndoStack=/*#__PURE__*/new WeakMap();var _StampEditor_brand=/*#__PURE__*/new WeakSet();var StampEditor=/*#__PURE__*/function(_AnnotationEditor6){function StampEditor(params){var _this103;_classCallCheck(this,StampEditor);_this103=_callSuper(this,StampEditor,[_objectSpread(_objectSpread({},params),{},{name:"stampEditor"})]);_classPrivateMethodInitSpec(_this103,_StampEditor_brand);_classPrivateFieldInitSpec(_this103,_bitmap,null);_classPrivateFieldInitSpec(_this103,_bitmapId,null);_classPrivateFieldInitSpec(_this103,_bitmapPromise,null);_classPrivateFieldInitSpec(_this103,_bitmapUrl,null);_classPrivateFieldInitSpec(_this103,_bitmapFile,null);_classPrivateFieldInitSpec(_this103,_bitmapFileName,"");_classPrivateFieldInitSpec(_this103,_canvas,null);_classPrivateFieldInitSpec(_this103,_missingCanvas,false);_classPrivateFieldInitSpec(_this103,_resizeTimeoutId,null);_classPrivateFieldInitSpec(_this103,_isSvg,false);_classPrivateFieldInitSpec(_this103,_hasBeenAddedInUndoStack,false);_classPrivateFieldSet(_bitmapUrl,_this103,params.bitmapUrl);_classPrivateFieldSet(_bitmapFile,_this103,params.bitmapFile);return _this103;}_inherits(StampEditor,_AnnotationEditor6);return _createClass(StampEditor,[{key:"altTextFinish",value:function altTextFinish(){if(this._uiManager.useNewAltTextFlow){this.div.hidden=false;}_superPropGet(StampEditor,"altTextFinish",this,3)([]);}},{key:"telemetryFinalData",get:function get(){var _this$altTextData;return{type:"stamp",hasAltText:!!((_this$altTextData=this.altTextData)!==null&&_this$altTextData!==void 0&&_this$altTextData.altText)};}},{key:"mlGuessAltText",value:function(){var _mlGuessAltText=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee56(){var imageData,updateAltTextData,mlManager,_ref129,data,width,height,response,altText,_args57=arguments;return _regeneratorRuntime().wrap(function _callee56$(_context57){while(1)switch(_context57.prev=_context57.next){case 0:imageData=_args57.length>0&&_args57[0]!==undefined?_args57[0]:null;updateAltTextData=_args57.length>1&&_args57[1]!==undefined?_args57[1]:true;if(!this.hasAltTextData()){_context57.next=4;break;}return _context57.abrupt("return",null);case 4:mlManager=this._uiManager.mlManager;if(mlManager){_context57.next=7;break;}throw new Error("No ML.");case 7:_context57.next=9;return mlManager.isEnabledFor("altText");case 9:if(_context57.sent){_context57.next=11;break;}throw new Error("ML isn\'t enabled for alt text.");case 11:_ref129=imageData||this.copyCanvas(null,null,true).imageData,data=_ref129.data,width=_ref129.width,height=_ref129.height;_context57.next=14;return mlManager.guess({name:"altText",request:{data:data,width:width,height:height,channels:data.length/(width*height)}});case 14:response=_context57.sent;if(response){_context57.next=17;break;}throw new Error("No response from the AI service.");case 17:if(!response.error){_context57.next=19;break;}throw new Error("Error from the AI service.");case 19:if(!response.cancel){_context57.next=21;break;}return _context57.abrupt("return",null);case 21:if(response.output){_context57.next=23;break;}throw new Error("No valid response from the AI service.");case 23:altText=response.output;_context57.next=26;return this.setGuessedAltText(altText);case 26:if(updateAltTextData&&!this.hasAltTextData()){this.altTextData={alt:altText,decorative:false};}return _context57.abrupt("return",altText);case 28:case"end":return _context57.stop();}},_callee56,this);}));function mlGuessAltText(){return _mlGuessAltText.apply(this,arguments);}return mlGuessAltText;}()},{key:"remove",value:function remove(){if(_classPrivateFieldGet(_bitmapId,this)){var _classPrivateFieldGet118;_classPrivateFieldSet(_bitmap,this,null);this._uiManager.imageManager.deleteId(_classPrivateFieldGet(_bitmapId,this));(_classPrivateFieldGet118=_classPrivateFieldGet(_canvas,this))===null||_classPrivateFieldGet118===void 0||_classPrivateFieldGet118.remove();_classPrivateFieldSet(_canvas,this,null);if(_classPrivateFieldGet(_resizeTimeoutId,this)){clearTimeout(_classPrivateFieldGet(_resizeTimeoutId,this));_classPrivateFieldSet(_resizeTimeoutId,this,null);}}_superPropGet(StampEditor,"remove",this,3)([]);}},{key:"rebuild",value:function rebuild(){if(!this.parent){if(_classPrivateFieldGet(_bitmapId,this)){_assertClassBrand(_StampEditor_brand,this,_getBitmap).call(this);}return;}_superPropGet(StampEditor,"rebuild",this,3)([]);if(this.div===null){return;}if(_classPrivateFieldGet(_bitmapId,this)&&_classPrivateFieldGet(_canvas,this)===null){_assertClassBrand(_StampEditor_brand,this,_getBitmap).call(this);}if(!this.isAttachedToDOM){this.parent.add(this);}}},{key:"onceAdded",value:function onceAdded(focus){this._isDraggable=true;if(focus){this.div.focus();}}},{key:"isEmpty",value:function isEmpty(){return!(_classPrivateFieldGet(_bitmapPromise,this)||_classPrivateFieldGet(_bitmap,this)||_classPrivateFieldGet(_bitmapUrl,this)||_classPrivateFieldGet(_bitmapFile,this)||_classPrivateFieldGet(_bitmapId,this)||_classPrivateFieldGet(_missingCanvas,this));}},{key:"isResizable",get:function get(){return true;}},{key:"render",value:function render(){if(this.div){return this.div;}var baseX,baseY;if(this._isCopy){baseX=this.x;baseY=this.y;}_superPropGet(StampEditor,"render",this,3)([]);this.div.hidden=true;this.div.setAttribute("role","figure");this.addAltTextButton();if(!_classPrivateFieldGet(_missingCanvas,this)){if(_classPrivateFieldGet(_bitmap,this)){_assertClassBrand(_StampEditor_brand,this,_createCanvas2).call(this);}else{_assertClassBrand(_StampEditor_brand,this,_getBitmap).call(this);}}if(this._isCopy){this._moveAfterPaste(baseX,baseY);}this._uiManager.addShouldRescale(this);return this.div;}},{key:"setCanvas",value:function setCanvas(annotationElementId,canvas){var _this$_uiManager$imag=this._uiManager.imageManager.getFromCanvas(annotationElementId,canvas),bitmapId=_this$_uiManager$imag.id,bitmap=_this$_uiManager$imag.bitmap;canvas.remove();if(bitmapId&&this._uiManager.imageManager.isValidId(bitmapId)){_classPrivateFieldSet(_bitmapId,this,bitmapId);if(bitmap){_classPrivateFieldSet(_bitmap,this,bitmap);}_classPrivateFieldSet(_missingCanvas,this,false);_assertClassBrand(_StampEditor_brand,this,_createCanvas2).call(this);}}},{key:"_onResized",value:function _onResized(){this.onScaleChanging();}},{key:"onScaleChanging",value:function onScaleChanging(){var _this104=this;if(!this.parent){return;}if(_classPrivateFieldGet(_resizeTimeoutId,this)!==null){clearTimeout(_classPrivateFieldGet(_resizeTimeoutId,this));}var TIME_TO_WAIT=200;_classPrivateFieldSet(_resizeTimeoutId,this,setTimeout(function(){_classPrivateFieldSet(_resizeTimeoutId,_this104,null);_assertClassBrand(_StampEditor_brand,_this104,_drawBitmap).call(_this104);},TIME_TO_WAIT));}},{key:"copyCanvas",value:function copyCanvas(maxDataDimension,maxPreviewDimension){var createImageData=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(!maxDataDimension){maxDataDimension=224;}var _classPrivateFieldGet119=_classPrivateFieldGet(_bitmap,this),bitmapWidth=_classPrivateFieldGet119.width,bitmapHeight=_classPrivateFieldGet119.height;var outputScale=new _OutputScale();var bitmap=_classPrivateFieldGet(_bitmap,this);var width=bitmapWidth,height=bitmapHeight;var canvas=null;if(maxPreviewDimension){var _window$matchMedia,_window2;if(bitmapWidth>maxPreviewDimension||bitmapHeight>maxPreviewDimension){var ratio=Math.min(maxPreviewDimension/bitmapWidth,maxPreviewDimension/bitmapHeight);width=Math.floor(bitmapWidth*ratio);height=Math.floor(bitmapHeight*ratio);}canvas=document.createElement("canvas");var scaledWidth=canvas.width=Math.ceil(width*outputScale.sx);var scaledHeight=canvas.height=Math.ceil(height*outputScale.sy);if(!_classPrivateFieldGet(_isSvg,this)){bitmap=_assertClassBrand(_StampEditor_brand,this,_scaleBitmap).call(this,scaledWidth,scaledHeight);}var ctx=canvas.getContext("2d");ctx.filter=this._uiManager.hcmFilter;var white="white",black="#cfcfd8";if(this._uiManager.hcmFilter!=="none"){black="black";}else if((_window$matchMedia=(_window2=window).matchMedia)!==null&&_window$matchMedia!==void 0&&_window$matchMedia.call(_window2,"(prefers-color-scheme: dark)").matches){white="#8f8f9d";black="#42414d";}var boxDim=15;var boxDimWidth=boxDim*outputScale.sx;var boxDimHeight=boxDim*outputScale.sy;var pattern=new OffscreenCanvas(boxDimWidth*2,boxDimHeight*2);var patternCtx=pattern.getContext("2d");patternCtx.fillStyle=white;patternCtx.fillRect(0,0,boxDimWidth*2,boxDimHeight*2);patternCtx.fillStyle=black;patternCtx.fillRect(0,0,boxDimWidth,boxDimHeight);patternCtx.fillRect(boxDimWidth,boxDimHeight,boxDimWidth,boxDimHeight);ctx.fillStyle=ctx.createPattern(pattern,"repeat");ctx.fillRect(0,0,scaledWidth,scaledHeight);ctx.drawImage(bitmap,0,0,bitmap.width,bitmap.height,0,0,scaledWidth,scaledHeight);}var imageData=null;if(createImageData){var dataWidth,dataHeight;if(outputScale.symmetric&&bitmap.width<maxDataDimension&&bitmap.height<maxDataDimension){dataWidth=bitmap.width;dataHeight=bitmap.height;}else{bitmap=_classPrivateFieldGet(_bitmap,this);if(bitmapWidth>maxDataDimension||bitmapHeight>maxDataDimension){var _ratio=Math.min(maxDataDimension/bitmapWidth,maxDataDimension/bitmapHeight);dataWidth=Math.floor(bitmapWidth*_ratio);dataHeight=Math.floor(bitmapHeight*_ratio);if(!_classPrivateFieldGet(_isSvg,this)){bitmap=_assertClassBrand(_StampEditor_brand,this,_scaleBitmap).call(this,dataWidth,dataHeight);}}}var offscreen=new OffscreenCanvas(dataWidth,dataHeight);var offscreenCtx=offscreen.getContext("2d",{willReadFrequently:true});offscreenCtx.drawImage(bitmap,0,0,bitmap.width,bitmap.height,0,0,dataWidth,dataHeight);imageData={width:dataWidth,height:dataHeight,data:offscreenCtx.getImageData(0,0,dataWidth,dataHeight).data};}return{canvas:canvas,width:width,height:height,imageData:imageData};}},{key:"getImageForAltText",value:function getImageForAltText(){return _classPrivateFieldGet(_canvas,this);}},{key:"serialize",value:function serialize(){var isForCopying=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var context=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(this.isEmpty()){return null;}if(this.deleted){return this.serializeDeleted();}var serialized={annotationType:_AnnotationEditorType.STAMP,bitmapId:_classPrivateFieldGet(_bitmapId,this),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:_classPrivateFieldGet(_isSvg,this),structTreeParentId:this._structTreeParentId};if(isForCopying){serialized.bitmapUrl=_assertClassBrand(_StampEditor_brand,this,_serializeBitmap).call(this,true);serialized.accessibilityData=this.serializeAltText(true);serialized.isCopy=true;return serialized;}var _this$serializeAltTex=this.serializeAltText(false),decorative=_this$serializeAltTex.decorative,altText=_this$serializeAltTex.altText;if(!decorative&&altText){serialized.accessibilityData={type:"Figure",alt:altText};}if(this.annotationElementId){var changes=_assertClassBrand(_StampEditor_brand,this,_hasElementChanged4).call(this,serialized);if(changes.isSame){return null;}if(changes.isSameAltText){delete serialized.accessibilityData;}else{var _this$_initialData$st;serialized.accessibilityData.structParent=(_this$_initialData$st=this._initialData.structParent)!==null&&_this$_initialData$st!==void 0?_this$_initialData$st:-1;}}serialized.id=this.annotationElementId;if(context===null){return serialized;}context.stamps||(context.stamps=new Map());var area=_classPrivateFieldGet(_isSvg,this)?(serialized.rect[2]-serialized.rect[0])*(serialized.rect[3]-serialized.rect[1]):null;if(!context.stamps.has(_classPrivateFieldGet(_bitmapId,this))){context.stamps.set(_classPrivateFieldGet(_bitmapId,this),{area:area,serialized:serialized});serialized.bitmap=_assertClassBrand(_StampEditor_brand,this,_serializeBitmap).call(this,false);}else if(_classPrivateFieldGet(_isSvg,this)){var prevData=context.stamps.get(_classPrivateFieldGet(_bitmapId,this));if(area>prevData.area){prevData.area=area;prevData.serialized.bitmap.close();prevData.serialized.bitmap=_assertClassBrand(_StampEditor_brand,this,_serializeBitmap).call(this,false);}}return serialized;}},{key:"renderAnnotationElement",value:function renderAnnotationElement(annotation){annotation.updateEdited({rect:this.getRect(0,0)});return null;}}],[{key:"initialize",value:function initialize(l10n,uiManager){AnnotationEditor.initialize(l10n,uiManager);}},{key:"isHandlingMimeForPasting",value:function isHandlingMimeForPasting(mime){return _SupportedImageMimeTypes.includes(mime);}},{key:"paste",value:function paste(item,parent){parent.pasteEditor(_AnnotationEditorType.STAMP,{bitmapFile:item.getAsFile()});}},{key:"computeTelemetryFinalData",value:function computeTelemetryFinalData(data){var _hasAltTextStats$get,_hasAltTextStats$get2;var hasAltTextStats=data.get("hasAltText");return{hasAltText:(_hasAltTextStats$get=hasAltTextStats.get(true))!==null&&_hasAltTextStats$get!==void 0?_hasAltTextStats$get:0,hasNoAltText:(_hasAltTextStats$get2=hasAltTextStats.get(false))!==null&&_hasAltTextStats$get2!==void 0?_hasAltTextStats$get2:0};}},{key:"deserialize",value:function(){var _deserialize7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee57(data,parent,uiManager){var initialData,missingCanvas,_yield$parent$_struct,_data9,_data9$data,_rect5,rotation,id,structParent,popupRef,container,pageNumber,canvas,_bitmapId2,_bitmap2,_uiManager$imageManag,altText,editor,_data10,rect,bitmap,bitmapUrl,bitmapId,isSvg,accessibilityData,_editor$pageDimension3,parentWidth,parentHeight;return _regeneratorRuntime().wrap(function _callee57$(_context58){while(1)switch(_context58.prev=_context58.next){case 0:initialData=null;missingCanvas=false;if(!(data instanceof StampAnnotationElement)){_context58.next=21;break;}_data9=data,_data9$data=_data9.data,_rect5=_data9$data.rect,rotation=_data9$data.rotation,id=_data9$data.id,structParent=_data9$data.structParent,popupRef=_data9$data.popupRef,container=_data9.container,pageNumber=_data9.parent.page.pageNumber,canvas=_data9.canvas;if(canvas){delete data.canvas;_uiManager$imageManag=uiManager.imageManager.getFromCanvas(container.id,canvas);_bitmapId2=_uiManager$imageManag.id;_bitmap2=_uiManager$imageManag.bitmap;canvas.remove();}else{missingCanvas=true;data._hasNoCanvas=true;}_context58.next=7;return parent._structTree.getAriaAttributes("".concat(AnnotationPrefix).concat(id));case 7:_context58.t2=_yield$parent$_struct=_context58.sent;_context58.t1=_context58.t2===null;if(_context58.t1){_context58.next=11;break;}_context58.t1=_yield$parent$_struct===void 0;case 11:if(!_context58.t1){_context58.next=15;break;}_context58.t3=void 0;_context58.next=16;break;case 15:_context58.t3=_yield$parent$_struct.get("aria-label");case 16:_context58.t0=_context58.t3;if(_context58.t0){_context58.next=19;break;}_context58.t0="";case 19:altText=_context58.t0;initialData=data={annotationType:_AnnotationEditorType.STAMP,bitmapId:_bitmapId2,bitmap:_bitmap2,pageIndex:pageNumber-1,rect:_rect5.slice(0),rotation:rotation,id:id,deleted:false,accessibilityData:{decorative:false,altText:altText},isSvg:false,structParent:structParent,popupRef:popupRef};case 21:_context58.next=23;return _superPropGet(StampEditor,"deserialize",this,2)([data,parent,uiManager]);case 23:editor=_context58.sent;_data10=data,rect=_data10.rect,bitmap=_data10.bitmap,bitmapUrl=_data10.bitmapUrl,bitmapId=_data10.bitmapId,isSvg=_data10.isSvg,accessibilityData=_data10.accessibilityData;if(missingCanvas){uiManager.addMissingCanvas(data.id,editor);_classPrivateFieldSet(_missingCanvas,editor,true);}else if(bitmapId&&uiManager.imageManager.isValidId(bitmapId)){_classPrivateFieldSet(_bitmapId,editor,bitmapId);if(bitmap){_classPrivateFieldSet(_bitmap,editor,bitmap);}}else{_classPrivateFieldSet(_bitmapUrl,editor,bitmapUrl);}_classPrivateFieldSet(_isSvg,editor,isSvg);_editor$pageDimension3=_slicedToArray(editor.pageDimensions,2),parentWidth=_editor$pageDimension3[0],parentHeight=_editor$pageDimension3[1];editor.width=(rect[2]-rect[0])/parentWidth;editor.height=(rect[3]-rect[1])/parentHeight;editor.annotationElementId=data.id||null;if(accessibilityData){editor.altTextData=accessibilityData;}editor._initialData=initialData;_classPrivateFieldSet(_hasBeenAddedInUndoStack,editor,!!initialData);return _context58.abrupt("return",editor);case 35:case"end":return _context58.stop();}},_callee57,this);}));function deserialize(_x58,_x59,_x60){return _deserialize7.apply(this,arguments);}return deserialize;}()}]);}(AnnotationEditor);function _getBitmapFetched(data){var fromId=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!data){this.remove();return;}_classPrivateFieldSet(_bitmap,this,data.bitmap);if(!fromId){_classPrivateFieldSet(_bitmapId,this,data.id);_classPrivateFieldSet(_isSvg,this,data.isSvg);}if(data.file){_classPrivateFieldSet(_bitmapFileName,this,data.file.name);}_assertClassBrand(_StampEditor_brand,this,_createCanvas2).call(this);}function _getBitmapDone(){_classPrivateFieldSet(_bitmapPromise,this,null);this._uiManager.enableWaiting(false);if(!_classPrivateFieldGet(_canvas,this)){return;}if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&_classPrivateFieldGet(_bitmap,this)){this._editToolbar.hide();this._uiManager.editAltText(this,true);return;}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&_classPrivateFieldGet(_bitmap,this)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:false,alt_text_type:"empty"}});try{this.mlGuessAltText();}catch(_unused11){}}this.div.focus();}function _getBitmap(){var _this121=this;if(_classPrivateFieldGet(_bitmapId,this)){this._uiManager.enableWaiting(true);this._uiManager.imageManager.getFromId(_classPrivateFieldGet(_bitmapId,this)).then(function(data){return _assertClassBrand(_StampEditor_brand,_this121,_getBitmapFetched).call(_this121,data,true);})["finally"](function(){return _assertClassBrand(_StampEditor_brand,_this121,_getBitmapDone).call(_this121);});return;}if(_classPrivateFieldGet(_bitmapUrl,this)){var url=_classPrivateFieldGet(_bitmapUrl,this);_classPrivateFieldSet(_bitmapUrl,this,null);this._uiManager.enableWaiting(true);_classPrivateFieldSet(_bitmapPromise,this,this._uiManager.imageManager.getFromUrl(url).then(function(data){return _assertClassBrand(_StampEditor_brand,_this121,_getBitmapFetched).call(_this121,data);})["finally"](function(){return _assertClassBrand(_StampEditor_brand,_this121,_getBitmapDone).call(_this121);}));return;}if(_classPrivateFieldGet(_bitmapFile,this)){var file=_classPrivateFieldGet(_bitmapFile,this);_classPrivateFieldSet(_bitmapFile,this,null);this._uiManager.enableWaiting(true);_classPrivateFieldSet(_bitmapPromise,this,this._uiManager.imageManager.getFromFile(file).then(function(data){return _assertClassBrand(_StampEditor_brand,_this121,_getBitmapFetched).call(_this121,data);})["finally"](function(){return _assertClassBrand(_StampEditor_brand,_this121,_getBitmapDone).call(_this121);}));return;}var input=document.createElement("input");input.type="file";input.accept=_SupportedImageMimeTypes.join(",");var signal=this._uiManager._signal;_classPrivateFieldSet(_bitmapPromise,this,new Promise(function(resolve){input.addEventListener("change",/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee63(){var data;return _regeneratorRuntime().wrap(function _callee63$(_context64){while(1)switch(_context64.prev=_context64.next){case 0:if(!(!input.files||input.files.length===0)){_context64.next=4;break;}_this121.remove();_context64.next=10;break;case 4:_this121._uiManager.enableWaiting(true);_context64.next=7;return _this121._uiManager.imageManager.getFromFile(input.files[0]);case 7:data=_context64.sent;_this121._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:_this121._uiManager.useNewAltTextFlow}});_assertClassBrand(_StampEditor_brand,_this121,_getBitmapFetched).call(_this121,data);case 10:resolve();case 11:case"end":return _context64.stop();}},_callee63);})),{signal:signal});input.addEventListener("cancel",function(){_this121.remove();resolve();},{signal:signal});})["finally"](function(){return _assertClassBrand(_StampEditor_brand,_this121,_getBitmapDone).call(_this121);}));input.click();}function _createCanvas2(){var _this$_initialOptions2;var div=this.div;var _classPrivateFieldGet177=_classPrivateFieldGet(_bitmap,this),width=_classPrivateFieldGet177.width,height=_classPrivateFieldGet177.height;var _this$pageDimensions11=_slicedToArray(this.pageDimensions,2),pageWidth=_this$pageDimensions11[0],pageHeight=_this$pageDimensions11[1];var MAX_RATIO=0.75;if(this.width){width=this.width*pageWidth;height=this.height*pageHeight;}else if(width>MAX_RATIO*pageWidth||height>MAX_RATIO*pageHeight){var factor=Math.min(MAX_RATIO*pageWidth/width,MAX_RATIO*pageHeight/height);width*=factor;height*=factor;}var _this$parentDimension24=_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension24[0],parentHeight=_this$parentDimension24[1];this.setDims(width*parentWidth/pageWidth,height*parentHeight/pageHeight);this._uiManager.enableWaiting(false);var canvas=_classPrivateFieldSet(_canvas,this,document.createElement("canvas"));canvas.setAttribute("role","img");this.addContainer(canvas);this.width=width/pageWidth;this.height=height/pageHeight;if((_this$_initialOptions2=this._initialOptions)!==null&&_this$_initialOptions2!==void 0&&_this$_initialOptions2.isCentered){this.center();}else{this.fixAndSetPosition();}this._initialOptions=null;if(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId){div.hidden=false;}_assertClassBrand(_StampEditor_brand,this,_drawBitmap).call(this);if(!_classPrivateFieldGet(_hasBeenAddedInUndoStack,this)){this.parent.addUndoableEditor(this);_classPrivateFieldSet(_hasBeenAddedInUndoStack,this,true);}this._reportTelemetry({action:"inserted_image"});if(_classPrivateFieldGet(_bitmapFileName,this)){canvas.setAttribute("aria-label",_classPrivateFieldGet(_bitmapFileName,this));}}function _scaleBitmap(width,height){var _classPrivateFieldGet178=_classPrivateFieldGet(_bitmap,this),bitmapWidth=_classPrivateFieldGet178.width,bitmapHeight=_classPrivateFieldGet178.height;var newWidth=bitmapWidth;var newHeight=bitmapHeight;var bitmap=_classPrivateFieldGet(_bitmap,this);while(newWidth>2*width||newHeight>2*height){var prevWidth=newWidth;var prevHeight=newHeight;if(newWidth>2*width){newWidth=newWidth>=16384?Math.floor(newWidth/2)-1:Math.ceil(newWidth/2);}if(newHeight>2*height){newHeight=newHeight>=16384?Math.floor(newHeight/2)-1:Math.ceil(newHeight/2);}var offscreen=new OffscreenCanvas(newWidth,newHeight);var ctx=offscreen.getContext("2d");ctx.drawImage(bitmap,0,0,prevWidth,prevHeight,0,0,newWidth,newHeight);bitmap=offscreen.transferToImageBitmap();}return bitmap;}function _drawBitmap(){var _this$parentDimension25=_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension25[0],parentHeight=_this$parentDimension25[1];var width=this.width,height=this.height;var outputScale=new _OutputScale();var scaledWidth=Math.ceil(width*parentWidth*outputScale.sx);var scaledHeight=Math.ceil(height*parentHeight*outputScale.sy);var canvas=_classPrivateFieldGet(_canvas,this);if(!canvas||canvas.width===scaledWidth&&canvas.height===scaledHeight){return;}canvas.width=scaledWidth;canvas.height=scaledHeight;var bitmap=_classPrivateFieldGet(_isSvg,this)?_classPrivateFieldGet(_bitmap,this):_assertClassBrand(_StampEditor_brand,this,_scaleBitmap).call(this,scaledWidth,scaledHeight);var ctx=canvas.getContext("2d");ctx.filter=this._uiManager.hcmFilter;ctx.drawImage(bitmap,0,0,bitmap.width,bitmap.height,0,0,scaledWidth,scaledHeight);}function _serializeBitmap(toUrl){if(toUrl){if(_classPrivateFieldGet(_isSvg,this)){var url=this._uiManager.imageManager.getSvgUrl(_classPrivateFieldGet(_bitmapId,this));if(url){return url;}}var canvas=document.createElement("canvas");var _classPrivateFieldGet179=_classPrivateFieldGet(_bitmap,this);canvas.width=_classPrivateFieldGet179.width;canvas.height=_classPrivateFieldGet179.height;var ctx=canvas.getContext("2d");ctx.drawImage(_classPrivateFieldGet(_bitmap,this),0,0);return canvas.toDataURL();}if(_classPrivateFieldGet(_isSvg,this)){var _this$pageDimensions12=_slicedToArray(this.pageDimensions,2),pageWidth=_this$pageDimensions12[0],pageHeight=_this$pageDimensions12[1];var width=Math.round(this.width*pageWidth*_PixelsPerInch.PDF_TO_CSS_UNITS);var height=Math.round(this.height*pageHeight*_PixelsPerInch.PDF_TO_CSS_UNITS);var offscreen=new OffscreenCanvas(width,height);var _ctx2=offscreen.getContext("2d");_ctx2.drawImage(_classPrivateFieldGet(_bitmap,this),0,0,_classPrivateFieldGet(_bitmap,this).width,_classPrivateFieldGet(_bitmap,this).height,0,0,width,height);return offscreen.transferToImageBitmap();}return structuredClone(_classPrivateFieldGet(_bitmap,this));}function _hasElementChanged4(serialized){var _serialized$accessibi;var _this$_initialData4=this._initialData,pageIndex=_this$_initialData4.pageIndex,altText=_this$_initialData4.accessibilityData.altText;var isSamePageIndex=serialized.pageIndex===pageIndex;var isSameAltText=(((_serialized$accessibi=serialized.accessibilityData)===null||_serialized$accessibi===void 0?void 0:_serialized$accessibi.alt)||"")===altText;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&isSamePageIndex&&isSameAltText,isSameAltText:isSameAltText};}_defineProperty(StampEditor,"_type","stamp");_defineProperty(StampEditor,"_editorType",_AnnotationEditorType.STAMP);;// ./src/display/editor/annotation_editor_layer.js\nvar _accessibilityManager2=/*#__PURE__*/new WeakMap();var _allowClick=/*#__PURE__*/new WeakMap();var _annotationLayer=/*#__PURE__*/new WeakMap();var _clickAC=/*#__PURE__*/new WeakMap();var _editorFocusTimeoutId=/*#__PURE__*/new WeakMap();var _editors=/*#__PURE__*/new WeakMap();var _hadPointerDown=/*#__PURE__*/new WeakMap();var _isDisabling=/*#__PURE__*/new WeakMap();var _isEnabling=/*#__PURE__*/new WeakMap();var _drawingAC=/*#__PURE__*/new WeakMap();var _focusedElement=/*#__PURE__*/new WeakMap();var _textLayer=/*#__PURE__*/new WeakMap();var _textSelectionAC=/*#__PURE__*/new WeakMap();var _uiManager4=/*#__PURE__*/new WeakMap();var _AnnotationEditorLayer_brand=/*#__PURE__*/new WeakSet();var _AnnotationEditorLayer=/*#__PURE__*/function(){function _AnnotationEditorLayer(_ref130){var uiManager=_ref130.uiManager,pageIndex=_ref130.pageIndex,div=_ref130.div,structTreeLayer=_ref130.structTreeLayer,accessibilityManager=_ref130.accessibilityManager,annotationLayer=_ref130.annotationLayer,drawLayer=_ref130.drawLayer,textLayer=_ref130.textLayer,viewport=_ref130.viewport,l10n=_ref130.l10n;_classCallCheck(this,_AnnotationEditorLayer);_classPrivateMethodInitSpec(this,_AnnotationEditorLayer_brand);_classPrivateFieldInitSpec(this,_accessibilityManager2,void 0);_classPrivateFieldInitSpec(this,_allowClick,false);_classPrivateFieldInitSpec(this,_annotationLayer,null);_classPrivateFieldInitSpec(this,_clickAC,null);_classPrivateFieldInitSpec(this,_editorFocusTimeoutId,null);_classPrivateFieldInitSpec(this,_editors,new Map());_classPrivateFieldInitSpec(this,_hadPointerDown,false);_classPrivateFieldInitSpec(this,_isDisabling,false);_classPrivateFieldInitSpec(this,_isEnabling,false);_classPrivateFieldInitSpec(this,_drawingAC,null);_classPrivateFieldInitSpec(this,_focusedElement,null);_classPrivateFieldInitSpec(this,_textLayer,null);_classPrivateFieldInitSpec(this,_textSelectionAC,null);_classPrivateFieldInitSpec(this,_uiManager4,void 0);var editorTypes=_toConsumableArray(_editorTypes2._.values());if(!_AnnotationEditorLayer._initialized){_AnnotationEditorLayer._initialized=true;var _iterator159=_createForOfIteratorHelper(editorTypes),_step159;try{for(_iterator159.s();!(_step159=_iterator159.n()).done;){var editorType=_step159.value;editorType.initialize(l10n,uiManager);}}catch(err){_iterator159.e(err);}finally{_iterator159.f();}}uiManager.registerEditorTypes(editorTypes);_classPrivateFieldSet(_uiManager4,this,uiManager);this.pageIndex=pageIndex;this.div=div;_classPrivateFieldSet(_accessibilityManager2,this,accessibilityManager);_classPrivateFieldSet(_annotationLayer,this,annotationLayer);this.viewport=viewport;_classPrivateFieldSet(_textLayer,this,textLayer);this.drawLayer=drawLayer;this._structTree=structTreeLayer;_classPrivateFieldGet(_uiManager4,this).addLayer(this);}return _createClass(_AnnotationEditorLayer,[{key:"isEmpty",get:function get(){return _classPrivateFieldGet(_editors,this).size===0;}},{key:"isInvisible",get:function get(){return this.isEmpty&&_classPrivateFieldGet(_uiManager4,this).getMode()===_AnnotationEditorType.NONE;}},{key:"updateToolbar",value:function updateToolbar(mode){_classPrivateFieldGet(_uiManager4,this).updateToolbar(mode);}},{key:"updateMode",value:function updateMode(){var mode=arguments.length>0&&arguments[0]!==undefined?arguments[0]:_classPrivateFieldGet(_uiManager4,this).getMode();_assertClassBrand(_AnnotationEditorLayer_brand,this,_cleanup2).call(this);switch(mode){case _AnnotationEditorType.NONE:this.disableTextSelection();this.togglePointerEvents(false);this.toggleAnnotationLayerPointerEvents(true);this.disableClick();return;case _AnnotationEditorType.INK:this.disableTextSelection();this.togglePointerEvents(true);this.enableClick();break;case _AnnotationEditorType.HIGHLIGHT:this.enableTextSelection();this.togglePointerEvents(false);this.disableClick();break;default:this.disableTextSelection();this.togglePointerEvents(true);this.enableClick();}this.toggleAnnotationLayerPointerEvents(false);var classList=this.div.classList;var _iterator160=_createForOfIteratorHelper(_editorTypes2._.values()),_step160;try{for(_iterator160.s();!(_step160=_iterator160.n()).done;){var editorType=_step160.value;classList.toggle("".concat(editorType._type,"Editing"),mode===editorType._editorType);}}catch(err){_iterator160.e(err);}finally{_iterator160.f();}this.div.hidden=false;}},{key:"hasTextLayer",value:function hasTextLayer(textLayer){var _classPrivateFieldGet120;return textLayer===((_classPrivateFieldGet120=_classPrivateFieldGet(_textLayer,this))===null||_classPrivateFieldGet120===void 0?void 0:_classPrivateFieldGet120.div);}},{key:"setEditingState",value:function setEditingState(isEditing){_classPrivateFieldGet(_uiManager4,this).setEditingState(isEditing);}},{key:"addCommands",value:function addCommands(params){_classPrivateFieldGet(_uiManager4,this).addCommands(params);}},{key:"cleanUndoStack",value:function cleanUndoStack(type){_classPrivateFieldGet(_uiManager4,this).cleanUndoStack(type);}},{key:"toggleDrawing",value:function toggleDrawing(){var enabled=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;this.div.classList.toggle("drawing",!enabled);}},{key:"togglePointerEvents",value:function togglePointerEvents(){var enabled=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;this.div.classList.toggle("disabled",!enabled);}},{key:"toggleAnnotationLayerPointerEvents",value:function toggleAnnotationLayerPointerEvents(){var _classPrivateFieldGet121;var enabled=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;(_classPrivateFieldGet121=_classPrivateFieldGet(_annotationLayer,this))===null||_classPrivateFieldGet121===void 0||_classPrivateFieldGet121.div.classList.toggle("disabled",!enabled);}},{key:"enable",value:function(){var _enable=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee58(){var annotationElementIds,_iterator161,_step161,editor,editables,_iterator162,_step162,editable,_editor4;return _regeneratorRuntime().wrap(function _callee58$(_context59){while(1)switch(_context59.prev=_context59.next){case 0:_classPrivateFieldSet(_isEnabling,this,true);this.div.tabIndex=0;this.togglePointerEvents(true);annotationElementIds=new Set();_iterator161=_createForOfIteratorHelper(_classPrivateFieldGet(_editors,this).values());try{for(_iterator161.s();!(_step161=_iterator161.n()).done;){editor=_step161.value;editor.enableEditing();editor.show(true);if(editor.annotationElementId){_classPrivateFieldGet(_uiManager4,this).removeChangedExistingAnnotation(editor);annotationElementIds.add(editor.annotationElementId);}}}catch(err){_iterator161.e(err);}finally{_iterator161.f();}if(_classPrivateFieldGet(_annotationLayer,this)){_context59.next=9;break;}_classPrivateFieldSet(_isEnabling,this,false);return _context59.abrupt("return");case 9:editables=_classPrivateFieldGet(_annotationLayer,this).getEditableAnnotations();_iterator162=_createForOfIteratorHelper(editables);_context59.prev=11;_iterator162.s();case 13:if((_step162=_iterator162.n()).done){_context59.next=29;break;}editable=_step162.value;editable.hide();if(!_classPrivateFieldGet(_uiManager4,this).isDeletedAnnotationElement(editable.data.id)){_context59.next=18;break;}return _context59.abrupt("continue",27);case 18:if(!annotationElementIds.has(editable.data.id)){_context59.next=20;break;}return _context59.abrupt("continue",27);case 20:_context59.next=22;return this.deserialize(editable);case 22:_editor4=_context59.sent;if(_editor4){_context59.next=25;break;}return _context59.abrupt("continue",27);case 25:this.addOrRebuild(_editor4);_editor4.enableEditing();case 27:_context59.next=13;break;case 29:_context59.next=34;break;case 31:_context59.prev=31;_context59.t0=_context59["catch"](11);_iterator162.e(_context59.t0);case 34:_context59.prev=34;_iterator162.f();return _context59.finish(34);case 37:_classPrivateFieldSet(_isEnabling,this,false);case 38:case"end":return _context59.stop();}},_callee58,this,[[11,31,34,37]]);}));function enable(){return _enable.apply(this,arguments);}return enable;}()},{key:"disable",value:function disable(){_classPrivateFieldSet(_isDisabling,this,true);this.div.tabIndex=-1;this.togglePointerEvents(false);var changedAnnotations=new Map();var resetAnnotations=new Map();var _iterator163=_createForOfIteratorHelper(_classPrivateFieldGet(_editors,this).values()),_step163;try{for(_iterator163.s();!(_step163=_iterator163.n()).done;){var _this$getEditableAnno;var _editor5=_step163.value;_editor5.disableEditing();if(!_editor5.annotationElementId){continue;}if(_editor5.serialize()!==null){changedAnnotations.set(_editor5.annotationElementId,_editor5);continue;}else{resetAnnotations.set(_editor5.annotationElementId,_editor5);}(_this$getEditableAnno=this.getEditableAnnotation(_editor5.annotationElementId))===null||_this$getEditableAnno===void 0||_this$getEditableAnno.show();_editor5.remove();}}catch(err){_iterator163.e(err);}finally{_iterator163.f();}if(_classPrivateFieldGet(_annotationLayer,this)){var editables=_classPrivateFieldGet(_annotationLayer,this).getEditableAnnotations();var _iterator164=_createForOfIteratorHelper(editables),_step164;try{for(_iterator164.s();!(_step164=_iterator164.n()).done;){var editable=_step164.value;var id=editable.data.id;if(_classPrivateFieldGet(_uiManager4,this).isDeletedAnnotationElement(id)){continue;}var editor=resetAnnotations.get(id);if(editor){editor.resetAnnotationElement(editable);editor.show(false);editable.show();continue;}editor=changedAnnotations.get(id);if(editor){_classPrivateFieldGet(_uiManager4,this).addChangedExistingAnnotation(editor);if(editor.renderAnnotationElement(editable)){editor.show(false);}}editable.show();}}catch(err){_iterator164.e(err);}finally{_iterator164.f();}}_assertClassBrand(_AnnotationEditorLayer_brand,this,_cleanup2).call(this);if(this.isEmpty){this.div.hidden=true;}var classList=this.div.classList;var _iterator165=_createForOfIteratorHelper(_editorTypes2._.values()),_step165;try{for(_iterator165.s();!(_step165=_iterator165.n()).done;){var editorType=_step165.value;classList.remove("".concat(editorType._type,"Editing"));}}catch(err){_iterator165.e(err);}finally{_iterator165.f();}this.disableTextSelection();this.toggleAnnotationLayerPointerEvents(true);_classPrivateFieldSet(_isDisabling,this,false);}},{key:"getEditableAnnotation",value:function getEditableAnnotation(id){var _classPrivateFieldGet122;return((_classPrivateFieldGet122=_classPrivateFieldGet(_annotationLayer,this))===null||_classPrivateFieldGet122===void 0?void 0:_classPrivateFieldGet122.getEditableAnnotation(id))||null;}},{key:"setActiveEditor",value:function setActiveEditor(editor){var currentActive=_classPrivateFieldGet(_uiManager4,this).getActive();if(currentActive===editor){return;}_classPrivateFieldGet(_uiManager4,this).setActiveEditor(editor);}},{key:"enableTextSelection",value:function enableTextSelection(){var _classPrivateFieldGet123;this.div.tabIndex=-1;if((_classPrivateFieldGet123=_classPrivateFieldGet(_textLayer,this))!==null&&_classPrivateFieldGet123!==void 0&&_classPrivateFieldGet123.div&&!_classPrivateFieldGet(_textSelectionAC,this)){_classPrivateFieldSet(_textSelectionAC,this,new AbortController());var signal=_classPrivateFieldGet(_uiManager4,this).combinedSignal(_classPrivateFieldGet(_textSelectionAC,this));_classPrivateFieldGet(_textLayer,this).div.addEventListener("pointerdown",_assertClassBrand(_AnnotationEditorLayer_brand,this,_textLayerPointerDown).bind(this),{signal:signal});_classPrivateFieldGet(_textLayer,this).div.classList.add("highlighting");}}},{key:"disableTextSelection",value:function disableTextSelection(){var _classPrivateFieldGet124;this.div.tabIndex=0;if((_classPrivateFieldGet124=_classPrivateFieldGet(_textLayer,this))!==null&&_classPrivateFieldGet124!==void 0&&_classPrivateFieldGet124.div&&_classPrivateFieldGet(_textSelectionAC,this)){_classPrivateFieldGet(_textSelectionAC,this).abort();_classPrivateFieldSet(_textSelectionAC,this,null);_classPrivateFieldGet(_textLayer,this).div.classList.remove("highlighting");}}},{key:"enableClick",value:function enableClick(){if(_classPrivateFieldGet(_clickAC,this)){return;}_classPrivateFieldSet(_clickAC,this,new AbortController());var signal=_classPrivateFieldGet(_uiManager4,this).combinedSignal(_classPrivateFieldGet(_clickAC,this));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:signal});var pointerup=this.pointerup.bind(this);this.div.addEventListener("pointerup",pointerup,{signal:signal});this.div.addEventListener("pointercancel",pointerup,{signal:signal});}},{key:"disableClick",value:function disableClick(){var _classPrivateFieldGet125;(_classPrivateFieldGet125=_classPrivateFieldGet(_clickAC,this))===null||_classPrivateFieldGet125===void 0||_classPrivateFieldGet125.abort();_classPrivateFieldSet(_clickAC,this,null);}},{key:"attach",value:function attach(editor){_classPrivateFieldGet(_editors,this).set(editor.id,editor);var annotationElementId=editor.annotationElementId;if(annotationElementId&&_classPrivateFieldGet(_uiManager4,this).isDeletedAnnotationElement(annotationElementId)){_classPrivateFieldGet(_uiManager4,this).removeDeletedAnnotationElement(editor);}}},{key:"detach",value:function detach(editor){var _classPrivateFieldGet126;_classPrivateFieldGet(_editors,this)["delete"](editor.id);(_classPrivateFieldGet126=_classPrivateFieldGet(_accessibilityManager2,this))===null||_classPrivateFieldGet126===void 0||_classPrivateFieldGet126.removePointerInTextLayer(editor.contentDiv);if(!_classPrivateFieldGet(_isDisabling,this)&&editor.annotationElementId){_classPrivateFieldGet(_uiManager4,this).addDeletedAnnotationElement(editor);}}},{key:"remove",value:function remove(editor){this.detach(editor);_classPrivateFieldGet(_uiManager4,this).removeEditor(editor);editor.div.remove();editor.isAttachedToDOM=false;}},{key:"changeParent",value:function changeParent(editor){var _editor$parent;if(editor.parent===this){return;}if(editor.parent&&editor.annotationElementId){_classPrivateFieldGet(_uiManager4,this).addDeletedAnnotationElement(editor.annotationElementId);AnnotationEditor.deleteAnnotationElement(editor);editor.annotationElementId=null;}this.attach(editor);(_editor$parent=editor.parent)===null||_editor$parent===void 0||_editor$parent.detach(editor);editor.setParent(this);if(editor.div&&editor.isAttachedToDOM){editor.div.remove();this.div.append(editor.div);}}},{key:"add",value:function add(editor){if(editor.parent===this&&editor.isAttachedToDOM){return;}this.changeParent(editor);_classPrivateFieldGet(_uiManager4,this).addEditor(editor);this.attach(editor);if(!editor.isAttachedToDOM){var div=editor.render();this.div.append(div);editor.isAttachedToDOM=true;}editor.fixAndSetPosition();editor.onceAdded(!_classPrivateFieldGet(_isEnabling,this));_classPrivateFieldGet(_uiManager4,this).addToAnnotationStorage(editor);editor._reportTelemetry(editor.telemetryInitialData);}},{key:"moveEditorInDOM",value:function moveEditorInDOM(editor){var _this106=this,_classPrivateFieldGet127;if(!editor.isAttachedToDOM){return;}var _document3=document,activeElement=_document3.activeElement;if(editor.div.contains(activeElement)&&!_classPrivateFieldGet(_editorFocusTimeoutId,this)){editor._focusEventsAllowed=false;_classPrivateFieldSet(_editorFocusTimeoutId,this,setTimeout(function(){_classPrivateFieldSet(_editorFocusTimeoutId,_this106,null);if(!editor.div.contains(document.activeElement)){editor.div.addEventListener("focusin",function(){editor._focusEventsAllowed=true;},{once:true,signal:_classPrivateFieldGet(_uiManager4,_this106)._signal});activeElement.focus();}else{editor._focusEventsAllowed=true;}},0));}editor._structTreeParentId=(_classPrivateFieldGet127=_classPrivateFieldGet(_accessibilityManager2,this))===null||_classPrivateFieldGet127===void 0?void 0:_classPrivateFieldGet127.moveElementInDOM(this.div,editor.div,editor.contentDiv,true);}},{key:"addOrRebuild",value:function addOrRebuild(editor){if(editor.needsToBeRebuilt()){editor.parent||(editor.parent=this);editor.rebuild();editor.show();}else{this.add(editor);}}},{key:"addUndoableEditor",value:function addUndoableEditor(editor){var cmd=function cmd(){return editor._uiManager.rebuild(editor);};var undo=function undo(){editor.remove();};this.addCommands({cmd:cmd,undo:undo,mustExec:false});}},{key:"getNextId",value:function getNextId(){return _classPrivateFieldGet(_uiManager4,this).getId();}},{key:"combinedSignal",value:function combinedSignal(ac){return _classPrivateFieldGet(_uiManager4,this).combinedSignal(ac);}},{key:"canCreateNewEmptyEditor",value:function canCreateNewEmptyEditor(){var _classPrivateGetter2;return(_classPrivateGetter2=_classPrivateGetter(_AnnotationEditorLayer_brand,this,_get_currentEditorType))===null||_classPrivateGetter2===void 0?void 0:_classPrivateGetter2.canCreateNewEmptyEditor();}},{key:"pasteEditor",value:function(){var _pasteEditor=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee59(mode,params){var _assertClassBrand$cal31,offsetX,offsetY,id,editor;return _regeneratorRuntime().wrap(function _callee59$(_context60){while(1)switch(_context60.prev=_context60.next){case 0:_classPrivateFieldGet(_uiManager4,this).updateToolbar(mode);_context60.next=3;return _classPrivateFieldGet(_uiManager4,this).updateMode(mode);case 3:_assertClassBrand$cal31=_assertClassBrand(_AnnotationEditorLayer_brand,this,_getCenterPoint).call(this),offsetX=_assertClassBrand$cal31.offsetX,offsetY=_assertClassBrand$cal31.offsetY;id=this.getNextId();editor=_assertClassBrand(_AnnotationEditorLayer_brand,this,_createNewEditor).call(this,_objectSpread({parent:this,id:id,x:offsetX,y:offsetY,uiManager:_classPrivateFieldGet(_uiManager4,this),isCentered:true},params));if(editor){this.add(editor);}case 7:case"end":return _context60.stop();}},_callee59,this);}));function pasteEditor(_x61,_x62){return _pasteEditor.apply(this,arguments);}return pasteEditor;}()},{key:"deserialize",value:function(){var _deserialize8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee60(data){var _editorTypes2$_$get,_data$annotationType;return _regeneratorRuntime().wrap(function _callee60$(_context61){while(1)switch(_context61.prev=_context61.next){case 0:_context61.next=2;return(_editorTypes2$_$get=_editorTypes2._.get((_data$annotationType=data.annotationType)!==null&&_data$annotationType!==void 0?_data$annotationType:data.annotationEditorType))===null||_editorTypes2$_$get===void 0?void 0:_editorTypes2$_$get.deserialize(data,this,_classPrivateFieldGet(_uiManager4,this));case 2:_context61.t0=_context61.sent;if(_context61.t0){_context61.next=5;break;}_context61.t0=null;case 5:return _context61.abrupt("return",_context61.t0);case 6:case"end":return _context61.stop();}},_callee60,this);}));function deserialize(_x63){return _deserialize8.apply(this,arguments);}return deserialize;}()},{key:"createAndAddNewEditor",value:function createAndAddNewEditor(event,isCentered){var data=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var id=this.getNextId();var editor=_assertClassBrand(_AnnotationEditorLayer_brand,this,_createNewEditor).call(this,_objectSpread({parent:this,id:id,x:event.offsetX,y:event.offsetY,uiManager:_classPrivateFieldGet(_uiManager4,this),isCentered:isCentered},data));if(editor){this.add(editor);}return editor;}},{key:"addNewEditor",value:function addNewEditor(){var data=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};this.createAndAddNewEditor(_assertClassBrand(_AnnotationEditorLayer_brand,this,_getCenterPoint).call(this),true,data);}},{key:"setSelected",value:function setSelected(editor){_classPrivateFieldGet(_uiManager4,this).setSelected(editor);}},{key:"toggleSelected",value:function toggleSelected(editor){_classPrivateFieldGet(_uiManager4,this).toggleSelected(editor);}},{key:"unselect",value:function unselect(editor){_classPrivateFieldGet(_uiManager4,this).unselect(editor);}},{key:"pointerup",value:function pointerup(event){var _classPrivateGetter3;var isMac=util_FeatureTest.platform.isMac;if(event.button!==0||event.ctrlKey&&isMac){return;}if(event.target!==this.div){return;}if(!_classPrivateFieldGet(_hadPointerDown,this)){return;}_classPrivateFieldSet(_hadPointerDown,this,false);if((_classPrivateGetter3=_classPrivateGetter(_AnnotationEditorLayer_brand,this,_get_currentEditorType))!==null&&_classPrivateGetter3!==void 0&&_classPrivateGetter3.isDrawer&&_classPrivateGetter(_AnnotationEditorLayer_brand,this,_get_currentEditorType).supportMultipleDrawings){return;}if(!_classPrivateFieldGet(_allowClick,this)){_classPrivateFieldSet(_allowClick,this,true);return;}var currentMode=_classPrivateFieldGet(_uiManager4,this).getMode();if(currentMode===_AnnotationEditorType.STAMP||currentMode===_AnnotationEditorType.SIGNATURE){_classPrivateFieldGet(_uiManager4,this).unselectAll();return;}this.createAndAddNewEditor(event,false);}},{key:"pointerdown",value:function pointerdown(event){var _classPrivateGetter4;if(_classPrivateFieldGet(_uiManager4,this).getMode()===_AnnotationEditorType.HIGHLIGHT){this.enableTextSelection();}if(_classPrivateFieldGet(_hadPointerDown,this)){_classPrivateFieldSet(_hadPointerDown,this,false);return;}var isMac=util_FeatureTest.platform.isMac;if(event.button!==0||event.ctrlKey&&isMac){return;}if(event.target!==this.div){return;}_classPrivateFieldSet(_hadPointerDown,this,true);if((_classPrivateGetter4=_classPrivateGetter(_AnnotationEditorLayer_brand,this,_get_currentEditorType))!==null&&_classPrivateGetter4!==void 0&&_classPrivateGetter4.isDrawer){this.startDrawingSession(event);return;}var editor=_classPrivateFieldGet(_uiManager4,this).getActive();_classPrivateFieldSet(_allowClick,this,!editor||editor.isEmpty());}},{key:"startDrawingSession",value:function startDrawingSession(event){var _this107=this;this.div.focus({preventScroll:true});if(_classPrivateFieldGet(_drawingAC,this)){_classPrivateGetter(_AnnotationEditorLayer_brand,this,_get_currentEditorType).startDrawing(this,_classPrivateFieldGet(_uiManager4,this),false,event);return;}_classPrivateFieldGet(_uiManager4,this).setCurrentDrawingSession(this);_classPrivateFieldSet(_drawingAC,this,new AbortController());var signal=_classPrivateFieldGet(_uiManager4,this).combinedSignal(_classPrivateFieldGet(_drawingAC,this));this.div.addEventListener("blur",function(_ref131){var relatedTarget=_ref131.relatedTarget;if(relatedTarget&&!_this107.div.contains(relatedTarget)){_classPrivateFieldSet(_focusedElement,_this107,null);_this107.commitOrRemove();}},{signal:signal});_classPrivateGetter(_AnnotationEditorLayer_brand,this,_get_currentEditorType).startDrawing(this,_classPrivateFieldGet(_uiManager4,this),false,event);}},{key:"pause",value:function pause(on){var _this108=this;if(on){var _document4=document,activeElement=_document4.activeElement;if(this.div.contains(activeElement)){_classPrivateFieldSet(_focusedElement,this,activeElement);}return;}if(_classPrivateFieldGet(_focusedElement,this)){setTimeout(function(){var _classPrivateFieldGet128;(_classPrivateFieldGet128=_classPrivateFieldGet(_focusedElement,_this108))===null||_classPrivateFieldGet128===void 0||_classPrivateFieldGet128.focus();_classPrivateFieldSet(_focusedElement,_this108,null);},0);}}},{key:"endDrawingSession",value:function endDrawingSession(){var isAborted=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(!_classPrivateFieldGet(_drawingAC,this)){return null;}_classPrivateFieldGet(_uiManager4,this).setCurrentDrawingSession(null);_classPrivateFieldGet(_drawingAC,this).abort();_classPrivateFieldSet(_drawingAC,this,null);_classPrivateFieldSet(_focusedElement,this,null);return _classPrivateGetter(_AnnotationEditorLayer_brand,this,_get_currentEditorType).endDrawing(isAborted);}},{key:"findNewParent",value:function findNewParent(editor,x,y){var layer=_classPrivateFieldGet(_uiManager4,this).findParent(x,y);if(layer===null||layer===this){return false;}layer.changeParent(editor);return true;}},{key:"commitOrRemove",value:function commitOrRemove(){if(_classPrivateFieldGet(_drawingAC,this)){this.endDrawingSession();return true;}return false;}},{key:"onScaleChanging",value:function onScaleChanging(){if(!_classPrivateFieldGet(_drawingAC,this)){return;}_classPrivateGetter(_AnnotationEditorLayer_brand,this,_get_currentEditorType).onScaleChangingWhenDrawing(this);}},{key:"destroy",value:function destroy(){var _classPrivateFieldGet129;this.commitOrRemove();if(((_classPrivateFieldGet129=_classPrivateFieldGet(_uiManager4,this).getActive())===null||_classPrivateFieldGet129===void 0?void 0:_classPrivateFieldGet129.parent)===this){_classPrivateFieldGet(_uiManager4,this).commitOrRemove();_classPrivateFieldGet(_uiManager4,this).setActiveEditor(null);}if(_classPrivateFieldGet(_editorFocusTimeoutId,this)){clearTimeout(_classPrivateFieldGet(_editorFocusTimeoutId,this));_classPrivateFieldSet(_editorFocusTimeoutId,this,null);}var _iterator166=_createForOfIteratorHelper(_classPrivateFieldGet(_editors,this).values()),_step166;try{for(_iterator166.s();!(_step166=_iterator166.n()).done;){var _classPrivateFieldGet130;var editor=_step166.value;(_classPrivateFieldGet130=_classPrivateFieldGet(_accessibilityManager2,this))===null||_classPrivateFieldGet130===void 0||_classPrivateFieldGet130.removePointerInTextLayer(editor.contentDiv);editor.setParent(null);editor.isAttachedToDOM=false;editor.div.remove();}}catch(err){_iterator166.e(err);}finally{_iterator166.f();}this.div=null;_classPrivateFieldGet(_editors,this).clear();_classPrivateFieldGet(_uiManager4,this).removeLayer(this);}},{key:"render",value:function render(_ref132){var viewport=_ref132.viewport;this.viewport=viewport;_setLayerDimensions(this.div,viewport);var _iterator167=_createForOfIteratorHelper(_classPrivateFieldGet(_uiManager4,this).getEditors(this.pageIndex)),_step167;try{for(_iterator167.s();!(_step167=_iterator167.n()).done;){var editor=_step167.value;this.add(editor);editor.rebuild();}}catch(err){_iterator167.e(err);}finally{_iterator167.f();}this.updateMode();}},{key:"update",value:function update(_ref133){var viewport=_ref133.viewport;_classPrivateFieldGet(_uiManager4,this).commitOrRemove();_assertClassBrand(_AnnotationEditorLayer_brand,this,_cleanup2).call(this);var oldRotation=this.viewport.rotation;var rotation=viewport.rotation;this.viewport=viewport;_setLayerDimensions(this.div,{rotation:rotation});if(oldRotation!==rotation){var _iterator168=_createForOfIteratorHelper(_classPrivateFieldGet(_editors,this).values()),_step168;try{for(_iterator168.s();!(_step168=_iterator168.n()).done;){var editor=_step168.value;editor.rotate(rotation);}}catch(err){_iterator168.e(err);}finally{_iterator168.f();}}}},{key:"pageDimensions",get:function get(){var _this$viewport$rawDim=this.viewport.rawDims,pageWidth=_this$viewport$rawDim.pageWidth,pageHeight=_this$viewport$rawDim.pageHeight;return[pageWidth,pageHeight];}},{key:"scale",get:function get(){return _classPrivateFieldGet(_uiManager4,this).viewParameters.realScale;}}]);}();function _textLayerPointerDown(event){var _this122=this;_classPrivateFieldGet(_uiManager4,this).unselectAll();var target=event.target;if(target===_classPrivateFieldGet(_textLayer,this).div||(target.getAttribute("role")==="img"||target.classList.contains("endOfContent"))&&_classPrivateFieldGet(_textLayer,this).div.contains(target)){var isMac=util_FeatureTest.platform.isMac;if(event.button!==0||event.ctrlKey&&isMac){return;}_classPrivateFieldGet(_uiManager4,this).showAllEditors("highlight",true,true);_classPrivateFieldGet(_textLayer,this).div.classList.add("free");this.toggleDrawing();HighlightEditor.startHighlighting(this,_classPrivateFieldGet(_uiManager4,this).direction==="ltr",{target:_classPrivateFieldGet(_textLayer,this).div,x:event.x,y:event.y});_classPrivateFieldGet(_textLayer,this).div.addEventListener("pointerup",function(){_classPrivateFieldGet(_textLayer,_this122).div.classList.remove("free");_this122.toggleDrawing(true);},{once:true,signal:_classPrivateFieldGet(_uiManager4,this)._signal});event.preventDefault();}}function _get_currentEditorType(_this105){return _editorTypes2._.get(_classPrivateFieldGet(_uiManager4,_this105).getMode());}function _createNewEditor(params){var editorType=_classPrivateGetter(_AnnotationEditorLayer_brand,this,_get_currentEditorType);return editorType?new editorType.prototype.constructor(params):null;}function _getCenterPoint(){var _this$div$getBounding2=this.div.getBoundingClientRect(),x=_this$div$getBounding2.x,y=_this$div$getBounding2.y,width=_this$div$getBounding2.width,height=_this$div$getBounding2.height;var tlX=Math.max(0,x);var tlY=Math.max(0,y);var brX=Math.min(window.innerWidth,x+width);var brY=Math.min(window.innerHeight,y+height);var centerX=(tlX+brX)/2-x;var centerY=(tlY+brY)/2-y;var _ref154=this.viewport.rotation%180===0?[centerX,centerY]:[centerY,centerX],_ref155=_slicedToArray(_ref154,2),offsetX=_ref155[0],offsetY=_ref155[1];return{offsetX:offsetX,offsetY:offsetY};}function _cleanup2(){var _iterator193=_createForOfIteratorHelper(_classPrivateFieldGet(_editors,this).values()),_step193;try{for(_iterator193.s();!(_step193=_iterator193.n()).done;){var editor=_step193.value;if(editor.isEmpty()){editor.remove();}}}catch(err){_iterator193.e(err);}finally{_iterator193.f();}}_defineProperty(_AnnotationEditorLayer,"_initialized",false);var _editorTypes2={_:new Map([FreeTextEditor,InkEditor,StampEditor,HighlightEditor,SignatureEditor].map(function(type){return[type._editorType,type];}))};;// ./src/display/draw_layer.js\nvar _parent2=/*#__PURE__*/new WeakMap();var _mapping=/*#__PURE__*/new WeakMap();var _toUpdate=/*#__PURE__*/new WeakMap();var _DrawLayer_brand=/*#__PURE__*/new WeakSet();var _DrawLayer=/*#__PURE__*/function(){function _DrawLayer(_ref134){var pageIndex=_ref134.pageIndex;_classCallCheck(this,_DrawLayer);_classPrivateMethodInitSpec(this,_DrawLayer_brand);_classPrivateFieldInitSpec(this,_parent2,null);_classPrivateFieldInitSpec(this,_mapping,new Map());_classPrivateFieldInitSpec(this,_toUpdate,new Map());this.pageIndex=pageIndex;}return _createClass(_DrawLayer,[{key:"setParent",value:function setParent(parent){if(!_classPrivateFieldGet(_parent2,this)){_classPrivateFieldSet(_parent2,this,parent);return;}if(_classPrivateFieldGet(_parent2,this)!==parent){if(_classPrivateFieldGet(_mapping,this).size>0){var _iterator169=_createForOfIteratorHelper(_classPrivateFieldGet(_mapping,this).values()),_step169;try{for(_iterator169.s();!(_step169=_iterator169.n()).done;){var root=_step169.value;root.remove();parent.append(root);}}catch(err){_iterator169.e(err);}finally{_iterator169.f();}}_classPrivateFieldSet(_parent2,this,parent);}}},{key:"draw",value:function draw(properties){var _DrawLayer$id,_DrawLayer$id2;var isPathUpdatable=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var hasClip=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var id=(_id12._=(_DrawLayer$id=_id12._,_DrawLayer$id2=_DrawLayer$id++,_DrawLayer$id),_DrawLayer$id2);var root=_assertClassBrand(_DrawLayer_brand,this,_createSVG2).call(this);var defs=_DrawLayer._svgFactory.createElement("defs");root.append(defs);var path=_DrawLayer._svgFactory.createElement("path");defs.append(path);var pathId="path_p".concat(this.pageIndex,"_").concat(id);path.setAttribute("id",pathId);path.setAttribute("vector-effect","non-scaling-stroke");if(isPathUpdatable){_classPrivateFieldGet(_toUpdate,this).set(id,path);}var clipPathId=hasClip?_assertClassBrand(_DrawLayer_brand,this,_createClipPath).call(this,defs,pathId):null;var use=_DrawLayer._svgFactory.createElement("use");root.append(use);use.setAttribute("href","#".concat(pathId));this.updateProperties(root,properties);_classPrivateFieldGet(_mapping,this).set(id,root);return{id:id,clipPathId:"url(#".concat(clipPathId,")")};}},{key:"drawOutline",value:function drawOutline(properties,mustRemoveSelfIntersections){var _DrawLayer$id3,_DrawLayer$id4;var id=(_id12._=(_DrawLayer$id3=_id12._,_DrawLayer$id4=_DrawLayer$id3++,_DrawLayer$id3),_DrawLayer$id4);var root=_assertClassBrand(_DrawLayer_brand,this,_createSVG2).call(this);var defs=_DrawLayer._svgFactory.createElement("defs");root.append(defs);var path=_DrawLayer._svgFactory.createElement("path");defs.append(path);var pathId="path_p".concat(this.pageIndex,"_").concat(id);path.setAttribute("id",pathId);path.setAttribute("vector-effect","non-scaling-stroke");var maskId;if(mustRemoveSelfIntersections){var mask=_DrawLayer._svgFactory.createElement("mask");defs.append(mask);maskId="mask_p".concat(this.pageIndex,"_").concat(id);mask.setAttribute("id",maskId);mask.setAttribute("maskUnits","objectBoundingBox");var rect=_DrawLayer._svgFactory.createElement("rect");mask.append(rect);rect.setAttribute("width","1");rect.setAttribute("height","1");rect.setAttribute("fill","white");var use=_DrawLayer._svgFactory.createElement("use");mask.append(use);use.setAttribute("href","#".concat(pathId));use.setAttribute("stroke","none");use.setAttribute("fill","black");use.setAttribute("fill-rule","nonzero");use.classList.add("mask");}var use1=_DrawLayer._svgFactory.createElement("use");root.append(use1);use1.setAttribute("href","#".concat(pathId));if(maskId){use1.setAttribute("mask","url(#".concat(maskId,")"));}var use2=use1.cloneNode();root.append(use2);use1.classList.add("mainOutline");use2.classList.add("secondaryOutline");this.updateProperties(root,properties);_classPrivateFieldGet(_mapping,this).set(id,root);return id;}},{key:"finalizeDraw",value:function finalizeDraw(id,properties){_classPrivateFieldGet(_toUpdate,this)["delete"](id);this.updateProperties(id,properties);}},{key:"updateProperties",value:function updateProperties(elementOrId,properties){if(!properties){return;}var root=properties.root,bbox=properties.bbox,rootClass=properties.rootClass,path=properties.path;var element=typeof elementOrId==="number"?_classPrivateFieldGet(_mapping,this).get(elementOrId):elementOrId;if(!element){return;}if(root){_assertClassBrand(_DrawLayer_brand,this,_updateProperties).call(this,element,root);}if(bbox){_setBox.call(_DrawLayer,element,bbox);}if(rootClass){var classList=element.classList;for(var _i33=0,_Object$entries8=Object.entries(rootClass);_i33<_Object$entries8.length;_i33++){var _Object$entries8$_i=_slicedToArray(_Object$entries8[_i33],2),className=_Object$entries8$_i[0],value=_Object$entries8$_i[1];classList.toggle(className,value);}}if(path){var defs=element.firstChild;var pathElement=defs.firstChild;_assertClassBrand(_DrawLayer_brand,this,_updateProperties).call(this,pathElement,path);}}},{key:"updateParent",value:function updateParent(id,layer){if(layer===this){return;}var root=_classPrivateFieldGet(_mapping,this).get(id);if(!root){return;}_classPrivateFieldGet(_parent2,layer).append(root);_classPrivateFieldGet(_mapping,this)["delete"](id);_classPrivateFieldGet(_mapping,layer).set(id,root);}},{key:"remove",value:function remove(id){_classPrivateFieldGet(_toUpdate,this)["delete"](id);if(_classPrivateFieldGet(_parent2,this)===null){return;}_classPrivateFieldGet(_mapping,this).get(id).remove();_classPrivateFieldGet(_mapping,this)["delete"](id);}},{key:"destroy",value:function destroy(){_classPrivateFieldSet(_parent2,this,null);var _iterator170=_createForOfIteratorHelper(_classPrivateFieldGet(_mapping,this).values()),_step170;try{for(_iterator170.s();!(_step170=_iterator170.n()).done;){var root=_step170.value;root.remove();}}catch(err){_iterator170.e(err);}finally{_iterator170.f();}_classPrivateFieldGet(_mapping,this).clear();_classPrivateFieldGet(_toUpdate,this).clear();}}],[{key:"_svgFactory",get:function get(){return _shadow(this,"_svgFactory",new _DOMSVGFactory());}}]);}();_DrawLayer2=_DrawLayer;function _setBox(element,_ref156){var _ref157=_slicedToArray(_ref156,4),x=_ref157[0],y=_ref157[1],width=_ref157[2],height=_ref157[3];var style=element.style;style.top="".concat(100*y,"%");style.left="".concat(100*x,"%");style.width="".concat(100*width,"%");style.height="".concat(100*height,"%");}function _createSVG2(){var svg=_DrawLayer2._svgFactory.create(1,1,true);_classPrivateFieldGet(_parent2,this).append(svg);svg.setAttribute("aria-hidden",true);return svg;}function _createClipPath(defs,pathId){var clipPath=_DrawLayer2._svgFactory.createElement("clipPath");defs.append(clipPath);var clipPathId="clip_".concat(pathId);clipPath.setAttribute("id",clipPathId);clipPath.setAttribute("clipPathUnits","objectBoundingBox");var clipPathUse=_DrawLayer2._svgFactory.createElement("use");clipPath.append(clipPathUse);clipPathUse.setAttribute("href","#".concat(pathId));clipPathUse.classList.add("clip");return clipPathId;}function _updateProperties(element,properties){for(var _i45=0,_Object$entries9=Object.entries(properties);_i45<_Object$entries9.length;_i45++){var _Object$entries9$_i=_slicedToArray(_Object$entries9[_i45],2),key=_Object$entries9$_i[0],value=_Object$entries9$_i[1];if(value===null){element.removeAttribute(key);}else{element.setAttribute(key,value);}}}var _id12={_:0};;// ./src/pdf.js\nvar pdfjsVersion="5.0.0";var pdfjsBuild="a5ccc2a";{globalThis.pdfjsTestingUtils={HighlightOutliner:HighlightOutliner};}var __webpack_exports__AbortException=exports.AbortException=__nested_webpack_exports__.AbortException;var __webpack_exports__AnnotationEditorLayer=exports.AnnotationEditorLayer=__nested_webpack_exports__.AnnotationEditorLayer;var __webpack_exports__AnnotationEditorParamsType=exports.AnnotationEditorParamsType=__nested_webpack_exports__.AnnotationEditorParamsType;var __webpack_exports__AnnotationEditorType=exports.AnnotationEditorType=__nested_webpack_exports__.AnnotationEditorType;var __webpack_exports__AnnotationEditorUIManager=exports.AnnotationEditorUIManager=__nested_webpack_exports__.AnnotationEditorUIManager;var __webpack_exports__AnnotationLayer=exports.AnnotationLayer=__nested_webpack_exports__.AnnotationLayer;var __webpack_exports__AnnotationMode=exports.AnnotationMode=__nested_webpack_exports__.AnnotationMode;var __webpack_exports__AnnotationType=exports.AnnotationType=__nested_webpack_exports__.AnnotationType;var __webpack_exports__ColorPicker=exports.ColorPicker=__nested_webpack_exports__.ColorPicker;var __webpack_exports__DOMSVGFactory=exports.DOMSVGFactory=__nested_webpack_exports__.DOMSVGFactory;var __webpack_exports__DrawLayer=exports.DrawLayer=__nested_webpack_exports__.DrawLayer;var __webpack_exports__FeatureTest=exports.FeatureTest=__nested_webpack_exports__.FeatureTest;var __webpack_exports__GlobalWorkerOptions=exports.GlobalWorkerOptions=__nested_webpack_exports__.GlobalWorkerOptions;var __webpack_exports__ImageKind=exports.ImageKind=__nested_webpack_exports__.ImageKind;var __webpack_exports__InvalidPDFException=exports.InvalidPDFException=__nested_webpack_exports__.InvalidPDFException;var __webpack_exports__OPS=exports.OPS=__nested_webpack_exports__.OPS;var __webpack_exports__OutputScale=exports.OutputScale=__nested_webpack_exports__.OutputScale;var __webpack_exports__PDFDataRangeTransport=exports.PDFDataRangeTransport=__nested_webpack_exports__.PDFDataRangeTransport;var __webpack_exports__PDFDateString=exports.PDFDateString=__nested_webpack_exports__.PDFDateString;var __webpack_exports__PDFWorker=exports.PDFWorker=__nested_webpack_exports__.PDFWorker;var __webpack_exports__PasswordResponses=exports.PasswordResponses=__nested_webpack_exports__.PasswordResponses;var __webpack_exports__PermissionFlag=exports.PermissionFlag=__nested_webpack_exports__.PermissionFlag;var __webpack_exports__PixelsPerInch=exports.PixelsPerInch=__nested_webpack_exports__.PixelsPerInch;var __webpack_exports__RenderingCancelledException=exports.RenderingCancelledException=__nested_webpack_exports__.RenderingCancelledException;var __webpack_exports__ResponseException=exports.ResponseException=__nested_webpack_exports__.ResponseException;var __webpack_exports__SignatureExtractor=exports.SignatureExtractor=__nested_webpack_exports__.SignatureExtractor;var __webpack_exports__SupportedImageMimeTypes=exports.SupportedImageMimeTypes=__nested_webpack_exports__.SupportedImageMimeTypes;var __webpack_exports__TextLayer=exports.TextLayer=__nested_webpack_exports__.TextLayer;var __webpack_exports__TouchManager=exports.TouchManager=__nested_webpack_exports__.TouchManager;var __webpack_exports__Util=exports.Util=__nested_webpack_exports__.Util;var __webpack_exports__VerbosityLevel=exports.VerbosityLevel=__nested_webpack_exports__.VerbosityLevel;var __webpack_exports__XfaLayer=exports.XfaLayer=__nested_webpack_exports__.XfaLayer;var __webpack_exports__build=exports.build=__nested_webpack_exports__.build;var __webpack_exports__createValidAbsoluteUrl=exports.createValidAbsoluteUrl=__nested_webpack_exports__.createValidAbsoluteUrl;var __webpack_exports__fetchData=exports.fetchData=__nested_webpack_exports__.fetchData;var __webpack_exports__getDocument=exports.getDocument=__nested_webpack_exports__.getDocument;var __webpack_exports__getFilenameFromUrl=exports.getFilenameFromUrl=__nested_webpack_exports__.getFilenameFromUrl;var __webpack_exports__getPdfFilenameFromUrl=exports.getPdfFilenameFromUrl=__nested_webpack_exports__.getPdfFilenameFromUrl;var __webpack_exports__getUuid=exports.getUuid=__nested_webpack_exports__.getUuid;var __webpack_exports__getXfaPageViewport=exports.getXfaPageViewport=__nested_webpack_exports__.getXfaPageViewport;var __webpack_exports__isDataScheme=exports.isDataScheme=__nested_webpack_exports__.isDataScheme;var __webpack_exports__isPdfFile=exports.isPdfFile=__nested_webpack_exports__.isPdfFile;var __webpack_exports__noContextMenu=exports.noContextMenu=__nested_webpack_exports__.noContextMenu;var __webpack_exports__normalizeUnicode=exports.normalizeUnicode=__nested_webpack_exports__.normalizeUnicode;var __webpack_exports__setLayerDimensions=exports.setLayerDimensions=__nested_webpack_exports__.setLayerDimensions;var __webpack_exports__shadow=exports.shadow=__nested_webpack_exports__.shadow;var __webpack_exports__stopEvent=exports.stopEvent=__nested_webpack_exports__.stopEvent;var __webpack_exports__version=exports.version=__nested_webpack_exports__.version;\n//# sourceMappingURL=pdf.js.map\n\n\n//# sourceURL=webpack://ViewerJS/../pdfjs-local/build/dist/build/pdf.js?')},13451:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar $findLastIndex = (__webpack_require__(43839).findLastIndex);\nvar addToUnscopables = __webpack_require__(6469);\n\n// `Array.prototype.findLastIndex` method\n// https://tc39.es/ecma262/#sec-array.prototype.findlastindex\n$({ target: 'Array', proto: true }, {\n  findLastIndex: function findLastIndex(callbackfn /* , that = undefined */) {\n    return $findLastIndex(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\naddToUnscopables('findLastIndex');\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array.find-last-index.js?")},13579:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar iterate = __webpack_require__(72652);\nvar aCallable = __webpack_require__(79306);\nvar anObject = __webpack_require__(28551);\nvar getIteratorDirect = __webpack_require__(1767);\n\n// `Iterator.prototype.some` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.some\n$({ target: 'Iterator', proto: true, real: true }, {\n  some: function some(predicate) {\n    anObject(this);\n    aCallable(predicate);\n    var record = getIteratorDirect(this);\n    var counter = 0;\n    return iterate(record, function (value, stop) {\n      if (predicate(value, counter++)) return stop();\n    }, { IS_RECORD: true, INTERRUPTED: true }).stopped;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.iterator.some.js?")},13609:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar toObject = __webpack_require__(48981);\nvar lengthOfArrayLike = __webpack_require__(26198);\nvar setArrayLength = __webpack_require__(34527);\nvar deletePropertyOrThrow = __webpack_require__(84606);\nvar doesNotExceedSafeInteger = __webpack_require__(96837);\n\n// IE8-\nvar INCORRECT_RESULT = [].unshift(0) !== 1;\n\n// V8 ~ Chrome < 71 and Safari <= 15.4, FF < 23 throws InternalError\nvar properErrorOnNonWritableLength = function () {\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).unshift();\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n};\n\nvar FORCED = INCORRECT_RESULT || !properErrorOnNonWritableLength();\n\n// `Array.prototype.unshift` method\n// https://tc39.es/ecma262/#sec-array.prototype.unshift\n$({ target: 'Array', proto: true, arity: 1, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  unshift: function unshift(item) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var argCount = arguments.length;\n    if (argCount) {\n      doesNotExceedSafeInteger(len + argCount);\n      var k = len;\n      while (k--) {\n        var to = k + argCount;\n        if (k in O) O[to] = O[k];\n        else deletePropertyOrThrow(O, to);\n      }\n      for (var j = 0; j < argCount; j++) {\n        O[j] = arguments[j];\n      }\n    } return setArrayLength(O, len + argCount);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array.unshift.js?")},13611:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar globalThis = __webpack_require__(44576);\nvar defineBuiltInAccessor = __webpack_require__(62106);\nvar DESCRIPTORS = __webpack_require__(43724);\n\nvar $TypeError = TypeError;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\nvar INCORRECT_VALUE = globalThis.self !== globalThis;\n\n// `self` getter\n// https://html.spec.whatwg.org/multipage/window-object.html#dom-self\ntry {\n  if (DESCRIPTORS) {\n    // eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\n    var descriptor = Object.getOwnPropertyDescriptor(globalThis, 'self');\n    // some engines have `self`, but with incorrect descriptor\n    // https://github.com/denoland/deno/issues/15765\n    if (INCORRECT_VALUE || !descriptor || !descriptor.get || !descriptor.enumerable) {\n      defineBuiltInAccessor(globalThis, 'self', {\n        get: function self() {\n          return globalThis;\n        },\n        set: function self(value) {\n          if (this !== globalThis) throw new $TypeError('Illegal invocation');\n          defineProperty(globalThis, 'self', {\n            value: value,\n            writable: true,\n            configurable: true,\n            enumerable: true\n          });\n        },\n        configurable: true,\n        enumerable: true\n      });\n    }\n  } else $({ global: true, simple: true, forced: INCORRECT_VALUE }, {\n    self: globalThis\n  });\n} catch (error) { /* empty */ }\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/web.self.js?")},13709:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar userAgent = __webpack_require__(82839);\n\nvar firefox = userAgent.match(/firefox\\/(\\d+)/i);\n\nmodule.exports = !!firefox && +firefox[1];\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/environment-ff-version.js?")},13763:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar UA = __webpack_require__(82839);\n\nmodule.exports = /MSIE|Trident/.test(UA);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/environment-is-ie-or-edge.js?")},13925:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar isObject = __webpack_require__(20034);\n\nmodule.exports = function (argument) {\n  return isObject(argument) || argument === null;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/is-possible-prototype.js?")},13972:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(33853);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.set.is-disjoint-from.v2.js?")},14601:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar getBuiltIn = __webpack_require__(97751);\nvar hasOwn = __webpack_require__(39297);\nvar createNonEnumerableProperty = __webpack_require__(66699);\nvar isPrototypeOf = __webpack_require__(1625);\nvar setPrototypeOf = __webpack_require__(52967);\nvar copyConstructorProperties = __webpack_require__(77740);\nvar proxyAccessor = __webpack_require__(11056);\nvar inheritIfRequired = __webpack_require__(23167);\nvar normalizeStringArgument = __webpack_require__(32603);\nvar installErrorCause = __webpack_require__(77584);\nvar installErrorStack = __webpack_require__(80747);\nvar DESCRIPTORS = __webpack_require__(43724);\nvar IS_PURE = __webpack_require__(96395);\n\nmodule.exports = function (FULL_NAME, wrapper, FORCED, IS_AGGREGATE_ERROR) {\n  var STACK_TRACE_LIMIT = 'stackTraceLimit';\n  var OPTIONS_POSITION = IS_AGGREGATE_ERROR ? 2 : 1;\n  var path = FULL_NAME.split('.');\n  var ERROR_NAME = path[path.length - 1];\n  var OriginalError = getBuiltIn.apply(null, path);\n\n  if (!OriginalError) return;\n\n  var OriginalErrorPrototype = OriginalError.prototype;\n\n  // V8 9.3- bug https://bugs.chromium.org/p/v8/issues/detail?id=12006\n  if (!IS_PURE && hasOwn(OriginalErrorPrototype, 'cause')) delete OriginalErrorPrototype.cause;\n\n  if (!FORCED) return OriginalError;\n\n  var BaseError = getBuiltIn('Error');\n\n  var WrappedError = wrapper(function (a, b) {\n    var message = normalizeStringArgument(IS_AGGREGATE_ERROR ? b : a, undefined);\n    var result = IS_AGGREGATE_ERROR ? new OriginalError(a) : new OriginalError();\n    if (message !== undefined) createNonEnumerableProperty(result, 'message', message);\n    installErrorStack(result, WrappedError, result.stack, 2);\n    if (this && isPrototypeOf(OriginalErrorPrototype, this)) inheritIfRequired(result, this, WrappedError);\n    if (arguments.length > OPTIONS_POSITION) installErrorCause(result, arguments[OPTIONS_POSITION]);\n    return result;\n  });\n\n  WrappedError.prototype = OriginalErrorPrototype;\n\n  if (ERROR_NAME !== 'Error') {\n    if (setPrototypeOf) setPrototypeOf(WrappedError, BaseError);\n    else copyConstructorProperties(WrappedError, BaseError, { name: true });\n  } else if (DESCRIPTORS && STACK_TRACE_LIMIT in OriginalError) {\n    proxyAccessor(WrappedError, OriginalError, STACK_TRACE_LIMIT);\n    proxyAccessor(WrappedError, OriginalError, 'prepareStackTrace');\n  }\n\n  copyConstructorProperties(WrappedError, OriginalError);\n\n  if (!IS_PURE) try {\n    // Safari 13- bug: WebAssembly errors does not have a proper `.name`\n    if (OriginalErrorPrototype.name !== ERROR_NAME) {\n      createNonEnumerableProperty(OriginalErrorPrototype, 'name', ERROR_NAME);\n    }\n    OriginalErrorPrototype.constructor = WrappedError;\n  } catch (error) { /* empty */ }\n\n  return WrappedError;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/wrap-error-constructor-with-cause.js?")},14603:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar defineBuiltIn = __webpack_require__(36840);\nvar uncurryThis = __webpack_require__(79504);\nvar toString = __webpack_require__(655);\nvar validateArgumentsLength = __webpack_require__(22812);\n\nvar $URLSearchParams = URLSearchParams;\nvar URLSearchParamsPrototype = $URLSearchParams.prototype;\nvar append = uncurryThis(URLSearchParamsPrototype.append);\nvar $delete = uncurryThis(URLSearchParamsPrototype['delete']);\nvar forEach = uncurryThis(URLSearchParamsPrototype.forEach);\nvar push = uncurryThis([].push);\nvar params = new $URLSearchParams('a=1&a=2&b=3');\n\nparams['delete']('a', 1);\n// `undefined` case is a Chromium 117 bug\n// https://bugs.chromium.org/p/v8/issues/detail?id=14222\nparams['delete']('b', undefined);\n\nif (params + '' !== 'a=2') {\n  defineBuiltIn(URLSearchParamsPrototype, 'delete', function (name /* , value */) {\n    var length = arguments.length;\n    var $value = length < 2 ? undefined : arguments[1];\n    if (length && $value === undefined) return $delete(this, name);\n    var entries = [];\n    forEach(this, function (v, k) { // also validates `this`\n      push(entries, { key: k, value: v });\n    });\n    validateArgumentsLength(length, 1);\n    var key = toString(name);\n    var value = toString($value);\n    var index = 0;\n    var dindex = 0;\n    var found = false;\n    var entriesLength = entries.length;\n    var entry;\n    while (index < entriesLength) {\n      entry = entries[index++];\n      if (found || entry.key === key) {\n        found = true;\n        $delete(this, entry.key);\n      } else dindex++;\n    }\n    while (dindex < entriesLength) {\n      entry = entries[dindex++];\n      if (!(entry.key === key && entry.value === value)) append(this, entry.key, entry.value);\n    }\n  }, { enumerable: true, unsafe: true });\n}\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/web.url-search-params.delete.js?")},14628:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar newPromiseCapabilityModule = __webpack_require__(36043);\n\n// `Promise.withResolvers` method\n// https://tc39.es/ecma262/#sec-promise.withResolvers\n$({ target: 'Promise', stat: true }, {\n  withResolvers: function withResolvers() {\n    var promiseCapability = newPromiseCapabilityModule.f(this);\n    return {\n      promise: promiseCapability.promise,\n      resolve: promiseCapability.resolve,\n      reject: promiseCapability.reject\n    };\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.promise.with-resolvers.js?")},14905:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar call = __webpack_require__(69565);\nvar aCallable = __webpack_require__(79306);\nvar anObject = __webpack_require__(28551);\nvar isObject = __webpack_require__(20034);\nvar getBuiltIn = __webpack_require__(97751);\nvar getIteratorDirect = __webpack_require__(1767);\nvar closeAsyncIteration = __webpack_require__(20772);\n\nvar Promise = getBuiltIn('Promise');\nvar $TypeError = TypeError;\n\n// `AsyncIterator.prototype.reduce` method\n// https://github.com/tc39/proposal-async-iterator-helpers\n$({ target: 'AsyncIterator', proto: true, real: true }, {\n  reduce: function reduce(reducer /* , initialValue */) {\n    anObject(this);\n    aCallable(reducer);\n    var record = getIteratorDirect(this);\n    var iterator = record.iterator;\n    var next = record.next;\n    var noInitial = arguments.length < 2;\n    var accumulator = noInitial ? undefined : arguments[1];\n    var counter = 0;\n\n    return new Promise(function (resolve, reject) {\n      var ifAbruptCloseAsyncIterator = function (error) {\n        closeAsyncIteration(iterator, reject, error, reject);\n      };\n\n      var loop = function () {\n        try {\n          Promise.resolve(anObject(call(next, iterator))).then(function (step) {\n            try {\n              if (anObject(step).done) {\n                noInitial ? reject(new $TypeError('Reduce of empty iterator with no initial value')) : resolve(accumulator);\n              } else {\n                var value = step.value;\n                if (noInitial) {\n                  noInitial = false;\n                  accumulator = value;\n                  loop();\n                } else try {\n                  var result = reducer(accumulator, value, counter);\n\n                  var handler = function ($result) {\n                    accumulator = $result;\n                    loop();\n                  };\n\n                  if (isObject(result)) Promise.resolve(result).then(handler, ifAbruptCloseAsyncIterator);\n                  else handler(result);\n                } catch (error3) { ifAbruptCloseAsyncIterator(error3); }\n              }\n              counter++;\n            } catch (error2) { reject(error2); }\n          }, reject);\n        } catch (error) { reject(error); }\n      };\n\n      loop();\n    });\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.async-iterator.reduce.js?")},15024:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar symmetricDifference = __webpack_require__(83650);\nvar setMethodAcceptSetLike = __webpack_require__(84916);\n\n// `Set.prototype.symmetricDifference` method\n// https://tc39.es/ecma262/#sec-set.prototype.symmetricdifference\n$({ target: 'Set', proto: true, real: true, forced: !setMethodAcceptSetLike('symmetricDifference') }, {\n  symmetricDifference: symmetricDifference\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.set.symmetric-difference.v2.js?")},15086:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar $some = (__webpack_require__(59213).some);\nvar arrayMethodIsStrict = __webpack_require__(34598);\n\nvar STRICT_METHOD = arrayMethodIsStrict('some');\n\n// `Array.prototype.some` method\n// https://tc39.es/ecma262/#sec-array.prototype.some\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD }, {\n  some: function some(callbackfn /* , thisArg */) {\n    return $some(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array.some.js?")},15218:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// https://github.com/tc39/proposal-array-from-async\n__webpack_require__(26148);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/proposals/array-from-async-stage-2.js?")},15472:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar globalThis = __webpack_require__(44576);\nvar setToStringTag = __webpack_require__(10687);\n\n$({ global: true }, { Reflect: {} });\n\n// Reflect[@@toStringTag] property\n// https://tc39.es/ecma262/#sec-reflect-@@tostringtag\nsetToStringTag(globalThis.Reflect, 'Reflect', true);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.reflect.to-string-tag.js?")},15486:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// https://github.com/tc39/proposal-iterator-helpers\n__webpack_require__(33811);\n__webpack_require__(29150);\n__webpack_require__(74648);\n__webpack_require__(17333);\n__webpack_require__(3064);\n__webpack_require__(32679);\n__webpack_require__(9920);\n__webpack_require__(46967);\n__webpack_require__(41393);\n__webpack_require__(14905);\n__webpack_require__(8159);\n__webpack_require__(39320);\n__webpack_require__(86994);\n__webpack_require__(98992);\n__webpack_require__(64743);\n__webpack_require__(23215);\n__webpack_require__(54520);\n__webpack_require__(72577);\n__webpack_require__(30670);\n__webpack_require__(3949);\n__webpack_require__(45882);\n__webpack_require__(81454);\n__webpack_require__(8872);\n__webpack_require__(37550);\n__webpack_require__(27413);\n__webpack_require__(41795);\n__webpack_require__(81730);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/proposals/iterator-helpers-stage-3.js?")},15575:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar globalThis = __webpack_require__(44576);\nvar schedulersFix = __webpack_require__(79472);\n\nvar setInterval = schedulersFix(globalThis.setInterval, true);\n\n// Bun / IE9- setInterval additional parameters fix\n// https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-setinterval\n$({ global: true, bind: true, forced: globalThis.setInterval !== setInterval }, {\n  setInterval: setInterval\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/web.set-interval.js?")},15617:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar floatRound = __webpack_require__(33164);\n\nvar FLOAT32_EPSILON = 1.1920928955078125e-7; // 2 ** -23;\nvar FLOAT32_MAX_VALUE = 3.4028234663852886e+38; // 2 ** 128 - 2 ** 104\nvar FLOAT32_MIN_VALUE = 1.1754943508222875e-38; // 2 ** -126;\n\n// `Math.fround` method implementation\n// https://tc39.es/ecma262/#sec-math.fround\n// eslint-disable-next-line es/no-math-fround -- safe\nmodule.exports = Math.fround || function fround(x) {\n  return floatRound(x, FLOAT32_EPSILON, FLOAT32_MAX_VALUE, FLOAT32_MIN_VALUE);\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/math-fround.js?")},15652:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// FF26- bug: ArrayBuffers are non-extensible, but Object.isExtensible does not report it\nvar fails = __webpack_require__(79039);\n\nmodule.exports = fails(function () {\n  if (typeof ArrayBuffer == 'function') {\n    var buffer = new ArrayBuffer(8);\n    // eslint-disable-next-line es/no-object-isextensible, es/no-object-defineproperty -- safe\n    if (Object.isExtensible(buffer)) Object.defineProperty(buffer, 'a', { value: 8 });\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/array-buffer-non-extensible.js?")},15823:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar globalThis = __webpack_require__(44576);\nvar call = __webpack_require__(69565);\nvar DESCRIPTORS = __webpack_require__(43724);\nvar TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS = __webpack_require__(72805);\nvar ArrayBufferViewCore = __webpack_require__(94644);\nvar ArrayBufferModule = __webpack_require__(66346);\nvar anInstance = __webpack_require__(90679);\nvar createPropertyDescriptor = __webpack_require__(6980);\nvar createNonEnumerableProperty = __webpack_require__(66699);\nvar isIntegralNumber = __webpack_require__(2087);\nvar toLength = __webpack_require__(18014);\nvar toIndex = __webpack_require__(57696);\nvar toOffset = __webpack_require__(58229);\nvar toUint8Clamped = __webpack_require__(58319);\nvar toPropertyKey = __webpack_require__(56969);\nvar hasOwn = __webpack_require__(39297);\nvar classof = __webpack_require__(36955);\nvar isObject = __webpack_require__(20034);\nvar isSymbol = __webpack_require__(10757);\nvar create = __webpack_require__(2360);\nvar isPrototypeOf = __webpack_require__(1625);\nvar setPrototypeOf = __webpack_require__(52967);\nvar getOwnPropertyNames = (__webpack_require__(38480).f);\nvar typedArrayFrom = __webpack_require__(43251);\nvar forEach = (__webpack_require__(59213).forEach);\nvar setSpecies = __webpack_require__(87633);\nvar defineBuiltInAccessor = __webpack_require__(62106);\nvar definePropertyModule = __webpack_require__(24913);\nvar getOwnPropertyDescriptorModule = __webpack_require__(77347);\nvar arrayFromConstructorAndList = __webpack_require__(35370);\nvar InternalStateModule = __webpack_require__(91181);\nvar inheritIfRequired = __webpack_require__(23167);\n\nvar getInternalState = InternalStateModule.get;\nvar setInternalState = InternalStateModule.set;\nvar enforceInternalState = InternalStateModule.enforce;\nvar nativeDefineProperty = definePropertyModule.f;\nvar nativeGetOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\nvar RangeError = globalThis.RangeError;\nvar ArrayBuffer = ArrayBufferModule.ArrayBuffer;\nvar ArrayBufferPrototype = ArrayBuffer.prototype;\nvar DataView = ArrayBufferModule.DataView;\nvar NATIVE_ARRAY_BUFFER_VIEWS = ArrayBufferViewCore.NATIVE_ARRAY_BUFFER_VIEWS;\nvar TYPED_ARRAY_TAG = ArrayBufferViewCore.TYPED_ARRAY_TAG;\nvar TypedArray = ArrayBufferViewCore.TypedArray;\nvar TypedArrayPrototype = ArrayBufferViewCore.TypedArrayPrototype;\nvar isTypedArray = ArrayBufferViewCore.isTypedArray;\nvar BYTES_PER_ELEMENT = 'BYTES_PER_ELEMENT';\nvar WRONG_LENGTH = 'Wrong length';\n\nvar addGetter = function (it, key) {\n  defineBuiltInAccessor(it, key, {\n    configurable: true,\n    get: function () {\n      return getInternalState(this)[key];\n    }\n  });\n};\n\nvar isArrayBuffer = function (it) {\n  var klass;\n  return isPrototypeOf(ArrayBufferPrototype, it) || (klass = classof(it)) === 'ArrayBuffer' || klass === 'SharedArrayBuffer';\n};\n\nvar isTypedArrayIndex = function (target, key) {\n  return isTypedArray(target)\n    && !isSymbol(key)\n    && key in target\n    && isIntegralNumber(+key)\n    && key >= 0;\n};\n\nvar wrappedGetOwnPropertyDescriptor = function getOwnPropertyDescriptor(target, key) {\n  key = toPropertyKey(key);\n  return isTypedArrayIndex(target, key)\n    ? createPropertyDescriptor(2, target[key])\n    : nativeGetOwnPropertyDescriptor(target, key);\n};\n\nvar wrappedDefineProperty = function defineProperty(target, key, descriptor) {\n  key = toPropertyKey(key);\n  if (isTypedArrayIndex(target, key)\n    && isObject(descriptor)\n    && hasOwn(descriptor, 'value')\n    && !hasOwn(descriptor, 'get')\n    && !hasOwn(descriptor, 'set')\n    // TODO: add validation descriptor w/o calling accessors\n    && !descriptor.configurable\n    && (!hasOwn(descriptor, 'writable') || descriptor.writable)\n    && (!hasOwn(descriptor, 'enumerable') || descriptor.enumerable)\n  ) {\n    target[key] = descriptor.value;\n    return target;\n  } return nativeDefineProperty(target, key, descriptor);\n};\n\nif (DESCRIPTORS) {\n  if (!NATIVE_ARRAY_BUFFER_VIEWS) {\n    getOwnPropertyDescriptorModule.f = wrappedGetOwnPropertyDescriptor;\n    definePropertyModule.f = wrappedDefineProperty;\n    addGetter(TypedArrayPrototype, 'buffer');\n    addGetter(TypedArrayPrototype, 'byteOffset');\n    addGetter(TypedArrayPrototype, 'byteLength');\n    addGetter(TypedArrayPrototype, 'length');\n  }\n\n  $({ target: 'Object', stat: true, forced: !NATIVE_ARRAY_BUFFER_VIEWS }, {\n    getOwnPropertyDescriptor: wrappedGetOwnPropertyDescriptor,\n    defineProperty: wrappedDefineProperty\n  });\n\n  module.exports = function (TYPE, wrapper, CLAMPED) {\n    var BYTES = TYPE.match(/\\d+/)[0] / 8;\n    var CONSTRUCTOR_NAME = TYPE + (CLAMPED ? 'Clamped' : '') + 'Array';\n    var GETTER = 'get' + TYPE;\n    var SETTER = 'set' + TYPE;\n    var NativeTypedArrayConstructor = globalThis[CONSTRUCTOR_NAME];\n    var TypedArrayConstructor = NativeTypedArrayConstructor;\n    var TypedArrayConstructorPrototype = TypedArrayConstructor && TypedArrayConstructor.prototype;\n    var exported = {};\n\n    var getter = function (that, index) {\n      var data = getInternalState(that);\n      return data.view[GETTER](index * BYTES + data.byteOffset, true);\n    };\n\n    var setter = function (that, index, value) {\n      var data = getInternalState(that);\n      data.view[SETTER](index * BYTES + data.byteOffset, CLAMPED ? toUint8Clamped(value) : value, true);\n    };\n\n    var addElement = function (that, index) {\n      nativeDefineProperty(that, index, {\n        get: function () {\n          return getter(this, index);\n        },\n        set: function (value) {\n          return setter(this, index, value);\n        },\n        enumerable: true\n      });\n    };\n\n    if (!NATIVE_ARRAY_BUFFER_VIEWS) {\n      TypedArrayConstructor = wrapper(function (that, data, offset, $length) {\n        anInstance(that, TypedArrayConstructorPrototype);\n        var index = 0;\n        var byteOffset = 0;\n        var buffer, byteLength, length;\n        if (!isObject(data)) {\n          length = toIndex(data);\n          byteLength = length * BYTES;\n          buffer = new ArrayBuffer(byteLength);\n        } else if (isArrayBuffer(data)) {\n          buffer = data;\n          byteOffset = toOffset(offset, BYTES);\n          var $len = data.byteLength;\n          if ($length === undefined) {\n            if ($len % BYTES) throw new RangeError(WRONG_LENGTH);\n            byteLength = $len - byteOffset;\n            if (byteLength < 0) throw new RangeError(WRONG_LENGTH);\n          } else {\n            byteLength = toLength($length) * BYTES;\n            if (byteLength + byteOffset > $len) throw new RangeError(WRONG_LENGTH);\n          }\n          length = byteLength / BYTES;\n        } else if (isTypedArray(data)) {\n          return arrayFromConstructorAndList(TypedArrayConstructor, data);\n        } else {\n          return call(typedArrayFrom, TypedArrayConstructor, data);\n        }\n        setInternalState(that, {\n          buffer: buffer,\n          byteOffset: byteOffset,\n          byteLength: byteLength,\n          length: length,\n          view: new DataView(buffer)\n        });\n        while (index < length) addElement(that, index++);\n      });\n\n      if (setPrototypeOf) setPrototypeOf(TypedArrayConstructor, TypedArray);\n      TypedArrayConstructorPrototype = TypedArrayConstructor.prototype = create(TypedArrayPrototype);\n    } else if (TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS) {\n      TypedArrayConstructor = wrapper(function (dummy, data, typedArrayOffset, $length) {\n        anInstance(dummy, TypedArrayConstructorPrototype);\n        return inheritIfRequired(function () {\n          if (!isObject(data)) return new NativeTypedArrayConstructor(toIndex(data));\n          if (isArrayBuffer(data)) return $length !== undefined\n            ? new NativeTypedArrayConstructor(data, toOffset(typedArrayOffset, BYTES), $length)\n            : typedArrayOffset !== undefined\n              ? new NativeTypedArrayConstructor(data, toOffset(typedArrayOffset, BYTES))\n              : new NativeTypedArrayConstructor(data);\n          if (isTypedArray(data)) return arrayFromConstructorAndList(TypedArrayConstructor, data);\n          return call(typedArrayFrom, TypedArrayConstructor, data);\n        }(), dummy, TypedArrayConstructor);\n      });\n\n      if (setPrototypeOf) setPrototypeOf(TypedArrayConstructor, TypedArray);\n      forEach(getOwnPropertyNames(NativeTypedArrayConstructor), function (key) {\n        if (!(key in TypedArrayConstructor)) {\n          createNonEnumerableProperty(TypedArrayConstructor, key, NativeTypedArrayConstructor[key]);\n        }\n      });\n      TypedArrayConstructor.prototype = TypedArrayConstructorPrototype;\n    }\n\n    if (TypedArrayConstructorPrototype.constructor !== TypedArrayConstructor) {\n      createNonEnumerableProperty(TypedArrayConstructorPrototype, 'constructor', TypedArrayConstructor);\n    }\n\n    enforceInternalState(TypedArrayConstructorPrototype).TypedArrayConstructor = TypedArrayConstructor;\n\n    if (TYPED_ARRAY_TAG) {\n      createNonEnumerableProperty(TypedArrayConstructorPrototype, TYPED_ARRAY_TAG, CONSTRUCTOR_NAME);\n    }\n\n    var FORCED = TypedArrayConstructor !== NativeTypedArrayConstructor;\n\n    exported[CONSTRUCTOR_NAME] = TypedArrayConstructor;\n\n    $({ global: true, constructor: true, forced: FORCED, sham: !NATIVE_ARRAY_BUFFER_VIEWS }, exported);\n\n    if (!(BYTES_PER_ELEMENT in TypedArrayConstructor)) {\n      createNonEnumerableProperty(TypedArrayConstructor, BYTES_PER_ELEMENT, BYTES);\n    }\n\n    if (!(BYTES_PER_ELEMENT in TypedArrayConstructorPrototype)) {\n      createNonEnumerableProperty(TypedArrayConstructorPrototype, BYTES_PER_ELEMENT, BYTES);\n    }\n\n    setSpecies(CONSTRUCTOR_NAME);\n  };\n} else module.exports = function () { /* empty */ };\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/typed-array-constructor.js?")},16034:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar $values = (__webpack_require__(32357).values);\n\n// `Object.values` method\n// https://tc39.es/ecma262/#sec-object.values\n$({ target: 'Object', stat: true }, {\n  values: function values(O) {\n    return $values(O);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.object.values.js?")},16037:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// https://github.com/tc39/proposal-explicit-resource-management\nvar call = __webpack_require__(69565);\nvar defineBuiltIn = __webpack_require__(36840);\nvar getMethod = __webpack_require__(55966);\nvar hasOwn = __webpack_require__(39297);\nvar wellKnownSymbol = __webpack_require__(78227);\nvar IteratorPrototype = (__webpack_require__(57657).IteratorPrototype);\n\nvar DISPOSE = wellKnownSymbol('dispose');\n\nif (!hasOwn(IteratorPrototype, DISPOSE)) {\n  defineBuiltIn(IteratorPrototype, DISPOSE, function () {\n    var $return = getMethod(this, 'return');\n    if ($return) call($return, this);\n  });\n}\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.iterator.dispose.js?")},16193:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar ENVIRONMENT = __webpack_require__(84215);\n\nmodule.exports = ENVIRONMENT === 'NODE';\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/environment-is-node.js?")},16258:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// https://github.com/tc39/proposal-array-find-from-last/\n__webpack_require__(95115);\n__webpack_require__(17978);\n__webpack_require__(91706);\n__webpack_require__(96847);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/proposals/array-find-from-last.js?")},16280:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n/* eslint-disable no-unused-vars -- required for functions `.length` */\nvar $ = __webpack_require__(46518);\nvar globalThis = __webpack_require__(44576);\nvar apply = __webpack_require__(18745);\nvar wrapErrorConstructorWithCause = __webpack_require__(14601);\n\nvar WEB_ASSEMBLY = 'WebAssembly';\nvar WebAssembly = globalThis[WEB_ASSEMBLY];\n\n// eslint-disable-next-line es/no-error-cause -- feature detection\nvar FORCED = new Error('e', { cause: 7 }).cause !== 7;\n\nvar exportGlobalErrorCauseWrapper = function (ERROR_NAME, wrapper) {\n  var O = {};\n  O[ERROR_NAME] = wrapErrorConstructorWithCause(ERROR_NAME, wrapper, FORCED);\n  $({ global: true, constructor: true, arity: 1, forced: FORCED }, O);\n};\n\nvar exportWebAssemblyErrorCauseWrapper = function (ERROR_NAME, wrapper) {\n  if (WebAssembly && WebAssembly[ERROR_NAME]) {\n    var O = {};\n    O[ERROR_NAME] = wrapErrorConstructorWithCause(WEB_ASSEMBLY + '.' + ERROR_NAME, wrapper, FORCED);\n    $({ target: WEB_ASSEMBLY, stat: true, constructor: true, arity: 1, forced: FORCED }, O);\n  }\n};\n\n// https://tc39.es/ecma262/#sec-nativeerror\nexportGlobalErrorCauseWrapper('Error', function (init) {\n  return function Error(message) { return apply(init, this, arguments); };\n});\nexportGlobalErrorCauseWrapper('EvalError', function (init) {\n  return function EvalError(message) { return apply(init, this, arguments); };\n});\nexportGlobalErrorCauseWrapper('RangeError', function (init) {\n  return function RangeError(message) { return apply(init, this, arguments); };\n});\nexportGlobalErrorCauseWrapper('ReferenceError', function (init) {\n  return function ReferenceError(message) { return apply(init, this, arguments); };\n});\nexportGlobalErrorCauseWrapper('SyntaxError', function (init) {\n  return function SyntaxError(message) { return apply(init, this, arguments); };\n});\nexportGlobalErrorCauseWrapper('TypeError', function (init) {\n  return function TypeError(message) { return apply(init, this, arguments); };\n});\nexportGlobalErrorCauseWrapper('URIError', function (init) {\n  return function URIError(message) { return apply(init, this, arguments); };\n});\nexportWebAssemblyErrorCauseWrapper('CompileError', function (init) {\n  return function CompileError(message) { return apply(init, this, arguments); };\n});\nexportWebAssemblyErrorCauseWrapper('LinkError', function (init) {\n  return function LinkError(message) { return apply(init, this, arguments); };\n});\nexportWebAssemblyErrorCauseWrapper('RuntimeError', function (init) {\n  return function RuntimeError(message) { return apply(init, this, arguments); };\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.error.cause.js?")},16308:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar createHTML = __webpack_require__(77240);\nvar forcedStringHTMLMethod = __webpack_require__(23061);\n\n// `String.prototype.sup` method\n// https://tc39.es/ecma262/#sec-string.prototype.sup\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('sup') }, {\n  sup: function sup() {\n    return createHTML(this, 'sup', '', '');\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.string.sup.js?")},16401:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar wellKnownSymbol = __webpack_require__(78227);\nvar defineProperty = (__webpack_require__(24913).f);\n\nvar METADATA = wellKnownSymbol('metadata');\nvar FunctionPrototype = Function.prototype;\n\n// Function.prototype[@@metadata]\n// https://github.com/tc39/proposal-decorator-metadata\nif (FunctionPrototype[METADATA] === undefined) {\n  defineProperty(FunctionPrototype, METADATA, {\n    value: null\n  });\n}\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.function.metadata.js?")},16453:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(4360);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.math.f16round.js?")},16468:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar globalThis = __webpack_require__(44576);\nvar uncurryThis = __webpack_require__(79504);\nvar isForced = __webpack_require__(92796);\nvar defineBuiltIn = __webpack_require__(36840);\nvar InternalMetadataModule = __webpack_require__(3451);\nvar iterate = __webpack_require__(72652);\nvar anInstance = __webpack_require__(90679);\nvar isCallable = __webpack_require__(94901);\nvar isNullOrUndefined = __webpack_require__(64117);\nvar isObject = __webpack_require__(20034);\nvar fails = __webpack_require__(79039);\nvar checkCorrectnessOfIteration = __webpack_require__(84428);\nvar setToStringTag = __webpack_require__(10687);\nvar inheritIfRequired = __webpack_require__(23167);\n\nmodule.exports = function (CONSTRUCTOR_NAME, wrapper, common) {\n  var IS_MAP = CONSTRUCTOR_NAME.indexOf('Map') !== -1;\n  var IS_WEAK = CONSTRUCTOR_NAME.indexOf('Weak') !== -1;\n  var ADDER = IS_MAP ? 'set' : 'add';\n  var NativeConstructor = globalThis[CONSTRUCTOR_NAME];\n  var NativePrototype = NativeConstructor && NativeConstructor.prototype;\n  var Constructor = NativeConstructor;\n  var exported = {};\n\n  var fixMethod = function (KEY) {\n    var uncurriedNativeMethod = uncurryThis(NativePrototype[KEY]);\n    defineBuiltIn(NativePrototype, KEY,\n      KEY === 'add' ? function add(value) {\n        uncurriedNativeMethod(this, value === 0 ? 0 : value);\n        return this;\n      } : KEY === 'delete' ? function (key) {\n        return IS_WEAK && !isObject(key) ? false : uncurriedNativeMethod(this, key === 0 ? 0 : key);\n      } : KEY === 'get' ? function get(key) {\n        return IS_WEAK && !isObject(key) ? undefined : uncurriedNativeMethod(this, key === 0 ? 0 : key);\n      } : KEY === 'has' ? function has(key) {\n        return IS_WEAK && !isObject(key) ? false : uncurriedNativeMethod(this, key === 0 ? 0 : key);\n      } : function set(key, value) {\n        uncurriedNativeMethod(this, key === 0 ? 0 : key, value);\n        return this;\n      }\n    );\n  };\n\n  var REPLACE = isForced(\n    CONSTRUCTOR_NAME,\n    !isCallable(NativeConstructor) || !(IS_WEAK || NativePrototype.forEach && !fails(function () {\n      new NativeConstructor().entries().next();\n    }))\n  );\n\n  if (REPLACE) {\n    // create collection constructor\n    Constructor = common.getConstructor(wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER);\n    InternalMetadataModule.enable();\n  } else if (isForced(CONSTRUCTOR_NAME, true)) {\n    var instance = new Constructor();\n    // early implementations not supports chaining\n    var HASNT_CHAINING = instance[ADDER](IS_WEAK ? {} : -0, 1) !== instance;\n    // V8 ~ Chromium 40- weak-collections throws on primitives, but should return false\n    var THROWS_ON_PRIMITIVES = fails(function () { instance.has(1); });\n    // most early implementations doesn't supports iterables, most modern - not close it correctly\n    // eslint-disable-next-line no-new -- required for testing\n    var ACCEPT_ITERABLES = checkCorrectnessOfIteration(function (iterable) { new NativeConstructor(iterable); });\n    // for early implementations -0 and +0 not the same\n    var BUGGY_ZERO = !IS_WEAK && fails(function () {\n      // V8 ~ Chromium 42- fails only with 5+ elements\n      var $instance = new NativeConstructor();\n      var index = 5;\n      while (index--) $instance[ADDER](index, index);\n      return !$instance.has(-0);\n    });\n\n    if (!ACCEPT_ITERABLES) {\n      Constructor = wrapper(function (dummy, iterable) {\n        anInstance(dummy, NativePrototype);\n        var that = inheritIfRequired(new NativeConstructor(), dummy, Constructor);\n        if (!isNullOrUndefined(iterable)) iterate(iterable, that[ADDER], { that: that, AS_ENTRIES: IS_MAP });\n        return that;\n      });\n      Constructor.prototype = NativePrototype;\n      NativePrototype.constructor = Constructor;\n    }\n\n    if (THROWS_ON_PRIMITIVES || BUGGY_ZERO) {\n      fixMethod('delete');\n      fixMethod('has');\n      IS_MAP && fixMethod('get');\n    }\n\n    if (BUGGY_ZERO || HASNT_CHAINING) fixMethod(ADDER);\n\n    // weak collections should not contains .clear method\n    if (IS_WEAK && NativePrototype.clear) delete NativePrototype.clear;\n  }\n\n  exported[CONSTRUCTOR_NAME] = Constructor;\n  $({ global: true, constructor: true, forced: Constructor !== NativeConstructor }, exported);\n\n  setToStringTag(Constructor, CONSTRUCTOR_NAME);\n\n  if (!IS_WEAK) common.setStrong(Constructor, CONSTRUCTOR_NAME, IS_MAP);\n\n  return Constructor;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/collection.js?")},16499:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar call = __webpack_require__(69565);\nvar aCallable = __webpack_require__(79306);\nvar newPromiseCapabilityModule = __webpack_require__(36043);\nvar perform = __webpack_require__(1103);\nvar iterate = __webpack_require__(72652);\nvar PROMISE_STATICS_INCORRECT_ITERATION = __webpack_require__(90537);\n\n// `Promise.all` method\n// https://tc39.es/ecma262/#sec-promise.all\n$({ target: 'Promise', stat: true, forced: PROMISE_STATICS_INCORRECT_ITERATION }, {\n  all: function all(iterable) {\n    var C = this;\n    var capability = newPromiseCapabilityModule.f(C);\n    var resolve = capability.resolve;\n    var reject = capability.reject;\n    var result = perform(function () {\n      var $promiseResolve = aCallable(C.resolve);\n      var values = [];\n      var counter = 0;\n      var remaining = 1;\n      iterate(iterable, function (promise) {\n        var index = counter++;\n        var alreadyCalled = false;\n        remaining++;\n        call($promiseResolve, C, promise).then(function (value) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if (result.error) reject(result.value);\n    return capability.promise;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.promise.all.js?")},16573:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar DESCRIPTORS = __webpack_require__(43724);\nvar defineBuiltInAccessor = __webpack_require__(62106);\nvar isDetached = __webpack_require__(3238);\n\nvar ArrayBufferPrototype = ArrayBuffer.prototype;\n\n// `ArrayBuffer.prototype.detached` getter\n// https://tc39.es/ecma262/#sec-get-arraybuffer.prototype.detached\nif (DESCRIPTORS && !('detached' in ArrayBufferPrototype)) {\n  defineBuiltInAccessor(ArrayBufferPrototype, 'detached', {\n    configurable: true,\n    get: function detached() {\n      return isDetached(this);\n    }\n  });\n}\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array-buffer.detached.js?")},16575:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar hasOwn = __webpack_require__(39297);\n\nmodule.exports = function (descriptor) {\n  return descriptor !== undefined && (hasOwn(descriptor, 'value') || hasOwn(descriptor, 'writable'));\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/is-data-descriptor.js?")},16823:module=>{"use strict";eval("\nvar $String = String;\n\nmodule.exports = function (argument) {\n  try {\n    return $String(argument);\n  } catch (error) {\n    return 'Object';\n  }\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/try-to-string.js?")},17145:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar isPrototypeOf = __webpack_require__(1625);\nvar getPrototypeOf = __webpack_require__(42787);\nvar setPrototypeOf = __webpack_require__(52967);\nvar copyConstructorProperties = __webpack_require__(77740);\nvar create = __webpack_require__(2360);\nvar createNonEnumerableProperty = __webpack_require__(66699);\nvar createPropertyDescriptor = __webpack_require__(6980);\nvar installErrorCause = __webpack_require__(77584);\nvar installErrorStack = __webpack_require__(80747);\nvar iterate = __webpack_require__(72652);\nvar normalizeStringArgument = __webpack_require__(32603);\nvar wellKnownSymbol = __webpack_require__(78227);\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar $Error = Error;\nvar push = [].push;\n\nvar $AggregateError = function AggregateError(errors, message /* , options */) {\n  var isInstance = isPrototypeOf(AggregateErrorPrototype, this);\n  var that;\n  if (setPrototypeOf) {\n    that = setPrototypeOf(new $Error(), isInstance ? getPrototypeOf(this) : AggregateErrorPrototype);\n  } else {\n    that = isInstance ? this : create(AggregateErrorPrototype);\n    createNonEnumerableProperty(that, TO_STRING_TAG, 'Error');\n  }\n  if (message !== undefined) createNonEnumerableProperty(that, 'message', normalizeStringArgument(message));\n  installErrorStack(that, $AggregateError, that.stack, 1);\n  if (arguments.length > 2) installErrorCause(that, arguments[2]);\n  var errorsArray = [];\n  iterate(errors, push, { that: errorsArray });\n  createNonEnumerableProperty(that, 'errors', errorsArray);\n  return that;\n};\n\nif (setPrototypeOf) setPrototypeOf($AggregateError, $Error);\nelse copyConstructorProperties($AggregateError, $Error, { name: true });\n\nvar AggregateErrorPrototype = $AggregateError.prototype = create($Error.prototype, {\n  constructor: createPropertyDescriptor(1, $AggregateError),\n  message: createPropertyDescriptor(1, ''),\n  name: createPropertyDescriptor(1, 'AggregateError')\n});\n\n// `AggregateError` constructor\n// https://tc39.es/ecma262/#sec-aggregate-error-constructor\n$({ global: true, constructor: true, arity: 2 }, {\n  AggregateError: $AggregateError\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.aggregate-error.constructor.js?")},17333:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar call = __webpack_require__(69565);\nvar aCallable = __webpack_require__(79306);\nvar anObject = __webpack_require__(28551);\nvar isObject = __webpack_require__(20034);\nvar getIteratorDirect = __webpack_require__(1767);\nvar createAsyncIteratorProxy = __webpack_require__(92059);\nvar createIterResultObject = __webpack_require__(62529);\nvar closeAsyncIteration = __webpack_require__(20772);\nvar IS_PURE = __webpack_require__(96395);\n\nvar AsyncIteratorProxy = createAsyncIteratorProxy(function (Promise) {\n  var state = this;\n  var iterator = state.iterator;\n  var predicate = state.predicate;\n\n  return new Promise(function (resolve, reject) {\n    var doneAndReject = function (error) {\n      state.done = true;\n      reject(error);\n    };\n\n    var ifAbruptCloseAsyncIterator = function (error) {\n      closeAsyncIteration(iterator, doneAndReject, error, doneAndReject);\n    };\n\n    var loop = function () {\n      try {\n        Promise.resolve(anObject(call(state.next, iterator))).then(function (step) {\n          try {\n            if (anObject(step).done) {\n              state.done = true;\n              resolve(createIterResultObject(undefined, true));\n            } else {\n              var value = step.value;\n              try {\n                var result = predicate(value, state.counter++);\n\n                var handler = function (selected) {\n                  selected ? resolve(createIterResultObject(value, false)) : loop();\n                };\n\n                if (isObject(result)) Promise.resolve(result).then(handler, ifAbruptCloseAsyncIterator);\n                else handler(result);\n              } catch (error3) { ifAbruptCloseAsyncIterator(error3); }\n            }\n          } catch (error2) { doneAndReject(error2); }\n        }, doneAndReject);\n      } catch (error) { doneAndReject(error); }\n    };\n\n    loop();\n  });\n});\n\n// `AsyncIterator.prototype.filter` method\n// https://github.com/tc39/proposal-async-iterator-helpers\n$({ target: 'AsyncIterator', proto: true, real: true, forced: IS_PURE }, {\n  filter: function filter(predicate) {\n    anObject(this);\n    aCallable(predicate);\n    return new AsyncIteratorProxy(getIteratorDirect(this), {\n      predicate: predicate\n    });\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.async-iterator.filter.js?")},17427:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar DESCRIPTORS = __webpack_require__(43724);\nvar FORCED = __webpack_require__(42551);\nvar aCallable = __webpack_require__(79306);\nvar toObject = __webpack_require__(48981);\nvar definePropertyModule = __webpack_require__(24913);\n\n// `Object.prototype.__defineGetter__` method\n// https://tc39.es/ecma262/#sec-object.prototype.__defineGetter__\nif (DESCRIPTORS) {\n  $({ target: 'Object', proto: true, forced: FORCED }, {\n    __defineGetter__: function __defineGetter__(P, getter) {\n      definePropertyModule.f(toObject(this), P, { get: aCallable(getter), enumerable: true, configurable: true });\n    }\n  });\n}\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.object.define-getter.js?")},17561:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(15024);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.set.symmetric-difference.v2.js?")},17642:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar difference = __webpack_require__(83440);\nvar setMethodAcceptSetLike = __webpack_require__(84916);\n\nvar INCORRECT = !setMethodAcceptSetLike('difference', function (result) {\n  return result.size === 0;\n});\n\n// `Set.prototype.difference` method\n// https://tc39.es/ecma262/#sec-set.prototype.difference\n$({ target: 'Set', proto: true, real: true, forced: INCORRECT }, {\n  difference: difference\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.set.difference.v2.js?")},17978:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(13451);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.array.find-last-index.js?")},18014:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar toIntegerOrInfinity = __webpack_require__(91291);\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.es/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  var len = toIntegerOrInfinity(argument);\n  return len > 0 ? min(len, 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/to-length.js?")},18107:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar toObject = __webpack_require__(48981);\nvar lengthOfArrayLike = __webpack_require__(26198);\nvar toIntegerOrInfinity = __webpack_require__(91291);\nvar addToUnscopables = __webpack_require__(6469);\n\n// `Array.prototype.at` method\n// https://tc39.es/ecma262/#sec-array.prototype.at\n$({ target: 'Array', proto: true }, {\n  at: function at(index) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var relativeIndex = toIntegerOrInfinity(index);\n    var k = relativeIndex >= 0 ? relativeIndex : len + relativeIndex;\n    return (k < 0 || k >= len) ? undefined : O[k];\n  }\n});\n\naddToUnscopables('at');\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array.at.js?")},18111:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar globalThis = __webpack_require__(44576);\nvar anInstance = __webpack_require__(90679);\nvar anObject = __webpack_require__(28551);\nvar isCallable = __webpack_require__(94901);\nvar getPrototypeOf = __webpack_require__(42787);\nvar defineBuiltInAccessor = __webpack_require__(62106);\nvar createProperty = __webpack_require__(97040);\nvar fails = __webpack_require__(79039);\nvar hasOwn = __webpack_require__(39297);\nvar wellKnownSymbol = __webpack_require__(78227);\nvar IteratorPrototype = (__webpack_require__(57657).IteratorPrototype);\nvar DESCRIPTORS = __webpack_require__(43724);\nvar IS_PURE = __webpack_require__(96395);\n\nvar CONSTRUCTOR = 'constructor';\nvar ITERATOR = 'Iterator';\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\n\nvar $TypeError = TypeError;\nvar NativeIterator = globalThis[ITERATOR];\n\n// FF56- have non-standard global helper `Iterator`\nvar FORCED = IS_PURE\n  || !isCallable(NativeIterator)\n  || NativeIterator.prototype !== IteratorPrototype\n  // FF44- non-standard `Iterator` passes previous tests\n  || !fails(function () { NativeIterator({}); });\n\nvar IteratorConstructor = function Iterator() {\n  anInstance(this, IteratorPrototype);\n  if (getPrototypeOf(this) === IteratorPrototype) throw new $TypeError('Abstract class Iterator not directly constructable');\n};\n\nvar defineIteratorPrototypeAccessor = function (key, value) {\n  if (DESCRIPTORS) {\n    defineBuiltInAccessor(IteratorPrototype, key, {\n      configurable: true,\n      get: function () {\n        return value;\n      },\n      set: function (replacement) {\n        anObject(this);\n        if (this === IteratorPrototype) throw new $TypeError(\"You can't redefine this property\");\n        if (hasOwn(this, key)) this[key] = replacement;\n        else createProperty(this, key, replacement);\n      }\n    });\n  } else IteratorPrototype[key] = value;\n};\n\nif (!hasOwn(IteratorPrototype, TO_STRING_TAG)) defineIteratorPrototypeAccessor(TO_STRING_TAG, ITERATOR);\n\nif (FORCED || !hasOwn(IteratorPrototype, CONSTRUCTOR) || IteratorPrototype[CONSTRUCTOR] === Object) {\n  defineIteratorPrototypeAccessor(CONSTRUCTOR, IteratorConstructor);\n}\n\nIteratorConstructor.prototype = IteratorPrototype;\n\n// `Iterator` constructor\n// https://tc39.es/ecma262/#sec-iterator\n$({ global: true, constructor: true, forced: FORCED }, {\n  Iterator: IteratorConstructor\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.iterator.constructor.js?")},18237:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar iterate = __webpack_require__(72652);\nvar aCallable = __webpack_require__(79306);\nvar anObject = __webpack_require__(28551);\nvar getIteratorDirect = __webpack_require__(1767);\n\nvar $TypeError = TypeError;\n\n// `Iterator.prototype.reduce` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.reduce\n$({ target: 'Iterator', proto: true, real: true }, {\n  reduce: function reduce(reducer /* , initialValue */) {\n    anObject(this);\n    aCallable(reducer);\n    var record = getIteratorDirect(this);\n    var noInitial = arguments.length < 2;\n    var accumulator = noInitial ? undefined : arguments[1];\n    var counter = 0;\n    iterate(record, function (value) {\n      if (noInitial) {\n        noInitial = false;\n        accumulator = value;\n      } else {\n        accumulator = reducer(accumulator, value, counter);\n      }\n      counter++;\n    }, { IS_RECORD: true });\n    if (noInitial) throw new $TypeError('Reduce of empty iterator with no initial value');\n    return accumulator;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.iterator.reduce.js?")},18265:module=>{"use strict";eval("\nvar Queue = function () {\n  this.head = null;\n  this.tail = null;\n};\n\nQueue.prototype = {\n  add: function (item) {\n    var entry = { item: item, next: null };\n    var tail = this.tail;\n    if (tail) tail.next = entry;\n    else this.head = entry;\n    this.tail = entry;\n  },\n  get: function () {\n    var entry = this.head;\n    if (entry) {\n      var next = this.head = entry.next;\n      if (next === null) this.tail = null;\n      return entry.item;\n    }\n  }\n};\n\nmodule.exports = Queue;\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/queue.js?")},18727:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar classof = __webpack_require__(36955);\n\nmodule.exports = function (it) {\n  var klass = classof(it);\n  return klass === 'BigInt64Array' || klass === 'BigUint64Array';\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/is-big-int-array.js?")},18745:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar NATIVE_BIND = __webpack_require__(40616);\n\nvar FunctionPrototype = Function.prototype;\nvar apply = FunctionPrototype.apply;\nvar call = FunctionPrototype.call;\n\n// eslint-disable-next-line es/no-function-prototype-bind, es/no-reflect -- safe\nmodule.exports = typeof Reflect == 'object' && Reflect.apply || (NATIVE_BIND ? call.bind(apply) : function () {\n  return call.apply(apply, arguments);\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/function-apply.js?")},18814:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar fails = __webpack_require__(79039);\nvar globalThis = __webpack_require__(44576);\n\n// babel-minify and Closure Compiler transpiles RegExp('(?<a>b)', 'g') -> /(?<a>b)/g and it causes SyntaxError\nvar $RegExp = globalThis.RegExp;\n\nmodule.exports = fails(function () {\n  var re = $RegExp('(?<a>b)', 'g');\n  return re.exec('b').groups.a !== 'b' ||\n    'b'.replace(re, '$<a>c') !== 'bc';\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/regexp-unsupported-ncg.js?")},18863:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar $reduceRight = (__webpack_require__(80926).right);\nvar arrayMethodIsStrict = __webpack_require__(34598);\nvar CHROME_VERSION = __webpack_require__(39519);\nvar IS_NODE = __webpack_require__(16193);\n\n// Chrome 80-82 has a critical bug\n// https://bugs.chromium.org/p/chromium/issues/detail?id=1049982\nvar CHROME_BUG = !IS_NODE && CHROME_VERSION > 79 && CHROME_VERSION < 83;\nvar FORCED = CHROME_BUG || !arrayMethodIsStrict('reduceRight');\n\n// `Array.prototype.reduceRight` method\n// https://tc39.es/ecma262/#sec-array.prototype.reduceright\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  reduceRight: function reduceRight(callbackfn /* , initialValue */) {\n    return $reduceRight(this, callbackfn, arguments.length, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array.reduce-right.js?")},18866:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $trimEnd = (__webpack_require__(43802).end);\nvar forcedStringTrimMethod = __webpack_require__(60706);\n\n// `String.prototype.{ trimEnd, trimRight }` method\n// https://tc39.es/ecma262/#sec-string.prototype.trimend\n// https://tc39.es/ecma262/#String.prototype.trimright\nmodule.exports = forcedStringTrimMethod('trimEnd') ? function trimEnd() {\n  return $trimEnd(this);\n// eslint-disable-next-line es/no-string-prototype-trimstart-trimend -- safe\n} : ''.trimEnd;\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/string-trim-end.js?")},19167:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar globalThis = __webpack_require__(44576);\n\nmodule.exports = globalThis;\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/path.js?")},19369:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar ArrayBufferViewCore = __webpack_require__(94644);\nvar uncurryThis = __webpack_require__(79504);\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\nvar $join = uncurryThis([].join);\n\n// `%TypedArray%.prototype.join` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.join\nexportTypedArrayMethod('join', function join(separator) {\n  return $join(aTypedArray(this), separator);\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.join.js?")},19462:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar call = __webpack_require__(69565);\nvar create = __webpack_require__(2360);\nvar createNonEnumerableProperty = __webpack_require__(66699);\nvar defineBuiltIns = __webpack_require__(56279);\nvar wellKnownSymbol = __webpack_require__(78227);\nvar InternalStateModule = __webpack_require__(91181);\nvar getMethod = __webpack_require__(55966);\nvar IteratorPrototype = (__webpack_require__(57657).IteratorPrototype);\nvar createIterResultObject = __webpack_require__(62529);\nvar iteratorClose = __webpack_require__(9539);\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar ITERATOR_HELPER = 'IteratorHelper';\nvar WRAP_FOR_VALID_ITERATOR = 'WrapForValidIterator';\nvar setInternalState = InternalStateModule.set;\n\nvar createIteratorProxyPrototype = function (IS_ITERATOR) {\n  var getInternalState = InternalStateModule.getterFor(IS_ITERATOR ? WRAP_FOR_VALID_ITERATOR : ITERATOR_HELPER);\n\n  return defineBuiltIns(create(IteratorPrototype), {\n    next: function next() {\n      var state = getInternalState(this);\n      // for simplification:\n      //   for `%WrapForValidIteratorPrototype%.next` or with `state.returnHandlerResult` our `nextHandler` returns `IterResultObject`\n      //   for `%IteratorHelperPrototype%.next` - just a value\n      if (IS_ITERATOR) return state.nextHandler();\n      if (state.done) return createIterResultObject(undefined, true);\n      try {\n        var result = state.nextHandler();\n        return state.returnHandlerResult ? result : createIterResultObject(result, state.done);\n      } catch (error) {\n        state.done = true;\n        throw error;\n      }\n    },\n    'return': function () {\n      var state = getInternalState(this);\n      var iterator = state.iterator;\n      state.done = true;\n      if (IS_ITERATOR) {\n        var returnMethod = getMethod(iterator, 'return');\n        return returnMethod ? call(returnMethod, iterator) : createIterResultObject(undefined, true);\n      }\n      if (state.inner) try {\n        iteratorClose(state.inner.iterator, 'normal');\n      } catch (error) {\n        return iteratorClose(iterator, 'throw', error);\n      }\n      if (iterator) iteratorClose(iterator, 'normal');\n      return createIterResultObject(undefined, true);\n    }\n  });\n};\n\nvar WrapForValidIteratorPrototype = createIteratorProxyPrototype(true);\nvar IteratorHelperPrototype = createIteratorProxyPrototype(false);\n\ncreateNonEnumerableProperty(IteratorHelperPrototype, TO_STRING_TAG, 'Iterator Helper');\n\nmodule.exports = function (nextHandler, IS_ITERATOR, RETURN_HANDLER_RESULT) {\n  var IteratorProxy = function Iterator(record, state) {\n    if (state) {\n      state.iterator = record.iterator;\n      state.next = record.next;\n    } else state = record;\n    state.type = IS_ITERATOR ? WRAP_FOR_VALID_ITERATOR : ITERATOR_HELPER;\n    state.returnHandlerResult = !!RETURN_HANDLER_RESULT;\n    state.nextHandler = nextHandler;\n    state.counter = 0;\n    state.done = false;\n    setInternalState(this, state);\n  };\n\n  IteratorProxy.prototype = IS_ITERATOR ? WrapForValidIteratorPrototype : IteratorHelperPrototype;\n\n  return IteratorProxy;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/iterator-create-proxy.js?")},19617:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar toIndexedObject = __webpack_require__(25397);\nvar toAbsoluteIndex = __webpack_require__(35610);\nvar lengthOfArrayLike = __webpack_require__(26198);\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = lengthOfArrayLike(O);\n    if (length === 0) return !IS_INCLUDES && -1;\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (IS_INCLUDES && el !== el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare -- NaN check\n      if (value !== value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.es/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.es/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/array-includes.js?")},19817:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// https://github.com/tc39/proposal-arraybuffer-base64\n__webpack_require__(57051);\n__webpack_require__(27650);\n__webpack_require__(41549);\n__webpack_require__(49797);\n__webpack_require__(49631);\n__webpack_require__(35623);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/proposals/array-buffer-base64.js?")},20034:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar isCallable = __webpack_require__(94901);\n\nmodule.exports = function (it) {\n  return typeof it == 'object' ? it !== null : isCallable(it);\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/is-object.js?")},20116:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar iterate = __webpack_require__(72652);\nvar aCallable = __webpack_require__(79306);\nvar anObject = __webpack_require__(28551);\nvar getIteratorDirect = __webpack_require__(1767);\n\n// `Iterator.prototype.find` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.find\n$({ target: 'Iterator', proto: true, real: true }, {\n  find: function find(predicate) {\n    anObject(this);\n    aCallable(predicate);\n    var record = getIteratorDirect(this);\n    var counter = 0;\n    return iterate(record, function (value, stop) {\n      if (predicate(value, counter++)) return stop(value);\n    }, { IS_RECORD: true, INTERRUPTED: true }).result;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.iterator.find.js?")},20326:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar defineWellKnownSymbol = __webpack_require__(70511);\n\n// `Symbol.unscopables` well-known symbol\n// https://tc39.es/ecma262/#sec-symbol.unscopables\ndefineWellKnownSymbol('unscopables');\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.symbol.unscopables.js?")},20397:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar getBuiltIn = __webpack_require__(97751);\n\nmodule.exports = getBuiltIn('document', 'documentElement');\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/html.js?")},20713:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar call = __webpack_require__(69565);\nvar aCallable = __webpack_require__(79306);\nvar anObject = __webpack_require__(28551);\nvar getIteratorDirect = __webpack_require__(1767);\nvar createIteratorProxy = __webpack_require__(19462);\nvar callWithSafeIterationClosing = __webpack_require__(96319);\n\nvar IteratorProxy = createIteratorProxy(function () {\n  var iterator = this.iterator;\n  var result = anObject(call(this.next, iterator));\n  var done = this.done = !!result.done;\n  if (!done) return callWithSafeIterationClosing(iterator, this.mapper, [result.value, this.counter++], true);\n});\n\n// `Iterator.prototype.map` method\n// https://github.com/tc39/proposal-iterator-helpers\nmodule.exports = function map(mapper) {\n  anObject(this);\n  aCallable(mapper);\n  return new IteratorProxy(getIteratorDirect(this), {\n    mapper: mapper\n  });\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/iterator-map.js?")},20772:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar call = __webpack_require__(69565);\nvar getBuiltIn = __webpack_require__(97751);\nvar getMethod = __webpack_require__(55966);\n\nmodule.exports = function (iterator, method, argument, reject) {\n  try {\n    var returnMethod = getMethod(iterator, 'return');\n    if (returnMethod) {\n      return getBuiltIn('Promise').resolve(call(returnMethod, iterator)).then(function () {\n        method(argument);\n      }, function (error) {\n        reject(error);\n      });\n    }\n  } catch (error2) {\n    return reject(error2);\n  } method(argument);\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/async-iterator-close.js?")},20781:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar createHTML = __webpack_require__(77240);\nvar forcedStringHTMLMethod = __webpack_require__(23061);\n\n// `String.prototype.italics` method\n// https://tc39.es/ecma262/#sec-string.prototype.italics\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('italics') }, {\n  italics: function italics() {\n    return createHTML(this, 'i', '', '');\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.string.italics.js?")},21211:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar anObject = __webpack_require__(28551);\nvar getOwnPropertyDescriptor = (__webpack_require__(77347).f);\n\n// `Reflect.deleteProperty` method\n// https://tc39.es/ecma262/#sec-reflect.deleteproperty\n$({ target: 'Reflect', stat: true }, {\n  deleteProperty: function deleteProperty(target, propertyKey) {\n    var descriptor = getOwnPropertyDescriptor(anObject(target), propertyKey);\n    return descriptor && !descriptor.configurable ? false : delete target[propertyKey];\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.reflect.delete-property.js?")},21489:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar createTypedArrayConstructor = __webpack_require__(15823);\n\n// `Uint8Array` constructor\n// https://tc39.es/ecma262/#sec-typedarray-objects\ncreateTypedArrayConstructor('Uint8', function (init) {\n  return function Uint8Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.uint8-array.js?")},21699:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar uncurryThis = __webpack_require__(79504);\nvar notARegExp = __webpack_require__(60511);\nvar requireObjectCoercible = __webpack_require__(67750);\nvar toString = __webpack_require__(655);\nvar correctIsRegExpLogic = __webpack_require__(41436);\n\nvar stringIndexOf = uncurryThis(''.indexOf);\n\n// `String.prototype.includes` method\n// https://tc39.es/ecma262/#sec-string.prototype.includes\n$({ target: 'String', proto: true, forced: !correctIsRegExpLogic('includes') }, {\n  includes: function includes(searchString /* , position = 0 */) {\n    return !!~stringIndexOf(\n      toString(requireObjectCoercible(this)),\n      toString(notARegExp(searchString)),\n      arguments.length > 1 ? arguments[1] : undefined\n    );\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.string.includes.js?")},21903:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar ArrayBufferViewCore = __webpack_require__(94644);\nvar $findLast = (__webpack_require__(43839).findLast);\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.findLast` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.findlast\nexportTypedArrayMethod('findLast', function findLast(predicate /* , thisArg */) {\n  return $findLast(aTypedArray(this), predicate, arguments.length > 1 ? arguments[1] : undefined);\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.find-last.js?")},22134:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar createTypedArrayConstructor = __webpack_require__(15823);\n\n// `Uint8ClampedArray` constructor\n// https://tc39.es/ecma262/#sec-typedarray-objects\ncreateTypedArrayConstructor('Uint8', function (init) {\n  return function Uint8ClampedArray(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n}, true);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.uint8-clamped-array.js?")},22195:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar uncurryThis = __webpack_require__(79504);\n\nvar toString = uncurryThis({}.toString);\nvar stringSlice = uncurryThis(''.slice);\n\nmodule.exports = function (it) {\n  return stringSlice(toString(it), 8, -1);\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/classof-raw.js?")},22489:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar call = __webpack_require__(69565);\nvar aCallable = __webpack_require__(79306);\nvar anObject = __webpack_require__(28551);\nvar getIteratorDirect = __webpack_require__(1767);\nvar createIteratorProxy = __webpack_require__(19462);\nvar callWithSafeIterationClosing = __webpack_require__(96319);\nvar IS_PURE = __webpack_require__(96395);\n\nvar IteratorProxy = createIteratorProxy(function () {\n  var iterator = this.iterator;\n  var predicate = this.predicate;\n  var next = this.next;\n  var result, done, value;\n  while (true) {\n    result = anObject(call(next, iterator));\n    done = this.done = !!result.done;\n    if (done) return;\n    value = result.value;\n    if (callWithSafeIterationClosing(iterator, predicate, [value, this.counter++], true)) return value;\n  }\n});\n\n// `Iterator.prototype.filter` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.filter\n$({ target: 'Iterator', proto: true, real: true, forced: IS_PURE }, {\n  filter: function filter(predicate) {\n    anObject(this);\n    aCallable(predicate);\n    return new IteratorProxy(getIteratorDirect(this), {\n      predicate: predicate\n    });\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.iterator.filter.js?")},22668:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// https://github.com/tc39/proposal-string-matchall\n__webpack_require__(38344);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/proposals/string-match-all.js?")},22812:module=>{"use strict";eval("\nvar $TypeError = TypeError;\n\nmodule.exports = function (passed, required) {\n  if (passed < required) throw new $TypeError('Not enough arguments');\n  return passed;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/validate-arguments-length.js?")},23061:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar fails = __webpack_require__(79039);\n\n// check the existence of a method, lowercase\n// of a tag and escaping quotes in arguments\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    var test = ''[METHOD_NAME]('\"');\n    return test !== test.toLowerCase() || test.split('\"').length > 3;\n  });\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/string-html-forced.js?")},23167:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar isCallable = __webpack_require__(94901);\nvar isObject = __webpack_require__(20034);\nvar setPrototypeOf = __webpack_require__(52967);\n\n// makes subclassing work correct for wrapped built-ins\nmodule.exports = function ($this, dummy, Wrapper) {\n  var NewTarget, NewTargetPrototype;\n  if (\n    // it can work only with native `setPrototypeOf`\n    setPrototypeOf &&\n    // we haven't completely correct pre-ES6 way for getting `new.target`, so use this\n    isCallable(NewTarget = dummy.constructor) &&\n    NewTarget !== Wrapper &&\n    isObject(NewTargetPrototype = NewTarget.prototype) &&\n    NewTargetPrototype !== Wrapper.prototype\n  ) setPrototypeOf($this, NewTargetPrototype);\n  return $this;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/inherit-if-required.js?")},23215:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(81148);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.iterator.every.js?")},23288:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\nvar uncurryThis = __webpack_require__(79504);\nvar defineBuiltIn = __webpack_require__(36840);\n\nvar DatePrototype = Date.prototype;\nvar INVALID_DATE = 'Invalid Date';\nvar TO_STRING = 'toString';\nvar nativeDateToString = uncurryThis(DatePrototype[TO_STRING]);\nvar thisTimeValue = uncurryThis(DatePrototype.getTime);\n\n// `Date.prototype.toString` method\n// https://tc39.es/ecma262/#sec-date.prototype.tostring\nif (String(new Date(NaN)) !== INVALID_DATE) {\n  defineBuiltIn(DatePrototype, TO_STRING, function toString() {\n    var value = thisTimeValue(this);\n    // eslint-disable-next-line no-self-compare -- NaN check\n    return value === value ? nativeDateToString(this) : INVALID_DATE;\n  });\n}\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.date.to-string.js?")},23418:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar from = __webpack_require__(97916);\nvar checkCorrectnessOfIteration = __webpack_require__(84428);\n\nvar INCORRECT_ITERATION = !checkCorrectnessOfIteration(function (iterable) {\n  // eslint-disable-next-line es/no-array-from -- required for testing\n  Array.from(iterable);\n});\n\n// `Array.from` method\n// https://tc39.es/ecma262/#sec-array.from\n$({ target: 'Array', stat: true, forced: INCORRECT_ITERATION }, {\n  from: from\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array.from.js?")},23500:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar globalThis = __webpack_require__(44576);\nvar DOMIterables = __webpack_require__(67400);\nvar DOMTokenListPrototype = __webpack_require__(79296);\nvar forEach = __webpack_require__(90235);\nvar createNonEnumerableProperty = __webpack_require__(66699);\n\nvar handlePrototype = function (CollectionPrototype) {\n  // some Chrome versions have non-configurable methods on DOMTokenList\n  if (CollectionPrototype && CollectionPrototype.forEach !== forEach) try {\n    createNonEnumerableProperty(CollectionPrototype, 'forEach', forEach);\n  } catch (error) {\n    CollectionPrototype.forEach = forEach;\n  }\n};\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  if (DOMIterables[COLLECTION_NAME]) {\n    handlePrototype(globalThis[COLLECTION_NAME] && globalThis[COLLECTION_NAME].prototype);\n  }\n}\n\nhandlePrototype(DOMTokenListPrototype);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/web.dom-collections.for-each.js?")},23698:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// https://github.com/tc39/proposal-float16array\n__webpack_require__(47390);\n__webpack_require__(9730);\n__webpack_require__(16453);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/proposals/float16.js?")},23792:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar toIndexedObject = __webpack_require__(25397);\nvar addToUnscopables = __webpack_require__(6469);\nvar Iterators = __webpack_require__(26269);\nvar InternalStateModule = __webpack_require__(91181);\nvar defineProperty = (__webpack_require__(24913).f);\nvar defineIterator = __webpack_require__(51088);\nvar createIterResultObject = __webpack_require__(62529);\nvar IS_PURE = __webpack_require__(96395);\nvar DESCRIPTORS = __webpack_require__(43724);\n\nvar ARRAY_ITERATOR = 'Array Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(ARRAY_ITERATOR);\n\n// `Array.prototype.entries` method\n// https://tc39.es/ecma262/#sec-array.prototype.entries\n// `Array.prototype.keys` method\n// https://tc39.es/ecma262/#sec-array.prototype.keys\n// `Array.prototype.values` method\n// https://tc39.es/ecma262/#sec-array.prototype.values\n// `Array.prototype[@@iterator]` method\n// https://tc39.es/ecma262/#sec-array.prototype-@@iterator\n// `CreateArrayIterator` internal method\n// https://tc39.es/ecma262/#sec-createarrayiterator\nmodule.exports = defineIterator(Array, 'Array', function (iterated, kind) {\n  setInternalState(this, {\n    type: ARRAY_ITERATOR,\n    target: toIndexedObject(iterated), // target\n    index: 0,                          // next index\n    kind: kind                         // kind\n  });\n// `%ArrayIteratorPrototype%.next` method\n// https://tc39.es/ecma262/#sec-%arrayiteratorprototype%.next\n}, function () {\n  var state = getInternalState(this);\n  var target = state.target;\n  var index = state.index++;\n  if (!target || index >= target.length) {\n    state.target = null;\n    return createIterResultObject(undefined, true);\n  }\n  switch (state.kind) {\n    case 'keys': return createIterResultObject(index, false);\n    case 'values': return createIterResultObject(target[index], false);\n  } return createIterResultObject([index, target[index]], false);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values%\n// https://tc39.es/ecma262/#sec-createunmappedargumentsobject\n// https://tc39.es/ecma262/#sec-createmappedargumentsobject\nvar values = Iterators.Arguments = Iterators.Array;\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n\n// V8 ~ Chrome 45- bug\nif (!IS_PURE && DESCRIPTORS && values.name !== 'values') try {\n  defineProperty(values, 'name', { value: 'values' });\n} catch (error) { /* empty */ }\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array.iterator.js?")},23860:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar codeAt = (__webpack_require__(68183).codeAt);\n\n// `String.prototype.codePointAt` method\n// https://tc39.es/ecma262/#sec-string.prototype.codepointat\n$({ target: 'String', proto: true }, {\n  codePointAt: function codePointAt(pos) {\n    return codeAt(this, pos);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.string.code-point-at.js?")},24074:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar call = __webpack_require__(69565);\nvar anObject = __webpack_require__(28551);\nvar create = __webpack_require__(2360);\nvar getMethod = __webpack_require__(55966);\nvar defineBuiltIns = __webpack_require__(56279);\nvar InternalStateModule = __webpack_require__(91181);\nvar getBuiltIn = __webpack_require__(97751);\nvar AsyncIteratorPrototype = __webpack_require__(53982);\nvar createIterResultObject = __webpack_require__(62529);\n\nvar Promise = getBuiltIn('Promise');\n\nvar ASYNC_FROM_SYNC_ITERATOR = 'AsyncFromSyncIterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(ASYNC_FROM_SYNC_ITERATOR);\n\nvar asyncFromSyncIteratorContinuation = function (result, resolve, reject) {\n  var done = result.done;\n  Promise.resolve(result.value).then(function (value) {\n    resolve(createIterResultObject(value, done));\n  }, reject);\n};\n\nvar AsyncFromSyncIterator = function AsyncIterator(iteratorRecord) {\n  iteratorRecord.type = ASYNC_FROM_SYNC_ITERATOR;\n  setInternalState(this, iteratorRecord);\n};\n\nAsyncFromSyncIterator.prototype = defineBuiltIns(create(AsyncIteratorPrototype), {\n  next: function next() {\n    var state = getInternalState(this);\n    return new Promise(function (resolve, reject) {\n      var result = anObject(call(state.next, state.iterator));\n      asyncFromSyncIteratorContinuation(result, resolve, reject);\n    });\n  },\n  'return': function () {\n    var iterator = getInternalState(this).iterator;\n    return new Promise(function (resolve, reject) {\n      var $return = getMethod(iterator, 'return');\n      if ($return === undefined) return resolve(createIterResultObject(undefined, true));\n      var result = anObject(call($return, iterator));\n      asyncFromSyncIteratorContinuation(result, resolve, reject);\n    });\n  }\n});\n\nmodule.exports = AsyncFromSyncIterator;\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/async-from-sync-iterator.js?")},24082:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(79577);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.typed-array.with.js?")},24149:module=>{"use strict";eval("\nvar $RangeError = RangeError;\n\nmodule.exports = function (it) {\n  // eslint-disable-next-line no-self-compare -- NaN check\n  if (it === it) return it;\n  throw new $RangeError('NaN is not allowed');\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/not-a-nan.js?")},24194:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar classof = __webpack_require__(36955);\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (argument) {\n  if (classof(argument) === 'DataView') return argument;\n  throw new $TypeError('Argument is not a DataView');\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/a-data-view.js?")},24359:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar ArrayBufferModule = __webpack_require__(66346);\nvar NATIVE_ARRAY_BUFFER = __webpack_require__(77811);\n\n// `DataView` constructor\n// https://tc39.es/ecma262/#sec-dataview-constructor\n$({ global: true, constructor: true, forced: !NATIVE_ARRAY_BUFFER }, {\n  DataView: ArrayBufferModule.DataView\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.data-view.constructor.js?")},24599:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar globalThis = __webpack_require__(44576);\nvar schedulersFix = __webpack_require__(79472);\n\nvar setTimeout = schedulersFix(globalThis.setTimeout, true);\n\n// Bun / IE9- setTimeout additional parameters fix\n// https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-settimeout\n$({ global: true, bind: true, forced: globalThis.setTimeout !== setTimeout }, {\n  setTimeout: setTimeout\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/web.set-timeout.js?")},24659:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar fails = __webpack_require__(79039);\nvar createPropertyDescriptor = __webpack_require__(6980);\n\nmodule.exports = !fails(function () {\n  var error = new Error('a');\n  if (!('stack' in error)) return true;\n  // eslint-disable-next-line es/no-object-defineproperty -- safe\n  Object.defineProperty(error, 'stack', createPropertyDescriptor(1, 7));\n  return error.stack !== 7;\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/error-stack-installable.js?")},24913:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";eval("\nvar DESCRIPTORS = __webpack_require__(43724);\nvar IE8_DOM_DEFINE = __webpack_require__(35917);\nvar V8_PROTOTYPE_DEFINE_BUG = __webpack_require__(48686);\nvar anObject = __webpack_require__(28551);\nvar toPropertyKey = __webpack_require__(56969);\n\nvar $TypeError = TypeError;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar $defineProperty = Object.defineProperty;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar ENUMERABLE = 'enumerable';\nvar CONFIGURABLE = 'configurable';\nvar WRITABLE = 'writable';\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? V8_PROTOTYPE_DEFINE_BUG ? function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (typeof O === 'function' && P === 'prototype' && 'value' in Attributes && WRITABLE in Attributes && !Attributes[WRITABLE]) {\n    var current = $getOwnPropertyDescriptor(O, P);\n    if (current && current[WRITABLE]) {\n      O[P] = Attributes.value;\n      Attributes = {\n        configurable: CONFIGURABLE in Attributes ? Attributes[CONFIGURABLE] : current[CONFIGURABLE],\n        enumerable: ENUMERABLE in Attributes ? Attributes[ENUMERABLE] : current[ENUMERABLE],\n        writable: false\n      };\n    }\n  } return $defineProperty(O, P, Attributes);\n} : $defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return $defineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw new $TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/object-define-property.js?")},25170:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar uncurryThisAccessor = __webpack_require__(46706);\nvar SetHelpers = __webpack_require__(94402);\n\nmodule.exports = uncurryThisAccessor(SetHelpers.proto, 'size', 'get') || function (set) {\n  return set.size;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/set-size.js?")},25276:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n/* eslint-disable es/no-array-prototype-indexof -- required for testing */\nvar $ = __webpack_require__(46518);\nvar uncurryThis = __webpack_require__(27476);\nvar $indexOf = (__webpack_require__(19617).indexOf);\nvar arrayMethodIsStrict = __webpack_require__(34598);\n\nvar nativeIndexOf = uncurryThis([].indexOf);\n\nvar NEGATIVE_ZERO = !!nativeIndexOf && 1 / nativeIndexOf([1], 1, -0) < 0;\nvar FORCED = NEGATIVE_ZERO || !arrayMethodIsStrict('indexOf');\n\n// `Array.prototype.indexOf` method\n// https://tc39.es/ecma262/#sec-array.prototype.indexof\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  indexOf: function indexOf(searchElement /* , fromIndex = 0 */) {\n    var fromIndex = arguments.length > 1 ? arguments[1] : undefined;\n    return NEGATIVE_ZERO\n      // convert -0 to +0\n      ? nativeIndexOf(this, searchElement, fromIndex) || 0\n      : $indexOf(this, searchElement, fromIndex);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array.index-of.js?")},25397:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = __webpack_require__(47055);\nvar requireObjectCoercible = __webpack_require__(67750);\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/to-indexed-object.js?")},25428:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar numberIsFinite = __webpack_require__(50360);\n\n// `Number.isFinite` method\n// https://tc39.es/ecma262/#sec-number.isfinite\n$({ target: 'Number', stat: true }, { isFinite: numberIsFinite });\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.number.is-finite.js?")},25440:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar apply = __webpack_require__(18745);\nvar call = __webpack_require__(69565);\nvar uncurryThis = __webpack_require__(79504);\nvar fixRegExpWellKnownSymbolLogic = __webpack_require__(89228);\nvar fails = __webpack_require__(79039);\nvar anObject = __webpack_require__(28551);\nvar isCallable = __webpack_require__(94901);\nvar isNullOrUndefined = __webpack_require__(64117);\nvar toIntegerOrInfinity = __webpack_require__(91291);\nvar toLength = __webpack_require__(18014);\nvar toString = __webpack_require__(655);\nvar requireObjectCoercible = __webpack_require__(67750);\nvar advanceStringIndex = __webpack_require__(57829);\nvar getMethod = __webpack_require__(55966);\nvar getSubstitution = __webpack_require__(2478);\nvar regExpExec = __webpack_require__(56682);\nvar wellKnownSymbol = __webpack_require__(78227);\n\nvar REPLACE = wellKnownSymbol('replace');\nvar max = Math.max;\nvar min = Math.min;\nvar concat = uncurryThis([].concat);\nvar push = uncurryThis([].push);\nvar stringIndexOf = uncurryThis(''.indexOf);\nvar stringSlice = uncurryThis(''.slice);\n\nvar maybeToString = function (it) {\n  return it === undefined ? it : String(it);\n};\n\n// IE <= 11 replaces $0 with the whole match, as if it was $&\n// https://stackoverflow.com/questions/6024666/getting-ie-to-replace-a-regex-with-the-literal-string-0\nvar REPLACE_KEEPS_$0 = (function () {\n  // eslint-disable-next-line regexp/prefer-escape-replacement-dollar-char -- required for testing\n  return 'a'.replace(/./, '$0') === '$0';\n})();\n\n// Safari <= 13.0.3(?) substitutes nth capture where n>m with an empty string\nvar REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE = (function () {\n  if (/./[REPLACE]) {\n    return /./[REPLACE]('a', '$0') === '';\n  }\n  return false;\n})();\n\nvar REPLACE_SUPPORTS_NAMED_GROUPS = !fails(function () {\n  var re = /./;\n  re.exec = function () {\n    var result = [];\n    result.groups = { a: '7' };\n    return result;\n  };\n  // eslint-disable-next-line regexp/no-useless-dollar-replacements -- false positive\n  return ''.replace(re, '$<a>') !== '7';\n});\n\n// @@replace logic\nfixRegExpWellKnownSymbolLogic('replace', function (_, nativeReplace, maybeCallNative) {\n  var UNSAFE_SUBSTITUTE = REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE ? '$' : '$0';\n\n  return [\n    // `String.prototype.replace` method\n    // https://tc39.es/ecma262/#sec-string.prototype.replace\n    function replace(searchValue, replaceValue) {\n      var O = requireObjectCoercible(this);\n      var replacer = isNullOrUndefined(searchValue) ? undefined : getMethod(searchValue, REPLACE);\n      return replacer\n        ? call(replacer, searchValue, O, replaceValue)\n        : call(nativeReplace, toString(O), searchValue, replaceValue);\n    },\n    // `RegExp.prototype[@@replace]` method\n    // https://tc39.es/ecma262/#sec-regexp.prototype-@@replace\n    function (string, replaceValue) {\n      var rx = anObject(this);\n      var S = toString(string);\n\n      if (\n        typeof replaceValue == 'string' &&\n        stringIndexOf(replaceValue, UNSAFE_SUBSTITUTE) === -1 &&\n        stringIndexOf(replaceValue, '$<') === -1\n      ) {\n        var res = maybeCallNative(nativeReplace, rx, S, replaceValue);\n        if (res.done) return res.value;\n      }\n\n      var functionalReplace = isCallable(replaceValue);\n      if (!functionalReplace) replaceValue = toString(replaceValue);\n\n      var global = rx.global;\n      var fullUnicode;\n      if (global) {\n        fullUnicode = rx.unicode;\n        rx.lastIndex = 0;\n      }\n\n      var results = [];\n      var result;\n      while (true) {\n        result = regExpExec(rx, S);\n        if (result === null) break;\n\n        push(results, result);\n        if (!global) break;\n\n        var matchStr = toString(result[0]);\n        if (matchStr === '') rx.lastIndex = advanceStringIndex(S, toLength(rx.lastIndex), fullUnicode);\n      }\n\n      var accumulatedResult = '';\n      var nextSourcePosition = 0;\n      for (var i = 0; i < results.length; i++) {\n        result = results[i];\n\n        var matched = toString(result[0]);\n        var position = max(min(toIntegerOrInfinity(result.index), S.length), 0);\n        var captures = [];\n        var replacement;\n        // NOTE: This is equivalent to\n        //   captures = result.slice(1).map(maybeToString)\n        // but for some reason `nativeSlice.call(result, 1, result.length)` (called in\n        // the slice polyfill when slicing native arrays) \"doesn't work\" in safari 9 and\n        // causes a crash (https://pastebin.com/N21QzeQA) when trying to debug it.\n        for (var j = 1; j < result.length; j++) push(captures, maybeToString(result[j]));\n        var namedCaptures = result.groups;\n        if (functionalReplace) {\n          var replacerArgs = concat([matched], captures, position, S);\n          if (namedCaptures !== undefined) push(replacerArgs, namedCaptures);\n          replacement = toString(apply(replaceValue, undefined, replacerArgs));\n        } else {\n          replacement = getSubstitution(matched, S, position, captures, namedCaptures, replaceValue);\n        }\n        if (position >= nextSourcePosition) {\n          accumulatedResult += stringSlice(S, nextSourcePosition, position) + replacement;\n          nextSourcePosition = position + matched.length;\n        }\n      }\n\n      return accumulatedResult + stringSlice(S, nextSourcePosition);\n    }\n  ];\n}, !REPLACE_SUPPORTS_NAMED_GROUPS || !REPLACE_KEEPS_$0 || REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.string.replace.js?")},25714:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(32475);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.set.is-superset-of.v2.js?")},25745:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar store = __webpack_require__(77629);\n\nmodule.exports = function (key, value) {\n  return store[key] || (store[key] = value || {});\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/shared.js?")},25843:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar parseInt = __webpack_require__(52703);\n\n// `Number.parseInt` method\n// https://tc39.es/ecma262/#sec-number.parseint\n// eslint-disable-next-line es/no-number-parseint -- required for testing\n$({ target: 'Number', stat: true, forced: Number.parseInt !== parseInt }, {\n  parseInt: parseInt\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.number.parse-int.js?")},26099:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar TO_STRING_TAG_SUPPORT = __webpack_require__(92140);\nvar defineBuiltIn = __webpack_require__(36840);\nvar toString = __webpack_require__(53179);\n\n// `Object.prototype.toString` method\n// https://tc39.es/ecma262/#sec-object.prototype.tostring\nif (!TO_STRING_TAG_SUPPORT) {\n  defineBuiltIn(Object.prototype, 'toString', toString, { unsafe: true });\n}\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.object.to-string.js?")},26148:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar fromAsync = __webpack_require__(8045);\nvar fails = __webpack_require__(79039);\n\n// eslint-disable-next-line es/no-nonstandard-array-properties -- safe\nvar nativeFromAsync = Array.fromAsync;\n// https://bugs.webkit.org/show_bug.cgi?id=271703\nvar INCORRECT_CONSTRUCTURING = !nativeFromAsync || fails(function () {\n  var counter = 0;\n  nativeFromAsync.call(function () {\n    counter++;\n    return [];\n  }, { length: 0 });\n  return counter !== 1;\n});\n\n// `Array.fromAsync` method\n// https://github.com/tc39/proposal-array-from-async\n$({ target: 'Array', stat: true, forced: INCORRECT_CONSTRUCTURING }, {\n  fromAsync: fromAsync\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.array.from-async.js?")},26198:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar toLength = __webpack_require__(18014);\n\n// `LengthOfArrayLike` abstract operation\n// https://tc39.es/ecma262/#sec-lengthofarraylike\nmodule.exports = function (obj) {\n  return toLength(obj.length);\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/length-of-array-like.js?")},26269:module=>{"use strict";eval("\nmodule.exports = {};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/iterators.js?")},26280:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(16573);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.array-buffer.detached.js?")},26615:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar getBuiltIn = __webpack_require__(97751);\nvar isObject = __webpack_require__(20034);\nvar classof = __webpack_require__(36955);\nvar fails = __webpack_require__(79039);\n\nvar ERROR = 'Error';\nvar DOM_EXCEPTION = 'DOMException';\n// eslint-disable-next-line es/no-object-setprototypeof, no-proto -- safe\nvar PROTOTYPE_SETTING_AVAILABLE = Object.setPrototypeOf || ({}).__proto__;\n\nvar DOMException = getBuiltIn(DOM_EXCEPTION);\nvar $Error = Error;\nvar $isError = $Error.isError;\n\nvar FORCED = !$isError || !PROTOTYPE_SETTING_AVAILABLE || fails(function () {\n  // Bun, isNativeError-based implementations, some buggy structuredClone-based implementations, etc.\n  // https://github.com/oven-sh/bun/issues/15821\n  return (DOMException && !$isError(new DOMException(DOM_EXCEPTION))) ||\n    // structuredClone-based implementations\n    // eslint-disable-next-line es/no-error-cause -- detection\n    !$isError(new $Error(ERROR, { cause: function () { /* empty */ } })) ||\n    // instanceof-based and FF Error#stack-based implementations\n    $isError(getBuiltIn('Object', 'create')($Error.prototype));\n});\n\n// `Error.isError` method\n// https://github.com/tc39/proposal-is-error\n$({ target: 'Error', stat: true, sham: true, forced: FORCED }, {\n  isError: function isError(arg) {\n    if (!isObject(arg)) return false;\n    var tag = classof(arg);\n    return tag === ERROR || tag === DOM_EXCEPTION;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.error.is-error.js?")},26835:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar copyWithin = __webpack_require__(57029);\nvar addToUnscopables = __webpack_require__(6469);\n\n// `Array.prototype.copyWithin` method\n// https://tc39.es/ecma262/#sec-array.prototype.copywithin\n$({ target: 'Array', proto: true }, {\n  copyWithin: copyWithin\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('copyWithin');\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array.copy-within.js?")},26910:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar uncurryThis = __webpack_require__(79504);\nvar aCallable = __webpack_require__(79306);\nvar toObject = __webpack_require__(48981);\nvar lengthOfArrayLike = __webpack_require__(26198);\nvar deletePropertyOrThrow = __webpack_require__(84606);\nvar toString = __webpack_require__(655);\nvar fails = __webpack_require__(79039);\nvar internalSort = __webpack_require__(74488);\nvar arrayMethodIsStrict = __webpack_require__(34598);\nvar FF = __webpack_require__(13709);\nvar IE_OR_EDGE = __webpack_require__(13763);\nvar V8 = __webpack_require__(39519);\nvar WEBKIT = __webpack_require__(3607);\n\nvar test = [];\nvar nativeSort = uncurryThis(test.sort);\nvar push = uncurryThis(test.push);\n\n// IE8-\nvar FAILS_ON_UNDEFINED = fails(function () {\n  test.sort(undefined);\n});\n// V8 bug\nvar FAILS_ON_NULL = fails(function () {\n  test.sort(null);\n});\n// Old WebKit\nvar STRICT_METHOD = arrayMethodIsStrict('sort');\n\nvar STABLE_SORT = !fails(function () {\n  // feature detection can be too slow, so check engines versions\n  if (V8) return V8 < 70;\n  if (FF && FF > 3) return;\n  if (IE_OR_EDGE) return true;\n  if (WEBKIT) return WEBKIT < 603;\n\n  var result = '';\n  var code, chr, value, index;\n\n  // generate an array with more 512 elements (Chakra and old V8 fails only in this case)\n  for (code = 65; code < 76; code++) {\n    chr = String.fromCharCode(code);\n\n    switch (code) {\n      case 66: case 69: case 70: case 72: value = 3; break;\n      case 68: case 71: value = 4; break;\n      default: value = 2;\n    }\n\n    for (index = 0; index < 47; index++) {\n      test.push({ k: chr + index, v: value });\n    }\n  }\n\n  test.sort(function (a, b) { return b.v - a.v; });\n\n  for (index = 0; index < test.length; index++) {\n    chr = test[index].k.charAt(0);\n    if (result.charAt(result.length - 1) !== chr) result += chr;\n  }\n\n  return result !== 'DGBEFHACIJK';\n});\n\nvar FORCED = FAILS_ON_UNDEFINED || !FAILS_ON_NULL || !STRICT_METHOD || !STABLE_SORT;\n\nvar getSortCompare = function (comparefn) {\n  return function (x, y) {\n    if (y === undefined) return -1;\n    if (x === undefined) return 1;\n    if (comparefn !== undefined) return +comparefn(x, y) || 0;\n    return toString(x) > toString(y) ? 1 : -1;\n  };\n};\n\n// `Array.prototype.sort` method\n// https://tc39.es/ecma262/#sec-array.prototype.sort\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  sort: function sort(comparefn) {\n    if (comparefn !== undefined) aCallable(comparefn);\n\n    var array = toObject(this);\n\n    if (STABLE_SORT) return comparefn === undefined ? nativeSort(array) : nativeSort(array, comparefn);\n\n    var items = [];\n    var arrayLength = lengthOfArrayLike(array);\n    var itemsLength, index;\n\n    for (index = 0; index < arrayLength; index++) {\n      if (index in array) push(items, array[index]);\n    }\n\n    internalSort(items, getSortCompare(comparefn));\n\n    itemsLength = lengthOfArrayLike(items);\n    index = 0;\n\n    while (index < itemsLength) array[index] = items[index++];\n    while (index < arrayLength) deletePropertyOrThrow(array, index++);\n\n    return array;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array.sort.js?")},27208:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar call = __webpack_require__(69565);\n\n// `URL.prototype.toJSON` method\n// https://url.spec.whatwg.org/#dom-url-tojson\n$({ target: 'URL', proto: true, enumerable: true }, {\n  toJSON: function toJSON() {\n    return call(URL.prototype.toString, this);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/web.url.to-json.js?")},27337:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar uncurryThis = __webpack_require__(79504);\nvar toAbsoluteIndex = __webpack_require__(35610);\n\nvar $RangeError = RangeError;\nvar fromCharCode = String.fromCharCode;\n// eslint-disable-next-line es/no-string-fromcodepoint -- required for testing\nvar $fromCodePoint = String.fromCodePoint;\nvar join = uncurryThis([].join);\n\n// length should be 1, old FF problem\nvar INCORRECT_LENGTH = !!$fromCodePoint && $fromCodePoint.length !== 1;\n\n// `String.fromCodePoint` method\n// https://tc39.es/ecma262/#sec-string.fromcodepoint\n$({ target: 'String', stat: true, arity: 1, forced: INCORRECT_LENGTH }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  fromCodePoint: function fromCodePoint(x) {\n    var elements = [];\n    var length = arguments.length;\n    var i = 0;\n    var code;\n    while (length > i) {\n      code = +arguments[i++];\n      if (toAbsoluteIndex(code, 0x10FFFF) !== code) throw new $RangeError(code + ' is not a valid code point');\n      elements[i] = code < 0x10000\n        ? fromCharCode(code)\n        : fromCharCode(((code -= 0x10000) >> 10) + 0xD800, code % 0x400 + 0xDC00);\n    } return join(elements, '');\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.string.from-code-point.js?")},27413:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(54972);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.iterator.take.js?")},27476:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar classofRaw = __webpack_require__(22195);\nvar uncurryThis = __webpack_require__(79504);\n\nmodule.exports = function (fn) {\n  // Nashorn bug:\n  //   https://github.com/zloirock/core-js/issues/1128\n  //   https://github.com/zloirock/core-js/issues/1130\n  if (classofRaw(fn) === 'Function') return uncurryThis(fn);\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/function-uncurry-this-clause.js?")},27495:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar exec = __webpack_require__(57323);\n\n// `RegExp.prototype.exec` method\n// https://tc39.es/ecma262/#sec-regexp.prototype.exec\n$({ target: 'RegExp', proto: true, forced: /./.exec !== exec }, {\n  exec: exec\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.regexp.exec.js?")},27650:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar globalThis = __webpack_require__(44576);\nvar aString = __webpack_require__(63463);\nvar $fromHex = __webpack_require__(42303);\n\n// `Uint8Array.fromHex` method\n// https://github.com/tc39/proposal-arraybuffer-base64\nif (globalThis.Uint8Array) $({ target: 'Uint8Array', stat: true }, {\n  fromHex: function fromHex(string) {\n    return $fromHex(aString(string)).bytes;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.uint8-array.from-hex.js?")},27819:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n/* eslint-disable es/no-json -- safe */\nvar fails = __webpack_require__(79039);\n\nmodule.exports = !fails(function () {\n  var unsafeInt = '9007199254740993';\n  // eslint-disable-next-line es/no-nonstandard-json-properties -- feature detection\n  var raw = JSON.rawJSON(unsafeInt);\n  // eslint-disable-next-line es/no-nonstandard-json-properties -- feature detection\n  return !JSON.isRawJSON(raw) || JSON.stringify(raw) !== unsafeInt;\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/native-raw-json.js?")},27913:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(78100);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.array-buffer.transfer.js?")},28527:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar aSet = __webpack_require__(97080);\nvar has = (__webpack_require__(94402).has);\nvar size = __webpack_require__(25170);\nvar getSetRecord = __webpack_require__(83789);\nvar iterateSimple = __webpack_require__(40507);\nvar iteratorClose = __webpack_require__(9539);\n\n// `Set.prototype.isSupersetOf` method\n// https://tc39.github.io/proposal-set-methods/#Set.prototype.isSupersetOf\nmodule.exports = function isSupersetOf(other) {\n  var O = aSet(this);\n  var otherRec = getSetRecord(other);\n  if (size(O) < otherRec.size) return false;\n  var iterator = otherRec.getIterator();\n  return iterateSimple(iterator, function (e) {\n    if (!has(O, e)) return iteratorClose(iterator, 'normal', false);\n  }) !== false;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/set-is-superset-of.js?")},28543:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n/* eslint-disable es/no-string-prototype-matchall -- safe */\nvar $ = __webpack_require__(46518);\nvar call = __webpack_require__(69565);\nvar uncurryThis = __webpack_require__(27476);\nvar createIteratorConstructor = __webpack_require__(33994);\nvar createIterResultObject = __webpack_require__(62529);\nvar requireObjectCoercible = __webpack_require__(67750);\nvar toLength = __webpack_require__(18014);\nvar toString = __webpack_require__(655);\nvar anObject = __webpack_require__(28551);\nvar isNullOrUndefined = __webpack_require__(64117);\nvar classof = __webpack_require__(22195);\nvar isRegExp = __webpack_require__(60788);\nvar getRegExpFlags = __webpack_require__(61034);\nvar getMethod = __webpack_require__(55966);\nvar defineBuiltIn = __webpack_require__(36840);\nvar fails = __webpack_require__(79039);\nvar wellKnownSymbol = __webpack_require__(78227);\nvar speciesConstructor = __webpack_require__(2293);\nvar advanceStringIndex = __webpack_require__(57829);\nvar regExpExec = __webpack_require__(56682);\nvar InternalStateModule = __webpack_require__(91181);\nvar IS_PURE = __webpack_require__(96395);\n\nvar MATCH_ALL = wellKnownSymbol('matchAll');\nvar REGEXP_STRING = 'RegExp String';\nvar REGEXP_STRING_ITERATOR = REGEXP_STRING + ' Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(REGEXP_STRING_ITERATOR);\nvar RegExpPrototype = RegExp.prototype;\nvar $TypeError = TypeError;\nvar stringIndexOf = uncurryThis(''.indexOf);\nvar nativeMatchAll = uncurryThis(''.matchAll);\n\nvar WORKS_WITH_NON_GLOBAL_REGEX = !!nativeMatchAll && !fails(function () {\n  nativeMatchAll('a', /./);\n});\n\nvar $RegExpStringIterator = createIteratorConstructor(function RegExpStringIterator(regexp, string, $global, fullUnicode) {\n  setInternalState(this, {\n    type: REGEXP_STRING_ITERATOR,\n    regexp: regexp,\n    string: string,\n    global: $global,\n    unicode: fullUnicode,\n    done: false\n  });\n}, REGEXP_STRING, function next() {\n  var state = getInternalState(this);\n  if (state.done) return createIterResultObject(undefined, true);\n  var R = state.regexp;\n  var S = state.string;\n  var match = regExpExec(R, S);\n  if (match === null) {\n    state.done = true;\n    return createIterResultObject(undefined, true);\n  }\n  if (state.global) {\n    if (toString(match[0]) === '') R.lastIndex = advanceStringIndex(S, toLength(R.lastIndex), state.unicode);\n    return createIterResultObject(match, false);\n  }\n  state.done = true;\n  return createIterResultObject(match, false);\n});\n\nvar $matchAll = function (string) {\n  var R = anObject(this);\n  var S = toString(string);\n  var C = speciesConstructor(R, RegExp);\n  var flags = toString(getRegExpFlags(R));\n  var matcher, $global, fullUnicode;\n  matcher = new C(C === RegExp ? R.source : R, flags);\n  $global = !!~stringIndexOf(flags, 'g');\n  fullUnicode = !!~stringIndexOf(flags, 'u');\n  matcher.lastIndex = toLength(R.lastIndex);\n  return new $RegExpStringIterator(matcher, S, $global, fullUnicode);\n};\n\n// `String.prototype.matchAll` method\n// https://tc39.es/ecma262/#sec-string.prototype.matchall\n$({ target: 'String', proto: true, forced: WORKS_WITH_NON_GLOBAL_REGEX }, {\n  matchAll: function matchAll(regexp) {\n    var O = requireObjectCoercible(this);\n    var flags, S, matcher, rx;\n    if (!isNullOrUndefined(regexp)) {\n      if (isRegExp(regexp)) {\n        flags = toString(requireObjectCoercible(getRegExpFlags(regexp)));\n        if (!~stringIndexOf(flags, 'g')) throw new $TypeError('`.matchAll` does not allow non-global regexes');\n      }\n      if (WORKS_WITH_NON_GLOBAL_REGEX) return nativeMatchAll(O, regexp);\n      matcher = getMethod(regexp, MATCH_ALL);\n      if (matcher === undefined && IS_PURE && classof(regexp) === 'RegExp') matcher = $matchAll;\n      if (matcher) return call(matcher, regexp, O);\n    } else if (WORKS_WITH_NON_GLOBAL_REGEX) return nativeMatchAll(O, regexp);\n    S = toString(O);\n    rx = new RegExp(regexp, 'g');\n    return IS_PURE ? call($matchAll, rx, S) : rx[MATCH_ALL](S);\n  }\n});\n\nIS_PURE || MATCH_ALL in RegExpPrototype || defineBuiltIn(RegExpPrototype, MATCH_ALL, $matchAll);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.string.match-all.js?")},28551:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar isObject = __webpack_require__(20034);\n\nvar $String = String;\nvar $TypeError = TypeError;\n\n// `Assert: Type(argument) is Object`\nmodule.exports = function (argument) {\n  if (isObject(argument)) return argument;\n  throw new $TypeError($String(argument) + ' is not an object');\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/an-object.js?")},28706:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar fails = __webpack_require__(79039);\nvar isArray = __webpack_require__(34376);\nvar isObject = __webpack_require__(20034);\nvar toObject = __webpack_require__(48981);\nvar lengthOfArrayLike = __webpack_require__(26198);\nvar doesNotExceedSafeInteger = __webpack_require__(96837);\nvar createProperty = __webpack_require__(97040);\nvar arraySpeciesCreate = __webpack_require__(1469);\nvar arrayMethodHasSpeciesSupport = __webpack_require__(70597);\nvar wellKnownSymbol = __webpack_require__(78227);\nvar V8_VERSION = __webpack_require__(39519);\n\nvar IS_CONCAT_SPREADABLE = wellKnownSymbol('isConcatSpreadable');\n\n// We can't use this feature detection in V8 since it causes\n// deoptimization and serious performance degradation\n// https://github.com/zloirock/core-js/issues/679\nvar IS_CONCAT_SPREADABLE_SUPPORT = V8_VERSION >= 51 || !fails(function () {\n  var array = [];\n  array[IS_CONCAT_SPREADABLE] = false;\n  return array.concat()[0] !== array;\n});\n\nvar isConcatSpreadable = function (O) {\n  if (!isObject(O)) return false;\n  var spreadable = O[IS_CONCAT_SPREADABLE];\n  return spreadable !== undefined ? !!spreadable : isArray(O);\n};\n\nvar FORCED = !IS_CONCAT_SPREADABLE_SUPPORT || !arrayMethodHasSpeciesSupport('concat');\n\n// `Array.prototype.concat` method\n// https://tc39.es/ecma262/#sec-array.prototype.concat\n// with adding support of @@isConcatSpreadable and @@species\n$({ target: 'Array', proto: true, arity: 1, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  concat: function concat(arg) {\n    var O = toObject(this);\n    var A = arraySpeciesCreate(O, 0);\n    var n = 0;\n    var i, k, length, len, E;\n    for (i = -1, length = arguments.length; i < length; i++) {\n      E = i === -1 ? O : arguments[i];\n      if (isConcatSpreadable(E)) {\n        len = lengthOfArrayLike(E);\n        doesNotExceedSafeInteger(n + len);\n        for (k = 0; k < len; k++, n++) if (k in E) createProperty(A, n, E[k]);\n      } else {\n        doesNotExceedSafeInteger(n + 1);\n        createProperty(A, n++, E);\n      }\n    }\n    A.length = n;\n    return A;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array.concat.js?")},28845:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar globalThis = __webpack_require__(44576);\nvar call = __webpack_require__(69565);\nvar ArrayBufferViewCore = __webpack_require__(94644);\nvar lengthOfArrayLike = __webpack_require__(26198);\nvar toOffset = __webpack_require__(58229);\nvar toIndexedObject = __webpack_require__(48981);\nvar fails = __webpack_require__(79039);\n\nvar RangeError = globalThis.RangeError;\nvar Int8Array = globalThis.Int8Array;\nvar Int8ArrayPrototype = Int8Array && Int8Array.prototype;\nvar $set = Int8ArrayPrototype && Int8ArrayPrototype.set;\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\nvar WORKS_WITH_OBJECTS_AND_GENERIC_ON_TYPED_ARRAYS = !fails(function () {\n  // eslint-disable-next-line es/no-typed-arrays -- required for testing\n  var array = new Uint8ClampedArray(2);\n  call($set, array, { length: 1, 0: 3 }, 1);\n  return array[1] !== 3;\n});\n\n// https://bugs.chromium.org/p/v8/issues/detail?id=11294 and other\nvar TO_OBJECT_BUG = WORKS_WITH_OBJECTS_AND_GENERIC_ON_TYPED_ARRAYS && ArrayBufferViewCore.NATIVE_ARRAY_BUFFER_VIEWS && fails(function () {\n  var array = new Int8Array(2);\n  array.set(1);\n  array.set('2', 1);\n  return array[0] !== 0 || array[1] !== 2;\n});\n\n// `%TypedArray%.prototype.set` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.set\nexportTypedArrayMethod('set', function set(arrayLike /* , offset */) {\n  aTypedArray(this);\n  var offset = toOffset(arguments.length > 1 ? arguments[1] : undefined, 1);\n  var src = toIndexedObject(arrayLike);\n  if (WORKS_WITH_OBJECTS_AND_GENERIC_ON_TYPED_ARRAYS) return call($set, this, src, offset);\n  var length = this.length;\n  var len = lengthOfArrayLike(src);\n  var index = 0;\n  if (len + offset > length) throw new RangeError('Wrong length');\n  while (index < len) this[offset + index] = src[index++];\n}, !WORKS_WITH_OBJECTS_AND_GENERIC_ON_TYPED_ARRAYS || TO_OBJECT_BUG);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.set.js?")},29150:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar call = __webpack_require__(69565);\nvar anObject = __webpack_require__(28551);\nvar getIteratorDirect = __webpack_require__(1767);\nvar notANaN = __webpack_require__(24149);\nvar toPositiveInteger = __webpack_require__(99590);\nvar createAsyncIteratorProxy = __webpack_require__(92059);\nvar createIterResultObject = __webpack_require__(62529);\nvar IS_PURE = __webpack_require__(96395);\n\nvar AsyncIteratorProxy = createAsyncIteratorProxy(function (Promise) {\n  var state = this;\n\n  return new Promise(function (resolve, reject) {\n    var doneAndReject = function (error) {\n      state.done = true;\n      reject(error);\n    };\n\n    var loop = function () {\n      try {\n        Promise.resolve(anObject(call(state.next, state.iterator))).then(function (step) {\n          try {\n            if (anObject(step).done) {\n              state.done = true;\n              resolve(createIterResultObject(undefined, true));\n            } else if (state.remaining) {\n              state.remaining--;\n              loop();\n            } else resolve(createIterResultObject(step.value, false));\n          } catch (err) { doneAndReject(err); }\n        }, doneAndReject);\n      } catch (error) { doneAndReject(error); }\n    };\n\n    loop();\n  });\n});\n\n// `AsyncIterator.prototype.drop` method\n// https://github.com/tc39/proposal-async-iterator-helpers\n$({ target: 'AsyncIterator', proto: true, real: true, forced: IS_PURE }, {\n  drop: function drop(limit) {\n    anObject(this);\n    var remaining = toPositiveInteger(notANaN(+limit));\n    return new AsyncIteratorProxy(getIteratorDirect(this), {\n      remaining: remaining\n    });\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.async-iterator.drop.js?")},29309:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar globalThis = __webpack_require__(44576);\nvar setTask = (__webpack_require__(59225).set);\nvar schedulersFix = __webpack_require__(79472);\n\n// https://github.com/oven-sh/bun/issues/1633\nvar setImmediate = globalThis.setImmediate ? schedulersFix(setTask, false) : setTask;\n\n// `setImmediate` method\n// http://w3c.github.io/setImmediate/#si-setImmediate\n$({ global: true, bind: true, enumerable: true, forced: globalThis.setImmediate !== setImmediate }, {\n  setImmediate: setImmediate\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/web.set-immediate.js?")},29314:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar call = __webpack_require__(69565);\nvar anObject = __webpack_require__(28551);\nvar getIteratorDirect = __webpack_require__(1767);\nvar notANaN = __webpack_require__(24149);\nvar toPositiveInteger = __webpack_require__(99590);\nvar createIteratorProxy = __webpack_require__(19462);\nvar IS_PURE = __webpack_require__(96395);\n\nvar IteratorProxy = createIteratorProxy(function () {\n  var iterator = this.iterator;\n  var next = this.next;\n  var result, done;\n  while (this.remaining) {\n    this.remaining--;\n    result = anObject(call(next, iterator));\n    done = this.done = !!result.done;\n    if (done) return;\n  }\n  result = anObject(call(next, iterator));\n  done = this.done = !!result.done;\n  if (!done) return result.value;\n});\n\n// `Iterator.prototype.drop` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.drop\n$({ target: 'Iterator', proto: true, real: true, forced: IS_PURE }, {\n  drop: function drop(limit) {\n    anObject(this);\n    var remaining = toPositiveInteger(notANaN(+limit));\n    return new IteratorProxy(getIteratorDirect(this), {\n      remaining: remaining\n    });\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.iterator.drop.js?")},29423:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar ArrayBufferViewCore = __webpack_require__(94644);\nvar fails = __webpack_require__(79039);\nvar arraySlice = __webpack_require__(67680);\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar getTypedArrayConstructor = ArrayBufferViewCore.getTypedArrayConstructor;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\nvar FORCED = fails(function () {\n  // eslint-disable-next-line es/no-typed-arrays -- required for testing\n  new Int8Array(1).slice();\n});\n\n// `%TypedArray%.prototype.slice` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.slice\nexportTypedArrayMethod('slice', function slice(start, end) {\n  var list = arraySlice(aTypedArray(this), start, end);\n  var C = getTypedArrayConstructor(this);\n  var index = 0;\n  var length = list.length;\n  var result = new C(length);\n  while (length > index) result[index] = list[index++];\n  return result;\n}, FORCED);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.slice.js?")},29833:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar createTypedArrayConstructor = __webpack_require__(15823);\n\n// `Float64Array` constructor\n// https://tc39.es/ecma262/#sec-typedarray-objects\ncreateTypedArrayConstructor('Float64', function (init) {\n  return function Float64Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.float64-array.js?")},29908:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar is = __webpack_require__(3470);\n\n// `Object.is` method\n// https://tc39.es/ecma262/#sec-object.is\n$({ target: 'Object', stat: true }, {\n  is: is\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.object.is.js?")},29948:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar arrayFromConstructorAndList = __webpack_require__(35370);\nvar getTypedArrayConstructor = (__webpack_require__(94644).getTypedArrayConstructor);\n\nmodule.exports = function (instance, list) {\n  return arrayFromConstructorAndList(getTypedArrayConstructor(instance), list);\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/typed-array-from-same-type-and-list.js?")},30067:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove this module from `core-js@4` since it's replaced to module below\n__webpack_require__(17145);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.aggregate-error.js?")},30237:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// this method was added to unscopables after implementation\n// in popular engines, so it's moved to a separate module\nvar addToUnscopables = __webpack_require__(6469);\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('flatMap');\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array.unscopables.flat-map.js?")},30421:module=>{"use strict";eval("\nmodule.exports = {};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/hidden-keys.js?")},30465:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar defineWellKnownSymbol = __webpack_require__(70511);\n\n// `Symbol.metadata` well-known symbol\n// https://github.com/tc39/proposal-decorators\ndefineWellKnownSymbol('metadata');\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.symbol.metadata.js?")},30531:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar call = __webpack_require__(69565);\nvar aCallable = __webpack_require__(79306);\nvar anObject = __webpack_require__(28551);\nvar getIteratorDirect = __webpack_require__(1767);\nvar getIteratorFlattenable = __webpack_require__(48646);\nvar createIteratorProxy = __webpack_require__(19462);\nvar iteratorClose = __webpack_require__(9539);\nvar IS_PURE = __webpack_require__(96395);\n\nvar IteratorProxy = createIteratorProxy(function () {\n  var iterator = this.iterator;\n  var mapper = this.mapper;\n  var result, inner;\n\n  while (true) {\n    if (inner = this.inner) try {\n      result = anObject(call(inner.next, inner.iterator));\n      if (!result.done) return result.value;\n      this.inner = null;\n    } catch (error) { iteratorClose(iterator, 'throw', error); }\n\n    result = anObject(call(this.next, iterator));\n\n    if (this.done = !!result.done) return;\n\n    try {\n      this.inner = getIteratorFlattenable(mapper(result.value, this.counter++), false);\n    } catch (error) { iteratorClose(iterator, 'throw', error); }\n  }\n});\n\n// `Iterator.prototype.flatMap` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.flatmap\n$({ target: 'Iterator', proto: true, real: true, forced: IS_PURE }, {\n  flatMap: function flatMap(mapper) {\n    anObject(this);\n    aCallable(mapper);\n    return new IteratorProxy(getIteratorDirect(this), {\n      mapper: mapper,\n      inner: null\n    });\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.iterator.flat-map.js?")},30566:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar uncurryThis = __webpack_require__(79504);\nvar aCallable = __webpack_require__(79306);\nvar isObject = __webpack_require__(20034);\nvar hasOwn = __webpack_require__(39297);\nvar arraySlice = __webpack_require__(67680);\nvar NATIVE_BIND = __webpack_require__(40616);\n\nvar $Function = Function;\nvar concat = uncurryThis([].concat);\nvar join = uncurryThis([].join);\nvar factories = {};\n\nvar construct = function (C, argsLength, args) {\n  if (!hasOwn(factories, argsLength)) {\n    var list = [];\n    var i = 0;\n    for (; i < argsLength; i++) list[i] = 'a[' + i + ']';\n    factories[argsLength] = $Function('C,a', 'return new C(' + join(list, ',') + ')');\n  } return factories[argsLength](C, args);\n};\n\n// `Function.prototype.bind` method implementation\n// https://tc39.es/ecma262/#sec-function.prototype.bind\n// eslint-disable-next-line es/no-function-prototype-bind -- detection\nmodule.exports = NATIVE_BIND ? $Function.bind : function bind(that /* , ...args */) {\n  var F = aCallable(this);\n  var Prototype = F.prototype;\n  var partArgs = arraySlice(arguments, 1);\n  var boundFunction = function bound(/* args... */) {\n    var args = concat(partArgs, arraySlice(arguments));\n    return this instanceof boundFunction ? construct(F, args.length, args) : F.apply(that, args);\n  };\n  if (isObject(Prototype)) boundFunction.prototype = Prototype;\n  return boundFunction;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/function-bind.js?")},30670:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(30531);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.iterator.flat-map.js?")},30793:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";eval("\n\n__webpack_require__(84185);\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.PdfAnnotationType = void 0;\n/**\n * @namespace PdfAnnotationType\n */\nvar PdfAnnotationType = exports.PdfAnnotationType = {\n  /**\n   * Enum for annotation subtypes.\n   * @enum {string}\n   */\n  SubType: {\n    TEXT: 'Text',\n    LINK: 'Link',\n    FREETEXT: 'Freetext',\n    LINE: 'Line',\n    SQUARE: 'Square',\n    CIRCLE: 'Circle',\n    POLYGON: 'Polygon',\n    POLYLINE: 'Polyline',\n    HIGHLIGHT: 'Highlight',\n    UNDERLINE: 'Underline',\n    SQUIGGLY: 'Squiggly',\n    STRIKEOUT: 'StrikeOut',\n    STAMP: 'Stamp',\n    CARET: 'Caret',\n    INK: 'Ink',\n    POPUP: 'Popup',\n    FILEATTACHMENT: 'Fileattachment',\n    SOUND: 'Sound',\n    MOVIE: 'Movie',\n    WIDGET: 'Widget',\n    SCREEN: 'Screen',\n    PRINTERMARK: 'Printermark',\n    TRAPNET: 'Trapnet',\n    WATERMARK: 'Watermark',\n    THREED: 'Threed',\n    REDACT: 'Redact',\n    ERASER: 'Eraser',\n    NONE: 'None'\n  },\n  Eraser: {\n    NONE: 'None',\n    NORMAL: 'Normal',\n    OBJECT: 'Object'\n  },\n  Search: {}\n};\n\n//# sourceURL=webpack://ViewerJS/./src/pdf/types/pdfTypes.js?")},30958:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove this module from `core-js@4` since it's replaced to module below\n__webpack_require__(5240);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.weak-set.js?")},30985:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar getBuiltIn = __webpack_require__(97751);\nvar anObject = __webpack_require__(28551);\nvar FREEZING = __webpack_require__(92744);\n\n// `Reflect.preventExtensions` method\n// https://tc39.es/ecma262/#sec-reflect.preventextensions\n$({ target: 'Reflect', stat: true, sham: !FREEZING }, {\n  preventExtensions: function preventExtensions(target) {\n    anObject(target);\n    try {\n      var objectPreventExtensions = getBuiltIn('Object', 'preventExtensions');\n      if (objectPreventExtensions) objectPreventExtensions(target);\n      return true;\n    } catch (error) {\n      return false;\n    }\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.reflect.prevent-extensions.js?")},31051:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar fails = __webpack_require__(79039);\nvar isConstructor = __webpack_require__(33517);\nvar createProperty = __webpack_require__(97040);\n\nvar $Array = Array;\n\nvar ISNT_GENERIC = fails(function () {\n  function F() { /* empty */ }\n  // eslint-disable-next-line es/no-array-of -- safe\n  return !($Array.of.call(F) instanceof F);\n});\n\n// `Array.of` method\n// https://tc39.es/ecma262/#sec-array.of\n// WebKit Array.of isn't generic\n$({ target: 'Array', stat: true, forced: ISNT_GENERIC }, {\n  of: function of(/* ...args */) {\n    var index = 0;\n    var argumentsLength = arguments.length;\n    var result = new (isConstructor(this) ? this : $Array)(argumentsLength);\n    while (argumentsLength > index) createProperty(result, index, arguments[index++]);\n    result.length = argumentsLength;\n    return result;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array.of.js?")},31073:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar defineWellKnownSymbol = __webpack_require__(70511);\n\n// `Symbol.split` well-known symbol\n// https://tc39.es/ecma262/#sec-symbol.split\ndefineWellKnownSymbol('split');\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.symbol.split.js?")},31240:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar uncurryThis = __webpack_require__(79504);\n\n// `thisNumberValue` abstract operation\n// https://tc39.es/ecma262/#sec-thisnumbervalue\nmodule.exports = uncurryThis(1.0.valueOf);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/this-number-value.js?")},31415:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove this module from `core-js@4` since it's replaced to module below\n__webpack_require__(92405);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.set.js?")},31575:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar ArrayBufferViewCore = __webpack_require__(94644);\nvar $reduce = (__webpack_require__(80926).left);\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.reduce` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.reduce\nexportTypedArrayMethod('reduce', function reduce(callbackfn /* , initialValue */) {\n  var length = arguments.length;\n  return $reduce(aTypedArray(this), callbackfn, length, length > 1 ? arguments[1] : undefined);\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.reduce.js?")},31689:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar globalThis = __webpack_require__(44576);\nvar apply = __webpack_require__(18745);\nvar slice = __webpack_require__(67680);\nvar newPromiseCapabilityModule = __webpack_require__(36043);\nvar aCallable = __webpack_require__(79306);\nvar perform = __webpack_require__(1103);\n\nvar Promise = globalThis.Promise;\n\nvar ACCEPT_ARGUMENTS = false;\n// Avoiding the use of polyfills of the previous iteration of this proposal\n// that does not accept arguments of the callback\nvar FORCED = !Promise || !Promise['try'] || perform(function () {\n  Promise['try'](function (argument) {\n    ACCEPT_ARGUMENTS = argument === 8;\n  }, 8);\n}).error || !ACCEPT_ARGUMENTS;\n\n// `Promise.try` method\n// https://tc39.es/ecma262/#sec-promise.try\n$({ target: 'Promise', stat: true, forced: FORCED }, {\n  'try': function (callbackfn /* , ...args */) {\n    var args = arguments.length > 1 ? slice(arguments, 1) : [];\n    var promiseCapability = newPromiseCapabilityModule.f(this);\n    var result = perform(function () {\n      return apply(aCallable(callbackfn), undefined, args);\n    });\n    (result.error ? promiseCapability.reject : promiseCapability.resolve)(result.value);\n    return promiseCapability.promise;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.promise.try.js?")},31694:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar ArrayBufferViewCore = __webpack_require__(94644);\nvar $find = (__webpack_require__(59213).find);\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.find` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.find\nexportTypedArrayMethod('find', function find(predicate /* , thisArg */) {\n  return $find(aTypedArray(this), predicate, arguments.length > 1 ? arguments[1] : undefined);\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.find.js?")},31698:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar union = __webpack_require__(44204);\nvar setMethodAcceptSetLike = __webpack_require__(84916);\n\n// `Set.prototype.union` method\n// https://tc39.es/ecma262/#sec-set.prototype.union\n$({ target: 'Set', proto: true, real: true, forced: !setMethodAcceptSetLike('union') }, {\n  union: union\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.set.union.v2.js?")},32357:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar DESCRIPTORS = __webpack_require__(43724);\nvar fails = __webpack_require__(79039);\nvar uncurryThis = __webpack_require__(79504);\nvar objectGetPrototypeOf = __webpack_require__(42787);\nvar objectKeys = __webpack_require__(71072);\nvar toIndexedObject = __webpack_require__(25397);\nvar $propertyIsEnumerable = (__webpack_require__(48773).f);\n\nvar propertyIsEnumerable = uncurryThis($propertyIsEnumerable);\nvar push = uncurryThis([].push);\n\n// in some IE versions, `propertyIsEnumerable` returns incorrect result on integer keys\n// of `null` prototype objects\nvar IE_BUG = DESCRIPTORS && fails(function () {\n  // eslint-disable-next-line es/no-object-create -- safe\n  var O = Object.create(null);\n  O[2] = 2;\n  return !propertyIsEnumerable(O, 2);\n});\n\n// `Object.{ entries, values }` methods implementation\nvar createMethod = function (TO_ENTRIES) {\n  return function (it) {\n    var O = toIndexedObject(it);\n    var keys = objectKeys(O);\n    var IE_WORKAROUND = IE_BUG && objectGetPrototypeOf(O) === null;\n    var length = keys.length;\n    var i = 0;\n    var result = [];\n    var key;\n    while (length > i) {\n      key = keys[i++];\n      if (!DESCRIPTORS || (IE_WORKAROUND ? key in O : propertyIsEnumerable(O, key))) {\n        push(result, TO_ENTRIES ? [key, O[key]] : O[key]);\n      }\n    }\n    return result;\n  };\n};\n\nmodule.exports = {\n  // `Object.entries` method\n  // https://tc39.es/ecma262/#sec-object.entries\n  entries: createMethod(true),\n  // `Object.values` method\n  // https://tc39.es/ecma262/#sec-object.values\n  values: createMethod(false)\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/object-to-array.js?")},32376:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// https://github.com/tc39/proposal-is-error\n__webpack_require__(26615);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/proposals/is-error.js?")},32475:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar isSupersetOf = __webpack_require__(28527);\nvar setMethodAcceptSetLike = __webpack_require__(84916);\n\nvar INCORRECT = !setMethodAcceptSetLike('isSupersetOf', function (result) {\n  return !result;\n});\n\n// `Set.prototype.isSupersetOf` method\n// https://tc39.es/ecma262/#sec-set.prototype.issupersetof\n$({ target: 'Set', proto: true, real: true, forced: INCORRECT }, {\n  isSupersetOf: isSupersetOf\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.set.is-superset-of.v2.js?")},32603:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar toString = __webpack_require__(655);\n\nmodule.exports = function (argument, $default) {\n  return argument === undefined ? arguments.length < 2 ? '' : $default : toString(argument);\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/normalize-string-argument.js?")},32604:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";eval('\n\nfunction _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\n__webpack_require__(52675);\n__webpack_require__(89463);\n__webpack_require__(2259);\n__webpack_require__(94490);\n__webpack_require__(34782);\n__webpack_require__(62010);\n__webpack_require__(59904);\n__webpack_require__(84185);\n__webpack_require__(40875);\n__webpack_require__(10287);\nObject.defineProperty(exports, "__esModule", ({\n  value: true\n}));\nexports.activeTouchAction = activeTouchAction;\nexports.calculateOptimalScale = calculateOptimalScale;\nexports.detectDevicePerformance = detectDevicePerformance;\nexports.disableTouchAction = disableTouchAction;\nexports.disableUserSelect = disableUserSelect;\nexports.drawTextRectsOnCanvas = drawTextRectsOnCanvas;\nexports.findNearestRect = findNearestRect;\nexports.findNearestTextInfo = findNearestTextInfo;\nexports.findRectNearPoint = findRectNearPoint;\nexports.formatToPdfDate = formatToPdfDate;\nexports.getCenterPoint = getCenterPoint;\nexports.getDistance = getDistance;\nexports.getDistanceToRect = getDistanceToRect;\nexports.getPdfScreenRect = exports.getPdfRelativeRectRatio = void 0;\nexports.getRandomRGBA = getRandomRGBA;\nexports.getTextRects = getTextRects;\nexports.hexToRgb = hexToRgb;\nexports.highestVisibleId = highestVisibleId;\nexports.isInputElement = isInputElement;\nexports.isInsideBox = isInsideBox;\nexports.isPointNearRect = isPointNearRect;\nexports.isScrollable = void 0;\nexports.normalizeTextContent = normalizeTextContent;\nexports.parseQueryString = parseQueryString;\nexports.removeNullCharacters = removeNullCharacters;\nexports.smoothScrollTo = smoothScrollTo;\nexports.validateNumberInput = validateNumberInput;\nexports.watchScroll = watchScroll;\n__webpack_require__(28706);\n__webpack_require__(33771);\n__webpack_require__(51629);\n__webpack_require__(23418);\n__webpack_require__(74423);\n__webpack_require__(64346);\n__webpack_require__(23792);\n__webpack_require__(48598);\n__webpack_require__(62062);\n__webpack_require__(26910);\n__webpack_require__(23288);\n__webpack_require__(36033);\n__webpack_require__(39469);\n__webpack_require__(2892);\n__webpack_require__(25428);\n__webpack_require__(9868);\n__webpack_require__(26099);\n__webpack_require__(58940);\n__webpack_require__(3362);\n__webpack_require__(27495);\n__webpack_require__(38781);\n__webpack_require__(21699);\n__webpack_require__(47764);\n__webpack_require__(68156);\n__webpack_require__(25440);\n__webpack_require__(12041);\n__webpack_require__(23500);\n__webpack_require__(62953);\n__webpack_require__(48408);\nfunction _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a \'" + n + "\' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction formatToPdfDate() {\n  var date = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Date();\n  var pad = function pad(n) {\n    var width = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;\n    return n.toString().padStart(width, \'0\');\n  };\n  var year = date.getFullYear();\n  var month = pad(date.getMonth() + 1);\n  var day = pad(date.getDate());\n  var hour = pad(date.getHours());\n  var minute = pad(date.getMinutes());\n  var second = pad(date.getSeconds());\n\n  // Timezone offset (in minutes)\n  var offsetMin = -date.getTimezoneOffset(); // JS 기준: 반대 방향이므로 -붙임\n  var sign = offsetMin >= 0 ? \'+\' : \'-\';\n  var offsetHour = pad(Math.floor(Math.abs(offsetMin) / 60));\n  var offsetMinute = pad(Math.abs(offsetMin) % 60);\n  return "D:".concat(year).concat(month).concat(day).concat(hour).concat(minute).concat(second).concat(sign).concat(offsetHour, "\'").concat(offsetMinute, "\'");\n}\n\n/**\n * 스크롤내 보이는 child Element가 실제로 보여지는 퍼센트\n * @param {HTMLElement} ulElement\n * @param {boolean} overflowY 스크롤 방향\n * @returns\n */\nfunction calculateVisiblePercentages(ulElement, overflowY) {\n  var ulRect = ulElement.getBoundingClientRect();\n  var liElements = ulElement.querySelectorAll(\'[data-section="pdfview"]\');\n  return Array.from(liElements).map(function (li) {\n    var liRect = li.getBoundingClientRect();\n    if (!overflowY) {\n      // 가시 영역의 너비 계산 (X 방향)\n      var visibleWidth = Math.min(liRect.right, ulRect.right) - Math.max(liRect.left, ulRect.left);\n      var _percentage = visibleWidth > 0 ? visibleWidth / liRect.width * 100 : 0;\n      return {\n        element: li,\n        percentage: Math.min(Math.max(_percentage, 0), 100) // 퍼센트 클램핑 (0 ~ 100)\n      };\n    }\n    var visibleHeight = Math.min(liRect.bottom, ulRect.bottom) - Math.max(liRect.top, ulRect.top);\n    var percentage = visibleHeight > 0 ? visibleHeight / liRect.height * 100 : 0;\n    return {\n      element: li,\n      percentage: Math.min(Math.max(percentage, 0), 100) // 퍼센트 클램핑 (0 ~ 100)\n    };\n  });\n}\n\n/**\n * 스크롤내 보이는 child Element중 가장 많이 보여지는 객체를 찾는다\n * @param {HTMLElement} ulElement\n * @param {boolean} overflowY 스크롤 방향\n * @returns\n */\nfunction highestVisibleId(ulElement) {\n  var overflowY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  var ulRect = ulElement.getBoundingClientRect();\n  var liElements = ulElement.querySelectorAll(\'[data-section="pdfview"]\');\n  if (liElements.length === 0) return null;\n  var center = overflowY ? ulRect.top + ulRect.height / 2 : ulRect.left + ulRect.width / 2;\n  var closestElement = null;\n  var closestDistance = Infinity;\n  var closestIndex = -1;\n  var closestToTop = null;\n  var closestTopDistance = Infinity;\n  var topIndex = -1;\n  liElements.forEach(function (li, idx) {\n    var liRect = li.getBoundingClientRect();\n    var elementCenter = overflowY ? liRect.top + liRect.height / 2 : liRect.left + liRect.width / 2;\n    var distance = Math.abs(center - elementCenter);\n    if (distance < closestDistance) {\n      closestDistance = distance;\n      closestElement = li;\n      closestIndex = idx;\n    }\n    var topDistance = overflowY ? Math.abs(ulRect.top - liRect.top) : Math.abs(ulRect.left - liRect.left);\n    if (topDistance < closestTopDistance) {\n      closestTopDistance = topDistance;\n      closestToTop = li;\n      topIndex = idx;\n    }\n  });\n  var isLast = closestIndex == liElements.length - 1;\n  return closestElement ? {\n    element: closestElement,\n    distance: closestDistance,\n    isLast: isLast,\n    closestToTop: closestToTop,\n    closestTopDistance: closestTopDistance\n  } : null;\n}\n\n/**\n * Helper function to start monitoring the scroll event and converting them into\n * PDF.js friendly one: with scroll debounce and scroll direction.\n */\nfunction watchScroll(viewAreaElement, callback) {\n  var abortSignal = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n  var debounceScroll = function debounceScroll(evt) {\n    if (rAF) {\n      return;\n    }\n    // schedule an invocation of scroll for next animation frame.\n    rAF = window.requestAnimationFrame(function viewAreaElementScrolled() {\n      rAF = null;\n      var currentX = viewAreaElement.scrollLeft;\n      var lastX = state.lastX;\n      if (currentX !== lastX) {\n        state.right = currentX > lastX;\n      }\n      state.lastX = currentX;\n      var currentY = viewAreaElement.scrollTop;\n      var lastY = state.lastY;\n      if (currentY !== lastY) {\n        state.down = currentY > lastY;\n      }\n      state.lastY = currentY;\n      callback(state);\n    });\n  };\n  var state = {\n    right: true,\n    down: true,\n    lastX: viewAreaElement.scrollLeft,\n    lastY: viewAreaElement.scrollTop,\n    _eventHandler: debounceScroll\n  };\n  var rAF = null;\n  viewAreaElement.addEventListener(\'scroll\', debounceScroll, {\n    useCapture: true,\n    signal: abortSignal\n  });\n  abortSignal === null || abortSignal === void 0 || abortSignal.addEventListener(\'abort\', function () {\n    return window.cancelAnimationFrame(rAF);\n  }, {\n    once: true\n  });\n  return state;\n}\nfunction calculateOptimalScale(targetWidth, targetHeight, originalWidth, originalHeight) {\n  var parentWidth = targetWidth;\n  var parentHeight = targetHeight;\n  var scaleWidth = parentWidth / originalWidth;\n  var scaleHeight = parentHeight / originalHeight;\n  return Math.min(scaleWidth, scaleHeight); // 화면에 맞는 최소 스케일 선택\n}\n\n/**\n * random color\n */\nfunction getRandomRGBA() {\n  var r = Math.floor(Math.random() * 256); // Random red value between 0 and 255\n  var g = Math.floor(Math.random() * 256); // Random green value between 0 and 255\n  var b = Math.floor(Math.random() * 256); // Random blue value between 0 and 255\n  var a = Math.random().toFixed(2); // Random alpha value between 0 and 1 (with 2 decimal places)\n\n  return "rgba(".concat(r, ", ").concat(g, ", ").concat(b, ", ").concat(a, ")");\n}\nfunction hexToRgb(hex) {\n  // 앞에 \'#\' 제거\n  hex = hex.replace(/^#/, \'\');\n\n  // 짧은 형식 (#fff) → 긴 형식 (#ffffff) 변환\n  if (hex.length === 3) {\n    hex = hex.split(\'\').map(function (_char) {\n      return _char + _char;\n    }).join(\'\');\n  }\n  var bigint = parseInt(hex, 16);\n  var r = bigint >> 16 & 255;\n  var g = bigint >> 8 & 255;\n  var b = bigint & 255;\n  return [r, g, b];\n}\n/**\n *\n * @param {any} value\n * @returns\n */\nfunction validateNumberInput(value) {\n  if (typeof value === \'number\' && Number.isFinite(value)) {\n    return true;\n  }\n  throw new Error(\'Invalid input: Only finite numbers are allowed.\');\n}\n\n/**\n * 두 손가락의 가운데 지점을 계산하는 함수\n * @param {TouchEvent} event - 터치 이벤트 객체\n * @returns {Object} 가운데 지점의 x, y 좌표\n */\nfunction getCenterPoint(event) {\n  if (event.touches.length < 2) return null; // 두 손가락이 있어야만 계산\n\n  // 두 손가락의 첫 번째와 두 번째 터치 포인트\n  var touch1 = event.touches[0];\n  var touch2 = event.touches[1];\n\n  // 가운데 지점 계산\n  var centerX = (touch1.pageX + touch2.pageX) / 2;\n  var centerY = (touch1.pageY + touch2.pageY) / 2;\n  return {\n    x: centerX,\n    y: centerY\n  };\n}\n/**\n * 두 손가락의 가운데 지점을 계산하는 함수\n * @param {TouchEvent} event - 터치 이벤트 객체\n * @returns {Object} 가운데 지점의 x, y 좌표\n */\nfunction getDistance(event) {\n  var dx = event.touches[0].clientX - event.touches[1].clientX;\n  var dy = event.touches[0].clientY - event.touches[1].clientY;\n  return Math.sqrt(dx * dx + dy * dy);\n}\nfunction disableUserSelect(element) {\n  element.style.userSelect = \'none\';\n  element.style.webkitUserSelect = \'none\';\n  element.style.mozUserSelect = \'none\';\n  element.style.msUserSelect = \'none\';\n  // element.style.touchAction = \'none\';\n}\nfunction disableTouchAction(element) {\n  element.style.touchAction = \'none\';\n}\nfunction activeTouchAction(element) {\n  element.style.touchAction = null;\n}\n/**\n * Helper function to parse query string (e.g. ?param1=value&param2=...).\n * @param {string} query\n * @returns {Map}\n */\nfunction parseQueryString(query) {\n  var params = new Map();\n  var _iterator = _createForOfIteratorHelper(new URLSearchParams(query)),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var _step$value = _slicedToArray(_step.value, 2),\n        key = _step$value[0],\n        value = _step$value[1];\n      params.set(key.toLowerCase(), value);\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  return params;\n}\nvar InvisibleCharsRegExp = /[\\x00-\\x1F]/g;\n/**\n * @param {string} str\n * @param {boolean} [replaceInvisible]\n */\nfunction removeNullCharacters(str) {\n  var replaceInvisible = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  if (!InvisibleCharsRegExp.test(str)) {\n    return str;\n  }\n  if (replaceInvisible) {\n    return str.replaceAll(InvisibleCharsRegExp, function (m) {\n      return m === \'\\x00\' ? \'\' : \' \';\n    });\n  }\n  return str.replaceAll(\'\\x00\', \'\');\n}\n/**\n * @private\n */\nfunction normalizeTextContent(str) {\n  // Chars in range [0x01-0x1F] will be replaced with a white space\n  // and 0x00 by "".\n  return removeNullCharacters(str, /* replaceInvisible */true) || /* en dash = */"\\u2013";\n}\nvar animationFrameId = null;\n/**\n * easeInOutCubic: 입력 t (0~1) 에 대해 easeInOut 효과 반환\n * t가 0.5 미만이면 점점 빨라지고, 0.5 이상이면 점점 느려지는 효과\n */\nfunction easeInOutCubic(t) {\n  return t < 0.5 ? 4 * t * t * t : 1 - Math.pow(-2 * t + 2, 3) / 2;\n}\n\n/**\n * smoothScrollTo: 주어진 요소의 scrollLeft/scrollTop을 애니메이션으로 이동\n * @param {HTMLElement} element - 스크롤할 요소\n * @param {number} targetX - 목표 scrollLeft 값\n * @param {number} targetY - 목표 scrollTop 값\n * @param {number} duration - 애니메이션 지속 시간 (밀리초)\n */\nfunction smoothScrollTo(element, targetX, targetY) {\n  var duration = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 500;\n  // 이전 애니메이션이 있으면 취소\n  if (animationFrameId) {\n    cancelAnimationFrame(animationFrameId);\n    animationFrameId = null;\n  }\n  var startX = element.scrollLeft;\n  var startY = element.scrollTop;\n  var distanceX = targetX - startX;\n  var distanceY = targetY - startY;\n  var startTime = null;\n  function animation(currentTime) {\n    if (!startTime) startTime = currentTime;\n    var timeElapsed = currentTime - startTime;\n    var t = Math.min(1, timeElapsed / duration);\n    var easeT = easeInOutCubic(t);\n    element.scrollLeft = startX + distanceX * easeT;\n    element.scrollTop = startY + distanceY * easeT;\n    if (timeElapsed < duration) {\n      animationFrameId = requestAnimationFrame(animation);\n    } else {\n      animationFrameId = null;\n    }\n  }\n  animationFrameId = requestAnimationFrame(animation);\n}\nfunction isMobileDevice() {\n  return /Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent);\n}\nfunction getRefreshRate() {\n  return _getRefreshRate.apply(this, arguments);\n}\nfunction _getRefreshRate() {\n  _getRefreshRate = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          return _context.abrupt("return", new Promise(function (resolve) {\n            var start = performance.now();\n            var frame = 0;\n            function refreshLoop() {\n              frame++;\n              var now = performance.now();\n              if (now - start >= 1000) {\n                resolve(frame); // 1초가 지나면 프레임 수 반환\n              } else {\n                requestAnimationFrame(refreshLoop);\n              }\n            }\n            requestAnimationFrame(refreshLoop);\n          }));\n        case 1:\n        case "end":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return _getRefreshRate.apply(this, arguments);\n}\nfunction detectDevicePerformance() {\n  return _detectDevicePerformance.apply(this, arguments);\n}\n/**\n * PDF -> UI사이즈 비율\n * 원본 사이즈에서 상대적 비율을 찾는데\n * @param {Array} rectParent\n * @param {Array} rectChild\n * @returns\n */\nfunction _detectDevicePerformance() {\n  _detectDevicePerformance = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n    var _gl$getExtension;\n    var isMobile, refreshRate, gl, gpu, isApple, result;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          isMobile = isMobileDevice();\n          _context2.next = 3;\n          return getRefreshRate();\n        case 3:\n          refreshRate = _context2.sent;\n          gl = document.createElement(\'canvas\').getContext(\'webgl\');\n          gpu = gl ? gl.getParameter((_gl$getExtension = gl.getExtension(\'WEBGL_debug_renderer_info\')) === null || _gl$getExtension === void 0 ? void 0 : _gl$getExtension.UNMASKED_RENDERER_WEBGL) : \'Unknown GPU\';\n          isApple = gpu.toLowerCase().includes(\'apple\');\n          result = {\n            deviceType: isMobile ? \'mobile\' : \'pc\',\n            refreshRate: refreshRate,\n            gpu: gpu,\n            isApple: isApple\n          };\n          return _context2.abrupt("return", result);\n        case 9:\n        case "end":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return _detectDevicePerformance.apply(this, arguments);\n}\nvar getPdfRelativeRectRatio = exports.getPdfRelativeRectRatio = function getPdfRelativeRectRatio(rectParent, rectChild) {\n  var _rectParent = _slicedToArray(rectParent, 4),\n    llxParent = _rectParent[0],\n    llyParent = _rectParent[1],\n    urxParent = _rectParent[2],\n    uryParent = _rectParent[3];\n  var _rectChild = _slicedToArray(rectChild, 4),\n    llxChild = _rectChild[0],\n    llyChild = _rectChild[1],\n    urxChild = _rectChild[2],\n    uryChild = _rectChild[3];\n  var parentWidth = urxParent - llxParent;\n  var parentHeight = uryParent - llyParent;\n  var childWidth = urxChild - llxChild;\n  var childHeight = uryChild - llyChild;\n\n  // Parent 내부에서 Child의 상대적 위치\n  var relativeLeft = (llxChild - llxParent) / parentWidth;\n  var relativeTop = (uryParent - uryChild) / parentHeight;\n  var relativeWidth = childWidth / parentWidth;\n  var relativeHeight = childHeight / parentHeight;\n  return {\n    relativeLeft: relativeLeft,\n    relativeTop: relativeTop,\n    relativeWidth: relativeWidth,\n    relativeHeight: relativeHeight\n  };\n};\n/**\n * PDF -> UI사이즈\n * 실제 스크린에 그려지는 pdfRect값\n * @param {Array} rectParent 원본parent의 rect 절대값\n * @param {Array} rectChild 원본child의 rect 절대값\n * @param {number} targetWidth 현재 보여지는 실제 width px값\n * @param {number} targetHeight 현재 보여지는 실제 height px값\n */\nvar getPdfScreenRect = exports.getPdfScreenRect = function getPdfScreenRect(rectParent, rectChild, targetWidth, targetHeight) {\n  var _getPdfRelativeRectRa = getPdfRelativeRectRatio(rectParent, rectChild),\n    relativeHeight = _getPdfRelativeRectRa.relativeHeight,\n    relativeWidth = _getPdfRelativeRectRa.relativeWidth,\n    relativeLeft = _getPdfRelativeRectRa.relativeLeft,\n    relativeTop = _getPdfRelativeRectRa.relativeTop;\n  var childHeight = relativeHeight * targetHeight;\n  var childWidth = relativeWidth * targetWidth;\n  var childLeft = relativeLeft * targetWidth;\n  var childTop = relativeTop * targetHeight;\n  return {\n    width: childWidth,\n    height: childHeight,\n    left: childLeft,\n    top: childTop\n  };\n};\nvar isScrollable = exports.isScrollable = function isScrollable(container) {\n  // 수직 스크롤 가능 여부: 전체 높이(scrollHeight)가 clientHeight보다 큰 경우\n  var verticalScrollable = container.scrollHeight > container.clientHeight;\n  // 수평 스크롤 가능 여부: 전체 너비(scrollWidth)가 clientWidth보다 큰 경우\n  var horizontalScrollable = container.scrollWidth > container.clientWidth;\n  return {\n    vertical: verticalScrollable,\n    horizontal: horizontalScrollable,\n    // 둘 중 하나라도 true이면 스크롤 가능한 상태로 판단\n    scrollable: verticalScrollable || horizontalScrollable\n  };\n};\nfunction isInputElement(event) {\n  var target = event.target;\n\n  // 입력 가능한 폼 요소들 (input, textarea, select, button, contenteditable 속성을 가진 요소)\n  var isEditable = target instanceof HTMLInputElement || target instanceof HTMLTextAreaElement || target instanceof HTMLSelectElement ||\n  // target instanceof HTMLButtonElement ||\n  target.isContentEditable;\n\n  // readonly나 disabled가 설정된 요소는 입력을 받지 않음\n  var isNotReadonlyOrDisabled = !target.readOnly && !target.disabled;\n  return isEditable && isNotReadonlyOrDisabled;\n}\nfunction isInsideBox(mouseX, mouseY, box, target, scrollContainer) {\n  var rect = target.getBoundingClientRect();\n  var left = rect.left + box.left;\n  var top = rect.top + box.top;\n  var width = box.width;\n  var height = box.height;\n  return mouseX >= left && mouseX <= left + width && mouseY >= top && mouseY <= top + height;\n}\nfunction getTextRects(rootElement, parentElement) {\n  var walker = document.createTreeWalker(rootElement, NodeFilter.SHOW_TEXT, null, false);\n  var rects = [];\n  var parentRect = parentElement.getBoundingClientRect();\n  var correctWidth = 5;\n  var node;\n  while (node = walker.nextNode()) {\n    var text = node.textContent;\n    for (var i = 0; i < text.length; i++) {\n      var range = document.createRange();\n      try {\n        range.setStart(node, i);\n        range.setEnd(node, i + 1);\n      } catch (e) {\n        console.warn(\'Range error:\', e);\n        continue;\n      }\n      var rectList = range.getClientRects();\n      var _iterator2 = _createForOfIteratorHelper(rectList),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var rect = _step2.value;\n          if (rect.width > 0 || rect.height > 0) {\n            var correctedRect = {\n              top: rect.top - parentRect.top + parentElement.scrollTop,\n              left: rect.left - parentRect.left + parentElement.scrollLeft,\n              width: rect.width + correctWidth,\n              height: rect.height\n            };\n            rects.push({\n              text: text[i],\n              rect: correctedRect\n            });\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    }\n  }\n  var tolerance = 10; // 허용 오차 범위 (픽셀 단위)\n  // rects를 top, left 기준으로 정렬\n  rects.sort(function (a, b) {\n    if (Math.abs(a.rect.top - b.rect.top) <= tolerance) {\n      return a.rect.left - b.rect.left;\n    }\n    return a.rect.top - b.rect.top;\n  });\n  return rects;\n}\nfunction isPointNearRect(x, y, rect) {\n  var threshold = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 5;\n  var expandedRect = {\n    left: rect.left - threshold,\n    top: rect.top - threshold,\n    right: rect.left + rect.width + threshold,\n    bottom: rect.top + rect.height + threshold\n  };\n  return x >= expandedRect.left && x <= expandedRect.right && y >= expandedRect.top && y <= expandedRect.bottom;\n}\nfunction findRectNearPoint(x, y, rects) {\n  var threshold = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 5;\n  if (Array.isArray(rects)) {\n    var _iterator3 = _createForOfIteratorHelper(rects),\n      _step3;\n    try {\n      for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n        var item = _step3.value;\n        if (isPointNearRect(x, y, item.rect, threshold)) {\n          return item;\n        }\n      }\n    } catch (err) {\n      _iterator3.e(err);\n    } finally {\n      _iterator3.f();\n    }\n  } else {\n    if (isPointNearRect(x, y, rects, threshold)) {\n      return rects;\n    }\n  }\n  return null;\n}\nfunction getDistanceToRect(x, y, rect) {\n  var cx = Math.max(rect.left, Math.min(x, rect.left + rect.width));\n  var cy = Math.max(rect.top, Math.min(y, rect.top + rect.height));\n  return Math.hypot(x - cx, y - cy); // 피타고라스 거리\n}\nfunction findNearestRect(x, y, rects) {\n  var threshold = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 5;\n  var nearest = null;\n  var minDistance = Infinity;\n  var _iterator4 = _createForOfIteratorHelper(rects),\n    _step4;\n  try {\n    for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n      var item = _step4.value;\n      var rect = item.rect;\n      if (isPointNearRect(x, y, rect, threshold)) {\n        var distance = getDistanceToRect(x, y, rect);\n        if (distance < minDistance) {\n          minDistance = distance;\n          nearest = item;\n        }\n      }\n    }\n  } catch (err) {\n    _iterator4.e(err);\n  } finally {\n    _iterator4.f();\n  }\n  return nearest;\n}\nfunction findNearestTextInfo(event, getTextInfo) {\n  var threshold = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 5;\n  var textLayer = event.target.closest(\'.textLayer\');\n  if (!textLayer) return null;\n  var pageNum = Number(textLayer.dataset.pagenum);\n  var textInfoList = getTextInfo(pageNum);\n  if (!textInfoList) return null;\n  var parentRect = textLayer.parentElement.getBoundingClientRect();\n  var x = event.clientX - parentRect.left;\n  var y = event.clientY - parentRect.top;\n  var nearest = null;\n  var minDistance = Infinity;\n  var nearestIndex = -1;\n  for (var i = 0; i < textInfoList.length; i++) {\n    var info = textInfoList[i];\n    var rect = info.rect;\n    if (!isPointNearRect(x, y, rect, threshold)) continue;\n    var distance = getDistanceToRect(x, y, rect);\n    if (distance < minDistance) {\n      minDistance = distance;\n      nearest = info;\n      nearestIndex = i;\n    }\n  }\n  event = null;\n  getTextInfo = null;\n  textInfoList = null;\n  return nearest ? {\n    nearest: nearest,\n    minDistance: minDistance,\n    index: nearestIndex,\n    pageNum: pageNum\n  } : null;\n}\n/**\n * 캔버스 비율에 맞춰 rects값을 그려준다.\n * @param {HTMLCanvasElement} canvas\n * @param {Array} rectList\n * @param {number} originalWidth\n * @param {number} originalHeight\n * @param {string} color\n * @returns\n */\nfunction drawTextRectsOnCanvas(_ref) {\n  var canvas = _ref.canvas,\n    rectList = _ref.rectList,\n    originalWidth = _ref.originalWidth,\n    originalHeight = _ref.originalHeight,\n    _ref$color = _ref.color,\n    color = _ref$color === void 0 ? \'rgba(0, 0, 255, 0.5)\' : _ref$color,\n    _ref$isReset = _ref.isReset,\n    isReset = _ref$isReset === void 0 ? false : _ref$isReset;\n  if (!canvas || !canvas.getContext) return;\n  canvas.width = canvas.width; // 동일한 값을 할당하여 초기화\n\n  // 캔버스 크기 대비 스케일 비율 계산\n  var scaleX = canvas.width / originalWidth;\n  var scaleY = canvas.height / originalHeight;\n  var ctx = canvas.getContext(\'2d\');\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  ctx.save();\n  ctx.fillStyle = color;\n  rectList.forEach(function (_ref2, index) {\n    var rect = _ref2.rect;\n    //getTextRects함수에서 보정 10px을 여기서 다시 보정해준다.\n    var widthCorrect = index == rectList.length - 1 ? 5 : 0;\n    var left = rect.left,\n      top = rect.top,\n      width = rect.width,\n      height = rect.height;\n    ctx.rect(left * scaleX, top * scaleY, (width - widthCorrect) * scaleX, height * scaleY);\n  });\n  ctx.fill(); // 한 번에 채움\n  ctx.restore();\n}\n\n//# sourceURL=webpack://ViewerJS/./src/common/ui.utils.js?')},32637:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar isIntegralNumber = __webpack_require__(2087);\n\n// `Number.isInteger` method\n// https://tc39.es/ecma262/#sec-number.isinteger\n$({ target: 'Number', stat: true }, {\n  isInteger: isIntegralNumber\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.number.is-integer.js?")},32679:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar call = __webpack_require__(69565);\nvar aCallable = __webpack_require__(79306);\nvar anObject = __webpack_require__(28551);\nvar isObject = __webpack_require__(20034);\nvar getIteratorDirect = __webpack_require__(1767);\nvar createAsyncIteratorProxy = __webpack_require__(92059);\nvar createIterResultObject = __webpack_require__(62529);\nvar getAsyncIteratorFlattenable = __webpack_require__(50133);\nvar closeAsyncIteration = __webpack_require__(20772);\nvar IS_PURE = __webpack_require__(96395);\n\nvar AsyncIteratorProxy = createAsyncIteratorProxy(function (Promise) {\n  var state = this;\n  var iterator = state.iterator;\n  var mapper = state.mapper;\n\n  return new Promise(function (resolve, reject) {\n    var doneAndReject = function (error) {\n      state.done = true;\n      reject(error);\n    };\n\n    var ifAbruptCloseAsyncIterator = function (error) {\n      closeAsyncIteration(iterator, doneAndReject, error, doneAndReject);\n    };\n\n    var outerLoop = function () {\n      try {\n        Promise.resolve(anObject(call(state.next, iterator))).then(function (step) {\n          try {\n            if (anObject(step).done) {\n              state.done = true;\n              resolve(createIterResultObject(undefined, true));\n            } else {\n              var value = step.value;\n              try {\n                var result = mapper(value, state.counter++);\n\n                var handler = function (mapped) {\n                  try {\n                    state.inner = getAsyncIteratorFlattenable(mapped);\n                    innerLoop();\n                  } catch (error4) { ifAbruptCloseAsyncIterator(error4); }\n                };\n\n                if (isObject(result)) Promise.resolve(result).then(handler, ifAbruptCloseAsyncIterator);\n                else handler(result);\n              } catch (error3) { ifAbruptCloseAsyncIterator(error3); }\n            }\n          } catch (error2) { doneAndReject(error2); }\n        }, doneAndReject);\n      } catch (error) { doneAndReject(error); }\n    };\n\n    var innerLoop = function () {\n      var inner = state.inner;\n      if (inner) {\n        try {\n          Promise.resolve(anObject(call(inner.next, inner.iterator))).then(function (result) {\n            try {\n              if (anObject(result).done) {\n                state.inner = null;\n                outerLoop();\n              } else resolve(createIterResultObject(result.value, false));\n            } catch (error1) { ifAbruptCloseAsyncIterator(error1); }\n          }, ifAbruptCloseAsyncIterator);\n        } catch (error) { ifAbruptCloseAsyncIterator(error); }\n      } else outerLoop();\n    };\n\n    innerLoop();\n  });\n});\n\n// `AsyncIterator.prototype.flatMap` method\n// https://github.com/tc39/proposal-async-iterator-helpers\n$({ target: 'AsyncIterator', proto: true, real: true, forced: IS_PURE }, {\n  flatMap: function flatMap(mapper) {\n    anObject(this);\n    aCallable(mapper);\n    return new AsyncIteratorProxy(getIteratorDirect(this), {\n      mapper: mapper,\n      inner: null\n    });\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.async-iterator.flat-map.js?")},32707:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";eval('\n\n__webpack_require__(2259);\n__webpack_require__(45700);\n__webpack_require__(51629);\n__webpack_require__(23418);\n__webpack_require__(64346);\n__webpack_require__(94490);\n__webpack_require__(89572);\n__webpack_require__(23288);\n__webpack_require__(62010);\n__webpack_require__(2892);\n__webpack_require__(59904);\n__webpack_require__(84185);\n__webpack_require__(40875);\n__webpack_require__(10287);\n__webpack_require__(3362);\n__webpack_require__(23500);\nfunction _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nObject.defineProperty(exports, "__esModule", ({\n  value: true\n}));\nexports.SearchManager = void 0;\n__webpack_require__(52675);\n__webpack_require__(89463);\n__webpack_require__(23792);\n__webpack_require__(48598);\n__webpack_require__(34782);\n__webpack_require__(36033);\n__webpack_require__(26099);\n__webpack_require__(84864);\n__webpack_require__(27495);\n__webpack_require__(38781);\n__webpack_require__(47764);\n__webpack_require__(42762);\n__webpack_require__(73772);\n__webpack_require__(30958);\n__webpack_require__(62953);\nvar _ui = __webpack_require__(32604);\nfunction _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a \'" + n + "\' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }\nfunction _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }\nfunction _classPrivateMethodInitSpec(e, a) { _checkPrivateRedeclaration(e, a), a.add(e); }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }\nfunction _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }\nfunction _classPrivateFieldInitSpec(e, t, a) { _checkPrivateRedeclaration(e, t), t.set(e, a); }\nfunction _checkPrivateRedeclaration(e, t) { if (t.has(e)) throw new TypeError("Cannot initialize the same private elements twice on an object"); }\nfunction _classPrivateFieldGet(s, a) { return s.get(_assertClassBrand(s, a)); }\nfunction _classPrivateFieldSet(s, a, r) { return s.set(_assertClassBrand(s, a), r), r; }\nfunction _assertClassBrand(e, t, n) { if ("function" == typeof e ? e === t : e.has(t)) return arguments.length < 3 ? t : n; throw new TypeError("Private element is not present on this object"); }\nvar _interruptCopyCondition = /*#__PURE__*/new WeakMap();\nvar _currentSearchToken = /*#__PURE__*/new WeakMap();\nvar _texts = /*#__PURE__*/new WeakMap();\nvar _SearchManager_brand = /*#__PURE__*/new WeakSet();\nvar SearchManager = exports.SearchManager = /*#__PURE__*/function () {\n  function SearchManager(pdfDocument, getToc) {\n    var _this = this;\n    _classCallCheck(this, SearchManager);\n    /**\n     * 새로운 검색 요청 시 이전 검색을 중단할 수 있도록 고유 토큰 발급\n     * @returns {symbol} 새 검색 토큰\n     */\n    _classPrivateMethodInitSpec(this, _SearchManager_brand);\n    // 검색 일시정지\n    _classPrivateFieldInitSpec(this, _interruptCopyCondition, false);\n    _classPrivateFieldInitSpec(this, _currentSearchToken, null);\n    // 전체 텍스트 map\n    _classPrivateFieldInitSpec(this, _texts, new Map());\n    // 외부에서 전달받은 pdfDocument\n    _defineProperty(this, "pdfDocument", null);\n    _defineProperty(this, "getToc", null);\n    /**\n     * 제거\n     */\n    _defineProperty(this, "destroy", function () {\n      _this.pdfDocument = null;\n      _classPrivateFieldSet(_interruptCopyCondition, _this, false);\n      _classPrivateFieldSet(_texts, _this, new Map());\n      _classPrivateFieldSet(_currentSearchToken, _this, null);\n    });\n    // 외부에서 전달받은 pdfDocument (예: pdf.js 사용)\n    this.pdfDocument = pdfDocument;\n    this.getToc = getToc;\n  }\n  return _createClass(SearchManager, [{\n    key: "stopSearch",\n    value:\n    /**\n     * 진행 중인 검색을 중단하는 함수\n     * 이 함수를 호출하면 현재 진행 중인 검색 중지됩니다.\n     */\n    function stopSearch() {\n      // 현재 진행 중인 검색 작업이 참조하는 토큰과 다르게 만듭니다.\n      // 또한 중단 플래그를 활성화하여 비동기 작업 내에서도 체크할 수 있게 합니다.\n      _classPrivateFieldSet(_currentSearchToken, this, null);\n      _classPrivateFieldSet(_interruptCopyCondition, this, true);\n    }\n    /**\n     * 전체 페이지를 순회하며, 검색어를 포함하는 결과를 콜백으로 전달합니다.\n     * @param {string} keyword 검색어\n     * @param {function} callback 콜백 함수 (pageNum, matches)를 인자로 받음\n     * @returns {Promise<boolean|null>} 정상 완료 시 true, 중단 시 null 반환.\n     */\n  }, {\n    key: "search",\n    value: (function () {\n      var _search = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var keyword,\n          callback,\n          searchToken,\n          regExp,\n          findKeywordCount,\n          pageNum,\n          pagesCount,\n          buffer,\n          page,\n          _yield$page$getTextCo,\n          items,\n          _iterator,\n          _step,\n          item,\n          toc,\n          pageText,\n          matches,\n          match,\n          snippetStart,\n          snippetEnd,\n          snippet,\n          _args = arguments;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              keyword = _args.length > 0 && _args[0] !== undefined ? _args[0] : \'\';\n              callback = _args.length > 1 ? _args[1] : undefined;\n              if (!(typeof keyword != \'string\')) {\n                _context.next = 4;\n                break;\n              }\n              throw new Error(\'검색어는 string값만 가능합니다.\');\n            case 4:\n              if (!(!keyword.trim() || typeof callback !== \'function\')) {\n                _context.next = 6;\n                break;\n              }\n              return _context.abrupt("return", new Map());\n            case 6:\n              // 새로운 검색 요청이므로 고유 토큰 발급\n              searchToken = _assertClassBrand(_SearchManager_brand, this, _generateSearchToken).call(this);\n              _classPrivateFieldSet(_currentSearchToken, this, searchToken);\n              _classPrivateFieldSet(_interruptCopyCondition, this, false);\n\n              // 정규표현식 생성: 대소문자 구분 없이 전역 검색\n              regExp = new RegExp(keyword, \'gi\');\n              findKeywordCount = 0; // 전체 페이지 수 만큼 반복\n              pageNum = 1, pagesCount = this.pdfDocument.numPages;\n            case 12:\n              if (!(pageNum <= pagesCount)) {\n                _context.next = 42;\n                break;\n              }\n              if (!(_classPrivateFieldGet(_currentSearchToken, this) !== searchToken)) {\n                _context.next = 15;\n                break;\n              }\n              return _context.abrupt("return", null);\n            case 15:\n              if (!_classPrivateFieldGet(_interruptCopyCondition, this)) {\n                _context.next = 17;\n                break;\n              }\n              return _context.abrupt("return", null);\n            case 17:\n              // 페이지의 텍스트 버퍼 초기화 및 페이지 내용 읽기\n              buffer = [];\n              _context.next = 20;\n              return this.pdfDocument.getPage(pageNum);\n            case 20:\n              page = _context.sent;\n              _context.next = 23;\n              return page.getTextContent();\n            case 23:\n              _yield$page$getTextCo = _context.sent;\n              items = _yield$page$getTextCo.items;\n              _iterator = _createForOfIteratorHelper(items);\n              try {\n                for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                  item = _step.value;\n                  if (item.str) {\n                    buffer.push(item.str);\n                  }\n                  if (item.hasEOL) {\n                    buffer.push(\'\\n\');\n                  }\n                }\n              } catch (err) {\n                _iterator.e(err);\n              } finally {\n                _iterator.f();\n              }\n              toc = this.getToc(pageNum); // 버퍼의 텍스트를 하나의 문자열로 결합하여 저장\n              pageText = (0, _ui.removeNullCharacters)(buffer.join(\'\'));\n              _classPrivateFieldGet(_texts, this).set(pageNum, pageText);\n\n              // 검색어가 포함된 결과 찾기\n              matches = [];\n              match = void 0;\n              while ((match = regExp.exec(pageText)) !== null) {\n                // 검색어의 시작과 끝 인덱스 계산 (앞뒤 10글자 포함)\n                snippetStart = Math.max(0, match.index - 10);\n                snippetEnd = Math.min(pageText.length, match.index + match[0].length + 10);\n                snippet = pageText.slice(snippetStart, snippetEnd); //검색어 push\n                matches.push({\n                  pageNum: pageNum,\n                  index: match.index,\n                  match: match[0],\n                  snippet: snippet,\n                  tocTitle: toc === null || toc === void 0 ? void 0 : toc.title\n                });\n              }\n\n              // 각 페이지마다 콜백 호출: 현재 검색 토큰이 여전히 유효한지 확인 후 전달\n              if (!(_classPrivateFieldGet(_currentSearchToken, this) === searchToken && !_classPrivateFieldGet(_interruptCopyCondition, this))) {\n                _context.next = 38;\n                break;\n              }\n              findKeywordCount += matches.length;\n              //검색어,검색결과,전체찾은갯수,검색끝여부\n              callback(keyword, matches, findKeywordCount, this.pdfDocument.numPages == pageNum);\n              _context.next = 39;\n              break;\n            case 38:\n              return _context.abrupt("return", null);\n            case 39:\n              ++pageNum;\n              _context.next = 12;\n              break;\n            case 42:\n              return _context.abrupt("return", true);\n            case 43:\n            case "end":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function search() {\n        return _search.apply(this, arguments);\n      }\n      return search;\n    }())\n  }]);\n}();\nfunction _generateSearchToken() {\n  return Symbol(\'searchToken\');\n}\n\n//# sourceURL=webpack://ViewerJS/./src/pdf/core/SearchManager.js?')},32812:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\n\n// `Reflect.has` method\n// https://tc39.es/ecma262/#sec-reflect.has\n$({ target: 'Reflect', stat: true }, {\n  has: function has(target, propertyKey) {\n    return propertyKey in target;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.reflect.has.js?")},33110:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar getBuiltIn = __webpack_require__(97751);\nvar apply = __webpack_require__(18745);\nvar call = __webpack_require__(69565);\nvar uncurryThis = __webpack_require__(79504);\nvar fails = __webpack_require__(79039);\nvar isCallable = __webpack_require__(94901);\nvar isSymbol = __webpack_require__(10757);\nvar arraySlice = __webpack_require__(67680);\nvar getReplacerFunction = __webpack_require__(66933);\nvar NATIVE_SYMBOL = __webpack_require__(4495);\n\nvar $String = String;\nvar $stringify = getBuiltIn('JSON', 'stringify');\nvar exec = uncurryThis(/./.exec);\nvar charAt = uncurryThis(''.charAt);\nvar charCodeAt = uncurryThis(''.charCodeAt);\nvar replace = uncurryThis(''.replace);\nvar numberToString = uncurryThis(1.0.toString);\n\nvar tester = /[\\uD800-\\uDFFF]/g;\nvar low = /^[\\uD800-\\uDBFF]$/;\nvar hi = /^[\\uDC00-\\uDFFF]$/;\n\nvar WRONG_SYMBOLS_CONVERSION = !NATIVE_SYMBOL || fails(function () {\n  var symbol = getBuiltIn('Symbol')('stringify detection');\n  // MS Edge converts symbol values to JSON as {}\n  return $stringify([symbol]) !== '[null]'\n    // WebKit converts symbol values to JSON as null\n    || $stringify({ a: symbol }) !== '{}'\n    // V8 throws on boxed symbols\n    || $stringify(Object(symbol)) !== '{}';\n});\n\n// https://github.com/tc39/proposal-well-formed-stringify\nvar ILL_FORMED_UNICODE = fails(function () {\n  return $stringify('\\uDF06\\uD834') !== '\"\\\\udf06\\\\ud834\"'\n    || $stringify('\\uDEAD') !== '\"\\\\udead\"';\n});\n\nvar stringifyWithSymbolsFix = function (it, replacer) {\n  var args = arraySlice(arguments);\n  var $replacer = getReplacerFunction(replacer);\n  if (!isCallable($replacer) && (it === undefined || isSymbol(it))) return; // IE8 returns string on undefined\n  args[1] = function (key, value) {\n    // some old implementations (like WebKit) could pass numbers as keys\n    if (isCallable($replacer)) value = call($replacer, this, $String(key), value);\n    if (!isSymbol(value)) return value;\n  };\n  return apply($stringify, null, args);\n};\n\nvar fixIllFormed = function (match, offset, string) {\n  var prev = charAt(string, offset - 1);\n  var next = charAt(string, offset + 1);\n  if ((exec(low, match) && !exec(hi, next)) || (exec(hi, match) && !exec(low, prev))) {\n    return '\\\\u' + numberToString(charCodeAt(match, 0), 16);\n  } return match;\n};\n\nif ($stringify) {\n  // `JSON.stringify` method\n  // https://tc39.es/ecma262/#sec-json.stringify\n  $({ target: 'JSON', stat: true, arity: 3, forced: WRONG_SYMBOLS_CONVERSION || ILL_FORMED_UNICODE }, {\n    // eslint-disable-next-line no-unused-vars -- required for `.length`\n    stringify: function stringify(it, replacer, space) {\n      var args = arraySlice(arguments);\n      var result = apply(WRONG_SYMBOLS_CONVERSION ? stringifyWithSymbolsFix : $stringify, null, args);\n      return ILL_FORMED_UNICODE && typeof result == 'string' ? replace(result, tester, fixIllFormed) : result;\n    }\n  });\n}\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.json.stringify.js?")},33164:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar sign = __webpack_require__(77782);\nvar roundTiesToEven = __webpack_require__(53602);\n\nvar abs = Math.abs;\n\nvar EPSILON = 2.220446049250313e-16; // Number.EPSILON\n\nmodule.exports = function (x, FLOAT_EPSILON, FLOAT_MAX_VALUE, FLOAT_MIN_VALUE) {\n  var n = +x;\n  var absolute = abs(n);\n  var s = sign(n);\n  if (absolute < FLOAT_MIN_VALUE) return s * roundTiesToEven(absolute / FLOAT_MIN_VALUE / FLOAT_EPSILON) * FLOAT_MIN_VALUE * FLOAT_EPSILON;\n  var a = (1 + FLOAT_EPSILON / EPSILON) * absolute;\n  var result = a - (a - absolute);\n  // eslint-disable-next-line no-self-compare -- NaN check\n  if (result > FLOAT_MAX_VALUE || result !== result) return s * Infinity;\n  return s * result;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/math-float-round.js?")},33206:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar ArrayBufferViewCore = __webpack_require__(94644);\nvar $forEach = (__webpack_require__(59213).forEach);\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.forEach` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.foreach\nexportTypedArrayMethod('forEach', function forEach(callbackfn /* , thisArg */) {\n  $forEach(aTypedArray(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.for-each.js?")},33313:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar trimEnd = __webpack_require__(18866);\n\n// `String.prototype.trimRight` method\n// https://tc39.es/ecma262/#sec-string.prototype.trimend\n// eslint-disable-next-line es/no-string-prototype-trimleft-trimright -- safe\n$({ target: 'String', proto: true, name: 'trimEnd', forced: ''.trimRight !== trimEnd }, {\n  trimRight: trimEnd\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.string.trim-right.js?")},33392:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar uncurryThis = __webpack_require__(79504);\n\nvar id = 0;\nvar postfix = Math.random();\nvar toString = uncurryThis(1.0.toString);\n\nmodule.exports = function (key) {\n  return 'Symbol(' + (key === undefined ? '' : key) + ')_' + toString(++id + postfix, 36);\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/uid.js?")},33517:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar uncurryThis = __webpack_require__(79504);\nvar fails = __webpack_require__(79039);\nvar isCallable = __webpack_require__(94901);\nvar classof = __webpack_require__(36955);\nvar getBuiltIn = __webpack_require__(97751);\nvar inspectSource = __webpack_require__(33706);\n\nvar noop = function () { /* empty */ };\nvar construct = getBuiltIn('Reflect', 'construct');\nvar constructorRegExp = /^\\s*(?:class|function)\\b/;\nvar exec = uncurryThis(constructorRegExp.exec);\nvar INCORRECT_TO_STRING = !constructorRegExp.test(noop);\n\nvar isConstructorModern = function isConstructor(argument) {\n  if (!isCallable(argument)) return false;\n  try {\n    construct(noop, [], argument);\n    return true;\n  } catch (error) {\n    return false;\n  }\n};\n\nvar isConstructorLegacy = function isConstructor(argument) {\n  if (!isCallable(argument)) return false;\n  switch (classof(argument)) {\n    case 'AsyncFunction':\n    case 'GeneratorFunction':\n    case 'AsyncGeneratorFunction': return false;\n  }\n  try {\n    // we can't check .prototype since constructors produced by .bind haven't it\n    // `Function#toString` throws on some built-it function in some legacy engines\n    // (for example, `DOMQuad` and similar in FF41-)\n    return INCORRECT_TO_STRING || !!exec(constructorRegExp, inspectSource(argument));\n  } catch (error) {\n    return true;\n  }\n};\n\nisConstructorLegacy.sham = true;\n\n// `IsConstructor` abstract operation\n// https://tc39.es/ecma262/#sec-isconstructor\nmodule.exports = !construct || fails(function () {\n  var called;\n  return isConstructorModern(isConstructorModern.call)\n    || !isConstructorModern(Object)\n    || !isConstructorModern(function () { called = true; })\n    || called;\n}) ? isConstructorLegacy : isConstructorModern;\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/is-constructor.js?")},33684:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar exportTypedArrayMethod = (__webpack_require__(94644).exportTypedArrayMethod);\nvar fails = __webpack_require__(79039);\nvar globalThis = __webpack_require__(44576);\nvar uncurryThis = __webpack_require__(79504);\n\nvar Uint8Array = globalThis.Uint8Array;\nvar Uint8ArrayPrototype = Uint8Array && Uint8Array.prototype || {};\nvar arrayToString = [].toString;\nvar join = uncurryThis([].join);\n\nif (fails(function () { arrayToString.call({}); })) {\n  arrayToString = function toString() {\n    return join(this);\n  };\n}\n\nvar IS_NOT_ARRAY_METHOD = Uint8ArrayPrototype.toString !== arrayToString;\n\n// `%TypedArray%.prototype.toString` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.tostring\nexportTypedArrayMethod('toString', arrayToString, IS_NOT_ARRAY_METHOD);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.to-string.js?")},33706:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar uncurryThis = __webpack_require__(79504);\nvar isCallable = __webpack_require__(94901);\nvar store = __webpack_require__(77629);\n\nvar functionToString = uncurryThis(Function.toString);\n\n// this helper broken in `core-js@3.4.1-3.4.4`, so we can't use `shared` helper\nif (!isCallable(store.inspectSource)) {\n  store.inspectSource = function (it) {\n    return functionToString(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/inspect-source.js?")},33717:(__unused_webpack_module,exports)=>{"use strict";eval("\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- safe\nexports.f = Object.getOwnPropertySymbols;\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/object-get-own-property-symbols.js?")},33771:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar fill = __webpack_require__(84373);\nvar addToUnscopables = __webpack_require__(6469);\n\n// `Array.prototype.fill` method\n// https://tc39.es/ecma262/#sec-array.prototype.fill\n$({ target: 'Array', proto: true }, {\n  fill: fill\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('fill');\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array.fill.js?")},33811:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar anInstance = __webpack_require__(90679);\nvar getPrototypeOf = __webpack_require__(42787);\nvar createNonEnumerableProperty = __webpack_require__(66699);\nvar hasOwn = __webpack_require__(39297);\nvar wellKnownSymbol = __webpack_require__(78227);\nvar AsyncIteratorPrototype = __webpack_require__(53982);\nvar IS_PURE = __webpack_require__(96395);\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\n\nvar $TypeError = TypeError;\n\nvar AsyncIteratorConstructor = function AsyncIterator() {\n  anInstance(this, AsyncIteratorPrototype);\n  if (getPrototypeOf(this) === AsyncIteratorPrototype) throw new $TypeError('Abstract class AsyncIterator not directly constructable');\n};\n\nAsyncIteratorConstructor.prototype = AsyncIteratorPrototype;\n\nif (!hasOwn(AsyncIteratorPrototype, TO_STRING_TAG)) {\n  createNonEnumerableProperty(AsyncIteratorPrototype, TO_STRING_TAG, 'AsyncIterator');\n}\n\nif (IS_PURE || !hasOwn(AsyncIteratorPrototype, 'constructor') || AsyncIteratorPrototype.constructor === Object) {\n  createNonEnumerableProperty(AsyncIteratorPrototype, 'constructor', AsyncIteratorConstructor);\n}\n\n// `AsyncIterator` constructor\n// https://github.com/tc39/proposal-async-iterator-helpers\n$({ global: true, constructor: true, forced: IS_PURE }, {\n  AsyncIterator: AsyncIteratorConstructor\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.async-iterator.constructor.js?")},33853:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar isDisjointFrom = __webpack_require__(64449);\nvar setMethodAcceptSetLike = __webpack_require__(84916);\n\nvar INCORRECT = !setMethodAcceptSetLike('isDisjointFrom', function (result) {\n  return !result;\n});\n\n// `Set.prototype.isDisjointFrom` method\n// https://tc39.es/ecma262/#sec-set.prototype.isdisjointfrom\n$({ target: 'Set', proto: true, real: true, forced: INCORRECT }, {\n  isDisjointFrom: isDisjointFrom\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.set.is-disjoint-from.v2.js?")},33904:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar globalThis = __webpack_require__(44576);\nvar fails = __webpack_require__(79039);\nvar uncurryThis = __webpack_require__(79504);\nvar toString = __webpack_require__(655);\nvar trim = (__webpack_require__(43802).trim);\nvar whitespaces = __webpack_require__(47452);\n\nvar charAt = uncurryThis(''.charAt);\nvar $parseFloat = globalThis.parseFloat;\nvar Symbol = globalThis.Symbol;\nvar ITERATOR = Symbol && Symbol.iterator;\nvar FORCED = 1 / $parseFloat(whitespaces + '-0') !== -Infinity\n  // MS Edge 18- broken with boxed symbols\n  || (ITERATOR && !fails(function () { $parseFloat(Object(ITERATOR)); }));\n\n// `parseFloat` method\n// https://tc39.es/ecma262/#sec-parsefloat-string\nmodule.exports = FORCED ? function parseFloat(string) {\n  var trimmedString = trim(toString(string));\n  var result = $parseFloat(trimmedString);\n  return result === 0 && charAt(trimmedString, 0) === '-' ? -0 : result;\n} : $parseFloat;\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/number-parse-float.js?")},33981:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar FREEZING = __webpack_require__(92744);\nvar NATIVE_RAW_JSON = __webpack_require__(27819);\nvar getBuiltIn = __webpack_require__(97751);\nvar call = __webpack_require__(69565);\nvar uncurryThis = __webpack_require__(79504);\nvar isCallable = __webpack_require__(94901);\nvar isRawJSON = __webpack_require__(65810);\nvar toString = __webpack_require__(655);\nvar createProperty = __webpack_require__(97040);\nvar parseJSONString = __webpack_require__(616);\nvar getReplacerFunction = __webpack_require__(66933);\nvar uid = __webpack_require__(33392);\nvar setInternalState = (__webpack_require__(91181).set);\n\nvar $String = String;\nvar $SyntaxError = SyntaxError;\nvar parse = getBuiltIn('JSON', 'parse');\nvar $stringify = getBuiltIn('JSON', 'stringify');\nvar create = getBuiltIn('Object', 'create');\nvar freeze = getBuiltIn('Object', 'freeze');\nvar at = uncurryThis(''.charAt);\nvar slice = uncurryThis(''.slice);\nvar push = uncurryThis([].push);\n\nvar MARK = uid();\nvar MARK_LENGTH = MARK.length;\nvar ERROR_MESSAGE = 'Unacceptable as raw JSON';\n\nvar isWhitespace = function (it) {\n  return it === ' ' || it === '\\t' || it === '\\n' || it === '\\r';\n};\n\n// `JSON.parse` method\n// https://tc39.es/proposal-json-parse-with-source/#sec-json.israwjson\n// https://github.com/tc39/proposal-json-parse-with-source\n$({ target: 'JSON', stat: true, forced: !NATIVE_RAW_JSON }, {\n  rawJSON: function rawJSON(text) {\n    var jsonString = toString(text);\n    if (jsonString === '' || isWhitespace(at(jsonString, 0)) || isWhitespace(at(jsonString, jsonString.length - 1))) {\n      throw new $SyntaxError(ERROR_MESSAGE);\n    }\n    var parsed = parse(jsonString);\n    if (typeof parsed == 'object' && parsed !== null) throw new $SyntaxError(ERROR_MESSAGE);\n    var obj = create(null);\n    setInternalState(obj, { type: 'RawJSON' });\n    createProperty(obj, 'rawJSON', jsonString);\n    return FREEZING ? freeze(obj) : obj;\n  }\n});\n\n// `JSON.stringify` method\n// https://tc39.es/ecma262/#sec-json.stringify\n// https://github.com/tc39/proposal-json-parse-with-source\nif ($stringify) $({ target: 'JSON', stat: true, arity: 3, forced: !NATIVE_RAW_JSON }, {\n  stringify: function stringify(text, replacer, space) {\n    var replacerFunction = getReplacerFunction(replacer);\n    var rawStrings = [];\n\n    var json = $stringify(text, function (key, value) {\n      // some old implementations (like WebKit) could pass numbers as keys\n      var v = isCallable(replacerFunction) ? call(replacerFunction, this, $String(key), value) : value;\n      return isRawJSON(v) ? MARK + (push(rawStrings, v.rawJSON) - 1) : v;\n    }, space);\n\n    if (typeof json != 'string') return json;\n\n    var result = '';\n    var length = json.length;\n\n    for (var i = 0; i < length; i++) {\n      var chr = at(json, i);\n      if (chr === '\"') {\n        var end = parseJSONString(json, ++i).end - 1;\n        var string = slice(json, i, end);\n        result += slice(string, 0, MARK_LENGTH) === MARK\n          ? rawStrings[slice(string, MARK_LENGTH)]\n          : '\"' + string + '\"';\n        i = end;\n      } else result += chr;\n    }\n\n    return result;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.json.raw-json.js?")},33994:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar IteratorPrototype = (__webpack_require__(57657).IteratorPrototype);\nvar create = __webpack_require__(2360);\nvar createPropertyDescriptor = __webpack_require__(6980);\nvar setToStringTag = __webpack_require__(10687);\nvar Iterators = __webpack_require__(26269);\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (IteratorConstructor, NAME, next, ENUMERABLE_NEXT) {\n  var TO_STRING_TAG = NAME + ' Iterator';\n  IteratorConstructor.prototype = create(IteratorPrototype, { next: createPropertyDescriptor(+!ENUMERABLE_NEXT, next) });\n  setToStringTag(IteratorConstructor, TO_STRING_TAG, false, true);\n  Iterators[TO_STRING_TAG] = returnThis;\n  return IteratorConstructor;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/iterator-create-constructor.js?")},34124:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar fails = __webpack_require__(79039);\nvar isObject = __webpack_require__(20034);\nvar classof = __webpack_require__(22195);\nvar ARRAY_BUFFER_NON_EXTENSIBLE = __webpack_require__(15652);\n\n// eslint-disable-next-line es/no-object-isextensible -- safe\nvar $isExtensible = Object.isExtensible;\nvar FAILS_ON_PRIMITIVES = fails(function () { $isExtensible(1); });\n\n// `Object.isExtensible` method\n// https://tc39.es/ecma262/#sec-object.isextensible\nmodule.exports = (FAILS_ON_PRIMITIVES || ARRAY_BUFFER_NON_EXTENSIBLE) ? function isExtensible(it) {\n  if (!isObject(it)) return false;\n  if (ARRAY_BUFFER_NON_EXTENSIBLE && classof(it) === 'ArrayBuffer') return false;\n  return $isExtensible ? $isExtensible(it) : true;\n} : $isExtensible;\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/object-is-extensible.js?")},34154:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar classof = __webpack_require__(36955);\n\nvar $TypeError = TypeError;\n\n// Perform ? RequireInternalSlot(argument, [[TypedArrayName]])\n// If argument.[[TypedArrayName]] is not \"Uint8Array\", throw a TypeError exception\nmodule.exports = function (argument) {\n  if (classof(argument) === 'Uint8Array') return argument;\n  throw new $TypeError('Argument is not an Uint8Array');\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/an-uint8-array.js?")},34268:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar call = __webpack_require__(69565);\nvar anObject = __webpack_require__(28551);\nvar isObject = __webpack_require__(20034);\nvar isDataDescriptor = __webpack_require__(16575);\nvar fails = __webpack_require__(79039);\nvar definePropertyModule = __webpack_require__(24913);\nvar getOwnPropertyDescriptorModule = __webpack_require__(77347);\nvar getPrototypeOf = __webpack_require__(42787);\nvar createPropertyDescriptor = __webpack_require__(6980);\n\n// `Reflect.set` method\n// https://tc39.es/ecma262/#sec-reflect.set\nfunction set(target, propertyKey, V /* , receiver */) {\n  var receiver = arguments.length < 4 ? target : arguments[3];\n  var ownDescriptor = getOwnPropertyDescriptorModule.f(anObject(target), propertyKey);\n  var existingDescriptor, prototype, setter;\n  if (!ownDescriptor) {\n    if (isObject(prototype = getPrototypeOf(target))) {\n      return set(prototype, propertyKey, V, receiver);\n    }\n    ownDescriptor = createPropertyDescriptor(0);\n  }\n  if (isDataDescriptor(ownDescriptor)) {\n    if (ownDescriptor.writable === false || !isObject(receiver)) return false;\n    if (existingDescriptor = getOwnPropertyDescriptorModule.f(receiver, propertyKey)) {\n      if (existingDescriptor.get || existingDescriptor.set || existingDescriptor.writable === false) return false;\n      existingDescriptor.value = V;\n      definePropertyModule.f(receiver, propertyKey, existingDescriptor);\n    } else definePropertyModule.f(receiver, propertyKey, createPropertyDescriptor(0, V));\n  } else {\n    setter = ownDescriptor.set;\n    if (setter === undefined) return false;\n    call(setter, receiver, V);\n  } return true;\n}\n\n// MS Edge 17-18 Reflect.set allows setting the property to object\n// with non-writable property on the prototype\nvar MS_EDGE_BUG = fails(function () {\n  var Constructor = function () { /* empty */ };\n  var object = definePropertyModule.f(new Constructor(), 'a', { configurable: true });\n  // eslint-disable-next-line es/no-reflect -- required for testing\n  return Reflect.set(Constructor.prototype, 'a', 1, object) !== false;\n});\n\n$({ target: 'Reflect', stat: true, forced: MS_EDGE_BUG }, {\n  set: set\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.reflect.set.js?")},34335:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";eval("\n\n__webpack_require__(52675);\n__webpack_require__(89463);\n__webpack_require__(2259);\n__webpack_require__(45700);\n__webpack_require__(2008);\n__webpack_require__(51629);\n__webpack_require__(89572);\n__webpack_require__(67945);\n__webpack_require__(84185);\n__webpack_require__(83851);\n__webpack_require__(81278);\n__webpack_require__(79432);\n__webpack_require__(23500);\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.TouchControl = exports.MouseControl = exports.KeyboardControl = void 0;\n__webpack_require__(48980);\n__webpack_require__(23792);\n__webpack_require__(34782);\n__webpack_require__(59089);\n__webpack_require__(2892);\n__webpack_require__(26099);\n__webpack_require__(47764);\n__webpack_require__(11392);\n__webpack_require__(73772);\n__webpack_require__(62953);\nvar _ui = __webpack_require__(32604);\nfunction _classPrivateFieldInitSpec(e, t, a) { _checkPrivateRedeclaration(e, t), t.set(e, a); }\nfunction _checkPrivateRedeclaration(e, t) { if (t.has(e)) throw new TypeError(\"Cannot initialize the same private elements twice on an object\"); }\nfunction _classPrivateFieldGet(s, a) { return s.get(_assertClassBrand(s, a)); }\nfunction _assertClassBrand(e, t, n) { if (\"function\" == typeof e ? e === t : e.has(t)) return arguments.length < 3 ? t : n; throw new TypeError(\"Private element is not present on this object\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar isScrollLeftEnd = function isScrollLeftEnd(element) {\n  return element.scrollLeft === 0;\n}; // 왼쪽 끝\nvar isScrollRightEnd = function isScrollRightEnd(element) {\n  return element.scrollLeft + element.clientWidth >= element.scrollWidth;\n}; // 오른쪽 끝\nvar isScrollTopEnd = function isScrollTopEnd(element) {\n  return element.scrollTop === 0;\n}; // 위쪽 끝\nvar isScrollBottomEnd = function isScrollBottomEnd(element) {\n  return element.scrollTop + element.clientHeight >= element.scrollHeight;\n}; // 아래쪽 끝\n\n/**\n * 사용자의 인터랙션이 가능한 요소를 찾는기능\n * @param {MouseEvent|TouchEvent} event\n */\nvar isInteractiveElement = function isInteractiveElement(event) {\n  var selector = \"input, textarea, select, button, a, [contenteditable='true'], [interaction='true']\";\n  var target = event.target;\n  return target.matches(selector) || target.closest(selector) !== null;\n};\n\n/**\n * annotation 찾기\n * @param {MouseEvent|TouchEvent} event\n * @param {Function} requestPageAnnotation\n */\nvar findAnnotation = function findAnnotation(event, requestPageAnnotation, scrollContainer) {\n  if (!requestPageAnnotation) {\n    throw new Error('해당페이지의 에노테이션을 돌려주는 함수가 선언되어야 합니다.');\n  }\n  var isTouch = event.type.startsWith('touch');\n  var targetX = isTouch ? event.touches[0].clientX : event.clientX;\n  var targetY = isTouch ? event.touches[0].clientY : event.clientY;\n  var pageNum = Number(event.target.dataset.pagenum);\n  if (isFinite(pageNum)) {\n    var pageAnnotations = requestPageAnnotation(pageNum);\n    if (pageAnnotations) {\n      var idx = pageAnnotations.findIndex(function (anno) {\n        return (0, _ui.isInsideBox)(targetX, targetY, anno.size, event.target, scrollContainer);\n      });\n      if (pageAnnotations[idx]) {\n        return _objectSpread({}, pageAnnotations[idx]);\n      }\n    }\n  }\n  return null;\n};\n\n/**\n * 키보드 이벤트 제어\n */\nvar KeyboardControl = exports.KeyboardControl = /*#__PURE__*/_createClass(function KeyboardControl(_ref) {\n  var _this = this;\n  var onPrev = _ref.onPrev,\n    onNext = _ref.onNext,\n    isPreventEvent = _ref.isPreventEvent;\n  _classCallCheck(this, KeyboardControl);\n  /**\n   *\n   * @param {KeyboardEvent} event\n   */\n  _defineProperty(this, \"onHandle\", function (event) {\n    var _this$onPrev, _this$onNext, _this$onPrev2, _this$onNext2, _this$onNext3;\n    if ((0, _ui.isInputElement)(event)) {\n      return;\n    }\n    switch (event.key) {\n      case 'ArrowLeft':\n        event.preventDefault();\n        (_this$onPrev = _this.onPrev) === null || _this$onPrev === void 0 || _this$onPrev.call(_this);\n        break;\n      case 'ArrowRight':\n        event.preventDefault();\n        (_this$onNext = _this.onNext) === null || _this$onNext === void 0 || _this$onNext.call(_this);\n        break;\n      case 'ArrowUp':\n        event.preventDefault();\n        (_this$onPrev2 = _this.onPrev) === null || _this$onPrev2 === void 0 || _this$onPrev2.call(_this);\n        break;\n      case 'ArrowDown':\n        event.preventDefault();\n        (_this$onNext2 = _this.onNext) === null || _this$onNext2 === void 0 || _this$onNext2.call(_this);\n        break;\n      case ' ':\n        event.preventDefault();\n        (_this$onNext3 = _this.onNext) === null || _this$onNext3 === void 0 || _this$onNext3.call(_this);\n        break;\n      case 'Enter':\n        event.preventDefault();\n      case 'Control':\n        event.preventDefault();\n        break;\n      default:\n        console.log('Other key pressed: ' + event.key);\n    }\n  });\n  _defineProperty(this, \"destroy\", function () {\n    document.removeEventListener('keydown', _this.onHandle);\n    _this.onPrev = null;\n    _this.onNext = null;\n  });\n  this.onPrev = onPrev;\n  this.onNext = onNext;\n  this.isPreventEvent = isPreventEvent;\n  document.addEventListener('keydown', this.onHandle);\n});\n/**\n * 마우스 이벤트 제어\n */\nvar _swipeSelection = /*#__PURE__*/new WeakMap();\nvar _orderSelection = /*#__PURE__*/new WeakMap();\nvar _validateSelection = /*#__PURE__*/new WeakMap();\nvar _clearSelection = /*#__PURE__*/new WeakMap();\nvar MouseControl = exports.MouseControl = /*#__PURE__*/_createClass(function MouseControl(_ref2) {\n  var _this2 = this;\n  var minScale = _ref2.minScale,\n    maxScale = _ref2.maxScale,\n    scrollContainer = _ref2.scrollContainer,\n    getCurrentScale = _ref2.getCurrentScale,\n    setScale = _ref2.setScale,\n    isPreventEvent = _ref2.isPreventEvent,\n    requestPageAnnotation = _ref2.requestPageAnnotation,\n    reqeustPageTextInfo = _ref2.reqeustPageTextInfo,\n    reqeustPageTextInfoUpdate = _ref2.reqeustPageTextInfoUpdate,\n    requestSelection = _ref2.requestSelection,\n    requestClearSelection = _ref2.requestClearSelection,\n    onClickAnnotation = _ref2.onClickAnnotation,\n    onClick = _ref2.onClick,\n    onSelectionEnded = _ref2.onSelectionEnded,\n    _ref2$userZoomFactor = _ref2.userZoomFactor,\n    userZoomFactor = _ref2$userZoomFactor === void 0 ? 0.001 : _ref2$userZoomFactor;\n  _classCallCheck(this, MouseControl);\n  /**\n   *\n   * @param {MouseEvent} event\n   * @returns\n   */\n  _defineProperty(this, \"onHandle\", function (event) {\n    var _event$sourceCapabili, _this2$isPreventEvent, _this2$isPreventEvent2;\n    /**\n     * 터치 이벤트로 발현된 마우스이벤트의 경우 제외\n     */\n    if ((_event$sourceCapabili = event.sourceCapabilities) !== null && _event$sourceCapabili !== void 0 && _event$sourceCapabili.firesTouchEvents) {\n      event.stopImmediatePropagation(); // 터치 후 마우스 이벤트 무시\n      event.preventDefault();\n      return;\n    }\n    // ios mobile일 경우 마우스이벤트가 같이 들어와서 처리함.\n    if (event.type == 'mousedown' && event.buttons == 0) {\n      return;\n    }\n    switch (event.type) {\n      case 'mousedown':\n        if ((_this2$isPreventEvent = _this2.isPreventEvent) !== null && _this2$isPreventEvent !== void 0 && _this2$isPreventEvent.call(_this2)) {\n          return;\n        }\n        _this2.startX = event.clientX;\n        _this2.startY = event.clientY;\n        _this2.scrollLeft = _this2.scrollContainer.scrollLeft;\n        _this2.scrollTop = _this2.scrollContainer.scrollTop;\n        _this2.isDragging = true;\n\n        /**\n         * 해당위치에 annotation이 존재하는 체크.\n         */\n        var anno = findAnnotation(event, _this2.requestPageAnnotation, _this2.scrollContainer);\n        if (anno) {\n          _this2.startTartgetObject = anno;\n        }\n\n        //selection을 시작\n        var findTextInfo = (0, _ui.findNearestTextInfo)(event, _this2.reqeustPageTextInfo);\n        findTextInfo = null;\n        //주변을 선택하면 샐랙션으로 간주.\n        if (findTextInfo) {\n          if (_this2.startSelectionObject) {\n            var _this2$startSelection;\n            //이전에 샐랙션을 했고 다른페이지에 새로 샐랙션을 시작하면\n            if (((_this2$startSelection = _this2.startSelectionObject) === null || _this2$startSelection === void 0 ? void 0 : _this2$startSelection.pageNum) != findTextInfo.pageNum) {\n              var _this2$startSelection2;\n              _classPrivateFieldGet(_clearSelection, _this2).call(_this2, (_this2$startSelection2 = _this2.startSelectionObject) === null || _this2$startSelection2 === void 0 ? void 0 : _this2$startSelection2.pageNum);\n            }\n            // start,end둘다 이전에 한경우\n            if (_this2.endSelectionObject) {\n              _classPrivateFieldGet(_orderSelection, _this2).call(_this2);\n              var startDiff = Math.abs(_this2.startSelectionObject.index - findTextInfo.index);\n              var endDiff = Math.abs(_this2.endSelectionObject.index - findTextInfo.index);\n              var diffCorrect = 2;\n              if (startDiff <= diffCorrect) {\n                _this2.isContinueToStart = true;\n              } else if (endDiff <= diffCorrect) {\n                _this2.isContinueToEnd = true;\n              }\n            }\n          }\n          _this2.reqeustPageTextInfoUpdate(findTextInfo.pageNum);\n          // if (this.isContinueToStart) {\n          //   this.#validateSelection();\n          // } else if (this.isContinueToEnd) {\n          //   this.#validateSelection();\n          // } else {\n          //   this.startSelectionObject = { ...findTextInfo };\n          // }\n          _this2.startSelectionObject = _objectSpread({}, findTextInfo);\n          findTextInfo = null;\n        }\n        //샐랙션 주변을 선택하지 않으면 clear\n        else {\n          if (_this2.startSelectionObject) {\n            var _this2$startSelection3;\n            _classPrivateFieldGet(_clearSelection, _this2).call(_this2, (_this2$startSelection3 = _this2.startSelectionObject) === null || _this2$startSelection3 === void 0 ? void 0 : _this2$startSelection3.pageNum);\n          }\n        }\n        break;\n      case 'mousemove':\n        // selection이 시작된경우\n        if (_this2.startSelectionObject) {\n          event.preventDefault();\n\n          //selection이 시작된경우 대상을 찾아준다.\n          if (event.buttons > 0) {\n            // 선택한 주변 텍스트 정보 탐색\n            var _findTextInfo = (0, _ui.findNearestTextInfo)(event, _this2.reqeustPageTextInfo, 10);\n            if (_findTextInfo) {\n              //같은 경우에만 작동\n              if (_this2.startSelectionObject.pageNum == _findTextInfo.pageNum) {\n                // 이어 샐랙션하는지 여부\n                // 앞쪽을 잡고 샐랙션\n                // if (this.isContinueToStart) {\n                //   this.startSelectionObject = { ...findTextInfo };\n                // }\n                // // 뒷쪽을 잡고 샐랙션\n                // else if (this.isContinueToEnd) {\n                //   this.endSelectionObject = { ...findTextInfo };\n                // }\n                // // 그외 샐랙션\n                // else {\n                //   this.endSelectionObject = { ...findTextInfo };\n                // }\n                _this2.endSelectionObject = _objectSpread({}, _findTextInfo);\n                // selection 그리기\n                _classPrivateFieldGet(_validateSelection, _this2).call(_this2);\n                _findTextInfo = null;\n              }\n            }\n          }\n          return;\n        } else {\n          /** 포인터 이벤트를 걸기위함 필요하면 사용 아니면 제거. */\n          if (event.target.closest('.textLayer')) {\n            var _anno = findAnnotation(event, _this2.requestPageAnnotation, _this2.scrollContainer);\n            if (_anno) {\n              _this2.scrollContainer.firstChild.style.cursor = 'pointer';\n            } else {\n              _this2.scrollContainer.firstChild.style.cursor = null;\n            }\n          } else {\n            _this2.scrollContainer.firstChild.style.cursor = null;\n          }\n        }\n        if ((_this2$isPreventEvent2 = _this2.isPreventEvent) !== null && _this2$isPreventEvent2 !== void 0 && _this2$isPreventEvent2.call(_this2)) {\n          return;\n        }\n        if (!_this2.isDragging) return;\n        // 이동 거리 계산\n        var deltaX = event.clientX - _this2.startX;\n        var deltaY = event.clientY - _this2.startY;\n        // 반대 방향으로 스크롤 이동\n        _this2.scrollContainer.scrollLeft = _this2.scrollLeft - deltaX;\n        _this2.scrollContainer.scrollTop = _this2.scrollTop - deltaY;\n        break;\n      case 'mouseup':\n        var endDeltaX = event.clientX - _this2.startX;\n        var endDeltaY = event.clientY - _this2.startY;\n        if (_this2.isDragging) {\n          // selection완료된경우\n          if (_this2.startSelectionObject && _this2.endSelectionObject) {\n            // console.log(\n            //   'selection END',\n            //   this.startSelectionObject,\n            //   this.endSelectionObject,\n            // );\n            _this2.onSelectionEnded(_this2.startSelectionObject, _this2.endSelectionObject);\n            // this.#orderSelection();\n            //selection관련 후속 콜백을 정의해야함.\n          } else {\n            if (Math.abs(endDeltaX * endDeltaY) < 10) {\n              // 제자리 클릭인지 확인여부.\n              if (_this2.startTartgetObject) {\n                // 제자리 클릭인데 이부분에 뭔가 상호작용할 annotation이 존재\n                _this2.onClickAnnotation(_this2.startTartgetObject);\n              } else {\n                var _this2$onClick;\n                //일반적인 제자리 클릭 모션으로 인식\n                (_this2$onClick = _this2.onClick) === null || _this2$onClick === void 0 || _this2$onClick.call(_this2, event.clientX, event.clientY);\n              }\n            } else {\n              // 누른뒤 마우스를 일정 이동한 경우.\n              console.log('스와이프');\n            }\n          }\n        }\n        _this2.isDragging = false;\n        _this2.startTartgetObject = null;\n        _this2.isContinueToStart = false;\n        _this2.isContinueToEnd = false;\n        break;\n      case 'mouseleave':\n        _this2.isDragging = false;\n        _this2.startTartgetObject = null;\n        // this.scrollContainer.style.cursor = 'grab';\n        break;\n      case 'wheel':\n        if (event.ctrlKey) {\n          _this2.isDragging = false;\n          _this2.startTartgetObject = null;\n          _this2.startSelectionObject = null;\n          _this2.endSelectionObject = null;\n          event.preventDefault();\n          // deltaY 값을 기반으로 확대/축소 비율을 결정\n          var delta = event.deltaY;\n\n          // deltaY 값이 클수록 변화 비율을 더 작게\n          var scaleChange = delta * _this2.zoomFactor;\n          // 확대/축소\n          _this2.scale -= scaleChange;\n          // 스케일 값 범위 제한\n          _this2.scale = Math.max(_this2.minScale, Math.min(_this2.maxScale, _this2.scale));\n\n          //스케일값이 같으면 제외\n          if (_this2.getCurrentScale() == _this2.scale) {\n            return;\n          }\n          // 컨테이너의 위치와 크기를 기준으로 마우스의 상대 위치 계산\n          var rect = _this2.scrollContainer.getBoundingClientRect();\n          var offsetX = event.clientX - rect.left; // 컨테이너 내 마우스 X 좌표\n          var offsetY = event.clientY - rect.top; // 컨테이너 내 마우스 Y 좌표\n          // 스케일 변경 비율\n          var ratio = _this2.scale / _this2.getCurrentScale();\n          // 확대/축소 후 새로운 스크롤 위치 보정\n          var newScrollTop = (_this2.scrollContainer.scrollTop + offsetY) * ratio - offsetY;\n          var newScrollLeft = (_this2.scrollContainer.scrollLeft + offsetX) * ratio - offsetX;\n          //스케일 사이즈 up or down\n          _this2.setScale(_this2.scale);\n\n          // 음수로 튀는 경우 보정\n          if (newScrollTop < 0) {\n            return;\n          }\n          _this2.scrollContainer.scrollTo({\n            top: newScrollTop,\n            left: newScrollLeft,\n            behavior: 'instant'\n          });\n        }\n        break;\n    }\n  });\n  /**\n   * selection순서 정렬\n   * @returns\n   */\n  _classPrivateFieldInitSpec(this, _swipeSelection, function (startSelectionObject, endSelectionObject) {\n    if (!startSelectionObject || !endSelectionObject) {\n      return;\n    }\n    //만약 시작 지점의 index가 더큰경우 서로 object를 바꿔준다.\n    if (startSelectionObject.index > endSelectionObject.index) {\n      return {\n        start: endSelectionObject,\n        end: startSelectionObject,\n        isSwipe: true\n      };\n    }\n    return {\n      start: startSelectionObject,\n      end: endSelectionObject,\n      isSwipe: false\n    };\n  });\n  _classPrivateFieldInitSpec(this, _orderSelection, function () {\n    if (!_this2.startSelectionObject || !_this2.endSelectionObject) {\n      return;\n    }\n    //만약 시작 지점의 index가 더큰경우 서로 object를 바꿔준다.\n    if (_this2.startSelectionObject.index > _this2.endSelectionObject.index) {\n      var startSelectionObject = _this2.startSelectionObject,\n        endSelectionObject = _this2.endSelectionObject;\n      _this2.startSelectionObject = _objectSpread({}, endSelectionObject);\n      _this2.endSelectionObject = _objectSpread({}, startSelectionObject);\n    }\n  });\n  /**\n   * selection 그려주기.\n   * @returns\n   */\n  _classPrivateFieldInitSpec(this, _validateSelection, function () {\n    if (!_this2.startSelectionObject || !_this2.endSelectionObject) {\n      return;\n    }\n\n    // 반대로 시작되도 괜찬게 start,end값을 보정\n    var start = Math.min(_this2.startSelectionObject.index, _this2.endSelectionObject.index);\n    var end = Math.max(_this2.startSelectionObject.index, _this2.endSelectionObject.index) + 1;\n    var info = _this2.reqeustPageTextInfo(_this2.endSelectionObject.pageNum);\n    var inRangeList = info.slice(start, end);\n    //draw selection\n    _this2.requestSelection(_this2.endSelectionObject.pageNum, inRangeList);\n  });\n  _classPrivateFieldInitSpec(this, _clearSelection, function (pageNum) {\n    _this2.startSelectionObject = null;\n    _this2.endSelectionObject = null;\n    _this2.isContinueToStart = false;\n    _this2.isContinueToEnd = false;\n    if (typeof pageNum == 'number') {\n      _this2.requestClearSelection(pageNum);\n    }\n  });\n  _defineProperty(this, \"destroy\", function () {\n    _this2.scrollContainer.removeEventListener('mousedown', _this2.onHandle);\n    _this2.scrollContainer.removeEventListener('mousemove', _this2.onHandle);\n    _this2.scrollContainer.removeEventListener('mouseup', _this2.onHandle);\n    _this2.scrollContainer.removeEventListener('mouseleave', _this2.onHandle);\n    window.removeEventListener('wheel', _this2.onHandle);\n    _this2.minScale = null;\n    _this2.maxScale = null;\n    _this2.scrollContainer = null;\n    _this2.getCurrentScale = null;\n    _this2.setScale = null;\n    _this2.isDragging = null;\n    _this2.scale = null;\n    _this2.startX = null;\n    _this2.startY = null;\n    _this2.scrollLeft = null;\n    _this2.scrollTop = null;\n    _this2.zoomFactor = 0.001;\n    _this2.isPreventEvent = null;\n    _this2.requestPageAnnotation = null;\n    _this2.onClickAnnotation = null;\n    _this2.startTartgetObject = null;\n  });\n  this.minScale = minScale;\n  this.maxScale = maxScale;\n  this.scrollContainer = scrollContainer;\n  this.getCurrentScale = getCurrentScale;\n  this.setScale = setScale;\n  this.isDragging = false;\n  this.scale = 1;\n  this.startX;\n  this.startY;\n  this.scrollLeft;\n  this.scrollTop;\n  this.zoomFactor = userZoomFactor;\n  this.isPreventEvent = isPreventEvent;\n  this.requestPageAnnotation = requestPageAnnotation;\n  this.reqeustPageTextInfo = reqeustPageTextInfo;\n  this.reqeustPageTextInfoUpdate = reqeustPageTextInfoUpdate;\n  this.requestSelection = requestSelection;\n  this.requestClearSelection = requestClearSelection;\n  this.onClickAnnotation = onClickAnnotation;\n  this.onClick = onClick;\n  this.onSelectionEnded = onSelectionEnded;\n  /** 클릭한 부분의 annotation이 존재하는지 캐싱 */\n  this.startTartgetObject = null;\n  /** 클릭한 부분의 selection 시작하는 부분 */\n  this.startSelectionObject = null;\n  /** 클릭한 부분의 selection 끝나는 부분 */\n  this.endSelectionObject = null;\n  this.isContinueToStart = false;\n  this.isContinueToEnd = false;\n  this.scrollContainer.addEventListener('mousedown', this.onHandle);\n  this.scrollContainer.addEventListener('mousemove', this.onHandle);\n  this.scrollContainer.addEventListener('mouseup', this.onHandle);\n  this.scrollContainer.addEventListener('mouseleave', this.onHandle);\n\n  // mouse wheel이동\n  window.addEventListener('wheel', this.onHandle, {\n    passive: false\n  });\n});\n/**\n * 터치 이벤트 제어\n */\nvar TouchControl = exports.TouchControl = /*#__PURE__*/_createClass(function TouchControl(_ref3) {\n  var _this3 = this;\n  var scrollContainer = _ref3.scrollContainer,\n    getCurrentScale = _ref3.getCurrentScale,\n    setScale = _ref3.setScale,\n    disableTouchAction = _ref3.disableTouchAction,\n    activeTouchAction = _ref3.activeTouchAction,\n    isPreventEvent = _ref3.isPreventEvent,\n    requestPageAnnotation = _ref3.requestPageAnnotation,\n    onClickAnnotation = _ref3.onClickAnnotation,\n    onSwipeEvent = _ref3.onSwipeEvent,\n    isScrolling = _ref3.isScrolling,\n    onClick = _ref3.onClick;\n  _classCallCheck(this, TouchControl);\n  _defineProperty(this, \"isScrollable\", function (el) {\n    if (!el || el === document.body) return false;\n    var style = window.getComputedStyle(el);\n    var overflowY = style.overflowY;\n    var isScrollableY = (overflowY === 'auto' || overflowY === 'scroll') && el.scrollHeight > el.clientHeight;\n    var overflowX = style.overflowX;\n    var isScrollableX = (overflowX === 'auto' || overflowX === 'scroll') && el.scrollWidth > el.clientWidth;\n    return isScrollableY || isScrollableX;\n  });\n  _defineProperty(this, \"getScrollableParent\", function (el) {\n    while (el && el !== document.body) {\n      if (_this3.isScrollable(el)) {\n        return el;\n      }\n      el = el.parentElement;\n    }\n    return null; // 스크롤 가능한 부모가 없으면 null\n  });\n  /**\n   *\n   * @param {TouchEvent} event\n   * @returns\n   */\n  _defineProperty(this, \"onHandle\", function (event) {\n    var _this3$isPreventEvent;\n    if ((_this3$isPreventEvent = _this3.isPreventEvent) !== null && _this3$isPreventEvent !== void 0 && _this3$isPreventEvent.call(_this3)) {\n      return;\n    }\n    event.stopImmediatePropagation();\n    switch (event.type) {\n      case 'touchstart':\n        //인터렉션이 가능한 태그일경우 이벤트 취소\n        if (_this3.isInteractiveElementClick = isInteractiveElement(event)) {\n          // event.preventDefault();\n          _this3.startTartgetObject = null;\n          return;\n        }\n        //현재 포커스가 input에 가있으면 키보드가 올라오는 버그 수정.\n        document.activeElement.blur();\n        var nowTime = Date.now();\n        if (_this3.lastTouchStart) {\n          var runFirstTime = nowTime - _this3.lastTouchStart;\n          if (runFirstTime < 250) {\n            _this3.doubleTabGesture = true;\n          }\n        }\n        _this3.lastTouchStart = nowTime;\n\n        // 터치 시작 시 현재 스크롤 위치와 스케일 저장\n        _this3.initialScroll.top = _this3.scrollContainer.scrollTop;\n        _this3.initialScroll.left = _this3.scrollContainer.scrollLeft;\n        _this3.initialScale = _this3.getCurrentScale();\n\n        // 두손가락 핀치줌 케이스\n        if (event.touches.length >= 2) {\n          var _this3$disableTouchAc;\n          event.preventDefault();\n          (_this3$disableTouchAc = _this3.disableTouchAction) === null || _this3$disableTouchAc === void 0 || _this3$disableTouchAc.call(_this3);\n          _this3.isDragging = false;\n          _this3.isPinchZoom = true;\n          _this3.initialDistance = (0, _ui.getDistance)(event);\n          _this3.initialCenter = (0, _ui.getCenterPoint)(event); // 터치 시작 시의 중심점 저장\n\n          event.stopPropagation();\n        } else if (event.touches.length == 1) {\n          if (event.pageX < 20) {\n            _this3.forcedPreventEvent = true;\n          }\n          _this3.isDragging = true;\n          _this3.startX = event.touches[0].clientX;\n          _this3.startY = event.touches[0].clientY;\n          _this3.scrollLeft = _this3.scrollContainer.scrollLeft;\n          _this3.scrollTop = _this3.scrollContainer.scrollTop;\n          _this3.lastMoveTime = Date.now();\n\n          /**\n           * 해당위치에 annotation이 존재하는 체크.\n           */\n          var anno = findAnnotation(event, _this3.requestPageAnnotation, _this3.scrollContainer);\n          if (anno) {\n            _this3.startTartgetObject = anno;\n          }\n        }\n        break;\n      case 'touchmove':\n        if (_this3.isInteractiveElementClick) {\n          var _event$target$parentE, _event$target$parentE2, _event$target$parentE3;\n          //스크롤 컨텐츠의 스크롤만 가능하도록 설정\n          var c1 = (_event$target$parentE = event.target.parentElement) === null || _event$target$parentE === void 0 || (_event$target$parentE = _event$target$parentE.style) === null || _event$target$parentE === void 0 ? void 0 : _event$target$parentE.overflowY;\n          var c2 = (_event$target$parentE2 = event.target.parentElement) === null || _event$target$parentE2 === void 0 || (_event$target$parentE2 = _event$target$parentE2.style) === null || _event$target$parentE2 === void 0 ? void 0 : _event$target$parentE2.overflowX;\n          var c3 = (_event$target$parentE3 = event.target.parentElement) === null || _event$target$parentE3 === void 0 || (_event$target$parentE3 = _event$target$parentE3.style) === null || _event$target$parentE3 === void 0 ? void 0 : _event$target$parentE3.overflow;\n          var t = c1 || c2 || c3;\n          if (t && event.touches.length == 1) {} else {\n            event.preventDefault();\n          }\n          return;\n        }\n        // 두손가락 핀치줌 케이스\n        if (event.touches.length >= 2) {\n          if (!_this3.isPinchZoom) {\n            return;\n          }\n          event.preventDefault();\n          // this.isPinchZoom = true;\n          // 새로운 거리와 스케일 계산 (초기값 기준)\n          var newDistance = (0, _ui.getDistance)(event);\n          var newScale = _this3.initialScale * (newDistance / _this3.initialDistance);\n\n          //스크롤컨테이너 하위 레이아웃의 스케일 변경\n          _this3.setScale(newScale, false);\n\n          // 피봇(터치 시작 시의 중심점)이 화면 상에서 고정되도록 스크롤 위치를 재계산\n          var newScrollTop = (_this3.initialScroll.top + _this3.initialCenter.y) * (_this3.getCurrentScale() / _this3.initialScale) - _this3.initialCenter.y;\n          var newScrollLeft = (_this3.initialScroll.left + _this3.initialCenter.x) * (_this3.getCurrentScale() / _this3.initialScale) - _this3.initialCenter.x;\n          _this3.scrollContainer.scrollTo({\n            top: newScrollTop,\n            left: newScrollLeft,\n            behavior: 'instant'\n          });\n        } else if (event.touches.length == 1) {\n          if (_this3.isPinchZoom) {\n            event.preventDefault();\n            return;\n          }\n          if (_this3.forcedPreventEvent) {\n            event.preventDefault();\n            return;\n          }\n          var b = isScrollBottomEnd(_this3.scrollContainer);\n          var l = isScrollLeftEnd(_this3.scrollContainer);\n          var r = isScrollRightEnd(_this3.scrollContainer);\n          var _t = isScrollTopEnd(_this3.scrollContainer);\n          if (b && l && r && _t) {\n            event.preventDefault();\n          } else {\n            var test = _this3.scrollContainer.scrollLeft + _this3.scrollContainer.clientWidth - _this3.scrollContainer.scrollWidth > 0;\n            if (test) {\n              event.preventDefault();\n            }\n          }\n          _this3.lastX = event.touches[0].clientX;\n          _this3.lastY = event.touches[0].clientY;\n        }\n        break;\n      case 'touchend':\n        if (_this3.doubleTabGesture) {\n          event.preventDefault();\n        }\n        if (_this3.isInteractiveElementClick) {\n          _this3.isInteractiveElementClick = false;\n          _this3.doubleTabGesture = false;\n          return;\n        }\n        var now = Date.now();\n        var timeSinceLastTouch = now - _this3.lastTouchStart;\n        _this3.lastTouchEnd = now;\n        _this3.forcedPreventEvent = false;\n        // this.activeTouchAction?.();\n\n        //인터렉션 가능한 엘리먼트경우 prevent하지 않는다.\n        if (isInteractiveElement(event)) {} else {\n          // event.preventDefault();\n        }\n\n        // 핀치줌이 끝난 시점.\n        if (_this3.isPinchZoom) {\n          event.preventDefault();\n          _this3.isPinchZoom = false;\n          _this3.setScale();\n        }\n\n        // 한손가락으로 드래그.\n        if (_this3.isDragging) {\n          var endDeltaX = event.changedTouches[0].clientX - _this3.startX;\n          var endDeltaY = event.changedTouches[0].clientY - _this3.startY;\n          var absDeltaX = Math.abs(endDeltaX);\n          var absDeltaY = Math.abs(endDeltaY);\n          var threshold = 10; // 픽셀 기준\n\n          var check = absDeltaX > threshold && absDeltaY > threshold;\n          if (!check) {\n            //더블탭 제스쳐\n            if (_this3.doubleTabGesture) {\n              var currentScale = _this3.getCurrentScale();\n              if (currentScale > 1) {\n                _this3.setScale(1, true, true);\n              } else {\n                _this3.setScale(3, true, true);\n              }\n            }\n            // 제자리 클릭인지 확인여부.\n            if (_this3.startTartgetObject) {\n              // 제자리 클릭인데 이부분에 뭔가 상호작용할 annotation이 존재\n              _this3.onClickAnnotation(_this3.startTartgetObject);\n              _this3.startTartgetObject = null;\n            } else {\n              var _this3$onClick;\n              // 일반적인 제자리 클릭 모션으로 인식\n              (_this3$onClick = _this3.onClick) === null || _this3$onClick === void 0 || _this3$onClick.call(_this3, event.changedTouches[0].clientX, event.changedTouches[0].clientY);\n            }\n          }\n          // 스와이프 이벤트인 경우\n          else {\n            // 누른뒤 마우스를 일정 이동한 경우.\n            // 스크롤중엔 정지.\n            if (_this3.isScrolling()) {}\n            // 스와이프 이벤트 작동.\n            else {\n              if (endDeltaX < 0) {\n                var _this3$onSwipeEvent;\n                (_this3$onSwipeEvent = _this3.onSwipeEvent) === null || _this3$onSwipeEvent === void 0 || _this3$onSwipeEvent.call(_this3, 'ltr', endDeltaX, endDeltaY);\n              } else {\n                var _this3$onSwipeEvent2;\n                (_this3$onSwipeEvent2 = _this3.onSwipeEvent) === null || _this3$onSwipeEvent2 === void 0 || _this3$onSwipeEvent2.call(_this3, 'rtl', endDeltaX, endDeltaY);\n              }\n              _this3.isDragging = false;\n              event.preventDefault();\n              return;\n            }\n          }\n        }\n        _this3.isDragging = false;\n        _this3.doubleTabGesture = false;\n        break;\n      case 'touchcancel':\n        _this3.isDragging = false;\n        _this3.startTartgetObject = null;\n        _this3.doubleTabGesture = false;\n        if (_this3.isInteractiveElementClick) {\n          _this3.isInteractiveElementClick = false;\n          return;\n        }\n        break;\n    }\n  });\n  _defineProperty(this, \"destroy\", function () {\n    document.removeEventListener('touchstart', _this3.onHandle);\n    document.removeEventListener('touchmove', _this3.onHandle);\n    document.removeEventListener('touchend', _this3.onHandle);\n    document.removeEventListener('touchcancel', _this3.onHandle);\n    _this3.scrollContainer = null;\n    _this3.getCurrentScale = null;\n    _this3.setScale = null;\n    _this3.initialDistance = null;\n    _this3.initialCenter = null;\n    _this3.initialScroll = null;\n    _this3.initialScale = null;\n    _this3.lastTouchEnd = null;\n    _this3.lastTouchStart = null;\n    _this3.requestPageAnnotation = null;\n    _this3.onClickAnnotation = null;\n    _this3.isPreventEvent = null;\n    _this3.startTartgetObject = null;\n  });\n  this.scrollContainer = scrollContainer;\n  this.getCurrentScale = getCurrentScale;\n  this.setScale = setScale;\n  this.disableTouchAction = disableTouchAction;\n  this.activeTouchAction = activeTouchAction;\n  this.isPreventEvent = isPreventEvent;\n  this.requestPageAnnotation = requestPageAnnotation;\n  this.onClickAnnotation = onClickAnnotation;\n  this.onSwipeEvent = onSwipeEvent;\n  this.onClick = onClick;\n  this.isScrolling = isScrolling;\n  this.initialDistance = 0;\n  this.initialCenter = {\n    x: 0,\n    y: 0\n  };\n  this.initialScroll = {\n    top: 0,\n    left: 0\n  };\n  this.initialScale = 1;\n  this.lastTouchEnd = 0;\n  this.lastTouchStart = 0;\n  this.forcedPreventEvent = true;\n  this.isPinchZoom = false;\n  this.isInteractiveElementClick = false;\n  this.newScrollleft = 0;\n  this.newScrolltop = 0;\n  this.startX = 0;\n  this.startY = 0;\n  this.lastX = 0;\n  this.lastY = 0;\n  this.scrollLeft;\n  this.scrollTop;\n  this.isDragging = true;\n  this.lastMoveTime = null;\n  this.startTartgetObject = null;\n  this.doubleTabGesture = false;\n  document.addEventListener('touchstart', this.onHandle, {\n    passive: false\n  });\n  document.addEventListener('touchmove', this.onHandle, {\n    passive: false\n  });\n  document.addEventListener('touchend', this.onHandle, {\n    passive: false\n  });\n  document.addEventListener('touchcancel', this.onHandle, false);\n});\n\n//# sourceURL=webpack://ViewerJS/./src/pdf/core/UIControl.js?")},34376:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar classof = __webpack_require__(22195);\n\n// `IsArray` abstract operation\n// https://tc39.es/ecma262/#sec-isarray\n// eslint-disable-next-line es/no-array-isarray -- safe\nmodule.exports = Array.isArray || function isArray(argument) {\n  return classof(argument) === 'Array';\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/is-array.js?")},34504:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(18107);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.array.at.js?")},34527:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar DESCRIPTORS = __webpack_require__(43724);\nvar isArray = __webpack_require__(34376);\n\nvar $TypeError = TypeError;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Safari < 13 does not throw an error in this case\nvar SILENT_ON_NON_WRITABLE_LENGTH_SET = DESCRIPTORS && !function () {\n  // makes no sense without proper strict mode support\n  if (this !== undefined) return true;\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).length = 1;\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n}();\n\nmodule.exports = SILENT_ON_NON_WRITABLE_LENGTH_SET ? function (O, length) {\n  if (isArray(O) && !getOwnPropertyDescriptor(O, 'length').writable) {\n    throw new $TypeError('Cannot set read only .length');\n  } return O.length = length;\n} : function (O, length) {\n  return O.length = length;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/array-set-length.js?")},34594:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar createTypedArrayConstructor = __webpack_require__(15823);\n\n// `Float32Array` constructor\n// https://tc39.es/ecma262/#sec-typedarray-objects\ncreateTypedArrayConstructor('Float32', function (init) {\n  return function Float32Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.float32-array.js?")},34598:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar fails = __webpack_require__(79039);\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call -- required for testing\n    method.call(null, argument || function () { return 1; }, 1);\n  });\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/array-method-is-strict.js?")},34782:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar isArray = __webpack_require__(34376);\nvar isConstructor = __webpack_require__(33517);\nvar isObject = __webpack_require__(20034);\nvar toAbsoluteIndex = __webpack_require__(35610);\nvar lengthOfArrayLike = __webpack_require__(26198);\nvar toIndexedObject = __webpack_require__(25397);\nvar createProperty = __webpack_require__(97040);\nvar wellKnownSymbol = __webpack_require__(78227);\nvar arrayMethodHasSpeciesSupport = __webpack_require__(70597);\nvar nativeSlice = __webpack_require__(67680);\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('slice');\n\nvar SPECIES = wellKnownSymbol('species');\nvar $Array = Array;\nvar max = Math.max;\n\n// `Array.prototype.slice` method\n// https://tc39.es/ecma262/#sec-array.prototype.slice\n// fallback for not array-like ES3 strings and DOM objects\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  slice: function slice(start, end) {\n    var O = toIndexedObject(this);\n    var length = lengthOfArrayLike(O);\n    var k = toAbsoluteIndex(start, length);\n    var fin = toAbsoluteIndex(end === undefined ? length : end, length);\n    // inline `ArraySpeciesCreate` for usage native `Array#slice` where it's possible\n    var Constructor, result, n;\n    if (isArray(O)) {\n      Constructor = O.constructor;\n      // cross-realm fallback\n      if (isConstructor(Constructor) && (Constructor === $Array || isArray(Constructor.prototype))) {\n        Constructor = undefined;\n      } else if (isObject(Constructor)) {\n        Constructor = Constructor[SPECIES];\n        if (Constructor === null) Constructor = undefined;\n      }\n      if (Constructor === $Array || Constructor === undefined) {\n        return nativeSlice(O, k, fin);\n      }\n    }\n    result = new (Constructor === undefined ? $Array : Constructor)(max(fin - k, 0));\n    for (n = 0; k < fin; k++, n++) if (k in O) createProperty(result, n, O[k]);\n    result.length = n;\n    return result;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array.slice.js?")},34873:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar anObject = __webpack_require__(28551);\nvar aPossiblePrototype = __webpack_require__(73506);\nvar objectSetPrototypeOf = __webpack_require__(52967);\n\n// `Reflect.setPrototypeOf` method\n// https://tc39.es/ecma262/#sec-reflect.setprototypeof\nif (objectSetPrototypeOf) $({ target: 'Reflect', stat: true }, {\n  setPrototypeOf: function setPrototypeOf(target, proto) {\n    anObject(target);\n    aPossiblePrototype(proto);\n    try {\n      objectSetPrototypeOf(target, proto);\n      return true;\n    } catch (error) {\n      return false;\n    }\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.reflect.set-prototype-of.js?")},35031:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar getBuiltIn = __webpack_require__(97751);\nvar uncurryThis = __webpack_require__(79504);\nvar getOwnPropertyNamesModule = __webpack_require__(38480);\nvar getOwnPropertySymbolsModule = __webpack_require__(33717);\nvar anObject = __webpack_require__(28551);\n\nvar concat = uncurryThis([].concat);\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? concat(keys, getOwnPropertySymbols(it)) : keys;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/own-keys.js?")},35370:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar lengthOfArrayLike = __webpack_require__(26198);\n\nmodule.exports = function (Constructor, list, $length) {\n  var index = 0;\n  var length = arguments.length > 2 ? $length : lengthOfArrayLike(list);\n  var result = new Constructor(length);\n  while (length > index) result[index] = list[index++];\n  return result;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/array-from-constructor-and-list.js?")},35490:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar createHTML = __webpack_require__(77240);\nvar forcedStringHTMLMethod = __webpack_require__(23061);\n\n// `String.prototype.blink` method\n// https://tc39.es/ecma262/#sec-string.prototype.blink\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('blink') }, {\n  blink: function blink() {\n    return createHTML(this, 'blink', '', '');\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.string.blink.js?")},35548:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar isConstructor = __webpack_require__(33517);\nvar tryToString = __webpack_require__(16823);\n\nvar $TypeError = TypeError;\n\n// `Assert: IsConstructor(argument) is true`\nmodule.exports = function (argument) {\n  if (isConstructor(argument)) return argument;\n  throw new $TypeError(tryToString(argument) + ' is not a constructor');\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/a-constructor.js?")},35610:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar toIntegerOrInfinity = __webpack_require__(91291);\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toIntegerOrInfinity(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/to-absolute-index.js?")},35623:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar globalThis = __webpack_require__(44576);\nvar uncurryThis = __webpack_require__(79504);\nvar anUint8Array = __webpack_require__(34154);\nvar notDetached = __webpack_require__(55169);\n\nvar numberToString = uncurryThis(1.0.toString);\n\n// `Uint8Array.prototype.toHex` method\n// https://github.com/tc39/proposal-arraybuffer-base64\nif (globalThis.Uint8Array) $({ target: 'Uint8Array', proto: true }, {\n  toHex: function toHex() {\n    anUint8Array(this);\n    notDetached(this.buffer);\n    var result = '';\n    for (var i = 0, length = this.length; i < length; i++) {\n      var hex = numberToString(this[i], 16);\n      result += hex.length === 1 ? '0' + hex : hex;\n    }\n    return result;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.uint8-array.to-hex.js?")},35701:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar $padEnd = (__webpack_require__(60533).end);\nvar WEBKIT_BUG = __webpack_require__(83063);\n\n// `String.prototype.padEnd` method\n// https://tc39.es/ecma262/#sec-string.prototype.padend\n$({ target: 'String', proto: true, forced: WEBKIT_BUG }, {\n  padEnd: function padEnd(maxLength /* , fillString = ' ' */) {\n    return $padEnd(this, maxLength, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.string.pad-end.js?")},35714:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove this entry from `core-js@4`\n__webpack_require__(11799);\n__webpack_require__(79933);\n__webpack_require__(16258);\n__webpack_require__(41091);\n__webpack_require__(11641);\n// require('../proposals/error-cause');\n__webpack_require__(23698);\n__webpack_require__(71338);\n__webpack_require__(7225);\n__webpack_require__(43144);\n__webpack_require__(40221);\n__webpack_require__(87042);\n__webpack_require__(64673);\n__webpack_require__(95175);\n__webpack_require__(12424);\n__webpack_require__(91189);\n__webpack_require__(22668);\n__webpack_require__(95819);\n__webpack_require__(97818);\n\nvar path = __webpack_require__(19167);\n\nmodule.exports = path;\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/stage/4.js?")},35874:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(96167);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.promise.all-settled.js?")},35917:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar DESCRIPTORS = __webpack_require__(43724);\nvar fails = __webpack_require__(79039);\nvar createElement = __webpack_require__(4055);\n\n// Thanks to IE8 for its funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a !== 7;\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/ie8-dom-define.js?")},36033:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove this module from `core-js@4` since it's replaced to module below\n__webpack_require__(48523);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.map.js?")},36043:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar aCallable = __webpack_require__(79306);\n\nvar $TypeError = TypeError;\n\nvar PromiseCapability = function (C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw new $TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aCallable(resolve);\n  this.reject = aCallable(reject);\n};\n\n// `NewPromiseCapability` abstract operation\n// https://tc39.es/ecma262/#sec-newpromisecapability\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/new-promise-capability.js?")},36072:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar ArrayBufferViewCore = __webpack_require__(94644);\nvar $reduceRight = (__webpack_require__(80926).right);\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.reduceRight` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.reduceright\nexportTypedArrayMethod('reduceRight', function reduceRight(callbackfn /* , initialValue */) {\n  var length = arguments.length;\n  return $reduceRight(aTypedArray(this), callbackfn, length, length > 1 ? arguments[1] : undefined);\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.reduce-right.js?")},36389:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\n\n// eslint-disable-next-line es/no-math-atanh -- required for testing\nvar $atanh = Math.atanh;\nvar log = Math.log;\n\nvar FORCED = !($atanh && 1 / $atanh(-0) < 0);\n\n// `Math.atanh` method\n// https://tc39.es/ecma262/#sec-math.atanh\n// Tor Browser bug: Math.atanh(-0) -> 0\n$({ target: 'Math', stat: true, forced: FORCED }, {\n  atanh: function atanh(x) {\n    var n = +x;\n    return n === 0 ? n : log((1 + n) / (1 - n)) / 2;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.math.atanh.js?")},36456:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar uncurryThis = __webpack_require__(79504);\nvar toString = __webpack_require__(655);\n\nvar charAt = uncurryThis(''.charAt);\nvar charCodeAt = uncurryThis(''.charCodeAt);\nvar exec = uncurryThis(/./.exec);\nvar numberToString = uncurryThis(1.0.toString);\nvar toUpperCase = uncurryThis(''.toUpperCase);\n\nvar raw = /[\\w*+\\-./@]/;\n\nvar hex = function (code, length) {\n  var result = numberToString(code, 16);\n  while (result.length < length) result = '0' + result;\n  return result;\n};\n\n// `escape` method\n// https://tc39.es/ecma262/#sec-escape-string\n$({ global: true }, {\n  escape: function escape(string) {\n    var str = toString(string);\n    var result = '';\n    var length = str.length;\n    var index = 0;\n    var chr, code;\n    while (index < length) {\n      chr = charAt(str, index++);\n      if (exec(raw, chr)) {\n        result += chr;\n      } else {\n        code = charCodeAt(chr, 0);\n        if (code < 256) {\n          result += '%' + hex(code, 2);\n        } else {\n          result += '%u' + toUpperCase(hex(code, 4));\n        }\n      }\n    } return result;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.escape.js?")},36639:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// https://github.com/tc39/proposal-iterator-helpers\n// https://github.com/tc39/proposal-array-from-async\nvar call = __webpack_require__(69565);\nvar aCallable = __webpack_require__(79306);\nvar anObject = __webpack_require__(28551);\nvar isObject = __webpack_require__(20034);\nvar doesNotExceedSafeInteger = __webpack_require__(96837);\nvar getBuiltIn = __webpack_require__(97751);\nvar getIteratorDirect = __webpack_require__(1767);\nvar closeAsyncIteration = __webpack_require__(20772);\n\nvar createMethod = function (TYPE) {\n  var IS_TO_ARRAY = TYPE === 0;\n  var IS_FOR_EACH = TYPE === 1;\n  var IS_EVERY = TYPE === 2;\n  var IS_SOME = TYPE === 3;\n  return function (object, fn, target) {\n    anObject(object);\n    var MAPPING = fn !== undefined;\n    if (MAPPING || !IS_TO_ARRAY) aCallable(fn);\n    var record = getIteratorDirect(object);\n    var Promise = getBuiltIn('Promise');\n    var iterator = record.iterator;\n    var next = record.next;\n    var counter = 0;\n\n    return new Promise(function (resolve, reject) {\n      var ifAbruptCloseAsyncIterator = function (error) {\n        closeAsyncIteration(iterator, reject, error, reject);\n      };\n\n      var loop = function () {\n        try {\n          if (MAPPING) try {\n            doesNotExceedSafeInteger(counter);\n          } catch (error5) { ifAbruptCloseAsyncIterator(error5); }\n          Promise.resolve(anObject(call(next, iterator))).then(function (step) {\n            try {\n              if (anObject(step).done) {\n                if (IS_TO_ARRAY) {\n                  target.length = counter;\n                  resolve(target);\n                } else resolve(IS_SOME ? false : IS_EVERY || undefined);\n              } else {\n                var value = step.value;\n                try {\n                  if (MAPPING) {\n                    var result = fn(value, counter);\n\n                    var handler = function ($result) {\n                      if (IS_FOR_EACH) {\n                        loop();\n                      } else if (IS_EVERY) {\n                        $result ? loop() : closeAsyncIteration(iterator, resolve, false, reject);\n                      } else if (IS_TO_ARRAY) {\n                        try {\n                          target[counter++] = $result;\n                          loop();\n                        } catch (error4) { ifAbruptCloseAsyncIterator(error4); }\n                      } else {\n                        $result ? closeAsyncIteration(iterator, resolve, IS_SOME || value, reject) : loop();\n                      }\n                    };\n\n                    if (isObject(result)) Promise.resolve(result).then(handler, ifAbruptCloseAsyncIterator);\n                    else handler(result);\n                  } else {\n                    target[counter++] = value;\n                    loop();\n                  }\n                } catch (error3) { ifAbruptCloseAsyncIterator(error3); }\n              }\n            } catch (error2) { reject(error2); }\n          }, reject);\n        } catch (error) { reject(error); }\n      };\n\n      loop();\n    });\n  };\n};\n\nmodule.exports = {\n  toArray: createMethod(0),\n  forEach: createMethod(1),\n  every: createMethod(2),\n  some: createMethod(3),\n  find: createMethod(4)\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/async-iterator-iteration.js?")},36840:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar isCallable = __webpack_require__(94901);\nvar definePropertyModule = __webpack_require__(24913);\nvar makeBuiltIn = __webpack_require__(50283);\nvar defineGlobalProperty = __webpack_require__(39433);\n\nmodule.exports = function (O, key, value, options) {\n  if (!options) options = {};\n  var simple = options.enumerable;\n  var name = options.name !== undefined ? options.name : key;\n  if (isCallable(value)) makeBuiltIn(value, name, options);\n  if (options.global) {\n    if (simple) O[key] = value;\n    else defineGlobalProperty(key, value);\n  } else {\n    try {\n      if (!options.unsafe) delete O[key];\n      else if (O[key]) simple = true;\n    } catch (error) { /* empty */ }\n    if (simple) O[key] = value;\n    else definePropertyModule.f(O, key, {\n      value: value,\n      enumerable: false,\n      configurable: !options.nonConfigurable,\n      writable: !options.nonWritable\n    });\n  } return O;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/define-built-in.js?")},36955:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar TO_STRING_TAG_SUPPORT = __webpack_require__(92140);\nvar isCallable = __webpack_require__(94901);\nvar classofRaw = __webpack_require__(22195);\nvar wellKnownSymbol = __webpack_require__(78227);\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar $Object = Object;\n\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) === 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = $Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) === 'Object' && isCallable(O.callee) ? 'Arguments' : result;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/classof.js?")},37108:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(96069);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.regexp.escape.js?")},37467:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar arrayToReversed = __webpack_require__(37628);\nvar ArrayBufferViewCore = __webpack_require__(94644);\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\nvar getTypedArrayConstructor = ArrayBufferViewCore.getTypedArrayConstructor;\n\n// `%TypedArray%.prototype.toReversed` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.toreversed\nexportTypedArrayMethod('toReversed', function toReversed() {\n  return arrayToReversed(aTypedArray(this), getTypedArrayConstructor(this));\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.to-reversed.js?")},37550:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(13579);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.iterator.some.js?")},37628:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar lengthOfArrayLike = __webpack_require__(26198);\n\n// https://tc39.es/proposal-change-array-by-copy/#sec-array.prototype.toReversed\n// https://tc39.es/proposal-change-array-by-copy/#sec-%typedarray%.prototype.toReversed\nmodule.exports = function (O, C) {\n  var len = lengthOfArrayLike(O);\n  var A = new C(len);\n  var k = 0;\n  for (; k < len; k++) A[k] = O[len - k - 1];\n  return A;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/array-to-reversed.js?")},38309:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove this module from `core-js@4` since it's replaced to module below\n__webpack_require__(24359);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.data-view.js?")},38344:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(28543);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.string.match-all.js?")},38469:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar uncurryThis = __webpack_require__(79504);\nvar iterateSimple = __webpack_require__(40507);\nvar SetHelpers = __webpack_require__(94402);\n\nvar Set = SetHelpers.Set;\nvar SetPrototype = SetHelpers.proto;\nvar forEach = uncurryThis(SetPrototype.forEach);\nvar keys = uncurryThis(SetPrototype.keys);\nvar next = keys(new Set()).next;\n\nmodule.exports = function (set, fn, interruptible) {\n  return interruptible ? iterateSimple({ iterator: keys(set), next: next }, fn) : forEach(set, fn);\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/set-iterate.js?")},38480:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";eval("\nvar internalObjectKeys = __webpack_require__(61828);\nvar enumBugKeys = __webpack_require__(88727);\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\n// eslint-disable-next-line es/no-object-getownpropertynames -- safe\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/object-get-own-property-names.js?")},38574:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar uncurryThis = __webpack_require__(79504);\n\nvar $Error = Error;\nvar replace = uncurryThis(''.replace);\n\nvar TEST = (function (arg) { return String(new $Error(arg).stack); })('zxcasd');\n// eslint-disable-next-line redos/no-vulnerable, sonarjs/slow-regex -- safe\nvar V8_OR_CHAKRA_STACK_ENTRY = /\\n\\s*at [^:]*:[^\\n]*/;\nvar IS_V8_OR_CHAKRA_STACK = V8_OR_CHAKRA_STACK_ENTRY.test(TEST);\n\nmodule.exports = function (stack, dropEntries) {\n  if (IS_V8_OR_CHAKRA_STACK && typeof stack == 'string' && !$Error.prepareStackTrace) {\n    while (dropEntries--) stack = replace(stack, V8_OR_CHAKRA_STACK_ENTRY, '');\n  } return stack;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/error-stack-clear.js?")},38781:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar PROPER_FUNCTION_NAME = (__webpack_require__(10350).PROPER);\nvar defineBuiltIn = __webpack_require__(36840);\nvar anObject = __webpack_require__(28551);\nvar $toString = __webpack_require__(655);\nvar fails = __webpack_require__(79039);\nvar getRegExpFlags = __webpack_require__(61034);\n\nvar TO_STRING = 'toString';\nvar RegExpPrototype = RegExp.prototype;\nvar nativeToString = RegExpPrototype[TO_STRING];\n\nvar NOT_GENERIC = fails(function () { return nativeToString.call({ source: 'a', flags: 'b' }) !== '/a/b'; });\n// FF44- RegExp#toString has a wrong name\nvar INCORRECT_NAME = PROPER_FUNCTION_NAME && nativeToString.name !== TO_STRING;\n\n// `RegExp.prototype.toString` method\n// https://tc39.es/ecma262/#sec-regexp.prototype.tostring\nif (NOT_GENERIC || INCORRECT_NAME) {\n  defineBuiltIn(RegExpPrototype, TO_STRING, function toString() {\n    var R = anObject(this);\n    var pattern = $toString(R.source);\n    var flags = $toString(getRegExpFlags(R));\n    return '/' + pattern + '/' + flags;\n  }, { unsafe: true });\n}\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.regexp.to-string.js?")},39202:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove this line from `core-js@4`\n__webpack_require__(33313);\nvar $ = __webpack_require__(46518);\nvar trimEnd = __webpack_require__(18866);\n\n// `String.prototype.trimEnd` method\n// https://tc39.es/ecma262/#sec-string.prototype.trimend\n// eslint-disable-next-line es/no-string-prototype-trimstart-trimend -- safe\n$({ target: 'String', proto: true, name: 'trimEnd', forced: ''.trimEnd !== trimEnd }, {\n  trimEnd: trimEnd\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.string.trim-end.js?")},39225:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(58004);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.set.intersection.v2.js?")},39297:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar uncurryThis = __webpack_require__(79504);\nvar toObject = __webpack_require__(48981);\n\nvar hasOwnProperty = uncurryThis({}.hasOwnProperty);\n\n// `HasOwnProperty` abstract operation\n// https://tc39.es/ecma262/#sec-hasownproperty\n// eslint-disable-next-line es/no-object-hasown -- safe\nmodule.exports = Object.hasOwn || function hasOwn(it, key) {\n  return hasOwnProperty(toObject(it), key);\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/has-own-property.js?")},39320:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar call = __webpack_require__(69565);\nvar anObject = __webpack_require__(28551);\nvar getIteratorDirect = __webpack_require__(1767);\nvar notANaN = __webpack_require__(24149);\nvar toPositiveInteger = __webpack_require__(99590);\nvar createAsyncIteratorProxy = __webpack_require__(92059);\nvar createIterResultObject = __webpack_require__(62529);\nvar IS_PURE = __webpack_require__(96395);\n\nvar AsyncIteratorProxy = createAsyncIteratorProxy(function (Promise) {\n  var state = this;\n  var iterator = state.iterator;\n  var returnMethod;\n\n  if (!state.remaining--) {\n    var resultDone = createIterResultObject(undefined, true);\n    state.done = true;\n    returnMethod = iterator['return'];\n    if (returnMethod !== undefined) {\n      return Promise.resolve(call(returnMethod, iterator, undefined)).then(function () {\n        return resultDone;\n      });\n    }\n    return resultDone;\n  } return Promise.resolve(call(state.next, iterator)).then(function (step) {\n    if (anObject(step).done) {\n      state.done = true;\n      return createIterResultObject(undefined, true);\n    } return createIterResultObject(step.value, false);\n  }).then(null, function (error) {\n    state.done = true;\n    throw error;\n  });\n});\n\n// `AsyncIterator.prototype.take` method\n// https://github.com/tc39/proposal-async-iterator-helpers\n$({ target: 'AsyncIterator', proto: true, real: true, forced: IS_PURE }, {\n  take: function take(limit) {\n    anObject(this);\n    var remaining = toPositiveInteger(notANaN(+limit));\n    return new AsyncIteratorProxy(getIteratorDirect(this), {\n      remaining: remaining\n    });\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.async-iterator.take.js?")},39433:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar globalThis = __webpack_require__(44576);\n\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\n\nmodule.exports = function (key, value) {\n  try {\n    defineProperty(globalThis, key, { value: value, configurable: true, writable: true });\n  } catch (error) {\n    globalThis[key] = value;\n  } return value;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/define-global-property.js?")},39469:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\n\n// eslint-disable-next-line es/no-math-hypot -- required for testing\nvar $hypot = Math.hypot;\nvar abs = Math.abs;\nvar sqrt = Math.sqrt;\n\n// Chrome 77 bug\n// https://bugs.chromium.org/p/v8/issues/detail?id=9546\nvar FORCED = !!$hypot && $hypot(Infinity, NaN) !== Infinity;\n\n// `Math.hypot` method\n// https://tc39.es/ecma262/#sec-math.hypot\n$({ target: 'Math', stat: true, arity: 2, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  hypot: function hypot(value1, value2) {\n    var sum = 0;\n    var i = 0;\n    var aLen = arguments.length;\n    var larg = 0;\n    var arg, div;\n    while (i < aLen) {\n      arg = abs(arguments[i++]);\n      if (larg < arg) {\n        div = larg / arg;\n        sum = sum * div * div + 1;\n        larg = arg;\n      } else if (arg > 0) {\n        div = arg / larg;\n        sum += div * div;\n      } else sum += arg;\n    }\n    return larg === Infinity ? Infinity : larg * sqrt(sum);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.math.hypot.js?")},39519:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar globalThis = __webpack_require__(44576);\nvar userAgent = __webpack_require__(82839);\n\nvar process = globalThis.process;\nvar Deno = globalThis.Deno;\nvar versions = process && process.versions || Deno && Deno.version;\nvar v8 = versions && versions.v8;\nvar match, version;\n\nif (v8) {\n  match = v8.split('.');\n  // in old Chrome, versions of V8 isn't V8 = Chrome / 10\n  // but their correct versions are not interesting for us\n  version = match[0] > 0 && match[0] < 4 ? 1 : +(match[0] + match[1]);\n}\n\n// BrowserFS NodeJS `process` polyfill incorrectly set `.v8` to `0.0`\n// so check `userAgent` even if `.v8` exists, but 0\nif (!version && userAgent) {\n  match = userAgent.match(/Edge\\/(\\d+)/);\n  if (!match || match[1] >= 74) {\n    match = userAgent.match(/Chrome\\/(\\d+)/);\n    if (match) version = +match[1];\n  }\n}\n\nmodule.exports = version;\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/environment-v8-version.js?")},39687:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar globalThis = __webpack_require__(44576);\nvar isPrototypeOf = __webpack_require__(1625);\nvar getPrototypeOf = __webpack_require__(42787);\nvar setPrototypeOf = __webpack_require__(52967);\nvar copyConstructorProperties = __webpack_require__(77740);\nvar create = __webpack_require__(2360);\nvar createNonEnumerableProperty = __webpack_require__(66699);\nvar createPropertyDescriptor = __webpack_require__(6980);\nvar installErrorStack = __webpack_require__(80747);\nvar normalizeStringArgument = __webpack_require__(32603);\nvar wellKnownSymbol = __webpack_require__(78227);\nvar fails = __webpack_require__(79039);\nvar IS_PURE = __webpack_require__(96395);\n\nvar NativeSuppressedError = globalThis.SuppressedError;\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar $Error = Error;\n\n// https://github.com/oven-sh/bun/issues/9282\nvar WRONG_ARITY = !!NativeSuppressedError && NativeSuppressedError.length !== 3;\n\n// https://github.com/oven-sh/bun/issues/9283\nvar EXTRA_ARGS_SUPPORT = !!NativeSuppressedError && fails(function () {\n  return new NativeSuppressedError(1, 2, 3, { cause: 4 }).cause === 4;\n});\n\nvar PATCH = WRONG_ARITY || EXTRA_ARGS_SUPPORT;\n\nvar $SuppressedError = function SuppressedError(error, suppressed, message) {\n  var isInstance = isPrototypeOf(SuppressedErrorPrototype, this);\n  var that;\n  if (setPrototypeOf) {\n    that = PATCH && (!isInstance || getPrototypeOf(this) === SuppressedErrorPrototype)\n      ? new NativeSuppressedError()\n      : setPrototypeOf(new $Error(), isInstance ? getPrototypeOf(this) : SuppressedErrorPrototype);\n  } else {\n    that = isInstance ? this : create(SuppressedErrorPrototype);\n    createNonEnumerableProperty(that, TO_STRING_TAG, 'Error');\n  }\n  if (message !== undefined) createNonEnumerableProperty(that, 'message', normalizeStringArgument(message));\n  installErrorStack(that, $SuppressedError, that.stack, 1);\n  createNonEnumerableProperty(that, 'error', error);\n  createNonEnumerableProperty(that, 'suppressed', suppressed);\n  return that;\n};\n\nif (setPrototypeOf) setPrototypeOf($SuppressedError, $Error);\nelse copyConstructorProperties($SuppressedError, $Error, { name: true });\n\nvar SuppressedErrorPrototype = $SuppressedError.prototype = PATCH ? NativeSuppressedError.prototype : create($Error.prototype, {\n  constructor: createPropertyDescriptor(1, $SuppressedError),\n  message: createPropertyDescriptor(1, ''),\n  name: createPropertyDescriptor(1, 'SuppressedError')\n});\n\nif (PATCH && !IS_PURE) SuppressedErrorPrototype.constructor = $SuppressedError;\n\n// `SuppressedError` constructor\n// https://github.com/tc39/proposal-explicit-resource-management\n$({ global: true, constructor: true, arity: 3, forced: PATCH }, {\n  SuppressedError: $SuppressedError\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.suppressed-error.constructor.js?")},39796:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar functionApply = __webpack_require__(18745);\nvar aCallable = __webpack_require__(79306);\nvar anObject = __webpack_require__(28551);\nvar fails = __webpack_require__(79039);\n\n// MS Edge argumentsList argument is optional\nvar OPTIONAL_ARGUMENTS_LIST = !fails(function () {\n  // eslint-disable-next-line es/no-reflect -- required for testing\n  Reflect.apply(function () { /* empty */ });\n});\n\n// `Reflect.apply` method\n// https://tc39.es/ecma262/#sec-reflect.apply\n$({ target: 'Reflect', stat: true, forced: OPTIONAL_ARGUMENTS_LIST }, {\n  apply: function apply(target, thisArgument, argumentsList) {\n    return functionApply(aCallable(target), thisArgument, anObject(argumentsList));\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.reflect.apply.js?")},39928:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar lengthOfArrayLike = __webpack_require__(26198);\nvar toIntegerOrInfinity = __webpack_require__(91291);\n\nvar $RangeError = RangeError;\n\n// https://tc39.es/proposal-change-array-by-copy/#sec-array.prototype.with\n// https://tc39.es/proposal-change-array-by-copy/#sec-%typedarray%.prototype.with\nmodule.exports = function (O, C, index, value) {\n  var len = lengthOfArrayLike(O);\n  var relativeIndex = toIntegerOrInfinity(index);\n  var actualIndex = relativeIndex < 0 ? len + relativeIndex : relativeIndex;\n  if (actualIndex >= len || actualIndex < 0) throw new $RangeError('Incorrect index');\n  var A = new C(len);\n  var k = 0;\n  for (; k < len; k++) A[k] = k === actualIndex ? value : O[k];\n  return A;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/array-with.js?")},40150:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\n\n// `Number.isNaN` method\n// https://tc39.es/ecma262/#sec-number.isnan\n$({ target: 'Number', stat: true }, {\n  isNaN: function isNaN(number) {\n    // eslint-disable-next-line no-self-compare -- NaN check\n    return number !== number;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.number.is-nan.js?")},40221:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// https://github.com/tc39/proposal-promise-any\n__webpack_require__(49806);\n__webpack_require__(47575);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/proposals/promise-any.js?")},40280:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar getBuiltIn = __webpack_require__(97751);\nvar IS_PURE = __webpack_require__(96395);\nvar NativePromiseConstructor = __webpack_require__(80550);\nvar FORCED_PROMISE_CONSTRUCTOR = (__webpack_require__(10916).CONSTRUCTOR);\nvar promiseResolve = __webpack_require__(93438);\n\nvar PromiseConstructorWrapper = getBuiltIn('Promise');\nvar CHECK_WRAPPER = IS_PURE && !FORCED_PROMISE_CONSTRUCTOR;\n\n// `Promise.resolve` method\n// https://tc39.es/ecma262/#sec-promise.resolve\n$({ target: 'Promise', stat: true, forced: IS_PURE || FORCED_PROMISE_CONSTRUCTOR }, {\n  resolve: function resolve(x) {\n    return promiseResolve(CHECK_WRAPPER && this === PromiseConstructorWrapper ? NativePromiseConstructor : this, x);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.promise.resolve.js?")},40507:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar call = __webpack_require__(69565);\n\nmodule.exports = function (record, fn, ITERATOR_INSTEAD_OF_RECORD) {\n  var iterator = ITERATOR_INSTEAD_OF_RECORD ? record : record.iterator;\n  var next = record.next;\n  var step, result;\n  while (!(step = call(next, iterator)).done) {\n    result = fn(step.value);\n    if (result !== undefined) return result;\n  }\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/iterate-simple.js?")},40616:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar fails = __webpack_require__(79039);\n\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-function-prototype-bind -- safe\n  var test = (function () { /* empty */ }).bind();\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return typeof test != 'function' || test.hasOwnProperty('prototype');\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/function-bind-native.js?")},40875:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar fails = __webpack_require__(79039);\nvar toObject = __webpack_require__(48981);\nvar nativeGetPrototypeOf = __webpack_require__(42787);\nvar CORRECT_PROTOTYPE_GETTER = __webpack_require__(12211);\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeGetPrototypeOf(1); });\n\n// `Object.getPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.getprototypeof\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES, sham: !CORRECT_PROTOTYPE_GETTER }, {\n  getPrototypeOf: function getPrototypeOf(it) {\n    return nativeGetPrototypeOf(toObject(it));\n  }\n});\n\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.object.get-prototype-of.js?")},40888:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar call = __webpack_require__(69565);\nvar isObject = __webpack_require__(20034);\nvar anObject = __webpack_require__(28551);\nvar isDataDescriptor = __webpack_require__(16575);\nvar getOwnPropertyDescriptorModule = __webpack_require__(77347);\nvar getPrototypeOf = __webpack_require__(42787);\n\n// `Reflect.get` method\n// https://tc39.es/ecma262/#sec-reflect.get\nfunction get(target, propertyKey /* , receiver */) {\n  var receiver = arguments.length < 3 ? target : arguments[2];\n  var descriptor, prototype;\n  if (anObject(target) === receiver) return target[propertyKey];\n  descriptor = getOwnPropertyDescriptorModule.f(target, propertyKey);\n  if (descriptor) return isDataDescriptor(descriptor)\n    ? descriptor.value\n    : descriptor.get === undefined ? undefined : call(descriptor.get, receiver);\n  if (isObject(prototype = getPrototypeOf(target))) return get(prototype, propertyKey, receiver);\n}\n\n$({ target: 'Reflect', stat: true }, {\n  get: get\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.reflect.get.js?")},41091:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// https://github.com/tc39/proposal-array-grouping\n__webpack_require__(57019);\n__webpack_require__(66090);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/proposals/array-grouping-v2.js?")},41393:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar map = __webpack_require__(41750);\nvar IS_PURE = __webpack_require__(96395);\n\n// `AsyncIterator.prototype.map` method\n// https://github.com/tc39/proposal-async-iterator-helpers\n$({ target: 'AsyncIterator', proto: true, real: true, forced: IS_PURE }, {\n  map: map\n});\n\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.async-iterator.map.js?")},41405:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar globalThis = __webpack_require__(44576);\nvar apply = __webpack_require__(18745);\nvar ArrayBufferViewCore = __webpack_require__(94644);\nvar fails = __webpack_require__(79039);\nvar arraySlice = __webpack_require__(67680);\n\nvar Int8Array = globalThis.Int8Array;\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\nvar $toLocaleString = [].toLocaleString;\n\n// iOS Safari 6.x fails here\nvar TO_LOCALE_STRING_BUG = !!Int8Array && fails(function () {\n  $toLocaleString.call(new Int8Array(1));\n});\n\nvar FORCED = fails(function () {\n  return [1, 2].toLocaleString() !== new Int8Array([1, 2]).toLocaleString();\n}) || !fails(function () {\n  Int8Array.prototype.toLocaleString.call([1, 2]);\n});\n\n// `%TypedArray%.prototype.toLocaleString` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.tolocalestring\nexportTypedArrayMethod('toLocaleString', function toLocaleString() {\n  return apply(\n    $toLocaleString,\n    TO_LOCALE_STRING_BUG ? arraySlice(aTypedArray(this)) : aTypedArray(this),\n    arraySlice(arguments)\n  );\n}, FORCED);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.to-locale-string.js?")},41436:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar wellKnownSymbol = __webpack_require__(78227);\n\nvar MATCH = wellKnownSymbol('match');\n\nmodule.exports = function (METHOD_NAME) {\n  var regexp = /./;\n  try {\n    '/./'[METHOD_NAME](regexp);\n  } catch (error1) {\n    try {\n      regexp[MATCH] = false;\n      return '/./'[METHOD_NAME](regexp);\n    } catch (error2) { /* empty */ }\n  } return false;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/correct-is-regexp-logic.js?")},41549:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar globalThis = __webpack_require__(44576);\nvar $fromBase64 = __webpack_require__(59143);\nvar anUint8Array = __webpack_require__(34154);\n\nvar Uint8Array = globalThis.Uint8Array;\n\n// `Uint8Array.prototype.setFromBase64` method\n// https://github.com/tc39/proposal-arraybuffer-base64\nif (Uint8Array) $({ target: 'Uint8Array', proto: true }, {\n  setFromBase64: function setFromBase64(string /* , options */) {\n    anUint8Array(this);\n\n    var result = $fromBase64(string, arguments.length > 1 ? arguments[1] : undefined, this, this.length);\n\n    return { read: result.read, written: result.written };\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.uint8-array.set-from-base64.js?")},41750:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar call = __webpack_require__(69565);\nvar aCallable = __webpack_require__(79306);\nvar anObject = __webpack_require__(28551);\nvar isObject = __webpack_require__(20034);\nvar getIteratorDirect = __webpack_require__(1767);\nvar createAsyncIteratorProxy = __webpack_require__(92059);\nvar createIterResultObject = __webpack_require__(62529);\nvar closeAsyncIteration = __webpack_require__(20772);\n\nvar AsyncIteratorProxy = createAsyncIteratorProxy(function (Promise) {\n  var state = this;\n  var iterator = state.iterator;\n  var mapper = state.mapper;\n\n  return new Promise(function (resolve, reject) {\n    var doneAndReject = function (error) {\n      state.done = true;\n      reject(error);\n    };\n\n    var ifAbruptCloseAsyncIterator = function (error) {\n      closeAsyncIteration(iterator, doneAndReject, error, doneAndReject);\n    };\n\n    Promise.resolve(anObject(call(state.next, iterator))).then(function (step) {\n      try {\n        if (anObject(step).done) {\n          state.done = true;\n          resolve(createIterResultObject(undefined, true));\n        } else {\n          var value = step.value;\n          try {\n            var result = mapper(value, state.counter++);\n\n            var handler = function (mapped) {\n              resolve(createIterResultObject(mapped, false));\n            };\n\n            if (isObject(result)) Promise.resolve(result).then(handler, ifAbruptCloseAsyncIterator);\n            else handler(result);\n          } catch (error2) { ifAbruptCloseAsyncIterator(error2); }\n        }\n      } catch (error) { doneAndReject(error); }\n    }, doneAndReject);\n  });\n});\n\n// `AsyncIterator.prototype.map` method\n// https://github.com/tc39/proposal-iterator-helpers\nmodule.exports = function map(mapper) {\n  anObject(this);\n  aCallable(mapper);\n  return new AsyncIteratorProxy(getIteratorDirect(this), {\n    mapper: mapper\n  });\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/async-iterator-map.js?")},41795:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(61806);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.iterator.to-array.js?")},41852:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";eval('__webpack_require__(45700);__webpack_require__(78125);__webpack_require__(94490);__webpack_require__(89572);__webpack_require__(4731);__webpack_require__(60479);__webpack_require__(67945);__webpack_require__(83851);__webpack_require__(81278);__webpack_require__(10287);__webpack_require__(40888);Object.defineProperty(exports, "__esModule", ({value:true}));exports.WorkerMessageHandler=void 0;__webpack_require__(52675);__webpack_require__(89463);__webpack_require__(66412);__webpack_require__(2259);__webpack_require__(28706);__webpack_require__(26835);__webpack_require__(88431);__webpack_require__(33771);__webpack_require__(2008);__webpack_require__(50113);__webpack_require__(48980);__webpack_require__(46449);__webpack_require__(51629);__webpack_require__(23418);__webpack_require__(74423);__webpack_require__(25276);__webpack_require__(64346);__webpack_require__(23792);__webpack_require__(48598);__webpack_require__(8921);__webpack_require__(62062);__webpack_require__(72712);__webpack_require__(34782);__webpack_require__(15086);__webpack_require__(26910);__webpack_require__(54554);__webpack_require__(93514);__webpack_require__(54743);__webpack_require__(46761);__webpack_require__(11745);__webpack_require__(38309);__webpack_require__(59089);__webpack_require__(60739);__webpack_require__(23288);__webpack_require__(94170);__webpack_require__(62010);__webpack_require__(36033);__webpack_require__(39469);__webpack_require__(75376);__webpack_require__(11367);__webpack_require__(5914);__webpack_require__(2892);__webpack_require__(32637);__webpack_require__(40150);__webpack_require__(9868);__webpack_require__(69085);__webpack_require__(59904);__webpack_require__(84185);__webpack_require__(5506);__webpack_require__(52811);__webpack_require__(1480);__webpack_require__(40875);__webpack_require__(79432);__webpack_require__(26099);__webpack_require__(16034);__webpack_require__(78459);__webpack_require__(58940);__webpack_require__(3362);__webpack_require__(9391);__webpack_require__(60825);__webpack_require__(84864);__webpack_require__(27495);__webpack_require__(69479);__webpack_require__(38781);__webpack_require__(31415);__webpack_require__(23860);__webpack_require__(99449);__webpack_require__(27337);__webpack_require__(21699);__webpack_require__(47764);__webpack_require__(71761);__webpack_require__(68156);__webpack_require__(42781);__webpack_require__(25440);__webpack_require__(90744);__webpack_require__(11392);__webpack_require__(42762);__webpack_require__(39202);__webpack_require__(5745);__webpack_require__(20781);__webpack_require__(34594);__webpack_require__(29833);__webpack_require__(46594);__webpack_require__(72107);__webpack_require__(95477);__webpack_require__(21489);__webpack_require__(22134);__webpack_require__(3690);__webpack_require__(61740);__webpack_require__(81630);__webpack_require__(72170);__webpack_require__(75044);__webpack_require__(69539);__webpack_require__(31694);__webpack_require__(89955);__webpack_require__(33206);__webpack_require__(48345);__webpack_require__(44496);__webpack_require__(66651);__webpack_require__(12887);__webpack_require__(19369);__webpack_require__(66812);__webpack_require__(8995);__webpack_require__(31575);__webpack_require__(36072);__webpack_require__(88747);__webpack_require__(28845);__webpack_require__(29423);__webpack_require__(57301);__webpack_require__(373);__webpack_require__(86614);__webpack_require__(41405);__webpack_require__(33684);__webpack_require__(73772);__webpack_require__(30958);__webpack_require__(62480);__webpack_require__(35874);__webpack_require__(47628);__webpack_require__(12041);__webpack_require__(23500);__webpack_require__(62953);__webpack_require__(76031);__webpack_require__(3296);__webpack_require__(27208);__webpack_require__(48408);var _Util,_ImageResizer,_JpxImage,_GlobalImageCache,_OperatorList,_StructTreeRoot,_WorkerMessageHandler2;function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap(),t=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?t:r;})(e);}function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=_typeof(e)&&"function"!=typeof e)return{"default":e};var t=_getRequireWildcardCache(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&{}.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u];}return n["default"]=e,t&&t.set(e,n),n;}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}function _superPropGet(t,o,e,r){var p=_get(_getPrototypeOf(1&r?t.prototype:t),o,e);return 2&r&&"function"==typeof p?function(t){return p.apply(e,t);}:p;}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var p=_superPropBase(e,t);if(p){var n=Object.getOwnPropertyDescriptor(p,t);return n.get?n.get.call(arguments.length<3?e:r):n.value;}},_get.apply(null,arguments);}function _superPropBase(t,o){for(;!{}.hasOwnProperty.call(t,o)&&null!==(t=_getPrototypeOf(t)););return t;}function _toArray(r){return _arrayWithHoles(r)||_iterableToArray(r)||_unsupportedIterableToArray(r)||_nonIterableRest();}function _classPrivateFieldSet(s,a,r){return s.set(_assertClassBrand(s,a),r),r;}function _readOnlyError(r){throw new TypeError(\'"\'+r+\'" is read-only\');}function _classPrivateFieldInitSpec(e,t,a){_checkPrivateRedeclaration(e,t),t.set(e,a);}function _classPrivateFieldGet(s,a){return s.get(_assertClassBrand(s,a));}function _classPrivateGetter(s,r,a){return a(_assertClassBrand(s,r));}function _defineProperty(e,r,t){return(r=_toPropertyKey(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e;}function _classPrivateMethodInitSpec(e,a){_checkPrivateRedeclaration(e,a),a.add(e);}function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object");}var _marked=/*#__PURE__*/_regeneratorRuntime().mark(codePointIter),_marked2=/*#__PURE__*/_regeneratorRuntime().mark(getContainedChildren);function _toConsumableArray(r){return _arrayWithoutHoles(r)||_iterableToArray(r)||_unsupportedIterableToArray(r)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArray(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r);}function _arrayWithoutHoles(r){if(Array.isArray(r))return _arrayLikeToArray(r);}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator["return"]&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a \'"+n+"\' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},"catch":function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value;}catch(n){return void e(n);}i.done?t(u):Promise.resolve(u).then(r,o);}function _asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){asyncGeneratorStep(a,r,o,_next,_throw,"next",n);}function _throw(n){asyncGeneratorStep(a,r,o,_next,_throw,"throw",n);}_next(void 0);});};}function _assertClassBrand(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object");}function _slicedToArray(r,e){return _arrayWithHoles(r)||_iterableToArrayLimit(r,e)||_unsupportedIterableToArray(r,e)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t["return"]&&(u=t["return"](),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function _arrayWithHoles(r){if(Array.isArray(r))return r;}function _createForOfIteratorHelper(r,e){var t="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=_unsupportedIterableToArray(r))||e&&r&&"number"==typeof r.length){t&&(r=t);var _n=0,F=function F(){};return{s:F,n:function n(){return _n>=r.length?{done:!0}:{done:!1,value:r[_n++]};},e:function e(r){throw r;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var o,a=!0,u=!1;return{s:function s(){t=t.call(r);},n:function n(){var r=t.next();return a=r.done,r;},e:function e(r){u=!0,o=r;},f:function f(){try{a||null==t["return"]||t["return"]();}finally{if(u)throw o;}}};}function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0;}}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n;}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o);}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e;}function _toPropertyKey(t){var i=_toPrimitive(t,"string");return"symbol"==_typeof(i)?i:i+"";}function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}function _classCallCheck(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function");}function _callSuper(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _possibleConstructorReturn(t,e){if(e&&("object"==_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t);}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return e;}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t);},_getPrototypeOf(t);}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e);}function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t;},_setPrototypeOf(t,e);}function _typeof(o){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},_typeof(o);}function _asyncIterator(r){var n,t,o,e=2;for("undefined"!=typeof Symbol&&(t=Symbol.asyncIterator,o=Symbol.iterator);e--;){if(t&&null!=(n=r[t]))return n.call(r);if(o&&null!=(n=r[o]))return new AsyncFromSyncIterator(n.call(r));t="@@asyncIterator",o="@@iterator";}throw new TypeError("Object is not async iterable");}function AsyncFromSyncIterator(r){function AsyncFromSyncIteratorContinuation(r){if(Object(r)!==r)return Promise.reject(new TypeError(r+" is not an object."));var n=r.done;return Promise.resolve(r.value).then(function(r){return{value:r,done:n};});}return AsyncFromSyncIterator=function AsyncFromSyncIterator(r){this.s=r,this.n=r.next;},AsyncFromSyncIterator.prototype={s:null,n:null,next:function next(){return AsyncFromSyncIteratorContinuation(this.n.apply(this.s,arguments));},"return":function _return(r){var n=this.s["return"];return void 0===n?Promise.resolve({value:r,done:!0}):AsyncFromSyncIteratorContinuation(n.apply(this.s,arguments));},"throw":function _throw(r){var n=this.s["return"];return void 0===n?Promise.reject(r):AsyncFromSyncIteratorContinuation(n.apply(this.s,arguments));}},new AsyncFromSyncIterator(r);}/**\n * @licstart The following is the entire license notice for the\n * JavaScript code in this page\n *\n * Copyright 2024 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * @licend The above is the entire license notice for the\n * JavaScript code in this page\n *//******/// The require scope\n/******/var __nested_webpack_require_25285__={};/******//************************************************************************//******//* webpack/runtime/define property getters *//******/(function(){/******/// define getter functions for harmony exports\n/******/__nested_webpack_require_25285__.d=function(exports,definition){/******/for(var key in definition){/******/if(__nested_webpack_require_25285__.o(definition,key)&&!__nested_webpack_require_25285__.o(exports,key)){/******/Object.defineProperty(exports,key,{enumerable:true,get:definition[key]});/******/}/******/}/******/};/******/})();/******//******//* webpack/runtime/hasOwnProperty shorthand *//******/(function(){/******/__nested_webpack_require_25285__.o=function(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop);};/******/})();/******//************************************************************************/var __nested_webpack_exports__=globalThis.pdfjsWorker={};// EXPORTS\n__nested_webpack_require_25285__.d(__nested_webpack_exports__,{WorkerMessageHandler:function WorkerMessageHandler(){return/* reexport */_WorkerMessageHandler;}});;// ./src/shared/util.js\nvar isNodeJS=(typeof process==="undefined"?"undefined":_typeof(process))==="object"&&process+""==="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");var IDENTITY_MATRIX=[1,0,0,1,0,0];var FONT_IDENTITY_MATRIX=[0.001,0,0,0.001,0,0];var LINE_FACTOR=1.35;var LINE_DESCENT_FACTOR=0.35;var BASELINE_FACTOR=LINE_DESCENT_FACTOR/LINE_FACTOR;var RenderingIntentFlag={ANY:0x01,DISPLAY:0x02,PRINT:0x04,SAVE:0x08,ANNOTATIONS_FORMS:0x10,ANNOTATIONS_STORAGE:0x20,ANNOTATIONS_DISABLE:0x40,IS_EDITING:0x80,OPLIST:0x100};var AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};var AnnotationEditorPrefix="pdfjs_internal_editor_";var AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101};var AnnotationEditorParamsType={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41};var PermissionFlag={PRINT:0x04,MODIFY_CONTENTS:0x08,COPY:0x10,MODIFY_ANNOTATIONS:0x20,FILL_INTERACTIVE_FORMS:0x100,COPY_FOR_ACCESSIBILITY:0x200,ASSEMBLE:0x400,PRINT_HIGH_QUALITY:0x800};var TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};var ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};var AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};var AnnotationReplyType={GROUP:"Group",REPLY:"R"};var AnnotationFlag={INVISIBLE:0x01,HIDDEN:0x02,PRINT:0x04,NOZOOM:0x08,NOROTATE:0x10,NOVIEW:0x20,READONLY:0x40,LOCKED:0x80,TOGGLENOVIEW:0x100,LOCKEDCONTENTS:0x200};var AnnotationFieldFlag={READONLY:0x0000001,REQUIRED:0x0000002,NOEXPORT:0x0000004,MULTILINE:0x0001000,PASSWORD:0x0002000,NOTOGGLETOOFF:0x0004000,RADIO:0x0008000,PUSHBUTTON:0x0010000,COMBO:0x0020000,EDIT:0x0040000,SORT:0x0080000,FILESELECT:0x0100000,MULTISELECT:0x0200000,DONOTSPELLCHECK:0x0400000,DONOTSCROLL:0x0800000,COMB:0x1000000,RICHTEXT:0x2000000,RADIOSINUNISON:0x2000000,COMMITONSELCHANGE:0x4000000};var AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};var AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};var DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};var PageActionEventType={O:"PageOpen",C:"PageClose"};var VerbosityLevel={ERRORS:0,WARNINGS:1,INFOS:5};var OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93};var PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};var verbosity=VerbosityLevel.WARNINGS;function setVerbosityLevel(level){if(Number.isInteger(level)){verbosity=level;}}function getVerbosityLevel(){return verbosity;}function info(msg){if(verbosity>=VerbosityLevel.INFOS){console.log("Info: ".concat(msg));}}function warn(msg){if(verbosity>=VerbosityLevel.WARNINGS){console.log("Warning: ".concat(msg));}}function unreachable(msg){throw new Error(msg);}function assert(cond,msg){if(!cond){unreachable(msg);}}function _isValidProtocol(url){switch(url===null||url===void 0?void 0:url.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return true;default:return false;}}function createValidAbsoluteUrl(url){var baseUrl=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(!url){return null;}if(options&&typeof url==="string"){if(options.addDefaultProtocol&&url.startsWith("www.")){var dots=url.match(/\\./g);if((dots===null||dots===void 0?void 0:dots.length)>=2){url="http://".concat(url);}}if(options.tryConvertEncoding){try{url=stringToUTF8String(url);}catch(_unused){}}}var absoluteUrl=baseUrl?URL.parse(url,baseUrl):URL.parse(url);return _isValidProtocol(absoluteUrl)?absoluteUrl:null;}function shadow(obj,prop,value){var nonSerializable=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;Object.defineProperty(obj,prop,{value:value,enumerable:!nonSerializable,configurable:true,writable:false});return value;}var BaseException=function BaseExceptionClosure(){function BaseException(message,name){this.message=message;this.name=name;}BaseException.prototype=new Error();BaseException.constructor=BaseException;return BaseException;}();var PasswordException=/*#__PURE__*/function(_BaseException){function PasswordException(msg,code){var _this;_classCallCheck(this,PasswordException);_this=_callSuper(this,PasswordException,[msg,"PasswordException"]);_this.code=code;return _this;}_inherits(PasswordException,_BaseException);return _createClass(PasswordException);}(BaseException);var UnknownErrorException=/*#__PURE__*/function(_BaseException2){function UnknownErrorException(msg,details){var _this2;_classCallCheck(this,UnknownErrorException);_this2=_callSuper(this,UnknownErrorException,[msg,"UnknownErrorException"]);_this2.details=details;return _this2;}_inherits(UnknownErrorException,_BaseException2);return _createClass(UnknownErrorException);}(BaseException);var InvalidPDFException=/*#__PURE__*/function(_BaseException3){function InvalidPDFException(msg){_classCallCheck(this,InvalidPDFException);return _callSuper(this,InvalidPDFException,[msg,"InvalidPDFException"]);}_inherits(InvalidPDFException,_BaseException3);return _createClass(InvalidPDFException);}(BaseException);var ResponseException=/*#__PURE__*/function(_BaseException4){function ResponseException(msg,status,missing){var _this3;_classCallCheck(this,ResponseException);_this3=_callSuper(this,ResponseException,[msg,"ResponseException"]);_this3.status=status;_this3.missing=missing;return _this3;}_inherits(ResponseException,_BaseException4);return _createClass(ResponseException);}(BaseException);var FormatError=/*#__PURE__*/function(_BaseException5){function FormatError(msg){_classCallCheck(this,FormatError);return _callSuper(this,FormatError,[msg,"FormatError"]);}_inherits(FormatError,_BaseException5);return _createClass(FormatError);}(BaseException);var AbortException=/*#__PURE__*/function(_BaseException6){function AbortException(msg){_classCallCheck(this,AbortException);return _callSuper(this,AbortException,[msg,"AbortException"]);}_inherits(AbortException,_BaseException6);return _createClass(AbortException);}(BaseException);function bytesToString(bytes){if(_typeof(bytes)!=="object"||(bytes===null||bytes===void 0?void 0:bytes.length)===undefined){unreachable("Invalid argument for bytesToString");}var length=bytes.length;var MAX_ARGUMENT_COUNT=8192;if(length<MAX_ARGUMENT_COUNT){return String.fromCharCode.apply(null,bytes);}var strBuf=[];for(var i=0;i<length;i+=MAX_ARGUMENT_COUNT){var chunkEnd=Math.min(i+MAX_ARGUMENT_COUNT,length);var chunk=bytes.subarray(i,chunkEnd);strBuf.push(String.fromCharCode.apply(null,chunk));}return strBuf.join("");}function stringToBytes(str){if(typeof str!=="string"){unreachable("Invalid argument for stringToBytes");}var length=str.length;var bytes=new Uint8Array(length);for(var i=0;i<length;++i){bytes[i]=str.charCodeAt(i)&0xff;}return bytes;}function string32(value){return String.fromCharCode(value>>24&0xff,value>>16&0xff,value>>8&0xff,value&0xff);}function objectSize(obj){return Object.keys(obj).length;}function objectFromMap(map){var obj=Object.create(null);var _iterator2=_createForOfIteratorHelper(map),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _step2$value=_slicedToArray(_step2.value,2),key=_step2$value[0],value=_step2$value[1];obj[key]=value;}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return obj;}function isLittleEndian(){var buffer8=new Uint8Array(4);buffer8[0]=1;var view32=new Uint32Array(buffer8.buffer,0,1);return view32[0]===1;}function isEvalSupported(){try{new Function("");return true;}catch(_unused2){return false;}}var FeatureTest=/*#__PURE__*/function(){function FeatureTest(){_classCallCheck(this,FeatureTest);}return _createClass(FeatureTest,null,[{key:"isLittleEndian",get:function get(){return shadow(this,"isLittleEndian",isLittleEndian());}},{key:"isEvalSupported",get:function get(){return shadow(this,"isEvalSupported",isEvalSupported());}},{key:"isOffscreenCanvasSupported",get:function get(){return shadow(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas!=="undefined");}},{key:"isImageDecoderSupported",get:function get(){return shadow(this,"isImageDecoderSupported",typeof ImageDecoder!=="undefined");}},{key:"platform",get:function get(){var _navigator,_navigator2;if(typeof navigator!=="undefined"&&typeof((_navigator=navigator)===null||_navigator===void 0?void 0:_navigator.platform)==="string"&&typeof((_navigator2=navigator)===null||_navigator2===void 0?void 0:_navigator2.userAgent)==="string"){var _navigator3=navigator,platform=_navigator3.platform,userAgent=_navigator3.userAgent;return shadow(this,"platform",{isAndroid:userAgent.includes("Android"),isLinux:platform.includes("Linux"),isMac:platform.includes("Mac"),isWindows:platform.includes("Win"),isFirefox:userAgent.includes("Firefox")});}return shadow(this,"platform",{isAndroid:false,isLinux:false,isMac:false,isWindows:false,isFirefox:false});}},{key:"isCSSRoundSupported",get:function get(){var _globalThis$CSS,_globalThis$CSS$suppo;return shadow(this,"isCSSRoundSupported",(_globalThis$CSS=globalThis.CSS)===null||_globalThis$CSS===void 0||(_globalThis$CSS$suppo=_globalThis$CSS.supports)===null||_globalThis$CSS$suppo===void 0?void 0:_globalThis$CSS$suppo.call(_globalThis$CSS,"width: round(1.5px, 1px)"));}}]);}();var hexNumbers=Array.from(Array(256).keys(),function(n){return n.toString(16).padStart(2,"0");});var Util=/*#__PURE__*/function(){function Util(){_classCallCheck(this,Util);}return _createClass(Util,null,[{key:"makeHexColor",value:function makeHexColor(r,g,b){return"#".concat(hexNumbers[r]).concat(hexNumbers[g]).concat(hexNumbers[b]);}},{key:"scaleMinMax",value:function scaleMinMax(transform,minMax){var temp;if(transform[0]){if(transform[0]<0){temp=minMax[0];minMax[0]=minMax[2];minMax[2]=temp;}minMax[0]*=transform[0];minMax[2]*=transform[0];if(transform[3]<0){temp=minMax[1];minMax[1]=minMax[3];minMax[3]=temp;}minMax[1]*=transform[3];minMax[3]*=transform[3];}else{temp=minMax[0];minMax[0]=minMax[1];minMax[1]=temp;temp=minMax[2];minMax[2]=minMax[3];minMax[3]=temp;if(transform[1]<0){temp=minMax[1];minMax[1]=minMax[3];minMax[3]=temp;}minMax[1]*=transform[1];minMax[3]*=transform[1];if(transform[2]<0){temp=minMax[0];minMax[0]=minMax[2];minMax[2]=temp;}minMax[0]*=transform[2];minMax[2]*=transform[2];}minMax[0]+=transform[4];minMax[1]+=transform[5];minMax[2]+=transform[4];minMax[3]+=transform[5];}},{key:"transform",value:function transform(m1,m2){return[m1[0]*m2[0]+m1[2]*m2[1],m1[1]*m2[0]+m1[3]*m2[1],m1[0]*m2[2]+m1[2]*m2[3],m1[1]*m2[2]+m1[3]*m2[3],m1[0]*m2[4]+m1[2]*m2[5]+m1[4],m1[1]*m2[4]+m1[3]*m2[5]+m1[5]];}},{key:"applyTransform",value:function applyTransform(p,m){var xt=p[0]*m[0]+p[1]*m[2]+m[4];var yt=p[0]*m[1]+p[1]*m[3]+m[5];return[xt,yt];}},{key:"applyInverseTransform",value:function applyInverseTransform(p,m){var d=m[0]*m[3]-m[1]*m[2];var xt=(p[0]*m[3]-p[1]*m[2]+m[2]*m[5]-m[4]*m[3])/d;var yt=(-p[0]*m[1]+p[1]*m[0]+m[4]*m[1]-m[5]*m[0])/d;return[xt,yt];}},{key:"getAxialAlignedBoundingBox",value:function getAxialAlignedBoundingBox(r,m){var p1=this.applyTransform(r,m);var p2=this.applyTransform(r.slice(2,4),m);var p3=this.applyTransform([r[0],r[3]],m);var p4=this.applyTransform([r[2],r[1]],m);return[Math.min(p1[0],p2[0],p3[0],p4[0]),Math.min(p1[1],p2[1],p3[1],p4[1]),Math.max(p1[0],p2[0],p3[0],p4[0]),Math.max(p1[1],p2[1],p3[1],p4[1])];}},{key:"inverseTransform",value:function inverseTransform(m){var d=m[0]*m[3]-m[1]*m[2];return[m[3]/d,-m[1]/d,-m[2]/d,m[0]/d,(m[2]*m[5]-m[4]*m[3])/d,(m[4]*m[1]-m[5]*m[0])/d];}},{key:"singularValueDecompose2dScale",value:function singularValueDecompose2dScale(m){var transpose=[m[0],m[2],m[1],m[3]];var a=m[0]*transpose[0]+m[1]*transpose[2];var b=m[0]*transpose[1]+m[1]*transpose[3];var c=m[2]*transpose[0]+m[3]*transpose[2];var d=m[2]*transpose[1]+m[3]*transpose[3];var first=(a+d)/2;var second=Math.sqrt(Math.pow(a+d,2)-4*(a*d-c*b))/2;var sx=first+second||1;var sy=first-second||1;return[Math.sqrt(sx),Math.sqrt(sy)];}},{key:"normalizeRect",value:function normalizeRect(rect){var r=rect.slice(0);if(rect[0]>rect[2]){r[0]=rect[2];r[2]=rect[0];}if(rect[1]>rect[3]){r[1]=rect[3];r[3]=rect[1];}return r;}},{key:"intersect",value:function intersect(rect1,rect2){var xLow=Math.max(Math.min(rect1[0],rect1[2]),Math.min(rect2[0],rect2[2]));var xHigh=Math.min(Math.max(rect1[0],rect1[2]),Math.max(rect2[0],rect2[2]));if(xLow>xHigh){return null;}var yLow=Math.max(Math.min(rect1[1],rect1[3]),Math.min(rect2[1],rect2[3]));var yHigh=Math.min(Math.max(rect1[1],rect1[3]),Math.max(rect2[1],rect2[3]));if(yLow>yHigh){return null;}return[xLow,yLow,xHigh,yHigh];}},{key:"bezierBoundingBox",value:function bezierBoundingBox(x0,y0,x1,y1,x2,y2,x3,y3,minMax){if(minMax){minMax[0]=Math.min(minMax[0],x0,x3);minMax[1]=Math.min(minMax[1],y0,y3);minMax[2]=Math.max(minMax[2],x0,x3);minMax[3]=Math.max(minMax[3],y0,y3);}else{minMax=[Math.min(x0,x3),Math.min(y0,y3),Math.max(x0,x3),Math.max(y0,y3)];}_assertClassBrand(Util,this,_getExtremum).call(this,x0,x1,x2,x3,y0,y1,y2,y3,3*(-x0+3*(x1-x2)+x3),6*(x0-2*x1+x2),3*(x1-x0),minMax);_assertClassBrand(Util,this,_getExtremum).call(this,x0,x1,x2,x3,y0,y1,y2,y3,3*(-y0+3*(y1-y2)+y3),6*(y0-2*y1+y2),3*(y1-y0),minMax);return minMax;}}]);}();_Util=Util;function _getExtremumOnCurve(x0,x1,x2,x3,y0,y1,y2,y3,t,minMax){if(t<=0||t>=1){return;}var mt=1-t;var tt=t*t;var ttt=tt*t;var x=mt*(mt*(mt*x0+3*t*x1)+3*tt*x2)+ttt*x3;var y=mt*(mt*(mt*y0+3*t*y1)+3*tt*y2)+ttt*y3;minMax[0]=Math.min(minMax[0],x);minMax[1]=Math.min(minMax[1],y);minMax[2]=Math.max(minMax[2],x);minMax[3]=Math.max(minMax[3],y);}function _getExtremum(x0,x1,x2,x3,y0,y1,y2,y3,a,b,c,minMax){if(Math.abs(a)<1e-12){if(Math.abs(b)>=1e-12){_assertClassBrand(_Util,this,_getExtremumOnCurve).call(this,x0,x1,x2,x3,y0,y1,y2,y3,-c/b,minMax);}return;}var delta=Math.pow(b,2)-4*c*a;if(delta<0){return;}var sqrtDelta=Math.sqrt(delta);var a2=2*a;_assertClassBrand(_Util,this,_getExtremumOnCurve).call(this,x0,x1,x2,x3,y0,y1,y2,y3,(-b+sqrtDelta)/a2,minMax);_assertClassBrand(_Util,this,_getExtremumOnCurve).call(this,x0,x1,x2,x3,y0,y1,y2,y3,(-b-sqrtDelta)/a2,minMax);}var PDFStringTranslateTable=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x2d8,0x2c7,0x2c6,0x2d9,0x2dd,0x2db,0x2da,0x2dc,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x2022,0x2020,0x2021,0x2026,0x2014,0x2013,0x192,0x2044,0x2039,0x203a,0x2212,0x2030,0x201e,0x201c,0x201d,0x2018,0x2019,0x201a,0x2122,0xfb01,0xfb02,0x141,0x152,0x160,0x178,0x17d,0x131,0x142,0x153,0x161,0x17e,0,0x20ac];function stringToPDFString(str){if(str[0]>="\\xEF"){var encoding;if(str[0]==="\\xFE"&&str[1]==="\\xFF"){encoding="utf-16be";if(str.length%2===1){str=str.slice(0,-1);}}else if(str[0]==="\\xFF"&&str[1]==="\\xFE"){encoding="utf-16le";if(str.length%2===1){str=str.slice(0,-1);}}else if(str[0]==="\\xEF"&&str[1]==="\\xBB"&&str[2]==="\\xBF"){encoding="utf-8";}if(encoding){try{var decoder=new TextDecoder(encoding,{fatal:true});var buffer=stringToBytes(str);var decoded=decoder.decode(buffer);if(!decoded.includes("\\x1b")){return decoded;}return decoded.replaceAll(/\\x1b[^\\x1b]*(?:\\x1b|$)/g,"");}catch(ex){warn("stringToPDFString: \\"".concat(ex,"\\"."));}}}var strBuf=[];for(var i=0,ii=str.length;i<ii;i++){var charCode=str.charCodeAt(i);if(charCode===0x1b){while(++i<ii&&str.charCodeAt(i)!==0x1b){}continue;}var code=PDFStringTranslateTable[charCode];strBuf.push(code?String.fromCharCode(code):str.charAt(i));}return strBuf.join("");}function stringToUTF8String(str){return decodeURIComponent(escape(str));}function utf8StringToString(str){return unescape(encodeURIComponent(str));}function isArrayEqual(arr1,arr2){if(arr1.length!==arr2.length){return false;}for(var i=0,ii=arr1.length;i<ii;i++){if(arr1[i]!==arr2[i]){return false;}}return true;}function getModificationDate(){var date=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new Date();var buffer=[date.getUTCFullYear().toString(),(date.getUTCMonth()+1).toString().padStart(2,"0"),date.getUTCDate().toString().padStart(2,"0"),date.getUTCHours().toString().padStart(2,"0"),date.getUTCMinutes().toString().padStart(2,"0"),date.getUTCSeconds().toString().padStart(2,"0")];return buffer.join("");}var NormalizeRegex=null;var NormalizationMap=null;function normalizeUnicode(str){if(!NormalizeRegex){NormalizeRegex=/([\\xA0\\xB5\\u037E\\u0EB3\\u2000-\\u200A\\u202F\\u2126\\uFB00-\\uFB04\\uFB06\\uFB20-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBA1\\uFBA4-\\uFBA9\\uFBAE-\\uFBB1\\uFBD3-\\uFBDC\\uFBDE-\\uFBE7\\uFBEA-\\uFBF8\\uFBFC\\uFBFD\\uFC00-\\uFC5D\\uFC64-\\uFCF1\\uFCF5-\\uFD3D\\uFD88\\uFDF4\\uFDFA\\uFDFB\\uFE71\\uFE77\\uFE79\\uFE7B\\uFE7D]+)|(\\uFB05+)/g;NormalizationMap=new Map([["ﬅ","ſt"]]);}return str.replaceAll(NormalizeRegex,function(_,p1,p2){return p1?p1.normalize("NFKC"):NormalizationMap.get(p2);});}function getUuid(){if(typeof crypto.randomUUID==="function"){return crypto.randomUUID();}var buf=new Uint8Array(32);crypto.getRandomValues(buf);return bytesToString(buf);}var AnnotationPrefix="pdfjs_internal_id_";function toHexUtil(arr){if(Uint8Array.prototype.toHex){return arr.toHex();}return Array.from(arr,function(num){return hexNumbers[num];}).join("");}function toBase64Util(arr){if(Uint8Array.prototype.toBase64){return arr.toBase64();}return btoa(bytesToString(arr));}function fromBase64Util(str){if(Uint8Array.fromBase64){return Uint8Array.fromBase64(str);}return stringToBytes(atob(str));}if(typeof Promise["try"]!=="function"){Promise["try"]=function(fn){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key];}return new Promise(function(resolve){resolve(fn.apply(void 0,args));});};};// ./src/core/primitives.js\nvar CIRCULAR_REF=Symbol("CIRCULAR_REF");var EOF=Symbol("EOF");var CmdCache=Object.create(null);var NameCache=Object.create(null);var RefCache=Object.create(null);function clearPrimitiveCaches(){CmdCache=Object.create(null);NameCache=Object.create(null);RefCache=Object.create(null);}var Name=/*#__PURE__*/function(){function Name(name){_classCallCheck(this,Name);this.name=name;}return _createClass(Name,null,[{key:"get",value:function get(name){var _NameCache;return(_NameCache=NameCache)[name]||(_NameCache[name]=new Name(name));}}]);}();var Cmd=/*#__PURE__*/function(){function Cmd(cmd){_classCallCheck(this,Cmd);this.cmd=cmd;}return _createClass(Cmd,null,[{key:"get",value:function get(cmd){var _CmdCache;return(_CmdCache=CmdCache)[cmd]||(_CmdCache[cmd]=new Cmd(cmd));}}]);}();var nonSerializable=function nonSerializableClosure(){return nonSerializable;};var Dict=/*#__PURE__*/function(){function Dict(){var xref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;_classCallCheck(this,Dict);this._map=new Map();this.xref=xref;this.objId=null;this.suppressEncryption=false;this.__nonSerializable__=nonSerializable;}return _createClass(Dict,[{key:"assignXref",value:function assignXref(newXref){this.xref=newXref;}},{key:"size",get:function get(){return this._map.size;}},{key:"get",value:function get(key1,key2,key3){var value=this._map.get(key1);if(value===undefined&&key2!==undefined){value=this._map.get(key2);if(value===undefined&&key3!==undefined){value=this._map.get(key3);}}if(value instanceof Ref&&this.xref){return this.xref.fetch(value,this.suppressEncryption);}return value;}},{key:"getAsync",value:function(){var _getAsync=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(key1,key2,key3){var value;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:value=this._map.get(key1);if(value===undefined&&key2!==undefined){value=this._map.get(key2);if(value===undefined&&key3!==undefined){value=this._map.get(key3);}}if(!(value instanceof Ref&&this.xref)){_context.next=4;break;}return _context.abrupt("return",this.xref.fetchAsync(value,this.suppressEncryption));case 4:return _context.abrupt("return",value);case 5:case"end":return _context.stop();}},_callee,this);}));function getAsync(_x,_x2,_x3){return _getAsync.apply(this,arguments);}return getAsync;}()},{key:"getArray",value:function getArray(key1,key2,key3){var value=this._map.get(key1);if(value===undefined&&key2!==undefined){value=this._map.get(key2);if(value===undefined&&key3!==undefined){value=this._map.get(key3);}}if(value instanceof Ref&&this.xref){value=this.xref.fetch(value,this.suppressEncryption);}if(Array.isArray(value)){value=value.slice();for(var i=0,ii=value.length;i<ii;i++){if(value[i]instanceof Ref&&this.xref){value[i]=this.xref.fetch(value[i],this.suppressEncryption);}}}return value;}},{key:"getRaw",value:function getRaw(key){return this._map.get(key);}},{key:"getKeys",value:function getKeys(){return _toConsumableArray(this._map.keys());}},{key:"getRawValues",value:function getRawValues(){return _toConsumableArray(this._map.values());}},{key:"set",value:function set(key,value){this._map.set(key,value);}},{key:"has",value:function has(key){return this._map.has(key);}},{key:Symbol.iterator,value:/*#__PURE__*/_regeneratorRuntime().mark(function value(){var _iterator3,_step3,_step3$value,key,value;return _regeneratorRuntime().wrap(function value$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_iterator3=_createForOfIteratorHelper(this._map);_context2.prev=1;_iterator3.s();case 3:if((_step3=_iterator3.n()).done){_context2.next=9;break;}_step3$value=_slicedToArray(_step3.value,2),key=_step3$value[0],value=_step3$value[1];_context2.next=7;return[key,value instanceof Ref&&this.xref?this.xref.fetch(value,this.suppressEncryption):value];case 7:_context2.next=3;break;case 9:_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2["catch"](1);_iterator3.e(_context2.t0);case 14:_context2.prev=14;_iterator3.f();return _context2.finish(14);case 17:case"end":return _context2.stop();}},value,this,[[1,11,14,17]]);})},{key:"clone",value:function clone(){var dict=new Dict(this.xref);var _iterator4=_createForOfIteratorHelper(this.getKeys()),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var key=_step4.value;dict.set(key,this.getRaw(key));}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}return dict;}},{key:"delete",value:function _delete(key){delete this._map[key];}}],[{key:"empty",get:function get(){var emptyDict=new Dict(null);emptyDict.set=function(key,value){unreachable("Should not call `set` on the empty dictionary.");};return shadow(this,"empty",emptyDict);}},{key:"merge",value:function merge(_ref){var xref=_ref.xref,dictArray=_ref.dictArray,_ref$mergeSubDicts=_ref.mergeSubDicts,mergeSubDicts=_ref$mergeSubDicts===void 0?false:_ref$mergeSubDicts;var mergedDict=new Dict(xref),properties=new Map();var _iterator5=_createForOfIteratorHelper(dictArray),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var dict=_step5.value;if(!(dict instanceof Dict)){continue;}var _iterator7=_createForOfIteratorHelper(dict._map),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var _step7$value=_slicedToArray(_step7.value,2),key=_step7$value[0],value=_step7$value[1];var property=properties.get(key);if(property===undefined){property=[];properties.set(key,property);}else if(!mergeSubDicts||!(value instanceof Dict)){continue;}property.push(value);}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}var _iterator6=_createForOfIteratorHelper(properties),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var _step6$value=_slicedToArray(_step6.value,2),name=_step6$value[0],values=_step6$value[1];if(values.length===1||!(values[0]instanceof Dict)){mergedDict._map.set(name,values[0]);continue;}var subDict=new Dict(xref);var _iterator8=_createForOfIteratorHelper(values),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var _dict=_step8.value;var _iterator9=_createForOfIteratorHelper(_dict._map),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var _step9$value=_slicedToArray(_step9.value,2),_key2=_step9$value[0],_value=_step9$value[1];if(!subDict._map.has(_key2)){subDict._map.set(_key2,_value);}}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}if(subDict.size>0){mergedDict._map.set(name,subDict);}}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}properties.clear();return mergedDict.size>0?mergedDict:Dict.empty;}}]);}();var Ref=/*#__PURE__*/function(){function Ref(num,gen){_classCallCheck(this,Ref);this.num=num;this.gen=gen;}return _createClass(Ref,[{key:"toString",value:function toString(){if(this.gen===0){return"".concat(this.num,"R");}return"".concat(this.num,"R").concat(this.gen);}}],[{key:"fromString",value:function fromString(str){var ref=RefCache[str];if(ref){return ref;}var m=/^(\\d+)R(\\d*)$/.exec(str);if(!m||m[1]==="0"){return null;}return RefCache[str]=new Ref(parseInt(m[1]),!m[2]?0:parseInt(m[2]));}},{key:"get",value:function get(num,gen){var _RefCache;var key=gen===0?"".concat(num,"R"):"".concat(num,"R").concat(gen);return(_RefCache=RefCache)[key]||(_RefCache[key]=new Ref(num,gen));}}]);}();var RefSet=/*#__PURE__*/function(){function RefSet(){var parent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;_classCallCheck(this,RefSet);this._set=new Set(parent===null||parent===void 0?void 0:parent._set);}return _createClass(RefSet,[{key:"has",value:function has(ref){return this._set.has(ref.toString());}},{key:"put",value:function put(ref){this._set.add(ref.toString());}},{key:"remove",value:function remove(ref){this._set["delete"](ref.toString());}},{key:Symbol.iterator,value:function value(){return this._set.values();}},{key:"clear",value:function clear(){this._set.clear();}}]);}();var RefSetCache=/*#__PURE__*/function(){function RefSetCache(){_classCallCheck(this,RefSetCache);this._map=new Map();}return _createClass(RefSetCache,[{key:"size",get:function get(){return this._map.size;}},{key:"get",value:function get(ref){return this._map.get(ref.toString());}},{key:"has",value:function has(ref){return this._map.has(ref.toString());}},{key:"put",value:function put(ref,obj){this._map.set(ref.toString(),obj);}},{key:"putAlias",value:function putAlias(ref,aliasRef){this._map.set(ref.toString(),this.get(aliasRef));}},{key:Symbol.iterator,value:function value(){return this._map.values();}},{key:"clear",value:function clear(){this._map.clear();}},{key:"values",value:/*#__PURE__*/_regeneratorRuntime().mark(function values(){return _regeneratorRuntime().wrap(function values$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _context3.delegateYield(this._map.values(),"t0",1);case 1:case"end":return _context3.stop();}},values,this);})},{key:"items",value:/*#__PURE__*/_regeneratorRuntime().mark(function items(){var _iterator10,_step10,_step10$value,ref,value;return _regeneratorRuntime().wrap(function items$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_iterator10=_createForOfIteratorHelper(this._map);_context4.prev=1;_iterator10.s();case 3:if((_step10=_iterator10.n()).done){_context4.next=9;break;}_step10$value=_slicedToArray(_step10.value,2),ref=_step10$value[0],value=_step10$value[1];_context4.next=7;return[Ref.fromString(ref),value];case 7:_context4.next=3;break;case 9:_context4.next=14;break;case 11:_context4.prev=11;_context4.t0=_context4["catch"](1);_iterator10.e(_context4.t0);case 14:_context4.prev=14;_iterator10.f();return _context4.finish(14);case 17:case"end":return _context4.stop();}},items,this,[[1,11,14,17]]);})}]);}();function isName(v,name){return v instanceof Name&&(name===undefined||v.name===name);}function isCmd(v,cmd){return v instanceof Cmd&&(cmd===undefined||v.cmd===cmd);}function isDict(v,type){return v instanceof Dict&&(type===undefined||isName(v.get("Type"),type));}function isRefsEqual(v1,v2){return v1.num===v2.num&&v1.gen===v2.gen;};// ./src/core/base_stream.js\nvar BaseStream=/*#__PURE__*/function(){function BaseStream(){_classCallCheck(this,BaseStream);}return _createClass(BaseStream,[{key:"length",get:function get(){unreachable("Abstract getter `length` accessed");}},{key:"isEmpty",get:function get(){unreachable("Abstract getter `isEmpty` accessed");}},{key:"isDataLoaded",get:function get(){return shadow(this,"isDataLoaded",true);}},{key:"getByte",value:function getByte(){unreachable("Abstract method `getByte` called");}},{key:"getBytes",value:function getBytes(length){unreachable("Abstract method `getBytes` called");}},{key:"getImageData",value:function(){var _getImageData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(length,decoderOptions){return _regeneratorRuntime().wrap(function _callee2$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return _context5.abrupt("return",this.getBytes(length,decoderOptions));case 1:case"end":return _context5.stop();}},_callee2,this);}));function getImageData(_x4,_x5){return _getImageData.apply(this,arguments);}return getImageData;}()},{key:"asyncGetBytes",value:function(){var _asyncGetBytes=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:unreachable("Abstract method `asyncGetBytes` called");case 1:case"end":return _context6.stop();}},_callee3);}));function asyncGetBytes(){return _asyncGetBytes.apply(this,arguments);}return asyncGetBytes;}()},{key:"isAsync",get:function get(){return false;}},{key:"isAsyncDecoder",get:function get(){return false;}},{key:"canAsyncDecodeImageFromBuffer",get:function get(){return false;}},{key:"getTransferableImage",value:function(){var _getTransferableImage=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){return _regeneratorRuntime().wrap(function _callee4$(_context7){while(1)switch(_context7.prev=_context7.next){case 0:return _context7.abrupt("return",null);case 1:case"end":return _context7.stop();}},_callee4);}));function getTransferableImage(){return _getTransferableImage.apply(this,arguments);}return getTransferableImage;}()},{key:"peekByte",value:function peekByte(){var peekedByte=this.getByte();if(peekedByte!==-1){this.pos--;}return peekedByte;}},{key:"peekBytes",value:function peekBytes(length){var bytes=this.getBytes(length);this.pos-=bytes.length;return bytes;}},{key:"getUint16",value:function getUint16(){var b0=this.getByte();var b1=this.getByte();if(b0===-1||b1===-1){return-1;}return(b0<<8)+b1;}},{key:"getInt32",value:function getInt32(){var b0=this.getByte();var b1=this.getByte();var b2=this.getByte();var b3=this.getByte();return(b0<<24)+(b1<<16)+(b2<<8)+b3;}},{key:"getByteRange",value:function getByteRange(begin,end){unreachable("Abstract method `getByteRange` called");}},{key:"getString",value:function getString(length){return bytesToString(this.getBytes(length));}},{key:"skip",value:function skip(n){this.pos+=n||1;}},{key:"reset",value:function reset(){unreachable("Abstract method `reset` called");}},{key:"moveStart",value:function moveStart(){unreachable("Abstract method `moveStart` called");}},{key:"makeSubStream",value:function makeSubStream(start,length){var dict=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;unreachable("Abstract method `makeSubStream` called");}},{key:"getBaseStreams",value:function getBaseStreams(){return null;}}]);}();;// ./src/core/core_utils.js\nvar PDF_VERSION_REGEXP=/^[1-9]\\.\\d$/;var MAX_INT_32=Math.pow(2,31)-1;var MIN_INT_32=-Math.pow(2,31);function getLookupTableFactory(initializer){var lookup;return function(){if(initializer){lookup=Object.create(null);initializer(lookup);initializer=null;}return lookup;};}var MissingDataException=/*#__PURE__*/function(_BaseException7){function MissingDataException(begin,end){var _this4;_classCallCheck(this,MissingDataException);_this4=_callSuper(this,MissingDataException,["Missing data [".concat(begin,", ").concat(end,")"),"MissingDataException"]);_this4.begin=begin;_this4.end=end;return _this4;}_inherits(MissingDataException,_BaseException7);return _createClass(MissingDataException);}(BaseException);var ParserEOFException=/*#__PURE__*/function(_BaseException8){function ParserEOFException(msg){_classCallCheck(this,ParserEOFException);return _callSuper(this,ParserEOFException,[msg,"ParserEOFException"]);}_inherits(ParserEOFException,_BaseException8);return _createClass(ParserEOFException);}(BaseException);var XRefEntryException=/*#__PURE__*/function(_BaseException9){function XRefEntryException(msg){_classCallCheck(this,XRefEntryException);return _callSuper(this,XRefEntryException,[msg,"XRefEntryException"]);}_inherits(XRefEntryException,_BaseException9);return _createClass(XRefEntryException);}(BaseException);var XRefParseException=/*#__PURE__*/function(_BaseException10){function XRefParseException(msg){_classCallCheck(this,XRefParseException);return _callSuper(this,XRefParseException,[msg,"XRefParseException"]);}_inherits(XRefParseException,_BaseException10);return _createClass(XRefParseException);}(BaseException);function arrayBuffersToBytes(arr){var length=arr.length;if(length===0){return new Uint8Array(0);}if(length===1){return new Uint8Array(arr[0]);}var dataLength=0;for(var i=0;i<length;i++){dataLength+=arr[i].byteLength;}var data=new Uint8Array(dataLength);var pos=0;for(var _i=0;_i<length;_i++){var item=new Uint8Array(arr[_i]);data.set(item,pos);pos+=item.byteLength;}return data;}function fetchBinaryData(_x6){return _fetchBinaryData.apply(this,arguments);}function _fetchBinaryData(){_fetchBinaryData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee108(url){var response;return _regeneratorRuntime().wrap(function _callee108$(_context127){while(1)switch(_context127.prev=_context127.next){case 0:_context127.next=2;return fetch(url);case 2:response=_context127.sent;if(response.ok){_context127.next=5;break;}throw new Error("Failed to fetch file \\"".concat(url,"\\" with \\"").concat(response.statusText,"\\"."));case 5:_context127.t0=Uint8Array;_context127.next=8;return response.arrayBuffer();case 8:_context127.t1=_context127.sent;return _context127.abrupt("return",new _context127.t0(_context127.t1));case 10:case"end":return _context127.stop();}},_callee108);}));return _fetchBinaryData.apply(this,arguments);}function getInheritableProperty(_ref2){var dict=_ref2.dict,key=_ref2.key,_ref2$getArray=_ref2.getArray,getArray=_ref2$getArray===void 0?false:_ref2$getArray,_ref2$stopWhenFound=_ref2.stopWhenFound,stopWhenFound=_ref2$stopWhenFound===void 0?true:_ref2$stopWhenFound;var values;var visited=new RefSet();while(dict instanceof Dict&&!(dict.objId&&visited.has(dict.objId))){if(dict.objId){visited.put(dict.objId);}var value=getArray?dict.getArray(key):dict.get(key);if(value!==undefined){if(stopWhenFound){return value;}(values||(values=[])).push(value);}dict=dict.get("Parent");}return values;}function getParentToUpdate(dict,ref,xref){var visited=new RefSet();var firstDict=dict;var result={dict:null,ref:null};while(dict instanceof Dict&&!visited.has(ref)){visited.put(ref);if(dict.has("T")){break;}ref=dict.getRaw("Parent");if(!(ref instanceof Ref)){return result;}dict=xref.fetch(ref);}if(dict instanceof Dict&&dict!==firstDict){result.dict=dict;result.ref=ref;}return result;}var ROMAN_NUMBER_MAP=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];function toRomanNumerals(number){var lowerCase=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;assert(Number.isInteger(number)&&number>0,"The number should be a positive integer.");var roman="M".repeat(number/1000|0)+ROMAN_NUMBER_MAP[number%1000/100|0]+ROMAN_NUMBER_MAP[10+(number%100/10|0)]+ROMAN_NUMBER_MAP[20+number%10];return lowerCase?roman.toLowerCase():roman;}function log2(x){return x>0?Math.ceil(Math.log2(x)):0;}function readInt8(data,offset){return data[offset]<<24>>24;}function readInt16(data,offset){return(data[offset]<<24|data[offset+1]<<16)>>16;}function readUint16(data,offset){return data[offset]<<8|data[offset+1];}function readUint32(data,offset){return(data[offset]<<24|data[offset+1]<<16|data[offset+2]<<8|data[offset+3])>>>0;}function isWhiteSpace(ch){return ch===0x20||ch===0x09||ch===0x0d||ch===0x0a;}function isBooleanArray(arr,len){return Array.isArray(arr)&&(len===null||arr.length===len)&&arr.every(function(x){return typeof x==="boolean";});}function isNumberArray(arr,len){if(Array.isArray(arr)){return(len===null||arr.length===len)&&arr.every(function(x){return typeof x==="number";});}return ArrayBuffer.isView(arr)&&!(arr instanceof BigInt64Array||arr instanceof BigUint64Array)&&(len===null||arr.length===len);}function lookupMatrix(arr,fallback){return isNumberArray(arr,6)?arr:fallback;}function lookupRect(arr,fallback){return isNumberArray(arr,4)?arr:fallback;}function lookupNormalRect(arr,fallback){return isNumberArray(arr,4)?Util.normalizeRect(arr):fallback;}function parseXFAPath(path){var positionPattern=/(.+)\\[(\\d+)\\]$/;return path.split(".").map(function(component){var m=component.match(positionPattern);if(m){return{name:m[1],pos:parseInt(m[2],10)};}return{name:component,pos:0};});}function escapePDFName(str){var buffer=[];var start=0;for(var i=0,ii=str.length;i<ii;i++){var _char=str.charCodeAt(i);if(_char<0x21||_char>0x7e||_char===0x23||_char===0x28||_char===0x29||_char===0x3c||_char===0x3e||_char===0x5b||_char===0x5d||_char===0x7b||_char===0x7d||_char===0x2f||_char===0x25){if(start<i){buffer.push(str.substring(start,i));}buffer.push("#".concat(_char.toString(16)));start=i+1;}}if(buffer.length===0){return str;}if(start<str.length){buffer.push(str.substring(start,str.length));}return buffer.join("");}function escapeString(str){return str.replaceAll(/([()\\\\\\n\\r])/g,function(match){if(match==="\\n"){return"\\\\n";}else if(match==="\\r"){return"\\\\r";}return"\\\\".concat(match);});}function _collectJS(entry,xref,list,parents){if(!entry){return;}var parent=null;if(entry instanceof Ref){if(parents.has(entry)){return;}parent=entry;parents.put(parent);entry=xref.fetch(entry);}if(Array.isArray(entry)){var _iterator11=_createForOfIteratorHelper(entry),_step11;try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var element=_step11.value;_collectJS(element,xref,list,parents);}}catch(err){_iterator11.e(err);}finally{_iterator11.f();}}else if(entry instanceof Dict){if(isName(entry.get("S"),"JavaScript")){var js=entry.get("JS");var code;if(js instanceof BaseStream){code=js.getString();}else if(typeof js==="string"){code=js;}code&&(code=stringToPDFString(code).replaceAll("\\x00",""));if(code){list.push(code);}}_collectJS(entry.getRaw("Next"),xref,list,parents);}if(parent){parents.remove(parent);}}function collectActions(xref,dict,eventType){var actions=Object.create(null);var additionalActionsDicts=getInheritableProperty({dict:dict,key:"AA",stopWhenFound:false});if(additionalActionsDicts){for(var i=additionalActionsDicts.length-1;i>=0;i--){var additionalActions=additionalActionsDicts[i];if(!(additionalActions instanceof Dict)){continue;}var _iterator12=_createForOfIteratorHelper(additionalActions.getKeys()),_step12;try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var key=_step12.value;var action=eventType[key];if(!action){continue;}var actionDict=additionalActions.getRaw(key);var parents=new RefSet();var list=[];_collectJS(actionDict,xref,list,parents);if(list.length>0){actions[action]=list;}}}catch(err){_iterator12.e(err);}finally{_iterator12.f();}}}if(dict.has("A")){var _actionDict=dict.get("A");var _parents=new RefSet();var _list=[];_collectJS(_actionDict,xref,_list,_parents);if(_list.length>0){actions.Action=_list;}}return objectSize(actions)>0?actions:null;}var XMLEntities={0x3c:"&lt;",0x3e:"&gt;",0x26:"&amp;",0x22:"&quot;",0x27:"&apos;"};function codePointIter(str){var i,ii,_char2;return _regeneratorRuntime().wrap(function codePointIter$(_context8){while(1)switch(_context8.prev=_context8.next){case 0:i=0,ii=str.length;case 1:if(!(i<ii)){_context8.next=9;break;}_char2=str.codePointAt(i);if(_char2>0xd7ff&&(_char2<0xe000||_char2>0xfffd)){i++;}_context8.next=6;return _char2;case 6:i++;_context8.next=1;break;case 9:case"end":return _context8.stop();}},_marked);}function encodeToXmlString(str){var buffer=[];var start=0;for(var i=0,ii=str.length;i<ii;i++){var _char3=str.codePointAt(i);if(0x20<=_char3&&_char3<=0x7e){var entity=XMLEntities[_char3];if(entity){if(start<i){buffer.push(str.substring(start,i));}buffer.push(entity);start=i+1;}}else{if(start<i){buffer.push(str.substring(start,i));}buffer.push("&#x".concat(_char3.toString(16).toUpperCase(),";"));if(_char3>0xd7ff&&(_char3<0xe000||_char3>0xfffd)){i++;}start=i+1;}}if(buffer.length===0){return str;}if(start<str.length){buffer.push(str.substring(start,str.length));}return buffer.join("");}function validateFontName(fontFamily){var mustWarn=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var m=/^("|\').*("|\')$/.exec(fontFamily);if(m&&m[1]===m[2]){var re=new RegExp("[^\\\\\\\\]".concat(m[1]));if(re.test(fontFamily.slice(1,-1))){if(mustWarn){warn("FontFamily contains unescaped ".concat(m[1],": ").concat(fontFamily,"."));}return false;}}else{var _iterator13=_createForOfIteratorHelper(fontFamily.split(/[ \\t]+/)),_step13;try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var ident=_step13.value;if(/^(\\d|(-(\\d|-)))/.test(ident)||!/^[\\w-\\\\]+$/.test(ident)){if(mustWarn){warn("FontFamily contains invalid <custom-ident>: ".concat(fontFamily,"."));}return false;}}}catch(err){_iterator13.e(err);}finally{_iterator13.f();}}return true;}function validateCSSFont(cssFontInfo){var DEFAULT_CSS_FONT_OBLIQUE="14";var DEFAULT_CSS_FONT_WEIGHT="400";var CSS_FONT_WEIGHT_VALUES=new Set(["100","200","300","400","500","600","700","800","900","1000","normal","bold","bolder","lighter"]);var fontFamily=cssFontInfo.fontFamily,fontWeight=cssFontInfo.fontWeight,italicAngle=cssFontInfo.italicAngle;if(!validateFontName(fontFamily,true)){return false;}var weight=fontWeight?fontWeight.toString():"";cssFontInfo.fontWeight=CSS_FONT_WEIGHT_VALUES.has(weight)?weight:DEFAULT_CSS_FONT_WEIGHT;var angle=parseFloat(italicAngle);cssFontInfo.italicAngle=isNaN(angle)||angle<-90||angle>90?DEFAULT_CSS_FONT_OBLIQUE:italicAngle.toString();return true;}function recoverJsURL(str){var URL_OPEN_METHODS=["app.launchURL","window.open","xfa.host.gotoURL"];var regex=new RegExp("^\\\\s*("+URL_OPEN_METHODS.join("|").replaceAll(".","\\\\.")+")\\\\((?:\'|\\")([^\'\\"]*)(?:\'|\\")(?:,\\\\s*(\\\\w+)\\\\)|\\\\))","i");var jsUrl=regex.exec(str);if(jsUrl!==null&&jsUrl!==void 0&&jsUrl[2]){return{url:jsUrl[2],newWindow:jsUrl[1]==="app.launchURL"&&jsUrl[3]==="true"};}return null;}function numberToString(value){if(Number.isInteger(value)){return value.toString();}var roundedValue=Math.round(value*100);if(roundedValue%100===0){return(roundedValue/100).toString();}if(roundedValue%10===0){return value.toFixed(1);}return value.toFixed(2);}function getNewAnnotationsMap(annotationStorage){if(!annotationStorage){return null;}var newAnnotationsByPage=new Map();var _iterator14=_createForOfIteratorHelper(annotationStorage),_step14;try{for(_iterator14.s();!(_step14=_iterator14.n()).done;){var _step14$value=_slicedToArray(_step14.value,2),key=_step14$value[0],value=_step14$value[1];if(!key.startsWith(AnnotationEditorPrefix)){continue;}var annotations=newAnnotationsByPage.get(value.pageIndex);if(!annotations){annotations=[];newAnnotationsByPage.set(value.pageIndex,annotations);}annotations.push(value);}}catch(err){_iterator14.e(err);}finally{_iterator14.f();}return newAnnotationsByPage.size>0?newAnnotationsByPage:null;}function stringToAsciiOrUTF16BE(str){return isAscii(str)?str:stringToUTF16String(str,true);}function isAscii(str){return /^[\\x00-\\x7F]*$/.test(str);}function stringToUTF16HexString(str){var buf=[];for(var i=0,ii=str.length;i<ii;i++){var _char4=str.charCodeAt(i);buf.push(hexNumbers[_char4>>8&0xff],hexNumbers[_char4&0xff]);}return buf.join("");}function stringToUTF16String(str){var bigEndian=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var buf=[];if(bigEndian){buf.push("\\xFE\\xFF");}for(var i=0,ii=str.length;i<ii;i++){var _char5=str.charCodeAt(i);buf.push(String.fromCharCode(_char5>>8&0xff),String.fromCharCode(_char5&0xff));}return buf.join("");}function _getRotationMatrix(rotation,width,height){switch(rotation){case 90:return[0,1,-1,0,width,0];case 180:return[-1,0,0,-1,width,height];case 270:return[0,-1,1,0,0,height];default:throw new Error("Invalid rotation");}}function getSizeInBytes(x){return Math.ceil(Math.ceil(Math.log2(1+x))/8);};// ./src/core/stream.js\nvar Stream=/*#__PURE__*/function(_BaseStream){function Stream(arrayBuffer,start,length,dict){var _this5;_classCallCheck(this,Stream);_this5=_callSuper(this,Stream);_this5.bytes=arrayBuffer instanceof Uint8Array?arrayBuffer:new Uint8Array(arrayBuffer);_this5.start=start||0;_this5.pos=_this5.start;_this5.end=start+length||_this5.bytes.length;_this5.dict=dict;return _this5;}_inherits(Stream,_BaseStream);return _createClass(Stream,[{key:"length",get:function get(){return this.end-this.start;}},{key:"isEmpty",get:function get(){return this.length===0;}},{key:"getByte",value:function getByte(){if(this.pos>=this.end){return-1;}return this.bytes[this.pos++];}},{key:"getBytes",value:function getBytes(length){var bytes=this.bytes;var pos=this.pos;var strEnd=this.end;if(!length){return bytes.subarray(pos,strEnd);}var end=pos+length;if(end>strEnd){end=strEnd;}this.pos=end;return bytes.subarray(pos,end);}},{key:"getByteRange",value:function getByteRange(begin,end){if(begin<0){begin=0;}if(end>this.end){end=this.end;}return this.bytes.subarray(begin,end);}},{key:"reset",value:function reset(){this.pos=this.start;}},{key:"moveStart",value:function moveStart(){this.start=this.pos;}},{key:"makeSubStream",value:function makeSubStream(start,length){var dict=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;return new Stream(this.bytes.buffer,start,length,dict);}}]);}(BaseStream);var StringStream=/*#__PURE__*/function(_Stream){function StringStream(str){_classCallCheck(this,StringStream);return _callSuper(this,StringStream,[stringToBytes(str)]);}_inherits(StringStream,_Stream);return _createClass(StringStream);}(Stream);var NullStream=/*#__PURE__*/function(_Stream2){function NullStream(){_classCallCheck(this,NullStream);return _callSuper(this,NullStream,[new Uint8Array(0)]);}_inherits(NullStream,_Stream2);return _createClass(NullStream);}(Stream);;// ./src/core/chunked_stream.js\nvar ChunkedStream=/*#__PURE__*/function(_Stream3){function ChunkedStream(length,chunkSize,manager){var _this6;_classCallCheck(this,ChunkedStream);_this6=_callSuper(this,ChunkedStream,[new Uint8Array(length),0,length,null]);_this6.chunkSize=chunkSize;_this6._loadedChunks=new Set();_this6.numChunks=Math.ceil(length/chunkSize);_this6.manager=manager;_this6.progressiveDataLength=0;_this6.lastSuccessfulEnsureByteChunk=-1;return _this6;}_inherits(ChunkedStream,_Stream3);return _createClass(ChunkedStream,[{key:"getMissingChunks",value:function getMissingChunks(){var chunks=[];for(var chunk=0,n=this.numChunks;chunk<n;++chunk){if(!this._loadedChunks.has(chunk)){chunks.push(chunk);}}return chunks;}},{key:"numChunksLoaded",get:function get(){return this._loadedChunks.size;}},{key:"isDataLoaded",get:function get(){return this.numChunksLoaded===this.numChunks;}},{key:"onReceiveData",value:function onReceiveData(begin,chunk){var chunkSize=this.chunkSize;if(begin%chunkSize!==0){throw new Error("Bad begin offset: ".concat(begin));}var end=begin+chunk.byteLength;if(end%chunkSize!==0&&end!==this.bytes.length){throw new Error("Bad end offset: ".concat(end));}this.bytes.set(new Uint8Array(chunk),begin);var beginChunk=Math.floor(begin/chunkSize);var endChunk=Math.floor((end-1)/chunkSize)+1;for(var curChunk=beginChunk;curChunk<endChunk;++curChunk){this._loadedChunks.add(curChunk);}}},{key:"onReceiveProgressiveData",value:function onReceiveProgressiveData(data){var position=this.progressiveDataLength;var beginChunk=Math.floor(position/this.chunkSize);this.bytes.set(new Uint8Array(data),position);position+=data.byteLength;this.progressiveDataLength=position;var endChunk=position>=this.end?this.numChunks:Math.floor(position/this.chunkSize);for(var curChunk=beginChunk;curChunk<endChunk;++curChunk){this._loadedChunks.add(curChunk);}}},{key:"ensureByte",value:function ensureByte(pos){if(pos<this.progressiveDataLength){return;}var chunk=Math.floor(pos/this.chunkSize);if(chunk>this.numChunks){return;}if(chunk===this.lastSuccessfulEnsureByteChunk){return;}if(!this._loadedChunks.has(chunk)){throw new MissingDataException(pos,pos+1);}this.lastSuccessfulEnsureByteChunk=chunk;}},{key:"ensureRange",value:function ensureRange(begin,end){if(begin>=end){return;}if(end<=this.progressiveDataLength){return;}var beginChunk=Math.floor(begin/this.chunkSize);if(beginChunk>this.numChunks){return;}var endChunk=Math.min(Math.floor((end-1)/this.chunkSize)+1,this.numChunks);for(var chunk=beginChunk;chunk<endChunk;++chunk){if(!this._loadedChunks.has(chunk)){throw new MissingDataException(begin,end);}}}},{key:"nextEmptyChunk",value:function nextEmptyChunk(beginChunk){var numChunks=this.numChunks;for(var i=0;i<numChunks;++i){var chunk=(beginChunk+i)%numChunks;if(!this._loadedChunks.has(chunk)){return chunk;}}return null;}},{key:"hasChunk",value:function hasChunk(chunk){return this._loadedChunks.has(chunk);}},{key:"getByte",value:function getByte(){var pos=this.pos;if(pos>=this.end){return-1;}if(pos>=this.progressiveDataLength){this.ensureByte(pos);}return this.bytes[this.pos++];}},{key:"getBytes",value:function getBytes(length){var bytes=this.bytes;var pos=this.pos;var strEnd=this.end;if(!length){if(strEnd>this.progressiveDataLength){this.ensureRange(pos,strEnd);}return bytes.subarray(pos,strEnd);}var end=pos+length;if(end>strEnd){end=strEnd;}if(end>this.progressiveDataLength){this.ensureRange(pos,end);}this.pos=end;return bytes.subarray(pos,end);}},{key:"getByteRange",value:function getByteRange(begin,end){if(begin<0){begin=0;}if(end>this.end){end=this.end;}if(end>this.progressiveDataLength){this.ensureRange(begin,end);}return this.bytes.subarray(begin,end);}},{key:"makeSubStream",value:function makeSubStream(start,length){var dict=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(length){if(start+length>this.progressiveDataLength){this.ensureRange(start,start+length);}}else if(start>=this.progressiveDataLength){this.ensureByte(start);}function ChunkedStreamSubstream(){}ChunkedStreamSubstream.prototype=Object.create(this);ChunkedStreamSubstream.prototype.getMissingChunks=function(){var chunkSize=this.chunkSize;var beginChunk=Math.floor(this.start/chunkSize);var endChunk=Math.floor((this.end-1)/chunkSize)+1;var missingChunks=[];for(var chunk=beginChunk;chunk<endChunk;++chunk){if(!this._loadedChunks.has(chunk)){missingChunks.push(chunk);}}return missingChunks;};Object.defineProperty(ChunkedStreamSubstream.prototype,"isDataLoaded",{get:function get(){if(this.numChunksLoaded===this.numChunks){return true;}return this.getMissingChunks().length===0;},configurable:true});var subStream=new ChunkedStreamSubstream();subStream.pos=subStream.start=start;subStream.end=start+length||this.end;subStream.dict=dict;return subStream;}},{key:"getBaseStreams",value:function getBaseStreams(){return[this];}}]);}(Stream);var ChunkedStreamManager=/*#__PURE__*/function(){function ChunkedStreamManager(pdfNetworkStream,args){_classCallCheck(this,ChunkedStreamManager);this.length=args.length;this.chunkSize=args.rangeChunkSize;this.stream=new ChunkedStream(this.length,this.chunkSize,this);this.pdfNetworkStream=pdfNetworkStream;this.disableAutoFetch=args.disableAutoFetch;this.msgHandler=args.msgHandler;this.currRequestId=0;this._chunksNeededByRequest=new Map();this._requestsByChunk=new Map();this._promisesByRequest=new Map();this.progressiveDataLength=0;this.aborted=false;this._loadedStreamCapability=Promise.withResolvers();}return _createClass(ChunkedStreamManager,[{key:"sendRequest",value:function sendRequest(begin,end){var _this7=this;var rangeReader=this.pdfNetworkStream.getRangeReader(begin,end);if(!rangeReader.isStreamingSupported){rangeReader.onProgress=this.onProgress.bind(this);}var chunks=[],loaded=0;return new Promise(function(resolve,reject){var _readChunk=function readChunk(_ref3){var value=_ref3.value,done=_ref3.done;try{if(done){var chunkData=arrayBuffersToBytes(chunks);chunks=null;resolve(chunkData);return;}loaded+=value.byteLength;if(rangeReader.isStreamingSupported){_this7.onProgress({loaded:loaded});}chunks.push(value);rangeReader.read().then(_readChunk,reject);}catch(e){reject(e);}};rangeReader.read().then(_readChunk,reject);}).then(function(data){if(_this7.aborted){return;}_this7.onReceiveData({chunk:data,begin:begin});});}},{key:"requestAllChunks",value:function requestAllChunks(){var noFetch=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(!noFetch){var missingChunks=this.stream.getMissingChunks();this._requestChunks(missingChunks);}return this._loadedStreamCapability.promise;}},{key:"_requestChunks",value:function _requestChunks(chunks){var _this8=this;var requestId=this.currRequestId++;var chunksNeeded=new Set();this._chunksNeededByRequest.set(requestId,chunksNeeded);var _iterator15=_createForOfIteratorHelper(chunks),_step15;try{for(_iterator15.s();!(_step15=_iterator15.n()).done;){var chunk=_step15.value;if(!this.stream.hasChunk(chunk)){chunksNeeded.add(chunk);}}}catch(err){_iterator15.e(err);}finally{_iterator15.f();}if(chunksNeeded.size===0){return Promise.resolve();}var capability=Promise.withResolvers();this._promisesByRequest.set(requestId,capability);var chunksToRequest=[];var _iterator16=_createForOfIteratorHelper(chunksNeeded),_step16;try{for(_iterator16.s();!(_step16=_iterator16.n()).done;){var _chunk=_step16.value;var requestIds=this._requestsByChunk.get(_chunk);if(!requestIds){requestIds=[];this._requestsByChunk.set(_chunk,requestIds);chunksToRequest.push(_chunk);}requestIds.push(requestId);}}catch(err){_iterator16.e(err);}finally{_iterator16.f();}if(chunksToRequest.length>0){var groupedChunksToRequest=this.groupChunks(chunksToRequest);var _iterator17=_createForOfIteratorHelper(groupedChunksToRequest),_step17;try{for(_iterator17.s();!(_step17=_iterator17.n()).done;){var groupedChunk=_step17.value;var begin=groupedChunk.beginChunk*this.chunkSize;var end=Math.min(groupedChunk.endChunk*this.chunkSize,this.length);this.sendRequest(begin,end)["catch"](capability.reject);}}catch(err){_iterator17.e(err);}finally{_iterator17.f();}}return capability.promise["catch"](function(reason){if(_this8.aborted){return;}throw reason;});}},{key:"getStream",value:function getStream(){return this.stream;}},{key:"requestRange",value:function requestRange(begin,end){end=Math.min(end,this.length);var beginChunk=this.getBeginChunk(begin);var endChunk=this.getEndChunk(end);var chunks=[];for(var chunk=beginChunk;chunk<endChunk;++chunk){chunks.push(chunk);}return this._requestChunks(chunks);}},{key:"requestRanges",value:function requestRanges(){var ranges=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var chunksToRequest=[];var _iterator18=_createForOfIteratorHelper(ranges),_step18;try{for(_iterator18.s();!(_step18=_iterator18.n()).done;){var range=_step18.value;var beginChunk=this.getBeginChunk(range.begin);var endChunk=this.getEndChunk(range.end);for(var chunk=beginChunk;chunk<endChunk;++chunk){if(!chunksToRequest.includes(chunk)){chunksToRequest.push(chunk);}}}}catch(err){_iterator18.e(err);}finally{_iterator18.f();}chunksToRequest.sort(function(a,b){return a-b;});return this._requestChunks(chunksToRequest);}},{key:"groupChunks",value:function groupChunks(chunks){var groupedChunks=[];var beginChunk=-1;var prevChunk=-1;for(var i=0,ii=chunks.length;i<ii;++i){var chunk=chunks[i];if(beginChunk<0){beginChunk=chunk;}if(prevChunk>=0&&prevChunk+1!==chunk){groupedChunks.push({beginChunk:beginChunk,endChunk:prevChunk+1});beginChunk=chunk;}if(i+1===chunks.length){groupedChunks.push({beginChunk:beginChunk,endChunk:chunk+1});}prevChunk=chunk;}return groupedChunks;}},{key:"onProgress",value:function onProgress(args){this.msgHandler.send("DocProgress",{loaded:this.stream.numChunksLoaded*this.chunkSize+args.loaded,total:this.length});}},{key:"onReceiveData",value:function onReceiveData(args){var chunk=args.chunk;var isProgressive=args.begin===undefined;var begin=isProgressive?this.progressiveDataLength:args.begin;var end=begin+chunk.byteLength;var beginChunk=Math.floor(begin/this.chunkSize);var endChunk=end<this.length?Math.floor(end/this.chunkSize):Math.ceil(end/this.chunkSize);if(isProgressive){this.stream.onReceiveProgressiveData(chunk);this.progressiveDataLength=end;}else{this.stream.onReceiveData(begin,chunk);}if(this.stream.isDataLoaded){this._loadedStreamCapability.resolve(this.stream);}var loadedRequests=[];for(var curChunk=beginChunk;curChunk<endChunk;++curChunk){var requestIds=this._requestsByChunk.get(curChunk);if(!requestIds){continue;}this._requestsByChunk["delete"](curChunk);var _iterator19=_createForOfIteratorHelper(requestIds),_step19;try{for(_iterator19.s();!(_step19=_iterator19.n()).done;){var requestId=_step19.value;var chunksNeeded=this._chunksNeededByRequest.get(requestId);if(chunksNeeded.has(curChunk)){chunksNeeded["delete"](curChunk);}if(chunksNeeded.size>0){continue;}loadedRequests.push(requestId);}}catch(err){_iterator19.e(err);}finally{_iterator19.f();}}if(!this.disableAutoFetch&&this._requestsByChunk.size===0){var nextEmptyChunk;if(this.stream.numChunksLoaded===1){var lastChunk=this.stream.numChunks-1;if(!this.stream.hasChunk(lastChunk)){nextEmptyChunk=lastChunk;}}else{nextEmptyChunk=this.stream.nextEmptyChunk(endChunk);}if(Number.isInteger(nextEmptyChunk)){this._requestChunks([nextEmptyChunk]);}}for(var _i2=0,_loadedRequests=loadedRequests;_i2<_loadedRequests.length;_i2++){var _requestId=_loadedRequests[_i2];var capability=this._promisesByRequest.get(_requestId);this._promisesByRequest["delete"](_requestId);capability.resolve();}this.msgHandler.send("DocProgress",{loaded:this.stream.numChunksLoaded*this.chunkSize,total:this.length});}},{key:"onError",value:function onError(err){this._loadedStreamCapability.reject(err);}},{key:"getBeginChunk",value:function getBeginChunk(begin){return Math.floor(begin/this.chunkSize);}},{key:"getEndChunk",value:function getEndChunk(end){return Math.floor((end-1)/this.chunkSize)+1;}},{key:"abort",value:function abort(reason){var _this$pdfNetworkStrea;this.aborted=true;(_this$pdfNetworkStrea=this.pdfNetworkStream)===null||_this$pdfNetworkStrea===void 0||_this$pdfNetworkStrea.cancelAllRequests(reason);var _iterator20=_createForOfIteratorHelper(this._promisesByRequest.values()),_step20;try{for(_iterator20.s();!(_step20=_iterator20.n()).done;){var capability=_step20.value;capability.reject(reason);}}catch(err){_iterator20.e(err);}finally{_iterator20.f();}}}]);}();;// ./src/shared/image_utils.js\nfunction convertToRGBA(params){switch(params.kind){case ImageKind.GRAYSCALE_1BPP:return convertBlackAndWhiteToRGBA(params);case ImageKind.RGB_24BPP:return convertRGBToRGBA(params);}return null;}function convertBlackAndWhiteToRGBA(_ref4){var src=_ref4.src,_ref4$srcPos=_ref4.srcPos,srcPos=_ref4$srcPos===void 0?0:_ref4$srcPos,dest=_ref4.dest,width=_ref4.width,height=_ref4.height,_ref4$nonBlackColor=_ref4.nonBlackColor,nonBlackColor=_ref4$nonBlackColor===void 0?0xffffffff:_ref4$nonBlackColor,_ref4$inverseDecode=_ref4.inverseDecode,inverseDecode=_ref4$inverseDecode===void 0?false:_ref4$inverseDecode;var black=FeatureTest.isLittleEndian?0xff000000:0x000000ff;var _ref5=inverseDecode?[nonBlackColor,black]:[black,nonBlackColor],_ref6=_slicedToArray(_ref5,2),zeroMapping=_ref6[0],oneMapping=_ref6[1];var widthInSource=width>>3;var widthRemainder=width&7;var srcLength=src.length;dest=new Uint32Array(dest.buffer);var destPos=0;for(var i=0;i<height;i++){for(var max=srcPos+widthInSource;srcPos<max;srcPos++){var _elem=srcPos<srcLength?src[srcPos]:255;dest[destPos++]=_elem&128?oneMapping:zeroMapping;dest[destPos++]=_elem&64?oneMapping:zeroMapping;dest[destPos++]=_elem&32?oneMapping:zeroMapping;dest[destPos++]=_elem&16?oneMapping:zeroMapping;dest[destPos++]=_elem&8?oneMapping:zeroMapping;dest[destPos++]=_elem&4?oneMapping:zeroMapping;dest[destPos++]=_elem&2?oneMapping:zeroMapping;dest[destPos++]=_elem&1?oneMapping:zeroMapping;}if(widthRemainder===0){continue;}var elem=srcPos<srcLength?src[srcPos++]:255;for(var j=0;j<widthRemainder;j++){dest[destPos++]=elem&1<<7-j?oneMapping:zeroMapping;}}return{srcPos:srcPos,destPos:destPos};}function convertRGBToRGBA(_ref7){var src=_ref7.src,_ref7$srcPos=_ref7.srcPos,srcPos=_ref7$srcPos===void 0?0:_ref7$srcPos,dest=_ref7.dest,_ref7$destPos=_ref7.destPos,destPos=_ref7$destPos===void 0?0:_ref7$destPos,width=_ref7.width,height=_ref7.height;var i=0;var len=width*height*3;var len32=len>>2;var src32=new Uint32Array(src.buffer,srcPos,len32);if(FeatureTest.isLittleEndian){for(;i<len32-2;i+=3,destPos+=4){var s1=src32[i];var s2=src32[i+1];var s3=src32[i+2];dest[destPos]=s1|0xff000000;dest[destPos+1]=s1>>>24|s2<<8|0xff000000;dest[destPos+2]=s2>>>16|s3<<16|0xff000000;dest[destPos+3]=s3>>>8|0xff000000;}for(var j=i*4,jj=srcPos+len;j<jj;j+=3){dest[destPos++]=src[j]|src[j+1]<<8|src[j+2]<<16|0xff000000;}}else{for(;i<len32-2;i+=3,destPos+=4){var _s=src32[i];var _s2=src32[i+1];var _s3=src32[i+2];dest[destPos]=_s|0xff;dest[destPos+1]=_s<<24|_s2>>>8|0xff;dest[destPos+2]=_s2<<16|_s3>>>16|0xff;dest[destPos+3]=_s3<<8|0xff;}for(var _j=i*4,_jj=srcPos+len;_j<_jj;_j+=3){dest[destPos++]=src[_j]<<24|src[_j+1]<<16|src[_j+2]<<8|0xff;}}return{srcPos:srcPos+len,destPos:destPos};}function grayToRGBA(src,dest){if(FeatureTest.isLittleEndian){for(var i=0,ii=src.length;i<ii;i++){dest[i]=src[i]*0x10101|0xff000000;}}else{for(var _i3=0,_ii=src.length;_i3<_ii;_i3++){dest[_i3]=src[_i3]*0x1010100|0x000000ff;}}};// ./src/core/image_resizer.js\nvar MIN_IMAGE_DIM=2048;var MAX_IMAGE_DIM=65537;var MAX_ERROR=128;var _ImageResizer_brand=/*#__PURE__*/new WeakSet();var ImageResizer=/*#__PURE__*/function(){function ImageResizer(_imgData,isMask){_classCallCheck(this,ImageResizer);_classPrivateMethodInitSpec(this,_ImageResizer_brand);this._imgData=_imgData;this._isMask=isMask;}return _createClass(ImageResizer,[{key:"_createImage",value:function(){var _createImage2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(){var _this9=this;var imgData,width,height,_result,data,decoder,imagePromise,MAX_AREA,MAX_DIM,minFactor,firstFactor,factor,N,steps,newWidth,newHeight,result,bitmap,_iterator21,_step21,step,prevWidth,prevHeight,canvas,ctx;return _regeneratorRuntime().wrap(function _callee5$(_context9){while(1)switch(_context9.prev=_context9.next){case 0:imgData=this._imgData;width=imgData.width,height=imgData.height;if(!(width*height*4>MAX_INT_32)){_context9.next=6;break;}_result=_assertClassBrand(_ImageResizer_brand,this,_rescaleImageData).call(this);if(!_result){_context9.next=6;break;}return _context9.abrupt("return",_result);case 6:data=this._encodeBMP();_context9.next=9;return ImageResizer.canUseImageDecoder;case 9:if(!_context9.sent){_context9.next=14;break;}decoder=new ImageDecoder({data:data,type:"image/bmp",preferAnimation:false,transfer:[data.buffer]});imagePromise=decoder.decode()["catch"](function(reason){warn("BMP image decoding failed: ".concat(reason));return createImageBitmap(new Blob([_this9._encodeBMP().buffer],{type:"image/bmp"}));})["finally"](function(){decoder.close();});_context9.next=15;break;case 14:imagePromise=createImageBitmap(new Blob([data.buffer],{type:"image/bmp"}));case 15:MAX_AREA=ImageResizer.MAX_AREA,MAX_DIM=ImageResizer.MAX_DIM;minFactor=Math.max(width/MAX_DIM,height/MAX_DIM,Math.sqrt(width*height/MAX_AREA));firstFactor=Math.max(minFactor,2);factor=Math.round(10*(minFactor+1.25))/10/firstFactor;N=Math.floor(Math.log2(factor));steps=new Array(N+2).fill(2);steps[0]=firstFactor;steps.splice(-1,1,factor/(1<<N));newWidth=width;newHeight=height;_context9.next=27;return imagePromise;case 27:result=_context9.sent;bitmap=result.image||result;_iterator21=_createForOfIteratorHelper(steps);try{for(_iterator21.s();!(_step21=_iterator21.n()).done;){step=_step21.value;prevWidth=newWidth;prevHeight=newHeight;newWidth=Math.floor(newWidth/step)-1;newHeight=Math.floor(newHeight/step)-1;canvas=new OffscreenCanvas(newWidth,newHeight);ctx=canvas.getContext("2d");ctx.drawImage(bitmap,0,0,prevWidth,prevHeight,0,0,newWidth,newHeight);bitmap.close();bitmap=canvas.transferToImageBitmap();}}catch(err){_iterator21.e(err);}finally{_iterator21.f();}imgData.data=null;imgData.bitmap=bitmap;imgData.width=newWidth;imgData.height=newHeight;return _context9.abrupt("return",imgData);case 36:case"end":return _context9.stop();}},_callee5,this);}));function _createImage(){return _createImage2.apply(this,arguments);}return _createImage;}()},{key:"_encodeBMP",value:function _encodeBMP(){var _this$_imgData=this._imgData,width=_this$_imgData.width,height=_this$_imgData.height,kind=_this$_imgData.kind;var data=this._imgData.data;var bitPerPixel;var colorTable=new Uint8Array(0);var maskTable=colorTable;var compression=0;switch(kind){case ImageKind.GRAYSCALE_1BPP:{bitPerPixel=1;colorTable=new Uint8Array(this._isMask?[255,255,255,255,0,0,0,0]:[0,0,0,0,255,255,255,255]);var rowLen=width+7>>3;var rowSize=rowLen+3&-4;if(rowLen!==rowSize){var newData=new Uint8Array(rowSize*height);var k=0;for(var _i4=0,ii=height*rowLen;_i4<ii;_i4+=rowLen,k+=rowSize){newData.set(data.subarray(_i4,_i4+rowLen),k);}data=newData;}break;}case ImageKind.RGB_24BPP:{bitPerPixel=24;if(width&3){var _rowLen=3*width;var _rowSize=_rowLen+3&-4;var extraLen=_rowSize-_rowLen;var _newData=new Uint8Array(_rowSize*height);var _k=0;for(var _i5=0,_ii2=height*_rowLen;_i5<_ii2;_i5+=_rowLen){var row=data.subarray(_i5,_i5+_rowLen);for(var j=0;j<_rowLen;j+=3){_newData[_k++]=row[j+2];_newData[_k++]=row[j+1];_newData[_k++]=row[j];}_k+=extraLen;}data=_newData;}else{for(var _i6=0,_ii3=data.length;_i6<_ii3;_i6+=3){var tmp=data[_i6];data[_i6]=data[_i6+2];data[_i6+2]=tmp;}}break;}case ImageKind.RGBA_32BPP:bitPerPixel=32;compression=3;maskTable=new Uint8Array(4+4+4+4+52);var _view=new DataView(maskTable.buffer);if(FeatureTest.isLittleEndian){_view.setUint32(0,0x000000ff,true);_view.setUint32(4,0x0000ff00,true);_view.setUint32(8,0x00ff0000,true);_view.setUint32(12,0xff000000,true);}else{_view.setUint32(0,0xff000000,true);_view.setUint32(4,0x00ff0000,true);_view.setUint32(8,0x0000ff00,true);_view.setUint32(12,0x000000ff,true);}break;default:throw new Error("invalid format");}var i=0;var headerLength=40+maskTable.length;var fileLength=14+headerLength+colorTable.length+data.length;var bmpData=new Uint8Array(fileLength);var view=new DataView(bmpData.buffer);view.setUint16(i,0x4d42,true);i+=2;view.setUint32(i,fileLength,true);i+=4;view.setUint32(i,0,true);i+=4;view.setUint32(i,14+headerLength+colorTable.length,true);i+=4;view.setUint32(i,headerLength,true);i+=4;view.setInt32(i,width,true);i+=4;view.setInt32(i,-height,true);i+=4;view.setUint16(i,1,true);i+=2;view.setUint16(i,bitPerPixel,true);i+=2;view.setUint32(i,compression,true);i+=4;view.setUint32(i,0,true);i+=4;view.setInt32(i,0,true);i+=4;view.setInt32(i,0,true);i+=4;view.setUint32(i,colorTable.length/4,true);i+=4;view.setUint32(i,0,true);i+=4;bmpData.set(maskTable,i);i+=maskTable.length;bmpData.set(colorTable,i);i+=colorTable.length;bmpData.set(data,i);return bmpData;}}],[{key:"canUseImageDecoder",get:function get(){return shadow(this,"canUseImageDecoder",_assertClassBrand(ImageResizer,this,_isImageDecoderSupported)._?ImageDecoder.isTypeSupported("image/bmp"):Promise.resolve(false));}},{key:"needsToBeResized",value:function needsToBeResized(width,height){if(width<=_assertClassBrand(ImageResizer,this,_goodSquareLength)._&&height<=_assertClassBrand(ImageResizer,this,_goodSquareLength)._){return false;}var MAX_DIM=this.MAX_DIM;if(width>MAX_DIM||height>MAX_DIM){return true;}var area=width*height;if(this._hasMaxArea){return area>this.MAX_AREA;}if(area<Math.pow(_assertClassBrand(ImageResizer,this,_goodSquareLength)._,2)){return false;}if(this._areGoodDims(width,height)){_goodSquareLength._=_assertClassBrand(ImageResizer,this,Math.max(_assertClassBrand(ImageResizer,this,_goodSquareLength)._,Math.floor(Math.sqrt(width*height))));return false;}_goodSquareLength._=_assertClassBrand(ImageResizer,this,this._guessMax(_assertClassBrand(ImageResizer,this,_goodSquareLength)._,MAX_DIM,MAX_ERROR,0));var maxArea=this.MAX_AREA=Math.pow(_assertClassBrand(ImageResizer,this,_goodSquareLength)._,2);return area>maxArea;}},{key:"MAX_DIM",get:function get(){return shadow(this,"MAX_DIM",this._guessMax(MIN_IMAGE_DIM,MAX_IMAGE_DIM,0,1));}},{key:"MAX_AREA",get:function get(){this._hasMaxArea=true;return shadow(this,"MAX_AREA",Math.pow(this._guessMax(_assertClassBrand(ImageResizer,this,_goodSquareLength)._,this.MAX_DIM,MAX_ERROR,0),2));},set:function set(area){if(area>=0){this._hasMaxArea=true;shadow(this,"MAX_AREA",area);}}},{key:"setOptions",value:function setOptions(_ref8){var _ref8$canvasMaxAreaIn=_ref8.canvasMaxAreaInBytes,canvasMaxAreaInBytes=_ref8$canvasMaxAreaIn===void 0?-1:_ref8$canvasMaxAreaIn,_ref8$isImageDecoderS=_ref8.isImageDecoderSupported,isImageDecoderSupported=_ref8$isImageDecoderS===void 0?false:_ref8$isImageDecoderS;if(!this._hasMaxArea){this.MAX_AREA=canvasMaxAreaInBytes>>2;}_isImageDecoderSupported._=_assertClassBrand(ImageResizer,this,isImageDecoderSupported);}},{key:"_areGoodDims",value:function _areGoodDims(width,height){try{var canvas=new OffscreenCanvas(width,height);var ctx=canvas.getContext("2d");ctx.fillRect(0,0,1,1);var opacity=ctx.getImageData(0,0,1,1).data[3];canvas.width=canvas.height=1;return opacity!==0;}catch(_unused3){return false;}}},{key:"_guessMax",value:function _guessMax(start,end,tolerance,defaultHeight){while(start+tolerance+1<end){var middle=Math.floor((start+end)/2);var height=defaultHeight||middle;if(this._areGoodDims(middle,height)){start=middle;}else{end=middle;}}return start;}},{key:"createImage",value:function(){var _createImage3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(imgData){var isMask,_args10=arguments;return _regeneratorRuntime().wrap(function _callee6$(_context10){while(1)switch(_context10.prev=_context10.next){case 0:isMask=_args10.length>1&&_args10[1]!==undefined?_args10[1]:false;return _context10.abrupt("return",new ImageResizer(imgData,isMask)._createImage());case 2:case"end":return _context10.stop();}},_callee6);}));function createImage(_x7){return _createImage3.apply(this,arguments);}return createImage;}()}]);}();_ImageResizer=ImageResizer;function _rescaleImageData(){var imgData=this._imgData;var data=imgData.data,width=imgData.width,height=imgData.height,kind=imgData.kind;var rgbaSize=width*height*4;var K=Math.ceil(Math.log2(rgbaSize/MAX_INT_32));var newWidth=width>>K;var newHeight=height>>K;var rgbaData;var maxHeight=height;try{rgbaData=new Uint8Array(rgbaSize);}catch(_unused17){var n=Math.floor(Math.log2(rgbaSize+1));while(true){try{rgbaData=new Uint8Array(Math.pow(2,n)-1);break;}catch(_unused18){n-=1;}}maxHeight=Math.floor((Math.pow(2,n)-1)/(width*4));var newSize=width*maxHeight*4;if(newSize<rgbaData.length){rgbaData=new Uint8Array(newSize);}}var src32=new Uint32Array(rgbaData.buffer);var dest32=new Uint32Array(newWidth*newHeight);var srcPos=0;var newIndex=0;var step=Math.ceil(height/maxHeight);var remainder=height%maxHeight===0?height:height%maxHeight;for(var k=0;k<step;k++){var h=k<step-1?maxHeight:remainder;var _convertToRGBA=convertToRGBA({kind:kind,src:data,dest:src32,width:width,height:h,inverseDecode:this._isMask,srcPos:srcPos});srcPos=_convertToRGBA.srcPos;for(var i=0,ii=h>>K;i<ii;i++){var buf=src32.subarray((i<<K)*width);for(var j=0;j<newWidth;j++){dest32[newIndex++]=buf[j<<K];}}}if(_ImageResizer.needsToBeResized(newWidth,newHeight)){imgData.data=dest32;imgData.width=newWidth;imgData.height=newHeight;imgData.kind=ImageKind.RGBA_32BPP;return null;}var canvas=new OffscreenCanvas(newWidth,newHeight);var ctx=canvas.getContext("2d",{willReadFrequently:true});ctx.putImageData(new ImageData(new Uint8ClampedArray(dest32.buffer),newWidth,newHeight),0,0);imgData.data=null;imgData.bitmap=canvas.transferToImageBitmap();imgData.width=newWidth;imgData.height=newHeight;return imgData;}var _goodSquareLength={_:MIN_IMAGE_DIM};var _isImageDecoderSupported={_:FeatureTest.isImageDecoderSupported};;// ./src/core/decode_stream.js\nvar emptyBuffer=new Uint8Array(0);var DecodeStream=/*#__PURE__*/function(_BaseStream2){function DecodeStream(maybeMinBufferLength){var _this10;_classCallCheck(this,DecodeStream);_this10=_callSuper(this,DecodeStream);_this10._rawMinBufferLength=maybeMinBufferLength||0;_this10.pos=0;_this10.bufferLength=0;_this10.eof=false;_this10.buffer=emptyBuffer;_this10.minBufferLength=512;if(maybeMinBufferLength){while(_this10.minBufferLength<maybeMinBufferLength){_this10.minBufferLength*=2;}}return _this10;}_inherits(DecodeStream,_BaseStream2);return _createClass(DecodeStream,[{key:"isEmpty",get:function get(){while(!this.eof&&this.bufferLength===0){this.readBlock();}return this.bufferLength===0;}},{key:"ensureBuffer",value:function ensureBuffer(requested){var buffer=this.buffer;if(requested<=buffer.byteLength){return buffer;}var size=this.minBufferLength;while(size<requested){size*=2;}var buffer2=new Uint8Array(size);buffer2.set(buffer);return this.buffer=buffer2;}},{key:"getByte",value:function getByte(){var pos=this.pos;while(this.bufferLength<=pos){if(this.eof){return-1;}this.readBlock();}return this.buffer[this.pos++];}},{key:"getBytes",value:function getBytes(length){var decoderOptions=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var pos=this.pos;var end;if(length){this.ensureBuffer(pos+length);end=pos+length;while(!this.eof&&this.bufferLength<end){this.readBlock(decoderOptions);}var bufEnd=this.bufferLength;if(end>bufEnd){end=bufEnd;}}else{while(!this.eof){this.readBlock(decoderOptions);}end=this.bufferLength;}this.pos=end;return this.buffer.subarray(pos,end);}},{key:"getImageData",value:function(){var _getImageData2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(length,decoderOptions){var data;return _regeneratorRuntime().wrap(function _callee7$(_context11){while(1)switch(_context11.prev=_context11.next){case 0:if(this.canAsyncDecodeImageFromBuffer){_context11.next=4;break;}if(!this.isAsyncDecoder){_context11.next=3;break;}return _context11.abrupt("return",this.decodeImage(null,decoderOptions));case 3:return _context11.abrupt("return",this.getBytes(length,decoderOptions));case 4:_context11.next=6;return this.stream.asyncGetBytes();case 6:data=_context11.sent;return _context11.abrupt("return",this.decodeImage(data,decoderOptions));case 8:case"end":return _context11.stop();}},_callee7,this);}));function getImageData(_x8,_x9){return _getImageData2.apply(this,arguments);}return getImageData;}()},{key:"reset",value:function reset(){this.pos=0;}},{key:"makeSubStream",value:function makeSubStream(start,length){var dict=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(length===undefined){while(!this.eof){this.readBlock();}}else{var end=start+length;while(this.bufferLength<=end&&!this.eof){this.readBlock();}}return new Stream(this.buffer,start,length,dict);}},{key:"getBaseStreams",value:function getBaseStreams(){return this.str?this.str.getBaseStreams():null;}}]);}(BaseStream);var StreamsSequenceStream=/*#__PURE__*/function(_DecodeStream){function StreamsSequenceStream(streams){var _this11;var onError=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;_classCallCheck(this,StreamsSequenceStream);streams=streams.filter(function(s){return s instanceof BaseStream;});var maybeLength=0;var _iterator22=_createForOfIteratorHelper(streams),_step22;try{for(_iterator22.s();!(_step22=_iterator22.n()).done;){var stream=_step22.value;maybeLength+=stream instanceof DecodeStream?stream._rawMinBufferLength:stream.length;}}catch(err){_iterator22.e(err);}finally{_iterator22.f();}_this11=_callSuper(this,StreamsSequenceStream,[maybeLength]);_this11.streams=streams;_this11._onError=onError;return _this11;}_inherits(StreamsSequenceStream,_DecodeStream);return _createClass(StreamsSequenceStream,[{key:"readBlock",value:function readBlock(){var streams=this.streams;if(streams.length===0){this.eof=true;return;}var stream=streams.shift();var chunk;try{chunk=stream.getBytes();}catch(reason){if(this._onError){var _stream$dict;this._onError(reason,(_stream$dict=stream.dict)===null||_stream$dict===void 0?void 0:_stream$dict.objId);return;}throw reason;}var bufferLength=this.bufferLength;var newLength=bufferLength+chunk.length;var buffer=this.ensureBuffer(newLength);buffer.set(chunk,bufferLength);this.bufferLength=newLength;}},{key:"getBaseStreams",value:function getBaseStreams(){var baseStreamsBuf=[];var _iterator23=_createForOfIteratorHelper(this.streams),_step23;try{for(_iterator23.s();!(_step23=_iterator23.n()).done;){var stream=_step23.value;var baseStreams=stream.getBaseStreams();if(baseStreams){baseStreamsBuf.push.apply(baseStreamsBuf,_toConsumableArray(baseStreams));}}}catch(err){_iterator23.e(err);}finally{_iterator23.f();}return baseStreamsBuf.length>0?baseStreamsBuf:null;}}]);}(DecodeStream);;// ./src/core/jpg.js\nvar JpegError=/*#__PURE__*/function(_BaseException11){function JpegError(msg){_classCallCheck(this,JpegError);return _callSuper(this,JpegError,[msg,"JpegError"]);}_inherits(JpegError,_BaseException11);return _createClass(JpegError);}(BaseException);var DNLMarkerError=/*#__PURE__*/function(_BaseException12){function DNLMarkerError(message,scanLines){var _this12;_classCallCheck(this,DNLMarkerError);_this12=_callSuper(this,DNLMarkerError,[message,"DNLMarkerError"]);_this12.scanLines=scanLines;return _this12;}_inherits(DNLMarkerError,_BaseException12);return _createClass(DNLMarkerError);}(BaseException);var EOIMarkerError=/*#__PURE__*/function(_BaseException13){function EOIMarkerError(msg){_classCallCheck(this,EOIMarkerError);return _callSuper(this,EOIMarkerError,[msg,"EOIMarkerError"]);}_inherits(EOIMarkerError,_BaseException13);return _createClass(EOIMarkerError);}(BaseException);var dctZigZag=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);var dctCos1=4017;var dctSin1=799;var dctCos3=3406;var dctSin3=2276;var dctCos6=1567;var dctSin6=3784;var dctSqrt2=5793;var dctSqrt1d2=2896;function buildHuffmanTable(codeLengths,values){var k=0,i,j,length=16;while(length>0&&!codeLengths[length-1]){length--;}var code=[{children:[],index:0}];var p=code[0],q;for(i=0;i<length;i++){for(j=0;j<codeLengths[i];j++){p=code.pop();p.children[p.index]=values[k];while(p.index>0){p=code.pop();}p.index++;code.push(p);while(code.length<=i){code.push(q={children:[],index:0});p.children[p.index]=q.children;p=q;}k++;}if(i+1<length){code.push(q={children:[],index:0});p.children[p.index]=q.children;p=q;}}return code[0].children;}function getBlockBufferOffset(component,row,col){return 64*((component.blocksPerLine+1)*row+col);}function decodeScan(data,offset,frame,components,resetInterval,spectralStart,spectralEnd,successivePrev,successive){var parseDNLMarker=arguments.length>9&&arguments[9]!==undefined?arguments[9]:false;var mcusPerLine=frame.mcusPerLine;var progressive=frame.progressive;var startOffset=offset;var bitsData=0,bitsCount=0;function readBit(){if(bitsCount>0){bitsCount--;return bitsData>>bitsCount&1;}bitsData=data[offset++];if(bitsData===0xff){var nextByte=data[offset++];if(nextByte){if(nextByte===0xdc&&parseDNLMarker){offset+=2;var scanLines=readUint16(data,offset);offset+=2;if(scanLines>0&&scanLines!==frame.scanLines){throw new DNLMarkerError("Found DNL marker (0xFFDC) while parsing scan data",scanLines);}}else if(nextByte===0xd9){if(parseDNLMarker){var maybeScanLines=blockRow*(frame.precision===8?8:0);if(maybeScanLines>0&&Math.round(frame.scanLines/maybeScanLines)>=5){throw new DNLMarkerError("Found EOI marker (0xFFD9) while parsing scan data, "+"possibly caused by incorrect `scanLines` parameter",maybeScanLines);}}throw new EOIMarkerError("Found EOI marker (0xFFD9) while parsing scan data");}throw new JpegError("unexpected marker ".concat((bitsData<<8|nextByte).toString(16)));}}bitsCount=7;return bitsData>>>7;}function decodeHuffman(tree){var node=tree;while(true){node=node[readBit()];switch(_typeof(node)){case"number":return node;case"object":continue;}throw new JpegError("invalid huffman sequence");}}function receive(length){var n=0;while(length>0){n=n<<1|readBit();length--;}return n;}function receiveAndExtend(length){if(length===1){return readBit()===1?1:-1;}var n=receive(length);if(n>=1<<length-1){return n;}return n+(-1<<length)+1;}function decodeBaseline(component,blockOffset){var t=decodeHuffman(component.huffmanTableDC);var diff=t===0?0:receiveAndExtend(t);component.blockData[blockOffset]=component.pred+=diff;var k=1;while(k<64){var rs=decodeHuffman(component.huffmanTableAC);var s=rs&15,r=rs>>4;if(s===0){if(r<15){break;}k+=16;continue;}k+=r;var z=dctZigZag[k];component.blockData[blockOffset+z]=receiveAndExtend(s);k++;}}function decodeDCFirst(component,blockOffset){var t=decodeHuffman(component.huffmanTableDC);var diff=t===0?0:receiveAndExtend(t)<<successive;component.blockData[blockOffset]=component.pred+=diff;}function decodeDCSuccessive(component,blockOffset){component.blockData[blockOffset]|=readBit()<<successive;}var eobrun=0;function decodeACFirst(component,blockOffset){if(eobrun>0){eobrun--;return;}var k=spectralStart;var e=spectralEnd;while(k<=e){var rs=decodeHuffman(component.huffmanTableAC);var s=rs&15,r=rs>>4;if(s===0){if(r<15){eobrun=receive(r)+(1<<r)-1;break;}k+=16;continue;}k+=r;var z=dctZigZag[k];component.blockData[blockOffset+z]=receiveAndExtend(s)*(1<<successive);k++;}}var successiveACState=0,successiveACNextValue;function decodeACSuccessive(component,blockOffset){var k=spectralStart;var e=spectralEnd;var r=0;var s;var rs;while(k<=e){var offsetZ=blockOffset+dctZigZag[k];var sign=component.blockData[offsetZ]<0?-1:1;switch(successiveACState){case 0:rs=decodeHuffman(component.huffmanTableAC);s=rs&15;r=rs>>4;if(s===0){if(r<15){eobrun=receive(r)+(1<<r);successiveACState=4;}else{r=16;successiveACState=1;}}else{if(s!==1){throw new JpegError("invalid ACn encoding");}successiveACNextValue=receiveAndExtend(s);successiveACState=r?2:3;}continue;case 1:case 2:if(component.blockData[offsetZ]){component.blockData[offsetZ]+=sign*(readBit()<<successive);}else{r--;if(r===0){successiveACState=successiveACState===2?3:0;}}break;case 3:if(component.blockData[offsetZ]){component.blockData[offsetZ]+=sign*(readBit()<<successive);}else{component.blockData[offsetZ]=successiveACNextValue<<successive;successiveACState=0;}break;case 4:if(component.blockData[offsetZ]){component.blockData[offsetZ]+=sign*(readBit()<<successive);}break;}k++;}if(successiveACState===4){eobrun--;if(eobrun===0){successiveACState=0;}}}var blockRow=0;function decodeMcu(component,decode,mcu,row,col){var mcuRow=mcu/mcusPerLine|0;var mcuCol=mcu%mcusPerLine;blockRow=mcuRow*component.v+row;var blockCol=mcuCol*component.h+col;var blockOffset=getBlockBufferOffset(component,blockRow,blockCol);decode(component,blockOffset);}function decodeBlock(component,decode,mcu){blockRow=mcu/component.blocksPerLine|0;var blockCol=mcu%component.blocksPerLine;var blockOffset=getBlockBufferOffset(component,blockRow,blockCol);decode(component,blockOffset);}var componentsLength=components.length;var component,i,j,k,n;var decodeFn;if(progressive){if(spectralStart===0){decodeFn=successivePrev===0?decodeDCFirst:decodeDCSuccessive;}else{decodeFn=successivePrev===0?decodeACFirst:decodeACSuccessive;}}else{decodeFn=decodeBaseline;}var mcu=0,fileMarker;var mcuExpected=componentsLength===1?components[0].blocksPerLine*components[0].blocksPerColumn:mcusPerLine*frame.mcusPerColumn;var h,v;while(mcu<=mcuExpected){var mcuToRead=resetInterval?Math.min(mcuExpected-mcu,resetInterval):mcuExpected;if(mcuToRead>0){for(i=0;i<componentsLength;i++){components[i].pred=0;}eobrun=0;if(componentsLength===1){component=components[0];for(n=0;n<mcuToRead;n++){decodeBlock(component,decodeFn,mcu);mcu++;}}else{for(n=0;n<mcuToRead;n++){for(i=0;i<componentsLength;i++){component=components[i];h=component.h;v=component.v;for(j=0;j<v;j++){for(k=0;k<h;k++){decodeMcu(component,decodeFn,mcu,j,k);}}}mcu++;}}}bitsCount=0;fileMarker=findNextFileMarker(data,offset);if(!fileMarker){break;}if(fileMarker.invalid){var partialMsg=mcuToRead>0?"unexpected":"excessive";warn("decodeScan - ".concat(partialMsg," MCU data, current marker is: ").concat(fileMarker.invalid));offset=fileMarker.offset;}if(fileMarker.marker>=0xffd0&&fileMarker.marker<=0xffd7){offset+=2;}else{break;}}return offset-startOffset;}function quantizeAndInverse(component,blockBufferOffset,p){var qt=component.quantizationTable,blockData=component.blockData;var v0,v1,v2,v3,v4,v5,v6,v7;var p0,p1,p2,p3,p4,p5,p6,p7;var t;if(!qt){throw new JpegError("missing required Quantization Table.");}for(var row=0;row<64;row+=8){p0=blockData[blockBufferOffset+row];p1=blockData[blockBufferOffset+row+1];p2=blockData[blockBufferOffset+row+2];p3=blockData[blockBufferOffset+row+3];p4=blockData[blockBufferOffset+row+4];p5=blockData[blockBufferOffset+row+5];p6=blockData[blockBufferOffset+row+6];p7=blockData[blockBufferOffset+row+7];p0*=qt[row];if((p1|p2|p3|p4|p5|p6|p7)===0){t=dctSqrt2*p0+512>>10;p[row]=t;p[row+1]=t;p[row+2]=t;p[row+3]=t;p[row+4]=t;p[row+5]=t;p[row+6]=t;p[row+7]=t;continue;}p1*=qt[row+1];p2*=qt[row+2];p3*=qt[row+3];p4*=qt[row+4];p5*=qt[row+5];p6*=qt[row+6];p7*=qt[row+7];v0=dctSqrt2*p0+128>>8;v1=dctSqrt2*p4+128>>8;v2=p2;v3=p6;v4=dctSqrt1d2*(p1-p7)+128>>8;v7=dctSqrt1d2*(p1+p7)+128>>8;v5=p3<<4;v6=p5<<4;v0=v0+v1+1>>1;v1=v0-v1;t=v2*dctSin6+v3*dctCos6+128>>8;v2=v2*dctCos6-v3*dctSin6+128>>8;v3=t;v4=v4+v6+1>>1;v6=v4-v6;v7=v7+v5+1>>1;v5=v7-v5;v0=v0+v3+1>>1;v3=v0-v3;v1=v1+v2+1>>1;v2=v1-v2;t=v4*dctSin3+v7*dctCos3+2048>>12;v4=v4*dctCos3-v7*dctSin3+2048>>12;v7=t;t=v5*dctSin1+v6*dctCos1+2048>>12;v5=v5*dctCos1-v6*dctSin1+2048>>12;v6=t;p[row]=v0+v7;p[row+7]=v0-v7;p[row+1]=v1+v6;p[row+6]=v1-v6;p[row+2]=v2+v5;p[row+5]=v2-v5;p[row+3]=v3+v4;p[row+4]=v3-v4;}for(var col=0;col<8;++col){p0=p[col];p1=p[col+8];p2=p[col+16];p3=p[col+24];p4=p[col+32];p5=p[col+40];p6=p[col+48];p7=p[col+56];if((p1|p2|p3|p4|p5|p6|p7)===0){t=dctSqrt2*p0+8192>>14;if(t<-2040){t=0;}else if(t>=2024){t=255;}else{t=t+2056>>4;}blockData[blockBufferOffset+col]=t;blockData[blockBufferOffset+col+8]=t;blockData[blockBufferOffset+col+16]=t;blockData[blockBufferOffset+col+24]=t;blockData[blockBufferOffset+col+32]=t;blockData[blockBufferOffset+col+40]=t;blockData[blockBufferOffset+col+48]=t;blockData[blockBufferOffset+col+56]=t;continue;}v0=dctSqrt2*p0+2048>>12;v1=dctSqrt2*p4+2048>>12;v2=p2;v3=p6;v4=dctSqrt1d2*(p1-p7)+2048>>12;v7=dctSqrt1d2*(p1+p7)+2048>>12;v5=p3;v6=p5;v0=(v0+v1+1>>1)+4112;v1=v0-v1;t=v2*dctSin6+v3*dctCos6+2048>>12;v2=v2*dctCos6-v3*dctSin6+2048>>12;v3=t;v4=v4+v6+1>>1;v6=v4-v6;v7=v7+v5+1>>1;v5=v7-v5;v0=v0+v3+1>>1;v3=v0-v3;v1=v1+v2+1>>1;v2=v1-v2;t=v4*dctSin3+v7*dctCos3+2048>>12;v4=v4*dctCos3-v7*dctSin3+2048>>12;v7=t;t=v5*dctSin1+v6*dctCos1+2048>>12;v5=v5*dctCos1-v6*dctSin1+2048>>12;v6=t;p0=v0+v7;p7=v0-v7;p1=v1+v6;p6=v1-v6;p2=v2+v5;p5=v2-v5;p3=v3+v4;p4=v3-v4;if(p0<16){p0=0;}else if(p0>=4080){p0=255;}else{p0>>=4;}if(p1<16){p1=0;}else if(p1>=4080){p1=255;}else{p1>>=4;}if(p2<16){p2=0;}else if(p2>=4080){p2=255;}else{p2>>=4;}if(p3<16){p3=0;}else if(p3>=4080){p3=255;}else{p3>>=4;}if(p4<16){p4=0;}else if(p4>=4080){p4=255;}else{p4>>=4;}if(p5<16){p5=0;}else if(p5>=4080){p5=255;}else{p5>>=4;}if(p6<16){p6=0;}else if(p6>=4080){p6=255;}else{p6>>=4;}if(p7<16){p7=0;}else if(p7>=4080){p7=255;}else{p7>>=4;}blockData[blockBufferOffset+col]=p0;blockData[blockBufferOffset+col+8]=p1;blockData[blockBufferOffset+col+16]=p2;blockData[blockBufferOffset+col+24]=p3;blockData[blockBufferOffset+col+32]=p4;blockData[blockBufferOffset+col+40]=p5;blockData[blockBufferOffset+col+48]=p6;blockData[blockBufferOffset+col+56]=p7;}}function buildComponentData(frame,component){var blocksPerLine=component.blocksPerLine;var blocksPerColumn=component.blocksPerColumn;var computationBuffer=new Int16Array(64);for(var blockRow=0;blockRow<blocksPerColumn;blockRow++){for(var blockCol=0;blockCol<blocksPerLine;blockCol++){var offset=getBlockBufferOffset(component,blockRow,blockCol);quantizeAndInverse(component,offset,computationBuffer);}}return component.blockData;}function findNextFileMarker(data,currentPos){var startPos=arguments.length>2&&arguments[2]!==undefined?arguments[2]:currentPos;var maxPos=data.length-1;var newPos=startPos<currentPos?startPos:currentPos;if(currentPos>=maxPos){return null;}var currentMarker=readUint16(data,currentPos);if(currentMarker>=0xffc0&&currentMarker<=0xfffe){return{invalid:null,marker:currentMarker,offset:currentPos};}var newMarker=readUint16(data,newPos);while(!(newMarker>=0xffc0&&newMarker<=0xfffe)){if(++newPos>=maxPos){return null;}newMarker=readUint16(data,newPos);}return{invalid:currentMarker.toString(16),marker:newMarker,offset:newPos};}function prepareComponents(frame){var mcusPerLine=Math.ceil(frame.samplesPerLine/8/frame.maxH);var mcusPerColumn=Math.ceil(frame.scanLines/8/frame.maxV);var _iterator24=_createForOfIteratorHelper(frame.components),_step24;try{for(_iterator24.s();!(_step24=_iterator24.n()).done;){var component=_step24.value;var blocksPerLine=Math.ceil(Math.ceil(frame.samplesPerLine/8)*component.h/frame.maxH);var blocksPerColumn=Math.ceil(Math.ceil(frame.scanLines/8)*component.v/frame.maxV);var blocksPerLineForMcu=mcusPerLine*component.h;var blocksPerColumnForMcu=mcusPerColumn*component.v;var blocksBufferSize=64*blocksPerColumnForMcu*(blocksPerLineForMcu+1);component.blockData=new Int16Array(blocksBufferSize);component.blocksPerLine=blocksPerLine;component.blocksPerColumn=blocksPerColumn;}}catch(err){_iterator24.e(err);}finally{_iterator24.f();}frame.mcusPerLine=mcusPerLine;frame.mcusPerColumn=mcusPerColumn;}function readDataBlock(data,offset){var length=readUint16(data,offset);offset+=2;var endOffset=offset+length-2;var fileMarker=findNextFileMarker(data,endOffset,offset);if(fileMarker!==null&&fileMarker!==void 0&&fileMarker.invalid){warn("readDataBlock - incorrect length, current marker is: "+fileMarker.invalid);endOffset=fileMarker.offset;}var array=data.subarray(offset,endOffset);return{appData:array,oldOffset:offset,newOffset:offset+array.length};}function skipData(data,offset){var length=readUint16(data,offset);offset+=2;var endOffset=offset+length-2;var fileMarker=findNextFileMarker(data,endOffset,offset);if(fileMarker!==null&&fileMarker!==void 0&&fileMarker.invalid){return fileMarker.offset;}return endOffset;}var JpegImage=/*#__PURE__*/function(){function JpegImage(){var _ref9=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref9$decodeTransform=_ref9.decodeTransform,decodeTransform=_ref9$decodeTransform===void 0?null:_ref9$decodeTransform,_ref9$colorTransform=_ref9.colorTransform,colorTransform=_ref9$colorTransform===void 0?-1:_ref9$colorTransform;_classCallCheck(this,JpegImage);this._decodeTransform=decodeTransform;this._colorTransform=colorTransform;}return _createClass(JpegImage,[{key:"parse",value:function parse(data){var _ref10=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref10$dnlScanLines=_ref10.dnlScanLines,dnlScanLines=_ref10$dnlScanLines===void 0?null:_ref10$dnlScanLines;var offset=0;var jfif=null;var adobe=null;var frame,resetInterval;var numSOSMarkers=0;var quantizationTables=[];var huffmanTablesAC=[],huffmanTablesDC=[];var fileMarker=readUint16(data,offset);offset+=2;if(fileMarker!==0xffd8){throw new JpegError("SOI not found");}fileMarker=readUint16(data,offset);offset+=2;markerLoop:while(fileMarker!==0xffd9){var i=void 0,j=void 0,l=void 0;switch(fileMarker){case 0xffe0:case 0xffe1:case 0xffe2:case 0xffe3:case 0xffe4:case 0xffe5:case 0xffe6:case 0xffe7:case 0xffe8:case 0xffe9:case 0xffea:case 0xffeb:case 0xffec:case 0xffed:case 0xffee:case 0xffef:case 0xfffe:var _readDataBlock=readDataBlock(data,offset),appData=_readDataBlock.appData,newOffset=_readDataBlock.newOffset;offset=newOffset;if(fileMarker===0xffe0){if(appData[0]===0x4a&&appData[1]===0x46&&appData[2]===0x49&&appData[3]===0x46&&appData[4]===0){jfif={version:{major:appData[5],minor:appData[6]},densityUnits:appData[7],xDensity:appData[8]<<8|appData[9],yDensity:appData[10]<<8|appData[11],thumbWidth:appData[12],thumbHeight:appData[13],thumbData:appData.subarray(14,14+3*appData[12]*appData[13])};}}if(fileMarker===0xffee){if(appData[0]===0x41&&appData[1]===0x64&&appData[2]===0x6f&&appData[3]===0x62&&appData[4]===0x65){adobe={version:appData[5]<<8|appData[6],flags0:appData[7]<<8|appData[8],flags1:appData[9]<<8|appData[10],transformCode:appData[11]};}}break;case 0xffdb:var quantizationTablesLength=readUint16(data,offset);offset+=2;var quantizationTablesEnd=quantizationTablesLength+offset-2;var z=void 0;while(offset<quantizationTablesEnd){var quantizationTableSpec=data[offset++];var tableData=new Uint16Array(64);if(quantizationTableSpec>>4===0){for(j=0;j<64;j++){z=dctZigZag[j];tableData[z]=data[offset++];}}else if(quantizationTableSpec>>4===1){for(j=0;j<64;j++){z=dctZigZag[j];tableData[z]=readUint16(data,offset);offset+=2;}}else{throw new JpegError("DQT - invalid table spec");}quantizationTables[quantizationTableSpec&15]=tableData;}break;case 0xffc0:case 0xffc1:case 0xffc2:if(frame){throw new JpegError("Only single frame JPEGs supported");}offset+=2;frame={};frame.extended=fileMarker===0xffc1;frame.progressive=fileMarker===0xffc2;frame.precision=data[offset++];var sofScanLines=readUint16(data,offset);offset+=2;frame.scanLines=dnlScanLines||sofScanLines;frame.samplesPerLine=readUint16(data,offset);offset+=2;frame.components=[];frame.componentIds={};var componentsCount=data[offset++];var maxH=0,maxV=0;for(i=0;i<componentsCount;i++){var componentId=data[offset];var h=data[offset+1]>>4;var v=data[offset+1]&15;if(maxH<h){maxH=h;}if(maxV<v){maxV=v;}var qId=data[offset+2];l=frame.components.push({h:h,v:v,quantizationId:qId,quantizationTable:null});frame.componentIds[componentId]=l-1;offset+=3;}frame.maxH=maxH;frame.maxV=maxV;prepareComponents(frame);break;case 0xffc4:var huffmanLength=readUint16(data,offset);offset+=2;for(i=2;i<huffmanLength;){var huffmanTableSpec=data[offset++];var codeLengths=new Uint8Array(16);var codeLengthSum=0;for(j=0;j<16;j++,offset++){codeLengthSum+=codeLengths[j]=data[offset];}var huffmanValues=new Uint8Array(codeLengthSum);for(j=0;j<codeLengthSum;j++,offset++){huffmanValues[j]=data[offset];}i+=17+codeLengthSum;(huffmanTableSpec>>4===0?huffmanTablesDC:huffmanTablesAC)[huffmanTableSpec&15]=buildHuffmanTable(codeLengths,huffmanValues);}break;case 0xffdd:offset+=2;resetInterval=readUint16(data,offset);offset+=2;break;case 0xffda:var parseDNLMarker=++numSOSMarkers===1&&!dnlScanLines;offset+=2;var selectorsCount=data[offset++],components=[];for(i=0;i<selectorsCount;i++){var index=data[offset++];var componentIndex=frame.componentIds[index];var component=frame.components[componentIndex];component.index=index;var tableSpec=data[offset++];component.huffmanTableDC=huffmanTablesDC[tableSpec>>4];component.huffmanTableAC=huffmanTablesAC[tableSpec&15];components.push(component);}var spectralStart=data[offset++],spectralEnd=data[offset++],successiveApproximation=data[offset++];try{var processed=decodeScan(data,offset,frame,components,resetInterval,spectralStart,spectralEnd,successiveApproximation>>4,successiveApproximation&15,parseDNLMarker);offset+=processed;}catch(ex){if(ex instanceof DNLMarkerError){warn("".concat(ex.message," -- attempting to re-parse the JPEG image."));return this.parse(data,{dnlScanLines:ex.scanLines});}else if(ex instanceof EOIMarkerError){warn("".concat(ex.message," -- ignoring the rest of the image data."));break markerLoop;}throw ex;}break;case 0xffdc:offset+=4;break;case 0xffff:if(data[offset]!==0xff){offset--;}break;default:var nextFileMarker=findNextFileMarker(data,offset-2,offset-3);if(nextFileMarker!==null&&nextFileMarker!==void 0&&nextFileMarker.invalid){warn("JpegImage.parse - unexpected data, current marker is: "+nextFileMarker.invalid);offset=nextFileMarker.offset;break;}if(!nextFileMarker||offset>=data.length-1){warn("JpegImage.parse - reached the end of the image data "+"without finding an EOI marker (0xFFD9).");break markerLoop;}throw new JpegError("JpegImage.parse - unknown marker: "+fileMarker.toString(16));}fileMarker=readUint16(data,offset);offset+=2;}if(!frame){throw new JpegError("JpegImage.parse - no frame data found.");}this.width=frame.samplesPerLine;this.height=frame.scanLines;this.jfif=jfif;this.adobe=adobe;this.components=[];var _iterator25=_createForOfIteratorHelper(frame.components),_step25;try{for(_iterator25.s();!(_step25=_iterator25.n()).done;){var _component=_step25.value;var quantizationTable=quantizationTables[_component.quantizationId];if(quantizationTable){_component.quantizationTable=quantizationTable;}this.components.push({index:_component.index,output:buildComponentData(frame,_component),scaleX:_component.h/frame.maxH,scaleY:_component.v/frame.maxV,blocksPerLine:_component.blocksPerLine,blocksPerColumn:_component.blocksPerColumn});}}catch(err){_iterator25.e(err);}finally{_iterator25.f();}this.numComponents=this.components.length;return undefined;}},{key:"_getLinearizedBlockData",value:function _getLinearizedBlockData(width,height){var isSourcePDF=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var scaleX=this.width/width,scaleY=this.height/height;var component,componentScaleX,componentScaleY,blocksPerScanline;var x,y,i,j,k;var index;var offset=0;var output;var numComponents=this.components.length;var dataLength=width*height*numComponents;var data=new Uint8ClampedArray(dataLength);var xScaleBlockOffset=new Uint32Array(width);var mask3LSB=0xfffffff8;var lastComponentScaleX;for(i=0;i<numComponents;i++){component=this.components[i];componentScaleX=component.scaleX*scaleX;componentScaleY=component.scaleY*scaleY;offset=i;output=component.output;blocksPerScanline=component.blocksPerLine+1<<3;if(componentScaleX!==lastComponentScaleX){for(x=0;x<width;x++){j=0|x*componentScaleX;xScaleBlockOffset[x]=(j&mask3LSB)<<3|j&7;}lastComponentScaleX=componentScaleX;}for(y=0;y<height;y++){j=0|y*componentScaleY;index=blocksPerScanline*(j&mask3LSB)|(j&7)<<3;for(x=0;x<width;x++){data[offset]=output[index+xScaleBlockOffset[x]];offset+=numComponents;}}}var transform=this._decodeTransform;if(!isSourcePDF&&numComponents===4&&!transform){transform=new Int32Array([-256,255,-256,255,-256,255,-256,255]);}if(transform){for(i=0;i<dataLength;){for(j=0,k=0;j<numComponents;j++,i++,k+=2){data[i]=(data[i]*transform[k]>>8)+transform[k+1];}}}return data;}},{key:"_isColorConversionNeeded",get:function get(){if(this.adobe){return!!this.adobe.transformCode;}if(this.numComponents===3){if(this._colorTransform===0){return false;}else if(this.components[0].index===0x52&&this.components[1].index===0x47&&this.components[2].index===0x42){return false;}return true;}if(this._colorTransform===1){return true;}return false;}},{key:"_convertYccToRgb",value:function _convertYccToRgb(data){var Y,Cb,Cr;for(var i=0,length=data.length;i<length;i+=3){Y=data[i];Cb=data[i+1];Cr=data[i+2];data[i]=Y-179.456+1.402*Cr;data[i+1]=Y+135.459-0.344*Cb-0.714*Cr;data[i+2]=Y-226.816+1.772*Cb;}return data;}},{key:"_convertYccToRgba",value:function _convertYccToRgba(data,out){for(var i=0,j=0,length=data.length;i<length;i+=3,j+=4){var Y=data[i];var Cb=data[i+1];var Cr=data[i+2];out[j]=Y-179.456+1.402*Cr;out[j+1]=Y+135.459-0.344*Cb-0.714*Cr;out[j+2]=Y-226.816+1.772*Cb;out[j+3]=255;}return out;}},{key:"_convertYcckToRgb",value:function _convertYcckToRgb(data){var Y,Cb,Cr,k;var offset=0;for(var i=0,length=data.length;i<length;i+=4){Y=data[i];Cb=data[i+1];Cr=data[i+2];k=data[i+3];data[offset++]=-122.67195406894+Cb*(-6.60635669420364e-5*Cb+0.000437130475926232*Cr-5.4080610064599e-5*Y+0.00048449797120281*k-0.154362151871126)+Cr*(-0.000957964378445773*Cr+0.000817076911346625*Y-0.00477271405408747*k+1.53380253221734)+Y*(0.000961250184130688*Y-0.00266257332283933*k+0.48357088451265)+k*(-0.000336197177618394*k+0.484791561490776);data[offset++]=107.268039397724+Cb*(2.19927104525741e-5*Cb-0.000640992018297945*Cr+0.000659397001245577*Y+0.000426105652938837*k-0.176491792462875)+Cr*(-0.000778269941513683*Cr+0.00130872261408275*Y+0.000770482631801132*k-0.151051492775562)+Y*(0.00126935368114843*Y-0.00265090189010898*k+0.25802910206845)+k*(-0.000318913117588328*k-0.213742400323665);data[offset++]=-20.810012546947+Cb*(-0.000570115196973677*Cb-2.63409051004589e-5*Cr+0.0020741088115012*Y-0.00288260236853442*k+0.814272968359295)+Cr*(-1.53496057440975e-5*Cr-0.000132689043961446*Y+0.000560833691242812*k-0.195152027534049)+Y*(0.00174418132927582*Y-0.00255243321439347*k+0.116935020465145)+k*(-0.000343531996510555*k+0.24165260232407);}return data.subarray(0,offset);}},{key:"_convertYcckToRgba",value:function _convertYcckToRgba(data){for(var i=0,length=data.length;i<length;i+=4){var Y=data[i];var Cb=data[i+1];var Cr=data[i+2];var k=data[i+3];data[i]=-122.67195406894+Cb*(-6.60635669420364e-5*Cb+0.000437130475926232*Cr-5.4080610064599e-5*Y+0.00048449797120281*k-0.154362151871126)+Cr*(-0.000957964378445773*Cr+0.000817076911346625*Y-0.00477271405408747*k+1.53380253221734)+Y*(0.000961250184130688*Y-0.00266257332283933*k+0.48357088451265)+k*(-0.000336197177618394*k+0.484791561490776);data[i+1]=107.268039397724+Cb*(2.19927104525741e-5*Cb-0.000640992018297945*Cr+0.000659397001245577*Y+0.000426105652938837*k-0.176491792462875)+Cr*(-0.000778269941513683*Cr+0.00130872261408275*Y+0.000770482631801132*k-0.151051492775562)+Y*(0.00126935368114843*Y-0.00265090189010898*k+0.25802910206845)+k*(-0.000318913117588328*k-0.213742400323665);data[i+2]=-20.810012546947+Cb*(-0.000570115196973677*Cb-2.63409051004589e-5*Cr+0.0020741088115012*Y-0.00288260236853442*k+0.814272968359295)+Cr*(-1.53496057440975e-5*Cr-0.000132689043961446*Y+0.000560833691242812*k-0.195152027534049)+Y*(0.00174418132927582*Y-0.00255243321439347*k+0.116935020465145)+k*(-0.000343531996510555*k+0.24165260232407);data[i+3]=255;}return data;}},{key:"_convertYcckToCmyk",value:function _convertYcckToCmyk(data){var Y,Cb,Cr;for(var i=0,length=data.length;i<length;i+=4){Y=data[i];Cb=data[i+1];Cr=data[i+2];data[i]=434.456-Y-1.402*Cr;data[i+1]=119.541-Y+0.344*Cb+0.714*Cr;data[i+2]=481.816-Y-1.772*Cb;}return data;}},{key:"_convertCmykToRgb",value:function _convertCmykToRgb(data){var c,m,y,k;var offset=0;for(var i=0,length=data.length;i<length;i+=4){c=data[i];m=data[i+1];y=data[i+2];k=data[i+3];data[offset++]=255+c*(-0.00006747147073602441*c+0.0008379262121013727*m+0.0002894718188643294*y+0.003264231057537806*k-1.1185611867203937)+m*(0.000026374107616089405*m-0.00008626949158638572*y-0.0002748769067499491*k-0.02155688794978967)+y*(-0.00003878099212869363*y-0.0003267808279485286*k+0.0686742238595345)-k*(0.0003361971776183937*k+0.7430659151342254);data[offset++]=255+c*(0.00013596372813588848*c+0.000924537132573585*m+0.00010567359618683593*y+0.0004791864687436512*k-0.3109689587515875)+m*(-0.00023545346108370344*m+0.0002702845253534714*y+0.0020200308977307156*k-0.7488052167015494)+y*(0.00006834815998235662*y+0.00015168452363460973*k-0.09751927774728933)-k*(0.0003189131175883281*k+0.7364883807733168);data[offset++]=255+c*(0.000013598650411385307*c+0.00012423956175490851*m+0.0004751985097583589*y-0.0000036729317476630422*k-0.05562186980264034)+m*(0.00016141380598724676*m+0.0009692239130725186*y+0.0007782692450036253*k-0.44015232367526463)+y*(5.068882914068769e-7*y+0.0017778369011375071*k-0.7591454649749609)-k*(0.0003435319965105553*k+0.7063770186160144);}return data.subarray(0,offset);}},{key:"_convertCmykToRgba",value:function _convertCmykToRgba(data){for(var i=0,length=data.length;i<length;i+=4){var c=data[i];var m=data[i+1];var y=data[i+2];var k=data[i+3];data[i]=255+c*(-0.00006747147073602441*c+0.0008379262121013727*m+0.0002894718188643294*y+0.003264231057537806*k-1.1185611867203937)+m*(0.000026374107616089405*m-0.00008626949158638572*y-0.0002748769067499491*k-0.02155688794978967)+y*(-0.00003878099212869363*y-0.0003267808279485286*k+0.0686742238595345)-k*(0.0003361971776183937*k+0.7430659151342254);data[i+1]=255+c*(0.00013596372813588848*c+0.000924537132573585*m+0.00010567359618683593*y+0.0004791864687436512*k-0.3109689587515875)+m*(-0.00023545346108370344*m+0.0002702845253534714*y+0.0020200308977307156*k-0.7488052167015494)+y*(0.00006834815998235662*y+0.00015168452363460973*k-0.09751927774728933)-k*(0.0003189131175883281*k+0.7364883807733168);data[i+2]=255+c*(0.000013598650411385307*c+0.00012423956175490851*m+0.0004751985097583589*y-0.0000036729317476630422*k-0.05562186980264034)+m*(0.00016141380598724676*m+0.0009692239130725186*y+0.0007782692450036253*k-0.44015232367526463)+y*(5.068882914068769e-7*y+0.0017778369011375071*k-0.7591454649749609)-k*(0.0003435319965105553*k+0.7063770186160144);data[i+3]=255;}return data;}},{key:"getData",value:function getData(_ref11){var width=_ref11.width,height=_ref11.height,_ref11$forceRGBA=_ref11.forceRGBA,forceRGBA=_ref11$forceRGBA===void 0?false:_ref11$forceRGBA,_ref11$forceRGB=_ref11.forceRGB,forceRGB=_ref11$forceRGB===void 0?false:_ref11$forceRGB,_ref11$isSourcePDF=_ref11.isSourcePDF,isSourcePDF=_ref11$isSourcePDF===void 0?false:_ref11$isSourcePDF;if(this.numComponents>4){throw new JpegError("Unsupported color mode");}var data=this._getLinearizedBlockData(width,height,isSourcePDF);if(this.numComponents===1&&(forceRGBA||forceRGB)){var len=data.length*(forceRGBA?4:3);var rgbaData=new Uint8ClampedArray(len);var offset=0;if(forceRGBA){grayToRGBA(data,new Uint32Array(rgbaData.buffer));}else{var _iterator26=_createForOfIteratorHelper(data),_step26;try{for(_iterator26.s();!(_step26=_iterator26.n()).done;){var grayColor=_step26.value;rgbaData[offset++]=grayColor;rgbaData[offset++]=grayColor;rgbaData[offset++]=grayColor;}}catch(err){_iterator26.e(err);}finally{_iterator26.f();}}return rgbaData;}else if(this.numComponents===3&&this._isColorConversionNeeded){if(forceRGBA){var _rgbaData=new Uint8ClampedArray(data.length/3*4);return this._convertYccToRgba(data,_rgbaData);}return this._convertYccToRgb(data);}else if(this.numComponents===4){if(this._isColorConversionNeeded){if(forceRGBA){return this._convertYcckToRgba(data);}if(forceRGB){return this._convertYcckToRgb(data);}return this._convertYcckToCmyk(data);}else if(forceRGBA){return this._convertCmykToRgba(data);}else if(forceRGB){return this._convertCmykToRgb(data);}}return data;}}],[{key:"canUseImageDecoder",value:function canUseImageDecoder(data){var colorTransform=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;var exifOffsets=null;var offset=0;var numComponents=null;var fileMarker=readUint16(data,offset);offset+=2;if(fileMarker!==0xffd8){throw new JpegError("SOI not found");}fileMarker=readUint16(data,offset);offset+=2;markerLoop:while(fileMarker!==0xffd9){switch(fileMarker){case 0xffe1:var _readDataBlock2=readDataBlock(data,offset),appData=_readDataBlock2.appData,oldOffset=_readDataBlock2.oldOffset,newOffset=_readDataBlock2.newOffset;offset=newOffset;if(appData[0]===0x45&&appData[1]===0x78&&appData[2]===0x69&&appData[3]===0x66&&appData[4]===0&&appData[5]===0){if(exifOffsets){throw new JpegError("Duplicate EXIF-blocks found.");}exifOffsets={exifStart:oldOffset+6,exifEnd:newOffset};}fileMarker=readUint16(data,offset);offset+=2;continue;case 0xffc0:case 0xffc1:case 0xffc2:numComponents=data[offset+(2+1+2+2)];break markerLoop;case 0xffff:if(data[offset]!==0xff){offset--;}break;}offset=skipData(data,offset);fileMarker=readUint16(data,offset);offset+=2;}if(numComponents===4){return null;}if(numComponents===3&&colorTransform===0){return null;}return exifOffsets||{};}}]);}();;// ./src/core/jpeg_stream.js\nvar _JpegStream_brand=/*#__PURE__*/new WeakSet();var JpegStream=/*#__PURE__*/function(_DecodeStream2){function JpegStream(stream,maybeLength,params){var _this13;_classCallCheck(this,JpegStream);_this13=_callSuper(this,JpegStream,[maybeLength]);_classPrivateMethodInitSpec(_this13,_JpegStream_brand);_this13.stream=stream;_this13.dict=stream.dict;_this13.maybeLength=maybeLength;_this13.params=params;return _this13;}_inherits(JpegStream,_DecodeStream2);return _createClass(JpegStream,[{key:"bytes",get:function get(){return shadow(this,"bytes",this.stream.getBytes(this.maybeLength));}},{key:"ensureBuffer",value:function ensureBuffer(requested){}},{key:"readBlock",value:function readBlock(){this.decodeImage();}},{key:"jpegOptions",get:function get(){var jpegOptions={decodeTransform:undefined,colorTransform:undefined};var decodeArr=this.dict.getArray("D","Decode");if((this.forceRGBA||this.forceRGB)&&Array.isArray(decodeArr)){var bitsPerComponent=this.dict.get("BPC","BitsPerComponent")||8;var decodeArrLength=decodeArr.length;var transform=new Int32Array(decodeArrLength);var transformNeeded=false;var maxValue=(1<<bitsPerComponent)-1;for(var i=0;i<decodeArrLength;i+=2){transform[i]=(decodeArr[i+1]-decodeArr[i])*256|0;transform[i+1]=decodeArr[i]*maxValue|0;if(transform[i]!==256||transform[i+1]!==0){transformNeeded=true;}}if(transformNeeded){jpegOptions.decodeTransform=transform;}}if(this.params instanceof Dict){var colorTransform=this.params.get("ColorTransform");if(Number.isInteger(colorTransform)){jpegOptions.colorTransform=colorTransform;}}return shadow(this,"jpegOptions",jpegOptions);}},{key:"decodeImage",value:function decodeImage(bytes){if(this.eof){return this.buffer;}bytes=_assertClassBrand(_JpegStream_brand,this,_skipUselessBytes).call(this,bytes||this.bytes);var jpegImage=new JpegImage(this.jpegOptions);jpegImage.parse(bytes);var data=jpegImage.getData({width:this.drawWidth,height:this.drawHeight,forceRGBA:this.forceRGBA,forceRGB:this.forceRGB,isSourcePDF:true});this.buffer=data;this.bufferLength=data.length;this.eof=true;return this.buffer;}},{key:"canAsyncDecodeImageFromBuffer",get:function get(){return this.stream.isAsync;}},{key:"getTransferableImage",value:function(){var _getTransferableImage2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(){var jpegOptions,decoder,bytes,data,useImageDecoder,_decoder;return _regeneratorRuntime().wrap(function _callee8$(_context12){while(1)switch(_context12.prev=_context12.next){case 0:_context12.next=2;return JpegStream.canUseImageDecoder;case 2:if(_context12.sent){_context12.next=4;break;}return _context12.abrupt("return",null);case 4:jpegOptions=this.jpegOptions;if(!jpegOptions.decodeTransform){_context12.next=7;break;}return _context12.abrupt("return",null);case 7:_context12.prev=7;_context12.t1=this.canAsyncDecodeImageFromBuffer;if(!_context12.t1){_context12.next=13;break;}_context12.next=12;return this.stream.asyncGetBytes();case 12:_context12.t1=_context12.sent;case 13:_context12.t0=_context12.t1;if(_context12.t0){_context12.next=16;break;}_context12.t0=this.bytes;case 16:bytes=_context12.t0;if(bytes){_context12.next=19;break;}return _context12.abrupt("return",null);case 19:data=_assertClassBrand(_JpegStream_brand,this,_skipUselessBytes).call(this,bytes);useImageDecoder=JpegImage.canUseImageDecoder(data,jpegOptions.colorTransform);if(useImageDecoder){_context12.next=23;break;}return _context12.abrupt("return",null);case 23:if(useImageDecoder.exifStart){data=data.slice();data.fill(0x00,useImageDecoder.exifStart,useImageDecoder.exifEnd);}decoder=new ImageDecoder({data:data,type:"image/jpeg",preferAnimation:false});_context12.next=27;return decoder.decode();case 27:return _context12.abrupt("return",_context12.sent.image);case 30:_context12.prev=30;_context12.t2=_context12["catch"](7);warn("getTransferableImage - failed: \\"".concat(_context12.t2,"\\"."));return _context12.abrupt("return",null);case 34:_context12.prev=34;(_decoder=decoder)===null||_decoder===void 0||_decoder.close();return _context12.finish(34);case 37:case"end":return _context12.stop();}},_callee8,this,[[7,30,34,37]]);}));function getTransferableImage(){return _getTransferableImage2.apply(this,arguments);}return getTransferableImage;}()}],[{key:"canUseImageDecoder",get:function get(){return shadow(this,"canUseImageDecoder",_assertClassBrand(JpegStream,this,_isImageDecoderSupported2)._?ImageDecoder.isTypeSupported("image/jpeg"):Promise.resolve(false));}},{key:"setOptions",value:function setOptions(_ref12){var _ref12$isImageDecoder=_ref12.isImageDecoderSupported,isImageDecoderSupported=_ref12$isImageDecoder===void 0?false:_ref12$isImageDecoder;_isImageDecoderSupported2._=_assertClassBrand(JpegStream,this,isImageDecoderSupported);}}]);}(DecodeStream);function _skipUselessBytes(data){for(var i=0,ii=data.length-1;i<ii;i++){if(data[i]===0xff&&data[i+1]===0xd8){if(i>0){data=data.subarray(i);}break;}}return data;}var _isImageDecoderSupported2={_:FeatureTest.isImageDecoderSupported};;// ./external/openjpeg/openjpeg.js\nvar OpenJPEG=function(_document$currentScri){var _scriptName=typeof document!=\'undefined\'?(_document$currentScri=document.currentScript)===null||_document$currentScri===void 0?void 0:_document$currentScri.src:undefined;return/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee14(){var moduleArg,moduleRtn,Module,readyPromiseResolve,readyPromiseReject,readyPromise,ENVIRONMENT_IS_WEB,ENVIRONMENT_IS_WORKER,moduleOverrides,arguments_,thisProgram,quit_,scriptDirectory,locateFile,readAsync,readBinary,out,err,wasmBinary,wasmMemory,ABORT,EXITSTATUS,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAP64,HEAPU64,HEAPF64,runtimeInitialized,updateMemoryViews,preRun,initRuntime,postRun,runDependencies,dependenciesFulfilled,addRunDependency,removeRunDependency,abort,wasmBinaryFile,findWasmBinary,getBinarySync,getWasmBinary,_getWasmBinary,instantiateArrayBuffer,_instantiateArrayBuffer,instantiateAsync,_instantiateAsync,getWasmImports,createWasm,_createWasm,ExitStatus,callRuntimeCallbacks,onPostRuns,addOnPostRun,onPreRuns,addOnPreRun,noExitRuntime,__abort_js,runtimeKeepaliveCounter,__emscripten_runtime_keepalive_clear,timers,handleException,keepRuntimeAlive,_proc_exit,exitJS,_exit,maybeExit,callUserCallback,_emscripten_get_now,__setitimer_js,_copy_pixels_1,_copy_pixels_3,_copy_pixels_4,getHeapMax,alignMemory,growMemory,_emscripten_resize_heap,ENV,getExecutableName,_getEnvStrings,stringToAscii,_environ_get,_environ_sizes_get,_fd_close,INT53_MAX,INT53_MIN,bigintToI53Checked,_fd_seek,printCharBuffers,UTF8Decoder,UTF8ArrayToString,printChar,UTF8ToString,_fd_write,_gray_to_rgba,_graya_to_rgba,_jsPrintWarning,_rgb_to_rgba,_storeErrorMessage,wasmImports,wasmExports,___wasm_call_ctors,_malloc,_free,_jp2_decode,__emscripten_timeout,run,_args18=arguments;return _regeneratorRuntime().wrap(function _callee14$(_context18){while(1)switch(_context18.prev=_context18.next){case 0:run=function _run(){if(runDependencies>0){dependenciesFulfilled=run;return;}preRun();if(runDependencies>0){dependenciesFulfilled=run;return;}function doRun(){var _Module$onRuntimeInit;Module["calledRun"]=true;if(ABORT)return;initRuntime();readyPromiseResolve(Module);(_Module$onRuntimeInit=Module["onRuntimeInitialized"])===null||_Module$onRuntimeInit===void 0||_Module$onRuntimeInit.call(Module);postRun();}if(Module["setStatus"]){Module["setStatus"]("Running...");setTimeout(function(){setTimeout(function(){return Module["setStatus"]("");},1);doRun();},1);}else{doRun();}};_storeErrorMessage=function _storeErrorMessage2(message_ptr){var message=UTF8ToString(message_ptr);if(!Module.errorMessages){Module.errorMessages=message;}else{Module.errorMessages+="\\n"+message;}};_rgb_to_rgba=function _rgb_to_rgba2(compR_ptr,compG_ptr,compB_ptr,nb_pixels){compR_ptr>>=2;compG_ptr>>=2;compB_ptr>>=2;var imageData=Module.imageData=new Uint8ClampedArray(nb_pixels*4);var compR=HEAP32.subarray(compR_ptr,compR_ptr+nb_pixels);var compG=HEAP32.subarray(compG_ptr,compG_ptr+nb_pixels);var compB=HEAP32.subarray(compB_ptr,compB_ptr+nb_pixels);for(var i=0;i<nb_pixels;i++){imageData[4*i]=compR[i];imageData[4*i+1]=compG[i];imageData[4*i+2]=compB[i];imageData[4*i+3]=255;}};_jsPrintWarning=function _jsPrintWarning2(message_ptr){var message=UTF8ToString(message_ptr);(Module.warn||console.warn)("OpenJPEG: ".concat(message));};_graya_to_rgba=function _graya_to_rgba2(compG_ptr,compA_ptr,nb_pixels){compG_ptr>>=2;compA_ptr>>=2;var imageData=Module.imageData=new Uint8ClampedArray(nb_pixels*4);var compG=HEAP32.subarray(compG_ptr,compG_ptr+nb_pixels);var compA=HEAP32.subarray(compA_ptr,compA_ptr+nb_pixels);for(var i=0;i<nb_pixels;i++){imageData[4*i]=imageData[4*i+1]=imageData[4*i+2]=compG[i];imageData[4*i+3]=compA[i];}};_gray_to_rgba=function _gray_to_rgba2(compG_ptr,nb_pixels){compG_ptr>>=2;var imageData=Module.imageData=new Uint8ClampedArray(nb_pixels*4);var compG=HEAP32.subarray(compG_ptr,compG_ptr+nb_pixels);for(var i=0;i<nb_pixels;i++){imageData[4*i]=imageData[4*i+1]=imageData[4*i+2]=compG[i];imageData[4*i+3]=255;}};_fd_seek=function _fd_seek2(fd,offset,whence,newOffset){offset=bigintToI53Checked(offset);return 70;};_copy_pixels_4=function _copy_pixels_5(compR_ptr,compG_ptr,compB_ptr,compA_ptr,nb_pixels){compR_ptr>>=2;compG_ptr>>=2;compB_ptr>>=2;compA_ptr>>=2;var imageData=Module.imageData=new Uint8ClampedArray(nb_pixels*4);var compR=HEAP32.subarray(compR_ptr,compR_ptr+nb_pixels);var compG=HEAP32.subarray(compG_ptr,compG_ptr+nb_pixels);var compB=HEAP32.subarray(compB_ptr,compB_ptr+nb_pixels);var compA=HEAP32.subarray(compA_ptr,compA_ptr+nb_pixels);for(var i=0;i<nb_pixels;i++){imageData[4*i]=compR[i];imageData[4*i+1]=compG[i];imageData[4*i+2]=compB[i];imageData[4*i+3]=compA[i];}};_copy_pixels_3=function _copy_pixels_2(compR_ptr,compG_ptr,compB_ptr,nb_pixels){compR_ptr>>=2;compG_ptr>>=2;compB_ptr>>=2;var imageData=Module.imageData=new Uint8ClampedArray(nb_pixels*3);var compR=HEAP32.subarray(compR_ptr,compR_ptr+nb_pixels);var compG=HEAP32.subarray(compG_ptr,compG_ptr+nb_pixels);var compB=HEAP32.subarray(compB_ptr,compB_ptr+nb_pixels);for(var i=0;i<nb_pixels;i++){imageData[3*i]=compR[i];imageData[3*i+1]=compG[i];imageData[3*i+2]=compB[i];}};_copy_pixels_1=function _copy_pixels_(compG_ptr,nb_pixels){compG_ptr>>=2;var imageData=Module.imageData=new Uint8ClampedArray(nb_pixels);var compG=HEAP32.subarray(compG_ptr,compG_ptr+nb_pixels);imageData.set(compG);};_createWasm=function _createWasm3(){_createWasm=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee13(){var receiveInstance,receiveInstantiationResult,info,result,exports;return _regeneratorRuntime().wrap(function _callee13$(_context17){while(1)switch(_context17.prev=_context17.next){case 0:receiveInstantiationResult=function _receiveInstantiation(result){return receiveInstance(result["instance"]);};receiveInstance=function _receiveInstance(instance,module){wasmExports=instance.exports;wasmMemory=wasmExports["s"];updateMemoryViews();removeRunDependency("wasm-instantiate");return wasmExports;};addRunDependency("wasm-instantiate");info=getWasmImports();if(!Module["instantiateWasm"]){_context17.next=6;break;}return _context17.abrupt("return",new Promise(function(resolve,reject){Module["instantiateWasm"](info,function(mod,inst){receiveInstance(mod,inst);resolve(mod.exports);});}));case 6:wasmBinaryFile!==null&&wasmBinaryFile!==void 0?wasmBinaryFile:wasmBinaryFile=findWasmBinary();_context17.prev=7;_context17.next=10;return instantiateAsync(wasmBinary,wasmBinaryFile,info);case 10:result=_context17.sent;exports=receiveInstantiationResult(result);return _context17.abrupt("return",exports);case 15:_context17.prev=15;_context17.t0=_context17["catch"](7);readyPromiseReject(_context17.t0);return _context17.abrupt("return",Promise.reject(_context17.t0));case 19:case"end":return _context17.stop();}},_callee13,null,[[7,15]]);}));return _createWasm.apply(this,arguments);};createWasm=function _createWasm2(){return _createWasm.apply(this,arguments);};getWasmImports=function _getWasmImports(){return{a:wasmImports};};_instantiateAsync=function _instantiateAsync3(){_instantiateAsync=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee12(binary,binaryFile,imports){var response,instantiationResult;return _regeneratorRuntime().wrap(function _callee12$(_context16){while(1)switch(_context16.prev=_context16.next){case 0:if(!(!binary&&typeof WebAssembly.instantiateStreaming=="function")){_context16.next=13;break;}_context16.prev=1;response=fetch(binaryFile,{credentials:"same-origin"});_context16.next=5;return WebAssembly.instantiateStreaming(response,imports);case 5:instantiationResult=_context16.sent;return _context16.abrupt("return",instantiationResult);case 9:_context16.prev=9;_context16.t0=_context16["catch"](1);err("wasm streaming compile failed: ".concat(_context16.t0));err("falling back to ArrayBuffer instantiation");case 13:return _context16.abrupt("return",instantiateArrayBuffer(binaryFile,imports));case 14:case"end":return _context16.stop();}},_callee12,null,[[1,9]]);}));return _instantiateAsync.apply(this,arguments);};instantiateAsync=function _instantiateAsync2(_x14,_x15,_x16){return _instantiateAsync.apply(this,arguments);};_instantiateArrayBuffer=function _instantiateArrayBuff2(){_instantiateArrayBuffer=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee11(binaryFile,imports){var binary,instance;return _regeneratorRuntime().wrap(function _callee11$(_context15){while(1)switch(_context15.prev=_context15.next){case 0:_context15.prev=0;_context15.next=3;return getWasmBinary(binaryFile);case 3:binary=_context15.sent;_context15.next=6;return WebAssembly.instantiate(binary,imports);case 6:instance=_context15.sent;return _context15.abrupt("return",instance);case 10:_context15.prev=10;_context15.t0=_context15["catch"](0);err("failed to asynchronously prepare wasm: ".concat(_context15.t0));abort(_context15.t0);case 14:case"end":return _context15.stop();}},_callee11,null,[[0,10]]);}));return _instantiateArrayBuffer.apply(this,arguments);};instantiateArrayBuffer=function _instantiateArrayBuff(_x12,_x13){return _instantiateArrayBuffer.apply(this,arguments);};_getWasmBinary=function _getWasmBinary3(){_getWasmBinary=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee10(binaryFile){var response;return _regeneratorRuntime().wrap(function _callee10$(_context14){while(1)switch(_context14.prev=_context14.next){case 0:if(wasmBinary){_context14.next=10;break;}_context14.prev=1;_context14.next=4;return readAsync(binaryFile);case 4:response=_context14.sent;return _context14.abrupt("return",new Uint8Array(response));case 8:_context14.prev=8;_context14.t0=_context14["catch"](1);case 10:return _context14.abrupt("return",getBinarySync(binaryFile));case 11:case"end":return _context14.stop();}},_callee10,null,[[1,8]]);}));return _getWasmBinary.apply(this,arguments);};getWasmBinary=function _getWasmBinary2(_x11){return _getWasmBinary.apply(this,arguments);};getBinarySync=function _getBinarySync(file){if(file==wasmBinaryFile&&wasmBinary){return new Uint8Array(wasmBinary);}if(readBinary){return readBinary(file);}throw"both async and sync fetching of the wasm failed";};findWasmBinary=function _findWasmBinary(){return locateFile("openjpeg.wasm");};abort=function _abort(what){var _Module$onAbort;(_Module$onAbort=Module["onAbort"])===null||_Module$onAbort===void 0||_Module$onAbort.call(Module,what);what="Aborted("+what+")";err(what);ABORT=true;what+=". Build with -sASSERTIONS for more info.";var e=new WebAssembly.RuntimeError(what);readyPromiseReject(e);throw e;};removeRunDependency=function _removeRunDependency(id){var _Module$monitorRunDep2;runDependencies--;(_Module$monitorRunDep2=Module["monitorRunDependencies"])===null||_Module$monitorRunDep2===void 0||_Module$monitorRunDep2.call(Module,runDependencies);if(runDependencies==0){if(dependenciesFulfilled){var callback=dependenciesFulfilled;dependenciesFulfilled=null;callback();}}};addRunDependency=function _addRunDependency(id){var _Module$monitorRunDep;runDependencies++;(_Module$monitorRunDep=Module["monitorRunDependencies"])===null||_Module$monitorRunDep===void 0||_Module$monitorRunDep.call(Module,runDependencies);};postRun=function _postRun(){if(Module["postRun"]){if(typeof Module["postRun"]=="function")Module["postRun"]=[Module["postRun"]];while(Module["postRun"].length){addOnPostRun(Module["postRun"].shift());}}callRuntimeCallbacks(onPostRuns);};initRuntime=function _initRuntime(){runtimeInitialized=true;wasmExports["t"]();};preRun=function _preRun(){if(Module["preRun"]){if(typeof Module["preRun"]=="function")Module["preRun"]=[Module["preRun"]];while(Module["preRun"].length){addOnPreRun(Module["preRun"].shift());}}callRuntimeCallbacks(onPreRuns);};updateMemoryViews=function _updateMemoryViews(){var b=wasmMemory.buffer;Module["HEAP8"]=HEAP8=new Int8Array(b);Module["HEAP16"]=HEAP16=new Int16Array(b);Module["HEAPU8"]=HEAPU8=new Uint8Array(b);Module["HEAPU16"]=HEAPU16=new Uint16Array(b);Module["HEAP32"]=HEAP32=new Int32Array(b);Module["HEAPU32"]=HEAPU32=new Uint32Array(b);Module["HEAPF32"]=HEAPF32=new Float32Array(b);Module["HEAPF64"]=HEAPF64=new Float64Array(b);Module["HEAP64"]=HEAP64=new BigInt64Array(b);Module["HEAPU64"]=HEAPU64=new BigUint64Array(b);};locateFile=function _locateFile(path){if(Module["locateFile"]){return Module["locateFile"](path,scriptDirectory);}return scriptDirectory+path;};moduleArg=_args18.length>0&&_args18[0]!==undefined?_args18[0]:{};Module=moduleArg;readyPromise=new Promise(function(resolve,reject){readyPromiseResolve=resolve;readyPromiseReject=reject;});ENVIRONMENT_IS_WEB=true;ENVIRONMENT_IS_WORKER=false;moduleOverrides=Object.assign({},Module);arguments_=[];thisProgram="./this.program";quit_=function quit_(status,toThrow){throw toThrow;};scriptDirectory="";if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(ENVIRONMENT_IS_WORKER){scriptDirectory=self.location.href;}else if(typeof document!="undefined"&&document.currentScript){scriptDirectory=document.currentScript.src;}if(_scriptName){scriptDirectory=_scriptName;}if(scriptDirectory.startsWith("blob:")){scriptDirectory="";}else{scriptDirectory=scriptDirectory.slice(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1);}readAsync=/*#__PURE__*/function(){var _ref14=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9(url){var response;return _regeneratorRuntime().wrap(function _callee9$(_context13){while(1)switch(_context13.prev=_context13.next){case 0:_context13.next=2;return fetch(url,{credentials:"same-origin"});case 2:response=_context13.sent;if(!response.ok){_context13.next=5;break;}return _context13.abrupt("return",response.arrayBuffer());case 5:throw new Error(response.status+" : "+response.url);case 6:case"end":return _context13.stop();}},_callee9);}));return function readAsync(_x10){return _ref14.apply(this,arguments);};}();}else{}out=Module["print"]||console.log.bind(console);err=Module["printErr"]||console.error.bind(console);Object.assign(Module,moduleOverrides);moduleOverrides=null;if(Module["arguments"])arguments_=Module["arguments"];if(Module["thisProgram"])thisProgram=Module["thisProgram"];wasmBinary=Module["wasmBinary"];ABORT=false;runtimeInitialized=false;runDependencies=0;dependenciesFulfilled=null;ExitStatus=/*#__PURE__*/_createClass(function ExitStatus(status){_classCallCheck(this,ExitStatus);_defineProperty(this,"name","ExitStatus");this.message="Program terminated with exit(".concat(status,")");this.status=status;});callRuntimeCallbacks=function callRuntimeCallbacks(callbacks){while(callbacks.length>0){callbacks.shift()(Module);}};onPostRuns=[];addOnPostRun=function addOnPostRun(cb){return onPostRuns.unshift(cb);};onPreRuns=[];addOnPreRun=function addOnPreRun(cb){return onPreRuns.unshift(cb);};noExitRuntime=Module["noExitRuntime"]||true;__abort_js=function __abort_js(){return abort("");};runtimeKeepaliveCounter=0;__emscripten_runtime_keepalive_clear=function __emscripten_runtime_keepalive_clear(){noExitRuntime=false;runtimeKeepaliveCounter=0;};timers={};handleException=function handleException(e){if(e instanceof ExitStatus||e=="unwind"){return EXITSTATUS;}quit_(1,e);};keepRuntimeAlive=function keepRuntimeAlive(){return noExitRuntime||runtimeKeepaliveCounter>0;};_proc_exit=function _proc_exit(code){EXITSTATUS=code;if(!keepRuntimeAlive()){var _Module$onExit;(_Module$onExit=Module["onExit"])===null||_Module$onExit===void 0||_Module$onExit.call(Module,code);ABORT=true;}quit_(code,new ExitStatus(code));};exitJS=function exitJS(status,implicit){EXITSTATUS=status;_proc_exit(status);};_exit=exitJS;maybeExit=function maybeExit(){if(!keepRuntimeAlive()){try{_exit(EXITSTATUS);}catch(e){handleException(e);}}};callUserCallback=function callUserCallback(func){if(ABORT){return;}try{func();maybeExit();}catch(e){handleException(e);}};_emscripten_get_now=function _emscripten_get_now(){return performance.now();};__setitimer_js=function __setitimer_js(which,timeout_ms){if(timers[which]){clearTimeout(timers[which].id);delete timers[which];}if(!timeout_ms)return 0;var id=setTimeout(function(){delete timers[which];callUserCallback(function(){return __emscripten_timeout(which,_emscripten_get_now());});},timeout_ms);timers[which]={id:id,timeout_ms:timeout_ms};return 0;};getHeapMax=function getHeapMax(){return 2147483648;};alignMemory=function alignMemory(size,alignment){return Math.ceil(size/alignment)*alignment;};growMemory=function growMemory(size){var b=wasmMemory.buffer;var pages=(size-b.byteLength+65535)/65536|0;try{wasmMemory.grow(pages);updateMemoryViews();return 1;}catch(e){}};_emscripten_resize_heap=function _emscripten_resize_heap(requestedSize){var oldSize=HEAPU8.length;requestedSize>>>=0;var maxHeapSize=getHeapMax();if(requestedSize>maxHeapSize){return false;}for(var cutDown=1;cutDown<=4;cutDown*=2){var overGrownHeapSize=oldSize*(1+.2/cutDown);overGrownHeapSize=Math.min(overGrownHeapSize,requestedSize+100663296);var newSize=Math.min(maxHeapSize,alignMemory(Math.max(requestedSize,overGrownHeapSize),65536));var replacement=growMemory(newSize);if(replacement){return true;}}return false;};ENV={};getExecutableName=function getExecutableName(){return thisProgram||"./this.program";};_getEnvStrings=function getEnvStrings(){if(!_getEnvStrings.strings){var lang=((typeof navigator==="undefined"?"undefined":_typeof(navigator))=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8";var env={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:lang,_:getExecutableName()};for(var x in ENV){if(ENV[x]===undefined)delete env[x];else env[x]=ENV[x];}var strings=[];for(var x in env){strings.push("".concat(x,"=").concat(env[x]));}_getEnvStrings.strings=strings;}return _getEnvStrings.strings;};stringToAscii=function stringToAscii(str,buffer){for(var i=0;i<str.length;++i){HEAP8[buffer++]=str.charCodeAt(i);}HEAP8[buffer]=0;};_environ_get=function _environ_get(__environ,environ_buf){var bufSize=0;_getEnvStrings().forEach(function(string,i){var ptr=environ_buf+bufSize;HEAPU32[__environ+i*4>>2]=ptr;stringToAscii(string,ptr);bufSize+=string.length+1;});return 0;};_environ_sizes_get=function _environ_sizes_get(penviron_count,penviron_buf_size){var strings=_getEnvStrings();HEAPU32[penviron_count>>2]=strings.length;var bufSize=0;strings.forEach(function(string){return bufSize+=string.length+1;});HEAPU32[penviron_buf_size>>2]=bufSize;return 0;};_fd_close=function _fd_close(fd){return 52;};INT53_MAX=9007199254740992;INT53_MIN=-9007199254740992;bigintToI53Checked=function bigintToI53Checked(num){return num<INT53_MIN||num>INT53_MAX?NaN:Number(num);};printCharBuffers=[null,[],[]];UTF8Decoder=typeof TextDecoder!="undefined"?new TextDecoder():undefined;UTF8ArrayToString=function UTF8ArrayToString(heapOrArray){var idx=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var maxBytesToRead=arguments.length>2&&arguments[2]!==undefined?arguments[2]:NaN;var endIdx=idx+maxBytesToRead;var endPtr=idx;while(heapOrArray[endPtr]&&!(endPtr>=endIdx))++endPtr;if(endPtr-idx>16&&heapOrArray.buffer&&UTF8Decoder){return UTF8Decoder.decode(heapOrArray.subarray(idx,endPtr));}var str="";while(idx<endPtr){var u0=heapOrArray[idx++];if(!(u0&128)){str+=String.fromCharCode(u0);continue;}var u1=heapOrArray[idx++]&63;if((u0&224)==192){str+=String.fromCharCode((u0&31)<<6|u1);continue;}var u2=heapOrArray[idx++]&63;if((u0&240)==224){u0=(u0&15)<<12|u1<<6|u2;}else{u0=(u0&7)<<18|u1<<12|u2<<6|heapOrArray[idx++]&63;}if(u0<65536){str+=String.fromCharCode(u0);}else{var ch=u0-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023);}}return str;};printChar=function printChar(stream,curr){var buffer=printCharBuffers[stream];if(curr===0||curr===10){(stream===1?out:err)(UTF8ArrayToString(buffer));buffer.length=0;}else{buffer.push(curr);}};UTF8ToString=function UTF8ToString(ptr,maxBytesToRead){return ptr?UTF8ArrayToString(HEAPU8,ptr,maxBytesToRead):"";};_fd_write=function _fd_write(fd,iov,iovcnt,pnum){var num=0;for(var i=0;i<iovcnt;i++){var ptr=HEAPU32[iov>>2];var len=HEAPU32[iov+4>>2];iov+=8;for(var j=0;j<len;j++){printChar(fd,HEAPU8[ptr+j]);}num+=len;}HEAPU32[pnum>>2]=num;return 0;};wasmImports={l:__abort_js,k:__emscripten_runtime_keepalive_clear,m:__setitimer_js,g:_copy_pixels_1,f:_copy_pixels_3,e:_copy_pixels_4,n:_emscripten_resize_heap,p:_environ_get,q:_environ_sizes_get,b:_fd_close,o:_fd_seek,c:_fd_write,r:_gray_to_rgba,i:_graya_to_rgba,d:_jsPrintWarning,j:_proc_exit,h:_rgb_to_rgba,a:_storeErrorMessage};_context18.next=94;return createWasm();case 94:wasmExports=_context18.sent;___wasm_call_ctors=wasmExports["t"];_malloc=Module["_malloc"]=wasmExports["u"];_free=Module["_free"]=wasmExports["v"];_jp2_decode=Module["_jp2_decode"]=wasmExports["x"];__emscripten_timeout=wasmExports["y"];if(Module["preInit"]){if(typeof Module["preInit"]=="function")Module["preInit"]=[Module["preInit"]];while(Module["preInit"].length>0){Module["preInit"].pop()();}}run();moduleRtn=readyPromise;return _context18.abrupt("return",moduleRtn);case 104:case"end":return _context18.stop();}},_callee14);}));}();/* harmony default export */var openjpeg=OpenJPEG;;// ./src/core/jpx.js\nvar JpxError=/*#__PURE__*/function(_BaseException14){function JpxError(msg){_classCallCheck(this,JpxError);return _callSuper(this,JpxError,[msg,"JpxError"]);}_inherits(JpxError,_BaseException14);return _createClass(JpxError);}(BaseException);var JpxImage=/*#__PURE__*/function(){function JpxImage(){_classCallCheck(this,JpxImage);}return _createClass(JpxImage,null,[{key:"setOptions",value:function setOptions(_ref15){var handler=_ref15.handler,useWasm=_ref15.useWasm,useWorkerFetch=_ref15.useWorkerFetch,wasmUrl=_ref15.wasmUrl,wasmAbsoluteUrl=_ref15.wasmAbsoluteUrl,wasmFallback=_ref15.wasmFallback;_useWasm._=_assertClassBrand(JpxImage,this,useWasm);_useWorkerFetch._=_assertClassBrand(JpxImage,this,useWorkerFetch);_wasmUrl._=_assertClassBrand(JpxImage,this,wasmUrl);_wasmAbsoluteUrl._=_assertClassBrand(JpxImage,this,wasmAbsoluteUrl);_wasmFallback._=_assertClassBrand(JpxImage,this,wasmFallback);if(!useWorkerFetch){_handler._=_assertClassBrand(JpxImage,this,handler);}}},{key:"decode",value:function(){var _decode=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee15(bytes){var _ref16,_ref16$numComponents,numComponents,_ref16$isIndexedColor,isIndexedColormap,_ref16$smaskInData,smaskInData,_Promise$withResolver,promise,resolve,promises,module,ptr,size,ret,errorMessages,imageData,_args19=arguments;return _regeneratorRuntime().wrap(function _callee15$(_context19){while(1)switch(_context19.prev=_context19.next){case 0:_ref16=_args19.length>1&&_args19[1]!==undefined?_args19[1]:{},_ref16$numComponents=_ref16.numComponents,numComponents=_ref16$numComponents===void 0?4:_ref16$numComponents,_ref16$isIndexedColor=_ref16.isIndexedColormap,isIndexedColormap=_ref16$isIndexedColor===void 0?false:_ref16$isIndexedColor,_ref16$smaskInData=_ref16.smaskInData,smaskInData=_ref16$smaskInData===void 0?false:_ref16$smaskInData;if(!_assertClassBrand(JpxImage,this,_modulePromise)._){_Promise$withResolver=Promise.withResolvers(),promise=_Promise$withResolver.promise,resolve=_Promise$withResolver.resolve;promises=[promise];if(!_assertClassBrand(JpxImage,this,_useWasm)._){_assertClassBrand(JpxImage,this,_getJsModule).call(this,resolve);}else{promises.push(openjpeg({warn:warn,instantiateWasm:_assertClassBrand(JpxImage,this,_instantiateWasm).bind(this,resolve)}));}_modulePromise._=_assertClassBrand(JpxImage,this,Promise.race(promises));}_context19.next=4;return _assertClassBrand(JpxImage,this,_modulePromise)._;case 4:module=_context19.sent;if(module){_context19.next=7;break;}throw new JpxError("OpenJPEG failed to initialize");case 7:_context19.prev=7;size=bytes.length;ptr=module._malloc(size);module.HEAPU8.set(bytes,ptr);ret=module._jp2_decode(ptr,size,numComponents>0?numComponents:0,!!isIndexedColormap,!!smaskInData);if(!ret){_context19.next=18;break;}errorMessages=module.errorMessages;if(!errorMessages){_context19.next=17;break;}delete module.errorMessages;throw new JpxError(errorMessages);case 17:throw new JpxError("Unknown error");case 18:imageData=module.imageData;module.imageData=null;return _context19.abrupt("return",imageData);case 21:_context19.prev=21;if(ptr){module._free(ptr);}return _context19.finish(21);case 24:case"end":return _context19.stop();}},_callee15,this,[[7,,21,24]]);}));function decode(_x17){return _decode.apply(this,arguments);}return decode;}()},{key:"cleanup",value:function cleanup(){_modulePromise._=_assertClassBrand(JpxImage,this,null);}},{key:"parseImageProperties",value:function parseImageProperties(stream){var newByte=stream.getByte();while(newByte>=0){var oldByte=newByte;newByte=stream.getByte();var code=oldByte<<8|newByte;if(code===0xff51){stream.skip(4);var Xsiz=stream.getInt32()>>>0;var Ysiz=stream.getInt32()>>>0;var XOsiz=stream.getInt32()>>>0;var YOsiz=stream.getInt32()>>>0;stream.skip(16);var Csiz=stream.getUint16();return{width:Xsiz-XOsiz,height:Ysiz-YOsiz,bitsPerComponent:8,componentsCount:Csiz};}}throw new JpxError("No size marker found in JPX stream");}}]);}();_JpxImage=JpxImage;function _getJsModule(_x239){return _getJsModule3.apply(this,arguments);}function _getJsModule3(){_getJsModule3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee123(fallbackCallback){var path,instance,mod;return _regeneratorRuntime().wrap(function _callee123$(_context142){while(1)switch(_context142.prev=_context142.next){case 0:path="".concat(_assertClassBrand(_JpxImage,this,_wasmUrl)._,"openjpeg_nowasm_fallback.js");instance=null;_context142.prev=2;_context142.next=5;return function(specifier){return new Promise(function(r){return r("".concat(specifier));}).then(function(s){return _interopRequireWildcard(__webpack_require__(58029)(s));});}(/*webpackIgnore: true*/path);case 5:mod=_context142.sent;instance=mod["default"]();_context142.next=13;break;case 9:_context142.prev=9;_context142.t0=_context142["catch"](2);warn("JpxImage#getJsModule: ".concat(_context142.t0));if(_assertClassBrand(_JpxImage,this,_wasmFallback)._){instance=_assertClassBrand(_JpxImage,this,_wasmFallback)._;}case 13:fallbackCallback(instance);case 14:case"end":return _context142.stop();}},_callee123,this,[[2,9]]);}));return _getJsModule3.apply(this,arguments);}function _instantiateWasm(_x240,_x241,_x242){return _instantiateWasm3.apply(this,arguments);}function _instantiateWasm3(){_instantiateWasm3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee124(fallbackCallback,imports,successCallback){var filename,results;return _regeneratorRuntime().wrap(function _callee124$(_context143){while(1)switch(_context143.prev=_context143.next){case 0:filename="openjpeg.wasm";_context143.prev=1;if(_assertClassBrand(_JpxImage,this,_buffer)._){_context143.next=20;break;}if(!_assertClassBrand(_JpxImage,this,_useWorkerFetch)._){_context143.next=13;break;}_context143.t0=_assertClassBrand;_context143.t1=_JpxImage;_context143.t2=this;_context143.next=9;return fetchBinaryData("".concat(_assertClassBrand(_JpxImage,this,_wasmUrl)._).concat(filename));case 9:_context143.t3=_context143.sent;_buffer._=(0,_context143.t0)(_context143.t1,_context143.t2,_context143.t3);_context143.next=20;break;case 13:_context143.t4=_assertClassBrand;_context143.t5=_JpxImage;_context143.t6=this;_context143.next=18;return _assertClassBrand(_JpxImage,this,_handler)._.sendWithPromise("FetchBinaryData",{type:"wasmFactory",filename:filename});case 18:_context143.t7=_context143.sent;_buffer._=(0,_context143.t4)(_context143.t5,_context143.t6,_context143.t7);case 20:_context143.next=22;return WebAssembly.instantiate(_assertClassBrand(_JpxImage,this,_buffer)._,imports);case 22:results=_context143.sent;return _context143.abrupt("return",successCallback(results.instance));case 26:_context143.prev=26;_context143.t8=_context143["catch"](1);warn("JpxImage#instantiateWasm: ".concat(_context143.t8));_assertClassBrand(_JpxImage,this,_getJsModule).call(this,fallbackCallback);return _context143.abrupt("return",null);case 31:_context143.prev=31;_handler._=_assertClassBrand(_JpxImage,this,null);return _context143.finish(31);case 34:case"end":return _context143.stop();}},_callee124,this,[[1,26,31,34]]);}));return _instantiateWasm3.apply(this,arguments);}var _buffer={_:null};var _handler={_:null};var _modulePromise={_:null};var _useWasm={_:true};var _useWorkerFetch={_:true};var _wasmUrl={_:null};var _wasmAbsoluteUrl={_:null};var _wasmFallback={_:null};;// ./src/core/colorspace.js\nfunction resizeRgbImage(src,dest,w1,h1,w2,h2,alpha01){var COMPONENTS=3;alpha01=alpha01!==1?0:alpha01;var xRatio=w1/w2;var yRatio=h1/h2;var newIndex=0,oldIndex;var xScaled=new Uint16Array(w2);var w1Scanline=w1*COMPONENTS;for(var i=0;i<w2;i++){xScaled[i]=Math.floor(i*xRatio)*COMPONENTS;}for(var _i7=0;_i7<h2;_i7++){var py=Math.floor(_i7*yRatio)*w1Scanline;for(var j=0;j<w2;j++){oldIndex=py+xScaled[j];dest[newIndex++]=src[oldIndex++];dest[newIndex++]=src[oldIndex++];dest[newIndex++]=src[oldIndex++];newIndex+=alpha01;}}}function resizeRgbaImage(src,dest,w1,h1,w2,h2,alpha01){var xRatio=w1/w2;var yRatio=h1/h2;var newIndex=0;var xScaled=new Uint16Array(w2);if(alpha01===1){for(var i=0;i<w2;i++){xScaled[i]=Math.floor(i*xRatio);}var src32=new Uint32Array(src.buffer);var dest32=new Uint32Array(dest.buffer);var rgbMask=FeatureTest.isLittleEndian?0x00ffffff:0xffffff00;for(var _i8=0;_i8<h2;_i8++){var buf=src32.subarray(Math.floor(_i8*yRatio)*w1);for(var j=0;j<w2;j++){dest32[newIndex++]|=buf[xScaled[j]]&rgbMask;}}}else{var COMPONENTS=4;var w1Scanline=w1*COMPONENTS;for(var _i9=0;_i9<w2;_i9++){xScaled[_i9]=Math.floor(_i9*xRatio)*COMPONENTS;}for(var _i10=0;_i10<h2;_i10++){var _buf=src.subarray(Math.floor(_i10*yRatio)*w1Scanline);for(var _j2=0;_j2<w2;_j2++){var oldIndex=xScaled[_j2];dest[newIndex++]=_buf[oldIndex];dest[newIndex++]=_buf[oldIndex+1];dest[newIndex++]=_buf[oldIndex+2];}}}}function copyRgbaImage(src,dest,alpha01){if(alpha01===1){var src32=new Uint32Array(src.buffer);var dest32=new Uint32Array(dest.buffer);var rgbMask=FeatureTest.isLittleEndian?0x00ffffff:0xffffff00;for(var i=0,ii=src32.length;i<ii;i++){dest32[i]|=src32[i]&rgbMask;}}else{var j=0;for(var _i11=0,_ii4=src.length;_i11<_ii4;_i11+=4){dest[j++]=src[_i11];dest[j++]=src[_i11+1];dest[j++]=src[_i11+2];}}}var ColorSpace=/*#__PURE__*/function(){function ColorSpace(name,numComps){_classCallCheck(this,ColorSpace);this.name=name;this.numComps=numComps;}return _createClass(ColorSpace,[{key:"getRgb",value:function getRgb(src,srcOffset){var rgb=new Uint8ClampedArray(3);this.getRgbItem(src,srcOffset,rgb,0);return rgb;}},{key:"getRgbItem",value:function getRgbItem(src,srcOffset,dest,destOffset){unreachable("Should not call ColorSpace.getRgbItem");}},{key:"getRgbBuffer",value:function getRgbBuffer(src,srcOffset,count,dest,destOffset,bits,alpha01){unreachable("Should not call ColorSpace.getRgbBuffer");}},{key:"getOutputLength",value:function getOutputLength(inputLength,alpha01){unreachable("Should not call ColorSpace.getOutputLength");}},{key:"isPassthrough",value:function isPassthrough(bits){return false;}},{key:"isDefaultDecode",value:function isDefaultDecode(decodeMap,bpc){return ColorSpace.isDefaultDecode(decodeMap,this.numComps);}},{key:"fillRgb",value:function fillRgb(dest,originalWidth,originalHeight,width,height,actualHeight,bpc,comps,alpha01){var count=originalWidth*originalHeight;var rgbBuf=null;var numComponentColors=1<<bpc;var needsResizing=originalHeight!==height||originalWidth!==width;if(this.isPassthrough(bpc)){rgbBuf=comps;}else if(this.numComps===1&&count>numComponentColors&&this.name!=="DeviceGray"&&this.name!=="DeviceRGB"){var allColors=bpc<=8?new Uint8Array(numComponentColors):new Uint16Array(numComponentColors);for(var i=0;i<numComponentColors;i++){allColors[i]=i;}var colorMap=new Uint8ClampedArray(numComponentColors*3);this.getRgbBuffer(allColors,0,numComponentColors,colorMap,0,bpc,0);if(!needsResizing){var destPos=0;for(var _i12=0;_i12<count;++_i12){var key=comps[_i12]*3;dest[destPos++]=colorMap[key];dest[destPos++]=colorMap[key+1];dest[destPos++]=colorMap[key+2];destPos+=alpha01;}}else{rgbBuf=new Uint8Array(count*3);var rgbPos=0;for(var _i13=0;_i13<count;++_i13){var _key3=comps[_i13]*3;rgbBuf[rgbPos++]=colorMap[_key3];rgbBuf[rgbPos++]=colorMap[_key3+1];rgbBuf[rgbPos++]=colorMap[_key3+2];}}}else if(!needsResizing){this.getRgbBuffer(comps,0,width*actualHeight,dest,0,bpc,alpha01);}else{rgbBuf=new Uint8ClampedArray(count*3);this.getRgbBuffer(comps,0,count,rgbBuf,0,bpc,0);}if(rgbBuf){if(needsResizing){resizeRgbImage(rgbBuf,dest,originalWidth,originalHeight,width,height,alpha01);}else{var _destPos=0,_rgbPos=0;for(var _i14=0,ii=width*actualHeight;_i14<ii;_i14++){dest[_destPos++]=rgbBuf[_rgbPos++];dest[_destPos++]=rgbBuf[_rgbPos++];dest[_destPos++]=rgbBuf[_rgbPos++];_destPos+=alpha01;}}}}},{key:"usesZeroToOneRange",get:function get(){return shadow(this,"usesZeroToOneRange",true);}}],[{key:"_cache",value:function _cache(cacheKey,xref,localColorSpaceCache,parsedColorSpace){if(!localColorSpaceCache){throw new Error(\'ColorSpace._cache - expected "localColorSpaceCache" argument.\');}if(!parsedColorSpace){throw new Error(\'ColorSpace._cache - expected "parsedColorSpace" argument.\');}var csName,csRef;if(cacheKey instanceof Ref){csRef=cacheKey;cacheKey=xref.fetch(cacheKey);}if(cacheKey instanceof Name){csName=cacheKey.name;}if(csName||csRef){localColorSpaceCache.set(csName,csRef,parsedColorSpace);}}},{key:"getCached",value:function getCached(cacheKey,xref,localColorSpaceCache){if(!localColorSpaceCache){throw new Error(\'ColorSpace.getCached - expected "localColorSpaceCache" argument.\');}if(cacheKey instanceof Ref){var localColorSpace=localColorSpaceCache.getByRef(cacheKey);if(localColorSpace){return localColorSpace;}try{cacheKey=xref.fetch(cacheKey);}catch(ex){if(ex instanceof MissingDataException){throw ex;}}}if(cacheKey instanceof Name){var _localColorSpace=localColorSpaceCache.getByName(cacheKey.name);if(_localColorSpace){return _localColorSpace;}}return null;}},{key:"parseAsync",value:function(){var _parseAsync=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee16(_ref17){var cs,xref,_ref17$resources,resources,pdfFunctionFactory,localColorSpaceCache,parsedColorSpace;return _regeneratorRuntime().wrap(function _callee16$(_context20){while(1)switch(_context20.prev=_context20.next){case 0:cs=_ref17.cs,xref=_ref17.xref,_ref17$resources=_ref17.resources,resources=_ref17$resources===void 0?null:_ref17$resources,pdfFunctionFactory=_ref17.pdfFunctionFactory,localColorSpaceCache=_ref17.localColorSpaceCache;parsedColorSpace=this._parse(cs,xref,resources,pdfFunctionFactory);this._cache(cs,xref,localColorSpaceCache,parsedColorSpace);return _context20.abrupt("return",parsedColorSpace);case 4:case"end":return _context20.stop();}},_callee16,this);}));function parseAsync(_x18){return _parseAsync.apply(this,arguments);}return parseAsync;}()},{key:"parse",value:function parse(_ref18){var cs=_ref18.cs,xref=_ref18.xref,_ref18$resources=_ref18.resources,resources=_ref18$resources===void 0?null:_ref18$resources,pdfFunctionFactory=_ref18.pdfFunctionFactory,localColorSpaceCache=_ref18.localColorSpaceCache;var cachedColorSpace=this.getCached(cs,xref,localColorSpaceCache);if(cachedColorSpace){return cachedColorSpace;}var parsedColorSpace=this._parse(cs,xref,resources,pdfFunctionFactory);this._cache(cs,xref,localColorSpaceCache,parsedColorSpace);return parsedColorSpace;}},{key:"_parse",value:function _parse(cs,xref){var resources=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var pdfFunctionFactory=arguments.length>3?arguments[3]:undefined;cs=xref.fetchIfRef(cs);if(cs instanceof Name){switch(cs.name){case"G":case"DeviceGray":return this.singletons.gray;case"RGB":case"DeviceRGB":return this.singletons.rgb;case"DeviceRGBA":return this.singletons.rgba;case"CMYK":case"DeviceCMYK":return this.singletons.cmyk;case"Pattern":return new PatternCS(null);default:if(resources instanceof Dict){var colorSpaces=resources.get("ColorSpace");if(colorSpaces instanceof Dict){var resourcesCS=colorSpaces.get(cs.name);if(resourcesCS){if(resourcesCS instanceof Name){return this._parse(resourcesCS,xref,resources,pdfFunctionFactory);}cs=resourcesCS;break;}}}warn("Unrecognized ColorSpace: ".concat(cs.name));return this.singletons.gray;}}if(Array.isArray(cs)){var mode=xref.fetchIfRef(cs[0]).name;var params,numComps,baseCS,whitePoint,blackPoint,gamma;switch(mode){case"G":case"DeviceGray":return this.singletons.gray;case"RGB":case"DeviceRGB":return this.singletons.rgb;case"CMYK":case"DeviceCMYK":return this.singletons.cmyk;case"CalGray":params=xref.fetchIfRef(cs[1]);whitePoint=params.getArray("WhitePoint");blackPoint=params.getArray("BlackPoint");gamma=params.get("Gamma");return new CalGrayCS(whitePoint,blackPoint,gamma);case"CalRGB":params=xref.fetchIfRef(cs[1]);whitePoint=params.getArray("WhitePoint");blackPoint=params.getArray("BlackPoint");gamma=params.getArray("Gamma");var matrix=params.getArray("Matrix");return new CalRGBCS(whitePoint,blackPoint,gamma,matrix);case"ICCBased":var stream=xref.fetchIfRef(cs[1]);var dict=stream.dict;numComps=dict.get("N");var alt=dict.get("Alternate");if(alt){var altCS=this._parse(alt,xref,resources,pdfFunctionFactory);if(altCS.numComps===numComps){return altCS;}warn("ICCBased color space: Ignoring incorrect /Alternate entry.");}if(numComps===1){return this.singletons.gray;}else if(numComps===3){return this.singletons.rgb;}else if(numComps===4){return this.singletons.cmyk;}break;case"Pattern":baseCS=cs[1]||null;if(baseCS){baseCS=this._parse(baseCS,xref,resources,pdfFunctionFactory);}return new PatternCS(baseCS);case"I":case"Indexed":baseCS=this._parse(cs[1],xref,resources,pdfFunctionFactory);var hiVal=Math.max(0,Math.min(xref.fetchIfRef(cs[2]),255));var lookup=xref.fetchIfRef(cs[3]);return new IndexedCS(baseCS,hiVal,lookup);case"Separation":case"DeviceN":var name=xref.fetchIfRef(cs[1]);numComps=Array.isArray(name)?name.length:1;baseCS=this._parse(cs[2],xref,resources,pdfFunctionFactory);var tintFn=pdfFunctionFactory.create(cs[3]);return new AlternateCS(numComps,baseCS,tintFn);case"Lab":params=xref.fetchIfRef(cs[1]);whitePoint=params.getArray("WhitePoint");blackPoint=params.getArray("BlackPoint");var range=params.getArray("Range");return new LabCS(whitePoint,blackPoint,range);default:warn("Unimplemented ColorSpace object: ".concat(mode));return this.singletons.gray;}}warn("Unrecognized ColorSpace object: ".concat(cs));return this.singletons.gray;}},{key:"isDefaultDecode",value:function isDefaultDecode(decode,numComps){if(!Array.isArray(decode)){return true;}if(numComps*2!==decode.length){warn("The decode map is not the correct length");return true;}for(var i=0,ii=decode.length;i<ii;i+=2){if(decode[i]!==0||decode[i+1]!==1){return false;}}return true;}},{key:"singletons",get:function get(){return shadow(this,"singletons",{get gray(){return shadow(this,"gray",new DeviceGrayCS());},get rgb(){return shadow(this,"rgb",new DeviceRgbCS());},get rgba(){return shadow(this,"rgba",new DeviceRgbaCS());},get cmyk(){return shadow(this,"cmyk",new DeviceCmykCS());}});}}]);}();var AlternateCS=/*#__PURE__*/function(_ColorSpace){function AlternateCS(numComps,base,tintFn){var _this14;_classCallCheck(this,AlternateCS);_this14=_callSuper(this,AlternateCS,["Alternate",numComps]);_this14.base=base;_this14.tintFn=tintFn;_this14.tmpBuf=new Float32Array(base.numComps);return _this14;}_inherits(AlternateCS,_ColorSpace);return _createClass(AlternateCS,[{key:"getRgbItem",value:function getRgbItem(src,srcOffset,dest,destOffset){var tmpBuf=this.tmpBuf;this.tintFn(src,srcOffset,tmpBuf,0);this.base.getRgbItem(tmpBuf,0,dest,destOffset);}},{key:"getRgbBuffer",value:function getRgbBuffer(src,srcOffset,count,dest,destOffset,bits,alpha01){var tintFn=this.tintFn;var base=this.base;var scale=1/((1<<bits)-1);var baseNumComps=base.numComps;var usesZeroToOneRange=base.usesZeroToOneRange;var isPassthrough=(base.isPassthrough(8)||!usesZeroToOneRange)&&alpha01===0;var pos=isPassthrough?destOffset:0;var baseBuf=isPassthrough?dest:new Uint8ClampedArray(baseNumComps*count);var numComps=this.numComps;var scaled=new Float32Array(numComps);var tinted=new Float32Array(baseNumComps);var i,j;for(i=0;i<count;i++){for(j=0;j<numComps;j++){scaled[j]=src[srcOffset++]*scale;}tintFn(scaled,0,tinted,0);if(usesZeroToOneRange){for(j=0;j<baseNumComps;j++){baseBuf[pos++]=tinted[j]*255;}}else{base.getRgbItem(tinted,0,baseBuf,pos);pos+=baseNumComps;}}if(!isPassthrough){base.getRgbBuffer(baseBuf,0,count,dest,destOffset,8,alpha01);}}},{key:"getOutputLength",value:function getOutputLength(inputLength,alpha01){return this.base.getOutputLength(inputLength*this.base.numComps/this.numComps,alpha01);}}]);}(ColorSpace);var PatternCS=/*#__PURE__*/function(_ColorSpace2){function PatternCS(baseCS){var _this15;_classCallCheck(this,PatternCS);_this15=_callSuper(this,PatternCS,["Pattern",null]);_this15.base=baseCS;return _this15;}_inherits(PatternCS,_ColorSpace2);return _createClass(PatternCS,[{key:"isDefaultDecode",value:function isDefaultDecode(decodeMap,bpc){unreachable("Should not call PatternCS.isDefaultDecode");}}]);}(ColorSpace);var IndexedCS=/*#__PURE__*/function(_ColorSpace3){function IndexedCS(base,highVal,lookup){var _this16;_classCallCheck(this,IndexedCS);_this16=_callSuper(this,IndexedCS,["Indexed",1]);_this16.base=base;var length=base.numComps*(highVal+1);_this16.lookup=new Uint8Array(length);if(lookup instanceof BaseStream){var bytes=lookup.getBytes(length);_this16.lookup.set(bytes);}else if(typeof lookup==="string"){for(var i=0;i<length;++i){_this16.lookup[i]=lookup.charCodeAt(i)&0xff;}}else{throw new FormatError("IndexedCS - unrecognized lookup table: ".concat(lookup));}return _this16;}_inherits(IndexedCS,_ColorSpace3);return _createClass(IndexedCS,[{key:"getRgbItem",value:function getRgbItem(src,srcOffset,dest,destOffset){var numComps=this.base.numComps;var start=src[srcOffset]*numComps;this.base.getRgbBuffer(this.lookup,start,1,dest,destOffset,8,0);}},{key:"getRgbBuffer",value:function getRgbBuffer(src,srcOffset,count,dest,destOffset,bits,alpha01){var base=this.base;var numComps=base.numComps;var outputDelta=base.getOutputLength(numComps,alpha01);var lookup=this.lookup;for(var i=0;i<count;++i){var lookupPos=src[srcOffset++]*numComps;base.getRgbBuffer(lookup,lookupPos,1,dest,destOffset,8,alpha01);destOffset+=outputDelta;}}},{key:"getOutputLength",value:function getOutputLength(inputLength,alpha01){return this.base.getOutputLength(inputLength*this.base.numComps,alpha01);}},{key:"isDefaultDecode",value:function isDefaultDecode(decodeMap,bpc){if(!Array.isArray(decodeMap)){return true;}if(decodeMap.length!==2){warn("Decode map length is not correct");return true;}if(!Number.isInteger(bpc)||bpc<1){warn("Bits per component is not correct");return true;}return decodeMap[0]===0&&decodeMap[1]===(1<<bpc)-1;}}]);}(ColorSpace);var DeviceGrayCS=/*#__PURE__*/function(_ColorSpace4){function DeviceGrayCS(){_classCallCheck(this,DeviceGrayCS);return _callSuper(this,DeviceGrayCS,["DeviceGray",1]);}_inherits(DeviceGrayCS,_ColorSpace4);return _createClass(DeviceGrayCS,[{key:"getRgbItem",value:function getRgbItem(src,srcOffset,dest,destOffset){var c=src[srcOffset]*255;dest[destOffset]=dest[destOffset+1]=dest[destOffset+2]=c;}},{key:"getRgbBuffer",value:function getRgbBuffer(src,srcOffset,count,dest,destOffset,bits,alpha01){var scale=255/((1<<bits)-1);var j=srcOffset,q=destOffset;for(var i=0;i<count;++i){var c=scale*src[j++];dest[q++]=c;dest[q++]=c;dest[q++]=c;q+=alpha01;}}},{key:"getOutputLength",value:function getOutputLength(inputLength,alpha01){return inputLength*(3+alpha01);}}]);}(ColorSpace);var DeviceRgbCS=/*#__PURE__*/function(_ColorSpace5){function DeviceRgbCS(){_classCallCheck(this,DeviceRgbCS);return _callSuper(this,DeviceRgbCS,["DeviceRGB",3]);}_inherits(DeviceRgbCS,_ColorSpace5);return _createClass(DeviceRgbCS,[{key:"getRgbItem",value:function getRgbItem(src,srcOffset,dest,destOffset){dest[destOffset]=src[srcOffset]*255;dest[destOffset+1]=src[srcOffset+1]*255;dest[destOffset+2]=src[srcOffset+2]*255;}},{key:"getRgbBuffer",value:function getRgbBuffer(src,srcOffset,count,dest,destOffset,bits,alpha01){if(bits===8&&alpha01===0){dest.set(src.subarray(srcOffset,srcOffset+count*3),destOffset);return;}var scale=255/((1<<bits)-1);var j=srcOffset,q=destOffset;for(var i=0;i<count;++i){dest[q++]=scale*src[j++];dest[q++]=scale*src[j++];dest[q++]=scale*src[j++];q+=alpha01;}}},{key:"getOutputLength",value:function getOutputLength(inputLength,alpha01){return inputLength*(3+alpha01)/3|0;}},{key:"isPassthrough",value:function isPassthrough(bits){return bits===8;}}]);}(ColorSpace);var DeviceRgbaCS=/*#__PURE__*/function(_ColorSpace6){function DeviceRgbaCS(){_classCallCheck(this,DeviceRgbaCS);return _callSuper(this,DeviceRgbaCS,["DeviceRGBA",4]);}_inherits(DeviceRgbaCS,_ColorSpace6);return _createClass(DeviceRgbaCS,[{key:"getOutputLength",value:function getOutputLength(inputLength,_alpha01){return inputLength*4;}},{key:"isPassthrough",value:function isPassthrough(bits){return bits===8;}},{key:"fillRgb",value:function fillRgb(dest,originalWidth,originalHeight,width,height,actualHeight,bpc,comps,alpha01){if(originalHeight!==height||originalWidth!==width){resizeRgbaImage(comps,dest,originalWidth,originalHeight,width,height,alpha01);}else{copyRgbaImage(comps,dest,alpha01);}}}]);}(ColorSpace);var _DeviceCmykCS_brand=/*#__PURE__*/new WeakSet();var DeviceCmykCS=/*#__PURE__*/function(_ColorSpace7){function DeviceCmykCS(){var _this17;_classCallCheck(this,DeviceCmykCS);_this17=_callSuper(this,DeviceCmykCS,["DeviceCMYK",4]);_classPrivateMethodInitSpec(_this17,_DeviceCmykCS_brand);return _this17;}_inherits(DeviceCmykCS,_ColorSpace7);return _createClass(DeviceCmykCS,[{key:"getRgbItem",value:function getRgbItem(src,srcOffset,dest,destOffset){_assertClassBrand(_DeviceCmykCS_brand,this,_toRgb).call(this,src,srcOffset,1,dest,destOffset);}},{key:"getRgbBuffer",value:function getRgbBuffer(src,srcOffset,count,dest,destOffset,bits,alpha01){var scale=1/((1<<bits)-1);for(var i=0;i<count;i++){_assertClassBrand(_DeviceCmykCS_brand,this,_toRgb).call(this,src,srcOffset,scale,dest,destOffset);srcOffset+=4;destOffset+=3+alpha01;}}},{key:"getOutputLength",value:function getOutputLength(inputLength,alpha01){return inputLength/4*(3+alpha01)|0;}}]);}(ColorSpace);function _toRgb(src,srcOffset,srcScale,dest,destOffset){var c=src[srcOffset]*srcScale;var m=src[srcOffset+1]*srcScale;var y=src[srcOffset+2]*srcScale;var k=src[srcOffset+3]*srcScale;dest[destOffset]=255+c*(-4.387332384609988*c+54.48615194189176*m+18.82290502165302*y+212.25662451639585*k+-285.2331026137004)+m*(1.7149763477362134*m-5.6096736904047315*y+-17.873870861415444*k-5.497006427196366)+y*(-2.5217340131683033*y-21.248923337353073*k+17.5119270841813)+k*(-21.86122147463605*k-189.48180835922747);dest[destOffset+1]=255+c*(8.841041422036149*c+60.118027045597366*m+6.871425592049007*y+31.159100130055922*k+-79.2970844816548)+m*(-15.310361306967817*m+17.575251261109482*y+131.35250912493976*k-190.9453302588951)+y*(4.444339102852739*y+9.8632861493405*k-24.86741582555878)+k*(-20.737325471181034*k-187.80453709719578);dest[destOffset+2]=255+c*(0.8842522430003296*c+8.078677503112928*m+30.89978309703729*y-0.23883238689178934*k+-14.183576799673286)+m*(10.49593273432072*m+63.02378494754052*y+50.606957656360734*k-112.23884253719248)+y*(0.03296041114873217*y+115.60384449646641*k+-193.58209356861505)+k*(-22.33816807309886*k-180.12613974708367);}var _CalGrayCS_brand=/*#__PURE__*/new WeakSet();var CalGrayCS=/*#__PURE__*/function(_ColorSpace8){function CalGrayCS(whitePoint,blackPoint,gamma){var _this18;_classCallCheck(this,CalGrayCS);_this18=_callSuper(this,CalGrayCS,["CalGray",1]);_classPrivateMethodInitSpec(_this18,_CalGrayCS_brand);if(!whitePoint){throw new FormatError("WhitePoint missing - required for color space CalGray");}var _whitePoint=_slicedToArray(whitePoint,3);_this18.XW=_whitePoint[0];_this18.YW=_whitePoint[1];_this18.ZW=_whitePoint[2];var _ref19=blackPoint||[0,0,0];var _ref20=_slicedToArray(_ref19,3);_this18.XB=_ref20[0];_this18.YB=_ref20[1];_this18.ZB=_ref20[2];_this18.G=gamma||1;if(_this18.XW<0||_this18.ZW<0||_this18.YW!==1){throw new FormatError("Invalid WhitePoint components for ".concat(_this18.name,", no fallback available"));}if(_this18.XB<0||_this18.YB<0||_this18.ZB<0){info("Invalid BlackPoint for ".concat(_this18.name,", falling back to default."));_this18.XB=_this18.YB=_this18.ZB=0;}if(_this18.XB!==0||_this18.YB!==0||_this18.ZB!==0){warn("".concat(_this18.name,", BlackPoint: XB: ").concat(_this18.XB,", YB: ").concat(_this18.YB,", ")+"ZB: ".concat(_this18.ZB,", only default values are supported."));}if(_this18.G<1){info("Invalid Gamma: ".concat(_this18.G," for ").concat(_this18.name,", falling back to default."));_this18.G=1;}return _this18;}_inherits(CalGrayCS,_ColorSpace8);return _createClass(CalGrayCS,[{key:"getRgbItem",value:function getRgbItem(src,srcOffset,dest,destOffset){_assertClassBrand(_CalGrayCS_brand,this,_toRgb2).call(this,src,srcOffset,dest,destOffset,1);}},{key:"getRgbBuffer",value:function getRgbBuffer(src,srcOffset,count,dest,destOffset,bits,alpha01){var scale=1/((1<<bits)-1);for(var i=0;i<count;++i){_assertClassBrand(_CalGrayCS_brand,this,_toRgb2).call(this,src,srcOffset,dest,destOffset,scale);srcOffset+=1;destOffset+=3+alpha01;}}},{key:"getOutputLength",value:function getOutputLength(inputLength,alpha01){return inputLength*(3+alpha01);}}]);}(ColorSpace);function _toRgb2(src,srcOffset,dest,destOffset,scale){var A=src[srcOffset]*scale;var AG=Math.pow(A,this.G);var L=this.YW*AG;var val=Math.max(295.8*Math.pow(L,0.3333333333333333)-40.8,0);dest[destOffset]=val;dest[destOffset+1]=val;dest[destOffset+2]=val;}var _CalRGBCS_brand=/*#__PURE__*/new WeakSet();var CalRGBCS=/*#__PURE__*/function(_ColorSpace9){function CalRGBCS(whitePoint,blackPoint,gamma,matrix){var _this19;_classCallCheck(this,CalRGBCS);_this19=_callSuper(this,CalRGBCS,["CalRGB",3]);_classPrivateMethodInitSpec(_this19,_CalRGBCS_brand);if(!whitePoint){throw new FormatError("WhitePoint missing - required for color space CalRGB");}var _this19$whitePoint=_this19.whitePoint=whitePoint,_this19$whitePoint2=_slicedToArray(_this19$whitePoint,3),XW=_this19$whitePoint2[0],YW=_this19$whitePoint2[1],ZW=_this19$whitePoint2[2];var _this19$blackPoint=_this19.blackPoint=blackPoint||new Float32Array(3),_this19$blackPoint2=_slicedToArray(_this19$blackPoint,3),XB=_this19$blackPoint2[0],YB=_this19$blackPoint2[1],ZB=_this19$blackPoint2[2];var _ref21=gamma||new Float32Array([1,1,1]);var _ref22=_slicedToArray(_ref21,3);_this19.GR=_ref22[0];_this19.GG=_ref22[1];_this19.GB=_ref22[2];var _ref23=matrix||new Float32Array([1,0,0,0,1,0,0,0,1]);var _ref24=_slicedToArray(_ref23,9);_this19.MXA=_ref24[0];_this19.MYA=_ref24[1];_this19.MZA=_ref24[2];_this19.MXB=_ref24[3];_this19.MYB=_ref24[4];_this19.MZB=_ref24[5];_this19.MXC=_ref24[6];_this19.MYC=_ref24[7];_this19.MZC=_ref24[8];if(XW<0||ZW<0||YW!==1){throw new FormatError("Invalid WhitePoint components for ".concat(_this19.name,", no fallback available"));}if(XB<0||YB<0||ZB<0){info("Invalid BlackPoint for ".concat(_this19.name," [").concat(XB,", ").concat(YB,", ").concat(ZB,"], ")+"falling back to default.");_this19.blackPoint=new Float32Array(3);}if(_this19.GR<0||_this19.GG<0||_this19.GB<0){info("Invalid Gamma [".concat(_this19.GR,", ").concat(_this19.GG,", ").concat(_this19.GB,"] for ")+"".concat(_this19.name,", falling back to default."));_this19.GR=_this19.GG=_this19.GB=1;}return _this19;}_inherits(CalRGBCS,_ColorSpace9);return _createClass(CalRGBCS,[{key:"getRgbItem",value:function getRgbItem(src,srcOffset,dest,destOffset){_assertClassBrand(_CalRGBCS_brand,this,_toRgb3).call(this,src,srcOffset,dest,destOffset,1);}},{key:"getRgbBuffer",value:function getRgbBuffer(src,srcOffset,count,dest,destOffset,bits,alpha01){var scale=1/((1<<bits)-1);for(var i=0;i<count;++i){_assertClassBrand(_CalRGBCS_brand,this,_toRgb3).call(this,src,srcOffset,dest,destOffset,scale);srcOffset+=3;destOffset+=3+alpha01;}}},{key:"getOutputLength",value:function getOutputLength(inputLength,alpha01){return inputLength*(3+alpha01)/3|0;}}]);}(ColorSpace);function _matrixProduct(a,b,result){result[0]=a[0]*b[0]+a[1]*b[1]+a[2]*b[2];result[1]=a[3]*b[0]+a[4]*b[1]+a[5]*b[2];result[2]=a[6]*b[0]+a[7]*b[1]+a[8]*b[2];}function _toFlat(sourceWhitePoint,LMS,result){result[0]=LMS[0]*1/sourceWhitePoint[0];result[1]=LMS[1]*1/sourceWhitePoint[1];result[2]=LMS[2]*1/sourceWhitePoint[2];}function _toD(sourceWhitePoint,LMS,result){var D65X=0.95047;var D65Y=1;var D65Z=1.08883;result[0]=LMS[0]*D65X/sourceWhitePoint[0];result[1]=LMS[1]*D65Y/sourceWhitePoint[1];result[2]=LMS[2]*D65Z/sourceWhitePoint[2];}function _sRGBTransferFunction(color){if(color<=0.0031308){return _assertClassBrand(_CalRGBCS_brand,this,_adjustToRange).call(this,0,1,12.92*color);}if(color>=0.99554525){return 1;}return _assertClassBrand(_CalRGBCS_brand,this,_adjustToRange).call(this,0,1,(1+0.055)*Math.pow(color,1/2.4)-0.055);}function _adjustToRange(min,max,value){return Math.max(min,Math.min(max,value));}function _decodeL(L){if(L<0){return-_assertClassBrand(_CalRGBCS_brand,this,_decodeL).call(this,-L);}if(L>8.0){return Math.pow((L+16)/116,3);}return L*_DECODE_L_CONSTANT._;}function _compensateBlackPoint(sourceBlackPoint,XYZ_Flat,result){if(sourceBlackPoint[0]===0&&sourceBlackPoint[1]===0&&sourceBlackPoint[2]===0){result[0]=XYZ_Flat[0];result[1]=XYZ_Flat[1];result[2]=XYZ_Flat[2];return;}var zeroDecodeL=_assertClassBrand(_CalRGBCS_brand,this,_decodeL).call(this,0);var X_DST=zeroDecodeL;var X_SRC=_assertClassBrand(_CalRGBCS_brand,this,_decodeL).call(this,sourceBlackPoint[0]);var Y_DST=zeroDecodeL;var Y_SRC=_assertClassBrand(_CalRGBCS_brand,this,_decodeL).call(this,sourceBlackPoint[1]);var Z_DST=zeroDecodeL;var Z_SRC=_assertClassBrand(_CalRGBCS_brand,this,_decodeL).call(this,sourceBlackPoint[2]);var X_Scale=(1-X_DST)/(1-X_SRC);var X_Offset=1-X_Scale;var Y_Scale=(1-Y_DST)/(1-Y_SRC);var Y_Offset=1-Y_Scale;var Z_Scale=(1-Z_DST)/(1-Z_SRC);var Z_Offset=1-Z_Scale;result[0]=XYZ_Flat[0]*X_Scale+X_Offset;result[1]=XYZ_Flat[1]*Y_Scale+Y_Offset;result[2]=XYZ_Flat[2]*Z_Scale+Z_Offset;}function _normalizeWhitePointToFlat(sourceWhitePoint,XYZ_In,result){if(sourceWhitePoint[0]===1&&sourceWhitePoint[2]===1){result[0]=XYZ_In[0];result[1]=XYZ_In[1];result[2]=XYZ_In[2];return;}var LMS=result;_assertClassBrand(_CalRGBCS_brand,this,_matrixProduct).call(this,_BRADFORD_SCALE_MATRIX._,XYZ_In,LMS);var LMS_Flat=_tempNormalizeMatrix._;_assertClassBrand(_CalRGBCS_brand,this,_toFlat).call(this,sourceWhitePoint,LMS,LMS_Flat);_assertClassBrand(_CalRGBCS_brand,this,_matrixProduct).call(this,_BRADFORD_SCALE_INVERSE_MATRIX._,LMS_Flat,result);}function _normalizeWhitePointToD(sourceWhitePoint,XYZ_In,result){var LMS=result;_assertClassBrand(_CalRGBCS_brand,this,_matrixProduct).call(this,_BRADFORD_SCALE_MATRIX._,XYZ_In,LMS);var LMS_D65=_tempNormalizeMatrix._;_assertClassBrand(_CalRGBCS_brand,this,_toD).call(this,sourceWhitePoint,LMS,LMS_D65);_assertClassBrand(_CalRGBCS_brand,this,_matrixProduct).call(this,_BRADFORD_SCALE_INVERSE_MATRIX._,LMS_D65,result);}function _toRgb3(src,srcOffset,dest,destOffset,scale){var A=_assertClassBrand(_CalRGBCS_brand,this,_adjustToRange).call(this,0,1,src[srcOffset]*scale);var B=_assertClassBrand(_CalRGBCS_brand,this,_adjustToRange).call(this,0,1,src[srcOffset+1]*scale);var C=_assertClassBrand(_CalRGBCS_brand,this,_adjustToRange).call(this,0,1,src[srcOffset+2]*scale);var AGR=A===1?1:Math.pow(A,this.GR);var BGG=B===1?1:Math.pow(B,this.GG);var CGB=C===1?1:Math.pow(C,this.GB);var X=this.MXA*AGR+this.MXB*BGG+this.MXC*CGB;var Y=this.MYA*AGR+this.MYB*BGG+this.MYC*CGB;var Z=this.MZA*AGR+this.MZB*BGG+this.MZC*CGB;var XYZ=_tempConvertMatrix._;XYZ[0]=X;XYZ[1]=Y;XYZ[2]=Z;var XYZ_Flat=_tempConvertMatrix2._;_assertClassBrand(_CalRGBCS_brand,this,_normalizeWhitePointToFlat).call(this,this.whitePoint,XYZ,XYZ_Flat);var XYZ_Black=_tempConvertMatrix._;_assertClassBrand(_CalRGBCS_brand,this,_compensateBlackPoint).call(this,this.blackPoint,XYZ_Flat,XYZ_Black);var XYZ_D65=_tempConvertMatrix2._;_assertClassBrand(_CalRGBCS_brand,this,_normalizeWhitePointToD).call(this,_FLAT_WHITEPOINT_MATRIX._,XYZ_Black,XYZ_D65);var SRGB=_tempConvertMatrix._;_assertClassBrand(_CalRGBCS_brand,this,_matrixProduct).call(this,_SRGB_D65_XYZ_TO_RGB_MATRIX._,XYZ_D65,SRGB);dest[destOffset]=_assertClassBrand(_CalRGBCS_brand,this,_sRGBTransferFunction).call(this,SRGB[0])*255;dest[destOffset+1]=_assertClassBrand(_CalRGBCS_brand,this,_sRGBTransferFunction).call(this,SRGB[1])*255;dest[destOffset+2]=_assertClassBrand(_CalRGBCS_brand,this,_sRGBTransferFunction).call(this,SRGB[2])*255;}var _BRADFORD_SCALE_MATRIX={_:new Float32Array([0.8951,0.2664,-0.1614,-0.7502,1.7135,0.0367,0.0389,-0.0685,1.0296])};var _BRADFORD_SCALE_INVERSE_MATRIX={_:new Float32Array([0.9869929,-0.1470543,0.1599627,0.4323053,0.5183603,0.0492912,-0.0085287,0.0400428,0.9684867])};var _SRGB_D65_XYZ_TO_RGB_MATRIX={_:new Float32Array([3.2404542,-1.5371385,-0.4985314,-0.9692660,1.8760108,0.0415560,0.0556434,-0.2040259,1.0572252])};var _FLAT_WHITEPOINT_MATRIX={_:new Float32Array([1,1,1])};var _tempNormalizeMatrix={_:new Float32Array(3)};var _tempConvertMatrix={_:new Float32Array(3)};var _tempConvertMatrix2={_:new Float32Array(3)};var _DECODE_L_CONSTANT={_:Math.pow((8+16)/116,3)/8.0};var _LabCS_brand=/*#__PURE__*/new WeakSet();var LabCS=/*#__PURE__*/function(_ColorSpace10){function LabCS(whitePoint,blackPoint,range){var _this20;_classCallCheck(this,LabCS);_this20=_callSuper(this,LabCS,["Lab",3]);_classPrivateMethodInitSpec(_this20,_LabCS_brand);if(!whitePoint){throw new FormatError("WhitePoint missing - required for color space Lab");}var _whitePoint2=_slicedToArray(whitePoint,3);_this20.XW=_whitePoint2[0];_this20.YW=_whitePoint2[1];_this20.ZW=_whitePoint2[2];var _ref25=range||[-100,100,-100,100];var _ref26=_slicedToArray(_ref25,4);_this20.amin=_ref26[0];_this20.amax=_ref26[1];_this20.bmin=_ref26[2];_this20.bmax=_ref26[3];var _ref27=blackPoint||[0,0,0];var _ref28=_slicedToArray(_ref27,3);_this20.XB=_ref28[0];_this20.YB=_ref28[1];_this20.ZB=_ref28[2];if(_this20.XW<0||_this20.ZW<0||_this20.YW!==1){throw new FormatError("Invalid WhitePoint components, no fallback available");}if(_this20.XB<0||_this20.YB<0||_this20.ZB<0){info("Invalid BlackPoint, falling back to default");_this20.XB=_this20.YB=_this20.ZB=0;}if(_this20.amin>_this20.amax||_this20.bmin>_this20.bmax){info("Invalid Range, falling back to defaults");_this20.amin=-100;_this20.amax=100;_this20.bmin=-100;_this20.bmax=100;}return _this20;}_inherits(LabCS,_ColorSpace10);return _createClass(LabCS,[{key:"getRgbItem",value:function getRgbItem(src,srcOffset,dest,destOffset){_assertClassBrand(_LabCS_brand,this,_toRgb4).call(this,src,srcOffset,false,dest,destOffset);}},{key:"getRgbBuffer",value:function getRgbBuffer(src,srcOffset,count,dest,destOffset,bits,alpha01){var maxVal=(1<<bits)-1;for(var i=0;i<count;i++){_assertClassBrand(_LabCS_brand,this,_toRgb4).call(this,src,srcOffset,maxVal,dest,destOffset);srcOffset+=3;destOffset+=3+alpha01;}}},{key:"getOutputLength",value:function getOutputLength(inputLength,alpha01){return inputLength*(3+alpha01)/3|0;}},{key:"isDefaultDecode",value:function isDefaultDecode(decodeMap,bpc){return true;}},{key:"usesZeroToOneRange",get:function get(){return shadow(this,"usesZeroToOneRange",false);}}]);}(ColorSpace);function _fn_g(x){return x>=6/29?Math.pow(x,3):108/841*(x-4/29);}function _decode2(value,high1,low2,high2){return low2+value*(high2-low2)/high1;}function _toRgb4(src,srcOffset,maxVal,dest,destOffset){var Ls=src[srcOffset];var as=src[srcOffset+1];var bs=src[srcOffset+2];if(maxVal!==false){Ls=_assertClassBrand(_LabCS_brand,this,_decode2).call(this,Ls,maxVal,0,100);as=_assertClassBrand(_LabCS_brand,this,_decode2).call(this,as,maxVal,this.amin,this.amax);bs=_assertClassBrand(_LabCS_brand,this,_decode2).call(this,bs,maxVal,this.bmin,this.bmax);}if(as>this.amax){as=this.amax;}else if(as<this.amin){as=this.amin;}if(bs>this.bmax){bs=this.bmax;}else if(bs<this.bmin){bs=this.bmin;}var M=(Ls+16)/116;var L=M+as/500;var N=M-bs/200;var X=this.XW*_assertClassBrand(_LabCS_brand,this,_fn_g).call(this,L);var Y=this.YW*_assertClassBrand(_LabCS_brand,this,_fn_g).call(this,M);var Z=this.ZW*_assertClassBrand(_LabCS_brand,this,_fn_g).call(this,N);var r,g,b;if(this.ZW<1){r=X*3.1339+Y*-1.617+Z*-0.4906;g=X*-0.9785+Y*1.916+Z*0.0333;b=X*0.072+Y*-0.229+Z*1.4057;}else{r=X*3.2406+Y*-1.5372+Z*-0.4986;g=X*-0.9689+Y*1.8758+Z*0.0415;b=X*0.0557+Y*-0.204+Z*1.057;}dest[destOffset]=Math.sqrt(r)*255;dest[destOffset+1]=Math.sqrt(g)*255;dest[destOffset+2]=Math.sqrt(b)*255;};// ./src/core/binary_cmap.js\nfunction hexToInt(a,size){var n=0;for(var i=0;i<=size;i++){n=n<<8|a[i];}return n>>>0;}function hexToStr(a,size){if(size===1){return String.fromCharCode(a[0],a[1]);}if(size===3){return String.fromCharCode(a[0],a[1],a[2],a[3]);}return String.fromCharCode.apply(String,_toConsumableArray(a.subarray(0,size+1)));}function addHex(a,b,size){var c=0;for(var i=size;i>=0;i--){c+=a[i]+b[i];a[i]=c&255;c>>=8;}}function incHex(a,size){var c=1;for(var i=size;i>=0&&c>0;i--){c+=a[i];a[i]=c&255;c>>=8;}}var MAX_NUM_SIZE=16;var MAX_ENCODED_NUM_SIZE=19;var BinaryCMapStream=/*#__PURE__*/function(){function BinaryCMapStream(data){_classCallCheck(this,BinaryCMapStream);this.buffer=data;this.pos=0;this.end=data.length;this.tmpBuf=new Uint8Array(MAX_ENCODED_NUM_SIZE);}return _createClass(BinaryCMapStream,[{key:"readByte",value:function readByte(){if(this.pos>=this.end){return-1;}return this.buffer[this.pos++];}},{key:"readNumber",value:function readNumber(){var n=0;var last;do{var b=this.readByte();if(b<0){throw new FormatError("unexpected EOF in bcmap");}last=!(b&0x80);n=n<<7|b&0x7f;}while(!last);return n;}},{key:"readSigned",value:function readSigned(){var n=this.readNumber();return n&1?~(n>>>1):n>>>1;}},{key:"readHex",value:function readHex(num,size){num.set(this.buffer.subarray(this.pos,this.pos+size+1));this.pos+=size+1;}},{key:"readHexNumber",value:function readHexNumber(num,size){var last;var stack=this.tmpBuf;var sp=0;do{var b=this.readByte();if(b<0){throw new FormatError("unexpected EOF in bcmap");}last=!(b&0x80);stack[sp++]=b&0x7f;}while(!last);var i=size,buffer=0,bufferSize=0;while(i>=0){while(bufferSize<8&&stack.length>0){buffer|=stack[--sp]<<bufferSize;bufferSize+=7;}num[i]=buffer&255;i--;buffer>>=8;bufferSize-=8;}}},{key:"readHexSigned",value:function readHexSigned(num,size){this.readHexNumber(num,size);var sign=num[size]&1?255:0;var c=0;for(var i=0;i<=size;i++){c=(c&1)<<8|num[i];num[i]=c>>1^sign;}}},{key:"readString",value:function readString(){var len=this.readNumber(),buf=new Array(len);for(var i=0;i<len;i++){buf[i]=this.readNumber();}return String.fromCharCode.apply(String,buf);}}]);}();var BinaryCMapReader=/*#__PURE__*/function(){function BinaryCMapReader(){_classCallCheck(this,BinaryCMapReader);}return _createClass(BinaryCMapReader,[{key:"process",value:function(){var _process=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee17(data,cMap,extend){var stream,header,useCMap,start,end,_char6,charCode,tmp,code,b,type,sequence,dataSize,ucs2DataSize,subitemsCount,i,_i15,_i16,_i17,_i18,_i19;return _regeneratorRuntime().wrap(function _callee17$(_context21){while(1)switch(_context21.prev=_context21.next){case 0:stream=new BinaryCMapStream(data);header=stream.readByte();cMap.vertical=!!(header&1);useCMap=null;start=new Uint8Array(MAX_NUM_SIZE);end=new Uint8Array(MAX_NUM_SIZE);_char6=new Uint8Array(MAX_NUM_SIZE);charCode=new Uint8Array(MAX_NUM_SIZE);tmp=new Uint8Array(MAX_NUM_SIZE);case 9:if(!((b=stream.readByte())>=0)){_context21.next=68;break;}type=b>>5;if(!(type===7)){_context21.next=20;break;}_context21.t0=b&0x1f;_context21.next=_context21.t0===0?15:_context21.t0===1?17:19;break;case 15:stream.readString();return _context21.abrupt("break",19);case 17:useCMap=stream.readString();return _context21.abrupt("break",19);case 19:return _context21.abrupt("continue",9);case 20:sequence=!!(b&0x10);dataSize=b&15;if(!(dataSize+1>MAX_NUM_SIZE)){_context21.next=24;break;}throw new Error("BinaryCMapReader.process: Invalid dataSize.");case 24:ucs2DataSize=1;subitemsCount=stream.readNumber();_context21.t1=type;_context21.next=_context21.t1===0?29:_context21.t1===1?35:_context21.t1===2?41:_context21.t1===3?46:_context21.t1===4?53:_context21.t1===5?58:65;break;case 29:stream.readHex(start,dataSize);stream.readHexNumber(end,dataSize);addHex(end,start,dataSize);cMap.addCodespaceRange(dataSize+1,hexToInt(start,dataSize),hexToInt(end,dataSize));for(i=1;i<subitemsCount;i++){incHex(end,dataSize);stream.readHexNumber(start,dataSize);addHex(start,end,dataSize);stream.readHexNumber(end,dataSize);addHex(end,start,dataSize);cMap.addCodespaceRange(dataSize+1,hexToInt(start,dataSize),hexToInt(end,dataSize));}return _context21.abrupt("break",66);case 35:stream.readHex(start,dataSize);stream.readHexNumber(end,dataSize);addHex(end,start,dataSize);stream.readNumber();for(_i15=1;_i15<subitemsCount;_i15++){incHex(end,dataSize);stream.readHexNumber(start,dataSize);addHex(start,end,dataSize);stream.readHexNumber(end,dataSize);addHex(end,start,dataSize);stream.readNumber();}return _context21.abrupt("break",66);case 41:stream.readHex(_char6,dataSize);code=stream.readNumber();cMap.mapOne(hexToInt(_char6,dataSize),code);for(_i16=1;_i16<subitemsCount;_i16++){incHex(_char6,dataSize);if(!sequence){stream.readHexNumber(tmp,dataSize);addHex(_char6,tmp,dataSize);}code=stream.readSigned()+(code+1);cMap.mapOne(hexToInt(_char6,dataSize),code);}return _context21.abrupt("break",66);case 46:stream.readHex(start,dataSize);stream.readHexNumber(end,dataSize);addHex(end,start,dataSize);code=stream.readNumber();cMap.mapCidRange(hexToInt(start,dataSize),hexToInt(end,dataSize),code);for(_i17=1;_i17<subitemsCount;_i17++){incHex(end,dataSize);if(!sequence){stream.readHexNumber(start,dataSize);addHex(start,end,dataSize);}else{start.set(end);}stream.readHexNumber(end,dataSize);addHex(end,start,dataSize);code=stream.readNumber();cMap.mapCidRange(hexToInt(start,dataSize),hexToInt(end,dataSize),code);}return _context21.abrupt("break",66);case 53:stream.readHex(_char6,ucs2DataSize);stream.readHex(charCode,dataSize);cMap.mapOne(hexToInt(_char6,ucs2DataSize),hexToStr(charCode,dataSize));for(_i18=1;_i18<subitemsCount;_i18++){incHex(_char6,ucs2DataSize);if(!sequence){stream.readHexNumber(tmp,ucs2DataSize);addHex(_char6,tmp,ucs2DataSize);}incHex(charCode,dataSize);stream.readHexSigned(tmp,dataSize);addHex(charCode,tmp,dataSize);cMap.mapOne(hexToInt(_char6,ucs2DataSize),hexToStr(charCode,dataSize));}return _context21.abrupt("break",66);case 58:stream.readHex(start,ucs2DataSize);stream.readHexNumber(end,ucs2DataSize);addHex(end,start,ucs2DataSize);stream.readHex(charCode,dataSize);cMap.mapBfRange(hexToInt(start,ucs2DataSize),hexToInt(end,ucs2DataSize),hexToStr(charCode,dataSize));for(_i19=1;_i19<subitemsCount;_i19++){incHex(end,ucs2DataSize);if(!sequence){stream.readHexNumber(start,ucs2DataSize);addHex(start,end,ucs2DataSize);}else{start.set(end);}stream.readHexNumber(end,ucs2DataSize);addHex(end,start,ucs2DataSize);stream.readHex(charCode,dataSize);cMap.mapBfRange(hexToInt(start,ucs2DataSize),hexToInt(end,ucs2DataSize),hexToStr(charCode,dataSize));}return _context21.abrupt("break",66);case 65:throw new Error("BinaryCMapReader.process - unknown type: ".concat(type));case 66:_context21.next=9;break;case 68:if(!useCMap){_context21.next=70;break;}return _context21.abrupt("return",extend(useCMap));case 70:return _context21.abrupt("return",cMap);case 71:case"end":return _context21.stop();}},_callee17);}));function process(_x19,_x20,_x21){return _process.apply(this,arguments);}return process;}()}]);}();;// ./src/core/ascii_85_stream.js\nvar Ascii85Stream=/*#__PURE__*/function(_DecodeStream3){function Ascii85Stream(str,maybeLength){var _this21;_classCallCheck(this,Ascii85Stream);if(maybeLength){maybeLength*=0.8;}_this21=_callSuper(this,Ascii85Stream,[maybeLength]);_this21.str=str;_this21.dict=str.dict;_this21.input=new Uint8Array(5);return _this21;}_inherits(Ascii85Stream,_DecodeStream3);return _createClass(Ascii85Stream,[{key:"readBlock",value:function readBlock(){var TILDA_CHAR=0x7e;var Z_LOWER_CHAR=0x7a;var EOF=-1;var str=this.str;var c=str.getByte();while(isWhiteSpace(c)){c=str.getByte();}if(c===EOF||c===TILDA_CHAR){this.eof=true;return;}var bufferLength=this.bufferLength;var buffer,i;if(c===Z_LOWER_CHAR){buffer=this.ensureBuffer(bufferLength+4);for(i=0;i<4;++i){buffer[bufferLength+i]=0;}this.bufferLength+=4;}else{var input=this.input;input[0]=c;for(i=1;i<5;++i){c=str.getByte();while(isWhiteSpace(c)){c=str.getByte();}input[i]=c;if(c===EOF||c===TILDA_CHAR){break;}}buffer=this.ensureBuffer(bufferLength+i-1);this.bufferLength+=i-1;if(i<5){for(;i<5;++i){input[i]=0x21+84;}this.eof=true;}var t=0;for(i=0;i<5;++i){t=t*85+(input[i]-0x21);}for(i=3;i>=0;--i){buffer[bufferLength+i]=t&0xff;t>>=8;}}}}]);}(DecodeStream);;// ./src/core/ascii_hex_stream.js\nvar AsciiHexStream=/*#__PURE__*/function(_DecodeStream4){function AsciiHexStream(str,maybeLength){var _this22;_classCallCheck(this,AsciiHexStream);if(maybeLength){maybeLength*=0.5;}_this22=_callSuper(this,AsciiHexStream,[maybeLength]);_this22.str=str;_this22.dict=str.dict;_this22.firstDigit=-1;return _this22;}_inherits(AsciiHexStream,_DecodeStream4);return _createClass(AsciiHexStream,[{key:"readBlock",value:function readBlock(){var UPSTREAM_BLOCK_SIZE=8000;var bytes=this.str.getBytes(UPSTREAM_BLOCK_SIZE);if(!bytes.length){this.eof=true;return;}var maxDecodeLength=bytes.length+1>>1;var buffer=this.ensureBuffer(this.bufferLength+maxDecodeLength);var bufferLength=this.bufferLength;var firstDigit=this.firstDigit;var _iterator27=_createForOfIteratorHelper(bytes),_step27;try{for(_iterator27.s();!(_step27=_iterator27.n()).done;){var ch=_step27.value;var digit=void 0;if(ch>=0x30&&ch<=0x39){digit=ch&0x0f;}else if(ch>=0x41&&ch<=0x46||ch>=0x61&&ch<=0x66){digit=(ch&0x0f)+9;}else if(ch===0x3e){this.eof=true;break;}else{continue;}if(firstDigit<0){firstDigit=digit;}else{buffer[bufferLength++]=firstDigit<<4|digit;firstDigit=-1;}}}catch(err){_iterator27.e(err);}finally{_iterator27.f();}if(firstDigit>=0&&this.eof){buffer[bufferLength++]=firstDigit<<4;firstDigit=-1;}this.firstDigit=firstDigit;this.bufferLength=bufferLength;}}]);}(DecodeStream);;// ./src/core/ccitt.js\nvar ccittEOL=-2;var ccittEOF=-1;var twoDimPass=0;var twoDimHoriz=1;var twoDimVert0=2;var twoDimVertR1=3;var twoDimVertL1=4;var twoDimVertR2=5;var twoDimVertL2=6;var twoDimVertR3=7;var twoDimVertL3=8;var twoDimTable=[[-1,-1],[-1,-1],[7,twoDimVertL3],[7,twoDimVertR3],[6,twoDimVertL2],[6,twoDimVertL2],[6,twoDimVertR2],[6,twoDimVertR2],[4,twoDimPass],[4,twoDimPass],[4,twoDimPass],[4,twoDimPass],[4,twoDimPass],[4,twoDimPass],[4,twoDimPass],[4,twoDimPass],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0]];var whiteTable1=[[-1,-1],[12,ccittEOL],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[11,1792],[11,1792],[12,1984],[12,2048],[12,2112],[12,2176],[12,2240],[12,2304],[11,1856],[11,1856],[11,1920],[11,1920],[12,2368],[12,2432],[12,2496],[12,2560]];var whiteTable2=[[-1,-1],[-1,-1],[-1,-1],[-1,-1],[8,29],[8,29],[8,30],[8,30],[8,45],[8,45],[8,46],[8,46],[7,22],[7,22],[7,22],[7,22],[7,23],[7,23],[7,23],[7,23],[8,47],[8,47],[8,48],[8,48],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[7,20],[7,20],[7,20],[7,20],[8,33],[8,33],[8,34],[8,34],[8,35],[8,35],[8,36],[8,36],[8,37],[8,37],[8,38],[8,38],[7,19],[7,19],[7,19],[7,19],[8,31],[8,31],[8,32],[8,32],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[8,53],[8,53],[8,54],[8,54],[7,26],[7,26],[7,26],[7,26],[8,39],[8,39],[8,40],[8,40],[8,41],[8,41],[8,42],[8,42],[8,43],[8,43],[8,44],[8,44],[7,21],[7,21],[7,21],[7,21],[7,28],[7,28],[7,28],[7,28],[8,61],[8,61],[8,62],[8,62],[8,63],[8,63],[8,0],[8,0],[8,320],[8,320],[8,384],[8,384],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[7,27],[7,27],[7,27],[7,27],[8,59],[8,59],[8,60],[8,60],[9,1472],[9,1536],[9,1600],[9,1728],[7,18],[7,18],[7,18],[7,18],[7,24],[7,24],[7,24],[7,24],[8,49],[8,49],[8,50],[8,50],[8,51],[8,51],[8,52],[8,52],[7,25],[7,25],[7,25],[7,25],[8,55],[8,55],[8,56],[8,56],[8,57],[8,57],[8,58],[8,58],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[8,448],[8,448],[8,512],[8,512],[9,704],[9,768],[8,640],[8,640],[8,576],[8,576],[9,832],[9,896],[9,960],[9,1024],[9,1088],[9,1152],[9,1216],[9,1280],[9,1344],[9,1408],[7,256],[7,256],[7,256],[7,256],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7]];var blackTable1=[[-1,-1],[-1,-1],[12,ccittEOL],[12,ccittEOL],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[11,1792],[11,1792],[11,1792],[11,1792],[12,1984],[12,1984],[12,2048],[12,2048],[12,2112],[12,2112],[12,2176],[12,2176],[12,2240],[12,2240],[12,2304],[12,2304],[11,1856],[11,1856],[11,1856],[11,1856],[11,1920],[11,1920],[11,1920],[11,1920],[12,2368],[12,2368],[12,2432],[12,2432],[12,2496],[12,2496],[12,2560],[12,2560],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[12,52],[12,52],[13,640],[13,704],[13,768],[13,832],[12,55],[12,55],[12,56],[12,56],[13,1280],[13,1344],[13,1408],[13,1472],[12,59],[12,59],[12,60],[12,60],[13,1536],[13,1600],[11,24],[11,24],[11,24],[11,24],[11,25],[11,25],[11,25],[11,25],[13,1664],[13,1728],[12,320],[12,320],[12,384],[12,384],[12,448],[12,448],[13,512],[13,576],[12,53],[12,53],[12,54],[12,54],[13,896],[13,960],[13,1024],[13,1088],[13,1152],[13,1216],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64]];var blackTable2=[[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[11,23],[11,23],[12,50],[12,51],[12,44],[12,45],[12,46],[12,47],[12,57],[12,58],[12,61],[12,256],[10,16],[10,16],[10,16],[10,16],[10,17],[10,17],[10,17],[10,17],[12,48],[12,49],[12,62],[12,63],[12,30],[12,31],[12,32],[12,33],[12,40],[12,41],[11,22],[11,22],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[12,128],[12,192],[12,26],[12,27],[12,28],[12,29],[11,19],[11,19],[11,20],[11,20],[12,34],[12,35],[12,36],[12,37],[12,38],[12,39],[11,21],[11,21],[12,42],[12,43],[10,0],[10,0],[10,0],[10,0],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12]];var blackTable3=[[-1,-1],[-1,-1],[-1,-1],[-1,-1],[6,9],[6,8],[5,7],[5,7],[4,6],[4,6],[4,6],[4,6],[4,5],[4,5],[4,5],[4,5],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2]];var CCITTFaxDecoder=/*#__PURE__*/function(){function CCITTFaxDecoder(source){var _options$EndOfBlock;var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,CCITTFaxDecoder);if(typeof(source===null||source===void 0?void 0:source.next)!=="function"){throw new Error(\'CCITTFaxDecoder - invalid "source" parameter.\');}this.source=source;this.eof=false;this.encoding=options.K||0;this.eoline=options.EndOfLine||false;this.byteAlign=options.EncodedByteAlign||false;this.columns=options.Columns||1728;this.rows=options.Rows||0;this.eoblock=(_options$EndOfBlock=options.EndOfBlock)!==null&&_options$EndOfBlock!==void 0?_options$EndOfBlock:true;this.black=options.BlackIs1||false;this.codingLine=new Uint32Array(this.columns+1);this.refLine=new Uint32Array(this.columns+2);this.codingLine[0]=this.columns;this.codingPos=0;this.row=0;this.nextLine2D=this.encoding<0;this.inputBits=0;this.inputBuf=0;this.outputBits=0;this.rowsDone=false;var code1;while((code1=this._lookBits(12))===0){this._eatBits(1);}if(code1===1){this._eatBits(12);}if(this.encoding>0){this.nextLine2D=!this._lookBits(1);this._eatBits(1);}}return _createClass(CCITTFaxDecoder,[{key:"readNextChar",value:function readNextChar(){if(this.eof){return-1;}var refLine=this.refLine;var codingLine=this.codingLine;var columns=this.columns;var refPos,blackPixels,bits,i;if(this.outputBits===0){if(this.rowsDone){this.eof=true;}if(this.eof){return-1;}this.err=false;var code1,code2,code3;if(this.nextLine2D){for(i=0;codingLine[i]<columns;++i){refLine[i]=codingLine[i];}refLine[i++]=columns;refLine[i]=columns;codingLine[0]=0;this.codingPos=0;refPos=0;blackPixels=0;while(codingLine[this.codingPos]<columns){code1=this._getTwoDimCode();switch(code1){case twoDimPass:this._addPixels(refLine[refPos+1],blackPixels);if(refLine[refPos+1]<columns){refPos+=2;}break;case twoDimHoriz:code1=code2=0;if(blackPixels){do{code1+=code3=this._getBlackCode();}while(code3>=64);do{code2+=code3=this._getWhiteCode();}while(code3>=64);}else{do{code1+=code3=this._getWhiteCode();}while(code3>=64);do{code2+=code3=this._getBlackCode();}while(code3>=64);}this._addPixels(codingLine[this.codingPos]+code1,blackPixels);if(codingLine[this.codingPos]<columns){this._addPixels(codingLine[this.codingPos]+code2,blackPixels^1);}while(refLine[refPos]<=codingLine[this.codingPos]&&refLine[refPos]<columns){refPos+=2;}break;case twoDimVertR3:this._addPixels(refLine[refPos]+3,blackPixels);blackPixels^=1;if(codingLine[this.codingPos]<columns){++refPos;while(refLine[refPos]<=codingLine[this.codingPos]&&refLine[refPos]<columns){refPos+=2;}}break;case twoDimVertR2:this._addPixels(refLine[refPos]+2,blackPixels);blackPixels^=1;if(codingLine[this.codingPos]<columns){++refPos;while(refLine[refPos]<=codingLine[this.codingPos]&&refLine[refPos]<columns){refPos+=2;}}break;case twoDimVertR1:this._addPixels(refLine[refPos]+1,blackPixels);blackPixels^=1;if(codingLine[this.codingPos]<columns){++refPos;while(refLine[refPos]<=codingLine[this.codingPos]&&refLine[refPos]<columns){refPos+=2;}}break;case twoDimVert0:this._addPixels(refLine[refPos],blackPixels);blackPixels^=1;if(codingLine[this.codingPos]<columns){++refPos;while(refLine[refPos]<=codingLine[this.codingPos]&&refLine[refPos]<columns){refPos+=2;}}break;case twoDimVertL3:this._addPixelsNeg(refLine[refPos]-3,blackPixels);blackPixels^=1;if(codingLine[this.codingPos]<columns){if(refPos>0){--refPos;}else{++refPos;}while(refLine[refPos]<=codingLine[this.codingPos]&&refLine[refPos]<columns){refPos+=2;}}break;case twoDimVertL2:this._addPixelsNeg(refLine[refPos]-2,blackPixels);blackPixels^=1;if(codingLine[this.codingPos]<columns){if(refPos>0){--refPos;}else{++refPos;}while(refLine[refPos]<=codingLine[this.codingPos]&&refLine[refPos]<columns){refPos+=2;}}break;case twoDimVertL1:this._addPixelsNeg(refLine[refPos]-1,blackPixels);blackPixels^=1;if(codingLine[this.codingPos]<columns){if(refPos>0){--refPos;}else{++refPos;}while(refLine[refPos]<=codingLine[this.codingPos]&&refLine[refPos]<columns){refPos+=2;}}break;case ccittEOF:this._addPixels(columns,0);this.eof=true;break;default:info("bad 2d code");this._addPixels(columns,0);this.err=true;}}}else{codingLine[0]=0;this.codingPos=0;blackPixels=0;while(codingLine[this.codingPos]<columns){code1=0;if(blackPixels){do{code1+=code3=this._getBlackCode();}while(code3>=64);}else{do{code1+=code3=this._getWhiteCode();}while(code3>=64);}this._addPixels(codingLine[this.codingPos]+code1,blackPixels);blackPixels^=1;}}var gotEOL=false;if(this.byteAlign){this.inputBits&=~7;}if(!this.eoblock&&this.row===this.rows-1){this.rowsDone=true;}else{code1=this._lookBits(12);if(this.eoline){while(code1!==ccittEOF&&code1!==1){this._eatBits(1);code1=this._lookBits(12);}}else{while(code1===0){this._eatBits(1);code1=this._lookBits(12);}}if(code1===1){this._eatBits(12);gotEOL=true;}else if(code1===ccittEOF){this.eof=true;}}if(!this.eof&&this.encoding>0&&!this.rowsDone){this.nextLine2D=!this._lookBits(1);this._eatBits(1);}if(this.eoblock&&gotEOL&&this.byteAlign){code1=this._lookBits(12);if(code1===1){this._eatBits(12);if(this.encoding>0){this._lookBits(1);this._eatBits(1);}if(this.encoding>=0){for(i=0;i<4;++i){code1=this._lookBits(12);if(code1!==1){info("bad rtc code: "+code1);}this._eatBits(12);if(this.encoding>0){this._lookBits(1);this._eatBits(1);}}}this.eof=true;}}else if(this.err&&this.eoline){while(true){code1=this._lookBits(13);if(code1===ccittEOF){this.eof=true;return-1;}if(code1>>1===1){break;}this._eatBits(1);}this._eatBits(12);if(this.encoding>0){this._eatBits(1);this.nextLine2D=!(code1&1);}}this.outputBits=codingLine[0]>0?codingLine[this.codingPos=0]:codingLine[this.codingPos=1];this.row++;}var c;if(this.outputBits>=8){c=this.codingPos&1?0:0xff;this.outputBits-=8;if(this.outputBits===0&&codingLine[this.codingPos]<columns){this.codingPos++;this.outputBits=codingLine[this.codingPos]-codingLine[this.codingPos-1];}}else{bits=8;c=0;do{if(typeof this.outputBits!=="number"){throw new FormatError(\'Invalid /CCITTFaxDecode data, "outputBits" must be a number.\');}if(this.outputBits>bits){c<<=bits;if(!(this.codingPos&1)){c|=0xff>>8-bits;}this.outputBits-=bits;bits=0;}else{c<<=this.outputBits;if(!(this.codingPos&1)){c|=0xff>>8-this.outputBits;}bits-=this.outputBits;this.outputBits=0;if(codingLine[this.codingPos]<columns){this.codingPos++;this.outputBits=codingLine[this.codingPos]-codingLine[this.codingPos-1];}else if(bits>0){c<<=bits;bits=0;}}}while(bits);}if(this.black){c^=0xff;}return c;}},{key:"_addPixels",value:function _addPixels(a1,blackPixels){var codingLine=this.codingLine;var codingPos=this.codingPos;if(a1>codingLine[codingPos]){if(a1>this.columns){info("row is wrong length");this.err=true;a1=this.columns;}if(codingPos&1^blackPixels){++codingPos;}codingLine[codingPos]=a1;}this.codingPos=codingPos;}},{key:"_addPixelsNeg",value:function _addPixelsNeg(a1,blackPixels){var codingLine=this.codingLine;var codingPos=this.codingPos;if(a1>codingLine[codingPos]){if(a1>this.columns){info("row is wrong length");this.err=true;a1=this.columns;}if(codingPos&1^blackPixels){++codingPos;}codingLine[codingPos]=a1;}else if(a1<codingLine[codingPos]){if(a1<0){info("invalid code");this.err=true;a1=0;}while(codingPos>0&&a1<codingLine[codingPos-1]){--codingPos;}codingLine[codingPos]=a1;}this.codingPos=codingPos;}},{key:"_findTableCode",value:function _findTableCode(start,end,table,limit){var limitValue=limit||0;for(var i=start;i<=end;++i){var code=this._lookBits(i);if(code===ccittEOF){return[true,1,false];}if(i<end){code<<=end-i;}if(!limitValue||code>=limitValue){var p=table[code-limitValue];if(p[0]===i){this._eatBits(i);return[true,p[1],true];}}}return[false,0,false];}},{key:"_getTwoDimCode",value:function _getTwoDimCode(){var code=0;var p;if(this.eoblock){var _p;code=this._lookBits(7);p=twoDimTable[code];if(((_p=p)===null||_p===void 0?void 0:_p[0])>0){this._eatBits(p[0]);return p[1];}}else{var result=this._findTableCode(1,7,twoDimTable);if(result[0]&&result[2]){return result[1];}}info("Bad two dim code");return ccittEOF;}},{key:"_getWhiteCode",value:function _getWhiteCode(){var code=0;var p;if(this.eoblock){code=this._lookBits(12);if(code===ccittEOF){return 1;}p=code>>5===0?whiteTable1[code]:whiteTable2[code>>3];if(p[0]>0){this._eatBits(p[0]);return p[1];}}else{var result=this._findTableCode(1,9,whiteTable2);if(result[0]){return result[1];}result=this._findTableCode(11,12,whiteTable1);if(result[0]){return result[1];}}info("bad white code");this._eatBits(1);return 1;}},{key:"_getBlackCode",value:function _getBlackCode(){var code,p;if(this.eoblock){code=this._lookBits(13);if(code===ccittEOF){return 1;}if(code>>7===0){p=blackTable1[code];}else if(code>>9===0&&code>>7!==0){p=blackTable2[(code>>1)-64];}else{p=blackTable3[code>>7];}if(p[0]>0){this._eatBits(p[0]);return p[1];}}else{var result=this._findTableCode(2,6,blackTable3);if(result[0]){return result[1];}result=this._findTableCode(7,12,blackTable2,64);if(result[0]){return result[1];}result=this._findTableCode(10,13,blackTable1);if(result[0]){return result[1];}}info("bad black code");this._eatBits(1);return 1;}},{key:"_lookBits",value:function _lookBits(n){var c;while(this.inputBits<n){if((c=this.source.next())===-1){if(this.inputBits===0){return ccittEOF;}return this.inputBuf<<n-this.inputBits&0xffff>>16-n;}this.inputBuf=this.inputBuf<<8|c;this.inputBits+=8;}return this.inputBuf>>this.inputBits-n&0xffff>>16-n;}},{key:"_eatBits",value:function _eatBits(n){if((this.inputBits-=n)<0){this.inputBits=0;}}}]);}();;// ./src/core/ccitt_stream.js\nvar CCITTFaxStream=/*#__PURE__*/function(_DecodeStream5){function CCITTFaxStream(str,maybeLength,params){var _this23;_classCallCheck(this,CCITTFaxStream);_this23=_callSuper(this,CCITTFaxStream,[maybeLength]);_this23.str=str;_this23.dict=str.dict;if(!(params instanceof Dict)){params=Dict.empty;}var source={next:function next(){return str.getByte();}};_this23.ccittFaxDecoder=new CCITTFaxDecoder(source,{K:params.get("K"),EndOfLine:params.get("EndOfLine"),EncodedByteAlign:params.get("EncodedByteAlign"),Columns:params.get("Columns"),Rows:params.get("Rows"),EndOfBlock:params.get("EndOfBlock"),BlackIs1:params.get("BlackIs1")});return _this23;}_inherits(CCITTFaxStream,_DecodeStream5);return _createClass(CCITTFaxStream,[{key:"readBlock",value:function readBlock(){while(!this.eof){var c=this.ccittFaxDecoder.readNextChar();if(c===-1){this.eof=true;return;}this.ensureBuffer(this.bufferLength+1);this.buffer[this.bufferLength++]=c;}}}]);}(DecodeStream);;// ./src/core/flate_stream.js\nvar codeLenCodeMap=new Int32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);var lengthDecode=new Int32Array([0x00003,0x00004,0x00005,0x00006,0x00007,0x00008,0x00009,0x0000a,0x1000b,0x1000d,0x1000f,0x10011,0x20013,0x20017,0x2001b,0x2001f,0x30023,0x3002b,0x30033,0x3003b,0x40043,0x40053,0x40063,0x40073,0x50083,0x500a3,0x500c3,0x500e3,0x00102,0x00102,0x00102]);var distDecode=new Int32Array([0x00001,0x00002,0x00003,0x00004,0x10005,0x10007,0x20009,0x2000d,0x30011,0x30019,0x40021,0x40031,0x50041,0x50061,0x60081,0x600c1,0x70101,0x70181,0x80201,0x80301,0x90401,0x90601,0xa0801,0xa0c01,0xb1001,0xb1801,0xc2001,0xc3001,0xd4001,0xd6001]);var fixedLitCodeTab=[new Int32Array([0x70100,0x80050,0x80010,0x80118,0x70110,0x80070,0x80030,0x900c0,0x70108,0x80060,0x80020,0x900a0,0x80000,0x80080,0x80040,0x900e0,0x70104,0x80058,0x80018,0x90090,0x70114,0x80078,0x80038,0x900d0,0x7010c,0x80068,0x80028,0x900b0,0x80008,0x80088,0x80048,0x900f0,0x70102,0x80054,0x80014,0x8011c,0x70112,0x80074,0x80034,0x900c8,0x7010a,0x80064,0x80024,0x900a8,0x80004,0x80084,0x80044,0x900e8,0x70106,0x8005c,0x8001c,0x90098,0x70116,0x8007c,0x8003c,0x900d8,0x7010e,0x8006c,0x8002c,0x900b8,0x8000c,0x8008c,0x8004c,0x900f8,0x70101,0x80052,0x80012,0x8011a,0x70111,0x80072,0x80032,0x900c4,0x70109,0x80062,0x80022,0x900a4,0x80002,0x80082,0x80042,0x900e4,0x70105,0x8005a,0x8001a,0x90094,0x70115,0x8007a,0x8003a,0x900d4,0x7010d,0x8006a,0x8002a,0x900b4,0x8000a,0x8008a,0x8004a,0x900f4,0x70103,0x80056,0x80016,0x8011e,0x70113,0x80076,0x80036,0x900cc,0x7010b,0x80066,0x80026,0x900ac,0x80006,0x80086,0x80046,0x900ec,0x70107,0x8005e,0x8001e,0x9009c,0x70117,0x8007e,0x8003e,0x900dc,0x7010f,0x8006e,0x8002e,0x900bc,0x8000e,0x8008e,0x8004e,0x900fc,0x70100,0x80051,0x80011,0x80119,0x70110,0x80071,0x80031,0x900c2,0x70108,0x80061,0x80021,0x900a2,0x80001,0x80081,0x80041,0x900e2,0x70104,0x80059,0x80019,0x90092,0x70114,0x80079,0x80039,0x900d2,0x7010c,0x80069,0x80029,0x900b2,0x80009,0x80089,0x80049,0x900f2,0x70102,0x80055,0x80015,0x8011d,0x70112,0x80075,0x80035,0x900ca,0x7010a,0x80065,0x80025,0x900aa,0x80005,0x80085,0x80045,0x900ea,0x70106,0x8005d,0x8001d,0x9009a,0x70116,0x8007d,0x8003d,0x900da,0x7010e,0x8006d,0x8002d,0x900ba,0x8000d,0x8008d,0x8004d,0x900fa,0x70101,0x80053,0x80013,0x8011b,0x70111,0x80073,0x80033,0x900c6,0x70109,0x80063,0x80023,0x900a6,0x80003,0x80083,0x80043,0x900e6,0x70105,0x8005b,0x8001b,0x90096,0x70115,0x8007b,0x8003b,0x900d6,0x7010d,0x8006b,0x8002b,0x900b6,0x8000b,0x8008b,0x8004b,0x900f6,0x70103,0x80057,0x80017,0x8011f,0x70113,0x80077,0x80037,0x900ce,0x7010b,0x80067,0x80027,0x900ae,0x80007,0x80087,0x80047,0x900ee,0x70107,0x8005f,0x8001f,0x9009e,0x70117,0x8007f,0x8003f,0x900de,0x7010f,0x8006f,0x8002f,0x900be,0x8000f,0x8008f,0x8004f,0x900fe,0x70100,0x80050,0x80010,0x80118,0x70110,0x80070,0x80030,0x900c1,0x70108,0x80060,0x80020,0x900a1,0x80000,0x80080,0x80040,0x900e1,0x70104,0x80058,0x80018,0x90091,0x70114,0x80078,0x80038,0x900d1,0x7010c,0x80068,0x80028,0x900b1,0x80008,0x80088,0x80048,0x900f1,0x70102,0x80054,0x80014,0x8011c,0x70112,0x80074,0x80034,0x900c9,0x7010a,0x80064,0x80024,0x900a9,0x80004,0x80084,0x80044,0x900e9,0x70106,0x8005c,0x8001c,0x90099,0x70116,0x8007c,0x8003c,0x900d9,0x7010e,0x8006c,0x8002c,0x900b9,0x8000c,0x8008c,0x8004c,0x900f9,0x70101,0x80052,0x80012,0x8011a,0x70111,0x80072,0x80032,0x900c5,0x70109,0x80062,0x80022,0x900a5,0x80002,0x80082,0x80042,0x900e5,0x70105,0x8005a,0x8001a,0x90095,0x70115,0x8007a,0x8003a,0x900d5,0x7010d,0x8006a,0x8002a,0x900b5,0x8000a,0x8008a,0x8004a,0x900f5,0x70103,0x80056,0x80016,0x8011e,0x70113,0x80076,0x80036,0x900cd,0x7010b,0x80066,0x80026,0x900ad,0x80006,0x80086,0x80046,0x900ed,0x70107,0x8005e,0x8001e,0x9009d,0x70117,0x8007e,0x8003e,0x900dd,0x7010f,0x8006e,0x8002e,0x900bd,0x8000e,0x8008e,0x8004e,0x900fd,0x70100,0x80051,0x80011,0x80119,0x70110,0x80071,0x80031,0x900c3,0x70108,0x80061,0x80021,0x900a3,0x80001,0x80081,0x80041,0x900e3,0x70104,0x80059,0x80019,0x90093,0x70114,0x80079,0x80039,0x900d3,0x7010c,0x80069,0x80029,0x900b3,0x80009,0x80089,0x80049,0x900f3,0x70102,0x80055,0x80015,0x8011d,0x70112,0x80075,0x80035,0x900cb,0x7010a,0x80065,0x80025,0x900ab,0x80005,0x80085,0x80045,0x900eb,0x70106,0x8005d,0x8001d,0x9009b,0x70116,0x8007d,0x8003d,0x900db,0x7010e,0x8006d,0x8002d,0x900bb,0x8000d,0x8008d,0x8004d,0x900fb,0x70101,0x80053,0x80013,0x8011b,0x70111,0x80073,0x80033,0x900c7,0x70109,0x80063,0x80023,0x900a7,0x80003,0x80083,0x80043,0x900e7,0x70105,0x8005b,0x8001b,0x90097,0x70115,0x8007b,0x8003b,0x900d7,0x7010d,0x8006b,0x8002b,0x900b7,0x8000b,0x8008b,0x8004b,0x900f7,0x70103,0x80057,0x80017,0x8011f,0x70113,0x80077,0x80037,0x900cf,0x7010b,0x80067,0x80027,0x900af,0x80007,0x80087,0x80047,0x900ef,0x70107,0x8005f,0x8001f,0x9009f,0x70117,0x8007f,0x8003f,0x900df,0x7010f,0x8006f,0x8002f,0x900bf,0x8000f,0x8008f,0x8004f,0x900ff]),9];var fixedDistCodeTab=[new Int32Array([0x50000,0x50010,0x50008,0x50018,0x50004,0x50014,0x5000c,0x5001c,0x50002,0x50012,0x5000a,0x5001a,0x50006,0x50016,0x5000e,0x00000,0x50001,0x50011,0x50009,0x50019,0x50005,0x50015,0x5000d,0x5001d,0x50003,0x50013,0x5000b,0x5001b,0x50007,0x50017,0x5000f,0x00000]),5];var _FlateStream_brand=/*#__PURE__*/new WeakSet();var FlateStream=/*#__PURE__*/function(_DecodeStream6){function FlateStream(str,maybeLength){var _this24;_classCallCheck(this,FlateStream);_this24=_callSuper(this,FlateStream,[maybeLength]);_classPrivateMethodInitSpec(_this24,_FlateStream_brand);_this24.str=str;_this24.dict=str.dict;var cmf=str.getByte();var flg=str.getByte();if(cmf===-1||flg===-1){throw new FormatError("Invalid header in flate stream: ".concat(cmf,", ").concat(flg));}if((cmf&0x0f)!==0x08){throw new FormatError("Unknown compression method in flate stream: ".concat(cmf,", ").concat(flg));}if(((cmf<<8)+flg)%31!==0){throw new FormatError("Bad FCHECK in flate stream: ".concat(cmf,", ").concat(flg));}if(flg&0x20){throw new FormatError("FDICT bit set in flate stream: ".concat(cmf,", ").concat(flg));}_this24.codeSize=0;_this24.codeBuf=0;return _this24;}_inherits(FlateStream,_DecodeStream6);return _createClass(FlateStream,[{key:"getImageData",value:function(){var _getImageData3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee18(length,_decoderOptions){var data;return _regeneratorRuntime().wrap(function _callee18$(_context22){while(1)switch(_context22.prev=_context22.next){case 0:_context22.next=2;return this.asyncGetBytes();case 2:data=_context22.sent;return _context22.abrupt("return",(data===null||data===void 0?void 0:data.subarray(0,length))||this.getBytes(length));case 4:case"end":return _context22.stop();}},_callee18,this);}));function getImageData(_x22,_x23){return _getImageData3.apply(this,arguments);}return getImageData;}()},{key:"asyncGetBytes",value:function(){var _asyncGetBytes2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee20(){var bytes,_DecompressionStream,readable,writable,writer,chunks,totalLength,_iteratorAbruptCompletion,_didIteratorError,_iteratorError,_iterator,_step,chunk,data,offset,_i20,_chunks,_chunk2;return _regeneratorRuntime().wrap(function _callee20$(_context24){while(1)switch(_context24.prev=_context24.next){case 0:this.str.reset();bytes=this.str.getBytes();_context24.prev=2;_DecompressionStream=new DecompressionStream("deflate"),readable=_DecompressionStream.readable,writable=_DecompressionStream.writable;writer=writable.getWriter();_context24.next=7;return writer.ready;case 7:writer.write(bytes).then(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee19(){return _regeneratorRuntime().wrap(function _callee19$(_context23){while(1)switch(_context23.prev=_context23.next){case 0:_context23.next=2;return writer.ready;case 2:_context23.next=4;return writer.close();case 4:case"end":return _context23.stop();}},_callee19);})))["catch"](function(){});chunks=[];totalLength=0;_iteratorAbruptCompletion=false;_didIteratorError=false;_context24.prev=12;_iterator=_asyncIterator(readable);case 14:_context24.next=16;return _iterator.next();case 16:if(!(_iteratorAbruptCompletion=!(_step=_context24.sent).done)){_context24.next=23;break;}chunk=_step.value;chunks.push(chunk);totalLength+=chunk.byteLength;case 20:_iteratorAbruptCompletion=false;_context24.next=14;break;case 23:_context24.next=29;break;case 25:_context24.prev=25;_context24.t0=_context24["catch"](12);_didIteratorError=true;_iteratorError=_context24.t0;case 29:_context24.prev=29;_context24.prev=30;if(!(_iteratorAbruptCompletion&&_iterator["return"]!=null)){_context24.next=34;break;}_context24.next=34;return _iterator["return"]();case 34:_context24.prev=34;if(!_didIteratorError){_context24.next=37;break;}throw _iteratorError;case 37:return _context24.finish(34);case 38:return _context24.finish(29);case 39:data=new Uint8Array(totalLength);offset=0;for(_i20=0,_chunks=chunks;_i20<_chunks.length;_i20++){_chunk2=_chunks[_i20];data.set(_chunk2,offset);offset+=_chunk2.byteLength;}return _context24.abrupt("return",data);case 45:_context24.prev=45;_context24.t1=_context24["catch"](2);this.str=new Stream(bytes,2,bytes.length,this.str.dict);this.reset();return _context24.abrupt("return",null);case 50:case"end":return _context24.stop();}},_callee20,this,[[2,45],[12,25,29,39],[30,,34,38]]);}));function asyncGetBytes(){return _asyncGetBytes2.apply(this,arguments);}return asyncGetBytes;}()},{key:"isAsync",get:function get(){return true;}},{key:"getBits",value:function getBits(bits){var str=this.str;var codeSize=this.codeSize;var codeBuf=this.codeBuf;var b;while(codeSize<bits){if((b=str.getByte())===-1){throw new FormatError("Bad encoding in flate stream");}codeBuf|=b<<codeSize;codeSize+=8;}b=codeBuf&(1<<bits)-1;this.codeBuf=codeBuf>>bits;this.codeSize=codeSize-=bits;return b;}},{key:"getCode",value:function getCode(table){var str=this.str;var codes=table[0];var maxLen=table[1];var codeSize=this.codeSize;var codeBuf=this.codeBuf;var b;while(codeSize<maxLen){if((b=str.getByte())===-1){break;}codeBuf|=b<<codeSize;codeSize+=8;}var code=codes[codeBuf&(1<<maxLen)-1];var codeLen=code>>16;var codeVal=code&0xffff;if(codeLen<1||codeSize<codeLen){throw new FormatError("Bad encoding in flate stream");}this.codeBuf=codeBuf>>codeLen;this.codeSize=codeSize-codeLen;return codeVal;}},{key:"generateHuffmanTable",value:function generateHuffmanTable(lengths){var n=lengths.length;var maxLen=0;var i;for(i=0;i<n;++i){if(lengths[i]>maxLen){maxLen=lengths[i];}}var size=1<<maxLen;var codes=new Int32Array(size);for(var len=1,code=0,skip=2;len<=maxLen;++len,code<<=1,skip<<=1){for(var val=0;val<n;++val){if(lengths[val]===len){var code2=0;var t=code;for(i=0;i<len;++i){code2=code2<<1|t&1;t>>=1;}for(i=code2;i<size;i+=skip){codes[i]=len<<16|val;}++code;}}}return[codes,maxLen];}},{key:"readBlock",value:function readBlock(){var buffer,hdr,len;var str=this.str;try{hdr=this.getBits(3);}catch(ex){_assertClassBrand(_FlateStream_brand,this,_endsStreamOnError).call(this,ex.message);return;}if(hdr&1){this.eof=true;}hdr>>=1;if(hdr===0){var b;if((b=str.getByte())===-1){_assertClassBrand(_FlateStream_brand,this,_endsStreamOnError).call(this,"Bad block header in flate stream");return;}var blockLen=b;if((b=str.getByte())===-1){_assertClassBrand(_FlateStream_brand,this,_endsStreamOnError).call(this,"Bad block header in flate stream");return;}blockLen|=b<<8;if((b=str.getByte())===-1){_assertClassBrand(_FlateStream_brand,this,_endsStreamOnError).call(this,"Bad block header in flate stream");return;}var check=b;if((b=str.getByte())===-1){_assertClassBrand(_FlateStream_brand,this,_endsStreamOnError).call(this,"Bad block header in flate stream");return;}check|=b<<8;if(check!==(~blockLen&0xffff)&&(blockLen!==0||check!==0)){throw new FormatError("Bad uncompressed block length in flate stream");}this.codeBuf=0;this.codeSize=0;var bufferLength=this.bufferLength,end=bufferLength+blockLen;buffer=this.ensureBuffer(end);this.bufferLength=end;if(blockLen===0){if(str.peekByte()===-1){this.eof=true;}}else{var block=str.getBytes(blockLen);buffer.set(block,bufferLength);if(block.length<blockLen){this.eof=true;}}return;}var litCodeTable;var distCodeTable;if(hdr===1){litCodeTable=fixedLitCodeTab;distCodeTable=fixedDistCodeTab;}else if(hdr===2){var numLitCodes=this.getBits(5)+257;var numDistCodes=this.getBits(5)+1;var numCodeLenCodes=this.getBits(4)+4;var codeLenCodeLengths=new Uint8Array(codeLenCodeMap.length);var i;for(i=0;i<numCodeLenCodes;++i){codeLenCodeLengths[codeLenCodeMap[i]]=this.getBits(3);}var codeLenCodeTab=this.generateHuffmanTable(codeLenCodeLengths);len=0;i=0;var codes=numLitCodes+numDistCodes;var codeLengths=new Uint8Array(codes);var bitsLength,bitsOffset,what;while(i<codes){var code=this.getCode(codeLenCodeTab);if(code===16){bitsLength=2;bitsOffset=3;what=len;}else if(code===17){bitsLength=3;bitsOffset=3;what=len=0;}else if(code===18){bitsLength=7;bitsOffset=11;what=len=0;}else{codeLengths[i++]=len=code;continue;}var repeatLength=this.getBits(bitsLength)+bitsOffset;while(repeatLength--\x3e0){codeLengths[i++]=what;}}litCodeTable=this.generateHuffmanTable(codeLengths.subarray(0,numLitCodes));distCodeTable=this.generateHuffmanTable(codeLengths.subarray(numLitCodes,codes));}else{throw new FormatError("Unknown block type in flate stream");}buffer=this.buffer;var limit=buffer?buffer.length:0;var pos=this.bufferLength;while(true){var code1=this.getCode(litCodeTable);if(code1<256){if(pos+1>=limit){buffer=this.ensureBuffer(pos+1);limit=buffer.length;}buffer[pos++]=code1;continue;}if(code1===256){this.bufferLength=pos;return;}code1-=257;code1=lengthDecode[code1];var code2=code1>>16;if(code2>0){code2=this.getBits(code2);}len=(code1&0xffff)+code2;code1=this.getCode(distCodeTable);code1=distDecode[code1];code2=code1>>16;if(code2>0){code2=this.getBits(code2);}var dist=(code1&0xffff)+code2;if(pos+len>=limit){buffer=this.ensureBuffer(pos+len);limit=buffer.length;}for(var k=0;k<len;++k,++pos){buffer[pos]=buffer[pos-dist];}}}}]);}(DecodeStream);function _endsStreamOnError(err){info(err);this.eof=true;};// ./src/core/arithmetic_decoder.js\nvar QeTable=[{qe:0x5601,nmps:1,nlps:1,switchFlag:1},{qe:0x3401,nmps:2,nlps:6,switchFlag:0},{qe:0x1801,nmps:3,nlps:9,switchFlag:0},{qe:0x0ac1,nmps:4,nlps:12,switchFlag:0},{qe:0x0521,nmps:5,nlps:29,switchFlag:0},{qe:0x0221,nmps:38,nlps:33,switchFlag:0},{qe:0x5601,nmps:7,nlps:6,switchFlag:1},{qe:0x5401,nmps:8,nlps:14,switchFlag:0},{qe:0x4801,nmps:9,nlps:14,switchFlag:0},{qe:0x3801,nmps:10,nlps:14,switchFlag:0},{qe:0x3001,nmps:11,nlps:17,switchFlag:0},{qe:0x2401,nmps:12,nlps:18,switchFlag:0},{qe:0x1c01,nmps:13,nlps:20,switchFlag:0},{qe:0x1601,nmps:29,nlps:21,switchFlag:0},{qe:0x5601,nmps:15,nlps:14,switchFlag:1},{qe:0x5401,nmps:16,nlps:14,switchFlag:0},{qe:0x5101,nmps:17,nlps:15,switchFlag:0},{qe:0x4801,nmps:18,nlps:16,switchFlag:0},{qe:0x3801,nmps:19,nlps:17,switchFlag:0},{qe:0x3401,nmps:20,nlps:18,switchFlag:0},{qe:0x3001,nmps:21,nlps:19,switchFlag:0},{qe:0x2801,nmps:22,nlps:19,switchFlag:0},{qe:0x2401,nmps:23,nlps:20,switchFlag:0},{qe:0x2201,nmps:24,nlps:21,switchFlag:0},{qe:0x1c01,nmps:25,nlps:22,switchFlag:0},{qe:0x1801,nmps:26,nlps:23,switchFlag:0},{qe:0x1601,nmps:27,nlps:24,switchFlag:0},{qe:0x1401,nmps:28,nlps:25,switchFlag:0},{qe:0x1201,nmps:29,nlps:26,switchFlag:0},{qe:0x1101,nmps:30,nlps:27,switchFlag:0},{qe:0x0ac1,nmps:31,nlps:28,switchFlag:0},{qe:0x09c1,nmps:32,nlps:29,switchFlag:0},{qe:0x08a1,nmps:33,nlps:30,switchFlag:0},{qe:0x0521,nmps:34,nlps:31,switchFlag:0},{qe:0x0441,nmps:35,nlps:32,switchFlag:0},{qe:0x02a1,nmps:36,nlps:33,switchFlag:0},{qe:0x0221,nmps:37,nlps:34,switchFlag:0},{qe:0x0141,nmps:38,nlps:35,switchFlag:0},{qe:0x0111,nmps:39,nlps:36,switchFlag:0},{qe:0x0085,nmps:40,nlps:37,switchFlag:0},{qe:0x0049,nmps:41,nlps:38,switchFlag:0},{qe:0x0025,nmps:42,nlps:39,switchFlag:0},{qe:0x0015,nmps:43,nlps:40,switchFlag:0},{qe:0x0009,nmps:44,nlps:41,switchFlag:0},{qe:0x0005,nmps:45,nlps:42,switchFlag:0},{qe:0x0001,nmps:45,nlps:43,switchFlag:0},{qe:0x5601,nmps:46,nlps:46,switchFlag:0}];var ArithmeticDecoder=/*#__PURE__*/function(){function ArithmeticDecoder(data,start,end){_classCallCheck(this,ArithmeticDecoder);this.data=data;this.bp=start;this.dataEnd=end;this.chigh=data[start];this.clow=0;this.byteIn();this.chigh=this.chigh<<7&0xffff|this.clow>>9&0x7f;this.clow=this.clow<<7&0xffff;this.ct-=7;this.a=0x8000;}return _createClass(ArithmeticDecoder,[{key:"byteIn",value:function byteIn(){var data=this.data;var bp=this.bp;if(data[bp]===0xff){if(data[bp+1]>0x8f){this.clow+=0xff00;this.ct=8;}else{bp++;this.clow+=data[bp]<<9;this.ct=7;this.bp=bp;}}else{bp++;this.clow+=bp<this.dataEnd?data[bp]<<8:0xff00;this.ct=8;this.bp=bp;}if(this.clow>0xffff){this.chigh+=this.clow>>16;this.clow&=0xffff;}}},{key:"readBit",value:function readBit(contexts,pos){var cx_index=contexts[pos]>>1,cx_mps=contexts[pos]&1;var qeTableIcx=QeTable[cx_index];var qeIcx=qeTableIcx.qe;var d;var a=this.a-qeIcx;if(this.chigh<qeIcx){if(a<qeIcx){a=qeIcx;d=cx_mps;cx_index=qeTableIcx.nmps;}else{a=qeIcx;d=1^cx_mps;if(qeTableIcx.switchFlag===1){cx_mps=d;}cx_index=qeTableIcx.nlps;}}else{this.chigh-=qeIcx;if((a&0x8000)!==0){this.a=a;return cx_mps;}if(a<qeIcx){d=1^cx_mps;if(qeTableIcx.switchFlag===1){cx_mps=d;}cx_index=qeTableIcx.nlps;}else{d=cx_mps;cx_index=qeTableIcx.nmps;}}do{if(this.ct===0){this.byteIn();}a<<=1;this.chigh=this.chigh<<1&0xffff|this.clow>>15&1;this.clow=this.clow<<1&0xffff;this.ct--;}while((a&0x8000)===0);this.a=a;contexts[pos]=cx_index<<1|cx_mps;return d;}}]);}();;// ./src/core/jbig2.js\nvar Jbig2Error=/*#__PURE__*/function(_BaseException15){function Jbig2Error(msg){_classCallCheck(this,Jbig2Error);return _callSuper(this,Jbig2Error,[msg,"Jbig2Error"]);}_inherits(Jbig2Error,_BaseException15);return _createClass(Jbig2Error);}(BaseException);var ContextCache=/*#__PURE__*/function(){function ContextCache(){_classCallCheck(this,ContextCache);}return _createClass(ContextCache,[{key:"getContexts",value:function getContexts(id){if(id in this){return this[id];}return this[id]=new Int8Array(1<<16);}}]);}();var DecodingContext=/*#__PURE__*/function(){function DecodingContext(data,start,end){_classCallCheck(this,DecodingContext);this.data=data;this.start=start;this.end=end;}return _createClass(DecodingContext,[{key:"decoder",get:function get(){var decoder=new ArithmeticDecoder(this.data,this.start,this.end);return shadow(this,"decoder",decoder);}},{key:"contextCache",get:function get(){var cache=new ContextCache();return shadow(this,"contextCache",cache);}}]);}();function decodeInteger(contextCache,procedure,decoder){var contexts=contextCache.getContexts(procedure);var prev=1;function readBits(length){var v=0;for(var i=0;i<length;i++){var bit=decoder.readBit(contexts,prev);prev=prev<256?prev<<1|bit:(prev<<1|bit)&511|256;v=v<<1|bit;}return v>>>0;}var sign=readBits(1);var value=readBits(1)?readBits(1)?readBits(1)?readBits(1)?readBits(1)?readBits(32)+4436:readBits(12)+340:readBits(8)+84:readBits(6)+20:readBits(4)+4:readBits(2);var signedValue;if(sign===0){signedValue=value;}else if(value>0){signedValue=-value;}if(signedValue>=MIN_INT_32&&signedValue<=MAX_INT_32){return signedValue;}return null;}function decodeIAID(contextCache,decoder,codeLength){var contexts=contextCache.getContexts("IAID");var prev=1;for(var i=0;i<codeLength;i++){var bit=decoder.readBit(contexts,prev);prev=prev<<1|bit;}if(codeLength<31){return prev&(1<<codeLength)-1;}return prev&0x7fffffff;}var SegmentTypes=["SymbolDictionary",null,null,null,"IntermediateTextRegion",null,"ImmediateTextRegion","ImmediateLosslessTextRegion",null,null,null,null,null,null,null,null,"PatternDictionary",null,null,null,"IntermediateHalftoneRegion",null,"ImmediateHalftoneRegion","ImmediateLosslessHalftoneRegion",null,null,null,null,null,null,null,null,null,null,null,null,"IntermediateGenericRegion",null,"ImmediateGenericRegion","ImmediateLosslessGenericRegion","IntermediateGenericRefinementRegion",null,"ImmediateGenericRefinementRegion","ImmediateLosslessGenericRefinementRegion",null,null,null,null,"PageInformation","EndOfPage","EndOfStripe","EndOfFile","Profiles","Tables",null,null,null,null,null,null,null,null,"Extension"];var CodingTemplates=[[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:2,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-2,y:0},{x:-1,y:0}],[{x:-3,y:-1},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}]];var RefinementTemplates=[{coding:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:-1,y:1},{x:0,y:1},{x:1,y:1}]},{coding:[{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:0,y:1},{x:1,y:1}]}];var ReusedContexts=[0x9b25,0x0795,0x00e5,0x0195];var RefinementReusedContexts=[0x0020,0x0008];function decodeBitmapTemplate0(width,height,decodingContext){var decoder=decodingContext.decoder;var contexts=decodingContext.contextCache.getContexts("GB");var bitmap=[];var contextLabel,i,j,pixel,row,row1,row2;var OLD_PIXEL_MASK=0x7bf7;for(i=0;i<height;i++){row=bitmap[i]=new Uint8Array(width);row1=i<1?row:bitmap[i-1];row2=i<2?row:bitmap[i-2];contextLabel=row2[0]<<13|row2[1]<<12|row2[2]<<11|row1[0]<<7|row1[1]<<6|row1[2]<<5|row1[3]<<4;for(j=0;j<width;j++){row[j]=pixel=decoder.readBit(contexts,contextLabel);contextLabel=(contextLabel&OLD_PIXEL_MASK)<<1|(j+3<width?row2[j+3]<<11:0)|(j+4<width?row1[j+4]<<4:0)|pixel;}}return bitmap;}function decodeBitmap(mmr,width,height,templateIndex,prediction,skip,at,decodingContext){if(mmr){var input=new Reader(decodingContext.data,decodingContext.start,decodingContext.end);return decodeMMRBitmap(input,width,height,false);}if(templateIndex===0&&!skip&&!prediction&&at.length===4&&at[0].x===3&&at[0].y===-1&&at[1].x===-3&&at[1].y===-1&&at[2].x===2&&at[2].y===-2&&at[3].x===-2&&at[3].y===-2){return decodeBitmapTemplate0(width,height,decodingContext);}var useskip=!!skip;var template=CodingTemplates[templateIndex].concat(at);template.sort(function(a,b){return a.y-b.y||a.x-b.x;});var templateLength=template.length;var templateX=new Int8Array(templateLength);var templateY=new Int8Array(templateLength);var changingTemplateEntries=[];var reuseMask=0,minX=0,maxX=0,minY=0;var c,k;for(k=0;k<templateLength;k++){templateX[k]=template[k].x;templateY[k]=template[k].y;minX=Math.min(minX,template[k].x);maxX=Math.max(maxX,template[k].x);minY=Math.min(minY,template[k].y);if(k<templateLength-1&&template[k].y===template[k+1].y&&template[k].x===template[k+1].x-1){reuseMask|=1<<templateLength-1-k;}else{changingTemplateEntries.push(k);}}var changingEntriesLength=changingTemplateEntries.length;var changingTemplateX=new Int8Array(changingEntriesLength);var changingTemplateY=new Int8Array(changingEntriesLength);var changingTemplateBit=new Uint16Array(changingEntriesLength);for(c=0;c<changingEntriesLength;c++){k=changingTemplateEntries[c];changingTemplateX[c]=template[k].x;changingTemplateY[c]=template[k].y;changingTemplateBit[c]=1<<templateLength-1-k;}var sbb_left=-minX;var sbb_top=-minY;var sbb_right=width-maxX;var pseudoPixelContext=ReusedContexts[templateIndex];var row=new Uint8Array(width);var bitmap=[];var decoder=decodingContext.decoder;var contexts=decodingContext.contextCache.getContexts("GB");var ltp=0,j,i0,j0,contextLabel=0,bit,shift;for(var i=0;i<height;i++){if(prediction){var sltp=decoder.readBit(contexts,pseudoPixelContext);ltp^=sltp;if(ltp){bitmap.push(row);continue;}}row=new Uint8Array(row);bitmap.push(row);for(j=0;j<width;j++){if(useskip&&skip[i][j]){row[j]=0;continue;}if(j>=sbb_left&&j<sbb_right&&i>=sbb_top){contextLabel=contextLabel<<1&reuseMask;for(k=0;k<changingEntriesLength;k++){i0=i+changingTemplateY[k];j0=j+changingTemplateX[k];bit=bitmap[i0][j0];if(bit){bit=changingTemplateBit[k];contextLabel|=bit;}}}else{contextLabel=0;shift=templateLength-1;for(k=0;k<templateLength;k++,shift--){j0=j+templateX[k];if(j0>=0&&j0<width){i0=i+templateY[k];if(i0>=0){bit=bitmap[i0][j0];if(bit){contextLabel|=bit<<shift;}}}}}var pixel=decoder.readBit(contexts,contextLabel);row[j]=pixel;}}return bitmap;}function decodeRefinement(width,height,templateIndex,referenceBitmap,offsetX,offsetY,prediction,at,decodingContext){var codingTemplate=RefinementTemplates[templateIndex].coding;if(templateIndex===0){codingTemplate=codingTemplate.concat([at[0]]);}var codingTemplateLength=codingTemplate.length;var codingTemplateX=new Int32Array(codingTemplateLength);var codingTemplateY=new Int32Array(codingTemplateLength);var k;for(k=0;k<codingTemplateLength;k++){codingTemplateX[k]=codingTemplate[k].x;codingTemplateY[k]=codingTemplate[k].y;}var referenceTemplate=RefinementTemplates[templateIndex].reference;if(templateIndex===0){referenceTemplate=referenceTemplate.concat([at[1]]);}var referenceTemplateLength=referenceTemplate.length;var referenceTemplateX=new Int32Array(referenceTemplateLength);var referenceTemplateY=new Int32Array(referenceTemplateLength);for(k=0;k<referenceTemplateLength;k++){referenceTemplateX[k]=referenceTemplate[k].x;referenceTemplateY[k]=referenceTemplate[k].y;}var referenceWidth=referenceBitmap[0].length;var referenceHeight=referenceBitmap.length;var pseudoPixelContext=RefinementReusedContexts[templateIndex];var bitmap=[];var decoder=decodingContext.decoder;var contexts=decodingContext.contextCache.getContexts("GR");var ltp=0;for(var i=0;i<height;i++){if(prediction){var sltp=decoder.readBit(contexts,pseudoPixelContext);ltp^=sltp;if(ltp){throw new Jbig2Error("prediction is not supported");}}var row=new Uint8Array(width);bitmap.push(row);for(var j=0;j<width;j++){var i0=void 0,j0=void 0;var contextLabel=0;for(k=0;k<codingTemplateLength;k++){i0=i+codingTemplateY[k];j0=j+codingTemplateX[k];if(i0<0||j0<0||j0>=width){contextLabel<<=1;}else{contextLabel=contextLabel<<1|bitmap[i0][j0];}}for(k=0;k<referenceTemplateLength;k++){i0=i+referenceTemplateY[k]-offsetY;j0=j+referenceTemplateX[k]-offsetX;if(i0<0||i0>=referenceHeight||j0<0||j0>=referenceWidth){contextLabel<<=1;}else{contextLabel=contextLabel<<1|referenceBitmap[i0][j0];}}var pixel=decoder.readBit(contexts,contextLabel);row[j]=pixel;}}return bitmap;}function decodeSymbolDictionary(huffman,refinement,symbols,numberOfNewSymbols,numberOfExportedSymbols,huffmanTables,templateIndex,at,refinementTemplateIndex,refinementAt,decodingContext,huffmanInput){if(huffman&&refinement){throw new Jbig2Error("symbol refinement with Huffman is not supported");}var newSymbols=[];var currentHeight=0;var symbolCodeLength=log2(symbols.length+numberOfNewSymbols);var decoder=decodingContext.decoder;var contextCache=decodingContext.contextCache;var tableB1,symbolWidths;if(huffman){tableB1=getStandardTable(1);symbolWidths=[];symbolCodeLength=Math.max(symbolCodeLength,1);}while(newSymbols.length<numberOfNewSymbols){var deltaHeight=huffman?huffmanTables.tableDeltaHeight.decode(huffmanInput):decodeInteger(contextCache,"IADH",decoder);currentHeight+=deltaHeight;var currentWidth=0,totalWidth=0;var firstSymbol=huffman?symbolWidths.length:0;while(true){var deltaWidth=huffman?huffmanTables.tableDeltaWidth.decode(huffmanInput):decodeInteger(contextCache,"IADW",decoder);if(deltaWidth===null){break;}currentWidth+=deltaWidth;totalWidth+=currentWidth;var bitmap=void 0;if(refinement){var numberOfInstances=decodeInteger(contextCache,"IAAI",decoder);if(numberOfInstances>1){bitmap=decodeTextRegion(huffman,refinement,currentWidth,currentHeight,0,numberOfInstances,1,symbols.concat(newSymbols),symbolCodeLength,0,0,1,0,huffmanTables,refinementTemplateIndex,refinementAt,decodingContext,0,huffmanInput);}else{var symbolId=decodeIAID(contextCache,decoder,symbolCodeLength);var rdx=decodeInteger(contextCache,"IARDX",decoder);var rdy=decodeInteger(contextCache,"IARDY",decoder);var symbol=symbolId<symbols.length?symbols[symbolId]:newSymbols[symbolId-symbols.length];bitmap=decodeRefinement(currentWidth,currentHeight,refinementTemplateIndex,symbol,rdx,rdy,false,refinementAt,decodingContext);}newSymbols.push(bitmap);}else if(huffman){symbolWidths.push(currentWidth);}else{bitmap=decodeBitmap(false,currentWidth,currentHeight,templateIndex,false,null,at,decodingContext);newSymbols.push(bitmap);}}if(huffman&&!refinement){var bitmapSize=huffmanTables.tableBitmapSize.decode(huffmanInput);huffmanInput.byteAlign();var collectiveBitmap=void 0;if(bitmapSize===0){collectiveBitmap=readUncompressedBitmap(huffmanInput,totalWidth,currentHeight);}else{var originalEnd=huffmanInput.end;var bitmapEnd=huffmanInput.position+bitmapSize;huffmanInput.end=bitmapEnd;collectiveBitmap=decodeMMRBitmap(huffmanInput,totalWidth,currentHeight,false);huffmanInput.end=originalEnd;huffmanInput.position=bitmapEnd;}var numberOfSymbolsDecoded=symbolWidths.length;if(firstSymbol===numberOfSymbolsDecoded-1){newSymbols.push(collectiveBitmap);}else{var _i21=void 0,y=void 0,xMin=0,xMax=void 0,bitmapWidth=void 0,symbolBitmap=void 0;for(_i21=firstSymbol;_i21<numberOfSymbolsDecoded;_i21++){bitmapWidth=symbolWidths[_i21];xMax=xMin+bitmapWidth;symbolBitmap=[];for(y=0;y<currentHeight;y++){symbolBitmap.push(collectiveBitmap[y].subarray(xMin,xMax));}newSymbols.push(symbolBitmap);xMin=xMax;}}}}var exportedSymbols=[],flags=[];var currentFlag=false,i,ii;var totalSymbolsLength=symbols.length+numberOfNewSymbols;while(flags.length<totalSymbolsLength){var runLength=huffman?tableB1.decode(huffmanInput):decodeInteger(contextCache,"IAEX",decoder);while(runLength--){flags.push(currentFlag);}currentFlag=!currentFlag;}for(i=0,ii=symbols.length;i<ii;i++){if(flags[i]){exportedSymbols.push(symbols[i]);}}for(var j=0;j<numberOfNewSymbols;i++,j++){if(flags[i]){exportedSymbols.push(newSymbols[j]);}}return exportedSymbols;}function decodeTextRegion(huffman,refinement,width,height,defaultPixelValue,numberOfSymbolInstances,stripSize,inputSymbols,symbolCodeLength,transposed,dsOffset,referenceCorner,combinationOperator,huffmanTables,refinementTemplateIndex,refinementAt,decodingContext,logStripSize,huffmanInput){if(huffman&&refinement){throw new Jbig2Error("refinement with Huffman is not supported");}var bitmap=[];var i,row;for(i=0;i<height;i++){row=new Uint8Array(width);if(defaultPixelValue){row.fill(defaultPixelValue);}bitmap.push(row);}var decoder=decodingContext.decoder;var contextCache=decodingContext.contextCache;var stripT=huffman?-huffmanTables.tableDeltaT.decode(huffmanInput):-decodeInteger(contextCache,"IADT",decoder);var firstS=0;i=0;while(i<numberOfSymbolInstances){var deltaT=huffman?huffmanTables.tableDeltaT.decode(huffmanInput):decodeInteger(contextCache,"IADT",decoder);stripT+=deltaT;var deltaFirstS=huffman?huffmanTables.tableFirstS.decode(huffmanInput):decodeInteger(contextCache,"IAFS",decoder);firstS+=deltaFirstS;var currentS=firstS;do{var currentT=0;if(stripSize>1){currentT=huffman?huffmanInput.readBits(logStripSize):decodeInteger(contextCache,"IAIT",decoder);}var t=stripSize*stripT+currentT;var symbolId=huffman?huffmanTables.symbolIDTable.decode(huffmanInput):decodeIAID(contextCache,decoder,symbolCodeLength);var applyRefinement=refinement&&(huffman?huffmanInput.readBit():decodeInteger(contextCache,"IARI",decoder));var symbolBitmap=inputSymbols[symbolId];var symbolWidth=symbolBitmap[0].length;var symbolHeight=symbolBitmap.length;if(applyRefinement){var rdw=decodeInteger(contextCache,"IARDW",decoder);var rdh=decodeInteger(contextCache,"IARDH",decoder);var rdx=decodeInteger(contextCache,"IARDX",decoder);var rdy=decodeInteger(contextCache,"IARDY",decoder);symbolWidth+=rdw;symbolHeight+=rdh;symbolBitmap=decodeRefinement(symbolWidth,symbolHeight,refinementTemplateIndex,symbolBitmap,(rdw>>1)+rdx,(rdh>>1)+rdy,false,refinementAt,decodingContext);}var increment=0;if(!transposed){if(referenceCorner>1){currentS+=symbolWidth-1;}else{increment=symbolWidth-1;}}else if(!(referenceCorner&1)){currentS+=symbolHeight-1;}else{increment=symbolHeight-1;}var offsetT=t-(referenceCorner&1?0:symbolHeight-1);var offsetS=currentS-(referenceCorner&2?symbolWidth-1:0);var s2=void 0,t2=void 0,symbolRow=void 0;if(transposed){for(s2=0;s2<symbolHeight;s2++){row=bitmap[offsetS+s2];if(!row){continue;}symbolRow=symbolBitmap[s2];var maxWidth=Math.min(width-offsetT,symbolWidth);switch(combinationOperator){case 0:for(t2=0;t2<maxWidth;t2++){row[offsetT+t2]|=symbolRow[t2];}break;case 2:for(t2=0;t2<maxWidth;t2++){row[offsetT+t2]^=symbolRow[t2];}break;default:throw new Jbig2Error("operator ".concat(combinationOperator," is not supported"));}}}else{for(t2=0;t2<symbolHeight;t2++){row=bitmap[offsetT+t2];if(!row){continue;}symbolRow=symbolBitmap[t2];switch(combinationOperator){case 0:for(s2=0;s2<symbolWidth;s2++){row[offsetS+s2]|=symbolRow[s2];}break;case 2:for(s2=0;s2<symbolWidth;s2++){row[offsetS+s2]^=symbolRow[s2];}break;default:throw new Jbig2Error("operator ".concat(combinationOperator," is not supported"));}}}i++;var deltaS=huffman?huffmanTables.tableDeltaS.decode(huffmanInput):decodeInteger(contextCache,"IADS",decoder);if(deltaS===null){break;}currentS+=increment+deltaS+dsOffset;}while(true);}return bitmap;}function decodePatternDictionary(mmr,patternWidth,patternHeight,maxPatternIndex,template,decodingContext){var at=[];if(!mmr){at.push({x:-patternWidth,y:0});if(template===0){at.push({x:-3,y:-1},{x:2,y:-2},{x:-2,y:-2});}}var collectiveWidth=(maxPatternIndex+1)*patternWidth;var collectiveBitmap=decodeBitmap(mmr,collectiveWidth,patternHeight,template,false,null,at,decodingContext);var patterns=[];for(var i=0;i<=maxPatternIndex;i++){var patternBitmap=[];var xMin=patternWidth*i;var xMax=xMin+patternWidth;for(var y=0;y<patternHeight;y++){patternBitmap.push(collectiveBitmap[y].subarray(xMin,xMax));}patterns.push(patternBitmap);}return patterns;}function decodeHalftoneRegion(mmr,patterns,template,regionWidth,regionHeight,defaultPixelValue,enableSkip,combinationOperator,gridWidth,gridHeight,gridOffsetX,gridOffsetY,gridVectorX,gridVectorY,decodingContext){var skip=null;if(enableSkip){throw new Jbig2Error("skip is not supported");}if(combinationOperator!==0){throw new Jbig2Error("operator \\"".concat(combinationOperator,"\\" is not supported in halftone region"));}var regionBitmap=[];var i,j,row;for(i=0;i<regionHeight;i++){row=new Uint8Array(regionWidth);if(defaultPixelValue){row.fill(defaultPixelValue);}regionBitmap.push(row);}var numberOfPatterns=patterns.length;var pattern0=patterns[0];var patternWidth=pattern0[0].length,patternHeight=pattern0.length;var bitsPerValue=log2(numberOfPatterns);var at=[];if(!mmr){at.push({x:template<=1?3:2,y:-1});if(template===0){at.push({x:-3,y:-1},{x:2,y:-2},{x:-2,y:-2});}}var grayScaleBitPlanes=[];var mmrInput,bitmap;if(mmr){mmrInput=new Reader(decodingContext.data,decodingContext.start,decodingContext.end);}for(i=bitsPerValue-1;i>=0;i--){if(mmr){bitmap=decodeMMRBitmap(mmrInput,gridWidth,gridHeight,true);}else{bitmap=decodeBitmap(false,gridWidth,gridHeight,template,false,skip,at,decodingContext);}grayScaleBitPlanes[i]=bitmap;}var mg,ng,bit,patternIndex,patternBitmap,x,y,patternRow,regionRow;for(mg=0;mg<gridHeight;mg++){for(ng=0;ng<gridWidth;ng++){bit=0;patternIndex=0;for(j=bitsPerValue-1;j>=0;j--){bit^=grayScaleBitPlanes[j][mg][ng];patternIndex|=bit<<j;}patternBitmap=patterns[patternIndex];x=gridOffsetX+mg*gridVectorY+ng*gridVectorX>>8;y=gridOffsetY+mg*gridVectorX-ng*gridVectorY>>8;if(x>=0&&x+patternWidth<=regionWidth&&y>=0&&y+patternHeight<=regionHeight){for(i=0;i<patternHeight;i++){regionRow=regionBitmap[y+i];patternRow=patternBitmap[i];for(j=0;j<patternWidth;j++){regionRow[x+j]|=patternRow[j];}}}else{var regionX=void 0,regionY=void 0;for(i=0;i<patternHeight;i++){regionY=y+i;if(regionY<0||regionY>=regionHeight){continue;}regionRow=regionBitmap[regionY];patternRow=patternBitmap[i];for(j=0;j<patternWidth;j++){regionX=x+j;if(regionX>=0&&regionX<regionWidth){regionRow[regionX]|=patternRow[j];}}}}}}return regionBitmap;}function readSegmentHeader(data,start){var segmentHeader={};segmentHeader.number=readUint32(data,start);var flags=data[start+4];var segmentType=flags&0x3f;if(!SegmentTypes[segmentType]){throw new Jbig2Error("invalid segment type: "+segmentType);}segmentHeader.type=segmentType;segmentHeader.typeName=SegmentTypes[segmentType];segmentHeader.deferredNonRetain=!!(flags&0x80);var pageAssociationFieldSize=!!(flags&0x40);var referredFlags=data[start+5];var referredToCount=referredFlags>>5&7;var retainBits=[referredFlags&31];var position=start+6;if(referredFlags===7){referredToCount=readUint32(data,position-1)&0x1fffffff;position+=3;var bytes=referredToCount+7>>3;retainBits[0]=data[position++];while(--bytes>0){retainBits.push(data[position++]);}}else if(referredFlags===5||referredFlags===6){throw new Jbig2Error("invalid referred-to flags");}segmentHeader.retainBits=retainBits;var referredToSegmentNumberSize=4;if(segmentHeader.number<=256){referredToSegmentNumberSize=1;}else if(segmentHeader.number<=65536){referredToSegmentNumberSize=2;}var referredTo=[];var i,ii;for(i=0;i<referredToCount;i++){var number=void 0;if(referredToSegmentNumberSize===1){number=data[position];}else if(referredToSegmentNumberSize===2){number=readUint16(data,position);}else{number=readUint32(data,position);}referredTo.push(number);position+=referredToSegmentNumberSize;}segmentHeader.referredTo=referredTo;if(!pageAssociationFieldSize){segmentHeader.pageAssociation=data[position++];}else{segmentHeader.pageAssociation=readUint32(data,position);position+=4;}segmentHeader.length=readUint32(data,position);position+=4;if(segmentHeader.length===0xffffffff){if(segmentType===38){var genericRegionInfo=readRegionSegmentInformation(data,position);var genericRegionSegmentFlags=data[position+RegionSegmentInformationFieldLength];var genericRegionMmr=!!(genericRegionSegmentFlags&1);var searchPatternLength=6;var searchPattern=new Uint8Array(searchPatternLength);if(!genericRegionMmr){searchPattern[0]=0xff;searchPattern[1]=0xac;}searchPattern[2]=genericRegionInfo.height>>>24&0xff;searchPattern[3]=genericRegionInfo.height>>16&0xff;searchPattern[4]=genericRegionInfo.height>>8&0xff;searchPattern[5]=genericRegionInfo.height&0xff;for(i=position,ii=data.length;i<ii;i++){var j=0;while(j<searchPatternLength&&searchPattern[j]===data[i+j]){j++;}if(j===searchPatternLength){segmentHeader.length=i+searchPatternLength;break;}}if(segmentHeader.length===0xffffffff){throw new Jbig2Error("segment end was not found");}}else{throw new Jbig2Error("invalid unknown segment length");}}segmentHeader.headerEnd=position;return segmentHeader;}function readSegments(header,data,start,end){var segments=[];var position=start;while(position<end){var segmentHeader=readSegmentHeader(data,position);position=segmentHeader.headerEnd;var segment={header:segmentHeader,data:data};if(!header.randomAccess){segment.start=position;position+=segmentHeader.length;segment.end=position;}segments.push(segment);if(segmentHeader.type===51){break;}}if(header.randomAccess){for(var i=0,ii=segments.length;i<ii;i++){segments[i].start=position;position+=segments[i].header.length;segments[i].end=position;}}return segments;}function readRegionSegmentInformation(data,start){return{width:readUint32(data,start),height:readUint32(data,start+4),x:readUint32(data,start+8),y:readUint32(data,start+12),combinationOperator:data[start+16]&7};}var RegionSegmentInformationFieldLength=17;function processSegment(segment,visitor){var header=segment.header;var data=segment.data,end=segment.end;var position=segment.start;var args,at,i,atLength;switch(header.type){case 0:var dictionary={};var dictionaryFlags=readUint16(data,position);dictionary.huffman=!!(dictionaryFlags&1);dictionary.refinement=!!(dictionaryFlags&2);dictionary.huffmanDHSelector=dictionaryFlags>>2&3;dictionary.huffmanDWSelector=dictionaryFlags>>4&3;dictionary.bitmapSizeSelector=dictionaryFlags>>6&1;dictionary.aggregationInstancesSelector=dictionaryFlags>>7&1;dictionary.bitmapCodingContextUsed=!!(dictionaryFlags&256);dictionary.bitmapCodingContextRetained=!!(dictionaryFlags&512);dictionary.template=dictionaryFlags>>10&3;dictionary.refinementTemplate=dictionaryFlags>>12&1;position+=2;if(!dictionary.huffman){atLength=dictionary.template===0?4:1;at=[];for(i=0;i<atLength;i++){at.push({x:readInt8(data,position),y:readInt8(data,position+1)});position+=2;}dictionary.at=at;}if(dictionary.refinement&&!dictionary.refinementTemplate){at=[];for(i=0;i<2;i++){at.push({x:readInt8(data,position),y:readInt8(data,position+1)});position+=2;}dictionary.refinementAt=at;}dictionary.numberOfExportedSymbols=readUint32(data,position);position+=4;dictionary.numberOfNewSymbols=readUint32(data,position);position+=4;args=[dictionary,header.number,header.referredTo,data,position,end];break;case 6:case 7:var textRegion={};textRegion.info=readRegionSegmentInformation(data,position);position+=RegionSegmentInformationFieldLength;var textRegionSegmentFlags=readUint16(data,position);position+=2;textRegion.huffman=!!(textRegionSegmentFlags&1);textRegion.refinement=!!(textRegionSegmentFlags&2);textRegion.logStripSize=textRegionSegmentFlags>>2&3;textRegion.stripSize=1<<textRegion.logStripSize;textRegion.referenceCorner=textRegionSegmentFlags>>4&3;textRegion.transposed=!!(textRegionSegmentFlags&64);textRegion.combinationOperator=textRegionSegmentFlags>>7&3;textRegion.defaultPixelValue=textRegionSegmentFlags>>9&1;textRegion.dsOffset=textRegionSegmentFlags<<17>>27;textRegion.refinementTemplate=textRegionSegmentFlags>>15&1;if(textRegion.huffman){var textRegionHuffmanFlags=readUint16(data,position);position+=2;textRegion.huffmanFS=textRegionHuffmanFlags&3;textRegion.huffmanDS=textRegionHuffmanFlags>>2&3;textRegion.huffmanDT=textRegionHuffmanFlags>>4&3;textRegion.huffmanRefinementDW=textRegionHuffmanFlags>>6&3;textRegion.huffmanRefinementDH=textRegionHuffmanFlags>>8&3;textRegion.huffmanRefinementDX=textRegionHuffmanFlags>>10&3;textRegion.huffmanRefinementDY=textRegionHuffmanFlags>>12&3;textRegion.huffmanRefinementSizeSelector=!!(textRegionHuffmanFlags&0x4000);}if(textRegion.refinement&&!textRegion.refinementTemplate){at=[];for(i=0;i<2;i++){at.push({x:readInt8(data,position),y:readInt8(data,position+1)});position+=2;}textRegion.refinementAt=at;}textRegion.numberOfSymbolInstances=readUint32(data,position);position+=4;args=[textRegion,header.referredTo,data,position,end];break;case 16:var patternDictionary={};var patternDictionaryFlags=data[position++];patternDictionary.mmr=!!(patternDictionaryFlags&1);patternDictionary.template=patternDictionaryFlags>>1&3;patternDictionary.patternWidth=data[position++];patternDictionary.patternHeight=data[position++];patternDictionary.maxPatternIndex=readUint32(data,position);position+=4;args=[patternDictionary,header.number,data,position,end];break;case 22:case 23:var halftoneRegion={};halftoneRegion.info=readRegionSegmentInformation(data,position);position+=RegionSegmentInformationFieldLength;var halftoneRegionFlags=data[position++];halftoneRegion.mmr=!!(halftoneRegionFlags&1);halftoneRegion.template=halftoneRegionFlags>>1&3;halftoneRegion.enableSkip=!!(halftoneRegionFlags&8);halftoneRegion.combinationOperator=halftoneRegionFlags>>4&7;halftoneRegion.defaultPixelValue=halftoneRegionFlags>>7&1;halftoneRegion.gridWidth=readUint32(data,position);position+=4;halftoneRegion.gridHeight=readUint32(data,position);position+=4;halftoneRegion.gridOffsetX=readUint32(data,position)&0xffffffff;position+=4;halftoneRegion.gridOffsetY=readUint32(data,position)&0xffffffff;position+=4;halftoneRegion.gridVectorX=readUint16(data,position);position+=2;halftoneRegion.gridVectorY=readUint16(data,position);position+=2;args=[halftoneRegion,header.referredTo,data,position,end];break;case 38:case 39:var genericRegion={};genericRegion.info=readRegionSegmentInformation(data,position);position+=RegionSegmentInformationFieldLength;var genericRegionSegmentFlags=data[position++];genericRegion.mmr=!!(genericRegionSegmentFlags&1);genericRegion.template=genericRegionSegmentFlags>>1&3;genericRegion.prediction=!!(genericRegionSegmentFlags&8);if(!genericRegion.mmr){atLength=genericRegion.template===0?4:1;at=[];for(i=0;i<atLength;i++){at.push({x:readInt8(data,position),y:readInt8(data,position+1)});position+=2;}genericRegion.at=at;}args=[genericRegion,data,position,end];break;case 48:var pageInfo={width:readUint32(data,position),height:readUint32(data,position+4),resolutionX:readUint32(data,position+8),resolutionY:readUint32(data,position+12)};if(pageInfo.height===0xffffffff){delete pageInfo.height;}var pageSegmentFlags=data[position+16];readUint16(data,position+17);pageInfo.lossless=!!(pageSegmentFlags&1);pageInfo.refinement=!!(pageSegmentFlags&2);pageInfo.defaultPixelValue=pageSegmentFlags>>2&1;pageInfo.combinationOperator=pageSegmentFlags>>3&3;pageInfo.requiresBuffer=!!(pageSegmentFlags&32);pageInfo.combinationOperatorOverride=!!(pageSegmentFlags&64);args=[pageInfo];break;case 49:break;case 50:break;case 51:break;case 53:args=[header.number,data,position,end];break;case 62:break;default:throw new Jbig2Error("segment type ".concat(header.typeName,"(").concat(header.type,") is not implemented"));}var callbackName="on"+header.typeName;if(callbackName in visitor){visitor[callbackName].apply(visitor,args);}}function processSegments(segments,visitor){for(var i=0,ii=segments.length;i<ii;i++){processSegment(segments[i],visitor);}}function parseJbig2Chunks(chunks){var visitor=new SimpleSegmentVisitor();for(var i=0,ii=chunks.length;i<ii;i++){var chunk=chunks[i];var segments=readSegments({},chunk.data,chunk.start,chunk.end);processSegments(segments,visitor);}return visitor.buffer;}function parseJbig2(data){throw new Error("Not implemented: parseJbig2");}var SimpleSegmentVisitor=/*#__PURE__*/function(){function SimpleSegmentVisitor(){_classCallCheck(this,SimpleSegmentVisitor);}return _createClass(SimpleSegmentVisitor,[{key:"onPageInformation",value:function onPageInformation(info){this.currentPageInfo=info;var rowSize=info.width+7>>3;var buffer=new Uint8ClampedArray(rowSize*info.height);if(info.defaultPixelValue){buffer.fill(0xff);}this.buffer=buffer;}},{key:"drawBitmap",value:function drawBitmap(regionInfo,bitmap){var pageInfo=this.currentPageInfo;var width=regionInfo.width,height=regionInfo.height;var rowSize=pageInfo.width+7>>3;var combinationOperator=pageInfo.combinationOperatorOverride?regionInfo.combinationOperator:pageInfo.combinationOperator;var buffer=this.buffer;var mask0=128>>(regionInfo.x&7);var offset0=regionInfo.y*rowSize+(regionInfo.x>>3);var i,j,mask,offset;switch(combinationOperator){case 0:for(i=0;i<height;i++){mask=mask0;offset=offset0;for(j=0;j<width;j++){if(bitmap[i][j]){buffer[offset]|=mask;}mask>>=1;if(!mask){mask=128;offset++;}}offset0+=rowSize;}break;case 2:for(i=0;i<height;i++){mask=mask0;offset=offset0;for(j=0;j<width;j++){if(bitmap[i][j]){buffer[offset]^=mask;}mask>>=1;if(!mask){mask=128;offset++;}}offset0+=rowSize;}break;default:throw new Jbig2Error("operator ".concat(combinationOperator," is not supported"));}}},{key:"onImmediateGenericRegion",value:function onImmediateGenericRegion(region,data,start,end){var regionInfo=region.info;var decodingContext=new DecodingContext(data,start,end);var bitmap=decodeBitmap(region.mmr,regionInfo.width,regionInfo.height,region.template,region.prediction,null,region.at,decodingContext);this.drawBitmap(regionInfo,bitmap);}},{key:"onImmediateLosslessGenericRegion",value:function onImmediateLosslessGenericRegion(){this.onImmediateGenericRegion.apply(this,arguments);}},{key:"onSymbolDictionary",value:function onSymbolDictionary(dictionary,currentSegment,referredSegments,data,start,end){var huffmanTables,huffmanInput;if(dictionary.huffman){huffmanTables=getSymbolDictionaryHuffmanTables(dictionary,referredSegments,this.customTables);huffmanInput=new Reader(data,start,end);}var symbols=this.symbols;if(!symbols){this.symbols=symbols={};}var inputSymbols=[];var _iterator28=_createForOfIteratorHelper(referredSegments),_step28;try{for(_iterator28.s();!(_step28=_iterator28.n()).done;){var referredSegment=_step28.value;var referredSymbols=symbols[referredSegment];if(referredSymbols){inputSymbols.push.apply(inputSymbols,_toConsumableArray(referredSymbols));}}}catch(err){_iterator28.e(err);}finally{_iterator28.f();}var decodingContext=new DecodingContext(data,start,end);symbols[currentSegment]=decodeSymbolDictionary(dictionary.huffman,dictionary.refinement,inputSymbols,dictionary.numberOfNewSymbols,dictionary.numberOfExportedSymbols,huffmanTables,dictionary.template,dictionary.at,dictionary.refinementTemplate,dictionary.refinementAt,decodingContext,huffmanInput);}},{key:"onImmediateTextRegion",value:function onImmediateTextRegion(region,referredSegments,data,start,end){var regionInfo=region.info;var huffmanTables,huffmanInput;var symbols=this.symbols;var inputSymbols=[];var _iterator29=_createForOfIteratorHelper(referredSegments),_step29;try{for(_iterator29.s();!(_step29=_iterator29.n()).done;){var referredSegment=_step29.value;var referredSymbols=symbols[referredSegment];if(referredSymbols){inputSymbols.push.apply(inputSymbols,_toConsumableArray(referredSymbols));}}}catch(err){_iterator29.e(err);}finally{_iterator29.f();}var symbolCodeLength=log2(inputSymbols.length);if(region.huffman){huffmanInput=new Reader(data,start,end);huffmanTables=getTextRegionHuffmanTables(region,referredSegments,this.customTables,inputSymbols.length,huffmanInput);}var decodingContext=new DecodingContext(data,start,end);var bitmap=decodeTextRegion(region.huffman,region.refinement,regionInfo.width,regionInfo.height,region.defaultPixelValue,region.numberOfSymbolInstances,region.stripSize,inputSymbols,symbolCodeLength,region.transposed,region.dsOffset,region.referenceCorner,region.combinationOperator,huffmanTables,region.refinementTemplate,region.refinementAt,decodingContext,region.logStripSize,huffmanInput);this.drawBitmap(regionInfo,bitmap);}},{key:"onImmediateLosslessTextRegion",value:function onImmediateLosslessTextRegion(){this.onImmediateTextRegion.apply(this,arguments);}},{key:"onPatternDictionary",value:function onPatternDictionary(dictionary,currentSegment,data,start,end){var patterns=this.patterns;if(!patterns){this.patterns=patterns={};}var decodingContext=new DecodingContext(data,start,end);patterns[currentSegment]=decodePatternDictionary(dictionary.mmr,dictionary.patternWidth,dictionary.patternHeight,dictionary.maxPatternIndex,dictionary.template,decodingContext);}},{key:"onImmediateHalftoneRegion",value:function onImmediateHalftoneRegion(region,referredSegments,data,start,end){var patterns=this.patterns[referredSegments[0]];var regionInfo=region.info;var decodingContext=new DecodingContext(data,start,end);var bitmap=decodeHalftoneRegion(region.mmr,patterns,region.template,regionInfo.width,regionInfo.height,region.defaultPixelValue,region.enableSkip,region.combinationOperator,region.gridWidth,region.gridHeight,region.gridOffsetX,region.gridOffsetY,region.gridVectorX,region.gridVectorY,decodingContext);this.drawBitmap(regionInfo,bitmap);}},{key:"onImmediateLosslessHalftoneRegion",value:function onImmediateLosslessHalftoneRegion(){this.onImmediateHalftoneRegion.apply(this,arguments);}},{key:"onTables",value:function onTables(currentSegment,data,start,end){var customTables=this.customTables;if(!customTables){this.customTables=customTables={};}customTables[currentSegment]=decodeTablesSegment(data,start,end);}}]);}();var HuffmanLine=/*#__PURE__*/_createClass(function HuffmanLine(lineData){_classCallCheck(this,HuffmanLine);if(lineData.length===2){this.isOOB=true;this.rangeLow=0;this.prefixLength=lineData[0];this.rangeLength=0;this.prefixCode=lineData[1];this.isLowerRange=false;}else{this.isOOB=false;this.rangeLow=lineData[0];this.prefixLength=lineData[1];this.rangeLength=lineData[2];this.prefixCode=lineData[3];this.isLowerRange=lineData[4]==="lower";}});var HuffmanTreeNode=/*#__PURE__*/function(){function HuffmanTreeNode(line){_classCallCheck(this,HuffmanTreeNode);this.children=[];if(line){this.isLeaf=true;this.rangeLength=line.rangeLength;this.rangeLow=line.rangeLow;this.isLowerRange=line.isLowerRange;this.isOOB=line.isOOB;}else{this.isLeaf=false;}}return _createClass(HuffmanTreeNode,[{key:"buildTree",value:function buildTree(line,shift){var bit=line.prefixCode>>shift&1;if(shift<=0){this.children[bit]=new HuffmanTreeNode(line);}else{var node=this.children[bit];if(!node){this.children[bit]=node=new HuffmanTreeNode(null);}node.buildTree(line,shift-1);}}},{key:"decodeNode",value:function decodeNode(reader){if(this.isLeaf){if(this.isOOB){return null;}var htOffset=reader.readBits(this.rangeLength);return this.rangeLow+(this.isLowerRange?-htOffset:htOffset);}var node=this.children[reader.readBit()];if(!node){throw new Jbig2Error("invalid Huffman data");}return node.decodeNode(reader);}}]);}();var HuffmanTable=/*#__PURE__*/function(){function HuffmanTable(lines,prefixCodesDone){_classCallCheck(this,HuffmanTable);if(!prefixCodesDone){this.assignPrefixCodes(lines);}this.rootNode=new HuffmanTreeNode(null);for(var i=0,ii=lines.length;i<ii;i++){var line=lines[i];if(line.prefixLength>0){this.rootNode.buildTree(line,line.prefixLength-1);}}}return _createClass(HuffmanTable,[{key:"decode",value:function decode(reader){return this.rootNode.decodeNode(reader);}},{key:"assignPrefixCodes",value:function assignPrefixCodes(lines){var linesLength=lines.length;var prefixLengthMax=0;for(var i=0;i<linesLength;i++){prefixLengthMax=Math.max(prefixLengthMax,lines[i].prefixLength);}var histogram=new Uint32Array(prefixLengthMax+1);for(var _i22=0;_i22<linesLength;_i22++){histogram[lines[_i22].prefixLength]++;}var currentLength=1,firstCode=0,currentCode,currentTemp,line;histogram[0]=0;while(currentLength<=prefixLengthMax){firstCode=firstCode+histogram[currentLength-1]<<1;currentCode=firstCode;currentTemp=0;while(currentTemp<linesLength){line=lines[currentTemp];if(line.prefixLength===currentLength){line.prefixCode=currentCode;currentCode++;}currentTemp++;}currentLength++;}}}]);}();function decodeTablesSegment(data,start,end){var flags=data[start];var lowestValue=readUint32(data,start+1)&0xffffffff;var highestValue=readUint32(data,start+5)&0xffffffff;var reader=new Reader(data,start+9,end);var prefixSizeBits=(flags>>1&7)+1;var rangeSizeBits=(flags>>4&7)+1;var lines=[];var prefixLength,rangeLength,currentRangeLow=lowestValue;do{prefixLength=reader.readBits(prefixSizeBits);rangeLength=reader.readBits(rangeSizeBits);lines.push(new HuffmanLine([currentRangeLow,prefixLength,rangeLength,0]));currentRangeLow+=1<<rangeLength;}while(currentRangeLow<highestValue);prefixLength=reader.readBits(prefixSizeBits);lines.push(new HuffmanLine([lowestValue-1,prefixLength,32,0,"lower"]));prefixLength=reader.readBits(prefixSizeBits);lines.push(new HuffmanLine([highestValue,prefixLength,32,0]));if(flags&1){prefixLength=reader.readBits(prefixSizeBits);lines.push(new HuffmanLine([prefixLength,0]));}return new HuffmanTable(lines,false);}var standardTablesCache={};function getStandardTable(number){var table=standardTablesCache[number];if(table){return table;}var lines;switch(number){case 1:lines=[[0,1,4,0x0],[16,2,8,0x2],[272,3,16,0x6],[65808,3,32,0x7]];break;case 2:lines=[[0,1,0,0x0],[1,2,0,0x2],[2,3,0,0x6],[3,4,3,0xe],[11,5,6,0x1e],[75,6,32,0x3e],[6,0x3f]];break;case 3:lines=[[-256,8,8,0xfe],[0,1,0,0x0],[1,2,0,0x2],[2,3,0,0x6],[3,4,3,0xe],[11,5,6,0x1e],[-257,8,32,0xff,"lower"],[75,7,32,0x7e],[6,0x3e]];break;case 4:lines=[[1,1,0,0x0],[2,2,0,0x2],[3,3,0,0x6],[4,4,3,0xe],[12,5,6,0x1e],[76,5,32,0x1f]];break;case 5:lines=[[-255,7,8,0x7e],[1,1,0,0x0],[2,2,0,0x2],[3,3,0,0x6],[4,4,3,0xe],[12,5,6,0x1e],[-256,7,32,0x7f,"lower"],[76,6,32,0x3e]];break;case 6:lines=[[-2048,5,10,0x1c],[-1024,4,9,0x8],[-512,4,8,0x9],[-256,4,7,0xa],[-128,5,6,0x1d],[-64,5,5,0x1e],[-32,4,5,0xb],[0,2,7,0x0],[128,3,7,0x2],[256,3,8,0x3],[512,4,9,0xc],[1024,4,10,0xd],[-2049,6,32,0x3e,"lower"],[2048,6,32,0x3f]];break;case 7:lines=[[-1024,4,9,0x8],[-512,3,8,0x0],[-256,4,7,0x9],[-128,5,6,0x1a],[-64,5,5,0x1b],[-32,4,5,0xa],[0,4,5,0xb],[32,5,5,0x1c],[64,5,6,0x1d],[128,4,7,0xc],[256,3,8,0x1],[512,3,9,0x2],[1024,3,10,0x3],[-1025,5,32,0x1e,"lower"],[2048,5,32,0x1f]];break;case 8:lines=[[-15,8,3,0xfc],[-7,9,1,0x1fc],[-5,8,1,0xfd],[-3,9,0,0x1fd],[-2,7,0,0x7c],[-1,4,0,0xa],[0,2,1,0x0],[2,5,0,0x1a],[3,6,0,0x3a],[4,3,4,0x4],[20,6,1,0x3b],[22,4,4,0xb],[38,4,5,0xc],[70,5,6,0x1b],[134,5,7,0x1c],[262,6,7,0x3c],[390,7,8,0x7d],[646,6,10,0x3d],[-16,9,32,0x1fe,"lower"],[1670,9,32,0x1ff],[2,0x1]];break;case 9:lines=[[-31,8,4,0xfc],[-15,9,2,0x1fc],[-11,8,2,0xfd],[-7,9,1,0x1fd],[-5,7,1,0x7c],[-3,4,1,0xa],[-1,3,1,0x2],[1,3,1,0x3],[3,5,1,0x1a],[5,6,1,0x3a],[7,3,5,0x4],[39,6,2,0x3b],[43,4,5,0xb],[75,4,6,0xc],[139,5,7,0x1b],[267,5,8,0x1c],[523,6,8,0x3c],[779,7,9,0x7d],[1291,6,11,0x3d],[-32,9,32,0x1fe,"lower"],[3339,9,32,0x1ff],[2,0x0]];break;case 10:lines=[[-21,7,4,0x7a],[-5,8,0,0xfc],[-4,7,0,0x7b],[-3,5,0,0x18],[-2,2,2,0x0],[2,5,0,0x19],[3,6,0,0x36],[4,7,0,0x7c],[5,8,0,0xfd],[6,2,6,0x1],[70,5,5,0x1a],[102,6,5,0x37],[134,6,6,0x38],[198,6,7,0x39],[326,6,8,0x3a],[582,6,9,0x3b],[1094,6,10,0x3c],[2118,7,11,0x7d],[-22,8,32,0xfe,"lower"],[4166,8,32,0xff],[2,0x2]];break;case 11:lines=[[1,1,0,0x0],[2,2,1,0x2],[4,4,0,0xc],[5,4,1,0xd],[7,5,1,0x1c],[9,5,2,0x1d],[13,6,2,0x3c],[17,7,2,0x7a],[21,7,3,0x7b],[29,7,4,0x7c],[45,7,5,0x7d],[77,7,6,0x7e],[141,7,32,0x7f]];break;case 12:lines=[[1,1,0,0x0],[2,2,0,0x2],[3,3,1,0x6],[5,5,0,0x1c],[6,5,1,0x1d],[8,6,1,0x3c],[10,7,0,0x7a],[11,7,1,0x7b],[13,7,2,0x7c],[17,7,3,0x7d],[25,7,4,0x7e],[41,8,5,0xfe],[73,8,32,0xff]];break;case 13:lines=[[1,1,0,0x0],[2,3,0,0x4],[3,4,0,0xc],[4,5,0,0x1c],[5,4,1,0xd],[7,3,3,0x5],[15,6,1,0x3a],[17,6,2,0x3b],[21,6,3,0x3c],[29,6,4,0x3d],[45,6,5,0x3e],[77,7,6,0x7e],[141,7,32,0x7f]];break;case 14:lines=[[-2,3,0,0x4],[-1,3,0,0x5],[0,1,0,0x0],[1,3,0,0x6],[2,3,0,0x7]];break;case 15:lines=[[-24,7,4,0x7c],[-8,6,2,0x3c],[-4,5,1,0x1c],[-2,4,0,0xc],[-1,3,0,0x4],[0,1,0,0x0],[1,3,0,0x5],[2,4,0,0xd],[3,5,1,0x1d],[5,6,2,0x3d],[9,7,4,0x7d],[-25,7,32,0x7e,"lower"],[25,7,32,0x7f]];break;default:throw new Jbig2Error("standard table B.".concat(number," does not exist"));}for(var i=0,ii=lines.length;i<ii;i++){lines[i]=new HuffmanLine(lines[i]);}table=new HuffmanTable(lines,true);standardTablesCache[number]=table;return table;}var Reader=/*#__PURE__*/function(){function Reader(data,start,end){_classCallCheck(this,Reader);this.data=data;this.start=start;this.end=end;this.position=start;this.shift=-1;this.currentByte=0;}return _createClass(Reader,[{key:"readBit",value:function readBit(){if(this.shift<0){if(this.position>=this.end){throw new Jbig2Error("end of data while reading bit");}this.currentByte=this.data[this.position++];this.shift=7;}var bit=this.currentByte>>this.shift&1;this.shift--;return bit;}},{key:"readBits",value:function readBits(numBits){var result=0,i;for(i=numBits-1;i>=0;i--){result|=this.readBit()<<i;}return result;}},{key:"byteAlign",value:function byteAlign(){this.shift=-1;}},{key:"next",value:function next(){if(this.position>=this.end){return-1;}return this.data[this.position++];}}]);}();function getCustomHuffmanTable(index,referredTo,customTables){var currentIndex=0;for(var i=0,ii=referredTo.length;i<ii;i++){var table=customTables[referredTo[i]];if(table){if(index===currentIndex){return table;}currentIndex++;}}throw new Jbig2Error("can\'t find custom Huffman table");}function getTextRegionHuffmanTables(textRegion,referredTo,customTables,numberOfSymbols,reader){var codes=[];for(var i=0;i<=34;i++){var codeLength=reader.readBits(4);codes.push(new HuffmanLine([i,codeLength,0,0]));}var runCodesTable=new HuffmanTable(codes,false);codes.length=0;for(var _i23=0;_i23<numberOfSymbols;){var _codeLength=runCodesTable.decode(reader);if(_codeLength>=32){var repeatedLength=void 0,numberOfRepeats=void 0,j=void 0;switch(_codeLength){case 32:if(_i23===0){throw new Jbig2Error("no previous value in symbol ID table");}numberOfRepeats=reader.readBits(2)+3;repeatedLength=codes[_i23-1].prefixLength;break;case 33:numberOfRepeats=reader.readBits(3)+3;repeatedLength=0;break;case 34:numberOfRepeats=reader.readBits(7)+11;repeatedLength=0;break;default:throw new Jbig2Error("invalid code length in symbol ID table");}for(j=0;j<numberOfRepeats;j++){codes.push(new HuffmanLine([_i23,repeatedLength,0,0]));_i23++;}}else{codes.push(new HuffmanLine([_i23,_codeLength,0,0]));_i23++;}}reader.byteAlign();var symbolIDTable=new HuffmanTable(codes,false);var customIndex=0,tableFirstS,tableDeltaS,tableDeltaT;switch(textRegion.huffmanFS){case 0:case 1:tableFirstS=getStandardTable(textRegion.huffmanFS+6);break;case 3:tableFirstS=getCustomHuffmanTable(customIndex,referredTo,customTables);customIndex++;break;default:throw new Jbig2Error("invalid Huffman FS selector");}switch(textRegion.huffmanDS){case 0:case 1:case 2:tableDeltaS=getStandardTable(textRegion.huffmanDS+8);break;case 3:tableDeltaS=getCustomHuffmanTable(customIndex,referredTo,customTables);customIndex++;break;default:throw new Jbig2Error("invalid Huffman DS selector");}switch(textRegion.huffmanDT){case 0:case 1:case 2:tableDeltaT=getStandardTable(textRegion.huffmanDT+11);break;case 3:tableDeltaT=getCustomHuffmanTable(customIndex,referredTo,customTables);customIndex++;break;default:throw new Jbig2Error("invalid Huffman DT selector");}if(textRegion.refinement){throw new Jbig2Error("refinement with Huffman is not supported");}return{symbolIDTable:symbolIDTable,tableFirstS:tableFirstS,tableDeltaS:tableDeltaS,tableDeltaT:tableDeltaT};}function getSymbolDictionaryHuffmanTables(dictionary,referredTo,customTables){var customIndex=0,tableDeltaHeight,tableDeltaWidth;switch(dictionary.huffmanDHSelector){case 0:case 1:tableDeltaHeight=getStandardTable(dictionary.huffmanDHSelector+4);break;case 3:tableDeltaHeight=getCustomHuffmanTable(customIndex,referredTo,customTables);customIndex++;break;default:throw new Jbig2Error("invalid Huffman DH selector");}switch(dictionary.huffmanDWSelector){case 0:case 1:tableDeltaWidth=getStandardTable(dictionary.huffmanDWSelector+2);break;case 3:tableDeltaWidth=getCustomHuffmanTable(customIndex,referredTo,customTables);customIndex++;break;default:throw new Jbig2Error("invalid Huffman DW selector");}var tableBitmapSize,tableAggregateInstances;if(dictionary.bitmapSizeSelector){tableBitmapSize=getCustomHuffmanTable(customIndex,referredTo,customTables);customIndex++;}else{tableBitmapSize=getStandardTable(1);}if(dictionary.aggregationInstancesSelector){tableAggregateInstances=getCustomHuffmanTable(customIndex,referredTo,customTables);}else{tableAggregateInstances=getStandardTable(1);}return{tableDeltaHeight:tableDeltaHeight,tableDeltaWidth:tableDeltaWidth,tableBitmapSize:tableBitmapSize,tableAggregateInstances:tableAggregateInstances};}function readUncompressedBitmap(reader,width,height){var bitmap=[];for(var y=0;y<height;y++){var row=new Uint8Array(width);bitmap.push(row);for(var x=0;x<width;x++){row[x]=reader.readBit();}reader.byteAlign();}return bitmap;}function decodeMMRBitmap(input,width,height,endOfBlock){var params={K:-1,Columns:width,Rows:height,BlackIs1:true,EndOfBlock:endOfBlock};var decoder=new CCITTFaxDecoder(input,params);var bitmap=[];var currentByte,eof=false;for(var y=0;y<height;y++){var row=new Uint8Array(width);bitmap.push(row);var shift=-1;for(var x=0;x<width;x++){if(shift<0){currentByte=decoder.readNextChar();if(currentByte===-1){currentByte=0;eof=true;}shift=7;}row[x]=currentByte>>shift&1;shift--;}}if(endOfBlock&&!eof){var lookForEOFLimit=5;for(var i=0;i<lookForEOFLimit;i++){if(decoder.readNextChar()===-1){break;}}}return bitmap;}var Jbig2Image=/*#__PURE__*/function(){function Jbig2Image(){_classCallCheck(this,Jbig2Image);}return _createClass(Jbig2Image,[{key:"parseChunks",value:function parseChunks(chunks){return parseJbig2Chunks(chunks);}},{key:"parse",value:function parse(data){throw new Error("Not implemented: Jbig2Image.parse");}}]);}();;// ./src/core/jbig2_stream.js\nvar Jbig2Stream=/*#__PURE__*/function(_DecodeStream7){function Jbig2Stream(stream,maybeLength,params){var _this25;_classCallCheck(this,Jbig2Stream);_this25=_callSuper(this,Jbig2Stream,[maybeLength]);_this25.stream=stream;_this25.dict=stream.dict;_this25.maybeLength=maybeLength;_this25.params=params;return _this25;}_inherits(Jbig2Stream,_DecodeStream7);return _createClass(Jbig2Stream,[{key:"bytes",get:function get(){return shadow(this,"bytes",this.stream.getBytes(this.maybeLength));}},{key:"ensureBuffer",value:function ensureBuffer(requested){}},{key:"readBlock",value:function readBlock(){this.decodeImage();}},{key:"decodeImage",value:function decodeImage(bytes){if(this.eof){return this.buffer;}bytes||(bytes=this.bytes);var jbig2Image=new Jbig2Image();var chunks=[];if(this.params instanceof Dict){var globalsStream=this.params.get("JBIG2Globals");if(globalsStream instanceof BaseStream){var globals=globalsStream.getBytes();chunks.push({data:globals,start:0,end:globals.length});}}chunks.push({data:bytes,start:0,end:bytes.length});var data=jbig2Image.parseChunks(chunks);var dataLength=data.length;for(var i=0;i<dataLength;i++){data[i]^=0xff;}this.buffer=data;this.bufferLength=dataLength;this.eof=true;return this.buffer;}},{key:"canAsyncDecodeImageFromBuffer",get:function get(){return this.stream.isAsync;}}]);}(DecodeStream);;// ./src/core/jpx_stream.js\nvar JpxStream=/*#__PURE__*/function(_DecodeStream8){function JpxStream(stream,maybeLength,params){var _this26;_classCallCheck(this,JpxStream);_this26=_callSuper(this,JpxStream,[maybeLength]);_this26.stream=stream;_this26.dict=stream.dict;_this26.maybeLength=maybeLength;_this26.params=params;return _this26;}_inherits(JpxStream,_DecodeStream8);return _createClass(JpxStream,[{key:"bytes",get:function get(){return shadow(this,"bytes",this.stream.getBytes(this.maybeLength));}},{key:"ensureBuffer",value:function ensureBuffer(requested){}},{key:"readBlock",value:function readBlock(decoderOptions){unreachable("JpxStream.readBlock");}},{key:"isAsyncDecoder",get:function get(){return true;}},{key:"decodeImage",value:function(){var _decodeImage=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee21(bytes,decoderOptions){return _regeneratorRuntime().wrap(function _callee21$(_context25){while(1)switch(_context25.prev=_context25.next){case 0:if(!this.eof){_context25.next=2;break;}return _context25.abrupt("return",this.buffer);case 2:bytes||(bytes=this.bytes);_context25.next=5;return JpxImage.decode(bytes,decoderOptions);case 5:this.buffer=_context25.sent;this.bufferLength=this.buffer.length;this.eof=true;return _context25.abrupt("return",this.buffer);case 9:case"end":return _context25.stop();}},_callee21,this);}));function decodeImage(_x24,_x25){return _decodeImage.apply(this,arguments);}return decodeImage;}()},{key:"canAsyncDecodeImageFromBuffer",get:function get(){return this.stream.isAsync;}}]);}(DecodeStream);;// ./src/core/lzw_stream.js\nvar LZWStream=/*#__PURE__*/function(_DecodeStream9){function LZWStream(str,maybeLength,earlyChange){var _this27;_classCallCheck(this,LZWStream);_this27=_callSuper(this,LZWStream,[maybeLength]);_this27.str=str;_this27.dict=str.dict;_this27.cachedData=0;_this27.bitsCached=0;var maxLzwDictionarySize=4096;var lzwState={earlyChange:earlyChange,codeLength:9,nextCode:258,dictionaryValues:new Uint8Array(maxLzwDictionarySize),dictionaryLengths:new Uint16Array(maxLzwDictionarySize),dictionaryPrevCodes:new Uint16Array(maxLzwDictionarySize),currentSequence:new Uint8Array(maxLzwDictionarySize),currentSequenceLength:0};for(var i=0;i<256;++i){lzwState.dictionaryValues[i]=i;lzwState.dictionaryLengths[i]=1;}_this27.lzwState=lzwState;return _this27;}_inherits(LZWStream,_DecodeStream9);return _createClass(LZWStream,[{key:"readBits",value:function readBits(n){var bitsCached=this.bitsCached;var cachedData=this.cachedData;while(bitsCached<n){var c=this.str.getByte();if(c===-1){this.eof=true;return null;}cachedData=cachedData<<8|c;bitsCached+=8;}this.bitsCached=bitsCached-=n;this.cachedData=cachedData;this.lastCode=null;return cachedData>>>bitsCached&(1<<n)-1;}},{key:"readBlock",value:function readBlock(){var blockSize=512,decodedSizeDelta=blockSize;var estimatedDecodedSize=blockSize*2;var i,j,q;var lzwState=this.lzwState;if(!lzwState){return;}var earlyChange=lzwState.earlyChange;var nextCode=lzwState.nextCode;var dictionaryValues=lzwState.dictionaryValues;var dictionaryLengths=lzwState.dictionaryLengths;var dictionaryPrevCodes=lzwState.dictionaryPrevCodes;var codeLength=lzwState.codeLength;var prevCode=lzwState.prevCode;var currentSequence=lzwState.currentSequence;var currentSequenceLength=lzwState.currentSequenceLength;var decodedLength=0;var currentBufferLength=this.bufferLength;var buffer=this.ensureBuffer(this.bufferLength+estimatedDecodedSize);for(i=0;i<blockSize;i++){var code=this.readBits(codeLength);var hasPrev=currentSequenceLength>0;if(code<256){currentSequence[0]=code;currentSequenceLength=1;}else if(code>=258){if(code<nextCode){currentSequenceLength=dictionaryLengths[code];for(j=currentSequenceLength-1,q=code;j>=0;j--){currentSequence[j]=dictionaryValues[q];q=dictionaryPrevCodes[q];}}else{currentSequence[currentSequenceLength++]=currentSequence[0];}}else if(code===256){codeLength=9;nextCode=258;currentSequenceLength=0;continue;}else{this.eof=true;delete this.lzwState;break;}if(hasPrev){dictionaryPrevCodes[nextCode]=prevCode;dictionaryLengths[nextCode]=dictionaryLengths[prevCode]+1;dictionaryValues[nextCode]=currentSequence[0];nextCode++;codeLength=nextCode+earlyChange&nextCode+earlyChange-1?codeLength:Math.min(Math.log(nextCode+earlyChange)/0.6931471805599453+1,12)|0;}prevCode=code;decodedLength+=currentSequenceLength;if(estimatedDecodedSize<decodedLength){do{estimatedDecodedSize+=decodedSizeDelta;}while(estimatedDecodedSize<decodedLength);buffer=this.ensureBuffer(this.bufferLength+estimatedDecodedSize);}for(j=0;j<currentSequenceLength;j++){buffer[currentBufferLength++]=currentSequence[j];}}lzwState.nextCode=nextCode;lzwState.codeLength=codeLength;lzwState.prevCode=prevCode;lzwState.currentSequenceLength=currentSequenceLength;this.bufferLength=currentBufferLength;}}]);}(DecodeStream);;// ./src/core/predictor_stream.js\nvar PredictorStream=/*#__PURE__*/function(_DecodeStream10){function PredictorStream(str,maybeLength,params){var _this28;_classCallCheck(this,PredictorStream);_this28=_callSuper(this,PredictorStream,[maybeLength]);if(!(params instanceof Dict)){return _possibleConstructorReturn(_this28,str);}var predictor=_this28.predictor=params.get("Predictor")||1;if(predictor<=1){return _possibleConstructorReturn(_this28,str);}if(predictor!==2&&(predictor<10||predictor>15)){throw new FormatError("Unsupported predictor: ".concat(predictor));}_this28.readBlock=predictor===2?_this28.readBlockTiff:_this28.readBlockPng;_this28.str=str;_this28.dict=str.dict;var colors=_this28.colors=params.get("Colors")||1;var bits=_this28.bits=params.get("BPC","BitsPerComponent")||8;var columns=_this28.columns=params.get("Columns")||1;_this28.pixBytes=colors*bits+7>>3;_this28.rowBytes=columns*colors*bits+7>>3;return _possibleConstructorReturn(_this28,_this28);}_inherits(PredictorStream,_DecodeStream10);return _createClass(PredictorStream,[{key:"readBlockTiff",value:function readBlockTiff(){var rowBytes=this.rowBytes;var bufferLength=this.bufferLength;var buffer=this.ensureBuffer(bufferLength+rowBytes);var bits=this.bits;var colors=this.colors;var rawBytes=this.str.getBytes(rowBytes);this.eof=!rawBytes.length;if(this.eof){return;}var inbuf=0,outbuf=0;var inbits=0,outbits=0;var pos=bufferLength;var i;if(bits===1&&colors===1){for(i=0;i<rowBytes;++i){var c=rawBytes[i]^inbuf;c^=c>>1;c^=c>>2;c^=c>>4;inbuf=(c&1)<<7;buffer[pos++]=c;}}else if(bits===8){for(i=0;i<colors;++i){buffer[pos++]=rawBytes[i];}for(;i<rowBytes;++i){buffer[pos]=buffer[pos-colors]+rawBytes[i];pos++;}}else if(bits===16){var bytesPerPixel=colors*2;for(i=0;i<bytesPerPixel;++i){buffer[pos++]=rawBytes[i];}for(;i<rowBytes;i+=2){var sum=((rawBytes[i]&0xff)<<8)+(rawBytes[i+1]&0xff)+((buffer[pos-bytesPerPixel]&0xff)<<8)+(buffer[pos-bytesPerPixel+1]&0xff);buffer[pos++]=sum>>8&0xff;buffer[pos++]=sum&0xff;}}else{var compArray=new Uint8Array(colors+1);var bitMask=(1<<bits)-1;var j=0,k=bufferLength;var columns=this.columns;for(i=0;i<columns;++i){for(var kk=0;kk<colors;++kk){if(inbits<bits){inbuf=inbuf<<8|rawBytes[j++]&0xff;inbits+=8;}compArray[kk]=compArray[kk]+(inbuf>>inbits-bits)&bitMask;inbits-=bits;outbuf=outbuf<<bits|compArray[kk];outbits+=bits;if(outbits>=8){buffer[k++]=outbuf>>outbits-8&0xff;outbits-=8;}}}if(outbits>0){buffer[k++]=(outbuf<<8-outbits)+(inbuf&(1<<8-outbits)-1);}}this.bufferLength+=rowBytes;}},{key:"readBlockPng",value:function readBlockPng(){var rowBytes=this.rowBytes;var pixBytes=this.pixBytes;var predictor=this.str.getByte();var rawBytes=this.str.getBytes(rowBytes);this.eof=!rawBytes.length;if(this.eof){return;}var bufferLength=this.bufferLength;var buffer=this.ensureBuffer(bufferLength+rowBytes);var prevRow=buffer.subarray(bufferLength-rowBytes,bufferLength);if(prevRow.length===0){prevRow=new Uint8Array(rowBytes);}var i,j=bufferLength,up,c;switch(predictor){case 0:for(i=0;i<rowBytes;++i){buffer[j++]=rawBytes[i];}break;case 1:for(i=0;i<pixBytes;++i){buffer[j++]=rawBytes[i];}for(;i<rowBytes;++i){buffer[j]=buffer[j-pixBytes]+rawBytes[i]&0xff;j++;}break;case 2:for(i=0;i<rowBytes;++i){buffer[j++]=prevRow[i]+rawBytes[i]&0xff;}break;case 3:for(i=0;i<pixBytes;++i){buffer[j++]=(prevRow[i]>>1)+rawBytes[i];}for(;i<rowBytes;++i){buffer[j]=(prevRow[i]+buffer[j-pixBytes]>>1)+rawBytes[i]&0xff;j++;}break;case 4:for(i=0;i<pixBytes;++i){up=prevRow[i];c=rawBytes[i];buffer[j++]=up+c;}for(;i<rowBytes;++i){up=prevRow[i];var upLeft=prevRow[i-pixBytes];var left=buffer[j-pixBytes];var p=left+up-upLeft;var pa=p-left;if(pa<0){pa=-pa;}var pb=p-up;if(pb<0){pb=-pb;}var pc=p-upLeft;if(pc<0){pc=-pc;}c=rawBytes[i];if(pa<=pb&&pa<=pc){buffer[j++]=left+c;}else if(pb<=pc){buffer[j++]=up+c;}else{buffer[j++]=upLeft+c;}}break;default:throw new FormatError("Unsupported predictor: ".concat(predictor));}this.bufferLength+=rowBytes;}}]);}(DecodeStream);;// ./src/core/run_length_stream.js\nvar RunLengthStream=/*#__PURE__*/function(_DecodeStream11){function RunLengthStream(str,maybeLength){var _this29;_classCallCheck(this,RunLengthStream);_this29=_callSuper(this,RunLengthStream,[maybeLength]);_this29.str=str;_this29.dict=str.dict;return _this29;}_inherits(RunLengthStream,_DecodeStream11);return _createClass(RunLengthStream,[{key:"readBlock",value:function readBlock(){var repeatHeader=this.str.getBytes(2);if(!repeatHeader||repeatHeader.length<2||repeatHeader[0]===128){this.eof=true;return;}var buffer;var bufferLength=this.bufferLength;var n=repeatHeader[0];if(n<128){buffer=this.ensureBuffer(bufferLength+n+1);buffer[bufferLength++]=repeatHeader[1];if(n>0){var source=this.str.getBytes(n);buffer.set(source,bufferLength);bufferLength+=n;}}else{n=257-n;var b=repeatHeader[1];buffer=this.ensureBuffer(bufferLength+n+1);for(var i=0;i<n;i++){buffer[bufferLength++]=b;}}this.bufferLength=bufferLength;}}]);}(DecodeStream);;// ./src/core/parser.js\nvar MAX_LENGTH_TO_CACHE=1000;function getInlineImageCacheKey(bytes){var strBuf=[],ii=bytes.length;var i=0;while(i<ii-1){strBuf.push(bytes[i++]<<8|bytes[i++]);}if(i<ii){strBuf.push(bytes[i]);}return ii+"_"+String.fromCharCode.apply(null,strBuf);}var _Parser_brand=/*#__PURE__*/new WeakSet();var Parser=/*#__PURE__*/function(){function Parser(_ref30){var lexer=_ref30.lexer,xref=_ref30.xref,_ref30$allowStreams=_ref30.allowStreams,allowStreams=_ref30$allowStreams===void 0?false:_ref30$allowStreams,_ref30$recoveryMode=_ref30.recoveryMode,recoveryMode=_ref30$recoveryMode===void 0?false:_ref30$recoveryMode;_classCallCheck(this,Parser);_classPrivateMethodInitSpec(this,_Parser_brand);this.lexer=lexer;this.xref=xref;this.allowStreams=allowStreams;this.recoveryMode=recoveryMode;this.imageCache=Object.create(null);this._imageId=0;this.refill();}return _createClass(Parser,[{key:"refill",value:function refill(){this.buf1=this.lexer.getObj();this.buf2=this.lexer.getObj();}},{key:"shift",value:function shift(){if(this.buf2 instanceof Cmd&&this.buf2.cmd==="ID"){this.buf1=this.buf2;this.buf2=null;}else{this.buf1=this.buf2;this.buf2=this.lexer.getObj();}}},{key:"tryShift",value:function tryShift(){try{this.shift();return true;}catch(e){if(e instanceof MissingDataException){throw e;}return false;}}},{key:"getObj",value:function getObj(){var cipherTransform=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var buf1=this.buf1;this.shift();if(buf1 instanceof Cmd){switch(buf1.cmd){case"BI":return this.makeInlineImage(cipherTransform);case"[":var array=[];while(!isCmd(this.buf1,"]")&&this.buf1!==EOF){array.push(this.getObj(cipherTransform));}if(this.buf1===EOF){if(this.recoveryMode){return array;}throw new ParserEOFException("End of file inside array.");}this.shift();return array;case"<<":var dict=new Dict(this.xref);while(!isCmd(this.buf1,">>")&&this.buf1!==EOF){if(!(this.buf1 instanceof Name)){info("Malformed dictionary: key must be a name object");this.shift();continue;}var key=this.buf1.name;this.shift();if(this.buf1===EOF){break;}dict.set(key,this.getObj(cipherTransform));}if(this.buf1===EOF){if(this.recoveryMode){return dict;}throw new ParserEOFException("End of file inside dictionary.");}if(isCmd(this.buf2,"stream")){return this.allowStreams?this.makeStream(dict,cipherTransform):dict;}this.shift();return dict;default:return buf1;}}if(Number.isInteger(buf1)){if(Number.isInteger(this.buf1)&&isCmd(this.buf2,"R")){var ref=Ref.get(buf1,this.buf1);this.shift();this.shift();return ref;}return buf1;}if(typeof buf1==="string"){if(cipherTransform){return cipherTransform.decryptString(buf1);}return buf1;}return buf1;}},{key:"findDefaultInlineStreamEnd",value:function findDefaultInlineStreamEnd(stream){var E=0x45,I=0x49,SPACE=0x20,LF=0xa,CR=0xd,NUL=0x0;var knownCommands=this.lexer.knownCommands,startPos=stream.pos,n=15;var state=0,ch,maybeEIPos;while((ch=stream.getByte())!==-1){if(state===0){state=ch===E?1:0;}else if(state===1){state=ch===I?2:0;}else{if(ch===SPACE||ch===LF||ch===CR){maybeEIPos=stream.pos;var followingBytes=stream.peekBytes(n);var ii=followingBytes.length;if(ii===0){break;}for(var i=0;i<ii;i++){ch=followingBytes[i];if(ch===NUL&&followingBytes[i+1]!==NUL){continue;}if(ch!==LF&&ch!==CR&&(ch<SPACE||ch>0x7f)){state=0;break;}}if(state!==2){continue;}if(!knownCommands){warn("findDefaultInlineStreamEnd - `lexer.knownCommands` is undefined.");continue;}var tmpLexer=new Lexer(new Stream(stream.peekBytes(5*n)),knownCommands);tmpLexer._hexStringWarn=function(){};var numArgs=0;while(true){var nextObj=tmpLexer.getObj();if(nextObj===EOF){state=0;break;}if(nextObj instanceof Cmd){var knownCommand=knownCommands[nextObj.cmd];if(!knownCommand){state=0;break;}else if(knownCommand.variableArgs?numArgs<=knownCommand.numArgs:numArgs===knownCommand.numArgs){break;}numArgs=0;continue;}numArgs++;}if(state===2){break;}}else{state=0;}}}if(ch===-1){warn("findDefaultInlineStreamEnd: "+"Reached the end of the stream without finding a valid EI marker");if(maybeEIPos){warn(\'... trying to recover by using the last "EI" occurrence.\');stream.skip(-(stream.pos-maybeEIPos));}}var endOffset=4;stream.skip(-endOffset);ch=stream.peekByte();stream.skip(endOffset);if(!isWhiteSpace(ch)){endOffset--;}return stream.pos-endOffset-startPos;}},{key:"findDCTDecodeInlineStreamEnd",value:function findDCTDecodeInlineStreamEnd(stream){var startPos=stream.pos;var foundEOI=false,b,markerLength;while((b=stream.getByte())!==-1){if(b!==0xff){continue;}switch(stream.getByte()){case 0x00:break;case 0xff:stream.skip(-1);break;case 0xd9:foundEOI=true;break;case 0xc0:case 0xc1:case 0xc2:case 0xc3:case 0xc5:case 0xc6:case 0xc7:case 0xc9:case 0xca:case 0xcb:case 0xcd:case 0xce:case 0xcf:case 0xc4:case 0xcc:case 0xda:case 0xdb:case 0xdc:case 0xdd:case 0xde:case 0xdf:case 0xe0:case 0xe1:case 0xe2:case 0xe3:case 0xe4:case 0xe5:case 0xe6:case 0xe7:case 0xe8:case 0xe9:case 0xea:case 0xeb:case 0xec:case 0xed:case 0xee:case 0xef:case 0xfe:markerLength=stream.getUint16();if(markerLength>2){stream.skip(markerLength-2);}else{stream.skip(-2);}break;}if(foundEOI){break;}}var length=stream.pos-startPos;if(b===-1){warn("Inline DCTDecode image stream: "+"EOI marker not found, searching for /EI/ instead.");stream.skip(-length);return this.findDefaultInlineStreamEnd(stream);}this.inlineStreamSkipEI(stream);return length;}},{key:"findASCII85DecodeInlineStreamEnd",value:function findASCII85DecodeInlineStreamEnd(stream){var TILDE=0x7e,GT=0x3e;var startPos=stream.pos;var ch;while((ch=stream.getByte())!==-1){if(ch===TILDE){var tildePos=stream.pos;ch=stream.peekByte();while(isWhiteSpace(ch)){stream.skip();ch=stream.peekByte();}if(ch===GT){stream.skip();break;}if(stream.pos>tildePos){var maybeEI=stream.peekBytes(2);if(maybeEI[0]===0x45&&maybeEI[1]===0x49){break;}}}}var length=stream.pos-startPos;if(ch===-1){warn("Inline ASCII85Decode image stream: "+"EOD marker not found, searching for /EI/ instead.");stream.skip(-length);return this.findDefaultInlineStreamEnd(stream);}this.inlineStreamSkipEI(stream);return length;}},{key:"findASCIIHexDecodeInlineStreamEnd",value:function findASCIIHexDecodeInlineStreamEnd(stream){var GT=0x3e;var startPos=stream.pos;var ch;while((ch=stream.getByte())!==-1){if(ch===GT){break;}}var length=stream.pos-startPos;if(ch===-1){warn("Inline ASCIIHexDecode image stream: "+"EOD marker not found, searching for /EI/ instead.");stream.skip(-length);return this.findDefaultInlineStreamEnd(stream);}this.inlineStreamSkipEI(stream);return length;}},{key:"inlineStreamSkipEI",value:function inlineStreamSkipEI(stream){var E=0x45,I=0x49;var state=0,ch;while((ch=stream.getByte())!==-1){if(state===0){state=ch===E?1:0;}else if(state===1){state=ch===I?2:0;}else if(state===2){break;}}}},{key:"makeInlineImage",value:function makeInlineImage(cipherTransform){var lexer=this.lexer;var stream=lexer.stream;var dictMap=Object.create(null);var dictLength;while(!isCmd(this.buf1,"ID")&&this.buf1!==EOF){if(!(this.buf1 instanceof Name)){throw new FormatError("Dictionary key must be a name object");}var key=this.buf1.name;this.shift();if(this.buf1===EOF){break;}dictMap[key]=this.getObj(cipherTransform);}if(lexer.beginInlineImagePos!==-1){dictLength=stream.pos-lexer.beginInlineImagePos;}var filter=this.xref.fetchIfRef(dictMap.F||dictMap.Filter);var filterName;if(filter instanceof Name){filterName=filter.name;}else if(Array.isArray(filter)){var filterZero=this.xref.fetchIfRef(filter[0]);if(filterZero instanceof Name){filterName=filterZero.name;}}var startPos=stream.pos;var length;switch(filterName){case"DCT":case"DCTDecode":length=this.findDCTDecodeInlineStreamEnd(stream);break;case"A85":case"ASCII85Decode":length=this.findASCII85DecodeInlineStreamEnd(stream);break;case"AHx":case"ASCIIHexDecode":length=this.findASCIIHexDecodeInlineStreamEnd(stream);break;default:length=this.findDefaultInlineStreamEnd(stream);}var cacheKey;if(length<MAX_LENGTH_TO_CACHE&&dictLength>0){var initialStreamPos=stream.pos;stream.pos=lexer.beginInlineImagePos;cacheKey=getInlineImageCacheKey(stream.getBytes(dictLength+length));stream.pos=initialStreamPos;var cacheEntry=this.imageCache[cacheKey];if(cacheEntry!==undefined){this.buf2=Cmd.get("EI");this.shift();cacheEntry.reset();return cacheEntry;}}var dict=new Dict(this.xref);for(var _key4 in dictMap){dict.set(_key4,dictMap[_key4]);}var imageStream=stream.makeSubStream(startPos,length,dict);if(cipherTransform){imageStream=cipherTransform.createStream(imageStream,length);}imageStream=this.filter(imageStream,dict,length);imageStream.dict=dict;if(cacheKey!==undefined){imageStream.cacheKey="inline_img_".concat(++this._imageId);this.imageCache[cacheKey]=imageStream;}this.buf2=Cmd.get("EI");this.shift();return imageStream;}},{key:"makeStream",value:function makeStream(dict,cipherTransform){var lexer=this.lexer;var stream=lexer.stream;lexer.skipToNextLine();var startPos=stream.pos-1;var length=dict.get("Length");if(!Number.isInteger(length)){info("Bad length \\"".concat(length&&length.toString(),"\\" in stream."));length=0;}stream.pos=startPos+length;lexer.nextChar();if(this.tryShift()&&isCmd(this.buf2,"endstream")){this.shift();}else{length=_assertClassBrand(_Parser_brand,this,_findStreamLength).call(this,startPos);if(length<0){throw new FormatError("Missing endstream command.");}lexer.nextChar();this.shift();this.shift();}this.shift();stream=stream.makeSubStream(startPos,length,dict);if(cipherTransform){stream=cipherTransform.createStream(stream,length);}stream=this.filter(stream,dict,length);stream.dict=dict;return stream;}},{key:"filter",value:function filter(stream,dict,length){var filter=dict.get("F","Filter");var params=dict.get("DP","DecodeParms");if(filter instanceof Name){if(Array.isArray(params)){warn("/DecodeParms should not be an Array, when /Filter is a Name.");}return this.makeFilter(stream,filter.name,length,params);}var maybeLength=length;if(Array.isArray(filter)){var filterArray=filter;var paramsArray=params;for(var i=0,ii=filterArray.length;i<ii;++i){filter=this.xref.fetchIfRef(filterArray[i]);if(!(filter instanceof Name)){throw new FormatError("Bad filter name \\"".concat(filter,"\\""));}params=null;if(Array.isArray(paramsArray)&&i in paramsArray){params=this.xref.fetchIfRef(paramsArray[i]);}stream=this.makeFilter(stream,filter.name,maybeLength,params);maybeLength=null;}}return stream;}},{key:"makeFilter",value:function makeFilter(stream,name,maybeLength,params){if(maybeLength===0){warn("Empty \\"".concat(name,"\\" stream."));return new NullStream();}try{switch(name){case"Fl":case"FlateDecode":if(params){return new PredictorStream(new FlateStream(stream,maybeLength),maybeLength,params);}return new FlateStream(stream,maybeLength);case"LZW":case"LZWDecode":var earlyChange=1;if(params){if(params.has("EarlyChange")){earlyChange=params.get("EarlyChange");}return new PredictorStream(new LZWStream(stream,maybeLength,earlyChange),maybeLength,params);}return new LZWStream(stream,maybeLength,earlyChange);case"DCT":case"DCTDecode":return new JpegStream(stream,maybeLength,params);case"JPX":case"JPXDecode":return new JpxStream(stream,maybeLength,params);case"A85":case"ASCII85Decode":return new Ascii85Stream(stream,maybeLength);case"AHx":case"ASCIIHexDecode":return new AsciiHexStream(stream,maybeLength);case"CCF":case"CCITTFaxDecode":return new CCITTFaxStream(stream,maybeLength,params);case"RL":case"RunLengthDecode":return new RunLengthStream(stream,maybeLength);case"JBIG2Decode":return new Jbig2Stream(stream,maybeLength,params);}warn("Filter \\"".concat(name,"\\" is not supported."));return stream;}catch(ex){if(ex instanceof MissingDataException){throw ex;}warn("Invalid stream: \\"".concat(ex,"\\""));return new NullStream();}}}]);}();function _findStreamLength(startPos){var stream=this.lexer.stream;stream.pos=startPos;var SCAN_BLOCK_LENGTH=2048;var signatureLength="endstream".length;var END_SIGNATURE=new Uint8Array([0x65,0x6e,0x64]);var endLength=END_SIGNATURE.length;var PARTIAL_SIGNATURE=[new Uint8Array([0x73,0x74,0x72,0x65,0x61,0x6d]),new Uint8Array([0x73,0x74,0x65,0x61,0x6d]),new Uint8Array([0x73,0x74,0x72,0x65,0x61])];var normalLength=signatureLength-endLength;while(stream.pos<stream.end){var scanBytes=stream.peekBytes(SCAN_BLOCK_LENGTH);var scanLength=scanBytes.length-signatureLength;if(scanLength<=0){break;}var pos=0;while(pos<scanLength){var j=0;while(j<endLength&&scanBytes[pos+j]===END_SIGNATURE[j]){j++;}if(j>=endLength){var found=false;var _iterator244=_createForOfIteratorHelper(PARTIAL_SIGNATURE),_step244;try{for(_iterator244.s();!(_step244=_iterator244.n()).done;){var part=_step244.value;var partLen=part.length;var k=0;while(k<partLen&&scanBytes[pos+j+k]===part[k]){k++;}if(k>=normalLength){found=true;break;}if(k>=partLen){var lastByte=scanBytes[pos+j+k];if(isWhiteSpace(lastByte)){info("Found \\"".concat(bytesToString([].concat(_toConsumableArray(END_SIGNATURE),_toConsumableArray(part))),"\\" when ")+"searching for endstream command.");found=true;}break;}}}catch(err){_iterator244.e(err);}finally{_iterator244.f();}if(found){stream.pos+=pos;return stream.pos-startPos;}}pos++;}stream.pos+=scanLength;}return-1;}var specialChars=[1,0,0,0,0,0,0,0,0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,2,0,0,2,2,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];function toHexDigit(ch){if(ch>=0x30&&ch<=0x39){return ch&0x0f;}if(ch>=0x41&&ch<=0x46||ch>=0x61&&ch<=0x66){return(ch&0x0f)+9;}return-1;}var Lexer=/*#__PURE__*/function(){function Lexer(stream){var knownCommands=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;_classCallCheck(this,Lexer);this.stream=stream;this.nextChar();this.strBuf=[];this.knownCommands=knownCommands;this._hexStringNumWarn=0;this.beginInlineImagePos=-1;}return _createClass(Lexer,[{key:"nextChar",value:function nextChar(){return this.currentChar=this.stream.getByte();}},{key:"peekChar",value:function peekChar(){return this.stream.peekByte();}},{key:"getNumber",value:function getNumber(){var ch=this.currentChar;var eNotation=false;var divideBy=0;var sign=1;if(ch===0x2d){sign=-1;ch=this.nextChar();if(ch===0x2d){ch=this.nextChar();}}else if(ch===0x2b){ch=this.nextChar();}if(ch===0x0a||ch===0x0d){do{ch=this.nextChar();}while(ch===0x0a||ch===0x0d);}if(ch===0x2e){divideBy=10;ch=this.nextChar();}if(ch<0x30||ch>0x39){var msg="Invalid number: ".concat(String.fromCharCode(ch)," (charCode ").concat(ch,")");if(isWhiteSpace(ch)||ch===-1){info("Lexer.getNumber - \\"".concat(msg,"\\"."));return 0;}throw new FormatError(msg);}var baseValue=ch-0x30;var powerValue=0;var powerValueSign=1;while((ch=this.nextChar())>=0){if(ch>=0x30&&ch<=0x39){var currentDigit=ch-0x30;if(eNotation){powerValue=powerValue*10+currentDigit;}else{if(divideBy!==0){divideBy*=10;}baseValue=baseValue*10+currentDigit;}}else if(ch===0x2e){if(divideBy===0){divideBy=1;}else{break;}}else if(ch===0x2d){warn("Badly formatted number: minus sign in the middle");}else if(ch===0x45||ch===0x65){ch=this.peekChar();if(ch===0x2b||ch===0x2d){powerValueSign=ch===0x2d?-1:1;this.nextChar();}else if(ch<0x30||ch>0x39){break;}eNotation=true;}else{break;}}if(divideBy!==0){baseValue/=divideBy;}if(eNotation){baseValue*=Math.pow(10,powerValueSign*powerValue);}return sign*baseValue;}},{key:"getString",value:function getString(){var numParen=1;var done=false;var strBuf=this.strBuf;strBuf.length=0;var ch=this.nextChar();while(true){var charBuffered=false;switch(ch|0){case-1:warn("Unterminated string");done=true;break;case 0x28:++numParen;strBuf.push("(");break;case 0x29:if(--numParen===0){this.nextChar();done=true;}else{strBuf.push(")");}break;case 0x5c:ch=this.nextChar();switch(ch){case-1:warn("Unterminated string");done=true;break;case 0x6e:strBuf.push("\\n");break;case 0x72:strBuf.push("\\r");break;case 0x74:strBuf.push("\\t");break;case 0x62:strBuf.push("\\b");break;case 0x66:strBuf.push("\\f");break;case 0x5c:case 0x28:case 0x29:strBuf.push(String.fromCharCode(ch));break;case 0x30:case 0x31:case 0x32:case 0x33:case 0x34:case 0x35:case 0x36:case 0x37:var x=ch&0x0f;ch=this.nextChar();charBuffered=true;if(ch>=0x30&&ch<=0x37){x=(x<<3)+(ch&0x0f);ch=this.nextChar();if(ch>=0x30&&ch<=0x37){charBuffered=false;x=(x<<3)+(ch&0x0f);}}strBuf.push(String.fromCharCode(x));break;case 0x0d:if(this.peekChar()===0x0a){this.nextChar();}break;case 0x0a:break;default:strBuf.push(String.fromCharCode(ch));break;}break;default:strBuf.push(String.fromCharCode(ch));break;}if(done){break;}if(!charBuffered){ch=this.nextChar();}}return strBuf.join("");}},{key:"getName",value:function getName(){var ch,previousCh;var strBuf=this.strBuf;strBuf.length=0;while((ch=this.nextChar())>=0&&!specialChars[ch]){if(ch===0x23){ch=this.nextChar();if(specialChars[ch]){warn("Lexer_getName: "+"NUMBER SIGN (#) should be followed by a hexadecimal number.");strBuf.push("#");break;}var x=toHexDigit(ch);if(x!==-1){previousCh=ch;ch=this.nextChar();var x2=toHexDigit(ch);if(x2===-1){warn("Lexer_getName: Illegal digit (".concat(String.fromCharCode(ch),") ")+"in hexadecimal number.");strBuf.push("#",String.fromCharCode(previousCh));if(specialChars[ch]){break;}strBuf.push(String.fromCharCode(ch));continue;}strBuf.push(String.fromCharCode(x<<4|x2));}else{strBuf.push("#",String.fromCharCode(ch));}}else{strBuf.push(String.fromCharCode(ch));}}if(strBuf.length>127){warn("Name token is longer than allowed by the spec: ".concat(strBuf.length));}return Name.get(strBuf.join(""));}},{key:"_hexStringWarn",value:function _hexStringWarn(ch){var MAX_HEX_STRING_NUM_WARN=5;if(this._hexStringNumWarn++===MAX_HEX_STRING_NUM_WARN){warn("getHexString - ignoring additional invalid characters.");return;}if(this._hexStringNumWarn>MAX_HEX_STRING_NUM_WARN){return;}warn("getHexString - ignoring invalid character: ".concat(ch));}},{key:"getHexString",value:function getHexString(){var strBuf=this.strBuf;strBuf.length=0;var ch=this.currentChar;var firstDigit=-1,digit=-1;this._hexStringNumWarn=0;while(true){if(ch<0){warn("Unterminated hex string");break;}else if(ch===0x3e){this.nextChar();break;}else if(specialChars[ch]===1){ch=this.nextChar();continue;}else{digit=toHexDigit(ch);if(digit===-1){this._hexStringWarn(ch);}else if(firstDigit===-1){firstDigit=digit;}else{strBuf.push(String.fromCharCode(firstDigit<<4|digit));firstDigit=-1;}ch=this.nextChar();}}if(firstDigit!==-1){strBuf.push(String.fromCharCode(firstDigit<<4));}return strBuf.join("");}},{key:"getObj",value:function getObj(){var comment=false;var ch=this.currentChar;while(true){if(ch<0){return EOF;}if(comment){if(ch===0x0a||ch===0x0d){comment=false;}}else if(ch===0x25){comment=true;}else if(specialChars[ch]!==1){break;}ch=this.nextChar();}switch(ch|0){case 0x30:case 0x31:case 0x32:case 0x33:case 0x34:case 0x35:case 0x36:case 0x37:case 0x38:case 0x39:case 0x2b:case 0x2d:case 0x2e:return this.getNumber();case 0x28:return this.getString();case 0x2f:return this.getName();case 0x5b:this.nextChar();return Cmd.get("[");case 0x5d:this.nextChar();return Cmd.get("]");case 0x3c:ch=this.nextChar();if(ch===0x3c){this.nextChar();return Cmd.get("<<");}return this.getHexString();case 0x3e:ch=this.nextChar();if(ch===0x3e){this.nextChar();return Cmd.get(">>");}return Cmd.get(">");case 0x7b:this.nextChar();return Cmd.get("{");case 0x7d:this.nextChar();return Cmd.get("}");case 0x29:this.nextChar();throw new FormatError("Illegal character: ".concat(ch));}var str=String.fromCharCode(ch);if(ch<0x20||ch>0x7f){var nextCh=this.peekChar();if(nextCh>=0x20&&nextCh<=0x7f){this.nextChar();return Cmd.get(str);}}var knownCommands=this.knownCommands;var knownCommandFound=(knownCommands===null||knownCommands===void 0?void 0:knownCommands[str])!==undefined;while((ch=this.nextChar())>=0&&!specialChars[ch]){var possibleCommand=str+String.fromCharCode(ch);if(knownCommandFound&&knownCommands[possibleCommand]===undefined){break;}if(str.length===128){throw new FormatError("Command token too long: ".concat(str.length));}str=possibleCommand;knownCommandFound=(knownCommands===null||knownCommands===void 0?void 0:knownCommands[str])!==undefined;}if(str==="true"){return true;}if(str==="false"){return false;}if(str==="null"){return null;}if(str==="BI"){this.beginInlineImagePos=this.stream.pos;}return Cmd.get(str);}},{key:"skipToNextLine",value:function skipToNextLine(){var ch=this.currentChar;while(ch>=0){if(ch===0x0d){ch=this.nextChar();if(ch===0x0a){this.nextChar();}break;}else if(ch===0x0a){this.nextChar();break;}ch=this.nextChar();}}}]);}();var Linearization=/*#__PURE__*/function(){function Linearization(){_classCallCheck(this,Linearization);}return _createClass(Linearization,null,[{key:"create",value:function create(stream){function getInt(linDict,name){var allowZeroValue=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var obj=linDict.get(name);if(Number.isInteger(obj)&&(allowZeroValue?obj>=0:obj>0)){return obj;}throw new Error("The \\"".concat(name,"\\" parameter in the linearization ")+"dictionary is invalid.");}function getHints(linDict){var hints=linDict.get("H");var hintsLength;if(Array.isArray(hints)&&((hintsLength=hints.length)===2||hintsLength===4)){for(var index=0;index<hintsLength;index++){var hint=hints[index];if(!(Number.isInteger(hint)&&hint>0)){throw new Error("Hint (".concat(index,") in the linearization dictionary is invalid."));}}return hints;}throw new Error("Hint array in the linearization dictionary is invalid.");}var parser=new Parser({lexer:new Lexer(stream),xref:null});var obj1=parser.getObj();var obj2=parser.getObj();var obj3=parser.getObj();var linDict=parser.getObj();var obj,length;if(!(Number.isInteger(obj1)&&Number.isInteger(obj2)&&isCmd(obj3,"obj")&&linDict instanceof Dict&&typeof(obj=linDict.get("Linearized"))==="number"&&obj>0)){return null;}else if((length=getInt(linDict,"L"))!==stream.length){throw new Error(\'The "L" parameter in the linearization dictionary \'+"does not equal the stream length.");}return{length:length,hints:getHints(linDict),objectNumberFirst:getInt(linDict,"O"),endFirst:getInt(linDict,"E"),numPages:getInt(linDict,"N"),mainXRefEntriesOffset:getInt(linDict,"T"),pageFirst:linDict.has("P")?getInt(linDict,"P",true):0};}}]);}();;// ./src/core/cmap.js\nvar BUILT_IN_CMAPS=["Adobe-GB1-UCS2","Adobe-CNS1-UCS2","Adobe-Japan1-UCS2","Adobe-Korea1-UCS2","78-EUC-H","78-EUC-V","78-H","78-RKSJ-H","78-RKSJ-V","78-V","78ms-RKSJ-H","78ms-RKSJ-V","83pv-RKSJ-H","90ms-RKSJ-H","90ms-RKSJ-V","90msp-RKSJ-H","90msp-RKSJ-V","90pv-RKSJ-H","90pv-RKSJ-V","Add-H","Add-RKSJ-H","Add-RKSJ-V","Add-V","Adobe-CNS1-0","Adobe-CNS1-1","Adobe-CNS1-2","Adobe-CNS1-3","Adobe-CNS1-4","Adobe-CNS1-5","Adobe-CNS1-6","Adobe-GB1-0","Adobe-GB1-1","Adobe-GB1-2","Adobe-GB1-3","Adobe-GB1-4","Adobe-GB1-5","Adobe-Japan1-0","Adobe-Japan1-1","Adobe-Japan1-2","Adobe-Japan1-3","Adobe-Japan1-4","Adobe-Japan1-5","Adobe-Japan1-6","Adobe-Korea1-0","Adobe-Korea1-1","Adobe-Korea1-2","B5-H","B5-V","B5pc-H","B5pc-V","CNS-EUC-H","CNS-EUC-V","CNS1-H","CNS1-V","CNS2-H","CNS2-V","ETHK-B5-H","ETHK-B5-V","ETen-B5-H","ETen-B5-V","ETenms-B5-H","ETenms-B5-V","EUC-H","EUC-V","Ext-H","Ext-RKSJ-H","Ext-RKSJ-V","Ext-V","GB-EUC-H","GB-EUC-V","GB-H","GB-V","GBK-EUC-H","GBK-EUC-V","GBK2K-H","GBK2K-V","GBKp-EUC-H","GBKp-EUC-V","GBT-EUC-H","GBT-EUC-V","GBT-H","GBT-V","GBTpc-EUC-H","GBTpc-EUC-V","GBpc-EUC-H","GBpc-EUC-V","H","HKdla-B5-H","HKdla-B5-V","HKdlb-B5-H","HKdlb-B5-V","HKgccs-B5-H","HKgccs-B5-V","HKm314-B5-H","HKm314-B5-V","HKm471-B5-H","HKm471-B5-V","HKscs-B5-H","HKscs-B5-V","Hankaku","Hiragana","KSC-EUC-H","KSC-EUC-V","KSC-H","KSC-Johab-H","KSC-Johab-V","KSC-V","KSCms-UHC-H","KSCms-UHC-HW-H","KSCms-UHC-HW-V","KSCms-UHC-V","KSCpc-EUC-H","KSCpc-EUC-V","Katakana","NWP-H","NWP-V","RKSJ-H","RKSJ-V","Roman","UniCNS-UCS2-H","UniCNS-UCS2-V","UniCNS-UTF16-H","UniCNS-UTF16-V","UniCNS-UTF32-H","UniCNS-UTF32-V","UniCNS-UTF8-H","UniCNS-UTF8-V","UniGB-UCS2-H","UniGB-UCS2-V","UniGB-UTF16-H","UniGB-UTF16-V","UniGB-UTF32-H","UniGB-UTF32-V","UniGB-UTF8-H","UniGB-UTF8-V","UniJIS-UCS2-H","UniJIS-UCS2-HW-H","UniJIS-UCS2-HW-V","UniJIS-UCS2-V","UniJIS-UTF16-H","UniJIS-UTF16-V","UniJIS-UTF32-H","UniJIS-UTF32-V","UniJIS-UTF8-H","UniJIS-UTF8-V","UniJIS2004-UTF16-H","UniJIS2004-UTF16-V","UniJIS2004-UTF32-H","UniJIS2004-UTF32-V","UniJIS2004-UTF8-H","UniJIS2004-UTF8-V","UniJISPro-UCS2-HW-V","UniJISPro-UCS2-V","UniJISPro-UTF8-V","UniJISX0213-UTF32-H","UniJISX0213-UTF32-V","UniJISX02132004-UTF32-H","UniJISX02132004-UTF32-V","UniKS-UCS2-H","UniKS-UCS2-V","UniKS-UTF16-H","UniKS-UTF16-V","UniKS-UTF32-H","UniKS-UTF32-V","UniKS-UTF8-H","UniKS-UTF8-V","V","WP-Symbol"];var MAX_MAP_RANGE=Math.pow(2,24)-1;var CMap=/*#__PURE__*/function(){function CMap(){var builtInCMap=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;_classCallCheck(this,CMap);this.codespaceRanges=[[],[],[],[]];this.numCodespaceRanges=0;this._map=[];this.name="";this.vertical=false;this.useCMap=null;this.builtInCMap=builtInCMap;}return _createClass(CMap,[{key:"addCodespaceRange",value:function addCodespaceRange(n,low,high){this.codespaceRanges[n-1].push(low,high);this.numCodespaceRanges++;}},{key:"mapCidRange",value:function mapCidRange(low,high,dstLow){if(high-low>MAX_MAP_RANGE){throw new Error("mapCidRange - ignoring data above MAX_MAP_RANGE.");}while(low<=high){this._map[low++]=dstLow++;}}},{key:"mapBfRange",value:function mapBfRange(low,high,dstLow){if(high-low>MAX_MAP_RANGE){throw new Error("mapBfRange - ignoring data above MAX_MAP_RANGE.");}var lastByte=dstLow.length-1;while(low<=high){this._map[low++]=dstLow;var nextCharCode=dstLow.charCodeAt(lastByte)+1;if(nextCharCode>0xff){dstLow=dstLow.substring(0,lastByte-1)+String.fromCharCode(dstLow.charCodeAt(lastByte-1)+1)+"\\x00";continue;}dstLow=dstLow.substring(0,lastByte)+String.fromCharCode(nextCharCode);}}},{key:"mapBfRangeToArray",value:function mapBfRangeToArray(low,high,array){if(high-low>MAX_MAP_RANGE){throw new Error("mapBfRangeToArray - ignoring data above MAX_MAP_RANGE.");}var ii=array.length;var i=0;while(low<=high&&i<ii){this._map[low]=array[i++];++low;}}},{key:"mapOne",value:function mapOne(src,dst){this._map[src]=dst;}},{key:"lookup",value:function lookup(code){return this._map[code];}},{key:"contains",value:function contains(code){return this._map[code]!==undefined;}},{key:"forEach",value:function forEach(callback){var map=this._map;var length=map.length;if(length<=0x10000){for(var i=0;i<length;i++){if(map[i]!==undefined){callback(i,map[i]);}}}else{for(var _i24 in map){callback(_i24,map[_i24]);}}}},{key:"charCodeOf",value:function charCodeOf(value){var map=this._map;if(map.length<=0x10000){return map.indexOf(value);}for(var charCode in map){if(map[charCode]===value){return charCode|0;}}return-1;}},{key:"getMap",value:function getMap(){return this._map;}},{key:"readCharCode",value:function readCharCode(str,offset,out){var c=0;var codespaceRanges=this.codespaceRanges;for(var n=0,nn=codespaceRanges.length;n<nn;n++){c=(c<<8|str.charCodeAt(offset+n))>>>0;var codespaceRange=codespaceRanges[n];for(var k=0,kk=codespaceRange.length;k<kk;){var low=codespaceRange[k++];var high=codespaceRange[k++];if(c>=low&&c<=high){out.charcode=c;out.length=n+1;return;}}}out.charcode=0;out.length=1;}},{key:"getCharCodeLength",value:function getCharCodeLength(charCode){var codespaceRanges=this.codespaceRanges;for(var n=0,nn=codespaceRanges.length;n<nn;n++){var codespaceRange=codespaceRanges[n];for(var k=0,kk=codespaceRange.length;k<kk;){var low=codespaceRange[k++];var high=codespaceRange[k++];if(charCode>=low&&charCode<=high){return n+1;}}}return 1;}},{key:"length",get:function get(){return this._map.length;}},{key:"isIdentityCMap",get:function get(){if(!(this.name==="Identity-H"||this.name==="Identity-V")){return false;}if(this._map.length!==0x10000){return false;}for(var i=0;i<0x10000;i++){if(this._map[i]!==i){return false;}}return true;}}]);}();var IdentityCMap=/*#__PURE__*/function(_CMap){function IdentityCMap(vertical,n){var _this30;_classCallCheck(this,IdentityCMap);_this30=_callSuper(this,IdentityCMap);_this30.vertical=vertical;_this30.addCodespaceRange(n,0,0xffff);return _this30;}_inherits(IdentityCMap,_CMap);return _createClass(IdentityCMap,[{key:"mapCidRange",value:function mapCidRange(low,high,dstLow){unreachable("should not call mapCidRange");}},{key:"mapBfRange",value:function mapBfRange(low,high,dstLow){unreachable("should not call mapBfRange");}},{key:"mapBfRangeToArray",value:function mapBfRangeToArray(low,high,array){unreachable("should not call mapBfRangeToArray");}},{key:"mapOne",value:function mapOne(src,dst){unreachable("should not call mapCidOne");}},{key:"lookup",value:function lookup(code){return Number.isInteger(code)&&code<=0xffff?code:undefined;}},{key:"contains",value:function contains(code){return Number.isInteger(code)&&code<=0xffff;}},{key:"forEach",value:function forEach(callback){for(var i=0;i<=0xffff;i++){callback(i,i);}}},{key:"charCodeOf",value:function charCodeOf(value){return Number.isInteger(value)&&value<=0xffff?value:-1;}},{key:"getMap",value:function getMap(){var map=new Array(0x10000);for(var i=0;i<=0xffff;i++){map[i]=i;}return map;}},{key:"length",get:function get(){return 0x10000;}},{key:"isIdentityCMap",get:function get(){unreachable("should not access .isIdentityCMap");}}]);}(CMap);function strToInt(str){var a=0;for(var i=0;i<str.length;i++){a=a<<8|str.charCodeAt(i);}return a>>>0;}function expectString(obj){if(typeof obj!=="string"){throw new FormatError("Malformed CMap: expected string.");}}function expectInt(obj){if(!Number.isInteger(obj)){throw new FormatError("Malformed CMap: expected int.");}}function parseBfChar(cMap,lexer){while(true){var obj=lexer.getObj();if(obj===EOF){break;}if(isCmd(obj,"endbfchar")){return;}expectString(obj);var src=strToInt(obj);obj=lexer.getObj();expectString(obj);var dst=obj;cMap.mapOne(src,dst);}}function parseBfRange(cMap,lexer){while(true){var obj=lexer.getObj();if(obj===EOF){break;}if(isCmd(obj,"endbfrange")){return;}expectString(obj);var low=strToInt(obj);obj=lexer.getObj();expectString(obj);var high=strToInt(obj);obj=lexer.getObj();if(Number.isInteger(obj)||typeof obj==="string"){var dstLow=Number.isInteger(obj)?String.fromCharCode(obj):obj;cMap.mapBfRange(low,high,dstLow);}else if(isCmd(obj,"[")){obj=lexer.getObj();var array=[];while(!isCmd(obj,"]")&&obj!==EOF){array.push(obj);obj=lexer.getObj();}cMap.mapBfRangeToArray(low,high,array);}else{break;}}throw new FormatError("Invalid bf range.");}function parseCidChar(cMap,lexer){while(true){var obj=lexer.getObj();if(obj===EOF){break;}if(isCmd(obj,"endcidchar")){return;}expectString(obj);var src=strToInt(obj);obj=lexer.getObj();expectInt(obj);var dst=obj;cMap.mapOne(src,dst);}}function parseCidRange(cMap,lexer){while(true){var obj=lexer.getObj();if(obj===EOF){break;}if(isCmd(obj,"endcidrange")){return;}expectString(obj);var low=strToInt(obj);obj=lexer.getObj();expectString(obj);var high=strToInt(obj);obj=lexer.getObj();expectInt(obj);var dstLow=obj;cMap.mapCidRange(low,high,dstLow);}}function parseCodespaceRange(cMap,lexer){while(true){var obj=lexer.getObj();if(obj===EOF){break;}if(isCmd(obj,"endcodespacerange")){return;}if(typeof obj!=="string"){break;}var low=strToInt(obj);obj=lexer.getObj();if(typeof obj!=="string"){break;}var high=strToInt(obj);cMap.addCodespaceRange(obj.length,low,high);}throw new FormatError("Invalid codespace range.");}function parseWMode(cMap,lexer){var obj=lexer.getObj();if(Number.isInteger(obj)){cMap.vertical=!!obj;}}function parseCMapName(cMap,lexer){var obj=lexer.getObj();if(obj instanceof Name){cMap.name=obj.name;}}function parseCMap(_x26,_x27,_x28,_x29){return _parseCMap.apply(this,arguments);}function _parseCMap(){_parseCMap=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee109(cMap,lexer,fetchBuiltInCMap,useCMap){var previous,embeddedUseCMap,obj;return _regeneratorRuntime().wrap(function _callee109$(_context128){while(1)switch(_context128.prev=_context128.next){case 0:if(false){}_context128.prev=1;obj=lexer.getObj();if(!(obj===EOF)){_context128.next=7;break;}return _context128.abrupt("break",39);case 7:if(!(obj instanceof Name)){_context128.next=12;break;}if(obj.name==="WMode"){parseWMode(cMap,lexer);}else if(obj.name==="CMapName"){parseCMapName(cMap,lexer);}previous=obj;_context128.next=29;break;case 12:if(!(obj instanceof Cmd)){_context128.next=29;break;}_context128.t0=obj.cmd;_context128.next=_context128.t0==="endcmap"?16:_context128.t0==="usecmap"?17:_context128.t0==="begincodespacerange"?19:_context128.t0==="beginbfchar"?21:_context128.t0==="begincidchar"?23:_context128.t0==="beginbfrange"?25:_context128.t0==="begincidrange"?27:29;break;case 16:return _context128.abrupt("break",39);case 17:if(previous instanceof Name){embeddedUseCMap=previous.name;}return _context128.abrupt("break",29);case 19:parseCodespaceRange(cMap,lexer);return _context128.abrupt("break",29);case 21:parseBfChar(cMap,lexer);return _context128.abrupt("break",29);case 23:parseCidChar(cMap,lexer);return _context128.abrupt("break",29);case 25:parseBfRange(cMap,lexer);return _context128.abrupt("break",29);case 27:parseCidRange(cMap,lexer);return _context128.abrupt("break",29);case 29:_context128.next=37;break;case 31:_context128.prev=31;_context128.t1=_context128["catch"](1);if(!(_context128.t1 instanceof MissingDataException)){_context128.next=35;break;}throw _context128.t1;case 35:warn("Invalid cMap data: "+_context128.t1);return _context128.abrupt("continue",0);case 37:_context128.next=0;break;case 39:if(!useCMap&&embeddedUseCMap){useCMap=embeddedUseCMap;}if(!useCMap){_context128.next=42;break;}return _context128.abrupt("return",extendCMap(cMap,fetchBuiltInCMap,useCMap));case 42:return _context128.abrupt("return",cMap);case 43:case"end":return _context128.stop();}},_callee109,null,[[1,31]]);}));return _parseCMap.apply(this,arguments);}function extendCMap(_x30,_x31,_x32){return _extendCMap.apply(this,arguments);}function _extendCMap(){_extendCMap=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee110(cMap,fetchBuiltInCMap,useCMap){var useCodespaceRanges,i;return _regeneratorRuntime().wrap(function _callee110$(_context129){while(1)switch(_context129.prev=_context129.next){case 0:_context129.next=2;return createBuiltInCMap(useCMap,fetchBuiltInCMap);case 2:cMap.useCMap=_context129.sent;if(cMap.numCodespaceRanges===0){useCodespaceRanges=cMap.useCMap.codespaceRanges;for(i=0;i<useCodespaceRanges.length;i++){cMap.codespaceRanges[i]=useCodespaceRanges[i].slice();}cMap.numCodespaceRanges=cMap.useCMap.numCodespaceRanges;}cMap.useCMap.forEach(function(key,value){if(!cMap.contains(key)){cMap.mapOne(key,value);}});return _context129.abrupt("return",cMap);case 6:case"end":return _context129.stop();}},_callee110);}));return _extendCMap.apply(this,arguments);}function createBuiltInCMap(_x33,_x34){return _createBuiltInCMap.apply(this,arguments);}function _createBuiltInCMap(){_createBuiltInCMap=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee111(name,fetchBuiltInCMap){var _yield$fetchBuiltInCM,cMapData,isCompressed,cMap,lexer;return _regeneratorRuntime().wrap(function _callee111$(_context130){while(1)switch(_context130.prev=_context130.next){case 0:if(!(name==="Identity-H")){_context130.next=4;break;}return _context130.abrupt("return",new IdentityCMap(false,2));case 4:if(!(name==="Identity-V")){_context130.next=6;break;}return _context130.abrupt("return",new IdentityCMap(true,2));case 6:if(BUILT_IN_CMAPS.includes(name)){_context130.next=8;break;}throw new Error("Unknown CMap name: "+name);case 8:if(fetchBuiltInCMap){_context130.next=10;break;}throw new Error("Built-in CMap parameters are not provided.");case 10:_context130.next=12;return fetchBuiltInCMap(name);case 12:_yield$fetchBuiltInCM=_context130.sent;cMapData=_yield$fetchBuiltInCM.cMapData;isCompressed=_yield$fetchBuiltInCM.isCompressed;cMap=new CMap(true);if(!isCompressed){_context130.next=18;break;}return _context130.abrupt("return",new BinaryCMapReader().process(cMapData,cMap,function(useCMap){return extendCMap(cMap,fetchBuiltInCMap,useCMap);}));case 18:lexer=new Lexer(new Stream(cMapData));return _context130.abrupt("return",parseCMap(cMap,lexer,fetchBuiltInCMap,null));case 20:case"end":return _context130.stop();}},_callee111);}));return _createBuiltInCMap.apply(this,arguments);}var CMapFactory=/*#__PURE__*/function(){function CMapFactory(){_classCallCheck(this,CMapFactory);}return _createClass(CMapFactory,null,[{key:"create",value:function(){var _create=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee22(_ref31){var encoding,fetchBuiltInCMap,useCMap,parsedCMap;return _regeneratorRuntime().wrap(function _callee22$(_context26){while(1)switch(_context26.prev=_context26.next){case 0:encoding=_ref31.encoding,fetchBuiltInCMap=_ref31.fetchBuiltInCMap,useCMap=_ref31.useCMap;if(!(encoding instanceof Name)){_context26.next=5;break;}return _context26.abrupt("return",createBuiltInCMap(encoding.name,fetchBuiltInCMap));case 5:if(!(encoding instanceof BaseStream)){_context26.next=12;break;}_context26.next=8;return parseCMap(new CMap(),new Lexer(encoding),fetchBuiltInCMap,useCMap);case 8:parsedCMap=_context26.sent;if(!parsedCMap.isIdentityCMap){_context26.next=11;break;}return _context26.abrupt("return",createBuiltInCMap(parsedCMap.name,fetchBuiltInCMap));case 11:return _context26.abrupt("return",parsedCMap);case 12:throw new Error("Encoding required.");case 13:case"end":return _context26.stop();}},_callee22);}));function create(_x35){return _create.apply(this,arguments);}return create;}()}]);}();;// ./src/core/charsets.js\nvar ISOAdobeCharset=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron"];var ExpertCharset=[".notdef","space","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","fi","fl","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"];var ExpertSubsetCharset=[".notdef","space","dollaroldstyle","dollarsuperior","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","fi","fl","ffi","ffl","parenleftinferior","parenrightinferior","hyphensuperior","colonmonetary","onefitted","rupiah","centoldstyle","figuredash","hypheninferior","onequarter","onehalf","threequarters","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior"];;// ./src/core/encodings.js\nvar ExpertEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"];var MacExpertEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","centoldstyle","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","","threequartersemdash","","questionsmall","","","","","Ethsmall","","","onequarter","onehalf","threequarters","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","","","","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hypheninferior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","asuperior","centsuperior","","","","","Aacutesmall","Agravesmall","Acircumflexsmall","Adieresissmall","Atildesmall","Aringsmall","Ccedillasmall","Eacutesmall","Egravesmall","Ecircumflexsmall","Edieresissmall","Iacutesmall","Igravesmall","Icircumflexsmall","Idieresissmall","Ntildesmall","Oacutesmall","Ogravesmall","Ocircumflexsmall","Odieresissmall","Otildesmall","Uacutesmall","Ugravesmall","Ucircumflexsmall","Udieresissmall","","eightsuperior","fourinferior","threeinferior","sixinferior","eightinferior","seveninferior","Scaronsmall","","centinferior","twoinferior","","Dieresissmall","","Caronsmall","osuperior","fiveinferior","","commainferior","periodinferior","Yacutesmall","","dollarinferior","","","Thornsmall","","nineinferior","zeroinferior","Zcaronsmall","AEsmall","Oslashsmall","questiondownsmall","oneinferior","Lslashsmall","","","","","","","Cedillasmall","","","","","","OEsmall","figuredash","hyphensuperior","","","","","exclamdownsmall","","Ydieresissmall","","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","ninesuperior","zerosuperior","","esuperior","rsuperior","tsuperior","","","isuperior","ssuperior","dsuperior","","","","","","lsuperior","Ogoneksmall","Brevesmall","Macronsmall","bsuperior","nsuperior","msuperior","commasuperior","periodsuperior","Dotaccentsmall","Ringsmall","","","",""];var MacRomanEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","space","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron"];var StandardEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls","","","",""];var WinAnsiEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","bullet","Euro","bullet","quotesinglbase","florin","quotedblbase","ellipsis","dagger","daggerdbl","circumflex","perthousand","Scaron","guilsinglleft","OE","bullet","Zcaron","bullet","bullet","quoteleft","quoteright","quotedblleft","quotedblright","bullet","endash","emdash","tilde","trademark","scaron","guilsinglright","oe","bullet","zcaron","Ydieresis","space","exclamdown","cent","sterling","currency","yen","brokenbar","section","dieresis","copyright","ordfeminine","guillemotleft","logicalnot","hyphen","registered","macron","degree","plusminus","twosuperior","threesuperior","acute","mu","paragraph","periodcentered","cedilla","onesuperior","ordmasculine","guillemotright","onequarter","onehalf","threequarters","questiondown","Agrave","Aacute","Acircumflex","Atilde","Adieresis","Aring","AE","Ccedilla","Egrave","Eacute","Ecircumflex","Edieresis","Igrave","Iacute","Icircumflex","Idieresis","Eth","Ntilde","Ograve","Oacute","Ocircumflex","Otilde","Odieresis","multiply","Oslash","Ugrave","Uacute","Ucircumflex","Udieresis","Yacute","Thorn","germandbls","agrave","aacute","acircumflex","atilde","adieresis","aring","ae","ccedilla","egrave","eacute","ecircumflex","edieresis","igrave","iacute","icircumflex","idieresis","eth","ntilde","ograve","oacute","ocircumflex","otilde","odieresis","divide","oslash","ugrave","uacute","ucircumflex","udieresis","yacute","thorn","ydieresis"];var SymbolSetEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","universal","numbersign","existential","percent","ampersand","suchthat","parenleft","parenright","asteriskmath","plus","comma","minus","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","congruent","Alpha","Beta","Chi","Delta","Epsilon","Phi","Gamma","Eta","Iota","theta1","Kappa","Lambda","Mu","Nu","Omicron","Pi","Theta","Rho","Sigma","Tau","Upsilon","sigma1","Omega","Xi","Psi","Zeta","bracketleft","therefore","bracketright","perpendicular","underscore","radicalex","alpha","beta","chi","delta","epsilon","phi","gamma","eta","iota","phi1","kappa","lambda","mu","nu","omicron","pi","theta","rho","sigma","tau","upsilon","omega1","omega","xi","psi","zeta","braceleft","bar","braceright","similar","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Euro","Upsilon1","minute","lessequal","fraction","infinity","florin","club","diamond","heart","spade","arrowboth","arrowleft","arrowup","arrowright","arrowdown","degree","plusminus","second","greaterequal","multiply","proportional","partialdiff","bullet","divide","notequal","equivalence","approxequal","ellipsis","arrowvertex","arrowhorizex","carriagereturn","aleph","Ifraktur","Rfraktur","weierstrass","circlemultiply","circleplus","emptyset","intersection","union","propersuperset","reflexsuperset","notsubset","propersubset","reflexsubset","element","notelement","angle","gradient","registerserif","copyrightserif","trademarkserif","product","radical","dotmath","logicalnot","logicaland","logicalor","arrowdblboth","arrowdblleft","arrowdblup","arrowdblright","arrowdbldown","lozenge","angleleft","registersans","copyrightsans","trademarksans","summation","parenlefttp","parenleftex","parenleftbt","bracketlefttp","bracketleftex","bracketleftbt","bracelefttp","braceleftmid","braceleftbt","braceex","","angleright","integral","integraltp","integralex","integralbt","parenrighttp","parenrightex","parenrightbt","bracketrighttp","bracketrightex","bracketrightbt","bracerighttp","bracerightmid","bracerightbt",""];var ZapfDingbatsEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","a1","a2","a202","a3","a4","a5","a119","a118","a117","a11","a12","a13","a14","a15","a16","a105","a17","a18","a19","a20","a21","a22","a23","a24","a25","a26","a27","a28","a6","a7","a8","a9","a10","a29","a30","a31","a32","a33","a34","a35","a36","a37","a38","a39","a40","a41","a42","a43","a44","a45","a46","a47","a48","a49","a50","a51","a52","a53","a54","a55","a56","a57","a58","a59","a60","a61","a62","a63","a64","a65","a66","a67","a68","a69","a70","a71","a72","a73","a74","a203","a75","a204","a76","a77","a78","a79","a81","a82","a83","a84","a97","a98","a99","a100","","a89","a90","a93","a94","a91","a92","a205","a85","a206","a86","a87","a88","a95","a96","","","","","","","","","","","","","","","","","","","","a101","a102","a103","a104","a106","a107","a108","a112","a111","a110","a109","a120","a121","a122","a123","a124","a125","a126","a127","a128","a129","a130","a131","a132","a133","a134","a135","a136","a137","a138","a139","a140","a141","a142","a143","a144","a145","a146","a147","a148","a149","a150","a151","a152","a153","a154","a155","a156","a157","a158","a159","a160","a161","a163","a164","a196","a165","a192","a166","a167","a168","a169","a170","a171","a172","a173","a162","a174","a175","a176","a177","a178","a179","a193","a180","a199","a181","a200","a182","","a201","a183","a184","a197","a185","a194","a198","a186","a195","a187","a188","a189","a190","a191",""];function getEncoding(encodingName){switch(encodingName){case"WinAnsiEncoding":return WinAnsiEncoding;case"StandardEncoding":return StandardEncoding;case"MacRomanEncoding":return MacRomanEncoding;case"SymbolSetEncoding":return SymbolSetEncoding;case"ZapfDingbatsEncoding":return ZapfDingbatsEncoding;case"ExpertEncoding":return ExpertEncoding;case"MacExpertEncoding":return MacExpertEncoding;default:return null;}};// ./src/core/cff_parser.js\nvar MAX_SUBR_NESTING=10;var CFFStandardStrings=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"];var NUM_STANDARD_CFF_STRINGS=391;var CharstringValidationData=[null,{id:"hstem",min:2,stackClearing:true,stem:true},null,{id:"vstem",min:2,stackClearing:true,stem:true},{id:"vmoveto",min:1,stackClearing:true},{id:"rlineto",min:2,resetStack:true},{id:"hlineto",min:1,resetStack:true},{id:"vlineto",min:1,resetStack:true},{id:"rrcurveto",min:6,resetStack:true},null,{id:"callsubr",min:1,undefStack:true},{id:"return",min:0,undefStack:true},null,null,{id:"endchar",min:0,stackClearing:true},null,null,null,{id:"hstemhm",min:2,stackClearing:true,stem:true},{id:"hintmask",min:0,stackClearing:true},{id:"cntrmask",min:0,stackClearing:true},{id:"rmoveto",min:2,stackClearing:true},{id:"hmoveto",min:1,stackClearing:true},{id:"vstemhm",min:2,stackClearing:true,stem:true},{id:"rcurveline",min:8,resetStack:true},{id:"rlinecurve",min:8,resetStack:true},{id:"vvcurveto",min:4,resetStack:true},{id:"hhcurveto",min:4,resetStack:true},null,{id:"callgsubr",min:1,undefStack:true},{id:"vhcurveto",min:4,resetStack:true},{id:"hvcurveto",min:4,resetStack:true}];var CharstringValidationData12=[null,null,null,{id:"and",min:2,stackDelta:-1},{id:"or",min:2,stackDelta:-1},{id:"not",min:1,stackDelta:0},null,null,null,{id:"abs",min:1,stackDelta:0},{id:"add",min:2,stackDelta:-1,stackFn:function stackFn(stack,index){stack[index-2]=stack[index-2]+stack[index-1];}},{id:"sub",min:2,stackDelta:-1,stackFn:function stackFn(stack,index){stack[index-2]=stack[index-2]-stack[index-1];}},{id:"div",min:2,stackDelta:-1,stackFn:function stackFn(stack,index){stack[index-2]=stack[index-2]/stack[index-1];}},null,{id:"neg",min:1,stackDelta:0,stackFn:function stackFn(stack,index){stack[index-1]=-stack[index-1];}},{id:"eq",min:2,stackDelta:-1},null,null,{id:"drop",min:1,stackDelta:-1},null,{id:"put",min:2,stackDelta:-2},{id:"get",min:1,stackDelta:0},{id:"ifelse",min:4,stackDelta:-3},{id:"random",min:0,stackDelta:1},{id:"mul",min:2,stackDelta:-1,stackFn:function stackFn(stack,index){stack[index-2]=stack[index-2]*stack[index-1];}},null,{id:"sqrt",min:1,stackDelta:0},{id:"dup",min:1,stackDelta:1},{id:"exch",min:2,stackDelta:0},{id:"index",min:2,stackDelta:0},{id:"roll",min:3,stackDelta:-2},null,null,null,{id:"hflex",min:7,resetStack:true},{id:"flex",min:13,resetStack:true},{id:"hflex1",min:9,resetStack:true},{id:"flex1",min:11,resetStack:true}];var CFFParser=/*#__PURE__*/function(){function CFFParser(file,properties,seacAnalysisEnabled){_classCallCheck(this,CFFParser);this.bytes=file.getBytes();this.properties=properties;this.seacAnalysisEnabled=!!seacAnalysisEnabled;}return _createClass(CFFParser,[{key:"parse",value:function parse(){var properties=this.properties;var cff=new CFF();this.cff=cff;var header=this.parseHeader();var nameIndex=this.parseIndex(header.endPos);var topDictIndex=this.parseIndex(nameIndex.endPos);var stringIndex=this.parseIndex(topDictIndex.endPos);var globalSubrIndex=this.parseIndex(stringIndex.endPos);var topDictParsed=this.parseDict(topDictIndex.obj.get(0));var topDict=this.createDict(CFFTopDict,topDictParsed,cff.strings);cff.header=header.obj;cff.names=this.parseNameIndex(nameIndex.obj);cff.strings=this.parseStringIndex(stringIndex.obj);cff.topDict=topDict;cff.globalSubrIndex=globalSubrIndex.obj;this.parsePrivateDict(cff.topDict);cff.isCIDFont=topDict.hasName("ROS");var charStringOffset=topDict.getByName("CharStrings");var charStringIndex=this.parseIndex(charStringOffset).obj;var fontMatrix=topDict.getByName("FontMatrix");if(fontMatrix){properties.fontMatrix=fontMatrix;}var fontBBox=topDict.getByName("FontBBox");if(fontBBox){properties.ascent=Math.max(fontBBox[3],fontBBox[1]);properties.descent=Math.min(fontBBox[1],fontBBox[3]);properties.ascentScaled=true;}var charset,encoding;if(cff.isCIDFont){var fdArrayIndex=this.parseIndex(topDict.getByName("FDArray")).obj;for(var i=0,ii=fdArrayIndex.count;i<ii;++i){var dictRaw=fdArrayIndex.get(i);var fontDict=this.createDict(CFFTopDict,this.parseDict(dictRaw),cff.strings);this.parsePrivateDict(fontDict);cff.fdArray.push(fontDict);}encoding=null;charset=this.parseCharsets(topDict.getByName("charset"),charStringIndex.count,cff.strings,true);cff.fdSelect=this.parseFDSelect(topDict.getByName("FDSelect"),charStringIndex.count);}else{charset=this.parseCharsets(topDict.getByName("charset"),charStringIndex.count,cff.strings,false);encoding=this.parseEncoding(topDict.getByName("Encoding"),properties,cff.strings,charset.charset);}cff.charset=charset;cff.encoding=encoding;var charStringsAndSeacs=this.parseCharStrings({charStrings:charStringIndex,localSubrIndex:topDict.privateDict.subrsIndex,globalSubrIndex:globalSubrIndex.obj,fdSelect:cff.fdSelect,fdArray:cff.fdArray,privateDict:topDict.privateDict});cff.charStrings=charStringsAndSeacs.charStrings;cff.seacs=charStringsAndSeacs.seacs;cff.widths=charStringsAndSeacs.widths;return cff;}},{key:"parseHeader",value:function parseHeader(){var bytes=this.bytes;var bytesLength=bytes.length;var offset=0;while(offset<bytesLength&&bytes[offset]!==1){++offset;}if(offset>=bytesLength){throw new FormatError("Invalid CFF header");}if(offset!==0){info("cff data is shifted");bytes=bytes.subarray(offset);this.bytes=bytes;}var major=bytes[0];var minor=bytes[1];var hdrSize=bytes[2];var offSize=bytes[3];var header=new CFFHeader(major,minor,hdrSize,offSize);return{obj:header,endPos:hdrSize};}},{key:"parseDict",value:function parseDict(dict){var pos=0;function parseOperand(){var value=dict[pos++];if(value===30){return parseFloatOperand();}else if(value===28){value=readInt16(dict,pos);pos+=2;return value;}else if(value===29){value=dict[pos++];value=value<<8|dict[pos++];value=value<<8|dict[pos++];value=value<<8|dict[pos++];return value;}else if(value>=32&&value<=246){return value-139;}else if(value>=247&&value<=250){return(value-247)*256+dict[pos++]+108;}else if(value>=251&&value<=254){return-((value-251)*256)-dict[pos++]-108;}warn(\'CFFParser_parseDict: "\'+value+\'" is a reserved command.\');return NaN;}function parseFloatOperand(){var str="";var eof=15;var lookup=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];var length=dict.length;while(pos<length){var b=dict[pos++];var b1=b>>4;var b2=b&15;if(b1===eof){break;}str+=lookup[b1];if(b2===eof){break;}str+=lookup[b2];}return parseFloat(str);}var operands=[];var entries=[];pos=0;var end=dict.length;while(pos<end){var b=dict[pos];if(b<=21){if(b===12){b=b<<8|dict[++pos];}entries.push([b,operands]);operands=[];++pos;}else{operands.push(parseOperand());}}return entries;}},{key:"parseIndex",value:function parseIndex(pos){var cffIndex=new CFFIndex();var bytes=this.bytes;var count=bytes[pos++]<<8|bytes[pos++];var offsets=[];var end=pos;var i,ii;if(count!==0){var offsetSize=bytes[pos++];var startPos=pos+(count+1)*offsetSize-1;for(i=0,ii=count+1;i<ii;++i){var offset=0;for(var j=0;j<offsetSize;++j){offset<<=8;offset+=bytes[pos++];}offsets.push(startPos+offset);}end=offsets[count];}for(i=0,ii=offsets.length-1;i<ii;++i){var offsetStart=offsets[i];var offsetEnd=offsets[i+1];cffIndex.add(bytes.subarray(offsetStart,offsetEnd));}return{obj:cffIndex,endPos:end};}},{key:"parseNameIndex",value:function parseNameIndex(index){var names=[];for(var i=0,ii=index.count;i<ii;++i){var name=index.get(i);names.push(bytesToString(name));}return names;}},{key:"parseStringIndex",value:function parseStringIndex(index){var strings=new CFFStrings();for(var i=0,ii=index.count;i<ii;++i){var data=index.get(i);strings.add(bytesToString(data));}return strings;}},{key:"createDict",value:function createDict(Type,dict,strings){var cffDict=new Type(strings);var _iterator30=_createForOfIteratorHelper(dict),_step30;try{for(_iterator30.s();!(_step30=_iterator30.n()).done;){var _step30$value=_slicedToArray(_step30.value,2),key=_step30$value[0],value=_step30$value[1];cffDict.setByKey(key,value);}}catch(err){_iterator30.e(err);}finally{_iterator30.f();}return cffDict;}},{key:"parseCharString",value:function parseCharString(state,data,localSubrIndex,globalSubrIndex){if(!data||state.callDepth>MAX_SUBR_NESTING){return false;}var stackSize=state.stackSize;var stack=state.stack;var length=data.length;for(var j=0;j<length;){var value=data[j++];var validationCommand=null;if(value===12){var q=data[j++];if(q===0){data[j-2]=139;data[j-1]=22;stackSize=0;}else{validationCommand=CharstringValidationData12[q];}}else if(value===28){stack[stackSize]=readInt16(data,j);j+=2;stackSize++;}else if(value===14){if(stackSize>=4){stackSize-=4;if(this.seacAnalysisEnabled){state.seac=stack.slice(stackSize,stackSize+4);return false;}}validationCommand=CharstringValidationData[value];}else if(value>=32&&value<=246){stack[stackSize]=value-139;stackSize++;}else if(value>=247&&value<=254){stack[stackSize]=value<251?(value-247<<8)+data[j]+108:-(value-251<<8)-data[j]-108;j++;stackSize++;}else if(value===255){stack[stackSize]=(data[j]<<24|data[j+1]<<16|data[j+2]<<8|data[j+3])/65536;j+=4;stackSize++;}else if(value===19||value===20){state.hints+=stackSize>>1;if(state.hints===0){data.copyWithin(j-1,j,-1);j-=1;length-=1;continue;}j+=state.hints+7>>3;stackSize%=2;validationCommand=CharstringValidationData[value];}else if(value===10||value===29){var subrsIndex=value===10?localSubrIndex:globalSubrIndex;if(!subrsIndex){validationCommand=CharstringValidationData[value];warn("Missing subrsIndex for "+validationCommand.id);return false;}var bias=32768;if(subrsIndex.count<1240){bias=107;}else if(subrsIndex.count<33900){bias=1131;}var subrNumber=stack[--stackSize]+bias;if(subrNumber<0||subrNumber>=subrsIndex.count||isNaN(subrNumber)){validationCommand=CharstringValidationData[value];warn("Out of bounds subrIndex for "+validationCommand.id);return false;}state.stackSize=stackSize;state.callDepth++;var valid=this.parseCharString(state,subrsIndex.get(subrNumber),localSubrIndex,globalSubrIndex);if(!valid){return false;}state.callDepth--;stackSize=state.stackSize;continue;}else if(value===11){state.stackSize=stackSize;return true;}else if(value===0&&j===data.length){data[j-1]=14;validationCommand=CharstringValidationData[14];}else if(value===9){data.copyWithin(j-1,j,-1);j-=1;length-=1;continue;}else{validationCommand=CharstringValidationData[value];}if(validationCommand){if(validationCommand.stem){state.hints+=stackSize>>1;if(value===3||value===23){state.hasVStems=true;}else if(state.hasVStems&&(value===1||value===18)){warn("CFF stem hints are in wrong order");data[j-1]=value===1?3:23;}}if("min"in validationCommand){if(!state.undefStack&&stackSize<validationCommand.min){warn("Not enough parameters for "+validationCommand.id+"; actual: "+stackSize+", expected: "+validationCommand.min);if(stackSize===0){data[j-1]=14;return true;}return false;}}if(state.firstStackClearing&&validationCommand.stackClearing){state.firstStackClearing=false;stackSize-=validationCommand.min;if(stackSize>=2&&validationCommand.stem){stackSize%=2;}else if(stackSize>1){warn("Found too many parameters for stack-clearing command");}if(stackSize>0){state.width=stack[stackSize-1];}}if("stackDelta"in validationCommand){if("stackFn"in validationCommand){validationCommand.stackFn(stack,stackSize);}stackSize+=validationCommand.stackDelta;}else if(validationCommand.stackClearing){stackSize=0;}else if(validationCommand.resetStack){stackSize=0;state.undefStack=false;}else if(validationCommand.undefStack){stackSize=0;state.undefStack=true;state.firstStackClearing=false;}}}if(length<data.length){data.fill(14,length);}state.stackSize=stackSize;return true;}},{key:"parseCharStrings",value:function parseCharStrings(_ref32){var charStrings=_ref32.charStrings,localSubrIndex=_ref32.localSubrIndex,globalSubrIndex=_ref32.globalSubrIndex,fdSelect=_ref32.fdSelect,fdArray=_ref32.fdArray,privateDict=_ref32.privateDict;var seacs=[];var widths=[];var count=charStrings.count;for(var i=0;i<count;i++){var charstring=charStrings.get(i);var state={callDepth:0,stackSize:0,stack:[],undefStack:true,hints:0,firstStackClearing:true,seac:null,width:null,hasVStems:false};var valid=true;var localSubrToUse=null;var privateDictToUse=privateDict;if(fdSelect&&fdArray.length){var fdIndex=fdSelect.getFDIndex(i);if(fdIndex===-1){warn("Glyph index is not in fd select.");valid=false;}if(fdIndex>=fdArray.length){warn("Invalid fd index for glyph index.");valid=false;}if(valid){privateDictToUse=fdArray[fdIndex].privateDict;localSubrToUse=privateDictToUse.subrsIndex;}}else if(localSubrIndex){localSubrToUse=localSubrIndex;}if(valid){valid=this.parseCharString(state,charstring,localSubrToUse,globalSubrIndex);}if(state.width!==null){var nominalWidth=privateDictToUse.getByName("nominalWidthX");widths[i]=nominalWidth+state.width;}else{var defaultWidth=privateDictToUse.getByName("defaultWidthX");widths[i]=defaultWidth;}if(state.seac!==null){seacs[i]=state.seac;}if(!valid){charStrings.set(i,new Uint8Array([14]));}}return{charStrings:charStrings,seacs:seacs,widths:widths};}},{key:"emptyPrivateDictionary",value:function emptyPrivateDictionary(parentDict){var privateDict=this.createDict(CFFPrivateDict,[],parentDict.strings);parentDict.setByKey(18,[0,0]);parentDict.privateDict=privateDict;}},{key:"parsePrivateDict",value:function parsePrivateDict(parentDict){if(!parentDict.hasName("Private")){this.emptyPrivateDictionary(parentDict);return;}var privateOffset=parentDict.getByName("Private");if(!Array.isArray(privateOffset)||privateOffset.length!==2){parentDict.removeByName("Private");return;}var size=privateOffset[0];var offset=privateOffset[1];if(size===0||offset>=this.bytes.length){this.emptyPrivateDictionary(parentDict);return;}var privateDictEnd=offset+size;var dictData=this.bytes.subarray(offset,privateDictEnd);var dict=this.parseDict(dictData);var privateDict=this.createDict(CFFPrivateDict,dict,parentDict.strings);parentDict.privateDict=privateDict;if(privateDict.getByName("ExpansionFactor")===0){privateDict.setByName("ExpansionFactor",0.06);}if(!privateDict.getByName("Subrs")){return;}var subrsOffset=privateDict.getByName("Subrs");var relativeOffset=offset+subrsOffset;if(subrsOffset===0||relativeOffset>=this.bytes.length){this.emptyPrivateDictionary(parentDict);return;}var subrsIndex=this.parseIndex(relativeOffset);privateDict.subrsIndex=subrsIndex.obj;}},{key:"parseCharsets",value:function parseCharsets(pos,length,strings,cid){if(pos===0){return new CFFCharset(true,CFFCharsetPredefinedTypes.ISO_ADOBE,ISOAdobeCharset);}else if(pos===1){return new CFFCharset(true,CFFCharsetPredefinedTypes.EXPERT,ExpertCharset);}else if(pos===2){return new CFFCharset(true,CFFCharsetPredefinedTypes.EXPERT_SUBSET,ExpertSubsetCharset);}var bytes=this.bytes;var start=pos;var format=bytes[pos++];var charset=[cid?0:".notdef"];var id,count,i;length-=1;switch(format){case 0:for(i=0;i<length;i++){id=bytes[pos++]<<8|bytes[pos++];charset.push(cid?id:strings.get(id));}break;case 1:while(charset.length<=length){id=bytes[pos++]<<8|bytes[pos++];count=bytes[pos++];for(i=0;i<=count;i++){charset.push(cid?id++:strings.get(id++));}}break;case 2:while(charset.length<=length){id=bytes[pos++]<<8|bytes[pos++];count=bytes[pos++]<<8|bytes[pos++];for(i=0;i<=count;i++){charset.push(cid?id++:strings.get(id++));}}break;default:throw new FormatError("Unknown charset format");}var end=pos;var raw=bytes.subarray(start,end);return new CFFCharset(false,format,charset,raw);}},{key:"parseEncoding",value:function parseEncoding(pos,properties,strings,charset){var encoding=Object.create(null);var bytes=this.bytes;var predefined=false;var format,i,ii;var raw=null;function readSupplement(){var supplementsCount=bytes[pos++];for(i=0;i<supplementsCount;i++){var code=bytes[pos++];var sid=(bytes[pos++]<<8)+(bytes[pos++]&0xff);encoding[code]=charset.indexOf(strings.get(sid));}}if(pos===0||pos===1){predefined=true;format=pos;var baseEncoding=pos?ExpertEncoding:StandardEncoding;for(i=0,ii=charset.length;i<ii;i++){var index=baseEncoding.indexOf(charset[i]);if(index!==-1){encoding[index]=i;}}}else{var dataStart=pos;format=bytes[pos++];switch(format&0x7f){case 0:var glyphsCount=bytes[pos++];for(i=1;i<=glyphsCount;i++){encoding[bytes[pos++]]=i;}break;case 1:var rangesCount=bytes[pos++];var gid=1;for(i=0;i<rangesCount;i++){var start=bytes[pos++];var left=bytes[pos++];for(var j=start;j<=start+left;j++){encoding[j]=gid++;}}break;default:throw new FormatError("Unknown encoding format: ".concat(format," in CFF"));}var dataEnd=pos;if(format&0x80){bytes[dataStart]&=0x7f;readSupplement();}raw=bytes.subarray(dataStart,dataEnd);}format&=0x7f;return new CFFEncoding(predefined,format,encoding,raw);}},{key:"parseFDSelect",value:function parseFDSelect(pos,length){var bytes=this.bytes;var format=bytes[pos++];var fdSelect=[];var i;switch(format){case 0:for(i=0;i<length;++i){var id=bytes[pos++];fdSelect.push(id);}break;case 3:var rangesCount=bytes[pos++]<<8|bytes[pos++];for(i=0;i<rangesCount;++i){var first=bytes[pos++]<<8|bytes[pos++];if(i===0&&first!==0){warn("parseFDSelect: The first range must have a first GID of 0"+" -- trying to recover.");first=0;}var fdIndex=bytes[pos++];var next=bytes[pos]<<8|bytes[pos+1];for(var j=first;j<next;++j){fdSelect.push(fdIndex);}}pos+=2;break;default:throw new FormatError("parseFDSelect: Unknown format \\"".concat(format,"\\"."));}if(fdSelect.length!==length){throw new FormatError("parseFDSelect: Invalid font data.");}return new CFFFDSelect(format,fdSelect);}}]);}();var CFF=/*#__PURE__*/function(){function CFF(){_classCallCheck(this,CFF);this.header=null;this.names=[];this.topDict=null;this.strings=new CFFStrings();this.globalSubrIndex=null;this.encoding=null;this.charset=null;this.charStrings=null;this.fdArray=[];this.fdSelect=null;this.isCIDFont=false;}return _createClass(CFF,[{key:"duplicateFirstGlyph",value:function duplicateFirstGlyph(){if(this.charStrings.count>=65535){warn("Not enough space in charstrings to duplicate first glyph.");return;}var glyphZero=this.charStrings.get(0);this.charStrings.add(glyphZero);if(this.isCIDFont){this.fdSelect.fdSelect.push(this.fdSelect.fdSelect[0]);}}},{key:"hasGlyphId",value:function hasGlyphId(id){if(id<0||id>=this.charStrings.count){return false;}var glyph=this.charStrings.get(id);return glyph.length>0;}}]);}();var CFFHeader=/*#__PURE__*/_createClass(function CFFHeader(major,minor,hdrSize,offSize){_classCallCheck(this,CFFHeader);this.major=major;this.minor=minor;this.hdrSize=hdrSize;this.offSize=offSize;});var CFFStrings=/*#__PURE__*/function(){function CFFStrings(){_classCallCheck(this,CFFStrings);this.strings=[];}return _createClass(CFFStrings,[{key:"get",value:function get(index){if(index>=0&&index<=NUM_STANDARD_CFF_STRINGS-1){return CFFStandardStrings[index];}if(index-NUM_STANDARD_CFF_STRINGS<=this.strings.length){return this.strings[index-NUM_STANDARD_CFF_STRINGS];}return CFFStandardStrings[0];}},{key:"getSID",value:function getSID(str){var index=CFFStandardStrings.indexOf(str);if(index!==-1){return index;}index=this.strings.indexOf(str);if(index!==-1){return index+NUM_STANDARD_CFF_STRINGS;}return-1;}},{key:"add",value:function add(value){this.strings.push(value);}},{key:"count",get:function get(){return this.strings.length;}}]);}();var CFFIndex=/*#__PURE__*/function(){function CFFIndex(){_classCallCheck(this,CFFIndex);this.objects=[];this.length=0;}return _createClass(CFFIndex,[{key:"add",value:function add(data){this.length+=data.length;this.objects.push(data);}},{key:"set",value:function set(index,data){this.length+=data.length-this.objects[index].length;this.objects[index]=data;}},{key:"get",value:function get(index){return this.objects[index];}},{key:"count",get:function get(){return this.objects.length;}}]);}();var CFFDict=/*#__PURE__*/function(){function CFFDict(tables,strings){_classCallCheck(this,CFFDict);this.keyToNameMap=tables.keyToNameMap;this.nameToKeyMap=tables.nameToKeyMap;this.defaults=tables.defaults;this.types=tables.types;this.opcodes=tables.opcodes;this.order=tables.order;this.strings=strings;this.values=Object.create(null);}return _createClass(CFFDict,[{key:"setByKey",value:function setByKey(key,value){if(!(key in this.keyToNameMap)){return false;}if(value.length===0){return true;}var _iterator31=_createForOfIteratorHelper(value),_step31;try{for(_iterator31.s();!(_step31=_iterator31.n()).done;){var val=_step31.value;if(isNaN(val)){warn("Invalid CFFDict value: \\"".concat(value,"\\" for key \\"").concat(key,"\\"."));return true;}}}catch(err){_iterator31.e(err);}finally{_iterator31.f();}var type=this.types[key];if(type==="num"||type==="sid"||type==="offset"){value=value[0];}this.values[key]=value;return true;}},{key:"setByName",value:function setByName(name,value){if(!(name in this.nameToKeyMap)){throw new FormatError("Invalid dictionary name \\"".concat(name,"\\""));}this.values[this.nameToKeyMap[name]]=value;}},{key:"hasName",value:function hasName(name){return this.nameToKeyMap[name]in this.values;}},{key:"getByName",value:function getByName(name){if(!(name in this.nameToKeyMap)){throw new FormatError("Invalid dictionary name ".concat(name,"\\""));}var key=this.nameToKeyMap[name];if(!(key in this.values)){return this.defaults[key];}return this.values[key];}},{key:"removeByName",value:function removeByName(name){delete this.values[this.nameToKeyMap[name]];}}],[{key:"createTables",value:function createTables(layout){var tables={keyToNameMap:{},nameToKeyMap:{},defaults:{},types:{},opcodes:{},order:[]};var _iterator32=_createForOfIteratorHelper(layout),_step32;try{for(_iterator32.s();!(_step32=_iterator32.n()).done;){var entry=_step32.value;var key=Array.isArray(entry[0])?(entry[0][0]<<8)+entry[0][1]:entry[0];tables.keyToNameMap[key]=entry[1];tables.nameToKeyMap[entry[1]]=key;tables.types[key]=entry[2];tables.defaults[key]=entry[3];tables.opcodes[key]=Array.isArray(entry[0])?entry[0]:[entry[0]];tables.order.push(key);}}catch(err){_iterator32.e(err);}finally{_iterator32.f();}return tables;}}]);}();var CFFTopDictLayout=[[[12,30],"ROS",["sid","sid","num"],null],[[12,20],"SyntheticBase","num",null],[0,"version","sid",null],[1,"Notice","sid",null],[[12,0],"Copyright","sid",null],[2,"FullName","sid",null],[3,"FamilyName","sid",null],[4,"Weight","sid",null],[[12,1],"isFixedPitch","num",0],[[12,2],"ItalicAngle","num",0],[[12,3],"UnderlinePosition","num",-100],[[12,4],"UnderlineThickness","num",50],[[12,5],"PaintType","num",0],[[12,6],"CharstringType","num",2],[[12,7],"FontMatrix",["num","num","num","num","num","num"],[0.001,0,0,0.001,0,0]],[13,"UniqueID","num",null],[5,"FontBBox",["num","num","num","num"],[0,0,0,0]],[[12,8],"StrokeWidth","num",0],[14,"XUID","array",null],[15,"charset","offset",0],[16,"Encoding","offset",0],[17,"CharStrings","offset",0],[18,"Private",["offset","offset"],null],[[12,21],"PostScript","sid",null],[[12,22],"BaseFontName","sid",null],[[12,23],"BaseFontBlend","delta",null],[[12,31],"CIDFontVersion","num",0],[[12,32],"CIDFontRevision","num",0],[[12,33],"CIDFontType","num",0],[[12,34],"CIDCount","num",8720],[[12,35],"UIDBase","num",null],[[12,37],"FDSelect","offset",null],[[12,36],"FDArray","offset",null],[[12,38],"FontName","sid",null]];var CFFTopDict=/*#__PURE__*/function(_CFFDict){function CFFTopDict(strings){var _this31;_classCallCheck(this,CFFTopDict);_this31=_callSuper(this,CFFTopDict,[CFFTopDict.tables,strings]);_this31.privateDict=null;return _this31;}_inherits(CFFTopDict,_CFFDict);return _createClass(CFFTopDict,null,[{key:"tables",get:function get(){return shadow(this,"tables",this.createTables(CFFTopDictLayout));}}]);}(CFFDict);var CFFPrivateDictLayout=[[6,"BlueValues","delta",null],[7,"OtherBlues","delta",null],[8,"FamilyBlues","delta",null],[9,"FamilyOtherBlues","delta",null],[[12,9],"BlueScale","num",0.039625],[[12,10],"BlueShift","num",7],[[12,11],"BlueFuzz","num",1],[10,"StdHW","num",null],[11,"StdVW","num",null],[[12,12],"StemSnapH","delta",null],[[12,13],"StemSnapV","delta",null],[[12,14],"ForceBold","num",0],[[12,17],"LanguageGroup","num",0],[[12,18],"ExpansionFactor","num",0.06],[[12,19],"initialRandomSeed","num",0],[20,"defaultWidthX","num",0],[21,"nominalWidthX","num",0],[19,"Subrs","offset",null]];var CFFPrivateDict=/*#__PURE__*/function(_CFFDict2){function CFFPrivateDict(strings){var _this32;_classCallCheck(this,CFFPrivateDict);_this32=_callSuper(this,CFFPrivateDict,[CFFPrivateDict.tables,strings]);_this32.subrsIndex=null;return _this32;}_inherits(CFFPrivateDict,_CFFDict2);return _createClass(CFFPrivateDict,null,[{key:"tables",get:function get(){return shadow(this,"tables",this.createTables(CFFPrivateDictLayout));}}]);}(CFFDict);var CFFCharsetPredefinedTypes={ISO_ADOBE:0,EXPERT:1,EXPERT_SUBSET:2};var CFFCharset=/*#__PURE__*/_createClass(function CFFCharset(predefined,format,charset,raw){_classCallCheck(this,CFFCharset);this.predefined=predefined;this.format=format;this.charset=charset;this.raw=raw;});var CFFEncoding=/*#__PURE__*/_createClass(function CFFEncoding(predefined,format,encoding,raw){_classCallCheck(this,CFFEncoding);this.predefined=predefined;this.format=format;this.encoding=encoding;this.raw=raw;});var CFFFDSelect=/*#__PURE__*/function(){function CFFFDSelect(format,fdSelect){_classCallCheck(this,CFFFDSelect);this.format=format;this.fdSelect=fdSelect;}return _createClass(CFFFDSelect,[{key:"getFDIndex",value:function getFDIndex(glyphIndex){if(glyphIndex<0||glyphIndex>=this.fdSelect.length){return-1;}return this.fdSelect[glyphIndex];}}]);}();var CFFOffsetTracker=/*#__PURE__*/function(){function CFFOffsetTracker(){_classCallCheck(this,CFFOffsetTracker);this.offsets=Object.create(null);}return _createClass(CFFOffsetTracker,[{key:"isTracking",value:function isTracking(key){return key in this.offsets;}},{key:"track",value:function track(key,location){if(key in this.offsets){throw new FormatError("Already tracking location of ".concat(key));}this.offsets[key]=location;}},{key:"offset",value:function offset(value){for(var key in this.offsets){this.offsets[key]+=value;}}},{key:"setEntryLocation",value:function setEntryLocation(key,values,output){if(!(key in this.offsets)){throw new FormatError("Not tracking location of ".concat(key));}var data=output.data;var dataOffset=this.offsets[key];var size=5;for(var i=0,ii=values.length;i<ii;++i){var offset0=i*size+dataOffset;var offset1=offset0+1;var offset2=offset0+2;var offset3=offset0+3;var offset4=offset0+4;if(data[offset0]!==0x1d||data[offset1]!==0||data[offset2]!==0||data[offset3]!==0||data[offset4]!==0){throw new FormatError("writing to an offset that is not empty");}var value=values[i];data[offset0]=0x1d;data[offset1]=value>>24&0xff;data[offset2]=value>>16&0xff;data[offset3]=value>>8&0xff;data[offset4]=value&0xff;}}}]);}();var CFFCompiler=/*#__PURE__*/function(){function CFFCompiler(cff){_classCallCheck(this,CFFCompiler);this.cff=cff;}return _createClass(CFFCompiler,[{key:"compile",value:function compile(){var cff=this.cff;var output={data:[],length:0,add:function add(data){this.data=this.data.concat(data);this.length=this.data.length;}};var header=this.compileHeader(cff.header);output.add(header);var nameIndex=this.compileNameIndex(cff.names);output.add(nameIndex);if(cff.isCIDFont){if(cff.topDict.hasName("FontMatrix")){var base=cff.topDict.getByName("FontMatrix");cff.topDict.removeByName("FontMatrix");var _iterator33=_createForOfIteratorHelper(cff.fdArray),_step33;try{for(_iterator33.s();!(_step33=_iterator33.n()).done;){var subDict=_step33.value;var matrix=base.slice(0);if(subDict.hasName("FontMatrix")){matrix=Util.transform(matrix,subDict.getByName("FontMatrix"));}subDict.setByName("FontMatrix",matrix);}}catch(err){_iterator33.e(err);}finally{_iterator33.f();}}}var xuid=cff.topDict.getByName("XUID");if((xuid===null||xuid===void 0?void 0:xuid.length)>16){cff.topDict.removeByName("XUID");}cff.topDict.setByName("charset",0);var compiled=this.compileTopDicts([cff.topDict],output.length,cff.isCIDFont);output.add(compiled.output);var topDictTracker=compiled.trackers[0];var stringIndex=this.compileStringIndex(cff.strings.strings);output.add(stringIndex);var globalSubrIndex=this.compileIndex(cff.globalSubrIndex);output.add(globalSubrIndex);if(cff.encoding&&cff.topDict.hasName("Encoding")){if(cff.encoding.predefined){topDictTracker.setEntryLocation("Encoding",[cff.encoding.format],output);}else{var encoding=this.compileEncoding(cff.encoding);topDictTracker.setEntryLocation("Encoding",[output.length],output);output.add(encoding);}}var charset=this.compileCharset(cff.charset,cff.charStrings.count,cff.strings,cff.isCIDFont);topDictTracker.setEntryLocation("charset",[output.length],output);output.add(charset);var charStrings=this.compileCharStrings(cff.charStrings);topDictTracker.setEntryLocation("CharStrings",[output.length],output);output.add(charStrings);if(cff.isCIDFont){topDictTracker.setEntryLocation("FDSelect",[output.length],output);var fdSelect=this.compileFDSelect(cff.fdSelect);output.add(fdSelect);compiled=this.compileTopDicts(cff.fdArray,output.length,true);topDictTracker.setEntryLocation("FDArray",[output.length],output);output.add(compiled.output);var fontDictTrackers=compiled.trackers;this.compilePrivateDicts(cff.fdArray,fontDictTrackers,output);}this.compilePrivateDicts([cff.topDict],[topDictTracker],output);output.add([0]);return output.data;}},{key:"encodeNumber",value:function encodeNumber(value){if(Number.isInteger(value)){return this.encodeInteger(value);}return this.encodeFloat(value);}},{key:"encodeFloat",value:function encodeFloat(num){var value=num.toString();var m=CFFCompiler.EncodeFloatRegExp.exec(value);if(m){var epsilon=parseFloat("1e"+((m[2]?+m[2]:0)+m[1].length));value=(Math.round(num*epsilon)/epsilon).toString();}var nibbles="";var i,ii;for(i=0,ii=value.length;i<ii;++i){var a=value[i];if(a==="e"){nibbles+=value[++i]==="-"?"c":"b";}else if(a==="."){nibbles+="a";}else if(a==="-"){nibbles+="e";}else{nibbles+=a;}}nibbles+=nibbles.length&1?"f":"ff";var out=[30];for(i=0,ii=nibbles.length;i<ii;i+=2){out.push(parseInt(nibbles.substring(i,i+2),16));}return out;}},{key:"encodeInteger",value:function encodeInteger(value){var code;if(value>=-107&&value<=107){code=[value+139];}else if(value>=108&&value<=1131){value-=108;code=[(value>>8)+247,value&0xff];}else if(value>=-1131&&value<=-108){value=-value-108;code=[(value>>8)+251,value&0xff];}else if(value>=-32768&&value<=32767){code=[0x1c,value>>8&0xff,value&0xff];}else{code=[0x1d,value>>24&0xff,value>>16&0xff,value>>8&0xff,value&0xff];}return code;}},{key:"compileHeader",value:function compileHeader(header){return[header.major,header.minor,4,header.offSize];}},{key:"compileNameIndex",value:function compileNameIndex(names){var nameIndex=new CFFIndex();var _iterator34=_createForOfIteratorHelper(names),_step34;try{for(_iterator34.s();!(_step34=_iterator34.n()).done;){var name=_step34.value;var length=Math.min(name.length,127);var sanitizedName=new Array(length);for(var j=0;j<length;j++){var _char7=name[j];if(_char7<"!"||_char7>"~"||_char7==="["||_char7==="]"||_char7==="("||_char7===")"||_char7==="{"||_char7==="}"||_char7==="<"||_char7===">"||_char7==="/"||_char7==="%"){_char7="_";}sanitizedName[j]=_char7;}sanitizedName=sanitizedName.join("");if(sanitizedName===""){sanitizedName="Bad_Font_Name";}nameIndex.add(stringToBytes(sanitizedName));}}catch(err){_iterator34.e(err);}finally{_iterator34.f();}return this.compileIndex(nameIndex);}},{key:"compileTopDicts",value:function compileTopDicts(dicts,length,removeCidKeys){var fontDictTrackers=[];var fdArrayIndex=new CFFIndex();var _iterator35=_createForOfIteratorHelper(dicts),_step35;try{for(_iterator35.s();!(_step35=_iterator35.n()).done;){var fontDict=_step35.value;if(removeCidKeys){fontDict.removeByName("CIDFontVersion");fontDict.removeByName("CIDFontRevision");fontDict.removeByName("CIDFontType");fontDict.removeByName("CIDCount");fontDict.removeByName("UIDBase");}var fontDictTracker=new CFFOffsetTracker();var fontDictData=this.compileDict(fontDict,fontDictTracker);fontDictTrackers.push(fontDictTracker);fdArrayIndex.add(fontDictData);fontDictTracker.offset(length);}}catch(err){_iterator35.e(err);}finally{_iterator35.f();}fdArrayIndex=this.compileIndex(fdArrayIndex,fontDictTrackers);return{trackers:fontDictTrackers,output:fdArrayIndex};}},{key:"compilePrivateDicts",value:function compilePrivateDicts(dicts,trackers,output){for(var i=0,ii=dicts.length;i<ii;++i){var fontDict=dicts[i];var privateDict=fontDict.privateDict;if(!privateDict||!fontDict.hasName("Private")){throw new FormatError("There must be a private dictionary.");}var privateDictTracker=new CFFOffsetTracker();var privateDictData=this.compileDict(privateDict,privateDictTracker);var outputLength=output.length;privateDictTracker.offset(outputLength);if(!privateDictData.length){outputLength=0;}trackers[i].setEntryLocation("Private",[privateDictData.length,outputLength],output);output.add(privateDictData);if(privateDict.subrsIndex&&privateDict.hasName("Subrs")){var subrs=this.compileIndex(privateDict.subrsIndex);privateDictTracker.setEntryLocation("Subrs",[privateDictData.length],output);output.add(subrs);}}}},{key:"compileDict",value:function compileDict(dict,offsetTracker){var out=[];var _iterator36=_createForOfIteratorHelper(dict.order),_step36;try{for(_iterator36.s();!(_step36=_iterator36.n()).done;){var key=_step36.value;if(!(key in dict.values)){continue;}var values=dict.values[key];var _types=dict.types[key];if(!Array.isArray(_types)){_types=[_types];}if(!Array.isArray(values)){values=[values];}if(values.length===0){continue;}for(var j=0,jj=_types.length;j<jj;++j){var type=_types[j];var value=values[j];switch(type){case"num":case"sid":out.push.apply(out,_toConsumableArray(this.encodeNumber(value)));break;case"offset":var name=dict.keyToNameMap[key];if(!offsetTracker.isTracking(name)){offsetTracker.track(name,out.length);}out.push(0x1d,0,0,0,0);break;case"array":case"delta":out.push.apply(out,_toConsumableArray(this.encodeNumber(value)));for(var k=1,kk=values.length;k<kk;++k){out.push.apply(out,_toConsumableArray(this.encodeNumber(values[k])));}break;default:throw new FormatError("Unknown data type of ".concat(type));}}out.push.apply(out,_toConsumableArray(dict.opcodes[key]));}}catch(err){_iterator36.e(err);}finally{_iterator36.f();}return out;}},{key:"compileStringIndex",value:function compileStringIndex(strings){var stringIndex=new CFFIndex();var _iterator37=_createForOfIteratorHelper(strings),_step37;try{for(_iterator37.s();!(_step37=_iterator37.n()).done;){var string=_step37.value;stringIndex.add(stringToBytes(string));}}catch(err){_iterator37.e(err);}finally{_iterator37.f();}return this.compileIndex(stringIndex);}},{key:"compileCharStrings",value:function compileCharStrings(charStrings){var charStringsIndex=new CFFIndex();for(var i=0;i<charStrings.count;i++){var glyph=charStrings.get(i);if(glyph.length===0){charStringsIndex.add(new Uint8Array([0x8b,0x0e]));continue;}charStringsIndex.add(glyph);}return this.compileIndex(charStringsIndex);}},{key:"compileCharset",value:function compileCharset(charset,numGlyphs,strings,isCIDFont){var out;var numGlyphsLessNotDef=numGlyphs-1;if(isCIDFont){out=new Uint8Array([2,0,0,numGlyphsLessNotDef>>8&0xff,numGlyphsLessNotDef&0xff]);}else{var length=1+numGlyphsLessNotDef*2;out=new Uint8Array(length);out[0]=0;var charsetIndex=0;var numCharsets=charset.charset.length;var warned=false;for(var i=1;i<out.length;i+=2){var sid=0;if(charsetIndex<numCharsets){var name=charset.charset[charsetIndex++];sid=strings.getSID(name);if(sid===-1){sid=0;if(!warned){warned=true;warn("Couldn\'t find ".concat(name," in CFF strings"));}}}out[i]=sid>>8&0xff;out[i+1]=sid&0xff;}}return this.compileTypedArray(out);}},{key:"compileEncoding",value:function compileEncoding(encoding){return this.compileTypedArray(encoding.raw);}},{key:"compileFDSelect",value:function compileFDSelect(fdSelect){var format=fdSelect.format;var out,i;switch(format){case 0:out=new Uint8Array(1+fdSelect.fdSelect.length);out[0]=format;for(i=0;i<fdSelect.fdSelect.length;i++){out[i+1]=fdSelect.fdSelect[i];}break;case 3:var start=0;var lastFD=fdSelect.fdSelect[0];var ranges=[format,0,0,start>>8&0xff,start&0xff,lastFD];for(i=1;i<fdSelect.fdSelect.length;i++){var currentFD=fdSelect.fdSelect[i];if(currentFD!==lastFD){ranges.push(i>>8&0xff,i&0xff,currentFD);lastFD=currentFD;}}var numRanges=(ranges.length-3)/3;ranges[1]=numRanges>>8&0xff;ranges[2]=numRanges&0xff;ranges.push(i>>8&0xff,i&0xff);out=new Uint8Array(ranges);break;}return this.compileTypedArray(out);}},{key:"compileTypedArray",value:function compileTypedArray(data){return Array.from(data);}},{key:"compileIndex",value:function compileIndex(index){var trackers=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var objects=index.objects;var count=objects.length;if(count===0){return[0,0];}var data=[count>>8&0xff,count&0xff];var lastOffset=1,i;for(i=0;i<count;++i){lastOffset+=objects[i].length;}var offsetSize;if(lastOffset<0x100){offsetSize=1;}else if(lastOffset<0x10000){offsetSize=2;}else if(lastOffset<0x1000000){offsetSize=3;}else{offsetSize=4;}data.push(offsetSize);var relativeOffset=1;for(i=0;i<count+1;i++){if(offsetSize===1){data.push(relativeOffset&0xff);}else if(offsetSize===2){data.push(relativeOffset>>8&0xff,relativeOffset&0xff);}else if(offsetSize===3){data.push(relativeOffset>>16&0xff,relativeOffset>>8&0xff,relativeOffset&0xff);}else{data.push(relativeOffset>>>24&0xff,relativeOffset>>16&0xff,relativeOffset>>8&0xff,relativeOffset&0xff);}if(objects[i]){relativeOffset+=objects[i].length;}}for(i=0;i<count;i++){if(trackers[i]){trackers[i].offset(data.length);}data.push.apply(data,_toConsumableArray(objects[i]));}return data;}}],[{key:"EncodeFloatRegExp",get:function get(){return shadow(this,"EncodeFloatRegExp",/\\.(\\d*?)(?:9{5,20}|0{5,20})\\d{0,2}(?:e(.+)|$)/);}}]);}();;// ./src/core/glyphlist.js\nvar getGlyphsUnicode=getLookupTableFactory(function(t){t.A=0x0041;t.AE=0x00c6;t.AEacute=0x01fc;t.AEmacron=0x01e2;t.AEsmall=0xf7e6;t.Aacute=0x00c1;t.Aacutesmall=0xf7e1;t.Abreve=0x0102;t.Abreveacute=0x1eae;t.Abrevecyrillic=0x04d0;t.Abrevedotbelow=0x1eb6;t.Abrevegrave=0x1eb0;t.Abrevehookabove=0x1eb2;t.Abrevetilde=0x1eb4;t.Acaron=0x01cd;t.Acircle=0x24b6;t.Acircumflex=0x00c2;t.Acircumflexacute=0x1ea4;t.Acircumflexdotbelow=0x1eac;t.Acircumflexgrave=0x1ea6;t.Acircumflexhookabove=0x1ea8;t.Acircumflexsmall=0xf7e2;t.Acircumflextilde=0x1eaa;t.Acute=0xf6c9;t.Acutesmall=0xf7b4;t.Acyrillic=0x0410;t.Adblgrave=0x0200;t.Adieresis=0x00c4;t.Adieresiscyrillic=0x04d2;t.Adieresismacron=0x01de;t.Adieresissmall=0xf7e4;t.Adotbelow=0x1ea0;t.Adotmacron=0x01e0;t.Agrave=0x00c0;t.Agravesmall=0xf7e0;t.Ahookabove=0x1ea2;t.Aiecyrillic=0x04d4;t.Ainvertedbreve=0x0202;t.Alpha=0x0391;t.Alphatonos=0x0386;t.Amacron=0x0100;t.Amonospace=0xff21;t.Aogonek=0x0104;t.Aring=0x00c5;t.Aringacute=0x01fa;t.Aringbelow=0x1e00;t.Aringsmall=0xf7e5;t.Asmall=0xf761;t.Atilde=0x00c3;t.Atildesmall=0xf7e3;t.Aybarmenian=0x0531;t.B=0x0042;t.Bcircle=0x24b7;t.Bdotaccent=0x1e02;t.Bdotbelow=0x1e04;t.Becyrillic=0x0411;t.Benarmenian=0x0532;t.Beta=0x0392;t.Bhook=0x0181;t.Blinebelow=0x1e06;t.Bmonospace=0xff22;t.Brevesmall=0xf6f4;t.Bsmall=0xf762;t.Btopbar=0x0182;t.C=0x0043;t.Caarmenian=0x053e;t.Cacute=0x0106;t.Caron=0xf6ca;t.Caronsmall=0xf6f5;t.Ccaron=0x010c;t.Ccedilla=0x00c7;t.Ccedillaacute=0x1e08;t.Ccedillasmall=0xf7e7;t.Ccircle=0x24b8;t.Ccircumflex=0x0108;t.Cdot=0x010a;t.Cdotaccent=0x010a;t.Cedillasmall=0xf7b8;t.Chaarmenian=0x0549;t.Cheabkhasiancyrillic=0x04bc;t.Checyrillic=0x0427;t.Chedescenderabkhasiancyrillic=0x04be;t.Chedescendercyrillic=0x04b6;t.Chedieresiscyrillic=0x04f4;t.Cheharmenian=0x0543;t.Chekhakassiancyrillic=0x04cb;t.Cheverticalstrokecyrillic=0x04b8;t.Chi=0x03a7;t.Chook=0x0187;t.Circumflexsmall=0xf6f6;t.Cmonospace=0xff23;t.Coarmenian=0x0551;t.Csmall=0xf763;t.D=0x0044;t.DZ=0x01f1;t.DZcaron=0x01c4;t.Daarmenian=0x0534;t.Dafrican=0x0189;t.Dcaron=0x010e;t.Dcedilla=0x1e10;t.Dcircle=0x24b9;t.Dcircumflexbelow=0x1e12;t.Dcroat=0x0110;t.Ddotaccent=0x1e0a;t.Ddotbelow=0x1e0c;t.Decyrillic=0x0414;t.Deicoptic=0x03ee;t.Delta=0x2206;t.Deltagreek=0x0394;t.Dhook=0x018a;t.Dieresis=0xf6cb;t.DieresisAcute=0xf6cc;t.DieresisGrave=0xf6cd;t.Dieresissmall=0xf7a8;t.Digammagreek=0x03dc;t.Djecyrillic=0x0402;t.Dlinebelow=0x1e0e;t.Dmonospace=0xff24;t.Dotaccentsmall=0xf6f7;t.Dslash=0x0110;t.Dsmall=0xf764;t.Dtopbar=0x018b;t.Dz=0x01f2;t.Dzcaron=0x01c5;t.Dzeabkhasiancyrillic=0x04e0;t.Dzecyrillic=0x0405;t.Dzhecyrillic=0x040f;t.E=0x0045;t.Eacute=0x00c9;t.Eacutesmall=0xf7e9;t.Ebreve=0x0114;t.Ecaron=0x011a;t.Ecedillabreve=0x1e1c;t.Echarmenian=0x0535;t.Ecircle=0x24ba;t.Ecircumflex=0x00ca;t.Ecircumflexacute=0x1ebe;t.Ecircumflexbelow=0x1e18;t.Ecircumflexdotbelow=0x1ec6;t.Ecircumflexgrave=0x1ec0;t.Ecircumflexhookabove=0x1ec2;t.Ecircumflexsmall=0xf7ea;t.Ecircumflextilde=0x1ec4;t.Ecyrillic=0x0404;t.Edblgrave=0x0204;t.Edieresis=0x00cb;t.Edieresissmall=0xf7eb;t.Edot=0x0116;t.Edotaccent=0x0116;t.Edotbelow=0x1eb8;t.Efcyrillic=0x0424;t.Egrave=0x00c8;t.Egravesmall=0xf7e8;t.Eharmenian=0x0537;t.Ehookabove=0x1eba;t.Eightroman=0x2167;t.Einvertedbreve=0x0206;t.Eiotifiedcyrillic=0x0464;t.Elcyrillic=0x041b;t.Elevenroman=0x216a;t.Emacron=0x0112;t.Emacronacute=0x1e16;t.Emacrongrave=0x1e14;t.Emcyrillic=0x041c;t.Emonospace=0xff25;t.Encyrillic=0x041d;t.Endescendercyrillic=0x04a2;t.Eng=0x014a;t.Enghecyrillic=0x04a4;t.Enhookcyrillic=0x04c7;t.Eogonek=0x0118;t.Eopen=0x0190;t.Epsilon=0x0395;t.Epsilontonos=0x0388;t.Ercyrillic=0x0420;t.Ereversed=0x018e;t.Ereversedcyrillic=0x042d;t.Escyrillic=0x0421;t.Esdescendercyrillic=0x04aa;t.Esh=0x01a9;t.Esmall=0xf765;t.Eta=0x0397;t.Etarmenian=0x0538;t.Etatonos=0x0389;t.Eth=0x00d0;t.Ethsmall=0xf7f0;t.Etilde=0x1ebc;t.Etildebelow=0x1e1a;t.Euro=0x20ac;t.Ezh=0x01b7;t.Ezhcaron=0x01ee;t.Ezhreversed=0x01b8;t.F=0x0046;t.Fcircle=0x24bb;t.Fdotaccent=0x1e1e;t.Feharmenian=0x0556;t.Feicoptic=0x03e4;t.Fhook=0x0191;t.Fitacyrillic=0x0472;t.Fiveroman=0x2164;t.Fmonospace=0xff26;t.Fourroman=0x2163;t.Fsmall=0xf766;t.G=0x0047;t.GBsquare=0x3387;t.Gacute=0x01f4;t.Gamma=0x0393;t.Gammaafrican=0x0194;t.Gangiacoptic=0x03ea;t.Gbreve=0x011e;t.Gcaron=0x01e6;t.Gcedilla=0x0122;t.Gcircle=0x24bc;t.Gcircumflex=0x011c;t.Gcommaaccent=0x0122;t.Gdot=0x0120;t.Gdotaccent=0x0120;t.Gecyrillic=0x0413;t.Ghadarmenian=0x0542;t.Ghemiddlehookcyrillic=0x0494;t.Ghestrokecyrillic=0x0492;t.Gheupturncyrillic=0x0490;t.Ghook=0x0193;t.Gimarmenian=0x0533;t.Gjecyrillic=0x0403;t.Gmacron=0x1e20;t.Gmonospace=0xff27;t.Grave=0xf6ce;t.Gravesmall=0xf760;t.Gsmall=0xf767;t.Gsmallhook=0x029b;t.Gstroke=0x01e4;t.H=0x0048;t.H18533=0x25cf;t.H18543=0x25aa;t.H18551=0x25ab;t.H22073=0x25a1;t.HPsquare=0x33cb;t.Haabkhasiancyrillic=0x04a8;t.Hadescendercyrillic=0x04b2;t.Hardsigncyrillic=0x042a;t.Hbar=0x0126;t.Hbrevebelow=0x1e2a;t.Hcedilla=0x1e28;t.Hcircle=0x24bd;t.Hcircumflex=0x0124;t.Hdieresis=0x1e26;t.Hdotaccent=0x1e22;t.Hdotbelow=0x1e24;t.Hmonospace=0xff28;t.Hoarmenian=0x0540;t.Horicoptic=0x03e8;t.Hsmall=0xf768;t.Hungarumlaut=0xf6cf;t.Hungarumlautsmall=0xf6f8;t.Hzsquare=0x3390;t.I=0x0049;t.IAcyrillic=0x042f;t.IJ=0x0132;t.IUcyrillic=0x042e;t.Iacute=0x00cd;t.Iacutesmall=0xf7ed;t.Ibreve=0x012c;t.Icaron=0x01cf;t.Icircle=0x24be;t.Icircumflex=0x00ce;t.Icircumflexsmall=0xf7ee;t.Icyrillic=0x0406;t.Idblgrave=0x0208;t.Idieresis=0x00cf;t.Idieresisacute=0x1e2e;t.Idieresiscyrillic=0x04e4;t.Idieresissmall=0xf7ef;t.Idot=0x0130;t.Idotaccent=0x0130;t.Idotbelow=0x1eca;t.Iebrevecyrillic=0x04d6;t.Iecyrillic=0x0415;t.Ifraktur=0x2111;t.Igrave=0x00cc;t.Igravesmall=0xf7ec;t.Ihookabove=0x1ec8;t.Iicyrillic=0x0418;t.Iinvertedbreve=0x020a;t.Iishortcyrillic=0x0419;t.Imacron=0x012a;t.Imacroncyrillic=0x04e2;t.Imonospace=0xff29;t.Iniarmenian=0x053b;t.Iocyrillic=0x0401;t.Iogonek=0x012e;t.Iota=0x0399;t.Iotaafrican=0x0196;t.Iotadieresis=0x03aa;t.Iotatonos=0x038a;t.Ismall=0xf769;t.Istroke=0x0197;t.Itilde=0x0128;t.Itildebelow=0x1e2c;t.Izhitsacyrillic=0x0474;t.Izhitsadblgravecyrillic=0x0476;t.J=0x004a;t.Jaarmenian=0x0541;t.Jcircle=0x24bf;t.Jcircumflex=0x0134;t.Jecyrillic=0x0408;t.Jheharmenian=0x054b;t.Jmonospace=0xff2a;t.Jsmall=0xf76a;t.K=0x004b;t.KBsquare=0x3385;t.KKsquare=0x33cd;t.Kabashkircyrillic=0x04a0;t.Kacute=0x1e30;t.Kacyrillic=0x041a;t.Kadescendercyrillic=0x049a;t.Kahookcyrillic=0x04c3;t.Kappa=0x039a;t.Kastrokecyrillic=0x049e;t.Kaverticalstrokecyrillic=0x049c;t.Kcaron=0x01e8;t.Kcedilla=0x0136;t.Kcircle=0x24c0;t.Kcommaaccent=0x0136;t.Kdotbelow=0x1e32;t.Keharmenian=0x0554;t.Kenarmenian=0x053f;t.Khacyrillic=0x0425;t.Kheicoptic=0x03e6;t.Khook=0x0198;t.Kjecyrillic=0x040c;t.Klinebelow=0x1e34;t.Kmonospace=0xff2b;t.Koppacyrillic=0x0480;t.Koppagreek=0x03de;t.Ksicyrillic=0x046e;t.Ksmall=0xf76b;t.L=0x004c;t.LJ=0x01c7;t.LL=0xf6bf;t.Lacute=0x0139;t.Lambda=0x039b;t.Lcaron=0x013d;t.Lcedilla=0x013b;t.Lcircle=0x24c1;t.Lcircumflexbelow=0x1e3c;t.Lcommaaccent=0x013b;t.Ldot=0x013f;t.Ldotaccent=0x013f;t.Ldotbelow=0x1e36;t.Ldotbelowmacron=0x1e38;t.Liwnarmenian=0x053c;t.Lj=0x01c8;t.Ljecyrillic=0x0409;t.Llinebelow=0x1e3a;t.Lmonospace=0xff2c;t.Lslash=0x0141;t.Lslashsmall=0xf6f9;t.Lsmall=0xf76c;t.M=0x004d;t.MBsquare=0x3386;t.Macron=0xf6d0;t.Macronsmall=0xf7af;t.Macute=0x1e3e;t.Mcircle=0x24c2;t.Mdotaccent=0x1e40;t.Mdotbelow=0x1e42;t.Menarmenian=0x0544;t.Mmonospace=0xff2d;t.Msmall=0xf76d;t.Mturned=0x019c;t.Mu=0x039c;t.N=0x004e;t.NJ=0x01ca;t.Nacute=0x0143;t.Ncaron=0x0147;t.Ncedilla=0x0145;t.Ncircle=0x24c3;t.Ncircumflexbelow=0x1e4a;t.Ncommaaccent=0x0145;t.Ndotaccent=0x1e44;t.Ndotbelow=0x1e46;t.Nhookleft=0x019d;t.Nineroman=0x2168;t.Nj=0x01cb;t.Njecyrillic=0x040a;t.Nlinebelow=0x1e48;t.Nmonospace=0xff2e;t.Nowarmenian=0x0546;t.Nsmall=0xf76e;t.Ntilde=0x00d1;t.Ntildesmall=0xf7f1;t.Nu=0x039d;t.O=0x004f;t.OE=0x0152;t.OEsmall=0xf6fa;t.Oacute=0x00d3;t.Oacutesmall=0xf7f3;t.Obarredcyrillic=0x04e8;t.Obarreddieresiscyrillic=0x04ea;t.Obreve=0x014e;t.Ocaron=0x01d1;t.Ocenteredtilde=0x019f;t.Ocircle=0x24c4;t.Ocircumflex=0x00d4;t.Ocircumflexacute=0x1ed0;t.Ocircumflexdotbelow=0x1ed8;t.Ocircumflexgrave=0x1ed2;t.Ocircumflexhookabove=0x1ed4;t.Ocircumflexsmall=0xf7f4;t.Ocircumflextilde=0x1ed6;t.Ocyrillic=0x041e;t.Odblacute=0x0150;t.Odblgrave=0x020c;t.Odieresis=0x00d6;t.Odieresiscyrillic=0x04e6;t.Odieresissmall=0xf7f6;t.Odotbelow=0x1ecc;t.Ogoneksmall=0xf6fb;t.Ograve=0x00d2;t.Ogravesmall=0xf7f2;t.Oharmenian=0x0555;t.Ohm=0x2126;t.Ohookabove=0x1ece;t.Ohorn=0x01a0;t.Ohornacute=0x1eda;t.Ohorndotbelow=0x1ee2;t.Ohorngrave=0x1edc;t.Ohornhookabove=0x1ede;t.Ohorntilde=0x1ee0;t.Ohungarumlaut=0x0150;t.Oi=0x01a2;t.Oinvertedbreve=0x020e;t.Omacron=0x014c;t.Omacronacute=0x1e52;t.Omacrongrave=0x1e50;t.Omega=0x2126;t.Omegacyrillic=0x0460;t.Omegagreek=0x03a9;t.Omegaroundcyrillic=0x047a;t.Omegatitlocyrillic=0x047c;t.Omegatonos=0x038f;t.Omicron=0x039f;t.Omicrontonos=0x038c;t.Omonospace=0xff2f;t.Oneroman=0x2160;t.Oogonek=0x01ea;t.Oogonekmacron=0x01ec;t.Oopen=0x0186;t.Oslash=0x00d8;t.Oslashacute=0x01fe;t.Oslashsmall=0xf7f8;t.Osmall=0xf76f;t.Ostrokeacute=0x01fe;t.Otcyrillic=0x047e;t.Otilde=0x00d5;t.Otildeacute=0x1e4c;t.Otildedieresis=0x1e4e;t.Otildesmall=0xf7f5;t.P=0x0050;t.Pacute=0x1e54;t.Pcircle=0x24c5;t.Pdotaccent=0x1e56;t.Pecyrillic=0x041f;t.Peharmenian=0x054a;t.Pemiddlehookcyrillic=0x04a6;t.Phi=0x03a6;t.Phook=0x01a4;t.Pi=0x03a0;t.Piwrarmenian=0x0553;t.Pmonospace=0xff30;t.Psi=0x03a8;t.Psicyrillic=0x0470;t.Psmall=0xf770;t.Q=0x0051;t.Qcircle=0x24c6;t.Qmonospace=0xff31;t.Qsmall=0xf771;t.R=0x0052;t.Raarmenian=0x054c;t.Racute=0x0154;t.Rcaron=0x0158;t.Rcedilla=0x0156;t.Rcircle=0x24c7;t.Rcommaaccent=0x0156;t.Rdblgrave=0x0210;t.Rdotaccent=0x1e58;t.Rdotbelow=0x1e5a;t.Rdotbelowmacron=0x1e5c;t.Reharmenian=0x0550;t.Rfraktur=0x211c;t.Rho=0x03a1;t.Ringsmall=0xf6fc;t.Rinvertedbreve=0x0212;t.Rlinebelow=0x1e5e;t.Rmonospace=0xff32;t.Rsmall=0xf772;t.Rsmallinverted=0x0281;t.Rsmallinvertedsuperior=0x02b6;t.S=0x0053;t.SF010000=0x250c;t.SF020000=0x2514;t.SF030000=0x2510;t.SF040000=0x2518;t.SF050000=0x253c;t.SF060000=0x252c;t.SF070000=0x2534;t.SF080000=0x251c;t.SF090000=0x2524;t.SF100000=0x2500;t.SF110000=0x2502;t.SF190000=0x2561;t.SF200000=0x2562;t.SF210000=0x2556;t.SF220000=0x2555;t.SF230000=0x2563;t.SF240000=0x2551;t.SF250000=0x2557;t.SF260000=0x255d;t.SF270000=0x255c;t.SF280000=0x255b;t.SF360000=0x255e;t.SF370000=0x255f;t.SF380000=0x255a;t.SF390000=0x2554;t.SF400000=0x2569;t.SF410000=0x2566;t.SF420000=0x2560;t.SF430000=0x2550;t.SF440000=0x256c;t.SF450000=0x2567;t.SF460000=0x2568;t.SF470000=0x2564;t.SF480000=0x2565;t.SF490000=0x2559;t.SF500000=0x2558;t.SF510000=0x2552;t.SF520000=0x2553;t.SF530000=0x256b;t.SF540000=0x256a;t.Sacute=0x015a;t.Sacutedotaccent=0x1e64;t.Sampigreek=0x03e0;t.Scaron=0x0160;t.Scarondotaccent=0x1e66;t.Scaronsmall=0xf6fd;t.Scedilla=0x015e;t.Schwa=0x018f;t.Schwacyrillic=0x04d8;t.Schwadieresiscyrillic=0x04da;t.Scircle=0x24c8;t.Scircumflex=0x015c;t.Scommaaccent=0x0218;t.Sdotaccent=0x1e60;t.Sdotbelow=0x1e62;t.Sdotbelowdotaccent=0x1e68;t.Seharmenian=0x054d;t.Sevenroman=0x2166;t.Shaarmenian=0x0547;t.Shacyrillic=0x0428;t.Shchacyrillic=0x0429;t.Sheicoptic=0x03e2;t.Shhacyrillic=0x04ba;t.Shimacoptic=0x03ec;t.Sigma=0x03a3;t.Sixroman=0x2165;t.Smonospace=0xff33;t.Softsigncyrillic=0x042c;t.Ssmall=0xf773;t.Stigmagreek=0x03da;t.T=0x0054;t.Tau=0x03a4;t.Tbar=0x0166;t.Tcaron=0x0164;t.Tcedilla=0x0162;t.Tcircle=0x24c9;t.Tcircumflexbelow=0x1e70;t.Tcommaaccent=0x0162;t.Tdotaccent=0x1e6a;t.Tdotbelow=0x1e6c;t.Tecyrillic=0x0422;t.Tedescendercyrillic=0x04ac;t.Tenroman=0x2169;t.Tetsecyrillic=0x04b4;t.Theta=0x0398;t.Thook=0x01ac;t.Thorn=0x00de;t.Thornsmall=0xf7fe;t.Threeroman=0x2162;t.Tildesmall=0xf6fe;t.Tiwnarmenian=0x054f;t.Tlinebelow=0x1e6e;t.Tmonospace=0xff34;t.Toarmenian=0x0539;t.Tonefive=0x01bc;t.Tonesix=0x0184;t.Tonetwo=0x01a7;t.Tretroflexhook=0x01ae;t.Tsecyrillic=0x0426;t.Tshecyrillic=0x040b;t.Tsmall=0xf774;t.Twelveroman=0x216b;t.Tworoman=0x2161;t.U=0x0055;t.Uacute=0x00da;t.Uacutesmall=0xf7fa;t.Ubreve=0x016c;t.Ucaron=0x01d3;t.Ucircle=0x24ca;t.Ucircumflex=0x00db;t.Ucircumflexbelow=0x1e76;t.Ucircumflexsmall=0xf7fb;t.Ucyrillic=0x0423;t.Udblacute=0x0170;t.Udblgrave=0x0214;t.Udieresis=0x00dc;t.Udieresisacute=0x01d7;t.Udieresisbelow=0x1e72;t.Udieresiscaron=0x01d9;t.Udieresiscyrillic=0x04f0;t.Udieresisgrave=0x01db;t.Udieresismacron=0x01d5;t.Udieresissmall=0xf7fc;t.Udotbelow=0x1ee4;t.Ugrave=0x00d9;t.Ugravesmall=0xf7f9;t.Uhookabove=0x1ee6;t.Uhorn=0x01af;t.Uhornacute=0x1ee8;t.Uhorndotbelow=0x1ef0;t.Uhorngrave=0x1eea;t.Uhornhookabove=0x1eec;t.Uhorntilde=0x1eee;t.Uhungarumlaut=0x0170;t.Uhungarumlautcyrillic=0x04f2;t.Uinvertedbreve=0x0216;t.Ukcyrillic=0x0478;t.Umacron=0x016a;t.Umacroncyrillic=0x04ee;t.Umacrondieresis=0x1e7a;t.Umonospace=0xff35;t.Uogonek=0x0172;t.Upsilon=0x03a5;t.Upsilon1=0x03d2;t.Upsilonacutehooksymbolgreek=0x03d3;t.Upsilonafrican=0x01b1;t.Upsilondieresis=0x03ab;t.Upsilondieresishooksymbolgreek=0x03d4;t.Upsilonhooksymbol=0x03d2;t.Upsilontonos=0x038e;t.Uring=0x016e;t.Ushortcyrillic=0x040e;t.Usmall=0xf775;t.Ustraightcyrillic=0x04ae;t.Ustraightstrokecyrillic=0x04b0;t.Utilde=0x0168;t.Utildeacute=0x1e78;t.Utildebelow=0x1e74;t.V=0x0056;t.Vcircle=0x24cb;t.Vdotbelow=0x1e7e;t.Vecyrillic=0x0412;t.Vewarmenian=0x054e;t.Vhook=0x01b2;t.Vmonospace=0xff36;t.Voarmenian=0x0548;t.Vsmall=0xf776;t.Vtilde=0x1e7c;t.W=0x0057;t.Wacute=0x1e82;t.Wcircle=0x24cc;t.Wcircumflex=0x0174;t.Wdieresis=0x1e84;t.Wdotaccent=0x1e86;t.Wdotbelow=0x1e88;t.Wgrave=0x1e80;t.Wmonospace=0xff37;t.Wsmall=0xf777;t.X=0x0058;t.Xcircle=0x24cd;t.Xdieresis=0x1e8c;t.Xdotaccent=0x1e8a;t.Xeharmenian=0x053d;t.Xi=0x039e;t.Xmonospace=0xff38;t.Xsmall=0xf778;t.Y=0x0059;t.Yacute=0x00dd;t.Yacutesmall=0xf7fd;t.Yatcyrillic=0x0462;t.Ycircle=0x24ce;t.Ycircumflex=0x0176;t.Ydieresis=0x0178;t.Ydieresissmall=0xf7ff;t.Ydotaccent=0x1e8e;t.Ydotbelow=0x1ef4;t.Yericyrillic=0x042b;t.Yerudieresiscyrillic=0x04f8;t.Ygrave=0x1ef2;t.Yhook=0x01b3;t.Yhookabove=0x1ef6;t.Yiarmenian=0x0545;t.Yicyrillic=0x0407;t.Yiwnarmenian=0x0552;t.Ymonospace=0xff39;t.Ysmall=0xf779;t.Ytilde=0x1ef8;t.Yusbigcyrillic=0x046a;t.Yusbigiotifiedcyrillic=0x046c;t.Yuslittlecyrillic=0x0466;t.Yuslittleiotifiedcyrillic=0x0468;t.Z=0x005a;t.Zaarmenian=0x0536;t.Zacute=0x0179;t.Zcaron=0x017d;t.Zcaronsmall=0xf6ff;t.Zcircle=0x24cf;t.Zcircumflex=0x1e90;t.Zdot=0x017b;t.Zdotaccent=0x017b;t.Zdotbelow=0x1e92;t.Zecyrillic=0x0417;t.Zedescendercyrillic=0x0498;t.Zedieresiscyrillic=0x04de;t.Zeta=0x0396;t.Zhearmenian=0x053a;t.Zhebrevecyrillic=0x04c1;t.Zhecyrillic=0x0416;t.Zhedescendercyrillic=0x0496;t.Zhedieresiscyrillic=0x04dc;t.Zlinebelow=0x1e94;t.Zmonospace=0xff3a;t.Zsmall=0xf77a;t.Zstroke=0x01b5;t.a=0x0061;t.aabengali=0x0986;t.aacute=0x00e1;t.aadeva=0x0906;t.aagujarati=0x0a86;t.aagurmukhi=0x0a06;t.aamatragurmukhi=0x0a3e;t.aarusquare=0x3303;t.aavowelsignbengali=0x09be;t.aavowelsigndeva=0x093e;t.aavowelsigngujarati=0x0abe;t.abbreviationmarkarmenian=0x055f;t.abbreviationsigndeva=0x0970;t.abengali=0x0985;t.abopomofo=0x311a;t.abreve=0x0103;t.abreveacute=0x1eaf;t.abrevecyrillic=0x04d1;t.abrevedotbelow=0x1eb7;t.abrevegrave=0x1eb1;t.abrevehookabove=0x1eb3;t.abrevetilde=0x1eb5;t.acaron=0x01ce;t.acircle=0x24d0;t.acircumflex=0x00e2;t.acircumflexacute=0x1ea5;t.acircumflexdotbelow=0x1ead;t.acircumflexgrave=0x1ea7;t.acircumflexhookabove=0x1ea9;t.acircumflextilde=0x1eab;t.acute=0x00b4;t.acutebelowcmb=0x0317;t.acutecmb=0x0301;t.acutecomb=0x0301;t.acutedeva=0x0954;t.acutelowmod=0x02cf;t.acutetonecmb=0x0341;t.acyrillic=0x0430;t.adblgrave=0x0201;t.addakgurmukhi=0x0a71;t.adeva=0x0905;t.adieresis=0x00e4;t.adieresiscyrillic=0x04d3;t.adieresismacron=0x01df;t.adotbelow=0x1ea1;t.adotmacron=0x01e1;t.ae=0x00e6;t.aeacute=0x01fd;t.aekorean=0x3150;t.aemacron=0x01e3;t.afii00208=0x2015;t.afii08941=0x20a4;t.afii10017=0x0410;t.afii10018=0x0411;t.afii10019=0x0412;t.afii10020=0x0413;t.afii10021=0x0414;t.afii10022=0x0415;t.afii10023=0x0401;t.afii10024=0x0416;t.afii10025=0x0417;t.afii10026=0x0418;t.afii10027=0x0419;t.afii10028=0x041a;t.afii10029=0x041b;t.afii10030=0x041c;t.afii10031=0x041d;t.afii10032=0x041e;t.afii10033=0x041f;t.afii10034=0x0420;t.afii10035=0x0421;t.afii10036=0x0422;t.afii10037=0x0423;t.afii10038=0x0424;t.afii10039=0x0425;t.afii10040=0x0426;t.afii10041=0x0427;t.afii10042=0x0428;t.afii10043=0x0429;t.afii10044=0x042a;t.afii10045=0x042b;t.afii10046=0x042c;t.afii10047=0x042d;t.afii10048=0x042e;t.afii10049=0x042f;t.afii10050=0x0490;t.afii10051=0x0402;t.afii10052=0x0403;t.afii10053=0x0404;t.afii10054=0x0405;t.afii10055=0x0406;t.afii10056=0x0407;t.afii10057=0x0408;t.afii10058=0x0409;t.afii10059=0x040a;t.afii10060=0x040b;t.afii10061=0x040c;t.afii10062=0x040e;t.afii10063=0xf6c4;t.afii10064=0xf6c5;t.afii10065=0x0430;t.afii10066=0x0431;t.afii10067=0x0432;t.afii10068=0x0433;t.afii10069=0x0434;t.afii10070=0x0435;t.afii10071=0x0451;t.afii10072=0x0436;t.afii10073=0x0437;t.afii10074=0x0438;t.afii10075=0x0439;t.afii10076=0x043a;t.afii10077=0x043b;t.afii10078=0x043c;t.afii10079=0x043d;t.afii10080=0x043e;t.afii10081=0x043f;t.afii10082=0x0440;t.afii10083=0x0441;t.afii10084=0x0442;t.afii10085=0x0443;t.afii10086=0x0444;t.afii10087=0x0445;t.afii10088=0x0446;t.afii10089=0x0447;t.afii10090=0x0448;t.afii10091=0x0449;t.afii10092=0x044a;t.afii10093=0x044b;t.afii10094=0x044c;t.afii10095=0x044d;t.afii10096=0x044e;t.afii10097=0x044f;t.afii10098=0x0491;t.afii10099=0x0452;t.afii10100=0x0453;t.afii10101=0x0454;t.afii10102=0x0455;t.afii10103=0x0456;t.afii10104=0x0457;t.afii10105=0x0458;t.afii10106=0x0459;t.afii10107=0x045a;t.afii10108=0x045b;t.afii10109=0x045c;t.afii10110=0x045e;t.afii10145=0x040f;t.afii10146=0x0462;t.afii10147=0x0472;t.afii10148=0x0474;t.afii10192=0xf6c6;t.afii10193=0x045f;t.afii10194=0x0463;t.afii10195=0x0473;t.afii10196=0x0475;t.afii10831=0xf6c7;t.afii10832=0xf6c8;t.afii10846=0x04d9;t.afii299=0x200e;t.afii300=0x200f;t.afii301=0x200d;t.afii57381=0x066a;t.afii57388=0x060c;t.afii57392=0x0660;t.afii57393=0x0661;t.afii57394=0x0662;t.afii57395=0x0663;t.afii57396=0x0664;t.afii57397=0x0665;t.afii57398=0x0666;t.afii57399=0x0667;t.afii57400=0x0668;t.afii57401=0x0669;t.afii57403=0x061b;t.afii57407=0x061f;t.afii57409=0x0621;t.afii57410=0x0622;t.afii57411=0x0623;t.afii57412=0x0624;t.afii57413=0x0625;t.afii57414=0x0626;t.afii57415=0x0627;t.afii57416=0x0628;t.afii57417=0x0629;t.afii57418=0x062a;t.afii57419=0x062b;t.afii57420=0x062c;t.afii57421=0x062d;t.afii57422=0x062e;t.afii57423=0x062f;t.afii57424=0x0630;t.afii57425=0x0631;t.afii57426=0x0632;t.afii57427=0x0633;t.afii57428=0x0634;t.afii57429=0x0635;t.afii57430=0x0636;t.afii57431=0x0637;t.afii57432=0x0638;t.afii57433=0x0639;t.afii57434=0x063a;t.afii57440=0x0640;t.afii57441=0x0641;t.afii57442=0x0642;t.afii57443=0x0643;t.afii57444=0x0644;t.afii57445=0x0645;t.afii57446=0x0646;t.afii57448=0x0648;t.afii57449=0x0649;t.afii57450=0x064a;t.afii57451=0x064b;t.afii57452=0x064c;t.afii57453=0x064d;t.afii57454=0x064e;t.afii57455=0x064f;t.afii57456=0x0650;t.afii57457=0x0651;t.afii57458=0x0652;t.afii57470=0x0647;t.afii57505=0x06a4;t.afii57506=0x067e;t.afii57507=0x0686;t.afii57508=0x0698;t.afii57509=0x06af;t.afii57511=0x0679;t.afii57512=0x0688;t.afii57513=0x0691;t.afii57514=0x06ba;t.afii57519=0x06d2;t.afii57534=0x06d5;t.afii57636=0x20aa;t.afii57645=0x05be;t.afii57658=0x05c3;t.afii57664=0x05d0;t.afii57665=0x05d1;t.afii57666=0x05d2;t.afii57667=0x05d3;t.afii57668=0x05d4;t.afii57669=0x05d5;t.afii57670=0x05d6;t.afii57671=0x05d7;t.afii57672=0x05d8;t.afii57673=0x05d9;t.afii57674=0x05da;t.afii57675=0x05db;t.afii57676=0x05dc;t.afii57677=0x05dd;t.afii57678=0x05de;t.afii57679=0x05df;t.afii57680=0x05e0;t.afii57681=0x05e1;t.afii57682=0x05e2;t.afii57683=0x05e3;t.afii57684=0x05e4;t.afii57685=0x05e5;t.afii57686=0x05e6;t.afii57687=0x05e7;t.afii57688=0x05e8;t.afii57689=0x05e9;t.afii57690=0x05ea;t.afii57694=0xfb2a;t.afii57695=0xfb2b;t.afii57700=0xfb4b;t.afii57705=0xfb1f;t.afii57716=0x05f0;t.afii57717=0x05f1;t.afii57718=0x05f2;t.afii57723=0xfb35;t.afii57793=0x05b4;t.afii57794=0x05b5;t.afii57795=0x05b6;t.afii57796=0x05bb;t.afii57797=0x05b8;t.afii57798=0x05b7;t.afii57799=0x05b0;t.afii57800=0x05b2;t.afii57801=0x05b1;t.afii57802=0x05b3;t.afii57803=0x05c2;t.afii57804=0x05c1;t.afii57806=0x05b9;t.afii57807=0x05bc;t.afii57839=0x05bd;t.afii57841=0x05bf;t.afii57842=0x05c0;t.afii57929=0x02bc;t.afii61248=0x2105;t.afii61289=0x2113;t.afii61352=0x2116;t.afii61573=0x202c;t.afii61574=0x202d;t.afii61575=0x202e;t.afii61664=0x200c;t.afii63167=0x066d;t.afii64937=0x02bd;t.agrave=0x00e0;t.agujarati=0x0a85;t.agurmukhi=0x0a05;t.ahiragana=0x3042;t.ahookabove=0x1ea3;t.aibengali=0x0990;t.aibopomofo=0x311e;t.aideva=0x0910;t.aiecyrillic=0x04d5;t.aigujarati=0x0a90;t.aigurmukhi=0x0a10;t.aimatragurmukhi=0x0a48;t.ainarabic=0x0639;t.ainfinalarabic=0xfeca;t.aininitialarabic=0xfecb;t.ainmedialarabic=0xfecc;t.ainvertedbreve=0x0203;t.aivowelsignbengali=0x09c8;t.aivowelsigndeva=0x0948;t.aivowelsigngujarati=0x0ac8;t.akatakana=0x30a2;t.akatakanahalfwidth=0xff71;t.akorean=0x314f;t.alef=0x05d0;t.alefarabic=0x0627;t.alefdageshhebrew=0xfb30;t.aleffinalarabic=0xfe8e;t.alefhamzaabovearabic=0x0623;t.alefhamzaabovefinalarabic=0xfe84;t.alefhamzabelowarabic=0x0625;t.alefhamzabelowfinalarabic=0xfe88;t.alefhebrew=0x05d0;t.aleflamedhebrew=0xfb4f;t.alefmaddaabovearabic=0x0622;t.alefmaddaabovefinalarabic=0xfe82;t.alefmaksuraarabic=0x0649;t.alefmaksurafinalarabic=0xfef0;t.alefmaksurainitialarabic=0xfef3;t.alefmaksuramedialarabic=0xfef4;t.alefpatahhebrew=0xfb2e;t.alefqamatshebrew=0xfb2f;t.aleph=0x2135;t.allequal=0x224c;t.alpha=0x03b1;t.alphatonos=0x03ac;t.amacron=0x0101;t.amonospace=0xff41;t.ampersand=0x0026;t.ampersandmonospace=0xff06;t.ampersandsmall=0xf726;t.amsquare=0x33c2;t.anbopomofo=0x3122;t.angbopomofo=0x3124;t.angbracketleft=0x3008;t.angbracketright=0x3009;t.angkhankhuthai=0x0e5a;t.angle=0x2220;t.anglebracketleft=0x3008;t.anglebracketleftvertical=0xfe3f;t.anglebracketright=0x3009;t.anglebracketrightvertical=0xfe40;t.angleleft=0x2329;t.angleright=0x232a;t.angstrom=0x212b;t.anoteleia=0x0387;t.anudattadeva=0x0952;t.anusvarabengali=0x0982;t.anusvaradeva=0x0902;t.anusvaragujarati=0x0a82;t.aogonek=0x0105;t.apaatosquare=0x3300;t.aparen=0x249c;t.apostrophearmenian=0x055a;t.apostrophemod=0x02bc;t.apple=0xf8ff;t.approaches=0x2250;t.approxequal=0x2248;t.approxequalorimage=0x2252;t.approximatelyequal=0x2245;t.araeaekorean=0x318e;t.araeakorean=0x318d;t.arc=0x2312;t.arighthalfring=0x1e9a;t.aring=0x00e5;t.aringacute=0x01fb;t.aringbelow=0x1e01;t.arrowboth=0x2194;t.arrowdashdown=0x21e3;t.arrowdashleft=0x21e0;t.arrowdashright=0x21e2;t.arrowdashup=0x21e1;t.arrowdblboth=0x21d4;t.arrowdbldown=0x21d3;t.arrowdblleft=0x21d0;t.arrowdblright=0x21d2;t.arrowdblup=0x21d1;t.arrowdown=0x2193;t.arrowdownleft=0x2199;t.arrowdownright=0x2198;t.arrowdownwhite=0x21e9;t.arrowheaddownmod=0x02c5;t.arrowheadleftmod=0x02c2;t.arrowheadrightmod=0x02c3;t.arrowheadupmod=0x02c4;t.arrowhorizex=0xf8e7;t.arrowleft=0x2190;t.arrowleftdbl=0x21d0;t.arrowleftdblstroke=0x21cd;t.arrowleftoverright=0x21c6;t.arrowleftwhite=0x21e6;t.arrowright=0x2192;t.arrowrightdblstroke=0x21cf;t.arrowrightheavy=0x279e;t.arrowrightoverleft=0x21c4;t.arrowrightwhite=0x21e8;t.arrowtableft=0x21e4;t.arrowtabright=0x21e5;t.arrowup=0x2191;t.arrowupdn=0x2195;t.arrowupdnbse=0x21a8;t.arrowupdownbase=0x21a8;t.arrowupleft=0x2196;t.arrowupleftofdown=0x21c5;t.arrowupright=0x2197;t.arrowupwhite=0x21e7;t.arrowvertex=0xf8e6;t.asciicircum=0x005e;t.asciicircummonospace=0xff3e;t.asciitilde=0x007e;t.asciitildemonospace=0xff5e;t.ascript=0x0251;t.ascriptturned=0x0252;t.asmallhiragana=0x3041;t.asmallkatakana=0x30a1;t.asmallkatakanahalfwidth=0xff67;t.asterisk=0x002a;t.asteriskaltonearabic=0x066d;t.asteriskarabic=0x066d;t.asteriskmath=0x2217;t.asteriskmonospace=0xff0a;t.asterisksmall=0xfe61;t.asterism=0x2042;t.asuperior=0xf6e9;t.asymptoticallyequal=0x2243;t.at=0x0040;t.atilde=0x00e3;t.atmonospace=0xff20;t.atsmall=0xfe6b;t.aturned=0x0250;t.aubengali=0x0994;t.aubopomofo=0x3120;t.audeva=0x0914;t.augujarati=0x0a94;t.augurmukhi=0x0a14;t.aulengthmarkbengali=0x09d7;t.aumatragurmukhi=0x0a4c;t.auvowelsignbengali=0x09cc;t.auvowelsigndeva=0x094c;t.auvowelsigngujarati=0x0acc;t.avagrahadeva=0x093d;t.aybarmenian=0x0561;t.ayin=0x05e2;t.ayinaltonehebrew=0xfb20;t.ayinhebrew=0x05e2;t.b=0x0062;t.babengali=0x09ac;t.backslash=0x005c;t.backslashmonospace=0xff3c;t.badeva=0x092c;t.bagujarati=0x0aac;t.bagurmukhi=0x0a2c;t.bahiragana=0x3070;t.bahtthai=0x0e3f;t.bakatakana=0x30d0;t.bar=0x007c;t.barmonospace=0xff5c;t.bbopomofo=0x3105;t.bcircle=0x24d1;t.bdotaccent=0x1e03;t.bdotbelow=0x1e05;t.beamedsixteenthnotes=0x266c;t.because=0x2235;t.becyrillic=0x0431;t.beharabic=0x0628;t.behfinalarabic=0xfe90;t.behinitialarabic=0xfe91;t.behiragana=0x3079;t.behmedialarabic=0xfe92;t.behmeeminitialarabic=0xfc9f;t.behmeemisolatedarabic=0xfc08;t.behnoonfinalarabic=0xfc6d;t.bekatakana=0x30d9;t.benarmenian=0x0562;t.bet=0x05d1;t.beta=0x03b2;t.betasymbolgreek=0x03d0;t.betdagesh=0xfb31;t.betdageshhebrew=0xfb31;t.bethebrew=0x05d1;t.betrafehebrew=0xfb4c;t.bhabengali=0x09ad;t.bhadeva=0x092d;t.bhagujarati=0x0aad;t.bhagurmukhi=0x0a2d;t.bhook=0x0253;t.bihiragana=0x3073;t.bikatakana=0x30d3;t.bilabialclick=0x0298;t.bindigurmukhi=0x0a02;t.birusquare=0x3331;t.blackcircle=0x25cf;t.blackdiamond=0x25c6;t.blackdownpointingtriangle=0x25bc;t.blackleftpointingpointer=0x25c4;t.blackleftpointingtriangle=0x25c0;t.blacklenticularbracketleft=0x3010;t.blacklenticularbracketleftvertical=0xfe3b;t.blacklenticularbracketright=0x3011;t.blacklenticularbracketrightvertical=0xfe3c;t.blacklowerlefttriangle=0x25e3;t.blacklowerrighttriangle=0x25e2;t.blackrectangle=0x25ac;t.blackrightpointingpointer=0x25ba;t.blackrightpointingtriangle=0x25b6;t.blacksmallsquare=0x25aa;t.blacksmilingface=0x263b;t.blacksquare=0x25a0;t.blackstar=0x2605;t.blackupperlefttriangle=0x25e4;t.blackupperrighttriangle=0x25e5;t.blackuppointingsmalltriangle=0x25b4;t.blackuppointingtriangle=0x25b2;t.blank=0x2423;t.blinebelow=0x1e07;t.block=0x2588;t.bmonospace=0xff42;t.bobaimaithai=0x0e1a;t.bohiragana=0x307c;t.bokatakana=0x30dc;t.bparen=0x249d;t.bqsquare=0x33c3;t.braceex=0xf8f4;t.braceleft=0x007b;t.braceleftbt=0xf8f3;t.braceleftmid=0xf8f2;t.braceleftmonospace=0xff5b;t.braceleftsmall=0xfe5b;t.bracelefttp=0xf8f1;t.braceleftvertical=0xfe37;t.braceright=0x007d;t.bracerightbt=0xf8fe;t.bracerightmid=0xf8fd;t.bracerightmonospace=0xff5d;t.bracerightsmall=0xfe5c;t.bracerighttp=0xf8fc;t.bracerightvertical=0xfe38;t.bracketleft=0x005b;t.bracketleftbt=0xf8f0;t.bracketleftex=0xf8ef;t.bracketleftmonospace=0xff3b;t.bracketlefttp=0xf8ee;t.bracketright=0x005d;t.bracketrightbt=0xf8fb;t.bracketrightex=0xf8fa;t.bracketrightmonospace=0xff3d;t.bracketrighttp=0xf8f9;t.breve=0x02d8;t.brevebelowcmb=0x032e;t.brevecmb=0x0306;t.breveinvertedbelowcmb=0x032f;t.breveinvertedcmb=0x0311;t.breveinverteddoublecmb=0x0361;t.bridgebelowcmb=0x032a;t.bridgeinvertedbelowcmb=0x033a;t.brokenbar=0x00a6;t.bstroke=0x0180;t.bsuperior=0xf6ea;t.btopbar=0x0183;t.buhiragana=0x3076;t.bukatakana=0x30d6;t.bullet=0x2022;t.bulletinverse=0x25d8;t.bulletoperator=0x2219;t.bullseye=0x25ce;t.c=0x0063;t.caarmenian=0x056e;t.cabengali=0x099a;t.cacute=0x0107;t.cadeva=0x091a;t.cagujarati=0x0a9a;t.cagurmukhi=0x0a1a;t.calsquare=0x3388;t.candrabindubengali=0x0981;t.candrabinducmb=0x0310;t.candrabindudeva=0x0901;t.candrabindugujarati=0x0a81;t.capslock=0x21ea;t.careof=0x2105;t.caron=0x02c7;t.caronbelowcmb=0x032c;t.caroncmb=0x030c;t.carriagereturn=0x21b5;t.cbopomofo=0x3118;t.ccaron=0x010d;t.ccedilla=0x00e7;t.ccedillaacute=0x1e09;t.ccircle=0x24d2;t.ccircumflex=0x0109;t.ccurl=0x0255;t.cdot=0x010b;t.cdotaccent=0x010b;t.cdsquare=0x33c5;t.cedilla=0x00b8;t.cedillacmb=0x0327;t.cent=0x00a2;t.centigrade=0x2103;t.centinferior=0xf6df;t.centmonospace=0xffe0;t.centoldstyle=0xf7a2;t.centsuperior=0xf6e0;t.chaarmenian=0x0579;t.chabengali=0x099b;t.chadeva=0x091b;t.chagujarati=0x0a9b;t.chagurmukhi=0x0a1b;t.chbopomofo=0x3114;t.cheabkhasiancyrillic=0x04bd;t.checkmark=0x2713;t.checyrillic=0x0447;t.chedescenderabkhasiancyrillic=0x04bf;t.chedescendercyrillic=0x04b7;t.chedieresiscyrillic=0x04f5;t.cheharmenian=0x0573;t.chekhakassiancyrillic=0x04cc;t.cheverticalstrokecyrillic=0x04b9;t.chi=0x03c7;t.chieuchacirclekorean=0x3277;t.chieuchaparenkorean=0x3217;t.chieuchcirclekorean=0x3269;t.chieuchkorean=0x314a;t.chieuchparenkorean=0x3209;t.chochangthai=0x0e0a;t.chochanthai=0x0e08;t.chochingthai=0x0e09;t.chochoethai=0x0e0c;t.chook=0x0188;t.cieucacirclekorean=0x3276;t.cieucaparenkorean=0x3216;t.cieuccirclekorean=0x3268;t.cieuckorean=0x3148;t.cieucparenkorean=0x3208;t.cieucuparenkorean=0x321c;t.circle=0x25cb;t.circlecopyrt=0x00a9;t.circlemultiply=0x2297;t.circleot=0x2299;t.circleplus=0x2295;t.circlepostalmark=0x3036;t.circlewithlefthalfblack=0x25d0;t.circlewithrighthalfblack=0x25d1;t.circumflex=0x02c6;t.circumflexbelowcmb=0x032d;t.circumflexcmb=0x0302;t.clear=0x2327;t.clickalveolar=0x01c2;t.clickdental=0x01c0;t.clicklateral=0x01c1;t.clickretroflex=0x01c3;t.club=0x2663;t.clubsuitblack=0x2663;t.clubsuitwhite=0x2667;t.cmcubedsquare=0x33a4;t.cmonospace=0xff43;t.cmsquaredsquare=0x33a0;t.coarmenian=0x0581;t.colon=0x003a;t.colonmonetary=0x20a1;t.colonmonospace=0xff1a;t.colonsign=0x20a1;t.colonsmall=0xfe55;t.colontriangularhalfmod=0x02d1;t.colontriangularmod=0x02d0;t.comma=0x002c;t.commaabovecmb=0x0313;t.commaaboverightcmb=0x0315;t.commaaccent=0xf6c3;t.commaarabic=0x060c;t.commaarmenian=0x055d;t.commainferior=0xf6e1;t.commamonospace=0xff0c;t.commareversedabovecmb=0x0314;t.commareversedmod=0x02bd;t.commasmall=0xfe50;t.commasuperior=0xf6e2;t.commaturnedabovecmb=0x0312;t.commaturnedmod=0x02bb;t.compass=0x263c;t.congruent=0x2245;t.contourintegral=0x222e;t.control=0x2303;t.controlACK=0x0006;t.controlBEL=0x0007;t.controlBS=0x0008;t.controlCAN=0x0018;t.controlCR=0x000d;t.controlDC1=0x0011;t.controlDC2=0x0012;t.controlDC3=0x0013;t.controlDC4=0x0014;t.controlDEL=0x007f;t.controlDLE=0x0010;t.controlEM=0x0019;t.controlENQ=0x0005;t.controlEOT=0x0004;t.controlESC=0x001b;t.controlETB=0x0017;t.controlETX=0x0003;t.controlFF=0x000c;t.controlFS=0x001c;t.controlGS=0x001d;t.controlHT=0x0009;t.controlLF=0x000a;t.controlNAK=0x0015;t.controlNULL=0x0000;t.controlRS=0x001e;t.controlSI=0x000f;t.controlSO=0x000e;t.controlSOT=0x0002;t.controlSTX=0x0001;t.controlSUB=0x001a;t.controlSYN=0x0016;t.controlUS=0x001f;t.controlVT=0x000b;t.copyright=0x00a9;t.copyrightsans=0xf8e9;t.copyrightserif=0xf6d9;t.cornerbracketleft=0x300c;t.cornerbracketlefthalfwidth=0xff62;t.cornerbracketleftvertical=0xfe41;t.cornerbracketright=0x300d;t.cornerbracketrighthalfwidth=0xff63;t.cornerbracketrightvertical=0xfe42;t.corporationsquare=0x337f;t.cosquare=0x33c7;t.coverkgsquare=0x33c6;t.cparen=0x249e;t.cruzeiro=0x20a2;t.cstretched=0x0297;t.curlyand=0x22cf;t.curlyor=0x22ce;t.currency=0x00a4;t.cyrBreve=0xf6d1;t.cyrFlex=0xf6d2;t.cyrbreve=0xf6d4;t.cyrflex=0xf6d5;t.d=0x0064;t.daarmenian=0x0564;t.dabengali=0x09a6;t.dadarabic=0x0636;t.dadeva=0x0926;t.dadfinalarabic=0xfebe;t.dadinitialarabic=0xfebf;t.dadmedialarabic=0xfec0;t.dagesh=0x05bc;t.dageshhebrew=0x05bc;t.dagger=0x2020;t.daggerdbl=0x2021;t.dagujarati=0x0aa6;t.dagurmukhi=0x0a26;t.dahiragana=0x3060;t.dakatakana=0x30c0;t.dalarabic=0x062f;t.dalet=0x05d3;t.daletdagesh=0xfb33;t.daletdageshhebrew=0xfb33;t.dalethebrew=0x05d3;t.dalfinalarabic=0xfeaa;t.dammaarabic=0x064f;t.dammalowarabic=0x064f;t.dammatanaltonearabic=0x064c;t.dammatanarabic=0x064c;t.danda=0x0964;t.dargahebrew=0x05a7;t.dargalefthebrew=0x05a7;t.dasiapneumatacyrilliccmb=0x0485;t.dblGrave=0xf6d3;t.dblanglebracketleft=0x300a;t.dblanglebracketleftvertical=0xfe3d;t.dblanglebracketright=0x300b;t.dblanglebracketrightvertical=0xfe3e;t.dblarchinvertedbelowcmb=0x032b;t.dblarrowleft=0x21d4;t.dblarrowright=0x21d2;t.dbldanda=0x0965;t.dblgrave=0xf6d6;t.dblgravecmb=0x030f;t.dblintegral=0x222c;t.dbllowline=0x2017;t.dbllowlinecmb=0x0333;t.dbloverlinecmb=0x033f;t.dblprimemod=0x02ba;t.dblverticalbar=0x2016;t.dblverticallineabovecmb=0x030e;t.dbopomofo=0x3109;t.dbsquare=0x33c8;t.dcaron=0x010f;t.dcedilla=0x1e11;t.dcircle=0x24d3;t.dcircumflexbelow=0x1e13;t.dcroat=0x0111;t.ddabengali=0x09a1;t.ddadeva=0x0921;t.ddagujarati=0x0aa1;t.ddagurmukhi=0x0a21;t.ddalarabic=0x0688;t.ddalfinalarabic=0xfb89;t.dddhadeva=0x095c;t.ddhabengali=0x09a2;t.ddhadeva=0x0922;t.ddhagujarati=0x0aa2;t.ddhagurmukhi=0x0a22;t.ddotaccent=0x1e0b;t.ddotbelow=0x1e0d;t.decimalseparatorarabic=0x066b;t.decimalseparatorpersian=0x066b;t.decyrillic=0x0434;t.degree=0x00b0;t.dehihebrew=0x05ad;t.dehiragana=0x3067;t.deicoptic=0x03ef;t.dekatakana=0x30c7;t.deleteleft=0x232b;t.deleteright=0x2326;t.delta=0x03b4;t.deltaturned=0x018d;t.denominatorminusonenumeratorbengali=0x09f8;t.dezh=0x02a4;t.dhabengali=0x09a7;t.dhadeva=0x0927;t.dhagujarati=0x0aa7;t.dhagurmukhi=0x0a27;t.dhook=0x0257;t.dialytikatonos=0x0385;t.dialytikatonoscmb=0x0344;t.diamond=0x2666;t.diamondsuitwhite=0x2662;t.dieresis=0x00a8;t.dieresisacute=0xf6d7;t.dieresisbelowcmb=0x0324;t.dieresiscmb=0x0308;t.dieresisgrave=0xf6d8;t.dieresistonos=0x0385;t.dihiragana=0x3062;t.dikatakana=0x30c2;t.dittomark=0x3003;t.divide=0x00f7;t.divides=0x2223;t.divisionslash=0x2215;t.djecyrillic=0x0452;t.dkshade=0x2593;t.dlinebelow=0x1e0f;t.dlsquare=0x3397;t.dmacron=0x0111;t.dmonospace=0xff44;t.dnblock=0x2584;t.dochadathai=0x0e0e;t.dodekthai=0x0e14;t.dohiragana=0x3069;t.dokatakana=0x30c9;t.dollar=0x0024;t.dollarinferior=0xf6e3;t.dollarmonospace=0xff04;t.dollaroldstyle=0xf724;t.dollarsmall=0xfe69;t.dollarsuperior=0xf6e4;t.dong=0x20ab;t.dorusquare=0x3326;t.dotaccent=0x02d9;t.dotaccentcmb=0x0307;t.dotbelowcmb=0x0323;t.dotbelowcomb=0x0323;t.dotkatakana=0x30fb;t.dotlessi=0x0131;t.dotlessj=0xf6be;t.dotlessjstrokehook=0x0284;t.dotmath=0x22c5;t.dottedcircle=0x25cc;t.doubleyodpatah=0xfb1f;t.doubleyodpatahhebrew=0xfb1f;t.downtackbelowcmb=0x031e;t.downtackmod=0x02d5;t.dparen=0x249f;t.dsuperior=0xf6eb;t.dtail=0x0256;t.dtopbar=0x018c;t.duhiragana=0x3065;t.dukatakana=0x30c5;t.dz=0x01f3;t.dzaltone=0x02a3;t.dzcaron=0x01c6;t.dzcurl=0x02a5;t.dzeabkhasiancyrillic=0x04e1;t.dzecyrillic=0x0455;t.dzhecyrillic=0x045f;t.e=0x0065;t.eacute=0x00e9;t.earth=0x2641;t.ebengali=0x098f;t.ebopomofo=0x311c;t.ebreve=0x0115;t.ecandradeva=0x090d;t.ecandragujarati=0x0a8d;t.ecandravowelsigndeva=0x0945;t.ecandravowelsigngujarati=0x0ac5;t.ecaron=0x011b;t.ecedillabreve=0x1e1d;t.echarmenian=0x0565;t.echyiwnarmenian=0x0587;t.ecircle=0x24d4;t.ecircumflex=0x00ea;t.ecircumflexacute=0x1ebf;t.ecircumflexbelow=0x1e19;t.ecircumflexdotbelow=0x1ec7;t.ecircumflexgrave=0x1ec1;t.ecircumflexhookabove=0x1ec3;t.ecircumflextilde=0x1ec5;t.ecyrillic=0x0454;t.edblgrave=0x0205;t.edeva=0x090f;t.edieresis=0x00eb;t.edot=0x0117;t.edotaccent=0x0117;t.edotbelow=0x1eb9;t.eegurmukhi=0x0a0f;t.eematragurmukhi=0x0a47;t.efcyrillic=0x0444;t.egrave=0x00e8;t.egujarati=0x0a8f;t.eharmenian=0x0567;t.ehbopomofo=0x311d;t.ehiragana=0x3048;t.ehookabove=0x1ebb;t.eibopomofo=0x311f;t.eight=0x0038;t.eightarabic=0x0668;t.eightbengali=0x09ee;t.eightcircle=0x2467;t.eightcircleinversesansserif=0x2791;t.eightdeva=0x096e;t.eighteencircle=0x2471;t.eighteenparen=0x2485;t.eighteenperiod=0x2499;t.eightgujarati=0x0aee;t.eightgurmukhi=0x0a6e;t.eighthackarabic=0x0668;t.eighthangzhou=0x3028;t.eighthnotebeamed=0x266b;t.eightideographicparen=0x3227;t.eightinferior=0x2088;t.eightmonospace=0xff18;t.eightoldstyle=0xf738;t.eightparen=0x247b;t.eightperiod=0x248f;t.eightpersian=0x06f8;t.eightroman=0x2177;t.eightsuperior=0x2078;t.eightthai=0x0e58;t.einvertedbreve=0x0207;t.eiotifiedcyrillic=0x0465;t.ekatakana=0x30a8;t.ekatakanahalfwidth=0xff74;t.ekonkargurmukhi=0x0a74;t.ekorean=0x3154;t.elcyrillic=0x043b;t.element=0x2208;t.elevencircle=0x246a;t.elevenparen=0x247e;t.elevenperiod=0x2492;t.elevenroman=0x217a;t.ellipsis=0x2026;t.ellipsisvertical=0x22ee;t.emacron=0x0113;t.emacronacute=0x1e17;t.emacrongrave=0x1e15;t.emcyrillic=0x043c;t.emdash=0x2014;t.emdashvertical=0xfe31;t.emonospace=0xff45;t.emphasismarkarmenian=0x055b;t.emptyset=0x2205;t.enbopomofo=0x3123;t.encyrillic=0x043d;t.endash=0x2013;t.endashvertical=0xfe32;t.endescendercyrillic=0x04a3;t.eng=0x014b;t.engbopomofo=0x3125;t.enghecyrillic=0x04a5;t.enhookcyrillic=0x04c8;t.enspace=0x2002;t.eogonek=0x0119;t.eokorean=0x3153;t.eopen=0x025b;t.eopenclosed=0x029a;t.eopenreversed=0x025c;t.eopenreversedclosed=0x025e;t.eopenreversedhook=0x025d;t.eparen=0x24a0;t.epsilon=0x03b5;t.epsilontonos=0x03ad;t.equal=0x003d;t.equalmonospace=0xff1d;t.equalsmall=0xfe66;t.equalsuperior=0x207c;t.equivalence=0x2261;t.erbopomofo=0x3126;t.ercyrillic=0x0440;t.ereversed=0x0258;t.ereversedcyrillic=0x044d;t.escyrillic=0x0441;t.esdescendercyrillic=0x04ab;t.esh=0x0283;t.eshcurl=0x0286;t.eshortdeva=0x090e;t.eshortvowelsigndeva=0x0946;t.eshreversedloop=0x01aa;t.eshsquatreversed=0x0285;t.esmallhiragana=0x3047;t.esmallkatakana=0x30a7;t.esmallkatakanahalfwidth=0xff6a;t.estimated=0x212e;t.esuperior=0xf6ec;t.eta=0x03b7;t.etarmenian=0x0568;t.etatonos=0x03ae;t.eth=0x00f0;t.etilde=0x1ebd;t.etildebelow=0x1e1b;t.etnahtafoukhhebrew=0x0591;t.etnahtafoukhlefthebrew=0x0591;t.etnahtahebrew=0x0591;t.etnahtalefthebrew=0x0591;t.eturned=0x01dd;t.eukorean=0x3161;t.euro=0x20ac;t.evowelsignbengali=0x09c7;t.evowelsigndeva=0x0947;t.evowelsigngujarati=0x0ac7;t.exclam=0x0021;t.exclamarmenian=0x055c;t.exclamdbl=0x203c;t.exclamdown=0x00a1;t.exclamdownsmall=0xf7a1;t.exclammonospace=0xff01;t.exclamsmall=0xf721;t.existential=0x2203;t.ezh=0x0292;t.ezhcaron=0x01ef;t.ezhcurl=0x0293;t.ezhreversed=0x01b9;t.ezhtail=0x01ba;t.f=0x0066;t.fadeva=0x095e;t.fagurmukhi=0x0a5e;t.fahrenheit=0x2109;t.fathaarabic=0x064e;t.fathalowarabic=0x064e;t.fathatanarabic=0x064b;t.fbopomofo=0x3108;t.fcircle=0x24d5;t.fdotaccent=0x1e1f;t.feharabic=0x0641;t.feharmenian=0x0586;t.fehfinalarabic=0xfed2;t.fehinitialarabic=0xfed3;t.fehmedialarabic=0xfed4;t.feicoptic=0x03e5;t.female=0x2640;t.ff=0xfb00;t.f_f=0xfb00;t.ffi=0xfb03;t.f_f_i=0xfb03;t.ffl=0xfb04;t.f_f_l=0xfb04;t.fi=0xfb01;t.f_i=0xfb01;t.fifteencircle=0x246e;t.fifteenparen=0x2482;t.fifteenperiod=0x2496;t.figuredash=0x2012;t.filledbox=0x25a0;t.filledrect=0x25ac;t.finalkaf=0x05da;t.finalkafdagesh=0xfb3a;t.finalkafdageshhebrew=0xfb3a;t.finalkafhebrew=0x05da;t.finalmem=0x05dd;t.finalmemhebrew=0x05dd;t.finalnun=0x05df;t.finalnunhebrew=0x05df;t.finalpe=0x05e3;t.finalpehebrew=0x05e3;t.finaltsadi=0x05e5;t.finaltsadihebrew=0x05e5;t.firsttonechinese=0x02c9;t.fisheye=0x25c9;t.fitacyrillic=0x0473;t.five=0x0035;t.fivearabic=0x0665;t.fivebengali=0x09eb;t.fivecircle=0x2464;t.fivecircleinversesansserif=0x278e;t.fivedeva=0x096b;t.fiveeighths=0x215d;t.fivegujarati=0x0aeb;t.fivegurmukhi=0x0a6b;t.fivehackarabic=0x0665;t.fivehangzhou=0x3025;t.fiveideographicparen=0x3224;t.fiveinferior=0x2085;t.fivemonospace=0xff15;t.fiveoldstyle=0xf735;t.fiveparen=0x2478;t.fiveperiod=0x248c;t.fivepersian=0x06f5;t.fiveroman=0x2174;t.fivesuperior=0x2075;t.fivethai=0x0e55;t.fl=0xfb02;t.f_l=0xfb02;t.florin=0x0192;t.fmonospace=0xff46;t.fmsquare=0x3399;t.fofanthai=0x0e1f;t.fofathai=0x0e1d;t.fongmanthai=0x0e4f;t.forall=0x2200;t.four=0x0034;t.fourarabic=0x0664;t.fourbengali=0x09ea;t.fourcircle=0x2463;t.fourcircleinversesansserif=0x278d;t.fourdeva=0x096a;t.fourgujarati=0x0aea;t.fourgurmukhi=0x0a6a;t.fourhackarabic=0x0664;t.fourhangzhou=0x3024;t.fourideographicparen=0x3223;t.fourinferior=0x2084;t.fourmonospace=0xff14;t.fournumeratorbengali=0x09f7;t.fouroldstyle=0xf734;t.fourparen=0x2477;t.fourperiod=0x248b;t.fourpersian=0x06f4;t.fourroman=0x2173;t.foursuperior=0x2074;t.fourteencircle=0x246d;t.fourteenparen=0x2481;t.fourteenperiod=0x2495;t.fourthai=0x0e54;t.fourthtonechinese=0x02cb;t.fparen=0x24a1;t.fraction=0x2044;t.franc=0x20a3;t.g=0x0067;t.gabengali=0x0997;t.gacute=0x01f5;t.gadeva=0x0917;t.gafarabic=0x06af;t.gaffinalarabic=0xfb93;t.gafinitialarabic=0xfb94;t.gafmedialarabic=0xfb95;t.gagujarati=0x0a97;t.gagurmukhi=0x0a17;t.gahiragana=0x304c;t.gakatakana=0x30ac;t.gamma=0x03b3;t.gammalatinsmall=0x0263;t.gammasuperior=0x02e0;t.gangiacoptic=0x03eb;t.gbopomofo=0x310d;t.gbreve=0x011f;t.gcaron=0x01e7;t.gcedilla=0x0123;t.gcircle=0x24d6;t.gcircumflex=0x011d;t.gcommaaccent=0x0123;t.gdot=0x0121;t.gdotaccent=0x0121;t.gecyrillic=0x0433;t.gehiragana=0x3052;t.gekatakana=0x30b2;t.geometricallyequal=0x2251;t.gereshaccenthebrew=0x059c;t.gereshhebrew=0x05f3;t.gereshmuqdamhebrew=0x059d;t.germandbls=0x00df;t.gershayimaccenthebrew=0x059e;t.gershayimhebrew=0x05f4;t.getamark=0x3013;t.ghabengali=0x0998;t.ghadarmenian=0x0572;t.ghadeva=0x0918;t.ghagujarati=0x0a98;t.ghagurmukhi=0x0a18;t.ghainarabic=0x063a;t.ghainfinalarabic=0xfece;t.ghaininitialarabic=0xfecf;t.ghainmedialarabic=0xfed0;t.ghemiddlehookcyrillic=0x0495;t.ghestrokecyrillic=0x0493;t.gheupturncyrillic=0x0491;t.ghhadeva=0x095a;t.ghhagurmukhi=0x0a5a;t.ghook=0x0260;t.ghzsquare=0x3393;t.gihiragana=0x304e;t.gikatakana=0x30ae;t.gimarmenian=0x0563;t.gimel=0x05d2;t.gimeldagesh=0xfb32;t.gimeldageshhebrew=0xfb32;t.gimelhebrew=0x05d2;t.gjecyrillic=0x0453;t.glottalinvertedstroke=0x01be;t.glottalstop=0x0294;t.glottalstopinverted=0x0296;t.glottalstopmod=0x02c0;t.glottalstopreversed=0x0295;t.glottalstopreversedmod=0x02c1;t.glottalstopreversedsuperior=0x02e4;t.glottalstopstroke=0x02a1;t.glottalstopstrokereversed=0x02a2;t.gmacron=0x1e21;t.gmonospace=0xff47;t.gohiragana=0x3054;t.gokatakana=0x30b4;t.gparen=0x24a2;t.gpasquare=0x33ac;t.gradient=0x2207;t.grave=0x0060;t.gravebelowcmb=0x0316;t.gravecmb=0x0300;t.gravecomb=0x0300;t.gravedeva=0x0953;t.gravelowmod=0x02ce;t.gravemonospace=0xff40;t.gravetonecmb=0x0340;t.greater=0x003e;t.greaterequal=0x2265;t.greaterequalorless=0x22db;t.greatermonospace=0xff1e;t.greaterorequivalent=0x2273;t.greaterorless=0x2277;t.greateroverequal=0x2267;t.greatersmall=0xfe65;t.gscript=0x0261;t.gstroke=0x01e5;t.guhiragana=0x3050;t.guillemotleft=0x00ab;t.guillemotright=0x00bb;t.guilsinglleft=0x2039;t.guilsinglright=0x203a;t.gukatakana=0x30b0;t.guramusquare=0x3318;t.gysquare=0x33c9;t.h=0x0068;t.haabkhasiancyrillic=0x04a9;t.haaltonearabic=0x06c1;t.habengali=0x09b9;t.hadescendercyrillic=0x04b3;t.hadeva=0x0939;t.hagujarati=0x0ab9;t.hagurmukhi=0x0a39;t.haharabic=0x062d;t.hahfinalarabic=0xfea2;t.hahinitialarabic=0xfea3;t.hahiragana=0x306f;t.hahmedialarabic=0xfea4;t.haitusquare=0x332a;t.hakatakana=0x30cf;t.hakatakanahalfwidth=0xff8a;t.halantgurmukhi=0x0a4d;t.hamzaarabic=0x0621;t.hamzalowarabic=0x0621;t.hangulfiller=0x3164;t.hardsigncyrillic=0x044a;t.harpoonleftbarbup=0x21bc;t.harpoonrightbarbup=0x21c0;t.hasquare=0x33ca;t.hatafpatah=0x05b2;t.hatafpatah16=0x05b2;t.hatafpatah23=0x05b2;t.hatafpatah2f=0x05b2;t.hatafpatahhebrew=0x05b2;t.hatafpatahnarrowhebrew=0x05b2;t.hatafpatahquarterhebrew=0x05b2;t.hatafpatahwidehebrew=0x05b2;t.hatafqamats=0x05b3;t.hatafqamats1b=0x05b3;t.hatafqamats28=0x05b3;t.hatafqamats34=0x05b3;t.hatafqamatshebrew=0x05b3;t.hatafqamatsnarrowhebrew=0x05b3;t.hatafqamatsquarterhebrew=0x05b3;t.hatafqamatswidehebrew=0x05b3;t.hatafsegol=0x05b1;t.hatafsegol17=0x05b1;t.hatafsegol24=0x05b1;t.hatafsegol30=0x05b1;t.hatafsegolhebrew=0x05b1;t.hatafsegolnarrowhebrew=0x05b1;t.hatafsegolquarterhebrew=0x05b1;t.hatafsegolwidehebrew=0x05b1;t.hbar=0x0127;t.hbopomofo=0x310f;t.hbrevebelow=0x1e2b;t.hcedilla=0x1e29;t.hcircle=0x24d7;t.hcircumflex=0x0125;t.hdieresis=0x1e27;t.hdotaccent=0x1e23;t.hdotbelow=0x1e25;t.he=0x05d4;t.heart=0x2665;t.heartsuitblack=0x2665;t.heartsuitwhite=0x2661;t.hedagesh=0xfb34;t.hedageshhebrew=0xfb34;t.hehaltonearabic=0x06c1;t.heharabic=0x0647;t.hehebrew=0x05d4;t.hehfinalaltonearabic=0xfba7;t.hehfinalalttwoarabic=0xfeea;t.hehfinalarabic=0xfeea;t.hehhamzaabovefinalarabic=0xfba5;t.hehhamzaaboveisolatedarabic=0xfba4;t.hehinitialaltonearabic=0xfba8;t.hehinitialarabic=0xfeeb;t.hehiragana=0x3078;t.hehmedialaltonearabic=0xfba9;t.hehmedialarabic=0xfeec;t.heiseierasquare=0x337b;t.hekatakana=0x30d8;t.hekatakanahalfwidth=0xff8d;t.hekutaarusquare=0x3336;t.henghook=0x0267;t.herutusquare=0x3339;t.het=0x05d7;t.hethebrew=0x05d7;t.hhook=0x0266;t.hhooksuperior=0x02b1;t.hieuhacirclekorean=0x327b;t.hieuhaparenkorean=0x321b;t.hieuhcirclekorean=0x326d;t.hieuhkorean=0x314e;t.hieuhparenkorean=0x320d;t.hihiragana=0x3072;t.hikatakana=0x30d2;t.hikatakanahalfwidth=0xff8b;t.hiriq=0x05b4;t.hiriq14=0x05b4;t.hiriq21=0x05b4;t.hiriq2d=0x05b4;t.hiriqhebrew=0x05b4;t.hiriqnarrowhebrew=0x05b4;t.hiriqquarterhebrew=0x05b4;t.hiriqwidehebrew=0x05b4;t.hlinebelow=0x1e96;t.hmonospace=0xff48;t.hoarmenian=0x0570;t.hohipthai=0x0e2b;t.hohiragana=0x307b;t.hokatakana=0x30db;t.hokatakanahalfwidth=0xff8e;t.holam=0x05b9;t.holam19=0x05b9;t.holam26=0x05b9;t.holam32=0x05b9;t.holamhebrew=0x05b9;t.holamnarrowhebrew=0x05b9;t.holamquarterhebrew=0x05b9;t.holamwidehebrew=0x05b9;t.honokhukthai=0x0e2e;t.hookabovecomb=0x0309;t.hookcmb=0x0309;t.hookpalatalizedbelowcmb=0x0321;t.hookretroflexbelowcmb=0x0322;t.hoonsquare=0x3342;t.horicoptic=0x03e9;t.horizontalbar=0x2015;t.horncmb=0x031b;t.hotsprings=0x2668;t.house=0x2302;t.hparen=0x24a3;t.hsuperior=0x02b0;t.hturned=0x0265;t.huhiragana=0x3075;t.huiitosquare=0x3333;t.hukatakana=0x30d5;t.hukatakanahalfwidth=0xff8c;t.hungarumlaut=0x02dd;t.hungarumlautcmb=0x030b;t.hv=0x0195;t.hyphen=0x002d;t.hypheninferior=0xf6e5;t.hyphenmonospace=0xff0d;t.hyphensmall=0xfe63;t.hyphensuperior=0xf6e6;t.hyphentwo=0x2010;t.i=0x0069;t.iacute=0x00ed;t.iacyrillic=0x044f;t.ibengali=0x0987;t.ibopomofo=0x3127;t.ibreve=0x012d;t.icaron=0x01d0;t.icircle=0x24d8;t.icircumflex=0x00ee;t.icyrillic=0x0456;t.idblgrave=0x0209;t.ideographearthcircle=0x328f;t.ideographfirecircle=0x328b;t.ideographicallianceparen=0x323f;t.ideographiccallparen=0x323a;t.ideographiccentrecircle=0x32a5;t.ideographicclose=0x3006;t.ideographiccomma=0x3001;t.ideographiccommaleft=0xff64;t.ideographiccongratulationparen=0x3237;t.ideographiccorrectcircle=0x32a3;t.ideographicearthparen=0x322f;t.ideographicenterpriseparen=0x323d;t.ideographicexcellentcircle=0x329d;t.ideographicfestivalparen=0x3240;t.ideographicfinancialcircle=0x3296;t.ideographicfinancialparen=0x3236;t.ideographicfireparen=0x322b;t.ideographichaveparen=0x3232;t.ideographichighcircle=0x32a4;t.ideographiciterationmark=0x3005;t.ideographiclaborcircle=0x3298;t.ideographiclaborparen=0x3238;t.ideographicleftcircle=0x32a7;t.ideographiclowcircle=0x32a6;t.ideographicmedicinecircle=0x32a9;t.ideographicmetalparen=0x322e;t.ideographicmoonparen=0x322a;t.ideographicnameparen=0x3234;t.ideographicperiod=0x3002;t.ideographicprintcircle=0x329e;t.ideographicreachparen=0x3243;t.ideographicrepresentparen=0x3239;t.ideographicresourceparen=0x323e;t.ideographicrightcircle=0x32a8;t.ideographicsecretcircle=0x3299;t.ideographicselfparen=0x3242;t.ideographicsocietyparen=0x3233;t.ideographicspace=0x3000;t.ideographicspecialparen=0x3235;t.ideographicstockparen=0x3231;t.ideographicstudyparen=0x323b;t.ideographicsunparen=0x3230;t.ideographicsuperviseparen=0x323c;t.ideographicwaterparen=0x322c;t.ideographicwoodparen=0x322d;t.ideographiczero=0x3007;t.ideographmetalcircle=0x328e;t.ideographmooncircle=0x328a;t.ideographnamecircle=0x3294;t.ideographsuncircle=0x3290;t.ideographwatercircle=0x328c;t.ideographwoodcircle=0x328d;t.ideva=0x0907;t.idieresis=0x00ef;t.idieresisacute=0x1e2f;t.idieresiscyrillic=0x04e5;t.idotbelow=0x1ecb;t.iebrevecyrillic=0x04d7;t.iecyrillic=0x0435;t.ieungacirclekorean=0x3275;t.ieungaparenkorean=0x3215;t.ieungcirclekorean=0x3267;t.ieungkorean=0x3147;t.ieungparenkorean=0x3207;t.igrave=0x00ec;t.igujarati=0x0a87;t.igurmukhi=0x0a07;t.ihiragana=0x3044;t.ihookabove=0x1ec9;t.iibengali=0x0988;t.iicyrillic=0x0438;t.iideva=0x0908;t.iigujarati=0x0a88;t.iigurmukhi=0x0a08;t.iimatragurmukhi=0x0a40;t.iinvertedbreve=0x020b;t.iishortcyrillic=0x0439;t.iivowelsignbengali=0x09c0;t.iivowelsigndeva=0x0940;t.iivowelsigngujarati=0x0ac0;t.ij=0x0133;t.ikatakana=0x30a4;t.ikatakanahalfwidth=0xff72;t.ikorean=0x3163;t.ilde=0x02dc;t.iluyhebrew=0x05ac;t.imacron=0x012b;t.imacroncyrillic=0x04e3;t.imageorapproximatelyequal=0x2253;t.imatragurmukhi=0x0a3f;t.imonospace=0xff49;t.increment=0x2206;t.infinity=0x221e;t.iniarmenian=0x056b;t.integral=0x222b;t.integralbottom=0x2321;t.integralbt=0x2321;t.integralex=0xf8f5;t.integraltop=0x2320;t.integraltp=0x2320;t.intersection=0x2229;t.intisquare=0x3305;t.invbullet=0x25d8;t.invcircle=0x25d9;t.invsmileface=0x263b;t.iocyrillic=0x0451;t.iogonek=0x012f;t.iota=0x03b9;t.iotadieresis=0x03ca;t.iotadieresistonos=0x0390;t.iotalatin=0x0269;t.iotatonos=0x03af;t.iparen=0x24a4;t.irigurmukhi=0x0a72;t.ismallhiragana=0x3043;t.ismallkatakana=0x30a3;t.ismallkatakanahalfwidth=0xff68;t.issharbengali=0x09fa;t.istroke=0x0268;t.isuperior=0xf6ed;t.iterationhiragana=0x309d;t.iterationkatakana=0x30fd;t.itilde=0x0129;t.itildebelow=0x1e2d;t.iubopomofo=0x3129;t.iucyrillic=0x044e;t.ivowelsignbengali=0x09bf;t.ivowelsigndeva=0x093f;t.ivowelsigngujarati=0x0abf;t.izhitsacyrillic=0x0475;t.izhitsadblgravecyrillic=0x0477;t.j=0x006a;t.jaarmenian=0x0571;t.jabengali=0x099c;t.jadeva=0x091c;t.jagujarati=0x0a9c;t.jagurmukhi=0x0a1c;t.jbopomofo=0x3110;t.jcaron=0x01f0;t.jcircle=0x24d9;t.jcircumflex=0x0135;t.jcrossedtail=0x029d;t.jdotlessstroke=0x025f;t.jecyrillic=0x0458;t.jeemarabic=0x062c;t.jeemfinalarabic=0xfe9e;t.jeeminitialarabic=0xfe9f;t.jeemmedialarabic=0xfea0;t.jeharabic=0x0698;t.jehfinalarabic=0xfb8b;t.jhabengali=0x099d;t.jhadeva=0x091d;t.jhagujarati=0x0a9d;t.jhagurmukhi=0x0a1d;t.jheharmenian=0x057b;t.jis=0x3004;t.jmonospace=0xff4a;t.jparen=0x24a5;t.jsuperior=0x02b2;t.k=0x006b;t.kabashkircyrillic=0x04a1;t.kabengali=0x0995;t.kacute=0x1e31;t.kacyrillic=0x043a;t.kadescendercyrillic=0x049b;t.kadeva=0x0915;t.kaf=0x05db;t.kafarabic=0x0643;t.kafdagesh=0xfb3b;t.kafdageshhebrew=0xfb3b;t.kaffinalarabic=0xfeda;t.kafhebrew=0x05db;t.kafinitialarabic=0xfedb;t.kafmedialarabic=0xfedc;t.kafrafehebrew=0xfb4d;t.kagujarati=0x0a95;t.kagurmukhi=0x0a15;t.kahiragana=0x304b;t.kahookcyrillic=0x04c4;t.kakatakana=0x30ab;t.kakatakanahalfwidth=0xff76;t.kappa=0x03ba;t.kappasymbolgreek=0x03f0;t.kapyeounmieumkorean=0x3171;t.kapyeounphieuphkorean=0x3184;t.kapyeounpieupkorean=0x3178;t.kapyeounssangpieupkorean=0x3179;t.karoriisquare=0x330d;t.kashidaautoarabic=0x0640;t.kashidaautonosidebearingarabic=0x0640;t.kasmallkatakana=0x30f5;t.kasquare=0x3384;t.kasraarabic=0x0650;t.kasratanarabic=0x064d;t.kastrokecyrillic=0x049f;t.katahiraprolongmarkhalfwidth=0xff70;t.kaverticalstrokecyrillic=0x049d;t.kbopomofo=0x310e;t.kcalsquare=0x3389;t.kcaron=0x01e9;t.kcedilla=0x0137;t.kcircle=0x24da;t.kcommaaccent=0x0137;t.kdotbelow=0x1e33;t.keharmenian=0x0584;t.kehiragana=0x3051;t.kekatakana=0x30b1;t.kekatakanahalfwidth=0xff79;t.kenarmenian=0x056f;t.kesmallkatakana=0x30f6;t.kgreenlandic=0x0138;t.khabengali=0x0996;t.khacyrillic=0x0445;t.khadeva=0x0916;t.khagujarati=0x0a96;t.khagurmukhi=0x0a16;t.khaharabic=0x062e;t.khahfinalarabic=0xfea6;t.khahinitialarabic=0xfea7;t.khahmedialarabic=0xfea8;t.kheicoptic=0x03e7;t.khhadeva=0x0959;t.khhagurmukhi=0x0a59;t.khieukhacirclekorean=0x3278;t.khieukhaparenkorean=0x3218;t.khieukhcirclekorean=0x326a;t.khieukhkorean=0x314b;t.khieukhparenkorean=0x320a;t.khokhaithai=0x0e02;t.khokhonthai=0x0e05;t.khokhuatthai=0x0e03;t.khokhwaithai=0x0e04;t.khomutthai=0x0e5b;t.khook=0x0199;t.khorakhangthai=0x0e06;t.khzsquare=0x3391;t.kihiragana=0x304d;t.kikatakana=0x30ad;t.kikatakanahalfwidth=0xff77;t.kiroguramusquare=0x3315;t.kiromeetorusquare=0x3316;t.kirosquare=0x3314;t.kiyeokacirclekorean=0x326e;t.kiyeokaparenkorean=0x320e;t.kiyeokcirclekorean=0x3260;t.kiyeokkorean=0x3131;t.kiyeokparenkorean=0x3200;t.kiyeoksioskorean=0x3133;t.kjecyrillic=0x045c;t.klinebelow=0x1e35;t.klsquare=0x3398;t.kmcubedsquare=0x33a6;t.kmonospace=0xff4b;t.kmsquaredsquare=0x33a2;t.kohiragana=0x3053;t.kohmsquare=0x33c0;t.kokaithai=0x0e01;t.kokatakana=0x30b3;t.kokatakanahalfwidth=0xff7a;t.kooposquare=0x331e;t.koppacyrillic=0x0481;t.koreanstandardsymbol=0x327f;t.koroniscmb=0x0343;t.kparen=0x24a6;t.kpasquare=0x33aa;t.ksicyrillic=0x046f;t.ktsquare=0x33cf;t.kturned=0x029e;t.kuhiragana=0x304f;t.kukatakana=0x30af;t.kukatakanahalfwidth=0xff78;t.kvsquare=0x33b8;t.kwsquare=0x33be;t.l=0x006c;t.labengali=0x09b2;t.lacute=0x013a;t.ladeva=0x0932;t.lagujarati=0x0ab2;t.lagurmukhi=0x0a32;t.lakkhangyaothai=0x0e45;t.lamaleffinalarabic=0xfefc;t.lamalefhamzaabovefinalarabic=0xfef8;t.lamalefhamzaaboveisolatedarabic=0xfef7;t.lamalefhamzabelowfinalarabic=0xfefa;t.lamalefhamzabelowisolatedarabic=0xfef9;t.lamalefisolatedarabic=0xfefb;t.lamalefmaddaabovefinalarabic=0xfef6;t.lamalefmaddaaboveisolatedarabic=0xfef5;t.lamarabic=0x0644;t.lambda=0x03bb;t.lambdastroke=0x019b;t.lamed=0x05dc;t.lameddagesh=0xfb3c;t.lameddageshhebrew=0xfb3c;t.lamedhebrew=0x05dc;t.lamfinalarabic=0xfede;t.lamhahinitialarabic=0xfcca;t.laminitialarabic=0xfedf;t.lamjeeminitialarabic=0xfcc9;t.lamkhahinitialarabic=0xfccb;t.lamlamhehisolatedarabic=0xfdf2;t.lammedialarabic=0xfee0;t.lammeemhahinitialarabic=0xfd88;t.lammeeminitialarabic=0xfccc;t.largecircle=0x25ef;t.lbar=0x019a;t.lbelt=0x026c;t.lbopomofo=0x310c;t.lcaron=0x013e;t.lcedilla=0x013c;t.lcircle=0x24db;t.lcircumflexbelow=0x1e3d;t.lcommaaccent=0x013c;t.ldot=0x0140;t.ldotaccent=0x0140;t.ldotbelow=0x1e37;t.ldotbelowmacron=0x1e39;t.leftangleabovecmb=0x031a;t.lefttackbelowcmb=0x0318;t.less=0x003c;t.lessequal=0x2264;t.lessequalorgreater=0x22da;t.lessmonospace=0xff1c;t.lessorequivalent=0x2272;t.lessorgreater=0x2276;t.lessoverequal=0x2266;t.lesssmall=0xfe64;t.lezh=0x026e;t.lfblock=0x258c;t.lhookretroflex=0x026d;t.lira=0x20a4;t.liwnarmenian=0x056c;t.lj=0x01c9;t.ljecyrillic=0x0459;t.ll=0xf6c0;t.lladeva=0x0933;t.llagujarati=0x0ab3;t.llinebelow=0x1e3b;t.llladeva=0x0934;t.llvocalicbengali=0x09e1;t.llvocalicdeva=0x0961;t.llvocalicvowelsignbengali=0x09e3;t.llvocalicvowelsigndeva=0x0963;t.lmiddletilde=0x026b;t.lmonospace=0xff4c;t.lmsquare=0x33d0;t.lochulathai=0x0e2c;t.logicaland=0x2227;t.logicalnot=0x00ac;t.logicalnotreversed=0x2310;t.logicalor=0x2228;t.lolingthai=0x0e25;t.longs=0x017f;t.lowlinecenterline=0xfe4e;t.lowlinecmb=0x0332;t.lowlinedashed=0xfe4d;t.lozenge=0x25ca;t.lparen=0x24a7;t.lslash=0x0142;t.lsquare=0x2113;t.lsuperior=0xf6ee;t.ltshade=0x2591;t.luthai=0x0e26;t.lvocalicbengali=0x098c;t.lvocalicdeva=0x090c;t.lvocalicvowelsignbengali=0x09e2;t.lvocalicvowelsigndeva=0x0962;t.lxsquare=0x33d3;t.m=0x006d;t.mabengali=0x09ae;t.macron=0x00af;t.macronbelowcmb=0x0331;t.macroncmb=0x0304;t.macronlowmod=0x02cd;t.macronmonospace=0xffe3;t.macute=0x1e3f;t.madeva=0x092e;t.magujarati=0x0aae;t.magurmukhi=0x0a2e;t.mahapakhhebrew=0x05a4;t.mahapakhlefthebrew=0x05a4;t.mahiragana=0x307e;t.maichattawalowleftthai=0xf895;t.maichattawalowrightthai=0xf894;t.maichattawathai=0x0e4b;t.maichattawaupperleftthai=0xf893;t.maieklowleftthai=0xf88c;t.maieklowrightthai=0xf88b;t.maiekthai=0x0e48;t.maiekupperleftthai=0xf88a;t.maihanakatleftthai=0xf884;t.maihanakatthai=0x0e31;t.maitaikhuleftthai=0xf889;t.maitaikhuthai=0x0e47;t.maitholowleftthai=0xf88f;t.maitholowrightthai=0xf88e;t.maithothai=0x0e49;t.maithoupperleftthai=0xf88d;t.maitrilowleftthai=0xf892;t.maitrilowrightthai=0xf891;t.maitrithai=0x0e4a;t.maitriupperleftthai=0xf890;t.maiyamokthai=0x0e46;t.makatakana=0x30de;t.makatakanahalfwidth=0xff8f;t.male=0x2642;t.mansyonsquare=0x3347;t.maqafhebrew=0x05be;t.mars=0x2642;t.masoracirclehebrew=0x05af;t.masquare=0x3383;t.mbopomofo=0x3107;t.mbsquare=0x33d4;t.mcircle=0x24dc;t.mcubedsquare=0x33a5;t.mdotaccent=0x1e41;t.mdotbelow=0x1e43;t.meemarabic=0x0645;t.meemfinalarabic=0xfee2;t.meeminitialarabic=0xfee3;t.meemmedialarabic=0xfee4;t.meemmeeminitialarabic=0xfcd1;t.meemmeemisolatedarabic=0xfc48;t.meetorusquare=0x334d;t.mehiragana=0x3081;t.meizierasquare=0x337e;t.mekatakana=0x30e1;t.mekatakanahalfwidth=0xff92;t.mem=0x05de;t.memdagesh=0xfb3e;t.memdageshhebrew=0xfb3e;t.memhebrew=0x05de;t.menarmenian=0x0574;t.merkhahebrew=0x05a5;t.merkhakefulahebrew=0x05a6;t.merkhakefulalefthebrew=0x05a6;t.merkhalefthebrew=0x05a5;t.mhook=0x0271;t.mhzsquare=0x3392;t.middledotkatakanahalfwidth=0xff65;t.middot=0x00b7;t.mieumacirclekorean=0x3272;t.mieumaparenkorean=0x3212;t.mieumcirclekorean=0x3264;t.mieumkorean=0x3141;t.mieumpansioskorean=0x3170;t.mieumparenkorean=0x3204;t.mieumpieupkorean=0x316e;t.mieumsioskorean=0x316f;t.mihiragana=0x307f;t.mikatakana=0x30df;t.mikatakanahalfwidth=0xff90;t.minus=0x2212;t.minusbelowcmb=0x0320;t.minuscircle=0x2296;t.minusmod=0x02d7;t.minusplus=0x2213;t.minute=0x2032;t.miribaarusquare=0x334a;t.mirisquare=0x3349;t.mlonglegturned=0x0270;t.mlsquare=0x3396;t.mmcubedsquare=0x33a3;t.mmonospace=0xff4d;t.mmsquaredsquare=0x339f;t.mohiragana=0x3082;t.mohmsquare=0x33c1;t.mokatakana=0x30e2;t.mokatakanahalfwidth=0xff93;t.molsquare=0x33d6;t.momathai=0x0e21;t.moverssquare=0x33a7;t.moverssquaredsquare=0x33a8;t.mparen=0x24a8;t.mpasquare=0x33ab;t.mssquare=0x33b3;t.msuperior=0xf6ef;t.mturned=0x026f;t.mu=0x00b5;t.mu1=0x00b5;t.muasquare=0x3382;t.muchgreater=0x226b;t.muchless=0x226a;t.mufsquare=0x338c;t.mugreek=0x03bc;t.mugsquare=0x338d;t.muhiragana=0x3080;t.mukatakana=0x30e0;t.mukatakanahalfwidth=0xff91;t.mulsquare=0x3395;t.multiply=0x00d7;t.mumsquare=0x339b;t.munahhebrew=0x05a3;t.munahlefthebrew=0x05a3;t.musicalnote=0x266a;t.musicalnotedbl=0x266b;t.musicflatsign=0x266d;t.musicsharpsign=0x266f;t.mussquare=0x33b2;t.muvsquare=0x33b6;t.muwsquare=0x33bc;t.mvmegasquare=0x33b9;t.mvsquare=0x33b7;t.mwmegasquare=0x33bf;t.mwsquare=0x33bd;t.n=0x006e;t.nabengali=0x09a8;t.nabla=0x2207;t.nacute=0x0144;t.nadeva=0x0928;t.nagujarati=0x0aa8;t.nagurmukhi=0x0a28;t.nahiragana=0x306a;t.nakatakana=0x30ca;t.nakatakanahalfwidth=0xff85;t.napostrophe=0x0149;t.nasquare=0x3381;t.nbopomofo=0x310b;t.nbspace=0x00a0;t.ncaron=0x0148;t.ncedilla=0x0146;t.ncircle=0x24dd;t.ncircumflexbelow=0x1e4b;t.ncommaaccent=0x0146;t.ndotaccent=0x1e45;t.ndotbelow=0x1e47;t.nehiragana=0x306d;t.nekatakana=0x30cd;t.nekatakanahalfwidth=0xff88;t.newsheqelsign=0x20aa;t.nfsquare=0x338b;t.ngabengali=0x0999;t.ngadeva=0x0919;t.ngagujarati=0x0a99;t.ngagurmukhi=0x0a19;t.ngonguthai=0x0e07;t.nhiragana=0x3093;t.nhookleft=0x0272;t.nhookretroflex=0x0273;t.nieunacirclekorean=0x326f;t.nieunaparenkorean=0x320f;t.nieuncieuckorean=0x3135;t.nieuncirclekorean=0x3261;t.nieunhieuhkorean=0x3136;t.nieunkorean=0x3134;t.nieunpansioskorean=0x3168;t.nieunparenkorean=0x3201;t.nieunsioskorean=0x3167;t.nieuntikeutkorean=0x3166;t.nihiragana=0x306b;t.nikatakana=0x30cb;t.nikatakanahalfwidth=0xff86;t.nikhahitleftthai=0xf899;t.nikhahitthai=0x0e4d;t.nine=0x0039;t.ninearabic=0x0669;t.ninebengali=0x09ef;t.ninecircle=0x2468;t.ninecircleinversesansserif=0x2792;t.ninedeva=0x096f;t.ninegujarati=0x0aef;t.ninegurmukhi=0x0a6f;t.ninehackarabic=0x0669;t.ninehangzhou=0x3029;t.nineideographicparen=0x3228;t.nineinferior=0x2089;t.ninemonospace=0xff19;t.nineoldstyle=0xf739;t.nineparen=0x247c;t.nineperiod=0x2490;t.ninepersian=0x06f9;t.nineroman=0x2178;t.ninesuperior=0x2079;t.nineteencircle=0x2472;t.nineteenparen=0x2486;t.nineteenperiod=0x249a;t.ninethai=0x0e59;t.nj=0x01cc;t.njecyrillic=0x045a;t.nkatakana=0x30f3;t.nkatakanahalfwidth=0xff9d;t.nlegrightlong=0x019e;t.nlinebelow=0x1e49;t.nmonospace=0xff4e;t.nmsquare=0x339a;t.nnabengali=0x09a3;t.nnadeva=0x0923;t.nnagujarati=0x0aa3;t.nnagurmukhi=0x0a23;t.nnnadeva=0x0929;t.nohiragana=0x306e;t.nokatakana=0x30ce;t.nokatakanahalfwidth=0xff89;t.nonbreakingspace=0x00a0;t.nonenthai=0x0e13;t.nonuthai=0x0e19;t.noonarabic=0x0646;t.noonfinalarabic=0xfee6;t.noonghunnaarabic=0x06ba;t.noonghunnafinalarabic=0xfb9f;t.nooninitialarabic=0xfee7;t.noonjeeminitialarabic=0xfcd2;t.noonjeemisolatedarabic=0xfc4b;t.noonmedialarabic=0xfee8;t.noonmeeminitialarabic=0xfcd5;t.noonmeemisolatedarabic=0xfc4e;t.noonnoonfinalarabic=0xfc8d;t.notcontains=0x220c;t.notelement=0x2209;t.notelementof=0x2209;t.notequal=0x2260;t.notgreater=0x226f;t.notgreaternorequal=0x2271;t.notgreaternorless=0x2279;t.notidentical=0x2262;t.notless=0x226e;t.notlessnorequal=0x2270;t.notparallel=0x2226;t.notprecedes=0x2280;t.notsubset=0x2284;t.notsucceeds=0x2281;t.notsuperset=0x2285;t.nowarmenian=0x0576;t.nparen=0x24a9;t.nssquare=0x33b1;t.nsuperior=0x207f;t.ntilde=0x00f1;t.nu=0x03bd;t.nuhiragana=0x306c;t.nukatakana=0x30cc;t.nukatakanahalfwidth=0xff87;t.nuktabengali=0x09bc;t.nuktadeva=0x093c;t.nuktagujarati=0x0abc;t.nuktagurmukhi=0x0a3c;t.numbersign=0x0023;t.numbersignmonospace=0xff03;t.numbersignsmall=0xfe5f;t.numeralsigngreek=0x0374;t.numeralsignlowergreek=0x0375;t.numero=0x2116;t.nun=0x05e0;t.nundagesh=0xfb40;t.nundageshhebrew=0xfb40;t.nunhebrew=0x05e0;t.nvsquare=0x33b5;t.nwsquare=0x33bb;t.nyabengali=0x099e;t.nyadeva=0x091e;t.nyagujarati=0x0a9e;t.nyagurmukhi=0x0a1e;t.o=0x006f;t.oacute=0x00f3;t.oangthai=0x0e2d;t.obarred=0x0275;t.obarredcyrillic=0x04e9;t.obarreddieresiscyrillic=0x04eb;t.obengali=0x0993;t.obopomofo=0x311b;t.obreve=0x014f;t.ocandradeva=0x0911;t.ocandragujarati=0x0a91;t.ocandravowelsigndeva=0x0949;t.ocandravowelsigngujarati=0x0ac9;t.ocaron=0x01d2;t.ocircle=0x24de;t.ocircumflex=0x00f4;t.ocircumflexacute=0x1ed1;t.ocircumflexdotbelow=0x1ed9;t.ocircumflexgrave=0x1ed3;t.ocircumflexhookabove=0x1ed5;t.ocircumflextilde=0x1ed7;t.ocyrillic=0x043e;t.odblacute=0x0151;t.odblgrave=0x020d;t.odeva=0x0913;t.odieresis=0x00f6;t.odieresiscyrillic=0x04e7;t.odotbelow=0x1ecd;t.oe=0x0153;t.oekorean=0x315a;t.ogonek=0x02db;t.ogonekcmb=0x0328;t.ograve=0x00f2;t.ogujarati=0x0a93;t.oharmenian=0x0585;t.ohiragana=0x304a;t.ohookabove=0x1ecf;t.ohorn=0x01a1;t.ohornacute=0x1edb;t.ohorndotbelow=0x1ee3;t.ohorngrave=0x1edd;t.ohornhookabove=0x1edf;t.ohorntilde=0x1ee1;t.ohungarumlaut=0x0151;t.oi=0x01a3;t.oinvertedbreve=0x020f;t.okatakana=0x30aa;t.okatakanahalfwidth=0xff75;t.okorean=0x3157;t.olehebrew=0x05ab;t.omacron=0x014d;t.omacronacute=0x1e53;t.omacrongrave=0x1e51;t.omdeva=0x0950;t.omega=0x03c9;t.omega1=0x03d6;t.omegacyrillic=0x0461;t.omegalatinclosed=0x0277;t.omegaroundcyrillic=0x047b;t.omegatitlocyrillic=0x047d;t.omegatonos=0x03ce;t.omgujarati=0x0ad0;t.omicron=0x03bf;t.omicrontonos=0x03cc;t.omonospace=0xff4f;t.one=0x0031;t.onearabic=0x0661;t.onebengali=0x09e7;t.onecircle=0x2460;t.onecircleinversesansserif=0x278a;t.onedeva=0x0967;t.onedotenleader=0x2024;t.oneeighth=0x215b;t.onefitted=0xf6dc;t.onegujarati=0x0ae7;t.onegurmukhi=0x0a67;t.onehackarabic=0x0661;t.onehalf=0x00bd;t.onehangzhou=0x3021;t.oneideographicparen=0x3220;t.oneinferior=0x2081;t.onemonospace=0xff11;t.onenumeratorbengali=0x09f4;t.oneoldstyle=0xf731;t.oneparen=0x2474;t.oneperiod=0x2488;t.onepersian=0x06f1;t.onequarter=0x00bc;t.oneroman=0x2170;t.onesuperior=0x00b9;t.onethai=0x0e51;t.onethird=0x2153;t.oogonek=0x01eb;t.oogonekmacron=0x01ed;t.oogurmukhi=0x0a13;t.oomatragurmukhi=0x0a4b;t.oopen=0x0254;t.oparen=0x24aa;t.openbullet=0x25e6;t.option=0x2325;t.ordfeminine=0x00aa;t.ordmasculine=0x00ba;t.orthogonal=0x221f;t.oshortdeva=0x0912;t.oshortvowelsigndeva=0x094a;t.oslash=0x00f8;t.oslashacute=0x01ff;t.osmallhiragana=0x3049;t.osmallkatakana=0x30a9;t.osmallkatakanahalfwidth=0xff6b;t.ostrokeacute=0x01ff;t.osuperior=0xf6f0;t.otcyrillic=0x047f;t.otilde=0x00f5;t.otildeacute=0x1e4d;t.otildedieresis=0x1e4f;t.oubopomofo=0x3121;t.overline=0x203e;t.overlinecenterline=0xfe4a;t.overlinecmb=0x0305;t.overlinedashed=0xfe49;t.overlinedblwavy=0xfe4c;t.overlinewavy=0xfe4b;t.overscore=0x00af;t.ovowelsignbengali=0x09cb;t.ovowelsigndeva=0x094b;t.ovowelsigngujarati=0x0acb;t.p=0x0070;t.paampssquare=0x3380;t.paasentosquare=0x332b;t.pabengali=0x09aa;t.pacute=0x1e55;t.padeva=0x092a;t.pagedown=0x21df;t.pageup=0x21de;t.pagujarati=0x0aaa;t.pagurmukhi=0x0a2a;t.pahiragana=0x3071;t.paiyannoithai=0x0e2f;t.pakatakana=0x30d1;t.palatalizationcyrilliccmb=0x0484;t.palochkacyrillic=0x04c0;t.pansioskorean=0x317f;t.paragraph=0x00b6;t.parallel=0x2225;t.parenleft=0x0028;t.parenleftaltonearabic=0xfd3e;t.parenleftbt=0xf8ed;t.parenleftex=0xf8ec;t.parenleftinferior=0x208d;t.parenleftmonospace=0xff08;t.parenleftsmall=0xfe59;t.parenleftsuperior=0x207d;t.parenlefttp=0xf8eb;t.parenleftvertical=0xfe35;t.parenright=0x0029;t.parenrightaltonearabic=0xfd3f;t.parenrightbt=0xf8f8;t.parenrightex=0xf8f7;t.parenrightinferior=0x208e;t.parenrightmonospace=0xff09;t.parenrightsmall=0xfe5a;t.parenrightsuperior=0x207e;t.parenrighttp=0xf8f6;t.parenrightvertical=0xfe36;t.partialdiff=0x2202;t.paseqhebrew=0x05c0;t.pashtahebrew=0x0599;t.pasquare=0x33a9;t.patah=0x05b7;t.patah11=0x05b7;t.patah1d=0x05b7;t.patah2a=0x05b7;t.patahhebrew=0x05b7;t.patahnarrowhebrew=0x05b7;t.patahquarterhebrew=0x05b7;t.patahwidehebrew=0x05b7;t.pazerhebrew=0x05a1;t.pbopomofo=0x3106;t.pcircle=0x24df;t.pdotaccent=0x1e57;t.pe=0x05e4;t.pecyrillic=0x043f;t.pedagesh=0xfb44;t.pedageshhebrew=0xfb44;t.peezisquare=0x333b;t.pefinaldageshhebrew=0xfb43;t.peharabic=0x067e;t.peharmenian=0x057a;t.pehebrew=0x05e4;t.pehfinalarabic=0xfb57;t.pehinitialarabic=0xfb58;t.pehiragana=0x307a;t.pehmedialarabic=0xfb59;t.pekatakana=0x30da;t.pemiddlehookcyrillic=0x04a7;t.perafehebrew=0xfb4e;t.percent=0x0025;t.percentarabic=0x066a;t.percentmonospace=0xff05;t.percentsmall=0xfe6a;t.period=0x002e;t.periodarmenian=0x0589;t.periodcentered=0x00b7;t.periodhalfwidth=0xff61;t.periodinferior=0xf6e7;t.periodmonospace=0xff0e;t.periodsmall=0xfe52;t.periodsuperior=0xf6e8;t.perispomenigreekcmb=0x0342;t.perpendicular=0x22a5;t.perthousand=0x2030;t.peseta=0x20a7;t.pfsquare=0x338a;t.phabengali=0x09ab;t.phadeva=0x092b;t.phagujarati=0x0aab;t.phagurmukhi=0x0a2b;t.phi=0x03c6;t.phi1=0x03d5;t.phieuphacirclekorean=0x327a;t.phieuphaparenkorean=0x321a;t.phieuphcirclekorean=0x326c;t.phieuphkorean=0x314d;t.phieuphparenkorean=0x320c;t.philatin=0x0278;t.phinthuthai=0x0e3a;t.phisymbolgreek=0x03d5;t.phook=0x01a5;t.phophanthai=0x0e1e;t.phophungthai=0x0e1c;t.phosamphaothai=0x0e20;t.pi=0x03c0;t.pieupacirclekorean=0x3273;t.pieupaparenkorean=0x3213;t.pieupcieuckorean=0x3176;t.pieupcirclekorean=0x3265;t.pieupkiyeokkorean=0x3172;t.pieupkorean=0x3142;t.pieupparenkorean=0x3205;t.pieupsioskiyeokkorean=0x3174;t.pieupsioskorean=0x3144;t.pieupsiostikeutkorean=0x3175;t.pieupthieuthkorean=0x3177;t.pieuptikeutkorean=0x3173;t.pihiragana=0x3074;t.pikatakana=0x30d4;t.pisymbolgreek=0x03d6;t.piwrarmenian=0x0583;t.planckover2pi=0x210f;t.planckover2pi1=0x210f;t.plus=0x002b;t.plusbelowcmb=0x031f;t.pluscircle=0x2295;t.plusminus=0x00b1;t.plusmod=0x02d6;t.plusmonospace=0xff0b;t.plussmall=0xfe62;t.plussuperior=0x207a;t.pmonospace=0xff50;t.pmsquare=0x33d8;t.pohiragana=0x307d;t.pointingindexdownwhite=0x261f;t.pointingindexleftwhite=0x261c;t.pointingindexrightwhite=0x261e;t.pointingindexupwhite=0x261d;t.pokatakana=0x30dd;t.poplathai=0x0e1b;t.postalmark=0x3012;t.postalmarkface=0x3020;t.pparen=0x24ab;t.precedes=0x227a;t.prescription=0x211e;t.primemod=0x02b9;t.primereversed=0x2035;t.product=0x220f;t.projective=0x2305;t.prolongedkana=0x30fc;t.propellor=0x2318;t.propersubset=0x2282;t.propersuperset=0x2283;t.proportion=0x2237;t.proportional=0x221d;t.psi=0x03c8;t.psicyrillic=0x0471;t.psilipneumatacyrilliccmb=0x0486;t.pssquare=0x33b0;t.puhiragana=0x3077;t.pukatakana=0x30d7;t.pvsquare=0x33b4;t.pwsquare=0x33ba;t.q=0x0071;t.qadeva=0x0958;t.qadmahebrew=0x05a8;t.qafarabic=0x0642;t.qaffinalarabic=0xfed6;t.qafinitialarabic=0xfed7;t.qafmedialarabic=0xfed8;t.qamats=0x05b8;t.qamats10=0x05b8;t.qamats1a=0x05b8;t.qamats1c=0x05b8;t.qamats27=0x05b8;t.qamats29=0x05b8;t.qamats33=0x05b8;t.qamatsde=0x05b8;t.qamatshebrew=0x05b8;t.qamatsnarrowhebrew=0x05b8;t.qamatsqatanhebrew=0x05b8;t.qamatsqatannarrowhebrew=0x05b8;t.qamatsqatanquarterhebrew=0x05b8;t.qamatsqatanwidehebrew=0x05b8;t.qamatsquarterhebrew=0x05b8;t.qamatswidehebrew=0x05b8;t.qarneyparahebrew=0x059f;t.qbopomofo=0x3111;t.qcircle=0x24e0;t.qhook=0x02a0;t.qmonospace=0xff51;t.qof=0x05e7;t.qofdagesh=0xfb47;t.qofdageshhebrew=0xfb47;t.qofhebrew=0x05e7;t.qparen=0x24ac;t.quarternote=0x2669;t.qubuts=0x05bb;t.qubuts18=0x05bb;t.qubuts25=0x05bb;t.qubuts31=0x05bb;t.qubutshebrew=0x05bb;t.qubutsnarrowhebrew=0x05bb;t.qubutsquarterhebrew=0x05bb;t.qubutswidehebrew=0x05bb;t.question=0x003f;t.questionarabic=0x061f;t.questionarmenian=0x055e;t.questiondown=0x00bf;t.questiondownsmall=0xf7bf;t.questiongreek=0x037e;t.questionmonospace=0xff1f;t.questionsmall=0xf73f;t.quotedbl=0x0022;t.quotedblbase=0x201e;t.quotedblleft=0x201c;t.quotedblmonospace=0xff02;t.quotedblprime=0x301e;t.quotedblprimereversed=0x301d;t.quotedblright=0x201d;t.quoteleft=0x2018;t.quoteleftreversed=0x201b;t.quotereversed=0x201b;t.quoteright=0x2019;t.quoterightn=0x0149;t.quotesinglbase=0x201a;t.quotesingle=0x0027;t.quotesinglemonospace=0xff07;t.r=0x0072;t.raarmenian=0x057c;t.rabengali=0x09b0;t.racute=0x0155;t.radeva=0x0930;t.radical=0x221a;t.radicalex=0xf8e5;t.radoverssquare=0x33ae;t.radoverssquaredsquare=0x33af;t.radsquare=0x33ad;t.rafe=0x05bf;t.rafehebrew=0x05bf;t.ragujarati=0x0ab0;t.ragurmukhi=0x0a30;t.rahiragana=0x3089;t.rakatakana=0x30e9;t.rakatakanahalfwidth=0xff97;t.ralowerdiagonalbengali=0x09f1;t.ramiddlediagonalbengali=0x09f0;t.ramshorn=0x0264;t.ratio=0x2236;t.rbopomofo=0x3116;t.rcaron=0x0159;t.rcedilla=0x0157;t.rcircle=0x24e1;t.rcommaaccent=0x0157;t.rdblgrave=0x0211;t.rdotaccent=0x1e59;t.rdotbelow=0x1e5b;t.rdotbelowmacron=0x1e5d;t.referencemark=0x203b;t.reflexsubset=0x2286;t.reflexsuperset=0x2287;t.registered=0x00ae;t.registersans=0xf8e8;t.registerserif=0xf6da;t.reharabic=0x0631;t.reharmenian=0x0580;t.rehfinalarabic=0xfeae;t.rehiragana=0x308c;t.rekatakana=0x30ec;t.rekatakanahalfwidth=0xff9a;t.resh=0x05e8;t.reshdageshhebrew=0xfb48;t.reshhebrew=0x05e8;t.reversedtilde=0x223d;t.reviahebrew=0x0597;t.reviamugrashhebrew=0x0597;t.revlogicalnot=0x2310;t.rfishhook=0x027e;t.rfishhookreversed=0x027f;t.rhabengali=0x09dd;t.rhadeva=0x095d;t.rho=0x03c1;t.rhook=0x027d;t.rhookturned=0x027b;t.rhookturnedsuperior=0x02b5;t.rhosymbolgreek=0x03f1;t.rhotichookmod=0x02de;t.rieulacirclekorean=0x3271;t.rieulaparenkorean=0x3211;t.rieulcirclekorean=0x3263;t.rieulhieuhkorean=0x3140;t.rieulkiyeokkorean=0x313a;t.rieulkiyeoksioskorean=0x3169;t.rieulkorean=0x3139;t.rieulmieumkorean=0x313b;t.rieulpansioskorean=0x316c;t.rieulparenkorean=0x3203;t.rieulphieuphkorean=0x313f;t.rieulpieupkorean=0x313c;t.rieulpieupsioskorean=0x316b;t.rieulsioskorean=0x313d;t.rieulthieuthkorean=0x313e;t.rieultikeutkorean=0x316a;t.rieulyeorinhieuhkorean=0x316d;t.rightangle=0x221f;t.righttackbelowcmb=0x0319;t.righttriangle=0x22bf;t.rihiragana=0x308a;t.rikatakana=0x30ea;t.rikatakanahalfwidth=0xff98;t.ring=0x02da;t.ringbelowcmb=0x0325;t.ringcmb=0x030a;t.ringhalfleft=0x02bf;t.ringhalfleftarmenian=0x0559;t.ringhalfleftbelowcmb=0x031c;t.ringhalfleftcentered=0x02d3;t.ringhalfright=0x02be;t.ringhalfrightbelowcmb=0x0339;t.ringhalfrightcentered=0x02d2;t.rinvertedbreve=0x0213;t.rittorusquare=0x3351;t.rlinebelow=0x1e5f;t.rlongleg=0x027c;t.rlonglegturned=0x027a;t.rmonospace=0xff52;t.rohiragana=0x308d;t.rokatakana=0x30ed;t.rokatakanahalfwidth=0xff9b;t.roruathai=0x0e23;t.rparen=0x24ad;t.rrabengali=0x09dc;t.rradeva=0x0931;t.rragurmukhi=0x0a5c;t.rreharabic=0x0691;t.rrehfinalarabic=0xfb8d;t.rrvocalicbengali=0x09e0;t.rrvocalicdeva=0x0960;t.rrvocalicgujarati=0x0ae0;t.rrvocalicvowelsignbengali=0x09c4;t.rrvocalicvowelsigndeva=0x0944;t.rrvocalicvowelsigngujarati=0x0ac4;t.rsuperior=0xf6f1;t.rtblock=0x2590;t.rturned=0x0279;t.rturnedsuperior=0x02b4;t.ruhiragana=0x308b;t.rukatakana=0x30eb;t.rukatakanahalfwidth=0xff99;t.rupeemarkbengali=0x09f2;t.rupeesignbengali=0x09f3;t.rupiah=0xf6dd;t.ruthai=0x0e24;t.rvocalicbengali=0x098b;t.rvocalicdeva=0x090b;t.rvocalicgujarati=0x0a8b;t.rvocalicvowelsignbengali=0x09c3;t.rvocalicvowelsigndeva=0x0943;t.rvocalicvowelsigngujarati=0x0ac3;t.s=0x0073;t.sabengali=0x09b8;t.sacute=0x015b;t.sacutedotaccent=0x1e65;t.sadarabic=0x0635;t.sadeva=0x0938;t.sadfinalarabic=0xfeba;t.sadinitialarabic=0xfebb;t.sadmedialarabic=0xfebc;t.sagujarati=0x0ab8;t.sagurmukhi=0x0a38;t.sahiragana=0x3055;t.sakatakana=0x30b5;t.sakatakanahalfwidth=0xff7b;t.sallallahoualayhewasallamarabic=0xfdfa;t.samekh=0x05e1;t.samekhdagesh=0xfb41;t.samekhdageshhebrew=0xfb41;t.samekhhebrew=0x05e1;t.saraaathai=0x0e32;t.saraaethai=0x0e41;t.saraaimaimalaithai=0x0e44;t.saraaimaimuanthai=0x0e43;t.saraamthai=0x0e33;t.saraathai=0x0e30;t.saraethai=0x0e40;t.saraiileftthai=0xf886;t.saraiithai=0x0e35;t.saraileftthai=0xf885;t.saraithai=0x0e34;t.saraothai=0x0e42;t.saraueeleftthai=0xf888;t.saraueethai=0x0e37;t.saraueleftthai=0xf887;t.sarauethai=0x0e36;t.sarauthai=0x0e38;t.sarauuthai=0x0e39;t.sbopomofo=0x3119;t.scaron=0x0161;t.scarondotaccent=0x1e67;t.scedilla=0x015f;t.schwa=0x0259;t.schwacyrillic=0x04d9;t.schwadieresiscyrillic=0x04db;t.schwahook=0x025a;t.scircle=0x24e2;t.scircumflex=0x015d;t.scommaaccent=0x0219;t.sdotaccent=0x1e61;t.sdotbelow=0x1e63;t.sdotbelowdotaccent=0x1e69;t.seagullbelowcmb=0x033c;t.second=0x2033;t.secondtonechinese=0x02ca;t.section=0x00a7;t.seenarabic=0x0633;t.seenfinalarabic=0xfeb2;t.seeninitialarabic=0xfeb3;t.seenmedialarabic=0xfeb4;t.segol=0x05b6;t.segol13=0x05b6;t.segol1f=0x05b6;t.segol2c=0x05b6;t.segolhebrew=0x05b6;t.segolnarrowhebrew=0x05b6;t.segolquarterhebrew=0x05b6;t.segoltahebrew=0x0592;t.segolwidehebrew=0x05b6;t.seharmenian=0x057d;t.sehiragana=0x305b;t.sekatakana=0x30bb;t.sekatakanahalfwidth=0xff7e;t.semicolon=0x003b;t.semicolonarabic=0x061b;t.semicolonmonospace=0xff1b;t.semicolonsmall=0xfe54;t.semivoicedmarkkana=0x309c;t.semivoicedmarkkanahalfwidth=0xff9f;t.sentisquare=0x3322;t.sentosquare=0x3323;t.seven=0x0037;t.sevenarabic=0x0667;t.sevenbengali=0x09ed;t.sevencircle=0x2466;t.sevencircleinversesansserif=0x2790;t.sevendeva=0x096d;t.seveneighths=0x215e;t.sevengujarati=0x0aed;t.sevengurmukhi=0x0a6d;t.sevenhackarabic=0x0667;t.sevenhangzhou=0x3027;t.sevenideographicparen=0x3226;t.seveninferior=0x2087;t.sevenmonospace=0xff17;t.sevenoldstyle=0xf737;t.sevenparen=0x247a;t.sevenperiod=0x248e;t.sevenpersian=0x06f7;t.sevenroman=0x2176;t.sevensuperior=0x2077;t.seventeencircle=0x2470;t.seventeenparen=0x2484;t.seventeenperiod=0x2498;t.seventhai=0x0e57;t.sfthyphen=0x00ad;t.shaarmenian=0x0577;t.shabengali=0x09b6;t.shacyrillic=0x0448;t.shaddaarabic=0x0651;t.shaddadammaarabic=0xfc61;t.shaddadammatanarabic=0xfc5e;t.shaddafathaarabic=0xfc60;t.shaddakasraarabic=0xfc62;t.shaddakasratanarabic=0xfc5f;t.shade=0x2592;t.shadedark=0x2593;t.shadelight=0x2591;t.shademedium=0x2592;t.shadeva=0x0936;t.shagujarati=0x0ab6;t.shagurmukhi=0x0a36;t.shalshelethebrew=0x0593;t.shbopomofo=0x3115;t.shchacyrillic=0x0449;t.sheenarabic=0x0634;t.sheenfinalarabic=0xfeb6;t.sheeninitialarabic=0xfeb7;t.sheenmedialarabic=0xfeb8;t.sheicoptic=0x03e3;t.sheqel=0x20aa;t.sheqelhebrew=0x20aa;t.sheva=0x05b0;t.sheva115=0x05b0;t.sheva15=0x05b0;t.sheva22=0x05b0;t.sheva2e=0x05b0;t.shevahebrew=0x05b0;t.shevanarrowhebrew=0x05b0;t.shevaquarterhebrew=0x05b0;t.shevawidehebrew=0x05b0;t.shhacyrillic=0x04bb;t.shimacoptic=0x03ed;t.shin=0x05e9;t.shindagesh=0xfb49;t.shindageshhebrew=0xfb49;t.shindageshshindot=0xfb2c;t.shindageshshindothebrew=0xfb2c;t.shindageshsindot=0xfb2d;t.shindageshsindothebrew=0xfb2d;t.shindothebrew=0x05c1;t.shinhebrew=0x05e9;t.shinshindot=0xfb2a;t.shinshindothebrew=0xfb2a;t.shinsindot=0xfb2b;t.shinsindothebrew=0xfb2b;t.shook=0x0282;t.sigma=0x03c3;t.sigma1=0x03c2;t.sigmafinal=0x03c2;t.sigmalunatesymbolgreek=0x03f2;t.sihiragana=0x3057;t.sikatakana=0x30b7;t.sikatakanahalfwidth=0xff7c;t.siluqhebrew=0x05bd;t.siluqlefthebrew=0x05bd;t.similar=0x223c;t.sindothebrew=0x05c2;t.siosacirclekorean=0x3274;t.siosaparenkorean=0x3214;t.sioscieuckorean=0x317e;t.sioscirclekorean=0x3266;t.sioskiyeokkorean=0x317a;t.sioskorean=0x3145;t.siosnieunkorean=0x317b;t.siosparenkorean=0x3206;t.siospieupkorean=0x317d;t.siostikeutkorean=0x317c;t.six=0x0036;t.sixarabic=0x0666;t.sixbengali=0x09ec;t.sixcircle=0x2465;t.sixcircleinversesansserif=0x278f;t.sixdeva=0x096c;t.sixgujarati=0x0aec;t.sixgurmukhi=0x0a6c;t.sixhackarabic=0x0666;t.sixhangzhou=0x3026;t.sixideographicparen=0x3225;t.sixinferior=0x2086;t.sixmonospace=0xff16;t.sixoldstyle=0xf736;t.sixparen=0x2479;t.sixperiod=0x248d;t.sixpersian=0x06f6;t.sixroman=0x2175;t.sixsuperior=0x2076;t.sixteencircle=0x246f;t.sixteencurrencydenominatorbengali=0x09f9;t.sixteenparen=0x2483;t.sixteenperiod=0x2497;t.sixthai=0x0e56;t.slash=0x002f;t.slashmonospace=0xff0f;t.slong=0x017f;t.slongdotaccent=0x1e9b;t.smileface=0x263a;t.smonospace=0xff53;t.sofpasuqhebrew=0x05c3;t.softhyphen=0x00ad;t.softsigncyrillic=0x044c;t.sohiragana=0x305d;t.sokatakana=0x30bd;t.sokatakanahalfwidth=0xff7f;t.soliduslongoverlaycmb=0x0338;t.solidusshortoverlaycmb=0x0337;t.sorusithai=0x0e29;t.sosalathai=0x0e28;t.sosothai=0x0e0b;t.sosuathai=0x0e2a;t.space=0x0020;t.spacehackarabic=0x0020;t.spade=0x2660;t.spadesuitblack=0x2660;t.spadesuitwhite=0x2664;t.sparen=0x24ae;t.squarebelowcmb=0x033b;t.squarecc=0x33c4;t.squarecm=0x339d;t.squarediagonalcrosshatchfill=0x25a9;t.squarehorizontalfill=0x25a4;t.squarekg=0x338f;t.squarekm=0x339e;t.squarekmcapital=0x33ce;t.squareln=0x33d1;t.squarelog=0x33d2;t.squaremg=0x338e;t.squaremil=0x33d5;t.squaremm=0x339c;t.squaremsquared=0x33a1;t.squareorthogonalcrosshatchfill=0x25a6;t.squareupperlefttolowerrightfill=0x25a7;t.squareupperrighttolowerleftfill=0x25a8;t.squareverticalfill=0x25a5;t.squarewhitewithsmallblack=0x25a3;t.srsquare=0x33db;t.ssabengali=0x09b7;t.ssadeva=0x0937;t.ssagujarati=0x0ab7;t.ssangcieuckorean=0x3149;t.ssanghieuhkorean=0x3185;t.ssangieungkorean=0x3180;t.ssangkiyeokkorean=0x3132;t.ssangnieunkorean=0x3165;t.ssangpieupkorean=0x3143;t.ssangsioskorean=0x3146;t.ssangtikeutkorean=0x3138;t.ssuperior=0xf6f2;t.sterling=0x00a3;t.sterlingmonospace=0xffe1;t.strokelongoverlaycmb=0x0336;t.strokeshortoverlaycmb=0x0335;t.subset=0x2282;t.subsetnotequal=0x228a;t.subsetorequal=0x2286;t.succeeds=0x227b;t.suchthat=0x220b;t.suhiragana=0x3059;t.sukatakana=0x30b9;t.sukatakanahalfwidth=0xff7d;t.sukunarabic=0x0652;t.summation=0x2211;t.sun=0x263c;t.superset=0x2283;t.supersetnotequal=0x228b;t.supersetorequal=0x2287;t.svsquare=0x33dc;t.syouwaerasquare=0x337c;t.t=0x0074;t.tabengali=0x09a4;t.tackdown=0x22a4;t.tackleft=0x22a3;t.tadeva=0x0924;t.tagujarati=0x0aa4;t.tagurmukhi=0x0a24;t.taharabic=0x0637;t.tahfinalarabic=0xfec2;t.tahinitialarabic=0xfec3;t.tahiragana=0x305f;t.tahmedialarabic=0xfec4;t.taisyouerasquare=0x337d;t.takatakana=0x30bf;t.takatakanahalfwidth=0xff80;t.tatweelarabic=0x0640;t.tau=0x03c4;t.tav=0x05ea;t.tavdages=0xfb4a;t.tavdagesh=0xfb4a;t.tavdageshhebrew=0xfb4a;t.tavhebrew=0x05ea;t.tbar=0x0167;t.tbopomofo=0x310a;t.tcaron=0x0165;t.tccurl=0x02a8;t.tcedilla=0x0163;t.tcheharabic=0x0686;t.tchehfinalarabic=0xfb7b;t.tchehinitialarabic=0xfb7c;t.tchehmedialarabic=0xfb7d;t.tcircle=0x24e3;t.tcircumflexbelow=0x1e71;t.tcommaaccent=0x0163;t.tdieresis=0x1e97;t.tdotaccent=0x1e6b;t.tdotbelow=0x1e6d;t.tecyrillic=0x0442;t.tedescendercyrillic=0x04ad;t.teharabic=0x062a;t.tehfinalarabic=0xfe96;t.tehhahinitialarabic=0xfca2;t.tehhahisolatedarabic=0xfc0c;t.tehinitialarabic=0xfe97;t.tehiragana=0x3066;t.tehjeeminitialarabic=0xfca1;t.tehjeemisolatedarabic=0xfc0b;t.tehmarbutaarabic=0x0629;t.tehmarbutafinalarabic=0xfe94;t.tehmedialarabic=0xfe98;t.tehmeeminitialarabic=0xfca4;t.tehmeemisolatedarabic=0xfc0e;t.tehnoonfinalarabic=0xfc73;t.tekatakana=0x30c6;t.tekatakanahalfwidth=0xff83;t.telephone=0x2121;t.telephoneblack=0x260e;t.telishagedolahebrew=0x05a0;t.telishaqetanahebrew=0x05a9;t.tencircle=0x2469;t.tenideographicparen=0x3229;t.tenparen=0x247d;t.tenperiod=0x2491;t.tenroman=0x2179;t.tesh=0x02a7;t.tet=0x05d8;t.tetdagesh=0xfb38;t.tetdageshhebrew=0xfb38;t.tethebrew=0x05d8;t.tetsecyrillic=0x04b5;t.tevirhebrew=0x059b;t.tevirlefthebrew=0x059b;t.thabengali=0x09a5;t.thadeva=0x0925;t.thagujarati=0x0aa5;t.thagurmukhi=0x0a25;t.thalarabic=0x0630;t.thalfinalarabic=0xfeac;t.thanthakhatlowleftthai=0xf898;t.thanthakhatlowrightthai=0xf897;t.thanthakhatthai=0x0e4c;t.thanthakhatupperleftthai=0xf896;t.theharabic=0x062b;t.thehfinalarabic=0xfe9a;t.thehinitialarabic=0xfe9b;t.thehmedialarabic=0xfe9c;t.thereexists=0x2203;t.therefore=0x2234;t.theta=0x03b8;t.theta1=0x03d1;t.thetasymbolgreek=0x03d1;t.thieuthacirclekorean=0x3279;t.thieuthaparenkorean=0x3219;t.thieuthcirclekorean=0x326b;t.thieuthkorean=0x314c;t.thieuthparenkorean=0x320b;t.thirteencircle=0x246c;t.thirteenparen=0x2480;t.thirteenperiod=0x2494;t.thonangmonthothai=0x0e11;t.thook=0x01ad;t.thophuthaothai=0x0e12;t.thorn=0x00fe;t.thothahanthai=0x0e17;t.thothanthai=0x0e10;t.thothongthai=0x0e18;t.thothungthai=0x0e16;t.thousandcyrillic=0x0482;t.thousandsseparatorarabic=0x066c;t.thousandsseparatorpersian=0x066c;t.three=0x0033;t.threearabic=0x0663;t.threebengali=0x09e9;t.threecircle=0x2462;t.threecircleinversesansserif=0x278c;t.threedeva=0x0969;t.threeeighths=0x215c;t.threegujarati=0x0ae9;t.threegurmukhi=0x0a69;t.threehackarabic=0x0663;t.threehangzhou=0x3023;t.threeideographicparen=0x3222;t.threeinferior=0x2083;t.threemonospace=0xff13;t.threenumeratorbengali=0x09f6;t.threeoldstyle=0xf733;t.threeparen=0x2476;t.threeperiod=0x248a;t.threepersian=0x06f3;t.threequarters=0x00be;t.threequartersemdash=0xf6de;t.threeroman=0x2172;t.threesuperior=0x00b3;t.threethai=0x0e53;t.thzsquare=0x3394;t.tihiragana=0x3061;t.tikatakana=0x30c1;t.tikatakanahalfwidth=0xff81;t.tikeutacirclekorean=0x3270;t.tikeutaparenkorean=0x3210;t.tikeutcirclekorean=0x3262;t.tikeutkorean=0x3137;t.tikeutparenkorean=0x3202;t.tilde=0x02dc;t.tildebelowcmb=0x0330;t.tildecmb=0x0303;t.tildecomb=0x0303;t.tildedoublecmb=0x0360;t.tildeoperator=0x223c;t.tildeoverlaycmb=0x0334;t.tildeverticalcmb=0x033e;t.timescircle=0x2297;t.tipehahebrew=0x0596;t.tipehalefthebrew=0x0596;t.tippigurmukhi=0x0a70;t.titlocyrilliccmb=0x0483;t.tiwnarmenian=0x057f;t.tlinebelow=0x1e6f;t.tmonospace=0xff54;t.toarmenian=0x0569;t.tohiragana=0x3068;t.tokatakana=0x30c8;t.tokatakanahalfwidth=0xff84;t.tonebarextrahighmod=0x02e5;t.tonebarextralowmod=0x02e9;t.tonebarhighmod=0x02e6;t.tonebarlowmod=0x02e8;t.tonebarmidmod=0x02e7;t.tonefive=0x01bd;t.tonesix=0x0185;t.tonetwo=0x01a8;t.tonos=0x0384;t.tonsquare=0x3327;t.topatakthai=0x0e0f;t.tortoiseshellbracketleft=0x3014;t.tortoiseshellbracketleftsmall=0xfe5d;t.tortoiseshellbracketleftvertical=0xfe39;t.tortoiseshellbracketright=0x3015;t.tortoiseshellbracketrightsmall=0xfe5e;t.tortoiseshellbracketrightvertical=0xfe3a;t.totaothai=0x0e15;t.tpalatalhook=0x01ab;t.tparen=0x24af;t.trademark=0x2122;t.trademarksans=0xf8ea;t.trademarkserif=0xf6db;t.tretroflexhook=0x0288;t.triagdn=0x25bc;t.triaglf=0x25c4;t.triagrt=0x25ba;t.triagup=0x25b2;t.ts=0x02a6;t.tsadi=0x05e6;t.tsadidagesh=0xfb46;t.tsadidageshhebrew=0xfb46;t.tsadihebrew=0x05e6;t.tsecyrillic=0x0446;t.tsere=0x05b5;t.tsere12=0x05b5;t.tsere1e=0x05b5;t.tsere2b=0x05b5;t.tserehebrew=0x05b5;t.tserenarrowhebrew=0x05b5;t.tserequarterhebrew=0x05b5;t.tserewidehebrew=0x05b5;t.tshecyrillic=0x045b;t.tsuperior=0xf6f3;t.ttabengali=0x099f;t.ttadeva=0x091f;t.ttagujarati=0x0a9f;t.ttagurmukhi=0x0a1f;t.tteharabic=0x0679;t.ttehfinalarabic=0xfb67;t.ttehinitialarabic=0xfb68;t.ttehmedialarabic=0xfb69;t.tthabengali=0x09a0;t.tthadeva=0x0920;t.tthagujarati=0x0aa0;t.tthagurmukhi=0x0a20;t.tturned=0x0287;t.tuhiragana=0x3064;t.tukatakana=0x30c4;t.tukatakanahalfwidth=0xff82;t.tusmallhiragana=0x3063;t.tusmallkatakana=0x30c3;t.tusmallkatakanahalfwidth=0xff6f;t.twelvecircle=0x246b;t.twelveparen=0x247f;t.twelveperiod=0x2493;t.twelveroman=0x217b;t.twentycircle=0x2473;t.twentyhangzhou=0x5344;t.twentyparen=0x2487;t.twentyperiod=0x249b;t.two=0x0032;t.twoarabic=0x0662;t.twobengali=0x09e8;t.twocircle=0x2461;t.twocircleinversesansserif=0x278b;t.twodeva=0x0968;t.twodotenleader=0x2025;t.twodotleader=0x2025;t.twodotleadervertical=0xfe30;t.twogujarati=0x0ae8;t.twogurmukhi=0x0a68;t.twohackarabic=0x0662;t.twohangzhou=0x3022;t.twoideographicparen=0x3221;t.twoinferior=0x2082;t.twomonospace=0xff12;t.twonumeratorbengali=0x09f5;t.twooldstyle=0xf732;t.twoparen=0x2475;t.twoperiod=0x2489;t.twopersian=0x06f2;t.tworoman=0x2171;t.twostroke=0x01bb;t.twosuperior=0x00b2;t.twothai=0x0e52;t.twothirds=0x2154;t.u=0x0075;t.uacute=0x00fa;t.ubar=0x0289;t.ubengali=0x0989;t.ubopomofo=0x3128;t.ubreve=0x016d;t.ucaron=0x01d4;t.ucircle=0x24e4;t.ucircumflex=0x00fb;t.ucircumflexbelow=0x1e77;t.ucyrillic=0x0443;t.udattadeva=0x0951;t.udblacute=0x0171;t.udblgrave=0x0215;t.udeva=0x0909;t.udieresis=0x00fc;t.udieresisacute=0x01d8;t.udieresisbelow=0x1e73;t.udieresiscaron=0x01da;t.udieresiscyrillic=0x04f1;t.udieresisgrave=0x01dc;t.udieresismacron=0x01d6;t.udotbelow=0x1ee5;t.ugrave=0x00f9;t.ugujarati=0x0a89;t.ugurmukhi=0x0a09;t.uhiragana=0x3046;t.uhookabove=0x1ee7;t.uhorn=0x01b0;t.uhornacute=0x1ee9;t.uhorndotbelow=0x1ef1;t.uhorngrave=0x1eeb;t.uhornhookabove=0x1eed;t.uhorntilde=0x1eef;t.uhungarumlaut=0x0171;t.uhungarumlautcyrillic=0x04f3;t.uinvertedbreve=0x0217;t.ukatakana=0x30a6;t.ukatakanahalfwidth=0xff73;t.ukcyrillic=0x0479;t.ukorean=0x315c;t.umacron=0x016b;t.umacroncyrillic=0x04ef;t.umacrondieresis=0x1e7b;t.umatragurmukhi=0x0a41;t.umonospace=0xff55;t.underscore=0x005f;t.underscoredbl=0x2017;t.underscoremonospace=0xff3f;t.underscorevertical=0xfe33;t.underscorewavy=0xfe4f;t.union=0x222a;t.universal=0x2200;t.uogonek=0x0173;t.uparen=0x24b0;t.upblock=0x2580;t.upperdothebrew=0x05c4;t.upsilon=0x03c5;t.upsilondieresis=0x03cb;t.upsilondieresistonos=0x03b0;t.upsilonlatin=0x028a;t.upsilontonos=0x03cd;t.uptackbelowcmb=0x031d;t.uptackmod=0x02d4;t.uragurmukhi=0x0a73;t.uring=0x016f;t.ushortcyrillic=0x045e;t.usmallhiragana=0x3045;t.usmallkatakana=0x30a5;t.usmallkatakanahalfwidth=0xff69;t.ustraightcyrillic=0x04af;t.ustraightstrokecyrillic=0x04b1;t.utilde=0x0169;t.utildeacute=0x1e79;t.utildebelow=0x1e75;t.uubengali=0x098a;t.uudeva=0x090a;t.uugujarati=0x0a8a;t.uugurmukhi=0x0a0a;t.uumatragurmukhi=0x0a42;t.uuvowelsignbengali=0x09c2;t.uuvowelsigndeva=0x0942;t.uuvowelsigngujarati=0x0ac2;t.uvowelsignbengali=0x09c1;t.uvowelsigndeva=0x0941;t.uvowelsigngujarati=0x0ac1;t.v=0x0076;t.vadeva=0x0935;t.vagujarati=0x0ab5;t.vagurmukhi=0x0a35;t.vakatakana=0x30f7;t.vav=0x05d5;t.vavdagesh=0xfb35;t.vavdagesh65=0xfb35;t.vavdageshhebrew=0xfb35;t.vavhebrew=0x05d5;t.vavholam=0xfb4b;t.vavholamhebrew=0xfb4b;t.vavvavhebrew=0x05f0;t.vavyodhebrew=0x05f1;t.vcircle=0x24e5;t.vdotbelow=0x1e7f;t.vecyrillic=0x0432;t.veharabic=0x06a4;t.vehfinalarabic=0xfb6b;t.vehinitialarabic=0xfb6c;t.vehmedialarabic=0xfb6d;t.vekatakana=0x30f9;t.venus=0x2640;t.verticalbar=0x007c;t.verticallineabovecmb=0x030d;t.verticallinebelowcmb=0x0329;t.verticallinelowmod=0x02cc;t.verticallinemod=0x02c8;t.vewarmenian=0x057e;t.vhook=0x028b;t.vikatakana=0x30f8;t.viramabengali=0x09cd;t.viramadeva=0x094d;t.viramagujarati=0x0acd;t.visargabengali=0x0983;t.visargadeva=0x0903;t.visargagujarati=0x0a83;t.vmonospace=0xff56;t.voarmenian=0x0578;t.voicediterationhiragana=0x309e;t.voicediterationkatakana=0x30fe;t.voicedmarkkana=0x309b;t.voicedmarkkanahalfwidth=0xff9e;t.vokatakana=0x30fa;t.vparen=0x24b1;t.vtilde=0x1e7d;t.vturned=0x028c;t.vuhiragana=0x3094;t.vukatakana=0x30f4;t.w=0x0077;t.wacute=0x1e83;t.waekorean=0x3159;t.wahiragana=0x308f;t.wakatakana=0x30ef;t.wakatakanahalfwidth=0xff9c;t.wakorean=0x3158;t.wasmallhiragana=0x308e;t.wasmallkatakana=0x30ee;t.wattosquare=0x3357;t.wavedash=0x301c;t.wavyunderscorevertical=0xfe34;t.wawarabic=0x0648;t.wawfinalarabic=0xfeee;t.wawhamzaabovearabic=0x0624;t.wawhamzaabovefinalarabic=0xfe86;t.wbsquare=0x33dd;t.wcircle=0x24e6;t.wcircumflex=0x0175;t.wdieresis=0x1e85;t.wdotaccent=0x1e87;t.wdotbelow=0x1e89;t.wehiragana=0x3091;t.weierstrass=0x2118;t.wekatakana=0x30f1;t.wekorean=0x315e;t.weokorean=0x315d;t.wgrave=0x1e81;t.whitebullet=0x25e6;t.whitecircle=0x25cb;t.whitecircleinverse=0x25d9;t.whitecornerbracketleft=0x300e;t.whitecornerbracketleftvertical=0xfe43;t.whitecornerbracketright=0x300f;t.whitecornerbracketrightvertical=0xfe44;t.whitediamond=0x25c7;t.whitediamondcontainingblacksmalldiamond=0x25c8;t.whitedownpointingsmalltriangle=0x25bf;t.whitedownpointingtriangle=0x25bd;t.whiteleftpointingsmalltriangle=0x25c3;t.whiteleftpointingtriangle=0x25c1;t.whitelenticularbracketleft=0x3016;t.whitelenticularbracketright=0x3017;t.whiterightpointingsmalltriangle=0x25b9;t.whiterightpointingtriangle=0x25b7;t.whitesmallsquare=0x25ab;t.whitesmilingface=0x263a;t.whitesquare=0x25a1;t.whitestar=0x2606;t.whitetelephone=0x260f;t.whitetortoiseshellbracketleft=0x3018;t.whitetortoiseshellbracketright=0x3019;t.whiteuppointingsmalltriangle=0x25b5;t.whiteuppointingtriangle=0x25b3;t.wihiragana=0x3090;t.wikatakana=0x30f0;t.wikorean=0x315f;t.wmonospace=0xff57;t.wohiragana=0x3092;t.wokatakana=0x30f2;t.wokatakanahalfwidth=0xff66;t.won=0x20a9;t.wonmonospace=0xffe6;t.wowaenthai=0x0e27;t.wparen=0x24b2;t.wring=0x1e98;t.wsuperior=0x02b7;t.wturned=0x028d;t.wynn=0x01bf;t.x=0x0078;t.xabovecmb=0x033d;t.xbopomofo=0x3112;t.xcircle=0x24e7;t.xdieresis=0x1e8d;t.xdotaccent=0x1e8b;t.xeharmenian=0x056d;t.xi=0x03be;t.xmonospace=0xff58;t.xparen=0x24b3;t.xsuperior=0x02e3;t.y=0x0079;t.yaadosquare=0x334e;t.yabengali=0x09af;t.yacute=0x00fd;t.yadeva=0x092f;t.yaekorean=0x3152;t.yagujarati=0x0aaf;t.yagurmukhi=0x0a2f;t.yahiragana=0x3084;t.yakatakana=0x30e4;t.yakatakanahalfwidth=0xff94;t.yakorean=0x3151;t.yamakkanthai=0x0e4e;t.yasmallhiragana=0x3083;t.yasmallkatakana=0x30e3;t.yasmallkatakanahalfwidth=0xff6c;t.yatcyrillic=0x0463;t.ycircle=0x24e8;t.ycircumflex=0x0177;t.ydieresis=0x00ff;t.ydotaccent=0x1e8f;t.ydotbelow=0x1ef5;t.yeharabic=0x064a;t.yehbarreearabic=0x06d2;t.yehbarreefinalarabic=0xfbaf;t.yehfinalarabic=0xfef2;t.yehhamzaabovearabic=0x0626;t.yehhamzaabovefinalarabic=0xfe8a;t.yehhamzaaboveinitialarabic=0xfe8b;t.yehhamzaabovemedialarabic=0xfe8c;t.yehinitialarabic=0xfef3;t.yehmedialarabic=0xfef4;t.yehmeeminitialarabic=0xfcdd;t.yehmeemisolatedarabic=0xfc58;t.yehnoonfinalarabic=0xfc94;t.yehthreedotsbelowarabic=0x06d1;t.yekorean=0x3156;t.yen=0x00a5;t.yenmonospace=0xffe5;t.yeokorean=0x3155;t.yeorinhieuhkorean=0x3186;t.yerahbenyomohebrew=0x05aa;t.yerahbenyomolefthebrew=0x05aa;t.yericyrillic=0x044b;t.yerudieresiscyrillic=0x04f9;t.yesieungkorean=0x3181;t.yesieungpansioskorean=0x3183;t.yesieungsioskorean=0x3182;t.yetivhebrew=0x059a;t.ygrave=0x1ef3;t.yhook=0x01b4;t.yhookabove=0x1ef7;t.yiarmenian=0x0575;t.yicyrillic=0x0457;t.yikorean=0x3162;t.yinyang=0x262f;t.yiwnarmenian=0x0582;t.ymonospace=0xff59;t.yod=0x05d9;t.yoddagesh=0xfb39;t.yoddageshhebrew=0xfb39;t.yodhebrew=0x05d9;t.yodyodhebrew=0x05f2;t.yodyodpatahhebrew=0xfb1f;t.yohiragana=0x3088;t.yoikorean=0x3189;t.yokatakana=0x30e8;t.yokatakanahalfwidth=0xff96;t.yokorean=0x315b;t.yosmallhiragana=0x3087;t.yosmallkatakana=0x30e7;t.yosmallkatakanahalfwidth=0xff6e;t.yotgreek=0x03f3;t.yoyaekorean=0x3188;t.yoyakorean=0x3187;t.yoyakthai=0x0e22;t.yoyingthai=0x0e0d;t.yparen=0x24b4;t.ypogegrammeni=0x037a;t.ypogegrammenigreekcmb=0x0345;t.yr=0x01a6;t.yring=0x1e99;t.ysuperior=0x02b8;t.ytilde=0x1ef9;t.yturned=0x028e;t.yuhiragana=0x3086;t.yuikorean=0x318c;t.yukatakana=0x30e6;t.yukatakanahalfwidth=0xff95;t.yukorean=0x3160;t.yusbigcyrillic=0x046b;t.yusbigiotifiedcyrillic=0x046d;t.yuslittlecyrillic=0x0467;t.yuslittleiotifiedcyrillic=0x0469;t.yusmallhiragana=0x3085;t.yusmallkatakana=0x30e5;t.yusmallkatakanahalfwidth=0xff6d;t.yuyekorean=0x318b;t.yuyeokorean=0x318a;t.yyabengali=0x09df;t.yyadeva=0x095f;t.z=0x007a;t.zaarmenian=0x0566;t.zacute=0x017a;t.zadeva=0x095b;t.zagurmukhi=0x0a5b;t.zaharabic=0x0638;t.zahfinalarabic=0xfec6;t.zahinitialarabic=0xfec7;t.zahiragana=0x3056;t.zahmedialarabic=0xfec8;t.zainarabic=0x0632;t.zainfinalarabic=0xfeb0;t.zakatakana=0x30b6;t.zaqefgadolhebrew=0x0595;t.zaqefqatanhebrew=0x0594;t.zarqahebrew=0x0598;t.zayin=0x05d6;t.zayindagesh=0xfb36;t.zayindageshhebrew=0xfb36;t.zayinhebrew=0x05d6;t.zbopomofo=0x3117;t.zcaron=0x017e;t.zcircle=0x24e9;t.zcircumflex=0x1e91;t.zcurl=0x0291;t.zdot=0x017c;t.zdotaccent=0x017c;t.zdotbelow=0x1e93;t.zecyrillic=0x0437;t.zedescendercyrillic=0x0499;t.zedieresiscyrillic=0x04df;t.zehiragana=0x305c;t.zekatakana=0x30bc;t.zero=0x0030;t.zeroarabic=0x0660;t.zerobengali=0x09e6;t.zerodeva=0x0966;t.zerogujarati=0x0ae6;t.zerogurmukhi=0x0a66;t.zerohackarabic=0x0660;t.zeroinferior=0x2080;t.zeromonospace=0xff10;t.zerooldstyle=0xf730;t.zeropersian=0x06f0;t.zerosuperior=0x2070;t.zerothai=0x0e50;t.zerowidthjoiner=0xfeff;t.zerowidthnonjoiner=0x200c;t.zerowidthspace=0x200b;t.zeta=0x03b6;t.zhbopomofo=0x3113;t.zhearmenian=0x056a;t.zhebrevecyrillic=0x04c2;t.zhecyrillic=0x0436;t.zhedescendercyrillic=0x0497;t.zhedieresiscyrillic=0x04dd;t.zihiragana=0x3058;t.zikatakana=0x30b8;t.zinorhebrew=0x05ae;t.zlinebelow=0x1e95;t.zmonospace=0xff5a;t.zohiragana=0x305e;t.zokatakana=0x30be;t.zparen=0x24b5;t.zretroflexhook=0x0290;t.zstroke=0x01b6;t.zuhiragana=0x305a;t.zukatakana=0x30ba;t[".notdef"]=0x0000;t.angbracketleftbig=0x2329;t.angbracketleftBig=0x2329;t.angbracketleftbigg=0x2329;t.angbracketleftBigg=0x2329;t.angbracketrightBig=0x232a;t.angbracketrightbig=0x232a;t.angbracketrightBigg=0x232a;t.angbracketrightbigg=0x232a;t.arrowhookleft=0x21aa;t.arrowhookright=0x21a9;t.arrowlefttophalf=0x21bc;t.arrowleftbothalf=0x21bd;t.arrownortheast=0x2197;t.arrownorthwest=0x2196;t.arrowrighttophalf=0x21c0;t.arrowrightbothalf=0x21c1;t.arrowsoutheast=0x2198;t.arrowsouthwest=0x2199;t.backslashbig=0x2216;t.backslashBig=0x2216;t.backslashBigg=0x2216;t.backslashbigg=0x2216;t.bardbl=0x2016;t.bracehtipdownleft=0xfe37;t.bracehtipdownright=0xfe37;t.bracehtipupleft=0xfe38;t.bracehtipupright=0xfe38;t.braceleftBig=0x007b;t.braceleftbig=0x007b;t.braceleftbigg=0x007b;t.braceleftBigg=0x007b;t.bracerightBig=0x007d;t.bracerightbig=0x007d;t.bracerightbigg=0x007d;t.bracerightBigg=0x007d;t.bracketleftbig=0x005b;t.bracketleftBig=0x005b;t.bracketleftbigg=0x005b;t.bracketleftBigg=0x005b;t.bracketrightBig=0x005d;t.bracketrightbig=0x005d;t.bracketrightbigg=0x005d;t.bracketrightBigg=0x005d;t.ceilingleftbig=0x2308;t.ceilingleftBig=0x2308;t.ceilingleftBigg=0x2308;t.ceilingleftbigg=0x2308;t.ceilingrightbig=0x2309;t.ceilingrightBig=0x2309;t.ceilingrightbigg=0x2309;t.ceilingrightBigg=0x2309;t.circledotdisplay=0x2299;t.circledottext=0x2299;t.circlemultiplydisplay=0x2297;t.circlemultiplytext=0x2297;t.circleplusdisplay=0x2295;t.circleplustext=0x2295;t.contintegraldisplay=0x222e;t.contintegraltext=0x222e;t.coproductdisplay=0x2210;t.coproducttext=0x2210;t.floorleftBig=0x230a;t.floorleftbig=0x230a;t.floorleftbigg=0x230a;t.floorleftBigg=0x230a;t.floorrightbig=0x230b;t.floorrightBig=0x230b;t.floorrightBigg=0x230b;t.floorrightbigg=0x230b;t.hatwide=0x0302;t.hatwider=0x0302;t.hatwidest=0x0302;t.intercal=0x1d40;t.integraldisplay=0x222b;t.integraltext=0x222b;t.intersectiondisplay=0x22c2;t.intersectiontext=0x22c2;t.logicalanddisplay=0x2227;t.logicalandtext=0x2227;t.logicalordisplay=0x2228;t.logicalortext=0x2228;t.parenleftBig=0x0028;t.parenleftbig=0x0028;t.parenleftBigg=0x0028;t.parenleftbigg=0x0028;t.parenrightBig=0x0029;t.parenrightbig=0x0029;t.parenrightBigg=0x0029;t.parenrightbigg=0x0029;t.prime=0x2032;t.productdisplay=0x220f;t.producttext=0x220f;t.radicalbig=0x221a;t.radicalBig=0x221a;t.radicalBigg=0x221a;t.radicalbigg=0x221a;t.radicalbt=0x221a;t.radicaltp=0x221a;t.radicalvertex=0x221a;t.slashbig=0x002f;t.slashBig=0x002f;t.slashBigg=0x002f;t.slashbigg=0x002f;t.summationdisplay=0x2211;t.summationtext=0x2211;t.tildewide=0x02dc;t.tildewider=0x02dc;t.tildewidest=0x02dc;t.uniondisplay=0x22c3;t.unionmultidisplay=0x228e;t.unionmultitext=0x228e;t.unionsqdisplay=0x2294;t.unionsqtext=0x2294;t.uniontext=0x22c3;t.vextenddouble=0x2225;t.vextendsingle=0x2223;});var getDingbatsGlyphsUnicode=getLookupTableFactory(function(t){t.space=0x0020;t.a1=0x2701;t.a2=0x2702;t.a202=0x2703;t.a3=0x2704;t.a4=0x260e;t.a5=0x2706;t.a119=0x2707;t.a118=0x2708;t.a117=0x2709;t.a11=0x261b;t.a12=0x261e;t.a13=0x270c;t.a14=0x270d;t.a15=0x270e;t.a16=0x270f;t.a105=0x2710;t.a17=0x2711;t.a18=0x2712;t.a19=0x2713;t.a20=0x2714;t.a21=0x2715;t.a22=0x2716;t.a23=0x2717;t.a24=0x2718;t.a25=0x2719;t.a26=0x271a;t.a27=0x271b;t.a28=0x271c;t.a6=0x271d;t.a7=0x271e;t.a8=0x271f;t.a9=0x2720;t.a10=0x2721;t.a29=0x2722;t.a30=0x2723;t.a31=0x2724;t.a32=0x2725;t.a33=0x2726;t.a34=0x2727;t.a35=0x2605;t.a36=0x2729;t.a37=0x272a;t.a38=0x272b;t.a39=0x272c;t.a40=0x272d;t.a41=0x272e;t.a42=0x272f;t.a43=0x2730;t.a44=0x2731;t.a45=0x2732;t.a46=0x2733;t.a47=0x2734;t.a48=0x2735;t.a49=0x2736;t.a50=0x2737;t.a51=0x2738;t.a52=0x2739;t.a53=0x273a;t.a54=0x273b;t.a55=0x273c;t.a56=0x273d;t.a57=0x273e;t.a58=0x273f;t.a59=0x2740;t.a60=0x2741;t.a61=0x2742;t.a62=0x2743;t.a63=0x2744;t.a64=0x2745;t.a65=0x2746;t.a66=0x2747;t.a67=0x2748;t.a68=0x2749;t.a69=0x274a;t.a70=0x274b;t.a71=0x25cf;t.a72=0x274d;t.a73=0x25a0;t.a74=0x274f;t.a203=0x2750;t.a75=0x2751;t.a204=0x2752;t.a76=0x25b2;t.a77=0x25bc;t.a78=0x25c6;t.a79=0x2756;t.a81=0x25d7;t.a82=0x2758;t.a83=0x2759;t.a84=0x275a;t.a97=0x275b;t.a98=0x275c;t.a99=0x275d;t.a100=0x275e;t.a101=0x2761;t.a102=0x2762;t.a103=0x2763;t.a104=0x2764;t.a106=0x2765;t.a107=0x2766;t.a108=0x2767;t.a112=0x2663;t.a111=0x2666;t.a110=0x2665;t.a109=0x2660;t.a120=0x2460;t.a121=0x2461;t.a122=0x2462;t.a123=0x2463;t.a124=0x2464;t.a125=0x2465;t.a126=0x2466;t.a127=0x2467;t.a128=0x2468;t.a129=0x2469;t.a130=0x2776;t.a131=0x2777;t.a132=0x2778;t.a133=0x2779;t.a134=0x277a;t.a135=0x277b;t.a136=0x277c;t.a137=0x277d;t.a138=0x277e;t.a139=0x277f;t.a140=0x2780;t.a141=0x2781;t.a142=0x2782;t.a143=0x2783;t.a144=0x2784;t.a145=0x2785;t.a146=0x2786;t.a147=0x2787;t.a148=0x2788;t.a149=0x2789;t.a150=0x278a;t.a151=0x278b;t.a152=0x278c;t.a153=0x278d;t.a154=0x278e;t.a155=0x278f;t.a156=0x2790;t.a157=0x2791;t.a158=0x2792;t.a159=0x2793;t.a160=0x2794;t.a161=0x2192;t.a163=0x2194;t.a164=0x2195;t.a196=0x2798;t.a165=0x2799;t.a192=0x279a;t.a166=0x279b;t.a167=0x279c;t.a168=0x279d;t.a169=0x279e;t.a170=0x279f;t.a171=0x27a0;t.a172=0x27a1;t.a173=0x27a2;t.a162=0x27a3;t.a174=0x27a4;t.a175=0x27a5;t.a176=0x27a6;t.a177=0x27a7;t.a178=0x27a8;t.a179=0x27a9;t.a193=0x27aa;t.a180=0x27ab;t.a199=0x27ac;t.a181=0x27ad;t.a200=0x27ae;t.a182=0x27af;t.a201=0x27b1;t.a183=0x27b2;t.a184=0x27b3;t.a197=0x27b4;t.a185=0x27b5;t.a194=0x27b6;t.a198=0x27b7;t.a186=0x27b8;t.a195=0x27b9;t.a187=0x27ba;t.a188=0x27bb;t.a189=0x27bc;t.a190=0x27bd;t.a191=0x27be;t.a89=0x2768;t.a90=0x2769;t.a93=0x276a;t.a94=0x276b;t.a91=0x276c;t.a92=0x276d;t.a205=0x276e;t.a85=0x276f;t.a206=0x2770;t.a86=0x2771;t.a87=0x2772;t.a88=0x2773;t.a95=0x2774;t.a96=0x2775;t[".notdef"]=0x0000;});;// ./src/core/unicode.js\nvar getSpecialPUASymbols=getLookupTableFactory(function(t){t[63721]=0x00a9;t[63193]=0x00a9;t[63720]=0x00ae;t[63194]=0x00ae;t[63722]=0x2122;t[63195]=0x2122;t[63729]=0x23a7;t[63730]=0x23a8;t[63731]=0x23a9;t[63740]=0x23ab;t[63741]=0x23ac;t[63742]=0x23ad;t[63726]=0x23a1;t[63727]=0x23a2;t[63728]=0x23a3;t[63737]=0x23a4;t[63738]=0x23a5;t[63739]=0x23a6;t[63723]=0x239b;t[63724]=0x239c;t[63725]=0x239d;t[63734]=0x239e;t[63735]=0x239f;t[63736]=0x23a0;});function mapSpecialUnicodeValues(code){if(code>=0xfff0&&code<=0xffff){return 0;}else if(code>=0xf600&&code<=0xf8ff){return getSpecialPUASymbols()[code]||code;}else if(code===0x00ad){return 0x002d;}return code;}function getUnicodeForGlyph(name,glyphsUnicodeMap){var unicode=glyphsUnicodeMap[name];if(unicode!==undefined){return unicode;}if(!name){return-1;}if(name[0]==="u"){var nameLen=name.length;var hexStr;if(nameLen===7&&name[1]==="n"&&name[2]==="i"){hexStr=name.substring(3);}else if(nameLen>=5&&nameLen<=7){hexStr=name.substring(1);}else{return-1;}if(hexStr===hexStr.toUpperCase()){unicode=parseInt(hexStr,16);if(unicode>=0){return unicode;}}}return-1;}var UnicodeRanges=[[0x0000,0x007f],[0x0080,0x00ff],[0x0100,0x017f],[0x0180,0x024f],[0x0250,0x02af,0x1d00,0x1d7f,0x1d80,0x1dbf],[0x02b0,0x02ff,0xa700,0xa71f],[0x0300,0x036f,0x1dc0,0x1dff],[0x0370,0x03ff],[0x2c80,0x2cff],[0x0400,0x04ff,0x0500,0x052f,0x2de0,0x2dff,0xa640,0xa69f],[0x0530,0x058f],[0x0590,0x05ff],[0xa500,0xa63f],[0x0600,0x06ff,0x0750,0x077f],[0x07c0,0x07ff],[0x0900,0x097f],[0x0980,0x09ff],[0x0a00,0x0a7f],[0x0a80,0x0aff],[0x0b00,0x0b7f],[0x0b80,0x0bff],[0x0c00,0x0c7f],[0x0c80,0x0cff],[0x0d00,0x0d7f],[0x0e00,0x0e7f],[0x0e80,0x0eff],[0x10a0,0x10ff,0x2d00,0x2d2f],[0x1b00,0x1b7f],[0x1100,0x11ff],[0x1e00,0x1eff,0x2c60,0x2c7f,0xa720,0xa7ff],[0x1f00,0x1fff],[0x2000,0x206f,0x2e00,0x2e7f],[0x2070,0x209f],[0x20a0,0x20cf],[0x20d0,0x20ff],[0x2100,0x214f],[0x2150,0x218f],[0x2190,0x21ff,0x27f0,0x27ff,0x2900,0x297f,0x2b00,0x2bff],[0x2200,0x22ff,0x2a00,0x2aff,0x27c0,0x27ef,0x2980,0x29ff],[0x2300,0x23ff],[0x2400,0x243f],[0x2440,0x245f],[0x2460,0x24ff],[0x2500,0x257f],[0x2580,0x259f],[0x25a0,0x25ff],[0x2600,0x26ff],[0x2700,0x27bf],[0x3000,0x303f],[0x3040,0x309f],[0x30a0,0x30ff,0x31f0,0x31ff],[0x3100,0x312f,0x31a0,0x31bf],[0x3130,0x318f],[0xa840,0xa87f],[0x3200,0x32ff],[0x3300,0x33ff],[0xac00,0xd7af],[0xd800,0xdfff],[0x10900,0x1091f],[0x4e00,0x9fff,0x2e80,0x2eff,0x2f00,0x2fdf,0x2ff0,0x2fff,0x3400,0x4dbf,0x20000,0x2a6df,0x3190,0x319f],[0xe000,0xf8ff],[0x31c0,0x31ef,0xf900,0xfaff,0x2f800,0x2fa1f],[0xfb00,0xfb4f],[0xfb50,0xfdff],[0xfe20,0xfe2f],[0xfe10,0xfe1f],[0xfe50,0xfe6f],[0xfe70,0xfeff],[0xff00,0xffef],[0xfff0,0xffff],[0x0f00,0x0fff],[0x0700,0x074f],[0x0780,0x07bf],[0x0d80,0x0dff],[0x1000,0x109f],[0x1200,0x137f,0x1380,0x139f,0x2d80,0x2ddf],[0x13a0,0x13ff],[0x1400,0x167f],[0x1680,0x169f],[0x16a0,0x16ff],[0x1780,0x17ff],[0x1800,0x18af],[0x2800,0x28ff],[0xa000,0xa48f],[0x1700,0x171f,0x1720,0x173f,0x1740,0x175f,0x1760,0x177f],[0x10300,0x1032f],[0x10330,0x1034f],[0x10400,0x1044f],[0x1d000,0x1d0ff,0x1d100,0x1d1ff,0x1d200,0x1d24f],[0x1d400,0x1d7ff],[0xff000,0xffffd],[0xfe00,0xfe0f,0xe0100,0xe01ef],[0xe0000,0xe007f],[0x1900,0x194f],[0x1950,0x197f],[0x1980,0x19df],[0x1a00,0x1a1f],[0x2c00,0x2c5f],[0x2d30,0x2d7f],[0x4dc0,0x4dff],[0xa800,0xa82f],[0x10000,0x1007f,0x10080,0x100ff,0x10100,0x1013f],[0x10140,0x1018f],[0x10380,0x1039f],[0x103a0,0x103df],[0x10450,0x1047f],[0x10480,0x104af],[0x10800,0x1083f],[0x10a00,0x10a5f],[0x1d300,0x1d35f],[0x12000,0x123ff,0x12400,0x1247f],[0x1d360,0x1d37f],[0x1b80,0x1bbf],[0x1c00,0x1c4f],[0x1c50,0x1c7f],[0xa880,0xa8df],[0xa900,0xa92f],[0xa930,0xa95f],[0xaa00,0xaa5f],[0x10190,0x101cf],[0x101d0,0x101ff],[0x102a0,0x102df,0x10280,0x1029f,0x10920,0x1093f],[0x1f030,0x1f09f,0x1f000,0x1f02f]];function getUnicodeRangeFor(value){var lastPosition=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;if(lastPosition!==-1){var range=UnicodeRanges[lastPosition];for(var i=0,ii=range.length;i<ii;i+=2){if(value>=range[i]&&value<=range[i+1]){return lastPosition;}}}for(var _i25=0,_ii5=UnicodeRanges.length;_i25<_ii5;_i25++){var _range=UnicodeRanges[_i25];for(var j=0,jj=_range.length;j<jj;j+=2){if(value>=_range[j]&&value<=_range[j+1]){return _i25;}}}return-1;}var SpecialCharRegExp=new RegExp("^(\\\\s)|(\\\\p{Mn})|(\\\\p{Cf})$","u");var CategoryCache=new Map();function getCharUnicodeCategory(_char8){var cachedCategory=CategoryCache.get(_char8);if(cachedCategory){return cachedCategory;}var groups=_char8.match(SpecialCharRegExp);var category={isWhitespace:!!(groups!==null&&groups!==void 0&&groups[1]),isZeroWidthDiacritic:!!(groups!==null&&groups!==void 0&&groups[2]),isInvisibleFormatMark:!!(groups!==null&&groups!==void 0&&groups[3])};CategoryCache.set(_char8,category);return category;}function clearUnicodeCaches(){CategoryCache.clear();};// ./src/core/fonts_utils.js\nvar SEAC_ANALYSIS_ENABLED=true;var FontFlags={FixedPitch:1,Serif:2,Symbolic:4,Script:8,Nonsymbolic:32,Italic:64,AllCap:65536,SmallCap:131072,ForceBold:262144};var MacStandardGlyphOrdering=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function recoverGlyphName(name,glyphsUnicodeMap){if(glyphsUnicodeMap[name]!==undefined){return name;}var unicode=getUnicodeForGlyph(name,glyphsUnicodeMap);if(unicode!==-1){for(var key in glyphsUnicodeMap){if(glyphsUnicodeMap[key]===unicode){return key;}}}info("Unable to recover a standard glyph name for: "+name);return name;}function type1FontGlyphMapping(properties,builtInEncoding,glyphNames){var charCodeToGlyphId=Object.create(null);var glyphId,charCode,baseEncoding;var isSymbolicFont=!!(properties.flags&FontFlags.Symbolic);if(properties.isInternalFont){baseEncoding=builtInEncoding;for(charCode=0;charCode<baseEncoding.length;charCode++){glyphId=glyphNames.indexOf(baseEncoding[charCode]);charCodeToGlyphId[charCode]=glyphId>=0?glyphId:0;}}else if(properties.baseEncodingName){baseEncoding=getEncoding(properties.baseEncodingName);for(charCode=0;charCode<baseEncoding.length;charCode++){glyphId=glyphNames.indexOf(baseEncoding[charCode]);charCodeToGlyphId[charCode]=glyphId>=0?glyphId:0;}}else if(isSymbolicFont){for(charCode in builtInEncoding){charCodeToGlyphId[charCode]=builtInEncoding[charCode];}}else{baseEncoding=StandardEncoding;for(charCode=0;charCode<baseEncoding.length;charCode++){glyphId=glyphNames.indexOf(baseEncoding[charCode]);charCodeToGlyphId[charCode]=glyphId>=0?glyphId:0;}}var differences=properties.differences;var glyphsUnicodeMap;if(differences){for(charCode in differences){var glyphName=differences[charCode];glyphId=glyphNames.indexOf(glyphName);if(glyphId===-1){if(!glyphsUnicodeMap){glyphsUnicodeMap=getGlyphsUnicode();}var standardGlyphName=recoverGlyphName(glyphName,glyphsUnicodeMap);if(standardGlyphName!==glyphName){glyphId=glyphNames.indexOf(standardGlyphName);}}charCodeToGlyphId[charCode]=glyphId>=0?glyphId:0;}}return charCodeToGlyphId;}function normalizeFontName(name){return name.replaceAll(/[,_]/g,"-").replaceAll(/\\s/g,"");}var getVerticalPresentationForm=getLookupTableFactory(function(t){t[0x2013]=0xfe32;t[0x2014]=0xfe31;t[0x2025]=0xfe30;t[0x2026]=0xfe19;t[0x3001]=0xfe11;t[0x3002]=0xfe12;t[0x3008]=0xfe3f;t[0x3009]=0xfe40;t[0x300a]=0xfe3d;t[0x300b]=0xfe3e;t[0x300c]=0xfe41;t[0x300d]=0xfe42;t[0x300e]=0xfe43;t[0x300f]=0xfe44;t[0x3010]=0xfe3b;t[0x3011]=0xfe3c;t[0x3014]=0xfe39;t[0x3015]=0xfe3a;t[0x3016]=0xfe17;t[0x3017]=0xfe18;t[0xfe4f]=0xfe34;t[0xff01]=0xfe15;t[0xff08]=0xfe35;t[0xff09]=0xfe36;t[0xff0c]=0xfe10;t[0xff1a]=0xfe13;t[0xff1b]=0xfe14;t[0xff1f]=0xfe16;t[0xff3b]=0xfe47;t[0xff3d]=0xfe48;t[0xff3f]=0xfe33;t[0xff5b]=0xfe37;t[0xff5d]=0xfe38;});;// ./src/core/standard_fonts.js\nvar getStdFontMap=getLookupTableFactory(function(t){t["Times-Roman"]="Times-Roman";t.Helvetica="Helvetica";t.Courier="Courier";t.Symbol="Symbol";t["Times-Bold"]="Times-Bold";t["Helvetica-Bold"]="Helvetica-Bold";t["Courier-Bold"]="Courier-Bold";t.ZapfDingbats="ZapfDingbats";t["Times-Italic"]="Times-Italic";t["Helvetica-Oblique"]="Helvetica-Oblique";t["Courier-Oblique"]="Courier-Oblique";t["Times-BoldItalic"]="Times-BoldItalic";t["Helvetica-BoldOblique"]="Helvetica-BoldOblique";t["Courier-BoldOblique"]="Courier-BoldOblique";t.ArialNarrow="Helvetica";t["ArialNarrow-Bold"]="Helvetica-Bold";t["ArialNarrow-BoldItalic"]="Helvetica-BoldOblique";t["ArialNarrow-Italic"]="Helvetica-Oblique";t.ArialBlack="Helvetica";t["ArialBlack-Bold"]="Helvetica-Bold";t["ArialBlack-BoldItalic"]="Helvetica-BoldOblique";t["ArialBlack-Italic"]="Helvetica-Oblique";t["Arial-Black"]="Helvetica";t["Arial-Black-Bold"]="Helvetica-Bold";t["Arial-Black-BoldItalic"]="Helvetica-BoldOblique";t["Arial-Black-Italic"]="Helvetica-Oblique";t.Arial="Helvetica";t["Arial-Bold"]="Helvetica-Bold";t["Arial-BoldItalic"]="Helvetica-BoldOblique";t["Arial-Italic"]="Helvetica-Oblique";t.ArialMT="Helvetica";t["Arial-BoldItalicMT"]="Helvetica-BoldOblique";t["Arial-BoldMT"]="Helvetica-Bold";t["Arial-ItalicMT"]="Helvetica-Oblique";t["Arial-BoldItalicMT-BoldItalic"]="Helvetica-BoldOblique";t["Arial-BoldMT-Bold"]="Helvetica-Bold";t["Arial-ItalicMT-Italic"]="Helvetica-Oblique";t.ArialUnicodeMS="Helvetica";t["ArialUnicodeMS-Bold"]="Helvetica-Bold";t["ArialUnicodeMS-BoldItalic"]="Helvetica-BoldOblique";t["ArialUnicodeMS-Italic"]="Helvetica-Oblique";t["Courier-BoldItalic"]="Courier-BoldOblique";t["Courier-Italic"]="Courier-Oblique";t.CourierNew="Courier";t["CourierNew-Bold"]="Courier-Bold";t["CourierNew-BoldItalic"]="Courier-BoldOblique";t["CourierNew-Italic"]="Courier-Oblique";t["CourierNewPS-BoldItalicMT"]="Courier-BoldOblique";t["CourierNewPS-BoldMT"]="Courier-Bold";t["CourierNewPS-ItalicMT"]="Courier-Oblique";t.CourierNewPSMT="Courier";t["Helvetica-BoldItalic"]="Helvetica-BoldOblique";t["Helvetica-Italic"]="Helvetica-Oblique";t["HelveticaLTStd-Bold"]="Helvetica-Bold";t["Symbol-Bold"]="Symbol";t["Symbol-BoldItalic"]="Symbol";t["Symbol-Italic"]="Symbol";t.TimesNewRoman="Times-Roman";t["TimesNewRoman-Bold"]="Times-Bold";t["TimesNewRoman-BoldItalic"]="Times-BoldItalic";t["TimesNewRoman-Italic"]="Times-Italic";t.TimesNewRomanPS="Times-Roman";t["TimesNewRomanPS-Bold"]="Times-Bold";t["TimesNewRomanPS-BoldItalic"]="Times-BoldItalic";t["TimesNewRomanPS-BoldItalicMT"]="Times-BoldItalic";t["TimesNewRomanPS-BoldMT"]="Times-Bold";t["TimesNewRomanPS-Italic"]="Times-Italic";t["TimesNewRomanPS-ItalicMT"]="Times-Italic";t.TimesNewRomanPSMT="Times-Roman";t["TimesNewRomanPSMT-Bold"]="Times-Bold";t["TimesNewRomanPSMT-BoldItalic"]="Times-BoldItalic";t["TimesNewRomanPSMT-Italic"]="Times-Italic";});var getFontNameToFileMap=getLookupTableFactory(function(t){t.Courier="FoxitFixed.pfb";t["Courier-Bold"]="FoxitFixedBold.pfb";t["Courier-BoldOblique"]="FoxitFixedBoldItalic.pfb";t["Courier-Oblique"]="FoxitFixedItalic.pfb";t.Helvetica="LiberationSans-Regular.ttf";t["Helvetica-Bold"]="LiberationSans-Bold.ttf";t["Helvetica-BoldOblique"]="LiberationSans-BoldItalic.ttf";t["Helvetica-Oblique"]="LiberationSans-Italic.ttf";t["Times-Roman"]="FoxitSerif.pfb";t["Times-Bold"]="FoxitSerifBold.pfb";t["Times-BoldItalic"]="FoxitSerifBoldItalic.pfb";t["Times-Italic"]="FoxitSerifItalic.pfb";t.Symbol="FoxitSymbol.pfb";t.ZapfDingbats="FoxitDingbats.pfb";t["LiberationSans-Regular"]="LiberationSans-Regular.ttf";t["LiberationSans-Bold"]="LiberationSans-Bold.ttf";t["LiberationSans-Italic"]="LiberationSans-Italic.ttf";t["LiberationSans-BoldItalic"]="LiberationSans-BoldItalic.ttf";});var getNonStdFontMap=getLookupTableFactory(function(t){t.Calibri="Helvetica";t["Calibri-Bold"]="Helvetica-Bold";t["Calibri-BoldItalic"]="Helvetica-BoldOblique";t["Calibri-Italic"]="Helvetica-Oblique";t.CenturyGothic="Helvetica";t["CenturyGothic-Bold"]="Helvetica-Bold";t["CenturyGothic-BoldItalic"]="Helvetica-BoldOblique";t["CenturyGothic-Italic"]="Helvetica-Oblique";t.ComicSansMS="Comic Sans MS";t["ComicSansMS-Bold"]="Comic Sans MS-Bold";t["ComicSansMS-BoldItalic"]="Comic Sans MS-BoldItalic";t["ComicSansMS-Italic"]="Comic Sans MS-Italic";t.GillSansMT="Helvetica";t["GillSansMT-Bold"]="Helvetica-Bold";t["GillSansMT-BoldItalic"]="Helvetica-BoldOblique";t["GillSansMT-Italic"]="Helvetica-Oblique";t.Impact="Helvetica";t["ItcSymbol-Bold"]="Helvetica-Bold";t["ItcSymbol-BoldItalic"]="Helvetica-BoldOblique";t["ItcSymbol-Book"]="Helvetica";t["ItcSymbol-BookItalic"]="Helvetica-Oblique";t["ItcSymbol-Medium"]="Helvetica";t["ItcSymbol-MediumItalic"]="Helvetica-Oblique";t.LucidaConsole="Courier";t["LucidaConsole-Bold"]="Courier-Bold";t["LucidaConsole-BoldItalic"]="Courier-BoldOblique";t["LucidaConsole-Italic"]="Courier-Oblique";t["LucidaSans-Demi"]="Helvetica-Bold";t["MS-Gothic"]="MS Gothic";t["MS-Gothic-Bold"]="MS Gothic-Bold";t["MS-Gothic-BoldItalic"]="MS Gothic-BoldItalic";t["MS-Gothic-Italic"]="MS Gothic-Italic";t["MS-Mincho"]="MS Mincho";t["MS-Mincho-Bold"]="MS Mincho-Bold";t["MS-Mincho-BoldItalic"]="MS Mincho-BoldItalic";t["MS-Mincho-Italic"]="MS Mincho-Italic";t["MS-PGothic"]="MS PGothic";t["MS-PGothic-Bold"]="MS PGothic-Bold";t["MS-PGothic-BoldItalic"]="MS PGothic-BoldItalic";t["MS-PGothic-Italic"]="MS PGothic-Italic";t["MS-PMincho"]="MS PMincho";t["MS-PMincho-Bold"]="MS PMincho-Bold";t["MS-PMincho-BoldItalic"]="MS PMincho-BoldItalic";t["MS-PMincho-Italic"]="MS PMincho-Italic";t.NuptialScript="Times-Italic";t.SegoeUISymbol="Helvetica";});var getSerifFonts=getLookupTableFactory(function(t){t["Adobe Jenson"]=true;t["Adobe Text"]=true;t.Albertus=true;t.Aldus=true;t.Alexandria=true;t.Algerian=true;t["American Typewriter"]=true;t.Antiqua=true;t.Apex=true;t.Arno=true;t.Aster=true;t.Aurora=true;t.Baskerville=true;t.Bell=true;t.Bembo=true;t["Bembo Schoolbook"]=true;t.Benguiat=true;t["Berkeley Old Style"]=true;t["Bernhard Modern"]=true;t["Berthold City"]=true;t.Bodoni=true;t["Bauer Bodoni"]=true;t["Book Antiqua"]=true;t.Bookman=true;t["Bordeaux Roman"]=true;t["Californian FB"]=true;t.Calisto=true;t.Calvert=true;t.Capitals=true;t.Cambria=true;t.Cartier=true;t.Caslon=true;t.Catull=true;t.Centaur=true;t["Century Old Style"]=true;t["Century Schoolbook"]=true;t.Chaparral=true;t["Charis SIL"]=true;t.Cheltenham=true;t["Cholla Slab"]=true;t.Clarendon=true;t.Clearface=true;t.Cochin=true;t.Colonna=true;t["Computer Modern"]=true;t["Concrete Roman"]=true;t.Constantia=true;t["Cooper Black"]=true;t.Corona=true;t.Ecotype=true;t.Egyptienne=true;t.Elephant=true;t.Excelsior=true;t.Fairfield=true;t["FF Scala"]=true;t.Folkard=true;t.Footlight=true;t.FreeSerif=true;t["Friz Quadrata"]=true;t.Garamond=true;t.Gentium=true;t.Georgia=true;t.Gloucester=true;t["Goudy Old Style"]=true;t["Goudy Schoolbook"]=true;t["Goudy Pro Font"]=true;t.Granjon=true;t["Guardian Egyptian"]=true;t.Heather=true;t.Hercules=true;t["High Tower Text"]=true;t.Hiroshige=true;t["Hoefler Text"]=true;t["Humana Serif"]=true;t.Imprint=true;t["Ionic No. 5"]=true;t.Janson=true;t.Joanna=true;t.Korinna=true;t.Lexicon=true;t.LiberationSerif=true;t["Liberation Serif"]=true;t["Linux Libertine"]=true;t.Literaturnaya=true;t.Lucida=true;t["Lucida Bright"]=true;t.Melior=true;t.Memphis=true;t.Miller=true;t.Minion=true;t.Modern=true;t["Mona Lisa"]=true;t["Mrs Eaves"]=true;t["MS Serif"]=true;t["Museo Slab"]=true;t["New York"]=true;t["Nimbus Roman"]=true;t["NPS Rawlinson Roadway"]=true;t.NuptialScript=true;t.Palatino=true;t.Perpetua=true;t.Plantin=true;t["Plantin Schoolbook"]=true;t.Playbill=true;t["Poor Richard"]=true;t["Rawlinson Roadway"]=true;t.Renault=true;t.Requiem=true;t.Rockwell=true;t.Roman=true;t["Rotis Serif"]=true;t.Sabon=true;t.Scala=true;t.Seagull=true;t.Sistina=true;t.Souvenir=true;t.STIX=true;t["Stone Informal"]=true;t["Stone Serif"]=true;t.Sylfaen=true;t.Times=true;t.Trajan=true;t["Trinité"]=true;t["Trump Mediaeval"]=true;t.Utopia=true;t["Vale Type"]=true;t["Bitstream Vera"]=true;t["Vera Serif"]=true;t.Versailles=true;t.Wanted=true;t.Weiss=true;t["Wide Latin"]=true;t.Windsor=true;t.XITS=true;});var getSymbolsFonts=getLookupTableFactory(function(t){t.Dingbats=true;t.Symbol=true;t.ZapfDingbats=true;t.Wingdings=true;t["Wingdings-Bold"]=true;t["Wingdings-Regular"]=true;});var getGlyphMapForStandardFonts=getLookupTableFactory(function(t){t[2]=10;t[3]=32;t[4]=33;t[5]=34;t[6]=35;t[7]=36;t[8]=37;t[9]=38;t[10]=39;t[11]=40;t[12]=41;t[13]=42;t[14]=43;t[15]=44;t[16]=45;t[17]=46;t[18]=47;t[19]=48;t[20]=49;t[21]=50;t[22]=51;t[23]=52;t[24]=53;t[25]=54;t[26]=55;t[27]=56;t[28]=57;t[29]=58;t[30]=894;t[31]=60;t[32]=61;t[33]=62;t[34]=63;t[35]=64;t[36]=65;t[37]=66;t[38]=67;t[39]=68;t[40]=69;t[41]=70;t[42]=71;t[43]=72;t[44]=73;t[45]=74;t[46]=75;t[47]=76;t[48]=77;t[49]=78;t[50]=79;t[51]=80;t[52]=81;t[53]=82;t[54]=83;t[55]=84;t[56]=85;t[57]=86;t[58]=87;t[59]=88;t[60]=89;t[61]=90;t[62]=91;t[63]=92;t[64]=93;t[65]=94;t[66]=95;t[67]=96;t[68]=97;t[69]=98;t[70]=99;t[71]=100;t[72]=101;t[73]=102;t[74]=103;t[75]=104;t[76]=105;t[77]=106;t[78]=107;t[79]=108;t[80]=109;t[81]=110;t[82]=111;t[83]=112;t[84]=113;t[85]=114;t[86]=115;t[87]=116;t[88]=117;t[89]=118;t[90]=119;t[91]=120;t[92]=121;t[93]=122;t[94]=123;t[95]=124;t[96]=125;t[97]=126;t[98]=196;t[99]=197;t[100]=199;t[101]=201;t[102]=209;t[103]=214;t[104]=220;t[105]=225;t[106]=224;t[107]=226;t[108]=228;t[109]=227;t[110]=229;t[111]=231;t[112]=233;t[113]=232;t[114]=234;t[115]=235;t[116]=237;t[117]=236;t[118]=238;t[119]=239;t[120]=241;t[121]=243;t[122]=242;t[123]=244;t[124]=246;t[125]=245;t[126]=250;t[127]=249;t[128]=251;t[129]=252;t[130]=8224;t[131]=176;t[132]=162;t[133]=163;t[134]=167;t[135]=8226;t[136]=182;t[137]=223;t[138]=174;t[139]=169;t[140]=8482;t[141]=180;t[142]=168;t[143]=8800;t[144]=198;t[145]=216;t[146]=8734;t[147]=177;t[148]=8804;t[149]=8805;t[150]=165;t[151]=181;t[152]=8706;t[153]=8721;t[154]=8719;t[156]=8747;t[157]=170;t[158]=186;t[159]=8486;t[160]=230;t[161]=248;t[162]=191;t[163]=161;t[164]=172;t[165]=8730;t[166]=402;t[167]=8776;t[168]=8710;t[169]=171;t[170]=187;t[171]=8230;t[179]=8220;t[180]=8221;t[181]=8216;t[182]=8217;t[200]=193;t[203]=205;t[207]=211;t[210]=218;t[223]=711;t[224]=321;t[225]=322;t[226]=352;t[227]=353;t[228]=381;t[229]=382;t[233]=221;t[234]=253;t[252]=263;t[253]=268;t[254]=269;t[258]=258;t[260]=260;t[261]=261;t[265]=280;t[266]=281;t[267]=282;t[268]=283;t[269]=313;t[275]=323;t[276]=324;t[278]=328;t[283]=344;t[284]=345;t[285]=346;t[286]=347;t[292]=367;t[295]=377;t[296]=378;t[298]=380;t[305]=963;t[306]=964;t[307]=966;t[308]=8215;t[309]=8252;t[310]=8319;t[311]=8359;t[312]=8592;t[313]=8593;t[337]=9552;t[493]=1039;t[494]=1040;t[672]=1488;t[673]=1489;t[674]=1490;t[675]=1491;t[676]=1492;t[677]=1493;t[678]=1494;t[679]=1495;t[680]=1496;t[681]=1497;t[682]=1498;t[683]=1499;t[684]=1500;t[685]=1501;t[686]=1502;t[687]=1503;t[688]=1504;t[689]=1505;t[690]=1506;t[691]=1507;t[692]=1508;t[693]=1509;t[694]=1510;t[695]=1511;t[696]=1512;t[697]=1513;t[698]=1514;t[705]=1524;t[706]=8362;t[710]=64288;t[711]=64298;t[759]=1617;t[761]=1776;t[763]=1778;t[775]=1652;t[777]=1764;t[778]=1780;t[779]=1781;t[780]=1782;t[782]=771;t[783]=64726;t[786]=8363;t[788]=8532;t[790]=768;t[791]=769;t[792]=768;t[795]=803;t[797]=64336;t[798]=64337;t[799]=64342;t[800]=64343;t[801]=64344;t[802]=64345;t[803]=64362;t[804]=64363;t[805]=64364;t[2424]=7821;t[2425]=7822;t[2426]=7823;t[2427]=7824;t[2428]=7825;t[2429]=7826;t[2430]=7827;t[2433]=7682;t[2678]=8045;t[2679]=8046;t[2830]=1552;t[2838]=686;t[2840]=751;t[2842]=753;t[2843]=754;t[2844]=755;t[2846]=757;t[2856]=767;t[2857]=848;t[2858]=849;t[2862]=853;t[2863]=854;t[2864]=855;t[2865]=861;t[2866]=862;t[2906]=7460;t[2908]=7462;t[2909]=7463;t[2910]=7464;t[2912]=7466;t[2913]=7467;t[2914]=7468;t[2916]=7470;t[2917]=7471;t[2918]=7472;t[2920]=7474;t[2921]=7475;t[2922]=7476;t[2924]=7478;t[2925]=7479;t[2926]=7480;t[2928]=7482;t[2929]=7483;t[2930]=7484;t[2932]=7486;t[2933]=7487;t[2934]=7488;t[2936]=7490;t[2937]=7491;t[2938]=7492;t[2940]=7494;t[2941]=7495;t[2942]=7496;t[2944]=7498;t[2946]=7500;t[2948]=7502;t[2950]=7504;t[2951]=7505;t[2952]=7506;t[2954]=7508;t[2955]=7509;t[2956]=7510;t[2958]=7512;t[2959]=7513;t[2960]=7514;t[2962]=7516;t[2963]=7517;t[2964]=7518;t[2966]=7520;t[2967]=7521;t[2968]=7522;t[2970]=7524;t[2971]=7525;t[2972]=7526;t[2974]=7528;t[2975]=7529;t[2976]=7530;t[2978]=1537;t[2979]=1538;t[2980]=1539;t[2982]=1549;t[2983]=1551;t[2984]=1552;t[2986]=1554;t[2987]=1555;t[2988]=1556;t[2990]=1623;t[2991]=1624;t[2995]=1775;t[2999]=1791;t[3002]=64290;t[3003]=64291;t[3004]=64292;t[3006]=64294;t[3007]=64295;t[3008]=64296;t[3011]=1900;t[3014]=8223;t[3015]=8244;t[3017]=7532;t[3018]=7533;t[3019]=7534;t[3075]=7590;t[3076]=7591;t[3079]=7594;t[3080]=7595;t[3083]=7598;t[3084]=7599;t[3087]=7602;t[3088]=7603;t[3091]=7606;t[3092]=7607;t[3095]=7610;t[3096]=7611;t[3099]=7614;t[3100]=7615;t[3103]=7618;t[3104]=7619;t[3107]=8337;t[3108]=8338;t[3116]=1884;t[3119]=1885;t[3120]=1885;t[3123]=1886;t[3124]=1886;t[3127]=1887;t[3128]=1887;t[3131]=1888;t[3132]=1888;t[3135]=1889;t[3136]=1889;t[3139]=1890;t[3140]=1890;t[3143]=1891;t[3144]=1891;t[3147]=1892;t[3148]=1892;t[3153]=580;t[3154]=581;t[3157]=584;t[3158]=585;t[3161]=588;t[3162]=589;t[3165]=891;t[3166]=892;t[3169]=1274;t[3170]=1275;t[3173]=1278;t[3174]=1279;t[3181]=7622;t[3182]=7623;t[3282]=11799;t[3316]=578;t[3379]=42785;t[3393]=1159;t[3416]=8377;});var getSupplementalGlyphMapForArialBlack=getLookupTableFactory(function(t){t[227]=322;t[264]=261;t[291]=346;});var getSupplementalGlyphMapForCalibri=getLookupTableFactory(function(t){t[1]=32;t[4]=65;t[5]=192;t[6]=193;t[9]=196;t[17]=66;t[18]=67;t[21]=268;t[24]=68;t[28]=69;t[29]=200;t[30]=201;t[32]=282;t[38]=70;t[39]=71;t[44]=72;t[47]=73;t[48]=204;t[49]=205;t[58]=74;t[60]=75;t[62]=76;t[68]=77;t[69]=78;t[75]=79;t[76]=210;t[80]=214;t[87]=80;t[89]=81;t[90]=82;t[92]=344;t[94]=83;t[97]=352;t[100]=84;t[104]=85;t[109]=220;t[115]=86;t[116]=87;t[121]=88;t[122]=89;t[124]=221;t[127]=90;t[129]=381;t[258]=97;t[259]=224;t[260]=225;t[263]=228;t[268]=261;t[271]=98;t[272]=99;t[273]=263;t[275]=269;t[282]=100;t[286]=101;t[287]=232;t[288]=233;t[290]=283;t[295]=281;t[296]=102;t[336]=103;t[346]=104;t[349]=105;t[350]=236;t[351]=237;t[361]=106;t[364]=107;t[367]=108;t[371]=322;t[373]=109;t[374]=110;t[381]=111;t[382]=242;t[383]=243;t[386]=246;t[393]=112;t[395]=113;t[396]=114;t[398]=345;t[400]=115;t[401]=347;t[403]=353;t[410]=116;t[437]=117;t[442]=252;t[448]=118;t[449]=119;t[454]=120;t[455]=121;t[457]=253;t[460]=122;t[462]=382;t[463]=380;t[853]=44;t[855]=58;t[856]=46;t[876]=47;t[878]=45;t[882]=45;t[894]=40;t[895]=41;t[896]=91;t[897]=93;t[923]=64;t[1004]=48;t[1005]=49;t[1006]=50;t[1007]=51;t[1008]=52;t[1009]=53;t[1010]=54;t[1011]=55;t[1012]=56;t[1013]=57;t[1081]=37;t[1085]=43;t[1086]=45;});function getStandardFontName(name){var fontName=normalizeFontName(name);var stdFontMap=getStdFontMap();return stdFontMap[fontName];}function isKnownFontName(name){var fontName=normalizeFontName(name);return!!(getStdFontMap()[fontName]||getNonStdFontMap()[fontName]||getSerifFonts()[fontName]||getSymbolsFonts()[fontName]);};// ./src/core/to_unicode_map.js\nvar ToUnicodeMap=/*#__PURE__*/function(){function ToUnicodeMap(){var cmap=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];_classCallCheck(this,ToUnicodeMap);this._map=cmap;}return _createClass(ToUnicodeMap,[{key:"length",get:function get(){return this._map.length;}},{key:"forEach",value:function forEach(callback){for(var charCode in this._map){callback(charCode,this._map[charCode].codePointAt(0));}}},{key:"has",value:function has(i){return this._map[i]!==undefined;}},{key:"get",value:function get(i){return this._map[i];}},{key:"charCodeOf",value:function charCodeOf(value){var map=this._map;if(map.length<=0x10000){return map.indexOf(value);}for(var charCode in map){if(map[charCode]===value){return charCode|0;}}return-1;}},{key:"amend",value:function amend(map){for(var charCode in map){this._map[charCode]=map[charCode];}}}]);}();var IdentityToUnicodeMap=/*#__PURE__*/function(){function IdentityToUnicodeMap(firstChar,lastChar){_classCallCheck(this,IdentityToUnicodeMap);this.firstChar=firstChar;this.lastChar=lastChar;}return _createClass(IdentityToUnicodeMap,[{key:"length",get:function get(){return this.lastChar+1-this.firstChar;}},{key:"forEach",value:function forEach(callback){for(var i=this.firstChar,ii=this.lastChar;i<=ii;i++){callback(i,i);}}},{key:"has",value:function has(i){return this.firstChar<=i&&i<=this.lastChar;}},{key:"get",value:function get(i){if(this.firstChar<=i&&i<=this.lastChar){return String.fromCharCode(i);}return undefined;}},{key:"charCodeOf",value:function charCodeOf(v){return Number.isInteger(v)&&v>=this.firstChar&&v<=this.lastChar?v:-1;}},{key:"amend",value:function amend(map){unreachable("Should not call amend()");}}]);}();;// ./src/core/cff_font.js\nvar CFFFont=/*#__PURE__*/function(){function CFFFont(file,properties){_classCallCheck(this,CFFFont);this.properties=properties;var parser=new CFFParser(file,properties,SEAC_ANALYSIS_ENABLED);this.cff=parser.parse();this.cff.duplicateFirstGlyph();var compiler=new CFFCompiler(this.cff);this.seacs=this.cff.seacs;try{this.data=compiler.compile();}catch(_unused6){warn("Failed to compile font "+properties.loadedName);this.data=file;}this._createBuiltInEncoding();}return _createClass(CFFFont,[{key:"numGlyphs",get:function get(){return this.cff.charStrings.count;}},{key:"getCharset",value:function getCharset(){return this.cff.charset.charset;}},{key:"getGlyphMapping",value:function getGlyphMapping(){var cff=this.cff;var properties=this.properties;var cidToGidMap=properties.cidToGidMap,cMap=properties.cMap;var charsets=cff.charset.charset;var charCodeToGlyphId;var glyphId;if(properties.composite){var invCidToGidMap;if((cidToGidMap===null||cidToGidMap===void 0?void 0:cidToGidMap.length)>0){invCidToGidMap=Object.create(null);for(var i=0,ii=cidToGidMap.length;i<ii;i++){var gid=cidToGidMap[i];if(gid!==undefined){invCidToGidMap[gid]=i;}}}charCodeToGlyphId=Object.create(null);var charCode;if(cff.isCIDFont){for(glyphId=0;glyphId<charsets.length;glyphId++){var _invCidToGidMap;var cid=charsets[glyphId];charCode=cMap.charCodeOf(cid);if(((_invCidToGidMap=invCidToGidMap)===null||_invCidToGidMap===void 0?void 0:_invCidToGidMap[charCode])!==undefined){charCode=invCidToGidMap[charCode];}charCodeToGlyphId[charCode]=glyphId;}}else{for(glyphId=0;glyphId<cff.charStrings.count;glyphId++){charCode=cMap.charCodeOf(glyphId);charCodeToGlyphId[charCode]=glyphId;}}return charCodeToGlyphId;}var encoding=cff.encoding?cff.encoding.encoding:null;if(properties.isInternalFont){encoding=properties.defaultEncoding;}charCodeToGlyphId=type1FontGlyphMapping(properties,encoding,charsets);return charCodeToGlyphId;}},{key:"hasGlyphId",value:function hasGlyphId(id){return this.cff.hasGlyphId(id);}},{key:"_createBuiltInEncoding",value:function _createBuiltInEncoding(){var _this$cff=this.cff,charset=_this$cff.charset,encoding=_this$cff.encoding;if(!charset||!encoding){return;}var charsets=charset.charset,encodings=encoding.encoding;var map=[];for(var charCode in encodings){var glyphId=encodings[charCode];if(glyphId>=0){var glyphName=charsets[glyphId];if(glyphName){map[charCode]=glyphName;}}}if(map.length>0){this.properties.builtInEncoding=map;}}}]);}();;// ./src/core/font_renderer.js\nfunction getFloat214(data,offset){return readInt16(data,offset)/16384;}function getSubroutineBias(subrs){var numSubrs=subrs.length;var bias=32768;if(numSubrs<1240){bias=107;}else if(numSubrs<33900){bias=1131;}return bias;}function parseCmap(data,start,end){var offset=readUint16(data,start+2)===1?readUint32(data,start+8):readUint32(data,start+16);var format=readUint16(data,start+offset);var ranges,p,i;if(format===4){readUint16(data,start+offset+2);var segCount=readUint16(data,start+offset+6)>>1;p=start+offset+14;ranges=[];for(i=0;i<segCount;i++,p+=2){ranges[i]={end:readUint16(data,p)};}p+=2;for(i=0;i<segCount;i++,p+=2){ranges[i].start=readUint16(data,p);}for(i=0;i<segCount;i++,p+=2){ranges[i].idDelta=readUint16(data,p);}for(i=0;i<segCount;i++,p+=2){var idOffset=readUint16(data,p);if(idOffset===0){continue;}ranges[i].ids=[];for(var j=0,jj=ranges[i].end-ranges[i].start+1;j<jj;j++){ranges[i].ids[j]=readUint16(data,p+idOffset);idOffset+=2;}}return ranges;}else if(format===12){var groups=readUint32(data,start+offset+12);p=start+offset+16;ranges=[];for(i=0;i<groups;i++){start=readUint32(data,p);ranges.push({start:start,end:readUint32(data,p+4),idDelta:readUint32(data,p+8)-start});p+=12;}return ranges;}throw new FormatError("unsupported cmap: ".concat(format));}function parseCff(data,start,end,seacAnalysisEnabled){var _cff$topDict$privateD,_cff$globalSubrIndex;var properties={};var parser=new CFFParser(new Stream(data,start,end-start),properties,seacAnalysisEnabled);var cff=parser.parse();return{glyphs:cff.charStrings.objects,subrs:(_cff$topDict$privateD=cff.topDict.privateDict)===null||_cff$topDict$privateD===void 0||(_cff$topDict$privateD=_cff$topDict$privateD.subrsIndex)===null||_cff$topDict$privateD===void 0?void 0:_cff$topDict$privateD.objects,gsubrs:(_cff$globalSubrIndex=cff.globalSubrIndex)===null||_cff$globalSubrIndex===void 0?void 0:_cff$globalSubrIndex.objects,isCFFCIDFont:cff.isCIDFont,fdSelect:cff.fdSelect,fdArray:cff.fdArray};}function parseGlyfTable(glyf,loca,isGlyphLocationsLong){var itemSize,itemDecode;if(isGlyphLocationsLong){itemSize=4;itemDecode=readUint32;}else{itemSize=2;itemDecode=function itemDecode(data,offset){return 2*readUint16(data,offset);};}var glyphs=[];var startOffset=itemDecode(loca,0);for(var j=itemSize;j<loca.length;j+=itemSize){var endOffset=itemDecode(loca,j);glyphs.push(glyf.subarray(startOffset,endOffset));startOffset=endOffset;}return glyphs;}function lookupCmap(ranges,unicode){var code=unicode.codePointAt(0);var gid=0,l=0,r=ranges.length-1;while(l<r){var c=l+r+1>>1;if(code<ranges[c].start){r=c-1;}else{l=c;}}if(ranges[l].start<=code&&code<=ranges[l].end){gid=ranges[l].idDelta+(ranges[l].ids?ranges[l].ids[code-ranges[l].start]:code)&0xffff;}return{charCode:code,glyphId:gid};}function compileGlyf(code,cmds,font){function moveTo(x,y){if(firstPoint){cmds.add("L",firstPoint);}firstPoint=[x,y];cmds.add("M",[x,y]);}function lineTo(x,y){cmds.add("L",[x,y]);}function quadraticCurveTo(xa,ya,x,y){cmds.add("Q",[xa,ya,x,y]);}var i=0;var numberOfContours=readInt16(code,i);var flags;var firstPoint=null;var x=0,y=0;i+=10;if(numberOfContours<0){do{flags=readUint16(code,i);var glyphIndex=readUint16(code,i+2);i+=4;var arg1=void 0,arg2=void 0;if(flags&0x01){if(flags&0x02){arg1=readInt16(code,i);arg2=readInt16(code,i+2);}else{arg1=readUint16(code,i);arg2=readUint16(code,i+2);}i+=4;}else if(flags&0x02){arg1=readInt8(code,i++);arg2=readInt8(code,i++);}else{arg1=code[i++];arg2=code[i++];}if(flags&0x02){x=arg1;y=arg2;}else{x=0;y=0;}var scaleX=1,scaleY=1,scale01=0,scale10=0;if(flags&0x08){scaleX=scaleY=getFloat214(code,i);i+=2;}else if(flags&0x40){scaleX=getFloat214(code,i);scaleY=getFloat214(code,i+2);i+=4;}else if(flags&0x80){scaleX=getFloat214(code,i);scale01=getFloat214(code,i+2);scale10=getFloat214(code,i+4);scaleY=getFloat214(code,i+6);i+=8;}var subglyph=font.glyphs[glyphIndex];if(subglyph){cmds.save();cmds.transform([scaleX,scale01,scale10,scaleY,x,y]);if(!(flags&0x02)){}compileGlyf(subglyph,cmds,font);cmds.restore();}}while(flags&0x20);}else{var endPtsOfContours=[];var j,jj;for(j=0;j<numberOfContours;j++){endPtsOfContours.push(readUint16(code,i));i+=2;}var instructionLength=readUint16(code,i);i+=2+instructionLength;var numberOfPoints=endPtsOfContours.at(-1)+1;var points=[];while(points.length<numberOfPoints){flags=code[i++];var repeat=1;if(flags&0x08){repeat+=code[i++];}while(repeat--\x3e0){points.push({flags:flags});}}for(j=0;j<numberOfPoints;j++){switch(points[j].flags&0x12){case 0x00:x+=readInt16(code,i);i+=2;break;case 0x02:x-=code[i++];break;case 0x12:x+=code[i++];break;}points[j].x=x;}for(j=0;j<numberOfPoints;j++){switch(points[j].flags&0x24){case 0x00:y+=readInt16(code,i);i+=2;break;case 0x04:y-=code[i++];break;case 0x24:y+=code[i++];break;}points[j].y=y;}var startPoint=0;for(i=0;i<numberOfContours;i++){var endPoint=endPtsOfContours[i];var contour=points.slice(startPoint,endPoint+1);if(contour[0].flags&1){contour.push(contour[0]);}else if(contour.at(-1).flags&1){contour.unshift(contour.at(-1));}else{var p={flags:1,x:(contour[0].x+contour.at(-1).x)/2,y:(contour[0].y+contour.at(-1).y)/2};contour.unshift(p);contour.push(p);}moveTo(contour[0].x,contour[0].y);for(j=1,jj=contour.length;j<jj;j++){if(contour[j].flags&1){lineTo(contour[j].x,contour[j].y);}else if(contour[j+1].flags&1){quadraticCurveTo(contour[j].x,contour[j].y,contour[j+1].x,contour[j+1].y);j++;}else{quadraticCurveTo(contour[j].x,contour[j].y,(contour[j].x+contour[j+1].x)/2,(contour[j].y+contour[j+1].y)/2);}}startPoint=endPoint+1;}}}function compileCharString(charStringCode,cmds,font,glyphId){function moveTo(x,y){if(firstPoint){cmds.add("L",firstPoint);}firstPoint=[x,y];cmds.add("M",[x,y]);}function lineTo(x,y){cmds.add("L",[x,y]);}function bezierCurveTo(x1,y1,x2,y2,x,y){cmds.add("C",[x1,y1,x2,y2,x,y]);}var stack=[];var x=0,y=0;var stems=0;var firstPoint=null;function parse(code){var i=0;while(i<code.length){var stackClean=false;var v=code[i++];var xa=void 0,xb=void 0,ya=void 0,yb=void 0,y1=void 0,y2=void 0,y3=void 0,n=void 0,subrCode=void 0;switch(v){case 1:stems+=stack.length>>1;stackClean=true;break;case 3:stems+=stack.length>>1;stackClean=true;break;case 4:y+=stack.pop();moveTo(x,y);stackClean=true;break;case 5:while(stack.length>0){x+=stack.shift();y+=stack.shift();lineTo(x,y);}break;case 6:while(stack.length>0){x+=stack.shift();lineTo(x,y);if(stack.length===0){break;}y+=stack.shift();lineTo(x,y);}break;case 7:while(stack.length>0){y+=stack.shift();lineTo(x,y);if(stack.length===0){break;}x+=stack.shift();lineTo(x,y);}break;case 8:while(stack.length>0){xa=x+stack.shift();ya=y+stack.shift();xb=xa+stack.shift();yb=ya+stack.shift();x=xb+stack.shift();y=yb+stack.shift();bezierCurveTo(xa,ya,xb,yb,x,y);}break;case 10:n=stack.pop();subrCode=null;if(font.isCFFCIDFont){var fdIndex=font.fdSelect.getFDIndex(glyphId);if(fdIndex>=0&&fdIndex<font.fdArray.length){var _fontDict$privateDict;var fontDict=font.fdArray[fdIndex];var subrs=void 0;if((_fontDict$privateDict=fontDict.privateDict)!==null&&_fontDict$privateDict!==void 0&&_fontDict$privateDict.subrsIndex){subrs=fontDict.privateDict.subrsIndex.objects;}if(subrs){n+=getSubroutineBias(subrs);subrCode=subrs[n];}}else{warn("Invalid fd index for glyph index.");}}else{subrCode=font.subrs[n+font.subrsBias];}if(subrCode){parse(subrCode);}break;case 11:return;case 12:v=code[i++];switch(v){case 34:xa=x+stack.shift();xb=xa+stack.shift();y1=y+stack.shift();x=xb+stack.shift();bezierCurveTo(xa,y,xb,y1,x,y1);xa=x+stack.shift();xb=xa+stack.shift();x=xb+stack.shift();bezierCurveTo(xa,y1,xb,y,x,y);break;case 35:xa=x+stack.shift();ya=y+stack.shift();xb=xa+stack.shift();yb=ya+stack.shift();x=xb+stack.shift();y=yb+stack.shift();bezierCurveTo(xa,ya,xb,yb,x,y);xa=x+stack.shift();ya=y+stack.shift();xb=xa+stack.shift();yb=ya+stack.shift();x=xb+stack.shift();y=yb+stack.shift();bezierCurveTo(xa,ya,xb,yb,x,y);stack.pop();break;case 36:xa=x+stack.shift();y1=y+stack.shift();xb=xa+stack.shift();y2=y1+stack.shift();x=xb+stack.shift();bezierCurveTo(xa,y1,xb,y2,x,y2);xa=x+stack.shift();xb=xa+stack.shift();y3=y2+stack.shift();x=xb+stack.shift();bezierCurveTo(xa,y2,xb,y3,x,y);break;case 37:var x0=x,y0=y;xa=x+stack.shift();ya=y+stack.shift();xb=xa+stack.shift();yb=ya+stack.shift();x=xb+stack.shift();y=yb+stack.shift();bezierCurveTo(xa,ya,xb,yb,x,y);xa=x+stack.shift();ya=y+stack.shift();xb=xa+stack.shift();yb=ya+stack.shift();x=xb;y=yb;if(Math.abs(x-x0)>Math.abs(y-y0)){x+=stack.shift();}else{y+=stack.shift();}bezierCurveTo(xa,ya,xb,yb,x,y);break;default:throw new FormatError("unknown operator: 12 ".concat(v));}break;case 14:if(stack.length>=4){var achar=stack.pop();var bchar=stack.pop();y=stack.pop();x=stack.pop();cmds.save();cmds.translate(x,y);var cmap=lookupCmap(font.cmap,String.fromCharCode(font.glyphNameMap[StandardEncoding[achar]]));compileCharString(font.glyphs[cmap.glyphId],cmds,font,cmap.glyphId);cmds.restore();cmap=lookupCmap(font.cmap,String.fromCharCode(font.glyphNameMap[StandardEncoding[bchar]]));compileCharString(font.glyphs[cmap.glyphId],cmds,font,cmap.glyphId);}return;case 18:stems+=stack.length>>1;stackClean=true;break;case 19:stems+=stack.length>>1;i+=stems+7>>3;stackClean=true;break;case 20:stems+=stack.length>>1;i+=stems+7>>3;stackClean=true;break;case 21:y+=stack.pop();x+=stack.pop();moveTo(x,y);stackClean=true;break;case 22:x+=stack.pop();moveTo(x,y);stackClean=true;break;case 23:stems+=stack.length>>1;stackClean=true;break;case 24:while(stack.length>2){xa=x+stack.shift();ya=y+stack.shift();xb=xa+stack.shift();yb=ya+stack.shift();x=xb+stack.shift();y=yb+stack.shift();bezierCurveTo(xa,ya,xb,yb,x,y);}x+=stack.shift();y+=stack.shift();lineTo(x,y);break;case 25:while(stack.length>6){x+=stack.shift();y+=stack.shift();lineTo(x,y);}xa=x+stack.shift();ya=y+stack.shift();xb=xa+stack.shift();yb=ya+stack.shift();x=xb+stack.shift();y=yb+stack.shift();bezierCurveTo(xa,ya,xb,yb,x,y);break;case 26:if(stack.length%2){x+=stack.shift();}while(stack.length>0){xa=x;ya=y+stack.shift();xb=xa+stack.shift();yb=ya+stack.shift();x=xb;y=yb+stack.shift();bezierCurveTo(xa,ya,xb,yb,x,y);}break;case 27:if(stack.length%2){y+=stack.shift();}while(stack.length>0){xa=x+stack.shift();ya=y;xb=xa+stack.shift();yb=ya+stack.shift();x=xb+stack.shift();y=yb;bezierCurveTo(xa,ya,xb,yb,x,y);}break;case 28:stack.push(readInt16(code,i));i+=2;break;case 29:n=stack.pop()+font.gsubrsBias;subrCode=font.gsubrs[n];if(subrCode){parse(subrCode);}break;case 30:while(stack.length>0){xa=x;ya=y+stack.shift();xb=xa+stack.shift();yb=ya+stack.shift();x=xb+stack.shift();y=yb+(stack.length===1?stack.shift():0);bezierCurveTo(xa,ya,xb,yb,x,y);if(stack.length===0){break;}xa=x+stack.shift();ya=y;xb=xa+stack.shift();yb=ya+stack.shift();y=yb+stack.shift();x=xb+(stack.length===1?stack.shift():0);bezierCurveTo(xa,ya,xb,yb,x,y);}break;case 31:while(stack.length>0){xa=x+stack.shift();ya=y;xb=xa+stack.shift();yb=ya+stack.shift();y=yb+stack.shift();x=xb+(stack.length===1?stack.shift():0);bezierCurveTo(xa,ya,xb,yb,x,y);if(stack.length===0){break;}xa=x;ya=y+stack.shift();xb=xa+stack.shift();yb=ya+stack.shift();x=xb+stack.shift();y=yb+(stack.length===1?stack.shift():0);bezierCurveTo(xa,ya,xb,yb,x,y);}break;default:if(v<32){throw new FormatError("unknown operator: ".concat(v));}if(v<247){stack.push(v-139);}else if(v<251){stack.push((v-247)*256+code[i++]+108);}else if(v<255){stack.push(-(v-251)*256-code[i++]-108);}else{stack.push((code[i]<<24|code[i+1]<<16|code[i+2]<<8|code[i+3])/65536);i+=4;}break;}if(stackClean){stack.length=0;}}}parse(charStringCode);}var NOOP="";var Commands=/*#__PURE__*/function(){function Commands(){_classCallCheck(this,Commands);_defineProperty(this,"cmds",[]);_defineProperty(this,"transformStack",[]);_defineProperty(this,"currentTransform",[1,0,0,1,0,0]);}return _createClass(Commands,[{key:"add",value:function add(cmd,args){if(args){var _this$currentTransfor=_slicedToArray(this.currentTransform,6),a=_this$currentTransfor[0],b=_this$currentTransfor[1],c=_this$currentTransfor[2],d=_this$currentTransfor[3],e=_this$currentTransfor[4],f=_this$currentTransfor[5];for(var i=0,ii=args.length;i<ii;i+=2){var x=args[i];var y=args[i+1];args[i]=a*x+c*y+e;args[i+1]=b*x+d*y+f;}this.cmds.push("".concat(cmd).concat(args.join(" ")));}else{this.cmds.push(cmd);}}},{key:"transform",value:function transform(transf){this.currentTransform=Util.transform(this.currentTransform,transf);}},{key:"translate",value:function translate(x,y){this.transform([1,0,0,1,x,y]);}},{key:"save",value:function save(){this.transformStack.push(this.currentTransform.slice());}},{key:"restore",value:function restore(){this.currentTransform=this.transformStack.pop()||[1,0,0,1,0,0];}},{key:"getSVG",value:function getSVG(){return this.cmds.join("");}}]);}();var CompiledFont=/*#__PURE__*/function(){function CompiledFont(fontMatrix){_classCallCheck(this,CompiledFont);this.fontMatrix=fontMatrix;this.compiledGlyphs=Object.create(null);this.compiledCharCodeToGlyphId=Object.create(null);}return _createClass(CompiledFont,[{key:"getPathJs",value:function getPathJs(unicode){var _this$compiledCharCod,_this$compiledCharCod2;var _lookupCmap=lookupCmap(this.cmap,unicode),charCode=_lookupCmap.charCode,glyphId=_lookupCmap.glyphId;var fn=this.compiledGlyphs[glyphId],compileEx;if(fn===undefined){try{fn=this.compileGlyph(this.glyphs[glyphId],glyphId);}catch(ex){fn=NOOP;compileEx=ex;}this.compiledGlyphs[glyphId]=fn;}(_this$compiledCharCod2=(_this$compiledCharCod=this.compiledCharCodeToGlyphId)[charCode])!==null&&_this$compiledCharCod2!==void 0?_this$compiledCharCod2:_this$compiledCharCod[charCode]=glyphId;if(compileEx){throw compileEx;}return fn;}},{key:"compileGlyph",value:function compileGlyph(code,glyphId){if(!(code!==null&&code!==void 0&&code.length)||code[0]===14){return NOOP;}var fontMatrix=this.fontMatrix;if(this.isCFFCIDFont){var fdIndex=this.fdSelect.getFDIndex(glyphId);if(fdIndex>=0&&fdIndex<this.fdArray.length){var fontDict=this.fdArray[fdIndex];fontMatrix=fontDict.getByName("FontMatrix")||FONT_IDENTITY_MATRIX;}else{warn("Invalid fd index for glyph index.");}}assert(isNumberArray(fontMatrix,6),"Expected a valid fontMatrix.");var cmds=new Commands();cmds.transform(fontMatrix.slice());this.compileGlyphImpl(code,cmds,glyphId);cmds.add("Z");return cmds.getSVG();}},{key:"compileGlyphImpl",value:function compileGlyphImpl(){unreachable("Children classes should implement this.");}},{key:"hasBuiltPath",value:function hasBuiltPath(unicode){var _lookupCmap2=lookupCmap(this.cmap,unicode),charCode=_lookupCmap2.charCode,glyphId=_lookupCmap2.glyphId;return this.compiledGlyphs[glyphId]!==undefined&&this.compiledCharCodeToGlyphId[charCode]!==undefined;}}]);}();var TrueTypeCompiled=/*#__PURE__*/function(_CompiledFont){function TrueTypeCompiled(glyphs,cmap,fontMatrix){var _this33;_classCallCheck(this,TrueTypeCompiled);_this33=_callSuper(this,TrueTypeCompiled,[fontMatrix||[0.000488,0,0,0.000488,0,0]]);_this33.glyphs=glyphs;_this33.cmap=cmap;return _this33;}_inherits(TrueTypeCompiled,_CompiledFont);return _createClass(TrueTypeCompiled,[{key:"compileGlyphImpl",value:function compileGlyphImpl(code,cmds){compileGlyf(code,cmds,this);}}]);}(CompiledFont);var Type2Compiled=/*#__PURE__*/function(_CompiledFont2){function Type2Compiled(cffInfo,cmap,fontMatrix){var _this34;_classCallCheck(this,Type2Compiled);_this34=_callSuper(this,Type2Compiled,[fontMatrix||[0.001,0,0,0.001,0,0]]);_this34.glyphs=cffInfo.glyphs;_this34.gsubrs=cffInfo.gsubrs||[];_this34.subrs=cffInfo.subrs||[];_this34.cmap=cmap;_this34.glyphNameMap=getGlyphsUnicode();_this34.gsubrsBias=getSubroutineBias(_this34.gsubrs);_this34.subrsBias=getSubroutineBias(_this34.subrs);_this34.isCFFCIDFont=cffInfo.isCFFCIDFont;_this34.fdSelect=cffInfo.fdSelect;_this34.fdArray=cffInfo.fdArray;return _this34;}_inherits(Type2Compiled,_CompiledFont2);return _createClass(Type2Compiled,[{key:"compileGlyphImpl",value:function compileGlyphImpl(code,cmds,glyphId){compileCharString(code,cmds,this,glyphId);}}]);}(CompiledFont);var FontRendererFactory=/*#__PURE__*/function(){function FontRendererFactory(){_classCallCheck(this,FontRendererFactory);}return _createClass(FontRendererFactory,null,[{key:"create",value:function create(font,seacAnalysisEnabled){var data=new Uint8Array(font.data);var cmap,glyf,loca,cff,indexToLocFormat,unitsPerEm;var numTables=readUint16(data,4);for(var i=0,p=12;i<numTables;i++,p+=16){var tag=bytesToString(data.subarray(p,p+4));var offset=readUint32(data,p+8);var length=readUint32(data,p+12);switch(tag){case"cmap":cmap=parseCmap(data,offset,offset+length);break;case"glyf":glyf=data.subarray(offset,offset+length);break;case"loca":loca=data.subarray(offset,offset+length);break;case"head":unitsPerEm=readUint16(data,offset+18);indexToLocFormat=readUint16(data,offset+50);break;case"CFF ":cff=parseCff(data,offset,offset+length,seacAnalysisEnabled);break;}}if(glyf){var fontMatrix=!unitsPerEm?font.fontMatrix:[1/unitsPerEm,0,0,1/unitsPerEm,0,0];return new TrueTypeCompiled(parseGlyfTable(glyf,loca,indexToLocFormat),cmap,fontMatrix);}return new Type2Compiled(cff,cmap,font.fontMatrix);}}]);}();;// ./src/core/metrics.js\nvar getMetrics=getLookupTableFactory(function(t){t.Courier=600;t["Courier-Bold"]=600;t["Courier-BoldOblique"]=600;t["Courier-Oblique"]=600;t.Helvetica=getLookupTableFactory(function(t){t.space=278;t.exclam=278;t.quotedbl=355;t.numbersign=556;t.dollar=556;t.percent=889;t.ampersand=667;t.quoteright=222;t.parenleft=333;t.parenright=333;t.asterisk=389;t.plus=584;t.comma=278;t.hyphen=333;t.period=278;t.slash=278;t.zero=556;t.one=556;t.two=556;t.three=556;t.four=556;t.five=556;t.six=556;t.seven=556;t.eight=556;t.nine=556;t.colon=278;t.semicolon=278;t.less=584;t.equal=584;t.greater=584;t.question=556;t.at=1015;t.A=667;t.B=667;t.C=722;t.D=722;t.E=667;t.F=611;t.G=778;t.H=722;t.I=278;t.J=500;t.K=667;t.L=556;t.M=833;t.N=722;t.O=778;t.P=667;t.Q=778;t.R=722;t.S=667;t.T=611;t.U=722;t.V=667;t.W=944;t.X=667;t.Y=667;t.Z=611;t.bracketleft=278;t.backslash=278;t.bracketright=278;t.asciicircum=469;t.underscore=556;t.quoteleft=222;t.a=556;t.b=556;t.c=500;t.d=556;t.e=556;t.f=278;t.g=556;t.h=556;t.i=222;t.j=222;t.k=500;t.l=222;t.m=833;t.n=556;t.o=556;t.p=556;t.q=556;t.r=333;t.s=500;t.t=278;t.u=556;t.v=500;t.w=722;t.x=500;t.y=500;t.z=500;t.braceleft=334;t.bar=260;t.braceright=334;t.asciitilde=584;t.exclamdown=333;t.cent=556;t.sterling=556;t.fraction=167;t.yen=556;t.florin=556;t.section=556;t.currency=556;t.quotesingle=191;t.quotedblleft=333;t.guillemotleft=556;t.guilsinglleft=333;t.guilsinglright=333;t.fi=500;t.fl=500;t.endash=556;t.dagger=556;t.daggerdbl=556;t.periodcentered=278;t.paragraph=537;t.bullet=350;t.quotesinglbase=222;t.quotedblbase=333;t.quotedblright=333;t.guillemotright=556;t.ellipsis=1000;t.perthousand=1000;t.questiondown=611;t.grave=333;t.acute=333;t.circumflex=333;t.tilde=333;t.macron=333;t.breve=333;t.dotaccent=333;t.dieresis=333;t.ring=333;t.cedilla=333;t.hungarumlaut=333;t.ogonek=333;t.caron=333;t.emdash=1000;t.AE=1000;t.ordfeminine=370;t.Lslash=556;t.Oslash=778;t.OE=1000;t.ordmasculine=365;t.ae=889;t.dotlessi=278;t.lslash=222;t.oslash=611;t.oe=944;t.germandbls=611;t.Idieresis=278;t.eacute=556;t.abreve=556;t.uhungarumlaut=556;t.ecaron=556;t.Ydieresis=667;t.divide=584;t.Yacute=667;t.Acircumflex=667;t.aacute=556;t.Ucircumflex=722;t.yacute=500;t.scommaaccent=500;t.ecircumflex=556;t.Uring=722;t.Udieresis=722;t.aogonek=556;t.Uacute=722;t.uogonek=556;t.Edieresis=667;t.Dcroat=722;t.commaaccent=250;t.copyright=737;t.Emacron=667;t.ccaron=500;t.aring=556;t.Ncommaaccent=722;t.lacute=222;t.agrave=556;t.Tcommaaccent=611;t.Cacute=722;t.atilde=556;t.Edotaccent=667;t.scaron=500;t.scedilla=500;t.iacute=278;t.lozenge=471;t.Rcaron=722;t.Gcommaaccent=778;t.ucircumflex=556;t.acircumflex=556;t.Amacron=667;t.rcaron=333;t.ccedilla=500;t.Zdotaccent=611;t.Thorn=667;t.Omacron=778;t.Racute=722;t.Sacute=667;t.dcaron=643;t.Umacron=722;t.uring=556;t.threesuperior=333;t.Ograve=778;t.Agrave=667;t.Abreve=667;t.multiply=584;t.uacute=556;t.Tcaron=611;t.partialdiff=476;t.ydieresis=500;t.Nacute=722;t.icircumflex=278;t.Ecircumflex=667;t.adieresis=556;t.edieresis=556;t.cacute=500;t.nacute=556;t.umacron=556;t.Ncaron=722;t.Iacute=278;t.plusminus=584;t.brokenbar=260;t.registered=737;t.Gbreve=778;t.Idotaccent=278;t.summation=600;t.Egrave=667;t.racute=333;t.omacron=556;t.Zacute=611;t.Zcaron=611;t.greaterequal=549;t.Eth=722;t.Ccedilla=722;t.lcommaaccent=222;t.tcaron=317;t.eogonek=556;t.Uogonek=722;t.Aacute=667;t.Adieresis=667;t.egrave=556;t.zacute=500;t.iogonek=222;t.Oacute=778;t.oacute=556;t.amacron=556;t.sacute=500;t.idieresis=278;t.Ocircumflex=778;t.Ugrave=722;t.Delta=612;t.thorn=556;t.twosuperior=333;t.Odieresis=778;t.mu=556;t.igrave=278;t.ohungarumlaut=556;t.Eogonek=667;t.dcroat=556;t.threequarters=834;t.Scedilla=667;t.lcaron=299;t.Kcommaaccent=667;t.Lacute=556;t.trademark=1000;t.edotaccent=556;t.Igrave=278;t.Imacron=278;t.Lcaron=556;t.onehalf=834;t.lessequal=549;t.ocircumflex=556;t.ntilde=556;t.Uhungarumlaut=722;t.Eacute=667;t.emacron=556;t.gbreve=556;t.onequarter=834;t.Scaron=667;t.Scommaaccent=667;t.Ohungarumlaut=778;t.degree=400;t.ograve=556;t.Ccaron=722;t.ugrave=556;t.radical=453;t.Dcaron=722;t.rcommaaccent=333;t.Ntilde=722;t.otilde=556;t.Rcommaaccent=722;t.Lcommaaccent=556;t.Atilde=667;t.Aogonek=667;t.Aring=667;t.Otilde=778;t.zdotaccent=500;t.Ecaron=667;t.Iogonek=278;t.kcommaaccent=500;t.minus=584;t.Icircumflex=278;t.ncaron=556;t.tcommaaccent=278;t.logicalnot=584;t.odieresis=556;t.udieresis=556;t.notequal=549;t.gcommaaccent=556;t.eth=556;t.zcaron=500;t.ncommaaccent=556;t.onesuperior=333;t.imacron=278;t.Euro=556;});t["Helvetica-Bold"]=getLookupTableFactory(function(t){t.space=278;t.exclam=333;t.quotedbl=474;t.numbersign=556;t.dollar=556;t.percent=889;t.ampersand=722;t.quoteright=278;t.parenleft=333;t.parenright=333;t.asterisk=389;t.plus=584;t.comma=278;t.hyphen=333;t.period=278;t.slash=278;t.zero=556;t.one=556;t.two=556;t.three=556;t.four=556;t.five=556;t.six=556;t.seven=556;t.eight=556;t.nine=556;t.colon=333;t.semicolon=333;t.less=584;t.equal=584;t.greater=584;t.question=611;t.at=975;t.A=722;t.B=722;t.C=722;t.D=722;t.E=667;t.F=611;t.G=778;t.H=722;t.I=278;t.J=556;t.K=722;t.L=611;t.M=833;t.N=722;t.O=778;t.P=667;t.Q=778;t.R=722;t.S=667;t.T=611;t.U=722;t.V=667;t.W=944;t.X=667;t.Y=667;t.Z=611;t.bracketleft=333;t.backslash=278;t.bracketright=333;t.asciicircum=584;t.underscore=556;t.quoteleft=278;t.a=556;t.b=611;t.c=556;t.d=611;t.e=556;t.f=333;t.g=611;t.h=611;t.i=278;t.j=278;t.k=556;t.l=278;t.m=889;t.n=611;t.o=611;t.p=611;t.q=611;t.r=389;t.s=556;t.t=333;t.u=611;t.v=556;t.w=778;t.x=556;t.y=556;t.z=500;t.braceleft=389;t.bar=280;t.braceright=389;t.asciitilde=584;t.exclamdown=333;t.cent=556;t.sterling=556;t.fraction=167;t.yen=556;t.florin=556;t.section=556;t.currency=556;t.quotesingle=238;t.quotedblleft=500;t.guillemotleft=556;t.guilsinglleft=333;t.guilsinglright=333;t.fi=611;t.fl=611;t.endash=556;t.dagger=556;t.daggerdbl=556;t.periodcentered=278;t.paragraph=556;t.bullet=350;t.quotesinglbase=278;t.quotedblbase=500;t.quotedblright=500;t.guillemotright=556;t.ellipsis=1000;t.perthousand=1000;t.questiondown=611;t.grave=333;t.acute=333;t.circumflex=333;t.tilde=333;t.macron=333;t.breve=333;t.dotaccent=333;t.dieresis=333;t.ring=333;t.cedilla=333;t.hungarumlaut=333;t.ogonek=333;t.caron=333;t.emdash=1000;t.AE=1000;t.ordfeminine=370;t.Lslash=611;t.Oslash=778;t.OE=1000;t.ordmasculine=365;t.ae=889;t.dotlessi=278;t.lslash=278;t.oslash=611;t.oe=944;t.germandbls=611;t.Idieresis=278;t.eacute=556;t.abreve=556;t.uhungarumlaut=611;t.ecaron=556;t.Ydieresis=667;t.divide=584;t.Yacute=667;t.Acircumflex=722;t.aacute=556;t.Ucircumflex=722;t.yacute=556;t.scommaaccent=556;t.ecircumflex=556;t.Uring=722;t.Udieresis=722;t.aogonek=556;t.Uacute=722;t.uogonek=611;t.Edieresis=667;t.Dcroat=722;t.commaaccent=250;t.copyright=737;t.Emacron=667;t.ccaron=556;t.aring=556;t.Ncommaaccent=722;t.lacute=278;t.agrave=556;t.Tcommaaccent=611;t.Cacute=722;t.atilde=556;t.Edotaccent=667;t.scaron=556;t.scedilla=556;t.iacute=278;t.lozenge=494;t.Rcaron=722;t.Gcommaaccent=778;t.ucircumflex=611;t.acircumflex=556;t.Amacron=722;t.rcaron=389;t.ccedilla=556;t.Zdotaccent=611;t.Thorn=667;t.Omacron=778;t.Racute=722;t.Sacute=667;t.dcaron=743;t.Umacron=722;t.uring=611;t.threesuperior=333;t.Ograve=778;t.Agrave=722;t.Abreve=722;t.multiply=584;t.uacute=611;t.Tcaron=611;t.partialdiff=494;t.ydieresis=556;t.Nacute=722;t.icircumflex=278;t.Ecircumflex=667;t.adieresis=556;t.edieresis=556;t.cacute=556;t.nacute=611;t.umacron=611;t.Ncaron=722;t.Iacute=278;t.plusminus=584;t.brokenbar=280;t.registered=737;t.Gbreve=778;t.Idotaccent=278;t.summation=600;t.Egrave=667;t.racute=389;t.omacron=611;t.Zacute=611;t.Zcaron=611;t.greaterequal=549;t.Eth=722;t.Ccedilla=722;t.lcommaaccent=278;t.tcaron=389;t.eogonek=556;t.Uogonek=722;t.Aacute=722;t.Adieresis=722;t.egrave=556;t.zacute=500;t.iogonek=278;t.Oacute=778;t.oacute=611;t.amacron=556;t.sacute=556;t.idieresis=278;t.Ocircumflex=778;t.Ugrave=722;t.Delta=612;t.thorn=611;t.twosuperior=333;t.Odieresis=778;t.mu=611;t.igrave=278;t.ohungarumlaut=611;t.Eogonek=667;t.dcroat=611;t.threequarters=834;t.Scedilla=667;t.lcaron=400;t.Kcommaaccent=722;t.Lacute=611;t.trademark=1000;t.edotaccent=556;t.Igrave=278;t.Imacron=278;t.Lcaron=611;t.onehalf=834;t.lessequal=549;t.ocircumflex=611;t.ntilde=611;t.Uhungarumlaut=722;t.Eacute=667;t.emacron=556;t.gbreve=611;t.onequarter=834;t.Scaron=667;t.Scommaaccent=667;t.Ohungarumlaut=778;t.degree=400;t.ograve=611;t.Ccaron=722;t.ugrave=611;t.radical=549;t.Dcaron=722;t.rcommaaccent=389;t.Ntilde=722;t.otilde=611;t.Rcommaaccent=722;t.Lcommaaccent=611;t.Atilde=722;t.Aogonek=722;t.Aring=722;t.Otilde=778;t.zdotaccent=500;t.Ecaron=667;t.Iogonek=278;t.kcommaaccent=556;t.minus=584;t.Icircumflex=278;t.ncaron=611;t.tcommaaccent=333;t.logicalnot=584;t.odieresis=611;t.udieresis=611;t.notequal=549;t.gcommaaccent=611;t.eth=611;t.zcaron=500;t.ncommaaccent=611;t.onesuperior=333;t.imacron=278;t.Euro=556;});t["Helvetica-BoldOblique"]=getLookupTableFactory(function(t){t.space=278;t.exclam=333;t.quotedbl=474;t.numbersign=556;t.dollar=556;t.percent=889;t.ampersand=722;t.quoteright=278;t.parenleft=333;t.parenright=333;t.asterisk=389;t.plus=584;t.comma=278;t.hyphen=333;t.period=278;t.slash=278;t.zero=556;t.one=556;t.two=556;t.three=556;t.four=556;t.five=556;t.six=556;t.seven=556;t.eight=556;t.nine=556;t.colon=333;t.semicolon=333;t.less=584;t.equal=584;t.greater=584;t.question=611;t.at=975;t.A=722;t.B=722;t.C=722;t.D=722;t.E=667;t.F=611;t.G=778;t.H=722;t.I=278;t.J=556;t.K=722;t.L=611;t.M=833;t.N=722;t.O=778;t.P=667;t.Q=778;t.R=722;t.S=667;t.T=611;t.U=722;t.V=667;t.W=944;t.X=667;t.Y=667;t.Z=611;t.bracketleft=333;t.backslash=278;t.bracketright=333;t.asciicircum=584;t.underscore=556;t.quoteleft=278;t.a=556;t.b=611;t.c=556;t.d=611;t.e=556;t.f=333;t.g=611;t.h=611;t.i=278;t.j=278;t.k=556;t.l=278;t.m=889;t.n=611;t.o=611;t.p=611;t.q=611;t.r=389;t.s=556;t.t=333;t.u=611;t.v=556;t.w=778;t.x=556;t.y=556;t.z=500;t.braceleft=389;t.bar=280;t.braceright=389;t.asciitilde=584;t.exclamdown=333;t.cent=556;t.sterling=556;t.fraction=167;t.yen=556;t.florin=556;t.section=556;t.currency=556;t.quotesingle=238;t.quotedblleft=500;t.guillemotleft=556;t.guilsinglleft=333;t.guilsinglright=333;t.fi=611;t.fl=611;t.endash=556;t.dagger=556;t.daggerdbl=556;t.periodcentered=278;t.paragraph=556;t.bullet=350;t.quotesinglbase=278;t.quotedblbase=500;t.quotedblright=500;t.guillemotright=556;t.ellipsis=1000;t.perthousand=1000;t.questiondown=611;t.grave=333;t.acute=333;t.circumflex=333;t.tilde=333;t.macron=333;t.breve=333;t.dotaccent=333;t.dieresis=333;t.ring=333;t.cedilla=333;t.hungarumlaut=333;t.ogonek=333;t.caron=333;t.emdash=1000;t.AE=1000;t.ordfeminine=370;t.Lslash=611;t.Oslash=778;t.OE=1000;t.ordmasculine=365;t.ae=889;t.dotlessi=278;t.lslash=278;t.oslash=611;t.oe=944;t.germandbls=611;t.Idieresis=278;t.eacute=556;t.abreve=556;t.uhungarumlaut=611;t.ecaron=556;t.Ydieresis=667;t.divide=584;t.Yacute=667;t.Acircumflex=722;t.aacute=556;t.Ucircumflex=722;t.yacute=556;t.scommaaccent=556;t.ecircumflex=556;t.Uring=722;t.Udieresis=722;t.aogonek=556;t.Uacute=722;t.uogonek=611;t.Edieresis=667;t.Dcroat=722;t.commaaccent=250;t.copyright=737;t.Emacron=667;t.ccaron=556;t.aring=556;t.Ncommaaccent=722;t.lacute=278;t.agrave=556;t.Tcommaaccent=611;t.Cacute=722;t.atilde=556;t.Edotaccent=667;t.scaron=556;t.scedilla=556;t.iacute=278;t.lozenge=494;t.Rcaron=722;t.Gcommaaccent=778;t.ucircumflex=611;t.acircumflex=556;t.Amacron=722;t.rcaron=389;t.ccedilla=556;t.Zdotaccent=611;t.Thorn=667;t.Omacron=778;t.Racute=722;t.Sacute=667;t.dcaron=743;t.Umacron=722;t.uring=611;t.threesuperior=333;t.Ograve=778;t.Agrave=722;t.Abreve=722;t.multiply=584;t.uacute=611;t.Tcaron=611;t.partialdiff=494;t.ydieresis=556;t.Nacute=722;t.icircumflex=278;t.Ecircumflex=667;t.adieresis=556;t.edieresis=556;t.cacute=556;t.nacute=611;t.umacron=611;t.Ncaron=722;t.Iacute=278;t.plusminus=584;t.brokenbar=280;t.registered=737;t.Gbreve=778;t.Idotaccent=278;t.summation=600;t.Egrave=667;t.racute=389;t.omacron=611;t.Zacute=611;t.Zcaron=611;t.greaterequal=549;t.Eth=722;t.Ccedilla=722;t.lcommaaccent=278;t.tcaron=389;t.eogonek=556;t.Uogonek=722;t.Aacute=722;t.Adieresis=722;t.egrave=556;t.zacute=500;t.iogonek=278;t.Oacute=778;t.oacute=611;t.amacron=556;t.sacute=556;t.idieresis=278;t.Ocircumflex=778;t.Ugrave=722;t.Delta=612;t.thorn=611;t.twosuperior=333;t.Odieresis=778;t.mu=611;t.igrave=278;t.ohungarumlaut=611;t.Eogonek=667;t.dcroat=611;t.threequarters=834;t.Scedilla=667;t.lcaron=400;t.Kcommaaccent=722;t.Lacute=611;t.trademark=1000;t.edotaccent=556;t.Igrave=278;t.Imacron=278;t.Lcaron=611;t.onehalf=834;t.lessequal=549;t.ocircumflex=611;t.ntilde=611;t.Uhungarumlaut=722;t.Eacute=667;t.emacron=556;t.gbreve=611;t.onequarter=834;t.Scaron=667;t.Scommaaccent=667;t.Ohungarumlaut=778;t.degree=400;t.ograve=611;t.Ccaron=722;t.ugrave=611;t.radical=549;t.Dcaron=722;t.rcommaaccent=389;t.Ntilde=722;t.otilde=611;t.Rcommaaccent=722;t.Lcommaaccent=611;t.Atilde=722;t.Aogonek=722;t.Aring=722;t.Otilde=778;t.zdotaccent=500;t.Ecaron=667;t.Iogonek=278;t.kcommaaccent=556;t.minus=584;t.Icircumflex=278;t.ncaron=611;t.tcommaaccent=333;t.logicalnot=584;t.odieresis=611;t.udieresis=611;t.notequal=549;t.gcommaaccent=611;t.eth=611;t.zcaron=500;t.ncommaaccent=611;t.onesuperior=333;t.imacron=278;t.Euro=556;});t["Helvetica-Oblique"]=getLookupTableFactory(function(t){t.space=278;t.exclam=278;t.quotedbl=355;t.numbersign=556;t.dollar=556;t.percent=889;t.ampersand=667;t.quoteright=222;t.parenleft=333;t.parenright=333;t.asterisk=389;t.plus=584;t.comma=278;t.hyphen=333;t.period=278;t.slash=278;t.zero=556;t.one=556;t.two=556;t.three=556;t.four=556;t.five=556;t.six=556;t.seven=556;t.eight=556;t.nine=556;t.colon=278;t.semicolon=278;t.less=584;t.equal=584;t.greater=584;t.question=556;t.at=1015;t.A=667;t.B=667;t.C=722;t.D=722;t.E=667;t.F=611;t.G=778;t.H=722;t.I=278;t.J=500;t.K=667;t.L=556;t.M=833;t.N=722;t.O=778;t.P=667;t.Q=778;t.R=722;t.S=667;t.T=611;t.U=722;t.V=667;t.W=944;t.X=667;t.Y=667;t.Z=611;t.bracketleft=278;t.backslash=278;t.bracketright=278;t.asciicircum=469;t.underscore=556;t.quoteleft=222;t.a=556;t.b=556;t.c=500;t.d=556;t.e=556;t.f=278;t.g=556;t.h=556;t.i=222;t.j=222;t.k=500;t.l=222;t.m=833;t.n=556;t.o=556;t.p=556;t.q=556;t.r=333;t.s=500;t.t=278;t.u=556;t.v=500;t.w=722;t.x=500;t.y=500;t.z=500;t.braceleft=334;t.bar=260;t.braceright=334;t.asciitilde=584;t.exclamdown=333;t.cent=556;t.sterling=556;t.fraction=167;t.yen=556;t.florin=556;t.section=556;t.currency=556;t.quotesingle=191;t.quotedblleft=333;t.guillemotleft=556;t.guilsinglleft=333;t.guilsinglright=333;t.fi=500;t.fl=500;t.endash=556;t.dagger=556;t.daggerdbl=556;t.periodcentered=278;t.paragraph=537;t.bullet=350;t.quotesinglbase=222;t.quotedblbase=333;t.quotedblright=333;t.guillemotright=556;t.ellipsis=1000;t.perthousand=1000;t.questiondown=611;t.grave=333;t.acute=333;t.circumflex=333;t.tilde=333;t.macron=333;t.breve=333;t.dotaccent=333;t.dieresis=333;t.ring=333;t.cedilla=333;t.hungarumlaut=333;t.ogonek=333;t.caron=333;t.emdash=1000;t.AE=1000;t.ordfeminine=370;t.Lslash=556;t.Oslash=778;t.OE=1000;t.ordmasculine=365;t.ae=889;t.dotlessi=278;t.lslash=222;t.oslash=611;t.oe=944;t.germandbls=611;t.Idieresis=278;t.eacute=556;t.abreve=556;t.uhungarumlaut=556;t.ecaron=556;t.Ydieresis=667;t.divide=584;t.Yacute=667;t.Acircumflex=667;t.aacute=556;t.Ucircumflex=722;t.yacute=500;t.scommaaccent=500;t.ecircumflex=556;t.Uring=722;t.Udieresis=722;t.aogonek=556;t.Uacute=722;t.uogonek=556;t.Edieresis=667;t.Dcroat=722;t.commaaccent=250;t.copyright=737;t.Emacron=667;t.ccaron=500;t.aring=556;t.Ncommaaccent=722;t.lacute=222;t.agrave=556;t.Tcommaaccent=611;t.Cacute=722;t.atilde=556;t.Edotaccent=667;t.scaron=500;t.scedilla=500;t.iacute=278;t.lozenge=471;t.Rcaron=722;t.Gcommaaccent=778;t.ucircumflex=556;t.acircumflex=556;t.Amacron=667;t.rcaron=333;t.ccedilla=500;t.Zdotaccent=611;t.Thorn=667;t.Omacron=778;t.Racute=722;t.Sacute=667;t.dcaron=643;t.Umacron=722;t.uring=556;t.threesuperior=333;t.Ograve=778;t.Agrave=667;t.Abreve=667;t.multiply=584;t.uacute=556;t.Tcaron=611;t.partialdiff=476;t.ydieresis=500;t.Nacute=722;t.icircumflex=278;t.Ecircumflex=667;t.adieresis=556;t.edieresis=556;t.cacute=500;t.nacute=556;t.umacron=556;t.Ncaron=722;t.Iacute=278;t.plusminus=584;t.brokenbar=260;t.registered=737;t.Gbreve=778;t.Idotaccent=278;t.summation=600;t.Egrave=667;t.racute=333;t.omacron=556;t.Zacute=611;t.Zcaron=611;t.greaterequal=549;t.Eth=722;t.Ccedilla=722;t.lcommaaccent=222;t.tcaron=317;t.eogonek=556;t.Uogonek=722;t.Aacute=667;t.Adieresis=667;t.egrave=556;t.zacute=500;t.iogonek=222;t.Oacute=778;t.oacute=556;t.amacron=556;t.sacute=500;t.idieresis=278;t.Ocircumflex=778;t.Ugrave=722;t.Delta=612;t.thorn=556;t.twosuperior=333;t.Odieresis=778;t.mu=556;t.igrave=278;t.ohungarumlaut=556;t.Eogonek=667;t.dcroat=556;t.threequarters=834;t.Scedilla=667;t.lcaron=299;t.Kcommaaccent=667;t.Lacute=556;t.trademark=1000;t.edotaccent=556;t.Igrave=278;t.Imacron=278;t.Lcaron=556;t.onehalf=834;t.lessequal=549;t.ocircumflex=556;t.ntilde=556;t.Uhungarumlaut=722;t.Eacute=667;t.emacron=556;t.gbreve=556;t.onequarter=834;t.Scaron=667;t.Scommaaccent=667;t.Ohungarumlaut=778;t.degree=400;t.ograve=556;t.Ccaron=722;t.ugrave=556;t.radical=453;t.Dcaron=722;t.rcommaaccent=333;t.Ntilde=722;t.otilde=556;t.Rcommaaccent=722;t.Lcommaaccent=556;t.Atilde=667;t.Aogonek=667;t.Aring=667;t.Otilde=778;t.zdotaccent=500;t.Ecaron=667;t.Iogonek=278;t.kcommaaccent=500;t.minus=584;t.Icircumflex=278;t.ncaron=556;t.tcommaaccent=278;t.logicalnot=584;t.odieresis=556;t.udieresis=556;t.notequal=549;t.gcommaaccent=556;t.eth=556;t.zcaron=500;t.ncommaaccent=556;t.onesuperior=333;t.imacron=278;t.Euro=556;});t.Symbol=getLookupTableFactory(function(t){t.space=250;t.exclam=333;t.universal=713;t.numbersign=500;t.existential=549;t.percent=833;t.ampersand=778;t.suchthat=439;t.parenleft=333;t.parenright=333;t.asteriskmath=500;t.plus=549;t.comma=250;t.minus=549;t.period=250;t.slash=278;t.zero=500;t.one=500;t.two=500;t.three=500;t.four=500;t.five=500;t.six=500;t.seven=500;t.eight=500;t.nine=500;t.colon=278;t.semicolon=278;t.less=549;t.equal=549;t.greater=549;t.question=444;t.congruent=549;t.Alpha=722;t.Beta=667;t.Chi=722;t.Delta=612;t.Epsilon=611;t.Phi=763;t.Gamma=603;t.Eta=722;t.Iota=333;t.theta1=631;t.Kappa=722;t.Lambda=686;t.Mu=889;t.Nu=722;t.Omicron=722;t.Pi=768;t.Theta=741;t.Rho=556;t.Sigma=592;t.Tau=611;t.Upsilon=690;t.sigma1=439;t.Omega=768;t.Xi=645;t.Psi=795;t.Zeta=611;t.bracketleft=333;t.therefore=863;t.bracketright=333;t.perpendicular=658;t.underscore=500;t.radicalex=500;t.alpha=631;t.beta=549;t.chi=549;t.delta=494;t.epsilon=439;t.phi=521;t.gamma=411;t.eta=603;t.iota=329;t.phi1=603;t.kappa=549;t.lambda=549;t.mu=576;t.nu=521;t.omicron=549;t.pi=549;t.theta=521;t.rho=549;t.sigma=603;t.tau=439;t.upsilon=576;t.omega1=713;t.omega=686;t.xi=493;t.psi=686;t.zeta=494;t.braceleft=480;t.bar=200;t.braceright=480;t.similar=549;t.Euro=750;t.Upsilon1=620;t.minute=247;t.lessequal=549;t.fraction=167;t.infinity=713;t.florin=500;t.club=753;t.diamond=753;t.heart=753;t.spade=753;t.arrowboth=1042;t.arrowleft=987;t.arrowup=603;t.arrowright=987;t.arrowdown=603;t.degree=400;t.plusminus=549;t.second=411;t.greaterequal=549;t.multiply=549;t.proportional=713;t.partialdiff=494;t.bullet=460;t.divide=549;t.notequal=549;t.equivalence=549;t.approxequal=549;t.ellipsis=1000;t.arrowvertex=603;t.arrowhorizex=1000;t.carriagereturn=658;t.aleph=823;t.Ifraktur=686;t.Rfraktur=795;t.weierstrass=987;t.circlemultiply=768;t.circleplus=768;t.emptyset=823;t.intersection=768;t.union=768;t.propersuperset=713;t.reflexsuperset=713;t.notsubset=713;t.propersubset=713;t.reflexsubset=713;t.element=713;t.notelement=713;t.angle=768;t.gradient=713;t.registerserif=790;t.copyrightserif=790;t.trademarkserif=890;t.product=823;t.radical=549;t.dotmath=250;t.logicalnot=713;t.logicaland=603;t.logicalor=603;t.arrowdblboth=1042;t.arrowdblleft=987;t.arrowdblup=603;t.arrowdblright=987;t.arrowdbldown=603;t.lozenge=494;t.angleleft=329;t.registersans=790;t.copyrightsans=790;t.trademarksans=786;t.summation=713;t.parenlefttp=384;t.parenleftex=384;t.parenleftbt=384;t.bracketlefttp=384;t.bracketleftex=384;t.bracketleftbt=384;t.bracelefttp=494;t.braceleftmid=494;t.braceleftbt=494;t.braceex=494;t.angleright=329;t.integral=274;t.integraltp=686;t.integralex=686;t.integralbt=686;t.parenrighttp=384;t.parenrightex=384;t.parenrightbt=384;t.bracketrighttp=384;t.bracketrightex=384;t.bracketrightbt=384;t.bracerighttp=494;t.bracerightmid=494;t.bracerightbt=494;t.apple=790;});t["Times-Roman"]=getLookupTableFactory(function(t){t.space=250;t.exclam=333;t.quotedbl=408;t.numbersign=500;t.dollar=500;t.percent=833;t.ampersand=778;t.quoteright=333;t.parenleft=333;t.parenright=333;t.asterisk=500;t.plus=564;t.comma=250;t.hyphen=333;t.period=250;t.slash=278;t.zero=500;t.one=500;t.two=500;t.three=500;t.four=500;t.five=500;t.six=500;t.seven=500;t.eight=500;t.nine=500;t.colon=278;t.semicolon=278;t.less=564;t.equal=564;t.greater=564;t.question=444;t.at=921;t.A=722;t.B=667;t.C=667;t.D=722;t.E=611;t.F=556;t.G=722;t.H=722;t.I=333;t.J=389;t.K=722;t.L=611;t.M=889;t.N=722;t.O=722;t.P=556;t.Q=722;t.R=667;t.S=556;t.T=611;t.U=722;t.V=722;t.W=944;t.X=722;t.Y=722;t.Z=611;t.bracketleft=333;t.backslash=278;t.bracketright=333;t.asciicircum=469;t.underscore=500;t.quoteleft=333;t.a=444;t.b=500;t.c=444;t.d=500;t.e=444;t.f=333;t.g=500;t.h=500;t.i=278;t.j=278;t.k=500;t.l=278;t.m=778;t.n=500;t.o=500;t.p=500;t.q=500;t.r=333;t.s=389;t.t=278;t.u=500;t.v=500;t.w=722;t.x=500;t.y=500;t.z=444;t.braceleft=480;t.bar=200;t.braceright=480;t.asciitilde=541;t.exclamdown=333;t.cent=500;t.sterling=500;t.fraction=167;t.yen=500;t.florin=500;t.section=500;t.currency=500;t.quotesingle=180;t.quotedblleft=444;t.guillemotleft=500;t.guilsinglleft=333;t.guilsinglright=333;t.fi=556;t.fl=556;t.endash=500;t.dagger=500;t.daggerdbl=500;t.periodcentered=250;t.paragraph=453;t.bullet=350;t.quotesinglbase=333;t.quotedblbase=444;t.quotedblright=444;t.guillemotright=500;t.ellipsis=1000;t.perthousand=1000;t.questiondown=444;t.grave=333;t.acute=333;t.circumflex=333;t.tilde=333;t.macron=333;t.breve=333;t.dotaccent=333;t.dieresis=333;t.ring=333;t.cedilla=333;t.hungarumlaut=333;t.ogonek=333;t.caron=333;t.emdash=1000;t.AE=889;t.ordfeminine=276;t.Lslash=611;t.Oslash=722;t.OE=889;t.ordmasculine=310;t.ae=667;t.dotlessi=278;t.lslash=278;t.oslash=500;t.oe=722;t.germandbls=500;t.Idieresis=333;t.eacute=444;t.abreve=444;t.uhungarumlaut=500;t.ecaron=444;t.Ydieresis=722;t.divide=564;t.Yacute=722;t.Acircumflex=722;t.aacute=444;t.Ucircumflex=722;t.yacute=500;t.scommaaccent=389;t.ecircumflex=444;t.Uring=722;t.Udieresis=722;t.aogonek=444;t.Uacute=722;t.uogonek=500;t.Edieresis=611;t.Dcroat=722;t.commaaccent=250;t.copyright=760;t.Emacron=611;t.ccaron=444;t.aring=444;t.Ncommaaccent=722;t.lacute=278;t.agrave=444;t.Tcommaaccent=611;t.Cacute=667;t.atilde=444;t.Edotaccent=611;t.scaron=389;t.scedilla=389;t.iacute=278;t.lozenge=471;t.Rcaron=667;t.Gcommaaccent=722;t.ucircumflex=500;t.acircumflex=444;t.Amacron=722;t.rcaron=333;t.ccedilla=444;t.Zdotaccent=611;t.Thorn=556;t.Omacron=722;t.Racute=667;t.Sacute=556;t.dcaron=588;t.Umacron=722;t.uring=500;t.threesuperior=300;t.Ograve=722;t.Agrave=722;t.Abreve=722;t.multiply=564;t.uacute=500;t.Tcaron=611;t.partialdiff=476;t.ydieresis=500;t.Nacute=722;t.icircumflex=278;t.Ecircumflex=611;t.adieresis=444;t.edieresis=444;t.cacute=444;t.nacute=500;t.umacron=500;t.Ncaron=722;t.Iacute=333;t.plusminus=564;t.brokenbar=200;t.registered=760;t.Gbreve=722;t.Idotaccent=333;t.summation=600;t.Egrave=611;t.racute=333;t.omacron=500;t.Zacute=611;t.Zcaron=611;t.greaterequal=549;t.Eth=722;t.Ccedilla=667;t.lcommaaccent=278;t.tcaron=326;t.eogonek=444;t.Uogonek=722;t.Aacute=722;t.Adieresis=722;t.egrave=444;t.zacute=444;t.iogonek=278;t.Oacute=722;t.oacute=500;t.amacron=444;t.sacute=389;t.idieresis=278;t.Ocircumflex=722;t.Ugrave=722;t.Delta=612;t.thorn=500;t.twosuperior=300;t.Odieresis=722;t.mu=500;t.igrave=278;t.ohungarumlaut=500;t.Eogonek=611;t.dcroat=500;t.threequarters=750;t.Scedilla=556;t.lcaron=344;t.Kcommaaccent=722;t.Lacute=611;t.trademark=980;t.edotaccent=444;t.Igrave=333;t.Imacron=333;t.Lcaron=611;t.onehalf=750;t.lessequal=549;t.ocircumflex=500;t.ntilde=500;t.Uhungarumlaut=722;t.Eacute=611;t.emacron=444;t.gbreve=500;t.onequarter=750;t.Scaron=556;t.Scommaaccent=556;t.Ohungarumlaut=722;t.degree=400;t.ograve=500;t.Ccaron=667;t.ugrave=500;t.radical=453;t.Dcaron=722;t.rcommaaccent=333;t.Ntilde=722;t.otilde=500;t.Rcommaaccent=667;t.Lcommaaccent=611;t.Atilde=722;t.Aogonek=722;t.Aring=722;t.Otilde=722;t.zdotaccent=444;t.Ecaron=611;t.Iogonek=333;t.kcommaaccent=500;t.minus=564;t.Icircumflex=333;t.ncaron=500;t.tcommaaccent=278;t.logicalnot=564;t.odieresis=500;t.udieresis=500;t.notequal=549;t.gcommaaccent=500;t.eth=500;t.zcaron=444;t.ncommaaccent=500;t.onesuperior=300;t.imacron=278;t.Euro=500;});t["Times-Bold"]=getLookupTableFactory(function(t){t.space=250;t.exclam=333;t.quotedbl=555;t.numbersign=500;t.dollar=500;t.percent=1000;t.ampersand=833;t.quoteright=333;t.parenleft=333;t.parenright=333;t.asterisk=500;t.plus=570;t.comma=250;t.hyphen=333;t.period=250;t.slash=278;t.zero=500;t.one=500;t.two=500;t.three=500;t.four=500;t.five=500;t.six=500;t.seven=500;t.eight=500;t.nine=500;t.colon=333;t.semicolon=333;t.less=570;t.equal=570;t.greater=570;t.question=500;t.at=930;t.A=722;t.B=667;t.C=722;t.D=722;t.E=667;t.F=611;t.G=778;t.H=778;t.I=389;t.J=500;t.K=778;t.L=667;t.M=944;t.N=722;t.O=778;t.P=611;t.Q=778;t.R=722;t.S=556;t.T=667;t.U=722;t.V=722;t.W=1000;t.X=722;t.Y=722;t.Z=667;t.bracketleft=333;t.backslash=278;t.bracketright=333;t.asciicircum=581;t.underscore=500;t.quoteleft=333;t.a=500;t.b=556;t.c=444;t.d=556;t.e=444;t.f=333;t.g=500;t.h=556;t.i=278;t.j=333;t.k=556;t.l=278;t.m=833;t.n=556;t.o=500;t.p=556;t.q=556;t.r=444;t.s=389;t.t=333;t.u=556;t.v=500;t.w=722;t.x=500;t.y=500;t.z=444;t.braceleft=394;t.bar=220;t.braceright=394;t.asciitilde=520;t.exclamdown=333;t.cent=500;t.sterling=500;t.fraction=167;t.yen=500;t.florin=500;t.section=500;t.currency=500;t.quotesingle=278;t.quotedblleft=500;t.guillemotleft=500;t.guilsinglleft=333;t.guilsinglright=333;t.fi=556;t.fl=556;t.endash=500;t.dagger=500;t.daggerdbl=500;t.periodcentered=250;t.paragraph=540;t.bullet=350;t.quotesinglbase=333;t.quotedblbase=500;t.quotedblright=500;t.guillemotright=500;t.ellipsis=1000;t.perthousand=1000;t.questiondown=500;t.grave=333;t.acute=333;t.circumflex=333;t.tilde=333;t.macron=333;t.breve=333;t.dotaccent=333;t.dieresis=333;t.ring=333;t.cedilla=333;t.hungarumlaut=333;t.ogonek=333;t.caron=333;t.emdash=1000;t.AE=1000;t.ordfeminine=300;t.Lslash=667;t.Oslash=778;t.OE=1000;t.ordmasculine=330;t.ae=722;t.dotlessi=278;t.lslash=278;t.oslash=500;t.oe=722;t.germandbls=556;t.Idieresis=389;t.eacute=444;t.abreve=500;t.uhungarumlaut=556;t.ecaron=444;t.Ydieresis=722;t.divide=570;t.Yacute=722;t.Acircumflex=722;t.aacute=500;t.Ucircumflex=722;t.yacute=500;t.scommaaccent=389;t.ecircumflex=444;t.Uring=722;t.Udieresis=722;t.aogonek=500;t.Uacute=722;t.uogonek=556;t.Edieresis=667;t.Dcroat=722;t.commaaccent=250;t.copyright=747;t.Emacron=667;t.ccaron=444;t.aring=500;t.Ncommaaccent=722;t.lacute=278;t.agrave=500;t.Tcommaaccent=667;t.Cacute=722;t.atilde=500;t.Edotaccent=667;t.scaron=389;t.scedilla=389;t.iacute=278;t.lozenge=494;t.Rcaron=722;t.Gcommaaccent=778;t.ucircumflex=556;t.acircumflex=500;t.Amacron=722;t.rcaron=444;t.ccedilla=444;t.Zdotaccent=667;t.Thorn=611;t.Omacron=778;t.Racute=722;t.Sacute=556;t.dcaron=672;t.Umacron=722;t.uring=556;t.threesuperior=300;t.Ograve=778;t.Agrave=722;t.Abreve=722;t.multiply=570;t.uacute=556;t.Tcaron=667;t.partialdiff=494;t.ydieresis=500;t.Nacute=722;t.icircumflex=278;t.Ecircumflex=667;t.adieresis=500;t.edieresis=444;t.cacute=444;t.nacute=556;t.umacron=556;t.Ncaron=722;t.Iacute=389;t.plusminus=570;t.brokenbar=220;t.registered=747;t.Gbreve=778;t.Idotaccent=389;t.summation=600;t.Egrave=667;t.racute=444;t.omacron=500;t.Zacute=667;t.Zcaron=667;t.greaterequal=549;t.Eth=722;t.Ccedilla=722;t.lcommaaccent=278;t.tcaron=416;t.eogonek=444;t.Uogonek=722;t.Aacute=722;t.Adieresis=722;t.egrave=444;t.zacute=444;t.iogonek=278;t.Oacute=778;t.oacute=500;t.amacron=500;t.sacute=389;t.idieresis=278;t.Ocircumflex=778;t.Ugrave=722;t.Delta=612;t.thorn=556;t.twosuperior=300;t.Odieresis=778;t.mu=556;t.igrave=278;t.ohungarumlaut=500;t.Eogonek=667;t.dcroat=556;t.threequarters=750;t.Scedilla=556;t.lcaron=394;t.Kcommaaccent=778;t.Lacute=667;t.trademark=1000;t.edotaccent=444;t.Igrave=389;t.Imacron=389;t.Lcaron=667;t.onehalf=750;t.lessequal=549;t.ocircumflex=500;t.ntilde=556;t.Uhungarumlaut=722;t.Eacute=667;t.emacron=444;t.gbreve=500;t.onequarter=750;t.Scaron=556;t.Scommaaccent=556;t.Ohungarumlaut=778;t.degree=400;t.ograve=500;t.Ccaron=722;t.ugrave=556;t.radical=549;t.Dcaron=722;t.rcommaaccent=444;t.Ntilde=722;t.otilde=500;t.Rcommaaccent=722;t.Lcommaaccent=667;t.Atilde=722;t.Aogonek=722;t.Aring=722;t.Otilde=778;t.zdotaccent=444;t.Ecaron=667;t.Iogonek=389;t.kcommaaccent=556;t.minus=570;t.Icircumflex=389;t.ncaron=556;t.tcommaaccent=333;t.logicalnot=570;t.odieresis=500;t.udieresis=556;t.notequal=549;t.gcommaaccent=500;t.eth=500;t.zcaron=444;t.ncommaaccent=556;t.onesuperior=300;t.imacron=278;t.Euro=500;});t["Times-BoldItalic"]=getLookupTableFactory(function(t){t.space=250;t.exclam=389;t.quotedbl=555;t.numbersign=500;t.dollar=500;t.percent=833;t.ampersand=778;t.quoteright=333;t.parenleft=333;t.parenright=333;t.asterisk=500;t.plus=570;t.comma=250;t.hyphen=333;t.period=250;t.slash=278;t.zero=500;t.one=500;t.two=500;t.three=500;t.four=500;t.five=500;t.six=500;t.seven=500;t.eight=500;t.nine=500;t.colon=333;t.semicolon=333;t.less=570;t.equal=570;t.greater=570;t.question=500;t.at=832;t.A=667;t.B=667;t.C=667;t.D=722;t.E=667;t.F=667;t.G=722;t.H=778;t.I=389;t.J=500;t.K=667;t.L=611;t.M=889;t.N=722;t.O=722;t.P=611;t.Q=722;t.R=667;t.S=556;t.T=611;t.U=722;t.V=667;t.W=889;t.X=667;t.Y=611;t.Z=611;t.bracketleft=333;t.backslash=278;t.bracketright=333;t.asciicircum=570;t.underscore=500;t.quoteleft=333;t.a=500;t.b=500;t.c=444;t.d=500;t.e=444;t.f=333;t.g=500;t.h=556;t.i=278;t.j=278;t.k=500;t.l=278;t.m=778;t.n=556;t.o=500;t.p=500;t.q=500;t.r=389;t.s=389;t.t=278;t.u=556;t.v=444;t.w=667;t.x=500;t.y=444;t.z=389;t.braceleft=348;t.bar=220;t.braceright=348;t.asciitilde=570;t.exclamdown=389;t.cent=500;t.sterling=500;t.fraction=167;t.yen=500;t.florin=500;t.section=500;t.currency=500;t.quotesingle=278;t.quotedblleft=500;t.guillemotleft=500;t.guilsinglleft=333;t.guilsinglright=333;t.fi=556;t.fl=556;t.endash=500;t.dagger=500;t.daggerdbl=500;t.periodcentered=250;t.paragraph=500;t.bullet=350;t.quotesinglbase=333;t.quotedblbase=500;t.quotedblright=500;t.guillemotright=500;t.ellipsis=1000;t.perthousand=1000;t.questiondown=500;t.grave=333;t.acute=333;t.circumflex=333;t.tilde=333;t.macron=333;t.breve=333;t.dotaccent=333;t.dieresis=333;t.ring=333;t.cedilla=333;t.hungarumlaut=333;t.ogonek=333;t.caron=333;t.emdash=1000;t.AE=944;t.ordfeminine=266;t.Lslash=611;t.Oslash=722;t.OE=944;t.ordmasculine=300;t.ae=722;t.dotlessi=278;t.lslash=278;t.oslash=500;t.oe=722;t.germandbls=500;t.Idieresis=389;t.eacute=444;t.abreve=500;t.uhungarumlaut=556;t.ecaron=444;t.Ydieresis=611;t.divide=570;t.Yacute=611;t.Acircumflex=667;t.aacute=500;t.Ucircumflex=722;t.yacute=444;t.scommaaccent=389;t.ecircumflex=444;t.Uring=722;t.Udieresis=722;t.aogonek=500;t.Uacute=722;t.uogonek=556;t.Edieresis=667;t.Dcroat=722;t.commaaccent=250;t.copyright=747;t.Emacron=667;t.ccaron=444;t.aring=500;t.Ncommaaccent=722;t.lacute=278;t.agrave=500;t.Tcommaaccent=611;t.Cacute=667;t.atilde=500;t.Edotaccent=667;t.scaron=389;t.scedilla=389;t.iacute=278;t.lozenge=494;t.Rcaron=667;t.Gcommaaccent=722;t.ucircumflex=556;t.acircumflex=500;t.Amacron=667;t.rcaron=389;t.ccedilla=444;t.Zdotaccent=611;t.Thorn=611;t.Omacron=722;t.Racute=667;t.Sacute=556;t.dcaron=608;t.Umacron=722;t.uring=556;t.threesuperior=300;t.Ograve=722;t.Agrave=667;t.Abreve=667;t.multiply=570;t.uacute=556;t.Tcaron=611;t.partialdiff=494;t.ydieresis=444;t.Nacute=722;t.icircumflex=278;t.Ecircumflex=667;t.adieresis=500;t.edieresis=444;t.cacute=444;t.nacute=556;t.umacron=556;t.Ncaron=722;t.Iacute=389;t.plusminus=570;t.brokenbar=220;t.registered=747;t.Gbreve=722;t.Idotaccent=389;t.summation=600;t.Egrave=667;t.racute=389;t.omacron=500;t.Zacute=611;t.Zcaron=611;t.greaterequal=549;t.Eth=722;t.Ccedilla=667;t.lcommaaccent=278;t.tcaron=366;t.eogonek=444;t.Uogonek=722;t.Aacute=667;t.Adieresis=667;t.egrave=444;t.zacute=389;t.iogonek=278;t.Oacute=722;t.oacute=500;t.amacron=500;t.sacute=389;t.idieresis=278;t.Ocircumflex=722;t.Ugrave=722;t.Delta=612;t.thorn=500;t.twosuperior=300;t.Odieresis=722;t.mu=576;t.igrave=278;t.ohungarumlaut=500;t.Eogonek=667;t.dcroat=500;t.threequarters=750;t.Scedilla=556;t.lcaron=382;t.Kcommaaccent=667;t.Lacute=611;t.trademark=1000;t.edotaccent=444;t.Igrave=389;t.Imacron=389;t.Lcaron=611;t.onehalf=750;t.lessequal=549;t.ocircumflex=500;t.ntilde=556;t.Uhungarumlaut=722;t.Eacute=667;t.emacron=444;t.gbreve=500;t.onequarter=750;t.Scaron=556;t.Scommaaccent=556;t.Ohungarumlaut=722;t.degree=400;t.ograve=500;t.Ccaron=667;t.ugrave=556;t.radical=549;t.Dcaron=722;t.rcommaaccent=389;t.Ntilde=722;t.otilde=500;t.Rcommaaccent=667;t.Lcommaaccent=611;t.Atilde=667;t.Aogonek=667;t.Aring=667;t.Otilde=722;t.zdotaccent=389;t.Ecaron=667;t.Iogonek=389;t.kcommaaccent=500;t.minus=606;t.Icircumflex=389;t.ncaron=556;t.tcommaaccent=278;t.logicalnot=606;t.odieresis=500;t.udieresis=556;t.notequal=549;t.gcommaaccent=500;t.eth=500;t.zcaron=389;t.ncommaaccent=556;t.onesuperior=300;t.imacron=278;t.Euro=500;});t["Times-Italic"]=getLookupTableFactory(function(t){t.space=250;t.exclam=333;t.quotedbl=420;t.numbersign=500;t.dollar=500;t.percent=833;t.ampersand=778;t.quoteright=333;t.parenleft=333;t.parenright=333;t.asterisk=500;t.plus=675;t.comma=250;t.hyphen=333;t.period=250;t.slash=278;t.zero=500;t.one=500;t.two=500;t.three=500;t.four=500;t.five=500;t.six=500;t.seven=500;t.eight=500;t.nine=500;t.colon=333;t.semicolon=333;t.less=675;t.equal=675;t.greater=675;t.question=500;t.at=920;t.A=611;t.B=611;t.C=667;t.D=722;t.E=611;t.F=611;t.G=722;t.H=722;t.I=333;t.J=444;t.K=667;t.L=556;t.M=833;t.N=667;t.O=722;t.P=611;t.Q=722;t.R=611;t.S=500;t.T=556;t.U=722;t.V=611;t.W=833;t.X=611;t.Y=556;t.Z=556;t.bracketleft=389;t.backslash=278;t.bracketright=389;t.asciicircum=422;t.underscore=500;t.quoteleft=333;t.a=500;t.b=500;t.c=444;t.d=500;t.e=444;t.f=278;t.g=500;t.h=500;t.i=278;t.j=278;t.k=444;t.l=278;t.m=722;t.n=500;t.o=500;t.p=500;t.q=500;t.r=389;t.s=389;t.t=278;t.u=500;t.v=444;t.w=667;t.x=444;t.y=444;t.z=389;t.braceleft=400;t.bar=275;t.braceright=400;t.asciitilde=541;t.exclamdown=389;t.cent=500;t.sterling=500;t.fraction=167;t.yen=500;t.florin=500;t.section=500;t.currency=500;t.quotesingle=214;t.quotedblleft=556;t.guillemotleft=500;t.guilsinglleft=333;t.guilsinglright=333;t.fi=500;t.fl=500;t.endash=500;t.dagger=500;t.daggerdbl=500;t.periodcentered=250;t.paragraph=523;t.bullet=350;t.quotesinglbase=333;t.quotedblbase=556;t.quotedblright=556;t.guillemotright=500;t.ellipsis=889;t.perthousand=1000;t.questiondown=500;t.grave=333;t.acute=333;t.circumflex=333;t.tilde=333;t.macron=333;t.breve=333;t.dotaccent=333;t.dieresis=333;t.ring=333;t.cedilla=333;t.hungarumlaut=333;t.ogonek=333;t.caron=333;t.emdash=889;t.AE=889;t.ordfeminine=276;t.Lslash=556;t.Oslash=722;t.OE=944;t.ordmasculine=310;t.ae=667;t.dotlessi=278;t.lslash=278;t.oslash=500;t.oe=667;t.germandbls=500;t.Idieresis=333;t.eacute=444;t.abreve=500;t.uhungarumlaut=500;t.ecaron=444;t.Ydieresis=556;t.divide=675;t.Yacute=556;t.Acircumflex=611;t.aacute=500;t.Ucircumflex=722;t.yacute=444;t.scommaaccent=389;t.ecircumflex=444;t.Uring=722;t.Udieresis=722;t.aogonek=500;t.Uacute=722;t.uogonek=500;t.Edieresis=611;t.Dcroat=722;t.commaaccent=250;t.copyright=760;t.Emacron=611;t.ccaron=444;t.aring=500;t.Ncommaaccent=667;t.lacute=278;t.agrave=500;t.Tcommaaccent=556;t.Cacute=667;t.atilde=500;t.Edotaccent=611;t.scaron=389;t.scedilla=389;t.iacute=278;t.lozenge=471;t.Rcaron=611;t.Gcommaaccent=722;t.ucircumflex=500;t.acircumflex=500;t.Amacron=611;t.rcaron=389;t.ccedilla=444;t.Zdotaccent=556;t.Thorn=611;t.Omacron=722;t.Racute=611;t.Sacute=500;t.dcaron=544;t.Umacron=722;t.uring=500;t.threesuperior=300;t.Ograve=722;t.Agrave=611;t.Abreve=611;t.multiply=675;t.uacute=500;t.Tcaron=556;t.partialdiff=476;t.ydieresis=444;t.Nacute=667;t.icircumflex=278;t.Ecircumflex=611;t.adieresis=500;t.edieresis=444;t.cacute=444;t.nacute=500;t.umacron=500;t.Ncaron=667;t.Iacute=333;t.plusminus=675;t.brokenbar=275;t.registered=760;t.Gbreve=722;t.Idotaccent=333;t.summation=600;t.Egrave=611;t.racute=389;t.omacron=500;t.Zacute=556;t.Zcaron=556;t.greaterequal=549;t.Eth=722;t.Ccedilla=667;t.lcommaaccent=278;t.tcaron=300;t.eogonek=444;t.Uogonek=722;t.Aacute=611;t.Adieresis=611;t.egrave=444;t.zacute=389;t.iogonek=278;t.Oacute=722;t.oacute=500;t.amacron=500;t.sacute=389;t.idieresis=278;t.Ocircumflex=722;t.Ugrave=722;t.Delta=612;t.thorn=500;t.twosuperior=300;t.Odieresis=722;t.mu=500;t.igrave=278;t.ohungarumlaut=500;t.Eogonek=611;t.dcroat=500;t.threequarters=750;t.Scedilla=500;t.lcaron=300;t.Kcommaaccent=667;t.Lacute=556;t.trademark=980;t.edotaccent=444;t.Igrave=333;t.Imacron=333;t.Lcaron=611;t.onehalf=750;t.lessequal=549;t.ocircumflex=500;t.ntilde=500;t.Uhungarumlaut=722;t.Eacute=611;t.emacron=444;t.gbreve=500;t.onequarter=750;t.Scaron=500;t.Scommaaccent=500;t.Ohungarumlaut=722;t.degree=400;t.ograve=500;t.Ccaron=667;t.ugrave=500;t.radical=453;t.Dcaron=722;t.rcommaaccent=389;t.Ntilde=667;t.otilde=500;t.Rcommaaccent=611;t.Lcommaaccent=556;t.Atilde=611;t.Aogonek=611;t.Aring=611;t.Otilde=722;t.zdotaccent=389;t.Ecaron=611;t.Iogonek=333;t.kcommaaccent=444;t.minus=675;t.Icircumflex=333;t.ncaron=500;t.tcommaaccent=278;t.logicalnot=675;t.odieresis=500;t.udieresis=500;t.notequal=549;t.gcommaaccent=500;t.eth=500;t.zcaron=389;t.ncommaaccent=500;t.onesuperior=300;t.imacron=278;t.Euro=500;});t.ZapfDingbats=getLookupTableFactory(function(t){t.space=278;t.a1=974;t.a2=961;t.a202=974;t.a3=980;t.a4=719;t.a5=789;t.a119=790;t.a118=791;t.a117=690;t.a11=960;t.a12=939;t.a13=549;t.a14=855;t.a15=911;t.a16=933;t.a105=911;t.a17=945;t.a18=974;t.a19=755;t.a20=846;t.a21=762;t.a22=761;t.a23=571;t.a24=677;t.a25=763;t.a26=760;t.a27=759;t.a28=754;t.a6=494;t.a7=552;t.a8=537;t.a9=577;t.a10=692;t.a29=786;t.a30=788;t.a31=788;t.a32=790;t.a33=793;t.a34=794;t.a35=816;t.a36=823;t.a37=789;t.a38=841;t.a39=823;t.a40=833;t.a41=816;t.a42=831;t.a43=923;t.a44=744;t.a45=723;t.a46=749;t.a47=790;t.a48=792;t.a49=695;t.a50=776;t.a51=768;t.a52=792;t.a53=759;t.a54=707;t.a55=708;t.a56=682;t.a57=701;t.a58=826;t.a59=815;t.a60=789;t.a61=789;t.a62=707;t.a63=687;t.a64=696;t.a65=689;t.a66=786;t.a67=787;t.a68=713;t.a69=791;t.a70=785;t.a71=791;t.a72=873;t.a73=761;t.a74=762;t.a203=762;t.a75=759;t.a204=759;t.a76=892;t.a77=892;t.a78=788;t.a79=784;t.a81=438;t.a82=138;t.a83=277;t.a84=415;t.a97=392;t.a98=392;t.a99=668;t.a100=668;t.a89=390;t.a90=390;t.a93=317;t.a94=317;t.a91=276;t.a92=276;t.a205=509;t.a85=509;t.a206=410;t.a86=410;t.a87=234;t.a88=234;t.a95=334;t.a96=334;t.a101=732;t.a102=544;t.a103=544;t.a104=910;t.a106=667;t.a107=760;t.a108=760;t.a112=776;t.a111=595;t.a110=694;t.a109=626;t.a120=788;t.a121=788;t.a122=788;t.a123=788;t.a124=788;t.a125=788;t.a126=788;t.a127=788;t.a128=788;t.a129=788;t.a130=788;t.a131=788;t.a132=788;t.a133=788;t.a134=788;t.a135=788;t.a136=788;t.a137=788;t.a138=788;t.a139=788;t.a140=788;t.a141=788;t.a142=788;t.a143=788;t.a144=788;t.a145=788;t.a146=788;t.a147=788;t.a148=788;t.a149=788;t.a150=788;t.a151=788;t.a152=788;t.a153=788;t.a154=788;t.a155=788;t.a156=788;t.a157=788;t.a158=788;t.a159=788;t.a160=894;t.a161=838;t.a163=1016;t.a164=458;t.a196=748;t.a165=924;t.a192=748;t.a166=918;t.a167=927;t.a168=928;t.a169=928;t.a170=834;t.a171=873;t.a172=828;t.a173=924;t.a162=924;t.a174=917;t.a175=930;t.a176=931;t.a177=463;t.a178=883;t.a179=836;t.a193=836;t.a180=867;t.a199=867;t.a181=696;t.a200=696;t.a182=874;t.a201=874;t.a183=760;t.a184=946;t.a197=771;t.a185=865;t.a194=771;t.a198=888;t.a186=967;t.a195=888;t.a187=831;t.a188=873;t.a189=927;t.a190=970;t.a191=918;});});var getFontBasicMetrics=getLookupTableFactory(function(t){t.Courier={ascent:629,descent:-157,capHeight:562,xHeight:-426};t["Courier-Bold"]={ascent:629,descent:-157,capHeight:562,xHeight:439};t["Courier-Oblique"]={ascent:629,descent:-157,capHeight:562,xHeight:426};t["Courier-BoldOblique"]={ascent:629,descent:-157,capHeight:562,xHeight:426};t.Helvetica={ascent:718,descent:-207,capHeight:718,xHeight:523};t["Helvetica-Bold"]={ascent:718,descent:-207,capHeight:718,xHeight:532};t["Helvetica-Oblique"]={ascent:718,descent:-207,capHeight:718,xHeight:523};t["Helvetica-BoldOblique"]={ascent:718,descent:-207,capHeight:718,xHeight:532};t["Times-Roman"]={ascent:683,descent:-217,capHeight:662,xHeight:450};t["Times-Bold"]={ascent:683,descent:-217,capHeight:676,xHeight:461};t["Times-Italic"]={ascent:683,descent:-217,capHeight:653,xHeight:441};t["Times-BoldItalic"]={ascent:683,descent:-217,capHeight:669,xHeight:462};t.Symbol={ascent:Math.NaN,descent:Math.NaN,capHeight:Math.NaN,xHeight:Math.NaN};t.ZapfDingbats={ascent:Math.NaN,descent:Math.NaN,capHeight:Math.NaN,xHeight:Math.NaN};});;// ./src/core/glyf.js\nvar ON_CURVE_POINT=1<<0;var X_SHORT_VECTOR=1<<1;var Y_SHORT_VECTOR=1<<2;var REPEAT_FLAG=1<<3;var X_IS_SAME_OR_POSITIVE_X_SHORT_VECTOR=1<<4;var Y_IS_SAME_OR_POSITIVE_Y_SHORT_VECTOR=1<<5;var OVERLAP_SIMPLE=1<<6;var ARG_1_AND_2_ARE_WORDS=1<<0;var ARGS_ARE_XY_VALUES=1<<1;var WE_HAVE_A_SCALE=1<<3;var MORE_COMPONENTS=1<<5;var WE_HAVE_AN_X_AND_Y_SCALE=1<<6;var WE_HAVE_A_TWO_BY_TWO=1<<7;var WE_HAVE_INSTRUCTIONS=1<<8;var GlyfTable=/*#__PURE__*/function(){function GlyfTable(_ref33){var glyfTable=_ref33.glyfTable,isGlyphLocationsLong=_ref33.isGlyphLocationsLong,locaTable=_ref33.locaTable,numGlyphs=_ref33.numGlyphs;_classCallCheck(this,GlyfTable);this.glyphs=[];var loca=new DataView(locaTable.buffer,locaTable.byteOffset,locaTable.byteLength);var glyf=new DataView(glyfTable.buffer,glyfTable.byteOffset,glyfTable.byteLength);var offsetSize=isGlyphLocationsLong?4:2;var prev=isGlyphLocationsLong?loca.getUint32(0):2*loca.getUint16(0);var pos=0;for(var i=0;i<numGlyphs;i++){pos+=offsetSize;var next=isGlyphLocationsLong?loca.getUint32(pos):2*loca.getUint16(pos);if(next===prev){this.glyphs.push(new Glyph({}));continue;}var glyph=Glyph.parse(prev,glyf);this.glyphs.push(glyph);prev=next;}}return _createClass(GlyfTable,[{key:"getSize",value:function getSize(){return this.glyphs.reduce(function(a,g){var size=g.getSize();return a+(size+3&~3);},0);}},{key:"write",value:function write(){var totalSize=this.getSize();var glyfTable=new DataView(new ArrayBuffer(totalSize));var isLocationLong=totalSize>0x1fffe;var offsetSize=isLocationLong?4:2;var locaTable=new DataView(new ArrayBuffer((this.glyphs.length+1)*offsetSize));if(isLocationLong){locaTable.setUint32(0,0);}else{locaTable.setUint16(0,0);}var pos=0;var locaIndex=0;var _iterator38=_createForOfIteratorHelper(this.glyphs),_step38;try{for(_iterator38.s();!(_step38=_iterator38.n()).done;){var glyph=_step38.value;pos+=glyph.write(pos,glyfTable);pos=pos+3&~3;locaIndex+=offsetSize;if(isLocationLong){locaTable.setUint32(locaIndex,pos);}else{locaTable.setUint16(locaIndex,pos>>1);}}}catch(err){_iterator38.e(err);}finally{_iterator38.f();}return{isLocationLong:isLocationLong,loca:new Uint8Array(locaTable.buffer),glyf:new Uint8Array(glyfTable.buffer)};}},{key:"scale",value:function scale(factors){for(var i=0,ii=this.glyphs.length;i<ii;i++){this.glyphs[i].scale(factors[i]);}}}]);}();var Glyph=/*#__PURE__*/function(){function Glyph(_ref34){var _ref34$header=_ref34.header,header=_ref34$header===void 0?null:_ref34$header,_ref34$simple=_ref34.simple,simple=_ref34$simple===void 0?null:_ref34$simple,_ref34$composites=_ref34.composites,composites=_ref34$composites===void 0?null:_ref34$composites;_classCallCheck(this,Glyph);this.header=header;this.simple=simple;this.composites=composites;}return _createClass(Glyph,[{key:"getSize",value:function getSize(){if(!this.header){return 0;}var size=this.simple?this.simple.getSize():this.composites.reduce(function(a,c){return a+c.getSize();},0);return this.header.getSize()+size;}},{key:"write",value:function write(pos,buf){if(!this.header){return 0;}var spos=pos;pos+=this.header.write(pos,buf);if(this.simple){pos+=this.simple.write(pos,buf);}else{var _iterator39=_createForOfIteratorHelper(this.composites),_step39;try{for(_iterator39.s();!(_step39=_iterator39.n()).done;){var composite=_step39.value;pos+=composite.write(pos,buf);}}catch(err){_iterator39.e(err);}finally{_iterator39.f();}}return pos-spos;}},{key:"scale",value:function scale(factor){if(!this.header){return;}var xMiddle=(this.header.xMin+this.header.xMax)/2;this.header.scale(xMiddle,factor);if(this.simple){this.simple.scale(xMiddle,factor);}else{var _iterator40=_createForOfIteratorHelper(this.composites),_step40;try{for(_iterator40.s();!(_step40=_iterator40.n()).done;){var composite=_step40.value;composite.scale(xMiddle,factor);}}catch(err){_iterator40.e(err);}finally{_iterator40.f();}}}}],[{key:"parse",value:function parse(pos,glyf){var _GlyphHeader$parse=GlyphHeader.parse(pos,glyf),_GlyphHeader$parse2=_slicedToArray(_GlyphHeader$parse,2),read=_GlyphHeader$parse2[0],header=_GlyphHeader$parse2[1];pos+=read;if(header.numberOfContours<0){var composites=[];while(true){var _CompositeGlyph$parse=CompositeGlyph.parse(pos,glyf),_CompositeGlyph$parse2=_slicedToArray(_CompositeGlyph$parse,2),n=_CompositeGlyph$parse2[0],composite=_CompositeGlyph$parse2[1];pos+=n;composites.push(composite);if(!(composite.flags&MORE_COMPONENTS)){break;}}return new Glyph({header:header,composites:composites});}var simple=SimpleGlyph.parse(pos,glyf,header.numberOfContours);return new Glyph({header:header,simple:simple});}}]);}();var GlyphHeader=/*#__PURE__*/function(){function GlyphHeader(_ref35){var numberOfContours=_ref35.numberOfContours,xMin=_ref35.xMin,yMin=_ref35.yMin,xMax=_ref35.xMax,yMax=_ref35.yMax;_classCallCheck(this,GlyphHeader);this.numberOfContours=numberOfContours;this.xMin=xMin;this.yMin=yMin;this.xMax=xMax;this.yMax=yMax;}return _createClass(GlyphHeader,[{key:"getSize",value:function getSize(){return 10;}},{key:"write",value:function write(pos,buf){buf.setInt16(pos,this.numberOfContours);buf.setInt16(pos+2,this.xMin);buf.setInt16(pos+4,this.yMin);buf.setInt16(pos+6,this.xMax);buf.setInt16(pos+8,this.yMax);return 10;}},{key:"scale",value:function scale(x,factor){this.xMin=Math.round(x+(this.xMin-x)*factor);this.xMax=Math.round(x+(this.xMax-x)*factor);}}],[{key:"parse",value:function parse(pos,glyf){return[10,new GlyphHeader({numberOfContours:glyf.getInt16(pos),xMin:glyf.getInt16(pos+2),yMin:glyf.getInt16(pos+4),xMax:glyf.getInt16(pos+6),yMax:glyf.getInt16(pos+8)})];}}]);}();var Contour=/*#__PURE__*/_createClass(function Contour(_ref36){var flags=_ref36.flags,xCoordinates=_ref36.xCoordinates,yCoordinates=_ref36.yCoordinates;_classCallCheck(this,Contour);this.xCoordinates=xCoordinates;this.yCoordinates=yCoordinates;this.flags=flags;});var SimpleGlyph=/*#__PURE__*/function(){function SimpleGlyph(_ref37){var contours=_ref37.contours,instructions=_ref37.instructions;_classCallCheck(this,SimpleGlyph);this.contours=contours;this.instructions=instructions;}return _createClass(SimpleGlyph,[{key:"getSize",value:function getSize(){var size=this.contours.length*2+2+this.instructions.length;var lastX=0;var lastY=0;var _iterator41=_createForOfIteratorHelper(this.contours),_step41;try{for(_iterator41.s();!(_step41=_iterator41.n()).done;){var contour=_step41.value;size+=contour.flags.length;for(var i=0,ii=contour.xCoordinates.length;i<ii;i++){var x=contour.xCoordinates[i];var y=contour.yCoordinates[i];var abs=Math.abs(x-lastX);if(abs>255){size+=2;}else if(abs>0){size+=1;}lastX=x;abs=Math.abs(y-lastY);if(abs>255){size+=2;}else if(abs>0){size+=1;}lastY=y;}}}catch(err){_iterator41.e(err);}finally{_iterator41.f();}return size;}},{key:"write",value:function write(pos,buf){var spos=pos;var xCoordinates=[];var yCoordinates=[];var flags=[];var lastX=0;var lastY=0;var _iterator42=_createForOfIteratorHelper(this.contours),_step42;try{for(_iterator42.s();!(_step42=_iterator42.n()).done;){var contour=_step42.value;for(var _i28=0,_ii7=contour.xCoordinates.length;_i28<_ii7;_i28++){var _flag3=contour.flags[_i28];var _x36=contour.xCoordinates[_i28];var delta=_x36-lastX;if(delta===0){_flag3|=X_IS_SAME_OR_POSITIVE_X_SHORT_VECTOR;xCoordinates.push(0);}else{var abs=Math.abs(delta);if(abs<=255){_flag3|=delta>=0?X_SHORT_VECTOR|X_IS_SAME_OR_POSITIVE_X_SHORT_VECTOR:X_SHORT_VECTOR;xCoordinates.push(abs);}else{xCoordinates.push(delta);}}lastX=_x36;var _y=contour.yCoordinates[_i28];delta=_y-lastY;if(delta===0){_flag3|=Y_IS_SAME_OR_POSITIVE_Y_SHORT_VECTOR;yCoordinates.push(0);}else{var _abs=Math.abs(delta);if(_abs<=255){_flag3|=delta>=0?Y_SHORT_VECTOR|Y_IS_SAME_OR_POSITIVE_Y_SHORT_VECTOR:Y_SHORT_VECTOR;yCoordinates.push(_abs);}else{yCoordinates.push(delta);}}lastY=_y;flags.push(_flag3);}buf.setUint16(pos,xCoordinates.length-1);pos+=2;}}catch(err){_iterator42.e(err);}finally{_iterator42.f();}buf.setUint16(pos,this.instructions.length);pos+=2;if(this.instructions.length){new Uint8Array(buf.buffer,0,buf.buffer.byteLength).set(this.instructions,pos);pos+=this.instructions.length;}for(var _i26=0,_flags=flags;_i26<_flags.length;_i26++){var flag=_flags[_i26];buf.setUint8(pos++,flag);}for(var i=0,ii=xCoordinates.length;i<ii;i++){var x=xCoordinates[i];var _flag=flags[i];if(_flag&X_SHORT_VECTOR){buf.setUint8(pos++,x);}else if(!(_flag&X_IS_SAME_OR_POSITIVE_X_SHORT_VECTOR)){buf.setInt16(pos,x);pos+=2;}}for(var _i27=0,_ii6=yCoordinates.length;_i27<_ii6;_i27++){var y=yCoordinates[_i27];var _flag2=flags[_i27];if(_flag2&Y_SHORT_VECTOR){buf.setUint8(pos++,y);}else if(!(_flag2&Y_IS_SAME_OR_POSITIVE_Y_SHORT_VECTOR)){buf.setInt16(pos,y);pos+=2;}}return pos-spos;}},{key:"scale",value:function scale(x,factor){var _iterator43=_createForOfIteratorHelper(this.contours),_step43;try{for(_iterator43.s();!(_step43=_iterator43.n()).done;){var contour=_step43.value;if(contour.xCoordinates.length===0){continue;}for(var i=0,ii=contour.xCoordinates.length;i<ii;i++){contour.xCoordinates[i]=Math.round(x+(contour.xCoordinates[i]-x)*factor);}}}catch(err){_iterator43.e(err);}finally{_iterator43.f();}}}],[{key:"parse",value:function parse(pos,glyf,numberOfContours){var endPtsOfContours=[];for(var i=0;i<numberOfContours;i++){var endPt=glyf.getUint16(pos);pos+=2;endPtsOfContours.push(endPt);}var numberOfPt=endPtsOfContours[numberOfContours-1]+1;var instructionLength=glyf.getUint16(pos);pos+=2;var instructions=new Uint8Array(glyf).slice(pos,pos+instructionLength);pos+=instructionLength;var flags=[];for(var _i29=0;_i29<numberOfPt;pos++,_i29++){var flag=glyf.getUint8(pos);flags.push(flag);if(flag&REPEAT_FLAG){var count=glyf.getUint8(++pos);flag^=REPEAT_FLAG;for(var m=0;m<count;m++){flags.push(flag);}_i29+=count;}}var allXCoordinates=[];var xCoordinates=[];var yCoordinates=[];var pointFlags=[];var contours=[];var endPtsOfContoursIndex=0;var lastCoordinate=0;for(var _i30=0;_i30<numberOfPt;_i30++){var _flag4=flags[_i30];if(_flag4&X_SHORT_VECTOR){var x=glyf.getUint8(pos++);lastCoordinate+=_flag4&X_IS_SAME_OR_POSITIVE_X_SHORT_VECTOR?x:-x;xCoordinates.push(lastCoordinate);}else if(_flag4&X_IS_SAME_OR_POSITIVE_X_SHORT_VECTOR){xCoordinates.push(lastCoordinate);}else{lastCoordinate+=glyf.getInt16(pos);pos+=2;xCoordinates.push(lastCoordinate);}if(endPtsOfContours[endPtsOfContoursIndex]===_i30){endPtsOfContoursIndex++;allXCoordinates.push(xCoordinates);xCoordinates=[];}}lastCoordinate=0;endPtsOfContoursIndex=0;for(var _i31=0;_i31<numberOfPt;_i31++){var _flag5=flags[_i31];if(_flag5&Y_SHORT_VECTOR){var y=glyf.getUint8(pos++);lastCoordinate+=_flag5&Y_IS_SAME_OR_POSITIVE_Y_SHORT_VECTOR?y:-y;yCoordinates.push(lastCoordinate);}else if(_flag5&Y_IS_SAME_OR_POSITIVE_Y_SHORT_VECTOR){yCoordinates.push(lastCoordinate);}else{lastCoordinate+=glyf.getInt16(pos);pos+=2;yCoordinates.push(lastCoordinate);}pointFlags.push(_flag5&ON_CURVE_POINT|_flag5&OVERLAP_SIMPLE);if(endPtsOfContours[endPtsOfContoursIndex]===_i31){xCoordinates=allXCoordinates[endPtsOfContoursIndex];endPtsOfContoursIndex++;contours.push(new Contour({flags:pointFlags,xCoordinates:xCoordinates,yCoordinates:yCoordinates}));yCoordinates=[];pointFlags=[];}}return new SimpleGlyph({contours:contours,instructions:instructions});}}]);}();var CompositeGlyph=/*#__PURE__*/function(){function CompositeGlyph(_ref38){var flags=_ref38.flags,glyphIndex=_ref38.glyphIndex,argument1=_ref38.argument1,argument2=_ref38.argument2,transf=_ref38.transf,instructions=_ref38.instructions;_classCallCheck(this,CompositeGlyph);this.flags=flags;this.glyphIndex=glyphIndex;this.argument1=argument1;this.argument2=argument2;this.transf=transf;this.instructions=instructions;}return _createClass(CompositeGlyph,[{key:"getSize",value:function getSize(){var size=2+2+this.transf.length*2;if(this.flags&WE_HAVE_INSTRUCTIONS){size+=2+this.instructions.length;}size+=2;if(this.flags&2){if(!(this.argument1>=-128&&this.argument1<=127&&this.argument2>=-128&&this.argument2<=127)){size+=2;}}else if(!(this.argument1>=0&&this.argument1<=255&&this.argument2>=0&&this.argument2<=255)){size+=2;}return size;}},{key:"write",value:function write(pos,buf){var spos=pos;if(this.flags&ARGS_ARE_XY_VALUES){if(!(this.argument1>=-128&&this.argument1<=127&&this.argument2>=-128&&this.argument2<=127)){this.flags|=ARG_1_AND_2_ARE_WORDS;}}else if(!(this.argument1>=0&&this.argument1<=255&&this.argument2>=0&&this.argument2<=255)){this.flags|=ARG_1_AND_2_ARE_WORDS;}buf.setUint16(pos,this.flags);buf.setUint16(pos+2,this.glyphIndex);pos+=4;if(this.flags&ARG_1_AND_2_ARE_WORDS){if(this.flags&ARGS_ARE_XY_VALUES){buf.setInt16(pos,this.argument1);buf.setInt16(pos+2,this.argument2);}else{buf.setUint16(pos,this.argument1);buf.setUint16(pos+2,this.argument2);}pos+=4;}else{buf.setUint8(pos,this.argument1);buf.setUint8(pos+1,this.argument2);pos+=2;}if(this.flags&WE_HAVE_INSTRUCTIONS){buf.setUint16(pos,this.instructions.length);pos+=2;if(this.instructions.length){new Uint8Array(buf.buffer,0,buf.buffer.byteLength).set(this.instructions,pos);pos+=this.instructions.length;}}return pos-spos;}},{key:"scale",value:function scale(x,factor){}}],[{key:"parse",value:function parse(pos,glyf){var spos=pos;var transf=[];var flags=glyf.getUint16(pos);var glyphIndex=glyf.getUint16(pos+2);pos+=4;var argument1,argument2;if(flags&ARG_1_AND_2_ARE_WORDS){if(flags&ARGS_ARE_XY_VALUES){argument1=glyf.getInt16(pos);argument2=glyf.getInt16(pos+2);}else{argument1=glyf.getUint16(pos);argument2=glyf.getUint16(pos+2);}pos+=4;flags^=ARG_1_AND_2_ARE_WORDS;}else{if(flags&ARGS_ARE_XY_VALUES){argument1=glyf.getInt8(pos);argument2=glyf.getInt8(pos+1);}else{argument1=glyf.getUint8(pos);argument2=glyf.getUint8(pos+1);}pos+=2;}if(flags&WE_HAVE_A_SCALE){transf.push(glyf.getUint16(pos));pos+=2;}else if(flags&WE_HAVE_AN_X_AND_Y_SCALE){transf.push(glyf.getUint16(pos),glyf.getUint16(pos+2));pos+=4;}else if(flags&WE_HAVE_A_TWO_BY_TWO){transf.push(glyf.getUint16(pos),glyf.getUint16(pos+2),glyf.getUint16(pos+4),glyf.getUint16(pos+6));pos+=8;}var instructions=null;if(flags&WE_HAVE_INSTRUCTIONS){var instructionLength=glyf.getUint16(pos);pos+=2;instructions=new Uint8Array(glyf).slice(pos,pos+instructionLength);pos+=instructionLength;}return[pos-spos,new CompositeGlyph({flags:flags,glyphIndex:glyphIndex,argument1:argument1,argument2:argument2,transf:transf,instructions:instructions})];}}]);}();;// ./src/core/opentype_file_builder.js\nfunction writeInt16(dest,offset,num){dest[offset]=num>>8&0xff;dest[offset+1]=num&0xff;}function writeInt32(dest,offset,num){dest[offset]=num>>24&0xff;dest[offset+1]=num>>16&0xff;dest[offset+2]=num>>8&0xff;dest[offset+3]=num&0xff;}function writeData(dest,offset,data){if(data instanceof Uint8Array){dest.set(data,offset);}else if(typeof data==="string"){for(var i=0,ii=data.length;i<ii;i++){dest[offset++]=data.charCodeAt(i)&0xff;}}else{var _iterator44=_createForOfIteratorHelper(data),_step44;try{for(_iterator44.s();!(_step44=_iterator44.n()).done;){var num=_step44.value;dest[offset++]=num&0xff;}}catch(err){_iterator44.e(err);}finally{_iterator44.f();}}}var OTF_HEADER_SIZE=12;var OTF_TABLE_ENTRY_SIZE=16;var OpenTypeFileBuilder=/*#__PURE__*/function(){function OpenTypeFileBuilder(sfnt){_classCallCheck(this,OpenTypeFileBuilder);this.sfnt=sfnt;this.tables=Object.create(null);}return _createClass(OpenTypeFileBuilder,[{key:"toArray",value:function toArray(){var sfnt=this.sfnt;var tables=this.tables;var tablesNames=Object.keys(tables);tablesNames.sort();var numTables=tablesNames.length;var i,j,jj,table,tableName;var offset=OTF_HEADER_SIZE+numTables*OTF_TABLE_ENTRY_SIZE;var tableOffsets=[offset];for(i=0;i<numTables;i++){table=tables[tablesNames[i]];var paddedLength=(table.length+3&~3)>>>0;offset+=paddedLength;tableOffsets.push(offset);}var file=new Uint8Array(offset);for(i=0;i<numTables;i++){table=tables[tablesNames[i]];writeData(file,tableOffsets[i],table);}if(sfnt==="true"){sfnt=string32(0x00010000);}file[0]=sfnt.charCodeAt(0)&0xff;file[1]=sfnt.charCodeAt(1)&0xff;file[2]=sfnt.charCodeAt(2)&0xff;file[3]=sfnt.charCodeAt(3)&0xff;writeInt16(file,4,numTables);var searchParams=OpenTypeFileBuilder.getSearchParams(numTables,16);writeInt16(file,6,searchParams.range);writeInt16(file,8,searchParams.entry);writeInt16(file,10,searchParams.rangeShift);offset=OTF_HEADER_SIZE;for(i=0;i<numTables;i++){tableName=tablesNames[i];file[offset]=tableName.charCodeAt(0)&0xff;file[offset+1]=tableName.charCodeAt(1)&0xff;file[offset+2]=tableName.charCodeAt(2)&0xff;file[offset+3]=tableName.charCodeAt(3)&0xff;var checksum=0;for(j=tableOffsets[i],jj=tableOffsets[i+1];j<jj;j+=4){var quad=readUint32(file,j);checksum=checksum+quad>>>0;}writeInt32(file,offset+4,checksum);writeInt32(file,offset+8,tableOffsets[i]);writeInt32(file,offset+12,tables[tableName].length);offset+=OTF_TABLE_ENTRY_SIZE;}return file;}},{key:"addTable",value:function addTable(tag,data){if(tag in this.tables){throw new Error("Table "+tag+" already exists");}this.tables[tag]=data;}}],[{key:"getSearchParams",value:function getSearchParams(entriesCount,entrySize){var maxPower2=1,log2=0;while((maxPower2^entriesCount)>maxPower2){maxPower2<<=1;log2++;}var searchRange=maxPower2*entrySize;return{range:searchRange,entry:log2,rangeShift:entrySize*entriesCount-searchRange};}}]);}();;// ./src/core/type1_parser.js\nvar HINTING_ENABLED=false;var COMMAND_MAP={hstem:[1],vstem:[3],vmoveto:[4],rlineto:[5],hlineto:[6],vlineto:[7],rrcurveto:[8],callsubr:[10],flex:[12,35],drop:[12,18],endchar:[14],rmoveto:[21],hmoveto:[22],vhcurveto:[30],hvcurveto:[31]};var Type1CharString=/*#__PURE__*/function(){function Type1CharString(){_classCallCheck(this,Type1CharString);this.width=0;this.lsb=0;this.flexing=false;this.output=[];this.stack=[];}return _createClass(Type1CharString,[{key:"convert",value:function convert(encoded,subrs,seacAnalysisEnabled){var count=encoded.length;var error=false;var wx,sbx,subrNumber;for(var i=0;i<count;i++){var value=encoded[i];if(value<32){if(value===12){value=(value<<8)+encoded[++i];}switch(value){case 1:if(!HINTING_ENABLED){this.stack=[];break;}error=this.executeCommand(2,COMMAND_MAP.hstem);break;case 3:if(!HINTING_ENABLED){this.stack=[];break;}error=this.executeCommand(2,COMMAND_MAP.vstem);break;case 4:if(this.flexing){if(this.stack.length<1){error=true;break;}var dy=this.stack.pop();this.stack.push(0,dy);break;}error=this.executeCommand(1,COMMAND_MAP.vmoveto);break;case 5:error=this.executeCommand(2,COMMAND_MAP.rlineto);break;case 6:error=this.executeCommand(1,COMMAND_MAP.hlineto);break;case 7:error=this.executeCommand(1,COMMAND_MAP.vlineto);break;case 8:error=this.executeCommand(6,COMMAND_MAP.rrcurveto);break;case 9:this.stack=[];break;case 10:if(this.stack.length<1){error=true;break;}subrNumber=this.stack.pop();if(!subrs[subrNumber]){error=true;break;}error=this.convert(subrs[subrNumber],subrs,seacAnalysisEnabled);break;case 11:return error;case 13:if(this.stack.length<2){error=true;break;}wx=this.stack.pop();sbx=this.stack.pop();this.lsb=sbx;this.width=wx;this.stack.push(wx,sbx);error=this.executeCommand(2,COMMAND_MAP.hmoveto);break;case 14:this.output.push(COMMAND_MAP.endchar[0]);break;case 21:if(this.flexing){break;}error=this.executeCommand(2,COMMAND_MAP.rmoveto);break;case 22:if(this.flexing){this.stack.push(0);break;}error=this.executeCommand(1,COMMAND_MAP.hmoveto);break;case 30:error=this.executeCommand(4,COMMAND_MAP.vhcurveto);break;case 31:error=this.executeCommand(4,COMMAND_MAP.hvcurveto);break;case(12<<8)+0:this.stack=[];break;case(12<<8)+1:if(!HINTING_ENABLED){this.stack=[];break;}error=this.executeCommand(2,COMMAND_MAP.vstem);break;case(12<<8)+2:if(!HINTING_ENABLED){this.stack=[];break;}error=this.executeCommand(2,COMMAND_MAP.hstem);break;case(12<<8)+6:if(seacAnalysisEnabled){var asb=this.stack.at(-5);this.seac=this.stack.splice(-4,4);this.seac[0]+=this.lsb-asb;error=this.executeCommand(0,COMMAND_MAP.endchar);}else{error=this.executeCommand(4,COMMAND_MAP.endchar);}break;case(12<<8)+7:if(this.stack.length<4){error=true;break;}this.stack.pop();wx=this.stack.pop();var sby=this.stack.pop();sbx=this.stack.pop();this.lsb=sbx;this.width=wx;this.stack.push(wx,sbx,sby);error=this.executeCommand(3,COMMAND_MAP.rmoveto);break;case(12<<8)+12:if(this.stack.length<2){error=true;break;}var num2=this.stack.pop();var num1=this.stack.pop();this.stack.push(num1/num2);break;case(12<<8)+16:if(this.stack.length<2){error=true;break;}subrNumber=this.stack.pop();var numArgs=this.stack.pop();if(subrNumber===0&&numArgs===3){var flexArgs=this.stack.splice(-17,17);this.stack.push(flexArgs[2]+flexArgs[0],flexArgs[3]+flexArgs[1],flexArgs[4],flexArgs[5],flexArgs[6],flexArgs[7],flexArgs[8],flexArgs[9],flexArgs[10],flexArgs[11],flexArgs[12],flexArgs[13],flexArgs[14]);error=this.executeCommand(13,COMMAND_MAP.flex,true);this.flexing=false;this.stack.push(flexArgs[15],flexArgs[16]);}else if(subrNumber===1&&numArgs===0){this.flexing=true;}break;case(12<<8)+17:break;case(12<<8)+33:this.stack=[];break;default:warn(\'Unknown type 1 charstring command of "\'+value+\'"\');break;}if(error){break;}continue;}else if(value<=246){value-=139;}else if(value<=250){value=(value-247)*256+encoded[++i]+108;}else if(value<=254){value=-((value-251)*256)-encoded[++i]-108;}else{value=(encoded[++i]&0xff)<<24|(encoded[++i]&0xff)<<16|(encoded[++i]&0xff)<<8|(encoded[++i]&0xff)<<0;}this.stack.push(value);}return error;}},{key:"executeCommand",value:function executeCommand(howManyArgs,command,keepStack){var _this$output;var stackLength=this.stack.length;if(howManyArgs>stackLength){return true;}var start=stackLength-howManyArgs;for(var i=start;i<stackLength;i++){var value=this.stack[i];if(Number.isInteger(value)){this.output.push(28,value>>8&0xff,value&0xff);}else{value=65536*value|0;this.output.push(255,value>>24&0xff,value>>16&0xff,value>>8&0xff,value&0xff);}}(_this$output=this.output).push.apply(_this$output,_toConsumableArray(command));if(keepStack){this.stack.splice(start,howManyArgs);}else{this.stack.length=0;}return false;}}]);}();var EEXEC_ENCRYPT_KEY=55665;var CHAR_STRS_ENCRYPT_KEY=4330;function isHexDigit(code){return code>=48&&code<=57||code>=65&&code<=70||code>=97&&code<=102;}function decrypt(data,key,discardNumber){if(discardNumber>=data.length){return new Uint8Array(0);}var c1=52845,c2=22719;var r=key|0,i,j;for(i=0;i<discardNumber;i++){r=(data[i]+r)*c1+c2&(1<<16)-1;}var count=data.length-discardNumber;var decrypted=new Uint8Array(count);for(i=discardNumber,j=0;j<count;i++,j++){var value=data[i];decrypted[j]=value^r>>8;r=(value+r)*c1+c2&(1<<16)-1;}return decrypted;}function decryptAscii(data,key,discardNumber){var c1=52845,c2=22719;var r=key|0;var count=data.length,maybeLength=count>>>1;var decrypted=new Uint8Array(maybeLength);var i,j;for(i=0,j=0;i<count;i++){var digit1=data[i];if(!isHexDigit(digit1)){continue;}i++;var digit2=void 0;while(i<count&&!isHexDigit(digit2=data[i])){i++;}if(i<count){var value=parseInt(String.fromCharCode(digit1,digit2),16);decrypted[j++]=value^r>>8;r=(value+r)*c1+c2&(1<<16)-1;}}return decrypted.slice(discardNumber,j);}function isSpecial(c){return c===0x2f||c===0x5b||c===0x5d||c===0x7b||c===0x7d||c===0x28||c===0x29;}var Type1Parser=/*#__PURE__*/function(){function Type1Parser(stream,encrypted,seacAnalysisEnabled){_classCallCheck(this,Type1Parser);if(encrypted){var data=stream.getBytes();var isBinary=!((isHexDigit(data[0])||isWhiteSpace(data[0]))&&isHexDigit(data[1])&&isHexDigit(data[2])&&isHexDigit(data[3])&&isHexDigit(data[4])&&isHexDigit(data[5])&&isHexDigit(data[6])&&isHexDigit(data[7]));stream=new Stream(isBinary?decrypt(data,EEXEC_ENCRYPT_KEY,4):decryptAscii(data,EEXEC_ENCRYPT_KEY,4));}this.seacAnalysisEnabled=!!seacAnalysisEnabled;this.stream=stream;this.nextChar();}return _createClass(Type1Parser,[{key:"readNumberArray",value:function readNumberArray(){this.getToken();var array=[];while(true){var token=this.getToken();if(token===null||token==="]"||token==="}"){break;}array.push(parseFloat(token||0));}return array;}},{key:"readNumber",value:function readNumber(){var token=this.getToken();return parseFloat(token||0);}},{key:"readInt",value:function readInt(){var token=this.getToken();return parseInt(token||0,10)|0;}},{key:"readBoolean",value:function readBoolean(){var token=this.getToken();return token==="true"?1:0;}},{key:"nextChar",value:function nextChar(){return this.currentChar=this.stream.getByte();}},{key:"prevChar",value:function prevChar(){this.stream.skip(-2);return this.currentChar=this.stream.getByte();}},{key:"getToken",value:function getToken(){var comment=false;var ch=this.currentChar;while(true){if(ch===-1){return null;}if(comment){if(ch===0x0a||ch===0x0d){comment=false;}}else if(ch===0x25){comment=true;}else if(!isWhiteSpace(ch)){break;}ch=this.nextChar();}if(isSpecial(ch)){this.nextChar();return String.fromCharCode(ch);}var token="";do{token+=String.fromCharCode(ch);ch=this.nextChar();}while(ch>=0&&!isWhiteSpace(ch)&&!isSpecial(ch));return token;}},{key:"readCharStrings",value:function readCharStrings(bytes,lenIV){if(lenIV===-1){return bytes;}return decrypt(bytes,CHAR_STRS_ENCRYPT_KEY,lenIV);}},{key:"extractFontProgram",value:function extractFontProgram(properties){var stream=this.stream;var subrs=[],charstrings=[];var privateData=Object.create(null);privateData.lenIV=4;var program={subrs:[],charstrings:[],properties:{privateData:privateData}};var token,length,data,lenIV;while((token=this.getToken())!==null){if(token!=="/"){continue;}token=this.getToken();switch(token){case"CharStrings":this.getToken();this.getToken();this.getToken();this.getToken();while(true){token=this.getToken();if(token===null||token==="end"){break;}if(token!=="/"){continue;}var glyph=this.getToken();length=this.readInt();this.getToken();data=length>0?stream.getBytes(length):new Uint8Array(0);lenIV=program.properties.privateData.lenIV;var encoded=this.readCharStrings(data,lenIV);this.nextChar();token=this.getToken();if(token==="noaccess"){this.getToken();}else if(token==="/"){this.prevChar();}charstrings.push({glyph:glyph,encoded:encoded});}break;case"Subrs":this.readInt();this.getToken();while(this.getToken()==="dup"){var index=this.readInt();length=this.readInt();this.getToken();data=length>0?stream.getBytes(length):new Uint8Array(0);lenIV=program.properties.privateData.lenIV;var _encoded=this.readCharStrings(data,lenIV);this.nextChar();token=this.getToken();if(token==="noaccess"){this.getToken();}subrs[index]=_encoded;}break;case"BlueValues":case"OtherBlues":case"FamilyBlues":case"FamilyOtherBlues":var blueArray=this.readNumberArray();if(blueArray.length>0&&blueArray.length%2===0&&HINTING_ENABLED){program.properties.privateData[token]=blueArray;}break;case"StemSnapH":case"StemSnapV":program.properties.privateData[token]=this.readNumberArray();break;case"StdHW":case"StdVW":program.properties.privateData[token]=this.readNumberArray()[0];break;case"BlueShift":case"lenIV":case"BlueFuzz":case"BlueScale":case"LanguageGroup":program.properties.privateData[token]=this.readNumber();break;case"ExpansionFactor":program.properties.privateData[token]=this.readNumber()||0.06;break;case"ForceBold":program.properties.privateData[token]=this.readBoolean();break;}}for(var _i32=0,_charstrings=charstrings;_i32<_charstrings.length;_i32++){var _charstrings$_i=_charstrings[_i32],_encoded2=_charstrings$_i.encoded,_glyph=_charstrings$_i.glyph;var charString=new Type1CharString();var error=charString.convert(_encoded2,subrs,this.seacAnalysisEnabled);var output=charString.output;if(error){output=[14];}var charStringObject={glyphName:_glyph,charstring:output,width:charString.width,lsb:charString.lsb,seac:charString.seac};if(_glyph===".notdef"){program.charstrings.unshift(charStringObject);}else{program.charstrings.push(charStringObject);}if(properties.builtInEncoding){var _index=properties.builtInEncoding.indexOf(_glyph);if(_index>-1&&properties.widths[_index]===undefined&&_index>=properties.firstChar&&_index<=properties.lastChar){properties.widths[_index]=charString.width;}}}return program;}},{key:"extractFontHeader",value:function extractFontHeader(properties){var token;while((token=this.getToken())!==null){if(token!=="/"){continue;}token=this.getToken();switch(token){case"FontMatrix":var matrix=this.readNumberArray();properties.fontMatrix=matrix;break;case"Encoding":var encodingArg=this.getToken();var encoding=void 0;if(!/^\\d+$/.test(encodingArg)){encoding=getEncoding(encodingArg);}else{encoding=[];var size=parseInt(encodingArg,10)|0;this.getToken();for(var j=0;j<size;j++){token=this.getToken();while(token!=="dup"&&token!=="def"){token=this.getToken();if(token===null){return;}}if(token==="def"){break;}var index=this.readInt();this.getToken();var glyph=this.getToken();encoding[index]=glyph;this.getToken();}}properties.builtInEncoding=encoding;break;case"FontBBox":var fontBBox=this.readNumberArray();properties.ascent=Math.max(fontBBox[3],fontBBox[1]);properties.descent=Math.min(fontBBox[1],fontBBox[3]);properties.ascentScaled=true;break;}}}}]);}();;// ./src/core/type1_font.js\nfunction findBlock(streamBytes,signature,startIndex){var streamBytesLength=streamBytes.length;var signatureLength=signature.length;var scanLength=streamBytesLength-signatureLength;var i=startIndex,found=false;while(i<scanLength){var j=0;while(j<signatureLength&&streamBytes[i+j]===signature[j]){j++;}if(j>=signatureLength){i+=j;while(i<streamBytesLength&&isWhiteSpace(streamBytes[i])){i++;}found=true;break;}i++;}return{found:found,length:i};}function getHeaderBlock(stream,suggestedLength){var EEXEC_SIGNATURE=[0x65,0x65,0x78,0x65,0x63];var streamStartPos=stream.pos;var headerBytes,headerBytesLength,block;try{headerBytes=stream.getBytes(suggestedLength);headerBytesLength=headerBytes.length;}catch(_unused7){}if(headerBytesLength===suggestedLength){block=findBlock(headerBytes,EEXEC_SIGNATURE,suggestedLength-2*EEXEC_SIGNATURE.length);if(block.found&&block.length===suggestedLength){return{stream:new Stream(headerBytes),length:suggestedLength};}}warn(\'Invalid "Length1" property in Type1 font -- trying to recover.\');stream.pos=streamStartPos;var SCAN_BLOCK_LENGTH=2048;var actualLength;while(true){var scanBytes=stream.peekBytes(SCAN_BLOCK_LENGTH);block=findBlock(scanBytes,EEXEC_SIGNATURE,0);if(block.length===0){break;}stream.pos+=block.length;if(block.found){actualLength=stream.pos-streamStartPos;break;}}stream.pos=streamStartPos;if(actualLength){return{stream:new Stream(stream.getBytes(actualLength)),length:actualLength};}warn(\'Unable to recover "Length1" property in Type1 font -- using as is.\');return{stream:new Stream(stream.getBytes(suggestedLength)),length:suggestedLength};}function getEexecBlock(stream,suggestedLength){var eexecBytes=stream.getBytes();if(eexecBytes.length===0){throw new FormatError("getEexecBlock - no font program found.");}return{stream:new Stream(eexecBytes),length:eexecBytes.length};}var Type1Font=/*#__PURE__*/function(){function Type1Font(name,file,properties){_classCallCheck(this,Type1Font);var PFB_HEADER_SIZE=6;var headerBlockLength=properties.length1;var eexecBlockLength=properties.length2;var pfbHeader=file.peekBytes(PFB_HEADER_SIZE);var pfbHeaderPresent=pfbHeader[0]===0x80&&pfbHeader[1]===0x01;if(pfbHeaderPresent){file.skip(PFB_HEADER_SIZE);headerBlockLength=pfbHeader[5]<<24|pfbHeader[4]<<16|pfbHeader[3]<<8|pfbHeader[2];}var headerBlock=getHeaderBlock(file,headerBlockLength);var headerBlockParser=new Type1Parser(headerBlock.stream,false,SEAC_ANALYSIS_ENABLED);headerBlockParser.extractFontHeader(properties);if(pfbHeaderPresent){pfbHeader=file.getBytes(PFB_HEADER_SIZE);eexecBlockLength=pfbHeader[5]<<24|pfbHeader[4]<<16|pfbHeader[3]<<8|pfbHeader[2];}var eexecBlock=getEexecBlock(file,eexecBlockLength);var eexecBlockParser=new Type1Parser(eexecBlock.stream,true,SEAC_ANALYSIS_ENABLED);var data=eexecBlockParser.extractFontProgram(properties);for(var key in data.properties){properties[key]=data.properties[key];}var charstrings=data.charstrings;var type2Charstrings=this.getType2Charstrings(charstrings);var subrs=this.getType2Subrs(data.subrs);this.charstrings=charstrings;this.data=this.wrap(name,type2Charstrings,this.charstrings,subrs,properties);this.seacs=this.getSeacs(data.charstrings);}return _createClass(Type1Font,[{key:"numGlyphs",get:function get(){return this.charstrings.length+1;}},{key:"getCharset",value:function getCharset(){var charset=[".notdef"];var _iterator45=_createForOfIteratorHelper(this.charstrings),_step45;try{for(_iterator45.s();!(_step45=_iterator45.n()).done;){var glyphName=_step45.value.glyphName;charset.push(glyphName);}}catch(err){_iterator45.e(err);}finally{_iterator45.f();}return charset;}},{key:"getGlyphMapping",value:function getGlyphMapping(properties){var charstrings=this.charstrings;if(properties.composite){var charCodeToGlyphId=Object.create(null);for(var _glyphId=0,charstringsLen=charstrings.length;_glyphId<charstringsLen;_glyphId++){var charCode=properties.cMap.charCodeOf(_glyphId);charCodeToGlyphId[charCode]=_glyphId+1;}return charCodeToGlyphId;}var glyphNames=[".notdef"];var builtInEncoding,glyphId;for(glyphId=0;glyphId<charstrings.length;glyphId++){glyphNames.push(charstrings[glyphId].glyphName);}var encoding=properties.builtInEncoding;if(encoding){builtInEncoding=Object.create(null);for(var _charCode in encoding){glyphId=glyphNames.indexOf(encoding[_charCode]);if(glyphId>=0){builtInEncoding[_charCode]=glyphId;}}}return type1FontGlyphMapping(properties,builtInEncoding,glyphNames);}},{key:"hasGlyphId",value:function hasGlyphId(id){if(id<0||id>=this.numGlyphs){return false;}if(id===0){return true;}var glyph=this.charstrings[id-1];return glyph.charstring.length>0;}},{key:"getSeacs",value:function getSeacs(charstrings){var seacMap=[];for(var i=0,ii=charstrings.length;i<ii;i++){var charstring=charstrings[i];if(charstring.seac){seacMap[i+1]=charstring.seac;}}return seacMap;}},{key:"getType2Charstrings",value:function getType2Charstrings(type1Charstrings){var type2Charstrings=[];var _iterator46=_createForOfIteratorHelper(type1Charstrings),_step46;try{for(_iterator46.s();!(_step46=_iterator46.n()).done;){var type1Charstring=_step46.value;type2Charstrings.push(type1Charstring.charstring);}}catch(err){_iterator46.e(err);}finally{_iterator46.f();}return type2Charstrings;}},{key:"getType2Subrs",value:function getType2Subrs(type1Subrs){var bias=0;var count=type1Subrs.length;if(count<1133){bias=107;}else if(count<33769){bias=1131;}else{bias=32768;}var type2Subrs=[];var i;for(i=0;i<bias;i++){type2Subrs.push([0x0b]);}for(i=0;i<count;i++){type2Subrs.push(type1Subrs[i]);}return type2Subrs;}},{key:"wrap",value:function wrap(name,glyphs,charstrings,subrs,properties){var cff=new CFF();cff.header=new CFFHeader(1,0,4,4);cff.names=[name];var topDict=new CFFTopDict();topDict.setByName("version",391);topDict.setByName("Notice",392);topDict.setByName("FullName",393);topDict.setByName("FamilyName",394);topDict.setByName("Weight",395);topDict.setByName("Encoding",null);topDict.setByName("FontMatrix",properties.fontMatrix);topDict.setByName("FontBBox",properties.bbox);topDict.setByName("charset",null);topDict.setByName("CharStrings",null);topDict.setByName("Private",null);cff.topDict=topDict;var strings=new CFFStrings();strings.add("Version 0.11");strings.add("See original notice");strings.add(name);strings.add(name);strings.add("Medium");cff.strings=strings;cff.globalSubrIndex=new CFFIndex();var count=glyphs.length;var charsetArray=[".notdef"];var i,ii;for(i=0;i<count;i++){var glyphName=charstrings[i].glyphName;var index=CFFStandardStrings.indexOf(glyphName);if(index===-1){strings.add(glyphName);}charsetArray.push(glyphName);}cff.charset=new CFFCharset(false,0,charsetArray);var charStringsIndex=new CFFIndex();charStringsIndex.add([0x8b,0x0e]);for(i=0;i<count;i++){charStringsIndex.add(glyphs[i]);}cff.charStrings=charStringsIndex;var privateDict=new CFFPrivateDict();privateDict.setByName("Subrs",null);var fields=["BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StemSnapH","StemSnapV","BlueShift","BlueFuzz","BlueScale","LanguageGroup","ExpansionFactor","ForceBold","StdHW","StdVW"];for(i=0,ii=fields.length;i<ii;i++){var field=fields[i];if(!(field in properties.privateData)){continue;}var value=properties.privateData[field];if(Array.isArray(value)){for(var j=value.length-1;j>0;j--){value[j]-=value[j-1];}}privateDict.setByName(field,value);}cff.topDict.privateDict=privateDict;var subrIndex=new CFFIndex();for(i=0,ii=subrs.length;i<ii;i++){subrIndex.add(subrs[i]);}privateDict.subrsIndex=subrIndex;var compiler=new CFFCompiler(cff);return compiler.compile();}}]);}();;// ./src/core/fonts.js\nvar PRIVATE_USE_AREAS=[[0xe000,0xf8ff],[0x100000,0x10fffd]];var PDF_GLYPH_SPACE_UNITS=1000;var EXPORT_DATA_PROPERTIES=["ascent","bbox","black","bold","charProcOperatorList","composite","cssFontInfo","data","defaultVMetrics","defaultWidth","descent","disableFontFace","fallbackName","fontExtraProperties","fontMatrix","isInvalidPDFjsFont","isType3Font","italic","loadedName","mimetype","missingFile","name","remeasure","subtype","systemFontInfo","type","vertical"];var EXPORT_DATA_EXTRA_PROPERTIES=["cMap","defaultEncoding","differences","isMonospace","isSerifFont","isSymbolicFont","seacMap","toFontChar","toUnicode","vmetrics","widths"];function adjustWidths(properties){if(!properties.fontMatrix){return;}if(properties.fontMatrix[0]===FONT_IDENTITY_MATRIX[0]){return;}var scale=0.001/properties.fontMatrix[0];var glyphsWidths=properties.widths;for(var glyph in glyphsWidths){glyphsWidths[glyph]*=scale;}properties.defaultWidth*=scale;}function adjustTrueTypeToUnicode(properties,isSymbolicFont,nameRecords){if(properties.isInternalFont){return;}if(properties.hasIncludedToUnicodeMap){return;}if(properties.hasEncoding){return;}if(properties.toUnicode instanceof IdentityToUnicodeMap){return;}if(!isSymbolicFont){return;}if(nameRecords.length===0){return;}if(properties.defaultEncoding===WinAnsiEncoding){return;}var _iterator47=_createForOfIteratorHelper(nameRecords),_step47;try{for(_iterator47.s();!(_step47=_iterator47.n()).done;){var r=_step47.value;if(!isWinNameRecord(r)){return;}}}catch(err){_iterator47.e(err);}finally{_iterator47.f();}var encoding=WinAnsiEncoding;var toUnicode=[],glyphsUnicodeMap=getGlyphsUnicode();for(var charCode in encoding){var glyphName=encoding[charCode];if(glyphName===""){continue;}var unicode=glyphsUnicodeMap[glyphName];if(unicode===undefined){continue;}toUnicode[charCode]=String.fromCharCode(unicode);}if(toUnicode.length>0){properties.toUnicode.amend(toUnicode);}}function adjustType1ToUnicode(properties,builtInEncoding){if(properties.isInternalFont){return;}if(properties.hasIncludedToUnicodeMap){return;}if(builtInEncoding===properties.defaultEncoding){return;}if(properties.toUnicode instanceof IdentityToUnicodeMap){return;}var toUnicode=[],glyphsUnicodeMap=getGlyphsUnicode();for(var charCode in builtInEncoding){if(properties.hasEncoding){if(properties.baseEncodingName||properties.differences[charCode]!==undefined){continue;}}var glyphName=builtInEncoding[charCode];var unicode=getUnicodeForGlyph(glyphName,glyphsUnicodeMap);if(unicode!==-1){toUnicode[charCode]=String.fromCharCode(unicode);}}if(toUnicode.length>0){properties.toUnicode.amend(toUnicode);}}function amendFallbackToUnicode(properties){if(!properties.fallbackToUnicode){return;}if(properties.toUnicode instanceof IdentityToUnicodeMap){return;}var toUnicode=[];for(var charCode in properties.fallbackToUnicode){if(properties.toUnicode.has(charCode)){continue;}toUnicode[charCode]=properties.fallbackToUnicode[charCode];}if(toUnicode.length>0){properties.toUnicode.amend(toUnicode);}}var fonts_Glyph=/*#__PURE__*/function(){function fonts_Glyph(originalCharCode,fontChar,unicode,accent,width,vmetric,operatorListId,isSpace,isInFont){_classCallCheck(this,fonts_Glyph);this.originalCharCode=originalCharCode;this.fontChar=fontChar;this.unicode=unicode;this.accent=accent;this.width=width;this.vmetric=vmetric;this.operatorListId=operatorListId;this.isSpace=isSpace;this.isInFont=isInFont;}return _createClass(fonts_Glyph,[{key:"category",get:function get(){return shadow(this,"category",getCharUnicodeCategory(this.unicode),true);}}]);}();function int16(b0,b1){return(b0<<8)+b1;}function writeSignedInt16(bytes,index,value){bytes[index+1]=value;bytes[index]=value>>>8;}function signedInt16(b0,b1){var value=(b0<<8)+b1;return value&1<<15?value-0x10000:value;}function writeUint32(bytes,index,value){bytes[index+3]=value&0xff;bytes[index+2]=value>>>8;bytes[index+1]=value>>>16;bytes[index]=value>>>24;}function int32(b0,b1,b2,b3){return(b0<<24)+(b1<<16)+(b2<<8)+b3;}function string16(value){return String.fromCharCode(value>>8&0xff,value&0xff);}function safeString16(value){if(value>0x7fff){value=0x7fff;}else if(value<-0x8000){value=-0x8000;}return String.fromCharCode(value>>8&0xff,value&0xff);}function isTrueTypeFile(file){var header=file.peekBytes(4);return readUint32(header,0)===0x00010000||bytesToString(header)==="true";}function isTrueTypeCollectionFile(file){var header=file.peekBytes(4);return bytesToString(header)==="ttcf";}function isOpenTypeFile(file){var header=file.peekBytes(4);return bytesToString(header)==="OTTO";}function isType1File(file){var header=file.peekBytes(2);if(header[0]===0x25&&header[1]===0x21){return true;}if(header[0]===0x80&&header[1]===0x01){return true;}return false;}function isCFFFile(file){var header=file.peekBytes(4);if(header[0]>=1&&header[3]>=1&&header[3]<=4){return true;}return false;}function getFontFileType(file,_ref39){var type=_ref39.type,subtype=_ref39.subtype,composite=_ref39.composite;var fileType,fileSubtype;if(isTrueTypeFile(file)||isTrueTypeCollectionFile(file)){fileType=composite?"CIDFontType2":"TrueType";}else if(isOpenTypeFile(file)){fileType=composite?"CIDFontType2":"OpenType";}else if(isType1File(file)){if(composite){fileType="CIDFontType0";}else{fileType=type==="MMType1"?"MMType1":"Type1";}}else if(isCFFFile(file)){if(composite){fileType="CIDFontType0";fileSubtype="CIDFontType0C";}else{fileType=type==="MMType1"?"MMType1":"Type1";fileSubtype="Type1C";}}else{warn("getFontFileType: Unable to detect correct font file Type/Subtype.");fileType=type;fileSubtype=subtype;}return[fileType,fileSubtype];}function applyStandardFontGlyphMap(map,glyphMap){for(var charCode in glyphMap){map[+charCode]=glyphMap[charCode];}}function buildToFontChar(encoding,glyphsUnicodeMap,differences){var toFontChar=[];var unicode;for(var i=0,ii=encoding.length;i<ii;i++){unicode=getUnicodeForGlyph(encoding[i],glyphsUnicodeMap);if(unicode!==-1){toFontChar[i]=unicode;}}for(var charCode in differences){unicode=getUnicodeForGlyph(differences[charCode],glyphsUnicodeMap);if(unicode!==-1){toFontChar[+charCode]=unicode;}}return toFontChar;}function isMacNameRecord(r){return r.platform===1&&r.encoding===0&&r.language===0;}function isWinNameRecord(r){return r.platform===3&&r.encoding===1&&r.language===0x409;}function convertCidString(charCode,cid){var shouldThrow=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;switch(cid.length){case 1:return cid.charCodeAt(0);case 2:return cid.charCodeAt(0)<<8|cid.charCodeAt(1);}var msg="Unsupported CID string (charCode ".concat(charCode,"): \\"").concat(cid,"\\".");if(shouldThrow){throw new FormatError(msg);}warn(msg);return cid;}function adjustMapping(charCodeToGlyphId,hasGlyph,newGlyphZeroId,toUnicode){var newMap=Object.create(null);var toUnicodeExtraMap=new Map();var toFontChar=[];var usedGlyphIds=new Set();var privateUseAreaIndex=0;var privateUseOffetStart=PRIVATE_USE_AREAS[privateUseAreaIndex][0];var nextAvailableFontCharCode=privateUseOffetStart;var privateUseOffetEnd=PRIVATE_USE_AREAS[privateUseAreaIndex][1];var isInPrivateArea=function isInPrivateArea(code){return PRIVATE_USE_AREAS[0][0]<=code&&code<=PRIVATE_USE_AREAS[0][1]||PRIVATE_USE_AREAS[1][0]<=code&&code<=PRIVATE_USE_AREAS[1][1];};var LIGATURE_TO_UNICODE=null;for(var originalCharCode in charCodeToGlyphId){var glyphId=charCodeToGlyphId[originalCharCode];if(!hasGlyph(glyphId)){continue;}if(nextAvailableFontCharCode>privateUseOffetEnd){privateUseAreaIndex++;if(privateUseAreaIndex>=PRIVATE_USE_AREAS.length){warn("Ran out of space in font private use area.");break;}nextAvailableFontCharCode=PRIVATE_USE_AREAS[privateUseAreaIndex][0];privateUseOffetEnd=PRIVATE_USE_AREAS[privateUseAreaIndex][1];}var fontCharCode=nextAvailableFontCharCode++;if(glyphId===0){glyphId=newGlyphZeroId;}var unicode=toUnicode.get(originalCharCode);if(typeof unicode==="string"){if(unicode.length===1){unicode=unicode.codePointAt(0);}else{if(!LIGATURE_TO_UNICODE){LIGATURE_TO_UNICODE=new Map();for(var i=0xfb00;i<=0xfb4f;i++){var normalized=String.fromCharCode(i).normalize("NFKD");if(normalized.length>1){LIGATURE_TO_UNICODE.set(normalized,i);}}}unicode=LIGATURE_TO_UNICODE.get(unicode)||unicode.codePointAt(0);}}if(unicode&&!isInPrivateArea(unicode)&&!usedGlyphIds.has(glyphId)){toUnicodeExtraMap.set(unicode,glyphId);usedGlyphIds.add(glyphId);}newMap[fontCharCode]=glyphId;toFontChar[originalCharCode]=fontCharCode;}return{toFontChar:toFontChar,charCodeToGlyphId:newMap,toUnicodeExtraMap:toUnicodeExtraMap,nextAvailableFontCharCode:nextAvailableFontCharCode};}function getRanges(glyphs,toUnicodeExtraMap,numGlyphs){var codes=[];for(var charCode in glyphs){if(glyphs[charCode]>=numGlyphs){continue;}codes.push({fontCharCode:charCode|0,glyphId:glyphs[charCode]});}if(toUnicodeExtraMap){var _iterator48=_createForOfIteratorHelper(toUnicodeExtraMap),_step48;try{for(_iterator48.s();!(_step48=_iterator48.n()).done;){var _step48$value=_slicedToArray(_step48.value,2),unicode=_step48$value[0],glyphId=_step48$value[1];if(glyphId>=numGlyphs){continue;}codes.push({fontCharCode:unicode,glyphId:glyphId});}}catch(err){_iterator48.e(err);}finally{_iterator48.f();}}if(codes.length===0){codes.push({fontCharCode:0,glyphId:0});}codes.sort(function fontGetRangesSort(a,b){return a.fontCharCode-b.fontCharCode;});var ranges=[];var length=codes.length;for(var n=0;n<length;){var start=codes[n].fontCharCode;var codeIndices=[codes[n].glyphId];++n;var end=start;while(n<length&&end+1===codes[n].fontCharCode){codeIndices.push(codes[n].glyphId);++end;++n;if(end===0xffff){break;}}ranges.push([start,end,codeIndices]);}return ranges;}function createCmapTable(glyphs,toUnicodeExtraMap,numGlyphs){var ranges=getRanges(glyphs,toUnicodeExtraMap,numGlyphs);var numTables=ranges.at(-1)[1]>0xffff?2:1;var cmap="\\x00\\x00"+string16(numTables)+"\\x00\\x03"+"\\x00\\x01"+string32(4+numTables*8);var i,ii,j,jj;for(i=ranges.length-1;i>=0;--i){if(ranges[i][0]<=0xffff){break;}}var bmpLength=i+1;if(ranges[i][0]<0xffff&&ranges[i][1]===0xffff){ranges[i][1]=0xfffe;}var trailingRangesCount=ranges[i][1]<0xffff?1:0;var segCount=bmpLength+trailingRangesCount;var searchParams=OpenTypeFileBuilder.getSearchParams(segCount,2);var startCount="";var endCount="";var idDeltas="";var idRangeOffsets="";var glyphsIds="";var bias=0;var range,start,end,codes;for(i=0,ii=bmpLength;i<ii;i++){range=ranges[i];start=range[0];end=range[1];startCount+=string16(start);endCount+=string16(end);codes=range[2];var contiguous=true;for(j=1,jj=codes.length;j<jj;++j){if(codes[j]!==codes[j-1]+1){contiguous=false;break;}}if(!contiguous){var offset=(segCount-i)*2+bias*2;bias+=end-start+1;idDeltas+=string16(0);idRangeOffsets+=string16(offset);for(j=0,jj=codes.length;j<jj;++j){glyphsIds+=string16(codes[j]);}}else{var startCode=codes[0];idDeltas+=string16(startCode-start&0xffff);idRangeOffsets+=string16(0);}}if(trailingRangesCount>0){endCount+="\\xFF\\xFF";startCount+="\\xFF\\xFF";idDeltas+="\\x00\\x01";idRangeOffsets+="\\x00\\x00";}var format314="\\x00\\x00"+string16(2*segCount)+string16(searchParams.range)+string16(searchParams.entry)+string16(searchParams.rangeShift)+endCount+"\\x00\\x00"+startCount+idDeltas+idRangeOffsets+glyphsIds;var format31012="";var header31012="";if(numTables>1){cmap+="\\x00\\x03"+"\\x00\\x0A"+string32(4+numTables*8+4+format314.length);format31012="";for(i=0,ii=ranges.length;i<ii;i++){range=ranges[i];start=range[0];codes=range[2];var code=codes[0];for(j=1,jj=codes.length;j<jj;++j){if(codes[j]!==codes[j-1]+1){end=range[0]+j-1;format31012+=string32(start)+string32(end)+string32(code);start=end+1;code=codes[j];}}format31012+=string32(start)+string32(range[1])+string32(code);}header31012="\\x00\\x0C"+"\\x00\\x00"+string32(format31012.length+16)+"\\x00\\x00\\x00\\x00"+string32(format31012.length/12);}return cmap+"\\x00\\x04"+string16(format314.length+4)+format314+header31012+format31012;}function validateOS2Table(os2,file){file.pos=(file.start||0)+os2.offset;var version=file.getUint16();file.skip(60);var selection=file.getUint16();if(version<4&&selection&0x0300){return false;}var firstChar=file.getUint16();var lastChar=file.getUint16();if(firstChar>lastChar){return false;}file.skip(6);var usWinAscent=file.getUint16();if(usWinAscent===0){return false;}os2.data[8]=os2.data[9]=0;return true;}function createOS2Table(properties,charstrings,override){override||(override={unitsPerEm:0,yMax:0,yMin:0,ascent:0,descent:0});var ulUnicodeRange1=0;var ulUnicodeRange2=0;var ulUnicodeRange3=0;var ulUnicodeRange4=0;var firstCharIndex=null;var lastCharIndex=0;var position=-1;if(charstrings){for(var code in charstrings){code|=0;if(firstCharIndex>code||!firstCharIndex){firstCharIndex=code;}if(lastCharIndex<code){lastCharIndex=code;}position=getUnicodeRangeFor(code,position);if(position<32){ulUnicodeRange1|=1<<position;}else if(position<64){ulUnicodeRange2|=1<<position-32;}else if(position<96){ulUnicodeRange3|=1<<position-64;}else if(position<123){ulUnicodeRange4|=1<<position-96;}else{throw new FormatError("Unicode ranges Bits > 123 are reserved for internal usage");}}if(lastCharIndex>0xffff){lastCharIndex=0xffff;}}else{firstCharIndex=0;lastCharIndex=255;}var bbox=properties.bbox||[0,0,0,0];var unitsPerEm=override.unitsPerEm||(properties.fontMatrix?1/Math.max.apply(Math,_toConsumableArray(properties.fontMatrix.slice(0,4).map(Math.abs))):1000);var scale=properties.ascentScaled?1.0:unitsPerEm/PDF_GLYPH_SPACE_UNITS;var typoAscent=override.ascent||Math.round(scale*(properties.ascent||bbox[3]));var typoDescent=override.descent||Math.round(scale*(properties.descent||bbox[1]));if(typoDescent>0&&properties.descent>0&&bbox[1]<0){typoDescent=-typoDescent;}var winAscent=override.yMax||typoAscent;var winDescent=-override.yMin||-typoDescent;return"\\x00\\x03"+"\\x02\\x24"+"\\x01\\xF4"+"\\x00\\x05"+"\\x00\\x00"+"\\x02\\x8A"+"\\x02\\xBB"+"\\x00\\x00"+"\\x00\\x8C"+"\\x02\\x8A"+"\\x02\\xBB"+"\\x00\\x00"+"\\x01\\xDF"+"\\x00\\x31"+"\\x01\\x02"+"\\x00\\x00"+"\\x00\\x00\\x06"+String.fromCharCode(properties.fixedPitch?0x09:0x00)+"\\x00\\x00\\x00\\x00\\x00\\x00"+string32(ulUnicodeRange1)+string32(ulUnicodeRange2)+string32(ulUnicodeRange3)+string32(ulUnicodeRange4)+"\\x2A\\x32\\x31\\x2A"+string16(properties.italicAngle?1:0)+string16(firstCharIndex||properties.firstChar)+string16(lastCharIndex||properties.lastChar)+string16(typoAscent)+string16(typoDescent)+"\\x00\\x64"+string16(winAscent)+string16(winDescent)+"\\x00\\x00\\x00\\x00"+"\\x00\\x00\\x00\\x00"+string16(properties.xHeight)+string16(properties.capHeight)+string16(0)+string16(firstCharIndex||properties.firstChar)+"\\x00\\x03";}function createPostTable(properties){var angle=Math.floor(properties.italicAngle*Math.pow(2,16));return"\\x00\\x03\\x00\\x00"+string32(angle)+"\\x00\\x00"+"\\x00\\x00"+string32(properties.fixedPitch?1:0)+"\\x00\\x00\\x00\\x00"+"\\x00\\x00\\x00\\x00"+"\\x00\\x00\\x00\\x00"+"\\x00\\x00\\x00\\x00";}function createPostscriptName(name){return name.replaceAll(/[^\\x21-\\x7E]|[[\\](){}<>/%]/g,"").slice(0,63);}function createNameTable(name,proto){if(!proto){proto=[[],[]];}var strings=[proto[0][0]||"Original licence",proto[0][1]||name,proto[0][2]||"Unknown",proto[0][3]||"uniqueID",proto[0][4]||name,proto[0][5]||"Version 0.11",proto[0][6]||createPostscriptName(name),proto[0][7]||"Unknown",proto[0][8]||"Unknown",proto[0][9]||"Unknown"];var stringsUnicode=[];var i,ii,j,jj,str;for(i=0,ii=strings.length;i<ii;i++){str=proto[1][i]||strings[i];var strBufUnicode=[];for(j=0,jj=str.length;j<jj;j++){strBufUnicode.push(string16(str.charCodeAt(j)));}stringsUnicode.push(strBufUnicode.join(""));}var names=[strings,stringsUnicode];var platforms=["\\x00\\x01","\\x00\\x03"];var encodings=["\\x00\\x00","\\x00\\x01"];var languages=["\\x00\\x00","\\x04\\x09"];var namesRecordCount=strings.length*platforms.length;var nameTable="\\x00\\x00"+string16(namesRecordCount)+string16(namesRecordCount*12+6);var strOffset=0;for(i=0,ii=platforms.length;i<ii;i++){var strs=names[i];for(j=0,jj=strs.length;j<jj;j++){str=strs[j];var nameRecord=platforms[i]+encodings[i]+languages[i]+string16(j)+string16(str.length)+string16(strOffset);nameTable+=nameRecord;strOffset+=str.length;}}nameTable+=strings.join("")+stringsUnicode.join("");return nameTable;}var Font=/*#__PURE__*/function(){function Font(name,file,properties,evaluatorOptions){var _this$systemFontInfo;_classCallCheck(this,Font);this.name=name;this.psName=null;this.mimetype=null;this.disableFontFace=evaluatorOptions.disableFontFace;this.fontExtraProperties=evaluatorOptions.fontExtraProperties;this.loadedName=properties.loadedName;this.isType3Font=properties.isType3Font;this.missingFile=false;this.cssFontInfo=properties.cssFontInfo;this._charsCache=Object.create(null);this._glyphCache=Object.create(null);var isSerifFont=!!(properties.flags&FontFlags.Serif);if(!isSerifFont&&!properties.isSimulatedFlags){var baseName=name.replaceAll(/[,_]/g,"-").split("-",1)[0],serifFonts=getSerifFonts();var _iterator49=_createForOfIteratorHelper(baseName.split("+")),_step49;try{for(_iterator49.s();!(_step49=_iterator49.n()).done;){var namePart=_step49.value;if(serifFonts[namePart]){isSerifFont=true;break;}}}catch(err){_iterator49.e(err);}finally{_iterator49.f();}}this.isSerifFont=isSerifFont;this.isSymbolicFont=!!(properties.flags&FontFlags.Symbolic);this.isMonospace=!!(properties.flags&FontFlags.FixedPitch);var type=properties.type,subtype=properties.subtype;this.type=type;this.subtype=subtype;this.systemFontInfo=properties.systemFontInfo;var matches=name.match(/^InvalidPDFjsFont_(.*)_\\d+$/);this.isInvalidPDFjsFont=!!matches;if(this.isInvalidPDFjsFont){this.fallbackName=matches[1];}else if(this.isMonospace){this.fallbackName="monospace";}else if(this.isSerifFont){this.fallbackName="serif";}else{this.fallbackName="sans-serif";}if((_this$systemFontInfo=this.systemFontInfo)!==null&&_this$systemFontInfo!==void 0&&_this$systemFontInfo.guessFallback){this.systemFontInfo.guessFallback=false;this.systemFontInfo.css+=",".concat(this.fallbackName);}this.differences=properties.differences;this.widths=properties.widths;this.defaultWidth=properties.defaultWidth;this.composite=properties.composite;this.cMap=properties.cMap;this.capHeight=properties.capHeight/PDF_GLYPH_SPACE_UNITS;this.ascent=properties.ascent/PDF_GLYPH_SPACE_UNITS;this.descent=properties.descent/PDF_GLYPH_SPACE_UNITS;this.lineHeight=this.ascent-this.descent;this.fontMatrix=properties.fontMatrix;this.bbox=properties.bbox;this.defaultEncoding=properties.defaultEncoding;this.toUnicode=properties.toUnicode;this.toFontChar=[];if(properties.type==="Type3"){for(var charCode=0;charCode<256;charCode++){this.toFontChar[charCode]=this.differences[charCode]||properties.defaultEncoding[charCode];}return;}this.cidEncoding=properties.cidEncoding||"";this.vertical=!!properties.vertical;if(this.vertical){this.vmetrics=properties.vmetrics;this.defaultVMetrics=properties.defaultVMetrics;}if(!file||file.isEmpty){if(file){warn(\'Font file is empty in "\'+name+\'" (\'+this.loadedName+")");}this.fallbackToSystemFont(properties);return;}var _getFontFileType=getFontFileType(file,properties);var _getFontFileType2=_slicedToArray(_getFontFileType,2);type=_getFontFileType2[0];subtype=_getFontFileType2[1];if(type!==this.type||subtype!==this.subtype){info("Inconsistent font file Type/SubType, expected: "+"".concat(this.type,"/").concat(this.subtype," but found: ").concat(type,"/").concat(subtype,"."));}var data;try{switch(type){case"MMType1":info("MMType1 font ("+name+"), falling back to Type1.");case"Type1":case"CIDFontType0":this.mimetype="font/opentype";var cff=subtype==="Type1C"||subtype==="CIDFontType0C"?new CFFFont(file,properties):new Type1Font(name,file,properties);adjustWidths(properties);data=this.convert(name,cff,properties);break;case"OpenType":case"TrueType":case"CIDFontType2":this.mimetype="font/opentype";data=this.checkAndRepair(name,file,properties);if(this.isOpenType){adjustWidths(properties);type="OpenType";}break;default:throw new FormatError("Font ".concat(type," is not supported"));}}catch(e){warn(e);this.fallbackToSystemFont(properties);return;}amendFallbackToUnicode(properties);this.data=data;this.type=type;this.subtype=subtype;this.fontMatrix=properties.fontMatrix;this.widths=properties.widths;this.defaultWidth=properties.defaultWidth;this.toUnicode=properties.toUnicode;this.seacMap=properties.seacMap;}return _createClass(Font,[{key:"renderer",get:function get(){var renderer=FontRendererFactory.create(this,SEAC_ANALYSIS_ENABLED);return shadow(this,"renderer",renderer);}},{key:"exportData",value:function exportData(){var exportDataProps=this.fontExtraProperties?[].concat(EXPORT_DATA_PROPERTIES,EXPORT_DATA_EXTRA_PROPERTIES):EXPORT_DATA_PROPERTIES;var data=Object.create(null);var _iterator50=_createForOfIteratorHelper(exportDataProps),_step50;try{for(_iterator50.s();!(_step50=_iterator50.n()).done;){var prop=_step50.value;var value=this[prop];if(value!==undefined){data[prop]=value;}}}catch(err){_iterator50.e(err);}finally{_iterator50.f();}return data;}},{key:"fallbackToSystemFont",value:function fallbackToSystemFont(properties){var _this35=this;this.missingFile=true;var name=this.name,type=this.type;var fontName=normalizeFontName(name);var stdFontMap=getStdFontMap(),nonStdFontMap=getNonStdFontMap();var isStandardFont=!!stdFontMap[fontName];var isMappedToStandardFont=!!(nonStdFontMap[fontName]&&stdFontMap[nonStdFontMap[fontName]]);fontName=stdFontMap[fontName]||nonStdFontMap[fontName]||fontName;var fontBasicMetricsMap=getFontBasicMetrics();var metrics=fontBasicMetricsMap[fontName];if(metrics){if(isNaN(this.ascent)){this.ascent=metrics.ascent/PDF_GLYPH_SPACE_UNITS;}if(isNaN(this.descent)){this.descent=metrics.descent/PDF_GLYPH_SPACE_UNITS;}if(isNaN(this.capHeight)){this.capHeight=metrics.capHeight/PDF_GLYPH_SPACE_UNITS;}}this.bold=/bold/gi.test(fontName);this.italic=/oblique|italic/gi.test(fontName);this.black=/Black/g.test(name);var isNarrow=/Narrow/g.test(name);this.remeasure=(!isStandardFont||isNarrow)&&Object.keys(this.widths).length>0;if((isStandardFont||isMappedToStandardFont)&&type==="CIDFontType2"&&this.cidEncoding.startsWith("Identity-")){var cidToGidMap=properties.cidToGidMap;var map=[];applyStandardFontGlyphMap(map,getGlyphMapForStandardFonts());if(/Arial-?Black/i.test(name)){applyStandardFontGlyphMap(map,getSupplementalGlyphMapForArialBlack());}else if(/Calibri/i.test(name)){applyStandardFontGlyphMap(map,getSupplementalGlyphMapForCalibri());}if(cidToGidMap){for(var charCode in map){var cid=map[charCode];if(cidToGidMap[cid]!==undefined){map[+charCode]=cidToGidMap[cid];}}if(cidToGidMap.length!==this.toUnicode.length&&properties.hasIncludedToUnicodeMap&&this.toUnicode instanceof IdentityToUnicodeMap){this.toUnicode.forEach(function(charCode,unicodeCharCode){var cid=map[charCode];if(cidToGidMap[cid]===undefined){map[+charCode]=unicodeCharCode;}});}}if(!(this.toUnicode instanceof IdentityToUnicodeMap)){this.toUnicode.forEach(function(charCode,unicodeCharCode){map[+charCode]=unicodeCharCode;});}this.toFontChar=map;this.toUnicode=new ToUnicodeMap(map);}else if(/Symbol/i.test(fontName)){this.toFontChar=buildToFontChar(SymbolSetEncoding,getGlyphsUnicode(),this.differences);}else if(/Dingbats/i.test(fontName)){this.toFontChar=buildToFontChar(ZapfDingbatsEncoding,getDingbatsGlyphsUnicode(),this.differences);}else if(isStandardFont||isMappedToStandardFont){var _map=buildToFontChar(this.defaultEncoding,getGlyphsUnicode(),this.differences);if(type==="CIDFontType2"&&!this.cidEncoding.startsWith("Identity-")&&!(this.toUnicode instanceof IdentityToUnicodeMap)){this.toUnicode.forEach(function(charCode,unicodeCharCode){_map[+charCode]=unicodeCharCode;});}this.toFontChar=_map;}else{var glyphsUnicodeMap=getGlyphsUnicode();var _map2=[];this.toUnicode.forEach(function(charCode,unicodeCharCode){if(!_this35.composite){var glyphName=_this35.differences[charCode]||_this35.defaultEncoding[charCode];var unicode=getUnicodeForGlyph(glyphName,glyphsUnicodeMap);if(unicode!==-1){unicodeCharCode=unicode;}}_map2[+charCode]=unicodeCharCode;});if(this.composite&&this.toUnicode instanceof IdentityToUnicodeMap){if(/Tahoma|Verdana/i.test(name)){applyStandardFontGlyphMap(_map2,getGlyphMapForStandardFonts());}}this.toFontChar=_map2;}amendFallbackToUnicode(properties);this.loadedName=fontName.split("-",1)[0];}},{key:"checkAndRepair",value:function checkAndRepair(name,font,properties){var _properties$scaleFact,_this$cssFontInfo;var VALID_TABLES=["OS/2","cmap","head","hhea","hmtx","maxp","name","post","loca","glyf","fpgm","prep","cvt ","CFF "];function readTables(file,numTables){var tables=Object.create(null);tables["OS/2"]=null;tables.cmap=null;tables.head=null;tables.hhea=null;tables.hmtx=null;tables.maxp=null;tables.name=null;tables.post=null;for(var i=0;i<numTables;i++){var table=readTableEntry(file);if(!VALID_TABLES.includes(table.tag)){continue;}if(table.length===0){continue;}tables[table.tag]=table;}return tables;}function readTableEntry(file){var tag=file.getString(4);var checksum=file.getInt32()>>>0;var offset=file.getInt32()>>>0;var length=file.getInt32()>>>0;var previousPosition=file.pos;file.pos=file.start||0;file.skip(offset);var data=file.getBytes(length);file.pos=previousPosition;if(tag==="head"){data[8]=data[9]=data[10]=data[11]=0;data[17]|=0x20;}return{tag:tag,checksum:checksum,length:length,offset:offset,data:data};}function readOpenTypeHeader(ttf){return{version:ttf.getString(4),numTables:ttf.getUint16(),searchRange:ttf.getUint16(),entrySelector:ttf.getUint16(),rangeShift:ttf.getUint16()};}function readTrueTypeCollectionHeader(ttc){var ttcTag=ttc.getString(4);assert(ttcTag==="ttcf","Must be a TrueType Collection font.");var majorVersion=ttc.getUint16();var minorVersion=ttc.getUint16();var numFonts=ttc.getInt32()>>>0;var offsetTable=[];for(var i=0;i<numFonts;i++){offsetTable.push(ttc.getInt32()>>>0);}var header={ttcTag:ttcTag,majorVersion:majorVersion,minorVersion:minorVersion,numFonts:numFonts,offsetTable:offsetTable};switch(majorVersion){case 1:return header;case 2:header.dsigTag=ttc.getInt32()>>>0;header.dsigLength=ttc.getInt32()>>>0;header.dsigOffset=ttc.getInt32()>>>0;return header;}throw new FormatError("Invalid TrueType Collection majorVersion: ".concat(majorVersion,"."));}function readTrueTypeCollectionData(ttc,fontName){var _readTrueTypeCollecti=readTrueTypeCollectionHeader(ttc),numFonts=_readTrueTypeCollecti.numFonts,offsetTable=_readTrueTypeCollecti.offsetTable;var fontNameParts=fontName.split("+");var fallbackData;for(var i=0;i<numFonts;i++){ttc.pos=(ttc.start||0)+offsetTable[i];var potentialHeader=readOpenTypeHeader(ttc);var potentialTables=readTables(ttc,potentialHeader.numTables);if(!potentialTables.name){throw new FormatError(\'TrueType Collection font must contain a "name" table.\');}var _readNameTable=readNameTable(potentialTables.name),_readNameTable2=_slicedToArray(_readNameTable,1),nameTable=_readNameTable2[0];for(var j=0,jj=nameTable.length;j<jj;j++){for(var k=0,kk=nameTable[j].length;k<kk;k++){var _nameTable$j$k;var nameEntry=(_nameTable$j$k=nameTable[j][k])===null||_nameTable$j$k===void 0?void 0:_nameTable$j$k.replaceAll(/\\s/g,"");if(!nameEntry){continue;}if(nameEntry===fontName){return{header:potentialHeader,tables:potentialTables};}if(fontNameParts.length<2){continue;}var _iterator51=_createForOfIteratorHelper(fontNameParts),_step51;try{for(_iterator51.s();!(_step51=_iterator51.n()).done;){var part=_step51.value;if(nameEntry===part){fallbackData={name:part,header:potentialHeader,tables:potentialTables};}}}catch(err){_iterator51.e(err);}finally{_iterator51.f();}}}}if(fallbackData){warn("TrueType Collection does not contain \\"".concat(fontName,"\\" font, ")+"falling back to \\"".concat(fallbackData.name,"\\" font instead."));return{header:fallbackData.header,tables:fallbackData.tables};}throw new FormatError("TrueType Collection does not contain \\"".concat(fontName,"\\" font."));}function readCmapTable(cmap,file,isSymbolicFont,hasEncoding){if(!cmap){warn("No cmap table available.");return{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:false};}var segment;var start=(file.start||0)+cmap.offset;file.pos=start;file.skip(2);var numTables=file.getUint16();var potentialTable;var canBreak=false;for(var i=0;i<numTables;i++){var _potentialTable,_potentialTable2;var platformId=file.getUint16();var encodingId=file.getUint16();var offset=file.getInt32()>>>0;var useTable=false;if(((_potentialTable=potentialTable)===null||_potentialTable===void 0?void 0:_potentialTable.platformId)===platformId&&((_potentialTable2=potentialTable)===null||_potentialTable2===void 0?void 0:_potentialTable2.encodingId)===encodingId){continue;}if(platformId===0&&(encodingId===0||encodingId===1||encodingId===3)){useTable=true;}else if(platformId===1&&encodingId===0){useTable=true;}else if(platformId===3&&encodingId===1&&(hasEncoding||!potentialTable)){useTable=true;if(!isSymbolicFont){canBreak=true;}}else if(isSymbolicFont&&platformId===3&&encodingId===0){useTable=true;var correctlySorted=true;if(i<numTables-1){var nextBytes=file.peekBytes(2),nextPlatformId=int16(nextBytes[0],nextBytes[1]);if(nextPlatformId<platformId){correctlySorted=false;}}if(correctlySorted){canBreak=true;}}if(useTable){potentialTable={platformId:platformId,encodingId:encodingId,offset:offset};}if(canBreak){break;}}if(potentialTable){file.pos=start+potentialTable.offset;}if(!potentialTable||file.peekByte()===-1){warn("Could not find a preferred cmap table.");return{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:false};}var format=file.getUint16();var hasShortCmap=false;var mappings=[];var j,glyphId;if(format===0){file.skip(2+2);for(j=0;j<256;j++){var index=file.getByte();if(!index){continue;}mappings.push({charCode:j,glyphId:index});}hasShortCmap=true;}else if(format===2){file.skip(2+2);var subHeaderKeys=[];var maxSubHeaderKey=0;for(var _i33=0;_i33<256;_i33++){var subHeaderKey=file.getUint16()>>3;subHeaderKeys.push(subHeaderKey);maxSubHeaderKey=Math.max(subHeaderKey,maxSubHeaderKey);}var subHeaders=[];for(var _i34=0;_i34<=maxSubHeaderKey;_i34++){subHeaders.push({firstCode:file.getUint16(),entryCount:file.getUint16(),idDelta:signedInt16(file.getByte(),file.getByte()),idRangePos:file.pos+file.getUint16()});}for(var _i35=0;_i35<256;_i35++){if(subHeaderKeys[_i35]===0){file.pos=subHeaders[0].idRangePos+2*_i35;glyphId=file.getUint16();mappings.push({charCode:_i35,glyphId:glyphId});}else{var s=subHeaders[subHeaderKeys[_i35]];for(j=0;j<s.entryCount;j++){var charCode=(_i35<<8)+j+s.firstCode;file.pos=s.idRangePos+2*j;glyphId=file.getUint16();if(glyphId!==0){glyphId=(glyphId+s.idDelta)%65536;}mappings.push({charCode:charCode,glyphId:glyphId});}}}}else if(format===4){file.skip(2+2);var segCount=file.getUint16()>>1;file.skip(6);var segments=[];var segIndex;for(segIndex=0;segIndex<segCount;segIndex++){segments.push({end:file.getUint16()});}file.skip(2);for(segIndex=0;segIndex<segCount;segIndex++){segments[segIndex].start=file.getUint16();}for(segIndex=0;segIndex<segCount;segIndex++){segments[segIndex].delta=file.getUint16();}var offsetsCount=0,offsetIndex;for(segIndex=0;segIndex<segCount;segIndex++){segment=segments[segIndex];var rangeOffset=file.getUint16();if(!rangeOffset){segment.offsetIndex=-1;continue;}offsetIndex=(rangeOffset>>1)-(segCount-segIndex);segment.offsetIndex=offsetIndex;offsetsCount=Math.max(offsetsCount,offsetIndex+segment.end-segment.start+1);}var offsets=[];for(j=0;j<offsetsCount;j++){offsets.push(file.getUint16());}for(segIndex=0;segIndex<segCount;segIndex++){segment=segments[segIndex];start=segment.start;var end=segment.end;var delta=segment.delta;offsetIndex=segment.offsetIndex;for(j=start;j<=end;j++){if(j===0xffff){continue;}glyphId=offsetIndex<0?j:offsets[offsetIndex+j-start];glyphId=glyphId+delta&0xffff;mappings.push({charCode:j,glyphId:glyphId});}}}else if(format===6){file.skip(2+2);var firstCode=file.getUint16();var entryCount=file.getUint16();for(j=0;j<entryCount;j++){glyphId=file.getUint16();var _charCode2=firstCode+j;mappings.push({charCode:_charCode2,glyphId:glyphId});}}else if(format===12){file.skip(2+4+4);var nGroups=file.getInt32()>>>0;for(j=0;j<nGroups;j++){var startCharCode=file.getInt32()>>>0;var endCharCode=file.getInt32()>>>0;var glyphCode=file.getInt32()>>>0;for(var _charCode3=startCharCode;_charCode3<=endCharCode;_charCode3++){mappings.push({charCode:_charCode3,glyphId:glyphCode++});}}}else{warn("cmap table has unsupported format: "+format);return{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:false};}mappings.sort(function(a,b){return a.charCode-b.charCode;});var finalMappings=[],seenCharCodes=new Set();for(var _i36=0,_mappings=mappings;_i36<_mappings.length;_i36++){var map=_mappings[_i36];var _charCode4=map.charCode;if(seenCharCodes.has(_charCode4)){continue;}seenCharCodes.add(_charCode4);finalMappings.push(map);}return{platformId:potentialTable.platformId,encodingId:potentialTable.encodingId,mappings:finalMappings,hasShortCmap:hasShortCmap};}function sanitizeMetrics(file,header,metrics,headTable,numGlyphs,dupFirstEntry){if(!header){if(metrics){metrics.data=null;}return;}file.pos=(file.start||0)+header.offset;file.pos+=4;file.pos+=2;file.pos+=2;file.pos+=2;file.pos+=2;file.pos+=2;file.pos+=2;file.pos+=2;file.pos+=2;file.pos+=2;var caretOffset=file.getUint16();file.pos+=8;file.pos+=2;var numOfMetrics=file.getUint16();if(caretOffset!==0){var macStyle=int16(headTable.data[44],headTable.data[45]);if(!(macStyle&2)){header.data[22]=0;header.data[23]=0;}}if(numOfMetrics>numGlyphs){info("The numOfMetrics (".concat(numOfMetrics,") should not be ")+"greater than the numGlyphs (".concat(numGlyphs,")."));numOfMetrics=numGlyphs;header.data[34]=(numOfMetrics&0xff00)>>8;header.data[35]=numOfMetrics&0x00ff;}var numOfSidebearings=numGlyphs-numOfMetrics;var numMissing=numOfSidebearings-(metrics.length-numOfMetrics*4>>1);if(numMissing>0){var entries=new Uint8Array(metrics.length+numMissing*2);entries.set(metrics.data);if(dupFirstEntry){entries[metrics.length]=metrics.data[2];entries[metrics.length+1]=metrics.data[3];}metrics.data=entries;}}function sanitizeGlyph(source,sourceStart,sourceEnd,dest,destStart,hintsValid){var glyphProfile={length:0,sizeOfInstructions:0};if(sourceStart<0||sourceStart>=source.length||sourceEnd>source.length||sourceEnd-sourceStart<=12){return glyphProfile;}var glyf=source.subarray(sourceStart,sourceEnd);var xMin=signedInt16(glyf[2],glyf[3]);var yMin=signedInt16(glyf[4],glyf[5]);var xMax=signedInt16(glyf[6],glyf[7]);var yMax=signedInt16(glyf[8],glyf[9]);if(xMin>xMax){writeSignedInt16(glyf,2,xMax);writeSignedInt16(glyf,6,xMin);}if(yMin>yMax){writeSignedInt16(glyf,4,yMax);writeSignedInt16(glyf,8,yMin);}var contoursCount=signedInt16(glyf[0],glyf[1]);if(contoursCount<0){if(contoursCount<-1){return glyphProfile;}dest.set(glyf,destStart);glyphProfile.length=glyf.length;return glyphProfile;}var i,j=10,flagsCount=0;for(i=0;i<contoursCount;i++){var endPoint=glyf[j]<<8|glyf[j+1];flagsCount=endPoint+1;j+=2;}var instructionsStart=j;var instructionsLength=glyf[j]<<8|glyf[j+1];glyphProfile.sizeOfInstructions=instructionsLength;j+=2+instructionsLength;var instructionsEnd=j;var coordinatesLength=0;for(i=0;i<flagsCount;i++){var flag=glyf[j++];if(flag&0xc0){glyf[j-1]=flag&0x3f;}var xLength=2;if(flag&2){xLength=1;}else if(flag&16){xLength=0;}var yLength=2;if(flag&4){yLength=1;}else if(flag&32){yLength=0;}var xyLength=xLength+yLength;coordinatesLength+=xyLength;if(flag&8){var repeat=glyf[j++];if(repeat===0){glyf[j-1]^=8;}i+=repeat;coordinatesLength+=repeat*xyLength;}}if(coordinatesLength===0){return glyphProfile;}var glyphDataLength=j+coordinatesLength;if(glyphDataLength>glyf.length){return glyphProfile;}if(!hintsValid&&instructionsLength>0){dest.set(glyf.subarray(0,instructionsStart),destStart);dest.set([0,0],destStart+instructionsStart);dest.set(glyf.subarray(instructionsEnd,glyphDataLength),destStart+instructionsStart+2);glyphDataLength-=instructionsLength;if(glyf.length-glyphDataLength>3){glyphDataLength=glyphDataLength+3&~3;}glyphProfile.length=glyphDataLength;return glyphProfile;}if(glyf.length-glyphDataLength>3){glyphDataLength=glyphDataLength+3&~3;dest.set(glyf.subarray(0,glyphDataLength),destStart);glyphProfile.length=glyphDataLength;return glyphProfile;}dest.set(glyf,destStart);glyphProfile.length=glyf.length;return glyphProfile;}function sanitizeHead(head,numGlyphs,locaLength){var data=head.data;var version=int32(data[0],data[1],data[2],data[3]);if(version>>16!==1){info("Attempting to fix invalid version in head table: "+version);data[0]=0;data[1]=1;data[2]=0;data[3]=0;}var indexToLocFormat=int16(data[50],data[51]);if(indexToLocFormat<0||indexToLocFormat>1){info("Attempting to fix invalid indexToLocFormat in head table: "+indexToLocFormat);var numGlyphsPlusOne=numGlyphs+1;if(locaLength===numGlyphsPlusOne<<1){data[50]=0;data[51]=0;}else if(locaLength===numGlyphsPlusOne<<2){data[50]=0;data[51]=1;}else{throw new FormatError("Could not fix indexToLocFormat: "+indexToLocFormat);}}}function sanitizeGlyphLocations(loca,glyf,numGlyphs,isGlyphLocationsLong,hintsValid,dupFirstEntry,maxSizeOfInstructions){var itemSize,itemDecode,itemEncode;if(isGlyphLocationsLong){itemSize=4;itemDecode=function fontItemDecodeLong(data,offset){return data[offset]<<24|data[offset+1]<<16|data[offset+2]<<8|data[offset+3];};itemEncode=function fontItemEncodeLong(data,offset,value){data[offset]=value>>>24&0xff;data[offset+1]=value>>16&0xff;data[offset+2]=value>>8&0xff;data[offset+3]=value&0xff;};}else{itemSize=2;itemDecode=function fontItemDecode(data,offset){return data[offset]<<9|data[offset+1]<<1;};itemEncode=function fontItemEncode(data,offset,value){data[offset]=value>>9&0xff;data[offset+1]=value>>1&0xff;};}var numGlyphsOut=dupFirstEntry?numGlyphs+1:numGlyphs;var locaDataSize=itemSize*(1+numGlyphsOut);var locaData=new Uint8Array(locaDataSize);locaData.set(loca.data.subarray(0,locaDataSize));loca.data=locaData;var oldGlyfData=glyf.data;var oldGlyfDataLength=oldGlyfData.length;var newGlyfData=new Uint8Array(oldGlyfDataLength);var i,j;var locaEntries=[];for(i=0,j=0;i<numGlyphs+1;i++,j+=itemSize){var offset=itemDecode(locaData,j);if(offset>oldGlyfDataLength){offset=oldGlyfDataLength;}locaEntries.push({index:i,offset:offset,endOffset:0});}locaEntries.sort(function(a,b){return a.offset-b.offset;});for(i=0;i<numGlyphs;i++){locaEntries[i].endOffset=locaEntries[i+1].offset;}locaEntries.sort(function(a,b){return a.index-b.index;});for(i=0;i<numGlyphs;i++){var _locaEntries$i=locaEntries[i],_offset=_locaEntries$i.offset,endOffset=_locaEntries$i.endOffset;if(_offset!==0||endOffset!==0){break;}var nextOffset=locaEntries[i+1].offset;if(nextOffset===0){continue;}locaEntries[i].endOffset=nextOffset;break;}var last=locaEntries.at(-2);if(last.offset!==0&&last.endOffset===0){last.endOffset=oldGlyfDataLength;}var missingGlyphs=Object.create(null);var writeOffset=0;itemEncode(locaData,0,writeOffset);for(i=0,j=itemSize;i<numGlyphs;i++,j+=itemSize){var glyphProfile=sanitizeGlyph(oldGlyfData,locaEntries[i].offset,locaEntries[i].endOffset,newGlyfData,writeOffset,hintsValid);var newLength=glyphProfile.length;if(newLength===0){missingGlyphs[i]=true;}if(glyphProfile.sizeOfInstructions>maxSizeOfInstructions){maxSizeOfInstructions=glyphProfile.sizeOfInstructions;}writeOffset+=newLength;itemEncode(locaData,j,writeOffset);}if(writeOffset===0){var simpleGlyph=new Uint8Array([0,1,0,0,0,0,0,0,0,0,0,0,0,0,49,0]);for(i=0,j=itemSize;i<numGlyphsOut;i++,j+=itemSize){itemEncode(locaData,j,simpleGlyph.length);}glyf.data=simpleGlyph;}else if(dupFirstEntry){var firstEntryLength=itemDecode(locaData,itemSize);if(newGlyfData.length>firstEntryLength+writeOffset){glyf.data=newGlyfData.subarray(0,firstEntryLength+writeOffset);}else{glyf.data=new Uint8Array(firstEntryLength+writeOffset);glyf.data.set(newGlyfData.subarray(0,writeOffset));}glyf.data.set(newGlyfData.subarray(0,firstEntryLength),writeOffset);itemEncode(loca.data,locaData.length-itemSize,writeOffset+firstEntryLength);}else{glyf.data=newGlyfData.subarray(0,writeOffset);}return{missingGlyphs:missingGlyphs,maxSizeOfInstructions:maxSizeOfInstructions};}function readPostScriptTable(post,propertiesObj,maxpNumGlyphs){var start=(font.start||0)+post.offset;font.pos=start;var length=post.length,end=start+length;var version=font.getInt32();font.skip(28);var glyphNames;var valid=true;var i;switch(version){case 0x00010000:glyphNames=MacStandardGlyphOrdering;break;case 0x00020000:var _numGlyphs=font.getUint16();if(_numGlyphs!==maxpNumGlyphs){valid=false;break;}var glyphNameIndexes=[];for(i=0;i<_numGlyphs;++i){var index=font.getUint16();if(index>=32768){valid=false;break;}glyphNameIndexes.push(index);}if(!valid){break;}var customNames=[],strBuf=[];while(font.pos<end){var stringLength=font.getByte();strBuf.length=stringLength;for(i=0;i<stringLength;++i){strBuf[i]=String.fromCharCode(font.getByte());}customNames.push(strBuf.join(""));}glyphNames=[];for(i=0;i<_numGlyphs;++i){var j=glyphNameIndexes[i];if(j<258){glyphNames.push(MacStandardGlyphOrdering[j]);continue;}glyphNames.push(customNames[j-258]);}break;case 0x00030000:break;default:warn("Unknown/unsupported post table version "+version);valid=false;if(propertiesObj.defaultEncoding){glyphNames=propertiesObj.defaultEncoding;}break;}propertiesObj.glyphNames=glyphNames;return valid;}function readNameTable(nameTable){var start=(font.start||0)+nameTable.offset;font.pos=start;var names=[[],[]],records=[];var length=nameTable.length,end=start+length;var format=font.getUint16();var FORMAT_0_HEADER_LENGTH=6;if(format!==0||length<FORMAT_0_HEADER_LENGTH){return[names,records];}var numRecords=font.getUint16();var stringsStart=font.getUint16();var NAME_RECORD_LENGTH=12;var i,ii;for(i=0;i<numRecords&&font.pos+NAME_RECORD_LENGTH<=end;i++){var r={platform:font.getUint16(),encoding:font.getUint16(),language:font.getUint16(),name:font.getUint16(),length:font.getUint16(),offset:font.getUint16()};if(isMacNameRecord(r)||isWinNameRecord(r)){records.push(r);}}for(i=0,ii=records.length;i<ii;i++){var record=records[i];if(record.length<=0){continue;}var pos=start+stringsStart+record.offset;if(pos+record.length>end){continue;}font.pos=pos;var nameIndex=record.name;if(record.encoding){var str="";for(var j=0,jj=record.length;j<jj;j+=2){str+=String.fromCharCode(font.getUint16());}names[1][nameIndex]=str;}else{names[0][nameIndex]=font.getString(record.length);}}return[names,records];}var TTOpsStackDeltas=[0,0,0,0,0,0,0,0,-2,-2,-2,-2,0,0,-2,-5,-1,-1,-1,-1,-1,-1,-1,-1,0,0,-1,0,-1,-1,-1,-1,1,-1,-999,0,1,0,-1,-2,0,-1,-2,-1,-1,0,-1,-1,0,0,-999,-999,-1,-1,-1,-1,-2,-999,-2,-2,-999,0,-2,-2,0,0,-2,0,-2,0,0,0,-2,-1,-1,1,1,0,0,-1,-1,-1,-1,-1,-1,-1,0,0,-1,0,-1,-1,0,-999,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,0,0,0,0,0,-2,-999,-999,-999,-999,-999,-1,-1,-2,-2,0,0,0,0,-1,-1,-999,-2,-2,0,0,-1,-2,-2,0,0,0,-1,-1,-1,-2];function sanitizeTTProgram(table,ttContext){var data=table.data;var i=0,j,n,b,funcId,pc,lastEndf=0,lastDeff=0;var stack=[];var callstack=[];var functionsCalled=[];var tooComplexToFollowFunctions=ttContext.tooComplexToFollowFunctions;var inFDEF=false,ifLevel=0,inELSE=0;for(var ii=data.length;i<ii;){var op=data[i++];if(op===0x40){n=data[i++];if(inFDEF||inELSE){i+=n;}else{for(j=0;j<n;j++){stack.push(data[i++]);}}}else if(op===0x41){n=data[i++];if(inFDEF||inELSE){i+=n*2;}else{for(j=0;j<n;j++){b=data[i++];stack.push(b<<8|data[i++]);}}}else if((op&0xf8)===0xb0){n=op-0xb0+1;if(inFDEF||inELSE){i+=n;}else{for(j=0;j<n;j++){stack.push(data[i++]);}}}else if((op&0xf8)===0xb8){n=op-0xb8+1;if(inFDEF||inELSE){i+=n*2;}else{for(j=0;j<n;j++){b=data[i++];stack.push(signedInt16(b,data[i++]));}}}else if(op===0x2b&&!tooComplexToFollowFunctions){if(!inFDEF&&!inELSE){funcId=stack.at(-1);if(isNaN(funcId)){info("TT: CALL empty stack (or invalid entry).");}else{ttContext.functionsUsed[funcId]=true;if(funcId in ttContext.functionsStackDeltas){var newStackLength=stack.length+ttContext.functionsStackDeltas[funcId];if(newStackLength<0){warn("TT: CALL invalid functions stack delta.");ttContext.hintsValid=false;return;}stack.length=newStackLength;}else if(funcId in ttContext.functionsDefined&&!functionsCalled.includes(funcId)){callstack.push({data:data,i:i,stackTop:stack.length-1});functionsCalled.push(funcId);pc=ttContext.functionsDefined[funcId];if(!pc){warn("TT: CALL non-existent function");ttContext.hintsValid=false;return;}data=pc.data;i=pc.i;}}}}else if(op===0x2c&&!tooComplexToFollowFunctions){if(inFDEF||inELSE){warn("TT: nested FDEFs not allowed");tooComplexToFollowFunctions=true;}inFDEF=true;lastDeff=i;funcId=stack.pop();ttContext.functionsDefined[funcId]={data:data,i:i};}else if(op===0x2d){if(inFDEF){inFDEF=false;lastEndf=i;}else{pc=callstack.pop();if(!pc){warn("TT: ENDF bad stack");ttContext.hintsValid=false;return;}funcId=functionsCalled.pop();data=pc.data;i=pc.i;ttContext.functionsStackDeltas[funcId]=stack.length-pc.stackTop;}}else if(op===0x89){if(inFDEF||inELSE){warn("TT: nested IDEFs not allowed");tooComplexToFollowFunctions=true;}inFDEF=true;lastDeff=i;}else if(op===0x58){++ifLevel;}else if(op===0x1b){inELSE=ifLevel;}else if(op===0x59){if(inELSE===ifLevel){inELSE=0;}--ifLevel;}else if(op===0x1c){if(!inFDEF&&!inELSE){var offset=stack.at(-1);if(offset>0){i+=offset-1;}}}if(!inFDEF&&!inELSE){var stackDelta=0;if(op<=0x8e){stackDelta=TTOpsStackDeltas[op];}else if(op>=0xc0&&op<=0xdf){stackDelta=-1;}else if(op>=0xe0){stackDelta=-2;}if(op>=0x71&&op<=0x75){n=stack.pop();if(!isNaN(n)){stackDelta=-n*2;}}while(stackDelta<0&&stack.length>0){stack.pop();stackDelta++;}while(stackDelta>0){stack.push(NaN);stackDelta--;}}}ttContext.tooComplexToFollowFunctions=tooComplexToFollowFunctions;var content=[data];if(i>data.length){content.push(new Uint8Array(i-data.length));}if(lastDeff>lastEndf){warn("TT: complementing a missing function tail");content.push(new Uint8Array([0x22,0x2d]));}foldTTTable(table,content);}function checkInvalidFunctions(ttContext,maxFunctionDefs){if(ttContext.tooComplexToFollowFunctions){return;}if(ttContext.functionsDefined.length>maxFunctionDefs){warn("TT: more functions defined than expected");ttContext.hintsValid=false;return;}for(var j=0,jj=ttContext.functionsUsed.length;j<jj;j++){if(j>maxFunctionDefs){warn("TT: invalid function id: "+j);ttContext.hintsValid=false;return;}if(ttContext.functionsUsed[j]&&!ttContext.functionsDefined[j]){warn("TT: undefined function: "+j);ttContext.hintsValid=false;return;}}}function foldTTTable(table,content){if(content.length>1){var newLength=0;var j,jj;for(j=0,jj=content.length;j<jj;j++){newLength+=content[j].length;}newLength=newLength+3&~3;var result=new Uint8Array(newLength);var pos=0;for(j=0,jj=content.length;j<jj;j++){result.set(content[j],pos);pos+=content[j].length;}table.data=result;table.length=newLength;}}function sanitizeTTPrograms(fpgm,prep,cvt,maxFunctionDefs){var ttContext={functionsDefined:[],functionsUsed:[],functionsStackDeltas:[],tooComplexToFollowFunctions:false,hintsValid:true};if(fpgm){sanitizeTTProgram(fpgm,ttContext);}if(prep){sanitizeTTProgram(prep,ttContext);}if(fpgm){checkInvalidFunctions(ttContext,maxFunctionDefs);}if(cvt&&cvt.length&1){var cvtData=new Uint8Array(cvt.length+1);cvtData.set(cvt.data);cvt.data=cvtData;}return ttContext.hintsValid;}font=new Stream(new Uint8Array(font.getBytes()));var header,tables;if(isTrueTypeCollectionFile(font)){var ttcData=readTrueTypeCollectionData(font,this.name);header=ttcData.header;tables=ttcData.tables;}else{header=readOpenTypeHeader(font);tables=readTables(font,header.numTables);}var cff,cffFile;var isTrueType=!tables["CFF "];if(!isTrueType){var _properties$cidToGidM;var isComposite=properties.composite&&(((_properties$cidToGidM=properties.cidToGidMap)===null||_properties$cidToGidM===void 0?void 0:_properties$cidToGidM.length)>0||!(properties.cMap instanceof IdentityCMap));if(header.version==="OTTO"&&!isComposite||!tables.head||!tables.hhea||!tables.maxp||!tables.post){cffFile=new Stream(tables["CFF "].data);cff=new CFFFont(cffFile,properties);adjustWidths(properties);return this.convert(name,cff,properties);}delete tables.glyf;delete tables.loca;delete tables.fpgm;delete tables.prep;delete tables["cvt "];this.isOpenType=true;}else{if(!tables.loca){throw new FormatError(\'Required "loca" table is not found\');}if(!tables.glyf){warn(\'Required "glyf" table is not found -- trying to recover.\');tables.glyf={tag:"glyf",data:new Uint8Array(0)};}this.isOpenType=false;}if(!tables.maxp){throw new FormatError(\'Required "maxp" table is not found\');}font.pos=(font.start||0)+tables.maxp.offset;var version=font.getInt32();var numGlyphs=font.getUint16();if(version!==0x00010000&&version!==0x00005000){if(tables.maxp.length===6){version=0x0005000;}else if(tables.maxp.length>=32){version=0x00010000;}else{throw new FormatError("\\"maxp\\" table has a wrong version number");}writeUint32(tables.maxp.data,0,version);}if(((_properties$scaleFact=properties.scaleFactors)===null||_properties$scaleFact===void 0?void 0:_properties$scaleFact.length)===numGlyphs&&isTrueType){var scaleFactors=properties.scaleFactors;var isGlyphLocationsLong=int16(tables.head.data[50],tables.head.data[51]);var glyphs=new GlyfTable({glyfTable:tables.glyf.data,isGlyphLocationsLong:isGlyphLocationsLong,locaTable:tables.loca.data,numGlyphs:numGlyphs});glyphs.scale(scaleFactors);var _glyphs$write=glyphs.write(),glyf=_glyphs$write.glyf,loca=_glyphs$write.loca,isLocationLong=_glyphs$write.isLocationLong;tables.glyf.data=glyf;tables.loca.data=loca;if(isLocationLong!==!!isGlyphLocationsLong){tables.head.data[50]=0;tables.head.data[51]=isLocationLong?1:0;}var metrics=tables.hmtx.data;for(var i=0;i<numGlyphs;i++){var j=4*i;var advanceWidth=Math.round(scaleFactors[i]*int16(metrics[j],metrics[j+1]));metrics[j]=advanceWidth>>8&0xff;metrics[j+1]=advanceWidth&0xff;var lsb=Math.round(scaleFactors[i]*signedInt16(metrics[j+2],metrics[j+3]));writeSignedInt16(metrics,j+2,lsb);}}var numGlyphsOut=numGlyphs+1;var dupFirstEntry=true;if(numGlyphsOut>0xffff){dupFirstEntry=false;numGlyphsOut=numGlyphs;warn("Not enough space in glyfs to duplicate first glyph.");}var maxFunctionDefs=0;var maxSizeOfInstructions=0;if(version>=0x00010000&&tables.maxp.length>=32){font.pos+=8;var maxZones=font.getUint16();if(maxZones>2){tables.maxp.data[14]=0;tables.maxp.data[15]=2;}font.pos+=4;maxFunctionDefs=font.getUint16();font.pos+=4;maxSizeOfInstructions=font.getUint16();}tables.maxp.data[4]=numGlyphsOut>>8;tables.maxp.data[5]=numGlyphsOut&255;var hintsValid=sanitizeTTPrograms(tables.fpgm,tables.prep,tables["cvt "],maxFunctionDefs);if(!hintsValid){delete tables.fpgm;delete tables.prep;delete tables["cvt "];}sanitizeMetrics(font,tables.hhea,tables.hmtx,tables.head,numGlyphsOut,dupFirstEntry);if(!tables.head){throw new FormatError(\'Required "head" table is not found\');}sanitizeHead(tables.head,numGlyphs,isTrueType?tables.loca.length:0);var missingGlyphs=Object.create(null);if(isTrueType){var _isGlyphLocationsLong=int16(tables.head.data[50],tables.head.data[51]);var glyphsInfo=sanitizeGlyphLocations(tables.loca,tables.glyf,numGlyphs,_isGlyphLocationsLong,hintsValid,dupFirstEntry,maxSizeOfInstructions);missingGlyphs=glyphsInfo.missingGlyphs;if(version>=0x00010000&&tables.maxp.length>=32){tables.maxp.data[26]=glyphsInfo.maxSizeOfInstructions>>8;tables.maxp.data[27]=glyphsInfo.maxSizeOfInstructions&255;}}if(!tables.hhea){throw new FormatError(\'Required "hhea" table is not found\');}if(tables.hhea.data[10]===0&&tables.hhea.data[11]===0){tables.hhea.data[10]=0xff;tables.hhea.data[11]=0xff;}var metricsOverride={unitsPerEm:int16(tables.head.data[18],tables.head.data[19]),yMax:signedInt16(tables.head.data[42],tables.head.data[43]),yMin:signedInt16(tables.head.data[38],tables.head.data[39]),ascent:signedInt16(tables.hhea.data[4],tables.hhea.data[5]),descent:signedInt16(tables.hhea.data[6],tables.hhea.data[7]),lineGap:signedInt16(tables.hhea.data[8],tables.hhea.data[9])};this.ascent=metricsOverride.ascent/metricsOverride.unitsPerEm;this.descent=metricsOverride.descent/metricsOverride.unitsPerEm;this.lineGap=metricsOverride.lineGap/metricsOverride.unitsPerEm;if((_this$cssFontInfo=this.cssFontInfo)!==null&&_this$cssFontInfo!==void 0&&_this$cssFontInfo.lineHeight){this.lineHeight=this.cssFontInfo.metrics.lineHeight;this.lineGap=this.cssFontInfo.metrics.lineGap;}else{this.lineHeight=this.ascent-this.descent+this.lineGap;}if(tables.post){readPostScriptTable(tables.post,properties,numGlyphs);}tables.post={tag:"post",data:createPostTable(properties)};var charCodeToGlyphId=Object.create(null);function hasGlyph(glyphId){return!missingGlyphs[glyphId];}if(properties.composite){var cidToGidMap=properties.cidToGidMap||[];var isCidToGidMapEmpty=cidToGidMap.length===0;properties.cMap.forEach(function(charCode,cid){if(typeof cid==="string"){cid=convertCidString(charCode,cid,true);}if(cid>0xffff){throw new FormatError("Max size of CID is 65,535");}var glyphId=-1;if(isCidToGidMapEmpty){glyphId=cid;}else if(cidToGidMap[cid]!==undefined){glyphId=cidToGidMap[cid];}if(glyphId>=0&&glyphId<numGlyphs&&hasGlyph(glyphId)){charCodeToGlyphId[charCode]=glyphId;}});}else{var cmapTable=readCmapTable(tables.cmap,font,this.isSymbolicFont,properties.hasEncoding);var cmapPlatformId=cmapTable.platformId;var cmapEncodingId=cmapTable.encodingId;var cmapMappings=cmapTable.mappings;var baseEncoding=[],forcePostTable=false;if(properties.hasEncoding&&(properties.baseEncodingName==="MacRomanEncoding"||properties.baseEncodingName==="WinAnsiEncoding")){baseEncoding=getEncoding(properties.baseEncodingName);}if(properties.hasEncoding&&!this.isSymbolicFont&&(cmapPlatformId===3&&cmapEncodingId===1||cmapPlatformId===1&&cmapEncodingId===0)){var glyphsUnicodeMap=getGlyphsUnicode();for(var charCode=0;charCode<256;charCode++){var glyphName=void 0;if(this.differences[charCode]!==undefined){glyphName=this.differences[charCode];}else if(baseEncoding.length&&baseEncoding[charCode]!==""){glyphName=baseEncoding[charCode];}else{glyphName=StandardEncoding[charCode];}if(!glyphName){continue;}var standardGlyphName=recoverGlyphName(glyphName,glyphsUnicodeMap);var unicodeOrCharCode=void 0;if(cmapPlatformId===3&&cmapEncodingId===1){unicodeOrCharCode=glyphsUnicodeMap[standardGlyphName];}else if(cmapPlatformId===1&&cmapEncodingId===0){unicodeOrCharCode=MacRomanEncoding.indexOf(standardGlyphName);}if(unicodeOrCharCode===undefined){if(!properties.glyphNames&&properties.hasIncludedToUnicodeMap&&!(this.toUnicode instanceof IdentityToUnicodeMap)){var unicode=this.toUnicode.get(charCode);if(unicode){unicodeOrCharCode=unicode.codePointAt(0);}}if(unicodeOrCharCode===undefined){continue;}}var _iterator52=_createForOfIteratorHelper(cmapMappings),_step52;try{for(_iterator52.s();!(_step52=_iterator52.n()).done;){var mapping=_step52.value;if(mapping.charCode!==unicodeOrCharCode){continue;}charCodeToGlyphId[charCode]=mapping.glyphId;break;}}catch(err){_iterator52.e(err);}finally{_iterator52.f();}}}else if(cmapPlatformId===0){var _iterator53=_createForOfIteratorHelper(cmapMappings),_step53;try{for(_iterator53.s();!(_step53=_iterator53.n()).done;){var _mapping=_step53.value;charCodeToGlyphId[_mapping.charCode]=_mapping.glyphId;}}catch(err){_iterator53.e(err);}finally{_iterator53.f();}forcePostTable=true;}else if(cmapPlatformId===3&&cmapEncodingId===0){var _iterator54=_createForOfIteratorHelper(cmapMappings),_step54;try{for(_iterator54.s();!(_step54=_iterator54.n()).done;){var _mapping2=_step54.value;var _charCode5=_mapping2.charCode;if(_charCode5>=0xf000&&_charCode5<=0xf0ff){_charCode5&=0xff;}charCodeToGlyphId[_charCode5]=_mapping2.glyphId;}}catch(err){_iterator54.e(err);}finally{_iterator54.f();}}else{var _iterator55=_createForOfIteratorHelper(cmapMappings),_step55;try{for(_iterator55.s();!(_step55=_iterator55.n()).done;){var _mapping3=_step55.value;charCodeToGlyphId[_mapping3.charCode]=_mapping3.glyphId;}}catch(err){_iterator55.e(err);}finally{_iterator55.f();}}if(properties.glyphNames&&(baseEncoding.length||this.differences.length)){for(var _i37=0;_i37<256;++_i37){if(!forcePostTable&&charCodeToGlyphId[_i37]!==undefined){continue;}var _glyphName=this.differences[_i37]||baseEncoding[_i37];if(!_glyphName){continue;}var glyphId=properties.glyphNames.indexOf(_glyphName);if(glyphId>0&&hasGlyph(glyphId)){charCodeToGlyphId[_i37]=glyphId;}}}}if(charCodeToGlyphId.length===0){charCodeToGlyphId[0]=0;}var glyphZeroId=numGlyphsOut-1;if(!dupFirstEntry){glyphZeroId=0;}if(!properties.cssFontInfo){var newMapping=adjustMapping(charCodeToGlyphId,hasGlyph,glyphZeroId,this.toUnicode);this.toFontChar=newMapping.toFontChar;tables.cmap={tag:"cmap",data:createCmapTable(newMapping.charCodeToGlyphId,newMapping.toUnicodeExtraMap,numGlyphsOut)};if(!tables["OS/2"]||!validateOS2Table(tables["OS/2"],font)){tables["OS/2"]={tag:"OS/2",data:createOS2Table(properties,newMapping.charCodeToGlyphId,metricsOverride)};}}if(!isTrueType){try{cffFile=new Stream(tables["CFF "].data);var parser=new CFFParser(cffFile,properties,SEAC_ANALYSIS_ENABLED);cff=parser.parse();cff.duplicateFirstGlyph();var compiler=new CFFCompiler(cff);tables["CFF "].data=compiler.compile();}catch(_unused8){warn("Failed to compile font "+properties.loadedName);}}if(!tables.name){tables.name={tag:"name",data:createNameTable(this.name)};}else{var _readNameTable3=readNameTable(tables.name),_readNameTable4=_slicedToArray(_readNameTable3,2),namePrototype=_readNameTable4[0],nameRecords=_readNameTable4[1];tables.name.data=createNameTable(name,namePrototype);this.psName=namePrototype[0][6]||null;if(!properties.composite){adjustTrueTypeToUnicode(properties,this.isSymbolicFont,nameRecords);}}var builder=new OpenTypeFileBuilder(header.version);for(var tableTag in tables){builder.addTable(tableTag,tables[tableTag].data);}return builder.toArray();}},{key:"convert",value:function convert(fontName,font,properties){properties.fixedPitch=false;if(properties.builtInEncoding){adjustType1ToUnicode(properties,properties.builtInEncoding);}var glyphZeroId=1;if(font instanceof CFFFont){glyphZeroId=font.numGlyphs-1;}var mapping=font.getGlyphMapping(properties);var newMapping=null;var newCharCodeToGlyphId=mapping;var toUnicodeExtraMap=null;if(!properties.cssFontInfo){newMapping=adjustMapping(mapping,font.hasGlyphId.bind(font),glyphZeroId,this.toUnicode);this.toFontChar=newMapping.toFontChar;newCharCodeToGlyphId=newMapping.charCodeToGlyphId;toUnicodeExtraMap=newMapping.toUnicodeExtraMap;}var numGlyphs=font.numGlyphs;function getCharCodes(charCodeToGlyphId,glyphId){var charCodes=null;for(var charCode in charCodeToGlyphId){if(glyphId===charCodeToGlyphId[charCode]){(charCodes||(charCodes=[])).push(charCode|0);}}return charCodes;}function createCharCode(charCodeToGlyphId,glyphId){for(var charCode in charCodeToGlyphId){if(glyphId===charCodeToGlyphId[charCode]){return charCode|0;}}newMapping.charCodeToGlyphId[newMapping.nextAvailableFontCharCode]=glyphId;return newMapping.nextAvailableFontCharCode++;}var seacs=font.seacs;if(newMapping&&SEAC_ANALYSIS_ENABLED&&seacs!==null&&seacs!==void 0&&seacs.length){var matrix=properties.fontMatrix||FONT_IDENTITY_MATRIX;var charset=font.getCharset();var seacMap=Object.create(null);for(var glyphId in seacs){glyphId|=0;var seac=seacs[glyphId];var baseGlyphName=StandardEncoding[seac[2]];var accentGlyphName=StandardEncoding[seac[3]];var baseGlyphId=charset.indexOf(baseGlyphName);var accentGlyphId=charset.indexOf(accentGlyphName);if(baseGlyphId<0||accentGlyphId<0){continue;}var accentOffset={x:seac[0]*matrix[0]+seac[1]*matrix[2]+matrix[4],y:seac[0]*matrix[1]+seac[1]*matrix[3]+matrix[5]};var charCodes=getCharCodes(mapping,glyphId);if(!charCodes){continue;}var _iterator56=_createForOfIteratorHelper(charCodes),_step56;try{for(_iterator56.s();!(_step56=_iterator56.n()).done;){var charCode=_step56.value;var charCodeToGlyphId=newMapping.charCodeToGlyphId;var baseFontCharCode=createCharCode(charCodeToGlyphId,baseGlyphId);var accentFontCharCode=createCharCode(charCodeToGlyphId,accentGlyphId);seacMap[charCode]={baseFontCharCode:baseFontCharCode,accentFontCharCode:accentFontCharCode,accentOffset:accentOffset};}}catch(err){_iterator56.e(err);}finally{_iterator56.f();}}properties.seacMap=seacMap;}var unitsPerEm=properties.fontMatrix?1/Math.max.apply(Math,_toConsumableArray(properties.fontMatrix.slice(0,4).map(Math.abs))):1000;var builder=new OpenTypeFileBuilder("\\x4F\\x54\\x54\\x4F");builder.addTable("CFF ",font.data);builder.addTable("OS/2",createOS2Table(properties,newCharCodeToGlyphId));builder.addTable("cmap",createCmapTable(newCharCodeToGlyphId,toUnicodeExtraMap,numGlyphs));builder.addTable("head","\\x00\\x01\\x00\\x00"+"\\x00\\x00\\x10\\x00"+"\\x00\\x00\\x00\\x00"+"\\x5F\\x0F\\x3C\\xF5"+"\\x00\\x00"+safeString16(unitsPerEm)+"\\x00\\x00\\x00\\x00\\x9e\\x0b\\x7e\\x27"+"\\x00\\x00\\x00\\x00\\x9e\\x0b\\x7e\\x27"+"\\x00\\x00"+safeString16(properties.descent)+"\\x0F\\xFF"+safeString16(properties.ascent)+string16(properties.italicAngle?2:0)+"\\x00\\x11"+"\\x00\\x00"+"\\x00\\x00"+"\\x00\\x00");builder.addTable("hhea","\\x00\\x01\\x00\\x00"+safeString16(properties.ascent)+safeString16(properties.descent)+"\\x00\\x00"+"\\xFF\\xFF"+"\\x00\\x00"+"\\x00\\x00"+"\\x00\\x00"+safeString16(properties.capHeight)+safeString16(Math.tan(properties.italicAngle)*properties.xHeight)+"\\x00\\x00"+"\\x00\\x00"+"\\x00\\x00"+"\\x00\\x00"+"\\x00\\x00"+"\\x00\\x00"+string16(numGlyphs));builder.addTable("hmtx",function fontFieldsHmtx(){var charstrings=font.charstrings;var cffWidths=font.cff?font.cff.widths:null;var hmtx="\\x00\\x00\\x00\\x00";for(var i=1,ii=numGlyphs;i<ii;i++){var width=0;if(charstrings){var charstring=charstrings[i-1];width="width"in charstring?charstring.width:0;}else if(cffWidths){width=Math.ceil(cffWidths[i]||0);}hmtx+=string16(width)+string16(0);}return hmtx;}());builder.addTable("maxp","\\x00\\x00\\x50\\x00"+string16(numGlyphs));builder.addTable("name",createNameTable(fontName));builder.addTable("post",createPostTable(properties));return builder.toArray();}},{key:"_spaceWidth",get:function get(){var possibleSpaceReplacements=["space","minus","one","i","I"];var width;for(var _i38=0,_possibleSpaceReplace=possibleSpaceReplacements;_i38<_possibleSpaceReplace.length;_i38++){var glyphName=_possibleSpaceReplace[_i38];if(glyphName in this.widths){width=this.widths[glyphName];break;}var glyphsUnicodeMap=getGlyphsUnicode();var glyphUnicode=glyphsUnicodeMap[glyphName];var charcode=0;if(this.composite&&this.cMap.contains(glyphUnicode)){charcode=this.cMap.lookup(glyphUnicode);if(typeof charcode==="string"){charcode=convertCidString(glyphUnicode,charcode);}}if(!charcode&&this.toUnicode){charcode=this.toUnicode.charCodeOf(glyphUnicode);}if(charcode<=0){charcode=glyphUnicode;}width=this.widths[charcode];if(width){break;}}return shadow(this,"_spaceWidth",width||this.defaultWidth);}},{key:"_charToGlyph",value:function _charToGlyph(charcode){var _glyph2,_this$cMap,_this$vmetrics,_this$seacMap;var isSpace=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var glyph=this._glyphCache[charcode];if(((_glyph2=glyph)===null||_glyph2===void 0?void 0:_glyph2.isSpace)===isSpace){return glyph;}var fontCharCode,width,operatorListId;var widthCode=charcode;if((_this$cMap=this.cMap)!==null&&_this$cMap!==void 0&&_this$cMap.contains(charcode)){widthCode=this.cMap.lookup(charcode);if(typeof widthCode==="string"){widthCode=convertCidString(charcode,widthCode);}}width=this.widths[widthCode];if(typeof width!=="number"){width=this.defaultWidth;}var vmetric=(_this$vmetrics=this.vmetrics)===null||_this$vmetrics===void 0?void 0:_this$vmetrics[widthCode];var unicode=this.toUnicode.get(charcode)||charcode;if(typeof unicode==="number"){unicode=String.fromCharCode(unicode);}var isInFont=this.toFontChar[charcode]!==undefined;fontCharCode=this.toFontChar[charcode]||charcode;if(this.missingFile){var glyphName=this.differences[charcode]||this.defaultEncoding[charcode];if((glyphName===".notdef"||glyphName==="")&&this.type==="Type1"){fontCharCode=0x20;if(glyphName===""){width||(width=this._spaceWidth);unicode=String.fromCharCode(fontCharCode);}}fontCharCode=mapSpecialUnicodeValues(fontCharCode);}if(this.isType3Font){operatorListId=fontCharCode;}var accent=null;if((_this$seacMap=this.seacMap)!==null&&_this$seacMap!==void 0&&_this$seacMap[charcode]){isInFont=true;var seac=this.seacMap[charcode];fontCharCode=seac.baseFontCharCode;accent={fontChar:String.fromCodePoint(seac.accentFontCharCode),offset:seac.accentOffset};}var fontChar="";if(typeof fontCharCode==="number"){if(fontCharCode<=0x10ffff){fontChar=String.fromCodePoint(fontCharCode);}else{warn("charToGlyph - invalid fontCharCode: ".concat(fontCharCode));}}if(this.missingFile&&this.vertical&&fontChar.length===1){var vertical=getVerticalPresentationForm()[fontChar.charCodeAt(0)];if(vertical){fontChar=unicode=String.fromCharCode(vertical);}}glyph=new fonts_Glyph(charcode,fontChar,unicode,accent,width,vmetric,operatorListId,isSpace,isInFont);return this._glyphCache[charcode]=glyph;}},{key:"charsToGlyphs",value:function charsToGlyphs(chars){var glyphs=this._charsCache[chars];if(glyphs){return glyphs;}glyphs=[];if(this.cMap){var c=Object.create(null),ii=chars.length;var i=0;while(i<ii){this.cMap.readCharCode(chars,i,c);var charcode=c.charcode,length=c.length;i+=length;var glyph=this._charToGlyph(charcode,length===1&&chars.charCodeAt(i-1)===0x20);glyphs.push(glyph);}}else{for(var _i39=0,_ii8=chars.length;_i39<_ii8;++_i39){var _charcode=chars.charCodeAt(_i39);var _glyph3=this._charToGlyph(_charcode,_charcode===0x20);glyphs.push(_glyph3);}}return this._charsCache[chars]=glyphs;}},{key:"getCharPositions",value:function getCharPositions(chars){var positions=[];if(this.cMap){var c=Object.create(null);var i=0;while(i<chars.length){this.cMap.readCharCode(chars,i,c);var length=c.length;positions.push([i,i+length]);i+=length;}}else{for(var _i40=0,ii=chars.length;_i40<ii;++_i40){positions.push([_i40,_i40+1]);}}return positions;}},{key:"glyphCacheValues",get:function get(){return Object.values(this._glyphCache);}},{key:"encodeString",value:function encodeString(str){var _this36=this;var buffers=[];var currentBuf=[];var hasCurrentBufErrors=function hasCurrentBufErrors(){return buffers.length%2===1;};var getCharCode=this.toUnicode instanceof IdentityToUnicodeMap?function(unicode){return _this36.toUnicode.charCodeOf(unicode);}:function(unicode){return _this36.toUnicode.charCodeOf(String.fromCodePoint(unicode));};for(var i=0,ii=str.length;i<ii;i++){var unicode=str.codePointAt(i);if(unicode>0xd7ff&&(unicode<0xe000||unicode>0xfffd)){i++;}if(this.toUnicode){var charCode=getCharCode(unicode);if(charCode!==-1){if(hasCurrentBufErrors()){buffers.push(currentBuf.join(""));currentBuf.length=0;}var charCodeLength=this.cMap?this.cMap.getCharCodeLength(charCode):1;for(var j=charCodeLength-1;j>=0;j--){currentBuf.push(String.fromCharCode(charCode>>8*j&0xff));}continue;}}if(!hasCurrentBufErrors()){buffers.push(currentBuf.join(""));currentBuf.length=0;}currentBuf.push(String.fromCodePoint(unicode));}buffers.push(currentBuf.join(""));return buffers;}}]);}();var ErrorFont=/*#__PURE__*/function(){function ErrorFont(error){_classCallCheck(this,ErrorFont);this.error=error;this.loadedName="g_font_error";this.missingFile=true;}return _createClass(ErrorFont,[{key:"charsToGlyphs",value:function charsToGlyphs(){return[];}},{key:"encodeString",value:function encodeString(chars){return[chars];}},{key:"exportData",value:function exportData(){return{error:this.error};}}]);}();;// ./src/core/pattern.js\nvar ShadingType={FUNCTION_BASED:1,AXIAL:2,RADIAL:3,FREE_FORM_MESH:4,LATTICE_FORM_MESH:5,COONS_PATCH_MESH:6,TENSOR_PATCH_MESH:7};var Pattern=/*#__PURE__*/function(){function Pattern(){_classCallCheck(this,Pattern);unreachable("Cannot initialize Pattern.");}return _createClass(Pattern,null,[{key:"parseShading",value:function parseShading(shading,xref,res,pdfFunctionFactory,localColorSpaceCache){var dict=shading instanceof BaseStream?shading.dict:shading;var type=dict.get("ShadingType");try{switch(type){case ShadingType.AXIAL:case ShadingType.RADIAL:return new RadialAxialShading(dict,xref,res,pdfFunctionFactory,localColorSpaceCache);case ShadingType.FREE_FORM_MESH:case ShadingType.LATTICE_FORM_MESH:case ShadingType.COONS_PATCH_MESH:case ShadingType.TENSOR_PATCH_MESH:return new MeshShading(shading,xref,res,pdfFunctionFactory,localColorSpaceCache);default:throw new FormatError("Unsupported ShadingType: "+type);}}catch(ex){if(ex instanceof MissingDataException){throw ex;}warn(ex);return new DummyShading();}}}]);}();var BaseShading=/*#__PURE__*/function(){function BaseShading(){_classCallCheck(this,BaseShading);}return _createClass(BaseShading,[{key:"getIR",value:function getIR(){unreachable("Abstract method `getIR` called.");}}]);}();_defineProperty(BaseShading,"SMALL_NUMBER",1e-6);var RadialAxialShading=/*#__PURE__*/function(_BaseShading2){function RadialAxialShading(dict,xref,resources,pdfFunctionFactory,localColorSpaceCache){var _this37;_classCallCheck(this,RadialAxialShading);_this37=_callSuper(this,RadialAxialShading);_this37.shadingType=dict.get("ShadingType");var coordsLen=0;if(_this37.shadingType===ShadingType.AXIAL){coordsLen=4;}else if(_this37.shadingType===ShadingType.RADIAL){coordsLen=6;}_this37.coordsArr=dict.getArray("Coords");if(!isNumberArray(_this37.coordsArr,coordsLen)){throw new FormatError("RadialAxialShading: Invalid /Coords array.");}var cs=ColorSpace.parse({cs:dict.getRaw("CS")||dict.getRaw("ColorSpace"),xref:xref,resources:resources,pdfFunctionFactory:pdfFunctionFactory,localColorSpaceCache:localColorSpaceCache});_this37.bbox=lookupNormalRect(dict.getArray("BBox"),null);var t0=0.0,t1=1.0;var domainArr=dict.getArray("Domain");if(isNumberArray(domainArr,2)){var _domainArr=_slicedToArray(domainArr,2);t0=_domainArr[0];t1=_domainArr[1];}var extendStart=false,extendEnd=false;var extendArr=dict.getArray("Extend");if(isBooleanArray(extendArr,2)){var _extendArr=_slicedToArray(extendArr,2);extendStart=_extendArr[0];extendEnd=_extendArr[1];}if(_this37.shadingType===ShadingType.RADIAL&&(!extendStart||!extendEnd)){var _this37$coordsArr=_slicedToArray(_this37.coordsArr,6),x1=_this37$coordsArr[0],y1=_this37$coordsArr[1],r1=_this37$coordsArr[2],x2=_this37$coordsArr[3],y2=_this37$coordsArr[4],r2=_this37$coordsArr[5];var distance=Math.hypot(x1-x2,y1-y2);if(r1<=r2+distance&&r2<=r1+distance){warn("Unsupported radial gradient.");}}_this37.extendStart=extendStart;_this37.extendEnd=extendEnd;var fnObj=dict.getRaw("Function");var fn=pdfFunctionFactory.createFromArray(fnObj);var NUMBER_OF_SAMPLES=840;var step=(t1-t0)/NUMBER_OF_SAMPLES;var colorStops=_this37.colorStops=[];if(t0>=t1||step<=0){info("Bad shading domain.");return _possibleConstructorReturn(_this37);}var color=new Float32Array(cs.numComps),ratio=new Float32Array(1);var rgbColor;var iBase=0;ratio[0]=t0;fn(ratio,0,color,0);var rgbBase=cs.getRgb(color,0);var cssColorBase=Util.makeHexColor(rgbBase[0],rgbBase[1],rgbBase[2]);colorStops.push([0,cssColorBase]);var iPrev=1;ratio[0]=t0+step;fn(ratio,0,color,0);var rgbPrev=cs.getRgb(color,0);var maxSlopeR=rgbPrev[0]-rgbBase[0]+1;var maxSlopeG=rgbPrev[1]-rgbBase[1]+1;var maxSlopeB=rgbPrev[2]-rgbBase[2]+1;var minSlopeR=rgbPrev[0]-rgbBase[0]-1;var minSlopeG=rgbPrev[1]-rgbBase[1]-1;var minSlopeB=rgbPrev[2]-rgbBase[2]-1;for(var i=2;i<NUMBER_OF_SAMPLES;i++){ratio[0]=t0+i*step;fn(ratio,0,color,0);rgbColor=cs.getRgb(color,0);var _run2=i-iBase;maxSlopeR=Math.min(maxSlopeR,(rgbColor[0]-rgbBase[0]+1)/_run2);maxSlopeG=Math.min(maxSlopeG,(rgbColor[1]-rgbBase[1]+1)/_run2);maxSlopeB=Math.min(maxSlopeB,(rgbColor[2]-rgbBase[2]+1)/_run2);minSlopeR=Math.max(minSlopeR,(rgbColor[0]-rgbBase[0]-1)/_run2);minSlopeG=Math.max(minSlopeG,(rgbColor[1]-rgbBase[1]-1)/_run2);minSlopeB=Math.max(minSlopeB,(rgbColor[2]-rgbBase[2]-1)/_run2);var slopesExist=minSlopeR<=maxSlopeR&&minSlopeG<=maxSlopeG&&minSlopeB<=maxSlopeB;if(!slopesExist){var _cssColor=Util.makeHexColor(rgbPrev[0],rgbPrev[1],rgbPrev[2]);colorStops.push([iPrev/NUMBER_OF_SAMPLES,_cssColor]);maxSlopeR=rgbColor[0]-rgbPrev[0]+1;maxSlopeG=rgbColor[1]-rgbPrev[1]+1;maxSlopeB=rgbColor[2]-rgbPrev[2]+1;minSlopeR=rgbColor[0]-rgbPrev[0]-1;minSlopeG=rgbColor[1]-rgbPrev[1]-1;minSlopeB=rgbColor[2]-rgbPrev[2]-1;iBase=iPrev;rgbBase=rgbPrev;}iPrev=i;rgbPrev=rgbColor;}var cssColor=Util.makeHexColor(rgbPrev[0],rgbPrev[1],rgbPrev[2]);colorStops.push([1,cssColor]);var background="transparent";if(dict.has("Background")){rgbColor=cs.getRgb(dict.get("Background"),0);background=Util.makeHexColor(rgbColor[0],rgbColor[1],rgbColor[2]);}if(!extendStart){colorStops.unshift([0,background]);colorStops[1][0]+=BaseShading.SMALL_NUMBER;}if(!extendEnd){colorStops.at(-1)[0]-=BaseShading.SMALL_NUMBER;colorStops.push([1,background]);}_this37.colorStops=colorStops;return _this37;}_inherits(RadialAxialShading,_BaseShading2);return _createClass(RadialAxialShading,[{key:"getIR",value:function getIR(){var coordsArr=this.coordsArr,shadingType=this.shadingType;var type,p0,p1,r0,r1;if(shadingType===ShadingType.AXIAL){p0=[coordsArr[0],coordsArr[1]];p1=[coordsArr[2],coordsArr[3]];r0=null;r1=null;type="axial";}else if(shadingType===ShadingType.RADIAL){p0=[coordsArr[0],coordsArr[1]];p1=[coordsArr[3],coordsArr[4]];r0=coordsArr[2];r1=coordsArr[5];type="radial";}else{unreachable("getPattern type unknown: ".concat(shadingType));}return["RadialAxial",type,this.bbox,this.colorStops,p0,p1,r0,r1];}}]);}(BaseShading);var MeshStreamReader=/*#__PURE__*/function(){function MeshStreamReader(stream,context){_classCallCheck(this,MeshStreamReader);this.stream=stream;this.context=context;this.buffer=0;this.bufferLength=0;var numComps=context.numComps;this.tmpCompsBuf=new Float32Array(numComps);var csNumComps=context.colorSpace.numComps;this.tmpCsCompsBuf=context.colorFn?new Float32Array(csNumComps):this.tmpCompsBuf;}return _createClass(MeshStreamReader,[{key:"hasData",get:function get(){if(this.stream.end){return this.stream.pos<this.stream.end;}if(this.bufferLength>0){return true;}var nextByte=this.stream.getByte();if(nextByte<0){return false;}this.buffer=nextByte;this.bufferLength=8;return true;}},{key:"readBits",value:function readBits(n){var stream=this.stream;var buffer=this.buffer,bufferLength=this.bufferLength;if(n===32){if(bufferLength===0){return stream.getInt32()>>>0;}buffer=buffer<<24|stream.getByte()<<16|stream.getByte()<<8|stream.getByte();var nextByte=stream.getByte();this.buffer=nextByte&(1<<bufferLength)-1;return(buffer<<8-bufferLength|(nextByte&0xff)>>bufferLength)>>>0;}if(n===8&&bufferLength===0){return stream.getByte();}while(bufferLength<n){buffer=buffer<<8|stream.getByte();bufferLength+=8;}bufferLength-=n;this.bufferLength=bufferLength;this.buffer=buffer&(1<<bufferLength)-1;return buffer>>bufferLength;}},{key:"align",value:function align(){this.buffer=0;this.bufferLength=0;}},{key:"readFlag",value:function readFlag(){return this.readBits(this.context.bitsPerFlag);}},{key:"readCoordinate",value:function readCoordinate(){var bitsPerCoordinate=this.context.bitsPerCoordinate;var xi=this.readBits(bitsPerCoordinate);var yi=this.readBits(bitsPerCoordinate);var decode=this.context.decode;var scale=bitsPerCoordinate<32?1/((1<<bitsPerCoordinate)-1):2.3283064365386963e-10;return[xi*scale*(decode[1]-decode[0])+decode[0],yi*scale*(decode[3]-decode[2])+decode[2]];}},{key:"readComponents",value:function readComponents(){var numComps=this.context.numComps;var bitsPerComponent=this.context.bitsPerComponent;var scale=bitsPerComponent<32?1/((1<<bitsPerComponent)-1):2.3283064365386963e-10;var decode=this.context.decode;var components=this.tmpCompsBuf;for(var i=0,j=4;i<numComps;i++,j+=2){var ci=this.readBits(bitsPerComponent);components[i]=ci*scale*(decode[j+1]-decode[j])+decode[j];}var color=this.tmpCsCompsBuf;if(this.context.colorFn){this.context.colorFn(components,0,color,0);}return this.context.colorSpace.getRgb(color,0);}}]);}();var bCache=Object.create(null);function buildB(count){var lut=[];for(var i=0;i<=count;i++){var t=i/count,t_=1-t;lut.push(new Float32Array([Math.pow(t_,3),3*t*Math.pow(t_,2),3*Math.pow(t,2)*t_,Math.pow(t,3)]));}return lut;}function getB(count){var _bCache;return(_bCache=bCache)[count]||(_bCache[count]=buildB(count));}function clearPatternCaches(){bCache=Object.create(null);}var MeshShading=/*#__PURE__*/function(_BaseShading3){function MeshShading(stream,xref,resources,pdfFunctionFactory,localColorSpaceCache){var _this38;_classCallCheck(this,MeshShading);_this38=_callSuper(this,MeshShading);if(!(stream instanceof BaseStream)){throw new FormatError("Mesh data is not a stream");}var dict=stream.dict;_this38.shadingType=dict.get("ShadingType");_this38.bbox=lookupNormalRect(dict.getArray("BBox"),null);var cs=ColorSpace.parse({cs:dict.getRaw("CS")||dict.getRaw("ColorSpace"),xref:xref,resources:resources,pdfFunctionFactory:pdfFunctionFactory,localColorSpaceCache:localColorSpaceCache});_this38.background=dict.has("Background")?cs.getRgb(dict.get("Background"),0):null;var fnObj=dict.getRaw("Function");var fn=fnObj?pdfFunctionFactory.createFromArray(fnObj):null;_this38.coords=[];_this38.colors=[];_this38.figures=[];var decodeContext={bitsPerCoordinate:dict.get("BitsPerCoordinate"),bitsPerComponent:dict.get("BitsPerComponent"),bitsPerFlag:dict.get("BitsPerFlag"),decode:dict.getArray("Decode"),colorFn:fn,colorSpace:cs,numComps:fn?1:cs.numComps};var reader=new MeshStreamReader(stream,decodeContext);var patchMesh=false;switch(_this38.shadingType){case ShadingType.FREE_FORM_MESH:_this38._decodeType4Shading(reader);break;case ShadingType.LATTICE_FORM_MESH:var verticesPerRow=dict.get("VerticesPerRow")|0;if(verticesPerRow<2){throw new FormatError("Invalid VerticesPerRow");}_this38._decodeType5Shading(reader,verticesPerRow);break;case ShadingType.COONS_PATCH_MESH:_this38._decodeType6Shading(reader);patchMesh=true;break;case ShadingType.TENSOR_PATCH_MESH:_this38._decodeType7Shading(reader);patchMesh=true;break;default:unreachable("Unsupported mesh type.");break;}if(patchMesh){_this38._updateBounds();for(var i=0,ii=_this38.figures.length;i<ii;i++){_this38._buildFigureFromPatch(i);}}_this38._updateBounds();_this38._packData();return _this38;}_inherits(MeshShading,_BaseShading3);return _createClass(MeshShading,[{key:"_decodeType4Shading",value:function _decodeType4Shading(reader){var coords=this.coords;var colors=this.colors;var operators=[];var ps=[];var verticesLeft=0;while(reader.hasData){var f=reader.readFlag();var coord=reader.readCoordinate();var color=reader.readComponents();if(verticesLeft===0){if(!(0<=f&&f<=2)){throw new FormatError("Unknown type4 flag");}switch(f){case 0:verticesLeft=3;break;case 1:ps.push(ps.at(-2),ps.at(-1));verticesLeft=1;break;case 2:ps.push(ps.at(-3),ps.at(-1));verticesLeft=1;break;}operators.push(f);}ps.push(coords.length);coords.push(coord);colors.push(color);verticesLeft--;reader.align();}this.figures.push({type:"triangles",coords:new Int32Array(ps),colors:new Int32Array(ps)});}},{key:"_decodeType5Shading",value:function _decodeType5Shading(reader,verticesPerRow){var coords=this.coords;var colors=this.colors;var ps=[];while(reader.hasData){var coord=reader.readCoordinate();var color=reader.readComponents();ps.push(coords.length);coords.push(coord);colors.push(color);}this.figures.push({type:"lattice",coords:new Int32Array(ps),colors:new Int32Array(ps),verticesPerRow:verticesPerRow});}},{key:"_decodeType6Shading",value:function _decodeType6Shading(reader){var coords=this.coords;var colors=this.colors;var ps=new Int32Array(16);var cs=new Int32Array(4);while(reader.hasData){var f=reader.readFlag();if(!(0<=f&&f<=3)){throw new FormatError("Unknown type6 flag");}var pi=coords.length;for(var i=0,ii=f!==0?8:12;i<ii;i++){coords.push(reader.readCoordinate());}var ci=colors.length;for(var _i41=0,_ii9=f!==0?2:4;_i41<_ii9;_i41++){colors.push(reader.readComponents());}var tmp1=void 0,tmp2=void 0,tmp3=void 0,tmp4=void 0;switch(f){case 0:ps[12]=pi+3;ps[13]=pi+4;ps[14]=pi+5;ps[15]=pi+6;ps[8]=pi+2;ps[11]=pi+7;ps[4]=pi+1;ps[7]=pi+8;ps[0]=pi;ps[1]=pi+11;ps[2]=pi+10;ps[3]=pi+9;cs[2]=ci+1;cs[3]=ci+2;cs[0]=ci;cs[1]=ci+3;break;case 1:tmp1=ps[12];tmp2=ps[13];tmp3=ps[14];tmp4=ps[15];ps[12]=tmp4;ps[13]=pi+0;ps[14]=pi+1;ps[15]=pi+2;ps[8]=tmp3;ps[11]=pi+3;ps[4]=tmp2;ps[7]=pi+4;ps[0]=tmp1;ps[1]=pi+7;ps[2]=pi+6;ps[3]=pi+5;tmp1=cs[2];tmp2=cs[3];cs[2]=tmp2;cs[3]=ci;cs[0]=tmp1;cs[1]=ci+1;break;case 2:tmp1=ps[15];tmp2=ps[11];ps[12]=ps[3];ps[13]=pi+0;ps[14]=pi+1;ps[15]=pi+2;ps[8]=ps[7];ps[11]=pi+3;ps[4]=tmp2;ps[7]=pi+4;ps[0]=tmp1;ps[1]=pi+7;ps[2]=pi+6;ps[3]=pi+5;tmp1=cs[3];cs[2]=cs[1];cs[3]=ci;cs[0]=tmp1;cs[1]=ci+1;break;case 3:ps[12]=ps[0];ps[13]=pi+0;ps[14]=pi+1;ps[15]=pi+2;ps[8]=ps[1];ps[11]=pi+3;ps[4]=ps[2];ps[7]=pi+4;ps[0]=ps[3];ps[1]=pi+7;ps[2]=pi+6;ps[3]=pi+5;cs[2]=cs[0];cs[3]=ci;cs[0]=cs[1];cs[1]=ci+1;break;}ps[5]=coords.length;coords.push([(-4*coords[ps[0]][0]-coords[ps[15]][0]+6*(coords[ps[4]][0]+coords[ps[1]][0])-2*(coords[ps[12]][0]+coords[ps[3]][0])+3*(coords[ps[13]][0]+coords[ps[7]][0]))/9,(-4*coords[ps[0]][1]-coords[ps[15]][1]+6*(coords[ps[4]][1]+coords[ps[1]][1])-2*(coords[ps[12]][1]+coords[ps[3]][1])+3*(coords[ps[13]][1]+coords[ps[7]][1]))/9]);ps[6]=coords.length;coords.push([(-4*coords[ps[3]][0]-coords[ps[12]][0]+6*(coords[ps[2]][0]+coords[ps[7]][0])-2*(coords[ps[0]][0]+coords[ps[15]][0])+3*(coords[ps[4]][0]+coords[ps[14]][0]))/9,(-4*coords[ps[3]][1]-coords[ps[12]][1]+6*(coords[ps[2]][1]+coords[ps[7]][1])-2*(coords[ps[0]][1]+coords[ps[15]][1])+3*(coords[ps[4]][1]+coords[ps[14]][1]))/9]);ps[9]=coords.length;coords.push([(-4*coords[ps[12]][0]-coords[ps[3]][0]+6*(coords[ps[8]][0]+coords[ps[13]][0])-2*(coords[ps[0]][0]+coords[ps[15]][0])+3*(coords[ps[11]][0]+coords[ps[1]][0]))/9,(-4*coords[ps[12]][1]-coords[ps[3]][1]+6*(coords[ps[8]][1]+coords[ps[13]][1])-2*(coords[ps[0]][1]+coords[ps[15]][1])+3*(coords[ps[11]][1]+coords[ps[1]][1]))/9]);ps[10]=coords.length;coords.push([(-4*coords[ps[15]][0]-coords[ps[0]][0]+6*(coords[ps[11]][0]+coords[ps[14]][0])-2*(coords[ps[12]][0]+coords[ps[3]][0])+3*(coords[ps[2]][0]+coords[ps[8]][0]))/9,(-4*coords[ps[15]][1]-coords[ps[0]][1]+6*(coords[ps[11]][1]+coords[ps[14]][1])-2*(coords[ps[12]][1]+coords[ps[3]][1])+3*(coords[ps[2]][1]+coords[ps[8]][1]))/9]);this.figures.push({type:"patch",coords:new Int32Array(ps),colors:new Int32Array(cs)});}}},{key:"_decodeType7Shading",value:function _decodeType7Shading(reader){var coords=this.coords;var colors=this.colors;var ps=new Int32Array(16);var cs=new Int32Array(4);while(reader.hasData){var f=reader.readFlag();if(!(0<=f&&f<=3)){throw new FormatError("Unknown type7 flag");}var pi=coords.length;for(var i=0,ii=f!==0?12:16;i<ii;i++){coords.push(reader.readCoordinate());}var ci=colors.length;for(var _i42=0,_ii10=f!==0?2:4;_i42<_ii10;_i42++){colors.push(reader.readComponents());}var tmp1=void 0,tmp2=void 0,tmp3=void 0,tmp4=void 0;switch(f){case 0:ps[12]=pi+3;ps[13]=pi+4;ps[14]=pi+5;ps[15]=pi+6;ps[8]=pi+2;ps[9]=pi+13;ps[10]=pi+14;ps[11]=pi+7;ps[4]=pi+1;ps[5]=pi+12;ps[6]=pi+15;ps[7]=pi+8;ps[0]=pi;ps[1]=pi+11;ps[2]=pi+10;ps[3]=pi+9;cs[2]=ci+1;cs[3]=ci+2;cs[0]=ci;cs[1]=ci+3;break;case 1:tmp1=ps[12];tmp2=ps[13];tmp3=ps[14];tmp4=ps[15];ps[12]=tmp4;ps[13]=pi+0;ps[14]=pi+1;ps[15]=pi+2;ps[8]=tmp3;ps[9]=pi+9;ps[10]=pi+10;ps[11]=pi+3;ps[4]=tmp2;ps[5]=pi+8;ps[6]=pi+11;ps[7]=pi+4;ps[0]=tmp1;ps[1]=pi+7;ps[2]=pi+6;ps[3]=pi+5;tmp1=cs[2];tmp2=cs[3];cs[2]=tmp2;cs[3]=ci;cs[0]=tmp1;cs[1]=ci+1;break;case 2:tmp1=ps[15];tmp2=ps[11];ps[12]=ps[3];ps[13]=pi+0;ps[14]=pi+1;ps[15]=pi+2;ps[8]=ps[7];ps[9]=pi+9;ps[10]=pi+10;ps[11]=pi+3;ps[4]=tmp2;ps[5]=pi+8;ps[6]=pi+11;ps[7]=pi+4;ps[0]=tmp1;ps[1]=pi+7;ps[2]=pi+6;ps[3]=pi+5;tmp1=cs[3];cs[2]=cs[1];cs[3]=ci;cs[0]=tmp1;cs[1]=ci+1;break;case 3:ps[12]=ps[0];ps[13]=pi+0;ps[14]=pi+1;ps[15]=pi+2;ps[8]=ps[1];ps[9]=pi+9;ps[10]=pi+10;ps[11]=pi+3;ps[4]=ps[2];ps[5]=pi+8;ps[6]=pi+11;ps[7]=pi+4;ps[0]=ps[3];ps[1]=pi+7;ps[2]=pi+6;ps[3]=pi+5;cs[2]=cs[0];cs[3]=ci;cs[0]=cs[1];cs[1]=ci+1;break;}this.figures.push({type:"patch",coords:new Int32Array(ps),colors:new Int32Array(cs)});}}},{key:"_buildFigureFromPatch",value:function _buildFigureFromPatch(index){var figure=this.figures[index];assert(figure.type==="patch","Unexpected patch mesh figure");var coords=this.coords,colors=this.colors;var pi=figure.coords;var ci=figure.colors;var figureMinX=Math.min(coords[pi[0]][0],coords[pi[3]][0],coords[pi[12]][0],coords[pi[15]][0]);var figureMinY=Math.min(coords[pi[0]][1],coords[pi[3]][1],coords[pi[12]][1],coords[pi[15]][1]);var figureMaxX=Math.max(coords[pi[0]][0],coords[pi[3]][0],coords[pi[12]][0],coords[pi[15]][0]);var figureMaxY=Math.max(coords[pi[0]][1],coords[pi[3]][1],coords[pi[12]][1],coords[pi[15]][1]);var splitXBy=Math.ceil((figureMaxX-figureMinX)*MeshShading.TRIANGLE_DENSITY/(this.bounds[2]-this.bounds[0]));splitXBy=Math.max(MeshShading.MIN_SPLIT_PATCH_CHUNKS_AMOUNT,Math.min(MeshShading.MAX_SPLIT_PATCH_CHUNKS_AMOUNT,splitXBy));var splitYBy=Math.ceil((figureMaxY-figureMinY)*MeshShading.TRIANGLE_DENSITY/(this.bounds[3]-this.bounds[1]));splitYBy=Math.max(MeshShading.MIN_SPLIT_PATCH_CHUNKS_AMOUNT,Math.min(MeshShading.MAX_SPLIT_PATCH_CHUNKS_AMOUNT,splitYBy));var verticesPerRow=splitXBy+1;var figureCoords=new Int32Array((splitYBy+1)*verticesPerRow);var figureColors=new Int32Array((splitYBy+1)*verticesPerRow);var k=0;var cl=new Uint8Array(3),cr=new Uint8Array(3);var c0=colors[ci[0]],c1=colors[ci[1]],c2=colors[ci[2]],c3=colors[ci[3]];var bRow=getB(splitYBy),bCol=getB(splitXBy);for(var row=0;row<=splitYBy;row++){cl[0]=(c0[0]*(splitYBy-row)+c2[0]*row)/splitYBy|0;cl[1]=(c0[1]*(splitYBy-row)+c2[1]*row)/splitYBy|0;cl[2]=(c0[2]*(splitYBy-row)+c2[2]*row)/splitYBy|0;cr[0]=(c1[0]*(splitYBy-row)+c3[0]*row)/splitYBy|0;cr[1]=(c1[1]*(splitYBy-row)+c3[1]*row)/splitYBy|0;cr[2]=(c1[2]*(splitYBy-row)+c3[2]*row)/splitYBy|0;for(var col=0;col<=splitXBy;col++,k++){if((row===0||row===splitYBy)&&(col===0||col===splitXBy)){continue;}var x=0,y=0;var q=0;for(var i=0;i<=3;i++){for(var j=0;j<=3;j++,q++){var m=bRow[row][i]*bCol[col][j];x+=coords[pi[q]][0]*m;y+=coords[pi[q]][1]*m;}}figureCoords[k]=coords.length;coords.push([x,y]);figureColors[k]=colors.length;var newColor=new Uint8Array(3);newColor[0]=(cl[0]*(splitXBy-col)+cr[0]*col)/splitXBy|0;newColor[1]=(cl[1]*(splitXBy-col)+cr[1]*col)/splitXBy|0;newColor[2]=(cl[2]*(splitXBy-col)+cr[2]*col)/splitXBy|0;colors.push(newColor);}}figureCoords[0]=pi[0];figureColors[0]=ci[0];figureCoords[splitXBy]=pi[3];figureColors[splitXBy]=ci[1];figureCoords[verticesPerRow*splitYBy]=pi[12];figureColors[verticesPerRow*splitYBy]=ci[2];figureCoords[verticesPerRow*splitYBy+splitXBy]=pi[15];figureColors[verticesPerRow*splitYBy+splitXBy]=ci[3];this.figures[index]={type:"lattice",coords:figureCoords,colors:figureColors,verticesPerRow:verticesPerRow};}},{key:"_updateBounds",value:function _updateBounds(){var minX=this.coords[0][0],minY=this.coords[0][1],maxX=minX,maxY=minY;for(var i=1,ii=this.coords.length;i<ii;i++){var x=this.coords[i][0],y=this.coords[i][1];minX=minX>x?x:minX;minY=minY>y?y:minY;maxX=maxX<x?x:maxX;maxY=maxY<y?y:maxY;}this.bounds=[minX,minY,maxX,maxY];}},{key:"_packData",value:function _packData(){var i,ii,j,jj;var coords=this.coords;var coordsPacked=new Float32Array(coords.length*2);for(i=0,j=0,ii=coords.length;i<ii;i++){var xy=coords[i];coordsPacked[j++]=xy[0];coordsPacked[j++]=xy[1];}this.coords=coordsPacked;var colors=this.colors;var colorsPacked=new Uint8Array(colors.length*3);for(i=0,j=0,ii=colors.length;i<ii;i++){var c=colors[i];colorsPacked[j++]=c[0];colorsPacked[j++]=c[1];colorsPacked[j++]=c[2];}this.colors=colorsPacked;var figures=this.figures;for(i=0,ii=figures.length;i<ii;i++){var figure=figures[i],ps=figure.coords,cs=figure.colors;for(j=0,jj=ps.length;j<jj;j++){ps[j]*=2;cs[j]*=3;}}}},{key:"getIR",value:function getIR(){var bounds=this.bounds;if(bounds[2]-bounds[0]===0||bounds[3]-bounds[1]===0){throw new FormatError("Invalid MeshShading bounds: [".concat(bounds,"]."));}return["Mesh",this.shadingType,this.coords,this.colors,this.figures,bounds,this.bbox,this.background];}}]);}(BaseShading);_defineProperty(MeshShading,"MIN_SPLIT_PATCH_CHUNKS_AMOUNT",3);_defineProperty(MeshShading,"MAX_SPLIT_PATCH_CHUNKS_AMOUNT",20);_defineProperty(MeshShading,"TRIANGLE_DENSITY",20);var DummyShading=/*#__PURE__*/function(_BaseShading4){function DummyShading(){_classCallCheck(this,DummyShading);return _callSuper(this,DummyShading,arguments);}_inherits(DummyShading,_BaseShading4);return _createClass(DummyShading,[{key:"getIR",value:function getIR(){return["Dummy"];}}]);}(BaseShading);function getTilingPatternIR(operatorList,dict,color){var matrix=lookupMatrix(dict.getArray("Matrix"),IDENTITY_MATRIX);var bbox=lookupNormalRect(dict.getArray("BBox"),null);if(!bbox||bbox[2]-bbox[0]===0||bbox[3]-bbox[1]===0){throw new FormatError("Invalid getTilingPatternIR /BBox array.");}var xstep=dict.get("XStep");if(typeof xstep!=="number"){throw new FormatError("Invalid getTilingPatternIR /XStep value.");}var ystep=dict.get("YStep");if(typeof ystep!=="number"){throw new FormatError("Invalid getTilingPatternIR /YStep value.");}var paintType=dict.get("PaintType");if(!Number.isInteger(paintType)){throw new FormatError("Invalid getTilingPatternIR /PaintType value.");}var tilingType=dict.get("TilingType");if(!Number.isInteger(tilingType)){throw new FormatError("Invalid getTilingPatternIR /TilingType value.");}return["TilingPattern",color,operatorList,matrix,bbox,xstep,ystep,paintType,tilingType];};// ./src/core/calibri_factors.js\nvar CalibriBoldFactors=[1.3877,1,1,1,0.97801,0.92482,0.89552,0.91133,0.81988,0.97566,0.98152,0.93548,0.93548,1.2798,0.85284,0.92794,1,0.96134,1.54657,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.82845,0.82845,0.85284,0.85284,0.85284,0.75859,0.92138,0.83908,0.7762,0.73293,0.87289,0.73133,0.7514,0.81921,0.87356,0.95958,0.59526,0.75727,0.69225,1.04924,0.9121,0.86943,0.79795,0.88198,0.77958,0.70864,0.81055,0.90399,0.88653,0.96017,0.82577,0.77892,0.78257,0.97507,1.54657,0.97507,0.85284,0.89552,0.90176,0.88762,0.8785,0.75241,0.8785,0.90518,0.95015,0.77618,0.8785,0.88401,0.91916,0.86304,0.88401,0.91488,0.8785,0.8801,0.8785,0.8785,0.91343,0.7173,1.04106,0.8785,0.85075,0.95794,0.82616,0.85162,0.79492,0.88331,1.69808,0.88331,0.85284,0.97801,0.89552,0.91133,0.89552,0.91133,1.7801,0.89552,1.24487,1.13254,1.12401,0.96839,0.85284,0.68787,0.70645,0.85592,0.90747,1.01466,1.0088,0.90323,1,1.07463,1,0.91056,0.75806,1.19118,0.96839,0.78864,0.82845,0.84133,0.75859,0.83908,0.83908,0.83908,0.83908,0.83908,0.83908,0.77539,0.73293,0.73133,0.73133,0.73133,0.73133,0.95958,0.95958,0.95958,0.95958,0.88506,0.9121,0.86943,0.86943,0.86943,0.86943,0.86943,0.85284,0.87508,0.90399,0.90399,0.90399,0.90399,0.77892,0.79795,0.90807,0.88762,0.88762,0.88762,0.88762,0.88762,0.88762,0.8715,0.75241,0.90518,0.90518,0.90518,0.90518,0.88401,0.88401,0.88401,0.88401,0.8785,0.8785,0.8801,0.8801,0.8801,0.8801,0.8801,0.90747,0.89049,0.8785,0.8785,0.8785,0.8785,0.85162,0.8785,0.85162,0.83908,0.88762,0.83908,0.88762,0.83908,0.88762,0.73293,0.75241,0.73293,0.75241,0.73293,0.75241,0.73293,0.75241,0.87289,0.83016,0.88506,0.93125,0.73133,0.90518,0.73133,0.90518,0.73133,0.90518,0.73133,0.90518,0.73133,0.90518,0.81921,0.77618,0.81921,0.77618,0.81921,0.77618,1,1,0.87356,0.8785,0.91075,0.89608,0.95958,0.88401,0.95958,0.88401,0.95958,0.88401,0.95958,0.88401,0.95958,0.88401,0.76229,0.90167,0.59526,0.91916,1,1,0.86304,0.69225,0.88401,1,1,0.70424,0.79468,0.91926,0.88175,0.70823,0.94903,0.9121,0.8785,1,1,0.9121,0.8785,0.87802,0.88656,0.8785,0.86943,0.8801,0.86943,0.8801,0.86943,0.8801,0.87402,0.89291,0.77958,0.91343,1,1,0.77958,0.91343,0.70864,0.7173,0.70864,0.7173,0.70864,0.7173,0.70864,0.7173,1,1,0.81055,0.75841,0.81055,1.06452,0.90399,0.8785,0.90399,0.8785,0.90399,0.8785,0.90399,0.8785,0.90399,0.8785,0.90399,0.8785,0.96017,0.95794,0.77892,0.85162,0.77892,0.78257,0.79492,0.78257,0.79492,0.78257,0.79492,0.9297,0.56892,0.83908,0.88762,0.77539,0.8715,0.87508,0.89049,1,1,0.81055,1.04106,1.20528,1.20528,1,1.15543,0.70674,0.98387,0.94721,1.33431,1.45894,0.95161,1.06303,0.83908,0.80352,0.57184,0.6965,0.56289,0.82001,0.56029,0.81235,1.02988,0.83908,0.7762,0.68156,0.80367,0.73133,0.78257,0.87356,0.86943,0.95958,0.75727,0.89019,1.04924,0.9121,0.7648,0.86943,0.87356,0.79795,0.78275,0.81055,0.77892,0.9762,0.82577,0.99819,0.84896,0.95958,0.77892,0.96108,1.01407,0.89049,1.02988,0.94211,0.96108,0.8936,0.84021,0.87842,0.96399,0.79109,0.89049,1.00813,1.02988,0.86077,0.87445,0.92099,0.84723,0.86513,0.8801,0.75638,0.85714,0.78216,0.79586,0.87965,0.94211,0.97747,0.78287,0.97926,0.84971,1.02988,0.94211,0.8801,0.94211,0.84971,0.73133,1,1,1,1,1,1,1,1,1,1,1,1,0.90264,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.90518,1,1,1,1,1,1,1,1,1,1,1,1,0.90548,1,1,1,1,1,1,0.96017,0.95794,0.96017,0.95794,0.96017,0.95794,0.77892,0.85162,1,1,0.89552,0.90527,1,0.90363,0.92794,0.92794,0.92794,0.92794,0.87012,0.87012,0.87012,0.89552,0.89552,1.42259,0.71143,1.06152,1,1,1.03372,1.03372,0.97171,1.4956,2.2807,0.93835,0.83406,0.91133,0.84107,0.91133,1,1,1,0.72021,1,1.23108,0.83489,0.88525,0.88525,0.81499,0.90527,1.81055,0.90527,1.81055,1.31006,1.53711,0.94434,1.08696,1,0.95018,0.77192,0.85284,0.90747,1.17534,0.69825,0.9716,1.37077,0.90747,0.90747,0.85356,0.90747,0.90747,1.44947,0.85284,0.8941,0.8941,0.70572,0.8,0.70572,0.70572,0.70572,0.70572,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.99862,0.99862,1,1,1,1,1,1.08004,0.91027,1,1,1,0.99862,1,1,1,1,1,1,1,1,1,1,1,1,0.90727,0.90727,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];var CalibriBoldMetrics={lineHeight:1.2207,lineGap:0.2207};var CalibriBoldItalicFactors=[1.3877,1,1,1,0.97801,0.92482,0.89552,0.91133,0.81988,0.97566,0.98152,0.93548,0.93548,1.2798,0.85284,0.92794,1,0.96134,1.56239,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.82845,0.82845,0.85284,0.85284,0.85284,0.75859,0.92138,0.83908,0.7762,0.71805,0.87289,0.73133,0.7514,0.81921,0.87356,0.95958,0.59526,0.75727,0.69225,1.04924,0.90872,0.85938,0.79795,0.87068,0.77958,0.69766,0.81055,0.90399,0.88653,0.96068,0.82577,0.77892,0.78257,0.97507,1.529,0.97507,0.85284,0.89552,0.90176,0.94908,0.86411,0.74012,0.86411,0.88323,0.95015,0.86411,0.86331,0.88401,0.91916,0.86304,0.88401,0.9039,0.86331,0.86331,0.86411,0.86411,0.90464,0.70852,1.04106,0.86331,0.84372,0.95794,0.82616,0.84548,0.79492,0.88331,1.69808,0.88331,0.85284,0.97801,0.89552,0.91133,0.89552,0.91133,1.7801,0.89552,1.24487,1.13254,1.19129,0.96839,0.85284,0.68787,0.70645,0.85592,0.90747,1.01466,1.0088,0.90323,1,1.07463,1,0.91056,0.75806,1.19118,0.96839,0.78864,0.82845,0.84133,0.75859,0.83908,0.83908,0.83908,0.83908,0.83908,0.83908,0.77539,0.71805,0.73133,0.73133,0.73133,0.73133,0.95958,0.95958,0.95958,0.95958,0.88506,0.90872,0.85938,0.85938,0.85938,0.85938,0.85938,0.85284,0.87068,0.90399,0.90399,0.90399,0.90399,0.77892,0.79795,0.90807,0.94908,0.94908,0.94908,0.94908,0.94908,0.94908,0.85887,0.74012,0.88323,0.88323,0.88323,0.88323,0.88401,0.88401,0.88401,0.88401,0.8785,0.86331,0.86331,0.86331,0.86331,0.86331,0.86331,0.90747,0.89049,0.86331,0.86331,0.86331,0.86331,0.84548,0.86411,0.84548,0.83908,0.94908,0.83908,0.94908,0.83908,0.94908,0.71805,0.74012,0.71805,0.74012,0.71805,0.74012,0.71805,0.74012,0.87289,0.79538,0.88506,0.92726,0.73133,0.88323,0.73133,0.88323,0.73133,0.88323,0.73133,0.88323,0.73133,0.88323,0.81921,0.86411,0.81921,0.86411,0.81921,0.86411,1,1,0.87356,0.86331,0.91075,0.8777,0.95958,0.88401,0.95958,0.88401,0.95958,0.88401,0.95958,0.88401,0.95958,0.88401,0.76467,0.90167,0.59526,0.91916,1,1,0.86304,0.69225,0.88401,1,1,0.70424,0.77312,0.91926,0.88175,0.70823,0.94903,0.90872,0.86331,1,1,0.90872,0.86331,0.86906,0.88116,0.86331,0.85938,0.86331,0.85938,0.86331,0.85938,0.86331,0.87402,0.86549,0.77958,0.90464,1,1,0.77958,0.90464,0.69766,0.70852,0.69766,0.70852,0.69766,0.70852,0.69766,0.70852,1,1,0.81055,0.75841,0.81055,1.06452,0.90399,0.86331,0.90399,0.86331,0.90399,0.86331,0.90399,0.86331,0.90399,0.86331,0.90399,0.86331,0.96068,0.95794,0.77892,0.84548,0.77892,0.78257,0.79492,0.78257,0.79492,0.78257,0.79492,0.9297,0.56892,0.83908,0.94908,0.77539,0.85887,0.87068,0.89049,1,1,0.81055,1.04106,1.20528,1.20528,1,1.15543,0.70088,0.98387,0.94721,1.33431,1.45894,0.95161,1.48387,0.83908,0.80352,0.57118,0.6965,0.56347,0.79179,0.55853,0.80346,1.02988,0.83908,0.7762,0.67174,0.86036,0.73133,0.78257,0.87356,0.86441,0.95958,0.75727,0.89019,1.04924,0.90872,0.74889,0.85938,0.87891,0.79795,0.7957,0.81055,0.77892,0.97447,0.82577,0.97466,0.87179,0.95958,0.77892,0.94252,0.95612,0.8753,1.02988,0.92733,0.94252,0.87411,0.84021,0.8728,0.95612,0.74081,0.8753,1.02189,1.02988,0.84814,0.87445,0.91822,0.84723,0.85668,0.86331,0.81344,0.87581,0.76422,0.82046,0.96057,0.92733,0.99375,0.78022,0.95452,0.86015,1.02988,0.92733,0.86331,0.92733,0.86015,0.73133,1,1,1,1,1,1,1,1,1,1,1,1,0.90631,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.88323,1,1,1,1,1,1,1,1,1,1,1,1,0.85174,1,1,1,1,1,1,0.96068,0.95794,0.96068,0.95794,0.96068,0.95794,0.77892,0.84548,1,1,0.89552,0.90527,1,0.90363,0.92794,0.92794,0.92794,0.89807,0.87012,0.87012,0.87012,0.89552,0.89552,1.42259,0.71094,1.06152,1,1,1.03372,1.03372,0.97171,1.4956,2.2807,0.92972,0.83406,0.91133,0.83326,0.91133,1,1,1,0.72021,1,1.23108,0.83489,0.88525,0.88525,0.81499,0.90616,1.81055,0.90527,1.81055,1.3107,1.53711,0.94434,1.08696,1,0.95018,0.77192,0.85284,0.90747,1.17534,0.69825,0.9716,1.37077,0.90747,0.90747,0.85356,0.90747,0.90747,1.44947,0.85284,0.8941,0.8941,0.70572,0.8,0.70572,0.70572,0.70572,0.70572,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.99862,0.99862,1,1,1,1,1,1.08004,0.91027,1,1,1,0.99862,1,1,1,1,1,1,1,1,1,1,1,1,0.90727,0.90727,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];var CalibriBoldItalicMetrics={lineHeight:1.2207,lineGap:0.2207};var CalibriItalicFactors=[1.3877,1,1,1,1.17223,1.1293,0.89552,0.91133,0.80395,1.02269,1.15601,0.91056,0.91056,1.2798,0.85284,0.89807,1,0.90861,1.39543,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.96309,0.96309,0.85284,0.85284,0.85284,0.83319,0.88071,0.8675,0.81552,0.72346,0.85193,0.73206,0.7522,0.81105,0.86275,0.90685,0.6377,0.77892,0.75593,1.02638,0.89249,0.84118,0.77452,0.85374,0.75186,0.67789,0.79776,0.88844,0.85066,0.94309,0.77818,0.7306,0.76659,1.10369,1.38313,1.10369,1.06139,0.89552,0.8739,0.9245,0.9245,0.83203,0.9245,0.85865,1.09842,0.9245,0.9245,1.03297,1.07692,0.90918,1.03297,0.94959,0.9245,0.92274,0.9245,0.9245,1.02933,0.77832,1.20562,0.9245,0.8916,0.98986,0.86621,0.89453,0.79004,0.94152,1.77256,0.94152,0.85284,0.97801,0.89552,0.91133,0.89552,0.91133,1.91729,0.89552,1.17889,1.13254,1.16359,0.92098,0.85284,0.68787,0.71353,0.84737,0.90747,1.0088,1.0044,0.87683,1,1.09091,1,0.92229,0.739,1.15642,0.92098,0.76288,0.80504,0.80972,0.75859,0.8675,0.8675,0.8675,0.8675,0.8675,0.8675,0.76318,0.72346,0.73206,0.73206,0.73206,0.73206,0.90685,0.90685,0.90685,0.90685,0.86477,0.89249,0.84118,0.84118,0.84118,0.84118,0.84118,0.85284,0.84557,0.88844,0.88844,0.88844,0.88844,0.7306,0.77452,0.86331,0.9245,0.9245,0.9245,0.9245,0.9245,0.9245,0.84843,0.83203,0.85865,0.85865,0.85865,0.85865,0.82601,0.82601,0.82601,0.82601,0.94469,0.9245,0.92274,0.92274,0.92274,0.92274,0.92274,0.90747,0.86651,0.9245,0.9245,0.9245,0.9245,0.89453,0.9245,0.89453,0.8675,0.9245,0.8675,0.9245,0.8675,0.9245,0.72346,0.83203,0.72346,0.83203,0.72346,0.83203,0.72346,0.83203,0.85193,0.8875,0.86477,0.99034,0.73206,0.85865,0.73206,0.85865,0.73206,0.85865,0.73206,0.85865,0.73206,0.85865,0.81105,0.9245,0.81105,0.9245,0.81105,0.9245,1,1,0.86275,0.9245,0.90872,0.93591,0.90685,0.82601,0.90685,0.82601,0.90685,0.82601,0.90685,1.03297,0.90685,0.82601,0.77896,1.05611,0.6377,1.07692,1,1,0.90918,0.75593,1.03297,1,1,0.76032,0.9375,0.98156,0.93407,0.77261,1.11429,0.89249,0.9245,1,1,0.89249,0.9245,0.92534,0.86698,0.9245,0.84118,0.92274,0.84118,0.92274,0.84118,0.92274,0.8667,0.86291,0.75186,1.02933,1,1,0.75186,1.02933,0.67789,0.77832,0.67789,0.77832,0.67789,0.77832,0.67789,0.77832,1,1,0.79776,0.97655,0.79776,1.23023,0.88844,0.9245,0.88844,0.9245,0.88844,0.9245,0.88844,0.9245,0.88844,0.9245,0.88844,0.9245,0.94309,0.98986,0.7306,0.89453,0.7306,0.76659,0.79004,0.76659,0.79004,0.76659,0.79004,1.09231,0.54873,0.8675,0.9245,0.76318,0.84843,0.84557,0.86651,1,1,0.79776,1.20562,1.18622,1.18622,1,1.1437,0.67009,0.96334,0.93695,1.35191,1.40909,0.95161,1.48387,0.8675,0.90861,0.6192,0.7363,0.64824,0.82411,0.56321,0.85696,1.23516,0.8675,0.81552,0.7286,0.84134,0.73206,0.76659,0.86275,0.84369,0.90685,0.77892,0.85871,1.02638,0.89249,0.75828,0.84118,0.85984,0.77452,0.76466,0.79776,0.7306,0.90782,0.77818,0.903,0.87291,0.90685,0.7306,0.99058,1.03667,0.94635,1.23516,0.9849,0.99058,0.92393,0.8916,0.942,1.03667,0.75026,0.94635,1.0297,1.23516,0.90918,0.94048,0.98217,0.89746,0.84153,0.92274,0.82507,0.88832,0.84438,0.88178,1.03525,0.9849,1.00225,0.78086,0.97248,0.89404,1.23516,0.9849,0.92274,0.9849,0.89404,0.73206,1,1,1,1,1,1,1,1,1,1,1,1,0.89693,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.85865,1,1,1,1,1,1,1,1,1,1,1,1,0.90933,1,1,1,1,1,1,0.94309,0.98986,0.94309,0.98986,0.94309,0.98986,0.7306,0.89453,1,1,0.89552,0.90527,1,0.90186,1.12308,1.12308,1.12308,1.12308,1.2566,1.2566,1.2566,0.89552,0.89552,1.42259,0.68994,1.03809,1,1,1.0176,1.0176,1.11523,1.4956,2.01462,0.97858,0.82616,0.91133,0.83437,0.91133,1,1,1,0.70508,1,1.23108,0.79801,0.84426,0.84426,0.774,0.90572,1.81055,0.90749,1.81055,1.28809,1.55469,0.94434,1.07806,1,0.97094,0.7589,0.85284,0.90747,1.19658,0.69825,0.97622,1.33512,0.90747,0.90747,0.85284,0.90747,0.90747,1.44947,0.85284,0.8941,0.8941,0.70572,0.8,0.70572,0.70572,0.70572,0.70572,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.99862,0.99862,1,1,1,1,1,1.0336,0.91027,1,1,1,0.99862,1,1,1,1,1,1,1,1,1,1,1,1,1.05859,1.05859,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];var CalibriItalicMetrics={lineHeight:1.2207,lineGap:0.2207};var CalibriRegularFactors=[1.3877,1,1,1,1.17223,1.1293,0.89552,0.91133,0.80395,1.02269,1.15601,0.91056,0.91056,1.2798,0.85284,0.89807,1,0.90861,1.39016,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.96309,0.96309,0.85284,0.85284,0.85284,0.83319,0.88071,0.8675,0.81552,0.73834,0.85193,0.73206,0.7522,0.81105,0.86275,0.90685,0.6377,0.77892,0.75593,1.02638,0.89385,0.85122,0.77452,0.86503,0.75186,0.68887,0.79776,0.88844,0.85066,0.94258,0.77818,0.7306,0.76659,1.10369,1.39016,1.10369,1.06139,0.89552,0.8739,0.86128,0.94469,0.8457,0.94469,0.89464,1.09842,0.84636,0.94469,1.03297,1.07692,0.90918,1.03297,0.95897,0.94469,0.9482,0.94469,0.94469,1.04692,0.78223,1.20562,0.94469,0.90332,0.98986,0.86621,0.90527,0.79004,0.94152,1.77256,0.94152,0.85284,0.97801,0.89552,0.91133,0.89552,0.91133,1.91729,0.89552,1.17889,1.13254,1.08707,0.92098,0.85284,0.68787,0.71353,0.84737,0.90747,1.0088,1.0044,0.87683,1,1.09091,1,0.92229,0.739,1.15642,0.92098,0.76288,0.80504,0.80972,0.75859,0.8675,0.8675,0.8675,0.8675,0.8675,0.8675,0.76318,0.73834,0.73206,0.73206,0.73206,0.73206,0.90685,0.90685,0.90685,0.90685,0.86477,0.89385,0.85122,0.85122,0.85122,0.85122,0.85122,0.85284,0.85311,0.88844,0.88844,0.88844,0.88844,0.7306,0.77452,0.86331,0.86128,0.86128,0.86128,0.86128,0.86128,0.86128,0.8693,0.8457,0.89464,0.89464,0.89464,0.89464,0.82601,0.82601,0.82601,0.82601,0.94469,0.94469,0.9482,0.9482,0.9482,0.9482,0.9482,0.90747,0.86651,0.94469,0.94469,0.94469,0.94469,0.90527,0.94469,0.90527,0.8675,0.86128,0.8675,0.86128,0.8675,0.86128,0.73834,0.8457,0.73834,0.8457,0.73834,0.8457,0.73834,0.8457,0.85193,0.92454,0.86477,0.9921,0.73206,0.89464,0.73206,0.89464,0.73206,0.89464,0.73206,0.89464,0.73206,0.89464,0.81105,0.84636,0.81105,0.84636,0.81105,0.84636,1,1,0.86275,0.94469,0.90872,0.95786,0.90685,0.82601,0.90685,0.82601,0.90685,0.82601,0.90685,1.03297,0.90685,0.82601,0.77741,1.05611,0.6377,1.07692,1,1,0.90918,0.75593,1.03297,1,1,0.76032,0.90452,0.98156,1.11842,0.77261,1.11429,0.89385,0.94469,1,1,0.89385,0.94469,0.95877,0.86901,0.94469,0.85122,0.9482,0.85122,0.9482,0.85122,0.9482,0.8667,0.90016,0.75186,1.04692,1,1,0.75186,1.04692,0.68887,0.78223,0.68887,0.78223,0.68887,0.78223,0.68887,0.78223,1,1,0.79776,0.92188,0.79776,1.23023,0.88844,0.94469,0.88844,0.94469,0.88844,0.94469,0.88844,0.94469,0.88844,0.94469,0.88844,0.94469,0.94258,0.98986,0.7306,0.90527,0.7306,0.76659,0.79004,0.76659,0.79004,0.76659,0.79004,1.09231,0.54873,0.8675,0.86128,0.76318,0.8693,0.85311,0.86651,1,1,0.79776,1.20562,1.18622,1.18622,1,1.1437,0.67742,0.96334,0.93695,1.35191,1.40909,0.95161,1.48387,0.86686,0.90861,0.62267,0.74359,0.65649,0.85498,0.56963,0.88254,1.23516,0.8675,0.81552,0.75443,0.84503,0.73206,0.76659,0.86275,0.85122,0.90685,0.77892,0.85746,1.02638,0.89385,0.75657,0.85122,0.86275,0.77452,0.74171,0.79776,0.7306,0.95165,0.77818,0.89772,0.88831,0.90685,0.7306,0.98142,1.02191,0.96576,1.23516,0.99018,0.98142,0.9236,0.89258,0.94035,1.02191,0.78848,0.96576,0.9561,1.23516,0.90918,0.92578,0.95424,0.89746,0.83969,0.9482,0.80113,0.89442,0.85208,0.86155,0.98022,0.99018,1.00452,0.81209,0.99247,0.89181,1.23516,0.99018,0.9482,0.99018,0.89181,0.73206,1,1,1,1,1,1,1,1,1,1,1,1,0.88844,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.89464,1,1,1,1,1,1,1,1,1,1,1,1,0.96766,1,1,1,1,1,1,0.94258,0.98986,0.94258,0.98986,0.94258,0.98986,0.7306,0.90527,1,1,0.89552,0.90527,1,0.90186,1.12308,1.12308,1.12308,1.12308,1.2566,1.2566,1.2566,0.89552,0.89552,1.42259,0.69043,1.03809,1,1,1.0176,1.0176,1.11523,1.4956,2.01462,0.99331,0.82616,0.91133,0.84286,0.91133,1,1,1,0.70508,1,1.23108,0.79801,0.84426,0.84426,0.774,0.90527,1.81055,0.90527,1.81055,1.28809,1.55469,0.94434,1.07806,1,0.97094,0.7589,0.85284,0.90747,1.19658,0.69825,0.97622,1.33512,0.90747,0.90747,0.85356,0.90747,0.90747,1.44947,0.85284,0.8941,0.8941,0.70572,0.8,0.70572,0.70572,0.70572,0.70572,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.99862,0.99862,1,1,1,1,1,1.0336,0.91027,1,1,1,0.99862,1,1,1,1,1,1,1,1,1,1,1,1,1.05859,1.05859,1,1,1,1.07185,0.99413,0.96334,1.08065,1,1,1,1,1,1,1,1,1,1,1];var CalibriRegularMetrics={lineHeight:1.2207,lineGap:0.2207};;// ./src/core/helvetica_factors.js\nvar HelveticaBoldFactors=[0.76116,1,1,1.0006,0.99998,0.99974,0.99973,0.99973,0.99982,0.99977,1.00087,0.99998,0.99998,0.99959,1.00003,1.0006,0.99998,1.0006,1.0006,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99998,1,1.00003,1.00003,1.00003,1.00026,0.9999,0.99977,0.99977,0.99977,0.99977,1.00001,1.00026,1.00022,0.99977,1.0006,0.99973,0.99977,1.00026,0.99999,0.99977,1.00022,1.00001,1.00022,0.99977,1.00001,1.00026,0.99977,1.00001,1.00016,1.00001,1.00001,1.00026,0.99998,1.0006,0.99998,1.00003,0.99973,0.99998,0.99973,1.00026,0.99973,1.00026,0.99973,0.99998,1.00026,1.00026,1.0006,1.0006,0.99973,1.0006,0.99982,1.00026,1.00026,1.00026,1.00026,0.99959,0.99973,0.99998,1.00026,0.99973,1.00022,0.99973,0.99973,1,0.99959,1.00077,0.99959,1.00003,0.99998,0.99973,0.99973,0.99973,0.99973,1.00077,0.99973,0.99998,1.00025,0.99968,0.99973,1.00003,1.00025,0.60299,1.00024,1.06409,1,1,0.99998,1,0.99973,1.0006,0.99998,1,0.99936,0.99973,1.00002,1.00002,1.00002,1.00026,0.99977,0.99977,0.99977,0.99977,0.99977,0.99977,1,0.99977,1.00001,1.00001,1.00001,1.00001,1.0006,1.0006,1.0006,1.0006,0.99977,0.99977,1.00022,1.00022,1.00022,1.00022,1.00022,1.00003,1.00022,0.99977,0.99977,0.99977,0.99977,1.00001,1.00001,1.00026,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99982,0.99973,0.99973,0.99973,0.99973,0.99973,1.0006,1.0006,1.0006,1.0006,1.00026,1.00026,1.00026,1.00026,1.00026,1.00026,1.00026,1.06409,1.00026,1.00026,1.00026,1.00026,1.00026,0.99973,1.00026,0.99973,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,0.99977,1.03374,0.99977,1.00026,1.00001,0.99973,1.00001,0.99973,1.00001,0.99973,1.00001,0.99973,1.00001,0.99973,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,0.99977,1.00026,0.99977,1.00026,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.00042,0.99973,0.99973,1.0006,0.99977,0.99973,0.99973,1.00026,1.0006,1.00026,1.0006,1.00026,1.03828,1.00026,0.99999,1.00026,1.0006,0.99977,1.00026,0.99977,1.00026,0.99977,1.00026,0.9993,0.9998,1.00026,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,1,1.00016,0.99977,0.99959,0.99977,0.99959,0.99977,0.99959,1.00001,0.99973,1.00001,0.99973,1.00001,0.99973,1.00001,0.99973,1.00026,0.99998,1.00026,0.8121,1.00026,0.99998,0.99977,1.00026,0.99977,1.00026,0.99977,1.00026,0.99977,1.00026,0.99977,1.00026,0.99977,1.00026,1.00016,1.00022,1.00001,0.99973,1.00001,1.00026,1,1.00026,1,1.00026,1,1.0006,0.99973,0.99977,0.99973,1,0.99982,1.00022,1.00026,1.00001,0.99973,1.00026,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,1.00034,0.99977,1,0.99997,1.00026,1.00078,1.00036,0.99973,1.00013,1.0006,0.99977,0.99977,0.99988,0.85148,1.00001,1.00026,0.99977,1.00022,1.0006,0.99977,1.00001,0.99999,0.99977,1.00069,1.00022,0.99977,1.00001,0.99984,1.00026,1.00001,1.00024,1.00001,0.9999,1,1.0006,1.00001,1.00041,0.99962,1.00026,1.0006,0.99995,1.00041,0.99942,0.99973,0.99927,1.00082,0.99902,1.00026,1.00087,1.0006,1.00069,0.99973,0.99867,0.99973,0.9993,1.00026,1.00049,1.00056,1,0.99988,0.99935,0.99995,0.99954,1.00055,0.99945,1.00032,1.0006,0.99995,1.00026,0.99995,1.00032,1.00001,1.00008,0.99971,1.00019,0.9994,1.00001,1.0006,1.00044,0.99973,1.00023,1.00047,1,0.99942,0.99561,0.99989,1.00035,0.99977,1.00035,0.99977,1.00019,0.99944,1.00001,1.00021,0.99926,1.00035,1.00035,0.99942,1.00048,0.99999,0.99977,1.00022,1.00035,1.00001,0.99977,1.00026,0.99989,1.00057,1.00001,0.99936,1.00052,1.00012,0.99996,1.00043,1,1.00035,0.9994,0.99976,1.00035,0.99973,1.00052,1.00041,1.00119,1.00037,0.99973,1.00002,0.99986,1.00041,1.00041,0.99902,0.9996,1.00034,0.99999,1.00026,0.99999,1.00026,0.99973,1.00052,0.99973,1,0.99973,1.00041,1.00075,0.9994,1.0003,0.99999,1,1.00041,0.99955,1,0.99915,0.99973,0.99973,1.00026,1.00119,0.99955,0.99973,1.0006,0.99911,1.0006,1.00026,0.99972,1.00026,0.99902,1.00041,0.99973,0.99999,1,1,1.00038,1.0005,1.00016,1.00022,1.00016,1.00022,1.00016,1.00022,1.00001,0.99973,1,1,0.99973,1,1,0.99955,1.0006,1.0006,1.0006,1.0006,1,1,1,0.99973,0.99973,0.99972,1,1,1.00106,0.99999,0.99998,0.99998,0.99999,0.99998,1.66475,1,0.99973,0.99973,1.00023,0.99973,0.99971,1.00047,1.00023,1,0.99991,0.99984,1.00002,1.00002,1.00002,1.00002,1,1,1,1,1,1,1,0.99972,1,1.20985,1.39713,1.00003,1.00031,1.00015,1,0.99561,1.00027,1.00031,1.00031,0.99915,1.00031,1.00031,0.99999,1.00003,0.99999,0.99999,1.41144,1.6,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.40579,1.40579,1.36625,0.99999,1,0.99861,0.99861,1,1.00026,1.00026,1.00026,1.00026,0.99972,0.99999,0.99999,0.99999,0.99999,1.40483,1,0.99977,1.00054,1,1,0.99953,0.99962,1.00042,0.9995,1,1,1,1,1,1,1,1,0.99998,0.99998,0.99998,0.99998,1,1,1,1,1,1,1,1,1,1,1];var HelveticaBoldMetrics={lineHeight:1.2,lineGap:0.2};var HelveticaBoldItalicFactors=[0.76116,1,1,1.0006,0.99998,0.99974,0.99973,0.99973,0.99982,0.99977,1.00087,0.99998,0.99998,0.99959,1.00003,1.0006,0.99998,1.0006,1.0006,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99998,1,1.00003,1.00003,1.00003,1.00026,0.9999,0.99977,0.99977,0.99977,0.99977,1.00001,1.00026,1.00022,0.99977,1.0006,0.99973,0.99977,1.00026,0.99999,0.99977,1.00022,1.00001,1.00022,0.99977,1.00001,1.00026,0.99977,1.00001,1.00016,1.00001,1.00001,1.00026,0.99998,1.0006,0.99998,1.00003,0.99973,0.99998,0.99973,1.00026,0.99973,1.00026,0.99973,0.99998,1.00026,1.00026,1.0006,1.0006,0.99973,1.0006,0.99982,1.00026,1.00026,1.00026,1.00026,0.99959,0.99973,0.99998,1.00026,0.99973,1.00022,0.99973,0.99973,1,0.99959,1.00077,0.99959,1.00003,0.99998,0.99973,0.99973,0.99973,0.99973,1.00077,0.99973,0.99998,1.00025,0.99968,0.99973,1.00003,1.00025,0.60299,1.00024,1.06409,1,1,0.99998,1,0.99973,1.0006,0.99998,1,0.99936,0.99973,1.00002,1.00002,1.00002,1.00026,0.99977,0.99977,0.99977,0.99977,0.99977,0.99977,1,0.99977,1.00001,1.00001,1.00001,1.00001,1.0006,1.0006,1.0006,1.0006,0.99977,0.99977,1.00022,1.00022,1.00022,1.00022,1.00022,1.00003,1.00022,0.99977,0.99977,0.99977,0.99977,1.00001,1.00001,1.00026,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99982,0.99973,0.99973,0.99973,0.99973,0.99973,1.0006,1.0006,1.0006,1.0006,1.00026,1.00026,1.00026,1.00026,1.00026,1.00026,1.00026,1.06409,1.00026,1.00026,1.00026,1.00026,1.00026,0.99973,1.00026,0.99973,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,0.99977,1.0044,0.99977,1.00026,1.00001,0.99973,1.00001,0.99973,1.00001,0.99973,1.00001,0.99973,1.00001,0.99973,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,0.99977,1.00026,0.99977,1.00026,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,0.99971,0.99973,0.99973,1.0006,0.99977,0.99973,0.99973,1.00026,1.0006,1.00026,1.0006,1.00026,1.01011,1.00026,0.99999,1.00026,1.0006,0.99977,1.00026,0.99977,1.00026,0.99977,1.00026,0.9993,0.9998,1.00026,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,1,1.00016,0.99977,0.99959,0.99977,0.99959,0.99977,0.99959,1.00001,0.99973,1.00001,0.99973,1.00001,0.99973,1.00001,0.99973,1.00026,0.99998,1.00026,0.8121,1.00026,0.99998,0.99977,1.00026,0.99977,1.00026,0.99977,1.00026,0.99977,1.00026,0.99977,1.00026,0.99977,1.00026,1.00016,1.00022,1.00001,0.99973,1.00001,1.00026,1,1.00026,1,1.00026,1,1.0006,0.99973,0.99977,0.99973,1,0.99982,1.00022,1.00026,1.00001,0.99973,1.00026,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99977,1,1,1.00026,0.99969,0.99972,0.99981,0.9998,1.0006,0.99977,0.99977,1.00022,0.91155,1.00001,1.00026,0.99977,1.00022,1.0006,0.99977,1.00001,0.99999,0.99977,0.99966,1.00022,1.00032,1.00001,0.99944,1.00026,1.00001,0.99968,1.00001,1.00047,1,1.0006,1.00001,0.99981,1.00101,1.00026,1.0006,0.99948,0.99981,1.00064,0.99973,0.99942,1.00101,1.00061,1.00026,1.00069,1.0006,1.00014,0.99973,1.01322,0.99973,1.00065,1.00026,1.00012,0.99923,1,1.00064,1.00076,0.99948,1.00055,1.00063,1.00007,0.99943,1.0006,0.99948,1.00026,0.99948,0.99943,1.00001,1.00001,1.00029,1.00038,1.00035,1.00001,1.0006,1.0006,0.99973,0.99978,1.00001,1.00057,0.99989,0.99967,0.99964,0.99967,0.99977,0.99999,0.99977,1.00038,0.99977,1.00001,0.99973,1.00066,0.99967,0.99967,1.00041,0.99998,0.99999,0.99977,1.00022,0.99967,1.00001,0.99977,1.00026,0.99964,1.00031,1.00001,0.99999,0.99999,1,1.00023,1,1,0.99999,1.00035,1.00001,0.99999,0.99973,0.99977,0.99999,1.00058,0.99973,0.99973,0.99955,0.9995,1.00026,1.00026,1.00032,0.99989,1.00034,0.99999,1.00026,1.00026,1.00026,0.99973,0.45998,0.99973,1.00026,0.99973,1.00001,0.99999,0.99982,0.99994,0.99996,1,1.00042,1.00044,1.00029,1.00023,0.99973,0.99973,1.00026,0.99949,1.00002,0.99973,1.0006,1.0006,1.0006,0.99975,1.00026,1.00026,1.00032,0.98685,0.99973,1.00026,1,1,0.99966,1.00044,1.00016,1.00022,1.00016,1.00022,1.00016,1.00022,1.00001,0.99973,1,1,0.99973,1,1,0.99955,1.0006,1.0006,1.0006,1.0006,1,1,1,0.99973,0.99973,0.99972,1,1,1.00106,0.99999,0.99998,0.99998,0.99999,0.99998,1.66475,1,0.99973,0.99973,1,0.99973,0.99971,0.99978,1,1,0.99991,0.99984,1.00002,1.00002,1.00002,1.00002,1.00098,1,1,1,1.00049,1,1,0.99972,1,1.20985,1.39713,1.00003,1.00031,1.00015,1,0.99561,1.00027,1.00031,1.00031,0.99915,1.00031,1.00031,0.99999,1.00003,0.99999,0.99999,1.41144,1.6,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.40579,1.40579,1.36625,0.99999,1,0.99861,0.99861,1,1.00026,1.00026,1.00026,1.00026,0.99972,0.99999,0.99999,0.99999,0.99999,1.40483,1,0.99977,1.00054,1,1,0.99953,0.99962,1.00042,0.9995,1,1,1,1,1,1,1,1,0.99998,0.99998,0.99998,0.99998,1,1,1,1,1,1,1,1,1,1,1];var HelveticaBoldItalicMetrics={lineHeight:1.35,lineGap:0.2};var HelveticaItalicFactors=[0.76116,1,1,1.0006,1.0006,1.00006,0.99973,0.99973,0.99982,1.00001,1.00043,0.99998,0.99998,0.99959,1.00003,1.0006,0.99998,1.0006,1.0006,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,1.0006,1,1.00003,1.00003,1.00003,0.99973,0.99987,1.00001,1.00001,0.99977,0.99977,1.00001,1.00026,1.00022,0.99977,1.0006,1,1.00001,0.99973,0.99999,0.99977,1.00022,1.00001,1.00022,0.99977,1.00001,1.00026,0.99977,1.00001,1.00016,1.00001,1.00001,1.00026,1.0006,1.0006,1.0006,0.99949,0.99973,0.99998,0.99973,0.99973,1,0.99973,0.99973,1.0006,0.99973,0.99973,0.99924,0.99924,1,0.99924,0.99999,0.99973,0.99973,0.99973,0.99973,0.99998,1,1.0006,0.99973,1,0.99977,1,1,1,1.00005,1.0009,1.00005,1.00003,0.99998,0.99973,0.99973,0.99973,0.99973,1.0009,0.99973,0.99998,1.00025,0.99968,0.99973,1.00003,1.00025,0.60299,1.00024,1.06409,1,1,0.99998,1,0.9998,1.0006,0.99998,1,0.99936,0.99973,1.00002,1.00002,1.00002,1.00026,1.00001,1.00001,1.00001,1.00001,1.00001,1.00001,1,0.99977,1.00001,1.00001,1.00001,1.00001,1.0006,1.0006,1.0006,1.0006,0.99977,0.99977,1.00022,1.00022,1.00022,1.00022,1.00022,1.00003,1.00022,0.99977,0.99977,0.99977,0.99977,1.00001,1.00001,1.00026,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99982,1,0.99973,0.99973,0.99973,0.99973,1.0006,1.0006,1.0006,1.0006,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,1.06409,1.00026,0.99973,0.99973,0.99973,0.99973,1,0.99973,1,1.00001,0.99973,1.00001,0.99973,1.00001,0.99973,0.99977,1,0.99977,1,0.99977,1,0.99977,1,0.99977,1.0288,0.99977,0.99973,1.00001,0.99973,1.00001,0.99973,1.00001,0.99973,1.00001,0.99973,1.00001,0.99973,1.00022,0.99973,1.00022,0.99973,1.00022,0.99973,1.00022,0.99973,0.99977,0.99973,0.99977,0.99973,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,0.99924,1.0006,1.0006,0.99946,1.00034,1,0.99924,1.00001,1,1,0.99973,0.99924,0.99973,0.99924,0.99973,1.06311,0.99973,1.00024,0.99973,0.99924,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,1.00041,0.9998,0.99973,1.00022,0.99973,1.00022,0.99973,1.00022,0.99973,1,1.00016,0.99977,0.99998,0.99977,0.99998,0.99977,0.99998,1.00001,1,1.00001,1,1.00001,1,1.00001,1,1.00026,1.0006,1.00026,0.89547,1.00026,1.0006,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,1.00016,0.99977,1.00001,1,1.00001,1.00026,1,1.00026,1,1.00026,1,0.99924,0.99973,1.00001,0.99973,1,0.99982,1.00022,1.00026,1.00001,1,1.00026,1.0006,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,1.00001,1,1.00054,0.99977,1.00084,1.00007,0.99973,1.00013,0.99924,1.00001,1.00001,0.99945,0.91221,1.00001,1.00026,0.99977,1.00022,1.0006,1.00001,1.00001,0.99999,0.99977,0.99933,1.00022,1.00054,1.00001,1.00065,1.00026,1.00001,1.0001,1.00001,1.00052,1,1.0006,1.00001,0.99945,0.99897,0.99968,0.99924,1.00036,0.99945,0.99949,1,1.0006,0.99897,0.99918,0.99968,0.99911,0.99924,1,0.99962,1.01487,1,1.0005,0.99973,1.00012,1.00043,1,0.99995,0.99994,1.00036,0.99947,1.00019,1.00063,1.00025,0.99924,1.00036,0.99973,1.00036,1.00025,1.00001,1.00001,1.00027,1.0001,1.00068,1.00001,1.0006,1.0006,1,1.00008,0.99957,0.99972,0.9994,0.99954,0.99975,1.00051,1.00001,1.00019,1.00001,1.0001,0.99986,1.00001,1.00001,1.00038,0.99954,0.99954,0.9994,1.00066,0.99999,0.99977,1.00022,1.00054,1.00001,0.99977,1.00026,0.99975,1.0001,1.00001,0.99993,0.9995,0.99955,1.00016,0.99978,0.99974,1.00019,1.00022,0.99955,1.00053,0.99973,1.00089,1.00005,0.99967,1.00048,0.99973,1.00002,1.00034,0.99973,0.99973,0.99964,1.00006,1.00066,0.99947,0.99973,0.98894,0.99973,1,0.44898,1,0.99946,1,1.00039,1.00082,0.99991,0.99991,0.99985,1.00022,1.00023,1.00061,1.00006,0.99966,0.99973,0.99973,0.99973,1.00019,1.0008,1,0.99924,0.99924,0.99924,0.99983,1.00044,0.99973,0.99964,0.98332,1,0.99973,1,1,0.99962,0.99895,1.00016,0.99977,1.00016,0.99977,1.00016,0.99977,1.00001,1,1,1,0.99973,1,1,0.99955,0.99924,0.99924,0.99924,0.99924,0.99998,0.99998,0.99998,0.99973,0.99973,0.99972,1,1,1.00267,0.99999,0.99998,0.99998,1,0.99998,1.66475,1,0.99973,0.99973,1.00023,0.99973,1.00423,0.99925,0.99999,1,0.99991,0.99984,1.00002,1.00002,1.00002,1.00002,1.00049,1,1.00245,1,1,1,1,0.96329,1,1.20985,1.39713,1.00003,0.8254,1.00015,1,1.00035,1.00027,1.00031,1.00031,1.00003,1.00031,1.00031,0.99999,1.00003,0.99999,0.99999,1.41144,1.6,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.40579,1.40579,1.36625,0.99999,1,0.99861,0.99861,1,1.00026,1.00026,1.00026,1.00026,0.95317,0.99999,0.99999,0.99999,0.99999,1.40483,1,0.99977,1.00054,1,1,0.99953,0.99962,1.00042,0.9995,1,1,1,1,1,1,1,1,0.99998,0.99998,0.99998,0.99998,1,1,1,1,1,1,1,1,1,1,1];var HelveticaItalicMetrics={lineHeight:1.35,lineGap:0.2};var HelveticaRegularFactors=[0.76116,1,1,1.0006,1.0006,1.00006,0.99973,0.99973,0.99982,1.00001,1.00043,0.99998,0.99998,0.99959,1.00003,1.0006,0.99998,1.0006,1.0006,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,1.0006,1,1.00003,1.00003,1.00003,0.99973,0.99987,1.00001,1.00001,0.99977,0.99977,1.00001,1.00026,1.00022,0.99977,1.0006,1,1.00001,0.99973,0.99999,0.99977,1.00022,1.00001,1.00022,0.99977,1.00001,1.00026,0.99977,1.00001,1.00016,1.00001,1.00001,1.00026,1.0006,1.0006,1.0006,0.99949,0.99973,0.99998,0.99973,0.99973,1,0.99973,0.99973,1.0006,0.99973,0.99973,0.99924,0.99924,1,0.99924,0.99999,0.99973,0.99973,0.99973,0.99973,0.99998,1,1.0006,0.99973,1,0.99977,1,1,1,1.00005,1.0009,1.00005,1.00003,0.99998,0.99973,0.99973,0.99973,0.99973,1.0009,0.99973,0.99998,1.00025,0.99968,0.99973,1.00003,1.00025,0.60299,1.00024,1.06409,1,1,0.99998,1,0.9998,1.0006,0.99998,1,0.99936,0.99973,1.00002,1.00002,1.00002,1.00026,1.00001,1.00001,1.00001,1.00001,1.00001,1.00001,1,0.99977,1.00001,1.00001,1.00001,1.00001,1.0006,1.0006,1.0006,1.0006,0.99977,0.99977,1.00022,1.00022,1.00022,1.00022,1.00022,1.00003,1.00022,0.99977,0.99977,0.99977,0.99977,1.00001,1.00001,1.00026,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99982,1,0.99973,0.99973,0.99973,0.99973,1.0006,1.0006,1.0006,1.0006,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,1.06409,1.00026,0.99973,0.99973,0.99973,0.99973,1,0.99973,1,1.00001,0.99973,1.00001,0.99973,1.00001,0.99973,0.99977,1,0.99977,1,0.99977,1,0.99977,1,0.99977,1.04596,0.99977,0.99973,1.00001,0.99973,1.00001,0.99973,1.00001,0.99973,1.00001,0.99973,1.00001,0.99973,1.00022,0.99973,1.00022,0.99973,1.00022,0.99973,1.00022,0.99973,0.99977,0.99973,0.99977,0.99973,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,0.99924,1.0006,1.0006,1.00019,1.00034,1,0.99924,1.00001,1,1,0.99973,0.99924,0.99973,0.99924,0.99973,1.02572,0.99973,1.00005,0.99973,0.99924,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,0.99999,0.9998,0.99973,1.00022,0.99973,1.00022,0.99973,1.00022,0.99973,1,1.00016,0.99977,0.99998,0.99977,0.99998,0.99977,0.99998,1.00001,1,1.00001,1,1.00001,1,1.00001,1,1.00026,1.0006,1.00026,0.84533,1.00026,1.0006,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,1.00016,0.99977,1.00001,1,1.00001,1.00026,1,1.00026,1,1.00026,1,0.99924,0.99973,1.00001,0.99973,1,0.99982,1.00022,1.00026,1.00001,1,1.00026,1.0006,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99928,1,0.99977,1.00013,1.00055,0.99947,0.99945,0.99941,0.99924,1.00001,1.00001,1.0004,0.91621,1.00001,1.00026,0.99977,1.00022,1.0006,1.00001,1.00005,0.99999,0.99977,1.00015,1.00022,0.99977,1.00001,0.99973,1.00026,1.00001,1.00019,1.00001,0.99946,1,1.0006,1.00001,0.99978,1.00045,0.99973,0.99924,1.00023,0.99978,0.99966,1,1.00065,1.00045,1.00019,0.99973,0.99973,0.99924,1,1,0.96499,1,1.00055,0.99973,1.00008,1.00027,1,0.9997,0.99995,1.00023,0.99933,1.00019,1.00015,1.00031,0.99924,1.00023,0.99973,1.00023,1.00031,1.00001,0.99928,1.00029,1.00092,1.00035,1.00001,1.0006,1.0006,1,0.99988,0.99975,1,1.00082,0.99561,0.9996,1.00035,1.00001,0.99962,1.00001,1.00092,0.99964,1.00001,0.99963,0.99999,1.00035,1.00035,1.00082,0.99962,0.99999,0.99977,1.00022,1.00035,1.00001,0.99977,1.00026,0.9996,0.99967,1.00001,1.00034,1.00074,1.00054,1.00053,1.00063,0.99971,0.99962,1.00035,0.99975,0.99977,0.99973,1.00043,0.99953,1.0007,0.99915,0.99973,1.00008,0.99892,1.00073,1.00073,1.00114,0.99915,1.00073,0.99955,0.99973,1.00092,0.99973,1,0.99998,1,1.0003,1,1.00043,1.00001,0.99969,1.0003,1,1.00035,1.00001,0.9995,1,1.00092,0.99973,0.99973,0.99973,1.0007,0.9995,1,0.99924,1.0006,0.99924,0.99972,1.00062,0.99973,1.00114,1.00073,1,0.99955,1,1,1.00047,0.99968,1.00016,0.99977,1.00016,0.99977,1.00016,0.99977,1.00001,1,1,1,0.99973,1,1,0.99955,0.99924,0.99924,0.99924,0.99924,0.99998,0.99998,0.99998,0.99973,0.99973,0.99972,1,1,1.00267,0.99999,0.99998,0.99998,1,0.99998,1.66475,1,0.99973,0.99973,1.00023,0.99973,0.99971,0.99925,1.00023,1,0.99991,0.99984,1.00002,1.00002,1.00002,1.00002,1,1,1,1,1,1,1,0.96329,1,1.20985,1.39713,1.00003,0.8254,1.00015,1,1.00035,1.00027,1.00031,1.00031,0.99915,1.00031,1.00031,0.99999,1.00003,0.99999,0.99999,1.41144,1.6,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.40579,1.40579,1.36625,0.99999,1,0.99861,0.99861,1,1.00026,1.00026,1.00026,1.00026,0.95317,0.99999,0.99999,0.99999,0.99999,1.40483,1,0.99977,1.00054,1,1,0.99953,0.99962,1.00042,0.9995,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];var HelveticaRegularMetrics={lineHeight:1.2,lineGap:0.2};;// ./src/core/liberationsans_widths.js\nvar LiberationSansBoldWidths=[365,0,333,278,333,474,556,556,889,722,238,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,333,333,584,584,584,611,975,722,722,722,722,667,611,778,722,278,556,722,611,833,722,778,667,778,722,667,611,722,667,944,667,667,611,333,278,333,584,556,333,556,611,556,611,556,333,611,611,278,278,556,278,889,611,611,611,611,389,556,333,611,556,778,556,556,500,389,280,389,584,333,556,556,556,556,280,556,333,737,370,556,584,737,552,400,549,333,333,333,576,556,278,333,333,365,556,834,834,834,611,722,722,722,722,722,722,1000,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,556,556,556,556,556,278,278,278,278,611,611,611,611,611,611,611,549,611,611,611,611,611,556,611,556,722,556,722,556,722,556,722,556,722,556,722,556,722,556,722,719,722,611,667,556,667,556,667,556,667,556,667,556,778,611,778,611,778,611,778,611,722,611,722,611,278,278,278,278,278,278,278,278,278,278,785,556,556,278,722,556,556,611,278,611,278,611,385,611,479,611,278,722,611,722,611,722,611,708,723,611,778,611,778,611,778,611,1000,944,722,389,722,389,722,389,667,556,667,556,667,556,667,556,611,333,611,479,611,333,722,611,722,611,722,611,722,611,722,611,722,611,944,778,667,556,667,611,500,611,500,611,500,278,556,722,556,1000,889,778,611,667,556,611,333,333,333,333,333,333,333,333,333,333,333,465,722,333,853,906,474,825,927,838,278,722,722,601,719,667,611,722,778,278,722,667,833,722,644,778,722,667,600,611,667,821,667,809,802,278,667,615,451,611,278,582,615,610,556,606,475,460,611,541,278,558,556,612,556,445,611,766,619,520,684,446,582,715,576,753,845,278,582,611,582,845,667,669,885,567,711,667,278,276,556,1094,1062,875,610,722,622,719,722,719,722,567,712,667,904,626,719,719,610,702,833,722,778,719,667,722,611,622,854,667,730,703,1005,1019,870,979,719,711,1031,719,556,618,615,417,635,556,709,497,615,615,500,635,740,604,611,604,611,556,490,556,875,556,615,581,833,844,729,854,615,552,854,583,556,556,611,417,552,556,278,281,278,969,906,611,500,615,556,604,778,611,487,447,944,778,944,778,944,778,667,556,333,333,556,1000,1000,552,278,278,278,278,500,500,500,556,556,350,1000,1000,240,479,333,333,604,333,167,396,556,556,1094,556,885,489,1115,1000,768,600,834,834,834,834,1000,500,1000,500,1000,500,500,494,612,823,713,584,549,713,979,722,274,549,549,583,549,549,604,584,604,604,708,625,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,729,604,604,354,354,1000,990,990,990,990,494,604,604,604,604,354,1021,1052,917,750,750,531,656,594,510,500,750,750,611,611,333,333,333,333,333,333,333,333,222,222,333,333,333,333,333,333,333,333];var LiberationSansBoldMapping=[-1,-1,-1,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,161,162,163,164,165,166,167,168,169,170,171,172,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,402,506,507,508,509,510,511,536,537,538,539,710,711,713,728,729,730,731,732,733,900,901,902,903,904,905,906,908,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1138,1139,1168,1169,7808,7809,7810,7811,7812,7813,7922,7923,8208,8209,8211,8212,8213,8215,8216,8217,8218,8219,8220,8221,8222,8224,8225,8226,8230,8240,8242,8243,8249,8250,8252,8254,8260,8319,8355,8356,8359,8364,8453,8467,8470,8482,8486,8494,8539,8540,8541,8542,8592,8593,8594,8595,8596,8597,8616,8706,8710,8719,8721,8722,8730,8734,8735,8745,8747,8776,8800,8801,8804,8805,8962,8976,8992,8993,9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9600,9604,9608,9612,9616,9617,9618,9619,9632,9633,9642,9643,9644,9650,9658,9660,9668,9674,9675,9679,9688,9689,9702,9786,9787,9788,9792,9794,9824,9827,9829,9830,9834,9835,9836,61441,61442,61445,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];var LiberationSansBoldItalicWidths=[365,0,333,278,333,474,556,556,889,722,238,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,333,333,584,584,584,611,975,722,722,722,722,667,611,778,722,278,556,722,611,833,722,778,667,778,722,667,611,722,667,944,667,667,611,333,278,333,584,556,333,556,611,556,611,556,333,611,611,278,278,556,278,889,611,611,611,611,389,556,333,611,556,778,556,556,500,389,280,389,584,333,556,556,556,556,280,556,333,737,370,556,584,737,552,400,549,333,333,333,576,556,278,333,333,365,556,834,834,834,611,722,722,722,722,722,722,1000,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,556,556,556,556,556,278,278,278,278,611,611,611,611,611,611,611,549,611,611,611,611,611,556,611,556,722,556,722,556,722,556,722,556,722,556,722,556,722,556,722,740,722,611,667,556,667,556,667,556,667,556,667,556,778,611,778,611,778,611,778,611,722,611,722,611,278,278,278,278,278,278,278,278,278,278,782,556,556,278,722,556,556,611,278,611,278,611,396,611,479,611,278,722,611,722,611,722,611,708,723,611,778,611,778,611,778,611,1000,944,722,389,722,389,722,389,667,556,667,556,667,556,667,556,611,333,611,479,611,333,722,611,722,611,722,611,722,611,722,611,722,611,944,778,667,556,667,611,500,611,500,611,500,278,556,722,556,1000,889,778,611,667,556,611,333,333,333,333,333,333,333,333,333,333,333,333,722,333,854,906,473,844,930,847,278,722,722,610,671,667,611,722,778,278,722,667,833,722,657,778,718,667,590,611,667,822,667,829,781,278,667,620,479,611,278,591,620,621,556,610,479,492,611,558,278,566,556,603,556,450,611,712,605,532,664,409,591,704,578,773,834,278,591,611,591,834,667,667,886,614,719,667,278,278,556,1094,1042,854,622,719,677,719,722,708,722,614,722,667,927,643,719,719,615,687,833,722,778,719,667,722,611,677,781,667,729,708,979,989,854,1000,708,719,1042,729,556,619,604,534,618,556,736,510,611,611,507,622,740,604,611,611,611,556,889,556,885,556,646,583,889,935,707,854,594,552,865,589,556,556,611,469,563,556,278,278,278,969,906,611,507,619,556,611,778,611,575,467,944,778,944,778,944,778,667,556,333,333,556,1000,1000,552,278,278,278,278,500,500,500,556,556,350,1000,1000,240,479,333,333,604,333,167,396,556,556,1104,556,885,516,1146,1000,768,600,834,834,834,834,999,500,1000,500,1000,500,500,494,612,823,713,584,549,713,979,722,274,549,549,583,549,549,604,584,604,604,708,625,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,729,604,604,354,354,1000,990,990,990,990,494,604,604,604,604,354,1021,1052,917,750,750,531,656,594,510,500,750,750,611,611,333,333,333,333,333,333,333,333,222,222,333,333,333,333,333,333,333,333];var LiberationSansBoldItalicMapping=[-1,-1,-1,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,161,162,163,164,165,166,167,168,169,170,171,172,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,402,506,507,508,509,510,511,536,537,538,539,710,711,713,728,729,730,731,732,733,900,901,902,903,904,905,906,908,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1138,1139,1168,1169,7808,7809,7810,7811,7812,7813,7922,7923,8208,8209,8211,8212,8213,8215,8216,8217,8218,8219,8220,8221,8222,8224,8225,8226,8230,8240,8242,8243,8249,8250,8252,8254,8260,8319,8355,8356,8359,8364,8453,8467,8470,8482,8486,8494,8539,8540,8541,8542,8592,8593,8594,8595,8596,8597,8616,8706,8710,8719,8721,8722,8730,8734,8735,8745,8747,8776,8800,8801,8804,8805,8962,8976,8992,8993,9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9600,9604,9608,9612,9616,9617,9618,9619,9632,9633,9642,9643,9644,9650,9658,9660,9668,9674,9675,9679,9688,9689,9702,9786,9787,9788,9792,9794,9824,9827,9829,9830,9834,9835,9836,61441,61442,61445,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];var LiberationSansItalicWidths=[365,0,333,278,278,355,556,556,889,667,191,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,278,278,584,584,584,556,1015,667,667,722,722,667,611,778,722,278,500,667,556,833,722,778,667,778,722,667,611,722,667,944,667,667,611,278,278,278,469,556,333,556,556,500,556,556,278,556,556,222,222,500,222,833,556,556,556,556,333,500,278,556,500,722,500,500,500,334,260,334,584,333,556,556,556,556,260,556,333,737,370,556,584,737,552,400,549,333,333,333,576,537,278,333,333,365,556,834,834,834,611,667,667,667,667,667,667,1000,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,500,556,556,556,556,278,278,278,278,556,556,556,556,556,556,556,549,611,556,556,556,556,500,556,500,667,556,667,556,667,556,722,500,722,500,722,500,722,500,722,625,722,556,667,556,667,556,667,556,667,556,667,556,778,556,778,556,778,556,778,556,722,556,722,556,278,278,278,278,278,278,278,222,278,278,733,444,500,222,667,500,500,556,222,556,222,556,281,556,400,556,222,722,556,722,556,722,556,615,723,556,778,556,778,556,778,556,1000,944,722,333,722,333,722,333,667,500,667,500,667,500,667,500,611,278,611,354,611,278,722,556,722,556,722,556,722,556,722,556,722,556,944,722,667,500,667,611,500,611,500,611,500,222,556,667,556,1000,889,778,611,667,500,611,278,333,333,333,333,333,333,333,333,333,333,333,667,278,789,846,389,794,865,775,222,667,667,570,671,667,611,722,778,278,667,667,833,722,648,778,725,667,600,611,667,837,667,831,761,278,667,570,439,555,222,550,570,571,500,556,439,463,555,542,222,500,492,548,500,447,556,670,573,486,603,374,550,652,546,728,779,222,550,556,550,779,667,667,843,544,708,667,278,278,500,1066,982,844,589,715,639,724,667,651,667,544,704,667,917,614,715,715,589,686,833,722,778,725,667,722,611,639,795,667,727,673,920,923,805,886,651,694,1022,682,556,562,522,493,553,556,688,465,556,556,472,564,686,550,556,556,556,500,833,500,835,500,572,518,830,851,621,736,526,492,752,534,556,556,556,378,496,500,222,222,222,910,828,556,472,565,500,556,778,556,492,339,944,722,944,722,944,722,667,500,333,333,556,1000,1000,552,222,222,222,222,333,333,333,556,556,350,1000,1000,188,354,333,333,500,333,167,365,556,556,1094,556,885,323,1083,1000,768,600,834,834,834,834,1000,500,998,500,1000,500,500,494,612,823,713,584,549,713,979,719,274,549,549,584,549,549,604,584,604,604,708,625,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,729,604,604,354,354,1000,990,990,990,990,494,604,604,604,604,354,1021,1052,917,750,750,531,656,594,510,500,750,750,500,500,333,333,333,333,333,333,333,333,222,222,294,294,324,324,316,328,398,285];var LiberationSansItalicMapping=[-1,-1,-1,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,161,162,163,164,165,166,167,168,169,170,171,172,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,402,506,507,508,509,510,511,536,537,538,539,710,711,713,728,729,730,731,732,733,900,901,902,903,904,905,906,908,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1138,1139,1168,1169,7808,7809,7810,7811,7812,7813,7922,7923,8208,8209,8211,8212,8213,8215,8216,8217,8218,8219,8220,8221,8222,8224,8225,8226,8230,8240,8242,8243,8249,8250,8252,8254,8260,8319,8355,8356,8359,8364,8453,8467,8470,8482,8486,8494,8539,8540,8541,8542,8592,8593,8594,8595,8596,8597,8616,8706,8710,8719,8721,8722,8730,8734,8735,8745,8747,8776,8800,8801,8804,8805,8962,8976,8992,8993,9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9600,9604,9608,9612,9616,9617,9618,9619,9632,9633,9642,9643,9644,9650,9658,9660,9668,9674,9675,9679,9688,9689,9702,9786,9787,9788,9792,9794,9824,9827,9829,9830,9834,9835,9836,61441,61442,61445,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];var LiberationSansRegularWidths=[365,0,333,278,278,355,556,556,889,667,191,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,278,278,584,584,584,556,1015,667,667,722,722,667,611,778,722,278,500,667,556,833,722,778,667,778,722,667,611,722,667,944,667,667,611,278,278,278,469,556,333,556,556,500,556,556,278,556,556,222,222,500,222,833,556,556,556,556,333,500,278,556,500,722,500,500,500,334,260,334,584,333,556,556,556,556,260,556,333,737,370,556,584,737,552,400,549,333,333,333,576,537,278,333,333,365,556,834,834,834,611,667,667,667,667,667,667,1000,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,500,556,556,556,556,278,278,278,278,556,556,556,556,556,556,556,549,611,556,556,556,556,500,556,500,667,556,667,556,667,556,722,500,722,500,722,500,722,500,722,615,722,556,667,556,667,556,667,556,667,556,667,556,778,556,778,556,778,556,778,556,722,556,722,556,278,278,278,278,278,278,278,222,278,278,735,444,500,222,667,500,500,556,222,556,222,556,292,556,334,556,222,722,556,722,556,722,556,604,723,556,778,556,778,556,778,556,1000,944,722,333,722,333,722,333,667,500,667,500,667,500,667,500,611,278,611,375,611,278,722,556,722,556,722,556,722,556,722,556,722,556,944,722,667,500,667,611,500,611,500,611,500,222,556,667,556,1000,889,778,611,667,500,611,278,333,333,333,333,333,333,333,333,333,333,333,667,278,784,838,384,774,855,752,222,667,667,551,668,667,611,722,778,278,667,668,833,722,650,778,722,667,618,611,667,798,667,835,748,278,667,578,446,556,222,547,578,575,500,557,446,441,556,556,222,500,500,576,500,448,556,690,569,482,617,395,547,648,525,713,781,222,547,556,547,781,667,667,865,542,719,667,278,278,500,1057,1010,854,583,722,635,719,667,656,667,542,677,667,923,604,719,719,583,656,833,722,778,719,667,722,611,635,760,667,740,667,917,938,792,885,656,719,1010,722,556,573,531,365,583,556,669,458,559,559,438,583,688,552,556,542,556,500,458,500,823,500,573,521,802,823,625,719,521,510,750,542,556,556,556,365,510,500,222,278,222,906,812,556,438,559,500,552,778,556,489,411,944,722,944,722,944,722,667,500,333,333,556,1000,1000,552,222,222,222,222,333,333,333,556,556,350,1000,1000,188,354,333,333,500,333,167,365,556,556,1094,556,885,323,1073,1000,768,600,834,834,834,834,1000,500,1000,500,1000,500,500,494,612,823,713,584,549,713,979,719,274,549,549,583,549,549,604,584,604,604,708,625,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,729,604,604,354,354,1000,990,990,990,990,494,604,604,604,604,354,1021,1052,917,750,750,531,656,594,510,500,750,750,500,500,333,333,333,333,333,333,333,333,222,222,294,294,324,324,316,328,398,285];var LiberationSansRegularMapping=[-1,-1,-1,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,161,162,163,164,165,166,167,168,169,170,171,172,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,402,506,507,508,509,510,511,536,537,538,539,710,711,713,728,729,730,731,732,733,900,901,902,903,904,905,906,908,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1138,1139,1168,1169,7808,7809,7810,7811,7812,7813,7922,7923,8208,8209,8211,8212,8213,8215,8216,8217,8218,8219,8220,8221,8222,8224,8225,8226,8230,8240,8242,8243,8249,8250,8252,8254,8260,8319,8355,8356,8359,8364,8453,8467,8470,8482,8486,8494,8539,8540,8541,8542,8592,8593,8594,8595,8596,8597,8616,8706,8710,8719,8721,8722,8730,8734,8735,8745,8747,8776,8800,8801,8804,8805,8962,8976,8992,8993,9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9600,9604,9608,9612,9616,9617,9618,9619,9632,9633,9642,9643,9644,9650,9658,9660,9668,9674,9675,9679,9688,9689,9702,9786,9787,9788,9792,9794,9824,9827,9829,9830,9834,9835,9836,61441,61442,61445,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];;// ./src/core/myriadpro_factors.js\nvar MyriadProBoldFactors=[1.36898,1,1,0.72706,0.80479,0.83734,0.98894,0.99793,0.9897,0.93884,0.86209,0.94292,0.94292,1.16661,1.02058,0.93582,0.96694,0.93582,1.19137,0.99793,0.99793,0.99793,0.99793,0.99793,0.99793,0.99793,0.99793,0.99793,0.99793,0.78076,0.78076,1.02058,1.02058,1.02058,0.72851,0.78966,0.90838,0.83637,0.82391,0.96376,0.80061,0.86275,0.8768,0.95407,1.0258,0.73901,0.85022,0.83655,1.0156,0.95546,0.92179,0.87107,0.92179,0.82114,0.8096,0.89713,0.94438,0.95353,0.94083,0.91905,0.90406,0.9446,0.94292,1.18777,0.94292,1.02058,0.89903,0.90088,0.94938,0.97898,0.81093,0.97571,0.94938,1.024,0.9577,0.95933,0.98621,1.0474,0.97455,0.98981,0.9672,0.95933,0.9446,0.97898,0.97407,0.97646,0.78036,1.10208,0.95442,0.95298,0.97579,0.9332,0.94039,0.938,0.80687,1.01149,0.80687,1.02058,0.80479,0.99793,0.99793,0.99793,0.99793,1.01149,1.00872,0.90088,0.91882,1.0213,0.8361,1.02058,0.62295,0.54324,0.89022,1.08595,1,1,0.90088,1,0.97455,0.93582,0.90088,1,1.05686,0.8361,0.99642,0.99642,0.99642,0.72851,0.90838,0.90838,0.90838,0.90838,0.90838,0.90838,0.868,0.82391,0.80061,0.80061,0.80061,0.80061,1.0258,1.0258,1.0258,1.0258,0.97484,0.95546,0.92179,0.92179,0.92179,0.92179,0.92179,1.02058,0.92179,0.94438,0.94438,0.94438,0.94438,0.90406,0.86958,0.98225,0.94938,0.94938,0.94938,0.94938,0.94938,0.94938,0.9031,0.81093,0.94938,0.94938,0.94938,0.94938,0.98621,0.98621,0.98621,0.98621,0.93969,0.95933,0.9446,0.9446,0.9446,0.9446,0.9446,1.08595,0.9446,0.95442,0.95442,0.95442,0.95442,0.94039,0.97898,0.94039,0.90838,0.94938,0.90838,0.94938,0.90838,0.94938,0.82391,0.81093,0.82391,0.81093,0.82391,0.81093,0.82391,0.81093,0.96376,0.84313,0.97484,0.97571,0.80061,0.94938,0.80061,0.94938,0.80061,0.94938,0.80061,0.94938,0.80061,0.94938,0.8768,0.9577,0.8768,0.9577,0.8768,0.9577,1,1,0.95407,0.95933,0.97069,0.95933,1.0258,0.98621,1.0258,0.98621,1.0258,0.98621,1.0258,0.98621,1.0258,0.98621,0.887,1.01591,0.73901,1.0474,1,1,0.97455,0.83655,0.98981,1,1,0.83655,0.73977,0.83655,0.73903,0.84638,1.033,0.95546,0.95933,1,1,0.95546,0.95933,0.8271,0.95417,0.95933,0.92179,0.9446,0.92179,0.9446,0.92179,0.9446,0.936,0.91964,0.82114,0.97646,1,1,0.82114,0.97646,0.8096,0.78036,0.8096,0.78036,1,1,0.8096,0.78036,1,1,0.89713,0.77452,0.89713,1.10208,0.94438,0.95442,0.94438,0.95442,0.94438,0.95442,0.94438,0.95442,0.94438,0.95442,0.94438,0.95442,0.94083,0.97579,0.90406,0.94039,0.90406,0.9446,0.938,0.9446,0.938,0.9446,0.938,1,0.99793,0.90838,0.94938,0.868,0.9031,0.92179,0.9446,1,1,0.89713,1.10208,0.90088,0.90088,0.90088,0.90088,0.90088,0.90088,0.90088,0.90088,0.90088,0.90989,0.9358,0.91945,0.83181,0.75261,0.87992,0.82976,0.96034,0.83689,0.97268,1.0078,0.90838,0.83637,0.8019,0.90157,0.80061,0.9446,0.95407,0.92436,1.0258,0.85022,0.97153,1.0156,0.95546,0.89192,0.92179,0.92361,0.87107,0.96318,0.89713,0.93704,0.95638,0.91905,0.91709,0.92796,1.0258,0.93704,0.94836,1.0373,0.95933,1.0078,0.95871,0.94836,0.96174,0.92601,0.9498,0.98607,0.95776,0.95933,1.05453,1.0078,0.98275,0.9314,0.95617,0.91701,1.05993,0.9446,0.78367,0.9553,1,0.86832,1.0128,0.95871,0.99394,0.87548,0.96361,0.86774,1.0078,0.95871,0.9446,0.95871,0.86774,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.94083,0.97579,0.94083,0.97579,0.94083,0.97579,0.90406,0.94039,0.96694,1,0.89903,1,1,1,0.93582,0.93582,0.93582,1,0.908,0.908,0.918,0.94219,0.94219,0.96544,1,1.285,1,1,0.81079,0.81079,1,1,0.74854,1,1,1,1,0.99793,1,1,1,0.65,1,1.36145,1,1,1,1,1,1,1,1,1,1,1,1.17173,1,0.80535,0.76169,1.02058,1.0732,1.05486,1,1,1.30692,1.08595,1.08595,1,1.08595,1.08595,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.16161,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];var MyriadProBoldMetrics={lineHeight:1.2,lineGap:0.2};var MyriadProBoldItalicFactors=[1.36898,1,1,0.66227,0.80779,0.81625,0.97276,0.97276,0.97733,0.92222,0.83266,0.94292,0.94292,1.16148,1.02058,0.93582,0.96694,0.93582,1.17337,0.97276,0.97276,0.97276,0.97276,0.97276,0.97276,0.97276,0.97276,0.97276,0.97276,0.78076,0.78076,1.02058,1.02058,1.02058,0.71541,0.76813,0.85576,0.80591,0.80729,0.94299,0.77512,0.83655,0.86523,0.92222,0.98621,0.71743,0.81698,0.79726,0.98558,0.92222,0.90637,0.83809,0.90637,0.80729,0.76463,0.86275,0.90699,0.91605,0.9154,0.85308,0.85458,0.90531,0.94292,1.21296,0.94292,1.02058,0.89903,1.18616,0.99613,0.91677,0.78216,0.91677,0.90083,0.98796,0.9135,0.92168,0.95381,0.98981,0.95298,0.95381,0.93459,0.92168,0.91513,0.92004,0.91677,0.95077,0.748,1.04502,0.91677,0.92061,0.94236,0.89544,0.89364,0.9,0.80687,0.8578,0.80687,1.02058,0.80779,0.97276,0.97276,0.97276,0.97276,0.8578,0.99973,1.18616,0.91339,1.08074,0.82891,1.02058,0.55509,0.71526,0.89022,1.08595,1,1,1.18616,1,0.96736,0.93582,1.18616,1,1.04864,0.82711,0.99043,0.99043,0.99043,0.71541,0.85576,0.85576,0.85576,0.85576,0.85576,0.85576,0.845,0.80729,0.77512,0.77512,0.77512,0.77512,0.98621,0.98621,0.98621,0.98621,0.95961,0.92222,0.90637,0.90637,0.90637,0.90637,0.90637,1.02058,0.90251,0.90699,0.90699,0.90699,0.90699,0.85458,0.83659,0.94951,0.99613,0.99613,0.99613,0.99613,0.99613,0.99613,0.85811,0.78216,0.90083,0.90083,0.90083,0.90083,0.95381,0.95381,0.95381,0.95381,0.9135,0.92168,0.91513,0.91513,0.91513,0.91513,0.91513,1.08595,0.91677,0.91677,0.91677,0.91677,0.91677,0.89364,0.92332,0.89364,0.85576,0.99613,0.85576,0.99613,0.85576,0.99613,0.80729,0.78216,0.80729,0.78216,0.80729,0.78216,0.80729,0.78216,0.94299,0.76783,0.95961,0.91677,0.77512,0.90083,0.77512,0.90083,0.77512,0.90083,0.77512,0.90083,0.77512,0.90083,0.86523,0.9135,0.86523,0.9135,0.86523,0.9135,1,1,0.92222,0.92168,0.92222,0.92168,0.98621,0.95381,0.98621,0.95381,0.98621,0.95381,0.98621,0.95381,0.98621,0.95381,0.86036,0.97096,0.71743,0.98981,1,1,0.95298,0.79726,0.95381,1,1,0.79726,0.6894,0.79726,0.74321,0.81691,1.0006,0.92222,0.92168,1,1,0.92222,0.92168,0.79464,0.92098,0.92168,0.90637,0.91513,0.90637,0.91513,0.90637,0.91513,0.909,0.87514,0.80729,0.95077,1,1,0.80729,0.95077,0.76463,0.748,0.76463,0.748,1,1,0.76463,0.748,1,1,0.86275,0.72651,0.86275,1.04502,0.90699,0.91677,0.90699,0.91677,0.90699,0.91677,0.90699,0.91677,0.90699,0.91677,0.90699,0.91677,0.9154,0.94236,0.85458,0.89364,0.85458,0.90531,0.9,0.90531,0.9,0.90531,0.9,1,0.97276,0.85576,0.99613,0.845,0.85811,0.90251,0.91677,1,1,0.86275,1.04502,1.18616,1.18616,1.18616,1.18616,1.18616,1.18616,1.18616,1.18616,1.18616,1.00899,1.30628,0.85576,0.80178,0.66862,0.7927,0.69323,0.88127,0.72459,0.89711,0.95381,0.85576,0.80591,0.7805,0.94729,0.77512,0.90531,0.92222,0.90637,0.98621,0.81698,0.92655,0.98558,0.92222,0.85359,0.90637,0.90976,0.83809,0.94523,0.86275,0.83509,0.93157,0.85308,0.83392,0.92346,0.98621,0.83509,0.92886,0.91324,0.92168,0.95381,0.90646,0.92886,0.90557,0.86847,0.90276,0.91324,0.86842,0.92168,0.99531,0.95381,0.9224,0.85408,0.92699,0.86847,1.0051,0.91513,0.80487,0.93481,1,0.88159,1.05214,0.90646,0.97355,0.81539,0.89398,0.85923,0.95381,0.90646,0.91513,0.90646,0.85923,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.9154,0.94236,0.9154,0.94236,0.9154,0.94236,0.85458,0.89364,0.96694,1,0.89903,1,1,1,0.91782,0.91782,0.91782,1,0.896,0.896,0.896,0.9332,0.9332,0.95973,1,1.26,1,1,0.80479,0.80178,1,1,0.85633,1,1,1,1,0.97276,1,1,1,0.698,1,1.36145,1,1,1,1,1,1,1,1,1,1,1,1.14542,1,0.79199,0.78694,1.02058,1.03493,1.05486,1,1,1.23026,1.08595,1.08595,1,1.08595,1.08595,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.20006,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];var MyriadProBoldItalicMetrics={lineHeight:1.2,lineGap:0.2};var MyriadProItalicFactors=[1.36898,1,1,0.65507,0.84943,0.85639,0.88465,0.88465,0.86936,0.88307,0.86948,0.85283,0.85283,1.06383,1.02058,0.75945,0.9219,0.75945,1.17337,0.88465,0.88465,0.88465,0.88465,0.88465,0.88465,0.88465,0.88465,0.88465,0.88465,0.75945,0.75945,1.02058,1.02058,1.02058,0.69046,0.70926,0.85158,0.77812,0.76852,0.89591,0.70466,0.76125,0.80094,0.86822,0.83864,0.728,0.77212,0.79475,0.93637,0.87514,0.8588,0.76013,0.8588,0.72421,0.69866,0.77598,0.85991,0.80811,0.87832,0.78112,0.77512,0.8562,1.0222,1.18417,1.0222,1.27014,0.89903,1.15012,0.93859,0.94399,0.846,0.94399,0.81453,1.0186,0.94219,0.96017,1.03075,1.02175,0.912,1.03075,0.96998,0.96017,0.93859,0.94399,0.94399,0.95493,0.746,1.12658,0.94578,0.91,0.979,0.882,0.882,0.83,0.85034,0.83537,0.85034,1.02058,0.70869,0.88465,0.88465,0.88465,0.88465,0.83537,0.90083,1.15012,0.9161,0.94565,0.73541,1.02058,0.53609,0.69353,0.79519,1.08595,1,1,1.15012,1,0.91974,0.75945,1.15012,1,0.9446,0.73361,0.9005,0.9005,0.9005,0.62864,0.85158,0.85158,0.85158,0.85158,0.85158,0.85158,0.773,0.76852,0.70466,0.70466,0.70466,0.70466,0.83864,0.83864,0.83864,0.83864,0.90561,0.87514,0.8588,0.8588,0.8588,0.8588,0.8588,1.02058,0.85751,0.85991,0.85991,0.85991,0.85991,0.77512,0.76013,0.88075,0.93859,0.93859,0.93859,0.93859,0.93859,0.93859,0.8075,0.846,0.81453,0.81453,0.81453,0.81453,0.82424,0.82424,0.82424,0.82424,0.9278,0.96017,0.93859,0.93859,0.93859,0.93859,0.93859,1.08595,0.8562,0.94578,0.94578,0.94578,0.94578,0.882,0.94578,0.882,0.85158,0.93859,0.85158,0.93859,0.85158,0.93859,0.76852,0.846,0.76852,0.846,0.76852,0.846,0.76852,0.846,0.89591,0.8544,0.90561,0.94399,0.70466,0.81453,0.70466,0.81453,0.70466,0.81453,0.70466,0.81453,0.70466,0.81453,0.80094,0.94219,0.80094,0.94219,0.80094,0.94219,1,1,0.86822,0.96017,0.86822,0.96017,0.83864,0.82424,0.83864,0.82424,0.83864,0.82424,0.83864,1.03075,0.83864,0.82424,0.81402,1.02738,0.728,1.02175,1,1,0.912,0.79475,1.03075,1,1,0.79475,0.83911,0.79475,0.66266,0.80553,1.06676,0.87514,0.96017,1,1,0.87514,0.96017,0.86865,0.87396,0.96017,0.8588,0.93859,0.8588,0.93859,0.8588,0.93859,0.867,0.84759,0.72421,0.95493,1,1,0.72421,0.95493,0.69866,0.746,0.69866,0.746,1,1,0.69866,0.746,1,1,0.77598,0.88417,0.77598,1.12658,0.85991,0.94578,0.85991,0.94578,0.85991,0.94578,0.85991,0.94578,0.85991,0.94578,0.85991,0.94578,0.87832,0.979,0.77512,0.882,0.77512,0.8562,0.83,0.8562,0.83,0.8562,0.83,1,0.88465,0.85158,0.93859,0.773,0.8075,0.85751,0.8562,1,1,0.77598,1.12658,1.15012,1.15012,1.15012,1.15012,1.15012,1.15313,1.15012,1.15012,1.15012,1.08106,1.03901,0.85158,0.77025,0.62264,0.7646,0.65351,0.86026,0.69461,0.89947,1.03075,0.85158,0.77812,0.76449,0.88836,0.70466,0.8562,0.86822,0.8588,0.83864,0.77212,0.85308,0.93637,0.87514,0.82352,0.8588,0.85701,0.76013,0.89058,0.77598,0.8156,0.82565,0.78112,0.77899,0.89386,0.83864,0.8156,0.9486,0.92388,0.96186,1.03075,0.91123,0.9486,0.93298,0.878,0.93942,0.92388,0.84596,0.96186,0.95119,1.03075,0.922,0.88787,0.95829,0.88,0.93559,0.93859,0.78815,0.93758,1,0.89217,1.03737,0.91123,0.93969,0.77487,0.85769,0.86799,1.03075,0.91123,0.93859,0.91123,0.86799,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.87832,0.979,0.87832,0.979,0.87832,0.979,0.77512,0.882,0.9219,1,0.89903,1,1,1,0.87321,0.87321,0.87321,1,1.027,1.027,1.027,0.86847,0.86847,0.79121,1,1.124,1,1,0.73572,0.73572,1,1,0.85034,1,1,1,1,0.88465,1,1,1,0.669,1,1.36145,1,1,1,1,1,1,1,1,1,1,1,1.04828,1,0.74948,0.75187,1.02058,0.98391,1.02119,1,1,1.06233,1.08595,1.08595,1,1.08595,1.08595,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.05233,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];var MyriadProItalicMetrics={lineHeight:1.2,lineGap:0.2};var MyriadProRegularFactors=[1.36898,1,1,0.76305,0.82784,0.94935,0.89364,0.92241,0.89073,0.90706,0.98472,0.85283,0.85283,1.0664,1.02058,0.74505,0.9219,0.74505,1.23456,0.92241,0.92241,0.92241,0.92241,0.92241,0.92241,0.92241,0.92241,0.92241,0.92241,0.74505,0.74505,1.02058,1.02058,1.02058,0.73002,0.72601,0.91755,0.8126,0.80314,0.92222,0.73764,0.79726,0.83051,0.90284,0.86023,0.74,0.8126,0.84869,0.96518,0.91115,0.8858,0.79761,0.8858,0.74498,0.73914,0.81363,0.89591,0.83659,0.89633,0.85608,0.8111,0.90531,1.0222,1.22736,1.0222,1.27014,0.89903,0.90088,0.86667,1.0231,0.896,1.01411,0.90083,1.05099,1.00512,0.99793,1.05326,1.09377,0.938,1.06226,1.00119,0.99793,0.98714,1.0231,1.01231,0.98196,0.792,1.19137,0.99074,0.962,1.01915,0.926,0.942,0.856,0.85034,0.92006,0.85034,1.02058,0.69067,0.92241,0.92241,0.92241,0.92241,0.92006,0.9332,0.90088,0.91882,0.93484,0.75339,1.02058,0.56866,0.54324,0.79519,1.08595,1,1,0.90088,1,0.95325,0.74505,0.90088,1,0.97198,0.75339,0.91009,0.91009,0.91009,0.66466,0.91755,0.91755,0.91755,0.91755,0.91755,0.91755,0.788,0.80314,0.73764,0.73764,0.73764,0.73764,0.86023,0.86023,0.86023,0.86023,0.92915,0.91115,0.8858,0.8858,0.8858,0.8858,0.8858,1.02058,0.8858,0.89591,0.89591,0.89591,0.89591,0.8111,0.79611,0.89713,0.86667,0.86667,0.86667,0.86667,0.86667,0.86667,0.86936,0.896,0.90083,0.90083,0.90083,0.90083,0.84224,0.84224,0.84224,0.84224,0.97276,0.99793,0.98714,0.98714,0.98714,0.98714,0.98714,1.08595,0.89876,0.99074,0.99074,0.99074,0.99074,0.942,1.0231,0.942,0.91755,0.86667,0.91755,0.86667,0.91755,0.86667,0.80314,0.896,0.80314,0.896,0.80314,0.896,0.80314,0.896,0.92222,0.93372,0.92915,1.01411,0.73764,0.90083,0.73764,0.90083,0.73764,0.90083,0.73764,0.90083,0.73764,0.90083,0.83051,1.00512,0.83051,1.00512,0.83051,1.00512,1,1,0.90284,0.99793,0.90976,0.99793,0.86023,0.84224,0.86023,0.84224,0.86023,0.84224,0.86023,1.05326,0.86023,0.84224,0.82873,1.07469,0.74,1.09377,1,1,0.938,0.84869,1.06226,1,1,0.84869,0.83704,0.84869,0.81441,0.85588,1.08927,0.91115,0.99793,1,1,0.91115,0.99793,0.91887,0.90991,0.99793,0.8858,0.98714,0.8858,0.98714,0.8858,0.98714,0.894,0.91434,0.74498,0.98196,1,1,0.74498,0.98196,0.73914,0.792,0.73914,0.792,1,1,0.73914,0.792,1,1,0.81363,0.904,0.81363,1.19137,0.89591,0.99074,0.89591,0.99074,0.89591,0.99074,0.89591,0.99074,0.89591,0.99074,0.89591,0.99074,0.89633,1.01915,0.8111,0.942,0.8111,0.90531,0.856,0.90531,0.856,0.90531,0.856,1,0.92241,0.91755,0.86667,0.788,0.86936,0.8858,0.89876,1,1,0.81363,1.19137,0.90088,0.90088,0.90088,0.90088,0.90088,0.90088,0.90088,0.90088,0.90088,0.90388,1.03901,0.92138,0.78105,0.7154,0.86169,0.80513,0.94007,0.82528,0.98612,1.06226,0.91755,0.8126,0.81884,0.92819,0.73764,0.90531,0.90284,0.8858,0.86023,0.8126,0.91172,0.96518,0.91115,0.83089,0.8858,0.87791,0.79761,0.89297,0.81363,0.88157,0.89992,0.85608,0.81992,0.94307,0.86023,0.88157,0.95308,0.98699,0.99793,1.06226,0.95817,0.95308,0.97358,0.928,0.98088,0.98699,0.92761,0.99793,0.96017,1.06226,0.986,0.944,0.95978,0.938,0.96705,0.98714,0.80442,0.98972,1,0.89762,1.04552,0.95817,0.99007,0.87064,0.91879,0.88888,1.06226,0.95817,0.98714,0.95817,0.88888,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.89633,1.01915,0.89633,1.01915,0.89633,1.01915,0.8111,0.942,0.9219,1,0.89903,1,1,1,0.93173,0.93173,0.93173,1,1.06304,1.06304,1.06904,0.89903,0.89903,0.80549,1,1.156,1,1,0.76575,0.76575,1,1,0.72458,1,1,1,1,0.92241,1,1,1,0.619,1,1.36145,1,1,1,1,1,1,1,1,1,1,1,1.07257,1,0.74705,0.71119,1.02058,1.024,1.02119,1,1,1.1536,1.08595,1.08595,1,1.08595,1.08595,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.05638,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];var MyriadProRegularMetrics={lineHeight:1.2,lineGap:0.2};;// ./src/core/segoeui_factors.js\nvar SegoeuiBoldFactors=[1.76738,1,1,0.99297,0.9824,1.04016,1.06497,1.03424,0.97529,1.17647,1.23203,1.1085,1.1085,1.16939,1.2107,0.9754,1.21408,0.9754,1.59578,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,0.81378,0.81378,1.2107,1.2107,1.2107,0.71703,0.97847,0.97363,0.88776,0.8641,1.02096,0.79795,0.85132,0.914,1.06085,1.1406,0.8007,0.89858,0.83693,1.14889,1.09398,0.97489,0.92094,0.97489,0.90399,0.84041,0.95923,1.00135,1,1.06467,0.98243,0.90996,0.99361,1.1085,1.56942,1.1085,1.2107,0.74627,0.94282,0.96752,1.01519,0.86304,1.01359,0.97278,1.15103,1.01359,0.98561,1.02285,1.02285,1.00527,1.02285,1.0302,0.99041,1.0008,1.01519,1.01359,1.02258,0.79104,1.16862,0.99041,0.97454,1.02511,0.99298,0.96752,0.95801,0.94856,1.16579,0.94856,1.2107,0.9824,1.03424,1.03424,1,1.03424,1.16579,0.8727,1.3871,1.18622,1.10818,1.04478,1.2107,1.18622,0.75155,0.94994,1.28826,1.21408,1.21408,0.91056,1,0.91572,0.9754,0.64663,1.18328,1.24866,1.04478,1.14169,1.15749,1.17389,0.71703,0.97363,0.97363,0.97363,0.97363,0.97363,0.97363,0.93506,0.8641,0.79795,0.79795,0.79795,0.79795,1.1406,1.1406,1.1406,1.1406,1.02096,1.09398,0.97426,0.97426,0.97426,0.97426,0.97426,1.2107,0.97489,1.00135,1.00135,1.00135,1.00135,0.90996,0.92094,1.02798,0.96752,0.96752,0.96752,0.96752,0.96752,0.96752,0.93136,0.86304,0.97278,0.97278,0.97278,0.97278,1.02285,1.02285,1.02285,1.02285,0.97122,0.99041,1,1,1,1,1,1.28826,1.0008,0.99041,0.99041,0.99041,0.99041,0.96752,1.01519,0.96752,0.97363,0.96752,0.97363,0.96752,0.97363,0.96752,0.8641,0.86304,0.8641,0.86304,0.8641,0.86304,0.8641,0.86304,1.02096,1.03057,1.02096,1.03517,0.79795,0.97278,0.79795,0.97278,0.79795,0.97278,0.79795,0.97278,0.79795,0.97278,0.914,1.01359,0.914,1.01359,0.914,1.01359,1,1,1.06085,0.98561,1.06085,1.00879,1.1406,1.02285,1.1406,1.02285,1.1406,1.02285,1.1406,1.02285,1.1406,1.02285,0.97138,1.08692,0.8007,1.02285,1,1,1.00527,0.83693,1.02285,1,1,0.83693,0.9455,0.83693,0.90418,0.83693,1.13005,1.09398,0.99041,1,1,1.09398,0.99041,0.96692,1.09251,0.99041,0.97489,1.0008,0.97489,1.0008,0.97489,1.0008,0.93994,0.97931,0.90399,1.02258,1,1,0.90399,1.02258,0.84041,0.79104,0.84041,0.79104,0.84041,0.79104,0.84041,0.79104,1,1,0.95923,1.07034,0.95923,1.16862,1.00135,0.99041,1.00135,0.99041,1.00135,0.99041,1.00135,0.99041,1.00135,0.99041,1.00135,0.99041,1.06467,1.02511,0.90996,0.96752,0.90996,0.99361,0.95801,0.99361,0.95801,0.99361,0.95801,1.07733,1.03424,0.97363,0.96752,0.93506,0.93136,0.97489,1.0008,1,1,0.95923,1.16862,1.15103,1.15103,1.01173,1.03959,0.75953,0.81378,0.79912,1.15103,1.21994,0.95161,0.87815,1.01149,0.81525,0.7676,0.98167,1.01134,1.02546,0.84097,1.03089,1.18102,0.97363,0.88776,0.85134,0.97826,0.79795,0.99361,1.06085,0.97489,1.1406,0.89858,1.0388,1.14889,1.09398,0.86039,0.97489,1.0595,0.92094,0.94793,0.95923,0.90996,0.99346,0.98243,1.02112,0.95493,1.1406,0.90996,1.03574,1.02597,1.0008,1.18102,1.06628,1.03574,1.0192,1.01932,1.00886,0.97531,1.0106,1.0008,1.13189,1.18102,1.02277,0.98683,1.0016,0.99561,1.07237,1.0008,0.90434,0.99921,0.93803,0.8965,1.23085,1.06628,1.04983,0.96268,1.0499,0.98439,1.18102,1.06628,1.0008,1.06628,0.98439,0.79795,1,1,1,1,1,1,1,1,1,1,1,1,1.09466,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.97278,1,1,1,1,1,1,1,1,1,1,1,1,1.02065,1,1,1,1,1,1,1.06467,1.02511,1.06467,1.02511,1.06467,1.02511,0.90996,0.96752,1,1.21408,0.89903,1,1,0.75155,1.04394,1.04394,1.04394,1.04394,0.98633,0.98633,0.98633,0.73047,0.73047,1.20642,0.91211,1.25635,1.222,1.02956,1.03372,1.03372,0.96039,1.24633,1,1.12454,0.93503,1.03424,1.19687,1.03424,1,1,1,0.771,1,1,1.15749,1.15749,1.15749,1.10948,0.86279,0.94434,0.86279,0.94434,0.86182,1,1,1.16897,1,0.96085,0.90137,1.2107,1.18416,1.13973,0.69825,0.9716,2.10339,1.29004,1.29004,1.21172,1.29004,1.29004,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.42603,1,0.99862,0.99862,1,0.87025,0.87025,0.87025,0.87025,1.18874,1.42603,1,1.42603,1.42603,0.99862,1,1,1,1,1,1.2886,1.04315,1.15296,1.34163,1,1,1,1.09193,1.09193,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];var SegoeuiBoldMetrics={lineHeight:1.33008,lineGap:0};var SegoeuiBoldItalicFactors=[1.76738,1,1,0.98946,1.03959,1.04016,1.02809,1.036,0.97639,1.10953,1.23203,1.11144,1.11144,1.16939,1.21237,0.9754,1.21261,0.9754,1.59754,1.036,1.036,1.036,1.036,1.036,1.036,1.036,1.036,1.036,1.036,0.81378,0.81378,1.21237,1.21237,1.21237,0.73541,0.97847,0.97363,0.89723,0.87897,1.0426,0.79429,0.85292,0.91149,1.05815,1.1406,0.79631,0.90128,0.83853,1.04396,1.10615,0.97552,0.94436,0.97552,0.88641,0.80527,0.96083,1.00135,1,1.06777,0.9817,0.91142,0.99361,1.11144,1.57293,1.11144,1.21237,0.74627,1.31818,1.06585,0.97042,0.83055,0.97042,0.93503,1.1261,0.97042,0.97922,1.14236,0.94552,1.01054,1.14236,1.02471,0.97922,0.94165,0.97042,0.97042,1.0276,0.78929,1.1261,0.97922,0.95874,1.02197,0.98507,0.96752,0.97168,0.95107,1.16579,0.95107,1.21237,1.03959,1.036,1.036,1,1.036,1.16579,0.87357,1.31818,1.18754,1.26781,1.05356,1.21237,1.18622,0.79487,0.94994,1.29004,1.24047,1.24047,1.31818,1,0.91484,0.9754,1.31818,1.1349,1.24866,1.05356,1.13934,1.15574,1.17389,0.73541,0.97363,0.97363,0.97363,0.97363,0.97363,0.97363,0.94385,0.87897,0.79429,0.79429,0.79429,0.79429,1.1406,1.1406,1.1406,1.1406,1.0426,1.10615,0.97552,0.97552,0.97552,0.97552,0.97552,1.21237,0.97552,1.00135,1.00135,1.00135,1.00135,0.91142,0.94436,0.98721,1.06585,1.06585,1.06585,1.06585,1.06585,1.06585,0.96705,0.83055,0.93503,0.93503,0.93503,0.93503,1.14236,1.14236,1.14236,1.14236,0.93125,0.97922,0.94165,0.94165,0.94165,0.94165,0.94165,1.29004,0.94165,0.97922,0.97922,0.97922,0.97922,0.96752,0.97042,0.96752,0.97363,1.06585,0.97363,1.06585,0.97363,1.06585,0.87897,0.83055,0.87897,0.83055,0.87897,0.83055,0.87897,0.83055,1.0426,1.0033,1.0426,0.97042,0.79429,0.93503,0.79429,0.93503,0.79429,0.93503,0.79429,0.93503,0.79429,0.93503,0.91149,0.97042,0.91149,0.97042,0.91149,0.97042,1,1,1.05815,0.97922,1.05815,0.97922,1.1406,1.14236,1.1406,1.14236,1.1406,1.14236,1.1406,1.14236,1.1406,1.14236,0.97441,1.04302,0.79631,1.01582,1,1,1.01054,0.83853,1.14236,1,1,0.83853,1.09125,0.83853,0.90418,0.83853,1.19508,1.10615,0.97922,1,1,1.10615,0.97922,1.01034,1.10466,0.97922,0.97552,0.94165,0.97552,0.94165,0.97552,0.94165,0.91602,0.91981,0.88641,1.0276,1,1,0.88641,1.0276,0.80527,0.78929,0.80527,0.78929,0.80527,0.78929,0.80527,0.78929,1,1,0.96083,1.05403,0.95923,1.16862,1.00135,0.97922,1.00135,0.97922,1.00135,0.97922,1.00135,0.97922,1.00135,0.97922,1.00135,0.97922,1.06777,1.02197,0.91142,0.96752,0.91142,0.99361,0.97168,0.99361,0.97168,0.99361,0.97168,1.23199,1.036,0.97363,1.06585,0.94385,0.96705,0.97552,0.94165,1,1,0.96083,1.1261,1.31818,1.31818,1.31818,1.31818,1.31818,1.31818,1.31818,1.31818,1.31818,0.95161,1.27126,1.00811,0.83284,0.77702,0.99137,0.95253,1.0347,0.86142,1.07205,1.14236,0.97363,0.89723,0.86869,1.09818,0.79429,0.99361,1.05815,0.97552,1.1406,0.90128,1.06662,1.04396,1.10615,0.84918,0.97552,1.04694,0.94436,0.98015,0.96083,0.91142,1.00356,0.9817,1.01945,0.98999,1.1406,0.91142,1.04961,0.9898,1.00639,1.14236,1.07514,1.04961,0.99607,1.02897,1.008,0.9898,0.95134,1.00639,1.11121,1.14236,1.00518,0.97981,1.02186,1,1.08578,0.94165,0.99314,0.98387,0.93028,0.93377,1.35125,1.07514,1.10687,0.93491,1.04232,1.00351,1.14236,1.07514,0.94165,1.07514,1.00351,0.79429,1,1,1,1,1,1,1,1,1,1,1,1,1.09097,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.93503,1,1,1,1,1,1,1,1,1,1,1,1,0.96609,1,1,1,1,1,1,1.06777,1.02197,1.06777,1.02197,1.06777,1.02197,0.91142,0.96752,1,1.21261,0.89903,1,1,0.75155,1.04745,1.04745,1.04745,1.04394,0.98633,0.98633,0.98633,0.72959,0.72959,1.20502,0.91406,1.26514,1.222,1.02956,1.03372,1.03372,0.96039,1.24633,1,1.09125,0.93327,1.03336,1.16541,1.036,1,1,1,0.771,1,1,1.15574,1.15574,1.15574,1.15574,0.86364,0.94434,0.86279,0.94434,0.86224,1,1,1.16798,1,0.96085,0.90068,1.21237,1.18416,1.13904,0.69825,0.9716,2.10339,1.29004,1.29004,1.21339,1.29004,1.29004,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.42603,1,0.99862,0.99862,1,0.87025,0.87025,0.87025,0.87025,1.18775,1.42603,1,1.42603,1.42603,0.99862,1,1,1,1,1,1.2886,1.04315,1.15296,1.34163,1,1,1,1.13269,1.13269,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];var SegoeuiBoldItalicMetrics={lineHeight:1.33008,lineGap:0};var SegoeuiItalicFactors=[1.76738,1,1,0.98946,1.14763,1.05365,1.06234,0.96927,0.92586,1.15373,1.18414,0.91349,0.91349,1.07403,1.17308,0.78383,1.20088,0.78383,1.42531,0.96927,0.96927,0.96927,0.96927,0.96927,0.96927,0.96927,0.96927,0.96927,0.96927,0.78383,0.78383,1.17308,1.17308,1.17308,0.77349,0.94565,0.94729,0.85944,0.88506,0.9858,0.74817,0.80016,0.88449,0.98039,0.95782,0.69238,0.89898,0.83231,0.98183,1.03989,0.96924,0.86237,0.96924,0.80595,0.74524,0.86091,0.95402,0.94143,0.98448,0.8858,0.83089,0.93285,1.0949,1.39016,1.0949,1.45994,0.74627,1.04839,0.97454,0.97454,0.87207,0.97454,0.87533,1.06151,0.97454,1.00176,1.16484,1.08132,0.98047,1.16484,1.02989,1.01054,0.96225,0.97454,0.97454,1.06598,0.79004,1.16344,1.00351,0.94629,0.9973,0.91016,0.96777,0.9043,0.91082,0.92481,0.91082,1.17308,0.95748,0.96927,0.96927,1,0.96927,0.92481,0.80597,1.04839,1.23393,1.1781,0.9245,1.17308,1.20808,0.63218,0.94261,1.24822,1.09971,1.09971,1.04839,1,0.85273,0.78032,1.04839,1.09971,1.22326,0.9245,1.09836,1.13525,1.15222,0.70424,0.94729,0.94729,0.94729,0.94729,0.94729,0.94729,0.85498,0.88506,0.74817,0.74817,0.74817,0.74817,0.95782,0.95782,0.95782,0.95782,0.9858,1.03989,0.96924,0.96924,0.96924,0.96924,0.96924,1.17308,0.96924,0.95402,0.95402,0.95402,0.95402,0.83089,0.86237,0.88409,0.97454,0.97454,0.97454,0.97454,0.97454,0.97454,0.92916,0.87207,0.87533,0.87533,0.87533,0.87533,0.93146,0.93146,0.93146,0.93146,0.93854,1.01054,0.96225,0.96225,0.96225,0.96225,0.96225,1.24822,0.8761,1.00351,1.00351,1.00351,1.00351,0.96777,0.97454,0.96777,0.94729,0.97454,0.94729,0.97454,0.94729,0.97454,0.88506,0.87207,0.88506,0.87207,0.88506,0.87207,0.88506,0.87207,0.9858,0.95391,0.9858,0.97454,0.74817,0.87533,0.74817,0.87533,0.74817,0.87533,0.74817,0.87533,0.74817,0.87533,0.88449,0.97454,0.88449,0.97454,0.88449,0.97454,1,1,0.98039,1.00176,0.98039,1.00176,0.95782,0.93146,0.95782,0.93146,0.95782,0.93146,0.95782,1.16484,0.95782,0.93146,0.84421,1.12761,0.69238,1.08132,1,1,0.98047,0.83231,1.16484,1,1,0.84723,1.04861,0.84723,0.78755,0.83231,1.23736,1.03989,1.01054,1,1,1.03989,1.01054,0.9857,1.03849,1.01054,0.96924,0.96225,0.96924,0.96225,0.96924,0.96225,0.92383,0.90171,0.80595,1.06598,1,1,0.80595,1.06598,0.74524,0.79004,0.74524,0.79004,0.74524,0.79004,0.74524,0.79004,1,1,0.86091,1.02759,0.85771,1.16344,0.95402,1.00351,0.95402,1.00351,0.95402,1.00351,0.95402,1.00351,0.95402,1.00351,0.95402,1.00351,0.98448,0.9973,0.83089,0.96777,0.83089,0.93285,0.9043,0.93285,0.9043,0.93285,0.9043,1.31868,0.96927,0.94729,0.97454,0.85498,0.92916,0.96924,0.8761,1,1,0.86091,1.16344,1.04839,1.04839,1.04839,1.04839,1.04839,1.04839,1.04839,1.04839,1.04839,0.81965,0.81965,0.94729,0.78032,0.71022,0.90883,0.84171,0.99877,0.77596,1.05734,1.2,0.94729,0.85944,0.82791,0.9607,0.74817,0.93285,0.98039,0.96924,0.95782,0.89898,0.98316,0.98183,1.03989,0.78614,0.96924,0.97642,0.86237,0.86075,0.86091,0.83089,0.90082,0.8858,0.97296,1.01284,0.95782,0.83089,1.0976,1.04,1.03342,1.2,1.0675,1.0976,0.98205,1.03809,1.05097,1.04,0.95364,1.03342,1.05401,1.2,1.02148,1.0119,1.04724,1.0127,1.02732,0.96225,0.8965,0.97783,0.93574,0.94818,1.30679,1.0675,1.11826,0.99821,1.0557,1.0326,1.2,1.0675,0.96225,1.0675,1.0326,0.74817,1,1,1,1,1,1,1,1,1,1,1,1,1.03754,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.87533,1,1,1,1,1,1,1,1,1,1,1,1,0.98705,1,1,1,1,1,1,0.98448,0.9973,0.98448,0.9973,0.98448,0.9973,0.83089,0.96777,1,1.20088,0.89903,1,1,0.75155,0.94945,0.94945,0.94945,0.94945,1.12317,1.12317,1.12317,0.67603,0.67603,1.15621,0.73584,1.21191,1.22135,1.06483,0.94868,0.94868,0.95996,1.24633,1,1.07497,0.87709,0.96927,1.01473,0.96927,1,1,1,0.77295,1,1,1.09836,1.09836,1.09836,1.01522,0.86321,0.94434,0.8649,0.94434,0.86182,1,1,1.083,1,0.91578,0.86438,1.17308,1.18416,1.14589,0.69825,0.97622,1.96791,1.24822,1.24822,1.17308,1.24822,1.24822,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.42603,1,0.99862,0.99862,1,0.87025,0.87025,0.87025,0.87025,1.17984,1.42603,1,1.42603,1.42603,0.99862,1,1,1,1,1,1.2886,1.04315,1.15296,1.34163,1,1,1,1.10742,1.10742,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];var SegoeuiItalicMetrics={lineHeight:1.33008,lineGap:0};var SegoeuiRegularFactors=[1.76738,1,1,0.98594,1.02285,1.10454,1.06234,0.96927,0.92037,1.19985,1.2046,0.90616,0.90616,1.07152,1.1714,0.78032,1.20088,0.78032,1.40246,0.96927,0.96927,0.96927,0.96927,0.96927,0.96927,0.96927,0.96927,0.96927,0.96927,0.78032,0.78032,1.1714,1.1714,1.1714,0.80597,0.94084,0.96706,0.85944,0.85734,0.97093,0.75842,0.79936,0.88198,0.9831,0.95782,0.71387,0.86969,0.84636,1.07796,1.03584,0.96924,0.83968,0.96924,0.82826,0.79649,0.85771,0.95132,0.93119,0.98965,0.88433,0.8287,0.93365,1.08612,1.3638,1.08612,1.45786,0.74627,0.80499,0.91484,1.05707,0.92383,1.05882,0.9403,1.12654,1.05882,1.01756,1.09011,1.09011,0.99414,1.09011,1.034,1.01756,1.05356,1.05707,1.05882,1.04399,0.84863,1.21968,1.01756,0.95801,1.00068,0.91797,0.96777,0.9043,0.90351,0.92105,0.90351,1.1714,0.85337,0.96927,0.96927,0.99912,0.96927,0.92105,0.80597,1.2434,1.20808,1.05937,0.90957,1.1714,1.20808,0.75155,0.94261,1.24644,1.09971,1.09971,0.84751,1,0.85273,0.78032,0.61584,1.05425,1.17914,0.90957,1.08665,1.11593,1.14169,0.73381,0.96706,0.96706,0.96706,0.96706,0.96706,0.96706,0.86035,0.85734,0.75842,0.75842,0.75842,0.75842,0.95782,0.95782,0.95782,0.95782,0.97093,1.03584,0.96924,0.96924,0.96924,0.96924,0.96924,1.1714,0.96924,0.95132,0.95132,0.95132,0.95132,0.8287,0.83968,0.89049,0.91484,0.91484,0.91484,0.91484,0.91484,0.91484,0.93575,0.92383,0.9403,0.9403,0.9403,0.9403,0.8717,0.8717,0.8717,0.8717,1.00527,1.01756,1.05356,1.05356,1.05356,1.05356,1.05356,1.24644,0.95923,1.01756,1.01756,1.01756,1.01756,0.96777,1.05707,0.96777,0.96706,0.91484,0.96706,0.91484,0.96706,0.91484,0.85734,0.92383,0.85734,0.92383,0.85734,0.92383,0.85734,0.92383,0.97093,1.0969,0.97093,1.05882,0.75842,0.9403,0.75842,0.9403,0.75842,0.9403,0.75842,0.9403,0.75842,0.9403,0.88198,1.05882,0.88198,1.05882,0.88198,1.05882,1,1,0.9831,1.01756,0.9831,1.01756,0.95782,0.8717,0.95782,0.8717,0.95782,0.8717,0.95782,1.09011,0.95782,0.8717,0.84784,1.11551,0.71387,1.09011,1,1,0.99414,0.84636,1.09011,1,1,0.84636,1.0536,0.84636,0.94298,0.84636,1.23297,1.03584,1.01756,1,1,1.03584,1.01756,1.00323,1.03444,1.01756,0.96924,1.05356,0.96924,1.05356,0.96924,1.05356,0.93066,0.98293,0.82826,1.04399,1,1,0.82826,1.04399,0.79649,0.84863,0.79649,0.84863,0.79649,0.84863,0.79649,0.84863,1,1,0.85771,1.17318,0.85771,1.21968,0.95132,1.01756,0.95132,1.01756,0.95132,1.01756,0.95132,1.01756,0.95132,1.01756,0.95132,1.01756,0.98965,1.00068,0.8287,0.96777,0.8287,0.93365,0.9043,0.93365,0.9043,0.93365,0.9043,1.08571,0.96927,0.96706,0.91484,0.86035,0.93575,0.96924,0.95923,1,1,0.85771,1.21968,1.11437,1.11437,0.93109,0.91202,0.60411,0.84164,0.55572,1.01173,0.97361,0.81818,0.81818,0.96635,0.78032,0.72727,0.92366,0.98601,1.03405,0.77968,1.09799,1.2,0.96706,0.85944,0.85638,0.96491,0.75842,0.93365,0.9831,0.96924,0.95782,0.86969,0.94152,1.07796,1.03584,0.78437,0.96924,0.98715,0.83968,0.83491,0.85771,0.8287,0.94492,0.88433,0.9287,1.0098,0.95782,0.8287,1.0625,0.98248,1.03424,1.2,1.01071,1.0625,0.95246,1.03809,1.04912,0.98248,1.00221,1.03424,1.05443,1.2,1.04785,0.99609,1.00169,1.05176,0.99346,1.05356,0.9087,1.03004,0.95542,0.93117,1.23362,1.01071,1.07831,1.02512,1.05205,1.03502,1.2,1.01071,1.05356,1.01071,1.03502,0.75842,1,1,1,1,1,1,1,1,1,1,1,1,1.03719,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.9403,1,1,1,1,1,1,1,1,1,1,1,1,1.04021,1,1,1,1,1,1,0.98965,1.00068,0.98965,1.00068,0.98965,1.00068,0.8287,0.96777,1,1.20088,0.89903,1,1,0.75155,1.03077,1.03077,1.03077,1.03077,1.13196,1.13196,1.13196,0.67428,0.67428,1.16039,0.73291,1.20996,1.22135,1.06483,0.94868,0.94868,0.95996,1.24633,1,1.07497,0.87796,0.96927,1.01518,0.96927,1,1,1,0.77295,1,1,1.10539,1.10539,1.11358,1.06967,0.86279,0.94434,0.86279,0.94434,0.86182,1,1,1.083,1,0.91578,0.86507,1.1714,1.18416,1.14589,0.69825,0.97622,1.9697,1.24822,1.24822,1.17238,1.24822,1.24822,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.42603,1,0.99862,0.99862,1,0.87025,0.87025,0.87025,0.87025,1.18083,1.42603,1,1.42603,1.42603,0.99862,1,1,1,1,1,1.2886,1.04315,1.15296,1.34163,1,1,1,1.10938,1.10938,1,1,1,1.05425,1.09971,1.09971,1.09971,1,1,1,1,1,1,1,1,1,1,1];var SegoeuiRegularMetrics={lineHeight:1.33008,lineGap:0};;// ./src/core/xfa_fonts.js\nvar getXFAFontMap=getLookupTableFactory(function(t){t["MyriadPro-Regular"]=t["PdfJS-Fallback-Regular"]={name:"LiberationSans-Regular",factors:MyriadProRegularFactors,baseWidths:LiberationSansRegularWidths,baseMapping:LiberationSansRegularMapping,metrics:MyriadProRegularMetrics};t["MyriadPro-Bold"]=t["PdfJS-Fallback-Bold"]={name:"LiberationSans-Bold",factors:MyriadProBoldFactors,baseWidths:LiberationSansBoldWidths,baseMapping:LiberationSansBoldMapping,metrics:MyriadProBoldMetrics};t["MyriadPro-It"]=t["MyriadPro-Italic"]=t["PdfJS-Fallback-Italic"]={name:"LiberationSans-Italic",factors:MyriadProItalicFactors,baseWidths:LiberationSansItalicWidths,baseMapping:LiberationSansItalicMapping,metrics:MyriadProItalicMetrics};t["MyriadPro-BoldIt"]=t["MyriadPro-BoldItalic"]=t["PdfJS-Fallback-BoldItalic"]={name:"LiberationSans-BoldItalic",factors:MyriadProBoldItalicFactors,baseWidths:LiberationSansBoldItalicWidths,baseMapping:LiberationSansBoldItalicMapping,metrics:MyriadProBoldItalicMetrics};t.ArialMT=t.Arial=t["Arial-Regular"]={name:"LiberationSans-Regular",baseWidths:LiberationSansRegularWidths,baseMapping:LiberationSansRegularMapping};t["Arial-BoldMT"]=t["Arial-Bold"]={name:"LiberationSans-Bold",baseWidths:LiberationSansBoldWidths,baseMapping:LiberationSansBoldMapping};t["Arial-ItalicMT"]=t["Arial-Italic"]={name:"LiberationSans-Italic",baseWidths:LiberationSansItalicWidths,baseMapping:LiberationSansItalicMapping};t["Arial-BoldItalicMT"]=t["Arial-BoldItalic"]={name:"LiberationSans-BoldItalic",baseWidths:LiberationSansBoldItalicWidths,baseMapping:LiberationSansBoldItalicMapping};t["Calibri-Regular"]={name:"LiberationSans-Regular",factors:CalibriRegularFactors,baseWidths:LiberationSansRegularWidths,baseMapping:LiberationSansRegularMapping,metrics:CalibriRegularMetrics};t["Calibri-Bold"]={name:"LiberationSans-Bold",factors:CalibriBoldFactors,baseWidths:LiberationSansBoldWidths,baseMapping:LiberationSansBoldMapping,metrics:CalibriBoldMetrics};t["Calibri-Italic"]={name:"LiberationSans-Italic",factors:CalibriItalicFactors,baseWidths:LiberationSansItalicWidths,baseMapping:LiberationSansItalicMapping,metrics:CalibriItalicMetrics};t["Calibri-BoldItalic"]={name:"LiberationSans-BoldItalic",factors:CalibriBoldItalicFactors,baseWidths:LiberationSansBoldItalicWidths,baseMapping:LiberationSansBoldItalicMapping,metrics:CalibriBoldItalicMetrics};t["Segoeui-Regular"]={name:"LiberationSans-Regular",factors:SegoeuiRegularFactors,baseWidths:LiberationSansRegularWidths,baseMapping:LiberationSansRegularMapping,metrics:SegoeuiRegularMetrics};t["Segoeui-Bold"]={name:"LiberationSans-Bold",factors:SegoeuiBoldFactors,baseWidths:LiberationSansBoldWidths,baseMapping:LiberationSansBoldMapping,metrics:SegoeuiBoldMetrics};t["Segoeui-Italic"]={name:"LiberationSans-Italic",factors:SegoeuiItalicFactors,baseWidths:LiberationSansItalicWidths,baseMapping:LiberationSansItalicMapping,metrics:SegoeuiItalicMetrics};t["Segoeui-BoldItalic"]={name:"LiberationSans-BoldItalic",factors:SegoeuiBoldItalicFactors,baseWidths:LiberationSansBoldItalicWidths,baseMapping:LiberationSansBoldItalicMapping,metrics:SegoeuiBoldItalicMetrics};t["Helvetica-Regular"]=t.Helvetica={name:"LiberationSans-Regular",factors:HelveticaRegularFactors,baseWidths:LiberationSansRegularWidths,baseMapping:LiberationSansRegularMapping,metrics:HelveticaRegularMetrics};t["Helvetica-Bold"]={name:"LiberationSans-Bold",factors:HelveticaBoldFactors,baseWidths:LiberationSansBoldWidths,baseMapping:LiberationSansBoldMapping,metrics:HelveticaBoldMetrics};t["Helvetica-Italic"]={name:"LiberationSans-Italic",factors:HelveticaItalicFactors,baseWidths:LiberationSansItalicWidths,baseMapping:LiberationSansItalicMapping,metrics:HelveticaItalicMetrics};t["Helvetica-BoldItalic"]={name:"LiberationSans-BoldItalic",factors:HelveticaBoldItalicFactors,baseWidths:LiberationSansBoldItalicWidths,baseMapping:LiberationSansBoldItalicMapping,metrics:HelveticaBoldItalicMetrics};});function getXfaFontName(name){var fontName=normalizeFontName(name);var fontMap=getXFAFontMap();return fontMap[fontName];}function getXfaFontWidths(name){var info=getXfaFontName(name);if(!info){return null;}var baseWidths=info.baseWidths,baseMapping=info.baseMapping,factors=info.factors;var rescaledBaseWidths=!factors?baseWidths:baseWidths.map(function(w,i){return w*factors[i];});var currentCode=-2;var currentArray;var newWidths=[];var _iterator57=_createForOfIteratorHelper(baseMapping.map(function(charUnicode,index){return[charUnicode,index];}).sort(function(_ref40,_ref41){var _ref42=_slicedToArray(_ref40,1),unicode1=_ref42[0];var _ref43=_slicedToArray(_ref41,1),unicode2=_ref43[0];return unicode1-unicode2;})),_step57;try{for(_iterator57.s();!(_step57=_iterator57.n()).done;){var _step57$value=_slicedToArray(_step57.value,2),unicode=_step57$value[0],glyphIndex=_step57$value[1];if(unicode===-1){continue;}if(unicode===currentCode+1){currentArray.push(rescaledBaseWidths[glyphIndex]);currentCode+=1;}else{currentCode=unicode;currentArray=[rescaledBaseWidths[glyphIndex]];newWidths.push(unicode,currentArray);}}}catch(err){_iterator57.e(err);}finally{_iterator57.f();}return newWidths;}function getXfaFontDict(name){var widths=getXfaFontWidths(name);var dict=new Dict(null);dict.set("BaseFont",Name.get(name));dict.set("Type",Name.get("Font"));dict.set("Subtype",Name.get("CIDFontType2"));dict.set("Encoding",Name.get("Identity-H"));dict.set("CIDToGIDMap",Name.get("Identity"));dict.set("W",widths);dict.set("FirstChar",widths[0]);dict.set("LastChar",widths.at(-2)+widths.at(-1).length-1);var descriptor=new Dict(null);dict.set("FontDescriptor",descriptor);var systemInfo=new Dict(null);systemInfo.set("Ordering","Identity");systemInfo.set("Registry","Adobe");systemInfo.set("Supplement",0);dict.set("CIDSystemInfo",systemInfo);return dict;};// ./src/core/ps_parser.js\nvar PostScriptParser=/*#__PURE__*/function(){function PostScriptParser(lexer){_classCallCheck(this,PostScriptParser);this.lexer=lexer;this.operators=[];this.token=null;this.prev=null;}return _createClass(PostScriptParser,[{key:"nextToken",value:function nextToken(){this.prev=this.token;this.token=this.lexer.getToken();}},{key:"accept",value:function accept(type){if(this.token.type===type){this.nextToken();return true;}return false;}},{key:"expect",value:function expect(type){if(this.accept(type)){return true;}throw new FormatError("Unexpected symbol: found ".concat(this.token.type," expected ").concat(type,"."));}},{key:"parse",value:function parse(){this.nextToken();this.expect(PostScriptTokenTypes.LBRACE);this.parseBlock();this.expect(PostScriptTokenTypes.RBRACE);return this.operators;}},{key:"parseBlock",value:function parseBlock(){while(true){if(this.accept(PostScriptTokenTypes.NUMBER)){this.operators.push(this.prev.value);}else if(this.accept(PostScriptTokenTypes.OPERATOR)){this.operators.push(this.prev.value);}else if(this.accept(PostScriptTokenTypes.LBRACE)){this.parseCondition();}else{return;}}}},{key:"parseCondition",value:function parseCondition(){var conditionLocation=this.operators.length;this.operators.push(null,null);this.parseBlock();this.expect(PostScriptTokenTypes.RBRACE);if(this.accept(PostScriptTokenTypes.IF)){this.operators[conditionLocation]=this.operators.length;this.operators[conditionLocation+1]="jz";}else if(this.accept(PostScriptTokenTypes.LBRACE)){var jumpLocation=this.operators.length;this.operators.push(null,null);var endOfTrue=this.operators.length;this.parseBlock();this.expect(PostScriptTokenTypes.RBRACE);this.expect(PostScriptTokenTypes.IFELSE);this.operators[jumpLocation]=this.operators.length;this.operators[jumpLocation+1]="j";this.operators[conditionLocation]=endOfTrue;this.operators[conditionLocation+1]="jz";}else{throw new FormatError("PS Function: error parsing conditional.");}}}]);}();var PostScriptTokenTypes={LBRACE:0,RBRACE:1,NUMBER:2,OPERATOR:3,IF:4,IFELSE:5};var PostScriptToken=/*#__PURE__*/function(){function PostScriptToken(type,value){_classCallCheck(this,PostScriptToken);this.type=type;this.value=value;}return _createClass(PostScriptToken,null,[{key:"opCache",get:function get(){return shadow(this,"opCache",Object.create(null));}},{key:"getOperator",value:function getOperator(op){var _PostScriptToken$opCa;return(_PostScriptToken$opCa=PostScriptToken.opCache)[op]||(_PostScriptToken$opCa[op]=new PostScriptToken(PostScriptTokenTypes.OPERATOR,op));}},{key:"LBRACE",get:function get(){return shadow(this,"LBRACE",new PostScriptToken(PostScriptTokenTypes.LBRACE,"{"));}},{key:"RBRACE",get:function get(){return shadow(this,"RBRACE",new PostScriptToken(PostScriptTokenTypes.RBRACE,"}"));}},{key:"IF",get:function get(){return shadow(this,"IF",new PostScriptToken(PostScriptTokenTypes.IF,"IF"));}},{key:"IFELSE",get:function get(){return shadow(this,"IFELSE",new PostScriptToken(PostScriptTokenTypes.IFELSE,"IFELSE"));}}]);}();var PostScriptLexer=/*#__PURE__*/function(){function PostScriptLexer(stream){_classCallCheck(this,PostScriptLexer);this.stream=stream;this.nextChar();this.strBuf=[];}return _createClass(PostScriptLexer,[{key:"nextChar",value:function nextChar(){return this.currentChar=this.stream.getByte();}},{key:"getToken",value:function getToken(){var comment=false;var ch=this.currentChar;while(true){if(ch<0){return EOF;}if(comment){if(ch===0x0a||ch===0x0d){comment=false;}}else if(ch===0x25){comment=true;}else if(!isWhiteSpace(ch)){break;}ch=this.nextChar();}switch(ch|0){case 0x30:case 0x31:case 0x32:case 0x33:case 0x34:case 0x35:case 0x36:case 0x37:case 0x38:case 0x39:case 0x2b:case 0x2d:case 0x2e:return new PostScriptToken(PostScriptTokenTypes.NUMBER,this.getNumber());case 0x7b:this.nextChar();return PostScriptToken.LBRACE;case 0x7d:this.nextChar();return PostScriptToken.RBRACE;}var strBuf=this.strBuf;strBuf.length=0;strBuf[0]=String.fromCharCode(ch);while((ch=this.nextChar())>=0&&(ch>=0x41&&ch<=0x5a||ch>=0x61&&ch<=0x7a)){strBuf.push(String.fromCharCode(ch));}var str=strBuf.join("");switch(str.toLowerCase()){case"if":return PostScriptToken.IF;case"ifelse":return PostScriptToken.IFELSE;default:return PostScriptToken.getOperator(str);}}},{key:"getNumber",value:function getNumber(){var ch=this.currentChar;var strBuf=this.strBuf;strBuf.length=0;strBuf[0]=String.fromCharCode(ch);while((ch=this.nextChar())>=0){if(ch>=0x30&&ch<=0x39||ch===0x2d||ch===0x2e){strBuf.push(String.fromCharCode(ch));}else{break;}}var value=parseFloat(strBuf.join(""));if(isNaN(value)){throw new FormatError("Invalid floating point number: ".concat(value));}return value;}}]);}();;// ./src/core/image_utils.js\nvar BaseLocalCache=/*#__PURE__*/function(){function BaseLocalCache(options){_classCallCheck(this,BaseLocalCache);this._onlyRefs=(options===null||options===void 0?void 0:options.onlyRefs)===true;if(!this._onlyRefs){this._nameRefMap=new Map();this._imageMap=new Map();}this._imageCache=new RefSetCache();}return _createClass(BaseLocalCache,[{key:"getByName",value:function getByName(name){if(this._onlyRefs){unreachable("Should not call `getByName` method.");}var ref=this._nameRefMap.get(name);if(ref){return this.getByRef(ref);}return this._imageMap.get(name)||null;}},{key:"getByRef",value:function getByRef(ref){return this._imageCache.get(ref)||null;}},{key:"set",value:function set(name,ref,data){unreachable("Abstract method `set` called.");}}]);}();var LocalImageCache=/*#__PURE__*/function(_BaseLocalCache){function LocalImageCache(){_classCallCheck(this,LocalImageCache);return _callSuper(this,LocalImageCache,arguments);}_inherits(LocalImageCache,_BaseLocalCache);return _createClass(LocalImageCache,[{key:"set",value:function set(name){var ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var data=arguments.length>2?arguments[2]:undefined;if(typeof name!=="string"){throw new Error(\'LocalImageCache.set - expected "name" argument.\');}if(ref){if(this._imageCache.has(ref)){return;}this._nameRefMap.set(name,ref);this._imageCache.put(ref,data);return;}if(this._imageMap.has(name)){return;}this._imageMap.set(name,data);}}]);}(BaseLocalCache);var LocalColorSpaceCache=/*#__PURE__*/function(_BaseLocalCache2){function LocalColorSpaceCache(){_classCallCheck(this,LocalColorSpaceCache);return _callSuper(this,LocalColorSpaceCache,arguments);}_inherits(LocalColorSpaceCache,_BaseLocalCache2);return _createClass(LocalColorSpaceCache,[{key:"set",value:function set(){var name=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var data=arguments.length>2?arguments[2]:undefined;if(typeof name!=="string"&&!ref){throw new Error(\'LocalColorSpaceCache.set - expected "name" and/or "ref" argument.\');}if(ref){if(this._imageCache.has(ref)){return;}if(name!==null){this._nameRefMap.set(name,ref);}this._imageCache.put(ref,data);return;}if(this._imageMap.has(name)){return;}this._imageMap.set(name,data);}}]);}(BaseLocalCache);var LocalFunctionCache=/*#__PURE__*/function(_BaseLocalCache3){function LocalFunctionCache(options){_classCallCheck(this,LocalFunctionCache);return _callSuper(this,LocalFunctionCache,[{onlyRefs:true}]);}_inherits(LocalFunctionCache,_BaseLocalCache3);return _createClass(LocalFunctionCache,[{key:"set",value:function set(){var name=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var ref=arguments.length>1?arguments[1]:undefined;var data=arguments.length>2?arguments[2]:undefined;if(!ref){throw new Error(\'LocalFunctionCache.set - expected "ref" argument.\');}if(this._imageCache.has(ref)){return;}this._imageCache.put(ref,data);}}]);}(BaseLocalCache);var LocalGStateCache=/*#__PURE__*/function(_BaseLocalCache4){function LocalGStateCache(){_classCallCheck(this,LocalGStateCache);return _callSuper(this,LocalGStateCache,arguments);}_inherits(LocalGStateCache,_BaseLocalCache4);return _createClass(LocalGStateCache,[{key:"set",value:function set(name){var ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var data=arguments.length>2?arguments[2]:undefined;if(typeof name!=="string"){throw new Error(\'LocalGStateCache.set - expected "name" argument.\');}if(ref){if(this._imageCache.has(ref)){return;}this._nameRefMap.set(name,ref);this._imageCache.put(ref,data);return;}if(this._imageMap.has(name)){return;}this._imageMap.set(name,data);}}]);}(BaseLocalCache);var LocalTilingPatternCache=/*#__PURE__*/function(_BaseLocalCache5){function LocalTilingPatternCache(options){_classCallCheck(this,LocalTilingPatternCache);return _callSuper(this,LocalTilingPatternCache,[{onlyRefs:true}]);}_inherits(LocalTilingPatternCache,_BaseLocalCache5);return _createClass(LocalTilingPatternCache,[{key:"set",value:function set(){var name=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var ref=arguments.length>1?arguments[1]:undefined;var data=arguments.length>2?arguments[2]:undefined;if(!ref){throw new Error(\'LocalTilingPatternCache.set - expected "ref" argument.\');}if(this._imageCache.has(ref)){return;}this._imageCache.put(ref,data);}}]);}(BaseLocalCache);var RegionalImageCache=/*#__PURE__*/function(_BaseLocalCache6){function RegionalImageCache(options){_classCallCheck(this,RegionalImageCache);return _callSuper(this,RegionalImageCache,[{onlyRefs:true}]);}_inherits(RegionalImageCache,_BaseLocalCache6);return _createClass(RegionalImageCache,[{key:"set",value:function set(){var name=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var ref=arguments.length>1?arguments[1]:undefined;var data=arguments.length>2?arguments[2]:undefined;if(!ref){throw new Error(\'RegionalImageCache.set - expected "ref" argument.\');}if(this._imageCache.has(ref)){return;}this._imageCache.put(ref,data);}}]);}(BaseLocalCache);var _decodeFailedSet=/*#__PURE__*/new WeakMap();var _GlobalImageCache_brand=/*#__PURE__*/new WeakSet();var GlobalImageCache=/*#__PURE__*/function(){function GlobalImageCache(){_classCallCheck(this,GlobalImageCache);_classPrivateMethodInitSpec(this,_GlobalImageCache_brand);_classPrivateFieldInitSpec(this,_decodeFailedSet,new RefSet());this._refCache=new RefSetCache();this._imageCache=new RefSetCache();}return _createClass(GlobalImageCache,[{key:"shouldCache",value:function shouldCache(ref,pageIndex){var pageIndexSet=this._refCache.get(ref);if(!pageIndexSet){pageIndexSet=new Set();this._refCache.put(ref,pageIndexSet);}pageIndexSet.add(pageIndex);if(pageIndexSet.size<GlobalImageCache.NUM_PAGES_THRESHOLD){return false;}if(!this._imageCache.has(ref)&&_classPrivateGetter(_GlobalImageCache_brand,this,_get_cacheLimitReached)){return false;}return true;}},{key:"addDecodeFailed",value:function addDecodeFailed(ref){_classPrivateFieldGet(_decodeFailedSet,this).put(ref);}},{key:"hasDecodeFailed",value:function hasDecodeFailed(ref){return _classPrivateFieldGet(_decodeFailedSet,this).has(ref);}},{key:"addByteSize",value:function addByteSize(ref,byteSize){var imageData=this._imageCache.get(ref);if(!imageData){return;}if(imageData.byteSize){return;}imageData.byteSize=byteSize;}},{key:"getData",value:function getData(ref,pageIndex){var pageIndexSet=this._refCache.get(ref);if(!pageIndexSet){return null;}if(pageIndexSet.size<GlobalImageCache.NUM_PAGES_THRESHOLD){return null;}var imageData=this._imageCache.get(ref);if(!imageData){return null;}pageIndexSet.add(pageIndex);return imageData;}},{key:"setData",value:function setData(ref,data){if(!this._refCache.has(ref)){throw new Error(\'GlobalImageCache.setData - expected "shouldCache" to have been called.\');}if(this._imageCache.has(ref)){return;}if(_classPrivateGetter(_GlobalImageCache_brand,this,_get_cacheLimitReached)){warn("GlobalImageCache.setData - cache limit reached.");return;}this._imageCache.put(ref,data);}},{key:"clear",value:function clear(){var onlyData=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(!onlyData){_classPrivateFieldGet(_decodeFailedSet,this).clear();this._refCache.clear();}this._imageCache.clear();}}]);}();_GlobalImageCache=GlobalImageCache;function _get_byteSize(_this39){var byteSize=0;var _iterator245=_createForOfIteratorHelper(_this39._imageCache),_step245;try{for(_iterator245.s();!(_step245=_iterator245.n()).done;){var imageData=_step245.value;byteSize+=imageData.byteSize;}}catch(err){_iterator245.e(err);}finally{_iterator245.f();}return byteSize;}function _get_cacheLimitReached(_this40){if(_this40._imageCache.size<_GlobalImageCache.MIN_IMAGES_TO_CACHE){return false;}if(_classPrivateGetter(_GlobalImageCache_brand,_this40,_get_byteSize)<_GlobalImageCache.MAX_BYTE_SIZE){return false;}return true;}_defineProperty(GlobalImageCache,"NUM_PAGES_THRESHOLD",2);_defineProperty(GlobalImageCache,"MIN_IMAGES_TO_CACHE",10);_defineProperty(GlobalImageCache,"MAX_BYTE_SIZE",5e7);;// ./src/core/function.js\nvar PDFFunctionFactory=/*#__PURE__*/function(){function PDFFunctionFactory(_ref44){var xref=_ref44.xref,_ref44$isEvalSupporte=_ref44.isEvalSupported,isEvalSupported=_ref44$isEvalSupporte===void 0?true:_ref44$isEvalSupporte;_classCallCheck(this,PDFFunctionFactory);this.xref=xref;this.isEvalSupported=isEvalSupported!==false;}return _createClass(PDFFunctionFactory,[{key:"create",value:function create(fn){var cachedFunction=this.getCached(fn);if(cachedFunction){return cachedFunction;}var parsedFunction=PDFFunction.parse({xref:this.xref,isEvalSupported:this.isEvalSupported,fn:fn instanceof Ref?this.xref.fetch(fn):fn});this._cache(fn,parsedFunction);return parsedFunction;}},{key:"createFromArray",value:function createFromArray(fnObj){var cachedFunction=this.getCached(fnObj);if(cachedFunction){return cachedFunction;}var parsedFunction=PDFFunction.parseArray({xref:this.xref,isEvalSupported:this.isEvalSupported,fnObj:fnObj instanceof Ref?this.xref.fetch(fnObj):fnObj});this._cache(fnObj,parsedFunction);return parsedFunction;}},{key:"getCached",value:function getCached(cacheKey){var fnRef;if(cacheKey instanceof Ref){fnRef=cacheKey;}else if(cacheKey instanceof Dict){fnRef=cacheKey.objId;}else if(cacheKey instanceof BaseStream){var _cacheKey$dict;fnRef=(_cacheKey$dict=cacheKey.dict)===null||_cacheKey$dict===void 0?void 0:_cacheKey$dict.objId;}if(fnRef){var localFunction=this._localFunctionCache.getByRef(fnRef);if(localFunction){return localFunction;}}return null;}},{key:"_cache",value:function _cache(cacheKey,parsedFunction){if(!parsedFunction){throw new Error(\'PDFFunctionFactory._cache - expected "parsedFunction" argument.\');}var fnRef;if(cacheKey instanceof Ref){fnRef=cacheKey;}else if(cacheKey instanceof Dict){fnRef=cacheKey.objId;}else if(cacheKey instanceof BaseStream){var _cacheKey$dict2;fnRef=(_cacheKey$dict2=cacheKey.dict)===null||_cacheKey$dict2===void 0?void 0:_cacheKey$dict2.objId;}if(fnRef){this._localFunctionCache.set(null,fnRef,parsedFunction);}}},{key:"_localFunctionCache",get:function get(){return shadow(this,"_localFunctionCache",new LocalFunctionCache());}}]);}();function toNumberArray(arr){if(!Array.isArray(arr)){return null;}if(!isNumberArray(arr,null)){return arr.map(function(x){return+x;});}return arr;}var PDFFunction=/*#__PURE__*/function(){function PDFFunction(){_classCallCheck(this,PDFFunction);}return _createClass(PDFFunction,null,[{key:"getSampleArray",value:function getSampleArray(size,outputSize,bps,stream){var i,ii;var length=1;for(i=0,ii=size.length;i<ii;i++){length*=size[i];}length*=outputSize;var array=new Array(length);var codeSize=0;var codeBuf=0;var sampleMul=1.0/(Math.pow(2.0,bps)-1);var strBytes=stream.getBytes((length*bps+7)/8);var strIdx=0;for(i=0;i<length;i++){while(codeSize<bps){codeBuf<<=8;codeBuf|=strBytes[strIdx++];codeSize+=8;}codeSize-=bps;array[i]=(codeBuf>>codeSize)*sampleMul;codeBuf&=(1<<codeSize)-1;}return array;}},{key:"parse",value:function parse(_ref45){var xref=_ref45.xref,isEvalSupported=_ref45.isEvalSupported,fn=_ref45.fn;var dict=fn.dict||fn;var typeNum=dict.get("FunctionType");switch(typeNum){case 0:return this.constructSampled({xref:xref,isEvalSupported:isEvalSupported,fn:fn,dict:dict});case 1:break;case 2:return this.constructInterpolated({xref:xref,isEvalSupported:isEvalSupported,dict:dict});case 3:return this.constructStiched({xref:xref,isEvalSupported:isEvalSupported,dict:dict});case 4:return this.constructPostScript({xref:xref,isEvalSupported:isEvalSupported,fn:fn,dict:dict});}throw new FormatError("Unknown type of function");}},{key:"parseArray",value:function parseArray(_ref46){var xref=_ref46.xref,isEvalSupported=_ref46.isEvalSupported,fnObj=_ref46.fnObj;if(!Array.isArray(fnObj)){return this.parse({xref:xref,isEvalSupported:isEvalSupported,fn:fnObj});}var fnArray=[];var _iterator58=_createForOfIteratorHelper(fnObj),_step58;try{for(_iterator58.s();!(_step58=_iterator58.n()).done;){var fn=_step58.value;fnArray.push(this.parse({xref:xref,isEvalSupported:isEvalSupported,fn:xref.fetchIfRef(fn)}));}}catch(err){_iterator58.e(err);}finally{_iterator58.f();}return function(src,srcOffset,dest,destOffset){for(var i=0,ii=fnArray.length;i<ii;i++){fnArray[i](src,srcOffset,dest,destOffset+i);}};}},{key:"constructSampled",value:function constructSampled(_ref47){var xref=_ref47.xref,isEvalSupported=_ref47.isEvalSupported,fn=_ref47.fn,dict=_ref47.dict;function toMultiArray(arr){var inputLength=arr.length;var out=[];var index=0;for(var i=0;i<inputLength;i+=2){out[index++]=[arr[i],arr[i+1]];}return out;}function interpolate(x,xmin,xmax,ymin,ymax){return ymin+(x-xmin)*((ymax-ymin)/(xmax-xmin));}var domain=toNumberArray(dict.getArray("Domain"));var range=toNumberArray(dict.getArray("Range"));if(!domain||!range){throw new FormatError("No domain or range");}var inputSize=domain.length/2;var outputSize=range.length/2;domain=toMultiArray(domain);range=toMultiArray(range);var size=toNumberArray(dict.getArray("Size"));var bps=dict.get("BitsPerSample");var order=dict.get("Order")||1;if(order!==1){info("No support for cubic spline interpolation: "+order);}var encode=toNumberArray(dict.getArray("Encode"));if(!encode){encode=[];for(var i=0;i<inputSize;++i){encode.push([0,size[i]-1]);}}else{encode=toMultiArray(encode);}var decode=toNumberArray(dict.getArray("Decode"));decode=!decode?range:toMultiArray(decode);var samples=this.getSampleArray(size,outputSize,bps,fn);return function constructSampledFn(src,srcOffset,dest,destOffset){var cubeVertices=1<<inputSize;var cubeN=new Float64Array(cubeVertices).fill(1);var cubeVertex=new Uint32Array(cubeVertices);var i,j;var k=outputSize,pos=1;for(i=0;i<inputSize;++i){var domain_2i=domain[i][0];var domain_2i_1=domain[i][1];var xi=Math.min(Math.max(src[srcOffset+i],domain_2i),domain_2i_1);var e=interpolate(xi,domain_2i,domain_2i_1,encode[i][0],encode[i][1]);var size_i=size[i];e=Math.min(Math.max(e,0),size_i-1);var e0=e<size_i-1?Math.floor(e):e-1;var n0=e0+1-e;var n1=e-e0;var offset0=e0*k;var offset1=offset0+k;for(j=0;j<cubeVertices;j++){if(j&pos){cubeN[j]*=n1;cubeVertex[j]+=offset1;}else{cubeN[j]*=n0;cubeVertex[j]+=offset0;}}k*=size_i;pos<<=1;}for(j=0;j<outputSize;++j){var rj=0;for(i=0;i<cubeVertices;i++){rj+=samples[cubeVertex[i]+j]*cubeN[i];}rj=interpolate(rj,0,1,decode[j][0],decode[j][1]);dest[destOffset+j]=Math.min(Math.max(rj,range[j][0]),range[j][1]);}};}},{key:"constructInterpolated",value:function constructInterpolated(_ref48){var xref=_ref48.xref,isEvalSupported=_ref48.isEvalSupported,dict=_ref48.dict;var c0=toNumberArray(dict.getArray("C0"))||[0];var c1=toNumberArray(dict.getArray("C1"))||[1];var n=dict.get("N");var diff=[];for(var i=0,ii=c0.length;i<ii;++i){diff.push(c1[i]-c0[i]);}var length=diff.length;return function constructInterpolatedFn(src,srcOffset,dest,destOffset){var x=n===1?src[srcOffset]:Math.pow(src[srcOffset],n);for(var j=0;j<length;++j){dest[destOffset+j]=c0[j]+x*diff[j];}};}},{key:"constructStiched",value:function constructStiched(_ref49){var xref=_ref49.xref,isEvalSupported=_ref49.isEvalSupported,dict=_ref49.dict;var domain=toNumberArray(dict.getArray("Domain"));if(!domain){throw new FormatError("No domain");}var inputSize=domain.length/2;if(inputSize!==1){throw new FormatError("Bad domain for stiched function");}var fns=[];var _iterator59=_createForOfIteratorHelper(dict.get("Functions")),_step59;try{for(_iterator59.s();!(_step59=_iterator59.n()).done;){var fn=_step59.value;fns.push(this.parse({xref:xref,isEvalSupported:isEvalSupported,fn:xref.fetchIfRef(fn)}));}}catch(err){_iterator59.e(err);}finally{_iterator59.f();}var bounds=toNumberArray(dict.getArray("Bounds"));var encode=toNumberArray(dict.getArray("Encode"));var tmpBuf=new Float32Array(1);return function constructStichedFn(src,srcOffset,dest,destOffset){var clip=function constructStichedFromIRClip(v,min,max){if(v>max){v=max;}else if(v<min){v=min;}return v;};var v=clip(src[srcOffset],domain[0],domain[1]);var length=bounds.length;var i;for(i=0;i<length;++i){if(v<bounds[i]){break;}}var dmin=domain[0];if(i>0){dmin=bounds[i-1];}var dmax=domain[1];if(i<bounds.length){dmax=bounds[i];}var rmin=encode[2*i];var rmax=encode[2*i+1];tmpBuf[0]=dmin===dmax?rmin:rmin+(v-dmin)*(rmax-rmin)/(dmax-dmin);fns[i](tmpBuf,0,dest,destOffset);};}},{key:"constructPostScript",value:function constructPostScript(_ref50){var xref=_ref50.xref,isEvalSupported=_ref50.isEvalSupported,fn=_ref50.fn,dict=_ref50.dict;var domain=toNumberArray(dict.getArray("Domain"));var range=toNumberArray(dict.getArray("Range"));if(!domain){throw new FormatError("No domain.");}if(!range){throw new FormatError("No range.");}var lexer=new PostScriptLexer(fn);var parser=new PostScriptParser(lexer);var code=parser.parse();if(isEvalSupported&&FeatureTest.isEvalSupported){var compiled=new PostScriptCompiler().compile(code,domain,range);if(compiled){return new Function("src","srcOffset","dest","destOffset",compiled);}}info("Unable to compile PS function");var numOutputs=range.length>>1;var numInputs=domain.length>>1;var evaluator=new PostScriptEvaluator(code);var cache=Object.create(null);var MAX_CACHE_SIZE=2048*4;var cache_available=MAX_CACHE_SIZE;var tmpBuf=new Float32Array(numInputs);return function constructPostScriptFn(src,srcOffset,dest,destOffset){var i,value;var key="";var input=tmpBuf;for(i=0;i<numInputs;i++){value=src[srcOffset+i];input[i]=value;key+=value+"_";}var cachedValue=cache[key];if(cachedValue!==undefined){dest.set(cachedValue,destOffset);return;}var output=new Float32Array(numOutputs);var stack=evaluator.execute(input);var stackIndex=stack.length-numOutputs;for(i=0;i<numOutputs;i++){value=stack[stackIndex+i];var bound=range[i*2];if(value<bound){value=bound;}else{bound=range[i*2+1];if(value>bound){value=bound;}}output[i]=value;}if(cache_available>0){cache_available--;cache[key]=output;}dest.set(output,destOffset);};}}]);}();function isPDFFunction(v){var fnDict;if(v instanceof Dict){fnDict=v;}else if(v instanceof BaseStream){fnDict=v.dict;}else{return false;}return fnDict.has("FunctionType");}var PostScriptStack=/*#__PURE__*/function(){function PostScriptStack(initialStack){_classCallCheck(this,PostScriptStack);this.stack=initialStack?Array.from(initialStack):[];}return _createClass(PostScriptStack,[{key:"push",value:function push(value){if(this.stack.length>=PostScriptStack.MAX_STACK_SIZE){throw new Error("PostScript function stack overflow.");}this.stack.push(value);}},{key:"pop",value:function pop(){if(this.stack.length<=0){throw new Error("PostScript function stack underflow.");}return this.stack.pop();}},{key:"copy",value:function copy(n){if(this.stack.length+n>=PostScriptStack.MAX_STACK_SIZE){throw new Error("PostScript function stack overflow.");}var stack=this.stack;for(var i=stack.length-n,j=n-1;j>=0;j--,i++){stack.push(stack[i]);}}},{key:"index",value:function index(n){this.push(this.stack[this.stack.length-n-1]);}},{key:"roll",value:function roll(n,p){var stack=this.stack;var l=stack.length-n;var r=stack.length-1;var c=l+(p-Math.floor(p/n)*n);for(var i=l,j=r;i<j;i++,j--){var t=stack[i];stack[i]=stack[j];stack[j]=t;}for(var _i43=l,_j3=c-1;_i43<_j3;_i43++,_j3--){var _t=stack[_i43];stack[_i43]=stack[_j3];stack[_j3]=_t;}for(var _i44=c,_j4=r;_i44<_j4;_i44++,_j4--){var _t2=stack[_i44];stack[_i44]=stack[_j4];stack[_j4]=_t2;}}}]);}();_defineProperty(PostScriptStack,"MAX_STACK_SIZE",100);var PostScriptEvaluator=/*#__PURE__*/function(){function PostScriptEvaluator(operators){_classCallCheck(this,PostScriptEvaluator);this.operators=operators;}return _createClass(PostScriptEvaluator,[{key:"execute",value:function execute(initialStack){var stack=new PostScriptStack(initialStack);var counter=0;var operators=this.operators;var length=operators.length;var operator,a,b;while(counter<length){operator=operators[counter++];if(typeof operator==="number"){stack.push(operator);continue;}switch(operator){case"jz":b=stack.pop();a=stack.pop();if(!a){counter=b;}break;case"j":a=stack.pop();counter=a;break;case"abs":a=stack.pop();stack.push(Math.abs(a));break;case"add":b=stack.pop();a=stack.pop();stack.push(a+b);break;case"and":b=stack.pop();a=stack.pop();if(typeof a==="boolean"&&typeof b==="boolean"){stack.push(a&&b);}else{stack.push(a&b);}break;case"atan":b=stack.pop();a=stack.pop();a=Math.atan2(a,b)/Math.PI*180;if(a<0){a+=360;}stack.push(a);break;case"bitshift":b=stack.pop();a=stack.pop();if(a>0){stack.push(a<<b);}else{stack.push(a>>b);}break;case"ceiling":a=stack.pop();stack.push(Math.ceil(a));break;case"copy":a=stack.pop();stack.copy(a);break;case"cos":a=stack.pop();stack.push(Math.cos(a%360/180*Math.PI));break;case"cvi":a=stack.pop()|0;stack.push(a);break;case"cvr":break;case"div":b=stack.pop();a=stack.pop();stack.push(a/b);break;case"dup":stack.copy(1);break;case"eq":b=stack.pop();a=stack.pop();stack.push(a===b);break;case"exch":stack.roll(2,1);break;case"exp":b=stack.pop();a=stack.pop();stack.push(Math.pow(a,b));break;case"false":stack.push(false);break;case"floor":a=stack.pop();stack.push(Math.floor(a));break;case"ge":b=stack.pop();a=stack.pop();stack.push(a>=b);break;case"gt":b=stack.pop();a=stack.pop();stack.push(a>b);break;case"idiv":b=stack.pop();a=stack.pop();stack.push(a/b|0);break;case"index":a=stack.pop();stack.index(a);break;case"le":b=stack.pop();a=stack.pop();stack.push(a<=b);break;case"ln":a=stack.pop();stack.push(Math.log(a));break;case"log":a=stack.pop();stack.push(Math.log10(a));break;case"lt":b=stack.pop();a=stack.pop();stack.push(a<b);break;case"mod":b=stack.pop();a=stack.pop();stack.push(a%b);break;case"mul":b=stack.pop();a=stack.pop();stack.push(a*b);break;case"ne":b=stack.pop();a=stack.pop();stack.push(a!==b);break;case"neg":a=stack.pop();stack.push(-a);break;case"not":a=stack.pop();if(typeof a==="boolean"){stack.push(!a);}else{stack.push(~a);}break;case"or":b=stack.pop();a=stack.pop();if(typeof a==="boolean"&&typeof b==="boolean"){stack.push(a||b);}else{stack.push(a|b);}break;case"pop":stack.pop();break;case"roll":b=stack.pop();a=stack.pop();stack.roll(a,b);break;case"round":a=stack.pop();stack.push(Math.round(a));break;case"sin":a=stack.pop();stack.push(Math.sin(a%360/180*Math.PI));break;case"sqrt":a=stack.pop();stack.push(Math.sqrt(a));break;case"sub":b=stack.pop();a=stack.pop();stack.push(a-b);break;case"true":stack.push(true);break;case"truncate":a=stack.pop();a=a<0?Math.ceil(a):Math.floor(a);stack.push(a);break;case"xor":b=stack.pop();a=stack.pop();if(typeof a==="boolean"&&typeof b==="boolean"){stack.push(a!==b);}else{stack.push(a^b);}break;default:throw new FormatError("Unknown operator ".concat(operator));}}return stack.stack;}}]);}();var AstNode=/*#__PURE__*/function(){function AstNode(type){_classCallCheck(this,AstNode);this.type=type;}return _createClass(AstNode,[{key:"visit",value:function visit(visitor){unreachable("abstract method");}}]);}();var AstArgument=/*#__PURE__*/function(_AstNode){function AstArgument(index,min,max){var _this41;_classCallCheck(this,AstArgument);_this41=_callSuper(this,AstArgument,["args"]);_this41.index=index;_this41.min=min;_this41.max=max;return _this41;}_inherits(AstArgument,_AstNode);return _createClass(AstArgument,[{key:"visit",value:function visit(visitor){visitor.visitArgument(this);}}]);}(AstNode);var AstLiteral=/*#__PURE__*/function(_AstNode2){function AstLiteral(number){var _this42;_classCallCheck(this,AstLiteral);_this42=_callSuper(this,AstLiteral,["literal"]);_this42.number=number;_this42.min=number;_this42.max=number;return _this42;}_inherits(AstLiteral,_AstNode2);return _createClass(AstLiteral,[{key:"visit",value:function visit(visitor){visitor.visitLiteral(this);}}]);}(AstNode);var AstBinaryOperation=/*#__PURE__*/function(_AstNode3){function AstBinaryOperation(op,arg1,arg2,min,max){var _this43;_classCallCheck(this,AstBinaryOperation);_this43=_callSuper(this,AstBinaryOperation,["binary"]);_this43.op=op;_this43.arg1=arg1;_this43.arg2=arg2;_this43.min=min;_this43.max=max;return _this43;}_inherits(AstBinaryOperation,_AstNode3);return _createClass(AstBinaryOperation,[{key:"visit",value:function visit(visitor){visitor.visitBinaryOperation(this);}}]);}(AstNode);var AstMin=/*#__PURE__*/function(_AstNode4){function AstMin(arg,max){var _this44;_classCallCheck(this,AstMin);_this44=_callSuper(this,AstMin,["max"]);_this44.arg=arg;_this44.min=arg.min;_this44.max=max;return _this44;}_inherits(AstMin,_AstNode4);return _createClass(AstMin,[{key:"visit",value:function visit(visitor){visitor.visitMin(this);}}]);}(AstNode);var AstVariable=/*#__PURE__*/function(_AstNode5){function AstVariable(index,min,max){var _this45;_classCallCheck(this,AstVariable);_this45=_callSuper(this,AstVariable,["var"]);_this45.index=index;_this45.min=min;_this45.max=max;return _this45;}_inherits(AstVariable,_AstNode5);return _createClass(AstVariable,[{key:"visit",value:function visit(visitor){visitor.visitVariable(this);}}]);}(AstNode);var AstVariableDefinition=/*#__PURE__*/function(_AstNode6){function AstVariableDefinition(variable,arg){var _this46;_classCallCheck(this,AstVariableDefinition);_this46=_callSuper(this,AstVariableDefinition,["definition"]);_this46.variable=variable;_this46.arg=arg;return _this46;}_inherits(AstVariableDefinition,_AstNode6);return _createClass(AstVariableDefinition,[{key:"visit",value:function visit(visitor){visitor.visitVariableDefinition(this);}}]);}(AstNode);var ExpressionBuilderVisitor=/*#__PURE__*/function(){function ExpressionBuilderVisitor(){_classCallCheck(this,ExpressionBuilderVisitor);this.parts=[];}return _createClass(ExpressionBuilderVisitor,[{key:"visitArgument",value:function visitArgument(arg){this.parts.push("Math.max(",arg.min,", Math.min(",arg.max,", src[srcOffset + ",arg.index,"]))");}},{key:"visitVariable",value:function visitVariable(variable){this.parts.push("v",variable.index);}},{key:"visitLiteral",value:function visitLiteral(literal){this.parts.push(literal.number);}},{key:"visitBinaryOperation",value:function visitBinaryOperation(operation){this.parts.push("(");operation.arg1.visit(this);this.parts.push(" ",operation.op," ");operation.arg2.visit(this);this.parts.push(")");}},{key:"visitVariableDefinition",value:function visitVariableDefinition(definition){this.parts.push("var ");definition.variable.visit(this);this.parts.push(" = ");definition.arg.visit(this);this.parts.push(";");}},{key:"visitMin",value:function visitMin(max){this.parts.push("Math.min(");max.arg.visit(this);this.parts.push(", ",max.max,")");}},{key:"toString",value:function toString(){return this.parts.join("");}}]);}();function buildAddOperation(num1,num2){if(num2.type==="literal"&&num2.number===0){return num1;}if(num1.type==="literal"&&num1.number===0){return num2;}if(num2.type==="literal"&&num1.type==="literal"){return new AstLiteral(num1.number+num2.number);}return new AstBinaryOperation("+",num1,num2,num1.min+num2.min,num1.max+num2.max);}function buildMulOperation(num1,num2){if(num2.type==="literal"){if(num2.number===0){return new AstLiteral(0);}else if(num2.number===1){return num1;}else if(num1.type==="literal"){return new AstLiteral(num1.number*num2.number);}}if(num1.type==="literal"){if(num1.number===0){return new AstLiteral(0);}else if(num1.number===1){return num2;}}var min=Math.min(num1.min*num2.min,num1.min*num2.max,num1.max*num2.min,num1.max*num2.max);var max=Math.max(num1.min*num2.min,num1.min*num2.max,num1.max*num2.min,num1.max*num2.max);return new AstBinaryOperation("*",num1,num2,min,max);}function buildSubOperation(num1,num2){if(num2.type==="literal"){if(num2.number===0){return num1;}else if(num1.type==="literal"){return new AstLiteral(num1.number-num2.number);}}if(num2.type==="binary"&&num2.op==="-"&&num1.type==="literal"&&num1.number===1&&num2.arg1.type==="literal"&&num2.arg1.number===1){return num2.arg2;}return new AstBinaryOperation("-",num1,num2,num1.min-num2.max,num1.max-num2.min);}function buildMinOperation(num1,max){if(num1.min>=max){return new AstLiteral(max);}else if(num1.max<=max){return num1;}return new AstMin(num1,max);}var PostScriptCompiler=/*#__PURE__*/function(){function PostScriptCompiler(){_classCallCheck(this,PostScriptCompiler);}return _createClass(PostScriptCompiler,[{key:"compile",value:function compile(code,domain,range){var stack=[];var instructions=[];var inputSize=domain.length>>1,outputSize=range.length>>1;var lastRegister=0;var n,j;var num1,num2,ast1,ast2,tmpVar,item;for(var i=0;i<inputSize;i++){stack.push(new AstArgument(i,domain[i*2],domain[i*2+1]));}for(var _i45=0,ii=code.length;_i45<ii;_i45++){item=code[_i45];if(typeof item==="number"){stack.push(new AstLiteral(item));continue;}switch(item){case"add":if(stack.length<2){return null;}num2=stack.pop();num1=stack.pop();stack.push(buildAddOperation(num1,num2));break;case"cvr":if(stack.length<1){return null;}break;case"mul":if(stack.length<2){return null;}num2=stack.pop();num1=stack.pop();stack.push(buildMulOperation(num1,num2));break;case"sub":if(stack.length<2){return null;}num2=stack.pop();num1=stack.pop();stack.push(buildSubOperation(num1,num2));break;case"exch":if(stack.length<2){return null;}ast1=stack.pop();ast2=stack.pop();stack.push(ast1,ast2);break;case"pop":if(stack.length<1){return null;}stack.pop();break;case"index":if(stack.length<1){return null;}num1=stack.pop();if(num1.type!=="literal"){return null;}n=num1.number;if(n<0||!Number.isInteger(n)||stack.length<n){return null;}ast1=stack[stack.length-n-1];if(ast1.type==="literal"||ast1.type==="var"){stack.push(ast1);break;}tmpVar=new AstVariable(lastRegister++,ast1.min,ast1.max);stack[stack.length-n-1]=tmpVar;stack.push(tmpVar);instructions.push(new AstVariableDefinition(tmpVar,ast1));break;case"dup":if(stack.length<1){return null;}if(typeof code[_i45+1]==="number"&&code[_i45+2]==="gt"&&code[_i45+3]===_i45+7&&code[_i45+4]==="jz"&&code[_i45+5]==="pop"&&code[_i45+6]===code[_i45+1]){num1=stack.pop();stack.push(buildMinOperation(num1,code[_i45+1]));_i45+=6;break;}ast1=stack.at(-1);if(ast1.type==="literal"||ast1.type==="var"){stack.push(ast1);break;}tmpVar=new AstVariable(lastRegister++,ast1.min,ast1.max);stack[stack.length-1]=tmpVar;stack.push(tmpVar);instructions.push(new AstVariableDefinition(tmpVar,ast1));break;case"roll":if(stack.length<2){return null;}num2=stack.pop();num1=stack.pop();if(num2.type!=="literal"||num1.type!=="literal"){return null;}j=num2.number;n=num1.number;if(n<=0||!Number.isInteger(n)||!Number.isInteger(j)||stack.length<n){return null;}j=(j%n+n)%n;if(j===0){break;}stack.push.apply(stack,_toConsumableArray(stack.splice(stack.length-n,n-j)));break;default:return null;}}if(stack.length!==outputSize){return null;}var result=[];for(var _i46=0,_instructions=instructions;_i46<_instructions.length;_i46++){var instruction=_instructions[_i46];var statementBuilder=new ExpressionBuilderVisitor();instruction.visit(statementBuilder);result.push(statementBuilder.toString());}for(var _i47=0,_ii11=stack.length;_i47<_ii11;_i47++){var expr=stack[_i47],_statementBuilder=new ExpressionBuilderVisitor();expr.visit(_statementBuilder);var min=range[_i47*2],max=range[_i47*2+1];var _out=[_statementBuilder.toString()];if(min>expr.min){_out.unshift("Math.max(",min,", ");_out.push(")");}if(max<expr.max){_out.unshift("Math.min(",max,", ");_out.push(")");}_out.unshift("dest[destOffset + ",_i47,"] = ");_out.push(";");result.push(_out.join(""));}return result.join("\\n");}}]);}();;// ./src/core/bidi.js\nvar baseTypes=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","ON","ON","ET","ET","ET","ON","ON","ON","ON","ON","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","ON","ET","ET","ET","ET","ON","ON","ON","ON","L","ON","ON","BN","ON","ON","ET","ET","EN","EN","ON","L","ON","ON","ON","EN","L","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L"];var arabicTypes=["AN","AN","AN","AN","AN","AN","ON","ON","AL","ET","ET","AL","CS","AL","ON","ON","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","ON","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","ON","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL"];function isOdd(i){return(i&1)!==0;}function isEven(i){return(i&1)===0;}function findUnequal(arr,start,value){var j,jj;for(j=start,jj=arr.length;j<jj;++j){if(arr[j]!==value){return j;}}return j;}function setValues(arr,start,end,value){for(var j=start;j<end;++j){arr[j]=value;}}function reverseValues(arr,start,end){for(var i=start,j=end-1;i<j;++i,--j){var temp=arr[i];arr[i]=arr[j];arr[j]=temp;}}function createBidiText(str,isLTR){var vertical=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var dir="ltr";if(vertical){dir="ttb";}else if(!isLTR){dir="rtl";}return{str:str,dir:dir};}var chars=[];var types=[];function bidi(str){var startLevel=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;var vertical=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var isLTR=true;var strLength=str.length;if(strLength===0||vertical){return createBidiText(str,isLTR,vertical);}chars.length=strLength;types.length=strLength;var numBidi=0;var i,ii;for(i=0;i<strLength;++i){chars[i]=str.charAt(i);var charCode=str.charCodeAt(i);var charType="L";if(charCode<=0x00ff){charType=baseTypes[charCode];}else if(0x0590<=charCode&&charCode<=0x05f4){charType="R";}else if(0x0600<=charCode&&charCode<=0x06ff){charType=arabicTypes[charCode&0xff];if(!charType){warn("Bidi: invalid Unicode character "+charCode.toString(16));}}else if(0x0700<=charCode&&charCode<=0x08ac||0xfb50<=charCode&&charCode<=0xfdff||0xfe70<=charCode&&charCode<=0xfeff){charType="AL";}if(charType==="R"||charType==="AL"||charType==="AN"){numBidi++;}types[i]=charType;}if(numBidi===0){isLTR=true;return createBidiText(str,isLTR);}if(startLevel===-1){if(numBidi/strLength<0.3&&strLength>4){isLTR=true;startLevel=0;}else{isLTR=false;startLevel=1;}}var levels=[];for(i=0;i<strLength;++i){levels[i]=startLevel;}var e=isOdd(startLevel)?"R":"L";var sor=e;var eor=sor;var lastType=sor;for(i=0;i<strLength;++i){if(types[i]==="NSM"){types[i]=lastType;}else{lastType=types[i];}}lastType=sor;var t;for(i=0;i<strLength;++i){t=types[i];if(t==="EN"){types[i]=lastType==="AL"?"AN":"EN";}else if(t==="R"||t==="L"||t==="AL"){lastType=t;}}for(i=0;i<strLength;++i){t=types[i];if(t==="AL"){types[i]="R";}}for(i=1;i<strLength-1;++i){if(types[i]==="ES"&&types[i-1]==="EN"&&types[i+1]==="EN"){types[i]="EN";}if(types[i]==="CS"&&(types[i-1]==="EN"||types[i-1]==="AN")&&types[i+1]===types[i-1]){types[i]=types[i-1];}}for(i=0;i<strLength;++i){if(types[i]==="EN"){for(var j=i-1;j>=0;--j){if(types[j]!=="ET"){break;}types[j]="EN";}for(var _j5=i+1;_j5<strLength;++_j5){if(types[_j5]!=="ET"){break;}types[_j5]="EN";}}}for(i=0;i<strLength;++i){t=types[i];if(t==="WS"||t==="ES"||t==="ET"||t==="CS"){types[i]="ON";}}lastType=sor;for(i=0;i<strLength;++i){t=types[i];if(t==="EN"){types[i]=lastType==="L"?"L":"EN";}else if(t==="R"||t==="L"){lastType=t;}}for(i=0;i<strLength;++i){if(types[i]==="ON"){var end=findUnequal(types,i+1,"ON");var before=sor;if(i>0){before=types[i-1];}var after=eor;if(end+1<strLength){after=types[end+1];}if(before!=="L"){before="R";}if(after!=="L"){after="R";}if(before===after){setValues(types,i,end,before);}i=end-1;}}for(i=0;i<strLength;++i){if(types[i]==="ON"){types[i]=e;}}for(i=0;i<strLength;++i){t=types[i];if(isEven(levels[i])){if(t==="R"){levels[i]+=1;}else if(t==="AN"||t==="EN"){levels[i]+=2;}}else if(t==="L"||t==="AN"||t==="EN"){levels[i]+=1;}}var highestLevel=-1;var lowestOddLevel=99;var level;for(i=0,ii=levels.length;i<ii;++i){level=levels[i];if(highestLevel<level){highestLevel=level;}if(lowestOddLevel>level&&isOdd(level)){lowestOddLevel=level;}}for(level=highestLevel;level>=lowestOddLevel;--level){var start=-1;for(i=0,ii=levels.length;i<ii;++i){if(levels[i]<level){if(start>=0){reverseValues(chars,start,i);start=-1;}}else if(start<0){start=i;}}if(start>=0){reverseValues(chars,start,levels.length);}}for(i=0,ii=chars.length;i<ii;++i){var ch=chars[i];if(ch==="<"||ch===">"){chars[i]="";}}return createBidiText(chars.join(""),isLTR);};// ./src/core/font_substitutions.js\nvar NORMAL={style:"normal",weight:"normal"};var BOLD={style:"normal",weight:"bold"};var ITALIC={style:"italic",weight:"normal"};var BOLDITALIC={style:"italic",weight:"bold"};var substitutionMap=new Map([["Times-Roman",{local:["Times New Roman","Times-Roman","Times","Liberation Serif","Nimbus Roman","Nimbus Roman L","Tinos","Thorndale","TeX Gyre Termes","FreeSerif","Linux Libertine O","Libertinus Serif","DejaVu Serif","Bitstream Vera Serif","Ubuntu"],style:NORMAL,ultimate:"serif"}],["Times-Bold",{alias:"Times-Roman",style:BOLD,ultimate:"serif"}],["Times-Italic",{alias:"Times-Roman",style:ITALIC,ultimate:"serif"}],["Times-BoldItalic",{alias:"Times-Roman",style:BOLDITALIC,ultimate:"serif"}],["Helvetica",{local:["Helvetica","Helvetica Neue","Arial","Arial Nova","Liberation Sans","Arimo","Nimbus Sans","Nimbus Sans L","A030","TeX Gyre Heros","FreeSans","DejaVu Sans","Albany","Bitstream Vera Sans","Arial Unicode MS","Microsoft Sans Serif","Apple Symbols","Cantarell"],path:"LiberationSans-Regular.ttf",style:NORMAL,ultimate:"sans-serif"}],["Helvetica-Bold",{alias:"Helvetica",path:"LiberationSans-Bold.ttf",style:BOLD,ultimate:"sans-serif"}],["Helvetica-Oblique",{alias:"Helvetica",path:"LiberationSans-Italic.ttf",style:ITALIC,ultimate:"sans-serif"}],["Helvetica-BoldOblique",{alias:"Helvetica",path:"LiberationSans-BoldItalic.ttf",style:BOLDITALIC,ultimate:"sans-serif"}],["Courier",{local:["Courier","Courier New","Liberation Mono","Nimbus Mono","Nimbus Mono L","Cousine","Cumberland","TeX Gyre Cursor","FreeMono","Linux Libertine Mono O","Libertinus Mono"],style:NORMAL,ultimate:"monospace"}],["Courier-Bold",{alias:"Courier",style:BOLD,ultimate:"monospace"}],["Courier-Oblique",{alias:"Courier",style:ITALIC,ultimate:"monospace"}],["Courier-BoldOblique",{alias:"Courier",style:BOLDITALIC,ultimate:"monospace"}],["ArialBlack",{local:["Arial Black"],style:{style:"normal",weight:"900"},fallback:"Helvetica-Bold"}],["ArialBlack-Bold",{alias:"ArialBlack"}],["ArialBlack-Italic",{alias:"ArialBlack",style:{style:"italic",weight:"900"},fallback:"Helvetica-BoldOblique"}],["ArialBlack-BoldItalic",{alias:"ArialBlack-Italic"}],["ArialNarrow",{local:["Arial Narrow","Liberation Sans Narrow","Helvetica Condensed","Nimbus Sans Narrow","TeX Gyre Heros Cn"],style:NORMAL,fallback:"Helvetica"}],["ArialNarrow-Bold",{alias:"ArialNarrow",style:BOLD,fallback:"Helvetica-Bold"}],["ArialNarrow-Italic",{alias:"ArialNarrow",style:ITALIC,fallback:"Helvetica-Oblique"}],["ArialNarrow-BoldItalic",{alias:"ArialNarrow",style:BOLDITALIC,fallback:"Helvetica-BoldOblique"}],["Calibri",{local:["Calibri","Carlito"],style:NORMAL,fallback:"Helvetica"}],["Calibri-Bold",{alias:"Calibri",style:BOLD,fallback:"Helvetica-Bold"}],["Calibri-Italic",{alias:"Calibri",style:ITALIC,fallback:"Helvetica-Oblique"}],["Calibri-BoldItalic",{alias:"Calibri",style:BOLDITALIC,fallback:"Helvetica-BoldOblique"}],["Wingdings",{local:["Wingdings","URW Dingbats"],style:NORMAL}],["Wingdings-Regular",{alias:"Wingdings"}],["Wingdings-Bold",{alias:"Wingdings"}]]);var fontAliases=new Map([["Arial-Black","ArialBlack"]]);function getStyleToAppend(style){switch(style){case BOLD:return"Bold";case ITALIC:return"Italic";case BOLDITALIC:return"Bold Italic";default:if((style===null||style===void 0?void 0:style.weight)==="bold"){return"Bold";}if((style===null||style===void 0?void 0:style.style)==="italic"){return"Italic";}}return"";}function getFamilyName(str){var keywords=new Set(["thin","extralight","ultralight","demilight","semilight","light","book","regular","normal","medium","demibold","semibold","bold","extrabold","ultrabold","black","heavy","extrablack","ultrablack","roman","italic","oblique","ultracondensed","extracondensed","condensed","semicondensed","normal","semiexpanded","expanded","extraexpanded","ultraexpanded","bolditalic"]);return str.split(/[- ,+]+/g).filter(function(tok){return!keywords.has(tok.toLowerCase());}).join(" ");}function generateFont(_ref51,src,localFontPath){var alias=_ref51.alias,local=_ref51.local,path=_ref51.path,fallback=_ref51.fallback,style=_ref51.style,ultimate=_ref51.ultimate;var useFallback=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;var usePath=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;var append=arguments.length>5&&arguments[5]!==undefined?arguments[5]:"";var result={style:null,ultimate:null};if(local){var extra=append?" ".concat(append):"";var _iterator60=_createForOfIteratorHelper(local),_step60;try{for(_iterator60.s();!(_step60=_iterator60.n()).done;){var name=_step60.value;src.push("local(".concat(name).concat(extra,")"));}}catch(err){_iterator60.e(err);}finally{_iterator60.f();}}if(alias){var substitution=substitutionMap.get(alias);var aliasAppend=append||getStyleToAppend(style);Object.assign(result,generateFont(substitution,src,localFontPath,useFallback&&!fallback,usePath&&!path,aliasAppend));}if(style){result.style=style;}if(ultimate){result.ultimate=ultimate;}if(useFallback&&fallback){var fallbackInfo=substitutionMap.get(fallback);var _generateFont=generateFont(fallbackInfo,src,localFontPath,useFallback,usePath&&!path,append),fallbackUltimate=_generateFont.ultimate;result.ultimate||(result.ultimate=fallbackUltimate);}if(usePath&&path&&localFontPath){src.push("url(".concat(localFontPath).concat(path,")"));}return result;}function getFontSubstitution(systemFontCache,idFactory,localFontPath,baseFontName,standardFontName,type){if(baseFontName.startsWith("InvalidPDFjsFont_")){return null;}if((type==="TrueType"||type==="Type1")&&/^[A-Z]{6}\\+/.test(baseFontName)){baseFontName=baseFontName.slice(7);}baseFontName=normalizeFontName(baseFontName);var key=baseFontName;var substitutionInfo=systemFontCache.get(key);if(substitutionInfo){return substitutionInfo;}var substitution=substitutionMap.get(baseFontName);if(!substitution){var _iterator61=_createForOfIteratorHelper(fontAliases),_step61;try{for(_iterator61.s();!(_step61=_iterator61.n()).done;){var _step61$value=_slicedToArray(_step61.value,2),alias=_step61$value[0],subst=_step61$value[1];if(baseFontName.startsWith(alias)){baseFontName="".concat(subst).concat(baseFontName.substring(alias.length));substitution=substitutionMap.get(baseFontName);break;}}}catch(err){_iterator61.e(err);}finally{_iterator61.f();}}var mustAddBaseFont=false;if(!substitution){substitution=substitutionMap.get(standardFontName);mustAddBaseFont=true;}var loadedName="".concat(idFactory.getDocId(),"_s").concat(idFactory.createFontId());if(!substitution){if(!validateFontName(baseFontName)){warn("Cannot substitute the font because of its name: ".concat(baseFontName));systemFontCache.set(key,null);return null;}var bold=/bold/gi.test(baseFontName);var italic=/oblique|italic/gi.test(baseFontName);var _style=bold&&italic&&BOLDITALIC||bold&&BOLD||italic&&ITALIC||NORMAL;substitutionInfo={css:"\\"".concat(getFamilyName(baseFontName),"\\",").concat(loadedName),guessFallback:true,loadedName:loadedName,baseFontName:baseFontName,src:"local(".concat(baseFontName,")"),style:_style};systemFontCache.set(key,substitutionInfo);return substitutionInfo;}var src=[];if(mustAddBaseFont&&validateFontName(baseFontName)){src.push("local(".concat(baseFontName,")"));}var _generateFont2=generateFont(substitution,src,localFontPath),style=_generateFont2.style,ultimate=_generateFont2.ultimate;var guessFallback=ultimate===null;var fallback=guessFallback?"":",".concat(ultimate);substitutionInfo={css:"\\"".concat(getFamilyName(baseFontName),"\\",").concat(loadedName).concat(fallback),guessFallback:guessFallback,loadedName:loadedName,baseFontName:baseFontName,src:src.join(","),style:style};systemFontCache.set(key,substitutionInfo);return substitutionInfo;};// ./src/shared/murmurhash3.js\nvar SEED=0xc3d2e1f0;var MASK_HIGH=0xffff0000;var MASK_LOW=0xffff;var MurmurHash3_64=/*#__PURE__*/function(){function MurmurHash3_64(seed){_classCallCheck(this,MurmurHash3_64);this.h1=seed?seed&0xffffffff:SEED;this.h2=seed?seed&0xffffffff:SEED;}return _createClass(MurmurHash3_64,[{key:"update",value:function update(input){var data,length;if(typeof input==="string"){data=new Uint8Array(input.length*2);length=0;for(var i=0,ii=input.length;i<ii;i++){var code=input.charCodeAt(i);if(code<=0xff){data[length++]=code;}else{data[length++]=code>>>8;data[length++]=code&0xff;}}}else if(ArrayBuffer.isView(input)){data=input.slice();length=data.byteLength;}else{throw new Error("Invalid data format, must be a string or TypedArray.");}var blockCounts=length>>2;var tailLength=length-blockCounts*4;var dataUint32=new Uint32Array(data.buffer,0,blockCounts);var k1=0,k2=0;var h1=this.h1,h2=this.h2;var C1=0xcc9e2d51,C2=0x1b873593;var C1_LOW=C1&MASK_LOW,C2_LOW=C2&MASK_LOW;for(var _i48=0;_i48<blockCounts;_i48++){if(_i48&1){k1=dataUint32[_i48];k1=k1*C1&MASK_HIGH|k1*C1_LOW&MASK_LOW;k1=k1<<15|k1>>>17;k1=k1*C2&MASK_HIGH|k1*C2_LOW&MASK_LOW;h1^=k1;h1=h1<<13|h1>>>19;h1=h1*5+0xe6546b64;}else{k2=dataUint32[_i48];k2=k2*C1&MASK_HIGH|k2*C1_LOW&MASK_LOW;k2=k2<<15|k2>>>17;k2=k2*C2&MASK_HIGH|k2*C2_LOW&MASK_LOW;h2^=k2;h2=h2<<13|h2>>>19;h2=h2*5+0xe6546b64;}}k1=0;switch(tailLength){case 3:k1^=data[blockCounts*4+2]<<16;case 2:k1^=data[blockCounts*4+1]<<8;case 1:k1^=data[blockCounts*4];k1=k1*C1&MASK_HIGH|k1*C1_LOW&MASK_LOW;k1=k1<<15|k1>>>17;k1=k1*C2&MASK_HIGH|k1*C2_LOW&MASK_LOW;if(blockCounts&1){h1^=k1;}else{h2^=k1;}}this.h1=h1;this.h2=h2;}},{key:"hexdigest",value:function hexdigest(){var h1=this.h1,h2=this.h2;h1^=h2>>>1;h1=h1*0xed558ccd&MASK_HIGH|h1*0x8ccd&MASK_LOW;h2=h2*0xff51afd7&MASK_HIGH|((h2<<16|h1>>>16)*0xafd7ed55&MASK_HIGH)>>>16;h1^=h2>>>1;h1=h1*0x1a85ec53&MASK_HIGH|h1*0xec53&MASK_LOW;h2=h2*0xc4ceb9fe&MASK_HIGH|((h2<<16|h1>>>16)*0xb9fe1a85&MASK_HIGH)>>>16;h1^=h2>>>1;return(h1>>>0).toString(16).padStart(8,"0")+(h2>>>0).toString(16).padStart(8,"0");}}]);}();;// ./src/core/operator_list.js\nfunction addState(parentState,pattern,checkFn,iterateFn,processFn){var state=parentState;for(var i=0,ii=pattern.length-1;i<ii;i++){var _state;var item=pattern[i];state=(_state=state)[item]||(_state[item]=[]);}state[pattern.at(-1)]={checkFn:checkFn,iterateFn:iterateFn,processFn:processFn};}var InitialState=[];addState(InitialState,[OPS.save,OPS.transform,OPS.paintInlineImageXObject,OPS.restore],null,function iterateInlineImageGroup(context,i){var fnArray=context.fnArray;var iFirstSave=context.iCurr-3;var pos=(i-iFirstSave)%4;switch(pos){case 0:return fnArray[i]===OPS.save;case 1:return fnArray[i]===OPS.transform;case 2:return fnArray[i]===OPS.paintInlineImageXObject;case 3:return fnArray[i]===OPS.restore;}throw new Error("iterateInlineImageGroup - invalid pos: ".concat(pos));},function foundInlineImageGroup(context,i){var MIN_IMAGES_IN_INLINE_IMAGES_BLOCK=10;var MAX_IMAGES_IN_INLINE_IMAGES_BLOCK=200;var MAX_WIDTH=1000;var IMAGE_PADDING=1;var fnArray=context.fnArray,argsArray=context.argsArray;var curr=context.iCurr;var iFirstSave=curr-3;var iFirstTransform=curr-2;var iFirstPIIXO=curr-1;var count=Math.min(Math.floor((i-iFirstSave)/4),MAX_IMAGES_IN_INLINE_IMAGES_BLOCK);if(count<MIN_IMAGES_IN_INLINE_IMAGES_BLOCK){return i-(i-iFirstSave)%4;}var maxX=0;var map=[];var maxLineHeight=0;var currentX=IMAGE_PADDING,currentY=IMAGE_PADDING;for(var q=0;q<count;q++){var transform=argsArray[iFirstTransform+(q<<2)];var _img=argsArray[iFirstPIIXO+(q<<2)][0];if(currentX+_img.width>MAX_WIDTH){maxX=Math.max(maxX,currentX);currentY+=maxLineHeight+2*IMAGE_PADDING;currentX=0;maxLineHeight=0;}map.push({transform:transform,x:currentX,y:currentY,w:_img.width,h:_img.height});currentX+=_img.width+2*IMAGE_PADDING;maxLineHeight=Math.max(maxLineHeight,_img.height);}var imgWidth=Math.max(maxX,currentX)+IMAGE_PADDING;var imgHeight=currentY+maxLineHeight+IMAGE_PADDING;var imgData=new Uint8Array(imgWidth*imgHeight*4);var imgRowSize=imgWidth<<2;for(var _q=0;_q<count;_q++){var data=argsArray[iFirstPIIXO+(_q<<2)][0].data;var rowSize=map[_q].w<<2;var dataOffset=0;var offset=map[_q].x+map[_q].y*imgWidth<<2;imgData.set(data.subarray(0,rowSize),offset-imgRowSize);for(var k=0,kk=map[_q].h;k<kk;k++){imgData.set(data.subarray(dataOffset,dataOffset+rowSize),offset);dataOffset+=rowSize;offset+=imgRowSize;}imgData.set(data.subarray(dataOffset-rowSize,dataOffset),offset);while(offset>=0){data[offset-4]=data[offset];data[offset-3]=data[offset+1];data[offset-2]=data[offset+2];data[offset-1]=data[offset+3];data[offset+rowSize]=data[offset+rowSize-4];data[offset+rowSize+1]=data[offset+rowSize-3];data[offset+rowSize+2]=data[offset+rowSize-2];data[offset+rowSize+3]=data[offset+rowSize-1];offset-=imgRowSize;}}var img={width:imgWidth,height:imgHeight};if(context.isOffscreenCanvasSupported){var canvas=new OffscreenCanvas(imgWidth,imgHeight);var ctx=canvas.getContext("2d");ctx.putImageData(new ImageData(new Uint8ClampedArray(imgData.buffer),imgWidth,imgHeight),0,0);img.bitmap=canvas.transferToImageBitmap();img.data=null;}else{img.kind=ImageKind.RGBA_32BPP;img.data=imgData;}fnArray.splice(iFirstSave,count*4,OPS.paintInlineImageXObjectGroup);argsArray.splice(iFirstSave,count*4,[img,map]);return iFirstSave+1;});addState(InitialState,[OPS.save,OPS.transform,OPS.paintImageMaskXObject,OPS.restore],null,function iterateImageMaskGroup(context,i){var fnArray=context.fnArray;var iFirstSave=context.iCurr-3;var pos=(i-iFirstSave)%4;switch(pos){case 0:return fnArray[i]===OPS.save;case 1:return fnArray[i]===OPS.transform;case 2:return fnArray[i]===OPS.paintImageMaskXObject;case 3:return fnArray[i]===OPS.restore;}throw new Error("iterateImageMaskGroup - invalid pos: ".concat(pos));},function foundImageMaskGroup(context,i){var MIN_IMAGES_IN_MASKS_BLOCK=10;var MAX_IMAGES_IN_MASKS_BLOCK=100;var MAX_SAME_IMAGES_IN_MASKS_BLOCK=1000;var fnArray=context.fnArray,argsArray=context.argsArray;var curr=context.iCurr;var iFirstSave=curr-3;var iFirstTransform=curr-2;var iFirstPIMXO=curr-1;var count=Math.floor((i-iFirstSave)/4);if(count<MIN_IMAGES_IN_MASKS_BLOCK){return i-(i-iFirstSave)%4;}var isSameImage=false;var iTransform,transformArgs;var firstPIMXOArg0=argsArray[iFirstPIMXO][0];var firstTransformArg0=argsArray[iFirstTransform][0],firstTransformArg1=argsArray[iFirstTransform][1],firstTransformArg2=argsArray[iFirstTransform][2],firstTransformArg3=argsArray[iFirstTransform][3];if(firstTransformArg1===firstTransformArg2){isSameImage=true;iTransform=iFirstTransform+4;var iPIMXO=iFirstPIMXO+4;for(var q=1;q<count;q++,iTransform+=4,iPIMXO+=4){transformArgs=argsArray[iTransform];if(argsArray[iPIMXO][0]!==firstPIMXOArg0||transformArgs[0]!==firstTransformArg0||transformArgs[1]!==firstTransformArg1||transformArgs[2]!==firstTransformArg2||transformArgs[3]!==firstTransformArg3){if(q<MIN_IMAGES_IN_MASKS_BLOCK){isSameImage=false;}else{count=q;}break;}}}if(isSameImage){count=Math.min(count,MAX_SAME_IMAGES_IN_MASKS_BLOCK);var positions=new Float32Array(count*2);iTransform=iFirstTransform;for(var _q2=0;_q2<count;_q2++,iTransform+=4){transformArgs=argsArray[iTransform];positions[_q2<<1]=transformArgs[4];positions[(_q2<<1)+1]=transformArgs[5];}fnArray.splice(iFirstSave,count*4,OPS.paintImageMaskXObjectRepeat);argsArray.splice(iFirstSave,count*4,[firstPIMXOArg0,firstTransformArg0,firstTransformArg1,firstTransformArg2,firstTransformArg3,positions]);}else{count=Math.min(count,MAX_IMAGES_IN_MASKS_BLOCK);var images=[];for(var _q3=0;_q3<count;_q3++){transformArgs=argsArray[iFirstTransform+(_q3<<2)];var maskParams=argsArray[iFirstPIMXO+(_q3<<2)][0];images.push({data:maskParams.data,width:maskParams.width,height:maskParams.height,interpolate:maskParams.interpolate,count:maskParams.count,transform:transformArgs});}fnArray.splice(iFirstSave,count*4,OPS.paintImageMaskXObjectGroup);argsArray.splice(iFirstSave,count*4,[images]);}return iFirstSave+1;});addState(InitialState,[OPS.save,OPS.transform,OPS.paintImageXObject,OPS.restore],function(context){var argsArray=context.argsArray;var iFirstTransform=context.iCurr-2;return argsArray[iFirstTransform][1]===0&&argsArray[iFirstTransform][2]===0;},function iterateImageGroup(context,i){var fnArray=context.fnArray,argsArray=context.argsArray;var iFirstSave=context.iCurr-3;var pos=(i-iFirstSave)%4;switch(pos){case 0:return fnArray[i]===OPS.save;case 1:if(fnArray[i]!==OPS.transform){return false;}var iFirstTransform=context.iCurr-2;var firstTransformArg0=argsArray[iFirstTransform][0];var firstTransformArg3=argsArray[iFirstTransform][3];if(argsArray[i][0]!==firstTransformArg0||argsArray[i][1]!==0||argsArray[i][2]!==0||argsArray[i][3]!==firstTransformArg3){return false;}return true;case 2:if(fnArray[i]!==OPS.paintImageXObject){return false;}var iFirstPIXO=context.iCurr-1;var firstPIXOArg0=argsArray[iFirstPIXO][0];if(argsArray[i][0]!==firstPIXOArg0){return false;}return true;case 3:return fnArray[i]===OPS.restore;}throw new Error("iterateImageGroup - invalid pos: ".concat(pos));},function(context,i){var MIN_IMAGES_IN_BLOCK=3;var MAX_IMAGES_IN_BLOCK=1000;var fnArray=context.fnArray,argsArray=context.argsArray;var curr=context.iCurr;var iFirstSave=curr-3;var iFirstTransform=curr-2;var iFirstPIXO=curr-1;var firstPIXOArg0=argsArray[iFirstPIXO][0];var firstTransformArg0=argsArray[iFirstTransform][0];var firstTransformArg3=argsArray[iFirstTransform][3];var count=Math.min(Math.floor((i-iFirstSave)/4),MAX_IMAGES_IN_BLOCK);if(count<MIN_IMAGES_IN_BLOCK){return i-(i-iFirstSave)%4;}var positions=new Float32Array(count*2);var iTransform=iFirstTransform;for(var q=0;q<count;q++,iTransform+=4){var transformArgs=argsArray[iTransform];positions[q<<1]=transformArgs[4];positions[(q<<1)+1]=transformArgs[5];}var args=[firstPIXOArg0,firstTransformArg0,firstTransformArg3,positions];fnArray.splice(iFirstSave,count*4,OPS.paintImageXObjectRepeat);argsArray.splice(iFirstSave,count*4,args);return iFirstSave+1;});addState(InitialState,[OPS.beginText,OPS.setFont,OPS.setTextMatrix,OPS.showText,OPS.endText],null,function iterateShowTextGroup(context,i){var fnArray=context.fnArray,argsArray=context.argsArray;var iFirstSave=context.iCurr-4;var pos=(i-iFirstSave)%5;switch(pos){case 0:return fnArray[i]===OPS.beginText;case 1:return fnArray[i]===OPS.setFont;case 2:return fnArray[i]===OPS.setTextMatrix;case 3:if(fnArray[i]!==OPS.showText){return false;}var iFirstSetFont=context.iCurr-3;var firstSetFontArg0=argsArray[iFirstSetFont][0];var firstSetFontArg1=argsArray[iFirstSetFont][1];if(argsArray[i][0]!==firstSetFontArg0||argsArray[i][1]!==firstSetFontArg1){return false;}return true;case 4:return fnArray[i]===OPS.endText;}throw new Error("iterateShowTextGroup - invalid pos: ".concat(pos));},function(context,i){var MIN_CHARS_IN_BLOCK=3;var MAX_CHARS_IN_BLOCK=1000;var fnArray=context.fnArray,argsArray=context.argsArray;var curr=context.iCurr;var iFirstBeginText=curr-4;var iFirstSetFont=curr-3;var iFirstSetTextMatrix=curr-2;var iFirstShowText=curr-1;var iFirstEndText=curr;var firstSetFontArg0=argsArray[iFirstSetFont][0];var firstSetFontArg1=argsArray[iFirstSetFont][1];var count=Math.min(Math.floor((i-iFirstBeginText)/5),MAX_CHARS_IN_BLOCK);if(count<MIN_CHARS_IN_BLOCK){return i-(i-iFirstBeginText)%5;}var iFirst=iFirstBeginText;if(iFirstBeginText>=4&&fnArray[iFirstBeginText-4]===fnArray[iFirstSetFont]&&fnArray[iFirstBeginText-3]===fnArray[iFirstSetTextMatrix]&&fnArray[iFirstBeginText-2]===fnArray[iFirstShowText]&&fnArray[iFirstBeginText-1]===fnArray[iFirstEndText]&&argsArray[iFirstBeginText-4][0]===firstSetFontArg0&&argsArray[iFirstBeginText-4][1]===firstSetFontArg1){count++;iFirst-=5;}var iEndText=iFirst+4;for(var q=1;q<count;q++){fnArray.splice(iEndText,3);argsArray.splice(iEndText,3);iEndText+=2;}return iEndText+1;});var NullOptimizer=/*#__PURE__*/function(){function NullOptimizer(queue){_classCallCheck(this,NullOptimizer);this.queue=queue;}return _createClass(NullOptimizer,[{key:"_optimize",value:function _optimize(){}},{key:"push",value:function push(fn,args){this.queue.fnArray.push(fn);this.queue.argsArray.push(args);this._optimize();}},{key:"flush",value:function flush(){}},{key:"reset",value:function reset(){}}]);}();var QueueOptimizer=/*#__PURE__*/function(_NullOptimizer){function QueueOptimizer(queue){var _this47;_classCallCheck(this,QueueOptimizer);_this47=_callSuper(this,QueueOptimizer,[queue]);_this47.state=null;_this47.context={iCurr:0,fnArray:queue.fnArray,argsArray:queue.argsArray,isOffscreenCanvasSupported:false};_this47.match=null;_this47.lastProcessed=0;return _this47;}_inherits(QueueOptimizer,_NullOptimizer);return _createClass(QueueOptimizer,[{key:"isOffscreenCanvasSupported",set:function set(value){this.context.isOffscreenCanvasSupported=value;}},{key:"_optimize",value:function _optimize(){var fnArray=this.queue.fnArray;var i=this.lastProcessed,ii=fnArray.length;var state=this.state;var match=this.match;if(!state&&!match&&i+1===ii&&!InitialState[fnArray[i]]){this.lastProcessed=ii;return;}var context=this.context;while(i<ii){if(match){var iterate=(0,match.iterateFn)(context,i);if(iterate){i++;continue;}i=(0,match.processFn)(context,i+1);ii=fnArray.length;match=null;state=null;if(i>=ii){break;}}state=(state||InitialState)[fnArray[i]];if(!state||Array.isArray(state)){i++;continue;}context.iCurr=i;i++;if(state.checkFn&&!(0,state.checkFn)(context)){state=null;continue;}match=state;state=null;}this.state=state;this.match=match;this.lastProcessed=i;}},{key:"flush",value:function flush(){while(this.match){var length=this.queue.fnArray.length;this.lastProcessed=(0,this.match.processFn)(this.context,length);this.match=null;this.state=null;this._optimize();}}},{key:"reset",value:function reset(){this.state=null;this.match=null;this.lastProcessed=0;}}]);}(NullOptimizer);var OperatorList=/*#__PURE__*/function(){function OperatorList(){var intent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var streamSink=arguments.length>1?arguments[1]:undefined;_classCallCheck(this,OperatorList);this._streamSink=streamSink;this.fnArray=[];this.argsArray=[];this.optimizer=streamSink&&!(intent&RenderingIntentFlag.OPLIST)?new QueueOptimizer(this):new NullOptimizer(this);this.dependencies=new Set();this._totalLength=0;this.weight=0;this._resolved=streamSink?null:Promise.resolve();}return _createClass(OperatorList,[{key:"isOffscreenCanvasSupported",set:function set(value){this.optimizer.isOffscreenCanvasSupported=value;}},{key:"length",get:function get(){return this.argsArray.length;}},{key:"ready",get:function get(){return this._resolved||this._streamSink.ready;}},{key:"totalLength",get:function get(){return this._totalLength+this.length;}},{key:"addOp",value:function addOp(fn,args){this.optimizer.push(fn,args);this.weight++;if(this._streamSink){if(this.weight>=OperatorList.CHUNK_SIZE){this.flush();}else if(this.weight>=OperatorList.CHUNK_SIZE_ABOUT&&(fn===OPS.restore||fn===OPS.endText)){this.flush();}}}},{key:"addImageOps",value:function addImageOps(fn,args,optionalContent){var hasMask=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;if(hasMask){this.addOp(OPS.save);this.addOp(OPS.setGState,[[["SMask",false]]]);}if(optionalContent!==undefined){this.addOp(OPS.beginMarkedContentProps,["OC",optionalContent]);}this.addOp(fn,args);if(optionalContent!==undefined){this.addOp(OPS.endMarkedContent,[]);}if(hasMask){this.addOp(OPS.restore);}}},{key:"addDependency",value:function addDependency(dependency){if(this.dependencies.has(dependency)){return;}this.dependencies.add(dependency);this.addOp(OPS.dependency,[dependency]);}},{key:"addDependencies",value:function addDependencies(dependencies){var _iterator62=_createForOfIteratorHelper(dependencies),_step62;try{for(_iterator62.s();!(_step62=_iterator62.n()).done;){var dependency=_step62.value;this.addDependency(dependency);}}catch(err){_iterator62.e(err);}finally{_iterator62.f();}}},{key:"addOpList",value:function addOpList(opList){if(!(opList instanceof OperatorList)){warn(\'addOpList - ignoring invalid "opList" parameter.\');return;}var _iterator63=_createForOfIteratorHelper(opList.dependencies),_step63;try{for(_iterator63.s();!(_step63=_iterator63.n()).done;){var dependency=_step63.value;this.dependencies.add(dependency);}}catch(err){_iterator63.e(err);}finally{_iterator63.f();}for(var i=0,ii=opList.length;i<ii;i++){this.addOp(opList.fnArray[i],opList.argsArray[i]);}}},{key:"getIR",value:function getIR(){return{fnArray:this.fnArray,argsArray:this.argsArray,length:this.length};}},{key:"_transfers",get:function get(){var _arg$data;var transfers=[];var fnArray=this.fnArray,argsArray=this.argsArray,length=this.length;for(var i=0;i<length;i++){switch(fnArray[i]){case OPS.paintInlineImageXObject:case OPS.paintInlineImageXObjectGroup:case OPS.paintImageMaskXObject:var arg=argsArray[i][0];if(!arg.cached&&((_arg$data=arg.data)===null||_arg$data===void 0?void 0:_arg$data.buffer)instanceof ArrayBuffer){transfers.push(arg.data.buffer);}break;}}return transfers;}},{key:"flush",value:function flush(){var lastChunk=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var separateAnnots=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;this.optimizer.flush();var length=this.length;this._totalLength+=length;this._streamSink.enqueue({fnArray:this.fnArray,argsArray:this.argsArray,lastChunk:lastChunk,separateAnnots:separateAnnots,length:length},1,this._transfers);this.dependencies.clear();this.fnArray.length=0;this.argsArray.length=0;this.weight=0;this.optimizer.reset();}}]);}();_OperatorList=OperatorList;_defineProperty(OperatorList,"CHUNK_SIZE",1000);_defineProperty(OperatorList,"CHUNK_SIZE_ABOUT",_OperatorList.CHUNK_SIZE-5);;// ./src/core/image.js\nfunction decodeAndClamp(value,addend,coefficient,max){value=addend+value*coefficient;if(value<0){value=0;}else if(value>max){value=max;}return value;}function resizeImageMask(src,bpc,w1,h1,w2,h2){var length=w2*h2;var dest;if(bpc<=8){dest=new Uint8Array(length);}else if(bpc<=16){dest=new Uint16Array(length);}else{dest=new Uint32Array(length);}var xRatio=w1/w2;var yRatio=h1/h2;var i,j,py,newIndex=0,oldIndex;var xScaled=new Uint16Array(w2);var w1Scanline=w1;for(i=0;i<w2;i++){xScaled[i]=Math.floor(i*xRatio);}for(i=0;i<h2;i++){py=Math.floor(i*yRatio)*w1Scanline;for(j=0;j<w2;j++){oldIndex=py+xScaled[j];dest[newIndex++]=src[oldIndex];}}return dest;}var _PDFImage_brand=/*#__PURE__*/new WeakSet();var PDFImage=/*#__PURE__*/function(){function PDFImage(_ref52){var xref=_ref52.xref,res=_ref52.res,image=_ref52.image,_ref52$isInline=_ref52.isInline,isInline=_ref52$isInline===void 0?false:_ref52$isInline,_ref52$smask=_ref52.smask,smask=_ref52$smask===void 0?null:_ref52$smask,_ref52$mask=_ref52.mask,mask=_ref52$mask===void 0?null:_ref52$mask,_ref52$isMask=_ref52.isMask,isMask=_ref52$isMask===void 0?false:_ref52$isMask,pdfFunctionFactory=_ref52.pdfFunctionFactory,localColorSpaceCache=_ref52.localColorSpaceCache;_classCallCheck(this,PDFImage);_classPrivateMethodInitSpec(this,_PDFImage_brand);this.image=image;var dict=image.dict;var filter=dict.get("F","Filter");var filterName;if(filter instanceof Name){filterName=filter.name;}else if(Array.isArray(filter)){var filterZero=xref.fetchIfRef(filter[0]);if(filterZero instanceof Name){filterName=filterZero.name;}}switch(filterName){case"JPXDecode":var _JpxImage$parseImageP=JpxImage.parseImageProperties(image.stream);image.width=_JpxImage$parseImageP.width;image.height=_JpxImage$parseImageP.height;image.numComps=_JpxImage$parseImageP.componentsCount;image.bitsPerComponent=_JpxImage$parseImageP.bitsPerComponent;image.stream.reset();this.jpxDecoderOptions={numComponents:0,isIndexedColormap:false,smaskInData:dict.has("SMaskInData")};break;case"JBIG2Decode":image.bitsPerComponent=1;image.numComps=1;break;}var _width=dict.get("W","Width");var _height=dict.get("H","Height");if(Number.isInteger(image.width)&&image.width>0&&Number.isInteger(image.height)&&image.height>0&&(image.width!==_width||image.height!==_height)){warn("PDFImage - using the Width/Height of the image data, "+"rather than the image dictionary.");_width=image.width;_height=image.height;}if(_width<1||_height<1){throw new FormatError("Invalid image width: ".concat(_width," or height: ").concat(_height));}this.width=_width;this.height=_height;this.interpolate=dict.get("I","Interpolate");this.imageMask=dict.get("IM","ImageMask")||false;this.matte=dict.get("Matte")||false;var bitsPerComponent=image.bitsPerComponent;if(!bitsPerComponent){bitsPerComponent=dict.get("BPC","BitsPerComponent");if(!bitsPerComponent){if(this.imageMask){bitsPerComponent=1;}else{throw new FormatError("Bits per component missing in image: ".concat(this.imageMask));}}}this.bpc=bitsPerComponent;if(!this.imageMask){var _this$jpxDecoderOptio;var colorSpace=dict.getRaw("CS")||dict.getRaw("ColorSpace");var hasColorSpace=!!colorSpace;if(!hasColorSpace){if(this.jpxDecoderOptions){colorSpace=Name.get("DeviceRGBA");}else{switch(image.numComps){case 1:colorSpace=Name.get("DeviceGray");break;case 3:colorSpace=Name.get("DeviceRGB");break;case 4:colorSpace=Name.get("DeviceCMYK");break;default:throw new Error("Images with ".concat(image.numComps," color components not supported."));}}}else if((_this$jpxDecoderOptio=this.jpxDecoderOptions)!==null&&_this$jpxDecoderOptio!==void 0&&_this$jpxDecoderOptio.smaskInData){colorSpace=Name.get("DeviceRGBA");}this.colorSpace=ColorSpace.parse({cs:colorSpace,xref:xref,resources:isInline?res:null,pdfFunctionFactory:pdfFunctionFactory,localColorSpaceCache:localColorSpaceCache});this.numComps=this.colorSpace.numComps;if(this.jpxDecoderOptions){this.jpxDecoderOptions.numComponents=hasColorSpace?this.numComps:0;this.jpxDecoderOptions.isIndexedColormap=this.colorSpace.name==="Indexed";}}this.decode=dict.getArray("D","Decode");this.needsDecode=false;if(this.decode&&(this.colorSpace&&!this.colorSpace.isDefaultDecode(this.decode,bitsPerComponent)||isMask&&!ColorSpace.isDefaultDecode(this.decode,1))){var _this$colorSpace;this.needsDecode=true;var max=(1<<bitsPerComponent)-1;this.decodeCoefficients=[];this.decodeAddends=[];var isIndexed=((_this$colorSpace=this.colorSpace)===null||_this$colorSpace===void 0?void 0:_this$colorSpace.name)==="Indexed";for(var i=0,j=0;i<this.decode.length;i+=2,++j){var dmin=this.decode[i];var dmax=this.decode[i+1];this.decodeCoefficients[j]=isIndexed?(dmax-dmin)/max:dmax-dmin;this.decodeAddends[j]=isIndexed?dmin:max*dmin;}}if(smask){this.smask=new PDFImage({xref:xref,res:res,image:smask,isInline:isInline,pdfFunctionFactory:pdfFunctionFactory,localColorSpaceCache:localColorSpaceCache});}else if(mask){if(mask instanceof BaseStream){var maskDict=mask.dict,imageMask=maskDict.get("IM","ImageMask");if(!imageMask){warn("Ignoring /Mask in image without /ImageMask.");}else{this.mask=new PDFImage({xref:xref,res:res,image:mask,isInline:isInline,isMask:true,pdfFunctionFactory:pdfFunctionFactory,localColorSpaceCache:localColorSpaceCache});}}else{this.mask=mask;}}}return _createClass(PDFImage,[{key:"drawWidth",get:function get(){var _this$smask,_this$mask;return Math.max(this.width,((_this$smask=this.smask)===null||_this$smask===void 0?void 0:_this$smask.width)||0,((_this$mask=this.mask)===null||_this$mask===void 0?void 0:_this$mask.width)||0);}},{key:"drawHeight",get:function get(){var _this$smask2,_this$mask2;return Math.max(this.height,((_this$smask2=this.smask)===null||_this$smask2===void 0?void 0:_this$smask2.height)||0,((_this$mask2=this.mask)===null||_this$mask2===void 0?void 0:_this$mask2.height)||0);}},{key:"decodeBuffer",value:function decodeBuffer(buffer){var bpc=this.bpc;var numComps=this.numComps;var decodeAddends=this.decodeAddends;var decodeCoefficients=this.decodeCoefficients;var max=(1<<bpc)-1;var i,ii;if(bpc===1){for(i=0,ii=buffer.length;i<ii;i++){buffer[i]=+!buffer[i];}return;}var index=0;for(i=0,ii=this.width*this.height;i<ii;i++){for(var j=0;j<numComps;j++){buffer[index]=decodeAndClamp(buffer[index],decodeAddends[j],decodeCoefficients[j],max);index++;}}}},{key:"getComponents",value:function getComponents(buffer){var bpc=this.bpc;if(bpc===8){return buffer;}var width=this.width;var height=this.height;var numComps=this.numComps;var length=width*height*numComps;var bufferPos=0;var output;if(bpc<=8){output=new Uint8Array(length);}else if(bpc<=16){output=new Uint16Array(length);}else{output=new Uint32Array(length);}var rowComps=width*numComps;var max=(1<<bpc)-1;var i=0,ii,buf;if(bpc===1){var mask,loop1End,loop2End;for(var j=0;j<height;j++){loop1End=i+(rowComps&~7);loop2End=i+rowComps;while(i<loop1End){buf=buffer[bufferPos++];output[i]=buf>>7&1;output[i+1]=buf>>6&1;output[i+2]=buf>>5&1;output[i+3]=buf>>4&1;output[i+4]=buf>>3&1;output[i+5]=buf>>2&1;output[i+6]=buf>>1&1;output[i+7]=buf&1;i+=8;}if(i<loop2End){buf=buffer[bufferPos++];mask=128;while(i<loop2End){output[i++]=+!!(buf&mask);mask>>=1;}}}}else{var bits=0;buf=0;for(i=0,ii=length;i<ii;++i){if(i%rowComps===0){buf=0;bits=0;}while(bits<bpc){buf=buf<<8|buffer[bufferPos++];bits+=8;}var remainingBits=bits-bpc;var value=buf>>remainingBits;if(value<0){value=0;}else if(value>max){value=max;}output[i]=value;buf&=(1<<remainingBits)-1;bits=remainingBits;}}return output;}},{key:"fillOpacity",value:function(){var _fillOpacity=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee23(rgbaBuf,width,height,actualHeight,image){var smask,mask,alphaBuf,sw,sh,i,ii,j,numComps,opacity,imageOffset,color,maskOffset;return _regeneratorRuntime().wrap(function _callee23$(_context27){while(1)switch(_context27.prev=_context27.next){case 0:smask=this.smask;mask=this.mask;if(!smask){_context27.next=11;break;}sw=smask.width;sh=smask.height;alphaBuf=new Uint8ClampedArray(sw*sh);_context27.next=8;return smask.fillGrayBuffer(alphaBuf);case 8:if(sw!==width||sh!==height){alphaBuf=resizeImageMask(alphaBuf,smask.bpc,sw,sh,width,height);}_context27.next=47;break;case 11:if(!mask){_context27.next=47;break;}if(!(mask instanceof PDFImage)){_context27.next=23;break;}sw=mask.width;sh=mask.height;alphaBuf=new Uint8ClampedArray(sw*sh);mask.numComps=1;_context27.next=19;return mask.fillGrayBuffer(alphaBuf);case 19:for(i=0,ii=sw*sh;i<ii;++i){alphaBuf[i]=255-alphaBuf[i];}if(sw!==width||sh!==height){alphaBuf=resizeImageMask(alphaBuf,mask.bpc,sw,sh,width,height);}_context27.next=47;break;case 23:if(!Array.isArray(mask)){_context27.next=46;break;}alphaBuf=new Uint8ClampedArray(width*height);numComps=this.numComps;i=0,ii=width*height;case 27:if(!(i<ii)){_context27.next=44;break;}opacity=0;imageOffset=i*numComps;j=0;case 31:if(!(j<numComps)){_context27.next=40;break;}color=image[imageOffset+j];maskOffset=j*2;if(!(color<mask[maskOffset]||color>mask[maskOffset+1])){_context27.next=37;break;}opacity=255;return _context27.abrupt("break",40);case 37:++j;_context27.next=31;break;case 40:alphaBuf[i]=opacity;case 41:++i;_context27.next=27;break;case 44:_context27.next=47;break;case 46:throw new FormatError("Unknown mask format.");case 47:if(alphaBuf){for(i=0,j=3,ii=width*actualHeight;i<ii;++i,j+=4){rgbaBuf[j]=alphaBuf[i];}}else{for(i=0,j=3,ii=width*actualHeight;i<ii;++i,j+=4){rgbaBuf[j]=255;}}case 48:case"end":return _context27.stop();}},_callee23,this);}));function fillOpacity(_x37,_x38,_x39,_x40,_x41){return _fillOpacity.apply(this,arguments);}return fillOpacity;}()},{key:"undoPreblend",value:function undoPreblend(buffer,width,height){var _this$smask3;var matte=(_this$smask3=this.smask)===null||_this$smask3===void 0?void 0:_this$smask3.matte;if(!matte){return;}var matteRgb=this.colorSpace.getRgb(matte,0);var matteR=matteRgb[0];var matteG=matteRgb[1];var matteB=matteRgb[2];var length=width*height*4;for(var i=0;i<length;i+=4){var alpha=buffer[i+3];if(alpha===0){buffer[i]=255;buffer[i+1]=255;buffer[i+2]=255;continue;}var k=255/alpha;buffer[i]=(buffer[i]-matteR)*k+matteR;buffer[i+1]=(buffer[i+1]-matteG)*k+matteG;buffer[i+2]=(buffer[i+2]-matteB)*k+matteB;}}},{key:"createImageData",value:function(){var _createImageData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee24(){var forceRGBA,isOffscreenCanvasSupported,drawWidth,drawHeight,imgData,numComps,originalWidth,originalHeight,bpc,rowBytes,mustBeResized,_imgArray,kind,image,_data,buffer,i,ii,imageLength,isHandled,_image,rgba,imgArray,actualHeight,comps,alpha01,maybeUndoPreblend,canvas,ctx,canvasImgData,data,arr,bitmap,_args28=arguments;return _regeneratorRuntime().wrap(function _callee24$(_context28){while(1)switch(_context28.prev=_context28.next){case 0:forceRGBA=_args28.length>0&&_args28[0]!==undefined?_args28[0]:false;isOffscreenCanvasSupported=_args28.length>1&&_args28[1]!==undefined?_args28[1]:false;drawWidth=this.drawWidth;drawHeight=this.drawHeight;imgData={width:drawWidth,height:drawHeight,interpolate:this.interpolate,kind:0,data:null};numComps=this.numComps;originalWidth=this.width;originalHeight=this.height;bpc=this.bpc;rowBytes=originalWidth*numComps*bpc+7>>3;mustBeResized=isOffscreenCanvasSupported&&ImageResizer.needsToBeResized(drawWidth,drawHeight);if(!(!this.smask&&!this.mask&&this.colorSpace.name==="DeviceRGBA")){_context28.next=21;break;}imgData.kind=ImageKind.RGBA_32BPP;_context28.next=15;return this.getImageBytes(originalHeight*originalWidth*4,{});case 15:_imgArray=imgData.data=_context28.sent;if(!isOffscreenCanvasSupported){_context28.next=20;break;}if(mustBeResized){_context28.next=19;break;}return _context28.abrupt("return",this.createBitmap(ImageKind.RGBA_32BPP,drawWidth,drawHeight,_imgArray));case 19:return _context28.abrupt("return",ImageResizer.createImage(imgData,false));case 20:return _context28.abrupt("return",imgData);case 21:if(forceRGBA){_context28.next=78;break;}if(this.colorSpace.name==="DeviceGray"&&bpc===1){kind=ImageKind.GRAYSCALE_1BPP;}else if(this.colorSpace.name==="DeviceRGB"&&bpc===8&&!this.needsDecode){kind=ImageKind.RGB_24BPP;}if(!(kind&&!this.smask&&!this.mask&&drawWidth===originalWidth&&drawHeight===originalHeight)){_context28.next=40;break;}_context28.next=26;return _assertClassBrand(_PDFImage_brand,this,_getImage).call(this,originalWidth,originalHeight);case 26:image=_context28.sent;if(!image){_context28.next=29;break;}return _context28.abrupt("return",image);case 29:_context28.next=31;return this.getImageBytes(originalHeight*rowBytes,{});case 31:_data=_context28.sent;if(!isOffscreenCanvasSupported){_context28.next=36;break;}if(!mustBeResized){_context28.next=35;break;}return _context28.abrupt("return",ImageResizer.createImage({data:_data,kind:kind,width:drawWidth,height:drawHeight,interpolate:this.interpolate},this.needsDecode));case 35:return _context28.abrupt("return",this.createBitmap(kind,originalWidth,originalHeight,_data));case 36:imgData.kind=kind;imgData.data=_data;if(this.needsDecode){assert(kind===ImageKind.GRAYSCALE_1BPP,"PDFImage.createImageData: The image must be grayscale.");buffer=imgData.data;for(i=0,ii=buffer.length;i<ii;i++){buffer[i]^=0xff;}}return _context28.abrupt("return",imgData);case 40:if(!(this.image instanceof JpegStream&&!this.smask&&!this.mask&&!this.needsDecode)){_context28.next=78;break;}imageLength=originalHeight*rowBytes;if(!(isOffscreenCanvasSupported&&!mustBeResized)){_context28.next=67;break;}isHandled=false;_context28.t0=this.colorSpace.name;_context28.next=_context28.t0==="DeviceGray"?47:_context28.t0==="DeviceRGB"?50:_context28.t0==="DeviceCMYK"?53:55;break;case 47:imageLength*=4;isHandled=true;return _context28.abrupt("break",55);case 50:imageLength=imageLength/3*4;isHandled=true;return _context28.abrupt("break",55);case 53:isHandled=true;return _context28.abrupt("break",55);case 55:if(!isHandled){_context28.next=65;break;}_context28.next=58;return _assertClassBrand(_PDFImage_brand,this,_getImage).call(this,drawWidth,drawHeight);case 58:_image=_context28.sent;if(!_image){_context28.next=61;break;}return _context28.abrupt("return",_image);case 61:_context28.next=63;return this.getImageBytes(imageLength,{drawWidth:drawWidth,drawHeight:drawHeight,forceRGBA:true});case 63:rgba=_context28.sent;return _context28.abrupt("return",this.createBitmap(ImageKind.RGBA_32BPP,drawWidth,drawHeight,rgba));case 65:_context28.next=78;break;case 67:_context28.t1=this.colorSpace.name;_context28.next=_context28.t1==="DeviceGray"?70:_context28.t1==="DeviceRGB"?71:_context28.t1==="DeviceCMYK"?71:78;break;case 70:imageLength*=3;case 71:imgData.kind=ImageKind.RGB_24BPP;_context28.next=74;return this.getImageBytes(imageLength,{drawWidth:drawWidth,drawHeight:drawHeight,forceRGB:true});case 74:imgData.data=_context28.sent;if(!mustBeResized){_context28.next=77;break;}return _context28.abrupt("return",ImageResizer.createImage(imgData));case 77:return _context28.abrupt("return",imgData);case 78:_context28.next=80;return this.getImageBytes(originalHeight*rowBytes,{internal:true});case 80:imgArray=_context28.sent;actualHeight=0|imgArray.length/rowBytes*drawHeight/originalHeight;comps=this.getComponents(imgArray);if(isOffscreenCanvasSupported&&!mustBeResized){canvas=new OffscreenCanvas(drawWidth,drawHeight);ctx=canvas.getContext("2d");canvasImgData=ctx.createImageData(drawWidth,drawHeight);data=canvasImgData.data;}imgData.kind=ImageKind.RGBA_32BPP;if(!(!forceRGBA&&!this.smask&&!this.mask)){_context28.next=90;break;}if(!isOffscreenCanvasSupported||mustBeResized){imgData.kind=ImageKind.RGB_24BPP;data=new Uint8ClampedArray(drawWidth*drawHeight*3);alpha01=0;}else{arr=new Uint32Array(data.buffer);arr.fill(FeatureTest.isLittleEndian?0xff000000:0x000000ff);alpha01=1;}maybeUndoPreblend=false;_context28.next=95;break;case 90:if(!isOffscreenCanvasSupported||mustBeResized){data=new Uint8ClampedArray(drawWidth*drawHeight*4);}alpha01=1;maybeUndoPreblend=true;_context28.next=95;return this.fillOpacity(data,drawWidth,drawHeight,actualHeight,comps);case 95:if(this.needsDecode){this.decodeBuffer(comps);}this.colorSpace.fillRgb(data,originalWidth,originalHeight,drawWidth,drawHeight,actualHeight,bpc,comps,alpha01);if(maybeUndoPreblend){this.undoPreblend(data,drawWidth,actualHeight);}if(!(isOffscreenCanvasSupported&&!mustBeResized)){_context28.next=102;break;}ctx.putImageData(canvasImgData,0,0);bitmap=canvas.transferToImageBitmap();return _context28.abrupt("return",{data:null,width:drawWidth,height:drawHeight,bitmap:bitmap,interpolate:this.interpolate});case 102:imgData.data=data;if(!mustBeResized){_context28.next=105;break;}return _context28.abrupt("return",ImageResizer.createImage(imgData));case 105:return _context28.abrupt("return",imgData);case 106:case"end":return _context28.stop();}},_callee24,this);}));function createImageData(){return _createImageData.apply(this,arguments);}return createImageData;}()},{key:"fillGrayBuffer",value:function(){var _fillGrayBuffer=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee25(buffer){var numComps,width,height,bpc,rowBytes,imgArray,comps,i,length,scale;return _regeneratorRuntime().wrap(function _callee25$(_context29){while(1)switch(_context29.prev=_context29.next){case 0:numComps=this.numComps;if(!(numComps!==1)){_context29.next=3;break;}throw new FormatError("Reading gray scale from a color image: ".concat(numComps));case 3:width=this.width;height=this.height;bpc=this.bpc;rowBytes=width*numComps*bpc+7>>3;_context29.next=9;return this.getImageBytes(height*rowBytes,{internal:true});case 9:imgArray=_context29.sent;comps=this.getComponents(imgArray);if(!(bpc===1)){_context29.next=15;break;}length=width*height;if(this.needsDecode){for(i=0;i<length;++i){buffer[i]=comps[i]-1&255;}}else{for(i=0;i<length;++i){buffer[i]=-comps[i]&255;}}return _context29.abrupt("return");case 15:if(this.needsDecode){this.decodeBuffer(comps);}length=width*height;scale=255/((1<<bpc)-1);for(i=0;i<length;++i){buffer[i]=scale*comps[i];}case 19:case"end":return _context29.stop();}},_callee25,this);}));function fillGrayBuffer(_x42){return _fillGrayBuffer.apply(this,arguments);}return fillGrayBuffer;}()},{key:"createBitmap",value:function createBitmap(kind,width,height,src){var canvas=new OffscreenCanvas(width,height);var ctx=canvas.getContext("2d");var imgData;if(kind===ImageKind.RGBA_32BPP){imgData=new ImageData(src,width,height);}else{imgData=ctx.createImageData(width,height);convertToRGBA({kind:kind,src:src,dest:new Uint32Array(imgData.data.buffer),width:width,height:height,inverseDecode:this.needsDecode});}ctx.putImageData(imgData,0,0);var bitmap=canvas.transferToImageBitmap();return{data:null,width:width,height:height,bitmap:bitmap,interpolate:this.interpolate};}},{key:"getImageBytes",value:function(){var _getImageBytes=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee26(length,_ref53){var drawWidth,drawHeight,_ref53$forceRGBA,forceRGBA,_ref53$forceRGB,forceRGB,_ref53$internal,internal,imageBytes;return _regeneratorRuntime().wrap(function _callee26$(_context30){while(1)switch(_context30.prev=_context30.next){case 0:drawWidth=_ref53.drawWidth,drawHeight=_ref53.drawHeight,_ref53$forceRGBA=_ref53.forceRGBA,forceRGBA=_ref53$forceRGBA===void 0?false:_ref53$forceRGBA,_ref53$forceRGB=_ref53.forceRGB,forceRGB=_ref53$forceRGB===void 0?false:_ref53$forceRGB,_ref53$internal=_ref53.internal,internal=_ref53$internal===void 0?false:_ref53$internal;this.image.reset();this.image.drawWidth=drawWidth||this.width;this.image.drawHeight=drawHeight||this.height;this.image.forceRGBA=!!forceRGBA;this.image.forceRGB=!!forceRGB;_context30.next=8;return this.image.getImageData(length,this.jpxDecoderOptions);case 8:imageBytes=_context30.sent;if(!(internal||this.image instanceof DecodeStream)){_context30.next=11;break;}return _context30.abrupt("return",imageBytes);case 11:assert(imageBytes instanceof Uint8Array,\'PDFImage.getImageBytes: Unsupported "imageBytes" type.\');return _context30.abrupt("return",new Uint8Array(imageBytes));case 13:case"end":return _context30.stop();}},_callee26,this);}));function getImageBytes(_x43,_x44){return _getImageBytes.apply(this,arguments);}return getImageBytes;}()}],[{key:"buildImage",value:function(){var _buildImage=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee27(_ref54){var xref,res,image,_ref54$isInline,isInline,pdfFunctionFactory,localColorSpaceCache,imageData,smaskData,maskData,smask,mask;return _regeneratorRuntime().wrap(function _callee27$(_context31){while(1)switch(_context31.prev=_context31.next){case 0:xref=_ref54.xref,res=_ref54.res,image=_ref54.image,_ref54$isInline=_ref54.isInline,isInline=_ref54$isInline===void 0?false:_ref54$isInline,pdfFunctionFactory=_ref54.pdfFunctionFactory,localColorSpaceCache=_ref54.localColorSpaceCache;imageData=image;smaskData=null;maskData=null;smask=image.dict.get("SMask");mask=image.dict.get("Mask");if(smask){if(smask instanceof BaseStream){smaskData=smask;}else{warn("Unsupported /SMask format.");}}else if(mask){if(mask instanceof BaseStream||Array.isArray(mask)){maskData=mask;}else{warn("Unsupported /Mask format.");}}return _context31.abrupt("return",new PDFImage({xref:xref,res:res,image:imageData,isInline:isInline,smask:smaskData,mask:maskData,pdfFunctionFactory:pdfFunctionFactory,localColorSpaceCache:localColorSpaceCache}));case 8:case"end":return _context31.stop();}},_callee27);}));function buildImage(_x45){return _buildImage.apply(this,arguments);}return buildImage;}()},{key:"createRawMask",value:function createRawMask(_ref55){var imgArray=_ref55.imgArray,width=_ref55.width,height=_ref55.height,imageIsFromDecodeStream=_ref55.imageIsFromDecodeStream,inverseDecode=_ref55.inverseDecode,interpolate=_ref55.interpolate;var computedLength=(width+7>>3)*height;var actualLength=imgArray.byteLength;var haveFullData=computedLength===actualLength;var data,i;if(imageIsFromDecodeStream&&(!inverseDecode||haveFullData)){data=imgArray;}else if(!inverseDecode){data=new Uint8Array(imgArray);}else{data=new Uint8Array(computedLength);data.set(imgArray);data.fill(0xff,actualLength);}if(inverseDecode){for(i=0;i<actualLength;i++){data[i]^=0xff;}}return{data:data,width:width,height:height,interpolate:interpolate};}},{key:"createMask",value:function(){var _createMask=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee28(_ref56){var imgArray,width,height,imageIsFromDecodeStream,inverseDecode,interpolate,_ref56$isOffscreenCan,isOffscreenCanvasSupported,isSingleOpaquePixel,data,canvas,ctx,imgData,bitmap;return _regeneratorRuntime().wrap(function _callee28$(_context32){while(1)switch(_context32.prev=_context32.next){case 0:imgArray=_ref56.imgArray,width=_ref56.width,height=_ref56.height,imageIsFromDecodeStream=_ref56.imageIsFromDecodeStream,inverseDecode=_ref56.inverseDecode,interpolate=_ref56.interpolate,_ref56$isOffscreenCan=_ref56.isOffscreenCanvasSupported,isOffscreenCanvasSupported=_ref56$isOffscreenCan===void 0?false:_ref56$isOffscreenCan;isSingleOpaquePixel=width===1&&height===1&&inverseDecode===(imgArray.length===0||!!(imgArray[0]&128));if(!isSingleOpaquePixel){_context32.next=4;break;}return _context32.abrupt("return",{isSingleOpaquePixel:isSingleOpaquePixel});case 4:if(!isOffscreenCanvasSupported){_context32.next=16;break;}if(!ImageResizer.needsToBeResized(width,height)){_context32.next=9;break;}data=new Uint8ClampedArray(width*height*4);convertBlackAndWhiteToRGBA({src:imgArray,dest:data,width:width,height:height,nonBlackColor:0,inverseDecode:inverseDecode});return _context32.abrupt("return",ImageResizer.createImage({kind:ImageKind.RGBA_32BPP,data:data,width:width,height:height,interpolate:interpolate}));case 9:canvas=new OffscreenCanvas(width,height);ctx=canvas.getContext("2d");imgData=ctx.createImageData(width,height);convertBlackAndWhiteToRGBA({src:imgArray,dest:imgData.data,width:width,height:height,nonBlackColor:0,inverseDecode:inverseDecode});ctx.putImageData(imgData,0,0);bitmap=canvas.transferToImageBitmap();return _context32.abrupt("return",{data:null,width:width,height:height,interpolate:interpolate,bitmap:bitmap});case 16:return _context32.abrupt("return",this.createRawMask({imgArray:imgArray,width:width,height:height,inverseDecode:inverseDecode,imageIsFromDecodeStream:imageIsFromDecodeStream,interpolate:interpolate}));case 17:case"end":return _context32.stop();}},_callee28,this);}));function createMask(_x46){return _createMask.apply(this,arguments);}return createMask;}()}]);}();function _getImage(_x243,_x244){return _getImage2.apply(this,arguments);}function _getImage2(){_getImage2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee125(width,height){var bitmap;return _regeneratorRuntime().wrap(function _callee125$(_context144){while(1)switch(_context144.prev=_context144.next){case 0:_context144.next=2;return this.image.getTransferableImage();case 2:bitmap=_context144.sent;if(bitmap){_context144.next=5;break;}return _context144.abrupt("return",null);case 5:return _context144.abrupt("return",{data:null,width:width,height:height,bitmap:bitmap,interpolate:this.interpolate});case 6:case"end":return _context144.stop();}},_callee125,this);}));return _getImage2.apply(this,arguments);};// ./src/core/evaluator.js\nvar DefaultPartialEvaluatorOptions=Object.freeze({maxImageSize:-1,disableFontFace:false,ignoreErrors:false,isEvalSupported:true,isOffscreenCanvasSupported:false,isImageDecoderSupported:false,canvasMaxAreaInBytes:-1,fontExtraProperties:false,useSystemFonts:true,useWasm:true,useWorkerFetch:true,cMapUrl:null,standardFontDataUrl:null,wasmUrl:null});var PatternType={TILING:1,SHADING:2};var TEXT_CHUNK_BATCH_SIZE=10;var deferred=Promise.resolve();function normalizeBlendMode(value){var parsingArray=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(Array.isArray(value)){var _iterator64=_createForOfIteratorHelper(value),_step64;try{for(_iterator64.s();!(_step64=_iterator64.n()).done;){var val=_step64.value;var maybeBM=normalizeBlendMode(val,true);if(maybeBM){return maybeBM;}}}catch(err){_iterator64.e(err);}finally{_iterator64.f();}warn("Unsupported blend mode Array: ".concat(value));return"source-over";}if(!(value instanceof Name)){if(parsingArray){return null;}return"source-over";}switch(value.name){case"Normal":case"Compatible":return"source-over";case"Multiply":return"multiply";case"Screen":return"screen";case"Overlay":return"overlay";case"Darken":return"darken";case"Lighten":return"lighten";case"ColorDodge":return"color-dodge";case"ColorBurn":return"color-burn";case"HardLight":return"hard-light";case"SoftLight":return"soft-light";case"Difference":return"difference";case"Exclusion":return"exclusion";case"Hue":return"hue";case"Saturation":return"saturation";case"Color":return"color";case"Luminosity":return"luminosity";}if(parsingArray){return null;}warn("Unsupported blend mode: ".concat(value.name));return"source-over";}function addLocallyCachedImageOps(opList,data){var _data$args$;if(data.objId){opList.addDependency(data.objId);}opList.addImageOps(data.fn,data.args,data.optionalContent,data.hasMask);if(data.fn===OPS.paintImageMaskXObject&&((_data$args$=data.args[0])===null||_data$args$===void 0?void 0:_data$args$.count)>0){data.args[0].count++;}}var TimeSlotManager=/*#__PURE__*/function(){function TimeSlotManager(){_classCallCheck(this,TimeSlotManager);this.reset();}return _createClass(TimeSlotManager,[{key:"check",value:function check(){if(++this.checked<TimeSlotManager.CHECK_TIME_EVERY){return false;}this.checked=0;return this.endTime<=Date.now();}},{key:"reset",value:function reset(){this.endTime=Date.now()+TimeSlotManager.TIME_SLOT_DURATION_MS;this.checked=0;}}]);}();_defineProperty(TimeSlotManager,"TIME_SLOT_DURATION_MS",20);_defineProperty(TimeSlotManager,"CHECK_TIME_EVERY",100);var PartialEvaluator=/*#__PURE__*/function(){function PartialEvaluator(_ref57){var xref=_ref57.xref,handler=_ref57.handler,pageIndex=_ref57.pageIndex,idFactory=_ref57.idFactory,fontCache=_ref57.fontCache,builtInCMapCache=_ref57.builtInCMapCache,standardFontDataCache=_ref57.standardFontDataCache,globalImageCache=_ref57.globalImageCache,systemFontCache=_ref57.systemFontCache,_ref57$options=_ref57.options,options=_ref57$options===void 0?null:_ref57$options;_classCallCheck(this,PartialEvaluator);this.xref=xref;this.handler=handler;this.pageIndex=pageIndex;this.idFactory=idFactory;this.fontCache=fontCache;this.builtInCMapCache=builtInCMapCache;this.standardFontDataCache=standardFontDataCache;this.globalImageCache=globalImageCache;this.systemFontCache=systemFontCache;this.options=options||DefaultPartialEvaluatorOptions;this.type3FontRefs=null;this._regionalImageCache=new RegionalImageCache();this._fetchBuiltInCMapBound=this.fetchBuiltInCMap.bind(this);}return _createClass(PartialEvaluator,[{key:"_pdfFunctionFactory",get:function get(){var pdfFunctionFactory=new PDFFunctionFactory({xref:this.xref,isEvalSupported:this.options.isEvalSupported});return shadow(this,"_pdfFunctionFactory",pdfFunctionFactory);}},{key:"parsingType3Font",get:function get(){return!!this.type3FontRefs;}},{key:"clone",value:function clone(){var newOptions=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var newEvaluator=Object.create(this);newEvaluator.options=Object.assign(Object.create(null),this.options,newOptions);return newEvaluator;}},{key:"hasBlendModes",value:function hasBlendModes(resources,nonBlendModesSet){if(!(resources instanceof Dict)){return false;}if(resources.objId&&nonBlendModesSet.has(resources.objId)){return false;}var processed=new RefSet(nonBlendModesSet);if(resources.objId){processed.put(resources.objId);}var nodes=[resources],xref=this.xref;while(nodes.length){var node=nodes.shift();var graphicStates=node.get("ExtGState");if(graphicStates instanceof Dict){var _iterator65=_createForOfIteratorHelper(graphicStates.getRawValues()),_step65;try{for(_iterator65.s();!(_step65=_iterator65.n()).done;){var graphicState=_step65.value;if(graphicState instanceof Ref){if(processed.has(graphicState)){continue;}try{graphicState=xref.fetch(graphicState);}catch(ex){processed.put(graphicState);info("hasBlendModes - ignoring ExtGState: \\"".concat(ex,"\\"."));continue;}}if(!(graphicState instanceof Dict)){continue;}if(graphicState.objId){processed.put(graphicState.objId);}var bm=graphicState.get("BM");if(bm instanceof Name){if(bm.name!=="Normal"){return true;}continue;}if(bm!==undefined&&Array.isArray(bm)){var _iterator66=_createForOfIteratorHelper(bm),_step66;try{for(_iterator66.s();!(_step66=_iterator66.n()).done;){var element=_step66.value;if(element instanceof Name&&element.name!=="Normal"){return true;}}}catch(err){_iterator66.e(err);}finally{_iterator66.f();}}}}catch(err){_iterator65.e(err);}finally{_iterator65.f();}}var xObjects=node.get("XObject");if(!(xObjects instanceof Dict)){continue;}var _iterator67=_createForOfIteratorHelper(xObjects.getRawValues()),_step67;try{for(_iterator67.s();!(_step67=_iterator67.n()).done;){var xObject=_step67.value;if(xObject instanceof Ref){if(processed.has(xObject)){continue;}try{xObject=xref.fetch(xObject);}catch(ex){processed.put(xObject);info("hasBlendModes - ignoring XObject: \\"".concat(ex,"\\"."));continue;}}if(!(xObject instanceof BaseStream)){continue;}if(xObject.dict.objId){processed.put(xObject.dict.objId);}var xResources=xObject.dict.get("Resources");if(!(xResources instanceof Dict)){continue;}if(xResources.objId&&processed.has(xResources.objId)){continue;}nodes.push(xResources);if(xResources.objId){processed.put(xResources.objId);}}}catch(err){_iterator67.e(err);}finally{_iterator67.f();}}var _iterator68=_createForOfIteratorHelper(processed),_step68;try{for(_iterator68.s();!(_step68=_iterator68.n()).done;){var ref=_step68.value;nonBlendModesSet.put(ref);}}catch(err){_iterator68.e(err);}finally{_iterator68.f();}return false;}},{key:"fetchBuiltInCMap",value:function(){var _fetchBuiltInCMap=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee29(name){var cachedData,data;return _regeneratorRuntime().wrap(function _callee29$(_context33){while(1)switch(_context33.prev=_context33.next){case 0:cachedData=this.builtInCMapCache.get(name);if(!cachedData){_context33.next=3;break;}return _context33.abrupt("return",cachedData);case 3:if(!this.options.useWorkerFetch){_context33.next=10;break;}_context33.next=6;return fetchBinaryData("".concat(this.options.cMapUrl).concat(name,".bcmap"));case 6:_context33.t0=_context33.sent;data={cMapData:_context33.t0,isCompressed:true};_context33.next=13;break;case 10:_context33.next=12;return this.handler.sendWithPromise("FetchBinaryData",{type:"cMapReaderFactory",name:name});case 12:data=_context33.sent;case 13:this.builtInCMapCache.set(name,data);return _context33.abrupt("return",data);case 15:case"end":return _context33.stop();}},_callee29,this);}));function fetchBuiltInCMap(_x47){return _fetchBuiltInCMap.apply(this,arguments);}return fetchBuiltInCMap;}()},{key:"fetchStandardFontData",value:function(){var _fetchStandardFontData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee30(name){var cachedData,standardFontNameToFileName,filename,data;return _regeneratorRuntime().wrap(function _callee30$(_context34){while(1)switch(_context34.prev=_context34.next){case 0:cachedData=this.standardFontDataCache.get(name);if(!cachedData){_context34.next=3;break;}return _context34.abrupt("return",new Stream(cachedData));case 3:if(!(this.options.useSystemFonts&&name!=="Symbol"&&name!=="ZapfDingbats")){_context34.next=5;break;}return _context34.abrupt("return",null);case 5:standardFontNameToFileName=getFontNameToFileMap(),filename=standardFontNameToFileName[name];_context34.prev=6;if(!this.options.useWorkerFetch){_context34.next=13;break;}_context34.next=10;return fetchBinaryData("".concat(this.options.standardFontDataUrl).concat(filename));case 10:data=_context34.sent;_context34.next=16;break;case 13:_context34.next=15;return this.handler.sendWithPromise("FetchBinaryData",{type:"standardFontDataFactory",filename:filename});case 15:data=_context34.sent;case 16:_context34.next=22;break;case 18:_context34.prev=18;_context34.t0=_context34["catch"](6);warn(_context34.t0);return _context34.abrupt("return",null);case 22:this.standardFontDataCache.set(name,data);return _context34.abrupt("return",new Stream(data));case 24:case"end":return _context34.stop();}},_callee30,this,[[6,18]]);}));function fetchStandardFontData(_x48){return _fetchStandardFontData.apply(this,arguments);}return fetchStandardFontData;}()},{key:"buildFormXObject",value:function(){var _buildFormXObject=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee31(resources,xobj,smask,operatorList,task,initialState,localColorSpaceCache){var dict,matrix,bbox,optionalContent,groupOptions,group,groupSubtype,colorSpace,cs,cachedColorSpace,args;return _regeneratorRuntime().wrap(function _callee31$(_context35){while(1)switch(_context35.prev=_context35.next){case 0:dict=xobj.dict;matrix=lookupMatrix(dict.getArray("Matrix"),null);bbox=lookupNormalRect(dict.getArray("BBox"),null);if(!dict.has("OC")){_context35.next=7;break;}_context35.next=6;return this.parseMarkedContentProps(dict.get("OC"),resources);case 6:optionalContent=_context35.sent;case 7:if(optionalContent!==undefined){operatorList.addOp(OPS.beginMarkedContentProps,["OC",optionalContent]);}group=dict.get("Group");if(!group){_context35.next=28;break;}groupOptions={matrix:matrix,bbox:bbox,smask:smask,isolated:false,knockout:false};groupSubtype=group.get("S");colorSpace=null;if(!isName(groupSubtype,"Transparency")){_context35.next=26;break;}groupOptions.isolated=group.get("I")||false;groupOptions.knockout=group.get("K")||false;if(!group.has("CS")){_context35.next=26;break;}cs=group.getRaw("CS");cachedColorSpace=ColorSpace.getCached(cs,this.xref,localColorSpaceCache);if(!cachedColorSpace){_context35.next=23;break;}colorSpace=cachedColorSpace;_context35.next=26;break;case 23:_context35.next=25;return this.parseColorSpace({cs:cs,resources:resources,localColorSpaceCache:localColorSpaceCache});case 25:colorSpace=_context35.sent;case 26:if(smask!==null&&smask!==void 0&&smask.backdrop){colorSpace||(colorSpace=ColorSpace.singletons.rgb);smask.backdrop=colorSpace.getRgb(smask.backdrop,0);}operatorList.addOp(OPS.beginGroup,[groupOptions]);case 28:args=group?[matrix,null]:[matrix,bbox];operatorList.addOp(OPS.paintFormXObjectBegin,args);_context35.next=32;return this.getOperatorList({stream:xobj,task:task,resources:dict.get("Resources")||resources,operatorList:operatorList,initialState:initialState});case 32:operatorList.addOp(OPS.paintFormXObjectEnd,[]);if(group){operatorList.addOp(OPS.endGroup,[groupOptions]);}if(optionalContent!==undefined){operatorList.addOp(OPS.endMarkedContent,[]);}case 35:case"end":return _context35.stop();}},_callee31,this);}));function buildFormXObject(_x49,_x50,_x51,_x52,_x53,_x54,_x55){return _buildFormXObject.apply(this,arguments);}return buildFormXObject;}()},{key:"_sendImgData",value:function _sendImgData(objId,imgData){var cacheGlobally=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var transfers=imgData?[imgData.bitmap||imgData.data.buffer]:null;if(this.parsingType3Font||cacheGlobally){return this.handler.send("commonobj",[objId,"Image",imgData],transfers);}return this.handler.send("obj",[objId,this.pageIndex,"Image",imgData],transfers);}},{key:"buildPaintImageXObject",value:function(){var _buildPaintImageXObject=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee33(_ref58){var _this48=this;var resources,image,_ref58$isInline,isInline,operatorList,cacheKey,localImageCache,localColorSpaceCache,dict,imageRef,w,h,maxImageSize,msg,optionalContent,imageMask,imgData,args,interpolate,bitStrideLength,imgArray,decode,cacheData,_cacheData,_objId,_cacheData2,SMALL_IMAGE_DIMENSIONS,hasMask,imageObj,_msg,objId,cacheGlobally,localLength,_cacheData3;return _regeneratorRuntime().wrap(function _callee33$(_context37){while(1)switch(_context37.prev=_context37.next){case 0:resources=_ref58.resources,image=_ref58.image,_ref58$isInline=_ref58.isInline,isInline=_ref58$isInline===void 0?false:_ref58$isInline,operatorList=_ref58.operatorList,cacheKey=_ref58.cacheKey,localImageCache=_ref58.localImageCache,localColorSpaceCache=_ref58.localColorSpaceCache;dict=image.dict;imageRef=dict.objId;w=dict.get("W","Width");h=dict.get("H","Height");if(!(!(w&&typeof w==="number")||!(h&&typeof h==="number"))){_context37.next=8;break;}warn("Image dimensions are missing, or not numbers.");return _context37.abrupt("return");case 8:maxImageSize=this.options.maxImageSize;if(!(maxImageSize!==-1&&w*h>maxImageSize)){_context37.next=15;break;}msg="Image exceeded maximum allowed size and was removed.";if(!this.options.ignoreErrors){_context37.next=14;break;}warn(msg);return _context37.abrupt("return");case 14:throw new Error(msg);case 15:if(!dict.has("OC")){_context37.next=19;break;}_context37.next=18;return this.parseMarkedContentProps(dict.get("OC"),resources);case 18:optionalContent=_context37.sent;case 19:imageMask=dict.get("IM","ImageMask")||false;if(!imageMask){_context37.next=47;break;}interpolate=dict.get("I","Interpolate");bitStrideLength=w+7>>3;imgArray=image.getBytes(bitStrideLength*h);decode=dict.getArray("D","Decode");if(!this.parsingType3Font){_context37.next=32;break;}imgData=PDFImage.createRawMask({imgArray:imgArray,width:w,height:h,imageIsFromDecodeStream:image instanceof DecodeStream,inverseDecode:(decode===null||decode===void 0?void 0:decode[0])>0,interpolate:interpolate});imgData.cached=!!cacheKey;args=[imgData];operatorList.addImageOps(OPS.paintImageMaskXObject,args,optionalContent);if(cacheKey){cacheData={fn:OPS.paintImageMaskXObject,args:args,optionalContent:optionalContent};localImageCache.set(cacheKey,imageRef,cacheData);if(imageRef){this._regionalImageCache.set(null,imageRef,cacheData);}}return _context37.abrupt("return");case 32:_context37.next=34;return PDFImage.createMask({imgArray:imgArray,width:w,height:h,imageIsFromDecodeStream:image instanceof DecodeStream,inverseDecode:(decode===null||decode===void 0?void 0:decode[0])>0,interpolate:interpolate,isOffscreenCanvasSupported:this.options.isOffscreenCanvasSupported});case 34:imgData=_context37.sent;if(!imgData.isSingleOpaquePixel){_context37.next=39;break;}operatorList.addImageOps(OPS.paintSolidColorImageMask,[],optionalContent);if(cacheKey){_cacheData={fn:OPS.paintSolidColorImageMask,args:[],optionalContent:optionalContent};localImageCache.set(cacheKey,imageRef,_cacheData);if(imageRef){this._regionalImageCache.set(null,imageRef,_cacheData);}}return _context37.abrupt("return");case 39:_objId="mask_".concat(this.idFactory.createObjId());operatorList.addDependency(_objId);imgData.dataLen=imgData.bitmap?imgData.width*imgData.height*4:imgData.data.length;this._sendImgData(_objId,imgData);args=[{data:_objId,width:imgData.width,height:imgData.height,interpolate:imgData.interpolate,count:1}];operatorList.addImageOps(OPS.paintImageMaskXObject,args,optionalContent);if(cacheKey){_cacheData2={objId:_objId,fn:OPS.paintImageMaskXObject,args:args,optionalContent:optionalContent};localImageCache.set(cacheKey,imageRef,_cacheData2);if(imageRef){this._regionalImageCache.set(null,imageRef,_cacheData2);}}return _context37.abrupt("return");case 47:SMALL_IMAGE_DIMENSIONS=200;hasMask=dict.has("SMask")||dict.has("Mask");if(!(isInline&&w+h<SMALL_IMAGE_DIMENSIONS&&!hasMask)){_context37.next=66;break;}_context37.prev=50;imageObj=new PDFImage({xref:this.xref,res:resources,image:image,isInline:isInline,pdfFunctionFactory:this._pdfFunctionFactory,localColorSpaceCache:localColorSpaceCache});_context37.next=54;return imageObj.createImageData(true,false);case 54:imgData=_context37.sent;operatorList.isOffscreenCanvasSupported=this.options.isOffscreenCanvasSupported;operatorList.addImageOps(OPS.paintInlineImageXObject,[imgData],optionalContent);_context37.next=65;break;case 59:_context37.prev=59;_context37.t0=_context37["catch"](50);_msg="Unable to decode inline image: \\"".concat(_context37.t0,"\\".");if(this.options.ignoreErrors){_context37.next=64;break;}throw new Error(_msg);case 64:warn(_msg);case 65:return _context37.abrupt("return");case 66:objId="img_".concat(this.idFactory.createObjId()),cacheGlobally=false;if(this.parsingType3Font){objId="".concat(this.idFactory.getDocId(),"_type3_").concat(objId);}else if(cacheKey&&imageRef){cacheGlobally=this.globalImageCache.shouldCache(imageRef,this.pageIndex);if(cacheGlobally){assert(!isInline,"Cannot cache an inline image globally.");objId="".concat(this.idFactory.getDocId(),"_").concat(objId);}}operatorList.addDependency(objId);args=[objId,w,h];operatorList.addImageOps(OPS.paintImageXObject,args,optionalContent,hasMask);if(!cacheGlobally){_context37.next=84;break;}if(!this.globalImageCache.hasDecodeFailed(imageRef)){_context37.next=76;break;}this.globalImageCache.setData(imageRef,{objId:objId,fn:OPS.paintImageXObject,args:args,optionalContent:optionalContent,hasMask:hasMask,byteSize:0});this._sendImgData(objId,null,cacheGlobally);return _context37.abrupt("return");case 76:if(!(w*h>250000||hasMask)){_context37.next=84;break;}_context37.next=79;return this.handler.sendWithPromise("commonobj",[objId,"CopyLocalImage",{imageRef:imageRef}]);case 79:localLength=_context37.sent;if(!localLength){_context37.next=84;break;}this.globalImageCache.setData(imageRef,{objId:objId,fn:OPS.paintImageXObject,args:args,optionalContent:optionalContent,hasMask:hasMask,byteSize:0});this.globalImageCache.addByteSize(imageRef,localLength);return _context37.abrupt("return");case 84:PDFImage.buildImage({xref:this.xref,res:resources,image:image,isInline:isInline,pdfFunctionFactory:this._pdfFunctionFactory,localColorSpaceCache:localColorSpaceCache}).then(/*#__PURE__*/function(){var _ref59=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee32(imageObj){return _regeneratorRuntime().wrap(function _callee32$(_context36){while(1)switch(_context36.prev=_context36.next){case 0:_context36.next=2;return imageObj.createImageData(false,_this48.options.isOffscreenCanvasSupported);case 2:imgData=_context36.sent;imgData.dataLen=imgData.bitmap?imgData.width*imgData.height*4:imgData.data.length;imgData.ref=imageRef;if(cacheGlobally){_this48.globalImageCache.addByteSize(imageRef,imgData.dataLen);}return _context36.abrupt("return",_this48._sendImgData(objId,imgData,cacheGlobally));case 7:case"end":return _context36.stop();}},_callee32);}));return function(_x57){return _ref59.apply(this,arguments);};}())["catch"](function(reason){warn("Unable to decode image \\"".concat(objId,"\\": \\"").concat(reason,"\\"."));if(imageRef){_this48.globalImageCache.addDecodeFailed(imageRef);}return _this48._sendImgData(objId,null,cacheGlobally);});if(cacheKey){_cacheData3={objId:objId,fn:OPS.paintImageXObject,args:args,optionalContent:optionalContent,hasMask:hasMask};localImageCache.set(cacheKey,imageRef,_cacheData3);if(imageRef){this._regionalImageCache.set(null,imageRef,_cacheData3);if(cacheGlobally){this.globalImageCache.setData(imageRef,{objId:objId,fn:OPS.paintImageXObject,args:args,optionalContent:optionalContent,hasMask:hasMask,byteSize:0});}}}case 86:case"end":return _context37.stop();}},_callee33,this,[[50,59]]);}));function buildPaintImageXObject(_x56){return _buildPaintImageXObject.apply(this,arguments);}return buildPaintImageXObject;}()},{key:"handleSMask",value:function handleSMask(smask,resources,operatorList,task,stateManager,localColorSpaceCache){var smaskContent=smask.get("G");var smaskOptions={subtype:smask.get("S").name,backdrop:smask.get("BC")};var transferObj=smask.get("TR");if(isPDFFunction(transferObj)){var transferFn=this._pdfFunctionFactory.create(transferObj);var transferMap=new Uint8Array(256);var tmp=new Float32Array(1);for(var i=0;i<256;i++){tmp[0]=i/255;transferFn(tmp,0,tmp,0);transferMap[i]=tmp[0]*255|0;}smaskOptions.transferMap=transferMap;}return this.buildFormXObject(resources,smaskContent,smaskOptions,operatorList,task,stateManager.state.clone(),localColorSpaceCache);}},{key:"handleTransferFunction",value:function handleTransferFunction(tr){var transferArray;if(Array.isArray(tr)){transferArray=tr;}else if(isPDFFunction(tr)){transferArray=[tr];}else{return null;}var transferMaps=[];var numFns=0,numEffectfulFns=0;var _iterator69=_createForOfIteratorHelper(transferArray),_step69;try{for(_iterator69.s();!(_step69=_iterator69.n()).done;){var entry=_step69.value;var transferObj=this.xref.fetchIfRef(entry);numFns++;if(isName(transferObj,"Identity")){transferMaps.push(null);continue;}else if(!isPDFFunction(transferObj)){return null;}var transferFn=this._pdfFunctionFactory.create(transferObj);var transferMap=new Uint8Array(256),tmp=new Float32Array(1);for(var j=0;j<256;j++){tmp[0]=j/255;transferFn(tmp,0,tmp,0);transferMap[j]=tmp[0]*255|0;}transferMaps.push(transferMap);numEffectfulFns++;}}catch(err){_iterator69.e(err);}finally{_iterator69.f();}if(!(numFns===1||numFns===4)){return null;}if(numEffectfulFns===0){return null;}return transferMaps;}},{key:"handleTilingType",value:function handleTilingType(fn,color,resources,pattern,patternDict,operatorList,task,localTilingPatternCache){var _this49=this;var tilingOpList=new OperatorList();var patternResources=Dict.merge({xref:this.xref,dictArray:[patternDict.get("Resources"),resources]});return this.getOperatorList({stream:pattern,task:task,resources:patternResources,operatorList:tilingOpList}).then(function(){var operatorListIR=tilingOpList.getIR();var tilingPatternIR=getTilingPatternIR(operatorListIR,patternDict,color);operatorList.addDependencies(tilingOpList.dependencies);operatorList.addOp(fn,tilingPatternIR);if(patternDict.objId){localTilingPatternCache.set(null,patternDict.objId,{operatorListIR:operatorListIR,dict:patternDict});}})["catch"](function(reason){if(reason instanceof AbortException){return;}if(_this49.options.ignoreErrors){warn("handleTilingType - ignoring pattern: \\"".concat(reason,"\\"."));return;}throw reason;});}},{key:"handleSetFont",value:function(){var _handleSetFont=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee34(resources,fontArgs,fontRef,operatorList,task,state){var fallbackFontDict,cssFontInfo,fontName,translated,_args38=arguments;return _regeneratorRuntime().wrap(function _callee34$(_context38){while(1)switch(_context38.prev=_context38.next){case 0:fallbackFontDict=_args38.length>6&&_args38[6]!==undefined?_args38[6]:null;cssFontInfo=_args38.length>7&&_args38[7]!==undefined?_args38[7]:null;fontName=(fontArgs===null||fontArgs===void 0?void 0:fontArgs[0])instanceof Name?fontArgs[0].name:null;_context38.next=5;return this.loadFont(fontName,fontRef,resources,fallbackFontDict,cssFontInfo);case 5:translated=_context38.sent;if(!translated.font.isType3Font){_context38.next=16;break;}_context38.prev=7;_context38.next=10;return translated.loadType3Data(this,resources,task);case 10:operatorList.addDependencies(translated.type3Dependencies);_context38.next=16;break;case 13:_context38.prev=13;_context38.t0=_context38["catch"](7);translated=new TranslatedFont({loadedName:"g_font_error",font:new ErrorFont("Type3 font load error: ".concat(_context38.t0)),dict:translated.font});case 16:state.font=translated.font;translated.send(this.handler);return _context38.abrupt("return",translated.loadedName);case 19:case"end":return _context38.stop();}},_callee34,this,[[7,13]]);}));function handleSetFont(_x58,_x59,_x60,_x61,_x62,_x63){return _handleSetFont.apply(this,arguments);}return handleSetFont;}()},{key:"handleText",value:function handleText(chars,state){var font=state.font;var glyphs=font.charsToGlyphs(chars);if(font.data){var isAddToPathSet=!!(state.textRenderingMode&TextRenderingMode.ADD_TO_PATH_FLAG);if(isAddToPathSet||state.fillColorSpace.name==="Pattern"||font.disableFontFace){PartialEvaluator.buildFontPaths(font,glyphs,this.handler,this.options);}}return glyphs;}},{key:"ensureStateFont",value:function ensureStateFont(state){if(state.font){return;}var reason=new FormatError("Missing setFont (Tf) operator before text rendering operator.");if(this.options.ignoreErrors){warn("ensureStateFont: \\"".concat(reason,"\\"."));return;}throw reason;}},{key:"setGState",value:function(){var _setGState=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee35(_ref60){var _this50=this;var resources,gState,operatorList,cacheKey,task,stateManager,localGStateCache,localColorSpaceCache,gStateRef,isSimpleGState,gStateObj,promise,_iterator70,_step70,_loop;return _regeneratorRuntime().wrap(function _callee35$(_context40){while(1)switch(_context40.prev=_context40.next){case 0:resources=_ref60.resources,gState=_ref60.gState,operatorList=_ref60.operatorList,cacheKey=_ref60.cacheKey,task=_ref60.task,stateManager=_ref60.stateManager,localGStateCache=_ref60.localGStateCache,localColorSpaceCache=_ref60.localColorSpaceCache;gStateRef=gState.objId;isSimpleGState=true;gStateObj=[];promise=Promise.resolve();_iterator70=_createForOfIteratorHelper(gState);_context40.prev=6;_loop=/*#__PURE__*/_regeneratorRuntime().mark(function _loop(){var _step70$value,key,value,transferMaps;return _regeneratorRuntime().wrap(function _loop$(_context39){while(1)switch(_context39.prev=_context39.next){case 0:_step70$value=_slicedToArray(_step70.value,2),key=_step70$value[0],value=_step70$value[1];_context39.t0=key;_context39.next=_context39.t0==="Type"?4:_context39.t0==="LW"?5:_context39.t0==="LC"?5:_context39.t0==="LJ"?5:_context39.t0==="ML"?5:_context39.t0==="D"?5:_context39.t0==="RI"?5:_context39.t0==="FL"?5:_context39.t0==="CA"?5:_context39.t0==="ca"?5:_context39.t0==="Font"?7:_context39.t0==="BM"?10:_context39.t0==="SMask"?12:_context39.t0==="TR"?17:_context39.t0==="OP"?20:_context39.t0==="op"?20:_context39.t0==="OPM"?20:_context39.t0==="BG"?20:_context39.t0==="BG2"?20:_context39.t0==="UCR"?20:_context39.t0==="UCR2"?20:_context39.t0==="TR2"?20:_context39.t0==="HT"?20:_context39.t0==="SM"?20:_context39.t0==="SA"?20:_context39.t0==="AIS"?20:_context39.t0==="TK"?20:22;break;case 4:return _context39.abrupt("break",24);case 5:gStateObj.push([key,value]);return _context39.abrupt("break",24);case 7:isSimpleGState=false;promise=promise.then(function(){return _this50.handleSetFont(resources,null,value[0],operatorList,task,stateManager.state).then(function(loadedName){operatorList.addDependency(loadedName);gStateObj.push([key,[loadedName,value[1]]]);});});return _context39.abrupt("break",24);case 10:gStateObj.push([key,normalizeBlendMode(value)]);return _context39.abrupt("break",24);case 12:if(!isName(value,"None")){_context39.next=15;break;}gStateObj.push([key,false]);return _context39.abrupt("break",24);case 15:if(value instanceof Dict){isSimpleGState=false;promise=promise.then(function(){return _this50.handleSMask(value,resources,operatorList,task,stateManager,localColorSpaceCache);});gStateObj.push([key,true]);}else{warn("Unsupported SMask type");}return _context39.abrupt("break",24);case 17:transferMaps=_this50.handleTransferFunction(value);gStateObj.push([key,transferMaps]);return _context39.abrupt("break",24);case 20:info("graphic state operator "+key);return _context39.abrupt("break",24);case 22:info("Unknown graphic state operator "+key);return _context39.abrupt("break",24);case 24:case"end":return _context39.stop();}},_loop);});_iterator70.s();case 9:if((_step70=_iterator70.n()).done){_context40.next=13;break;}return _context40.delegateYield(_loop(),"t0",11);case 11:_context40.next=9;break;case 13:_context40.next=18;break;case 15:_context40.prev=15;_context40.t1=_context40["catch"](6);_iterator70.e(_context40.t1);case 18:_context40.prev=18;_iterator70.f();return _context40.finish(18);case 21:_context40.next=23;return promise;case 23:if(gStateObj.length>0){operatorList.addOp(OPS.setGState,[gStateObj]);}if(isSimpleGState){localGStateCache.set(cacheKey,gStateRef,gStateObj);}case 25:case"end":return _context40.stop();}},_callee35,null,[[6,15,18,21]]);}));function setGState(_x64){return _setGState.apply(this,arguments);}return setGState;}()},{key:"loadFont",value:function loadFont(fontName,font,resources){var _fontID;var fallbackFontDict=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var cssFontInfo=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;var errorFont=/*#__PURE__*/function(){var _ref61=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee36(){return _regeneratorRuntime().wrap(function _callee36$(_context41){while(1)switch(_context41.prev=_context41.next){case 0:return _context41.abrupt("return",new TranslatedFont({loadedName:"g_font_error",font:new ErrorFont("Font \\"".concat(fontName,"\\" is not available.")),dict:font}));case 1:case"end":return _context41.stop();}},_callee36);}));return function errorFont(){return _ref61.apply(this,arguments);};}();var fontRef;if(font){if(font instanceof Ref){fontRef=font;}}else{var fontRes=resources.get("Font");if(fontRes){fontRef=fontRes.getRaw(fontName);}}if(fontRef){var _this$type3FontRefs;if((_this$type3FontRefs=this.type3FontRefs)!==null&&_this$type3FontRefs!==void 0&&_this$type3FontRefs.has(fontRef)){return errorFont();}if(this.fontCache.has(fontRef)){return this.fontCache.get(fontRef);}try{font=this.xref.fetchIfRef(fontRef);}catch(ex){warn("loadFont - lookup failed: \\"".concat(ex,"\\"."));}}if(!(font instanceof Dict)){if(!this.options.ignoreErrors&&!this.parsingType3Font){warn("Font \\"".concat(fontName,"\\" is not available."));return errorFont();}warn("Font \\"".concat(fontName,"\\" is not available -- attempting to fallback to a default font."));font=fallbackFontDict||PartialEvaluator.fallbackFontDict;}if(font.cacheKey&&this.fontCache.has(font.cacheKey)){return this.fontCache.get(font.cacheKey);}var _Promise$withResolver2=Promise.withResolvers(),promise=_Promise$withResolver2.promise,resolve=_Promise$withResolver2.resolve;var preEvaluatedFont;try{preEvaluatedFont=this.preEvaluateFont(font);preEvaluatedFont.cssFontInfo=cssFontInfo;}catch(reason){warn("loadFont - preEvaluateFont failed: \\"".concat(reason,"\\"."));return errorFont();}var _preEvaluatedFont=preEvaluatedFont,descriptor=_preEvaluatedFont.descriptor,hash=_preEvaluatedFont.hash;var fontRefIsRef=fontRef instanceof Ref;var fontID;if(hash&&descriptor instanceof Dict){var _fontAliases=descriptor.fontAliases||(descriptor.fontAliases=Object.create(null));if(_fontAliases[hash]){var aliasFontRef=_fontAliases[hash].aliasRef;if(fontRefIsRef&&aliasFontRef&&this.fontCache.has(aliasFontRef)){this.fontCache.putAlias(fontRef,aliasFontRef);return this.fontCache.get(fontRef);}}else{_fontAliases[hash]={fontID:this.idFactory.createFontId()};}if(fontRefIsRef){_fontAliases[hash].aliasRef=fontRef;}fontID=_fontAliases[hash].fontID;}else{fontID=this.idFactory.createFontId();}assert((_fontID=fontID)===null||_fontID===void 0?void 0:_fontID.startsWith("f"),\'The "fontID" must be (correctly) defined.\');if(fontRefIsRef){this.fontCache.put(fontRef,promise);}else{font.cacheKey="cacheKey_".concat(fontID);this.fontCache.put(font.cacheKey,promise);}font.loadedName="".concat(this.idFactory.getDocId(),"_").concat(fontID);this.translateFont(preEvaluatedFont).then(function(translatedFont){resolve(new TranslatedFont({loadedName:font.loadedName,font:translatedFont,dict:font}));})["catch"](function(reason){warn("loadFont - translateFont failed: \\"".concat(reason,"\\"."));resolve(new TranslatedFont({loadedName:font.loadedName,font:new ErrorFont(reason instanceof Error?reason.message:reason),dict:font}));});return promise;}},{key:"buildPath",value:function buildPath(operatorList,fn,args){var parsingText=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var lastIndex=operatorList.length-1;if(!args){args=[];}if(lastIndex<0||operatorList.fnArray[lastIndex]!==OPS.constructPath){if(parsingText){warn("Encountered path operator \\"".concat(fn,"\\" inside of a text object."));operatorList.addOp(OPS.save,null);}var minMax;switch(fn){case OPS.rectangle:var x=args[0]+args[2];var y=args[1]+args[3];minMax=[Math.min(args[0],x),Math.min(args[1],y),Math.max(args[0],x),Math.max(args[1],y)];break;case OPS.moveTo:case OPS.lineTo:minMax=[args[0],args[1],args[0],args[1]];break;default:minMax=[Infinity,Infinity,-Infinity,-Infinity];break;}operatorList.addOp(OPS.constructPath,[[fn],args,minMax]);if(parsingText){operatorList.addOp(OPS.restore,null);}}else{var _opArgs$;var opArgs=operatorList.argsArray[lastIndex];opArgs[0].push(fn);(_opArgs$=opArgs[1]).push.apply(_opArgs$,_toConsumableArray(args));var _minMax=opArgs[2];switch(fn){case OPS.rectangle:var _x65=args[0]+args[2];var _y2=args[1]+args[3];_minMax[0]=Math.min(_minMax[0],args[0],_x65);_minMax[1]=Math.min(_minMax[1],args[1],_y2);_minMax[2]=Math.max(_minMax[2],args[0],_x65);_minMax[3]=Math.max(_minMax[3],args[1],_y2);break;case OPS.moveTo:case OPS.lineTo:_minMax[0]=Math.min(_minMax[0],args[0]);_minMax[1]=Math.min(_minMax[1],args[1]);_minMax[2]=Math.max(_minMax[2],args[0]);_minMax[3]=Math.max(_minMax[3],args[1]);break;}}}},{key:"parseColorSpace",value:function parseColorSpace(_ref62){var _this51=this;var cs=_ref62.cs,resources=_ref62.resources,localColorSpaceCache=_ref62.localColorSpaceCache;return ColorSpace.parseAsync({cs:cs,xref:this.xref,resources:resources,pdfFunctionFactory:this._pdfFunctionFactory,localColorSpaceCache:localColorSpaceCache})["catch"](function(reason){if(reason instanceof AbortException){return null;}if(_this51.options.ignoreErrors){warn("parseColorSpace - ignoring ColorSpace: \\"".concat(reason,"\\"."));return null;}throw reason;});}},{key:"parseShading",value:function parseShading(_ref63){var shading=_ref63.shading,resources=_ref63.resources,localColorSpaceCache=_ref63.localColorSpaceCache,localShadingPatternCache=_ref63.localShadingPatternCache;var id=localShadingPatternCache.get(shading);if(id){return id;}var patternIR;try{var shadingFill=Pattern.parseShading(shading,this.xref,resources,this._pdfFunctionFactory,localColorSpaceCache);patternIR=shadingFill.getIR();}catch(reason){if(reason instanceof AbortException){return null;}if(this.options.ignoreErrors){warn("parseShading - ignoring shading: \\"".concat(reason,"\\"."));localShadingPatternCache.set(shading,null);return null;}throw reason;}id="pattern_".concat(this.idFactory.createObjId());if(this.parsingType3Font){id="".concat(this.idFactory.getDocId(),"_type3_").concat(id);}localShadingPatternCache.set(shading,id);if(this.parsingType3Font){this.handler.send("commonobj",[id,"Pattern",patternIR]);}else{this.handler.send("obj",[id,this.pageIndex,"Pattern",patternIR]);}return id;}},{key:"handleColorN",value:function handleColorN(operatorList,fn,args,cs,patterns,resources,task,localColorSpaceCache,localTilingPatternCache,localShadingPatternCache){var patternName=args.pop();if(patternName instanceof Name){var rawPattern=patterns.getRaw(patternName.name);var localTilingPattern=rawPattern instanceof Ref&&localTilingPatternCache.getByRef(rawPattern);if(localTilingPattern){try{var color=cs.base?cs.base.getRgb(args,0):null;var tilingPatternIR=getTilingPatternIR(localTilingPattern.operatorListIR,localTilingPattern.dict,color);operatorList.addOp(fn,tilingPatternIR);return undefined;}catch(_unused9){}}var pattern=this.xref.fetchIfRef(rawPattern);if(pattern){var dict=pattern instanceof BaseStream?pattern.dict:pattern;var typeNum=dict.get("PatternType");if(typeNum===PatternType.TILING){var _color=cs.base?cs.base.getRgb(args,0):null;return this.handleTilingType(fn,_color,resources,pattern,dict,operatorList,task,localTilingPatternCache);}else if(typeNum===PatternType.SHADING){var shading=dict.get("Shading");var objId=this.parseShading({shading:shading,resources:resources,localColorSpaceCache:localColorSpaceCache,localShadingPatternCache:localShadingPatternCache});if(objId){var matrix=lookupMatrix(dict.getArray("Matrix"),null);operatorList.addOp(fn,["Shading",objId,matrix]);}return undefined;}throw new FormatError("Unknown PatternType: ".concat(typeNum));}}throw new FormatError("Unknown PatternName: ".concat(patternName));}},{key:"_parseVisibilityExpression",value:function _parseVisibilityExpression(array,nestingCounter,currentResult){var MAX_NESTING=10;if(++nestingCounter>MAX_NESTING){warn("Visibility expression is too deeply nested");return;}var length=array.length;var operator=this.xref.fetchIfRef(array[0]);if(length<2||!(operator instanceof Name)){warn("Invalid visibility expression");return;}switch(operator.name){case"And":case"Or":case"Not":currentResult.push(operator.name);break;default:warn("Invalid operator ".concat(operator.name," in visibility expression"));return;}for(var i=1;i<length;i++){var raw=array[i];var object=this.xref.fetchIfRef(raw);if(Array.isArray(object)){var nestedResult=[];currentResult.push(nestedResult);this._parseVisibilityExpression(object,nestingCounter,nestedResult);}else if(raw instanceof Ref){currentResult.push(raw.toString());}}}},{key:"parseMarkedContentProps",value:function(){var _parseMarkedContentProps=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee37(contentProperties,resources){var _optionalContent$get;var optionalContent,properties,optionalContentType,expression,result,optionalContentGroups,groupIds,_iterator71,_step71,ocg;return _regeneratorRuntime().wrap(function _callee37$(_context42){while(1)switch(_context42.prev=_context42.next){case 0:if(!(contentProperties instanceof Name)){_context42.next=5;break;}properties=resources.get("Properties");optionalContent=properties.get(contentProperties.name);_context42.next=10;break;case 5:if(!(contentProperties instanceof Dict)){_context42.next=9;break;}optionalContent=contentProperties;_context42.next=10;break;case 9:throw new FormatError("Optional content properties malformed.");case 10:optionalContentType=(_optionalContent$get=optionalContent.get("Type"))===null||_optionalContent$get===void 0?void 0:_optionalContent$get.name;if(!(optionalContentType==="OCG")){_context42.next=15;break;}return _context42.abrupt("return",{type:optionalContentType,id:optionalContent.objId});case 15:if(!(optionalContentType==="OCMD")){_context42.next=31;break;}expression=optionalContent.get("VE");if(!Array.isArray(expression)){_context42.next=22;break;}result=[];this._parseVisibilityExpression(expression,0,result);if(!(result.length>0)){_context42.next=22;break;}return _context42.abrupt("return",{type:"OCMD",expression:result});case 22:optionalContentGroups=optionalContent.get("OCGs");if(!(Array.isArray(optionalContentGroups)||optionalContentGroups instanceof Dict)){_context42.next=29;break;}groupIds=[];if(Array.isArray(optionalContentGroups)){_iterator71=_createForOfIteratorHelper(optionalContentGroups);try{for(_iterator71.s();!(_step71=_iterator71.n()).done;){ocg=_step71.value;groupIds.push(ocg.toString());}}catch(err){_iterator71.e(err);}finally{_iterator71.f();}}else{groupIds.push(optionalContentGroups.objId);}return _context42.abrupt("return",{type:optionalContentType,ids:groupIds,policy:optionalContent.get("P")instanceof Name?optionalContent.get("P").name:null,expression:null});case 29:if(!(optionalContentGroups instanceof Ref)){_context42.next=31;break;}return _context42.abrupt("return",{type:optionalContentType,id:optionalContentGroups.toString()});case 31:return _context42.abrupt("return",null);case 32:case"end":return _context42.stop();}},_callee37,this);}));function parseMarkedContentProps(_x66,_x67){return _parseMarkedContentProps.apply(this,arguments);}return parseMarkedContentProps;}()},{key:"getOperatorList",value:function getOperatorList(_ref64){var _this52=this;var stream=_ref64.stream,task=_ref64.task,resources=_ref64.resources,operatorList=_ref64.operatorList,_ref64$initialState=_ref64.initialState,initialState=_ref64$initialState===void 0?null:_ref64$initialState,_ref64$fallbackFontDi=_ref64.fallbackFontDict,fallbackFontDict=_ref64$fallbackFontDi===void 0?null:_ref64$fallbackFontDi;resources||(resources=Dict.empty);initialState||(initialState=new EvalState());if(!operatorList){throw new Error(\'getOperatorList: missing "operatorList" parameter\');}var self=this;var xref=this.xref;var parsingText=false;var localImageCache=new LocalImageCache();var localColorSpaceCache=new LocalColorSpaceCache();var localGStateCache=new LocalGStateCache();var localTilingPatternCache=new LocalTilingPatternCache();var localShadingPatternCache=new Map();var xobjs=resources.get("XObject")||Dict.empty;var patterns=resources.get("Pattern")||Dict.empty;var stateManager=new StateManager(initialState);var preprocessor=new EvaluatorPreprocessor(stream,xref,stateManager);var timeSlotManager=new TimeSlotManager();function closePendingRestoreOPS(argument){for(var i=0,ii=preprocessor.savedStatesDepth;i<ii;i++){operatorList.addOp(OPS.restore,[]);}}return new Promise(function promiseBody(resolve,reject){var next=function next(promise){Promise.all([promise,operatorList.ready]).then(function(){try{promiseBody(resolve,reject);}catch(ex){reject(ex);}},reject);};task.ensureNotTerminated();timeSlotManager.reset();var operation={};var stop,i,ii,cs,name,isValidName;var _loop2=function _loop2(){operation.args=null;if(!preprocessor.read(operation)){return 0;// break\n}var args=operation.args;var fn=operation.fn;switch(fn|0){case OPS.paintXObject:isValidName=args[0]instanceof Name;name=args[0].name;if(isValidName){var localImage=localImageCache.getByName(name);if(localImage){addLocallyCachedImageOps(operatorList,localImage);args=null;return 1;// continue\n}}next(new Promise(function(resolveXObject,rejectXObject){if(!isValidName){throw new FormatError("XObject must be referred to by name.");}var xobj=xobjs.getRaw(name);if(xobj instanceof Ref){var _localImage=localImageCache.getByRef(xobj)||self._regionalImageCache.getByRef(xobj);if(_localImage){addLocallyCachedImageOps(operatorList,_localImage);resolveXObject();return;}var globalImage=self.globalImageCache.getData(xobj,self.pageIndex);if(globalImage){operatorList.addDependency(globalImage.objId);operatorList.addImageOps(globalImage.fn,globalImage.args,globalImage.optionalContent,globalImage.hasMask);resolveXObject();return;}xobj=xref.fetch(xobj);}if(!(xobj instanceof BaseStream)){throw new FormatError("XObject should be a stream");}var type=xobj.dict.get("Subtype");if(!(type instanceof Name)){throw new FormatError("XObject should have a Name subtype");}if(type.name==="Form"){stateManager.save();self.buildFormXObject(resources,xobj,null,operatorList,task,stateManager.state.clone(),localColorSpaceCache).then(function(){stateManager.restore();resolveXObject();},rejectXObject);return;}else if(type.name==="Image"){self.buildPaintImageXObject({resources:resources,image:xobj,operatorList:operatorList,cacheKey:name,localImageCache:localImageCache,localColorSpaceCache:localColorSpaceCache}).then(resolveXObject,rejectXObject);return;}else if(type.name==="PS"){info("Ignored XObject subtype PS");}else{throw new FormatError("Unhandled XObject subtype ".concat(type.name));}resolveXObject();})["catch"](function(reason){if(reason instanceof AbortException){return;}if(self.options.ignoreErrors){warn("getOperatorList - ignoring XObject: \\"".concat(reason,"\\"."));return;}throw reason;}));return{v:void 0};case OPS.setFont:var fontSize=args[1];next(self.handleSetFont(resources,args,null,operatorList,task,stateManager.state,fallbackFontDict).then(function(loadedName){operatorList.addDependency(loadedName);operatorList.addOp(OPS.setFont,[loadedName,fontSize]);}));return{v:void 0};case OPS.beginText:parsingText=true;break;case OPS.endText:parsingText=false;break;case OPS.endInlineImage:var cacheKey=args[0].cacheKey;if(cacheKey){var _localImage2=localImageCache.getByName(cacheKey);if(_localImage2){addLocallyCachedImageOps(operatorList,_localImage2);args=null;return 1;// continue\n}}next(self.buildPaintImageXObject({resources:resources,image:args[0],isInline:true,operatorList:operatorList,cacheKey:cacheKey,localImageCache:localImageCache,localColorSpaceCache:localColorSpaceCache}));return{v:void 0};case OPS.showText:if(!stateManager.state.font){self.ensureStateFont(stateManager.state);return 1;// continue\n}args[0]=self.handleText(args[0],stateManager.state);break;case OPS.showSpacedText:if(!stateManager.state.font){self.ensureStateFont(stateManager.state);return 1;// continue\n}var combinedGlyphs=[],state=stateManager.state;var _iterator72=_createForOfIteratorHelper(args[0]),_step72;try{for(_iterator72.s();!(_step72=_iterator72.n()).done;){var arrItem=_step72.value;if(typeof arrItem==="string"){combinedGlyphs.push.apply(combinedGlyphs,_toConsumableArray(self.handleText(arrItem,state)));}else if(typeof arrItem==="number"){combinedGlyphs.push(arrItem);}}}catch(err){_iterator72.e(err);}finally{_iterator72.f();}args[0]=combinedGlyphs;fn=OPS.showText;break;case OPS.nextLineShowText:if(!stateManager.state.font){self.ensureStateFont(stateManager.state);return 1;// continue\n}operatorList.addOp(OPS.nextLine);args[0]=self.handleText(args[0],stateManager.state);fn=OPS.showText;break;case OPS.nextLineSetSpacingShowText:if(!stateManager.state.font){self.ensureStateFont(stateManager.state);return 1;// continue\n}operatorList.addOp(OPS.nextLine);operatorList.addOp(OPS.setWordSpacing,[args.shift()]);operatorList.addOp(OPS.setCharSpacing,[args.shift()]);args[0]=self.handleText(args[0],stateManager.state);fn=OPS.showText;break;case OPS.setTextRenderingMode:stateManager.state.textRenderingMode=args[0];break;case OPS.setFillColorSpace:{var cachedColorSpace=ColorSpace.getCached(args[0],xref,localColorSpaceCache);if(cachedColorSpace){stateManager.state.fillColorSpace=cachedColorSpace;return 1;// continue\n}next(self.parseColorSpace({cs:args[0],resources:resources,localColorSpaceCache:localColorSpaceCache}).then(function(colorSpace){stateManager.state.fillColorSpace=colorSpace||ColorSpace.singletons.gray;}));return{v:void 0};}case OPS.setStrokeColorSpace:{var _cachedColorSpace=ColorSpace.getCached(args[0],xref,localColorSpaceCache);if(_cachedColorSpace){stateManager.state.strokeColorSpace=_cachedColorSpace;return 1;// continue\n}next(self.parseColorSpace({cs:args[0],resources:resources,localColorSpaceCache:localColorSpaceCache}).then(function(colorSpace){stateManager.state.strokeColorSpace=colorSpace||ColorSpace.singletons.gray;}));return{v:void 0};}case OPS.setFillColor:cs=stateManager.state.fillColorSpace;args=cs.getRgb(args,0);fn=OPS.setFillRGBColor;break;case OPS.setStrokeColor:cs=stateManager.state.strokeColorSpace;args=cs.getRgb(args,0);fn=OPS.setStrokeRGBColor;break;case OPS.setFillGray:stateManager.state.fillColorSpace=ColorSpace.singletons.gray;args=ColorSpace.singletons.gray.getRgb(args,0);fn=OPS.setFillRGBColor;break;case OPS.setStrokeGray:stateManager.state.strokeColorSpace=ColorSpace.singletons.gray;args=ColorSpace.singletons.gray.getRgb(args,0);fn=OPS.setStrokeRGBColor;break;case OPS.setFillCMYKColor:stateManager.state.fillColorSpace=ColorSpace.singletons.cmyk;args=ColorSpace.singletons.cmyk.getRgb(args,0);fn=OPS.setFillRGBColor;break;case OPS.setStrokeCMYKColor:stateManager.state.strokeColorSpace=ColorSpace.singletons.cmyk;args=ColorSpace.singletons.cmyk.getRgb(args,0);fn=OPS.setStrokeRGBColor;break;case OPS.setFillRGBColor:stateManager.state.fillColorSpace=ColorSpace.singletons.rgb;args=ColorSpace.singletons.rgb.getRgb(args,0);break;case OPS.setStrokeRGBColor:stateManager.state.strokeColorSpace=ColorSpace.singletons.rgb;args=ColorSpace.singletons.rgb.getRgb(args,0);break;case OPS.setFillColorN:cs=stateManager.state.patternFillColorSpace;if(!cs){if(isNumberArray(args,null)){args=ColorSpace.singletons.gray.getRgb(args,0);fn=OPS.setFillRGBColor;break;}args=[];fn=OPS.setFillTransparent;break;}if(cs.name==="Pattern"){next(self.handleColorN(operatorList,OPS.setFillColorN,args,cs,patterns,resources,task,localColorSpaceCache,localTilingPatternCache,localShadingPatternCache));return{v:void 0};}args=cs.getRgb(args,0);fn=OPS.setFillRGBColor;break;case OPS.setStrokeColorN:cs=stateManager.state.patternStrokeColorSpace;if(!cs){if(isNumberArray(args,null)){args=ColorSpace.singletons.gray.getRgb(args,0);fn=OPS.setStrokeRGBColor;break;}args=[];fn=OPS.setStrokeTransparent;break;}if(cs.name==="Pattern"){next(self.handleColorN(operatorList,OPS.setStrokeColorN,args,cs,patterns,resources,task,localColorSpaceCache,localTilingPatternCache,localShadingPatternCache));return{v:void 0};}args=cs.getRgb(args,0);fn=OPS.setStrokeRGBColor;break;case OPS.shadingFill:var shading;try{var shadingRes=resources.get("Shading");if(!shadingRes){throw new FormatError("No shading resource found");}shading=shadingRes.get(args[0].name);if(!shading){throw new FormatError("No shading object found");}}catch(reason){if(reason instanceof AbortException){return 1;// continue\n}if(self.options.ignoreErrors){warn("getOperatorList - ignoring Shading: \\"".concat(reason,"\\"."));return 1;// continue\n}throw reason;}var patternId=self.parseShading({shading:shading,resources:resources,localColorSpaceCache:localColorSpaceCache,localShadingPatternCache:localShadingPatternCache});if(!patternId){return 1;// continue\n}args=[patternId];fn=OPS.shadingFill;break;case OPS.setGState:isValidName=args[0]instanceof Name;name=args[0].name;if(isValidName){var localGStateObj=localGStateCache.getByName(name);if(localGStateObj){if(localGStateObj.length>0){operatorList.addOp(OPS.setGState,[localGStateObj]);}args=null;return 1;// continue\n}}next(new Promise(function(resolveGState,rejectGState){if(!isValidName){throw new FormatError("GState must be referred to by name.");}var extGState=resources.get("ExtGState");if(!(extGState instanceof Dict)){throw new FormatError("ExtGState should be a dictionary.");}var gState=extGState.get(name);if(!(gState instanceof Dict)){throw new FormatError("GState should be a dictionary.");}self.setGState({resources:resources,gState:gState,operatorList:operatorList,cacheKey:name,task:task,stateManager:stateManager,localGStateCache:localGStateCache,localColorSpaceCache:localColorSpaceCache}).then(resolveGState,rejectGState);})["catch"](function(reason){if(reason instanceof AbortException){return;}if(self.options.ignoreErrors){warn("getOperatorList - ignoring ExtGState: \\"".concat(reason,"\\"."));return;}throw reason;}));return{v:void 0};case OPS.moveTo:case OPS.lineTo:case OPS.curveTo:case OPS.curveTo2:case OPS.curveTo3:case OPS.closePath:case OPS.rectangle:self.buildPath(operatorList,fn,args,parsingText);return 1;// continue\ncase OPS.markPoint:case OPS.markPointProps:case OPS.beginCompat:case OPS.endCompat:return 1;// continue\ncase OPS.beginMarkedContentProps:if(!(args[0]instanceof Name)){warn("Expected name for beginMarkedContentProps arg0=".concat(args[0]));operatorList.addOp(OPS.beginMarkedContentProps,["OC",null]);return 1;// continue\n}if(args[0].name==="OC"){next(self.parseMarkedContentProps(args[1],resources).then(function(data){operatorList.addOp(OPS.beginMarkedContentProps,["OC",data]);})["catch"](function(reason){if(reason instanceof AbortException){return;}if(self.options.ignoreErrors){warn("getOperatorList - ignoring beginMarkedContentProps: \\"".concat(reason,"\\"."));operatorList.addOp(OPS.beginMarkedContentProps,["OC",null]);return;}throw reason;}));return{v:void 0};}args=[args[0].name,args[1]instanceof Dict?args[1].get("MCID"):null];break;case OPS.beginMarkedContent:case OPS.endMarkedContent:default:if(args!==null){for(i=0,ii=args.length;i<ii;i++){if(args[i]instanceof Dict){break;}}if(i<ii){warn("getOperatorList - ignoring operator: "+fn);return 1;// continue\n}}}operatorList.addOp(fn,args);},_ret;while(!(stop=timeSlotManager.check())){_ret=_loop2();if(_ret===0)break;if(_ret===1)continue;if(_ret)return _ret.v;}if(stop){next(deferred);return;}closePendingRestoreOPS();resolve();})["catch"](function(reason){if(reason instanceof AbortException){return;}if(_this52.options.ignoreErrors){warn("getOperatorList - ignoring errors during \\"".concat(task.name,"\\" ")+"task: \\"".concat(reason,"\\"."));closePendingRestoreOPS();return;}throw reason;});}},{key:"getTextContent",value:function getTextContent(_ref65){var _this53=this;var stream=_ref65.stream,task=_ref65.task,resources=_ref65.resources,_ref65$stateManager=_ref65.stateManager,stateManager=_ref65$stateManager===void 0?null:_ref65$stateManager,_ref65$includeMarkedC=_ref65.includeMarkedContent,includeMarkedContent=_ref65$includeMarkedC===void 0?false:_ref65$includeMarkedC,sink=_ref65.sink,_ref65$seenStyles=_ref65.seenStyles,seenStyles=_ref65$seenStyles===void 0?new Set():_ref65$seenStyles,viewBox=_ref65.viewBox,_ref65$lang=_ref65.lang,lang=_ref65$lang===void 0?null:_ref65$lang,_ref65$markedContentD=_ref65.markedContentData,markedContentData=_ref65$markedContentD===void 0?null:_ref65$markedContentD,_ref65$disableNormali=_ref65.disableNormalization,disableNormalization=_ref65$disableNormali===void 0?false:_ref65$disableNormali,_ref65$keepWhiteSpace=_ref65.keepWhiteSpace,keepWhiteSpace=_ref65$keepWhiteSpace===void 0?false:_ref65$keepWhiteSpace;resources||(resources=Dict.empty);stateManager||(stateManager=new StateManager(new TextState()));if(includeMarkedContent){markedContentData||(markedContentData={level:0});}var textContent={items:[],styles:Object.create(null),lang:lang};var textContentItem={initialized:false,str:[],totalWidth:0,totalHeight:0,width:0,height:0,vertical:false,prevTransform:null,textAdvanceScale:0,spaceInFlowMin:0,spaceInFlowMax:0,trackingSpaceMin:Infinity,negativeSpaceMax:-Infinity,notASpace:-Infinity,transform:null,fontName:null,hasEOL:false};var twoLastChars=[" "," "];var twoLastCharsPos=0;function saveLastChar(_char9){var nextPos=(twoLastCharsPos+1)%2;var ret=twoLastChars[twoLastCharsPos]!==" "&&twoLastChars[nextPos]===" ";twoLastChars[twoLastCharsPos]=_char9;twoLastCharsPos=nextPos;return!keepWhiteSpace&&ret;}function shouldAddWhitepsace(){return!keepWhiteSpace&&twoLastChars[twoLastCharsPos]!==" "&&twoLastChars[(twoLastCharsPos+1)%2]===" ";}function resetLastChars(){twoLastChars[0]=twoLastChars[1]=" ";twoLastCharsPos=0;}var TRACKING_SPACE_FACTOR=0.102;var NOT_A_SPACE_FACTOR=0.03;var NEGATIVE_SPACE_FACTOR=-0.2;var SPACE_IN_FLOW_MIN_FACTOR=0.102;var SPACE_IN_FLOW_MAX_FACTOR=0.6;var VERTICAL_SHIFT_RATIO=0.25;var self=this;var xref=this.xref;var showSpacedTextBuffer=[];var xobjs=null;var emptyXObjectCache=new LocalImageCache();var emptyGStateCache=new LocalGStateCache();var preprocessor=new EvaluatorPreprocessor(stream,xref,stateManager);var textState;function pushWhitespace(_ref66){var _ref66$width=_ref66.width,width=_ref66$width===void 0?0:_ref66$width,_ref66$height=_ref66.height,height=_ref66$height===void 0?0:_ref66$height,_ref66$transform=_ref66.transform,transform=_ref66$transform===void 0?textContentItem.prevTransform:_ref66$transform,_ref66$fontName=_ref66.fontName,fontName=_ref66$fontName===void 0?textContentItem.fontName:_ref66$fontName;textContent.items.push({str:" ",dir:"ltr",width:width,height:height,transform:transform,fontName:fontName,hasEOL:false});}function getCurrentTextTransform(){var font=textState.font;var tsm=[textState.fontSize*textState.textHScale,0,0,textState.fontSize,0,textState.textRise];if(font.isType3Font&&(textState.fontSize<=1||font.isCharBBox)&&!isArrayEqual(textState.fontMatrix,FONT_IDENTITY_MATRIX)){var glyphHeight=font.bbox[3]-font.bbox[1];if(glyphHeight>0){tsm[3]*=glyphHeight*textState.fontMatrix[3];}}return Util.transform(textState.ctm,Util.transform(textState.textMatrix,tsm));}function ensureTextContentItem(){if(textContentItem.initialized){return textContentItem;}var _textState=textState,font=_textState.font,loadedName=_textState.loadedName;if(!seenStyles.has(loadedName)){seenStyles.add(loadedName);textContent.styles[loadedName]={fontFamily:font.fallbackName,ascent:font.ascent,descent:font.descent,vertical:font.vertical};if(self.options.fontExtraProperties&&font.systemFontInfo){var style=textContent.styles[loadedName];style.fontSubstitution=font.systemFontInfo.css;style.fontSubstitutionLoadedName=font.systemFontInfo.loadedName;}}textContentItem.fontName=loadedName;var trm=textContentItem.transform=getCurrentTextTransform();if(!font.vertical){textContentItem.width=textContentItem.totalWidth=0;textContentItem.height=textContentItem.totalHeight=Math.hypot(trm[2],trm[3]);textContentItem.vertical=false;}else{textContentItem.width=textContentItem.totalWidth=Math.hypot(trm[0],trm[1]);textContentItem.height=textContentItem.totalHeight=0;textContentItem.vertical=true;}var scaleLineX=Math.hypot(textState.textLineMatrix[0],textState.textLineMatrix[1]);var scaleCtmX=Math.hypot(textState.ctm[0],textState.ctm[1]);textContentItem.textAdvanceScale=scaleCtmX*scaleLineX;var _textState2=textState,fontSize=_textState2.fontSize;textContentItem.trackingSpaceMin=fontSize*TRACKING_SPACE_FACTOR;textContentItem.notASpace=fontSize*NOT_A_SPACE_FACTOR;textContentItem.negativeSpaceMax=fontSize*NEGATIVE_SPACE_FACTOR;textContentItem.spaceInFlowMin=fontSize*SPACE_IN_FLOW_MIN_FACTOR;textContentItem.spaceInFlowMax=fontSize*SPACE_IN_FLOW_MAX_FACTOR;textContentItem.hasEOL=false;textContentItem.initialized=true;return textContentItem;}function updateAdvanceScale(){if(!textContentItem.initialized){return;}var scaleLineX=Math.hypot(textState.textLineMatrix[0],textState.textLineMatrix[1]);var scaleCtmX=Math.hypot(textState.ctm[0],textState.ctm[1]);var scaleFactor=scaleCtmX*scaleLineX;if(scaleFactor===textContentItem.textAdvanceScale){return;}if(!textContentItem.vertical){textContentItem.totalWidth+=textContentItem.width*textContentItem.textAdvanceScale;textContentItem.width=0;}else{textContentItem.totalHeight+=textContentItem.height*textContentItem.textAdvanceScale;textContentItem.height=0;}textContentItem.textAdvanceScale=scaleFactor;}function runBidiTransform(textChunk){var text=textChunk.str.join("");if(!disableNormalization){text=normalizeUnicode(text);}var bidiResult=bidi(text,-1,textChunk.vertical);return{str:bidiResult.str,dir:bidiResult.dir,width:Math.abs(textChunk.totalWidth),height:Math.abs(textChunk.totalHeight),transform:textChunk.transform,fontName:textChunk.fontName,hasEOL:textChunk.hasEOL};}function handleSetFont(_x68,_x69){return _handleSetFont2.apply(this,arguments);}function _handleSetFont2(){_handleSetFont2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee38(fontName,fontRef){var translated;return _regeneratorRuntime().wrap(function _callee38$(_context43){while(1)switch(_context43.prev=_context43.next){case 0:_context43.next=2;return self.loadFont(fontName,fontRef,resources);case 2:translated=_context43.sent;if(!translated.font.isType3Font){_context43.next=11;break;}_context43.prev=4;_context43.next=7;return translated.loadType3Data(self,resources,task);case 7:_context43.next=11;break;case 9:_context43.prev=9;_context43.t0=_context43["catch"](4);case 11:textState.loadedName=translated.loadedName;textState.font=translated.font;textState.fontMatrix=translated.font.fontMatrix||FONT_IDENTITY_MATRIX;case 14:case"end":return _context43.stop();}},_callee38,null,[[4,9]]);}));return _handleSetFont2.apply(this,arguments);}function applyInverseRotation(x,y,matrix){var scale=Math.hypot(matrix[0],matrix[1]);return[(matrix[0]*x+matrix[1]*y)/scale,(matrix[2]*x+matrix[3]*y)/scale];}function compareWithLastPosition(glyphWidth){var _textState$font;var currentTransform=getCurrentTextTransform();var posX=currentTransform[4];var posY=currentTransform[5];if((_textState$font=textState.font)!==null&&_textState$font!==void 0&&_textState$font.vertical){if(posX<viewBox[0]||posX>viewBox[2]||posY+glyphWidth<viewBox[1]||posY>viewBox[3]){return false;}}else if(posX+glyphWidth<viewBox[0]||posX>viewBox[2]||posY<viewBox[1]||posY>viewBox[3]){return false;}if(!textState.font||!textContentItem.prevTransform){return true;}var lastPosX=textContentItem.prevTransform[4];var lastPosY=textContentItem.prevTransform[5];if(lastPosX===posX&&lastPosY===posY){return true;}var rotate=-1;if(currentTransform[0]&&currentTransform[1]===0&&currentTransform[2]===0){rotate=currentTransform[0]>0?0:180;}else if(currentTransform[1]&&currentTransform[0]===0&&currentTransform[3]===0){rotate=currentTransform[1]>0?90:270;}switch(rotate){case 0:break;case 90:var _ref67=[posY,posX];posX=_ref67[0];posY=_ref67[1];var _ref68=[lastPosY,lastPosX];lastPosX=_ref68[0];lastPosY=_ref68[1];break;case 180:var _ref69=[-posX,-posY,-lastPosX,-lastPosY];posX=_ref69[0];posY=_ref69[1];lastPosX=_ref69[2];lastPosY=_ref69[3];break;case 270:var _ref70=[-posY,-posX];posX=_ref70[0];posY=_ref70[1];var _ref71=[-lastPosY,-lastPosX];lastPosX=_ref71[0];lastPosY=_ref71[1];break;default:var _applyInverseRotation=applyInverseRotation(posX,posY,currentTransform);var _applyInverseRotation2=_slicedToArray(_applyInverseRotation,2);posX=_applyInverseRotation2[0];posY=_applyInverseRotation2[1];var _applyInverseRotation3=applyInverseRotation(lastPosX,lastPosY,textContentItem.prevTransform);var _applyInverseRotation4=_slicedToArray(_applyInverseRotation3,2);lastPosX=_applyInverseRotation4[0];lastPosY=_applyInverseRotation4[1];}if(textState.font.vertical){var _advanceY=(lastPosY-posY)/textContentItem.textAdvanceScale;var _advanceX=posX-lastPosX;var _textOrientation=Math.sign(textContentItem.height);if(_advanceY<_textOrientation*textContentItem.negativeSpaceMax){if(Math.abs(_advanceX)>0.5*textContentItem.width){appendEOL();return true;}resetLastChars();flushTextContentItem();return true;}if(Math.abs(_advanceX)>textContentItem.width){appendEOL();return true;}if(_advanceY<=_textOrientation*textContentItem.notASpace){resetLastChars();}if(_advanceY<=_textOrientation*textContentItem.trackingSpaceMin){if(shouldAddWhitepsace()){resetLastChars();flushTextContentItem();pushWhitespace({height:Math.abs(_advanceY)});}else{textContentItem.height+=_advanceY;}}else if(!addFakeSpaces(_advanceY,textContentItem.prevTransform,_textOrientation)){if(textContentItem.str.length===0){resetLastChars();pushWhitespace({height:Math.abs(_advanceY)});}else{textContentItem.height+=_advanceY;}}if(Math.abs(_advanceX)>textContentItem.width*VERTICAL_SHIFT_RATIO){flushTextContentItem();}return true;}var advanceX=(posX-lastPosX)/textContentItem.textAdvanceScale;var advanceY=posY-lastPosY;var textOrientation=Math.sign(textContentItem.width);if(advanceX<textOrientation*textContentItem.negativeSpaceMax){if(Math.abs(advanceY)>0.5*textContentItem.height){appendEOL();return true;}resetLastChars();flushTextContentItem();return true;}if(Math.abs(advanceY)>textContentItem.height){appendEOL();return true;}if(advanceX<=textOrientation*textContentItem.notASpace){resetLastChars();}if(advanceX<=textOrientation*textContentItem.trackingSpaceMin){if(shouldAddWhitepsace()){resetLastChars();flushTextContentItem();pushWhitespace({width:Math.abs(advanceX)});}else{textContentItem.width+=advanceX;}}else if(!addFakeSpaces(advanceX,textContentItem.prevTransform,textOrientation)){if(textContentItem.str.length===0){resetLastChars();pushWhitespace({width:Math.abs(advanceX)});}else{textContentItem.width+=advanceX;}}if(Math.abs(advanceY)>textContentItem.height*VERTICAL_SHIFT_RATIO){flushTextContentItem();}return true;}function buildTextContentItem(_ref72){var chars=_ref72.chars,extraSpacing=_ref72.extraSpacing;var font=textState.font;if(!chars){var charSpacing=textState.charSpacing+extraSpacing;if(charSpacing){if(!font.vertical){textState.translateTextMatrix(charSpacing*textState.textHScale,0);}else{textState.translateTextMatrix(0,-charSpacing);}}if(keepWhiteSpace){compareWithLastPosition(0);}return;}var glyphs=font.charsToGlyphs(chars);var scale=textState.fontMatrix[0]*textState.fontSize;for(var i=0,ii=glyphs.length;i<ii;i++){var glyph=glyphs[i];var category=glyph.category;if(category.isInvisibleFormatMark){continue;}var _charSpacing=textState.charSpacing+(i+1===ii?extraSpacing:0);var glyphWidth=glyph.width;if(font.vertical){glyphWidth=glyph.vmetric?glyph.vmetric[0]:-glyphWidth;}var scaledDim=glyphWidth*scale;if(!keepWhiteSpace&&category.isWhitespace){if(!font.vertical){_charSpacing+=scaledDim+textState.wordSpacing;textState.translateTextMatrix(_charSpacing*textState.textHScale,0);}else{_charSpacing+=-scaledDim+textState.wordSpacing;textState.translateTextMatrix(0,-_charSpacing);}saveLastChar(" ");continue;}if(!category.isZeroWidthDiacritic&&!compareWithLastPosition(scaledDim)){if(!font.vertical){textState.translateTextMatrix(scaledDim*textState.textHScale,0);}else{textState.translateTextMatrix(0,scaledDim);}continue;}var textChunk=ensureTextContentItem();if(category.isZeroWidthDiacritic){scaledDim=0;}if(!font.vertical){scaledDim*=textState.textHScale;textState.translateTextMatrix(scaledDim,0);textChunk.width+=scaledDim;}else{textState.translateTextMatrix(0,scaledDim);scaledDim=Math.abs(scaledDim);textChunk.height+=scaledDim;}if(scaledDim){textChunk.prevTransform=getCurrentTextTransform();}var glyphUnicode=glyph.unicode;if(saveLastChar(glyphUnicode)){textChunk.str.push(" ");}textChunk.str.push(glyphUnicode);if(_charSpacing){if(!font.vertical){textState.translateTextMatrix(_charSpacing*textState.textHScale,0);}else{textState.translateTextMatrix(0,-_charSpacing);}}}}function appendEOL(){resetLastChars();if(textContentItem.initialized){textContentItem.hasEOL=true;flushTextContentItem();}else{textContent.items.push({str:"",dir:"ltr",width:0,height:0,transform:getCurrentTextTransform(),fontName:textState.loadedName,hasEOL:true});}}function addFakeSpaces(width,transf,textOrientation){if(textOrientation*textContentItem.spaceInFlowMin<=width&&width<=textOrientation*textContentItem.spaceInFlowMax){if(textContentItem.initialized){resetLastChars();textContentItem.str.push(" ");}return false;}var fontName=textContentItem.fontName;var height=0;if(textContentItem.vertical){height=width;width=0;}flushTextContentItem();resetLastChars();pushWhitespace({width:Math.abs(width),height:Math.abs(height),transform:transf||getCurrentTextTransform(),fontName:fontName});return true;}function flushTextContentItem(){if(!textContentItem.initialized||!textContentItem.str){return;}if(!textContentItem.vertical){textContentItem.totalWidth+=textContentItem.width*textContentItem.textAdvanceScale;}else{textContentItem.totalHeight+=textContentItem.height*textContentItem.textAdvanceScale;}textContent.items.push(runBidiTransform(textContentItem));textContentItem.initialized=false;textContentItem.str.length=0;}function enqueueChunk(){var batch=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var length=textContent.items.length;if(length===0){return;}if(batch&&length<TEXT_CHUNK_BATCH_SIZE){return;}sink.enqueue(textContent,length);textContent.items=[];textContent.styles=Object.create(null);}var timeSlotManager=new TimeSlotManager();return new Promise(function promiseBody(resolve,reject){var next=function next(promise){enqueueChunk(true);Promise.all([promise,sink.ready]).then(function(){try{promiseBody(resolve,reject);}catch(ex){reject(ex);}},reject);};task.ensureNotTerminated();timeSlotManager.reset();var operation={};var stop,name,isValidName,args=[];while(!(stop=timeSlotManager.check())){args.length=0;operation.args=args;if(!preprocessor.read(operation)){break;}var previousState=textState;textState=stateManager.state;var fn=operation.fn;args=operation.args;switch(fn|0){case OPS.setFont:var fontNameArg=args[0].name,fontSizeArg=args[1];if(textState.font&&fontNameArg===textState.fontName&&fontSizeArg===textState.fontSize){break;}flushTextContentItem();textState.fontName=fontNameArg;textState.fontSize=fontSizeArg;next(handleSetFont(fontNameArg,null));return;case OPS.setTextRise:textState.textRise=args[0];break;case OPS.setHScale:textState.textHScale=args[0]/100;break;case OPS.setLeading:textState.leading=args[0];break;case OPS.moveText:textState.translateTextLineMatrix(args[0],args[1]);textState.textMatrix=textState.textLineMatrix.slice();break;case OPS.setLeadingMoveText:textState.leading=-args[1];textState.translateTextLineMatrix(args[0],args[1]);textState.textMatrix=textState.textLineMatrix.slice();break;case OPS.nextLine:textState.carriageReturn();break;case OPS.setTextMatrix:textState.setTextMatrix(args[0],args[1],args[2],args[3],args[4],args[5]);textState.setTextLineMatrix(args[0],args[1],args[2],args[3],args[4],args[5]);updateAdvanceScale();break;case OPS.setCharSpacing:textState.charSpacing=args[0];break;case OPS.setWordSpacing:textState.wordSpacing=args[0];break;case OPS.beginText:textState.textMatrix=IDENTITY_MATRIX.slice();textState.textLineMatrix=IDENTITY_MATRIX.slice();break;case OPS.showSpacedText:if(!stateManager.state.font){self.ensureStateFont(stateManager.state);continue;}var spaceFactor=(textState.font.vertical?1:-1)*textState.fontSize/1000;var elements=args[0];for(var i=0,ii=elements.length;i<ii;i++){var item=elements[i];if(typeof item==="string"){showSpacedTextBuffer.push(item);}else if(typeof item==="number"&&item!==0){var str=showSpacedTextBuffer.join("");showSpacedTextBuffer.length=0;buildTextContentItem({chars:str,extraSpacing:item*spaceFactor});}}if(showSpacedTextBuffer.length>0){var _str=showSpacedTextBuffer.join("");showSpacedTextBuffer.length=0;buildTextContentItem({chars:_str,extraSpacing:0});}break;case OPS.showText:if(!stateManager.state.font){self.ensureStateFont(stateManager.state);continue;}buildTextContentItem({chars:args[0],extraSpacing:0});break;case OPS.nextLineShowText:if(!stateManager.state.font){self.ensureStateFont(stateManager.state);continue;}textState.carriageReturn();buildTextContentItem({chars:args[0],extraSpacing:0});break;case OPS.nextLineSetSpacingShowText:if(!stateManager.state.font){self.ensureStateFont(stateManager.state);continue;}textState.wordSpacing=args[0];textState.charSpacing=args[1];textState.carriageReturn();buildTextContentItem({chars:args[2],extraSpacing:0});break;case OPS.paintXObject:flushTextContentItem();xobjs!==null&&xobjs!==void 0?xobjs:xobjs=resources.get("XObject")||Dict.empty;isValidName=args[0]instanceof Name;name=args[0].name;if(isValidName&&emptyXObjectCache.getByName(name)){break;}next(new Promise(function(resolveXObject,rejectXObject){if(!isValidName){throw new FormatError("XObject must be referred to by name.");}var xobj=xobjs.getRaw(name);if(xobj instanceof Ref){if(emptyXObjectCache.getByRef(xobj)){resolveXObject();return;}var globalImage=self.globalImageCache.getData(xobj,self.pageIndex);if(globalImage){resolveXObject();return;}xobj=xref.fetch(xobj);}if(!(xobj instanceof BaseStream)){throw new FormatError("XObject should be a stream");}var type=xobj.dict.get("Subtype");if(!(type instanceof Name)){throw new FormatError("XObject should have a Name subtype");}if(type.name!=="Form"){emptyXObjectCache.set(name,xobj.dict.objId,true);resolveXObject();return;}var currentState=stateManager.state.clone();var xObjStateManager=new StateManager(currentState);var matrix=lookupMatrix(xobj.dict.getArray("Matrix"),null);if(matrix){xObjStateManager.transform(matrix);}enqueueChunk();var sinkWrapper={enqueueInvoked:false,enqueue:function enqueue(chunk,size){this.enqueueInvoked=true;sink.enqueue(chunk,size);},get desiredSize(){return sink.desiredSize;},get ready(){return sink.ready;}};self.getTextContent({stream:xobj,task:task,resources:xobj.dict.get("Resources")||resources,stateManager:xObjStateManager,includeMarkedContent:includeMarkedContent,sink:sinkWrapper,seenStyles:seenStyles,viewBox:viewBox,lang:lang,markedContentData:markedContentData,disableNormalization:disableNormalization,keepWhiteSpace:keepWhiteSpace}).then(function(){if(!sinkWrapper.enqueueInvoked){emptyXObjectCache.set(name,xobj.dict.objId,true);}resolveXObject();},rejectXObject);})["catch"](function(reason){if(reason instanceof AbortException){return;}if(self.options.ignoreErrors){warn("getTextContent - ignoring XObject: \\"".concat(reason,"\\"."));return;}throw reason;}));return;case OPS.setGState:isValidName=args[0]instanceof Name;name=args[0].name;if(isValidName&&emptyGStateCache.getByName(name)){break;}next(new Promise(function(resolveGState,rejectGState){if(!isValidName){throw new FormatError("GState must be referred to by name.");}var extGState=resources.get("ExtGState");if(!(extGState instanceof Dict)){throw new FormatError("ExtGState should be a dictionary.");}var gState=extGState.get(name);if(!(gState instanceof Dict)){throw new FormatError("GState should be a dictionary.");}var gStateFont=gState.get("Font");if(!gStateFont){emptyGStateCache.set(name,gState.objId,true);resolveGState();return;}flushTextContentItem();textState.fontName=null;textState.fontSize=gStateFont[1];handleSetFont(null,gStateFont[0]).then(resolveGState,rejectGState);})["catch"](function(reason){if(reason instanceof AbortException){return;}if(self.options.ignoreErrors){warn("getTextContent - ignoring ExtGState: \\"".concat(reason,"\\"."));return;}throw reason;}));return;case OPS.beginMarkedContent:flushTextContentItem();if(includeMarkedContent){markedContentData.level++;textContent.items.push({type:"beginMarkedContent",tag:args[0]instanceof Name?args[0].name:null});}break;case OPS.beginMarkedContentProps:flushTextContentItem();if(includeMarkedContent){markedContentData.level++;var mcid=null;if(args[1]instanceof Dict){mcid=args[1].get("MCID");}textContent.items.push({type:"beginMarkedContentProps",id:Number.isInteger(mcid)?"".concat(self.idFactory.getPageObjId(),"_mc").concat(mcid):null,tag:args[0]instanceof Name?args[0].name:null});}break;case OPS.endMarkedContent:flushTextContentItem();if(includeMarkedContent){if(markedContentData.level===0){break;}markedContentData.level--;textContent.items.push({type:"endMarkedContent"});}break;case OPS.restore:if(previousState&&(previousState.font!==textState.font||previousState.fontSize!==textState.fontSize||previousState.fontName!==textState.fontName)){flushTextContentItem();}break;}if(textContent.items.length>=sink.desiredSize){stop=true;break;}}if(stop){next(deferred);return;}flushTextContentItem();enqueueChunk();resolve();})["catch"](function(reason){if(reason instanceof AbortException){return;}if(_this53.options.ignoreErrors){warn("getTextContent - ignoring errors during \\"".concat(task.name,"\\" ")+"task: \\"".concat(reason,"\\"."));flushTextContentItem();enqueueChunk();return;}throw reason;});}},{key:"extractDataStructures",value:function(){var _extractDataStructures=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee39(dict,properties){var xref,cidToGidBytes,toUnicodePromise,cidSystemInfo,cidToGidMap,differences,baseEncodingName,encoding,diffEncoding,index,_iterator73,_step73,entry,data,msg,nonEmbeddedFont,isSymbolsFontName,isSymbolicFont,isNonsymbolicFont,builtToUnicode;return _regeneratorRuntime().wrap(function _callee39$(_context44){while(1)switch(_context44.prev=_context44.next){case 0:xref=this.xref;toUnicodePromise=this.readToUnicode(properties.toUnicode);if(!properties.composite){_context44.next=15;break;}cidSystemInfo=dict.get("CIDSystemInfo");if(cidSystemInfo instanceof Dict){properties.cidSystemInfo={registry:stringToPDFString(cidSystemInfo.get("Registry")),ordering:stringToPDFString(cidSystemInfo.get("Ordering")),supplement:cidSystemInfo.get("Supplement")};}_context44.prev=5;cidToGidMap=dict.get("CIDToGIDMap");if(cidToGidMap instanceof BaseStream){cidToGidBytes=cidToGidMap.getBytes();}_context44.next=15;break;case 10:_context44.prev=10;_context44.t0=_context44["catch"](5);if(this.options.ignoreErrors){_context44.next=14;break;}throw _context44.t0;case 14:warn("extractDataStructures - ignoring CIDToGIDMap data: \\"".concat(_context44.t0,"\\"."));case 15:differences=[];baseEncodingName=null;if(!dict.has("Encoding")){_context44.next=61;break;}encoding=dict.get("Encoding");if(!(encoding instanceof Dict)){_context44.next=52;break;}baseEncodingName=encoding.get("BaseEncoding");baseEncodingName=baseEncodingName instanceof Name?baseEncodingName.name:null;if(!encoding.has("Differences")){_context44.next=50;break;}diffEncoding=encoding.get("Differences");index=0;_iterator73=_createForOfIteratorHelper(diffEncoding);_context44.prev=26;_iterator73.s();case 28:if((_step73=_iterator73.n()).done){_context44.next=42;break;}entry=_step73.value;data=xref.fetchIfRef(entry);if(!(typeof data==="number")){_context44.next=35;break;}index=data;_context44.next=40;break;case 35:if(!(data instanceof Name)){_context44.next=39;break;}differences[index++]=data.name;_context44.next=40;break;case 39:throw new FormatError("Invalid entry in \'Differences\' array: ".concat(data));case 40:_context44.next=28;break;case 42:_context44.next=47;break;case 44:_context44.prev=44;_context44.t1=_context44["catch"](26);_iterator73.e(_context44.t1);case 47:_context44.prev=47;_iterator73.f();return _context44.finish(47);case 50:_context44.next=60;break;case 52:if(!(encoding instanceof Name)){_context44.next=56;break;}baseEncodingName=encoding.name;_context44.next=60;break;case 56:msg="Encoding is not a Name nor a Dict";if(this.options.ignoreErrors){_context44.next=59;break;}throw new FormatError(msg);case 59:warn(msg);case 60:if(baseEncodingName!=="MacRomanEncoding"&&baseEncodingName!=="MacExpertEncoding"&&baseEncodingName!=="WinAnsiEncoding"){baseEncodingName=null;}case 61:nonEmbeddedFont=!properties.file||properties.isInternalFont,isSymbolsFontName=getSymbolsFonts()[properties.name];if(baseEncodingName&&nonEmbeddedFont&&isSymbolsFontName){baseEncodingName=null;}if(baseEncodingName){properties.defaultEncoding=getEncoding(baseEncodingName);}else{isSymbolicFont=!!(properties.flags&FontFlags.Symbolic);isNonsymbolicFont=!!(properties.flags&FontFlags.Nonsymbolic);encoding=StandardEncoding;if(properties.type==="TrueType"&&!isNonsymbolicFont){encoding=WinAnsiEncoding;}if(isSymbolicFont||isSymbolsFontName){encoding=MacRomanEncoding;if(nonEmbeddedFont){if(/Symbol/i.test(properties.name)){encoding=SymbolSetEncoding;}else if(/Dingbats/i.test(properties.name)){encoding=ZapfDingbatsEncoding;}else if(/Wingdings/i.test(properties.name)){encoding=WinAnsiEncoding;}}}properties.defaultEncoding=encoding;}properties.differences=differences;properties.baseEncodingName=baseEncodingName;properties.hasEncoding=!!baseEncodingName||differences.length>0;properties.dict=dict;_context44.next=70;return toUnicodePromise;case 70:properties.toUnicode=_context44.sent;_context44.next=73;return this.buildToUnicode(properties);case 73:builtToUnicode=_context44.sent;properties.toUnicode=builtToUnicode;if(cidToGidBytes){properties.cidToGidMap=this.readCidToGidMap(cidToGidBytes,builtToUnicode);}return _context44.abrupt("return",properties);case 77:case"end":return _context44.stop();}},_callee39,this,[[5,10],[26,44,47,50]]);}));function extractDataStructures(_x70,_x71){return _extractDataStructures.apply(this,arguments);}return extractDataStructures;}()},{key:"_simpleFontToUnicode",value:function _simpleFontToUnicode(properties){var forceGlyphs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;assert(!properties.composite,"Must be a simple font.");var toUnicode=[];var encoding=properties.defaultEncoding.slice();var baseEncodingName=properties.baseEncodingName;var differences=properties.differences;for(var charcode in differences){var glyphName=differences[charcode];if(glyphName===".notdef"){continue;}encoding[charcode]=glyphName;}var glyphsUnicodeMap=getGlyphsUnicode();for(var _charcode2 in encoding){var _glyphName2=encoding[_charcode2];if(_glyphName2===""){continue;}var unicode=glyphsUnicodeMap[_glyphName2];if(unicode!==undefined){toUnicode[_charcode2]=String.fromCharCode(unicode);continue;}var code=0;switch(_glyphName2[0]){case"G":if(_glyphName2.length===3){code=parseInt(_glyphName2.substring(1),16);}break;case"g":if(_glyphName2.length===5){code=parseInt(_glyphName2.substring(1),16);}break;case"C":case"c":if(_glyphName2.length>=3&&_glyphName2.length<=4){var codeStr=_glyphName2.substring(1);if(forceGlyphs){code=parseInt(codeStr,16);break;}code=+codeStr;if(Number.isNaN(code)&&Number.isInteger(parseInt(codeStr,16))){return this._simpleFontToUnicode(properties,true);}}break;case"u":unicode=getUnicodeForGlyph(_glyphName2,glyphsUnicodeMap);if(unicode!==-1){code=unicode;}break;default:switch(_glyphName2){case"f_h":case"f_t":case"T_h":toUnicode[_charcode2]=_glyphName2.replaceAll("_","");continue;}break;}if(code>0&&code<=0x10ffff&&Number.isInteger(code)){if(baseEncodingName&&code===+_charcode2){var baseEncoding=getEncoding(baseEncodingName);if(baseEncoding&&(_glyphName2=baseEncoding[_charcode2])){toUnicode[_charcode2]=String.fromCharCode(glyphsUnicodeMap[_glyphName2]);continue;}}toUnicode[_charcode2]=String.fromCodePoint(code);}}return toUnicode;}},{key:"buildToUnicode",value:function(){var _buildToUnicode=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee40(properties){var _properties$toUnicode,_properties$cidSystem;var _properties$cidSystem2,registry,ordering,ucs2CMapName,ucs2CMap,toUnicode,buf;return _regeneratorRuntime().wrap(function _callee40$(_context45){while(1)switch(_context45.prev=_context45.next){case 0:properties.hasIncludedToUnicodeMap=((_properties$toUnicode=properties.toUnicode)===null||_properties$toUnicode===void 0?void 0:_properties$toUnicode.length)>0;if(!properties.hasIncludedToUnicodeMap){_context45.next=4;break;}if(!properties.composite&&properties.hasEncoding){properties.fallbackToUnicode=this._simpleFontToUnicode(properties);}return _context45.abrupt("return",properties.toUnicode);case 4:if(properties.composite){_context45.next=6;break;}return _context45.abrupt("return",new ToUnicodeMap(this._simpleFontToUnicode(properties)));case 6:if(!(properties.composite&&(properties.cMap.builtInCMap&&!(properties.cMap instanceof IdentityCMap)||((_properties$cidSystem=properties.cidSystemInfo)===null||_properties$cidSystem===void 0?void 0:_properties$cidSystem.registry)==="Adobe"&&(properties.cidSystemInfo.ordering==="GB1"||properties.cidSystemInfo.ordering==="CNS1"||properties.cidSystemInfo.ordering==="Japan1"||properties.cidSystemInfo.ordering==="Korea1")))){_context45.next=15;break;}_properties$cidSystem2=properties.cidSystemInfo,registry=_properties$cidSystem2.registry,ordering=_properties$cidSystem2.ordering;ucs2CMapName=Name.get("".concat(registry,"-").concat(ordering,"-UCS2"));_context45.next=11;return CMapFactory.create({encoding:ucs2CMapName,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null});case 11:ucs2CMap=_context45.sent;toUnicode=[],buf=[];properties.cMap.forEach(function(charcode,cid){if(cid>0xffff){throw new FormatError("Max size of CID is 65,535");}var ucs2=ucs2CMap.lookup(cid);if(ucs2){buf.length=0;for(var i=0,ii=ucs2.length;i<ii;i+=2){buf.push((ucs2.charCodeAt(i)<<8)+ucs2.charCodeAt(i+1));}toUnicode[charcode]=String.fromCharCode.apply(String,buf);}});return _context45.abrupt("return",new ToUnicodeMap(toUnicode));case 15:return _context45.abrupt("return",new IdentityToUnicodeMap(properties.firstChar,properties.lastChar));case 16:case"end":return _context45.stop();}},_callee40,this);}));function buildToUnicode(_x72){return _buildToUnicode.apply(this,arguments);}return buildToUnicode;}()},{key:"readToUnicode",value:function(){var _readToUnicode=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee41(cmapObj){var cmap,_cmap,map;return _regeneratorRuntime().wrap(function _callee41$(_context46){while(1)switch(_context46.prev=_context46.next){case 0:if(cmapObj){_context46.next=2;break;}return _context46.abrupt("return",null);case 2:if(!(cmapObj instanceof Name)){_context46.next=9;break;}_context46.next=5;return CMapFactory.create({encoding:cmapObj,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null});case 5:cmap=_context46.sent;if(!(cmap instanceof IdentityCMap)){_context46.next=8;break;}return _context46.abrupt("return",new IdentityToUnicodeMap(0,0xffff));case 8:return _context46.abrupt("return",new ToUnicodeMap(cmap.getMap()));case 9:if(!(cmapObj instanceof BaseStream)){_context46.next=29;break;}_context46.prev=10;_context46.next=13;return CMapFactory.create({encoding:cmapObj,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null});case 13:_cmap=_context46.sent;if(!(_cmap instanceof IdentityCMap)){_context46.next=16;break;}return _context46.abrupt("return",new IdentityToUnicodeMap(0,0xffff));case 16:map=new Array(_cmap.length);_cmap.forEach(function(charCode,token){if(typeof token==="number"){map[charCode]=String.fromCodePoint(token);return;}if(token.length%2!==0){token="\\0"+token;}var str=[];for(var k=0;k<token.length;k+=2){var w1=token.charCodeAt(k)<<8|token.charCodeAt(k+1);if((w1&0xf800)!==0xd800){str.push(w1);continue;}k+=2;var w2=token.charCodeAt(k)<<8|token.charCodeAt(k+1);str.push(((w1&0x3ff)<<10)+(w2&0x3ff)+0x10000);}map[charCode]=String.fromCodePoint.apply(String,str);});return _context46.abrupt("return",new ToUnicodeMap(map));case 21:_context46.prev=21;_context46.t0=_context46["catch"](10);if(!(_context46.t0 instanceof AbortException)){_context46.next=25;break;}return _context46.abrupt("return",null);case 25:if(!this.options.ignoreErrors){_context46.next=28;break;}warn("readToUnicode - ignoring ToUnicode data: \\"".concat(_context46.t0,"\\"."));return _context46.abrupt("return",null);case 28:throw _context46.t0;case 29:return _context46.abrupt("return",null);case 30:case"end":return _context46.stop();}},_callee41,this,[[10,21]]);}));function readToUnicode(_x73){return _readToUnicode.apply(this,arguments);}return readToUnicode;}()},{key:"readCidToGidMap",value:function readCidToGidMap(glyphsData,toUnicode){var result=[];for(var j=0,jj=glyphsData.length;j<jj;j++){var glyphID=glyphsData[j++]<<8|glyphsData[j];var code=j>>1;if(glyphID===0&&!toUnicode.has(code)){continue;}result[code]=glyphID;}return result;}},{key:"extractWidths",value:function extractWidths(dict,descriptor,properties){var xref=this.xref;var glyphsWidths=[];var defaultWidth=0;var glyphsVMetrics=[];var defaultVMetrics;if(properties.composite){var dw=dict.get("DW");defaultWidth=typeof dw==="number"?Math.ceil(dw):1000;var widths=dict.get("W");if(Array.isArray(widths)){for(var i=0,ii=widths.length;i<ii;i++){var start=xref.fetchIfRef(widths[i++]);if(!Number.isInteger(start)){break;}var code=xref.fetchIfRef(widths[i]);if(Array.isArray(code)){var _iterator74=_createForOfIteratorHelper(code),_step74;try{for(_iterator74.s();!(_step74=_iterator74.n()).done;){var c=_step74.value;var width=xref.fetchIfRef(c);if(typeof width==="number"){glyphsWidths[start]=width;}start++;}}catch(err){_iterator74.e(err);}finally{_iterator74.f();}}else if(Number.isInteger(code)){var _width2=xref.fetchIfRef(widths[++i]);if(typeof _width2!=="number"){continue;}for(var j=start;j<=code;j++){glyphsWidths[j]=_width2;}}else{break;}}}if(properties.vertical){var dw2=dict.getArray("DW2");var vmetrics=isNumberArray(dw2,2)?dw2:[880,-1000];defaultVMetrics=[vmetrics[1],defaultWidth*0.5,vmetrics[0]];vmetrics=dict.get("W2");if(Array.isArray(vmetrics)){for(var _i49=0,_ii12=vmetrics.length;_i49<_ii12;_i49++){var _start=xref.fetchIfRef(vmetrics[_i49++]);if(!Number.isInteger(_start)){break;}var _code=xref.fetchIfRef(vmetrics[_i49]);if(Array.isArray(_code)){for(var _j6=0,jj=_code.length;_j6<jj;_j6++){var vmetric=[xref.fetchIfRef(_code[_j6++]),xref.fetchIfRef(_code[_j6++]),xref.fetchIfRef(_code[_j6])];if(isNumberArray(vmetric,null)){glyphsVMetrics[_start]=vmetric;}_start++;}}else if(Number.isInteger(_code)){var _vmetric=[xref.fetchIfRef(vmetrics[++_i49]),xref.fetchIfRef(vmetrics[++_i49]),xref.fetchIfRef(vmetrics[++_i49])];if(!isNumberArray(_vmetric,null)){continue;}for(var _j7=_start;_j7<=_code;_j7++){glyphsVMetrics[_j7]=_vmetric;}}else{break;}}}}}else{var _widths=dict.get("Widths");if(Array.isArray(_widths)){var _j8=properties.firstChar;var _iterator75=_createForOfIteratorHelper(_widths),_step75;try{for(_iterator75.s();!(_step75=_iterator75.n()).done;){var w=_step75.value;var _width3=xref.fetchIfRef(w);if(typeof _width3==="number"){glyphsWidths[_j8]=_width3;}_j8++;}}catch(err){_iterator75.e(err);}finally{_iterator75.f();}var missingWidth=descriptor.get("MissingWidth");defaultWidth=typeof missingWidth==="number"?missingWidth:0;}else{var baseFontName=dict.get("BaseFont");if(baseFontName instanceof Name){var metrics=this.getBaseFontMetrics(baseFontName.name);glyphsWidths=this.buildCharCodeToWidth(metrics.widths,properties);defaultWidth=metrics.defaultWidth;}}}var isMonospace=true;var firstWidth=defaultWidth;for(var glyph in glyphsWidths){var glyphWidth=glyphsWidths[glyph];if(!glyphWidth){continue;}if(!firstWidth){firstWidth=glyphWidth;continue;}if(firstWidth!==glyphWidth){isMonospace=false;break;}}if(isMonospace){properties.flags|=FontFlags.FixedPitch;}else{properties.flags&=~FontFlags.FixedPitch;}properties.defaultWidth=defaultWidth;properties.widths=glyphsWidths;properties.defaultVMetrics=defaultVMetrics;properties.vmetrics=glyphsVMetrics;}},{key:"isSerifFont",value:function isSerifFont(baseFontName){var fontNameWoStyle=baseFontName.split("-",1)[0];return fontNameWoStyle in getSerifFonts()||/serif/gi.test(fontNameWoStyle);}},{key:"getBaseFontMetrics",value:function getBaseFontMetrics(name){var defaultWidth=0;var widths=Object.create(null);var monospace=false;var stdFontMap=getStdFontMap();var lookupName=stdFontMap[name]||name;var Metrics=getMetrics();if(!(lookupName in Metrics)){lookupName=this.isSerifFont(name)?"Times-Roman":"Helvetica";}var glyphWidths=Metrics[lookupName];if(typeof glyphWidths==="number"){defaultWidth=glyphWidths;monospace=true;}else{widths=glyphWidths();}return{defaultWidth:defaultWidth,monospace:monospace,widths:widths};}},{key:"buildCharCodeToWidth",value:function buildCharCodeToWidth(widthsByGlyphName,properties){var widths=Object.create(null);var differences=properties.differences;var encoding=properties.defaultEncoding;for(var charCode=0;charCode<256;charCode++){if(charCode in differences&&widthsByGlyphName[differences[charCode]]){widths[charCode]=widthsByGlyphName[differences[charCode]];continue;}if(charCode in encoding&&widthsByGlyphName[encoding[charCode]]){widths[charCode]=widthsByGlyphName[encoding[charCode]];continue;}}return widths;}},{key:"preEvaluateFont",value:function preEvaluateFont(dict){var baseDict=dict;var type=dict.get("Subtype");if(!(type instanceof Name)){throw new FormatError("invalid font Subtype");}var composite=false;var hash;if(type.name==="Type0"){var df=dict.get("DescendantFonts");if(!df){throw new FormatError("Descendant fonts are not specified");}dict=Array.isArray(df)?this.xref.fetchIfRef(df[0]):df;if(!(dict instanceof Dict)){throw new FormatError("Descendant font is not a dictionary.");}type=dict.get("Subtype");if(!(type instanceof Name)){throw new FormatError("invalid font Subtype");}composite=true;}var firstChar=dict.get("FirstChar");if(!Number.isInteger(firstChar)){firstChar=0;}var lastChar=dict.get("LastChar");if(!Number.isInteger(lastChar)){lastChar=composite?0xffff:0xff;}var descriptor=dict.get("FontDescriptor");var toUnicode=dict.get("ToUnicode")||baseDict.get("ToUnicode");if(descriptor){hash=new MurmurHash3_64();var encoding=baseDict.getRaw("Encoding");if(encoding instanceof Name){hash.update(encoding.name);}else if(encoding instanceof Ref){hash.update(encoding.toString());}else if(encoding instanceof Dict){var _iterator76=_createForOfIteratorHelper(encoding.getRawValues()),_step76;try{for(_iterator76.s();!(_step76=_iterator76.n()).done;){var entry=_step76.value;if(entry instanceof Name){hash.update(entry.name);}else if(entry instanceof Ref){hash.update(entry.toString());}else if(Array.isArray(entry)){var diffLength=entry.length,diffBuf=new Array(diffLength);for(var j=0;j<diffLength;j++){var diffEntry=entry[j];if(diffEntry instanceof Name){diffBuf[j]=diffEntry.name;}else if(typeof diffEntry==="number"||diffEntry instanceof Ref){diffBuf[j]=diffEntry.toString();}}hash.update(diffBuf.join());}}}catch(err){_iterator76.e(err);}finally{_iterator76.f();}}hash.update("".concat(firstChar,"-").concat(lastChar));if(toUnicode instanceof BaseStream){var stream=toUnicode.str||toUnicode;var uint8array=stream.buffer?new Uint8Array(stream.buffer.buffer,0,stream.bufferLength):new Uint8Array(stream.bytes.buffer,stream.start,stream.end-stream.start);hash.update(uint8array);}else if(toUnicode instanceof Name){hash.update(toUnicode.name);}var widths=dict.get("Widths")||baseDict.get("Widths");if(Array.isArray(widths)){var widthsBuf=[];var _iterator77=_createForOfIteratorHelper(widths),_step77;try{for(_iterator77.s();!(_step77=_iterator77.n()).done;){var _entry=_step77.value;if(typeof _entry==="number"||_entry instanceof Ref){widthsBuf.push(_entry.toString());}}}catch(err){_iterator77.e(err);}finally{_iterator77.f();}hash.update(widthsBuf.join());}if(composite){hash.update("compositeFont");var compositeWidths=dict.get("W")||baseDict.get("W");if(Array.isArray(compositeWidths)){var _widthsBuf=[];var _iterator78=_createForOfIteratorHelper(compositeWidths),_step78;try{for(_iterator78.s();!(_step78=_iterator78.n()).done;){var _entry2=_step78.value;if(typeof _entry2==="number"||_entry2 instanceof Ref){_widthsBuf.push(_entry2.toString());}else if(Array.isArray(_entry2)){var subWidthsBuf=[];var _iterator79=_createForOfIteratorHelper(_entry2),_step79;try{for(_iterator79.s();!(_step79=_iterator79.n()).done;){var element=_step79.value;if(typeof element==="number"||element instanceof Ref){subWidthsBuf.push(element.toString());}}}catch(err){_iterator79.e(err);}finally{_iterator79.f();}_widthsBuf.push("[".concat(subWidthsBuf.join(),"]"));}}}catch(err){_iterator78.e(err);}finally{_iterator78.f();}hash.update(_widthsBuf.join());}var cidToGidMap=dict.getRaw("CIDToGIDMap")||baseDict.getRaw("CIDToGIDMap");if(cidToGidMap instanceof Name){hash.update(cidToGidMap.name);}else if(cidToGidMap instanceof Ref){hash.update(cidToGidMap.toString());}else if(cidToGidMap instanceof BaseStream){hash.update(cidToGidMap.peekBytes());}}}return{descriptor:descriptor,dict:dict,baseDict:baseDict,composite:composite,type:type.name,firstChar:firstChar,lastChar:lastChar,toUnicode:toUnicode,hash:hash?hash.hexdigest():""};}},{key:"translateFont",value:function(){var _translateFont=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee42(_ref73){var _fontName,_baseFont;var descriptor,dict,baseDict,composite,type,firstChar,lastChar,toUnicode,cssFontInfo,isType3Font,_bbox,baseFontName,metrics,fontNameWoStyle,_flags2,_properties,widths,standardFontName,file,_newProperties,glyphWidths,j,_iterator80,_step80,w,width,fontName,baseFont,fontNameStr,baseFontStr,fontFile,subtype,length1,length2,length3,isInternalFont,glyphScaleFactors,systemFontInfo,subtypeEntry,_standardFontName,_standardFontName2,fontMatrix,bbox,ascent,descent,xHeight,capHeight,flags,italicAngle,properties,cidEncoding,cMap,newProperties;return _regeneratorRuntime().wrap(function _callee42$(_context47){while(1)switch(_context47.prev=_context47.next){case 0:descriptor=_ref73.descriptor,dict=_ref73.dict,baseDict=_ref73.baseDict,composite=_ref73.composite,type=_ref73.type,firstChar=_ref73.firstChar,lastChar=_ref73.lastChar,toUnicode=_ref73.toUnicode,cssFontInfo=_ref73.cssFontInfo;isType3Font=type==="Type3";if(descriptor){_context47.next=32;break;}if(!isType3Font){_context47.next=10;break;}_bbox=lookupNormalRect(dict.getArray("FontBBox"),[0,0,0,0]);descriptor=new Dict(null);descriptor.set("FontName",Name.get(type));descriptor.set("FontBBox",_bbox);_context47.next=32;break;case 10:baseFontName=dict.get("BaseFont");if(baseFontName instanceof Name){_context47.next=13;break;}throw new FormatError("Base font is not specified");case 13:baseFontName=baseFontName.name.replaceAll(/[,_]/g,"-");metrics=this.getBaseFontMetrics(baseFontName);fontNameWoStyle=baseFontName.split("-",1)[0];_flags2=(this.isSerifFont(fontNameWoStyle)?FontFlags.Serif:0)|(metrics.monospace?FontFlags.FixedPitch:0)|(getSymbolsFonts()[fontNameWoStyle]?FontFlags.Symbolic:FontFlags.Nonsymbolic);_properties={type:type,name:baseFontName,loadedName:baseDict.loadedName,systemFontInfo:null,widths:metrics.widths,defaultWidth:metrics.defaultWidth,isSimulatedFlags:true,flags:_flags2,firstChar:firstChar,lastChar:lastChar,toUnicode:toUnicode,xHeight:0,capHeight:0,italicAngle:0,isType3Font:isType3Font};widths=dict.get("Widths");standardFontName=getStandardFontName(baseFontName);file=null;if(!standardFontName){_context47.next=26;break;}_context47.next=24;return this.fetchStandardFontData(standardFontName);case 24:file=_context47.sent;_properties.isInternalFont=!!file;case 26:if(!_properties.isInternalFont&&this.options.useSystemFonts){_properties.systemFontInfo=getFontSubstitution(this.systemFontCache,this.idFactory,this.options.standardFontDataUrl,baseFontName,standardFontName,type);}_context47.next=29;return this.extractDataStructures(dict,_properties);case 29:_newProperties=_context47.sent;if(Array.isArray(widths)){glyphWidths=[];j=firstChar;_iterator80=_createForOfIteratorHelper(widths);try{for(_iterator80.s();!(_step80=_iterator80.n()).done;){w=_step80.value;width=this.xref.fetchIfRef(w);if(typeof width==="number"){glyphWidths[j]=width;}j++;}}catch(err){_iterator80.e(err);}finally{_iterator80.f();}_newProperties.widths=glyphWidths;}else{_newProperties.widths=this.buildCharCodeToWidth(metrics.widths,_newProperties);}return _context47.abrupt("return",new Font(baseFontName,file,_newProperties,this.options));case 32:fontName=descriptor.get("FontName");baseFont=dict.get("BaseFont");if(typeof fontName==="string"){fontName=Name.get(fontName);}if(typeof baseFont==="string"){baseFont=Name.get(baseFont);}fontNameStr=(_fontName=fontName)===null||_fontName===void 0?void 0:_fontName.name;baseFontStr=(_baseFont=baseFont)===null||_baseFont===void 0?void 0:_baseFont.name;if(!isType3Font&&fontNameStr!==baseFontStr){info("The FontDescriptor\'s FontName is \\"".concat(fontNameStr,"\\" but ")+"should be the same as the Font\'s BaseFont \\"".concat(baseFontStr,"\\"."));if(fontNameStr&&baseFontStr&&(baseFontStr.startsWith(fontNameStr)||!isKnownFontName(fontNameStr)&&isKnownFontName(baseFontStr))){fontName=null;}}fontName||(fontName=baseFont);if(fontName instanceof Name){_context47.next=42;break;}throw new FormatError("invalid font name");case 42:_context47.prev=42;fontFile=descriptor.get("FontFile","FontFile2","FontFile3");if(!fontFile){_context47.next=51;break;}if(fontFile instanceof BaseStream){_context47.next=49;break;}throw new FormatError("FontFile should be a stream");case 49:if(!fontFile.isEmpty){_context47.next=51;break;}throw new FormatError("FontFile is empty");case 51:_context47.next=59;break;case 53:_context47.prev=53;_context47.t0=_context47["catch"](42);if(this.options.ignoreErrors){_context47.next=57;break;}throw _context47.t0;case 57:warn("translateFont - fetching \\"".concat(fontName.name,"\\" font file: \\"").concat(_context47.t0,"\\"."));fontFile=null;case 59:isInternalFont=false;glyphScaleFactors=null;systemFontInfo=null;if(!fontFile){_context47.next=66;break;}if(fontFile.dict){subtypeEntry=fontFile.dict.get("Subtype");if(subtypeEntry instanceof Name){subtype=subtypeEntry.name;}length1=fontFile.dict.get("Length1");length2=fontFile.dict.get("Length2");length3=fontFile.dict.get("Length3");}_context47.next=88;break;case 66:if(!cssFontInfo){_context47.next=80;break;}_standardFontName=getXfaFontName(fontName.name);if(!_standardFontName){_context47.next=78;break;}cssFontInfo.fontFamily="".concat(cssFontInfo.fontFamily,"-PdfJS-XFA");cssFontInfo.metrics=_standardFontName.metrics||null;glyphScaleFactors=_standardFontName.factors||null;_context47.next=74;return this.fetchStandardFontData(_standardFontName.name);case 74:fontFile=_context47.sent;isInternalFont=!!fontFile;baseDict=dict=getXfaFontDict(fontName.name);composite=true;case 78:_context47.next=88;break;case 80:if(isType3Font){_context47.next=88;break;}_standardFontName2=getStandardFontName(fontName.name);if(!_standardFontName2){_context47.next=87;break;}_context47.next=85;return this.fetchStandardFontData(_standardFontName2);case 85:fontFile=_context47.sent;isInternalFont=!!fontFile;case 87:if(!isInternalFont&&this.options.useSystemFonts){systemFontInfo=getFontSubstitution(this.systemFontCache,this.idFactory,this.options.standardFontDataUrl,fontName.name,_standardFontName2,type);}case 88:fontMatrix=lookupMatrix(dict.getArray("FontMatrix"),FONT_IDENTITY_MATRIX);bbox=lookupNormalRect(descriptor.getArray("FontBBox")||dict.getArray("FontBBox"),undefined);ascent=descriptor.get("Ascent");if(typeof ascent!=="number"){ascent=undefined;}descent=descriptor.get("Descent");if(typeof descent!=="number"){descent=undefined;}xHeight=descriptor.get("XHeight");if(typeof xHeight!=="number"){xHeight=0;}capHeight=descriptor.get("CapHeight");if(typeof capHeight!=="number"){capHeight=0;}flags=descriptor.get("Flags");if(!Number.isInteger(flags)){flags=0;}italicAngle=descriptor.get("ItalicAngle");if(typeof italicAngle!=="number"){italicAngle=0;}properties={type:type,name:fontName.name,subtype:subtype,file:fontFile,length1:length1,length2:length2,length3:length3,isInternalFont:isInternalFont,loadedName:baseDict.loadedName,composite:composite,fixedPitch:false,fontMatrix:fontMatrix,firstChar:firstChar,lastChar:lastChar,toUnicode:toUnicode,bbox:bbox,ascent:ascent,descent:descent,xHeight:xHeight,capHeight:capHeight,flags:flags,italicAngle:italicAngle,isType3Font:isType3Font,cssFontInfo:cssFontInfo,scaleFactors:glyphScaleFactors,systemFontInfo:systemFontInfo};if(!composite){_context47.next=111;break;}cidEncoding=baseDict.get("Encoding");if(cidEncoding instanceof Name){properties.cidEncoding=cidEncoding.name;}_context47.next=108;return CMapFactory.create({encoding:cidEncoding,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null});case 108:cMap=_context47.sent;properties.cMap=cMap;properties.vertical=properties.cMap.vertical;case 111:_context47.next=113;return this.extractDataStructures(dict,properties);case 113:newProperties=_context47.sent;this.extractWidths(dict,descriptor,newProperties);return _context47.abrupt("return",new Font(fontName.name,fontFile,newProperties,this.options));case 116:case"end":return _context47.stop();}},_callee42,this,[[42,53]]);}));function translateFont(_x74){return _translateFont.apply(this,arguments);}return translateFont;}()}],[{key:"buildFontPaths",value:function buildFontPaths(font,glyphs,handler,evaluatorOptions){function buildPath(fontChar){var glyphName="".concat(font.loadedName,"_path_").concat(fontChar);try{if(font.renderer.hasBuiltPath(fontChar)){return;}handler.send("commonobj",[glyphName,"FontPath",font.renderer.getPathJs(fontChar)]);}catch(reason){if(evaluatorOptions.ignoreErrors){warn("buildFontPaths - ignoring ".concat(glyphName," glyph: \\"").concat(reason,"\\"."));return;}throw reason;}}var _iterator81=_createForOfIteratorHelper(glyphs),_step81;try{for(_iterator81.s();!(_step81=_iterator81.n()).done;){var glyph=_step81.value;buildPath(glyph.fontChar);var accent=glyph.accent;if(accent!==null&&accent!==void 0&&accent.fontChar){buildPath(accent.fontChar);}}}catch(err){_iterator81.e(err);}finally{_iterator81.f();}}},{key:"fallbackFontDict",get:function get(){var dict=new Dict();dict.set("BaseFont",Name.get("Helvetica"));dict.set("Type",Name.get("FallbackType"));dict.set("Subtype",Name.get("FallbackType"));dict.set("Encoding",Name.get("WinAnsiEncoding"));return shadow(this,"fallbackFontDict",dict);}}]);}();var TranslatedFont=/*#__PURE__*/function(){function TranslatedFont(_ref74){var loadedName=_ref74.loadedName,font=_ref74.font,dict=_ref74.dict;_classCallCheck(this,TranslatedFont);this.loadedName=loadedName;this.font=font;this.dict=dict;this.type3Loaded=null;this.type3Dependencies=font.isType3Font?new Set():null;this.sent=false;}return _createClass(TranslatedFont,[{key:"send",value:function send(handler){if(this.sent){return;}this.sent=true;handler.send("commonobj",[this.loadedName,"Font",this.font.exportData()]);}},{key:"fallback",value:function fallback(handler,evaluatorOptions){if(!this.font.data){return;}this.font.disableFontFace=true;PartialEvaluator.buildFontPaths(this.font,this.font.glyphCacheValues,handler,evaluatorOptions);}},{key:"loadType3Data",value:function loadType3Data(evaluator,resources,task){var _this54=this;if(this.type3Loaded){return this.type3Loaded;}if(!this.font.isType3Font){throw new Error("Must be a Type3 font.");}var type3Evaluator=evaluator.clone({ignoreErrors:false});var type3FontRefs=new RefSet(evaluator.type3FontRefs);if(this.dict.objId&&!type3FontRefs.has(this.dict.objId)){type3FontRefs.put(this.dict.objId);}type3Evaluator.type3FontRefs=type3FontRefs;var translatedFont=this.font,type3Dependencies=this.type3Dependencies;var loadCharProcsPromise=Promise.resolve();var charProcs=this.dict.get("CharProcs");var fontResources=this.dict.get("Resources")||resources;var charProcOperatorList=Object.create(null);var fontBBox=Util.normalizeRect(translatedFont.bbox||[0,0,0,0]),width=fontBBox[2]-fontBBox[0],height=fontBBox[3]-fontBBox[1];var fontBBoxSize=Math.hypot(width,height);var _iterator82=_createForOfIteratorHelper(charProcs.getKeys()),_step82;try{var _loop3=function _loop3(){var key=_step82.value;loadCharProcsPromise=loadCharProcsPromise.then(function(){var glyphStream=charProcs.get(key);var operatorList=new OperatorList();return type3Evaluator.getOperatorList({stream:glyphStream,task:task,resources:fontResources,operatorList:operatorList}).then(function(){if(operatorList.fnArray[0]===OPS.setCharWidthAndBounds){_this54._removeType3ColorOperators(operatorList,fontBBoxSize);}charProcOperatorList[key]=operatorList.getIR();var _iterator83=_createForOfIteratorHelper(operatorList.dependencies),_step83;try{for(_iterator83.s();!(_step83=_iterator83.n()).done;){var dependency=_step83.value;type3Dependencies.add(dependency);}}catch(err){_iterator83.e(err);}finally{_iterator83.f();}})["catch"](function(reason){warn("Type3 font resource \\"".concat(key,"\\" is not available."));var dummyOperatorList=new OperatorList();charProcOperatorList[key]=dummyOperatorList.getIR();});});};for(_iterator82.s();!(_step82=_iterator82.n()).done;){_loop3();}}catch(err){_iterator82.e(err);}finally{_iterator82.f();}this.type3Loaded=loadCharProcsPromise.then(function(){translatedFont.charProcOperatorList=charProcOperatorList;if(_this54._bbox){translatedFont.isCharBBox=true;translatedFont.bbox=_this54._bbox;}});return this.type3Loaded;}},{key:"_removeType3ColorOperators",value:function _removeType3ColorOperators(operatorList){var fontBBoxSize=arguments.length>1&&arguments[1]!==undefined?arguments[1]:NaN;var charBBox=Util.normalizeRect(operatorList.argsArray[0].slice(2)),width=charBBox[2]-charBBox[0],height=charBBox[3]-charBBox[1];var charBBoxSize=Math.hypot(width,height);if(width===0||height===0){operatorList.fnArray.splice(0,1);operatorList.argsArray.splice(0,1);}else if(fontBBoxSize===0||Math.round(charBBoxSize/fontBBoxSize)>=10){if(!this._bbox){this._bbox=[Infinity,Infinity,-Infinity,-Infinity];}this._bbox[0]=Math.min(this._bbox[0],charBBox[0]);this._bbox[1]=Math.min(this._bbox[1],charBBox[1]);this._bbox[2]=Math.max(this._bbox[2],charBBox[2]);this._bbox[3]=Math.max(this._bbox[3],charBBox[3]);}var i=0,ii=operatorList.length;while(i<ii){switch(operatorList.fnArray[i]){case OPS.setCharWidthAndBounds:break;case OPS.setStrokeColorSpace:case OPS.setFillColorSpace:case OPS.setStrokeColor:case OPS.setStrokeColorN:case OPS.setFillColor:case OPS.setFillColorN:case OPS.setStrokeGray:case OPS.setFillGray:case OPS.setStrokeRGBColor:case OPS.setFillRGBColor:case OPS.setStrokeCMYKColor:case OPS.setFillCMYKColor:case OPS.shadingFill:case OPS.setRenderingIntent:operatorList.fnArray.splice(i,1);operatorList.argsArray.splice(i,1);ii--;continue;case OPS.setGState:var _operatorList$argsArr=_slicedToArray(operatorList.argsArray[i],1),gStateObj=_operatorList$argsArr[0];var j=0,jj=gStateObj.length;while(j<jj){var _gStateObj$j=_slicedToArray(gStateObj[j],1),gStateKey=_gStateObj$j[0];switch(gStateKey){case"TR":case"TR2":case"HT":case"BG":case"BG2":case"UCR":case"UCR2":gStateObj.splice(j,1);jj--;continue;}j++;}break;}i++;}}}]);}();var StateManager=/*#__PURE__*/function(){function StateManager(){var initialState=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new EvalState();_classCallCheck(this,StateManager);this.state=initialState;this.stateStack=[];}return _createClass(StateManager,[{key:"save",value:function save(){var old=this.state;this.stateStack.push(this.state);this.state=old.clone();}},{key:"restore",value:function restore(){var prev=this.stateStack.pop();if(prev){this.state=prev;}}},{key:"transform",value:function transform(args){this.state.ctm=Util.transform(this.state.ctm,args);}}]);}();var TextState=/*#__PURE__*/function(){function TextState(){_classCallCheck(this,TextState);this.ctm=new Float32Array(IDENTITY_MATRIX);this.fontName=null;this.fontSize=0;this.loadedName=null;this.font=null;this.fontMatrix=FONT_IDENTITY_MATRIX;this.textMatrix=IDENTITY_MATRIX.slice();this.textLineMatrix=IDENTITY_MATRIX.slice();this.charSpacing=0;this.wordSpacing=0;this.leading=0;this.textHScale=1;this.textRise=0;}return _createClass(TextState,[{key:"setTextMatrix",value:function setTextMatrix(a,b,c,d,e,f){var m=this.textMatrix;m[0]=a;m[1]=b;m[2]=c;m[3]=d;m[4]=e;m[5]=f;}},{key:"setTextLineMatrix",value:function setTextLineMatrix(a,b,c,d,e,f){var m=this.textLineMatrix;m[0]=a;m[1]=b;m[2]=c;m[3]=d;m[4]=e;m[5]=f;}},{key:"translateTextMatrix",value:function translateTextMatrix(x,y){var m=this.textMatrix;m[4]=m[0]*x+m[2]*y+m[4];m[5]=m[1]*x+m[3]*y+m[5];}},{key:"translateTextLineMatrix",value:function translateTextLineMatrix(x,y){var m=this.textLineMatrix;m[4]=m[0]*x+m[2]*y+m[4];m[5]=m[1]*x+m[3]*y+m[5];}},{key:"carriageReturn",value:function carriageReturn(){this.translateTextLineMatrix(0,-this.leading);this.textMatrix=this.textLineMatrix.slice();}},{key:"clone",value:function clone(){var clone=Object.create(this);clone.textMatrix=this.textMatrix.slice();clone.textLineMatrix=this.textLineMatrix.slice();clone.fontMatrix=this.fontMatrix.slice();return clone;}}]);}();var EvalState=/*#__PURE__*/function(){function EvalState(){_classCallCheck(this,EvalState);this.ctm=new Float32Array(IDENTITY_MATRIX);this.font=null;this.textRenderingMode=TextRenderingMode.FILL;this._fillColorSpace=ColorSpace.singletons.gray;this._strokeColorSpace=ColorSpace.singletons.gray;this.patternFillColorSpace=null;this.patternStrokeColorSpace=null;}return _createClass(EvalState,[{key:"fillColorSpace",get:function get(){return this._fillColorSpace;},set:function set(colorSpace){this._fillColorSpace=this.patternFillColorSpace=colorSpace;}},{key:"strokeColorSpace",get:function get(){return this._strokeColorSpace;},set:function set(colorSpace){this._strokeColorSpace=this.patternStrokeColorSpace=colorSpace;}},{key:"clone",value:function clone(){return Object.create(this);}}]);}();var EvaluatorPreprocessor=/*#__PURE__*/function(){function EvaluatorPreprocessor(stream,xref){var stateManager=arguments.length>2&&arguments[2]!==undefined?arguments[2]:new StateManager();_classCallCheck(this,EvaluatorPreprocessor);this.parser=new Parser({lexer:new Lexer(stream,EvaluatorPreprocessor.opMap),xref:xref});this.stateManager=stateManager;this.nonProcessedArgs=[];this._isPathOp=false;this._numInvalidPathOPS=0;}return _createClass(EvaluatorPreprocessor,[{key:"savedStatesDepth",get:function get(){return this.stateManager.stateStack.length;}},{key:"read",value:function read(operation){var args=operation.args;while(true){var obj=this.parser.getObj();if(obj instanceof Cmd){var cmd=obj.cmd;var opSpec=EvaluatorPreprocessor.opMap[cmd];if(!opSpec){warn("Unknown command \\"".concat(cmd,"\\"."));continue;}var fn=opSpec.id;var numArgs=opSpec.numArgs;var argsLength=args!==null?args.length:0;if(!this._isPathOp){this._numInvalidPathOPS=0;}this._isPathOp=fn>=OPS.moveTo&&fn<=OPS.endPath;if(!opSpec.variableArgs){if(argsLength!==numArgs){var nonProcessedArgs=this.nonProcessedArgs;while(argsLength>numArgs){nonProcessedArgs.push(args.shift());argsLength--;}while(argsLength<numArgs&&nonProcessedArgs.length!==0){if(args===null){args=[];}args.unshift(nonProcessedArgs.pop());argsLength++;}}if(argsLength<numArgs){var partialMsg="command ".concat(cmd,": expected ").concat(numArgs," args, ")+"but received ".concat(argsLength," args.");if(this._isPathOp&&++this._numInvalidPathOPS>EvaluatorPreprocessor.MAX_INVALID_PATH_OPS){throw new FormatError("Invalid ".concat(partialMsg));}warn("Skipping ".concat(partialMsg));if(args!==null){args.length=0;}continue;}}else if(argsLength>numArgs){info("Command ".concat(cmd,": expected [0, ").concat(numArgs,"] args, ")+"but received ".concat(argsLength," args."));}this.preprocessCommand(fn,args);operation.fn=fn;operation.args=args;return true;}if(obj===EOF){return false;}if(obj!==null){if(args===null){args=[];}args.push(obj);if(args.length>33){throw new FormatError("Too many arguments");}}}}},{key:"preprocessCommand",value:function preprocessCommand(fn,args){switch(fn|0){case OPS.save:this.stateManager.save();break;case OPS.restore:this.stateManager.restore();break;case OPS.transform:this.stateManager.transform(args);break;}}}],[{key:"opMap",get:function get(){return shadow(this,"opMap",Object.assign(Object.create(null),{w:{id:OPS.setLineWidth,numArgs:1,variableArgs:false},J:{id:OPS.setLineCap,numArgs:1,variableArgs:false},j:{id:OPS.setLineJoin,numArgs:1,variableArgs:false},M:{id:OPS.setMiterLimit,numArgs:1,variableArgs:false},d:{id:OPS.setDash,numArgs:2,variableArgs:false},ri:{id:OPS.setRenderingIntent,numArgs:1,variableArgs:false},i:{id:OPS.setFlatness,numArgs:1,variableArgs:false},gs:{id:OPS.setGState,numArgs:1,variableArgs:false},q:{id:OPS.save,numArgs:0,variableArgs:false},Q:{id:OPS.restore,numArgs:0,variableArgs:false},cm:{id:OPS.transform,numArgs:6,variableArgs:false},m:{id:OPS.moveTo,numArgs:2,variableArgs:false},l:{id:OPS.lineTo,numArgs:2,variableArgs:false},c:{id:OPS.curveTo,numArgs:6,variableArgs:false},v:{id:OPS.curveTo2,numArgs:4,variableArgs:false},y:{id:OPS.curveTo3,numArgs:4,variableArgs:false},h:{id:OPS.closePath,numArgs:0,variableArgs:false},re:{id:OPS.rectangle,numArgs:4,variableArgs:false},S:{id:OPS.stroke,numArgs:0,variableArgs:false},s:{id:OPS.closeStroke,numArgs:0,variableArgs:false},f:{id:OPS.fill,numArgs:0,variableArgs:false},F:{id:OPS.fill,numArgs:0,variableArgs:false},"f*":{id:OPS.eoFill,numArgs:0,variableArgs:false},B:{id:OPS.fillStroke,numArgs:0,variableArgs:false},"B*":{id:OPS.eoFillStroke,numArgs:0,variableArgs:false},b:{id:OPS.closeFillStroke,numArgs:0,variableArgs:false},"b*":{id:OPS.closeEOFillStroke,numArgs:0,variableArgs:false},n:{id:OPS.endPath,numArgs:0,variableArgs:false},W:{id:OPS.clip,numArgs:0,variableArgs:false},"W*":{id:OPS.eoClip,numArgs:0,variableArgs:false},BT:{id:OPS.beginText,numArgs:0,variableArgs:false},ET:{id:OPS.endText,numArgs:0,variableArgs:false},Tc:{id:OPS.setCharSpacing,numArgs:1,variableArgs:false},Tw:{id:OPS.setWordSpacing,numArgs:1,variableArgs:false},Tz:{id:OPS.setHScale,numArgs:1,variableArgs:false},TL:{id:OPS.setLeading,numArgs:1,variableArgs:false},Tf:{id:OPS.setFont,numArgs:2,variableArgs:false},Tr:{id:OPS.setTextRenderingMode,numArgs:1,variableArgs:false},Ts:{id:OPS.setTextRise,numArgs:1,variableArgs:false},Td:{id:OPS.moveText,numArgs:2,variableArgs:false},TD:{id:OPS.setLeadingMoveText,numArgs:2,variableArgs:false},Tm:{id:OPS.setTextMatrix,numArgs:6,variableArgs:false},"T*":{id:OPS.nextLine,numArgs:0,variableArgs:false},Tj:{id:OPS.showText,numArgs:1,variableArgs:false},TJ:{id:OPS.showSpacedText,numArgs:1,variableArgs:false},"\'":{id:OPS.nextLineShowText,numArgs:1,variableArgs:false},\'"\':{id:OPS.nextLineSetSpacingShowText,numArgs:3,variableArgs:false},d0:{id:OPS.setCharWidth,numArgs:2,variableArgs:false},d1:{id:OPS.setCharWidthAndBounds,numArgs:6,variableArgs:false},CS:{id:OPS.setStrokeColorSpace,numArgs:1,variableArgs:false},cs:{id:OPS.setFillColorSpace,numArgs:1,variableArgs:false},SC:{id:OPS.setStrokeColor,numArgs:4,variableArgs:true},SCN:{id:OPS.setStrokeColorN,numArgs:33,variableArgs:true},sc:{id:OPS.setFillColor,numArgs:4,variableArgs:true},scn:{id:OPS.setFillColorN,numArgs:33,variableArgs:true},G:{id:OPS.setStrokeGray,numArgs:1,variableArgs:false},g:{id:OPS.setFillGray,numArgs:1,variableArgs:false},RG:{id:OPS.setStrokeRGBColor,numArgs:3,variableArgs:false},rg:{id:OPS.setFillRGBColor,numArgs:3,variableArgs:false},K:{id:OPS.setStrokeCMYKColor,numArgs:4,variableArgs:false},k:{id:OPS.setFillCMYKColor,numArgs:4,variableArgs:false},sh:{id:OPS.shadingFill,numArgs:1,variableArgs:false},BI:{id:OPS.beginInlineImage,numArgs:0,variableArgs:false},ID:{id:OPS.beginImageData,numArgs:0,variableArgs:false},EI:{id:OPS.endInlineImage,numArgs:1,variableArgs:false},Do:{id:OPS.paintXObject,numArgs:1,variableArgs:false},MP:{id:OPS.markPoint,numArgs:1,variableArgs:false},DP:{id:OPS.markPointProps,numArgs:2,variableArgs:false},BMC:{id:OPS.beginMarkedContent,numArgs:1,variableArgs:false},BDC:{id:OPS.beginMarkedContentProps,numArgs:2,variableArgs:false},EMC:{id:OPS.endMarkedContent,numArgs:0,variableArgs:false},BX:{id:OPS.beginCompat,numArgs:0,variableArgs:false},EX:{id:OPS.endCompat,numArgs:0,variableArgs:false},BM:null,BD:null,"true":null,fa:null,fal:null,fals:null,"false":null,nu:null,nul:null,"null":null}));}}]);}();_defineProperty(EvaluatorPreprocessor,"MAX_INVALID_PATH_OPS",10);;// ./src/core/default_appearance.js\nvar DefaultAppearanceEvaluator=/*#__PURE__*/function(_EvaluatorPreprocesso){function DefaultAppearanceEvaluator(str){_classCallCheck(this,DefaultAppearanceEvaluator);return _callSuper(this,DefaultAppearanceEvaluator,[new StringStream(str)]);}_inherits(DefaultAppearanceEvaluator,_EvaluatorPreprocesso);return _createClass(DefaultAppearanceEvaluator,[{key:"parse",value:function parse(){var operation={fn:0,args:[]};var result={fontSize:0,fontName:"",fontColor:new Uint8ClampedArray(3)};try{while(true){operation.args.length=0;if(!this.read(operation)){break;}if(this.savedStatesDepth!==0){continue;}var fn=operation.fn,args=operation.args;switch(fn|0){case OPS.setFont:var _args48=_slicedToArray(args,2),fontName=_args48[0],fontSize=_args48[1];if(fontName instanceof Name){result.fontName=fontName.name;}if(typeof fontSize==="number"&&fontSize>0){result.fontSize=fontSize;}break;case OPS.setFillRGBColor:ColorSpace.singletons.rgb.getRgbItem(args,0,result.fontColor,0);break;case OPS.setFillGray:ColorSpace.singletons.gray.getRgbItem(args,0,result.fontColor,0);break;case OPS.setFillCMYKColor:ColorSpace.singletons.cmyk.getRgbItem(args,0,result.fontColor,0);break;}}}catch(reason){warn("parseDefaultAppearance - ignoring errors: \\"".concat(reason,"\\"."));}return result;}}]);}(EvaluatorPreprocessor);function parseDefaultAppearance(str){return new DefaultAppearanceEvaluator(str).parse();}var AppearanceStreamEvaluator=/*#__PURE__*/function(_EvaluatorPreprocesso2){function AppearanceStreamEvaluator(stream,evaluatorOptions,xref){var _stream$dict2;var _this55;_classCallCheck(this,AppearanceStreamEvaluator);_this55=_callSuper(this,AppearanceStreamEvaluator,[stream]);_this55.stream=stream;_this55.evaluatorOptions=evaluatorOptions;_this55.xref=xref;_this55.resources=(_stream$dict2=stream.dict)===null||_stream$dict2===void 0?void 0:_stream$dict2.get("Resources");return _this55;}_inherits(AppearanceStreamEvaluator,_EvaluatorPreprocesso2);return _createClass(AppearanceStreamEvaluator,[{key:"parse",value:function parse(){var operation={fn:0,args:[]};var result={scaleFactor:1,fontSize:0,fontName:"",fontColor:new Uint8ClampedArray(3),fillColorSpace:ColorSpace.singletons.gray};var breakLoop=false;var stack=[];try{while(true){operation.args.length=0;if(breakLoop||!this.read(operation)){break;}var fn=operation.fn,args=operation.args;switch(fn|0){case OPS.save:stack.push({scaleFactor:result.scaleFactor,fontSize:result.fontSize,fontName:result.fontName,fontColor:result.fontColor.slice(),fillColorSpace:result.fillColorSpace});break;case OPS.restore:result=stack.pop()||result;break;case OPS.setTextMatrix:result.scaleFactor*=Math.hypot(args[0],args[1]);break;case OPS.setFont:var _args49=_slicedToArray(args,2),fontName=_args49[0],fontSize=_args49[1];if(fontName instanceof Name){result.fontName=fontName.name;}if(typeof fontSize==="number"&&fontSize>0){result.fontSize=fontSize*result.scaleFactor;}break;case OPS.setFillColorSpace:result.fillColorSpace=ColorSpace.parse({cs:args[0],xref:this.xref,resources:this.resources,pdfFunctionFactory:this._pdfFunctionFactory,localColorSpaceCache:this._localColorSpaceCache});break;case OPS.setFillColor:var cs=result.fillColorSpace;cs.getRgbItem(args,0,result.fontColor,0);break;case OPS.setFillRGBColor:ColorSpace.singletons.rgb.getRgbItem(args,0,result.fontColor,0);break;case OPS.setFillGray:ColorSpace.singletons.gray.getRgbItem(args,0,result.fontColor,0);break;case OPS.setFillCMYKColor:ColorSpace.singletons.cmyk.getRgbItem(args,0,result.fontColor,0);break;case OPS.showText:case OPS.showSpacedText:case OPS.nextLineShowText:case OPS.nextLineSetSpacingShowText:breakLoop=true;break;}}}catch(reason){warn("parseAppearanceStream - ignoring errors: \\"".concat(reason,"\\"."));}this.stream.reset();delete result.scaleFactor;delete result.fillColorSpace;return result;}},{key:"_localColorSpaceCache",get:function get(){return shadow(this,"_localColorSpaceCache",new LocalColorSpaceCache());}},{key:"_pdfFunctionFactory",get:function get(){var pdfFunctionFactory=new PDFFunctionFactory({xref:this.xref,isEvalSupported:this.evaluatorOptions.isEvalSupported});return shadow(this,"_pdfFunctionFactory",pdfFunctionFactory);}}]);}(EvaluatorPreprocessor);function parseAppearanceStream(stream,evaluatorOptions,xref){return new AppearanceStreamEvaluator(stream,evaluatorOptions,xref).parse();}function getPdfColor(color,isFill){if(color[0]===color[1]&&color[1]===color[2]){var gray=color[0]/255;return"".concat(numberToString(gray)," ").concat(isFill?"g":"G");}return Array.from(color,function(c){return numberToString(c/255);}).join(" ")+" ".concat(isFill?"rg":"RG");}function createDefaultAppearance(_ref75){var fontSize=_ref75.fontSize,fontName=_ref75.fontName,fontColor=_ref75.fontColor;return"/".concat(escapePDFName(fontName)," ").concat(fontSize," Tf ").concat(getPdfColor(fontColor,true));}var FakeUnicodeFont=/*#__PURE__*/function(){function FakeUnicodeFont(xref,fontFamily){_classCallCheck(this,FakeUnicodeFont);this.xref=xref;this.widths=null;this.firstChar=Infinity;this.lastChar=-Infinity;this.fontFamily=fontFamily;var canvas=new OffscreenCanvas(1,1);this.ctxMeasure=canvas.getContext("2d",{willReadFrequently:true});if(!FakeUnicodeFont._fontNameId){FakeUnicodeFont._fontNameId=1;}this.fontName=Name.get("InvalidPDFjsFont_".concat(fontFamily,"_").concat(FakeUnicodeFont._fontNameId++));}return _createClass(FakeUnicodeFont,[{key:"fontDescriptorRef",get:function get(){if(!FakeUnicodeFont._fontDescriptorRef){var fontDescriptor=new Dict(this.xref);fontDescriptor.set("Type",Name.get("FontDescriptor"));fontDescriptor.set("FontName",this.fontName);fontDescriptor.set("FontFamily","MyriadPro Regular");fontDescriptor.set("FontBBox",[0,0,0,0]);fontDescriptor.set("FontStretch",Name.get("Normal"));fontDescriptor.set("FontWeight",400);fontDescriptor.set("ItalicAngle",0);FakeUnicodeFont._fontDescriptorRef=this.xref.getNewPersistentRef(fontDescriptor);}return FakeUnicodeFont._fontDescriptorRef;}},{key:"descendantFontRef",get:function get(){var descendantFont=new Dict(this.xref);descendantFont.set("BaseFont",this.fontName);descendantFont.set("Type",Name.get("Font"));descendantFont.set("Subtype",Name.get("CIDFontType0"));descendantFont.set("CIDToGIDMap",Name.get("Identity"));descendantFont.set("FirstChar",this.firstChar);descendantFont.set("LastChar",this.lastChar);descendantFont.set("FontDescriptor",this.fontDescriptorRef);descendantFont.set("DW",1000);var widths=[];var chars=_toConsumableArray(this.widths.entries()).sort();var currentChar=null;var currentWidths=null;var _iterator84=_createForOfIteratorHelper(chars),_step84;try{for(_iterator84.s();!(_step84=_iterator84.n()).done;){var _step84$value=_slicedToArray(_step84.value,2),_char10=_step84$value[0],width=_step84$value[1];if(!currentChar){currentChar=_char10;currentWidths=[width];continue;}if(_char10===currentChar+currentWidths.length){currentWidths.push(width);}else{widths.push(currentChar,currentWidths);currentChar=_char10;currentWidths=[width];}}}catch(err){_iterator84.e(err);}finally{_iterator84.f();}if(currentChar){widths.push(currentChar,currentWidths);}descendantFont.set("W",widths);var cidSystemInfo=new Dict(this.xref);cidSystemInfo.set("Ordering","Identity");cidSystemInfo.set("Registry","Adobe");cidSystemInfo.set("Supplement",0);descendantFont.set("CIDSystemInfo",cidSystemInfo);return this.xref.getNewPersistentRef(descendantFont);}},{key:"baseFontRef",get:function get(){var baseFont=new Dict(this.xref);baseFont.set("BaseFont",this.fontName);baseFont.set("Type",Name.get("Font"));baseFont.set("Subtype",Name.get("Type0"));baseFont.set("Encoding",Name.get("Identity-H"));baseFont.set("DescendantFonts",[this.descendantFontRef]);baseFont.set("ToUnicode",Name.get("Identity-H"));return this.xref.getNewPersistentRef(baseFont);}},{key:"resources",get:function get(){var resources=new Dict(this.xref);var font=new Dict(this.xref);font.set(this.fontName.name,this.baseFontRef);resources.set("Font",font);return resources;}},{key:"_createContext",value:function _createContext(){this.widths=new Map();this.ctxMeasure.font="1000px ".concat(this.fontFamily);return this.ctxMeasure;}},{key:"createFontResources",value:function createFontResources(text){var ctx=this._createContext();var _iterator85=_createForOfIteratorHelper(text.split(/\\r\\n?|\\n/)),_step85;try{for(_iterator85.s();!(_step85=_iterator85.n()).done;){var line=_step85.value;var _iterator86=_createForOfIteratorHelper(line.split("")),_step86;try{for(_iterator86.s();!(_step86=_iterator86.n()).done;){var _char11=_step86.value;var code=_char11.charCodeAt(0);if(this.widths.has(code)){continue;}var metrics=ctx.measureText(_char11);var width=Math.ceil(metrics.width);this.widths.set(code,width);this.firstChar=Math.min(code,this.firstChar);this.lastChar=Math.max(code,this.lastChar);}}catch(err){_iterator86.e(err);}finally{_iterator86.f();}}}catch(err){_iterator85.e(err);}finally{_iterator85.f();}return this.resources;}},{key:"createAppearance",value:function createAppearance(text,rect,rotation,fontSize,bgColor,strokeAlpha){var ctx=this._createContext();var lines=[];var maxWidth=-Infinity;var _iterator87=_createForOfIteratorHelper(text.split(/\\r\\n?|\\n/)),_step87;try{for(_iterator87.s();!(_step87=_iterator87.n()).done;){var _line=_step87.value;lines.push(_line);var lineWidth=ctx.measureText(_line).width;maxWidth=Math.max(maxWidth,lineWidth);var _iterator88=_createForOfIteratorHelper(codePointIter(_line)),_step88;try{for(_iterator88.s();!(_step88=_iterator88.n()).done;){var code=_step88.value;var _char12=String.fromCodePoint(code);var width=this.widths.get(code);if(width===undefined){var metrics=ctx.measureText(_char12);width=Math.ceil(metrics.width);this.widths.set(code,width);this.firstChar=Math.min(code,this.firstChar);this.lastChar=Math.max(code,this.lastChar);}}}catch(err){_iterator88.e(err);}finally{_iterator88.f();}}}catch(err){_iterator87.e(err);}finally{_iterator87.f();}maxWidth*=fontSize/1000;var _rect=_slicedToArray(rect,4),x1=_rect[0],y1=_rect[1],x2=_rect[2],y2=_rect[3];var w=x2-x1;var h=y2-y1;if(rotation%180!==0){var _ref76=[h,w];w=_ref76[0];h=_ref76[1];}var hscale=1;if(maxWidth>w){hscale=w/maxWidth;}var vscale=1;var lineHeight=LINE_FACTOR*fontSize;var lineDescent=LINE_DESCENT_FACTOR*fontSize;var maxHeight=lineHeight*lines.length;if(maxHeight>h){vscale=h/maxHeight;}var fscale=Math.min(hscale,vscale);var newFontSize=fontSize*fscale;var buffer=["q","0 0 ".concat(numberToString(w)," ").concat(numberToString(h)," re W n"),"BT","1 0 0 1 0 ".concat(numberToString(h+lineDescent)," Tm 0 Tc ").concat(getPdfColor(bgColor,true)),"/".concat(this.fontName.name," ").concat(numberToString(newFontSize)," Tf")];var resources=this.resources;strokeAlpha=typeof strokeAlpha==="number"&&strokeAlpha>=0&&strokeAlpha<=1?strokeAlpha:1;if(strokeAlpha!==1){buffer.push("/R0 gs");var extGState=new Dict(this.xref);var r0=new Dict(this.xref);r0.set("ca",strokeAlpha);r0.set("CA",strokeAlpha);r0.set("Type",Name.get("ExtGState"));extGState.set("R0",r0);resources.set("ExtGState",extGState);}var vShift=numberToString(lineHeight);for(var _i50=0,_lines=lines;_i50<_lines.length;_i50++){var line=_lines[_i50];buffer.push("0 -".concat(vShift," Td <").concat(stringToUTF16HexString(line),"> Tj"));}buffer.push("ET","Q");var appearance=buffer.join("\\n");var appearanceStreamDict=new Dict(this.xref);appearanceStreamDict.set("Subtype",Name.get("Form"));appearanceStreamDict.set("Type",Name.get("XObject"));appearanceStreamDict.set("BBox",[0,0,w,h]);appearanceStreamDict.set("Length",appearance.length);appearanceStreamDict.set("Resources",resources);if(rotation){var matrix=_getRotationMatrix(rotation,w,h);appearanceStreamDict.set("Matrix",matrix);}var ap=new StringStream(appearance);ap.dict=appearanceStreamDict;return ap;}}],[{key:"getFirstPositionInfo",value:function getFirstPositionInfo(rect,rotation,fontSize){var _rect2=_slicedToArray(rect,4),x1=_rect2[0],y1=_rect2[1],x2=_rect2[2],y2=_rect2[3];var w=x2-x1;var h=y2-y1;if(rotation%180!==0){var _ref77=[h,w];w=_ref77[0];h=_ref77[1];}var lineHeight=LINE_FACTOR*fontSize;var lineDescent=LINE_DESCENT_FACTOR*fontSize;return{coords:[0,h+lineDescent-lineHeight],bbox:[0,0,w,h],matrix:rotation!==0?_getRotationMatrix(rotation,h,lineHeight):undefined};}}]);}();;// ./src/core/name_number_tree.js\nvar NameOrNumberTree=/*#__PURE__*/function(){function NameOrNumberTree(root,xref,type){_classCallCheck(this,NameOrNumberTree);this.root=root;this.xref=xref;this._type=type;}return _createClass(NameOrNumberTree,[{key:"getAll",value:function getAll(){var map=new Map();if(!this.root){return map;}var xref=this.xref;var processed=new RefSet();processed.put(this.root);var queue=[this.root];while(queue.length>0){var obj=xref.fetchIfRef(queue.shift());if(!(obj instanceof Dict)){continue;}if(obj.has("Kids")){var kids=obj.get("Kids");if(!Array.isArray(kids)){continue;}var _iterator89=_createForOfIteratorHelper(kids),_step89;try{for(_iterator89.s();!(_step89=_iterator89.n()).done;){var kid=_step89.value;if(processed.has(kid)){throw new FormatError("Duplicate entry in \\"".concat(this._type,"\\" tree."));}queue.push(kid);processed.put(kid);}}catch(err){_iterator89.e(err);}finally{_iterator89.f();}continue;}var entries=obj.get(this._type);if(!Array.isArray(entries)){continue;}for(var i=0,ii=entries.length;i<ii;i+=2){map.set(xref.fetchIfRef(entries[i]),xref.fetchIfRef(entries[i+1]));}}return map;}},{key:"getRaw",value:function getRaw(key){if(!this.root){return null;}var xref=this.xref;var kidsOrEntries=xref.fetchIfRef(this.root);var loopCount=0;var MAX_LEVELS=10;while(kidsOrEntries.has("Kids")){if(++loopCount>MAX_LEVELS){warn("Search depth limit reached for \\"".concat(this._type,"\\" tree."));return null;}var kids=kidsOrEntries.get("Kids");if(!Array.isArray(kids)){return null;}var l=0,r=kids.length-1;while(l<=r){var m=l+r>>1;var kid=xref.fetchIfRef(kids[m]);var limits=kid.get("Limits");if(key<xref.fetchIfRef(limits[0])){r=m-1;}else if(key>xref.fetchIfRef(limits[1])){l=m+1;}else{kidsOrEntries=kid;break;}}if(l>r){return null;}}var entries=kidsOrEntries.get(this._type);if(Array.isArray(entries)){var _l=0,_r=entries.length-2;while(_l<=_r){var tmp=_l+_r>>1,_m2=tmp+(tmp&1);var currentKey=xref.fetchIfRef(entries[_m2]);if(key<currentKey){_r=_m2-2;}else if(key>currentKey){_l=_m2+2;}else{return entries[_m2+1];}}}return null;}},{key:"get",value:function get(key){return this.xref.fetchIfRef(this.getRaw(key));}}]);}();var NameTree=/*#__PURE__*/function(_NameOrNumberTree){function NameTree(root,xref){_classCallCheck(this,NameTree);return _callSuper(this,NameTree,[root,xref,"Names"]);}_inherits(NameTree,_NameOrNumberTree);return _createClass(NameTree);}(NameOrNumberTree);var NumberTree=/*#__PURE__*/function(_NameOrNumberTree2){function NumberTree(root,xref){_classCallCheck(this,NumberTree);return _callSuper(this,NumberTree,[root,xref,"Nums"]);}_inherits(NumberTree,_NameOrNumberTree2);return _createClass(NumberTree);}(NameOrNumberTree);;// ./src/core/cleanup_helper.js\nfunction clearGlobalCaches(){clearPatternCaches();clearPrimitiveCaches();clearUnicodeCaches();JpxImage.cleanup();};// ./src/core/file_spec.js\nfunction pickPlatformItem(dict){if(!(dict instanceof Dict)){return null;}if(dict.has("UF")){return dict.get("UF");}else if(dict.has("F")){return dict.get("F");}else if(dict.has("Unix")){return dict.get("Unix");}else if(dict.has("Mac")){return dict.get("Mac");}else if(dict.has("DOS")){return dict.get("DOS");}return null;}function stripPath(str){return str.substring(str.lastIndexOf("/")+1);}var _contentAvailable=/*#__PURE__*/new WeakMap();var FileSpec=/*#__PURE__*/function(){function FileSpec(root,xref){var skipContent=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;_classCallCheck(this,FileSpec);_classPrivateFieldInitSpec(this,_contentAvailable,false);if(!(root instanceof Dict)){return;}this.xref=xref;this.root=root;if(root.has("FS")){this.fs=root.get("FS");}if(root.has("RF")){warn("Related file specifications are not supported");}if(!skipContent){if(root.has("EF")){_classPrivateFieldSet(_contentAvailable,this,true);}else{warn("Non-embedded file specifications are not supported");}}}return _createClass(FileSpec,[{key:"filename",get:function get(){var filename="";var item=pickPlatformItem(this.root);if(item&&typeof item==="string"){filename=stringToPDFString(item).replaceAll("\\\\\\\\","\\\\").replaceAll("\\\\/","/").replaceAll("\\\\","/");}return shadow(this,"filename",filename||"unnamed");}},{key:"content",get:function get(){var _this$root;if(!_classPrivateFieldGet(_contentAvailable,this)){return null;}this._contentRef||(this._contentRef=pickPlatformItem((_this$root=this.root)===null||_this$root===void 0?void 0:_this$root.get("EF")));var content=null;if(this._contentRef){var fileObj=this.xref.fetchIfRef(this._contentRef);if(fileObj instanceof BaseStream){content=fileObj.getBytes();}else{warn("Embedded file specification points to non-existing/invalid content");}}else{warn("Embedded file specification does not have any content");}return content;}},{key:"description",get:function get(){var _this$root2;var description="";var desc=(_this$root2=this.root)===null||_this$root2===void 0?void 0:_this$root2.get("Desc");if(desc&&typeof desc==="string"){description=stringToPDFString(desc);}return shadow(this,"description",description);}},{key:"serializable",get:function get(){return{rawFilename:this.filename,filename:stripPath(this.filename),content:this.content,description:this.description};}}]);}();;// ./src/core/xml_parser.js\nvar XMLParserErrorCode={NoError:0,EndOfDocument:-1,UnterminatedCdat:-2,UnterminatedXmlDeclaration:-3,UnterminatedDoctypeDeclaration:-4,UnterminatedComment:-5,MalformedElement:-6,OutOfMemory:-7,UnterminatedAttributeValue:-8,UnterminatedElement:-9,ElementNeverBegun:-10};function isWhitespace(s,index){var ch=s[index];return ch===" "||ch==="\\n"||ch==="\\r"||ch==="\\t";}function isWhitespaceString(s){for(var i=0,ii=s.length;i<ii;i++){if(!isWhitespace(s,i)){return false;}}return true;}var XMLParserBase=/*#__PURE__*/function(){function XMLParserBase(){_classCallCheck(this,XMLParserBase);}return _createClass(XMLParserBase,[{key:"_resolveEntities",value:function _resolveEntities(s){var _this56=this;return s.replaceAll(/&([^;]+);/g,function(all,entity){if(entity.substring(0,2)==="#x"){return String.fromCodePoint(parseInt(entity.substring(2),16));}else if(entity.substring(0,1)==="#"){return String.fromCodePoint(parseInt(entity.substring(1),10));}switch(entity){case"lt":return"<";case"gt":return">";case"amp":return"&";case"quot":return\'"\';case"apos":return"\'";}return _this56.onResolveEntity(entity);});}},{key:"_parseContent",value:function _parseContent(s,start){var attributes=[];var pos=start;function skipWs(){while(pos<s.length&&isWhitespace(s,pos)){++pos;}}while(pos<s.length&&!isWhitespace(s,pos)&&s[pos]!==">"&&s[pos]!=="/"){++pos;}var name=s.substring(start,pos);skipWs();while(pos<s.length&&s[pos]!==">"&&s[pos]!=="/"&&s[pos]!=="?"){skipWs();var attrName="",attrValue="";while(pos<s.length&&!isWhitespace(s,pos)&&s[pos]!=="="){attrName+=s[pos];++pos;}skipWs();if(s[pos]!=="="){return null;}++pos;skipWs();var attrEndChar=s[pos];if(attrEndChar!==\'"\'&&attrEndChar!=="\'"){return null;}var attrEndIndex=s.indexOf(attrEndChar,++pos);if(attrEndIndex<0){return null;}attrValue=s.substring(pos,attrEndIndex);attributes.push({name:attrName,value:this._resolveEntities(attrValue)});pos=attrEndIndex+1;skipWs();}return{name:name,attributes:attributes,parsed:pos-start};}},{key:"_parseProcessingInstruction",value:function _parseProcessingInstruction(s,start){var pos=start;function skipWs(){while(pos<s.length&&isWhitespace(s,pos)){++pos;}}while(pos<s.length&&!isWhitespace(s,pos)&&s[pos]!==">"&&s[pos]!=="?"&&s[pos]!=="/"){++pos;}var name=s.substring(start,pos);skipWs();var attrStart=pos;while(pos<s.length&&(s[pos]!=="?"||s[pos+1]!==">")){++pos;}var value=s.substring(attrStart,pos);return{name:name,value:value,parsed:pos-start};}},{key:"parseXml",value:function parseXml(s){var i=0;while(i<s.length){var ch=s[i];var j=i;if(ch==="<"){++j;var ch2=s[j];var q=void 0;switch(ch2){case"/":++j;q=s.indexOf(">",j);if(q<0){this.onError(XMLParserErrorCode.UnterminatedElement);return;}this.onEndElement(s.substring(j,q));j=q+1;break;case"?":++j;var pi=this._parseProcessingInstruction(s,j);if(s.substring(j+pi.parsed,j+pi.parsed+2)!=="?>"){this.onError(XMLParserErrorCode.UnterminatedXmlDeclaration);return;}this.onPi(pi.name,pi.value);j+=pi.parsed+2;break;case"!":if(s.substring(j+1,j+3)==="--"){q=s.indexOf("--\x3e",j+3);if(q<0){this.onError(XMLParserErrorCode.UnterminatedComment);return;}this.onComment(s.substring(j+3,q));j=q+3;}else if(s.substring(j+1,j+8)==="[CDATA["){q=s.indexOf("]]>",j+8);if(q<0){this.onError(XMLParserErrorCode.UnterminatedCdat);return;}this.onCdata(s.substring(j+8,q));j=q+3;}else if(s.substring(j+1,j+8)==="DOCTYPE"){var q2=s.indexOf("[",j+8);var complexDoctype=false;q=s.indexOf(">",j+8);if(q<0){this.onError(XMLParserErrorCode.UnterminatedDoctypeDeclaration);return;}if(q2>0&&q>q2){q=s.indexOf("]>",j+8);if(q<0){this.onError(XMLParserErrorCode.UnterminatedDoctypeDeclaration);return;}complexDoctype=true;}var doctypeContent=s.substring(j+8,q+(complexDoctype?1:0));this.onDoctype(doctypeContent);j=q+(complexDoctype?2:1);}else{this.onError(XMLParserErrorCode.MalformedElement);return;}break;default:var content=this._parseContent(s,j);if(content===null){this.onError(XMLParserErrorCode.MalformedElement);return;}var isClosed=false;if(s.substring(j+content.parsed,j+content.parsed+2)==="/>"){isClosed=true;}else if(s.substring(j+content.parsed,j+content.parsed+1)!==">"){this.onError(XMLParserErrorCode.UnterminatedElement);return;}this.onBeginElement(content.name,content.attributes,isClosed);j+=content.parsed+(isClosed?2:1);break;}}else{while(j<s.length&&s[j]!=="<"){j++;}var text=s.substring(i,j);this.onText(this._resolveEntities(text));}i=j;}}},{key:"onResolveEntity",value:function onResolveEntity(name){return"&".concat(name,";");}},{key:"onPi",value:function onPi(name,value){}},{key:"onComment",value:function onComment(text){}},{key:"onCdata",value:function onCdata(text){}},{key:"onDoctype",value:function onDoctype(doctypeContent){}},{key:"onText",value:function onText(text){}},{key:"onBeginElement",value:function onBeginElement(name,attributes,isEmpty){}},{key:"onEndElement",value:function onEndElement(name){}},{key:"onError",value:function onError(code){}}]);}();var SimpleDOMNode=/*#__PURE__*/function(){function SimpleDOMNode(nodeName,nodeValue){_classCallCheck(this,SimpleDOMNode);this.nodeName=nodeName;this.nodeValue=nodeValue;Object.defineProperty(this,"parentNode",{value:null,writable:true});}return _createClass(SimpleDOMNode,[{key:"firstChild",get:function get(){var _this$childNodes;return(_this$childNodes=this.childNodes)===null||_this$childNodes===void 0?void 0:_this$childNodes[0];}},{key:"nextSibling",get:function get(){var childNodes=this.parentNode.childNodes;if(!childNodes){return undefined;}var index=childNodes.indexOf(this);if(index===-1){return undefined;}return childNodes[index+1];}},{key:"textContent",get:function get(){if(!this.childNodes){return this.nodeValue||"";}return this.childNodes.map(function(child){return child.textContent;}).join("");}},{key:"children",get:function get(){return this.childNodes||[];}},{key:"hasChildNodes",value:function hasChildNodes(){var _this$childNodes2;return((_this$childNodes2=this.childNodes)===null||_this$childNodes2===void 0?void 0:_this$childNodes2.length)>0;}},{key:"searchNode",value:function searchNode(paths,pos){if(pos>=paths.length){return this;}var component=paths[pos];if(component.name.startsWith("#")&&pos<paths.length-1){return this.searchNode(paths,pos+1);}var stack=[];var node=this;while(true){var _node$childNodes;if(component.name===node.nodeName){if(component.pos===0){var res=node.searchNode(paths,pos+1);if(res!==null){return res;}}else if(stack.length===0){return null;}else{var _stack$pop=stack.pop(),_stack$pop2=_slicedToArray(_stack$pop,1),parent=_stack$pop2[0];var siblingPos=0;var _iterator90=_createForOfIteratorHelper(parent.childNodes),_step90;try{for(_iterator90.s();!(_step90=_iterator90.n()).done;){var child=_step90.value;if(component.name===child.nodeName){if(siblingPos===component.pos){return child.searchNode(paths,pos+1);}siblingPos++;}}}catch(err){_iterator90.e(err);}finally{_iterator90.f();}return node.searchNode(paths,pos+1);}}if(((_node$childNodes=node.childNodes)===null||_node$childNodes===void 0?void 0:_node$childNodes.length)>0){stack.push([node,0]);node=node.childNodes[0];}else if(stack.length===0){return null;}else{while(stack.length!==0){var _stack$pop3=stack.pop(),_stack$pop4=_slicedToArray(_stack$pop3,2),_parent2=_stack$pop4[0],currentPos=_stack$pop4[1];var newPos=currentPos+1;if(newPos<_parent2.childNodes.length){stack.push([_parent2,newPos]);node=_parent2.childNodes[newPos];break;}}if(stack.length===0){return null;}}}}},{key:"dump",value:function dump(buffer){if(this.nodeName==="#text"){buffer.push(encodeToXmlString(this.nodeValue));return;}buffer.push("<".concat(this.nodeName));if(this.attributes){var _iterator91=_createForOfIteratorHelper(this.attributes),_step91;try{for(_iterator91.s();!(_step91=_iterator91.n()).done;){var attribute=_step91.value;buffer.push(" ".concat(attribute.name,"=\\"").concat(encodeToXmlString(attribute.value),"\\""));}}catch(err){_iterator91.e(err);}finally{_iterator91.f();}}if(this.hasChildNodes()){buffer.push(">");var _iterator92=_createForOfIteratorHelper(this.childNodes),_step92;try{for(_iterator92.s();!(_step92=_iterator92.n()).done;){var child=_step92.value;child.dump(buffer);}}catch(err){_iterator92.e(err);}finally{_iterator92.f();}buffer.push("</".concat(this.nodeName,">"));}else if(this.nodeValue){buffer.push(">".concat(encodeToXmlString(this.nodeValue),"</").concat(this.nodeName,">"));}else{buffer.push("/>");}}}]);}();var SimpleXMLParser=/*#__PURE__*/function(_XMLParserBase){function SimpleXMLParser(_ref78){var _this57;var _ref78$hasAttributes=_ref78.hasAttributes,hasAttributes=_ref78$hasAttributes===void 0?false:_ref78$hasAttributes,_ref78$lowerCaseName=_ref78.lowerCaseName,lowerCaseName=_ref78$lowerCaseName===void 0?false:_ref78$lowerCaseName;_classCallCheck(this,SimpleXMLParser);_this57=_callSuper(this,SimpleXMLParser);_this57._currentFragment=null;_this57._stack=null;_this57._errorCode=XMLParserErrorCode.NoError;_this57._hasAttributes=hasAttributes;_this57._lowerCaseName=lowerCaseName;return _this57;}_inherits(SimpleXMLParser,_XMLParserBase);return _createClass(SimpleXMLParser,[{key:"parseFromString",value:function parseFromString(data){this._currentFragment=[];this._stack=[];this._errorCode=XMLParserErrorCode.NoError;this.parseXml(data);if(this._errorCode!==XMLParserErrorCode.NoError){return undefined;}var _this$_currentFragmen=_slicedToArray(this._currentFragment,1),documentElement=_this$_currentFragmen[0];if(!documentElement){return undefined;}return{documentElement:documentElement};}},{key:"onText",value:function onText(text){if(isWhitespaceString(text)){return;}var node=new SimpleDOMNode("#text",text);this._currentFragment.push(node);}},{key:"onCdata",value:function onCdata(text){var node=new SimpleDOMNode("#text",text);this._currentFragment.push(node);}},{key:"onBeginElement",value:function onBeginElement(name,attributes,isEmpty){if(this._lowerCaseName){name=name.toLowerCase();}var node=new SimpleDOMNode(name);node.childNodes=[];if(this._hasAttributes){node.attributes=attributes;}this._currentFragment.push(node);if(isEmpty){return;}this._stack.push(this._currentFragment);this._currentFragment=node.childNodes;}},{key:"onEndElement",value:function onEndElement(name){this._currentFragment=this._stack.pop()||[];var lastElement=this._currentFragment.at(-1);if(!lastElement){return null;}var _iterator93=_createForOfIteratorHelper(lastElement.childNodes),_step93;try{for(_iterator93.s();!(_step93=_iterator93.n()).done;){var childNode=_step93.value;childNode.parentNode=lastElement;}}catch(err){_iterator93.e(err);}finally{_iterator93.f();}return lastElement;}},{key:"onError",value:function onError(code){this._errorCode=code;}}]);}(XMLParserBase);;// ./src/core/metadata_parser.js\nvar MetadataParser=/*#__PURE__*/function(){function MetadataParser(data){_classCallCheck(this,MetadataParser);data=this._repair(data);var parser=new SimpleXMLParser({lowerCaseName:true});var xmlDocument=parser.parseFromString(data);this._metadataMap=new Map();this._data=data;if(xmlDocument){this._parse(xmlDocument);}}return _createClass(MetadataParser,[{key:"_repair",value:function _repair(data){return data.replace(/^[^<]+/,"").replaceAll(/>\\\\376\\\\377([^<]+)/g,function(all,codes){var bytes=codes.replaceAll(/\\\\([0-3])([0-7])([0-7])/g,function(code,d1,d2,d3){return String.fromCharCode(d1*64+d2*8+d3*1);}).replaceAll(/&(amp|apos|gt|lt|quot);/g,function(str,name){switch(name){case"amp":return"&";case"apos":return"\'";case"gt":return">";case"lt":return"<";case"quot":return\'"\';}throw new Error("_repair: ".concat(name," isn\'t defined."));});var charBuf=[">"];for(var i=0,ii=bytes.length;i<ii;i+=2){var code=bytes.charCodeAt(i)*256+bytes.charCodeAt(i+1);if(code>=32&&code<127&&code!==60&&code!==62&&code!==38){charBuf.push(String.fromCharCode(code));}else{charBuf.push("&#x"+(0x10000+code).toString(16).substring(1)+";");}}return charBuf.join("");});}},{key:"_getSequence",value:function _getSequence(entry){var name=entry.nodeName;if(name!=="rdf:bag"&&name!=="rdf:seq"&&name!=="rdf:alt"){return null;}return entry.childNodes.filter(function(node){return node.nodeName==="rdf:li";});}},{key:"_parseArray",value:function _parseArray(entry){if(!entry.hasChildNodes()){return;}var _entry$childNodes=_slicedToArray(entry.childNodes,1),seqNode=_entry$childNodes[0];var sequence=this._getSequence(seqNode)||[];this._metadataMap.set(entry.nodeName,sequence.map(function(node){return node.textContent.trim();}));}},{key:"_parse",value:function _parse(xmlDocument){var rdf=xmlDocument.documentElement;if(rdf.nodeName!=="rdf:rdf"){rdf=rdf.firstChild;while(rdf&&rdf.nodeName!=="rdf:rdf"){rdf=rdf.nextSibling;}}if(!rdf||rdf.nodeName!=="rdf:rdf"||!rdf.hasChildNodes()){return;}var _iterator94=_createForOfIteratorHelper(rdf.childNodes),_step94;try{for(_iterator94.s();!(_step94=_iterator94.n()).done;){var desc=_step94.value;if(desc.nodeName!=="rdf:description"){continue;}var _iterator95=_createForOfIteratorHelper(desc.childNodes),_step95;try{for(_iterator95.s();!(_step95=_iterator95.n()).done;){var entry=_step95.value;var name=entry.nodeName;switch(name){case"#text":continue;case"dc:creator":case"dc:subject":this._parseArray(entry);continue;}this._metadataMap.set(name,entry.textContent.trim());}}catch(err){_iterator95.e(err);}finally{_iterator95.f();}}}catch(err){_iterator94.e(err);}finally{_iterator94.f();}}},{key:"serializable",get:function get(){return{parsedData:this._metadataMap,rawData:this._data};}}]);}();;// ./src/core/struct_tree.js\nvar MAX_DEPTH=40;var StructElementType={PAGE_CONTENT:1,STREAM_CONTENT:2,OBJECT:3,ANNOTATION:4,ELEMENT:5};var _StructTreeRoot_brand=/*#__PURE__*/new WeakSet();var StructTreeRoot=/*#__PURE__*/function(){function StructTreeRoot(rootDict,rootRef){_classCallCheck(this,StructTreeRoot);_classPrivateMethodInitSpec(this,_StructTreeRoot_brand);this.dict=rootDict;this.ref=rootRef instanceof Ref?rootRef:null;this.roleMap=new Map();this.structParentIds=null;}return _createClass(StructTreeRoot,[{key:"init",value:function init(){this.readRoleMap();}},{key:"addAnnotationIdToPage",value:function addAnnotationIdToPage(pageRef,id){_assertClassBrand(_StructTreeRoot_brand,this,_addIdToPage).call(this,pageRef,id,StructElementType.ANNOTATION);}},{key:"readRoleMap",value:function readRoleMap(){var roleMapDict=this.dict.get("RoleMap");if(!(roleMapDict instanceof Dict)){return;}var _iterator96=_createForOfIteratorHelper(roleMapDict),_step96;try{for(_iterator96.s();!(_step96=_iterator96.n()).done;){var _step96$value=_slicedToArray(_step96.value,2),key=_step96$value[0],value=_step96$value[1];if(value instanceof Name){this.roleMap.set(key,value.name);}}}catch(err){_iterator96.e(err);}finally{_iterator96.f();}}},{key:"canUpdateStructTree",value:function(){var _canUpdateStructTree=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee43(_ref79){var pdfManager,xref,newAnnotationsByPage,nextKey,parentTree,nums,numberTree,_iterator97,_step97,pageIndex,_yield$pdfManager$get,pageDict,id,hasNothingToUpdate,_iterator98,_step98,_step98$value,_pageIndex,_elements,_yield$pdfManager$get2,_pageDict,_iterator101,_step101,_element$accessibilit,_element,_iterator99,_step99,elements,_iterator100,_step100,element;return _regeneratorRuntime().wrap(function _callee43$(_context48){while(1)switch(_context48.prev=_context48.next){case 0:pdfManager=_ref79.pdfManager,xref=_ref79.xref,newAnnotationsByPage=_ref79.newAnnotationsByPage;if(this.ref){_context48.next=4;break;}warn("Cannot update the struct tree: no root reference.");return _context48.abrupt("return",false);case 4:nextKey=this.dict.get("ParentTreeNextKey");if(!(!Number.isInteger(nextKey)||nextKey<0)){_context48.next=8;break;}warn("Cannot update the struct tree: invalid next key.");return _context48.abrupt("return",false);case 8:parentTree=this.dict.get("ParentTree");if(parentTree instanceof Dict){_context48.next=12;break;}warn("Cannot update the struct tree: ParentTree isn\'t a dict.");return _context48.abrupt("return",false);case 12:nums=parentTree.get("Nums");if(Array.isArray(nums)){_context48.next=16;break;}warn("Cannot update the struct tree: nums isn\'t an array.");return _context48.abrupt("return",false);case 16:numberTree=new NumberTree(parentTree,xref);_iterator97=_createForOfIteratorHelper(newAnnotationsByPage.keys());_context48.prev=18;_iterator97.s();case 20:if((_step97=_iterator97.n()).done){_context48.next=34;break;}pageIndex=_step97.value;_context48.next=24;return pdfManager.getPage(pageIndex);case 24:_yield$pdfManager$get=_context48.sent;pageDict=_yield$pdfManager$get.pageDict;if(pageDict.has("StructParents")){_context48.next=28;break;}return _context48.abrupt("continue",32);case 28:id=pageDict.get("StructParents");if(!(!Number.isInteger(id)||!Array.isArray(numberTree.get(id)))){_context48.next=32;break;}warn("Cannot save the struct tree: page ".concat(pageIndex," has a wrong id."));return _context48.abrupt("return",false);case 32:_context48.next=20;break;case 34:_context48.next=39;break;case 36:_context48.prev=36;_context48.t0=_context48["catch"](18);_iterator97.e(_context48.t0);case 39:_context48.prev=39;_iterator97.f();return _context48.finish(39);case 42:hasNothingToUpdate=true;_iterator98=_createForOfIteratorHelper(newAnnotationsByPage);_context48.prev=44;_iterator98.s();case 46:if((_step98=_iterator98.n()).done){_context48.next=57;break;}_step98$value=_slicedToArray(_step98.value,2),_pageIndex=_step98$value[0],_elements=_step98$value[1];_context48.next=50;return pdfManager.getPage(_pageIndex);case 50:_yield$pdfManager$get2=_context48.sent;_pageDict=_yield$pdfManager$get2.pageDict;_collectParents.call(StructTreeRoot,{elements:_elements,xref:this.dict.xref,pageDict:_pageDict,numberTree:numberTree});_iterator101=_createForOfIteratorHelper(_elements);try{for(_iterator101.s();!(_step101=_iterator101.n()).done;){_element=_step101.value;if((_element$accessibilit=_element.accessibilityData)!==null&&_element$accessibilit!==void 0&&_element$accessibilit.type){if(!(_element.accessibilityData.structParent>=0)){_element.parentTreeId=nextKey++;}hasNothingToUpdate=false;}}}catch(err){_iterator101.e(err);}finally{_iterator101.f();}case 55:_context48.next=46;break;case 57:_context48.next=62;break;case 59:_context48.prev=59;_context48.t1=_context48["catch"](44);_iterator98.e(_context48.t1);case 62:_context48.prev=62;_iterator98.f();return _context48.finish(62);case 65:if(!hasNothingToUpdate){_context48.next=69;break;}_iterator99=_createForOfIteratorHelper(newAnnotationsByPage.values());try{for(_iterator99.s();!(_step99=_iterator99.n()).done;){elements=_step99.value;_iterator100=_createForOfIteratorHelper(elements);try{for(_iterator100.s();!(_step100=_iterator100.n()).done;){element=_step100.value;delete element.parentTreeId;delete element.structTreeParent;}}catch(err){_iterator100.e(err);}finally{_iterator100.f();}}}catch(err){_iterator99.e(err);}finally{_iterator99.f();}return _context48.abrupt("return",false);case 69:return _context48.abrupt("return",true);case 70:case"end":return _context48.stop();}},_callee43,this,[[18,36,39,42],[44,59,62,65]]);}));function canUpdateStructTree(_x75){return _canUpdateStructTree.apply(this,arguments);}return canUpdateStructTree;}()},{key:"updateStructureTree",value:function(){var _updateStructureTree=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee44(_ref80){var newAnnotationsByPage,pdfManager,changes,xref,structTreeRoot,structTreeRootRef,cache,parentTreeRef,parentTree,nums,numsRef,newNextKey,_iterator102,_step102,_step102$value,ref,obj;return _regeneratorRuntime().wrap(function _callee44$(_context49){while(1)switch(_context49.prev=_context49.next){case 0:newAnnotationsByPage=_ref80.newAnnotationsByPage,pdfManager=_ref80.pdfManager,changes=_ref80.changes;xref=this.dict.xref;structTreeRoot=this.dict.clone();structTreeRootRef=this.ref;cache=new RefSetCache();cache.put(structTreeRootRef,structTreeRoot);parentTreeRef=structTreeRoot.getRaw("ParentTree");if(parentTreeRef instanceof Ref){parentTree=xref.fetch(parentTreeRef);}else{parentTree=parentTreeRef;parentTreeRef=xref.getNewTemporaryRef();structTreeRoot.set("ParentTree",parentTreeRef);}parentTree=parentTree.clone();cache.put(parentTreeRef,parentTree);nums=parentTree.getRaw("Nums");numsRef=null;if(nums instanceof Ref){numsRef=nums;nums=xref.fetch(numsRef);}nums=nums.slice();if(!numsRef){parentTree.set("Nums",nums);}_context49.next=17;return _writeKids.call(StructTreeRoot,{newAnnotationsByPage:newAnnotationsByPage,structTreeRootRef:structTreeRootRef,structTreeRoot:this,kids:null,nums:nums,xref:xref,pdfManager:pdfManager,changes:changes,cache:cache});case 17:newNextKey=_context49.sent;if(!(newNextKey===-1)){_context49.next=20;break;}return _context49.abrupt("return");case 20:structTreeRoot.set("ParentTreeNextKey",newNextKey);if(numsRef){cache.put(numsRef,nums);}_iterator102=_createForOfIteratorHelper(cache.items());try{for(_iterator102.s();!(_step102=_iterator102.n()).done;){_step102$value=_slicedToArray(_step102.value,2),ref=_step102$value[0],obj=_step102$value[1];changes.put(ref,{data:obj});}}catch(err){_iterator102.e(err);}finally{_iterator102.f();}case 24:case"end":return _context49.stop();}},_callee44,this);}));function updateStructureTree(_x76){return _updateStructureTree.apply(this,arguments);}return updateStructureTree;}()}],[{key:"canCreateStructureTree",value:function(){var _canCreateStructureTree=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee45(_ref81){var catalogRef,pdfManager,newAnnotationsByPage,nextKey,hasNothingToUpdate,_iterator103,_step103,_step103$value,pageIndex,_elements2,_yield$pdfManager$get3,pageRef,_iterator106,_step106,_element2$accessibili,_element2,_iterator104,_step104,elements,_iterator105,_step105,element;return _regeneratorRuntime().wrap(function _callee45$(_context50){while(1)switch(_context50.prev=_context50.next){case 0:catalogRef=_ref81.catalogRef,pdfManager=_ref81.pdfManager,newAnnotationsByPage=_ref81.newAnnotationsByPage;if(catalogRef instanceof Ref){_context50.next=4;break;}warn("Cannot save the struct tree: no catalog reference.");return _context50.abrupt("return",false);case 4:nextKey=0;hasNothingToUpdate=true;_iterator103=_createForOfIteratorHelper(newAnnotationsByPage);_context50.prev=7;_iterator103.s();case 9:if((_step103=_iterator103.n()).done){_context50.next=23;break;}_step103$value=_slicedToArray(_step103.value,2),pageIndex=_step103$value[0],_elements2=_step103$value[1];_context50.next=13;return pdfManager.getPage(pageIndex);case 13:_yield$pdfManager$get3=_context50.sent;pageRef=_yield$pdfManager$get3.ref;if(pageRef instanceof Ref){_context50.next=19;break;}warn("Cannot save the struct tree: page ".concat(pageIndex," has no ref."));hasNothingToUpdate=true;return _context50.abrupt("break",23);case 19:_iterator106=_createForOfIteratorHelper(_elements2);try{for(_iterator106.s();!(_step106=_iterator106.n()).done;){_element2=_step106.value;if((_element2$accessibili=_element2.accessibilityData)!==null&&_element2$accessibili!==void 0&&_element2$accessibili.type){_element2.parentTreeId=nextKey++;hasNothingToUpdate=false;}}}catch(err){_iterator106.e(err);}finally{_iterator106.f();}case 21:_context50.next=9;break;case 23:_context50.next=28;break;case 25:_context50.prev=25;_context50.t0=_context50["catch"](7);_iterator103.e(_context50.t0);case 28:_context50.prev=28;_iterator103.f();return _context50.finish(28);case 31:if(!hasNothingToUpdate){_context50.next=35;break;}_iterator104=_createForOfIteratorHelper(newAnnotationsByPage.values());try{for(_iterator104.s();!(_step104=_iterator104.n()).done;){elements=_step104.value;_iterator105=_createForOfIteratorHelper(elements);try{for(_iterator105.s();!(_step105=_iterator105.n()).done;){element=_step105.value;delete element.parentTreeId;}}catch(err){_iterator105.e(err);}finally{_iterator105.f();}}}catch(err){_iterator104.e(err);}finally{_iterator104.f();}return _context50.abrupt("return",false);case 35:return _context50.abrupt("return",true);case 36:case"end":return _context50.stop();}},_callee45,null,[[7,25,28,31]]);}));function canCreateStructureTree(_x77){return _canCreateStructureTree.apply(this,arguments);}return canCreateStructureTree;}()},{key:"createStructureTree",value:function(){var _createStructureTree=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee46(_ref82){var newAnnotationsByPage,xref,catalogRef,pdfManager,changes,root,cache,structTreeRootRef,structTreeRoot,parentTreeRef,kids,parentTree,nums,nextKey,_iterator107,_step107,_step107$value,ref,obj;return _regeneratorRuntime().wrap(function _callee46$(_context51){while(1)switch(_context51.prev=_context51.next){case 0:newAnnotationsByPage=_ref82.newAnnotationsByPage,xref=_ref82.xref,catalogRef=_ref82.catalogRef,pdfManager=_ref82.pdfManager,changes=_ref82.changes;root=pdfManager.catalog.cloneDict();cache=new RefSetCache();cache.put(catalogRef,root);structTreeRootRef=xref.getNewTemporaryRef();root.set("StructTreeRoot",structTreeRootRef);structTreeRoot=new Dict(xref);structTreeRoot.set("Type",Name.get("StructTreeRoot"));parentTreeRef=xref.getNewTemporaryRef();structTreeRoot.set("ParentTree",parentTreeRef);kids=[];structTreeRoot.set("K",kids);cache.put(structTreeRootRef,structTreeRoot);parentTree=new Dict(xref);nums=[];parentTree.set("Nums",nums);_context51.next=18;return _assertClassBrand(StructTreeRoot,this,_writeKids).call(this,{newAnnotationsByPage:newAnnotationsByPage,structTreeRootRef:structTreeRootRef,structTreeRoot:null,kids:kids,nums:nums,xref:xref,pdfManager:pdfManager,changes:changes,cache:cache});case 18:nextKey=_context51.sent;structTreeRoot.set("ParentTreeNextKey",nextKey);cache.put(parentTreeRef,parentTree);_iterator107=_createForOfIteratorHelper(cache.items());try{for(_iterator107.s();!(_step107=_iterator107.n()).done;){_step107$value=_slicedToArray(_step107.value,2),ref=_step107$value[0],obj=_step107$value[1];changes.put(ref,{data:obj});}}catch(err){_iterator107.e(err);}finally{_iterator107.f();}case 23:case"end":return _context51.stop();}},_callee46,this);}));function createStructureTree(_x78){return _createStructureTree.apply(this,arguments);}return createStructureTree;}()}]);}();_StructTreeRoot=StructTreeRoot;function _addIdToPage(pageRef,id,type){if(!(pageRef instanceof Ref)||id<0){return;}this.structParentIds||(this.structParentIds=new RefSetCache());var ids=this.structParentIds.get(pageRef);if(!ids){ids=[];this.structParentIds.put(pageRef,ids);}ids.push([id,type]);}function _writeKids(_x245){return _writeKids3.apply(this,arguments);}function _writeKids3(){_writeKids3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee126(_ref139){var newAnnotationsByPage,structTreeRootRef,structTreeRoot,kids,nums,xref,pdfManager,changes,cache,objr,nextKey,structTreePageObjs,_iterator261,_step261,_step261$value,_pageIndex6,elements,page,pageRef,isPageRef,_iterator262,_step262,_step262$value,accessibilityData,ref,parentTreeId,structTreeParent,structParent,_objs,objs,structTreePage,objRef,_tagDict,tagRef,tagDict,objDict;return _regeneratorRuntime().wrap(function _callee126$(_context145){while(1)switch(_context145.prev=_context145.next){case 0:newAnnotationsByPage=_ref139.newAnnotationsByPage,structTreeRootRef=_ref139.structTreeRootRef,structTreeRoot=_ref139.structTreeRoot,kids=_ref139.kids,nums=_ref139.nums,xref=_ref139.xref,pdfManager=_ref139.pdfManager,changes=_ref139.changes,cache=_ref139.cache;objr=Name.get("OBJR");nextKey=-1;_iterator261=_createForOfIteratorHelper(newAnnotationsByPage);_context145.prev=4;_iterator261.s();case 6:if((_step261=_iterator261.n()).done){_context145.next=55;break;}_step261$value=_slicedToArray(_step261.value,2),_pageIndex6=_step261$value[0],elements=_step261$value[1];_context145.next=10;return pdfManager.getPage(_pageIndex6);case 10:page=_context145.sent;pageRef=page.ref;isPageRef=pageRef instanceof Ref;_iterator262=_createForOfIteratorHelper(elements);_context145.prev=14;_iterator262.s();case 16:if((_step262=_iterator262.n()).done){_context145.next=45;break;}_step262$value=_step262.value,accessibilityData=_step262$value.accessibilityData,ref=_step262$value.ref,parentTreeId=_step262$value.parentTreeId,structTreeParent=_step262$value.structTreeParent;if(accessibilityData!==null&&accessibilityData!==void 0&&accessibilityData.type){_context145.next=20;break;}return _context145.abrupt("continue",43);case 20:structParent=accessibilityData.structParent;if(!(structTreeRoot&&Number.isInteger(structParent)&&structParent>=0)){_context145.next=30;break;}objs=(structTreePageObjs||(structTreePageObjs=new Map())).get(_pageIndex6);if(objs===undefined){structTreePage=new StructTreePage(structTreeRoot,page.pageDict);objs=structTreePage.collectObjects(pageRef);structTreePageObjs.set(_pageIndex6,objs);}objRef=(_objs=objs)===null||_objs===void 0?void 0:_objs.get(structParent);if(!objRef){_context145.next=30;break;}_tagDict=xref.fetch(objRef).clone();_writeProperties.call(_StructTreeRoot,_tagDict,accessibilityData);changes.put(objRef,{data:_tagDict});return _context145.abrupt("continue",43);case 30:nextKey=Math.max(nextKey,parentTreeId);tagRef=xref.getNewTemporaryRef();tagDict=new Dict(xref);_writeProperties.call(_StructTreeRoot,tagDict,accessibilityData);_context145.next=36;return _assertClassBrand(_StructTreeRoot,this,_updateParentTag).call(this,{structTreeParent:structTreeParent,tagDict:tagDict,newTagRef:tagRef,structTreeRootRef:structTreeRootRef,fallbackKids:kids,xref:xref,cache:cache});case 36:objDict=new Dict(xref);tagDict.set("K",objDict);objDict.set("Type",objr);if(isPageRef){objDict.set("Pg",pageRef);}objDict.set("Obj",ref);cache.put(tagRef,tagDict);nums.push(parentTreeId,tagRef);case 43:_context145.next=16;break;case 45:_context145.next=50;break;case 47:_context145.prev=47;_context145.t0=_context145["catch"](14);_iterator262.e(_context145.t0);case 50:_context145.prev=50;_iterator262.f();return _context145.finish(50);case 53:_context145.next=6;break;case 55:_context145.next=60;break;case 57:_context145.prev=57;_context145.t1=_context145["catch"](4);_iterator261.e(_context145.t1);case 60:_context145.prev=60;_iterator261.f();return _context145.finish(60);case 63:return _context145.abrupt("return",nextKey+1);case 64:case"end":return _context145.stop();}},_callee126,this,[[4,57,60,63],[14,47,50,53]]);}));return _writeKids3.apply(this,arguments);}function _writeProperties(tagDict,_ref140){var type=_ref140.type,title=_ref140.title,lang=_ref140.lang,alt=_ref140.alt,expanded=_ref140.expanded,actualText=_ref140.actualText;tagDict.set("S",Name.get(type));if(title){tagDict.set("T",stringToAsciiOrUTF16BE(title));}if(lang){tagDict.set("Lang",stringToAsciiOrUTF16BE(lang));}if(alt){tagDict.set("Alt",stringToAsciiOrUTF16BE(alt));}if(expanded){tagDict.set("E",stringToAsciiOrUTF16BE(expanded));}if(actualText){tagDict.set("ActualText",stringToAsciiOrUTF16BE(actualText));}}function _collectParents(_ref141){var elements=_ref141.elements,xref=_ref141.xref,pageDict=_ref141.pageDict,numberTree=_ref141.numberTree;var idToElements=new Map();var _iterator246=_createForOfIteratorHelper(elements),_step246;try{for(_iterator246.s();!(_step246=_iterator246.n()).done;){var element=_step246.value;if(element.structTreeParentId){var _id=parseInt(element.structTreeParentId.split("_mc")[1],10);var elems=idToElements.get(_id);if(!elems){elems=[];idToElements.set(_id,elems);}elems.push(element);}}}catch(err){_iterator246.e(err);}finally{_iterator246.f();}var id=pageDict.get("StructParents");if(!Number.isInteger(id)){return;}var parentArray=numberTree.get(id);var updateElement=function updateElement(kid,pageKid,kidRef){var elems=idToElements.get(kid);if(elems){var parentRef=pageKid.getRaw("P");var parentDict=xref.fetchIfRef(parentRef);if(parentRef instanceof Ref&&parentDict instanceof Dict){var params={ref:kidRef,dict:pageKid};var _iterator247=_createForOfIteratorHelper(elems),_step247;try{for(_iterator247.s();!(_step247=_iterator247.n()).done;){var element=_step247.value;element.structTreeParent=params;}}catch(err){_iterator247.e(err);}finally{_iterator247.f();}}return true;}return false;};var _iterator248=_createForOfIteratorHelper(parentArray),_step248;try{for(_iterator248.s();!(_step248=_iterator248.n()).done;){var kidRef=_step248.value;if(!(kidRef instanceof Ref)){continue;}var pageKid=xref.fetch(kidRef);var k=pageKid.get("K");if(Number.isInteger(k)){updateElement(k,pageKid,kidRef);continue;}if(!Array.isArray(k)){continue;}var _iterator249=_createForOfIteratorHelper(k),_step249;try{for(_iterator249.s();!(_step249=_iterator249.n()).done;){var kid=_step249.value;kid=xref.fetchIfRef(kid);if(Number.isInteger(kid)&&updateElement(kid,pageKid,kidRef)){break;}if(!(kid instanceof Dict)){continue;}if(!isName(kid.get("Type"),"MCR")){break;}var mcid=kid.get("MCID");if(Number.isInteger(mcid)&&updateElement(mcid,pageKid,kidRef)){break;}}}catch(err){_iterator249.e(err);}finally{_iterator249.f();}}}catch(err){_iterator248.e(err);}finally{_iterator248.f();}}function _updateParentTag(_x246){return _updateParentTag3.apply(this,arguments);}function _updateParentTag3(){_updateParentTag3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee127(_ref142){var structTreeParent,tagDict,newTagRef,structTreeRootRef,fallbackKids,xref,cache,ref,parentRef,parentDict,cachedParentDict,parentKidsRaw,cachedParentKids,parentKidsRef,index;return _regeneratorRuntime().wrap(function _callee127$(_context146){while(1)switch(_context146.prev=_context146.next){case 0:structTreeParent=_ref142.structTreeParent,tagDict=_ref142.tagDict,newTagRef=_ref142.newTagRef,structTreeRootRef=_ref142.structTreeRootRef,fallbackKids=_ref142.fallbackKids,xref=_ref142.xref,cache=_ref142.cache;ref=null;if(structTreeParent){ref=structTreeParent.ref;parentRef=structTreeParent.dict.getRaw("P")||structTreeRootRef;}else{parentRef=structTreeRootRef;}tagDict.set("P",parentRef);parentDict=xref.fetchIfRef(parentRef);if(parentDict){_context146.next=8;break;}fallbackKids.push(newTagRef);return _context146.abrupt("return");case 8:cachedParentDict=cache.get(parentRef);if(!cachedParentDict){cachedParentDict=parentDict.clone();cache.put(parentRef,cachedParentDict);}parentKidsRaw=cachedParentDict.getRaw("K");cachedParentKids=parentKidsRaw instanceof Ref?cache.get(parentKidsRaw):null;if(!cachedParentKids){cachedParentKids=xref.fetchIfRef(parentKidsRaw);cachedParentKids=Array.isArray(cachedParentKids)?cachedParentKids.slice():[parentKidsRaw];parentKidsRef=xref.getNewTemporaryRef();cachedParentDict.set("K",parentKidsRef);cache.put(parentKidsRef,cachedParentKids);}index=cachedParentKids.indexOf(ref);cachedParentKids.splice(index>=0?index+1:cachedParentKids.length,0,newTagRef);case 15:case"end":return _context146.stop();}},_callee127);}));return _updateParentTag3.apply(this,arguments);}var StructElementNode=/*#__PURE__*/function(){function StructElementNode(tree,dict){_classCallCheck(this,StructElementNode);this.tree=tree;this.dict=dict;this.kids=[];this.parseKids();}return _createClass(StructElementNode,[{key:"role",get:function get(){var nameObj=this.dict.get("S");var name=nameObj instanceof Name?nameObj.name:"";var root=this.tree.root;if(root.roleMap.has(name)){return root.roleMap.get(name);}return name;}},{key:"parseKids",value:function parseKids(){var pageObjId=null;var objRef=this.dict.getRaw("Pg");if(objRef instanceof Ref){pageObjId=objRef.toString();}var kids=this.dict.get("K");if(Array.isArray(kids)){var _iterator108=_createForOfIteratorHelper(kids),_step108;try{for(_iterator108.s();!(_step108=_iterator108.n()).done;){var kid=_step108.value;var element=this.parseKid(pageObjId,kid);if(element){this.kids.push(element);}}}catch(err){_iterator108.e(err);}finally{_iterator108.f();}}else{var _element3=this.parseKid(pageObjId,kids);if(_element3){this.kids.push(_element3);}}}},{key:"parseKid",value:function parseKid(pageObjId,kid){if(Number.isInteger(kid)){if(this.tree.pageDict.objId!==pageObjId){return null;}return new StructElement({type:StructElementType.PAGE_CONTENT,mcid:kid,pageObjId:pageObjId});}var kidDict=null;if(kid instanceof Ref){kidDict=this.dict.xref.fetch(kid);}else if(kid instanceof Dict){kidDict=kid;}if(!kidDict){return null;}var pageRef=kidDict.getRaw("Pg");if(pageRef instanceof Ref){pageObjId=pageRef.toString();}var type=kidDict.get("Type")instanceof Name?kidDict.get("Type").name:null;if(type==="MCR"){if(this.tree.pageDict.objId!==pageObjId){return null;}var kidRef=kidDict.getRaw("Stm");return new StructElement({type:StructElementType.STREAM_CONTENT,refObjId:kidRef instanceof Ref?kidRef.toString():null,pageObjId:pageObjId,mcid:kidDict.get("MCID")});}if(type==="OBJR"){if(this.tree.pageDict.objId!==pageObjId){return null;}var _kidRef=kidDict.getRaw("Obj");return new StructElement({type:StructElementType.OBJECT,refObjId:_kidRef instanceof Ref?_kidRef.toString():null,pageObjId:pageObjId});}return new StructElement({type:StructElementType.ELEMENT,dict:kidDict});}}]);}();var StructElement=/*#__PURE__*/_createClass(function StructElement(_ref83){var type=_ref83.type,_ref83$dict=_ref83.dict,dict=_ref83$dict===void 0?null:_ref83$dict,_ref83$mcid=_ref83.mcid,mcid=_ref83$mcid===void 0?null:_ref83$mcid,_ref83$pageObjId=_ref83.pageObjId,pageObjId=_ref83$pageObjId===void 0?null:_ref83$pageObjId,_ref83$refObjId=_ref83.refObjId,refObjId=_ref83$refObjId===void 0?null:_ref83$refObjId;_classCallCheck(this,StructElement);this.type=type;this.dict=dict;this.mcid=mcid;this.pageObjId=pageObjId;this.refObjId=refObjId;this.parentNode=null;});var StructTreePage=/*#__PURE__*/function(){function StructTreePage(structTreeRoot,pageDict){_classCallCheck(this,StructTreePage);this.root=structTreeRoot;this.rootDict=structTreeRoot?structTreeRoot.dict:null;this.pageDict=pageDict;this.nodes=[];}return _createClass(StructTreePage,[{key:"collectObjects",value:function collectObjects(pageRef){var _this$root$structPare;if(!this.root||!this.rootDict||!(pageRef instanceof Ref)){return null;}var parentTree=this.rootDict.get("ParentTree");if(!parentTree){return null;}var ids=(_this$root$structPare=this.root.structParentIds)===null||_this$root$structPare===void 0?void 0:_this$root$structPare.get(pageRef);if(!ids){return null;}var map=new Map();var numberTree=new NumberTree(parentTree,this.rootDict.xref);var _iterator109=_createForOfIteratorHelper(ids),_step109;try{for(_iterator109.s();!(_step109=_iterator109.n()).done;){var _step109$value=_slicedToArray(_step109.value,1),elemId=_step109$value[0];var obj=numberTree.getRaw(elemId);if(obj instanceof Ref){map.set(elemId,obj);}}}catch(err){_iterator109.e(err);}finally{_iterator109.f();}return map;}},{key:"parse",value:function parse(pageRef){var _this$root$structPare2;if(!this.root||!this.rootDict||!(pageRef instanceof Ref)){return;}var parentTree=this.rootDict.get("ParentTree");if(!parentTree){return;}var id=this.pageDict.get("StructParents");var ids=(_this$root$structPare2=this.root.structParentIds)===null||_this$root$structPare2===void 0?void 0:_this$root$structPare2.get(pageRef);if(!Number.isInteger(id)&&!ids){return;}var map=new Map();var numberTree=new NumberTree(parentTree,this.rootDict.xref);if(Number.isInteger(id)){var parentArray=numberTree.get(id);if(Array.isArray(parentArray)){var _iterator110=_createForOfIteratorHelper(parentArray),_step110;try{for(_iterator110.s();!(_step110=_iterator110.n()).done;){var ref=_step110.value;if(ref instanceof Ref){this.addNode(this.rootDict.xref.fetch(ref),map);}}}catch(err){_iterator110.e(err);}finally{_iterator110.f();}}}if(!ids){return;}var _iterator111=_createForOfIteratorHelper(ids),_step111;try{for(_iterator111.s();!(_step111=_iterator111.n()).done;){var _step111$value=_slicedToArray(_step111.value,2),elemId=_step111$value[0],type=_step111$value[1];var obj=numberTree.get(elemId);if(obj){var _elem$kids;var elem=this.addNode(this.rootDict.xref.fetchIfRef(obj),map);if((elem===null||elem===void 0||(_elem$kids=elem.kids)===null||_elem$kids===void 0?void 0:_elem$kids.length)===1&&elem.kids[0].type===StructElementType.OBJECT){elem.kids[0].type=type;}}}}catch(err){_iterator111.e(err);}finally{_iterator111.f();}}},{key:"addNode",value:function addNode(dict,map){var level=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(level>MAX_DEPTH){warn("StructTree MAX_DEPTH reached.");return null;}if(!(dict instanceof Dict)){return null;}if(map.has(dict)){return map.get(dict);}var element=new StructElementNode(this,dict);map.set(dict,element);var parent=dict.get("P");if(!parent||isName(parent.get("Type"),"StructTreeRoot")){if(!this.addTopLevelNode(dict,element)){map["delete"](dict);}return element;}var parentNode=this.addNode(parent,map,level+1);if(!parentNode){return element;}var save=false;var _iterator112=_createForOfIteratorHelper(parentNode.kids),_step112;try{for(_iterator112.s();!(_step112=_iterator112.n()).done;){var kid=_step112.value;if(kid.type===StructElementType.ELEMENT&&kid.dict===dict){kid.parentNode=element;save=true;}}}catch(err){_iterator112.e(err);}finally{_iterator112.f();}if(!save){map["delete"](dict);}return element;}},{key:"addTopLevelNode",value:function addTopLevelNode(dict,element){var obj=this.rootDict.get("K");if(!obj){return false;}if(obj instanceof Dict){if(obj.objId!==dict.objId){return false;}this.nodes[0]=element;return true;}if(!Array.isArray(obj)){return true;}var save=false;for(var i=0;i<obj.length;i++){var kidRef=obj[i];if((kidRef===null||kidRef===void 0?void 0:kidRef.toString())===dict.objId){this.nodes[i]=element;save=true;}}return save;}},{key:"serializable",get:function get(){function nodeToSerializable(node,parent){var level=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(level>MAX_DEPTH){warn("StructTree too deep to be fully serialized.");return;}var obj=Object.create(null);obj.role=node.role;obj.children=[];parent.children.push(obj);var alt=node.dict.get("Alt");if(typeof alt!=="string"){alt=node.dict.get("ActualText");}if(typeof alt==="string"){obj.alt=stringToPDFString(alt);}var a=node.dict.get("A");if(a instanceof Dict){var bbox=lookupNormalRect(a.getArray("BBox"),null);if(bbox){obj.bbox=bbox;}else{var width=a.get("Width");var height=a.get("Height");if(typeof width==="number"&&width>0&&typeof height==="number"&&height>0){obj.bbox=[0,0,width,height];}}}var lang=node.dict.get("Lang");if(typeof lang==="string"){obj.lang=stringToPDFString(lang);}var _iterator113=_createForOfIteratorHelper(node.kids),_step113;try{for(_iterator113.s();!(_step113=_iterator113.n()).done;){var kid=_step113.value;var kidElement=kid.type===StructElementType.ELEMENT?kid.parentNode:null;if(kidElement){nodeToSerializable(kidElement,obj,level+1);continue;}else if(kid.type===StructElementType.PAGE_CONTENT||kid.type===StructElementType.STREAM_CONTENT){obj.children.push({type:"content",id:"p".concat(kid.pageObjId,"_mc").concat(kid.mcid)});}else if(kid.type===StructElementType.OBJECT){obj.children.push({type:"object",id:kid.refObjId});}else if(kid.type===StructElementType.ANNOTATION){obj.children.push({type:"annotation",id:"".concat(AnnotationPrefix).concat(kid.refObjId)});}}}catch(err){_iterator113.e(err);}finally{_iterator113.f();}}var root=Object.create(null);root.children=[];root.role="Root";var _iterator114=_createForOfIteratorHelper(this.nodes),_step114;try{for(_iterator114.s();!(_step114=_iterator114.n()).done;){var child=_step114.value;if(!child){continue;}nodeToSerializable(child,root);}}catch(err){_iterator114.e(err);}finally{_iterator114.f();}return root;}}]);}();;// ./src/core/catalog.js\nfunction isValidExplicitDest(dest){if(!Array.isArray(dest)||dest.length<2){return false;}var _dest=_toArray(dest),page=_dest[0],zoom=_dest[1],args=_dest.slice(2);if(!(page instanceof Ref)&&!Number.isInteger(page)){return false;}if(!(zoom instanceof Name)){return false;}var argsLen=args.length;var allowNull=true;switch(zoom.name){case"XYZ":if(argsLen<2||argsLen>3){return false;}break;case"Fit":case"FitB":return argsLen===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(argsLen>1){return false;}break;case"FitR":if(argsLen!==4){return false;}allowNull=false;break;default:return false;}var _iterator115=_createForOfIteratorHelper(args),_step115;try{for(_iterator115.s();!(_step115=_iterator115.n()).done;){var arg=_step115.value;if(!(typeof arg==="number"||allowNull&&arg===null)){return false;}}}catch(err){_iterator115.e(err);}finally{_iterator115.f();}return true;}function fetchDest(dest){if(dest instanceof Dict){dest=dest.get("D");}return isValidExplicitDest(dest)?dest:null;}function fetchRemoteDest(action){var dest=action.get("D");if(dest){if(dest instanceof Name){dest=dest.name;}if(typeof dest==="string"){return stringToPDFString(dest);}else if(isValidExplicitDest(dest)){return JSON.stringify(dest);}}return null;}var _Catalog_brand=/*#__PURE__*/new WeakSet();var Catalog=/*#__PURE__*/function(){function Catalog(pdfManager,_xref){_classCallCheck(this,Catalog);_classPrivateMethodInitSpec(this,_Catalog_brand);this.pdfManager=pdfManager;this.xref=_xref;this._catDict=_xref.getCatalogObj();if(!(this._catDict instanceof Dict)){throw new FormatError("Catalog object is not a dictionary.");}this.toplevelPagesDict;this._actualNumPages=null;this.fontCache=new RefSetCache();this.builtInCMapCache=new Map();this.standardFontDataCache=new Map();this.globalImageCache=new GlobalImageCache();this.pageKidsCountCache=new RefSetCache();this.pageIndexCache=new RefSetCache();this.pageDictCache=new RefSetCache();this.nonBlendModesSet=new RefSet();this.systemFontCache=new Map();}return _createClass(Catalog,[{key:"cloneDict",value:function cloneDict(){return this._catDict.clone();}},{key:"version",get:function get(){var version=this._catDict.get("Version");if(version instanceof Name){if(PDF_VERSION_REGEXP.test(version.name)){return shadow(this,"version",version.name);}warn("Invalid PDF catalog version: ".concat(version.name));}return shadow(this,"version",null);}},{key:"lang",get:function get(){var lang=this._catDict.get("Lang");return shadow(this,"lang",lang&&typeof lang==="string"?stringToPDFString(lang):null);}},{key:"needsRendering",get:function get(){var needsRendering=this._catDict.get("NeedsRendering");return shadow(this,"needsRendering",typeof needsRendering==="boolean"?needsRendering:false);}},{key:"collection",get:function get(){var collection=null;try{var obj=this._catDict.get("Collection");if(obj instanceof Dict&&obj.size>0){collection=obj;}}catch(ex){if(ex instanceof MissingDataException){throw ex;}info("Cannot fetch Collection entry; assuming no collection is present.");}return shadow(this,"collection",collection);}},{key:"acroForm",get:function get(){var acroForm=null;try{var obj=this._catDict.get("AcroForm");if(obj instanceof Dict&&obj.size>0){acroForm=obj;}}catch(ex){if(ex instanceof MissingDataException){throw ex;}info("Cannot fetch AcroForm entry; assuming no forms are present.");}return shadow(this,"acroForm",acroForm);}},{key:"acroFormRef",get:function get(){var value=this._catDict.getRaw("AcroForm");return shadow(this,"acroFormRef",value instanceof Ref?value:null);}},{key:"metadata",get:function get(){var streamRef=this._catDict.getRaw("Metadata");if(!(streamRef instanceof Ref)){return shadow(this,"metadata",null);}var metadata=null;try{var _this$xref$encrypt;var stream=this.xref.fetch(streamRef,!((_this$xref$encrypt=this.xref.encrypt)!==null&&_this$xref$encrypt!==void 0&&_this$xref$encrypt.encryptMetadata));if(stream instanceof BaseStream&&stream.dict instanceof Dict){var type=stream.dict.get("Type");var subtype=stream.dict.get("Subtype");if(isName(type,"Metadata")&&isName(subtype,"XML")){var data=stringToUTF8String(stream.getString());if(data){metadata=new MetadataParser(data).serializable;}}}}catch(ex){if(ex instanceof MissingDataException){throw ex;}info("Skipping invalid Metadata: \\"".concat(ex,"\\"."));}return shadow(this,"metadata",metadata);}},{key:"markInfo",get:function get(){var markInfo=null;try{markInfo=this._readMarkInfo();}catch(ex){if(ex instanceof MissingDataException){throw ex;}warn("Unable to read mark info.");}return shadow(this,"markInfo",markInfo);}},{key:"_readMarkInfo",value:function _readMarkInfo(){var obj=this._catDict.get("MarkInfo");if(!(obj instanceof Dict)){return null;}var markInfo={Marked:false,UserProperties:false,Suspects:false};for(var key in markInfo){var value=obj.get(key);if(typeof value==="boolean"){markInfo[key]=value;}}return markInfo;}},{key:"structTreeRoot",get:function get(){var structTree=null;try{structTree=this._readStructTreeRoot();}catch(ex){if(ex instanceof MissingDataException){throw ex;}warn("Unable read to structTreeRoot info.");}return shadow(this,"structTreeRoot",structTree);}},{key:"_readStructTreeRoot",value:function _readStructTreeRoot(){var rawObj=this._catDict.getRaw("StructTreeRoot");var obj=this.xref.fetchIfRef(rawObj);if(!(obj instanceof Dict)){return null;}var root=new StructTreeRoot(obj,rawObj);root.init();return root;}},{key:"toplevelPagesDict",get:function get(){var pagesObj=this._catDict.get("Pages");if(!(pagesObj instanceof Dict)){throw new FormatError("Invalid top-level pages dictionary.");}return shadow(this,"toplevelPagesDict",pagesObj);}},{key:"documentOutline",get:function get(){var obj=null;try{obj=this._readDocumentOutline();}catch(ex){if(ex instanceof MissingDataException){throw ex;}warn("Unable to read document outline.");}return shadow(this,"documentOutline",obj);}},{key:"_readDocumentOutline",value:function _readDocumentOutline(){var obj=this._catDict.get("Outlines");if(!(obj instanceof Dict)){return null;}obj=obj.getRaw("First");if(!(obj instanceof Ref)){return null;}var root={items:[]};var queue=[{obj:obj,parent:root}];var processed=new RefSet();processed.put(obj);var xref=this.xref,blackColor=new Uint8ClampedArray(3);while(queue.length>0){var i=queue.shift();var outlineDict=xref.fetchIfRef(i.obj);if(outlineDict===null){continue;}if(!outlineDict.has("Title")){warn("Invalid outline item encountered.");}var data={url:null,dest:null,action:null};Catalog.parseDestDictionary({destDict:outlineDict,resultObj:data,docBaseUrl:this.baseUrl,docAttachments:this.attachments});var title=outlineDict.get("Title");var flags=outlineDict.get("F")||0;var color=outlineDict.getArray("C");var count=outlineDict.get("Count");var rgbColor=blackColor;if(isNumberArray(color,3)&&(color[0]!==0||color[1]!==0||color[2]!==0)){rgbColor=ColorSpace.singletons.rgb.getRgb(color,0);}var outlineItem={action:data.action,attachment:data.attachment,dest:data.dest,url:data.url,unsafeUrl:data.unsafeUrl,newWindow:data.newWindow,setOCGState:data.setOCGState,title:typeof title==="string"?stringToPDFString(title):"",color:rgbColor,count:Number.isInteger(count)?count:undefined,bold:!!(flags&2),italic:!!(flags&1),items:[]};i.parent.items.push(outlineItem);obj=outlineDict.getRaw("First");if(obj instanceof Ref&&!processed.has(obj)){queue.push({obj:obj,parent:outlineItem});processed.put(obj);}obj=outlineDict.getRaw("Next");if(obj instanceof Ref&&!processed.has(obj)){queue.push({obj:obj,parent:i.parent});processed.put(obj);}}return root.items.length>0?root.items:null;}},{key:"permissions",get:function get(){var permissions=null;try{permissions=this._readPermissions();}catch(ex){if(ex instanceof MissingDataException){throw ex;}warn("Unable to read permissions.");}return shadow(this,"permissions",permissions);}},{key:"_readPermissions",value:function _readPermissions(){var encrypt=this.xref.trailer.get("Encrypt");if(!(encrypt instanceof Dict)){return null;}var flags=encrypt.get("P");if(typeof flags!=="number"){return null;}flags+=Math.pow(2,32);var permissions=[];for(var key in PermissionFlag){var value=PermissionFlag[key];if(flags&value){permissions.push(value);}}return permissions;}},{key:"optionalContentConfig",get:function get(){var config=null;try{var properties=this._catDict.get("OCProperties");if(!properties){return shadow(this,"optionalContentConfig",null);}var defaultConfig=properties.get("D");if(!defaultConfig){return shadow(this,"optionalContentConfig",null);}var groupsData=properties.get("OCGs");if(!Array.isArray(groupsData)){return shadow(this,"optionalContentConfig",null);}var groupRefCache=new RefSetCache();var _iterator116=_createForOfIteratorHelper(groupsData),_step116;try{for(_iterator116.s();!(_step116=_iterator116.n()).done;){var groupRef=_step116.value;if(!(groupRef instanceof Ref)||groupRefCache.has(groupRef)){continue;}groupRefCache.put(groupRef,_assertClassBrand(_Catalog_brand,this,_readOptionalContentGroup).call(this,groupRef));}}catch(err){_iterator116.e(err);}finally{_iterator116.f();}config=_assertClassBrand(_Catalog_brand,this,_readOptionalContentConfig).call(this,defaultConfig,groupRefCache);}catch(ex){if(ex instanceof MissingDataException){throw ex;}warn("Unable to read optional content config: ".concat(ex));}return shadow(this,"optionalContentConfig",config);}},{key:"setActualNumPages",value:function setActualNumPages(){var num=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;this._actualNumPages=num;}},{key:"hasActualNumPages",get:function get(){return this._actualNumPages!==null;}},{key:"_pagesCount",get:function get(){var obj=this.toplevelPagesDict.get("Count");if(!Number.isInteger(obj)){throw new FormatError("Page count in top-level pages dictionary is not an integer.");}return shadow(this,"_pagesCount",obj);}},{key:"numPages",get:function get(){return this.hasActualNumPages?this._actualNumPages:this._pagesCount;}},{key:"destinations",get:function get(){var rawDests=_assertClassBrand(_Catalog_brand,this,_readDests).call(this),dests=Object.create(null);var _iterator117=_createForOfIteratorHelper(rawDests),_step117;try{for(_iterator117.s();!(_step117=_iterator117.n()).done;){var obj=_step117.value;if(obj instanceof NameTree){var _iterator118=_createForOfIteratorHelper(obj.getAll()),_step118;try{for(_iterator118.s();!(_step118=_iterator118.n()).done;){var _step118$value=_slicedToArray(_step118.value,2),key=_step118$value[0],value=_step118$value[1];var dest=fetchDest(value);if(dest){dests[stringToPDFString(key)]=dest;}}}catch(err){_iterator118.e(err);}finally{_iterator118.f();}}else if(obj instanceof Dict){var _iterator119=_createForOfIteratorHelper(obj),_step119;try{for(_iterator119.s();!(_step119=_iterator119.n()).done;){var _step119$value=_slicedToArray(_step119.value,2),_key5=_step119$value[0],_value2=_step119$value[1];var _dest2=fetchDest(_value2);if(_dest2){dests[_key5]||(dests[_key5]=_dest2);}}}catch(err){_iterator119.e(err);}finally{_iterator119.f();}}}}catch(err){_iterator117.e(err);}finally{_iterator117.f();}return shadow(this,"destinations",dests);}},{key:"getDestination",value:function getDestination(id){var rawDests=_assertClassBrand(_Catalog_brand,this,_readDests).call(this);var _iterator120=_createForOfIteratorHelper(rawDests),_step120;try{for(_iterator120.s();!(_step120=_iterator120.n()).done;){var obj=_step120.value;if(obj instanceof NameTree||obj instanceof Dict){var _dest3=fetchDest(obj.get(id));if(_dest3){return _dest3;}}}}catch(err){_iterator120.e(err);}finally{_iterator120.f();}if(rawDests[0]instanceof NameTree){var dest=this.destinations[id];if(dest){warn("Found \\"".concat(id,"\\" at an incorrect position in the NameTree."));return dest;}}return null;}},{key:"pageLabels",get:function get(){var obj=null;try{obj=this._readPageLabels();}catch(ex){if(ex instanceof MissingDataException){throw ex;}warn("Unable to read page labels.");}return shadow(this,"pageLabels",obj);}},{key:"_readPageLabels",value:function _readPageLabels(){var obj=this._catDict.getRaw("PageLabels");if(!obj){return null;}var pageLabels=new Array(this.numPages);var style=null,prefix="";var numberTree=new NumberTree(obj,this.xref);var nums=numberTree.getAll();var currentLabel="",currentIndex=1;for(var i=0,ii=this.numPages;i<ii;i++){var labelDict=nums.get(i);if(labelDict!==undefined){if(!(labelDict instanceof Dict)){throw new FormatError("PageLabel is not a dictionary.");}if(labelDict.has("Type")&&!isName(labelDict.get("Type"),"PageLabel")){throw new FormatError("Invalid type in PageLabel dictionary.");}if(labelDict.has("S")){var s=labelDict.get("S");if(!(s instanceof Name)){throw new FormatError("Invalid style in PageLabel dictionary.");}style=s.name;}else{style=null;}if(labelDict.has("P")){var p=labelDict.get("P");if(typeof p!=="string"){throw new FormatError("Invalid prefix in PageLabel dictionary.");}prefix=stringToPDFString(p);}else{prefix="";}if(labelDict.has("St")){var st=labelDict.get("St");if(!(Number.isInteger(st)&&st>=1)){throw new FormatError("Invalid start in PageLabel dictionary.");}currentIndex=st;}else{currentIndex=1;}}switch(style){case"D":currentLabel=currentIndex;break;case"R":case"r":currentLabel=toRomanNumerals(currentIndex,style==="r");break;case"A":case"a":var LIMIT=26;var A_UPPER_CASE=0x41,A_LOWER_CASE=0x61;var baseCharCode=style==="a"?A_LOWER_CASE:A_UPPER_CASE;var letterIndex=currentIndex-1;var character=String.fromCharCode(baseCharCode+letterIndex%LIMIT);currentLabel=character.repeat(Math.floor(letterIndex/LIMIT)+1);break;default:if(style){throw new FormatError("Invalid style \\"".concat(style,"\\" in PageLabel dictionary."));}currentLabel="";}pageLabels[i]=prefix+currentLabel;currentIndex++;}return pageLabels;}},{key:"pageLayout",get:function get(){var obj=this._catDict.get("PageLayout");var pageLayout="";if(obj instanceof Name){switch(obj.name){case"SinglePage":case"OneColumn":case"TwoColumnLeft":case"TwoColumnRight":case"TwoPageLeft":case"TwoPageRight":pageLayout=obj.name;}}return shadow(this,"pageLayout",pageLayout);}},{key:"pageMode",get:function get(){var obj=this._catDict.get("PageMode");var pageMode="UseNone";if(obj instanceof Name){switch(obj.name){case"UseNone":case"UseOutlines":case"UseThumbs":case"FullScreen":case"UseOC":case"UseAttachments":pageMode=obj.name;}}return shadow(this,"pageMode",pageMode);}},{key:"viewerPreferences",get:function get(){var _this58=this;var obj=this._catDict.get("ViewerPreferences");if(!(obj instanceof Dict)){return shadow(this,"viewerPreferences",null);}var prefs=null;var _iterator121=_createForOfIteratorHelper(obj),_step121;try{for(_iterator121.s();!(_step121=_iterator121.n()).done;){var _step121$value=_slicedToArray(_step121.value,2),key=_step121$value[0],value=_step121$value[1];var prefValue=void 0;switch(key){case"HideToolbar":case"HideMenubar":case"HideWindowUI":case"FitWindow":case"CenterWindow":case"DisplayDocTitle":case"PickTrayByPDFSize":if(typeof value==="boolean"){prefValue=value;}break;case"NonFullScreenPageMode":if(value instanceof Name){switch(value.name){case"UseNone":case"UseOutlines":case"UseThumbs":case"UseOC":prefValue=value.name;break;default:prefValue="UseNone";}}break;case"Direction":if(value instanceof Name){switch(value.name){case"L2R":case"R2L":prefValue=value.name;break;default:prefValue="L2R";}}break;case"ViewArea":case"ViewClip":case"PrintArea":case"PrintClip":if(value instanceof Name){switch(value.name){case"MediaBox":case"CropBox":case"BleedBox":case"TrimBox":case"ArtBox":prefValue=value.name;break;default:prefValue="CropBox";}}break;case"PrintScaling":if(value instanceof Name){switch(value.name){case"None":case"AppDefault":prefValue=value.name;break;default:prefValue="AppDefault";}}break;case"Duplex":if(value instanceof Name){switch(value.name){case"Simplex":case"DuplexFlipShortEdge":case"DuplexFlipLongEdge":prefValue=value.name;break;default:prefValue="None";}}break;case"PrintPageRange":if(Array.isArray(value)&&value.length%2===0){var isValid=value.every(function(page,i,arr){return Number.isInteger(page)&&page>0&&(i===0||page>=arr[i-1])&&page<=_this58.numPages;});if(isValid){prefValue=value;}}break;case"NumCopies":if(Number.isInteger(value)&&value>0){prefValue=value;}break;default:warn("Ignoring non-standard key in ViewerPreferences: ".concat(key,"."));continue;}if(prefValue===undefined){warn("Bad value, for key \\"".concat(key,"\\", in ViewerPreferences: ").concat(value,"."));continue;}if(!prefs){prefs=Object.create(null);}prefs[key]=prefValue;}}catch(err){_iterator121.e(err);}finally{_iterator121.f();}return shadow(this,"viewerPreferences",prefs);}},{key:"openAction",get:function get(){var obj=this._catDict.get("OpenAction");var openAction=Object.create(null);if(obj instanceof Dict){var destDict=new Dict(this.xref);destDict.set("A",obj);var resultObj={url:null,dest:null,action:null};Catalog.parseDestDictionary({destDict:destDict,resultObj:resultObj});if(Array.isArray(resultObj.dest)){openAction.dest=resultObj.dest;}else if(resultObj.action){openAction.action=resultObj.action;}}else if(Array.isArray(obj)){openAction.dest=obj;}return shadow(this,"openAction",objectSize(openAction)>0?openAction:null);}},{key:"attachments",get:function get(){var obj=this._catDict.get("Names");var attachments=null;if(obj instanceof Dict&&obj.has("EmbeddedFiles")){var nameTree=new NameTree(obj.getRaw("EmbeddedFiles"),this.xref);var _iterator122=_createForOfIteratorHelper(nameTree.getAll()),_step122;try{for(_iterator122.s();!(_step122=_iterator122.n()).done;){var _step122$value=_slicedToArray(_step122.value,2),key=_step122$value[0],value=_step122$value[1];var fs=new FileSpec(value,this.xref);if(!attachments){attachments=Object.create(null);}attachments[stringToPDFString(key)]=fs.serializable;}}catch(err){_iterator122.e(err);}finally{_iterator122.f();}}return shadow(this,"attachments",attachments);}},{key:"xfaImages",get:function get(){var obj=this._catDict.get("Names");var xfaImages=null;if(obj instanceof Dict&&obj.has("XFAImages")){var nameTree=new NameTree(obj.getRaw("XFAImages"),this.xref);var _iterator123=_createForOfIteratorHelper(nameTree.getAll()),_step123;try{for(_iterator123.s();!(_step123=_iterator123.n()).done;){var _step123$value=_slicedToArray(_step123.value,2),key=_step123$value[0],value=_step123$value[1];if(!xfaImages){xfaImages=new Dict(this.xref);}xfaImages.set(stringToPDFString(key),value);}}catch(err){_iterator123.e(err);}finally{_iterator123.f();}}return shadow(this,"xfaImages",xfaImages);}},{key:"_collectJavaScript",value:function _collectJavaScript(){var obj=this._catDict.get("Names");var javaScript=null;function appendIfJavaScriptDict(name,jsDict){if(!(jsDict instanceof Dict)){return;}if(!isName(jsDict.get("S"),"JavaScript")){return;}var js=jsDict.get("JS");if(js instanceof BaseStream){js=js.getString();}else if(typeof js!=="string"){return;}js=stringToPDFString(js).replaceAll("\\x00","");if(js){(javaScript||(javaScript=new Map())).set(name,js);}}if(obj instanceof Dict&&obj.has("JavaScript")){var nameTree=new NameTree(obj.getRaw("JavaScript"),this.xref);var _iterator124=_createForOfIteratorHelper(nameTree.getAll()),_step124;try{for(_iterator124.s();!(_step124=_iterator124.n()).done;){var _step124$value=_slicedToArray(_step124.value,2),key=_step124$value[0],value=_step124$value[1];appendIfJavaScriptDict(stringToPDFString(key),value);}}catch(err){_iterator124.e(err);}finally{_iterator124.f();}}var openAction=this._catDict.get("OpenAction");if(openAction){appendIfJavaScriptDict("OpenAction",openAction);}return javaScript;}},{key:"jsActions",get:function get(){var javaScript=this._collectJavaScript();var actions=collectActions(this.xref,this._catDict,DocumentActionEventType);if(javaScript){actions||(actions=Object.create(null));var _iterator125=_createForOfIteratorHelper(javaScript),_step125;try{for(_iterator125.s();!(_step125=_iterator125.n()).done;){var _step125$value=_slicedToArray(_step125.value,2),key=_step125$value[0],val=_step125$value[1];if(key in actions){actions[key].push(val);}else{actions[key]=[val];}}}catch(err){_iterator125.e(err);}finally{_iterator125.f();}}return shadow(this,"jsActions",actions);}},{key:"cleanup",value:function(){var _cleanup=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee47(){var manuallyTriggered,translatedFonts,_iterator126,_step126,dict,_args54=arguments;return _regeneratorRuntime().wrap(function _callee47$(_context52){while(1)switch(_context52.prev=_context52.next){case 0:manuallyTriggered=_args54.length>0&&_args54[0]!==undefined?_args54[0]:false;clearGlobalCaches();this.globalImageCache.clear(manuallyTriggered);this.pageKidsCountCache.clear();this.pageIndexCache.clear();this.pageDictCache.clear();this.nonBlendModesSet.clear();_context52.next=9;return Promise.all(this.fontCache);case 9:translatedFonts=_context52.sent;_iterator126=_createForOfIteratorHelper(translatedFonts);try{for(_iterator126.s();!(_step126=_iterator126.n()).done;){dict=_step126.value.dict;delete dict.cacheKey;}}catch(err){_iterator126.e(err);}finally{_iterator126.f();}this.fontCache.clear();this.builtInCMapCache.clear();this.standardFontDataCache.clear();this.systemFontCache.clear();case 16:case"end":return _context52.stop();}},_callee47,this);}));function cleanup(){return _cleanup.apply(this,arguments);}return cleanup;}()},{key:"getPageDict",value:function(){var _getPageDict=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee48(pageIndex){var nodesToVisit,visitedNodes,pagesRef,xref,pageKidsCountCache,pageIndexCache,pageDictCache,currentPageIndex,currentNode,_count,obj,type,objId,count,kids,_type,last,lastKid;return _regeneratorRuntime().wrap(function _callee48$(_context53){while(1)switch(_context53.prev=_context53.next){case 0:nodesToVisit=[this.toplevelPagesDict];visitedNodes=new RefSet();pagesRef=this._catDict.getRaw("Pages");if(pagesRef instanceof Ref){visitedNodes.put(pagesRef);}xref=this.xref,pageKidsCountCache=this.pageKidsCountCache,pageIndexCache=this.pageIndexCache,pageDictCache=this.pageDictCache;currentPageIndex=0;case 6:if(!nodesToVisit.length){_context53.next=67;break;}currentNode=nodesToVisit.pop();if(!(currentNode instanceof Ref)){_context53.next=34;break;}_count=pageKidsCountCache.get(currentNode);if(!(_count>=0&&currentPageIndex+_count<=pageIndex)){_context53.next=13;break;}currentPageIndex+=_count;return _context53.abrupt("continue",6);case 13:if(!visitedNodes.has(currentNode)){_context53.next=15;break;}throw new FormatError("Pages tree contains circular reference.");case 15:visitedNodes.put(currentNode);_context53.next=18;return pageDictCache.get(currentNode)||xref.fetchAsync(currentNode);case 18:obj=_context53.sent;if(!(obj instanceof Dict)){_context53.next=32;break;}type=obj.getRaw("Type");if(!(type instanceof Ref)){_context53.next=25;break;}_context53.next=24;return xref.fetchAsync(type);case 24:type=_context53.sent;case 25:if(!(isName(type,"Page")||!obj.has("Kids"))){_context53.next=32;break;}if(!pageKidsCountCache.has(currentNode)){pageKidsCountCache.put(currentNode,1);}if(!pageIndexCache.has(currentNode)){pageIndexCache.put(currentNode,currentPageIndex);}if(!(currentPageIndex===pageIndex)){_context53.next=30;break;}return _context53.abrupt("return",[obj,currentNode]);case 30:currentPageIndex++;return _context53.abrupt("continue",6);case 32:nodesToVisit.push(obj);return _context53.abrupt("continue",6);case 34:if(currentNode instanceof Dict){_context53.next=36;break;}throw new FormatError("Page dictionary kid reference points to wrong type of object.");case 36:objId=currentNode.objId;count=currentNode.getRaw("Count");if(!(count instanceof Ref)){_context53.next=42;break;}_context53.next=41;return xref.fetchAsync(count);case 41:count=_context53.sent;case 42:if(!(Number.isInteger(count)&&count>=0)){_context53.next=47;break;}if(objId&&!pageKidsCountCache.has(objId)){pageKidsCountCache.put(objId,count);}if(!(currentPageIndex+count<=pageIndex)){_context53.next=47;break;}currentPageIndex+=count;return _context53.abrupt("continue",6);case 47:kids=currentNode.getRaw("Kids");if(!(kids instanceof Ref)){_context53.next=52;break;}_context53.next=51;return xref.fetchAsync(kids);case 51:kids=_context53.sent;case 52:if(Array.isArray(kids)){_context53.next=64;break;}_type=currentNode.getRaw("Type");if(!(_type instanceof Ref)){_context53.next=58;break;}_context53.next=57;return xref.fetchAsync(_type);case 57:_type=_context53.sent;case 58:if(!(isName(_type,"Page")||!currentNode.has("Kids"))){_context53.next=63;break;}if(!(currentPageIndex===pageIndex)){_context53.next=61;break;}return _context53.abrupt("return",[currentNode,null]);case 61:currentPageIndex++;return _context53.abrupt("continue",6);case 63:throw new FormatError("Page dictionary kids object is not an array.");case 64:for(last=kids.length-1;last>=0;last--){lastKid=kids[last];nodesToVisit.push(lastKid);if(currentNode===this.toplevelPagesDict&&lastKid instanceof Ref&&!pageDictCache.has(lastKid)){pageDictCache.put(lastKid,xref.fetchAsync(lastKid));}}_context53.next=6;break;case 67:throw new Error("Page index ".concat(pageIndex," not found."));case 68:case"end":return _context53.stop();}},_callee48,this);}));function getPageDict(_x79){return _getPageDict.apply(this,arguments);}return getPageDict;}()},{key:"getAllPageDicts",value:function(){var _getAllPageDicts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee49(){var recoveryMode,ignoreErrors,queue,visitedNodes,pagesRef,map,xref,pageIndexCache,pageIndex,addPageDict,addPageError,queueItem,currentNode,posInKids,kids,kidObj,obj,type,_args56=arguments;return _regeneratorRuntime().wrap(function _callee49$(_context54){while(1)switch(_context54.prev=_context54.next){case 0:addPageError=function _addPageError(error){if(error instanceof XRefEntryException&&!recoveryMode){throw error;}if(recoveryMode&&ignoreErrors&&pageIndex===0){warn("getAllPageDicts - Skipping invalid first page: \\"".concat(error,"\\"."));error=Dict.empty;}map.set(pageIndex++,[error,null]);};addPageDict=function _addPageDict(pageDict,pageRef){if(pageRef&&!pageIndexCache.has(pageRef)){pageIndexCache.put(pageRef,pageIndex);}map.set(pageIndex++,[pageDict,pageRef]);};recoveryMode=_args56.length>0&&_args56[0]!==undefined?_args56[0]:false;ignoreErrors=this.pdfManager.evaluatorOptions.ignoreErrors;queue=[{currentNode:this.toplevelPagesDict,posInKids:0}];visitedNodes=new RefSet();pagesRef=this._catDict.getRaw("Pages");if(pagesRef instanceof Ref){visitedNodes.put(pagesRef);}map=new Map(),xref=this.xref,pageIndexCache=this.pageIndexCache;pageIndex=0;case 10:if(!(queue.length>0)){_context54.next=70;break;}queueItem=queue.at(-1);currentNode=queueItem.currentNode,posInKids=queueItem.posInKids;kids=currentNode.getRaw("Kids");if(!(kids instanceof Ref)){_context54.next=25;break;}_context54.prev=15;_context54.next=18;return xref.fetchAsync(kids);case 18:kids=_context54.sent;_context54.next=25;break;case 21:_context54.prev=21;_context54.t0=_context54["catch"](15);addPageError(_context54.t0);return _context54.abrupt("break",70);case 25:if(Array.isArray(kids)){_context54.next=28;break;}addPageError(new FormatError("Page dictionary kids object is not an array."));return _context54.abrupt("break",70);case 28:if(!(posInKids>=kids.length)){_context54.next=31;break;}queue.pop();return _context54.abrupt("continue",10);case 31:kidObj=kids[posInKids];obj=void 0;if(!(kidObj instanceof Ref)){_context54.next=50;break;}if(!visitedNodes.has(kidObj)){_context54.next=37;break;}addPageError(new FormatError("Pages tree contains circular reference."));return _context54.abrupt("break",70);case 37:visitedNodes.put(kidObj);_context54.prev=38;_context54.next=41;return xref.fetchAsync(kidObj);case 41:obj=_context54.sent;_context54.next=48;break;case 44:_context54.prev=44;_context54.t1=_context54["catch"](38);addPageError(_context54.t1);return _context54.abrupt("break",70);case 48:_context54.next=51;break;case 50:obj=kidObj;case 51:if(obj instanceof Dict){_context54.next=54;break;}addPageError(new FormatError("Page dictionary kid reference points to wrong type of object."));return _context54.abrupt("break",70);case 54:type=obj.getRaw("Type");if(!(type instanceof Ref)){_context54.next=66;break;}_context54.prev=56;_context54.next=59;return xref.fetchAsync(type);case 59:type=_context54.sent;_context54.next=66;break;case 62:_context54.prev=62;_context54.t2=_context54["catch"](56);addPageError(_context54.t2);return _context54.abrupt("break",70);case 66:if(isName(type,"Page")||!obj.has("Kids")){addPageDict(obj,kidObj instanceof Ref?kidObj:null);}else{queue.push({currentNode:obj,posInKids:0});}queueItem.posInKids++;_context54.next=10;break;case 70:return _context54.abrupt("return",map);case 71:case"end":return _context54.stop();}},_callee49,this,[[15,21],[38,44],[56,62]]);}));function getAllPageDicts(){return _getAllPageDicts.apply(this,arguments);}return getAllPageDicts;}()},{key:"getPageIndex",value:function getPageIndex(pageRef){var _this59=this;var cachedPageIndex=this.pageIndexCache.get(pageRef);if(cachedPageIndex!==undefined){return Promise.resolve(cachedPageIndex);}var xref=this.xref;function pagesBeforeRef(kidRef){var total=0,parentRef;return xref.fetchAsync(kidRef).then(function(node){if(isRefsEqual(kidRef,pageRef)&&!isDict(node,"Page")&&!(node instanceof Dict&&!node.has("Type")&&node.has("Contents"))){throw new FormatError("The reference does not point to a /Page dictionary.");}if(!node){return null;}if(!(node instanceof Dict)){throw new FormatError("Node must be a dictionary.");}parentRef=node.getRaw("Parent");return node.getAsync("Parent");}).then(function(parent){if(!parent){return null;}if(!(parent instanceof Dict)){throw new FormatError("Parent must be a dictionary.");}return parent.getAsync("Kids");}).then(function(kids){if(!kids){return null;}var kidPromises=[];var found=false;var _iterator127=_createForOfIteratorHelper(kids),_step127;try{for(_iterator127.s();!(_step127=_iterator127.n()).done;){var kid=_step127.value;if(!(kid instanceof Ref)){throw new FormatError("Kid must be a reference.");}if(isRefsEqual(kid,kidRef)){found=true;break;}kidPromises.push(xref.fetchAsync(kid).then(function(obj){if(!(obj instanceof Dict)){throw new FormatError("Kid node must be a dictionary.");}if(obj.has("Count")){total+=obj.get("Count");}else{total++;}}));}}catch(err){_iterator127.e(err);}finally{_iterator127.f();}if(!found){throw new FormatError("Kid reference not found in parent\'s kids.");}return Promise.all(kidPromises).then(function(){return[total,parentRef];});});}var total=0;var _next2=function next(ref){return pagesBeforeRef(ref).then(function(args){if(!args){_this59.pageIndexCache.put(pageRef,total);return total;}var _args57=_slicedToArray(args,2),count=_args57[0],parentRef=_args57[1];total+=count;return _next2(parentRef);});};return _next2(pageRef);}},{key:"baseUrl",get:function get(){var uri=this._catDict.get("URI");if(uri instanceof Dict){var base=uri.get("Base");if(typeof base==="string"){var absoluteUrl=createValidAbsoluteUrl(base,null,{tryConvertEncoding:true});if(absoluteUrl){return shadow(this,"baseUrl",absoluteUrl.href);}}}return shadow(this,"baseUrl",this.pdfManager.docBaseUrl);}}],[{key:"parseDestDictionary",value:function parseDestDictionary(_ref84){var destDict=_ref84.destDict,resultObj=_ref84.resultObj,_ref84$docBaseUrl=_ref84.docBaseUrl,docBaseUrl=_ref84$docBaseUrl===void 0?null:_ref84$docBaseUrl,_ref84$docAttachments=_ref84.docAttachments,docAttachments=_ref84$docAttachments===void 0?null:_ref84$docAttachments;if(!(destDict instanceof Dict)){warn("parseDestDictionary: `destDict` must be a dictionary.");return;}var action=destDict.get("A"),url,dest;if(!(action instanceof Dict)){if(destDict.has("Dest")){action=destDict.get("Dest");}else{action=destDict.get("AA");if(action instanceof Dict){if(action.has("D")){action=action.get("D");}else if(action.has("U")){action=action.get("U");}}}}if(action instanceof Dict){var actionType=action.get("S");if(!(actionType instanceof Name)){warn("parseDestDictionary: Invalid type in Action dictionary.");return;}var actionName=actionType.name;switch(actionName){case"ResetForm":var flags=action.get("Flags");var include=((typeof flags==="number"?flags:0)&1)===0;var fields=[];var refs=[];var _iterator128=_createForOfIteratorHelper(action.get("Fields")||[]),_step128;try{for(_iterator128.s();!(_step128=_iterator128.n()).done;){var obj=_step128.value;if(obj instanceof Ref){refs.push(obj.toString());}else if(typeof obj==="string"){fields.push(stringToPDFString(obj));}}}catch(err){_iterator128.e(err);}finally{_iterator128.f();}resultObj.resetForm={fields:fields,refs:refs,include:include};break;case"URI":url=action.get("URI");if(url instanceof Name){url="/"+url.name;}break;case"GoTo":dest=action.get("D");break;case"Launch":case"GoToR":var urlDict=action.get("F");if(urlDict instanceof Dict){var fs=new FileSpec(urlDict,null,true);var rawFilename=fs.serializable.rawFilename;url=rawFilename;}else if(typeof urlDict==="string"){url=urlDict;}var remoteDest=fetchRemoteDest(action);if(remoteDest&&typeof url==="string"){url=url.split("#",1)[0]+"#"+remoteDest;}var newWindow=action.get("NewWindow");if(typeof newWindow==="boolean"){resultObj.newWindow=newWindow;}break;case"GoToE":var target=action.get("T");var attachment;if(docAttachments&&target instanceof Dict){var relationship=target.get("R");var name=target.get("N");if(isName(relationship,"C")&&typeof name==="string"){attachment=docAttachments[stringToPDFString(name)];}}if(attachment){resultObj.attachment=attachment;var attachmentDest=fetchRemoteDest(action);if(attachmentDest){resultObj.attachmentDest=attachmentDest;}}else{warn("parseDestDictionary - unimplemented \\"GoToE\\" action.");}break;case"Named":var namedAction=action.get("N");if(namedAction instanceof Name){resultObj.action=namedAction.name;}break;case"SetOCGState":var state=action.get("State");var preserveRB=action.get("PreserveRB");if(!Array.isArray(state)||state.length===0){break;}var stateArr=[];var _iterator129=_createForOfIteratorHelper(state),_step129;try{for(_iterator129.s();!(_step129=_iterator129.n()).done;){var elem=_step129.value;if(elem instanceof Name){switch(elem.name){case"ON":case"OFF":case"Toggle":stateArr.push(elem.name);break;}}else if(elem instanceof Ref){stateArr.push(elem.toString());}}}catch(err){_iterator129.e(err);}finally{_iterator129.f();}if(stateArr.length!==state.length){break;}resultObj.setOCGState={state:stateArr,preserveRB:typeof preserveRB==="boolean"?preserveRB:true};break;case"JavaScript":var jsAction=action.get("JS");var js;if(jsAction instanceof BaseStream){js=jsAction.getString();}else if(typeof jsAction==="string"){js=jsAction;}var jsURL=js&&recoverJsURL(stringToPDFString(js));if(jsURL){url=jsURL.url;resultObj.newWindow=jsURL.newWindow;break;}default:if(actionName==="JavaScript"||actionName==="SubmitForm"){break;}warn("parseDestDictionary - unsupported action: \\"".concat(actionName,"\\"."));break;}}else if(destDict.has("Dest")){dest=destDict.get("Dest");}if(typeof url==="string"){var absoluteUrl=createValidAbsoluteUrl(url,docBaseUrl,{addDefaultProtocol:true,tryConvertEncoding:true});if(absoluteUrl){resultObj.url=absoluteUrl.href;}resultObj.unsafeUrl=url;}if(dest){if(dest instanceof Name){dest=dest.name;}if(typeof dest==="string"){resultObj.dest=stringToPDFString(dest);}else if(isValidExplicitDest(dest)){resultObj.dest=dest;}}}}]);}();function _readOptionalContentGroup(groupRef){var group=this.xref.fetch(groupRef);var obj={id:groupRef.toString(),name:null,intent:null,usage:{print:null,view:null},rbGroups:[]};var name=group.get("Name");if(typeof name==="string"){obj.name=stringToPDFString(name);}var intent=group.getArray("Intent");if(!Array.isArray(intent)){intent=[intent];}if(intent.every(function(i){return i instanceof Name;})){obj.intent=intent.map(function(i){return i.name;});}var usage=group.get("Usage");if(!(usage instanceof Dict)){return obj;}var usageObj=obj.usage;var print=usage.get("Print");if(print instanceof Dict){var printState=print.get("PrintState");if(printState instanceof Name){switch(printState.name){case"ON":case"OFF":usageObj.print={printState:printState.name};}}}var view=usage.get("View");if(view instanceof Dict){var viewState=view.get("ViewState");if(viewState instanceof Name){switch(viewState.name){case"ON":case"OFF":usageObj.view={viewState:viewState.name};}}}return obj;}function _readOptionalContentConfig(config,groupRefCache){function parseOnOff(refs){var onParsed=[];if(Array.isArray(refs)){var _iterator250=_createForOfIteratorHelper(refs),_step250;try{for(_iterator250.s();!(_step250=_iterator250.n()).done;){var value=_step250.value;if(value instanceof Ref&&groupRefCache.has(value)){onParsed.push(value.toString());}}}catch(err){_iterator250.e(err);}finally{_iterator250.f();}}return onParsed;}function parseOrder(refs){var nestedLevels=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;if(!Array.isArray(refs)){return null;}var order=[];var _iterator251=_createForOfIteratorHelper(refs),_step251;try{for(_iterator251.s();!(_step251=_iterator251.n()).done;){var value=_step251.value;if(value instanceof Ref&&groupRefCache.has(value)){parsedOrderRefs.put(value);order.push(value.toString());continue;}var nestedOrder=parseNestedOrder(value,nestedLevels);if(nestedOrder){order.push(nestedOrder);}}}catch(err){_iterator251.e(err);}finally{_iterator251.f();}if(nestedLevels>0){return order;}var hiddenGroups=[];var _iterator252=_createForOfIteratorHelper(groupRefCache.items()),_step252;try{for(_iterator252.s();!(_step252=_iterator252.n()).done;){var _step252$value=_slicedToArray(_step252.value,1),groupRef=_step252$value[0];if(parsedOrderRefs.has(groupRef)){continue;}hiddenGroups.push(groupRef.toString());}}catch(err){_iterator252.e(err);}finally{_iterator252.f();}if(hiddenGroups.length){order.push({name:null,order:hiddenGroups});}return order;}function parseNestedOrder(ref,nestedLevels){if(++nestedLevels>MAX_NESTED_LEVELS){warn("parseNestedOrder - reached MAX_NESTED_LEVELS.");return null;}var value=xref.fetchIfRef(ref);if(!Array.isArray(value)){return null;}var nestedName=xref.fetchIfRef(value[0]);if(typeof nestedName!=="string"){return null;}var nestedOrder=parseOrder(value.slice(1),nestedLevels);if(!(nestedOrder!==null&&nestedOrder!==void 0&&nestedOrder.length)){return null;}return{name:stringToPDFString(nestedName),order:nestedOrder};}function parseRBGroups(rbGroups){if(!Array.isArray(rbGroups)){return;}var _iterator253=_createForOfIteratorHelper(rbGroups),_step253;try{for(_iterator253.s();!(_step253=_iterator253.n()).done;){var value=_step253.value;var rbGroup=xref.fetchIfRef(value);if(!Array.isArray(rbGroup)||!rbGroup.length){continue;}var parsedRbGroup=new Set();var _iterator254=_createForOfIteratorHelper(rbGroup),_step254;try{for(_iterator254.s();!(_step254=_iterator254.n()).done;){var ref=_step254.value;if(ref instanceof Ref&&groupRefCache.has(ref)&&!parsedRbGroup.has(ref.toString())){parsedRbGroup.add(ref.toString());groupRefCache.get(ref).rbGroups.push(parsedRbGroup);}}}catch(err){_iterator254.e(err);}finally{_iterator254.f();}}}catch(err){_iterator253.e(err);}finally{_iterator253.f();}}var xref=this.xref,parsedOrderRefs=new RefSet(),MAX_NESTED_LEVELS=10;parseRBGroups(config.get("RBGroups"));return{name:typeof config.get("Name")==="string"?stringToPDFString(config.get("Name")):null,creator:typeof config.get("Creator")==="string"?stringToPDFString(config.get("Creator")):null,baseState:config.get("BaseState")instanceof Name?config.get("BaseState").name:null,on:parseOnOff(config.get("ON")),off:parseOnOff(config.get("OFF")),order:parseOrder(config.get("Order")),groups:_toConsumableArray(groupRefCache)};}function _readDests(){var obj=this._catDict.get("Names");var rawDests=[];if(obj!==null&&obj!==void 0&&obj.has("Dests")){rawDests.push(new NameTree(obj.getRaw("Dests"),this.xref));}if(this._catDict.has("Dests")){rawDests.push(this._catDict.get("Dests"));}return rawDests;};// ./src/core/object_loader.js\nfunction mayHaveChildren(value){return value instanceof Ref||value instanceof Dict||value instanceof BaseStream||Array.isArray(value);}function addChildren(node,nodesToVisit){if(node instanceof Dict){node=node.getRawValues();}else if(node instanceof BaseStream){node=node.dict.getRawValues();}else if(!Array.isArray(node)){return;}var _iterator130=_createForOfIteratorHelper(node),_step130;try{for(_iterator130.s();!(_step130=_iterator130.n()).done;){var rawValue=_step130.value;if(mayHaveChildren(rawValue)){nodesToVisit.push(rawValue);}}}catch(err){_iterator130.e(err);}finally{_iterator130.f();}}var ObjectLoader=/*#__PURE__*/function(){function ObjectLoader(dict,keys,xref){_classCallCheck(this,ObjectLoader);this.dict=dict;this.keys=keys;this.xref=xref;this.refSet=null;}return _createClass(ObjectLoader,[{key:"load",value:function(){var _load=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee50(){var keys,dict,nodesToVisit,_iterator131,_step131,key,rawValue;return _regeneratorRuntime().wrap(function _callee50$(_context55){while(1)switch(_context55.prev=_context55.next){case 0:if(!this.xref.stream.isDataLoaded){_context55.next=2;break;}return _context55.abrupt("return",undefined);case 2:keys=this.keys,dict=this.dict;this.refSet=new RefSet();nodesToVisit=[];_iterator131=_createForOfIteratorHelper(keys);try{for(_iterator131.s();!(_step131=_iterator131.n()).done;){key=_step131.value;rawValue=dict.getRaw(key);if(rawValue!==undefined){nodesToVisit.push(rawValue);}}}catch(err){_iterator131.e(err);}finally{_iterator131.f();}return _context55.abrupt("return",this._walk(nodesToVisit));case 8:case"end":return _context55.stop();}},_callee50,this);}));function load(){return _load.apply(this,arguments);}return load;}()},{key:"_walk",value:function(){var _walk2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee51(nodesToVisit){var nodesToRevisit,pendingRequests,currentNode,manager,baseStreams,foundMissingData,_iterator132,_step132,stream,_iterator133,_step133,node;return _regeneratorRuntime().wrap(function _callee51$(_context56){while(1)switch(_context56.prev=_context56.next){case 0:nodesToRevisit=[];pendingRequests=[];case 2:if(!nodesToVisit.length){_context56.next=48;break;}currentNode=nodesToVisit.pop();if(!(currentNode instanceof Ref)){_context56.next=21;break;}if(!this.refSet.has(currentNode)){_context56.next=7;break;}return _context56.abrupt("continue",2);case 7:_context56.prev=7;this.refSet.put(currentNode);currentNode=this.xref.fetch(currentNode);_context56.next=21;break;case 12:_context56.prev=12;_context56.t0=_context56["catch"](7);if(_context56.t0 instanceof MissingDataException){_context56.next=19;break;}warn("ObjectLoader._walk - requesting all data: \\"".concat(_context56.t0,"\\"."));this.refSet=null;manager=this.xref.stream.manager;return _context56.abrupt("return",manager.requestAllChunks());case 19:nodesToRevisit.push(currentNode);pendingRequests.push({begin:_context56.t0.begin,end:_context56.t0.end});case 21:if(!(currentNode instanceof BaseStream)){_context56.next=45;break;}baseStreams=currentNode.getBaseStreams();if(!baseStreams){_context56.next=45;break;}foundMissingData=false;_iterator132=_createForOfIteratorHelper(baseStreams);_context56.prev=26;_iterator132.s();case 28:if((_step132=_iterator132.n()).done){_context56.next=36;break;}stream=_step132.value;if(!stream.isDataLoaded){_context56.next=32;break;}return _context56.abrupt("continue",34);case 32:foundMissingData=true;pendingRequests.push({begin:stream.start,end:stream.end});case 34:_context56.next=28;break;case 36:_context56.next=41;break;case 38:_context56.prev=38;_context56.t1=_context56["catch"](26);_iterator132.e(_context56.t1);case 41:_context56.prev=41;_iterator132.f();return _context56.finish(41);case 44:if(foundMissingData){nodesToRevisit.push(currentNode);}case 45:addChildren(currentNode,nodesToVisit);_context56.next=2;break;case 48:if(!pendingRequests.length){_context56.next=54;break;}_context56.next=51;return this.xref.stream.manager.requestRanges(pendingRequests);case 51:_iterator133=_createForOfIteratorHelper(nodesToRevisit);try{for(_iterator133.s();!(_step133=_iterator133.n()).done;){node=_step133.value;if(node instanceof Ref){this.refSet.remove(node);}}}catch(err){_iterator133.e(err);}finally{_iterator133.f();}return _context56.abrupt("return",this._walk(nodesToRevisit));case 54:this.refSet=null;return _context56.abrupt("return",undefined);case 56:case"end":return _context56.stop();}},_callee51,this,[[7,12],[26,38,41,44]]);}));function _walk(_x80){return _walk2.apply(this,arguments);}return _walk;}()}]);}();;// ./src/core/xfa/symbol_utils.js\nvar $acceptWhitespace=Symbol();var $addHTML=Symbol();var $appendChild=Symbol();var $childrenToHTML=Symbol();var $clean=Symbol();var $cleanPage=Symbol();var $cleanup=Symbol();var $clone=Symbol();var $consumed=Symbol();var $content=Symbol("content");var $data=Symbol("data");var $dump=Symbol();var $extra=Symbol("extra");var $finalize=Symbol();var $flushHTML=Symbol();var $getAttributeIt=Symbol();var $getAttributes=Symbol();var $getAvailableSpace=Symbol();var $getChildrenByClass=Symbol();var $getChildrenByName=Symbol();var $getChildrenByNameIt=Symbol();var $getDataValue=Symbol();var $getExtra=Symbol();var $getRealChildrenByNameIt=Symbol();var $getChildren=Symbol();var $getContainedChildren=Symbol();var $getNextPage=Symbol();var $getSubformParent=Symbol();var $getParent=Symbol();var $getTemplateRoot=Symbol();var $globalData=Symbol();var $hasSettableValue=Symbol();var $ids=Symbol();var $indexOf=Symbol();var $insertAt=Symbol();var $isCDATAXml=Symbol();var $isBindable=Symbol();var $isDataValue=Symbol();var $isDescendent=Symbol();var $isNsAgnostic=Symbol();var $isSplittable=Symbol();var $isThereMoreWidth=Symbol();var $isTransparent=Symbol();var $isUsable=Symbol();var $lastAttribute=Symbol();var $namespaceId=Symbol("namespaceId");var $nodeName=Symbol("nodeName");var $nsAttributes=Symbol();var $onChild=Symbol();var $onChildCheck=Symbol();var $onText=Symbol();var $pushGlyphs=Symbol();var $popPara=Symbol();var $pushPara=Symbol();var $removeChild=Symbol();var $root=Symbol("root");var $resolvePrototypes=Symbol();var $searchNode=Symbol();var $setId=Symbol();var $setSetAttributes=Symbol();var $setValue=Symbol();var $tabIndex=Symbol();var $text=Symbol();var $toPages=Symbol();var $toHTML=Symbol();var $toString=Symbol();var $toStyle=Symbol();var $uid=Symbol("uid");;// ./src/core/xfa/namespaces.js\nvar $buildXFAObject=Symbol();var NamespaceIds={config:{id:0,check:function check(ns){return ns.startsWith("http://www.xfa.org/schema/xci/");}},connectionSet:{id:1,check:function check(ns){return ns.startsWith("http://www.xfa.org/schema/xfa-connection-set/");}},datasets:{id:2,check:function check(ns){return ns.startsWith("http://www.xfa.org/schema/xfa-data/");}},form:{id:3,check:function check(ns){return ns.startsWith("http://www.xfa.org/schema/xfa-form/");}},localeSet:{id:4,check:function check(ns){return ns.startsWith("http://www.xfa.org/schema/xfa-locale-set/");}},pdf:{id:5,check:function check(ns){return ns==="http://ns.adobe.com/xdp/pdf/";}},signature:{id:6,check:function check(ns){return ns==="http://www.w3.org/2000/09/xmldsig#";}},sourceSet:{id:7,check:function check(ns){return ns.startsWith("http://www.xfa.org/schema/xfa-source-set/");}},stylesheet:{id:8,check:function check(ns){return ns==="http://www.w3.org/1999/XSL/Transform";}},template:{id:9,check:function check(ns){return ns.startsWith("http://www.xfa.org/schema/xfa-template/");}},xdc:{id:10,check:function check(ns){return ns.startsWith("http://www.xfa.org/schema/xdc/");}},xdp:{id:11,check:function check(ns){return ns==="http://ns.adobe.com/xdp/";}},xfdf:{id:12,check:function check(ns){return ns==="http://ns.adobe.com/xfdf/";}},xhtml:{id:13,check:function check(ns){return ns==="http://www.w3.org/1999/xhtml";}},xmpmeta:{id:14,check:function check(ns){return ns==="http://ns.adobe.com/xmpmeta/";}}};;// ./src/core/xfa/utils.js\nvar dimConverters={pt:function pt(x){return x;},cm:function cm(x){return x/2.54*72;},mm:function mm(x){return x/(10*2.54)*72;},"in":function _in(x){return x*72;},px:function px(x){return x;}};var measurementPattern=/([+-]?\\d+\\.?\\d*)(.*)/;function stripQuotes(str){if(str.startsWith("\'")||str.startsWith(\'"\')){return str.slice(1,-1);}return str;}function getInteger(_ref85){var data=_ref85.data,defaultValue=_ref85.defaultValue,validate=_ref85.validate;if(!data){return defaultValue;}data=data.trim();var n=parseInt(data,10);if(!isNaN(n)&&validate(n)){return n;}return defaultValue;}function getFloat(_ref86){var data=_ref86.data,defaultValue=_ref86.defaultValue,validate=_ref86.validate;if(!data){return defaultValue;}data=data.trim();var n=parseFloat(data);if(!isNaN(n)&&validate(n)){return n;}return defaultValue;}function getKeyword(_ref87){var data=_ref87.data,defaultValue=_ref87.defaultValue,validate=_ref87.validate;if(!data){return defaultValue;}data=data.trim();if(validate(data)){return data;}return defaultValue;}function getStringOption(data,options){return getKeyword({data:data,defaultValue:options[0],validate:function validate(k){return options.includes(k);}});}function getMeasurement(str){var def=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"0";def||(def="0");if(!str){return getMeasurement(def);}var match=str.trim().match(measurementPattern);if(!match){return getMeasurement(def);}var _match=_slicedToArray(match,3),valueStr=_match[1],unit=_match[2];var value=parseFloat(valueStr);if(isNaN(value)){return getMeasurement(def);}if(value===0){return 0;}var conv=dimConverters[unit];if(conv){return conv(value);}return value;}function getRatio(data){if(!data){return{num:1,den:1};}var ratio=data.trim().split(/\\s*:\\s*/).map(function(x){return parseFloat(x);}).filter(function(x){return!isNaN(x);});if(ratio.length===1){ratio.push(1);}if(ratio.length===0){return{num:1,den:1};}var _ratio=_slicedToArray(ratio,2),num=_ratio[0],den=_ratio[1];return{num:num,den:den};}function getRelevant(data){if(!data){return[];}return data.trim().split(/\\s+/).map(function(e){return{excluded:e[0]==="-",viewname:e.substring(1)};});}function getColor(data){var def=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[0,0,0];var _def=_slicedToArray(def,3),r=_def[0],g=_def[1],b=_def[2];if(!data){return{r:r,g:g,b:b};}var color=data.trim().split(/\\s*,\\s*/).map(function(c){return Math.min(Math.max(0,parseInt(c.trim(),10)),255);}).map(function(c){return isNaN(c)?0:c;});if(color.length<3){return{r:r,g:g,b:b};}var _color2=_slicedToArray(color,3);r=_color2[0];g=_color2[1];b=_color2[2];return{r:r,g:g,b:b};}function getBBox(data){var def=-1;if(!data){return{x:def,y:def,width:def,height:def};}var bbox=data.trim().split(/\\s*,\\s*/).map(function(m){return getMeasurement(m,"-1");});if(bbox.length<4||bbox[2]<0||bbox[3]<0){return{x:def,y:def,width:def,height:def};}var _bbox2=_slicedToArray(bbox,4),x=_bbox2[0],y=_bbox2[1],width=_bbox2[2],height=_bbox2[3];return{x:x,y:y,width:width,height:height};}var HTMLResult=/*#__PURE__*/function(){function HTMLResult(success,html,bbox,breakNode){_classCallCheck(this,HTMLResult);this.success=success;this.html=html;this.bbox=bbox;this.breakNode=breakNode;}return _createClass(HTMLResult,[{key:"isBreak",value:function isBreak(){return!!this.breakNode;}}],[{key:"FAILURE",get:function get(){return shadow(this,"FAILURE",new HTMLResult(false,null,null,null));}},{key:"EMPTY",get:function get(){return shadow(this,"EMPTY",new HTMLResult(true,null,null,null));}},{key:"breakNode",value:function breakNode(node){return new HTMLResult(false,null,null,node);}},{key:"success",value:function success(html){var bbox=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return new HTMLResult(true,html,bbox,null);}}]);}();;// ./src/core/xfa/fonts.js\nvar FontFinder=/*#__PURE__*/function(){function FontFinder(pdfFonts){_classCallCheck(this,FontFinder);this.fonts=new Map();this.cache=new Map();this.warned=new Set();this.defaultFont=null;this.add(pdfFonts);}return _createClass(FontFinder,[{key:"add",value:function add(pdfFonts){var reallyMissingFonts=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var _iterator134=_createForOfIteratorHelper(pdfFonts),_step134;try{for(_iterator134.s();!(_step134=_iterator134.n()).done;){var pdfFont=_step134.value;this.addPdfFont(pdfFont);}}catch(err){_iterator134.e(err);}finally{_iterator134.f();}var _iterator135=_createForOfIteratorHelper(this.fonts.values()),_step135;try{for(_iterator135.s();!(_step135=_iterator135.n()).done;){var _pdfFont=_step135.value;if(!_pdfFont.regular){_pdfFont.regular=_pdfFont.italic||_pdfFont.bold||_pdfFont.bolditalic;}}}catch(err){_iterator135.e(err);}finally{_iterator135.f();}if(!reallyMissingFonts||reallyMissingFonts.size===0){return;}var myriad=this.fonts.get("PdfJS-Fallback-PdfJS-XFA");var _iterator136=_createForOfIteratorHelper(reallyMissingFonts),_step136;try{for(_iterator136.s();!(_step136=_iterator136.n()).done;){var missing=_step136.value;this.fonts.set(missing,myriad);}}catch(err){_iterator136.e(err);}finally{_iterator136.f();}}},{key:"addPdfFont",value:function addPdfFont(pdfFont){var cssFontInfo=pdfFont.cssFontInfo;var name=cssFontInfo.fontFamily;var font=this.fonts.get(name);if(!font){font=Object.create(null);this.fonts.set(name,font);if(!this.defaultFont){this.defaultFont=font;}}var property="";var fontWeight=parseFloat(cssFontInfo.fontWeight);if(parseFloat(cssFontInfo.italicAngle)!==0){property=fontWeight>=700?"bolditalic":"italic";}else if(fontWeight>=700){property="bold";}if(!property){var _pdfFont$psName,_pdfFont$psName2,_pdfFont$psName3;if(pdfFont.name.includes("Bold")||(_pdfFont$psName=pdfFont.psName)!==null&&_pdfFont$psName!==void 0&&_pdfFont$psName.includes("Bold")){property="bold";}if(pdfFont.name.includes("Italic")||pdfFont.name.endsWith("It")||(_pdfFont$psName2=pdfFont.psName)!==null&&_pdfFont$psName2!==void 0&&_pdfFont$psName2.includes("Italic")||(_pdfFont$psName3=pdfFont.psName)!==null&&_pdfFont$psName3!==void 0&&_pdfFont$psName3.endsWith("It")){property+="italic";}}if(!property){property="regular";}font[property]=pdfFont;}},{key:"getDefault",value:function getDefault(){return this.defaultFont;}},{key:"find",value:function find(fontName){var mustWarn=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var font=this.fonts.get(fontName)||this.cache.get(fontName);if(font){return font;}var pattern=/,|-|_| |bolditalic|bold|italic|regular|it/gi;var name=fontName.replaceAll(pattern,"");font=this.fonts.get(name);if(font){this.cache.set(fontName,font);return font;}name=name.toLowerCase();var maybe=[];var _iterator137=_createForOfIteratorHelper(this.fonts.entries()),_step137;try{for(_iterator137.s();!(_step137=_iterator137.n()).done;){var _step137$value=_slicedToArray(_step137.value,2),_family=_step137$value[0],_pdfFont4=_step137$value[1];if(_family.replaceAll(pattern,"").toLowerCase().startsWith(name)){maybe.push(_pdfFont4);}}}catch(err){_iterator137.e(err);}finally{_iterator137.f();}if(maybe.length===0){var _iterator138=_createForOfIteratorHelper(this.fonts.entries()),_step138;try{for(_iterator138.s();!(_step138=_iterator138.n()).done;){var _pdfFont$regular$name;var _step138$value=_slicedToArray(_step138.value,2),pdfFont=_step138$value[1];if((_pdfFont$regular$name=pdfFont.regular.name)!==null&&_pdfFont$regular$name!==void 0&&_pdfFont$regular$name.replaceAll(pattern,"").toLowerCase().startsWith(name)){maybe.push(pdfFont);}}}catch(err){_iterator138.e(err);}finally{_iterator138.f();}}if(maybe.length===0){name=name.replaceAll(/psmt|mt/gi,"");var _iterator139=_createForOfIteratorHelper(this.fonts.entries()),_step139;try{for(_iterator139.s();!(_step139=_iterator139.n()).done;){var _step139$value=_slicedToArray(_step139.value,2),family=_step139$value[0],_pdfFont2=_step139$value[1];if(family.replaceAll(pattern,"").toLowerCase().startsWith(name)){maybe.push(_pdfFont2);}}}catch(err){_iterator139.e(err);}finally{_iterator139.f();}}if(maybe.length===0){var _iterator140=_createForOfIteratorHelper(this.fonts.values()),_step140;try{for(_iterator140.s();!(_step140=_iterator140.n()).done;){var _pdfFont3$regular$nam;var _pdfFont3=_step140.value;if((_pdfFont3$regular$nam=_pdfFont3.regular.name)!==null&&_pdfFont3$regular$nam!==void 0&&_pdfFont3$regular$nam.replaceAll(pattern,"").toLowerCase().startsWith(name)){maybe.push(_pdfFont3);}}}catch(err){_iterator140.e(err);}finally{_iterator140.f();}}if(maybe.length>=1){if(maybe.length!==1&&mustWarn){warn("XFA - Too many choices to guess the correct font: ".concat(fontName));}this.cache.set(fontName,maybe[0]);return maybe[0];}if(mustWarn&&!this.warned.has(fontName)){this.warned.add(fontName);warn("XFA - Cannot find the font: ".concat(fontName));}return null;}}]);}();function selectFont(xfaFont,typeface){if(xfaFont.posture==="italic"){if(xfaFont.weight==="bold"){return typeface.bolditalic;}return typeface.italic;}else if(xfaFont.weight==="bold"){return typeface.bold;}return typeface.regular;}function fonts_getMetrics(xfaFont){var real=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var pdfFont=null;if(xfaFont){var name=stripQuotes(xfaFont.typeface);var typeface=xfaFont[$globalData].fontFinder.find(name);pdfFont=selectFont(xfaFont,typeface);}if(!pdfFont){return{lineHeight:12,lineGap:2,lineNoGap:10};}var size=xfaFont.size||10;var lineHeight=pdfFont.lineHeight?Math.max(real?0:1.2,pdfFont.lineHeight):1.2;var lineGap=pdfFont.lineGap===undefined?0.2:pdfFont.lineGap;return{lineHeight:lineHeight*size,lineGap:lineGap*size,lineNoGap:Math.max(1,lineHeight-lineGap)*size};};// ./src/core/xfa/text.js\nvar WIDTH_FACTOR=1.02;var FontInfo=/*#__PURE__*/function(){function FontInfo(xfaFont,margin,lineHeight,fontFinder){_classCallCheck(this,FontInfo);this.lineHeight=lineHeight;this.paraMargin=margin||{top:0,bottom:0,left:0,right:0};if(!xfaFont){var _this$defaultFont=this.defaultFont(fontFinder);var _this$defaultFont2=_slicedToArray(_this$defaultFont,2);this.pdfFont=_this$defaultFont2[0];this.xfaFont=_this$defaultFont2[1];return;}this.xfaFont={typeface:xfaFont.typeface,posture:xfaFont.posture,weight:xfaFont.weight,size:xfaFont.size,letterSpacing:xfaFont.letterSpacing};var typeface=fontFinder.find(xfaFont.typeface);if(!typeface){var _this$defaultFont3=this.defaultFont(fontFinder);var _this$defaultFont4=_slicedToArray(_this$defaultFont3,2);this.pdfFont=_this$defaultFont4[0];this.xfaFont=_this$defaultFont4[1];return;}this.pdfFont=selectFont(xfaFont,typeface);if(!this.pdfFont){var _this$defaultFont5=this.defaultFont(fontFinder);var _this$defaultFont6=_slicedToArray(_this$defaultFont5,2);this.pdfFont=_this$defaultFont6[0];this.xfaFont=_this$defaultFont6[1];}}return _createClass(FontInfo,[{key:"defaultFont",value:function defaultFont(fontFinder){var font=fontFinder.find("Helvetica",false)||fontFinder.find("Myriad Pro",false)||fontFinder.find("Arial",false)||fontFinder.getDefault();if(font!==null&&font!==void 0&&font.regular){var pdfFont=font.regular;var _info=pdfFont.cssFontInfo;var _xfaFont={typeface:_info.fontFamily,posture:"normal",weight:"normal",size:10,letterSpacing:0};return[pdfFont,_xfaFont];}var xfaFont={typeface:"Courier",posture:"normal",weight:"normal",size:10,letterSpacing:0};return[null,xfaFont];}}]);}();var FontSelector=/*#__PURE__*/function(){function FontSelector(defaultXfaFont,defaultParaMargin,defaultLineHeight,fontFinder){_classCallCheck(this,FontSelector);this.fontFinder=fontFinder;this.stack=[new FontInfo(defaultXfaFont,defaultParaMargin,defaultLineHeight,fontFinder)];}return _createClass(FontSelector,[{key:"pushData",value:function pushData(xfaFont,margin,lineHeight){var lastFont=this.stack.at(-1);for(var _i51=0,_arr=["typeface","posture","weight","size","letterSpacing"];_i51<_arr.length;_i51++){var name=_arr[_i51];if(!xfaFont[name]){xfaFont[name]=lastFont.xfaFont[name];}}for(var _i52=0,_arr2=["top","bottom","left","right"];_i52<_arr2.length;_i52++){var _name=_arr2[_i52];if(isNaN(margin[_name])){margin[_name]=lastFont.paraMargin[_name];}}var fontInfo=new FontInfo(xfaFont,margin,lineHeight||lastFont.lineHeight,this.fontFinder);if(!fontInfo.pdfFont){fontInfo.pdfFont=lastFont.pdfFont;}this.stack.push(fontInfo);}},{key:"popFont",value:function popFont(){this.stack.pop();}},{key:"topFont",value:function topFont(){return this.stack.at(-1);}}]);}();var TextMeasure=/*#__PURE__*/function(){function TextMeasure(defaultXfaFont,defaultParaMargin,defaultLineHeight,fonts){_classCallCheck(this,TextMeasure);this.glyphs=[];this.fontSelector=new FontSelector(defaultXfaFont,defaultParaMargin,defaultLineHeight,fonts);this.extraHeight=0;}return _createClass(TextMeasure,[{key:"pushData",value:function pushData(xfaFont,margin,lineHeight){this.fontSelector.pushData(xfaFont,margin,lineHeight);}},{key:"popFont",value:function popFont(xfaFont){return this.fontSelector.popFont();}},{key:"addPara",value:function addPara(){var lastFont=this.fontSelector.topFont();this.extraHeight+=lastFont.paraMargin.top+lastFont.paraMargin.bottom;}},{key:"addString",value:function addString(str){if(!str){return;}var lastFont=this.fontSelector.topFont();var fontSize=lastFont.xfaFont.size;if(lastFont.pdfFont){var letterSpacing=lastFont.xfaFont.letterSpacing;var pdfFont=lastFont.pdfFont;var fontLineHeight=pdfFont.lineHeight||1.2;var lineHeight=lastFont.lineHeight||Math.max(1.2,fontLineHeight)*fontSize;var lineGap=pdfFont.lineGap===undefined?0.2:pdfFont.lineGap;var noGap=fontLineHeight-lineGap;var firstLineHeight=Math.max(1,noGap)*fontSize;var scale=fontSize/1000;var fallbackWidth=pdfFont.defaultWidth||pdfFont.charsToGlyphs(" ")[0].width;var _iterator141=_createForOfIteratorHelper(str.split(/[\\u2029\\n]/)),_step141;try{for(_iterator141.s();!(_step141=_iterator141.n()).done;){var line=_step141.value;var encodedLine=pdfFont.encodeString(line).join("");var glyphs=pdfFont.charsToGlyphs(encodedLine);var _iterator142=_createForOfIteratorHelper(glyphs),_step142;try{for(_iterator142.s();!(_step142=_iterator142.n()).done;){var glyph=_step142.value;var width=glyph.width||fallbackWidth;this.glyphs.push([width*scale+letterSpacing,lineHeight,firstLineHeight,glyph.unicode,false]);}}catch(err){_iterator142.e(err);}finally{_iterator142.f();}this.glyphs.push([0,0,0,"\\n",true]);}}catch(err){_iterator141.e(err);}finally{_iterator141.f();}this.glyphs.pop();return;}var _iterator143=_createForOfIteratorHelper(str.split(/[\\u2029\\n]/)),_step143;try{for(_iterator143.s();!(_step143=_iterator143.n()).done;){var _line2=_step143.value;var _iterator144=_createForOfIteratorHelper(_line2.split("")),_step144;try{for(_iterator144.s();!(_step144=_iterator144.n()).done;){var _char13=_step144.value;this.glyphs.push([fontSize,1.2*fontSize,fontSize,_char13,false]);}}catch(err){_iterator144.e(err);}finally{_iterator144.f();}this.glyphs.push([0,0,0,"\\n",true]);}}catch(err){_iterator143.e(err);}finally{_iterator143.f();}this.glyphs.pop();}},{key:"compute",value:function compute(maxWidth){var lastSpacePos=-1,lastSpaceWidth=0,width=0,height=0,currentLineWidth=0,currentLineHeight=0;var isBroken=false;var isFirstLine=true;for(var i=0,ii=this.glyphs.length;i<ii;i++){var _this$glyphs$i=_slicedToArray(this.glyphs[i],5),glyphWidth=_this$glyphs$i[0],lineHeight=_this$glyphs$i[1],firstLineHeight=_this$glyphs$i[2],_char14=_this$glyphs$i[3],isEOL=_this$glyphs$i[4];var isSpace=_char14===" ";var glyphHeight=isFirstLine?firstLineHeight:lineHeight;if(isEOL){width=Math.max(width,currentLineWidth);currentLineWidth=0;height+=currentLineHeight;currentLineHeight=glyphHeight;lastSpacePos=-1;lastSpaceWidth=0;isFirstLine=false;continue;}if(isSpace){if(currentLineWidth+glyphWidth>maxWidth){width=Math.max(width,currentLineWidth);currentLineWidth=0;height+=currentLineHeight;currentLineHeight=glyphHeight;lastSpacePos=-1;lastSpaceWidth=0;isBroken=true;isFirstLine=false;}else{currentLineHeight=Math.max(glyphHeight,currentLineHeight);lastSpaceWidth=currentLineWidth;currentLineWidth+=glyphWidth;lastSpacePos=i;}continue;}if(currentLineWidth+glyphWidth>maxWidth){height+=currentLineHeight;currentLineHeight=glyphHeight;if(lastSpacePos!==-1){i=lastSpacePos;width=Math.max(width,lastSpaceWidth);currentLineWidth=0;lastSpacePos=-1;lastSpaceWidth=0;}else{width=Math.max(width,currentLineWidth);currentLineWidth=glyphWidth;}isBroken=true;isFirstLine=false;continue;}currentLineWidth+=glyphWidth;currentLineHeight=Math.max(glyphHeight,currentLineHeight);}width=Math.max(width,currentLineWidth);height+=currentLineHeight+this.extraHeight;return{width:WIDTH_FACTOR*width,height:height,isBroken:isBroken};}}]);}();;// ./src/core/xfa/som.js\nvar namePattern=/^[^.[]+/;var indexPattern=/^[^\\]]+/;var operators={dot:0,dotDot:1,dotHash:2,dotBracket:3,dotParen:4};var shortcuts=new Map([["$data",function(root,current){return root.datasets?root.datasets.data:root;}],["$record",function(root,current){return(root.datasets?root.datasets.data:root)[$getChildren]()[0];}],["$template",function(root,current){return root.template;}],["$connectionSet",function(root,current){return root.connectionSet;}],["$form",function(root,current){return root.form;}],["$layout",function(root,current){return root.layout;}],["$host",function(root,current){return root.host;}],["$dataWindow",function(root,current){return root.dataWindow;}],["$event",function(root,current){return root.event;}],["!",function(root,current){return root.datasets;}],["$xfa",function(root,current){return root;}],["xfa",function(root,current){return root;}],["$",function(root,current){return current;}]]);var somCache=new WeakMap();function parseIndex(index){index=index.trim();if(index==="*"){return Infinity;}return parseInt(index,10)||0;}function parseExpression(expr,dotDotAllowed){var noExpr=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var match=expr.match(namePattern);if(!match){return null;}var _match2=match,_match3=_slicedToArray(_match2,1),name=_match3[0];var parsed=[{name:name,cacheName:"."+name,index:0,js:null,formCalc:null,operator:operators.dot}];var pos=name.length;while(pos<expr.length){var spos=pos;var _char15=expr.charAt(pos++);if(_char15==="["){match=expr.slice(pos).match(indexPattern);if(!match){warn("XFA - Invalid index in SOM expression");return null;}parsed.at(-1).index=parseIndex(match[0]);pos+=match[0].length+1;continue;}var operator=void 0;switch(expr.charAt(pos)){case".":if(!dotDotAllowed){return null;}pos++;operator=operators.dotDot;break;case"#":pos++;operator=operators.dotHash;break;case"[":if(noExpr){warn("XFA - SOM expression contains a FormCalc subexpression which is not supported for now.");return null;}operator=operators.dotBracket;break;case"(":if(noExpr){warn("XFA - SOM expression contains a JavaScript subexpression which is not supported for now.");return null;}operator=operators.dotParen;break;default:operator=operators.dot;break;}match=expr.slice(pos).match(namePattern);if(!match){break;}var _match4=match;var _match5=_slicedToArray(_match4,1);name=_match5[0];pos+=name.length;parsed.push({name:name,cacheName:expr.slice(spos,pos),operator:operator,index:0,js:null,formCalc:null});}return parsed;}function searchNode(root,container,expr){var dotDotAllowed=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;var useCache=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;var parsed=parseExpression(expr,dotDotAllowed);if(!parsed){return null;}var fn=shortcuts.get(parsed[0].name);var i=0;var isQualified;if(fn){isQualified=true;root=[fn(root,container)];i=1;}else{isQualified=container===null;root=[container||root];}var _loop4=function _loop4(){var _parsed$i=parsed[i],name=_parsed$i.name,cacheName=_parsed$i.cacheName,operator=_parsed$i.operator,index=_parsed$i.index;var nodes=[];var _iterator145=_createForOfIteratorHelper(root),_step145;try{for(_iterator145.s();!(_step145=_iterator145.n()).done;){var node=_step145.value;if(!node.isXFAObject){continue;}var children=void 0,cached=void 0;if(useCache){cached=somCache.get(node);if(!cached){cached=new Map();somCache.set(node,cached);}children=cached.get(cacheName);}if(!children){switch(operator){case operators.dot:children=node[$getChildrenByName](name,false);break;case operators.dotDot:children=node[$getChildrenByName](name,true);break;case operators.dotHash:children=node[$getChildrenByClass](name);children=children.isXFAObjectArray?children.children:[children];break;default:break;}if(useCache){cached.set(cacheName,children);}}if(children.length>0){nodes.push(children);}}}catch(err){_iterator145.e(err);}finally{_iterator145.f();}if(nodes.length===0&&!isQualified&&i===0){var parent=container[$getParent]();container=parent;if(!container){return{v:null};}i=-1;root=[container];return 0;// continue\n}root=isFinite(index)?nodes.filter(function(node){return index<node.length;}).map(function(node){return node[index];}):nodes.flat();},_ret2;for(var ii=parsed.length;i<ii;i++){_ret2=_loop4();if(_ret2===0)continue;if(_ret2)return _ret2.v;}if(root.length===0){return null;}return root;}function createDataNode(root,container,expr){var parsed=parseExpression(expr);if(!parsed){return null;}if(parsed.some(function(x){return x.operator===operators.dotDot;})){return null;}var fn=shortcuts.get(parsed[0].name);var i=0;if(fn){root=fn(root,container);i=1;}else{root=container||root;}for(var ii=parsed.length;i<ii;i++){var _parsed$i2=parsed[i],name=_parsed$i2.name,operator=_parsed$i2.operator,index=_parsed$i2.index;if(!isFinite(index)){parsed[i].index=0;return root.createNodes(parsed.slice(i));}var children=void 0;switch(operator){case operators.dot:children=root[$getChildrenByName](name,false);break;case operators.dotDot:children=root[$getChildrenByName](name,true);break;case operators.dotHash:children=root[$getChildrenByClass](name);children=children.isXFAObjectArray?children.children:[children];break;default:break;}if(children.length===0){return root.createNodes(parsed.slice(i));}if(index<children.length){var child=children[index];if(!child.isXFAObject){warn("XFA - Cannot create a node.");return null;}root=child;}else{parsed[i].index=index-children.length;return root.createNodes(parsed.slice(i));}}return null;};// ./src/core/xfa/xfa_object.js\nvar _applyPrototype=Symbol();var _attributes=Symbol();var _attributeNames=Symbol();var _children=Symbol("_children");var _cloneAttribute=Symbol();var _dataValue=Symbol();var _defaultValue=Symbol();var _filteredChildrenGenerator=Symbol();var _getPrototype=Symbol();var _getUnsetAttributes=Symbol();var _hasChildren=Symbol();var _max=Symbol();var _options=Symbol();var _parent=Symbol("parent");var _resolvePrototypesHelper=Symbol();var _setAttributes=Symbol();var _validator=Symbol();var uid=0;var NS_DATASETS=NamespaceIds.datasets.id;var XFAObject=/*#__PURE__*/function(){function XFAObject(nsId,name){var hasChildren=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;_classCallCheck(this,XFAObject);this[$namespaceId]=nsId;this[$nodeName]=name;this[_hasChildren]=hasChildren;this[_parent]=null;this[_children]=[];this[$uid]="".concat(name).concat(uid++);this[$globalData]=null;}return _createClass(XFAObject,[{key:"isXFAObject",get:function get(){return true;}},{key:"isXFAObjectArray",get:function get(){return false;}},{key:"createNodes",value:function createNodes(path){var root=this,node=null;var _iterator146=_createForOfIteratorHelper(path),_step146;try{for(_iterator146.s();!(_step146=_iterator146.n()).done;){var _step146$value=_step146.value,name=_step146$value.name,index=_step146$value.index;for(var i=0,ii=isFinite(index)?index:0;i<=ii;i++){var nsId=root[$namespaceId]===NS_DATASETS?-1:root[$namespaceId];node=new XmlObject(nsId,name);root[$appendChild](node);}root=node;}}catch(err){_iterator146.e(err);}finally{_iterator146.f();}return node;}},{key:$onChild,value:function value(child){if(!this[_hasChildren]||!this[$onChildCheck](child)){return false;}var name=child[$nodeName];var node=this[name];if(node instanceof XFAObjectArray){if(node.push(child)){this[$appendChild](child);return true;}}else{if(node!==null){this[$removeChild](node);}this[name]=child;this[$appendChild](child);return true;}var id="";if(this.id){id=" (id: ".concat(this.id,")");}else if(this.name){id=" (name: ".concat(this.name," ").concat(this.h.value,")");}warn("XFA - node \\"".concat(this[$nodeName],"\\"").concat(id," has already enough \\"").concat(name,"\\"!"));return false;}},{key:$onChildCheck,value:function value(child){return this.hasOwnProperty(child[$nodeName])&&child[$namespaceId]===this[$namespaceId];}},{key:$isNsAgnostic,value:function value(){return false;}},{key:$acceptWhitespace,value:function value(){return false;}},{key:$isCDATAXml,value:function value(){return false;}},{key:$isBindable,value:function value(){return false;}},{key:$popPara,value:function value(){if(this.para){this[$getTemplateRoot]()[$extra].paraStack.pop();}}},{key:$pushPara,value:function value(){this[$getTemplateRoot]()[$extra].paraStack.push(this.para);}},{key:$setId,value:function value(ids){if(this.id&&this[$namespaceId]===NamespaceIds.template.id){ids.set(this.id,this);}}},{key:$getTemplateRoot,value:function value(){return this[$globalData].template;}},{key:$isSplittable,value:function value(){return false;}},{key:$isThereMoreWidth,value:function value(){return false;}},{key:$appendChild,value:function value(child){child[_parent]=this;this[_children].push(child);if(!child[$globalData]&&this[$globalData]){child[$globalData]=this[$globalData];}}},{key:$removeChild,value:function value(child){var i=this[_children].indexOf(child);this[_children].splice(i,1);}},{key:$hasSettableValue,value:function value(){return this.hasOwnProperty("value");}},{key:$setValue,value:function value(_){}},{key:$onText,value:function value(_){}},{key:$finalize,value:function value(){}},{key:$clean,value:function value(builder){delete this[_hasChildren];if(this[$cleanup]){builder.clean(this[$cleanup]);delete this[$cleanup];}}},{key:$indexOf,value:function value(child){return this[_children].indexOf(child);}},{key:$insertAt,value:function value(i,child){child[_parent]=this;this[_children].splice(i,0,child);if(!child[$globalData]&&this[$globalData]){child[$globalData]=this[$globalData];}}},{key:$isTransparent,value:function value(){return!this.name;}},{key:$lastAttribute,value:function value(){return"";}},{key:$text,value:function value(){if(this[_children].length===0){return this[$content];}return this[_children].map(function(c){return c[$text]();}).join("");}},{key:_attributeNames,get:function get(){var proto=Object.getPrototypeOf(this);if(!proto._attributes){var attributes=proto._attributes=new Set();var _iterator147=_createForOfIteratorHelper(Object.getOwnPropertyNames(this)),_step147;try{for(_iterator147.s();!(_step147=_iterator147.n()).done;){var name=_step147.value;if(this[name]===null||this[name]instanceof XFAObject||this[name]instanceof XFAObjectArray){break;}attributes.add(name);}}catch(err){_iterator147.e(err);}finally{_iterator147.f();}}return shadow(this,_attributeNames,proto._attributes);}},{key:$isDescendent,value:function value(parent){var node=this;while(node){if(node===parent){return true;}node=node[$getParent]();}return false;}},{key:$getParent,value:function value(){return this[_parent];}},{key:$getSubformParent,value:function value(){return this[$getParent]();}},{key:$getChildren,value:function value(){var name=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(!name){return this[_children];}return this[name];}},{key:$dump,value:function value(){var dumped=Object.create(null);if(this[$content]){dumped.$content=this[$content];}var _iterator148=_createForOfIteratorHelper(Object.getOwnPropertyNames(this)),_step148;try{for(_iterator148.s();!(_step148=_iterator148.n()).done;){var name=_step148.value;var value=this[name];if(value===null){continue;}if(value instanceof XFAObject){dumped[name]=value[$dump]();}else if(value instanceof XFAObjectArray){if(!value.isEmpty()){dumped[name]=value.dump();}}else{dumped[name]=value;}}}catch(err){_iterator148.e(err);}finally{_iterator148.f();}return dumped;}},{key:$toStyle,value:function value(){return null;}},{key:$toHTML,value:function value(){return HTMLResult.EMPTY;}},{key:$getContainedChildren,value:/*#__PURE__*/_regeneratorRuntime().mark(function value(){var _iterator149,_step149,node;return _regeneratorRuntime().wrap(function value$(_context57){while(1)switch(_context57.prev=_context57.next){case 0:_iterator149=_createForOfIteratorHelper(this[$getChildren]());_context57.prev=1;_iterator149.s();case 3:if((_step149=_iterator149.n()).done){_context57.next=9;break;}node=_step149.value;_context57.next=7;return node;case 7:_context57.next=3;break;case 9:_context57.next=14;break;case 11:_context57.prev=11;_context57.t0=_context57["catch"](1);_iterator149.e(_context57.t0);case 14:_context57.prev=14;_iterator149.f();return _context57.finish(14);case 17:case"end":return _context57.stop();}},value,this,[[1,11,14,17]]);})},{key:_filteredChildrenGenerator,value:/*#__PURE__*/_regeneratorRuntime().mark(function value(filter,include){var _iterator150,_step150,node,availableSpace,res;return _regeneratorRuntime().wrap(function value$(_context58){while(1)switch(_context58.prev=_context58.next){case 0:_iterator150=_createForOfIteratorHelper(this[$getContainedChildren]());_context58.prev=1;_iterator150.s();case 3:if((_step150=_iterator150.n()).done){_context58.next=13;break;}node=_step150.value;if(!(!filter||include===filter.has(node[$nodeName]))){_context58.next=11;break;}availableSpace=this[$getAvailableSpace]();res=node[$toHTML](availableSpace);if(!res.success){this[$extra].failingNode=node;}_context58.next=11;return res;case 11:_context58.next=3;break;case 13:_context58.next=18;break;case 15:_context58.prev=15;_context58.t0=_context58["catch"](1);_iterator150.e(_context58.t0);case 18:_context58.prev=18;_iterator150.f();return _context58.finish(18);case 21:case"end":return _context58.stop();}},value,this,[[1,15,18,21]]);})},{key:$flushHTML,value:function value(){return null;}},{key:$addHTML,value:function value(html,bbox){this[$extra].children.push(html);}},{key:$getAvailableSpace,value:function value(){}},{key:$childrenToHTML,value:function value(_ref88){var _ref88$filter=_ref88.filter,filter=_ref88$filter===void 0?null:_ref88$filter,_ref88$include=_ref88.include,include=_ref88$include===void 0?true:_ref88$include;if(!this[$extra].generator){this[$extra].generator=this[_filteredChildrenGenerator](filter,include);}else{var availableSpace=this[$getAvailableSpace]();var res=this[$extra].failingNode[$toHTML](availableSpace);if(!res.success){return res;}if(res.html){this[$addHTML](res.html,res.bbox);}delete this[$extra].failingNode;}while(true){var gen=this[$extra].generator.next();if(gen.done){break;}var _res=gen.value;if(!_res.success){return _res;}if(_res.html){this[$addHTML](_res.html,_res.bbox);}}this[$extra].generator=null;return HTMLResult.EMPTY;}},{key:$setSetAttributes,value:function value(attributes){this[_setAttributes]=new Set(Object.keys(attributes));}},{key:_getUnsetAttributes,value:function value(protoAttributes){var allAttr=this[_attributeNames];var setAttr=this[_setAttributes];return _toConsumableArray(protoAttributes).filter(function(x){return allAttr.has(x)&&!setAttr.has(x);});}},{key:$resolvePrototypes,value:function value(ids){var ancestors=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new Set();var _iterator151=_createForOfIteratorHelper(this[_children]),_step151;try{for(_iterator151.s();!(_step151=_iterator151.n()).done;){var child=_step151.value;child[_resolvePrototypesHelper](ids,ancestors);}}catch(err){_iterator151.e(err);}finally{_iterator151.f();}}},{key:_resolvePrototypesHelper,value:function value(ids,ancestors){var proto=this[_getPrototype](ids,ancestors);if(proto){this[_applyPrototype](proto,ids,ancestors);}else{this[$resolvePrototypes](ids,ancestors);}}},{key:_getPrototype,value:function value(ids,ancestors){var use=this.use,usehref=this.usehref;if(!use&&!usehref){return null;}var proto=null;var somExpression=null;var id=null;var ref=use;if(usehref){ref=usehref;if(usehref.startsWith("#som(")&&usehref.endsWith(")")){somExpression=usehref.slice("#som(".length,-1);}else if(usehref.startsWith(".#som(")&&usehref.endsWith(")")){somExpression=usehref.slice(".#som(".length,-1);}else if(usehref.startsWith("#")){id=usehref.slice(1);}else if(usehref.startsWith(".#")){id=usehref.slice(2);}}else if(use.startsWith("#")){id=use.slice(1);}else{somExpression=use;}this.use=this.usehref="";if(id){proto=ids.get(id);}else{proto=searchNode(ids.get($root),this,somExpression,true,false);if(proto){proto=proto[0];}}if(!proto){warn("XFA - Invalid prototype reference: ".concat(ref,"."));return null;}if(proto[$nodeName]!==this[$nodeName]){warn("XFA - Incompatible prototype: ".concat(proto[$nodeName]," !== ").concat(this[$nodeName],"."));return null;}if(ancestors.has(proto)){warn("XFA - Cycle detected in prototypes use.");return null;}ancestors.add(proto);var protoProto=proto[_getPrototype](ids,ancestors);if(protoProto){proto[_applyPrototype](protoProto,ids,ancestors);}proto[$resolvePrototypes](ids,ancestors);ancestors["delete"](proto);return proto;}},{key:_applyPrototype,value:function value(proto,ids,ancestors){if(ancestors.has(proto)){warn("XFA - Cycle detected in prototypes use.");return;}if(!this[$content]&&proto[$content]){this[$content]=proto[$content];}var newAncestors=new Set(ancestors);newAncestors.add(proto);var _iterator152=_createForOfIteratorHelper(this[_getUnsetAttributes](proto[_setAttributes])),_step152;try{for(_iterator152.s();!(_step152=_iterator152.n()).done;){var unsetAttrName=_step152.value;this[unsetAttrName]=proto[unsetAttrName];if(this[_setAttributes]){this[_setAttributes].add(unsetAttrName);}}}catch(err){_iterator152.e(err);}finally{_iterator152.f();}var _iterator153=_createForOfIteratorHelper(Object.getOwnPropertyNames(this)),_step153;try{for(_iterator153.s();!(_step153=_iterator153.n()).done;){var name=_step153.value;if(this[_attributeNames].has(name)){continue;}var value=this[name];var protoValue=proto[name];if(value instanceof XFAObjectArray){var _iterator154=_createForOfIteratorHelper(value[_children]),_step154;try{for(_iterator154.s();!(_step154=_iterator154.n()).done;){var _child=_step154.value;_child[_resolvePrototypesHelper](ids,ancestors);}}catch(err){_iterator154.e(err);}finally{_iterator154.f();}for(var i=value[_children].length,ii=protoValue[_children].length;i<ii;i++){var child=proto[_children][i][$clone]();if(value.push(child)){child[_parent]=this;this[_children].push(child);child[_resolvePrototypesHelper](ids,ancestors);}else{break;}}continue;}if(value!==null){value[$resolvePrototypes](ids,ancestors);if(protoValue){value[_applyPrototype](protoValue,ids,ancestors);}continue;}if(protoValue!==null){var _child2=protoValue[$clone]();_child2[_parent]=this;this[name]=_child2;this[_children].push(_child2);_child2[_resolvePrototypesHelper](ids,ancestors);}}}catch(err){_iterator153.e(err);}finally{_iterator153.f();}}},{key:$clone,value:function value(){var clone=Object.create(Object.getPrototypeOf(this));var _iterator155=_createForOfIteratorHelper(Object.getOwnPropertySymbols(this)),_step155;try{for(_iterator155.s();!(_step155=_iterator155.n()).done;){var $symbol=_step155.value;try{clone[$symbol]=this[$symbol];}catch(_unused11){shadow(clone,$symbol,this[$symbol]);}}}catch(err){_iterator155.e(err);}finally{_iterator155.f();}clone[$uid]="".concat(clone[$nodeName]).concat(uid++);clone[_children]=[];var _iterator156=_createForOfIteratorHelper(Object.getOwnPropertyNames(this)),_step156;try{for(_iterator156.s();!(_step156=_iterator156.n()).done;){var name=_step156.value;if(this[_attributeNames].has(name)){clone[name]=XFAObject[_cloneAttribute](this[name]);continue;}var value=this[name];clone[name]=value instanceof XFAObjectArray?new XFAObjectArray(value[_max]):null;}}catch(err){_iterator156.e(err);}finally{_iterator156.f();}var _iterator157=_createForOfIteratorHelper(this[_children]),_step157;try{for(_iterator157.s();!(_step157=_iterator157.n()).done;){var child=_step157.value;var _name2=child[$nodeName];var clonedChild=child[$clone]();clone[_children].push(clonedChild);clonedChild[_parent]=clone;if(clone[_name2]===null){clone[_name2]=clonedChild;}else{clone[_name2][_children].push(clonedChild);}}}catch(err){_iterator157.e(err);}finally{_iterator157.f();}return clone;}},{key:$getChildren,value:function value(){var name=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(!name){return this[_children];}return this[_children].filter(function(c){return c[$nodeName]===name;});}},{key:$getChildrenByClass,value:function value(name){return this[name];}},{key:$getChildrenByName,value:function value(name,allTransparent){var first=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;return Array.from(this[$getChildrenByNameIt](name,allTransparent,first));}},{key:$getChildrenByNameIt,value:function value(name,allTransparent){var _this60=this;var first=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;return/*#__PURE__*/_regeneratorRuntime().mark(function _callee52(){var _iterator158,_step158,child;return _regeneratorRuntime().wrap(function _callee52$(_context59){while(1)switch(_context59.prev=_context59.next){case 0:if(!(name==="parent")){_context59.next=4;break;}_context59.next=3;return _this60[_parent];case 3:return _context59.abrupt("return");case 4:_iterator158=_createForOfIteratorHelper(_this60[_children]);_context59.prev=5;_iterator158.s();case 7:if((_step158=_iterator158.n()).done){_context59.next=19;break;}child=_step158.value;if(!(child[$nodeName]===name)){_context59.next=12;break;}_context59.next=12;return child;case 12:if(!(child.name===name)){_context59.next=15;break;}_context59.next=15;return child;case 15:if(!(allTransparent||child[$isTransparent]())){_context59.next=17;break;}return _context59.delegateYield(child[$getChildrenByNameIt](name,allTransparent,false),"t0",17);case 17:_context59.next=7;break;case 19:_context59.next=24;break;case 21:_context59.prev=21;_context59.t1=_context59["catch"](5);_iterator158.e(_context59.t1);case 24:_context59.prev=24;_iterator158.f();return _context59.finish(24);case 27:if(!(first&&_this60[_attributeNames].has(name))){_context59.next=30;break;}_context59.next=30;return new XFAAttribute(_this60,name,_this60[name]);case 30:case"end":return _context59.stop();}},_callee52,null,[[5,21,24,27]]);})();}}],[{key:_cloneAttribute,value:function value(obj){if(Array.isArray(obj)){return obj.map(function(x){return XFAObject[_cloneAttribute](x);});}if(_typeof(obj)==="object"&&obj!==null){return Object.assign({},obj);}return obj;}}]);}();var XFAObjectArray=/*#__PURE__*/function(){function XFAObjectArray(){var max=arguments.length>0&&arguments[0]!==undefined?arguments[0]:Infinity;_classCallCheck(this,XFAObjectArray);this[_max]=max;this[_children]=[];}return _createClass(XFAObjectArray,[{key:"isXFAObject",get:function get(){return false;}},{key:"isXFAObjectArray",get:function get(){return true;}},{key:"push",value:function push(child){var len=this[_children].length;if(len<=this[_max]){this[_children].push(child);return true;}warn("XFA - node \\"".concat(child[$nodeName],"\\" accepts no more than ").concat(this[_max]," children"));return false;}},{key:"isEmpty",value:function isEmpty(){return this[_children].length===0;}},{key:"dump",value:function dump(){return this[_children].length===1?this[_children][0][$dump]():this[_children].map(function(x){return x[$dump]();});}},{key:$clone,value:function value(){var clone=new XFAObjectArray(this[_max]);clone[_children]=this[_children].map(function(c){return c[$clone]();});return clone;}},{key:"children",get:function get(){return this[_children];}},{key:"clear",value:function clear(){this[_children].length=0;}}]);}();var XFAAttribute=/*#__PURE__*/function(){function XFAAttribute(node,name,value){_classCallCheck(this,XFAAttribute);this[_parent]=node;this[$nodeName]=name;this[$content]=value;this[$consumed]=false;this[$uid]="attribute".concat(uid++);}return _createClass(XFAAttribute,[{key:$getParent,value:function value(){return this[_parent];}},{key:$isDataValue,value:function value(){return true;}},{key:$getDataValue,value:function value(){return this[$content].trim();}},{key:$setValue,value:function value(_value3){_value3=_value3.value||"";this[$content]=_value3.toString();}},{key:$text,value:function value(){return this[$content];}},{key:$isDescendent,value:function value(parent){return this[_parent]===parent||this[_parent][$isDescendent](parent);}}]);}();var XmlObject=/*#__PURE__*/function(_XFAObject){function XmlObject(nsId,name){var _this61;var attributes=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};_classCallCheck(this,XmlObject);_this61=_callSuper(this,XmlObject,[nsId,name]);_this61[$content]="";_this61[_dataValue]=null;if(name!=="#text"){var _map3=new Map();_this61[_attributes]=_map3;for(var _i53=0,_Object$entries=Object.entries(attributes);_i53<_Object$entries.length;_i53++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i53],2),attrName=_Object$entries$_i[0],value=_Object$entries$_i[1];_map3.set(attrName,new XFAAttribute(_this61,attrName,value));}if(attributes.hasOwnProperty($nsAttributes)){var dataNode=attributes[$nsAttributes].xfa.dataNode;if(dataNode!==undefined){if(dataNode==="dataGroup"){_this61[_dataValue]=false;}else if(dataNode==="dataValue"){_this61[_dataValue]=true;}}}}_this61[$consumed]=false;return _this61;}_inherits(XmlObject,_XFAObject);return _createClass(XmlObject,[{key:$toString,value:function value(buf){var tagName=this[$nodeName];if(tagName==="#text"){buf.push(encodeToXmlString(this[$content]));return;}var utf8TagName=utf8StringToString(tagName);var prefix=this[$namespaceId]===NS_DATASETS?"xfa:":"";buf.push("<".concat(prefix).concat(utf8TagName));var _iterator159=_createForOfIteratorHelper(this[_attributes].entries()),_step159;try{for(_iterator159.s();!(_step159=_iterator159.n()).done;){var _step159$value=_slicedToArray(_step159.value,2),name=_step159$value[0],value=_step159$value[1];var utf8Name=utf8StringToString(name);buf.push(" ".concat(utf8Name,"=\\"").concat(encodeToXmlString(value[$content]),"\\""));}}catch(err){_iterator159.e(err);}finally{_iterator159.f();}if(this[_dataValue]!==null){if(this[_dataValue]){buf.push(" xfa:dataNode=\\"dataValue\\"");}else{buf.push(" xfa:dataNode=\\"dataGroup\\"");}}if(!this[$content]&&this[_children].length===0){buf.push("/>");return;}buf.push(">");if(this[$content]){if(typeof this[$content]==="string"){buf.push(encodeToXmlString(this[$content]));}else{this[$content][$toString](buf);}}else{var _iterator160=_createForOfIteratorHelper(this[_children]),_step160;try{for(_iterator160.s();!(_step160=_iterator160.n()).done;){var child=_step160.value;child[$toString](buf);}}catch(err){_iterator160.e(err);}finally{_iterator160.f();}}buf.push("</".concat(prefix).concat(utf8TagName,">"));}},{key:$onChild,value:function value(child){if(this[$content]){var node=new XmlObject(this[$namespaceId],"#text");this[$appendChild](node);node[$content]=this[$content];this[$content]="";}this[$appendChild](child);return true;}},{key:$onText,value:function value(str){this[$content]+=str;}},{key:$finalize,value:function value(){if(this[$content]&&this[_children].length>0){var node=new XmlObject(this[$namespaceId],"#text");this[$appendChild](node);node[$content]=this[$content];delete this[$content];}}},{key:$toHTML,value:function value(){if(this[$nodeName]==="#text"){return HTMLResult.success({name:"#text",value:this[$content]});}return HTMLResult.EMPTY;}},{key:$getChildren,value:function value(){var name=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(!name){return this[_children];}return this[_children].filter(function(c){return c[$nodeName]===name;});}},{key:$getAttributes,value:function value(){return this[_attributes];}},{key:$getChildrenByClass,value:function value(name){var value=this[_attributes].get(name);if(value!==undefined){return value;}return this[$getChildren](name);}},{key:$getChildrenByNameIt,value:/*#__PURE__*/_regeneratorRuntime().mark(function value(name,allTransparent){var value,_iterator161,_step161,child;return _regeneratorRuntime().wrap(function value$(_context60){while(1)switch(_context60.prev=_context60.next){case 0:value=this[_attributes].get(name);if(!value){_context60.next=4;break;}_context60.next=4;return value;case 4:_iterator161=_createForOfIteratorHelper(this[_children]);_context60.prev=5;_iterator161.s();case 7:if((_step161=_iterator161.n()).done){_context60.next=16;break;}child=_step161.value;if(!(child[$nodeName]===name)){_context60.next=12;break;}_context60.next=12;return child;case 12:if(!allTransparent){_context60.next=14;break;}return _context60.delegateYield(child[$getChildrenByNameIt](name,allTransparent),"t0",14);case 14:_context60.next=7;break;case 16:_context60.next=21;break;case 18:_context60.prev=18;_context60.t1=_context60["catch"](5);_iterator161.e(_context60.t1);case 21:_context60.prev=21;_iterator161.f();return _context60.finish(21);case 24:case"end":return _context60.stop();}},value,this,[[5,18,21,24]]);})},{key:$getAttributeIt,value:/*#__PURE__*/_regeneratorRuntime().mark(function value(name,skipConsumed){var value,_iterator162,_step162,child;return _regeneratorRuntime().wrap(function value$(_context61){while(1)switch(_context61.prev=_context61.next){case 0:value=this[_attributes].get(name);if(!(value&&(!skipConsumed||!value[$consumed]))){_context61.next=4;break;}_context61.next=4;return value;case 4:_iterator162=_createForOfIteratorHelper(this[_children]);_context61.prev=5;_iterator162.s();case 7:if((_step162=_iterator162.n()).done){_context61.next=12;break;}child=_step162.value;return _context61.delegateYield(child[$getAttributeIt](name,skipConsumed),"t0",10);case 10:_context61.next=7;break;case 12:_context61.next=17;break;case 14:_context61.prev=14;_context61.t1=_context61["catch"](5);_iterator162.e(_context61.t1);case 17:_context61.prev=17;_iterator162.f();return _context61.finish(17);case 20:case"end":return _context61.stop();}},value,this,[[5,14,17,20]]);})},{key:$getRealChildrenByNameIt,value:/*#__PURE__*/_regeneratorRuntime().mark(function value(name,allTransparent,skipConsumed){var _iterator163,_step163,child;return _regeneratorRuntime().wrap(function value$(_context62){while(1)switch(_context62.prev=_context62.next){case 0:_iterator163=_createForOfIteratorHelper(this[_children]);_context62.prev=1;_iterator163.s();case 3:if((_step163=_iterator163.n()).done){_context62.next=12;break;}child=_step163.value;if(!(child[$nodeName]===name&&(!skipConsumed||!child[$consumed]))){_context62.next=8;break;}_context62.next=8;return child;case 8:if(!allTransparent){_context62.next=10;break;}return _context62.delegateYield(child[$getRealChildrenByNameIt](name,allTransparent,skipConsumed),"t0",10);case 10:_context62.next=3;break;case 12:_context62.next=17;break;case 14:_context62.prev=14;_context62.t1=_context62["catch"](1);_iterator163.e(_context62.t1);case 17:_context62.prev=17;_iterator163.f();return _context62.finish(17);case 20:case"end":return _context62.stop();}},value,this,[[1,14,17,20]]);})},{key:$isDataValue,value:function value(){if(this[_dataValue]===null){return this[_children].length===0||this[_children][0][$namespaceId]===NamespaceIds.xhtml.id;}return this[_dataValue];}},{key:$getDataValue,value:function value(){if(this[_dataValue]===null){if(this[_children].length===0){return this[$content].trim();}if(this[_children][0][$namespaceId]===NamespaceIds.xhtml.id){return this[_children][0][$text]().trim();}return null;}return this[$content].trim();}},{key:$setValue,value:function value(_value4){_value4=_value4.value||"";this[$content]=_value4.toString();}},{key:$dump,value:function value(){var hasNS=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var dumped=Object.create(null);if(hasNS){dumped.$ns=this[$namespaceId];}if(this[$content]){dumped.$content=this[$content];}dumped.$name=this[$nodeName];dumped.children=[];var _iterator164=_createForOfIteratorHelper(this[_children]),_step164;try{for(_iterator164.s();!(_step164=_iterator164.n()).done;){var child=_step164.value;dumped.children.push(child[$dump](hasNS));}}catch(err){_iterator164.e(err);}finally{_iterator164.f();}dumped.attributes=Object.create(null);var _iterator165=_createForOfIteratorHelper(this[_attributes]),_step165;try{for(_iterator165.s();!(_step165=_iterator165.n()).done;){var _step165$value=_slicedToArray(_step165.value,2),name=_step165$value[0],_value5=_step165$value[1];dumped.attributes[name]=_value5[$content];}}catch(err){_iterator165.e(err);}finally{_iterator165.f();}return dumped;}}]);}(XFAObject);var ContentObject=/*#__PURE__*/function(_XFAObject2){function ContentObject(nsId,name){var _this62;_classCallCheck(this,ContentObject);_this62=_callSuper(this,ContentObject,[nsId,name]);_this62[$content]="";return _this62;}_inherits(ContentObject,_XFAObject2);return _createClass(ContentObject,[{key:$onText,value:function value(text){this[$content]+=text;}},{key:$finalize,value:function value(){}}]);}(XFAObject);var OptionObject=/*#__PURE__*/function(_ContentObject){function OptionObject(nsId,name,options){var _this63;_classCallCheck(this,OptionObject);_this63=_callSuper(this,OptionObject,[nsId,name]);_this63[_options]=options;return _this63;}_inherits(OptionObject,_ContentObject);return _createClass(OptionObject,[{key:$finalize,value:function value(){var _this64=this;this[$content]=getKeyword({data:this[$content],defaultValue:this[_options][0],validate:function validate(k){return _this64[_options].includes(k);}});}},{key:$clean,value:function value(builder){_superPropGet(OptionObject,$clean,this,3)([builder]);delete this[_options];}}]);}(ContentObject);var StringObject=/*#__PURE__*/function(_ContentObject2){function StringObject(){_classCallCheck(this,StringObject);return _callSuper(this,StringObject,arguments);}_inherits(StringObject,_ContentObject2);return _createClass(StringObject,[{key:$finalize,value:function value(){this[$content]=this[$content].trim();}}]);}(ContentObject);var IntegerObject=/*#__PURE__*/function(_ContentObject3){function IntegerObject(nsId,name,defaultValue,validator){var _this65;_classCallCheck(this,IntegerObject);_this65=_callSuper(this,IntegerObject,[nsId,name]);_this65[_defaultValue]=defaultValue;_this65[_validator]=validator;return _this65;}_inherits(IntegerObject,_ContentObject3);return _createClass(IntegerObject,[{key:$finalize,value:function value(){this[$content]=getInteger({data:this[$content],defaultValue:this[_defaultValue],validate:this[_validator]});}},{key:$clean,value:function value(builder){_superPropGet(IntegerObject,$clean,this,3)([builder]);delete this[_defaultValue];delete this[_validator];}}]);}(ContentObject);var Option01=/*#__PURE__*/function(_IntegerObject){function Option01(nsId,name){_classCallCheck(this,Option01);return _callSuper(this,Option01,[nsId,name,0,function(n){return n===1;}]);}_inherits(Option01,_IntegerObject);return _createClass(Option01);}(IntegerObject);var Option10=/*#__PURE__*/function(_IntegerObject2){function Option10(nsId,name){_classCallCheck(this,Option10);return _callSuper(this,Option10,[nsId,name,1,function(n){return n===0;}]);}_inherits(Option10,_IntegerObject2);return _createClass(Option10);}(IntegerObject);;// ./src/core/xfa/html_utils.js\nfunction measureToString(m){if(typeof m==="string"){return"0px";}return Number.isInteger(m)?"".concat(m,"px"):"".concat(m.toFixed(2),"px");}var converters={anchorType:function anchorType(node,style){var parent=node[$getSubformParent]();if(!parent||parent.layout&&parent.layout!=="position"){return;}if(!("transform"in style)){style.transform="";}switch(node.anchorType){case"bottomCenter":style.transform+="translate(-50%, -100%)";break;case"bottomLeft":style.transform+="translate(0,-100%)";break;case"bottomRight":style.transform+="translate(-100%,-100%)";break;case"middleCenter":style.transform+="translate(-50%,-50%)";break;case"middleLeft":style.transform+="translate(0,-50%)";break;case"middleRight":style.transform+="translate(-100%,-50%)";break;case"topCenter":style.transform+="translate(-50%,0)";break;case"topRight":style.transform+="translate(-100%,0)";break;}},dimensions:function dimensions(node,style){var _parent$layout;var parent=node[$getSubformParent]();var width=node.w;var height=node.h;if((_parent$layout=parent.layout)!==null&&_parent$layout!==void 0&&_parent$layout.includes("row")){var extra=parent[$extra];var colSpan=node.colSpan;var w;if(colSpan===-1){w=extra.columnWidths.slice(extra.currentColumn).reduce(function(a,x){return a+x;},0);extra.currentColumn=0;}else{w=extra.columnWidths.slice(extra.currentColumn,extra.currentColumn+colSpan).reduce(function(a,x){return a+x;},0);extra.currentColumn=(extra.currentColumn+node.colSpan)%extra.columnWidths.length;}if(!isNaN(w)){width=node.w=w;}}style.width=width!==""?measureToString(width):"auto";style.height=height!==""?measureToString(height):"auto";},position:function position(node,style){var parent=node[$getSubformParent]();if(parent!==null&&parent!==void 0&&parent.layout&&parent.layout!=="position"){return;}style.position="absolute";style.left=measureToString(node.x);style.top=measureToString(node.y);},rotate:function rotate(node,style){if(node.rotate){if(!("transform"in style)){style.transform="";}style.transform+="rotate(-".concat(node.rotate,"deg)");style.transformOrigin="top left";}},presence:function presence(node,style){switch(node.presence){case"invisible":style.visibility="hidden";break;case"hidden":case"inactive":style.display="none";break;}},hAlign:function hAlign(node,style){if(node[$nodeName]==="para"){switch(node.hAlign){case"justifyAll":style.textAlign="justify-all";break;case"radix":style.textAlign="left";break;default:style.textAlign=node.hAlign;}}else{switch(node.hAlign){case"left":style.alignSelf="start";break;case"center":style.alignSelf="center";break;case"right":style.alignSelf="end";break;}}},margin:function margin(node,style){if(node.margin){style.margin=node.margin[$toStyle]().margin;}}};function setMinMaxDimensions(node,style){var parent=node[$getSubformParent]();if(parent.layout==="position"){if(node.minW>0){style.minWidth=measureToString(node.minW);}if(node.maxW>0){style.maxWidth=measureToString(node.maxW);}if(node.minH>0){style.minHeight=measureToString(node.minH);}if(node.maxH>0){style.maxHeight=measureToString(node.maxH);}}}function layoutText(text,xfaFont,margin,lineHeight,fontFinder,width){var measure=new TextMeasure(xfaFont,margin,lineHeight,fontFinder);if(typeof text==="string"){measure.addString(text);}else{text[$pushGlyphs](measure);}return measure.compute(width);}function layoutNode(node,availableSpace){var height=null;var width=null;var isBroken=false;if((!node.w||!node.h)&&node.value){var marginH=0;var marginV=0;if(node.margin){marginH=node.margin.leftInset+node.margin.rightInset;marginV=node.margin.topInset+node.margin.bottomInset;}var lineHeight=null;var margin=null;if(node.para){margin=Object.create(null);lineHeight=node.para.lineHeight===""?null:node.para.lineHeight;margin.top=node.para.spaceAbove===""?0:node.para.spaceAbove;margin.bottom=node.para.spaceBelow===""?0:node.para.spaceBelow;margin.left=node.para.marginLeft===""?0:node.para.marginLeft;margin.right=node.para.marginRight===""?0:node.para.marginRight;}var font=node.font;if(!font){var root=node[$getTemplateRoot]();var parent=node[$getParent]();while(parent&&parent!==root){if(parent.font){font=parent.font;break;}parent=parent[$getParent]();}}var maxWidth=(node.w||availableSpace.width)-marginH;var fontFinder=node[$globalData].fontFinder;if(node.value.exData&&node.value.exData[$content]&&node.value.exData.contentType==="text/html"){var res=layoutText(node.value.exData[$content],font,margin,lineHeight,fontFinder,maxWidth);width=res.width;height=res.height;isBroken=res.isBroken;}else{var text=node.value[$text]();if(text){var _res2=layoutText(text,font,margin,lineHeight,fontFinder,maxWidth);width=_res2.width;height=_res2.height;isBroken=_res2.isBroken;}}if(width!==null&&!node.w){width+=marginH;}if(height!==null&&!node.h){height+=marginV;}}return{w:width,h:height,isBroken:isBroken};}function computeBbox(node,html,availableSpace){var bbox;if(node.w!==""&&node.h!==""){bbox=[node.x,node.y,node.w,node.h];}else{if(!availableSpace){return null;}var width=node.w;if(width===""){if(node.maxW===0){var parent=node[$getSubformParent]();width=parent.layout==="position"&&parent.w!==""?0:node.minW;}else{width=Math.min(node.maxW,availableSpace.width);}html.attributes.style.width=measureToString(width);}var height=node.h;if(height===""){if(node.maxH===0){var _parent3=node[$getSubformParent]();height=_parent3.layout==="position"&&_parent3.h!==""?0:node.minH;}else{height=Math.min(node.maxH,availableSpace.height);}html.attributes.style.height=measureToString(height);}bbox=[node.x,node.y,width,height];}return bbox;}function fixDimensions(node){var _parent$layout2;var parent=node[$getSubformParent]();if((_parent$layout2=parent.layout)!==null&&_parent$layout2!==void 0&&_parent$layout2.includes("row")){var extra=parent[$extra];var colSpan=node.colSpan;var width;if(colSpan===-1){width=extra.columnWidths.slice(extra.currentColumn).reduce(function(a,w){return a+w;},0);}else{width=extra.columnWidths.slice(extra.currentColumn,extra.currentColumn+colSpan).reduce(function(a,w){return a+w;},0);}if(!isNaN(width)){node.w=width;}}if(parent.layout&&parent.layout!=="position"){node.x=node.y=0;}if(node.layout==="table"){if(node.w===""&&Array.isArray(node.columnWidths)){node.w=node.columnWidths.reduce(function(a,x){return a+x;},0);}}}function layoutClass(node){switch(node.layout){case"position":return"xfaPosition";case"lr-tb":return"xfaLrTb";case"rl-row":return"xfaRlRow";case"rl-tb":return"xfaRlTb";case"row":return"xfaRow";case"table":return"xfaTable";case"tb":return"xfaTb";default:return"xfaPosition";}}function toStyle(node){var style=Object.create(null);for(var _len2=arguments.length,names=new Array(_len2>1?_len2-1:0),_key6=1;_key6<_len2;_key6++){names[_key6-1]=arguments[_key6];}for(var _i54=0,_names=names;_i54<_names.length;_i54++){var name=_names[_i54];var value=node[name];if(value===null){continue;}if(converters.hasOwnProperty(name)){converters[name](node,style);continue;}if(value instanceof XFAObject){var newStyle=value[$toStyle]();if(newStyle){Object.assign(style,newStyle);}else{warn("(DEBUG) - XFA - style for ".concat(name," not implemented yet"));}}}return style;}function createWrapper(node,html){var attributes=html.attributes;var style=attributes.style;var wrapper={name:"div",attributes:{"class":["xfaWrapper"],style:Object.create(null)},children:[]};attributes["class"].push("xfaWrapped");if(node.border){var _node$border$$extra=node.border[$extra],widths=_node$border$$extra.widths,insets=_node$border$$extra.insets;var width,height;var top=insets[0];var left=insets[3];var insetsH=insets[0]+insets[2];var insetsW=insets[1]+insets[3];switch(node.border.hand){case"even":top-=widths[0]/2;left-=widths[3]/2;width="calc(100% + ".concat((widths[1]+widths[3])/2-insetsW,"px)");height="calc(100% + ".concat((widths[0]+widths[2])/2-insetsH,"px)");break;case"left":top-=widths[0];left-=widths[3];width="calc(100% + ".concat(widths[1]+widths[3]-insetsW,"px)");height="calc(100% + ".concat(widths[0]+widths[2]-insetsH,"px)");break;case"right":width=insetsW?"calc(100% - ".concat(insetsW,"px)"):"100%";height=insetsH?"calc(100% - ".concat(insetsH,"px)"):"100%";break;}var classNames=["xfaBorder"];if(isPrintOnly(node.border)){classNames.push("xfaPrintOnly");}var border={name:"div",attributes:{"class":classNames,style:{top:"".concat(top,"px"),left:"".concat(left,"px"),width:width,height:height}},children:[]};for(var _i55=0,_arr3=["border","borderWidth","borderColor","borderRadius","borderStyle"];_i55<_arr3.length;_i55++){var key=_arr3[_i55];if(style[key]!==undefined){border.attributes.style[key]=style[key];delete style[key];}}wrapper.children.push(border,html);}else{wrapper.children.push(html);}for(var _i56=0,_arr4=["background","backgroundClip","top","left","width","height","minWidth","minHeight","maxWidth","maxHeight","transform","transformOrigin","visibility"];_i56<_arr4.length;_i56++){var _key7=_arr4[_i56];if(style[_key7]!==undefined){wrapper.attributes.style[_key7]=style[_key7];delete style[_key7];}}wrapper.attributes.style.position=style.position==="absolute"?"absolute":"relative";delete style.position;if(style.alignSelf){wrapper.attributes.style.alignSelf=style.alignSelf;delete style.alignSelf;}return wrapper;}function fixTextIndent(styles){var indent=getMeasurement(styles.textIndent,"0px");if(indent>=0){return;}var align=styles.textAlign==="right"?"right":"left";var name="padding"+(align==="left"?"Left":"Right");var padding=getMeasurement(styles[name],"0px");styles[name]="".concat(padding-indent,"px");}function setAccess(node,classNames){switch(node.access){case"nonInteractive":classNames.push("xfaNonInteractive");break;case"readOnly":classNames.push("xfaReadOnly");break;case"protected":classNames.push("xfaDisabled");break;}}function isPrintOnly(node){return node.relevant.length>0&&!node.relevant[0].excluded&&node.relevant[0].viewname==="print";}function getCurrentPara(node){var stack=node[$getTemplateRoot]()[$extra].paraStack;return stack.length?stack.at(-1):null;}function setPara(node,nodeStyle,value){var _value$attributes$cla;if((_value$attributes$cla=value.attributes["class"])!==null&&_value$attributes$cla!==void 0&&_value$attributes$cla.includes("xfaRich")){if(nodeStyle){if(node.h===""){nodeStyle.height="auto";}if(node.w===""){nodeStyle.width="auto";}}var para=getCurrentPara(node);if(para){var valueStyle=value.attributes.style;valueStyle.display="flex";valueStyle.flexDirection="column";switch(para.vAlign){case"top":valueStyle.justifyContent="start";break;case"bottom":valueStyle.justifyContent="end";break;case"middle":valueStyle.justifyContent="center";break;}var paraStyle=para[$toStyle]();for(var _i57=0,_Object$entries2=Object.entries(paraStyle);_i57<_Object$entries2.length;_i57++){var _Object$entries2$_i=_slicedToArray(_Object$entries2[_i57],2),key=_Object$entries2$_i[0],val=_Object$entries2$_i[1];if(!(key in valueStyle)){valueStyle[key]=val;}}}}}function setFontFamily(xfaFont,node,fontFinder,style){if(!fontFinder){delete style.fontFamily;return;}var name=stripQuotes(xfaFont.typeface);style.fontFamily="\\"".concat(name,"\\"");var typeface=fontFinder.find(name);if(typeface){var fontFamily=typeface.regular.cssFontInfo.fontFamily;if(fontFamily!==name){style.fontFamily="\\"".concat(fontFamily,"\\"");}var para=getCurrentPara(node);if(para&&para.lineHeight!==""){return;}if(style.lineHeight){return;}var pdfFont=selectFont(xfaFont,typeface);if(pdfFont){style.lineHeight=Math.max(1.2,pdfFont.lineHeight);}}}function fixURL(str){var absoluteUrl=createValidAbsoluteUrl(str,null,{addDefaultProtocol:true,tryConvertEncoding:true});return absoluteUrl?absoluteUrl.href:null;};// ./src/core/xfa/layout.js\nfunction createLine(node,children){return{name:"div",attributes:{"class":[node.layout==="lr-tb"?"xfaLr":"xfaRl"]},children:children};}function flushHTML(node){if(!node[$extra]){return null;}var attributes=node[$extra].attributes;var html={name:"div",attributes:attributes,children:node[$extra].children};if(node[$extra].failingNode){var htmlFromFailing=node[$extra].failingNode[$flushHTML]();if(htmlFromFailing){if(node.layout.endsWith("-tb")){html.children.push(createLine(node,[htmlFromFailing]));}else{html.children.push(htmlFromFailing);}}}if(html.children.length===0){return null;}return html;}function addHTML(node,html,bbox){var extra=node[$extra];var availableSpace=extra.availableSpace;var _bbox3=_slicedToArray(bbox,4),x=_bbox3[0],y=_bbox3[1],w=_bbox3[2],h=_bbox3[3];switch(node.layout){case"position":{extra.width=Math.max(extra.width,x+w);extra.height=Math.max(extra.height,y+h);extra.children.push(html);break;}case"lr-tb":case"rl-tb":if(!extra.line||extra.attempt===1){extra.line=createLine(node,[]);extra.children.push(extra.line);extra.numberInLine=0;}extra.numberInLine+=1;extra.line.children.push(html);if(extra.attempt===0){extra.currentWidth+=w;extra.height=Math.max(extra.height,extra.prevHeight+h);}else{extra.currentWidth=w;extra.prevHeight=extra.height;extra.height+=h;extra.attempt=0;}extra.width=Math.max(extra.width,extra.currentWidth);break;case"rl-row":case"row":{extra.children.push(html);extra.width+=w;extra.height=Math.max(extra.height,h);var height=measureToString(extra.height);var _iterator166=_createForOfIteratorHelper(extra.children),_step166;try{for(_iterator166.s();!(_step166=_iterator166.n()).done;){var child=_step166.value;child.attributes.style.height=height;}}catch(err){_iterator166.e(err);}finally{_iterator166.f();}break;}case"table":{extra.width=Math.min(availableSpace.width,Math.max(extra.width,w));extra.height+=h;extra.children.push(html);break;}case"tb":{extra.width=Math.min(availableSpace.width,Math.max(extra.width,w));extra.height+=h;extra.children.push(html);break;}}}function getAvailableSpace(node){var availableSpace=node[$extra].availableSpace;var marginV=node.margin?node.margin.topInset+node.margin.bottomInset:0;var marginH=node.margin?node.margin.leftInset+node.margin.rightInset:0;switch(node.layout){case"lr-tb":case"rl-tb":if(node[$extra].attempt===0){return{width:availableSpace.width-marginH-node[$extra].currentWidth,height:availableSpace.height-marginV-node[$extra].prevHeight};}return{width:availableSpace.width-marginH,height:availableSpace.height-marginV-node[$extra].height};case"rl-row":case"row":var width=node[$extra].columnWidths.slice(node[$extra].currentColumn).reduce(function(a,x){return a+x;});return{width:width,height:availableSpace.height-marginH};case"table":case"tb":return{width:availableSpace.width-marginH,height:availableSpace.height-marginV-node[$extra].height};case"position":default:return availableSpace;}}function getTransformedBBox(node){var w=node.w===""?NaN:node.w;var h=node.h===""?NaN:node.h;var centerX=0,centerY=0;switch(node.anchorType||""){case"bottomCenter":centerX=w/2;centerY=h;break;case"bottomLeft":centerX=0;centerY=h;break;case"bottomRight":centerX=w;centerY=h;break;case"middleCenter":centerX=w/2;centerY=h/2;break;case"middleLeft":centerX=0;centerY=h/2;break;case"middleRight":centerX=w;centerY=h/2;break;case"topCenter":centerX=w/2;centerY=0;break;case"topRight":centerX=w;centerY=0;break;}var x,y;switch(node.rotate||0){case 0:x=-centerX;y=-centerY;break;case 90:x=-centerY;y=centerX;var _ref89=[h,-w];w=_ref89[0];h=_ref89[1];break;case 180:x=centerX;y=centerY;var _ref90=[-w,-h];w=_ref90[0];h=_ref90[1];break;case 270:x=centerY;y=-centerX;var _ref91=[-h,w];w=_ref91[0];h=_ref91[1];break;}return[node.x+x+Math.min(0,w),node.y+y+Math.min(0,h),Math.abs(w),Math.abs(h)];}function checkDimensions(node,space){var _parent$$extra;if(node[$getTemplateRoot]()[$extra].firstUnsplittable===null){return true;}if(node.w===0||node.h===0){return true;}var ERROR=2;var parent=node[$getSubformParent]();var attempt=((_parent$$extra=parent[$extra])===null||_parent$$extra===void 0?void 0:_parent$$extra.attempt)||0;var _getTransformedBBox=getTransformedBBox(node),_getTransformedBBox2=_slicedToArray(_getTransformedBBox,4),y=_getTransformedBBox2[1],w=_getTransformedBBox2[2],h=_getTransformedBBox2[3];switch(parent.layout){case"lr-tb":case"rl-tb":if(attempt===0){if(!node[$getTemplateRoot]()[$extra].noLayoutFailure){if(node.h!==""&&Math.round(h-space.height)>ERROR){return false;}if(node.w!==""){if(Math.round(w-space.width)<=ERROR){return true;}if(parent[$extra].numberInLine===0){return space.height>ERROR;}return false;}return space.width>ERROR;}if(node.w!==""){return Math.round(w-space.width)<=ERROR;}return space.width>ERROR;}if(node[$getTemplateRoot]()[$extra].noLayoutFailure){return true;}if(node.h!==""&&Math.round(h-space.height)>ERROR){return false;}if(node.w===""||Math.round(w-space.width)<=ERROR){return space.height>ERROR;}if(parent[$isThereMoreWidth]()){return false;}return space.height>ERROR;case"table":case"tb":if(node[$getTemplateRoot]()[$extra].noLayoutFailure){return true;}if(node.h!==""&&!node[$isSplittable]()){return Math.round(h-space.height)<=ERROR;}if(node.w===""||Math.round(w-space.width)<=ERROR){return space.height>ERROR;}if(parent[$isThereMoreWidth]()){return false;}return space.height>ERROR;case"position":if(node[$getTemplateRoot]()[$extra].noLayoutFailure){return true;}if(node.h===""||Math.round(h+y-space.height)<=ERROR){return true;}var area=node[$getTemplateRoot]()[$extra].currentContentArea;return h+y>area.h;case"rl-row":case"row":if(node[$getTemplateRoot]()[$extra].noLayoutFailure){return true;}if(node.h!==""){return Math.round(h-space.height)<=ERROR;}return true;default:return true;}};// ./src/core/xfa/template.js\nvar TEMPLATE_NS_ID=NamespaceIds.template.id;var SVG_NS="http://www.w3.org/2000/svg";var MAX_ATTEMPTS_FOR_LRTB_LAYOUT=2;var MAX_EMPTY_PAGES=3;var DEFAULT_TAB_INDEX=5000;var HEADING_PATTERN=/^H(\\d+)$/;var MIMES=new Set(["image/gif","image/jpeg","image/jpg","image/pjpeg","image/png","image/apng","image/x-png","image/bmp","image/x-ms-bmp","image/tiff","image/tif","application/octet-stream"]);var IMAGES_HEADERS=[[[0x42,0x4d],"image/bmp"],[[0xff,0xd8,0xff],"image/jpeg"],[[0x49,0x49,0x2a,0x00],"image/tiff"],[[0x4d,0x4d,0x00,0x2a],"image/tiff"],[[0x47,0x49,0x46,0x38,0x39,0x61],"image/gif"],[[0x89,0x50,0x4e,0x47,0x0d,0x0a,0x1a,0x0a],"image/png"]];function getBorderDims(node){if(!node||!node.border){return{w:0,h:0};}var borderExtra=node.border[$getExtra]();if(!borderExtra){return{w:0,h:0};}return{w:borderExtra.widths[0]+borderExtra.widths[2]+borderExtra.insets[0]+borderExtra.insets[2],h:borderExtra.widths[1]+borderExtra.widths[3]+borderExtra.insets[1]+borderExtra.insets[3]};}function hasMargin(node){return node.margin&&(node.margin.topInset||node.margin.rightInset||node.margin.bottomInset||node.margin.leftInset);}function _setValue(templateNode,value){if(!templateNode.value){var nodeValue=new Value({});templateNode[$appendChild](nodeValue);templateNode.value=nodeValue;}templateNode.value[$setValue](value);}function getContainedChildren(node){var _iterator167,_step167,child;return _regeneratorRuntime().wrap(function getContainedChildren$(_context63){while(1)switch(_context63.prev=_context63.next){case 0:_iterator167=_createForOfIteratorHelper(node[$getChildren]());_context63.prev=1;_iterator167.s();case 3:if((_step167=_iterator167.n()).done){_context63.next=12;break;}child=_step167.value;if(!(child instanceof SubformSet)){_context63.next=8;break;}return _context63.delegateYield(child[$getContainedChildren](),"t0",7);case 7:return _context63.abrupt("continue",10);case 8:_context63.next=10;return child;case 10:_context63.next=3;break;case 12:_context63.next=17;break;case 14:_context63.prev=14;_context63.t1=_context63["catch"](1);_iterator167.e(_context63.t1);case 17:_context63.prev=17;_iterator167.f();return _context63.finish(17);case 20:case"end":return _context63.stop();}},_marked2,null,[[1,14,17,20]]);}function isRequired(node){var _node$validate;return((_node$validate=node.validate)===null||_node$validate===void 0?void 0:_node$validate.nullTest)==="error";}function setTabIndex(node){while(node){if(!node.traversal){node[$tabIndex]=node[$getParent]()[$tabIndex];return;}if(node[$tabIndex]){return;}var next=null;var _iterator168=_createForOfIteratorHelper(node.traversal[$getChildren]()),_step168;try{for(_iterator168.s();!(_step168=_iterator168.n()).done;){var child=_step168.value;if(child.operation==="next"){next=child;break;}}}catch(err){_iterator168.e(err);}finally{_iterator168.f();}if(!next||!next.ref){node[$tabIndex]=node[$getParent]()[$tabIndex];return;}var root=node[$getTemplateRoot]();node[$tabIndex]=++root[$tabIndex];var ref=root[$searchNode](next.ref,node);if(!ref){return;}node=ref[0];}}function applyAssist(obj,attributes){var assist=obj.assist;if(assist){var assistTitle=assist[$toHTML]();if(assistTitle){attributes.title=assistTitle;}var role=assist.role;var match=role.match(HEADING_PATTERN);if(match){var ariaRole="heading";var ariaLevel=match[1];attributes.role=ariaRole;attributes["aria-level"]=ariaLevel;}}if(obj.layout==="table"){attributes.role="table";}else if(obj.layout==="row"){attributes.role="row";}else{var parent=obj[$getParent]();if(parent.layout==="row"){var _parent$assist;attributes.role=((_parent$assist=parent.assist)===null||_parent$assist===void 0?void 0:_parent$assist.role)==="TH"?"columnheader":"cell";}}}function ariaLabel(obj){if(!obj.assist){return null;}var assist=obj.assist;if(assist.speak&&assist.speak[$content]!==""){return assist.speak[$content];}if(assist.toolTip){return assist.toolTip[$content];}return null;}function valueToHtml(value){return HTMLResult.success({name:"div",attributes:{"class":["xfaRich"],style:Object.create(null)},children:[{name:"span",attributes:{style:Object.create(null)},value:value}]});}function setFirstUnsplittable(node){var root=node[$getTemplateRoot]();if(root[$extra].firstUnsplittable===null){root[$extra].firstUnsplittable=node;root[$extra].noLayoutFailure=true;}}function unsetFirstUnsplittable(node){var root=node[$getTemplateRoot]();if(root[$extra].firstUnsplittable===node){root[$extra].noLayoutFailure=false;}}function handleBreak(node){if(node[$extra]){return false;}node[$extra]=Object.create(null);if(node.targetType==="auto"){return false;}var root=node[$getTemplateRoot]();var target=null;if(node.target){target=root[$searchNode](node.target,node[$getParent]());if(!target){return false;}target=target[0];}var _root$$extra=root[$extra],currentPageArea=_root$$extra.currentPageArea,currentContentArea=_root$$extra.currentContentArea;if(node.targetType==="pageArea"){if(!(target instanceof PageArea)){target=null;}if(node.startNew){node[$extra].target=target||currentPageArea;return true;}else if(target&&target!==currentPageArea){node[$extra].target=target;return true;}return false;}if(!(target instanceof ContentArea)){target=null;}var pageArea=target&&target[$getParent]();var index;var nextPageArea=pageArea;if(node.startNew){if(target){var contentAreas=pageArea.contentArea.children;var indexForCurrent=contentAreas.indexOf(currentContentArea);var indexForTarget=contentAreas.indexOf(target);if(indexForCurrent!==-1&&indexForCurrent<indexForTarget){nextPageArea=null;}index=indexForTarget-1;}else{index=currentPageArea.contentArea.children.indexOf(currentContentArea);}}else if(target&&target!==currentContentArea){var _contentAreas=pageArea.contentArea.children;index=_contentAreas.indexOf(target)-1;nextPageArea=pageArea===currentPageArea?null:pageArea;}else{return false;}node[$extra].target=nextPageArea;node[$extra].index=index;return true;}function handleOverflow(node,extraNode,space){var root=node[$getTemplateRoot]();var saved=root[$extra].noLayoutFailure;var savedMethod=extraNode[$getSubformParent];extraNode[$getSubformParent]=function(){return node;};root[$extra].noLayoutFailure=true;var res=extraNode[$toHTML](space);node[$addHTML](res.html,res.bbox);root[$extra].noLayoutFailure=saved;extraNode[$getSubformParent]=savedMethod;}var AppearanceFilter=/*#__PURE__*/function(_StringObject){function AppearanceFilter(attributes){var _this66;_classCallCheck(this,AppearanceFilter);_this66=_callSuper(this,AppearanceFilter,[TEMPLATE_NS_ID,"appearanceFilter"]);_this66.id=attributes.id||"";_this66.type=getStringOption(attributes.type,["optional","required"]);_this66.use=attributes.use||"";_this66.usehref=attributes.usehref||"";return _this66;}_inherits(AppearanceFilter,_StringObject);return _createClass(AppearanceFilter);}(StringObject);var Arc=/*#__PURE__*/function(_XFAObject3){function Arc(attributes){var _this67;_classCallCheck(this,Arc);_this67=_callSuper(this,Arc,[TEMPLATE_NS_ID,"arc",true]);_this67.circular=getInteger({data:attributes.circular,defaultValue:0,validate:function validate(x){return x===1;}});_this67.hand=getStringOption(attributes.hand,["even","left","right"]);_this67.id=attributes.id||"";_this67.startAngle=getFloat({data:attributes.startAngle,defaultValue:0,validate:function validate(x){return true;}});_this67.sweepAngle=getFloat({data:attributes.sweepAngle,defaultValue:360,validate:function validate(x){return true;}});_this67.use=attributes.use||"";_this67.usehref=attributes.usehref||"";_this67.edge=null;_this67.fill=null;return _this67;}_inherits(Arc,_XFAObject3);return _createClass(Arc,[{key:$toHTML,value:function value(){var _this$fill;var edge=this.edge||new Edge({});var edgeStyle=edge[$toStyle]();var style=Object.create(null);if(((_this$fill=this.fill)===null||_this$fill===void 0?void 0:_this$fill.presence)==="visible"){Object.assign(style,this.fill[$toStyle]());}else{style.fill="transparent";}style.strokeWidth=measureToString(edge.presence==="visible"?edge.thickness:0);style.stroke=edgeStyle.color;var arc;var attributes={xmlns:SVG_NS,style:{width:"100%",height:"100%",overflow:"visible"}};if(this.sweepAngle===360){arc={name:"ellipse",attributes:{xmlns:SVG_NS,cx:"50%",cy:"50%",rx:"50%",ry:"50%",style:style}};}else{var startAngle=this.startAngle*Math.PI/180;var sweepAngle=this.sweepAngle*Math.PI/180;var largeArc=this.sweepAngle>180?1:0;var x1=50*(1+Math.cos(startAngle)),y1=50*(1-Math.sin(startAngle)),x2=50*(1+Math.cos(startAngle+sweepAngle)),y2=50*(1-Math.sin(startAngle+sweepAngle));arc={name:"path",attributes:{xmlns:SVG_NS,d:"M ".concat(x1," ").concat(y1," A 50 50 0 ").concat(largeArc," 0 ").concat(x2," ").concat(y2),vectorEffect:"non-scaling-stroke",style:style}};Object.assign(attributes,{viewBox:"0 0 100 100",preserveAspectRatio:"none"});}var svg={name:"svg",children:[arc],attributes:attributes};var parent=this[$getParent]()[$getParent]();if(hasMargin(parent)){return HTMLResult.success({name:"div",attributes:{style:{display:"inline",width:"100%",height:"100%"}},children:[svg]});}svg.attributes.style.position="absolute";return HTMLResult.success(svg);}}]);}(XFAObject);var Area=/*#__PURE__*/function(_XFAObject4){function Area(attributes){var _this68;_classCallCheck(this,Area);_this68=_callSuper(this,Area,[TEMPLATE_NS_ID,"area",true]);_this68.colSpan=getInteger({data:attributes.colSpan,defaultValue:1,validate:function validate(n){return n>=1||n===-1;}});_this68.id=attributes.id||"";_this68.name=attributes.name||"";_this68.relevant=getRelevant(attributes.relevant);_this68.use=attributes.use||"";_this68.usehref=attributes.usehref||"";_this68.x=getMeasurement(attributes.x,"0pt");_this68.y=getMeasurement(attributes.y,"0pt");_this68.desc=null;_this68.extras=null;_this68.area=new XFAObjectArray();_this68.draw=new XFAObjectArray();_this68.exObject=new XFAObjectArray();_this68.exclGroup=new XFAObjectArray();_this68.field=new XFAObjectArray();_this68.subform=new XFAObjectArray();_this68.subformSet=new XFAObjectArray();return _this68;}_inherits(Area,_XFAObject4);return _createClass(Area,[{key:$getContainedChildren,value:/*#__PURE__*/_regeneratorRuntime().mark(function value(){return _regeneratorRuntime().wrap(function value$(_context64){while(1)switch(_context64.prev=_context64.next){case 0:return _context64.delegateYield(getContainedChildren(this),"t0",1);case 1:case"end":return _context64.stop();}},value,this);})},{key:$isTransparent,value:function value(){return true;}},{key:$isBindable,value:function value(){return true;}},{key:$addHTML,value:function value(html,bbox){var _bbox4=_slicedToArray(bbox,4),x=_bbox4[0],y=_bbox4[1],w=_bbox4[2],h=_bbox4[3];this[$extra].width=Math.max(this[$extra].width,x+w);this[$extra].height=Math.max(this[$extra].height,y+h);this[$extra].children.push(html);}},{key:$getAvailableSpace,value:function value(){return this[$extra].availableSpace;}},{key:$toHTML,value:function value(availableSpace){var style=toStyle(this,"position");var attributes={style:style,id:this[$uid],"class":["xfaArea"]};if(isPrintOnly(this)){attributes["class"].push("xfaPrintOnly");}if(this.name){attributes.xfaName=this.name;}var children=[];this[$extra]={children:children,width:0,height:0,availableSpace:availableSpace};var result=this[$childrenToHTML]({filter:new Set(["area","draw","field","exclGroup","subform","subformSet"]),include:true});if(!result.success){if(result.isBreak()){return result;}delete this[$extra];return HTMLResult.FAILURE;}style.width=measureToString(this[$extra].width);style.height=measureToString(this[$extra].height);var html={name:"div",attributes:attributes,children:children};var bbox=[this.x,this.y,this[$extra].width,this[$extra].height];delete this[$extra];return HTMLResult.success(html,bbox);}}]);}(XFAObject);var Assist=/*#__PURE__*/function(_XFAObject5){function Assist(attributes){var _this69;_classCallCheck(this,Assist);_this69=_callSuper(this,Assist,[TEMPLATE_NS_ID,"assist",true]);_this69.id=attributes.id||"";_this69.role=attributes.role||"";_this69.use=attributes.use||"";_this69.usehref=attributes.usehref||"";_this69.speak=null;_this69.toolTip=null;return _this69;}_inherits(Assist,_XFAObject5);return _createClass(Assist,[{key:$toHTML,value:function value(){var _this$toolTip;return((_this$toolTip=this.toolTip)===null||_this$toolTip===void 0?void 0:_this$toolTip[$content])||null;}}]);}(XFAObject);var Barcode=/*#__PURE__*/function(_XFAObject6){function Barcode(attributes){var _this70;_classCallCheck(this,Barcode);_this70=_callSuper(this,Barcode,[TEMPLATE_NS_ID,"barcode",true]);_this70.charEncoding=getKeyword({data:attributes.charEncoding?attributes.charEncoding.toLowerCase():"",defaultValue:"",validate:function validate(k){return["utf-8","big-five","fontspecific","gbk","gb-18030","gb-2312","ksc-5601","none","shift-jis","ucs-2","utf-16"].includes(k)||k.match(/iso-8859-\\d{2}/);}});_this70.checksum=getStringOption(attributes.checksum,["none","1mod10","1mod10_1mod11","2mod10","auto"]);_this70.dataColumnCount=getInteger({data:attributes.dataColumnCount,defaultValue:-1,validate:function validate(x){return x>=0;}});_this70.dataLength=getInteger({data:attributes.dataLength,defaultValue:-1,validate:function validate(x){return x>=0;}});_this70.dataPrep=getStringOption(attributes.dataPrep,["none","flateCompress"]);_this70.dataRowCount=getInteger({data:attributes.dataRowCount,defaultValue:-1,validate:function validate(x){return x>=0;}});_this70.endChar=attributes.endChar||"";_this70.errorCorrectionLevel=getInteger({data:attributes.errorCorrectionLevel,defaultValue:-1,validate:function validate(x){return x>=0&&x<=8;}});_this70.id=attributes.id||"";_this70.moduleHeight=getMeasurement(attributes.moduleHeight,"5mm");_this70.moduleWidth=getMeasurement(attributes.moduleWidth,"0.25mm");_this70.printCheckDigit=getInteger({data:attributes.printCheckDigit,defaultValue:0,validate:function validate(x){return x===1;}});_this70.rowColumnRatio=getRatio(attributes.rowColumnRatio);_this70.startChar=attributes.startChar||"";_this70.textLocation=getStringOption(attributes.textLocation,["below","above","aboveEmbedded","belowEmbedded","none"]);_this70.truncate=getInteger({data:attributes.truncate,defaultValue:0,validate:function validate(x){return x===1;}});_this70.type=getStringOption(attributes.type?attributes.type.toLowerCase():"",["aztec","codabar","code2of5industrial","code2of5interleaved","code2of5matrix","code2of5standard","code3of9","code3of9extended","code11","code49","code93","code128","code128a","code128b","code128c","code128sscc","datamatrix","ean8","ean8add2","ean8add5","ean13","ean13add2","ean13add5","ean13pwcd","fim","logmars","maxicode","msi","pdf417","pdf417macro","plessey","postauscust2","postauscust3","postausreplypaid","postausstandard","postukrm4scc","postusdpbc","postusimb","postusstandard","postus5zip","qrcode","rfid","rss14","rss14expanded","rss14limited","rss14stacked","rss14stackedomni","rss14truncated","telepen","ucc128","ucc128random","ucc128sscc","upca","upcaadd2","upcaadd5","upcapwcd","upce","upceadd2","upceadd5","upcean2","upcean5","upsmaxicode"]);_this70.upsMode=getStringOption(attributes.upsMode,["usCarrier","internationalCarrier","secureSymbol","standardSymbol"]);_this70.use=attributes.use||"";_this70.usehref=attributes.usehref||"";_this70.wideNarrowRatio=getRatio(attributes.wideNarrowRatio);_this70.encrypt=null;_this70.extras=null;return _this70;}_inherits(Barcode,_XFAObject6);return _createClass(Barcode);}(XFAObject);var Bind=/*#__PURE__*/function(_XFAObject7){function Bind(attributes){var _this71;_classCallCheck(this,Bind);_this71=_callSuper(this,Bind,[TEMPLATE_NS_ID,"bind",true]);_this71.match=getStringOption(attributes.match,["once","dataRef","global","none"]);_this71.ref=attributes.ref||"";_this71.picture=null;return _this71;}_inherits(Bind,_XFAObject7);return _createClass(Bind);}(XFAObject);var BindItems=/*#__PURE__*/function(_XFAObject8){function BindItems(attributes){var _this72;_classCallCheck(this,BindItems);_this72=_callSuper(this,BindItems,[TEMPLATE_NS_ID,"bindItems"]);_this72.connection=attributes.connection||"";_this72.labelRef=attributes.labelRef||"";_this72.ref=attributes.ref||"";_this72.valueRef=attributes.valueRef||"";return _this72;}_inherits(BindItems,_XFAObject8);return _createClass(BindItems);}(XFAObject);var Bookend=/*#__PURE__*/function(_XFAObject9){function Bookend(attributes){var _this73;_classCallCheck(this,Bookend);_this73=_callSuper(this,Bookend,[TEMPLATE_NS_ID,"bookend"]);_this73.id=attributes.id||"";_this73.leader=attributes.leader||"";_this73.trailer=attributes.trailer||"";_this73.use=attributes.use||"";_this73.usehref=attributes.usehref||"";return _this73;}_inherits(Bookend,_XFAObject9);return _createClass(Bookend);}(XFAObject);var BooleanElement=/*#__PURE__*/function(_Option){function BooleanElement(attributes){var _this74;_classCallCheck(this,BooleanElement);_this74=_callSuper(this,BooleanElement,[TEMPLATE_NS_ID,"boolean"]);_this74.id=attributes.id||"";_this74.name=attributes.name||"";_this74.use=attributes.use||"";_this74.usehref=attributes.usehref||"";return _this74;}_inherits(BooleanElement,_Option);return _createClass(BooleanElement,[{key:$toHTML,value:function value(availableSpace){return valueToHtml(this[$content]===1?"1":"0");}}]);}(Option01);var Border=/*#__PURE__*/function(_XFAObject10){function Border(attributes){var _this75;_classCallCheck(this,Border);_this75=_callSuper(this,Border,[TEMPLATE_NS_ID,"border",true]);_this75["break"]=getStringOption(attributes["break"],["close","open"]);_this75.hand=getStringOption(attributes.hand,["even","left","right"]);_this75.id=attributes.id||"";_this75.presence=getStringOption(attributes.presence,["visible","hidden","inactive","invisible"]);_this75.relevant=getRelevant(attributes.relevant);_this75.use=attributes.use||"";_this75.usehref=attributes.usehref||"";_this75.corner=new XFAObjectArray(4);_this75.edge=new XFAObjectArray(4);_this75.extras=null;_this75.fill=null;_this75.margin=null;return _this75;}_inherits(Border,_XFAObject10);return _createClass(Border,[{key:$getExtra,value:function value(){if(!this[$extra]){var edges=this.edge.children.slice();if(edges.length<4){var defaultEdge=edges.at(-1)||new Edge({});for(var i=edges.length;i<4;i++){edges.push(defaultEdge);}}var widths=edges.map(function(edge){return edge.thickness;});var insets=[0,0,0,0];if(this.margin){insets[0]=this.margin.topInset;insets[1]=this.margin.rightInset;insets[2]=this.margin.bottomInset;insets[3]=this.margin.leftInset;}this[$extra]={widths:widths,insets:insets,edges:edges};}return this[$extra];}},{key:$toStyle,value:function value(){var _this$fill2;var _this$$getExtra=this[$getExtra](),edges=_this$$getExtra.edges;var edgeStyles=edges.map(function(node){var style=node[$toStyle]();style.color||(style.color="#000000");return style;});var style=Object.create(null);if(this.margin){Object.assign(style,this.margin[$toStyle]());}if(((_this$fill2=this.fill)===null||_this$fill2===void 0?void 0:_this$fill2.presence)==="visible"){Object.assign(style,this.fill[$toStyle]());}if(this.corner.children.some(function(node){return node.radius!==0;})){var cornerStyles=this.corner.children.map(function(node){return node[$toStyle]();});if(cornerStyles.length===2||cornerStyles.length===3){var last=cornerStyles.at(-1);for(var i=cornerStyles.length;i<4;i++){cornerStyles.push(last);}}style.borderRadius=cornerStyles.map(function(s){return s.radius;}).join(" ");}switch(this.presence){case"invisible":case"hidden":style.borderStyle="";break;case"inactive":style.borderStyle="none";break;default:style.borderStyle=edgeStyles.map(function(s){return s.style;}).join(" ");break;}style.borderWidth=edgeStyles.map(function(s){return s.width;}).join(" ");style.borderColor=edgeStyles.map(function(s){return s.color;}).join(" ");return style;}}]);}(XFAObject);var Break=/*#__PURE__*/function(_XFAObject11){function Break(attributes){var _this76;_classCallCheck(this,Break);_this76=_callSuper(this,Break,[TEMPLATE_NS_ID,"break",true]);_this76.after=getStringOption(attributes.after,["auto","contentArea","pageArea","pageEven","pageOdd"]);_this76.afterTarget=attributes.afterTarget||"";_this76.before=getStringOption(attributes.before,["auto","contentArea","pageArea","pageEven","pageOdd"]);_this76.beforeTarget=attributes.beforeTarget||"";_this76.bookendLeader=attributes.bookendLeader||"";_this76.bookendTrailer=attributes.bookendTrailer||"";_this76.id=attributes.id||"";_this76.overflowLeader=attributes.overflowLeader||"";_this76.overflowTarget=attributes.overflowTarget||"";_this76.overflowTrailer=attributes.overflowTrailer||"";_this76.startNew=getInteger({data:attributes.startNew,defaultValue:0,validate:function validate(x){return x===1;}});_this76.use=attributes.use||"";_this76.usehref=attributes.usehref||"";_this76.extras=null;return _this76;}_inherits(Break,_XFAObject11);return _createClass(Break);}(XFAObject);var BreakAfter=/*#__PURE__*/function(_XFAObject12){function BreakAfter(attributes){var _this77;_classCallCheck(this,BreakAfter);_this77=_callSuper(this,BreakAfter,[TEMPLATE_NS_ID,"breakAfter",true]);_this77.id=attributes.id||"";_this77.leader=attributes.leader||"";_this77.startNew=getInteger({data:attributes.startNew,defaultValue:0,validate:function validate(x){return x===1;}});_this77.target=attributes.target||"";_this77.targetType=getStringOption(attributes.targetType,["auto","contentArea","pageArea"]);_this77.trailer=attributes.trailer||"";_this77.use=attributes.use||"";_this77.usehref=attributes.usehref||"";_this77.script=null;return _this77;}_inherits(BreakAfter,_XFAObject12);return _createClass(BreakAfter);}(XFAObject);var BreakBefore=/*#__PURE__*/function(_XFAObject13){function BreakBefore(attributes){var _this78;_classCallCheck(this,BreakBefore);_this78=_callSuper(this,BreakBefore,[TEMPLATE_NS_ID,"breakBefore",true]);_this78.id=attributes.id||"";_this78.leader=attributes.leader||"";_this78.startNew=getInteger({data:attributes.startNew,defaultValue:0,validate:function validate(x){return x===1;}});_this78.target=attributes.target||"";_this78.targetType=getStringOption(attributes.targetType,["auto","contentArea","pageArea"]);_this78.trailer=attributes.trailer||"";_this78.use=attributes.use||"";_this78.usehref=attributes.usehref||"";_this78.script=null;return _this78;}_inherits(BreakBefore,_XFAObject13);return _createClass(BreakBefore,[{key:$toHTML,value:function value(availableSpace){this[$extra]={};return HTMLResult.FAILURE;}}]);}(XFAObject);var Button=/*#__PURE__*/function(_XFAObject14){function Button(attributes){var _this79;_classCallCheck(this,Button);_this79=_callSuper(this,Button,[TEMPLATE_NS_ID,"button",true]);_this79.highlight=getStringOption(attributes.highlight,["inverted","none","outline","push"]);_this79.id=attributes.id||"";_this79.use=attributes.use||"";_this79.usehref=attributes.usehref||"";_this79.extras=null;return _this79;}_inherits(Button,_XFAObject14);return _createClass(Button,[{key:$toHTML,value:function value(availableSpace){var parent=this[$getParent]();var grandpa=parent[$getParent]();var htmlButton={name:"button",attributes:{id:this[$uid],"class":["xfaButton"],style:{}},children:[]};var _iterator169=_createForOfIteratorHelper(grandpa.event.children),_step169;try{for(_iterator169.s();!(_step169=_iterator169.n()).done;){var event=_step169.value;if(event.activity!=="click"||!event.script){continue;}var jsURL=recoverJsURL(event.script[$content]);if(!jsURL){continue;}var href=fixURL(jsURL.url);if(!href){continue;}htmlButton.children.push({name:"a",attributes:{id:"link"+this[$uid],href:href,newWindow:jsURL.newWindow,"class":["xfaLink"],style:{}},children:[]});}}catch(err){_iterator169.e(err);}finally{_iterator169.f();}return HTMLResult.success(htmlButton);}}]);}(XFAObject);var Calculate=/*#__PURE__*/function(_XFAObject15){function Calculate(attributes){var _this80;_classCallCheck(this,Calculate);_this80=_callSuper(this,Calculate,[TEMPLATE_NS_ID,"calculate",true]);_this80.id=attributes.id||"";_this80.override=getStringOption(attributes.override,["disabled","error","ignore","warning"]);_this80.use=attributes.use||"";_this80.usehref=attributes.usehref||"";_this80.extras=null;_this80.message=null;_this80.script=null;return _this80;}_inherits(Calculate,_XFAObject15);return _createClass(Calculate);}(XFAObject);var Caption=/*#__PURE__*/function(_XFAObject16){function Caption(attributes){var _this81;_classCallCheck(this,Caption);_this81=_callSuper(this,Caption,[TEMPLATE_NS_ID,"caption",true]);_this81.id=attributes.id||"";_this81.placement=getStringOption(attributes.placement,["left","bottom","inline","right","top"]);_this81.presence=getStringOption(attributes.presence,["visible","hidden","inactive","invisible"]);_this81.reserve=Math.ceil(getMeasurement(attributes.reserve));_this81.use=attributes.use||"";_this81.usehref=attributes.usehref||"";_this81.extras=null;_this81.font=null;_this81.margin=null;_this81.para=null;_this81.value=null;return _this81;}_inherits(Caption,_XFAObject16);return _createClass(Caption,[{key:$setValue,value:function value(_value6){_setValue(this,_value6);}},{key:$getExtra,value:function value(availableSpace){if(!this[$extra]){var width=availableSpace.width,height=availableSpace.height;switch(this.placement){case"left":case"right":case"inline":width=this.reserve<=0?width:this.reserve;break;case"top":case"bottom":height=this.reserve<=0?height:this.reserve;break;}this[$extra]=layoutNode(this,{width:width,height:height});}return this[$extra];}},{key:$toHTML,value:function value(availableSpace){if(!this.value){return HTMLResult.EMPTY;}this[$pushPara]();var value=this.value[$toHTML](availableSpace).html;if(!value){this[$popPara]();return HTMLResult.EMPTY;}var savedReserve=this.reserve;if(this.reserve<=0){var _this$$getExtra2=this[$getExtra](availableSpace),w=_this$$getExtra2.w,h=_this$$getExtra2.h;switch(this.placement){case"left":case"right":case"inline":this.reserve=w;break;case"top":case"bottom":this.reserve=h;break;}}var children=[];if(typeof value==="string"){children.push({name:"#text",value:value});}else{children.push(value);}var style=toStyle(this,"font","margin","visibility");switch(this.placement){case"left":case"right":if(this.reserve>0){style.width=measureToString(this.reserve);}break;case"top":case"bottom":if(this.reserve>0){style.height=measureToString(this.reserve);}break;}setPara(this,null,value);this[$popPara]();this.reserve=savedReserve;return HTMLResult.success({name:"div",attributes:{style:style,"class":["xfaCaption"]},children:children});}}]);}(XFAObject);var Certificate=/*#__PURE__*/function(_StringObject2){function Certificate(attributes){var _this82;_classCallCheck(this,Certificate);_this82=_callSuper(this,Certificate,[TEMPLATE_NS_ID,"certificate"]);_this82.id=attributes.id||"";_this82.name=attributes.name||"";_this82.use=attributes.use||"";_this82.usehref=attributes.usehref||"";return _this82;}_inherits(Certificate,_StringObject2);return _createClass(Certificate);}(StringObject);var Certificates=/*#__PURE__*/function(_XFAObject17){function Certificates(attributes){var _this83;_classCallCheck(this,Certificates);_this83=_callSuper(this,Certificates,[TEMPLATE_NS_ID,"certificates",true]);_this83.credentialServerPolicy=getStringOption(attributes.credentialServerPolicy,["optional","required"]);_this83.id=attributes.id||"";_this83.url=attributes.url||"";_this83.urlPolicy=attributes.urlPolicy||"";_this83.use=attributes.use||"";_this83.usehref=attributes.usehref||"";_this83.encryption=null;_this83.issuers=null;_this83.keyUsage=null;_this83.oids=null;_this83.signing=null;_this83.subjectDNs=null;return _this83;}_inherits(Certificates,_XFAObject17);return _createClass(Certificates);}(XFAObject);var CheckButton=/*#__PURE__*/function(_XFAObject18){function CheckButton(attributes){var _this84;_classCallCheck(this,CheckButton);_this84=_callSuper(this,CheckButton,[TEMPLATE_NS_ID,"checkButton",true]);_this84.id=attributes.id||"";_this84.mark=getStringOption(attributes.mark,["default","check","circle","cross","diamond","square","star"]);_this84.shape=getStringOption(attributes.shape,["square","round"]);_this84.size=getMeasurement(attributes.size,"10pt");_this84.use=attributes.use||"";_this84.usehref=attributes.usehref||"";_this84.border=null;_this84.extras=null;_this84.margin=null;return _this84;}_inherits(CheckButton,_XFAObject18);return _createClass(CheckButton,[{key:$toHTML,value:function value(availableSpace){var _field$value;var style=toStyle("margin");var size=measureToString(this.size);style.width=style.height=size;var type;var className;var groupId;var field=this[$getParent]()[$getParent]();var items=field.items.children.length&&field.items.children[0][$toHTML]().html||[];var exportedValue={on:(items[0]!==undefined?items[0]:"on").toString(),off:(items[1]!==undefined?items[1]:"off").toString()};var value=((_field$value=field.value)===null||_field$value===void 0?void 0:_field$value[$text]())||"off";var checked=value===exportedValue.on||undefined;var container=field[$getSubformParent]();var fieldId=field[$uid];var dataId;if(container instanceof ExclGroup){var _container$$data;groupId=container[$uid];type="radio";className="xfaRadio";dataId=((_container$$data=container[$data])===null||_container$$data===void 0?void 0:_container$$data[$uid])||container[$uid];}else{var _field$$data;type="checkbox";className="xfaCheckbox";dataId=((_field$$data=field[$data])===null||_field$$data===void 0?void 0:_field$$data[$uid])||field[$uid];}var input={name:"input",attributes:{"class":[className],style:style,fieldId:fieldId,dataId:dataId,type:type,checked:checked,xfaOn:exportedValue.on,xfaOff:exportedValue.off,"aria-label":ariaLabel(field),"aria-required":false}};if(groupId){input.attributes.name=groupId;}if(isRequired(field)){input.attributes["aria-required"]=true;input.attributes.required=true;}return HTMLResult.success({name:"label",attributes:{"class":["xfaLabel"]},children:[input]});}}]);}(XFAObject);var ChoiceList=/*#__PURE__*/function(_XFAObject19){function ChoiceList(attributes){var _this85;_classCallCheck(this,ChoiceList);_this85=_callSuper(this,ChoiceList,[TEMPLATE_NS_ID,"choiceList",true]);_this85.commitOn=getStringOption(attributes.commitOn,["select","exit"]);_this85.id=attributes.id||"";_this85.open=getStringOption(attributes.open,["userControl","always","multiSelect","onEntry"]);_this85.textEntry=getInteger({data:attributes.textEntry,defaultValue:0,validate:function validate(x){return x===1;}});_this85.use=attributes.use||"";_this85.usehref=attributes.usehref||"";_this85.border=null;_this85.extras=null;_this85.margin=null;return _this85;}_inherits(ChoiceList,_XFAObject19);return _createClass(ChoiceList,[{key:$toHTML,value:function value(availableSpace){var _field$font,_field$$data2;var style=toStyle(this,"border","margin");var ui=this[$getParent]();var field=ui[$getParent]();var fontSize=((_field$font=field.font)===null||_field$font===void 0?void 0:_field$font.size)||10;var optionStyle={fontSize:"calc(".concat(fontSize,"px * var(--total-scale-factor))")};var children=[];if(field.items.children.length>0){var _field$value2;var items=field.items;var displayedIndex=0;var saveIndex=0;if(items.children.length===2){displayedIndex=items.children[0].save;saveIndex=1-displayedIndex;}var displayed=items.children[displayedIndex][$toHTML]().html;var values=items.children[saveIndex][$toHTML]().html;var selected=false;var value=((_field$value2=field.value)===null||_field$value2===void 0?void 0:_field$value2[$text]())||"";for(var i=0,ii=displayed.length;i<ii;i++){var option={name:"option",attributes:{value:values[i]||displayed[i],style:optionStyle},value:displayed[i]};if(values[i]===value){option.attributes.selected=selected=true;}children.push(option);}if(!selected){children.splice(0,0,{name:"option",attributes:{hidden:true,selected:true},value:" "});}}var selectAttributes={"class":["xfaSelect"],fieldId:field[$uid],dataId:((_field$$data2=field[$data])===null||_field$$data2===void 0?void 0:_field$$data2[$uid])||field[$uid],style:style,"aria-label":ariaLabel(field),"aria-required":false};if(isRequired(field)){selectAttributes["aria-required"]=true;selectAttributes.required=true;}if(this.open==="multiSelect"){selectAttributes.multiple=true;}return HTMLResult.success({name:"label",attributes:{"class":["xfaLabel"]},children:[{name:"select",children:children,attributes:selectAttributes}]});}}]);}(XFAObject);var Color=/*#__PURE__*/function(_XFAObject20){function Color(attributes){var _this86;_classCallCheck(this,Color);_this86=_callSuper(this,Color,[TEMPLATE_NS_ID,"color",true]);_this86.cSpace=getStringOption(attributes.cSpace,["SRGB"]);_this86.id=attributes.id||"";_this86.use=attributes.use||"";_this86.usehref=attributes.usehref||"";_this86.value=attributes.value?getColor(attributes.value):"";_this86.extras=null;return _this86;}_inherits(Color,_XFAObject20);return _createClass(Color,[{key:$hasSettableValue,value:function value(){return false;}},{key:$toStyle,value:function value(){return this.value?Util.makeHexColor(this.value.r,this.value.g,this.value.b):null;}}]);}(XFAObject);var Comb=/*#__PURE__*/function(_XFAObject21){function Comb(attributes){var _this87;_classCallCheck(this,Comb);_this87=_callSuper(this,Comb,[TEMPLATE_NS_ID,"comb"]);_this87.id=attributes.id||"";_this87.numberOfCells=getInteger({data:attributes.numberOfCells,defaultValue:0,validate:function validate(x){return x>=0;}});_this87.use=attributes.use||"";_this87.usehref=attributes.usehref||"";return _this87;}_inherits(Comb,_XFAObject21);return _createClass(Comb);}(XFAObject);var Connect=/*#__PURE__*/function(_XFAObject22){function Connect(attributes){var _this88;_classCallCheck(this,Connect);_this88=_callSuper(this,Connect,[TEMPLATE_NS_ID,"connect",true]);_this88.connection=attributes.connection||"";_this88.id=attributes.id||"";_this88.ref=attributes.ref||"";_this88.usage=getStringOption(attributes.usage,["exportAndImport","exportOnly","importOnly"]);_this88.use=attributes.use||"";_this88.usehref=attributes.usehref||"";_this88.picture=null;return _this88;}_inherits(Connect,_XFAObject22);return _createClass(Connect);}(XFAObject);var ContentArea=/*#__PURE__*/function(_XFAObject23){function ContentArea(attributes){var _this89;_classCallCheck(this,ContentArea);_this89=_callSuper(this,ContentArea,[TEMPLATE_NS_ID,"contentArea",true]);_this89.h=getMeasurement(attributes.h);_this89.id=attributes.id||"";_this89.name=attributes.name||"";_this89.relevant=getRelevant(attributes.relevant);_this89.use=attributes.use||"";_this89.usehref=attributes.usehref||"";_this89.w=getMeasurement(attributes.w);_this89.x=getMeasurement(attributes.x,"0pt");_this89.y=getMeasurement(attributes.y,"0pt");_this89.desc=null;_this89.extras=null;return _this89;}_inherits(ContentArea,_XFAObject23);return _createClass(ContentArea,[{key:$toHTML,value:function value(availableSpace){var left=measureToString(this.x);var top=measureToString(this.y);var style={left:left,top:top,width:measureToString(this.w),height:measureToString(this.h)};var classNames=["xfaContentarea"];if(isPrintOnly(this)){classNames.push("xfaPrintOnly");}return HTMLResult.success({name:"div",children:[],attributes:{style:style,"class":classNames,id:this[$uid]}});}}]);}(XFAObject);var Corner=/*#__PURE__*/function(_XFAObject24){function Corner(attributes){var _this90;_classCallCheck(this,Corner);_this90=_callSuper(this,Corner,[TEMPLATE_NS_ID,"corner",true]);_this90.id=attributes.id||"";_this90.inverted=getInteger({data:attributes.inverted,defaultValue:0,validate:function validate(x){return x===1;}});_this90.join=getStringOption(attributes.join,["square","round"]);_this90.presence=getStringOption(attributes.presence,["visible","hidden","inactive","invisible"]);_this90.radius=getMeasurement(attributes.radius);_this90.stroke=getStringOption(attributes.stroke,["solid","dashDot","dashDotDot","dashed","dotted","embossed","etched","lowered","raised"]);_this90.thickness=getMeasurement(attributes.thickness,"0.5pt");_this90.use=attributes.use||"";_this90.usehref=attributes.usehref||"";_this90.color=null;_this90.extras=null;return _this90;}_inherits(Corner,_XFAObject24);return _createClass(Corner,[{key:$toStyle,value:function value(){var style=toStyle(this,"visibility");style.radius=measureToString(this.join==="square"?0:this.radius);return style;}}]);}(XFAObject);var DateElement=/*#__PURE__*/function(_ContentObject4){function DateElement(attributes){var _this91;_classCallCheck(this,DateElement);_this91=_callSuper(this,DateElement,[TEMPLATE_NS_ID,"date"]);_this91.id=attributes.id||"";_this91.name=attributes.name||"";_this91.use=attributes.use||"";_this91.usehref=attributes.usehref||"";return _this91;}_inherits(DateElement,_ContentObject4);return _createClass(DateElement,[{key:$finalize,value:function value(){var date=this[$content].trim();this[$content]=date?new Date(date):null;}},{key:$toHTML,value:function value(availableSpace){return valueToHtml(this[$content]?this[$content].toString():"");}}]);}(ContentObject);var DateTime=/*#__PURE__*/function(_ContentObject5){function DateTime(attributes){var _this92;_classCallCheck(this,DateTime);_this92=_callSuper(this,DateTime,[TEMPLATE_NS_ID,"dateTime"]);_this92.id=attributes.id||"";_this92.name=attributes.name||"";_this92.use=attributes.use||"";_this92.usehref=attributes.usehref||"";return _this92;}_inherits(DateTime,_ContentObject5);return _createClass(DateTime,[{key:$finalize,value:function value(){var date=this[$content].trim();this[$content]=date?new Date(date):null;}},{key:$toHTML,value:function value(availableSpace){return valueToHtml(this[$content]?this[$content].toString():"");}}]);}(ContentObject);var DateTimeEdit=/*#__PURE__*/function(_XFAObject25){function DateTimeEdit(attributes){var _this93;_classCallCheck(this,DateTimeEdit);_this93=_callSuper(this,DateTimeEdit,[TEMPLATE_NS_ID,"dateTimeEdit",true]);_this93.hScrollPolicy=getStringOption(attributes.hScrollPolicy,["auto","off","on"]);_this93.id=attributes.id||"";_this93.picker=getStringOption(attributes.picker,["host","none"]);_this93.use=attributes.use||"";_this93.usehref=attributes.usehref||"";_this93.border=null;_this93.comb=null;_this93.extras=null;_this93.margin=null;return _this93;}_inherits(DateTimeEdit,_XFAObject25);return _createClass(DateTimeEdit,[{key:$toHTML,value:function value(availableSpace){var _field$$data3;var style=toStyle(this,"border","font","margin");var field=this[$getParent]()[$getParent]();var html={name:"input",attributes:{type:"text",fieldId:field[$uid],dataId:((_field$$data3=field[$data])===null||_field$$data3===void 0?void 0:_field$$data3[$uid])||field[$uid],"class":["xfaTextfield"],style:style,"aria-label":ariaLabel(field),"aria-required":false}};if(isRequired(field)){html.attributes["aria-required"]=true;html.attributes.required=true;}return HTMLResult.success({name:"label",attributes:{"class":["xfaLabel"]},children:[html]});}}]);}(XFAObject);var Decimal=/*#__PURE__*/function(_ContentObject6){function Decimal(attributes){var _this94;_classCallCheck(this,Decimal);_this94=_callSuper(this,Decimal,[TEMPLATE_NS_ID,"decimal"]);_this94.fracDigits=getInteger({data:attributes.fracDigits,defaultValue:2,validate:function validate(x){return true;}});_this94.id=attributes.id||"";_this94.leadDigits=getInteger({data:attributes.leadDigits,defaultValue:-1,validate:function validate(x){return true;}});_this94.name=attributes.name||"";_this94.use=attributes.use||"";_this94.usehref=attributes.usehref||"";return _this94;}_inherits(Decimal,_ContentObject6);return _createClass(Decimal,[{key:$finalize,value:function value(){var number=parseFloat(this[$content].trim());this[$content]=isNaN(number)?null:number;}},{key:$toHTML,value:function value(availableSpace){return valueToHtml(this[$content]!==null?this[$content].toString():"");}}]);}(ContentObject);var DefaultUi=/*#__PURE__*/function(_XFAObject26){function DefaultUi(attributes){var _this95;_classCallCheck(this,DefaultUi);_this95=_callSuper(this,DefaultUi,[TEMPLATE_NS_ID,"defaultUi",true]);_this95.id=attributes.id||"";_this95.use=attributes.use||"";_this95.usehref=attributes.usehref||"";_this95.extras=null;return _this95;}_inherits(DefaultUi,_XFAObject26);return _createClass(DefaultUi);}(XFAObject);var Desc=/*#__PURE__*/function(_XFAObject27){function Desc(attributes){var _this96;_classCallCheck(this,Desc);_this96=_callSuper(this,Desc,[TEMPLATE_NS_ID,"desc",true]);_this96.id=attributes.id||"";_this96.use=attributes.use||"";_this96.usehref=attributes.usehref||"";_this96["boolean"]=new XFAObjectArray();_this96.date=new XFAObjectArray();_this96.dateTime=new XFAObjectArray();_this96.decimal=new XFAObjectArray();_this96.exData=new XFAObjectArray();_this96["float"]=new XFAObjectArray();_this96.image=new XFAObjectArray();_this96.integer=new XFAObjectArray();_this96.text=new XFAObjectArray();_this96.time=new XFAObjectArray();return _this96;}_inherits(Desc,_XFAObject27);return _createClass(Desc);}(XFAObject);var DigestMethod=/*#__PURE__*/function(_OptionObject){function DigestMethod(attributes){var _this97;_classCallCheck(this,DigestMethod);_this97=_callSuper(this,DigestMethod,[TEMPLATE_NS_ID,"digestMethod",["","SHA1","SHA256","SHA512","RIPEMD160"]]);_this97.id=attributes.id||"";_this97.use=attributes.use||"";_this97.usehref=attributes.usehref||"";return _this97;}_inherits(DigestMethod,_OptionObject);return _createClass(DigestMethod);}(OptionObject);var DigestMethods=/*#__PURE__*/function(_XFAObject28){function DigestMethods(attributes){var _this98;_classCallCheck(this,DigestMethods);_this98=_callSuper(this,DigestMethods,[TEMPLATE_NS_ID,"digestMethods",true]);_this98.id=attributes.id||"";_this98.type=getStringOption(attributes.type,["optional","required"]);_this98.use=attributes.use||"";_this98.usehref=attributes.usehref||"";_this98.digestMethod=new XFAObjectArray();return _this98;}_inherits(DigestMethods,_XFAObject28);return _createClass(DigestMethods);}(XFAObject);var Draw=/*#__PURE__*/function(_XFAObject29){function Draw(attributes){var _this99;_classCallCheck(this,Draw);_this99=_callSuper(this,Draw,[TEMPLATE_NS_ID,"draw",true]);_this99.anchorType=getStringOption(attributes.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]);_this99.colSpan=getInteger({data:attributes.colSpan,defaultValue:1,validate:function validate(n){return n>=1||n===-1;}});_this99.h=attributes.h?getMeasurement(attributes.h):"";_this99.hAlign=getStringOption(attributes.hAlign,["left","center","justify","justifyAll","radix","right"]);_this99.id=attributes.id||"";_this99.locale=attributes.locale||"";_this99.maxH=getMeasurement(attributes.maxH,"0pt");_this99.maxW=getMeasurement(attributes.maxW,"0pt");_this99.minH=getMeasurement(attributes.minH,"0pt");_this99.minW=getMeasurement(attributes.minW,"0pt");_this99.name=attributes.name||"";_this99.presence=getStringOption(attributes.presence,["visible","hidden","inactive","invisible"]);_this99.relevant=getRelevant(attributes.relevant);_this99.rotate=getInteger({data:attributes.rotate,defaultValue:0,validate:function validate(x){return x%90===0;}});_this99.use=attributes.use||"";_this99.usehref=attributes.usehref||"";_this99.w=attributes.w?getMeasurement(attributes.w):"";_this99.x=getMeasurement(attributes.x,"0pt");_this99.y=getMeasurement(attributes.y,"0pt");_this99.assist=null;_this99.border=null;_this99.caption=null;_this99.desc=null;_this99.extras=null;_this99.font=null;_this99.keep=null;_this99.margin=null;_this99.para=null;_this99.traversal=null;_this99.ui=null;_this99.value=null;_this99.setProperty=new XFAObjectArray();return _this99;}_inherits(Draw,_XFAObject29);return _createClass(Draw,[{key:$setValue,value:function value(_value7){_setValue(this,_value7);}},{key:$toHTML,value:function value(availableSpace){setTabIndex(this);if(this.presence==="hidden"||this.presence==="inactive"){return HTMLResult.EMPTY;}fixDimensions(this);this[$pushPara]();var savedW=this.w;var savedH=this.h;var _layoutNode=layoutNode(this,availableSpace),w=_layoutNode.w,h=_layoutNode.h,isBroken=_layoutNode.isBroken;if(w&&this.w===""){if(isBroken&&this[$getSubformParent]()[$isThereMoreWidth]()){this[$popPara]();return HTMLResult.FAILURE;}this.w=w;}if(h&&this.h===""){this.h=h;}setFirstUnsplittable(this);if(!checkDimensions(this,availableSpace)){this.w=savedW;this.h=savedH;this[$popPara]();return HTMLResult.FAILURE;}unsetFirstUnsplittable(this);var style=toStyle(this,"font","hAlign","dimensions","position","presence","rotate","anchorType","border","margin");setMinMaxDimensions(this,style);if(style.margin){style.padding=style.margin;delete style.margin;}var classNames=["xfaDraw"];if(this.font){classNames.push("xfaFont");}if(isPrintOnly(this)){classNames.push("xfaPrintOnly");}var attributes={style:style,id:this[$uid],"class":classNames};if(this.name){attributes.xfaName=this.name;}var html={name:"div",attributes:attributes,children:[]};applyAssist(this,attributes);var bbox=computeBbox(this,html,availableSpace);var value=this.value?this.value[$toHTML](availableSpace).html:null;if(value===null){this.w=savedW;this.h=savedH;this[$popPara]();return HTMLResult.success(createWrapper(this,html),bbox);}html.children.push(value);setPara(this,style,value);this.w=savedW;this.h=savedH;this[$popPara]();return HTMLResult.success(createWrapper(this,html),bbox);}}]);}(XFAObject);var Edge=/*#__PURE__*/function(_XFAObject30){function Edge(attributes){var _this100;_classCallCheck(this,Edge);_this100=_callSuper(this,Edge,[TEMPLATE_NS_ID,"edge",true]);_this100.cap=getStringOption(attributes.cap,["square","butt","round"]);_this100.id=attributes.id||"";_this100.presence=getStringOption(attributes.presence,["visible","hidden","inactive","invisible"]);_this100.stroke=getStringOption(attributes.stroke,["solid","dashDot","dashDotDot","dashed","dotted","embossed","etched","lowered","raised"]);_this100.thickness=getMeasurement(attributes.thickness,"0.5pt");_this100.use=attributes.use||"";_this100.usehref=attributes.usehref||"";_this100.color=null;_this100.extras=null;return _this100;}_inherits(Edge,_XFAObject30);return _createClass(Edge,[{key:$toStyle,value:function value(){var style=toStyle(this,"visibility");Object.assign(style,{linecap:this.cap,width:measureToString(this.thickness),color:this.color?this.color[$toStyle]():"#000000",style:""});if(this.presence!=="visible"){style.style="none";}else{switch(this.stroke){case"solid":style.style="solid";break;case"dashDot":style.style="dashed";break;case"dashDotDot":style.style="dashed";break;case"dashed":style.style="dashed";break;case"dotted":style.style="dotted";break;case"embossed":style.style="ridge";break;case"etched":style.style="groove";break;case"lowered":style.style="inset";break;case"raised":style.style="outset";break;}}return style;}}]);}(XFAObject);var Encoding=/*#__PURE__*/function(_OptionObject2){function Encoding(attributes){var _this101;_classCallCheck(this,Encoding);_this101=_callSuper(this,Encoding,[TEMPLATE_NS_ID,"encoding",["adbe.x509.rsa_sha1","adbe.pkcs7.detached","adbe.pkcs7.sha1"]]);_this101.id=attributes.id||"";_this101.use=attributes.use||"";_this101.usehref=attributes.usehref||"";return _this101;}_inherits(Encoding,_OptionObject2);return _createClass(Encoding);}(OptionObject);var Encodings=/*#__PURE__*/function(_XFAObject31){function Encodings(attributes){var _this102;_classCallCheck(this,Encodings);_this102=_callSuper(this,Encodings,[TEMPLATE_NS_ID,"encodings",true]);_this102.id=attributes.id||"";_this102.type=getStringOption(attributes.type,["optional","required"]);_this102.use=attributes.use||"";_this102.usehref=attributes.usehref||"";_this102.encoding=new XFAObjectArray();return _this102;}_inherits(Encodings,_XFAObject31);return _createClass(Encodings);}(XFAObject);var Encrypt=/*#__PURE__*/function(_XFAObject32){function Encrypt(attributes){var _this103;_classCallCheck(this,Encrypt);_this103=_callSuper(this,Encrypt,[TEMPLATE_NS_ID,"encrypt",true]);_this103.id=attributes.id||"";_this103.use=attributes.use||"";_this103.usehref=attributes.usehref||"";_this103.certificate=null;return _this103;}_inherits(Encrypt,_XFAObject32);return _createClass(Encrypt);}(XFAObject);var EncryptData=/*#__PURE__*/function(_XFAObject33){function EncryptData(attributes){var _this104;_classCallCheck(this,EncryptData);_this104=_callSuper(this,EncryptData,[TEMPLATE_NS_ID,"encryptData",true]);_this104.id=attributes.id||"";_this104.operation=getStringOption(attributes.operation,["encrypt","decrypt"]);_this104.target=attributes.target||"";_this104.use=attributes.use||"";_this104.usehref=attributes.usehref||"";_this104.filter=null;_this104.manifest=null;return _this104;}_inherits(EncryptData,_XFAObject33);return _createClass(EncryptData);}(XFAObject);var Encryption=/*#__PURE__*/function(_XFAObject34){function Encryption(attributes){var _this105;_classCallCheck(this,Encryption);_this105=_callSuper(this,Encryption,[TEMPLATE_NS_ID,"encryption",true]);_this105.id=attributes.id||"";_this105.type=getStringOption(attributes.type,["optional","required"]);_this105.use=attributes.use||"";_this105.usehref=attributes.usehref||"";_this105.certificate=new XFAObjectArray();return _this105;}_inherits(Encryption,_XFAObject34);return _createClass(Encryption);}(XFAObject);var EncryptionMethod=/*#__PURE__*/function(_OptionObject3){function EncryptionMethod(attributes){var _this106;_classCallCheck(this,EncryptionMethod);_this106=_callSuper(this,EncryptionMethod,[TEMPLATE_NS_ID,"encryptionMethod",["","AES256-CBC","TRIPLEDES-CBC","AES128-CBC","AES192-CBC"]]);_this106.id=attributes.id||"";_this106.use=attributes.use||"";_this106.usehref=attributes.usehref||"";return _this106;}_inherits(EncryptionMethod,_OptionObject3);return _createClass(EncryptionMethod);}(OptionObject);var EncryptionMethods=/*#__PURE__*/function(_XFAObject35){function EncryptionMethods(attributes){var _this107;_classCallCheck(this,EncryptionMethods);_this107=_callSuper(this,EncryptionMethods,[TEMPLATE_NS_ID,"encryptionMethods",true]);_this107.id=attributes.id||"";_this107.type=getStringOption(attributes.type,["optional","required"]);_this107.use=attributes.use||"";_this107.usehref=attributes.usehref||"";_this107.encryptionMethod=new XFAObjectArray();return _this107;}_inherits(EncryptionMethods,_XFAObject35);return _createClass(EncryptionMethods);}(XFAObject);var Event=/*#__PURE__*/function(_XFAObject36){function Event(attributes){var _this108;_classCallCheck(this,Event);_this108=_callSuper(this,Event,[TEMPLATE_NS_ID,"event",true]);_this108.activity=getStringOption(attributes.activity,["click","change","docClose","docReady","enter","exit","full","indexChange","initialize","mouseDown","mouseEnter","mouseExit","mouseUp","postExecute","postOpen","postPrint","postSave","postSign","postSubmit","preExecute","preOpen","prePrint","preSave","preSign","preSubmit","ready","validationState"]);_this108.id=attributes.id||"";_this108.listen=getStringOption(attributes.listen,["refOnly","refAndDescendents"]);_this108.name=attributes.name||"";_this108.ref=attributes.ref||"";_this108.use=attributes.use||"";_this108.usehref=attributes.usehref||"";_this108.extras=null;_this108.encryptData=null;_this108.execute=null;_this108.script=null;_this108.signData=null;_this108.submit=null;return _this108;}_inherits(Event,_XFAObject36);return _createClass(Event);}(XFAObject);var ExData=/*#__PURE__*/function(_ContentObject7){function ExData(attributes){var _this109;_classCallCheck(this,ExData);_this109=_callSuper(this,ExData,[TEMPLATE_NS_ID,"exData"]);_this109.contentType=attributes.contentType||"";_this109.href=attributes.href||"";_this109.id=attributes.id||"";_this109.maxLength=getInteger({data:attributes.maxLength,defaultValue:-1,validate:function validate(x){return x>=-1;}});_this109.name=attributes.name||"";_this109.rid=attributes.rid||"";_this109.transferEncoding=getStringOption(attributes.transferEncoding,["none","base64","package"]);_this109.use=attributes.use||"";_this109.usehref=attributes.usehref||"";return _this109;}_inherits(ExData,_ContentObject7);return _createClass(ExData,[{key:$isCDATAXml,value:function value(){return this.contentType==="text/html";}},{key:$onChild,value:function value(child){if(this.contentType==="text/html"&&child[$namespaceId]===NamespaceIds.xhtml.id){this[$content]=child;return true;}if(this.contentType==="text/xml"){this[$content]=child;return true;}return false;}},{key:$toHTML,value:function value(availableSpace){if(this.contentType!=="text/html"||!this[$content]){return HTMLResult.EMPTY;}return this[$content][$toHTML](availableSpace);}}]);}(ContentObject);var ExObject=/*#__PURE__*/function(_XFAObject37){function ExObject(attributes){var _this110;_classCallCheck(this,ExObject);_this110=_callSuper(this,ExObject,[TEMPLATE_NS_ID,"exObject",true]);_this110.archive=attributes.archive||"";_this110.classId=attributes.classId||"";_this110.codeBase=attributes.codeBase||"";_this110.codeType=attributes.codeType||"";_this110.id=attributes.id||"";_this110.name=attributes.name||"";_this110.use=attributes.use||"";_this110.usehref=attributes.usehref||"";_this110.extras=null;_this110["boolean"]=new XFAObjectArray();_this110.date=new XFAObjectArray();_this110.dateTime=new XFAObjectArray();_this110.decimal=new XFAObjectArray();_this110.exData=new XFAObjectArray();_this110.exObject=new XFAObjectArray();_this110["float"]=new XFAObjectArray();_this110.image=new XFAObjectArray();_this110.integer=new XFAObjectArray();_this110.text=new XFAObjectArray();_this110.time=new XFAObjectArray();return _this110;}_inherits(ExObject,_XFAObject37);return _createClass(ExObject);}(XFAObject);var ExclGroup=/*#__PURE__*/function(_XFAObject38){function ExclGroup(attributes){var _this111;_classCallCheck(this,ExclGroup);_this111=_callSuper(this,ExclGroup,[TEMPLATE_NS_ID,"exclGroup",true]);_this111.access=getStringOption(attributes.access,["open","nonInteractive","protected","readOnly"]);_this111.accessKey=attributes.accessKey||"";_this111.anchorType=getStringOption(attributes.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]);_this111.colSpan=getInteger({data:attributes.colSpan,defaultValue:1,validate:function validate(n){return n>=1||n===-1;}});_this111.h=attributes.h?getMeasurement(attributes.h):"";_this111.hAlign=getStringOption(attributes.hAlign,["left","center","justify","justifyAll","radix","right"]);_this111.id=attributes.id||"";_this111.layout=getStringOption(attributes.layout,["position","lr-tb","rl-row","rl-tb","row","table","tb"]);_this111.maxH=getMeasurement(attributes.maxH,"0pt");_this111.maxW=getMeasurement(attributes.maxW,"0pt");_this111.minH=getMeasurement(attributes.minH,"0pt");_this111.minW=getMeasurement(attributes.minW,"0pt");_this111.name=attributes.name||"";_this111.presence=getStringOption(attributes.presence,["visible","hidden","inactive","invisible"]);_this111.relevant=getRelevant(attributes.relevant);_this111.use=attributes.use||"";_this111.usehref=attributes.usehref||"";_this111.w=attributes.w?getMeasurement(attributes.w):"";_this111.x=getMeasurement(attributes.x,"0pt");_this111.y=getMeasurement(attributes.y,"0pt");_this111.assist=null;_this111.bind=null;_this111.border=null;_this111.calculate=null;_this111.caption=null;_this111.desc=null;_this111.extras=null;_this111.margin=null;_this111.para=null;_this111.traversal=null;_this111.validate=null;_this111.connect=new XFAObjectArray();_this111.event=new XFAObjectArray();_this111.field=new XFAObjectArray();_this111.setProperty=new XFAObjectArray();return _this111;}_inherits(ExclGroup,_XFAObject38);return _createClass(ExclGroup,[{key:$isBindable,value:function value(){return true;}},{key:$hasSettableValue,value:function value(){return true;}},{key:$setValue,value:function value(_value8){var _iterator170=_createForOfIteratorHelper(this.field.children),_step170;try{for(_iterator170.s();!(_step170=_iterator170.n()).done;){var field=_step170.value;if(!field.value){var nodeValue=new Value({});field[$appendChild](nodeValue);field.value=nodeValue;}field.value[$setValue](_value8);}}catch(err){_iterator170.e(err);}finally{_iterator170.f();}}},{key:$isThereMoreWidth,value:function value(){return this.layout.endsWith("-tb")&&this[$extra].attempt===0&&this[$extra].numberInLine>0||this[$getParent]()[$isThereMoreWidth]();}},{key:$isSplittable,value:function value(){var _parent$layout3;var parent=this[$getSubformParent]();if(!parent[$isSplittable]()){return false;}if(this[$extra]._isSplittable!==undefined){return this[$extra]._isSplittable;}if(this.layout==="position"||this.layout.includes("row")){this[$extra]._isSplittable=false;return false;}if((_parent$layout3=parent.layout)!==null&&_parent$layout3!==void 0&&_parent$layout3.endsWith("-tb")&&parent[$extra].numberInLine!==0){return false;}this[$extra]._isSplittable=true;return true;}},{key:$flushHTML,value:function value(){return flushHTML(this);}},{key:$addHTML,value:function value(html,bbox){addHTML(this,html,bbox);}},{key:$getAvailableSpace,value:function value(){return getAvailableSpace(this);}},{key:$toHTML,value:function value(availableSpace){setTabIndex(this);if(this.presence==="hidden"||this.presence==="inactive"||this.h===0||this.w===0){return HTMLResult.EMPTY;}fixDimensions(this);var children=[];var attributes={id:this[$uid],"class":[]};setAccess(this,attributes["class"]);if(!this[$extra]){this[$extra]=Object.create(null);}Object.assign(this[$extra],{children:children,attributes:attributes,attempt:0,line:null,numberInLine:0,availableSpace:{width:Math.min(this.w||Infinity,availableSpace.width),height:Math.min(this.h||Infinity,availableSpace.height)},width:0,height:0,prevHeight:0,currentWidth:0});var isSplittable=this[$isSplittable]();if(!isSplittable){setFirstUnsplittable(this);}if(!checkDimensions(this,availableSpace)){return HTMLResult.FAILURE;}var filter=new Set(["field"]);if(this.layout.includes("row")){var columnWidths=this[$getSubformParent]().columnWidths;if(Array.isArray(columnWidths)&&columnWidths.length>0){this[$extra].columnWidths=columnWidths;this[$extra].currentColumn=0;}}var style=toStyle(this,"anchorType","dimensions","position","presence","border","margin","hAlign");var classNames=["xfaExclgroup"];var cl=layoutClass(this);if(cl){classNames.push(cl);}if(isPrintOnly(this)){classNames.push("xfaPrintOnly");}attributes.style=style;attributes["class"]=classNames;if(this.name){attributes.xfaName=this.name;}this[$pushPara]();var isLrTb=this.layout==="lr-tb"||this.layout==="rl-tb";var maxRun=isLrTb?MAX_ATTEMPTS_FOR_LRTB_LAYOUT:1;for(;this[$extra].attempt<maxRun;this[$extra].attempt++){if(isLrTb&&this[$extra].attempt===MAX_ATTEMPTS_FOR_LRTB_LAYOUT-1){this[$extra].numberInLine=0;}var result=this[$childrenToHTML]({filter:filter,include:true});if(result.success){break;}if(result.isBreak()){this[$popPara]();return result;}if(isLrTb&&this[$extra].attempt===0&&this[$extra].numberInLine===0&&!this[$getTemplateRoot]()[$extra].noLayoutFailure){this[$extra].attempt=maxRun;break;}}this[$popPara]();if(!isSplittable){unsetFirstUnsplittable(this);}if(this[$extra].attempt===maxRun){if(!isSplittable){delete this[$extra];}return HTMLResult.FAILURE;}var marginH=0;var marginV=0;if(this.margin){marginH=this.margin.leftInset+this.margin.rightInset;marginV=this.margin.topInset+this.margin.bottomInset;}var width=Math.max(this[$extra].width+marginH,this.w||0);var height=Math.max(this[$extra].height+marginV,this.h||0);var bbox=[this.x,this.y,width,height];if(this.w===""){style.width=measureToString(width);}if(this.h===""){style.height=measureToString(height);}var html={name:"div",attributes:attributes,children:children};applyAssist(this,attributes);delete this[$extra];return HTMLResult.success(createWrapper(this,html),bbox);}}]);}(XFAObject);var Execute=/*#__PURE__*/function(_XFAObject39){function Execute(attributes){var _this112;_classCallCheck(this,Execute);_this112=_callSuper(this,Execute,[TEMPLATE_NS_ID,"execute"]);_this112.connection=attributes.connection||"";_this112.executeType=getStringOption(attributes.executeType,["import","remerge"]);_this112.id=attributes.id||"";_this112.runAt=getStringOption(attributes.runAt,["client","both","server"]);_this112.use=attributes.use||"";_this112.usehref=attributes.usehref||"";return _this112;}_inherits(Execute,_XFAObject39);return _createClass(Execute);}(XFAObject);var Extras=/*#__PURE__*/function(_XFAObject40){function Extras(attributes){var _this113;_classCallCheck(this,Extras);_this113=_callSuper(this,Extras,[TEMPLATE_NS_ID,"extras",true]);_this113.id=attributes.id||"";_this113.name=attributes.name||"";_this113.use=attributes.use||"";_this113.usehref=attributes.usehref||"";_this113["boolean"]=new XFAObjectArray();_this113.date=new XFAObjectArray();_this113.dateTime=new XFAObjectArray();_this113.decimal=new XFAObjectArray();_this113.exData=new XFAObjectArray();_this113.extras=new XFAObjectArray();_this113["float"]=new XFAObjectArray();_this113.image=new XFAObjectArray();_this113.integer=new XFAObjectArray();_this113.text=new XFAObjectArray();_this113.time=new XFAObjectArray();return _this113;}_inherits(Extras,_XFAObject40);return _createClass(Extras);}(XFAObject);var Field=/*#__PURE__*/function(_XFAObject41){function Field(attributes){var _this114;_classCallCheck(this,Field);_this114=_callSuper(this,Field,[TEMPLATE_NS_ID,"field",true]);_this114.access=getStringOption(attributes.access,["open","nonInteractive","protected","readOnly"]);_this114.accessKey=attributes.accessKey||"";_this114.anchorType=getStringOption(attributes.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]);_this114.colSpan=getInteger({data:attributes.colSpan,defaultValue:1,validate:function validate(n){return n>=1||n===-1;}});_this114.h=attributes.h?getMeasurement(attributes.h):"";_this114.hAlign=getStringOption(attributes.hAlign,["left","center","justify","justifyAll","radix","right"]);_this114.id=attributes.id||"";_this114.locale=attributes.locale||"";_this114.maxH=getMeasurement(attributes.maxH,"0pt");_this114.maxW=getMeasurement(attributes.maxW,"0pt");_this114.minH=getMeasurement(attributes.minH,"0pt");_this114.minW=getMeasurement(attributes.minW,"0pt");_this114.name=attributes.name||"";_this114.presence=getStringOption(attributes.presence,["visible","hidden","inactive","invisible"]);_this114.relevant=getRelevant(attributes.relevant);_this114.rotate=getInteger({data:attributes.rotate,defaultValue:0,validate:function validate(x){return x%90===0;}});_this114.use=attributes.use||"";_this114.usehref=attributes.usehref||"";_this114.w=attributes.w?getMeasurement(attributes.w):"";_this114.x=getMeasurement(attributes.x,"0pt");_this114.y=getMeasurement(attributes.y,"0pt");_this114.assist=null;_this114.bind=null;_this114.border=null;_this114.calculate=null;_this114.caption=null;_this114.desc=null;_this114.extras=null;_this114.font=null;_this114.format=null;_this114.items=new XFAObjectArray(2);_this114.keep=null;_this114.margin=null;_this114.para=null;_this114.traversal=null;_this114.ui=null;_this114.validate=null;_this114.value=null;_this114.bindItems=new XFAObjectArray();_this114.connect=new XFAObjectArray();_this114.event=new XFAObjectArray();_this114.setProperty=new XFAObjectArray();return _this114;}_inherits(Field,_XFAObject41);return _createClass(Field,[{key:$isBindable,value:function value(){return true;}},{key:$setValue,value:function value(_value9){_setValue(this,_value9);}},{key:$toHTML,value:function value(availableSpace){var _ui$children2;setTabIndex(this);if(!this.ui){this.ui=new Ui({});this.ui[$globalData]=this[$globalData];this[$appendChild](this.ui);var node;switch(this.items.children.length){case 0:node=new TextEdit({});this.ui.textEdit=node;break;case 1:node=new CheckButton({});this.ui.checkButton=node;break;case 2:node=new ChoiceList({});this.ui.choiceList=node;break;}this.ui[$appendChild](node);}if(!this.ui||this.presence==="hidden"||this.presence==="inactive"||this.h===0||this.w===0){return HTMLResult.EMPTY;}if(this.caption){delete this.caption[$extra];}this[$pushPara]();var caption=this.caption?this.caption[$toHTML](availableSpace).html:null;var savedW=this.w;var savedH=this.h;var marginH=0;var marginV=0;if(this.margin){marginH=this.margin.leftInset+this.margin.rightInset;marginV=this.margin.topInset+this.margin.bottomInset;}var borderDims=null;if(this.w===""||this.h===""){var width=null;var height=null;var uiW=0;var uiH=0;if(this.ui.checkButton){uiW=uiH=this.ui.checkButton.size;}else{var _layoutNode2=layoutNode(this,availableSpace),w=_layoutNode2.w,h=_layoutNode2.h;if(w!==null){uiW=w;uiH=h;}else{uiH=fonts_getMetrics(this.font,true).lineNoGap;}}borderDims=getBorderDims(this.ui[$getExtra]());uiW+=borderDims.w;uiH+=borderDims.h;if(this.caption){var _this$caption$$getExt=this.caption[$getExtra](availableSpace),_w=_this$caption$$getExt.w,_h=_this$caption$$getExt.h,isBroken=_this$caption$$getExt.isBroken;if(isBroken&&this[$getSubformParent]()[$isThereMoreWidth]()){this[$popPara]();return HTMLResult.FAILURE;}width=_w;height=_h;switch(this.caption.placement){case"left":case"right":case"inline":width+=uiW;break;case"top":case"bottom":height+=uiH;break;}}else{width=uiW;height=uiH;}if(width&&this.w===""){width+=marginH;this.w=Math.min(this.maxW<=0?Infinity:this.maxW,this.minW+1<width?width:this.minW);}if(height&&this.h===""){height+=marginV;this.h=Math.min(this.maxH<=0?Infinity:this.maxH,this.minH+1<height?height:this.minH);}}this[$popPara]();fixDimensions(this);setFirstUnsplittable(this);if(!checkDimensions(this,availableSpace)){this.w=savedW;this.h=savedH;this[$popPara]();return HTMLResult.FAILURE;}unsetFirstUnsplittable(this);var style=toStyle(this,"font","dimensions","position","rotate","anchorType","presence","margin","hAlign");setMinMaxDimensions(this,style);var classNames=["xfaField"];if(this.font){classNames.push("xfaFont");}if(isPrintOnly(this)){classNames.push("xfaPrintOnly");}var attributes={style:style,id:this[$uid],"class":classNames};if(style.margin){style.padding=style.margin;delete style.margin;}setAccess(this,classNames);if(this.name){attributes.xfaName=this.name;}var children=[];var html={name:"div",attributes:attributes,children:children};applyAssist(this,attributes);var borderStyle=this.border?this.border[$toStyle]():null;var bbox=computeBbox(this,html,availableSpace);var ui=this.ui[$toHTML]().html;if(!ui){Object.assign(style,borderStyle);return HTMLResult.success(createWrapper(this,html),bbox);}if(this[$tabIndex]){var _ui$children;if((_ui$children=ui.children)!==null&&_ui$children!==void 0&&_ui$children[0]){ui.children[0].attributes.tabindex=this[$tabIndex];}else{ui.attributes.tabindex=this[$tabIndex];}}if(!ui.attributes.style){ui.attributes.style=Object.create(null);}var aElement=null;if(this.ui.button){if(ui.children.length===1){var _ui$children$splice=ui.children.splice(0,1);var _ui$children$splice2=_slicedToArray(_ui$children$splice,1);aElement=_ui$children$splice2[0];}Object.assign(ui.attributes.style,borderStyle);}else{Object.assign(style,borderStyle);}children.push(ui);if(this.value){if(this.ui.imageEdit){ui.children.push(this.value[$toHTML]().html);}else if(!this.ui.button){var _this$value$text;var value="";if(this.value.exData){value=this.value.exData[$text]();}else if(this.value.text){value=this.value.text[$getExtra]();}else{var htmlValue=this.value[$toHTML]().html;if(htmlValue!==null){value=htmlValue.children[0].value;}}if(this.ui.textEdit&&(_this$value$text=this.value.text)!==null&&_this$value$text!==void 0&&_this$value$text.maxChars){ui.children[0].attributes.maxLength=this.value.text.maxChars;}if(value){if(this.ui.numericEdit){value=parseFloat(value);value=isNaN(value)?"":value.toString();}if(ui.children[0].name==="textarea"){ui.children[0].attributes.textContent=value;}else{ui.children[0].attributes.value=value;}}}}if(!this.ui.imageEdit&&(_ui$children2=ui.children)!==null&&_ui$children2!==void 0&&_ui$children2[0]&&this.h){borderDims=borderDims||getBorderDims(this.ui[$getExtra]());var captionHeight=0;if(this.caption&&["top","bottom"].includes(this.caption.placement)){captionHeight=this.caption.reserve;if(captionHeight<=0){captionHeight=this.caption[$getExtra](availableSpace).h;}var inputHeight=this.h-captionHeight-marginV-borderDims.h;ui.children[0].attributes.style.height=measureToString(inputHeight);}else{ui.children[0].attributes.style.height="100%";}}if(aElement){ui.children.push(aElement);}if(!caption){if(ui.attributes["class"]){ui.attributes["class"].push("xfaLeft");}this.w=savedW;this.h=savedH;return HTMLResult.success(createWrapper(this,html),bbox);}if(this.ui.button){if(style.padding){delete style.padding;}if(caption.name==="div"){caption.name="span";}ui.children.push(caption);return HTMLResult.success(html,bbox);}else if(this.ui.checkButton){caption.attributes["class"][0]="xfaCaptionForCheckButton";}if(!ui.attributes["class"]){ui.attributes["class"]=[];}ui.children.splice(0,0,caption);switch(this.caption.placement){case"left":ui.attributes["class"].push("xfaLeft");break;case"right":ui.attributes["class"].push("xfaRight");break;case"top":ui.attributes["class"].push("xfaTop");break;case"bottom":ui.attributes["class"].push("xfaBottom");break;case"inline":ui.attributes["class"].push("xfaLeft");break;}this.w=savedW;this.h=savedH;return HTMLResult.success(createWrapper(this,html),bbox);}}]);}(XFAObject);var Fill=/*#__PURE__*/function(_XFAObject42){function Fill(attributes){var _this115;_classCallCheck(this,Fill);_this115=_callSuper(this,Fill,[TEMPLATE_NS_ID,"fill",true]);_this115.id=attributes.id||"";_this115.presence=getStringOption(attributes.presence,["visible","hidden","inactive","invisible"]);_this115.use=attributes.use||"";_this115.usehref=attributes.usehref||"";_this115.color=null;_this115.extras=null;_this115.linear=null;_this115.pattern=null;_this115.radial=null;_this115.solid=null;_this115.stipple=null;return _this115;}_inherits(Fill,_XFAObject42);return _createClass(Fill,[{key:$toStyle,value:function value(){var _this$color;var parent=this[$getParent]();var grandpa=parent[$getParent]();var ggrandpa=grandpa[$getParent]();var style=Object.create(null);var propName="color";var altPropName=propName;if(parent instanceof Border){propName="background-color";altPropName="background";if(ggrandpa instanceof Ui){style.backgroundColor="white";}}if(parent instanceof Rectangle||parent instanceof Arc){propName=altPropName="fill";style.fill="white";}var _iterator171=_createForOfIteratorHelper(Object.getOwnPropertyNames(this)),_step171;try{for(_iterator171.s();!(_step171=_iterator171.n()).done;){var name=_step171.value;if(name==="extras"||name==="color"){continue;}var obj=this[name];if(!(obj instanceof XFAObject)){continue;}var _color3=obj[$toStyle](this.color);if(_color3){style[_color3.startsWith("#")?propName:altPropName]=_color3;}return style;}}catch(err){_iterator171.e(err);}finally{_iterator171.f();}if((_this$color=this.color)!==null&&_this$color!==void 0&&_this$color.value){var color=this.color[$toStyle]();style[color.startsWith("#")?propName:altPropName]=color;}return style;}}]);}(XFAObject);var Filter=/*#__PURE__*/function(_XFAObject43){function Filter(attributes){var _this116;_classCallCheck(this,Filter);_this116=_callSuper(this,Filter,[TEMPLATE_NS_ID,"filter",true]);_this116.addRevocationInfo=getStringOption(attributes.addRevocationInfo,["","required","optional","none"]);_this116.id=attributes.id||"";_this116.name=attributes.name||"";_this116.use=attributes.use||"";_this116.usehref=attributes.usehref||"";_this116.version=getInteger({data:_this116.version,defaultValue:5,validate:function validate(x){return x>=1&&x<=5;}});_this116.appearanceFilter=null;_this116.certificates=null;_this116.digestMethods=null;_this116.encodings=null;_this116.encryptionMethods=null;_this116.handler=null;_this116.lockDocument=null;_this116.mdp=null;_this116.reasons=null;_this116.timeStamp=null;return _this116;}_inherits(Filter,_XFAObject43);return _createClass(Filter);}(XFAObject);var Float=/*#__PURE__*/function(_ContentObject8){function Float(attributes){var _this117;_classCallCheck(this,Float);_this117=_callSuper(this,Float,[TEMPLATE_NS_ID,"float"]);_this117.id=attributes.id||"";_this117.name=attributes.name||"";_this117.use=attributes.use||"";_this117.usehref=attributes.usehref||"";return _this117;}_inherits(Float,_ContentObject8);return _createClass(Float,[{key:$finalize,value:function value(){var number=parseFloat(this[$content].trim());this[$content]=isNaN(number)?null:number;}},{key:$toHTML,value:function value(availableSpace){return valueToHtml(this[$content]!==null?this[$content].toString():"");}}]);}(ContentObject);var template_Font=/*#__PURE__*/function(_XFAObject44){function template_Font(attributes){var _this118;_classCallCheck(this,template_Font);_this118=_callSuper(this,template_Font,[TEMPLATE_NS_ID,"font",true]);_this118.baselineShift=getMeasurement(attributes.baselineShift);_this118.fontHorizontalScale=getFloat({data:attributes.fontHorizontalScale,defaultValue:100,validate:function validate(x){return x>=0;}});_this118.fontVerticalScale=getFloat({data:attributes.fontVerticalScale,defaultValue:100,validate:function validate(x){return x>=0;}});_this118.id=attributes.id||"";_this118.kerningMode=getStringOption(attributes.kerningMode,["none","pair"]);_this118.letterSpacing=getMeasurement(attributes.letterSpacing,"0");_this118.lineThrough=getInteger({data:attributes.lineThrough,defaultValue:0,validate:function validate(x){return x===1||x===2;}});_this118.lineThroughPeriod=getStringOption(attributes.lineThroughPeriod,["all","word"]);_this118.overline=getInteger({data:attributes.overline,defaultValue:0,validate:function validate(x){return x===1||x===2;}});_this118.overlinePeriod=getStringOption(attributes.overlinePeriod,["all","word"]);_this118.posture=getStringOption(attributes.posture,["normal","italic"]);_this118.size=getMeasurement(attributes.size,"10pt");_this118.typeface=attributes.typeface||"Courier";_this118.underline=getInteger({data:attributes.underline,defaultValue:0,validate:function validate(x){return x===1||x===2;}});_this118.underlinePeriod=getStringOption(attributes.underlinePeriod,["all","word"]);_this118.use=attributes.use||"";_this118.usehref=attributes.usehref||"";_this118.weight=getStringOption(attributes.weight,["normal","bold"]);_this118.extras=null;_this118.fill=null;return _this118;}_inherits(template_Font,_XFAObject44);return _createClass(template_Font,[{key:$clean,value:function value(builder){_superPropGet(template_Font,$clean,this,3)([builder]);this[$globalData].usedTypefaces.add(this.typeface);}},{key:$toStyle,value:function value(){var style=toStyle(this,"fill");var color=style.color;if(color){if(color==="#000000"){delete style.color;}else if(!color.startsWith("#")){style.background=color;style.backgroundClip="text";style.color="transparent";}}if(this.baselineShift){style.verticalAlign=measureToString(this.baselineShift);}style.fontKerning=this.kerningMode==="none"?"none":"normal";style.letterSpacing=measureToString(this.letterSpacing);if(this.lineThrough!==0){style.textDecoration="line-through";if(this.lineThrough===2){style.textDecorationStyle="double";}}if(this.overline!==0){style.textDecoration="overline";if(this.overline===2){style.textDecorationStyle="double";}}style.fontStyle=this.posture;style.fontSize=measureToString(0.99*this.size);setFontFamily(this,this,this[$globalData].fontFinder,style);if(this.underline!==0){style.textDecoration="underline";if(this.underline===2){style.textDecorationStyle="double";}}style.fontWeight=this.weight;return style;}}]);}(XFAObject);var Format=/*#__PURE__*/function(_XFAObject45){function Format(attributes){var _this119;_classCallCheck(this,Format);_this119=_callSuper(this,Format,[TEMPLATE_NS_ID,"format",true]);_this119.id=attributes.id||"";_this119.use=attributes.use||"";_this119.usehref=attributes.usehref||"";_this119.extras=null;_this119.picture=null;return _this119;}_inherits(Format,_XFAObject45);return _createClass(Format);}(XFAObject);var Handler=/*#__PURE__*/function(_StringObject3){function Handler(attributes){var _this120;_classCallCheck(this,Handler);_this120=_callSuper(this,Handler,[TEMPLATE_NS_ID,"handler"]);_this120.id=attributes.id||"";_this120.type=getStringOption(attributes.type,["optional","required"]);_this120.use=attributes.use||"";_this120.usehref=attributes.usehref||"";return _this120;}_inherits(Handler,_StringObject3);return _createClass(Handler);}(StringObject);var Hyphenation=/*#__PURE__*/function(_XFAObject46){function Hyphenation(attributes){var _this121;_classCallCheck(this,Hyphenation);_this121=_callSuper(this,Hyphenation,[TEMPLATE_NS_ID,"hyphenation"]);_this121.excludeAllCaps=getInteger({data:attributes.excludeAllCaps,defaultValue:0,validate:function validate(x){return x===1;}});_this121.excludeInitialCap=getInteger({data:attributes.excludeInitialCap,defaultValue:0,validate:function validate(x){return x===1;}});_this121.hyphenate=getInteger({data:attributes.hyphenate,defaultValue:0,validate:function validate(x){return x===1;}});_this121.id=attributes.id||"";_this121.pushCharacterCount=getInteger({data:attributes.pushCharacterCount,defaultValue:3,validate:function validate(x){return x>=0;}});_this121.remainCharacterCount=getInteger({data:attributes.remainCharacterCount,defaultValue:3,validate:function validate(x){return x>=0;}});_this121.use=attributes.use||"";_this121.usehref=attributes.usehref||"";_this121.wordCharacterCount=getInteger({data:attributes.wordCharacterCount,defaultValue:7,validate:function validate(x){return x>=0;}});return _this121;}_inherits(Hyphenation,_XFAObject46);return _createClass(Hyphenation);}(XFAObject);var Image=/*#__PURE__*/function(_StringObject4){function Image(attributes){var _this122;_classCallCheck(this,Image);_this122=_callSuper(this,Image,[TEMPLATE_NS_ID,"image"]);_this122.aspect=getStringOption(attributes.aspect,["fit","actual","height","none","width"]);_this122.contentType=attributes.contentType||"";_this122.href=attributes.href||"";_this122.id=attributes.id||"";_this122.name=attributes.name||"";_this122.transferEncoding=getStringOption(attributes.transferEncoding,["base64","none","package"]);_this122.use=attributes.use||"";_this122.usehref=attributes.usehref||"";return _this122;}_inherits(Image,_StringObject4);return _createClass(Image,[{key:$toHTML,value:function value(){if(this.contentType&&!MIMES.has(this.contentType.toLowerCase())){return HTMLResult.EMPTY;}var buffer=this[$globalData].images&&this[$globalData].images.get(this.href);if(!buffer&&(this.href||!this[$content])){return HTMLResult.EMPTY;}if(!buffer&&this.transferEncoding==="base64"){buffer=fromBase64Util(this[$content]);}if(!buffer){return HTMLResult.EMPTY;}if(!this.contentType){for(var _i58=0,_IMAGES_HEADERS=IMAGES_HEADERS;_i58<_IMAGES_HEADERS.length;_i58++){var _IMAGES_HEADERS$_i=_slicedToArray(_IMAGES_HEADERS[_i58],2),header=_IMAGES_HEADERS$_i[0],type=_IMAGES_HEADERS$_i[1];if(buffer.length>header.length&&header.every(function(x,i){return x===buffer[i];})){this.contentType=type;break;}}if(!this.contentType){return HTMLResult.EMPTY;}}var blob=new Blob([buffer],{type:this.contentType});var style;switch(this.aspect){case"fit":case"actual":break;case"height":style={height:"100%",objectFit:"fill"};break;case"none":style={width:"100%",height:"100%",objectFit:"fill"};break;case"width":style={width:"100%",objectFit:"fill"};break;}var parent=this[$getParent]();return HTMLResult.success({name:"img",attributes:{"class":["xfaImage"],style:style,src:URL.createObjectURL(blob),alt:parent?ariaLabel(parent[$getParent]()):null}});}}]);}(StringObject);var ImageEdit=/*#__PURE__*/function(_XFAObject47){function ImageEdit(attributes){var _this123;_classCallCheck(this,ImageEdit);_this123=_callSuper(this,ImageEdit,[TEMPLATE_NS_ID,"imageEdit",true]);_this123.data=getStringOption(attributes.data,["link","embed"]);_this123.id=attributes.id||"";_this123.use=attributes.use||"";_this123.usehref=attributes.usehref||"";_this123.border=null;_this123.extras=null;_this123.margin=null;return _this123;}_inherits(ImageEdit,_XFAObject47);return _createClass(ImageEdit,[{key:$toHTML,value:function value(availableSpace){if(this.data==="embed"){return HTMLResult.success({name:"div",children:[],attributes:{}});}return HTMLResult.EMPTY;}}]);}(XFAObject);var Integer=/*#__PURE__*/function(_ContentObject9){function Integer(attributes){var _this124;_classCallCheck(this,Integer);_this124=_callSuper(this,Integer,[TEMPLATE_NS_ID,"integer"]);_this124.id=attributes.id||"";_this124.name=attributes.name||"";_this124.use=attributes.use||"";_this124.usehref=attributes.usehref||"";return _this124;}_inherits(Integer,_ContentObject9);return _createClass(Integer,[{key:$finalize,value:function value(){var number=parseInt(this[$content].trim(),10);this[$content]=isNaN(number)?null:number;}},{key:$toHTML,value:function value(availableSpace){return valueToHtml(this[$content]!==null?this[$content].toString():"");}}]);}(ContentObject);var Issuers=/*#__PURE__*/function(_XFAObject48){function Issuers(attributes){var _this125;_classCallCheck(this,Issuers);_this125=_callSuper(this,Issuers,[TEMPLATE_NS_ID,"issuers",true]);_this125.id=attributes.id||"";_this125.type=getStringOption(attributes.type,["optional","required"]);_this125.use=attributes.use||"";_this125.usehref=attributes.usehref||"";_this125.certificate=new XFAObjectArray();return _this125;}_inherits(Issuers,_XFAObject48);return _createClass(Issuers);}(XFAObject);var Items=/*#__PURE__*/function(_XFAObject49){function Items(attributes){var _this126;_classCallCheck(this,Items);_this126=_callSuper(this,Items,[TEMPLATE_NS_ID,"items",true]);_this126.id=attributes.id||"";_this126.name=attributes.name||"";_this126.presence=getStringOption(attributes.presence,["visible","hidden","inactive","invisible"]);_this126.ref=attributes.ref||"";_this126.save=getInteger({data:attributes.save,defaultValue:0,validate:function validate(x){return x===1;}});_this126.use=attributes.use||"";_this126.usehref=attributes.usehref||"";_this126["boolean"]=new XFAObjectArray();_this126.date=new XFAObjectArray();_this126.dateTime=new XFAObjectArray();_this126.decimal=new XFAObjectArray();_this126.exData=new XFAObjectArray();_this126["float"]=new XFAObjectArray();_this126.image=new XFAObjectArray();_this126.integer=new XFAObjectArray();_this126.text=new XFAObjectArray();_this126.time=new XFAObjectArray();return _this126;}_inherits(Items,_XFAObject49);return _createClass(Items,[{key:$toHTML,value:function value(){var output=[];var _iterator172=_createForOfIteratorHelper(this[$getChildren]()),_step172;try{for(_iterator172.s();!(_step172=_iterator172.n()).done;){var child=_step172.value;output.push(child[$text]());}}catch(err){_iterator172.e(err);}finally{_iterator172.f();}return HTMLResult.success(output);}}]);}(XFAObject);var Keep=/*#__PURE__*/function(_XFAObject50){function Keep(attributes){var _this127;_classCallCheck(this,Keep);_this127=_callSuper(this,Keep,[TEMPLATE_NS_ID,"keep",true]);_this127.id=attributes.id||"";var options=["none","contentArea","pageArea"];_this127.intact=getStringOption(attributes.intact,options);_this127.next=getStringOption(attributes.next,options);_this127.previous=getStringOption(attributes.previous,options);_this127.use=attributes.use||"";_this127.usehref=attributes.usehref||"";_this127.extras=null;return _this127;}_inherits(Keep,_XFAObject50);return _createClass(Keep);}(XFAObject);var KeyUsage=/*#__PURE__*/function(_XFAObject51){function KeyUsage(attributes){var _this128;_classCallCheck(this,KeyUsage);_this128=_callSuper(this,KeyUsage,[TEMPLATE_NS_ID,"keyUsage"]);var options=["","yes","no"];_this128.crlSign=getStringOption(attributes.crlSign,options);_this128.dataEncipherment=getStringOption(attributes.dataEncipherment,options);_this128.decipherOnly=getStringOption(attributes.decipherOnly,options);_this128.digitalSignature=getStringOption(attributes.digitalSignature,options);_this128.encipherOnly=getStringOption(attributes.encipherOnly,options);_this128.id=attributes.id||"";_this128.keyAgreement=getStringOption(attributes.keyAgreement,options);_this128.keyCertSign=getStringOption(attributes.keyCertSign,options);_this128.keyEncipherment=getStringOption(attributes.keyEncipherment,options);_this128.nonRepudiation=getStringOption(attributes.nonRepudiation,options);_this128.type=getStringOption(attributes.type,["optional","required"]);_this128.use=attributes.use||"";_this128.usehref=attributes.usehref||"";return _this128;}_inherits(KeyUsage,_XFAObject51);return _createClass(KeyUsage);}(XFAObject);var Line=/*#__PURE__*/function(_XFAObject52){function Line(attributes){var _this129;_classCallCheck(this,Line);_this129=_callSuper(this,Line,[TEMPLATE_NS_ID,"line",true]);_this129.hand=getStringOption(attributes.hand,["even","left","right"]);_this129.id=attributes.id||"";_this129.slope=getStringOption(attributes.slope,["\\\\","/"]);_this129.use=attributes.use||"";_this129.usehref=attributes.usehref||"";_this129.edge=null;return _this129;}_inherits(Line,_XFAObject52);return _createClass(Line,[{key:$toHTML,value:function value(){var parent=this[$getParent]()[$getParent]();var edge=this.edge||new Edge({});var edgeStyle=edge[$toStyle]();var style=Object.create(null);var thickness=edge.presence==="visible"?edge.thickness:0;style.strokeWidth=measureToString(thickness);style.stroke=edgeStyle.color;var x1,y1,x2,y2;var width="100%";var height="100%";if(parent.w<=thickness){x1="50%";y1=0;x2="50%";y2="100%";width=style.strokeWidth;}else if(parent.h<=thickness){x1=0;y1="50%";x2="100%";y2="50%";height=style.strokeWidth;}else if(this.slope==="\\\\"){x1=0;y1=0;x2="100%";y2="100%";}else{x1=0;y1="100%";x2="100%";y2=0;}var line={name:"line",attributes:{xmlns:SVG_NS,x1:x1,y1:y1,x2:x2,y2:y2,style:style}};var svg={name:"svg",children:[line],attributes:{xmlns:SVG_NS,width:width,height:height,style:{overflow:"visible"}}};if(hasMargin(parent)){return HTMLResult.success({name:"div",attributes:{style:{display:"inline",width:"100%",height:"100%"}},children:[svg]});}svg.attributes.style.position="absolute";return HTMLResult.success(svg);}}]);}(XFAObject);var Linear=/*#__PURE__*/function(_XFAObject53){function Linear(attributes){var _this130;_classCallCheck(this,Linear);_this130=_callSuper(this,Linear,[TEMPLATE_NS_ID,"linear",true]);_this130.id=attributes.id||"";_this130.type=getStringOption(attributes.type,["toRight","toBottom","toLeft","toTop"]);_this130.use=attributes.use||"";_this130.usehref=attributes.usehref||"";_this130.color=null;_this130.extras=null;return _this130;}_inherits(Linear,_XFAObject53);return _createClass(Linear,[{key:$toStyle,value:function value(startColor){startColor=startColor?startColor[$toStyle]():"#FFFFFF";var transf=this.type.replace(/([RBLT])/," $1").toLowerCase();var endColor=this.color?this.color[$toStyle]():"#000000";return"linear-gradient(".concat(transf,", ").concat(startColor,", ").concat(endColor,")");}}]);}(XFAObject);var LockDocument=/*#__PURE__*/function(_ContentObject10){function LockDocument(attributes){var _this131;_classCallCheck(this,LockDocument);_this131=_callSuper(this,LockDocument,[TEMPLATE_NS_ID,"lockDocument"]);_this131.id=attributes.id||"";_this131.type=getStringOption(attributes.type,["optional","required"]);_this131.use=attributes.use||"";_this131.usehref=attributes.usehref||"";return _this131;}_inherits(LockDocument,_ContentObject10);return _createClass(LockDocument,[{key:$finalize,value:function value(){this[$content]=getStringOption(this[$content],["auto","0","1"]);}}]);}(ContentObject);var Manifest=/*#__PURE__*/function(_XFAObject54){function Manifest(attributes){var _this132;_classCallCheck(this,Manifest);_this132=_callSuper(this,Manifest,[TEMPLATE_NS_ID,"manifest",true]);_this132.action=getStringOption(attributes.action,["include","all","exclude"]);_this132.id=attributes.id||"";_this132.name=attributes.name||"";_this132.use=attributes.use||"";_this132.usehref=attributes.usehref||"";_this132.extras=null;_this132.ref=new XFAObjectArray();return _this132;}_inherits(Manifest,_XFAObject54);return _createClass(Manifest);}(XFAObject);var Margin=/*#__PURE__*/function(_XFAObject55){function Margin(attributes){var _this133;_classCallCheck(this,Margin);_this133=_callSuper(this,Margin,[TEMPLATE_NS_ID,"margin",true]);_this133.bottomInset=getMeasurement(attributes.bottomInset,"0");_this133.id=attributes.id||"";_this133.leftInset=getMeasurement(attributes.leftInset,"0");_this133.rightInset=getMeasurement(attributes.rightInset,"0");_this133.topInset=getMeasurement(attributes.topInset,"0");_this133.use=attributes.use||"";_this133.usehref=attributes.usehref||"";_this133.extras=null;return _this133;}_inherits(Margin,_XFAObject55);return _createClass(Margin,[{key:$toStyle,value:function value(){return{margin:measureToString(this.topInset)+" "+measureToString(this.rightInset)+" "+measureToString(this.bottomInset)+" "+measureToString(this.leftInset)};}}]);}(XFAObject);var Mdp=/*#__PURE__*/function(_XFAObject56){function Mdp(attributes){var _this134;_classCallCheck(this,Mdp);_this134=_callSuper(this,Mdp,[TEMPLATE_NS_ID,"mdp"]);_this134.id=attributes.id||"";_this134.permissions=getInteger({data:attributes.permissions,defaultValue:2,validate:function validate(x){return x===1||x===3;}});_this134.signatureType=getStringOption(attributes.signatureType,["filler","author"]);_this134.use=attributes.use||"";_this134.usehref=attributes.usehref||"";return _this134;}_inherits(Mdp,_XFAObject56);return _createClass(Mdp);}(XFAObject);var Medium=/*#__PURE__*/function(_XFAObject57){function Medium(attributes){var _this135;_classCallCheck(this,Medium);_this135=_callSuper(this,Medium,[TEMPLATE_NS_ID,"medium"]);_this135.id=attributes.id||"";_this135.imagingBBox=getBBox(attributes.imagingBBox);_this135["long"]=getMeasurement(attributes["long"]);_this135.orientation=getStringOption(attributes.orientation,["portrait","landscape"]);_this135["short"]=getMeasurement(attributes["short"]);_this135.stock=attributes.stock||"";_this135.trayIn=getStringOption(attributes.trayIn,["auto","delegate","pageFront"]);_this135.trayOut=getStringOption(attributes.trayOut,["auto","delegate"]);_this135.use=attributes.use||"";_this135.usehref=attributes.usehref||"";return _this135;}_inherits(Medium,_XFAObject57);return _createClass(Medium);}(XFAObject);var Message=/*#__PURE__*/function(_XFAObject58){function Message(attributes){var _this136;_classCallCheck(this,Message);_this136=_callSuper(this,Message,[TEMPLATE_NS_ID,"message",true]);_this136.id=attributes.id||"";_this136.use=attributes.use||"";_this136.usehref=attributes.usehref||"";_this136.text=new XFAObjectArray();return _this136;}_inherits(Message,_XFAObject58);return _createClass(Message);}(XFAObject);var NumericEdit=/*#__PURE__*/function(_XFAObject59){function NumericEdit(attributes){var _this137;_classCallCheck(this,NumericEdit);_this137=_callSuper(this,NumericEdit,[TEMPLATE_NS_ID,"numericEdit",true]);_this137.hScrollPolicy=getStringOption(attributes.hScrollPolicy,["auto","off","on"]);_this137.id=attributes.id||"";_this137.use=attributes.use||"";_this137.usehref=attributes.usehref||"";_this137.border=null;_this137.comb=null;_this137.extras=null;_this137.margin=null;return _this137;}_inherits(NumericEdit,_XFAObject59);return _createClass(NumericEdit,[{key:$toHTML,value:function value(availableSpace){var _field$$data4;var style=toStyle(this,"border","font","margin");var field=this[$getParent]()[$getParent]();var html={name:"input",attributes:{type:"text",fieldId:field[$uid],dataId:((_field$$data4=field[$data])===null||_field$$data4===void 0?void 0:_field$$data4[$uid])||field[$uid],"class":["xfaTextfield"],style:style,"aria-label":ariaLabel(field),"aria-required":false}};if(isRequired(field)){html.attributes["aria-required"]=true;html.attributes.required=true;}return HTMLResult.success({name:"label",attributes:{"class":["xfaLabel"]},children:[html]});}}]);}(XFAObject);var Occur=/*#__PURE__*/function(_XFAObject60){function Occur(attributes){var _this138;_classCallCheck(this,Occur);_this138=_callSuper(this,Occur,[TEMPLATE_NS_ID,"occur",true]);_this138.id=attributes.id||"";_this138.initial=attributes.initial!==""?getInteger({data:attributes.initial,defaultValue:"",validate:function validate(x){return true;}}):"";_this138.max=attributes.max!==""?getInteger({data:attributes.max,defaultValue:1,validate:function validate(x){return true;}}):"";_this138.min=attributes.min!==""?getInteger({data:attributes.min,defaultValue:1,validate:function validate(x){return true;}}):"";_this138.use=attributes.use||"";_this138.usehref=attributes.usehref||"";_this138.extras=null;return _this138;}_inherits(Occur,_XFAObject60);return _createClass(Occur,[{key:$clean,value:function value(){var parent=this[$getParent]();var originalMin=this.min;if(this.min===""){this.min=parent instanceof PageArea||parent instanceof PageSet?0:1;}if(this.max===""){if(originalMin===""){this.max=parent instanceof PageArea||parent instanceof PageSet?-1:1;}else{this.max=this.min;}}if(this.max!==-1&&this.max<this.min){this.max=this.min;}if(this.initial===""){this.initial=parent instanceof Template?1:this.min;}}}]);}(XFAObject);var Oid=/*#__PURE__*/function(_StringObject5){function Oid(attributes){var _this139;_classCallCheck(this,Oid);_this139=_callSuper(this,Oid,[TEMPLATE_NS_ID,"oid"]);_this139.id=attributes.id||"";_this139.name=attributes.name||"";_this139.use=attributes.use||"";_this139.usehref=attributes.usehref||"";return _this139;}_inherits(Oid,_StringObject5);return _createClass(Oid);}(StringObject);var Oids=/*#__PURE__*/function(_XFAObject61){function Oids(attributes){var _this140;_classCallCheck(this,Oids);_this140=_callSuper(this,Oids,[TEMPLATE_NS_ID,"oids",true]);_this140.id=attributes.id||"";_this140.type=getStringOption(attributes.type,["optional","required"]);_this140.use=attributes.use||"";_this140.usehref=attributes.usehref||"";_this140.oid=new XFAObjectArray();return _this140;}_inherits(Oids,_XFAObject61);return _createClass(Oids);}(XFAObject);var Overflow=/*#__PURE__*/function(_XFAObject62){function Overflow(attributes){var _this141;_classCallCheck(this,Overflow);_this141=_callSuper(this,Overflow,[TEMPLATE_NS_ID,"overflow"]);_this141.id=attributes.id||"";_this141.leader=attributes.leader||"";_this141.target=attributes.target||"";_this141.trailer=attributes.trailer||"";_this141.use=attributes.use||"";_this141.usehref=attributes.usehref||"";return _this141;}_inherits(Overflow,_XFAObject62);return _createClass(Overflow,[{key:$getExtra,value:function value(){if(!this[$extra]){var parent=this[$getParent]();var root=this[$getTemplateRoot]();var target=root[$searchNode](this.target,parent);var leader=root[$searchNode](this.leader,parent);var trailer=root[$searchNode](this.trailer,parent);this[$extra]={target:(target===null||target===void 0?void 0:target[0])||null,leader:(leader===null||leader===void 0?void 0:leader[0])||null,trailer:(trailer===null||trailer===void 0?void 0:trailer[0])||null,addLeader:false,addTrailer:false};}return this[$extra];}}]);}(XFAObject);var PageArea=/*#__PURE__*/function(_XFAObject63){function PageArea(attributes){var _this142;_classCallCheck(this,PageArea);_this142=_callSuper(this,PageArea,[TEMPLATE_NS_ID,"pageArea",true]);_this142.blankOrNotBlank=getStringOption(attributes.blankOrNotBlank,["any","blank","notBlank"]);_this142.id=attributes.id||"";_this142.initialNumber=getInteger({data:attributes.initialNumber,defaultValue:1,validate:function validate(x){return true;}});_this142.name=attributes.name||"";_this142.numbered=getInteger({data:attributes.numbered,defaultValue:1,validate:function validate(x){return true;}});_this142.oddOrEven=getStringOption(attributes.oddOrEven,["any","even","odd"]);_this142.pagePosition=getStringOption(attributes.pagePosition,["any","first","last","only","rest"]);_this142.relevant=getRelevant(attributes.relevant);_this142.use=attributes.use||"";_this142.usehref=attributes.usehref||"";_this142.desc=null;_this142.extras=null;_this142.medium=null;_this142.occur=null;_this142.area=new XFAObjectArray();_this142.contentArea=new XFAObjectArray();_this142.draw=new XFAObjectArray();_this142.exclGroup=new XFAObjectArray();_this142.field=new XFAObjectArray();_this142.subform=new XFAObjectArray();return _this142;}_inherits(PageArea,_XFAObject63);return _createClass(PageArea,[{key:$isUsable,value:function value(){if(!this[$extra]){this[$extra]={numberOfUse:0};return true;}return!this.occur||this.occur.max===-1||this[$extra].numberOfUse<this.occur.max;}},{key:$cleanPage,value:function value(){delete this[$extra];}},{key:$getNextPage,value:function value(){if(!this[$extra]){this[$extra]={numberOfUse:0};}var parent=this[$getParent]();if(parent.relation==="orderedOccurrence"){if(this[$isUsable]()){this[$extra].numberOfUse+=1;return this;}}return parent[$getNextPage]();}},{key:$getAvailableSpace,value:function value(){return this[$extra].space||{width:0,height:0};}},{key:$toHTML,value:function value(){if(!this[$extra]){this[$extra]={numberOfUse:1};}var children=[];this[$extra].children=children;var style=Object.create(null);if(this.medium&&this.medium["short"]&&this.medium["long"]){style.width=measureToString(this.medium["short"]);style.height=measureToString(this.medium["long"]);this[$extra].space={width:this.medium["short"],height:this.medium["long"]};if(this.medium.orientation==="landscape"){var x=style.width;style.width=style.height;style.height=x;this[$extra].space={width:this.medium["long"],height:this.medium["short"]};}}else{warn("XFA - No medium specified in pageArea: please file a bug.");}this[$childrenToHTML]({filter:new Set(["area","draw","field","subform"]),include:true});this[$childrenToHTML]({filter:new Set(["contentArea"]),include:true});return HTMLResult.success({name:"div",children:children,attributes:{"class":["xfaPage"],id:this[$uid],style:style,xfaName:this.name}});}}]);}(XFAObject);var PageSet=/*#__PURE__*/function(_XFAObject64){function PageSet(attributes){var _this143;_classCallCheck(this,PageSet);_this143=_callSuper(this,PageSet,[TEMPLATE_NS_ID,"pageSet",true]);_this143.duplexImposition=getStringOption(attributes.duplexImposition,["longEdge","shortEdge"]);_this143.id=attributes.id||"";_this143.name=attributes.name||"";_this143.relation=getStringOption(attributes.relation,["orderedOccurrence","duplexPaginated","simplexPaginated"]);_this143.relevant=getRelevant(attributes.relevant);_this143.use=attributes.use||"";_this143.usehref=attributes.usehref||"";_this143.extras=null;_this143.occur=null;_this143.pageArea=new XFAObjectArray();_this143.pageSet=new XFAObjectArray();return _this143;}_inherits(PageSet,_XFAObject64);return _createClass(PageSet,[{key:$cleanPage,value:function value(){var _iterator173=_createForOfIteratorHelper(this.pageArea.children),_step173;try{for(_iterator173.s();!(_step173=_iterator173.n()).done;){var page=_step173.value;page[$cleanPage]();}}catch(err){_iterator173.e(err);}finally{_iterator173.f();}var _iterator174=_createForOfIteratorHelper(this.pageSet.children),_step174;try{for(_iterator174.s();!(_step174=_iterator174.n()).done;){var _page=_step174.value;_page[$cleanPage]();}}catch(err){_iterator174.e(err);}finally{_iterator174.f();}}},{key:$isUsable,value:function value(){return!this.occur||this.occur.max===-1||this[$extra].numberOfUse<this.occur.max;}},{key:$getNextPage,value:function value(){if(!this[$extra]){this[$extra]={numberOfUse:1,pageIndex:-1,pageSetIndex:-1};}if(this.relation==="orderedOccurrence"){if(this[$extra].pageIndex+1<this.pageArea.children.length){this[$extra].pageIndex+=1;var pageArea=this.pageArea.children[this[$extra].pageIndex];return pageArea[$getNextPage]();}if(this[$extra].pageSetIndex+1<this.pageSet.children.length){this[$extra].pageSetIndex+=1;return this.pageSet.children[this[$extra].pageSetIndex][$getNextPage]();}if(this[$isUsable]()){this[$extra].numberOfUse+=1;this[$extra].pageIndex=-1;this[$extra].pageSetIndex=-1;return this[$getNextPage]();}var parent=this[$getParent]();if(parent instanceof PageSet){return parent[$getNextPage]();}this[$cleanPage]();return this[$getNextPage]();}var pageNumber=this[$getTemplateRoot]()[$extra].pageNumber;var parity=pageNumber%2===0?"even":"odd";var position=pageNumber===0?"first":"rest";var page=this.pageArea.children.find(function(p){return p.oddOrEven===parity&&p.pagePosition===position;});if(page){return page;}page=this.pageArea.children.find(function(p){return p.oddOrEven==="any"&&p.pagePosition===position;});if(page){return page;}page=this.pageArea.children.find(function(p){return p.oddOrEven==="any"&&p.pagePosition==="any";});if(page){return page;}return this.pageArea.children[0];}}]);}(XFAObject);var Para=/*#__PURE__*/function(_XFAObject65){function Para(attributes){var _this144;_classCallCheck(this,Para);_this144=_callSuper(this,Para,[TEMPLATE_NS_ID,"para",true]);_this144.hAlign=getStringOption(attributes.hAlign,["left","center","justify","justifyAll","radix","right"]);_this144.id=attributes.id||"";_this144.lineHeight=attributes.lineHeight?getMeasurement(attributes.lineHeight,"0pt"):"";_this144.marginLeft=attributes.marginLeft?getMeasurement(attributes.marginLeft,"0pt"):"";_this144.marginRight=attributes.marginRight?getMeasurement(attributes.marginRight,"0pt"):"";_this144.orphans=getInteger({data:attributes.orphans,defaultValue:0,validate:function validate(x){return x>=0;}});_this144.preserve=attributes.preserve||"";_this144.radixOffset=attributes.radixOffset?getMeasurement(attributes.radixOffset,"0pt"):"";_this144.spaceAbove=attributes.spaceAbove?getMeasurement(attributes.spaceAbove,"0pt"):"";_this144.spaceBelow=attributes.spaceBelow?getMeasurement(attributes.spaceBelow,"0pt"):"";_this144.tabDefault=attributes.tabDefault?getMeasurement(_this144.tabDefault):"";_this144.tabStops=(attributes.tabStops||"").trim().split(/\\s+/).map(function(x,i){return i%2===1?getMeasurement(x):x;});_this144.textIndent=attributes.textIndent?getMeasurement(attributes.textIndent,"0pt"):"";_this144.use=attributes.use||"";_this144.usehref=attributes.usehref||"";_this144.vAlign=getStringOption(attributes.vAlign,["top","bottom","middle"]);_this144.widows=getInteger({data:attributes.widows,defaultValue:0,validate:function validate(x){return x>=0;}});_this144.hyphenation=null;return _this144;}_inherits(Para,_XFAObject65);return _createClass(Para,[{key:$toStyle,value:function value(){var style=toStyle(this,"hAlign");if(this.marginLeft!==""){style.paddingLeft=measureToString(this.marginLeft);}if(this.marginRight!==""){style.paddingRight=measureToString(this.marginRight);}if(this.spaceAbove!==""){style.paddingTop=measureToString(this.spaceAbove);}if(this.spaceBelow!==""){style.paddingBottom=measureToString(this.spaceBelow);}if(this.textIndent!==""){style.textIndent=measureToString(this.textIndent);fixTextIndent(style);}if(this.lineHeight>0){style.lineHeight=measureToString(this.lineHeight);}if(this.tabDefault!==""){style.tabSize=measureToString(this.tabDefault);}if(this.tabStops.length>0){}if(this.hyphenatation){Object.assign(style,this.hyphenatation[$toStyle]());}return style;}}]);}(XFAObject);var PasswordEdit=/*#__PURE__*/function(_XFAObject66){function PasswordEdit(attributes){var _this145;_classCallCheck(this,PasswordEdit);_this145=_callSuper(this,PasswordEdit,[TEMPLATE_NS_ID,"passwordEdit",true]);_this145.hScrollPolicy=getStringOption(attributes.hScrollPolicy,["auto","off","on"]);_this145.id=attributes.id||"";_this145.passwordChar=attributes.passwordChar||"*";_this145.use=attributes.use||"";_this145.usehref=attributes.usehref||"";_this145.border=null;_this145.extras=null;_this145.margin=null;return _this145;}_inherits(PasswordEdit,_XFAObject66);return _createClass(PasswordEdit);}(XFAObject);var template_Pattern=/*#__PURE__*/function(_XFAObject67){function template_Pattern(attributes){var _this146;_classCallCheck(this,template_Pattern);_this146=_callSuper(this,template_Pattern,[TEMPLATE_NS_ID,"pattern",true]);_this146.id=attributes.id||"";_this146.type=getStringOption(attributes.type,["crossHatch","crossDiagonal","diagonalLeft","diagonalRight","horizontal","vertical"]);_this146.use=attributes.use||"";_this146.usehref=attributes.usehref||"";_this146.color=null;_this146.extras=null;return _this146;}_inherits(template_Pattern,_XFAObject67);return _createClass(template_Pattern,[{key:$toStyle,value:function value(startColor){startColor=startColor?startColor[$toStyle]():"#FFFFFF";var endColor=this.color?this.color[$toStyle]():"#000000";var width=5;var cmd="repeating-linear-gradient";var colors="".concat(startColor,",").concat(startColor," ").concat(width,"px,").concat(endColor," ").concat(width,"px,").concat(endColor," ").concat(2*width,"px");switch(this.type){case"crossHatch":return"".concat(cmd,"(to top,").concat(colors,") ").concat(cmd,"(to right,").concat(colors,")");case"crossDiagonal":return"".concat(cmd,"(45deg,").concat(colors,") ").concat(cmd,"(-45deg,").concat(colors,")");case"diagonalLeft":return"".concat(cmd,"(45deg,").concat(colors,")");case"diagonalRight":return"".concat(cmd,"(-45deg,").concat(colors,")");case"horizontal":return"".concat(cmd,"(to top,").concat(colors,")");case"vertical":return"".concat(cmd,"(to right,").concat(colors,")");}return"";}}]);}(XFAObject);var Picture=/*#__PURE__*/function(_StringObject6){function Picture(attributes){var _this147;_classCallCheck(this,Picture);_this147=_callSuper(this,Picture,[TEMPLATE_NS_ID,"picture"]);_this147.id=attributes.id||"";_this147.use=attributes.use||"";_this147.usehref=attributes.usehref||"";return _this147;}_inherits(Picture,_StringObject6);return _createClass(Picture);}(StringObject);var Proto=/*#__PURE__*/function(_XFAObject68){function Proto(attributes){var _this148;_classCallCheck(this,Proto);_this148=_callSuper(this,Proto,[TEMPLATE_NS_ID,"proto",true]);_this148.appearanceFilter=new XFAObjectArray();_this148.arc=new XFAObjectArray();_this148.area=new XFAObjectArray();_this148.assist=new XFAObjectArray();_this148.barcode=new XFAObjectArray();_this148.bindItems=new XFAObjectArray();_this148.bookend=new XFAObjectArray();_this148["boolean"]=new XFAObjectArray();_this148.border=new XFAObjectArray();_this148["break"]=new XFAObjectArray();_this148.breakAfter=new XFAObjectArray();_this148.breakBefore=new XFAObjectArray();_this148.button=new XFAObjectArray();_this148.calculate=new XFAObjectArray();_this148.caption=new XFAObjectArray();_this148.certificate=new XFAObjectArray();_this148.certificates=new XFAObjectArray();_this148.checkButton=new XFAObjectArray();_this148.choiceList=new XFAObjectArray();_this148.color=new XFAObjectArray();_this148.comb=new XFAObjectArray();_this148.connect=new XFAObjectArray();_this148.contentArea=new XFAObjectArray();_this148.corner=new XFAObjectArray();_this148.date=new XFAObjectArray();_this148.dateTime=new XFAObjectArray();_this148.dateTimeEdit=new XFAObjectArray();_this148.decimal=new XFAObjectArray();_this148.defaultUi=new XFAObjectArray();_this148.desc=new XFAObjectArray();_this148.digestMethod=new XFAObjectArray();_this148.digestMethods=new XFAObjectArray();_this148.draw=new XFAObjectArray();_this148.edge=new XFAObjectArray();_this148.encoding=new XFAObjectArray();_this148.encodings=new XFAObjectArray();_this148.encrypt=new XFAObjectArray();_this148.encryptData=new XFAObjectArray();_this148.encryption=new XFAObjectArray();_this148.encryptionMethod=new XFAObjectArray();_this148.encryptionMethods=new XFAObjectArray();_this148.event=new XFAObjectArray();_this148.exData=new XFAObjectArray();_this148.exObject=new XFAObjectArray();_this148.exclGroup=new XFAObjectArray();_this148.execute=new XFAObjectArray();_this148.extras=new XFAObjectArray();_this148.field=new XFAObjectArray();_this148.fill=new XFAObjectArray();_this148.filter=new XFAObjectArray();_this148["float"]=new XFAObjectArray();_this148.font=new XFAObjectArray();_this148.format=new XFAObjectArray();_this148.handler=new XFAObjectArray();_this148.hyphenation=new XFAObjectArray();_this148.image=new XFAObjectArray();_this148.imageEdit=new XFAObjectArray();_this148.integer=new XFAObjectArray();_this148.issuers=new XFAObjectArray();_this148.items=new XFAObjectArray();_this148.keep=new XFAObjectArray();_this148.keyUsage=new XFAObjectArray();_this148.line=new XFAObjectArray();_this148.linear=new XFAObjectArray();_this148.lockDocument=new XFAObjectArray();_this148.manifest=new XFAObjectArray();_this148.margin=new XFAObjectArray();_this148.mdp=new XFAObjectArray();_this148.medium=new XFAObjectArray();_this148.message=new XFAObjectArray();_this148.numericEdit=new XFAObjectArray();_this148.occur=new XFAObjectArray();_this148.oid=new XFAObjectArray();_this148.oids=new XFAObjectArray();_this148.overflow=new XFAObjectArray();_this148.pageArea=new XFAObjectArray();_this148.pageSet=new XFAObjectArray();_this148.para=new XFAObjectArray();_this148.passwordEdit=new XFAObjectArray();_this148.pattern=new XFAObjectArray();_this148.picture=new XFAObjectArray();_this148.radial=new XFAObjectArray();_this148.reason=new XFAObjectArray();_this148.reasons=new XFAObjectArray();_this148.rectangle=new XFAObjectArray();_this148.ref=new XFAObjectArray();_this148.script=new XFAObjectArray();_this148.setProperty=new XFAObjectArray();_this148.signData=new XFAObjectArray();_this148.signature=new XFAObjectArray();_this148.signing=new XFAObjectArray();_this148.solid=new XFAObjectArray();_this148.speak=new XFAObjectArray();_this148.stipple=new XFAObjectArray();_this148.subform=new XFAObjectArray();_this148.subformSet=new XFAObjectArray();_this148.subjectDN=new XFAObjectArray();_this148.subjectDNs=new XFAObjectArray();_this148.submit=new XFAObjectArray();_this148.text=new XFAObjectArray();_this148.textEdit=new XFAObjectArray();_this148.time=new XFAObjectArray();_this148.timeStamp=new XFAObjectArray();_this148.toolTip=new XFAObjectArray();_this148.traversal=new XFAObjectArray();_this148.traverse=new XFAObjectArray();_this148.ui=new XFAObjectArray();_this148.validate=new XFAObjectArray();_this148.value=new XFAObjectArray();_this148.variables=new XFAObjectArray();return _this148;}_inherits(Proto,_XFAObject68);return _createClass(Proto);}(XFAObject);var Radial=/*#__PURE__*/function(_XFAObject69){function Radial(attributes){var _this149;_classCallCheck(this,Radial);_this149=_callSuper(this,Radial,[TEMPLATE_NS_ID,"radial",true]);_this149.id=attributes.id||"";_this149.type=getStringOption(attributes.type,["toEdge","toCenter"]);_this149.use=attributes.use||"";_this149.usehref=attributes.usehref||"";_this149.color=null;_this149.extras=null;return _this149;}_inherits(Radial,_XFAObject69);return _createClass(Radial,[{key:$toStyle,value:function value(startColor){startColor=startColor?startColor[$toStyle]():"#FFFFFF";var endColor=this.color?this.color[$toStyle]():"#000000";var colors=this.type==="toEdge"?"".concat(startColor,",").concat(endColor):"".concat(endColor,",").concat(startColor);return"radial-gradient(circle at center, ".concat(colors,")");}}]);}(XFAObject);var Reason=/*#__PURE__*/function(_StringObject7){function Reason(attributes){var _this150;_classCallCheck(this,Reason);_this150=_callSuper(this,Reason,[TEMPLATE_NS_ID,"reason"]);_this150.id=attributes.id||"";_this150.name=attributes.name||"";_this150.use=attributes.use||"";_this150.usehref=attributes.usehref||"";return _this150;}_inherits(Reason,_StringObject7);return _createClass(Reason);}(StringObject);var Reasons=/*#__PURE__*/function(_XFAObject70){function Reasons(attributes){var _this151;_classCallCheck(this,Reasons);_this151=_callSuper(this,Reasons,[TEMPLATE_NS_ID,"reasons",true]);_this151.id=attributes.id||"";_this151.type=getStringOption(attributes.type,["optional","required"]);_this151.use=attributes.use||"";_this151.usehref=attributes.usehref||"";_this151.reason=new XFAObjectArray();return _this151;}_inherits(Reasons,_XFAObject70);return _createClass(Reasons);}(XFAObject);var Rectangle=/*#__PURE__*/function(_XFAObject71){function Rectangle(attributes){var _this152;_classCallCheck(this,Rectangle);_this152=_callSuper(this,Rectangle,[TEMPLATE_NS_ID,"rectangle",true]);_this152.hand=getStringOption(attributes.hand,["even","left","right"]);_this152.id=attributes.id||"";_this152.use=attributes.use||"";_this152.usehref=attributes.usehref||"";_this152.corner=new XFAObjectArray(4);_this152.edge=new XFAObjectArray(4);_this152.fill=null;return _this152;}_inherits(Rectangle,_XFAObject71);return _createClass(Rectangle,[{key:$toHTML,value:function value(){var _this$fill3;var edge=this.edge.children.length?this.edge.children[0]:new Edge({});var edgeStyle=edge[$toStyle]();var style=Object.create(null);if(((_this$fill3=this.fill)===null||_this$fill3===void 0?void 0:_this$fill3.presence)==="visible"){Object.assign(style,this.fill[$toStyle]());}else{style.fill="transparent";}style.strokeWidth=measureToString(edge.presence==="visible"?edge.thickness:0);style.stroke=edgeStyle.color;var corner=this.corner.children.length?this.corner.children[0]:new Corner({});var cornerStyle=corner[$toStyle]();var rect={name:"rect",attributes:{xmlns:SVG_NS,width:"100%",height:"100%",x:0,y:0,rx:cornerStyle.radius,ry:cornerStyle.radius,style:style}};var svg={name:"svg",children:[rect],attributes:{xmlns:SVG_NS,style:{overflow:"visible"},width:"100%",height:"100%"}};var parent=this[$getParent]()[$getParent]();if(hasMargin(parent)){return HTMLResult.success({name:"div",attributes:{style:{display:"inline",width:"100%",height:"100%"}},children:[svg]});}svg.attributes.style.position="absolute";return HTMLResult.success(svg);}}]);}(XFAObject);var RefElement=/*#__PURE__*/function(_StringObject8){function RefElement(attributes){var _this153;_classCallCheck(this,RefElement);_this153=_callSuper(this,RefElement,[TEMPLATE_NS_ID,"ref"]);_this153.id=attributes.id||"";_this153.use=attributes.use||"";_this153.usehref=attributes.usehref||"";return _this153;}_inherits(RefElement,_StringObject8);return _createClass(RefElement);}(StringObject);var Script=/*#__PURE__*/function(_StringObject9){function Script(attributes){var _this154;_classCallCheck(this,Script);_this154=_callSuper(this,Script,[TEMPLATE_NS_ID,"script"]);_this154.binding=attributes.binding||"";_this154.contentType=attributes.contentType||"";_this154.id=attributes.id||"";_this154.name=attributes.name||"";_this154.runAt=getStringOption(attributes.runAt,["client","both","server"]);_this154.use=attributes.use||"";_this154.usehref=attributes.usehref||"";return _this154;}_inherits(Script,_StringObject9);return _createClass(Script);}(StringObject);var SetProperty=/*#__PURE__*/function(_XFAObject72){function SetProperty(attributes){var _this155;_classCallCheck(this,SetProperty);_this155=_callSuper(this,SetProperty,[TEMPLATE_NS_ID,"setProperty"]);_this155.connection=attributes.connection||"";_this155.ref=attributes.ref||"";_this155.target=attributes.target||"";return _this155;}_inherits(SetProperty,_XFAObject72);return _createClass(SetProperty);}(XFAObject);var SignData=/*#__PURE__*/function(_XFAObject73){function SignData(attributes){var _this156;_classCallCheck(this,SignData);_this156=_callSuper(this,SignData,[TEMPLATE_NS_ID,"signData",true]);_this156.id=attributes.id||"";_this156.operation=getStringOption(attributes.operation,["sign","clear","verify"]);_this156.ref=attributes.ref||"";_this156.target=attributes.target||"";_this156.use=attributes.use||"";_this156.usehref=attributes.usehref||"";_this156.filter=null;_this156.manifest=null;return _this156;}_inherits(SignData,_XFAObject73);return _createClass(SignData);}(XFAObject);var Signature=/*#__PURE__*/function(_XFAObject74){function Signature(attributes){var _this157;_classCallCheck(this,Signature);_this157=_callSuper(this,Signature,[TEMPLATE_NS_ID,"signature",true]);_this157.id=attributes.id||"";_this157.type=getStringOption(attributes.type,["PDF1.3","PDF1.6"]);_this157.use=attributes.use||"";_this157.usehref=attributes.usehref||"";_this157.border=null;_this157.extras=null;_this157.filter=null;_this157.manifest=null;_this157.margin=null;return _this157;}_inherits(Signature,_XFAObject74);return _createClass(Signature);}(XFAObject);var Signing=/*#__PURE__*/function(_XFAObject75){function Signing(attributes){var _this158;_classCallCheck(this,Signing);_this158=_callSuper(this,Signing,[TEMPLATE_NS_ID,"signing",true]);_this158.id=attributes.id||"";_this158.type=getStringOption(attributes.type,["optional","required"]);_this158.use=attributes.use||"";_this158.usehref=attributes.usehref||"";_this158.certificate=new XFAObjectArray();return _this158;}_inherits(Signing,_XFAObject75);return _createClass(Signing);}(XFAObject);var Solid=/*#__PURE__*/function(_XFAObject76){function Solid(attributes){var _this159;_classCallCheck(this,Solid);_this159=_callSuper(this,Solid,[TEMPLATE_NS_ID,"solid",true]);_this159.id=attributes.id||"";_this159.use=attributes.use||"";_this159.usehref=attributes.usehref||"";_this159.extras=null;return _this159;}_inherits(Solid,_XFAObject76);return _createClass(Solid,[{key:$toStyle,value:function value(startColor){return startColor?startColor[$toStyle]():"#FFFFFF";}}]);}(XFAObject);var Speak=/*#__PURE__*/function(_StringObject10){function Speak(attributes){var _this160;_classCallCheck(this,Speak);_this160=_callSuper(this,Speak,[TEMPLATE_NS_ID,"speak"]);_this160.disable=getInteger({data:attributes.disable,defaultValue:0,validate:function validate(x){return x===1;}});_this160.id=attributes.id||"";_this160.priority=getStringOption(attributes.priority,["custom","caption","name","toolTip"]);_this160.rid=attributes.rid||"";_this160.use=attributes.use||"";_this160.usehref=attributes.usehref||"";return _this160;}_inherits(Speak,_StringObject10);return _createClass(Speak);}(StringObject);var Stipple=/*#__PURE__*/function(_XFAObject77){function Stipple(attributes){var _this161;_classCallCheck(this,Stipple);_this161=_callSuper(this,Stipple,[TEMPLATE_NS_ID,"stipple",true]);_this161.id=attributes.id||"";_this161.rate=getInteger({data:attributes.rate,defaultValue:50,validate:function validate(x){return x>=0&&x<=100;}});_this161.use=attributes.use||"";_this161.usehref=attributes.usehref||"";_this161.color=null;_this161.extras=null;return _this161;}_inherits(Stipple,_XFAObject77);return _createClass(Stipple,[{key:$toStyle,value:function value(bgColor){var alpha=this.rate/100;return Util.makeHexColor(Math.round(bgColor.value.r*(1-alpha)+this.value.r*alpha),Math.round(bgColor.value.g*(1-alpha)+this.value.g*alpha),Math.round(bgColor.value.b*(1-alpha)+this.value.b*alpha));}}]);}(XFAObject);var Subform=/*#__PURE__*/function(_XFAObject78){function Subform(attributes){var _this162;_classCallCheck(this,Subform);_this162=_callSuper(this,Subform,[TEMPLATE_NS_ID,"subform",true]);_this162.access=getStringOption(attributes.access,["open","nonInteractive","protected","readOnly"]);_this162.allowMacro=getInteger({data:attributes.allowMacro,defaultValue:0,validate:function validate(x){return x===1;}});_this162.anchorType=getStringOption(attributes.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]);_this162.colSpan=getInteger({data:attributes.colSpan,defaultValue:1,validate:function validate(n){return n>=1||n===-1;}});_this162.columnWidths=(attributes.columnWidths||"").trim().split(/\\s+/).map(function(x){return x==="-1"?-1:getMeasurement(x);});_this162.h=attributes.h?getMeasurement(attributes.h):"";_this162.hAlign=getStringOption(attributes.hAlign,["left","center","justify","justifyAll","radix","right"]);_this162.id=attributes.id||"";_this162.layout=getStringOption(attributes.layout,["position","lr-tb","rl-row","rl-tb","row","table","tb"]);_this162.locale=attributes.locale||"";_this162.maxH=getMeasurement(attributes.maxH,"0pt");_this162.maxW=getMeasurement(attributes.maxW,"0pt");_this162.mergeMode=getStringOption(attributes.mergeMode,["consumeData","matchTemplate"]);_this162.minH=getMeasurement(attributes.minH,"0pt");_this162.minW=getMeasurement(attributes.minW,"0pt");_this162.name=attributes.name||"";_this162.presence=getStringOption(attributes.presence,["visible","hidden","inactive","invisible"]);_this162.relevant=getRelevant(attributes.relevant);_this162.restoreState=getStringOption(attributes.restoreState,["manual","auto"]);_this162.scope=getStringOption(attributes.scope,["name","none"]);_this162.use=attributes.use||"";_this162.usehref=attributes.usehref||"";_this162.w=attributes.w?getMeasurement(attributes.w):"";_this162.x=getMeasurement(attributes.x,"0pt");_this162.y=getMeasurement(attributes.y,"0pt");_this162.assist=null;_this162.bind=null;_this162.bookend=null;_this162.border=null;_this162["break"]=null;_this162.calculate=null;_this162.desc=null;_this162.extras=null;_this162.keep=null;_this162.margin=null;_this162.occur=null;_this162.overflow=null;_this162.pageSet=null;_this162.para=null;_this162.traversal=null;_this162.validate=null;_this162.variables=null;_this162.area=new XFAObjectArray();_this162.breakAfter=new XFAObjectArray();_this162.breakBefore=new XFAObjectArray();_this162.connect=new XFAObjectArray();_this162.draw=new XFAObjectArray();_this162.event=new XFAObjectArray();_this162.exObject=new XFAObjectArray();_this162.exclGroup=new XFAObjectArray();_this162.field=new XFAObjectArray();_this162.proto=new XFAObjectArray();_this162.setProperty=new XFAObjectArray();_this162.subform=new XFAObjectArray();_this162.subformSet=new XFAObjectArray();return _this162;}_inherits(Subform,_XFAObject78);return _createClass(Subform,[{key:$getSubformParent,value:function value(){var parent=this[$getParent]();if(parent instanceof SubformSet){return parent[$getSubformParent]();}return parent;}},{key:$isBindable,value:function value(){return true;}},{key:$isThereMoreWidth,value:function value(){return this.layout.endsWith("-tb")&&this[$extra].attempt===0&&this[$extra].numberInLine>0||this[$getParent]()[$isThereMoreWidth]();}},{key:$getContainedChildren,value:/*#__PURE__*/_regeneratorRuntime().mark(function value(){return _regeneratorRuntime().wrap(function value$(_context65){while(1)switch(_context65.prev=_context65.next){case 0:return _context65.delegateYield(getContainedChildren(this),"t0",1);case 1:case"end":return _context65.stop();}},value,this);})},{key:$flushHTML,value:function value(){return flushHTML(this);}},{key:$addHTML,value:function value(html,bbox){addHTML(this,html,bbox);}},{key:$getAvailableSpace,value:function value(){return getAvailableSpace(this);}},{key:$isSplittable,value:function value(){var _parent$layout4;var parent=this[$getSubformParent]();if(!parent[$isSplittable]()){return false;}if(this[$extra]._isSplittable!==undefined){return this[$extra]._isSplittable;}if(this.layout==="position"||this.layout.includes("row")){this[$extra]._isSplittable=false;return false;}if(this.keep&&this.keep.intact!=="none"){this[$extra]._isSplittable=false;return false;}if((_parent$layout4=parent.layout)!==null&&_parent$layout4!==void 0&&_parent$layout4.endsWith("-tb")&&parent[$extra].numberInLine!==0){return false;}this[$extra]._isSplittable=true;return true;}},{key:$toHTML,value:function value(availableSpace){var _this$$extra;setTabIndex(this);if(this["break"]){if(this["break"].after!=="auto"||this["break"].afterTarget!==""){var node=new BreakAfter({targetType:this["break"].after,target:this["break"].afterTarget,startNew:this["break"].startNew.toString()});node[$globalData]=this[$globalData];this[$appendChild](node);this.breakAfter.push(node);}if(this["break"].before!=="auto"||this["break"].beforeTarget!==""){var _node=new BreakBefore({targetType:this["break"].before,target:this["break"].beforeTarget,startNew:this["break"].startNew.toString()});_node[$globalData]=this[$globalData];this[$appendChild](_node);this.breakBefore.push(_node);}if(this["break"].overflowTarget!==""){var _node2=new Overflow({target:this["break"].overflowTarget,leader:this["break"].overflowLeader,trailer:this["break"].overflowTrailer});_node2[$globalData]=this[$globalData];this[$appendChild](_node2);this.overflow.push(_node2);}this[$removeChild](this["break"]);this["break"]=null;}if(this.presence==="hidden"||this.presence==="inactive"){return HTMLResult.EMPTY;}if(this.breakBefore.children.length>1||this.breakAfter.children.length>1){warn("XFA - Several breakBefore or breakAfter in subforms: please file a bug.");}if(this.breakBefore.children.length>=1){var breakBefore=this.breakBefore.children[0];if(handleBreak(breakBefore)){return HTMLResult.breakNode(breakBefore);}}if((_this$$extra=this[$extra])!==null&&_this$$extra!==void 0&&_this$$extra.afterBreakAfter){return HTMLResult.EMPTY;}fixDimensions(this);var children=[];var attributes={id:this[$uid],"class":[]};setAccess(this,attributes["class"]);if(!this[$extra]){this[$extra]=Object.create(null);}Object.assign(this[$extra],{children:children,line:null,attributes:attributes,attempt:0,numberInLine:0,availableSpace:{width:Math.min(this.w||Infinity,availableSpace.width),height:Math.min(this.h||Infinity,availableSpace.height)},width:0,height:0,prevHeight:0,currentWidth:0});var root=this[$getTemplateRoot]();var savedNoLayoutFailure=root[$extra].noLayoutFailure;var isSplittable=this[$isSplittable]();if(!isSplittable){setFirstUnsplittable(this);}if(!checkDimensions(this,availableSpace)){return HTMLResult.FAILURE;}var filter=new Set(["area","draw","exclGroup","field","subform","subformSet"]);if(this.layout.includes("row")){var columnWidths=this[$getSubformParent]().columnWidths;if(Array.isArray(columnWidths)&&columnWidths.length>0){this[$extra].columnWidths=columnWidths;this[$extra].currentColumn=0;}}var style=toStyle(this,"anchorType","dimensions","position","presence","border","margin","hAlign");var classNames=["xfaSubform"];var cl=layoutClass(this);if(cl){classNames.push(cl);}attributes.style=style;attributes["class"]=classNames;if(this.name){attributes.xfaName=this.name;}if(this.overflow){var overflowExtra=this.overflow[$getExtra]();if(overflowExtra.addLeader){overflowExtra.addLeader=false;handleOverflow(this,overflowExtra.leader,availableSpace);}}this[$pushPara]();var isLrTb=this.layout==="lr-tb"||this.layout==="rl-tb";var maxRun=isLrTb?MAX_ATTEMPTS_FOR_LRTB_LAYOUT:1;for(;this[$extra].attempt<maxRun;this[$extra].attempt++){if(isLrTb&&this[$extra].attempt===MAX_ATTEMPTS_FOR_LRTB_LAYOUT-1){this[$extra].numberInLine=0;}var _result2=this[$childrenToHTML]({filter:filter,include:true});if(_result2.success){break;}if(_result2.isBreak()){this[$popPara]();return _result2;}if(isLrTb&&this[$extra].attempt===0&&this[$extra].numberInLine===0&&!root[$extra].noLayoutFailure){this[$extra].attempt=maxRun;break;}}this[$popPara]();if(!isSplittable){unsetFirstUnsplittable(this);}root[$extra].noLayoutFailure=savedNoLayoutFailure;if(this[$extra].attempt===maxRun){if(this.overflow){this[$getTemplateRoot]()[$extra].overflowNode=this.overflow;}if(!isSplittable){delete this[$extra];}return HTMLResult.FAILURE;}if(this.overflow){var _overflowExtra=this.overflow[$getExtra]();if(_overflowExtra.addTrailer){_overflowExtra.addTrailer=false;handleOverflow(this,_overflowExtra.trailer,availableSpace);}}var marginH=0;var marginV=0;if(this.margin){marginH=this.margin.leftInset+this.margin.rightInset;marginV=this.margin.topInset+this.margin.bottomInset;}var width=Math.max(this[$extra].width+marginH,this.w||0);var height=Math.max(this[$extra].height+marginV,this.h||0);var bbox=[this.x,this.y,width,height];if(this.w===""){style.width=measureToString(width);}if(this.h===""){style.height=measureToString(height);}if((style.width==="0px"||style.height==="0px")&&children.length===0){return HTMLResult.EMPTY;}var html={name:"div",attributes:attributes,children:children};applyAssist(this,attributes);var result=HTMLResult.success(createWrapper(this,html),bbox);if(this.breakAfter.children.length>=1){var breakAfter=this.breakAfter.children[0];if(handleBreak(breakAfter)){this[$extra].afterBreakAfter=result;return HTMLResult.breakNode(breakAfter);}}delete this[$extra];return result;}}]);}(XFAObject);var SubformSet=/*#__PURE__*/function(_XFAObject79){function SubformSet(attributes){var _this163;_classCallCheck(this,SubformSet);_this163=_callSuper(this,SubformSet,[TEMPLATE_NS_ID,"subformSet",true]);_this163.id=attributes.id||"";_this163.name=attributes.name||"";_this163.relation=getStringOption(attributes.relation,["ordered","choice","unordered"]);_this163.relevant=getRelevant(attributes.relevant);_this163.use=attributes.use||"";_this163.usehref=attributes.usehref||"";_this163.bookend=null;_this163["break"]=null;_this163.desc=null;_this163.extras=null;_this163.occur=null;_this163.overflow=null;_this163.breakAfter=new XFAObjectArray();_this163.breakBefore=new XFAObjectArray();_this163.subform=new XFAObjectArray();_this163.subformSet=new XFAObjectArray();return _this163;}_inherits(SubformSet,_XFAObject79);return _createClass(SubformSet,[{key:$getContainedChildren,value:/*#__PURE__*/_regeneratorRuntime().mark(function value(){return _regeneratorRuntime().wrap(function value$(_context66){while(1)switch(_context66.prev=_context66.next){case 0:return _context66.delegateYield(getContainedChildren(this),"t0",1);case 1:case"end":return _context66.stop();}},value,this);})},{key:$getSubformParent,value:function value(){var parent=this[$getParent]();while(!(parent instanceof Subform)){parent=parent[$getParent]();}return parent;}},{key:$isBindable,value:function value(){return true;}}]);}(XFAObject);var SubjectDN=/*#__PURE__*/function(_ContentObject11){function SubjectDN(attributes){var _this164;_classCallCheck(this,SubjectDN);_this164=_callSuper(this,SubjectDN,[TEMPLATE_NS_ID,"subjectDN"]);_this164.delimiter=attributes.delimiter||",";_this164.id=attributes.id||"";_this164.name=attributes.name||"";_this164.use=attributes.use||"";_this164.usehref=attributes.usehref||"";return _this164;}_inherits(SubjectDN,_ContentObject11);return _createClass(SubjectDN,[{key:$finalize,value:function value(){this[$content]=new Map(this[$content].split(this.delimiter).map(function(kv){kv=kv.split("=",2);kv[0]=kv[0].trim();return kv;}));}}]);}(ContentObject);var SubjectDNs=/*#__PURE__*/function(_XFAObject80){function SubjectDNs(attributes){var _this165;_classCallCheck(this,SubjectDNs);_this165=_callSuper(this,SubjectDNs,[TEMPLATE_NS_ID,"subjectDNs",true]);_this165.id=attributes.id||"";_this165.type=getStringOption(attributes.type,["optional","required"]);_this165.use=attributes.use||"";_this165.usehref=attributes.usehref||"";_this165.subjectDN=new XFAObjectArray();return _this165;}_inherits(SubjectDNs,_XFAObject80);return _createClass(SubjectDNs);}(XFAObject);var Submit=/*#__PURE__*/function(_XFAObject81){function Submit(attributes){var _this166;_classCallCheck(this,Submit);_this166=_callSuper(this,Submit,[TEMPLATE_NS_ID,"submit",true]);_this166.embedPDF=getInteger({data:attributes.embedPDF,defaultValue:0,validate:function validate(x){return x===1;}});_this166.format=getStringOption(attributes.format,["xdp","formdata","pdf","urlencoded","xfd","xml"]);_this166.id=attributes.id||"";_this166.target=attributes.target||"";_this166.textEncoding=getKeyword({data:attributes.textEncoding?attributes.textEncoding.toLowerCase():"",defaultValue:"",validate:function validate(k){return["utf-8","big-five","fontspecific","gbk","gb-18030","gb-2312","ksc-5601","none","shift-jis","ucs-2","utf-16"].includes(k)||k.match(/iso-8859-\\d{2}/);}});_this166.use=attributes.use||"";_this166.usehref=attributes.usehref||"";_this166.xdpContent=attributes.xdpContent||"";_this166.encrypt=null;_this166.encryptData=new XFAObjectArray();_this166.signData=new XFAObjectArray();return _this166;}_inherits(Submit,_XFAObject81);return _createClass(Submit);}(XFAObject);var Template=/*#__PURE__*/function(_XFAObject82){function Template(attributes){var _this167;_classCallCheck(this,Template);_this167=_callSuper(this,Template,[TEMPLATE_NS_ID,"template",true]);_this167.baseProfile=getStringOption(attributes.baseProfile,["full","interactiveForms"]);_this167.extras=null;_this167.subform=new XFAObjectArray();return _this167;}_inherits(Template,_XFAObject82);return _createClass(Template,[{key:$finalize,value:function value(){if(this.subform.children.length===0){warn("XFA - No subforms in template node.");}if(this.subform.children.length>=2){warn("XFA - Several subforms in template node: please file a bug.");}this[$tabIndex]=DEFAULT_TAB_INDEX;}},{key:$isSplittable,value:function value(){return true;}},{key:$searchNode,value:function value(expr,container){if(expr.startsWith("#")){return[this[$ids].get(expr.slice(1))];}return searchNode(this,container,expr,true,true);}},{key:$toPages,value:/*#__PURE__*/_regeneratorRuntime().mark(function value(){var _root$break,_root$subform$childre,_this168=this;var root,pageAreas,mainHtml,pageArea,breakBefore,breakBeforeTarget,target,pageAreaParent,targetPageArea,leader,trailer,hasSomething,hasSomethingCounter,startIndex,_loop5,_ret3;return _regeneratorRuntime().wrap(function value$(_context68){while(1)switch(_context68.prev=_context68.next){case 0:if(this.subform.children.length){_context68.next=2;break;}return _context68.abrupt("return",HTMLResult.success({name:"div",children:[]}));case 2:this[$extra]={overflowNode:null,firstUnsplittable:null,currentContentArea:null,currentPageArea:null,noLayoutFailure:false,pageNumber:1,pagePosition:"first",oddOrEven:"odd",blankOrNotBlank:"nonBlank",paraStack:[]};root=this.subform.children[0];root.pageSet[$cleanPage]();pageAreas=root.pageSet.pageArea.children;mainHtml={name:"div",children:[]};pageArea=null;breakBefore=null;breakBeforeTarget=null;if(root.breakBefore.children.length>=1){breakBefore=root.breakBefore.children[0];breakBeforeTarget=breakBefore.target;}else if(root.subform.children.length>=1&&root.subform.children[0].breakBefore.children.length>=1){breakBefore=root.subform.children[0].breakBefore.children[0];breakBeforeTarget=breakBefore.target;}else if((_root$break=root["break"])!==null&&_root$break!==void 0&&_root$break.beforeTarget){breakBefore=root["break"];breakBeforeTarget=breakBefore.beforeTarget;}else if(root.subform.children.length>=1&&(_root$subform$childre=root.subform.children[0]["break"])!==null&&_root$subform$childre!==void 0&&_root$subform$childre.beforeTarget){breakBefore=root.subform.children[0]["break"];breakBeforeTarget=breakBefore.beforeTarget;}if(breakBefore){target=this[$searchNode](breakBeforeTarget,breakBefore[$getParent]());if(target instanceof PageArea){pageArea=target;breakBefore[$extra]={};}}if(!pageArea){pageArea=pageAreas[0];}pageArea[$extra]={numberOfUse:1};pageAreaParent=pageArea[$getParent]();pageAreaParent[$extra]={numberOfUse:1,pageIndex:pageAreaParent.pageArea.children.indexOf(pageArea),pageSetIndex:0};leader=null;trailer=null;hasSomething=true;hasSomethingCounter=0;startIndex=0;_loop5=/*#__PURE__*/_regeneratorRuntime().mark(function _loop5(){var page,contentAreas,htmlContentAreas,flush,i,ii,contentArea,space,html,_html$html$children,node,_node3,overflowExtra,_target,currentIndex,index;return _regeneratorRuntime().wrap(function _loop5$(_context67){while(1)switch(_context67.prev=_context67.next){case 0:if(hasSomething){_context67.next=7;break;}mainHtml.children.pop();if(!(++hasSomethingCounter===MAX_EMPTY_PAGES)){_context67.next=5;break;}warn("XFA - Something goes wrong: please file a bug.");return _context67.abrupt("return",{v:mainHtml});case 5:_context67.next=8;break;case 7:hasSomethingCounter=0;case 8:targetPageArea=null;_this168[$extra].currentPageArea=pageArea;page=pageArea[$toHTML]().html;mainHtml.children.push(page);if(leader){_this168[$extra].noLayoutFailure=true;page.children.push(leader[$toHTML](pageArea[$extra].space).html);leader=null;}if(trailer){_this168[$extra].noLayoutFailure=true;page.children.push(trailer[$toHTML](pageArea[$extra].space).html);trailer=null;}contentAreas=pageArea.contentArea.children;htmlContentAreas=page.children.filter(function(node){return node.attributes["class"].includes("xfaContentarea");});hasSomething=false;_this168[$extra].firstUnsplittable=null;_this168[$extra].noLayoutFailure=false;flush=function flush(index){var html=root[$flushHTML]();if(html){var _html$children;hasSomething||(hasSomething=((_html$children=html.children)===null||_html$children===void 0?void 0:_html$children.length)>0);htmlContentAreas[index].children.push(html);}};i=startIndex,ii=contentAreas.length;case 21:if(!(i<ii)){_context67.next=56;break;}contentArea=_this168[$extra].currentContentArea=contentAreas[i];space={width:contentArea.w,height:contentArea.h};startIndex=0;if(leader){htmlContentAreas[i].children.push(leader[$toHTML](space).html);leader=null;}if(trailer){htmlContentAreas[i].children.push(trailer[$toHTML](space).html);trailer=null;}html=root[$toHTML](space);if(!html.success){_context67.next=31;break;}if(html.html){hasSomething||(hasSomething=((_html$html$children=html.html.children)===null||_html$html$children===void 0?void 0:_html$html$children.length)>0);htmlContentAreas[i].children.push(html.html);}else if(!hasSomething&&mainHtml.children.length>1){mainHtml.children.pop();}return _context67.abrupt("return",{v:mainHtml});case 31:if(!html.isBreak()){_context67.next=40;break;}node=html.breakNode;flush(i);if(!(node.targetType==="auto")){_context67.next=36;break;}return _context67.abrupt("continue",53);case 36:if(node.leader){leader=_this168[$searchNode](node.leader,node[$getParent]());leader=leader?leader[0]:null;}if(node.trailer){trailer=_this168[$searchNode](node.trailer,node[$getParent]());trailer=trailer?trailer[0]:null;}if(node.targetType==="pageArea"){targetPageArea=node[$extra].target;i=Infinity;}else if(!node[$extra].target){i=node[$extra].index;}else{targetPageArea=node[$extra].target;startIndex=node[$extra].index+1;i=Infinity;}return _context67.abrupt("continue",53);case 40:if(!_this168[$extra].overflowNode){_context67.next=52;break;}_node3=_this168[$extra].overflowNode;_this168[$extra].overflowNode=null;overflowExtra=_node3[$getExtra]();_target=overflowExtra.target;overflowExtra.addLeader=overflowExtra.leader!==null;overflowExtra.addTrailer=overflowExtra.trailer!==null;flush(i);currentIndex=i;i=Infinity;if(_target instanceof PageArea){targetPageArea=_target;}else if(_target instanceof ContentArea){index=contentAreas.indexOf(_target);if(index!==-1){if(index>currentIndex){i=index-1;}else{startIndex=index;}}else{targetPageArea=_target[$getParent]();startIndex=targetPageArea.contentArea.children.indexOf(_target);}}return _context67.abrupt("continue",53);case 52:flush(i);case 53:i++;_context67.next=21;break;case 56:_this168[$extra].pageNumber+=1;if(targetPageArea){if(targetPageArea[$isUsable]()){targetPageArea[$extra].numberOfUse+=1;}else{targetPageArea=null;}}pageArea=targetPageArea||pageArea[$getNextPage]();_context67.next=61;return null;case 61:case"end":return _context67.stop();}},_loop5);});case 22:if(false){}return _context68.delegateYield(_loop5(),"t0",24);case 24:_ret3=_context68.t0;if(!_ret3){_context68.next=27;break;}return _context68.abrupt("return",_ret3.v);case 27:_context68.next=22;break;case 29:case"end":return _context68.stop();}},value,this);})}]);}(XFAObject);var Text=/*#__PURE__*/function(_ContentObject12){function Text(attributes){var _this169;_classCallCheck(this,Text);_this169=_callSuper(this,Text,[TEMPLATE_NS_ID,"text"]);_this169.id=attributes.id||"";_this169.maxChars=getInteger({data:attributes.maxChars,defaultValue:0,validate:function validate(x){return x>=0;}});_this169.name=attributes.name||"";_this169.rid=attributes.rid||"";_this169.use=attributes.use||"";_this169.usehref=attributes.usehref||"";return _this169;}_inherits(Text,_ContentObject12);return _createClass(Text,[{key:$acceptWhitespace,value:function value(){return true;}},{key:$onChild,value:function value(child){if(child[$namespaceId]===NamespaceIds.xhtml.id){this[$content]=child;return true;}warn("XFA - Invalid content in Text: ".concat(child[$nodeName],"."));return false;}},{key:$onText,value:function value(str){if(this[$content]instanceof XFAObject){return;}_superPropGet(Text,$onText,this,3)([str]);}},{key:$finalize,value:function value(){if(typeof this[$content]==="string"){this[$content]=this[$content].replaceAll("\\r\\n","\\n");}}},{key:$getExtra,value:function value(){if(typeof this[$content]==="string"){return this[$content].split(/[\\u2029\\u2028\\n]/).reduce(function(acc,line){if(line){acc.push(line);}return acc;},[]).join("\\n");}return this[$content][$text]();}},{key:$toHTML,value:function value(availableSpace){if(typeof this[$content]==="string"){var html=valueToHtml(this[$content]).html;if(this[$content].includes("\\u2029")){html.name="div";html.children=[];this[$content].split("\\u2029").map(function(para){return para.split(/[\\u2028\\n]/).reduce(function(acc,line){acc.push({name:"span",value:line},{name:"br"});return acc;},[]);}).forEach(function(lines){html.children.push({name:"p",children:lines});});}else if(/[\\u2028\\n]/.test(this[$content])){html.name="div";html.children=[];this[$content].split(/[\\u2028\\n]/).forEach(function(line){html.children.push({name:"span",value:line},{name:"br"});});}return HTMLResult.success(html);}return this[$content][$toHTML](availableSpace);}}]);}(ContentObject);var TextEdit=/*#__PURE__*/function(_XFAObject83){function TextEdit(attributes){var _this170;_classCallCheck(this,TextEdit);_this170=_callSuper(this,TextEdit,[TEMPLATE_NS_ID,"textEdit",true]);_this170.allowRichText=getInteger({data:attributes.allowRichText,defaultValue:0,validate:function validate(x){return x===1;}});_this170.hScrollPolicy=getStringOption(attributes.hScrollPolicy,["auto","off","on"]);_this170.id=attributes.id||"";_this170.multiLine=getInteger({data:attributes.multiLine,defaultValue:"",validate:function validate(x){return x===0||x===1;}});_this170.use=attributes.use||"";_this170.usehref=attributes.usehref||"";_this170.vScrollPolicy=getStringOption(attributes.vScrollPolicy,["auto","off","on"]);_this170.border=null;_this170.comb=null;_this170.extras=null;_this170.margin=null;return _this170;}_inherits(TextEdit,_XFAObject83);return _createClass(TextEdit,[{key:$toHTML,value:function value(availableSpace){var style=toStyle(this,"border","font","margin");var html;var field=this[$getParent]()[$getParent]();if(this.multiLine===""){this.multiLine=field instanceof Draw?1:0;}if(this.multiLine===1){var _field$$data5;html={name:"textarea",attributes:{dataId:((_field$$data5=field[$data])===null||_field$$data5===void 0?void 0:_field$$data5[$uid])||field[$uid],fieldId:field[$uid],"class":["xfaTextfield"],style:style,"aria-label":ariaLabel(field),"aria-required":false}};}else{var _field$$data6;html={name:"input",attributes:{type:"text",dataId:((_field$$data6=field[$data])===null||_field$$data6===void 0?void 0:_field$$data6[$uid])||field[$uid],fieldId:field[$uid],"class":["xfaTextfield"],style:style,"aria-label":ariaLabel(field),"aria-required":false}};}if(isRequired(field)){html.attributes["aria-required"]=true;html.attributes.required=true;}return HTMLResult.success({name:"label",attributes:{"class":["xfaLabel"]},children:[html]});}}]);}(XFAObject);var Time=/*#__PURE__*/function(_StringObject11){function Time(attributes){var _this171;_classCallCheck(this,Time);_this171=_callSuper(this,Time,[TEMPLATE_NS_ID,"time"]);_this171.id=attributes.id||"";_this171.name=attributes.name||"";_this171.use=attributes.use||"";_this171.usehref=attributes.usehref||"";return _this171;}_inherits(Time,_StringObject11);return _createClass(Time,[{key:$finalize,value:function value(){var date=this[$content].trim();this[$content]=date?new Date(date):null;}},{key:$toHTML,value:function value(availableSpace){return valueToHtml(this[$content]?this[$content].toString():"");}}]);}(StringObject);var TimeStamp=/*#__PURE__*/function(_XFAObject84){function TimeStamp(attributes){var _this172;_classCallCheck(this,TimeStamp);_this172=_callSuper(this,TimeStamp,[TEMPLATE_NS_ID,"timeStamp"]);_this172.id=attributes.id||"";_this172.server=attributes.server||"";_this172.type=getStringOption(attributes.type,["optional","required"]);_this172.use=attributes.use||"";_this172.usehref=attributes.usehref||"";return _this172;}_inherits(TimeStamp,_XFAObject84);return _createClass(TimeStamp);}(XFAObject);var ToolTip=/*#__PURE__*/function(_StringObject12){function ToolTip(attributes){var _this173;_classCallCheck(this,ToolTip);_this173=_callSuper(this,ToolTip,[TEMPLATE_NS_ID,"toolTip"]);_this173.id=attributes.id||"";_this173.rid=attributes.rid||"";_this173.use=attributes.use||"";_this173.usehref=attributes.usehref||"";return _this173;}_inherits(ToolTip,_StringObject12);return _createClass(ToolTip);}(StringObject);var Traversal=/*#__PURE__*/function(_XFAObject85){function Traversal(attributes){var _this174;_classCallCheck(this,Traversal);_this174=_callSuper(this,Traversal,[TEMPLATE_NS_ID,"traversal",true]);_this174.id=attributes.id||"";_this174.use=attributes.use||"";_this174.usehref=attributes.usehref||"";_this174.extras=null;_this174.traverse=new XFAObjectArray();return _this174;}_inherits(Traversal,_XFAObject85);return _createClass(Traversal);}(XFAObject);var Traverse=/*#__PURE__*/function(_XFAObject86){function Traverse(attributes){var _this175;_classCallCheck(this,Traverse);_this175=_callSuper(this,Traverse,[TEMPLATE_NS_ID,"traverse",true]);_this175.id=attributes.id||"";_this175.operation=getStringOption(attributes.operation,["next","back","down","first","left","right","up"]);_this175.ref=attributes.ref||"";_this175.use=attributes.use||"";_this175.usehref=attributes.usehref||"";_this175.extras=null;_this175.script=null;return _this175;}_inherits(Traverse,_XFAObject86);return _createClass(Traverse,[{key:"name",get:function get(){return this.operation;}},{key:$isTransparent,value:function value(){return false;}}]);}(XFAObject);var Ui=/*#__PURE__*/function(_XFAObject87){function Ui(attributes){var _this176;_classCallCheck(this,Ui);_this176=_callSuper(this,Ui,[TEMPLATE_NS_ID,"ui",true]);_this176.id=attributes.id||"";_this176.use=attributes.use||"";_this176.usehref=attributes.usehref||"";_this176.extras=null;_this176.picture=null;_this176.barcode=null;_this176.button=null;_this176.checkButton=null;_this176.choiceList=null;_this176.dateTimeEdit=null;_this176.defaultUi=null;_this176.imageEdit=null;_this176.numericEdit=null;_this176.passwordEdit=null;_this176.signature=null;_this176.textEdit=null;return _this176;}_inherits(Ui,_XFAObject87);return _createClass(Ui,[{key:$getExtra,value:function value(){if(this[$extra]===undefined){var _iterator175=_createForOfIteratorHelper(Object.getOwnPropertyNames(this)),_step175;try{for(_iterator175.s();!(_step175=_iterator175.n()).done;){var name=_step175.value;if(name==="extras"||name==="picture"){continue;}var obj=this[name];if(!(obj instanceof XFAObject)){continue;}this[$extra]=obj;return obj;}}catch(err){_iterator175.e(err);}finally{_iterator175.f();}this[$extra]=null;}return this[$extra];}},{key:$toHTML,value:function value(availableSpace){var obj=this[$getExtra]();if(obj){return obj[$toHTML](availableSpace);}return HTMLResult.EMPTY;}}]);}(XFAObject);var Validate=/*#__PURE__*/function(_XFAObject88){function Validate(attributes){var _this177;_classCallCheck(this,Validate);_this177=_callSuper(this,Validate,[TEMPLATE_NS_ID,"validate",true]);_this177.formatTest=getStringOption(attributes.formatTest,["warning","disabled","error"]);_this177.id=attributes.id||"";_this177.nullTest=getStringOption(attributes.nullTest,["disabled","error","warning"]);_this177.scriptTest=getStringOption(attributes.scriptTest,["error","disabled","warning"]);_this177.use=attributes.use||"";_this177.usehref=attributes.usehref||"";_this177.extras=null;_this177.message=null;_this177.picture=null;_this177.script=null;return _this177;}_inherits(Validate,_XFAObject88);return _createClass(Validate);}(XFAObject);var Value=/*#__PURE__*/function(_XFAObject89){function Value(attributes){var _this178;_classCallCheck(this,Value);_this178=_callSuper(this,Value,[TEMPLATE_NS_ID,"value",true]);_this178.id=attributes.id||"";_this178.override=getInteger({data:attributes.override,defaultValue:0,validate:function validate(x){return x===1;}});_this178.relevant=getRelevant(attributes.relevant);_this178.use=attributes.use||"";_this178.usehref=attributes.usehref||"";_this178.arc=null;_this178["boolean"]=null;_this178.date=null;_this178.dateTime=null;_this178.decimal=null;_this178.exData=null;_this178["float"]=null;_this178.image=null;_this178.integer=null;_this178.line=null;_this178.rectangle=null;_this178.text=null;_this178.time=null;return _this178;}_inherits(Value,_XFAObject89);return _createClass(Value,[{key:$setValue,value:function value(_value10){var parent=this[$getParent]();if(parent instanceof Field){var _parent$ui;if((_parent$ui=parent.ui)!==null&&_parent$ui!==void 0&&_parent$ui.imageEdit){if(!this.image){this.image=new Image({});this[$appendChild](this.image);}this.image[$content]=_value10[$content];return;}}var valueName=_value10[$nodeName];if(this[valueName]!==null){this[valueName][$content]=_value10[$content];return;}var _iterator176=_createForOfIteratorHelper(Object.getOwnPropertyNames(this)),_step176;try{for(_iterator176.s();!(_step176=_iterator176.n()).done;){var name=_step176.value;var obj=this[name];if(obj instanceof XFAObject){this[name]=null;this[$removeChild](obj);}}}catch(err){_iterator176.e(err);}finally{_iterator176.f();}this[_value10[$nodeName]]=_value10;this[$appendChild](_value10);}},{key:$text,value:function value(){if(this.exData){if(typeof this.exData[$content]==="string"){return this.exData[$content].trim();}return this.exData[$content][$text]().trim();}var _iterator177=_createForOfIteratorHelper(Object.getOwnPropertyNames(this)),_step177;try{for(_iterator177.s();!(_step177=_iterator177.n()).done;){var name=_step177.value;if(name==="image"){continue;}var obj=this[name];if(obj instanceof XFAObject){return(obj[$content]||"").toString().trim();}}}catch(err){_iterator177.e(err);}finally{_iterator177.f();}return null;}},{key:$toHTML,value:function value(availableSpace){var _iterator178=_createForOfIteratorHelper(Object.getOwnPropertyNames(this)),_step178;try{for(_iterator178.s();!(_step178=_iterator178.n()).done;){var name=_step178.value;var obj=this[name];if(!(obj instanceof XFAObject)){continue;}return obj[$toHTML](availableSpace);}}catch(err){_iterator178.e(err);}finally{_iterator178.f();}return HTMLResult.EMPTY;}}]);}(XFAObject);var Variables=/*#__PURE__*/function(_XFAObject90){function Variables(attributes){var _this179;_classCallCheck(this,Variables);_this179=_callSuper(this,Variables,[TEMPLATE_NS_ID,"variables",true]);_this179.id=attributes.id||"";_this179.use=attributes.use||"";_this179.usehref=attributes.usehref||"";_this179["boolean"]=new XFAObjectArray();_this179.date=new XFAObjectArray();_this179.dateTime=new XFAObjectArray();_this179.decimal=new XFAObjectArray();_this179.exData=new XFAObjectArray();_this179["float"]=new XFAObjectArray();_this179.image=new XFAObjectArray();_this179.integer=new XFAObjectArray();_this179.manifest=new XFAObjectArray();_this179.script=new XFAObjectArray();_this179.text=new XFAObjectArray();_this179.time=new XFAObjectArray();return _this179;}_inherits(Variables,_XFAObject90);return _createClass(Variables,[{key:$isTransparent,value:function value(){return true;}}]);}(XFAObject);var TemplateNamespace=/*#__PURE__*/function(){function TemplateNamespace(){_classCallCheck(this,TemplateNamespace);}return _createClass(TemplateNamespace,null,[{key:$buildXFAObject,value:function value(name,attributes){if(TemplateNamespace.hasOwnProperty(name)){var node=TemplateNamespace[name](attributes);node[$setSetAttributes](attributes);return node;}return undefined;}},{key:"appearanceFilter",value:function appearanceFilter(attrs){return new AppearanceFilter(attrs);}},{key:"arc",value:function arc(attrs){return new Arc(attrs);}},{key:"area",value:function area(attrs){return new Area(attrs);}},{key:"assist",value:function assist(attrs){return new Assist(attrs);}},{key:"barcode",value:function barcode(attrs){return new Barcode(attrs);}},{key:"bind",value:function bind(attrs){return new Bind(attrs);}},{key:"bindItems",value:function bindItems(attrs){return new BindItems(attrs);}},{key:"bookend",value:function bookend(attrs){return new Bookend(attrs);}},{key:"boolean",value:function _boolean(attrs){return new BooleanElement(attrs);}},{key:"border",value:function border(attrs){return new Border(attrs);}},{key:"break",value:function _break(attrs){return new Break(attrs);}},{key:"breakAfter",value:function breakAfter(attrs){return new BreakAfter(attrs);}},{key:"breakBefore",value:function breakBefore(attrs){return new BreakBefore(attrs);}},{key:"button",value:function button(attrs){return new Button(attrs);}},{key:"calculate",value:function calculate(attrs){return new Calculate(attrs);}},{key:"caption",value:function caption(attrs){return new Caption(attrs);}},{key:"certificate",value:function certificate(attrs){return new Certificate(attrs);}},{key:"certificates",value:function certificates(attrs){return new Certificates(attrs);}},{key:"checkButton",value:function checkButton(attrs){return new CheckButton(attrs);}},{key:"choiceList",value:function choiceList(attrs){return new ChoiceList(attrs);}},{key:"color",value:function color(attrs){return new Color(attrs);}},{key:"comb",value:function comb(attrs){return new Comb(attrs);}},{key:"connect",value:function connect(attrs){return new Connect(attrs);}},{key:"contentArea",value:function contentArea(attrs){return new ContentArea(attrs);}},{key:"corner",value:function corner(attrs){return new Corner(attrs);}},{key:"date",value:function date(attrs){return new DateElement(attrs);}},{key:"dateTime",value:function dateTime(attrs){return new DateTime(attrs);}},{key:"dateTimeEdit",value:function dateTimeEdit(attrs){return new DateTimeEdit(attrs);}},{key:"decimal",value:function decimal(attrs){return new Decimal(attrs);}},{key:"defaultUi",value:function defaultUi(attrs){return new DefaultUi(attrs);}},{key:"desc",value:function desc(attrs){return new Desc(attrs);}},{key:"digestMethod",value:function digestMethod(attrs){return new DigestMethod(attrs);}},{key:"digestMethods",value:function digestMethods(attrs){return new DigestMethods(attrs);}},{key:"draw",value:function draw(attrs){return new Draw(attrs);}},{key:"edge",value:function edge(attrs){return new Edge(attrs);}},{key:"encoding",value:function encoding(attrs){return new Encoding(attrs);}},{key:"encodings",value:function encodings(attrs){return new Encodings(attrs);}},{key:"encrypt",value:function encrypt(attrs){return new Encrypt(attrs);}},{key:"encryptData",value:function encryptData(attrs){return new EncryptData(attrs);}},{key:"encryption",value:function encryption(attrs){return new Encryption(attrs);}},{key:"encryptionMethod",value:function encryptionMethod(attrs){return new EncryptionMethod(attrs);}},{key:"encryptionMethods",value:function encryptionMethods(attrs){return new EncryptionMethods(attrs);}},{key:"event",value:function event(attrs){return new Event(attrs);}},{key:"exData",value:function exData(attrs){return new ExData(attrs);}},{key:"exObject",value:function exObject(attrs){return new ExObject(attrs);}},{key:"exclGroup",value:function exclGroup(attrs){return new ExclGroup(attrs);}},{key:"execute",value:function execute(attrs){return new Execute(attrs);}},{key:"extras",value:function extras(attrs){return new Extras(attrs);}},{key:"field",value:function field(attrs){return new Field(attrs);}},{key:"fill",value:function fill(attrs){return new Fill(attrs);}},{key:"filter",value:function filter(attrs){return new Filter(attrs);}},{key:"float",value:function _float(attrs){return new Float(attrs);}},{key:"font",value:function font(attrs){return new template_Font(attrs);}},{key:"format",value:function format(attrs){return new Format(attrs);}},{key:"handler",value:function handler(attrs){return new Handler(attrs);}},{key:"hyphenation",value:function hyphenation(attrs){return new Hyphenation(attrs);}},{key:"image",value:function image(attrs){return new Image(attrs);}},{key:"imageEdit",value:function imageEdit(attrs){return new ImageEdit(attrs);}},{key:"integer",value:function integer(attrs){return new Integer(attrs);}},{key:"issuers",value:function issuers(attrs){return new Issuers(attrs);}},{key:"items",value:function items(attrs){return new Items(attrs);}},{key:"keep",value:function keep(attrs){return new Keep(attrs);}},{key:"keyUsage",value:function keyUsage(attrs){return new KeyUsage(attrs);}},{key:"line",value:function line(attrs){return new Line(attrs);}},{key:"linear",value:function linear(attrs){return new Linear(attrs);}},{key:"lockDocument",value:function lockDocument(attrs){return new LockDocument(attrs);}},{key:"manifest",value:function manifest(attrs){return new Manifest(attrs);}},{key:"margin",value:function margin(attrs){return new Margin(attrs);}},{key:"mdp",value:function mdp(attrs){return new Mdp(attrs);}},{key:"medium",value:function medium(attrs){return new Medium(attrs);}},{key:"message",value:function message(attrs){return new Message(attrs);}},{key:"numericEdit",value:function numericEdit(attrs){return new NumericEdit(attrs);}},{key:"occur",value:function occur(attrs){return new Occur(attrs);}},{key:"oid",value:function oid(attrs){return new Oid(attrs);}},{key:"oids",value:function oids(attrs){return new Oids(attrs);}},{key:"overflow",value:function overflow(attrs){return new Overflow(attrs);}},{key:"pageArea",value:function pageArea(attrs){return new PageArea(attrs);}},{key:"pageSet",value:function pageSet(attrs){return new PageSet(attrs);}},{key:"para",value:function para(attrs){return new Para(attrs);}},{key:"passwordEdit",value:function passwordEdit(attrs){return new PasswordEdit(attrs);}},{key:"pattern",value:function pattern(attrs){return new template_Pattern(attrs);}},{key:"picture",value:function picture(attrs){return new Picture(attrs);}},{key:"proto",value:function proto(attrs){return new Proto(attrs);}},{key:"radial",value:function radial(attrs){return new Radial(attrs);}},{key:"reason",value:function reason(attrs){return new Reason(attrs);}},{key:"reasons",value:function reasons(attrs){return new Reasons(attrs);}},{key:"rectangle",value:function rectangle(attrs){return new Rectangle(attrs);}},{key:"ref",value:function ref(attrs){return new RefElement(attrs);}},{key:"script",value:function script(attrs){return new Script(attrs);}},{key:"setProperty",value:function setProperty(attrs){return new SetProperty(attrs);}},{key:"signData",value:function signData(attrs){return new SignData(attrs);}},{key:"signature",value:function signature(attrs){return new Signature(attrs);}},{key:"signing",value:function signing(attrs){return new Signing(attrs);}},{key:"solid",value:function solid(attrs){return new Solid(attrs);}},{key:"speak",value:function speak(attrs){return new Speak(attrs);}},{key:"stipple",value:function stipple(attrs){return new Stipple(attrs);}},{key:"subform",value:function subform(attrs){return new Subform(attrs);}},{key:"subformSet",value:function subformSet(attrs){return new SubformSet(attrs);}},{key:"subjectDN",value:function subjectDN(attrs){return new SubjectDN(attrs);}},{key:"subjectDNs",value:function subjectDNs(attrs){return new SubjectDNs(attrs);}},{key:"submit",value:function submit(attrs){return new Submit(attrs);}},{key:"template",value:function template(attrs){return new Template(attrs);}},{key:"text",value:function text(attrs){return new Text(attrs);}},{key:"textEdit",value:function textEdit(attrs){return new TextEdit(attrs);}},{key:"time",value:function time(attrs){return new Time(attrs);}},{key:"timeStamp",value:function timeStamp(attrs){return new TimeStamp(attrs);}},{key:"toolTip",value:function toolTip(attrs){return new ToolTip(attrs);}},{key:"traversal",value:function traversal(attrs){return new Traversal(attrs);}},{key:"traverse",value:function traverse(attrs){return new Traverse(attrs);}},{key:"ui",value:function ui(attrs){return new Ui(attrs);}},{key:"validate",value:function validate(attrs){return new Validate(attrs);}},{key:"value",value:function value(attrs){return new Value(attrs);}},{key:"variables",value:function variables(attrs){return new Variables(attrs);}}]);}();;// ./src/core/xfa/bind.js\nvar bind_NS_DATASETS=NamespaceIds.datasets.id;function createText(content){var node=new Text({});node[$content]=content;return node;}var Binder=/*#__PURE__*/function(){function Binder(root){var _root$datasets;_classCallCheck(this,Binder);this.root=root;this.datasets=root.datasets;this.data=((_root$datasets=root.datasets)===null||_root$datasets===void 0?void 0:_root$datasets.data)||new XmlObject(NamespaceIds.datasets.id,"data");this.emptyMerge=this.data[$getChildren]().length===0;this.root.form=this.form=root.template[$clone]();}return _createClass(Binder,[{key:"_isConsumeData",value:function _isConsumeData(){return!this.emptyMerge&&this._mergeMode;}},{key:"_isMatchTemplate",value:function _isMatchTemplate(){return!this._isConsumeData();}},{key:"bind",value:function bind(){this._bindElement(this.form,this.data);return this.form;}},{key:"getData",value:function getData(){return this.data;}},{key:"_bindValue",value:function _bindValue(formNode,data,picture){formNode[$data]=data;if(formNode[$hasSettableValue]()){var _formNode$ui;if(data[$isDataValue]()){var value=data[$getDataValue]();formNode[$setValue](createText(value));}else if(formNode instanceof Field&&((_formNode$ui=formNode.ui)===null||_formNode$ui===void 0||(_formNode$ui=_formNode$ui.choiceList)===null||_formNode$ui===void 0?void 0:_formNode$ui.open)==="multiSelect"){var _value11=data[$getChildren]().map(function(child){return child[$content].trim();}).join("\\n");formNode[$setValue](createText(_value11));}else if(this._isConsumeData()){warn("XFA - Nodes haven\'t the same type.");}}else if(!data[$isDataValue]()||this._isMatchTemplate()){this._bindElement(formNode,data);}else{warn("XFA - Nodes haven\'t the same type.");}}},{key:"_findDataByNameToConsume",value:function _findDataByNameToConsume(name,isValue,dataNode,global){var _match6;if(!name){return null;}var generator,match;for(var i=0;i<3;i++){generator=dataNode[$getRealChildrenByNameIt](name,false,true);while(true){match=generator.next().value;if(!match){break;}if(isValue===match[$isDataValue]()){return match;}}if(dataNode[$namespaceId]===NamespaceIds.datasets.id&&dataNode[$nodeName]==="data"){break;}dataNode=dataNode[$getParent]();}if(!global){return null;}generator=this.data[$getRealChildrenByNameIt](name,true,false);match=generator.next().value;if(match){return match;}generator=this.data[$getAttributeIt](name,true);match=generator.next().value;if((_match6=match)!==null&&_match6!==void 0&&_match6[$isDataValue]()){return match;}return null;}},{key:"_setProperties",value:function _setProperties(formNode,dataNode){if(!formNode.hasOwnProperty("setProperty")){return;}var _iterator179=_createForOfIteratorHelper(formNode.setProperty.children),_step179;try{for(_iterator179.s();!(_step179=_iterator179.n()).done;){var _step179$value=_step179.value,ref=_step179$value.ref,target=_step179$value.target,connection=_step179$value.connection;if(connection){continue;}if(!ref){continue;}var nodes=searchNode(this.root,dataNode,ref,false,false);if(!nodes){warn("XFA - Invalid reference: ".concat(ref,"."));continue;}var _nodes=_slicedToArray(nodes,1),node=_nodes[0];if(!node[$isDescendent](this.data)){warn("XFA - Invalid node: must be a data node.");continue;}var targetNodes=searchNode(this.root,formNode,target,false,false);if(!targetNodes){warn("XFA - Invalid target: ".concat(target,"."));continue;}var _targetNodes=_slicedToArray(targetNodes,1),targetNode=_targetNodes[0];if(!targetNode[$isDescendent](formNode)){warn("XFA - Invalid target: must be a property or subproperty.");continue;}var targetParent=targetNode[$getParent]();if(targetNode instanceof SetProperty||targetParent instanceof SetProperty){warn("XFA - Invalid target: cannot be a setProperty or one of its properties.");continue;}if(targetNode instanceof BindItems||targetParent instanceof BindItems){warn("XFA - Invalid target: cannot be a bindItems or one of its properties.");continue;}var content=node[$text]();var name=targetNode[$nodeName];if(targetNode instanceof XFAAttribute){var attrs=Object.create(null);attrs[name]=content;var obj=Reflect.construct(Object.getPrototypeOf(targetParent).constructor,[attrs]);targetParent[name]=obj[name];continue;}if(!targetNode.hasOwnProperty($content)){warn("XFA - Invalid node to use in setProperty");continue;}targetNode[$data]=node;targetNode[$content]=content;targetNode[$finalize]();}}catch(err){_iterator179.e(err);}finally{_iterator179.f();}}},{key:"_bindItems",value:function _bindItems(formNode,dataNode){if(!formNode.hasOwnProperty("items")||!formNode.hasOwnProperty("bindItems")||formNode.bindItems.isEmpty()){return;}var _iterator180=_createForOfIteratorHelper(formNode.items.children),_step180;try{for(_iterator180.s();!(_step180=_iterator180.n()).done;){var item=_step180.value;formNode[$removeChild](item);}}catch(err){_iterator180.e(err);}finally{_iterator180.f();}formNode.items.clear();var labels=new Items({});var values=new Items({});formNode[$appendChild](labels);formNode.items.push(labels);formNode[$appendChild](values);formNode.items.push(values);var _iterator181=_createForOfIteratorHelper(formNode.bindItems.children),_step181;try{for(_iterator181.s();!(_step181=_iterator181.n()).done;){var _step181$value=_step181.value,ref=_step181$value.ref,labelRef=_step181$value.labelRef,valueRef=_step181$value.valueRef,connection=_step181$value.connection;if(connection){continue;}if(!ref){continue;}var nodes=searchNode(this.root,dataNode,ref,false,false);if(!nodes){warn("XFA - Invalid reference: ".concat(ref,"."));continue;}var _iterator182=_createForOfIteratorHelper(nodes),_step182;try{for(_iterator182.s();!(_step182=_iterator182.n()).done;){var node=_step182.value;if(!node[$isDescendent](this.datasets)){warn("XFA - Invalid ref (".concat(ref,"): must be a datasets child."));continue;}var labelNodes=searchNode(this.root,node,labelRef,true,false);if(!labelNodes){warn("XFA - Invalid label: ".concat(labelRef,"."));continue;}var _labelNodes=_slicedToArray(labelNodes,1),labelNode=_labelNodes[0];if(!labelNode[$isDescendent](this.datasets)){warn("XFA - Invalid label: must be a datasets child.");continue;}var valueNodes=searchNode(this.root,node,valueRef,true,false);if(!valueNodes){warn("XFA - Invalid value: ".concat(valueRef,"."));continue;}var _valueNodes=_slicedToArray(valueNodes,1),valueNode=_valueNodes[0];if(!valueNode[$isDescendent](this.datasets)){warn("XFA - Invalid value: must be a datasets child.");continue;}var label=createText(labelNode[$text]());var value=createText(valueNode[$text]());labels[$appendChild](label);labels.text.push(label);values[$appendChild](value);values.text.push(value);}}catch(err){_iterator182.e(err);}finally{_iterator182.f();}}}catch(err){_iterator181.e(err);}finally{_iterator181.f();}}},{key:"_bindOccurrences",value:function _bindOccurrences(formNode,matches,picture){var baseClone;if(matches.length>1){baseClone=formNode[$clone]();baseClone[$removeChild](baseClone.occur);baseClone.occur=null;}this._bindValue(formNode,matches[0],picture);this._setProperties(formNode,matches[0]);this._bindItems(formNode,matches[0]);if(matches.length===1){return;}var parent=formNode[$getParent]();var name=formNode[$nodeName];var pos=parent[$indexOf](formNode);for(var i=1,ii=matches.length;i<ii;i++){var match=matches[i];var clone=baseClone[$clone]();parent[name].push(clone);parent[$insertAt](pos+i,clone);this._bindValue(clone,match,picture);this._setProperties(clone,match);this._bindItems(clone,match);}}},{key:"_createOccurrences",value:function _createOccurrences(formNode){if(!this.emptyMerge){return;}var occur=formNode.occur;if(!occur||occur.initial<=1){return;}var parent=formNode[$getParent]();var name=formNode[$nodeName];if(!(parent[name]instanceof XFAObjectArray)){return;}var currentNumber;if(formNode.name){currentNumber=parent[name].children.filter(function(e){return e.name===formNode.name;}).length;}else{currentNumber=parent[name].children.length;}var pos=parent[$indexOf](formNode)+1;var ii=occur.initial-currentNumber;if(ii){var nodeClone=formNode[$clone]();nodeClone[$removeChild](nodeClone.occur);nodeClone.occur=null;parent[name].push(nodeClone);parent[$insertAt](pos,nodeClone);for(var i=1;i<ii;i++){var clone=nodeClone[$clone]();parent[name].push(clone);parent[$insertAt](pos+i,clone);}}}},{key:"_getOccurInfo",value:function _getOccurInfo(formNode){var name=formNode.name,occur=formNode.occur;if(!occur||!name){return[1,1];}var max=occur.max===-1?Infinity:occur.max;return[occur.min,max];}},{key:"_setAndBind",value:function _setAndBind(formNode,dataNode){this._setProperties(formNode,dataNode);this._bindItems(formNode,dataNode);this._bindElement(formNode,dataNode);}},{key:"_bindElement",value:function _bindElement(formNode,dataNode){var uselessNodes=[];this._createOccurrences(formNode);var _iterator183=_createForOfIteratorHelper(formNode[$getChildren]()),_step183;try{for(_iterator183.s();!(_step183=_iterator183.n()).done;){var child=_step183.value;if(child[$data]){continue;}if(this._mergeMode===undefined&&child[$nodeName]==="subform"){this._mergeMode=child.mergeMode==="consumeData";var dataChildren=dataNode[$getChildren]();if(dataChildren.length>0){this._bindOccurrences(child,[dataChildren[0]],null);}else if(this.emptyMerge){var nsId=dataNode[$namespaceId]===bind_NS_DATASETS?-1:dataNode[$namespaceId];var dataChild=child[$data]=new XmlObject(nsId,child.name||"root");dataNode[$appendChild](dataChild);this._bindElement(child,dataChild);}continue;}if(!child[$isBindable]()){continue;}var global=false;var picture=null;var ref=null;var match=null;if(child.bind){switch(child.bind.match){case"none":this._setAndBind(child,dataNode);continue;case"global":global=true;break;case"dataRef":if(!child.bind.ref){warn("XFA - ref is empty in node ".concat(child[$nodeName],"."));this._setAndBind(child,dataNode);continue;}ref=child.bind.ref;break;default:break;}if(child.bind.picture){picture=child.bind.picture[$content];}}var _this$_getOccurInfo=this._getOccurInfo(child),_this$_getOccurInfo2=_slicedToArray(_this$_getOccurInfo,2),min=_this$_getOccurInfo2[0],max=_this$_getOccurInfo2[1];if(ref){match=searchNode(this.root,dataNode,ref,true,false);if(match===null){match=createDataNode(this.data,dataNode,ref);if(!match){continue;}if(this._isConsumeData()){match[$consumed]=true;}this._setAndBind(child,match);continue;}else{if(this._isConsumeData()){match=match.filter(function(node){return!node[$consumed];});}if(match.length>max){match=match.slice(0,max);}else if(match.length===0){match=null;}if(match&&this._isConsumeData()){match.forEach(function(node){node[$consumed]=true;});}}}else{if(!child.name){this._setAndBind(child,dataNode);continue;}if(this._isConsumeData()){var matches=[];while(matches.length<max){var found=this._findDataByNameToConsume(child.name,child[$hasSettableValue](),dataNode,global);if(!found){break;}found[$consumed]=true;matches.push(found);}match=matches.length>0?matches:null;}else{match=dataNode[$getRealChildrenByNameIt](child.name,false,this.emptyMerge).next().value;if(!match){if(min===0){uselessNodes.push(child);continue;}var _nsId=dataNode[$namespaceId]===bind_NS_DATASETS?-1:dataNode[$namespaceId];match=child[$data]=new XmlObject(_nsId,child.name);if(this.emptyMerge){match[$consumed]=true;}dataNode[$appendChild](match);this._setAndBind(child,match);continue;}if(this.emptyMerge){match[$consumed]=true;}match=[match];}}if(match){this._bindOccurrences(child,match,picture);}else if(min>0){this._setAndBind(child,dataNode);}else{uselessNodes.push(child);}}}catch(err){_iterator183.e(err);}finally{_iterator183.f();}uselessNodes.forEach(function(node){return node[$getParent]()[$removeChild](node);});}}]);}();;// ./src/core/xfa/data.js\nvar DataHandler=/*#__PURE__*/function(){function DataHandler(root,data){_classCallCheck(this,DataHandler);this.data=data;this.dataset=root.datasets||null;}return _createClass(DataHandler,[{key:"serialize",value:function serialize(storage){var stack=[[-1,this.data[$getChildren]()]];while(stack.length>0){var last=stack.at(-1);var _last=_slicedToArray(last,2),i=_last[0],children=_last[1];if(i+1===children.length){stack.pop();continue;}var child=children[++last[0]];var storageEntry=storage.get(child[$uid]);if(storageEntry){child[$setValue](storageEntry);}else{var attributes=child[$getAttributes]();var _iterator184=_createForOfIteratorHelper(attributes.values()),_step184;try{for(_iterator184.s();!(_step184=_iterator184.n()).done;){var value=_step184.value;var entry=storage.get(value[$uid]);if(entry){value[$setValue](entry);break;}}}catch(err){_iterator184.e(err);}finally{_iterator184.f();}}var nodes=child[$getChildren]();if(nodes.length>0){stack.push([-1,nodes]);}}var buf=["<xfa:datasets xmlns:xfa=\\"http://www.xfa.org/schema/xfa-data/1.0/\\">"];if(this.dataset){var _iterator185=_createForOfIteratorHelper(this.dataset[$getChildren]()),_step185;try{for(_iterator185.s();!(_step185=_iterator185.n()).done;){var _child3=_step185.value;if(_child3[$nodeName]!=="data"){_child3[$toString](buf);}}}catch(err){_iterator185.e(err);}finally{_iterator185.f();}}this.data[$toString](buf);buf.push("</xfa:datasets>");return buf.join("");}}]);}();;// ./src/core/xfa/config.js\nvar CONFIG_NS_ID=NamespaceIds.config.id;var Acrobat=/*#__PURE__*/function(_XFAObject91){function Acrobat(attributes){var _this180;_classCallCheck(this,Acrobat);_this180=_callSuper(this,Acrobat,[CONFIG_NS_ID,"acrobat",true]);_this180.acrobat7=null;_this180.autoSave=null;_this180.common=null;_this180.validate=null;_this180.validateApprovalSignatures=null;_this180.submitUrl=new XFAObjectArray();return _this180;}_inherits(Acrobat,_XFAObject91);return _createClass(Acrobat);}(XFAObject);var Acrobat7=/*#__PURE__*/function(_XFAObject92){function Acrobat7(attributes){var _this181;_classCallCheck(this,Acrobat7);_this181=_callSuper(this,Acrobat7,[CONFIG_NS_ID,"acrobat7",true]);_this181.dynamicRender=null;return _this181;}_inherits(Acrobat7,_XFAObject92);return _createClass(Acrobat7);}(XFAObject);var _ADBE_JSConsole=/*#__PURE__*/function(_OptionObject4){function ADBE_JSConsole(attributes){_classCallCheck(this,ADBE_JSConsole);return _callSuper(this,ADBE_JSConsole,[CONFIG_NS_ID,"ADBE_JSConsole",["delegate","Enable","Disable"]]);}_inherits(ADBE_JSConsole,_OptionObject4);return _createClass(ADBE_JSConsole);}(OptionObject);var _ADBE_JSDebugger=/*#__PURE__*/function(_OptionObject5){function ADBE_JSDebugger(attributes){_classCallCheck(this,ADBE_JSDebugger);return _callSuper(this,ADBE_JSDebugger,[CONFIG_NS_ID,"ADBE_JSDebugger",["delegate","Enable","Disable"]]);}_inherits(ADBE_JSDebugger,_OptionObject5);return _createClass(ADBE_JSDebugger);}(OptionObject);var AddSilentPrint=/*#__PURE__*/function(_Option2){function AddSilentPrint(attributes){_classCallCheck(this,AddSilentPrint);return _callSuper(this,AddSilentPrint,[CONFIG_NS_ID,"addSilentPrint"]);}_inherits(AddSilentPrint,_Option2);return _createClass(AddSilentPrint);}(Option01);var AddViewerPreferences=/*#__PURE__*/function(_Option3){function AddViewerPreferences(attributes){_classCallCheck(this,AddViewerPreferences);return _callSuper(this,AddViewerPreferences,[CONFIG_NS_ID,"addViewerPreferences"]);}_inherits(AddViewerPreferences,_Option3);return _createClass(AddViewerPreferences);}(Option01);var AdjustData=/*#__PURE__*/function(_Option4){function AdjustData(attributes){_classCallCheck(this,AdjustData);return _callSuper(this,AdjustData,[CONFIG_NS_ID,"adjustData"]);}_inherits(AdjustData,_Option4);return _createClass(AdjustData);}(Option10);var AdobeExtensionLevel=/*#__PURE__*/function(_IntegerObject3){function AdobeExtensionLevel(attributes){_classCallCheck(this,AdobeExtensionLevel);return _callSuper(this,AdobeExtensionLevel,[CONFIG_NS_ID,"adobeExtensionLevel",0,function(n){return n>=1&&n<=8;}]);}_inherits(AdobeExtensionLevel,_IntegerObject3);return _createClass(AdobeExtensionLevel);}(IntegerObject);var Agent=/*#__PURE__*/function(_XFAObject93){function Agent(attributes){var _this182;_classCallCheck(this,Agent);_this182=_callSuper(this,Agent,[CONFIG_NS_ID,"agent",true]);_this182.name=attributes.name?attributes.name.trim():"";_this182.common=new XFAObjectArray();return _this182;}_inherits(Agent,_XFAObject93);return _createClass(Agent);}(XFAObject);var AlwaysEmbed=/*#__PURE__*/function(_ContentObject13){function AlwaysEmbed(attributes){_classCallCheck(this,AlwaysEmbed);return _callSuper(this,AlwaysEmbed,[CONFIG_NS_ID,"alwaysEmbed"]);}_inherits(AlwaysEmbed,_ContentObject13);return _createClass(AlwaysEmbed);}(ContentObject);var Amd=/*#__PURE__*/function(_StringObject13){function Amd(attributes){_classCallCheck(this,Amd);return _callSuper(this,Amd,[CONFIG_NS_ID,"amd"]);}_inherits(Amd,_StringObject13);return _createClass(Amd);}(StringObject);var config_Area=/*#__PURE__*/function(_XFAObject94){function config_Area(attributes){var _this183;_classCallCheck(this,config_Area);_this183=_callSuper(this,config_Area,[CONFIG_NS_ID,"area"]);_this183.level=getInteger({data:attributes.level,defaultValue:0,validate:function validate(n){return n>=1&&n<=3;}});_this183.name=getStringOption(attributes.name,["","barcode","coreinit","deviceDriver","font","general","layout","merge","script","signature","sourceSet","templateCache"]);return _this183;}_inherits(config_Area,_XFAObject94);return _createClass(config_Area);}(XFAObject);var Attributes=/*#__PURE__*/function(_OptionObject6){function Attributes(attributes){_classCallCheck(this,Attributes);return _callSuper(this,Attributes,[CONFIG_NS_ID,"attributes",["preserve","delegate","ignore"]]);}_inherits(Attributes,_OptionObject6);return _createClass(Attributes);}(OptionObject);var AutoSave=/*#__PURE__*/function(_OptionObject7){function AutoSave(attributes){_classCallCheck(this,AutoSave);return _callSuper(this,AutoSave,[CONFIG_NS_ID,"autoSave",["disabled","enabled"]]);}_inherits(AutoSave,_OptionObject7);return _createClass(AutoSave);}(OptionObject);var Base=/*#__PURE__*/function(_StringObject14){function Base(attributes){_classCallCheck(this,Base);return _callSuper(this,Base,[CONFIG_NS_ID,"base"]);}_inherits(Base,_StringObject14);return _createClass(Base);}(StringObject);var BatchOutput=/*#__PURE__*/function(_XFAObject95){function BatchOutput(attributes){var _this184;_classCallCheck(this,BatchOutput);_this184=_callSuper(this,BatchOutput,[CONFIG_NS_ID,"batchOutput"]);_this184.format=getStringOption(attributes.format,["none","concat","zip","zipCompress"]);return _this184;}_inherits(BatchOutput,_XFAObject95);return _createClass(BatchOutput);}(XFAObject);var BehaviorOverride=/*#__PURE__*/function(_ContentObject14){function BehaviorOverride(attributes){_classCallCheck(this,BehaviorOverride);return _callSuper(this,BehaviorOverride,[CONFIG_NS_ID,"behaviorOverride"]);}_inherits(BehaviorOverride,_ContentObject14);return _createClass(BehaviorOverride,[{key:$finalize,value:function value(){this[$content]=new Map(this[$content].trim().split(/\\s+/).filter(function(x){return x.includes(":");}).map(function(x){return x.split(":",2);}));}}]);}(ContentObject);var Cache=/*#__PURE__*/function(_XFAObject96){function Cache(attributes){var _this185;_classCallCheck(this,Cache);_this185=_callSuper(this,Cache,[CONFIG_NS_ID,"cache",true]);_this185.templateCache=null;return _this185;}_inherits(Cache,_XFAObject96);return _createClass(Cache);}(XFAObject);var Change=/*#__PURE__*/function(_Option5){function Change(attributes){_classCallCheck(this,Change);return _callSuper(this,Change,[CONFIG_NS_ID,"change"]);}_inherits(Change,_Option5);return _createClass(Change);}(Option01);var Common=/*#__PURE__*/function(_XFAObject97){function Common(attributes){var _this186;_classCallCheck(this,Common);_this186=_callSuper(this,Common,[CONFIG_NS_ID,"common",true]);_this186.data=null;_this186.locale=null;_this186.localeSet=null;_this186.messaging=null;_this186.suppressBanner=null;_this186.template=null;_this186.validationMessaging=null;_this186.versionControl=null;_this186.log=new XFAObjectArray();return _this186;}_inherits(Common,_XFAObject97);return _createClass(Common);}(XFAObject);var Compress=/*#__PURE__*/function(_XFAObject98){function Compress(attributes){var _this187;_classCallCheck(this,Compress);_this187=_callSuper(this,Compress,[CONFIG_NS_ID,"compress"]);_this187.scope=getStringOption(attributes.scope,["imageOnly","document"]);return _this187;}_inherits(Compress,_XFAObject98);return _createClass(Compress);}(XFAObject);var CompressLogicalStructure=/*#__PURE__*/function(_Option6){function CompressLogicalStructure(attributes){_classCallCheck(this,CompressLogicalStructure);return _callSuper(this,CompressLogicalStructure,[CONFIG_NS_ID,"compressLogicalStructure"]);}_inherits(CompressLogicalStructure,_Option6);return _createClass(CompressLogicalStructure);}(Option01);var CompressObjectStream=/*#__PURE__*/function(_Option7){function CompressObjectStream(attributes){_classCallCheck(this,CompressObjectStream);return _callSuper(this,CompressObjectStream,[CONFIG_NS_ID,"compressObjectStream"]);}_inherits(CompressObjectStream,_Option7);return _createClass(CompressObjectStream);}(Option10);var Compression=/*#__PURE__*/function(_XFAObject99){function Compression(attributes){var _this188;_classCallCheck(this,Compression);_this188=_callSuper(this,Compression,[CONFIG_NS_ID,"compression",true]);_this188.compressLogicalStructure=null;_this188.compressObjectStream=null;_this188.level=null;_this188.type=null;return _this188;}_inherits(Compression,_XFAObject99);return _createClass(Compression);}(XFAObject);var Config=/*#__PURE__*/function(_XFAObject100){function Config(attributes){var _this189;_classCallCheck(this,Config);_this189=_callSuper(this,Config,[CONFIG_NS_ID,"config",true]);_this189.acrobat=null;_this189.present=null;_this189.trace=null;_this189.agent=new XFAObjectArray();return _this189;}_inherits(Config,_XFAObject100);return _createClass(Config);}(XFAObject);var Conformance=/*#__PURE__*/function(_OptionObject8){function Conformance(attributes){_classCallCheck(this,Conformance);return _callSuper(this,Conformance,[CONFIG_NS_ID,"conformance",["A","B"]]);}_inherits(Conformance,_OptionObject8);return _createClass(Conformance);}(OptionObject);var ContentCopy=/*#__PURE__*/function(_Option8){function ContentCopy(attributes){_classCallCheck(this,ContentCopy);return _callSuper(this,ContentCopy,[CONFIG_NS_ID,"contentCopy"]);}_inherits(ContentCopy,_Option8);return _createClass(ContentCopy);}(Option01);var Copies=/*#__PURE__*/function(_IntegerObject4){function Copies(attributes){_classCallCheck(this,Copies);return _callSuper(this,Copies,[CONFIG_NS_ID,"copies",1,function(n){return n>=1;}]);}_inherits(Copies,_IntegerObject4);return _createClass(Copies);}(IntegerObject);var Creator=/*#__PURE__*/function(_StringObject15){function Creator(attributes){_classCallCheck(this,Creator);return _callSuper(this,Creator,[CONFIG_NS_ID,"creator"]);}_inherits(Creator,_StringObject15);return _createClass(Creator);}(StringObject);var CurrentPage=/*#__PURE__*/function(_IntegerObject5){function CurrentPage(attributes){_classCallCheck(this,CurrentPage);return _callSuper(this,CurrentPage,[CONFIG_NS_ID,"currentPage",0,function(n){return n>=0;}]);}_inherits(CurrentPage,_IntegerObject5);return _createClass(CurrentPage);}(IntegerObject);var Data=/*#__PURE__*/function(_XFAObject101){function Data(attributes){var _this190;_classCallCheck(this,Data);_this190=_callSuper(this,Data,[CONFIG_NS_ID,"data",true]);_this190.adjustData=null;_this190.attributes=null;_this190.incrementalLoad=null;_this190.outputXSL=null;_this190.range=null;_this190.record=null;_this190.startNode=null;_this190.uri=null;_this190.window=null;_this190.xsl=null;_this190.excludeNS=new XFAObjectArray();_this190.transform=new XFAObjectArray();return _this190;}_inherits(Data,_XFAObject101);return _createClass(Data);}(XFAObject);var Debug=/*#__PURE__*/function(_XFAObject102){function Debug(attributes){var _this191;_classCallCheck(this,Debug);_this191=_callSuper(this,Debug,[CONFIG_NS_ID,"debug",true]);_this191.uri=null;return _this191;}_inherits(Debug,_XFAObject102);return _createClass(Debug);}(XFAObject);var DefaultTypeface=/*#__PURE__*/function(_ContentObject15){function DefaultTypeface(attributes){var _this192;_classCallCheck(this,DefaultTypeface);_this192=_callSuper(this,DefaultTypeface,[CONFIG_NS_ID,"defaultTypeface"]);_this192.writingScript=getStringOption(attributes.writingScript,["*","Arabic","Cyrillic","EastEuropeanRoman","Greek","Hebrew","Japanese","Korean","Roman","SimplifiedChinese","Thai","TraditionalChinese","Vietnamese"]);return _this192;}_inherits(DefaultTypeface,_ContentObject15);return _createClass(DefaultTypeface);}(ContentObject);var Destination=/*#__PURE__*/function(_OptionObject9){function Destination(attributes){_classCallCheck(this,Destination);return _callSuper(this,Destination,[CONFIG_NS_ID,"destination",["pdf","pcl","ps","webClient","zpl"]]);}_inherits(Destination,_OptionObject9);return _createClass(Destination);}(OptionObject);var DocumentAssembly=/*#__PURE__*/function(_Option9){function DocumentAssembly(attributes){_classCallCheck(this,DocumentAssembly);return _callSuper(this,DocumentAssembly,[CONFIG_NS_ID,"documentAssembly"]);}_inherits(DocumentAssembly,_Option9);return _createClass(DocumentAssembly);}(Option01);var Driver=/*#__PURE__*/function(_XFAObject103){function Driver(attributes){var _this193;_classCallCheck(this,Driver);_this193=_callSuper(this,Driver,[CONFIG_NS_ID,"driver",true]);_this193.name=attributes.name?attributes.name.trim():"";_this193.fontInfo=null;_this193.xdc=null;return _this193;}_inherits(Driver,_XFAObject103);return _createClass(Driver);}(XFAObject);var DuplexOption=/*#__PURE__*/function(_OptionObject10){function DuplexOption(attributes){_classCallCheck(this,DuplexOption);return _callSuper(this,DuplexOption,[CONFIG_NS_ID,"duplexOption",["simplex","duplexFlipLongEdge","duplexFlipShortEdge"]]);}_inherits(DuplexOption,_OptionObject10);return _createClass(DuplexOption);}(OptionObject);var DynamicRender=/*#__PURE__*/function(_OptionObject11){function DynamicRender(attributes){_classCallCheck(this,DynamicRender);return _callSuper(this,DynamicRender,[CONFIG_NS_ID,"dynamicRender",["forbidden","required"]]);}_inherits(DynamicRender,_OptionObject11);return _createClass(DynamicRender);}(OptionObject);var Embed=/*#__PURE__*/function(_Option10){function Embed(attributes){_classCallCheck(this,Embed);return _callSuper(this,Embed,[CONFIG_NS_ID,"embed"]);}_inherits(Embed,_Option10);return _createClass(Embed);}(Option01);var config_Encrypt=/*#__PURE__*/function(_Option11){function config_Encrypt(attributes){_classCallCheck(this,config_Encrypt);return _callSuper(this,config_Encrypt,[CONFIG_NS_ID,"encrypt"]);}_inherits(config_Encrypt,_Option11);return _createClass(config_Encrypt);}(Option01);var config_Encryption=/*#__PURE__*/function(_XFAObject104){function config_Encryption(attributes){var _this194;_classCallCheck(this,config_Encryption);_this194=_callSuper(this,config_Encryption,[CONFIG_NS_ID,"encryption",true]);_this194.encrypt=null;_this194.encryptionLevel=null;_this194.permissions=null;return _this194;}_inherits(config_Encryption,_XFAObject104);return _createClass(config_Encryption);}(XFAObject);var EncryptionLevel=/*#__PURE__*/function(_OptionObject12){function EncryptionLevel(attributes){_classCallCheck(this,EncryptionLevel);return _callSuper(this,EncryptionLevel,[CONFIG_NS_ID,"encryptionLevel",["40bit","128bit"]]);}_inherits(EncryptionLevel,_OptionObject12);return _createClass(EncryptionLevel);}(OptionObject);var Enforce=/*#__PURE__*/function(_StringObject16){function Enforce(attributes){_classCallCheck(this,Enforce);return _callSuper(this,Enforce,[CONFIG_NS_ID,"enforce"]);}_inherits(Enforce,_StringObject16);return _createClass(Enforce);}(StringObject);var Equate=/*#__PURE__*/function(_XFAObject105){function Equate(attributes){var _this195;_classCallCheck(this,Equate);_this195=_callSuper(this,Equate,[CONFIG_NS_ID,"equate"]);_this195.force=getInteger({data:attributes.force,defaultValue:1,validate:function validate(n){return n===0;}});_this195.from=attributes.from||"";_this195.to=attributes.to||"";return _this195;}_inherits(Equate,_XFAObject105);return _createClass(Equate);}(XFAObject);var EquateRange=/*#__PURE__*/function(_XFAObject106){function EquateRange(attributes){var _this196;_classCallCheck(this,EquateRange);_this196=_callSuper(this,EquateRange,[CONFIG_NS_ID,"equateRange"]);_this196.from=attributes.from||"";_this196.to=attributes.to||"";_this196._unicodeRange=attributes.unicodeRange||"";return _this196;}_inherits(EquateRange,_XFAObject106);return _createClass(EquateRange,[{key:"unicodeRange",get:function get(){var ranges=[];var unicodeRegex=/U\\+([0-9a-fA-F]+)/;var unicodeRange=this._unicodeRange;var _iterator186=_createForOfIteratorHelper(unicodeRange.split(",").map(function(x){return x.trim();}).filter(function(x){return!!x;})),_step186;try{for(_iterator186.s();!(_step186=_iterator186.n()).done;){var range=_step186.value;range=range.split("-",2).map(function(x){var found=x.match(unicodeRegex);if(!found){return 0;}return parseInt(found[1],16);});if(range.length===1){range.push(range[0]);}ranges.push(range);}}catch(err){_iterator186.e(err);}finally{_iterator186.f();}return shadow(this,"unicodeRange",ranges);}}]);}(XFAObject);var Exclude=/*#__PURE__*/function(_ContentObject16){function Exclude(attributes){_classCallCheck(this,Exclude);return _callSuper(this,Exclude,[CONFIG_NS_ID,"exclude"]);}_inherits(Exclude,_ContentObject16);return _createClass(Exclude,[{key:$finalize,value:function value(){this[$content]=this[$content].trim().split(/\\s+/).filter(function(x){return x&&["calculate","close","enter","exit","initialize","ready","validate"].includes(x);});}}]);}(ContentObject);var ExcludeNS=/*#__PURE__*/function(_StringObject17){function ExcludeNS(attributes){_classCallCheck(this,ExcludeNS);return _callSuper(this,ExcludeNS,[CONFIG_NS_ID,"excludeNS"]);}_inherits(ExcludeNS,_StringObject17);return _createClass(ExcludeNS);}(StringObject);var FlipLabel=/*#__PURE__*/function(_OptionObject13){function FlipLabel(attributes){_classCallCheck(this,FlipLabel);return _callSuper(this,FlipLabel,[CONFIG_NS_ID,"flipLabel",["usePrinterSetting","on","off"]]);}_inherits(FlipLabel,_OptionObject13);return _createClass(FlipLabel);}(OptionObject);var config_FontInfo=/*#__PURE__*/function(_XFAObject107){function config_FontInfo(attributes){var _this197;_classCallCheck(this,config_FontInfo);_this197=_callSuper(this,config_FontInfo,[CONFIG_NS_ID,"fontInfo",true]);_this197.embed=null;_this197.map=null;_this197.subsetBelow=null;_this197.alwaysEmbed=new XFAObjectArray();_this197.defaultTypeface=new XFAObjectArray();_this197.neverEmbed=new XFAObjectArray();return _this197;}_inherits(config_FontInfo,_XFAObject107);return _createClass(config_FontInfo);}(XFAObject);var FormFieldFilling=/*#__PURE__*/function(_Option12){function FormFieldFilling(attributes){_classCallCheck(this,FormFieldFilling);return _callSuper(this,FormFieldFilling,[CONFIG_NS_ID,"formFieldFilling"]);}_inherits(FormFieldFilling,_Option12);return _createClass(FormFieldFilling);}(Option01);var GroupParent=/*#__PURE__*/function(_StringObject18){function GroupParent(attributes){_classCallCheck(this,GroupParent);return _callSuper(this,GroupParent,[CONFIG_NS_ID,"groupParent"]);}_inherits(GroupParent,_StringObject18);return _createClass(GroupParent);}(StringObject);var IfEmpty=/*#__PURE__*/function(_OptionObject14){function IfEmpty(attributes){_classCallCheck(this,IfEmpty);return _callSuper(this,IfEmpty,[CONFIG_NS_ID,"ifEmpty",["dataValue","dataGroup","ignore","remove"]]);}_inherits(IfEmpty,_OptionObject14);return _createClass(IfEmpty);}(OptionObject);var IncludeXDPContent=/*#__PURE__*/function(_StringObject19){function IncludeXDPContent(attributes){_classCallCheck(this,IncludeXDPContent);return _callSuper(this,IncludeXDPContent,[CONFIG_NS_ID,"includeXDPContent"]);}_inherits(IncludeXDPContent,_StringObject19);return _createClass(IncludeXDPContent);}(StringObject);var IncrementalLoad=/*#__PURE__*/function(_OptionObject15){function IncrementalLoad(attributes){_classCallCheck(this,IncrementalLoad);return _callSuper(this,IncrementalLoad,[CONFIG_NS_ID,"incrementalLoad",["none","forwardOnly"]]);}_inherits(IncrementalLoad,_OptionObject15);return _createClass(IncrementalLoad);}(OptionObject);var IncrementalMerge=/*#__PURE__*/function(_Option13){function IncrementalMerge(attributes){_classCallCheck(this,IncrementalMerge);return _callSuper(this,IncrementalMerge,[CONFIG_NS_ID,"incrementalMerge"]);}_inherits(IncrementalMerge,_Option13);return _createClass(IncrementalMerge);}(Option01);var Interactive=/*#__PURE__*/function(_Option14){function Interactive(attributes){_classCallCheck(this,Interactive);return _callSuper(this,Interactive,[CONFIG_NS_ID,"interactive"]);}_inherits(Interactive,_Option14);return _createClass(Interactive);}(Option01);var Jog=/*#__PURE__*/function(_OptionObject16){function Jog(attributes){_classCallCheck(this,Jog);return _callSuper(this,Jog,[CONFIG_NS_ID,"jog",["usePrinterSetting","none","pageSet"]]);}_inherits(Jog,_OptionObject16);return _createClass(Jog);}(OptionObject);var LabelPrinter=/*#__PURE__*/function(_XFAObject108){function LabelPrinter(attributes){var _this198;_classCallCheck(this,LabelPrinter);_this198=_callSuper(this,LabelPrinter,[CONFIG_NS_ID,"labelPrinter",true]);_this198.name=getStringOption(attributes.name,["zpl","dpl","ipl","tcpl"]);_this198.batchOutput=null;_this198.flipLabel=null;_this198.fontInfo=null;_this198.xdc=null;return _this198;}_inherits(LabelPrinter,_XFAObject108);return _createClass(LabelPrinter);}(XFAObject);var Layout=/*#__PURE__*/function(_OptionObject17){function Layout(attributes){_classCallCheck(this,Layout);return _callSuper(this,Layout,[CONFIG_NS_ID,"layout",["paginate","panel"]]);}_inherits(Layout,_OptionObject17);return _createClass(Layout);}(OptionObject);var Level=/*#__PURE__*/function(_IntegerObject6){function Level(attributes){_classCallCheck(this,Level);return _callSuper(this,Level,[CONFIG_NS_ID,"level",0,function(n){return n>0;}]);}_inherits(Level,_IntegerObject6);return _createClass(Level);}(IntegerObject);var Linearized=/*#__PURE__*/function(_Option15){function Linearized(attributes){_classCallCheck(this,Linearized);return _callSuper(this,Linearized,[CONFIG_NS_ID,"linearized"]);}_inherits(Linearized,_Option15);return _createClass(Linearized);}(Option01);var Locale=/*#__PURE__*/function(_StringObject20){function Locale(attributes){_classCallCheck(this,Locale);return _callSuper(this,Locale,[CONFIG_NS_ID,"locale"]);}_inherits(Locale,_StringObject20);return _createClass(Locale);}(StringObject);var LocaleSet=/*#__PURE__*/function(_StringObject21){function LocaleSet(attributes){_classCallCheck(this,LocaleSet);return _callSuper(this,LocaleSet,[CONFIG_NS_ID,"localeSet"]);}_inherits(LocaleSet,_StringObject21);return _createClass(LocaleSet);}(StringObject);var Log=/*#__PURE__*/function(_XFAObject109){function Log(attributes){var _this199;_classCallCheck(this,Log);_this199=_callSuper(this,Log,[CONFIG_NS_ID,"log",true]);_this199.mode=null;_this199.threshold=null;_this199.to=null;_this199.uri=null;return _this199;}_inherits(Log,_XFAObject109);return _createClass(Log);}(XFAObject);var MapElement=/*#__PURE__*/function(_XFAObject110){function MapElement(attributes){var _this200;_classCallCheck(this,MapElement);_this200=_callSuper(this,MapElement,[CONFIG_NS_ID,"map",true]);_this200.equate=new XFAObjectArray();_this200.equateRange=new XFAObjectArray();return _this200;}_inherits(MapElement,_XFAObject110);return _createClass(MapElement);}(XFAObject);var MediumInfo=/*#__PURE__*/function(_XFAObject111){function MediumInfo(attributes){var _this201;_classCallCheck(this,MediumInfo);_this201=_callSuper(this,MediumInfo,[CONFIG_NS_ID,"mediumInfo",true]);_this201.map=null;return _this201;}_inherits(MediumInfo,_XFAObject111);return _createClass(MediumInfo);}(XFAObject);var config_Message=/*#__PURE__*/function(_XFAObject112){function config_Message(attributes){var _this202;_classCallCheck(this,config_Message);_this202=_callSuper(this,config_Message,[CONFIG_NS_ID,"message",true]);_this202.msgId=null;_this202.severity=null;return _this202;}_inherits(config_Message,_XFAObject112);return _createClass(config_Message);}(XFAObject);var Messaging=/*#__PURE__*/function(_XFAObject113){function Messaging(attributes){var _this203;_classCallCheck(this,Messaging);_this203=_callSuper(this,Messaging,[CONFIG_NS_ID,"messaging",true]);_this203.message=new XFAObjectArray();return _this203;}_inherits(Messaging,_XFAObject113);return _createClass(Messaging);}(XFAObject);var Mode=/*#__PURE__*/function(_OptionObject18){function Mode(attributes){_classCallCheck(this,Mode);return _callSuper(this,Mode,[CONFIG_NS_ID,"mode",["append","overwrite"]]);}_inherits(Mode,_OptionObject18);return _createClass(Mode);}(OptionObject);var ModifyAnnots=/*#__PURE__*/function(_Option16){function ModifyAnnots(attributes){_classCallCheck(this,ModifyAnnots);return _callSuper(this,ModifyAnnots,[CONFIG_NS_ID,"modifyAnnots"]);}_inherits(ModifyAnnots,_Option16);return _createClass(ModifyAnnots);}(Option01);var MsgId=/*#__PURE__*/function(_IntegerObject7){function MsgId(attributes){_classCallCheck(this,MsgId);return _callSuper(this,MsgId,[CONFIG_NS_ID,"msgId",1,function(n){return n>=1;}]);}_inherits(MsgId,_IntegerObject7);return _createClass(MsgId);}(IntegerObject);var NameAttr=/*#__PURE__*/function(_StringObject22){function NameAttr(attributes){_classCallCheck(this,NameAttr);return _callSuper(this,NameAttr,[CONFIG_NS_ID,"nameAttr"]);}_inherits(NameAttr,_StringObject22);return _createClass(NameAttr);}(StringObject);var NeverEmbed=/*#__PURE__*/function(_ContentObject17){function NeverEmbed(attributes){_classCallCheck(this,NeverEmbed);return _callSuper(this,NeverEmbed,[CONFIG_NS_ID,"neverEmbed"]);}_inherits(NeverEmbed,_ContentObject17);return _createClass(NeverEmbed);}(ContentObject);var NumberOfCopies=/*#__PURE__*/function(_IntegerObject8){function NumberOfCopies(attributes){_classCallCheck(this,NumberOfCopies);return _callSuper(this,NumberOfCopies,[CONFIG_NS_ID,"numberOfCopies",null,function(n){return n>=2&&n<=5;}]);}_inherits(NumberOfCopies,_IntegerObject8);return _createClass(NumberOfCopies);}(IntegerObject);var OpenAction=/*#__PURE__*/function(_XFAObject114){function OpenAction(attributes){var _this204;_classCallCheck(this,OpenAction);_this204=_callSuper(this,OpenAction,[CONFIG_NS_ID,"openAction",true]);_this204.destination=null;return _this204;}_inherits(OpenAction,_XFAObject114);return _createClass(OpenAction);}(XFAObject);var Output=/*#__PURE__*/function(_XFAObject115){function Output(attributes){var _this205;_classCallCheck(this,Output);_this205=_callSuper(this,Output,[CONFIG_NS_ID,"output",true]);_this205.to=null;_this205.type=null;_this205.uri=null;return _this205;}_inherits(Output,_XFAObject115);return _createClass(Output);}(XFAObject);var OutputBin=/*#__PURE__*/function(_StringObject23){function OutputBin(attributes){_classCallCheck(this,OutputBin);return _callSuper(this,OutputBin,[CONFIG_NS_ID,"outputBin"]);}_inherits(OutputBin,_StringObject23);return _createClass(OutputBin);}(StringObject);var OutputXSL=/*#__PURE__*/function(_XFAObject116){function OutputXSL(attributes){var _this206;_classCallCheck(this,OutputXSL);_this206=_callSuper(this,OutputXSL,[CONFIG_NS_ID,"outputXSL",true]);_this206.uri=null;return _this206;}_inherits(OutputXSL,_XFAObject116);return _createClass(OutputXSL);}(XFAObject);var Overprint=/*#__PURE__*/function(_OptionObject19){function Overprint(attributes){_classCallCheck(this,Overprint);return _callSuper(this,Overprint,[CONFIG_NS_ID,"overprint",["none","both","draw","field"]]);}_inherits(Overprint,_OptionObject19);return _createClass(Overprint);}(OptionObject);var Packets=/*#__PURE__*/function(_StringObject24){function Packets(attributes){_classCallCheck(this,Packets);return _callSuper(this,Packets,[CONFIG_NS_ID,"packets"]);}_inherits(Packets,_StringObject24);return _createClass(Packets,[{key:$finalize,value:function value(){if(this[$content]==="*"){return;}this[$content]=this[$content].trim().split(/\\s+/).filter(function(x){return["config","datasets","template","xfdf","xslt"].includes(x);});}}]);}(StringObject);var PageOffset=/*#__PURE__*/function(_XFAObject117){function PageOffset(attributes){var _this207;_classCallCheck(this,PageOffset);_this207=_callSuper(this,PageOffset,[CONFIG_NS_ID,"pageOffset"]);_this207.x=getInteger({data:attributes.x,defaultValue:"useXDCSetting",validate:function validate(n){return true;}});_this207.y=getInteger({data:attributes.y,defaultValue:"useXDCSetting",validate:function validate(n){return true;}});return _this207;}_inherits(PageOffset,_XFAObject117);return _createClass(PageOffset);}(XFAObject);var PageRange=/*#__PURE__*/function(_StringObject25){function PageRange(attributes){_classCallCheck(this,PageRange);return _callSuper(this,PageRange,[CONFIG_NS_ID,"pageRange"]);}_inherits(PageRange,_StringObject25);return _createClass(PageRange,[{key:$finalize,value:function value(){var numbers=this[$content].trim().split(/\\s+/).map(function(x){return parseInt(x,10);});var ranges=[];for(var i=0,ii=numbers.length;i<ii;i+=2){ranges.push(numbers.slice(i,i+2));}this[$content]=ranges;}}]);}(StringObject);var Pagination=/*#__PURE__*/function(_OptionObject20){function Pagination(attributes){_classCallCheck(this,Pagination);return _callSuper(this,Pagination,[CONFIG_NS_ID,"pagination",["simplex","duplexShortEdge","duplexLongEdge"]]);}_inherits(Pagination,_OptionObject20);return _createClass(Pagination);}(OptionObject);var PaginationOverride=/*#__PURE__*/function(_OptionObject21){function PaginationOverride(attributes){_classCallCheck(this,PaginationOverride);return _callSuper(this,PaginationOverride,[CONFIG_NS_ID,"paginationOverride",["none","forceDuplex","forceDuplexLongEdge","forceDuplexShortEdge","forceSimplex"]]);}_inherits(PaginationOverride,_OptionObject21);return _createClass(PaginationOverride);}(OptionObject);var Part=/*#__PURE__*/function(_IntegerObject9){function Part(attributes){_classCallCheck(this,Part);return _callSuper(this,Part,[CONFIG_NS_ID,"part",1,function(n){return false;}]);}_inherits(Part,_IntegerObject9);return _createClass(Part);}(IntegerObject);var Pcl=/*#__PURE__*/function(_XFAObject118){function Pcl(attributes){var _this208;_classCallCheck(this,Pcl);_this208=_callSuper(this,Pcl,[CONFIG_NS_ID,"pcl",true]);_this208.name=attributes.name||"";_this208.batchOutput=null;_this208.fontInfo=null;_this208.jog=null;_this208.mediumInfo=null;_this208.outputBin=null;_this208.pageOffset=null;_this208.staple=null;_this208.xdc=null;return _this208;}_inherits(Pcl,_XFAObject118);return _createClass(Pcl);}(XFAObject);var Pdf=/*#__PURE__*/function(_XFAObject119){function Pdf(attributes){var _this209;_classCallCheck(this,Pdf);_this209=_callSuper(this,Pdf,[CONFIG_NS_ID,"pdf",true]);_this209.name=attributes.name||"";_this209.adobeExtensionLevel=null;_this209.batchOutput=null;_this209.compression=null;_this209.creator=null;_this209.encryption=null;_this209.fontInfo=null;_this209.interactive=null;_this209.linearized=null;_this209.openAction=null;_this209.pdfa=null;_this209.producer=null;_this209.renderPolicy=null;_this209.scriptModel=null;_this209.silentPrint=null;_this209.submitFormat=null;_this209.tagged=null;_this209.version=null;_this209.viewerPreferences=null;_this209.xdc=null;return _this209;}_inherits(Pdf,_XFAObject119);return _createClass(Pdf);}(XFAObject);var Pdfa=/*#__PURE__*/function(_XFAObject120){function Pdfa(attributes){var _this210;_classCallCheck(this,Pdfa);_this210=_callSuper(this,Pdfa,[CONFIG_NS_ID,"pdfa",true]);_this210.amd=null;_this210.conformance=null;_this210.includeXDPContent=null;_this210.part=null;return _this210;}_inherits(Pdfa,_XFAObject120);return _createClass(Pdfa);}(XFAObject);var Permissions=/*#__PURE__*/function(_XFAObject121){function Permissions(attributes){var _this211;_classCallCheck(this,Permissions);_this211=_callSuper(this,Permissions,[CONFIG_NS_ID,"permissions",true]);_this211.accessibleContent=null;_this211.change=null;_this211.contentCopy=null;_this211.documentAssembly=null;_this211.formFieldFilling=null;_this211.modifyAnnots=null;_this211.plaintextMetadata=null;_this211.print=null;_this211.printHighQuality=null;return _this211;}_inherits(Permissions,_XFAObject121);return _createClass(Permissions);}(XFAObject);var PickTrayByPDFSize=/*#__PURE__*/function(_Option17){function PickTrayByPDFSize(attributes){_classCallCheck(this,PickTrayByPDFSize);return _callSuper(this,PickTrayByPDFSize,[CONFIG_NS_ID,"pickTrayByPDFSize"]);}_inherits(PickTrayByPDFSize,_Option17);return _createClass(PickTrayByPDFSize);}(Option01);var config_Picture=/*#__PURE__*/function(_StringObject26){function config_Picture(attributes){_classCallCheck(this,config_Picture);return _callSuper(this,config_Picture,[CONFIG_NS_ID,"picture"]);}_inherits(config_Picture,_StringObject26);return _createClass(config_Picture);}(StringObject);var PlaintextMetadata=/*#__PURE__*/function(_Option18){function PlaintextMetadata(attributes){_classCallCheck(this,PlaintextMetadata);return _callSuper(this,PlaintextMetadata,[CONFIG_NS_ID,"plaintextMetadata"]);}_inherits(PlaintextMetadata,_Option18);return _createClass(PlaintextMetadata);}(Option01);var Presence=/*#__PURE__*/function(_OptionObject22){function Presence(attributes){_classCallCheck(this,Presence);return _callSuper(this,Presence,[CONFIG_NS_ID,"presence",["preserve","dissolve","dissolveStructure","ignore","remove"]]);}_inherits(Presence,_OptionObject22);return _createClass(Presence);}(OptionObject);var Present=/*#__PURE__*/function(_XFAObject122){function Present(attributes){var _this212;_classCallCheck(this,Present);_this212=_callSuper(this,Present,[CONFIG_NS_ID,"present",true]);_this212.behaviorOverride=null;_this212.cache=null;_this212.common=null;_this212.copies=null;_this212.destination=null;_this212.incrementalMerge=null;_this212.layout=null;_this212.output=null;_this212.overprint=null;_this212.pagination=null;_this212.paginationOverride=null;_this212.script=null;_this212.validate=null;_this212.xdp=null;_this212.driver=new XFAObjectArray();_this212.labelPrinter=new XFAObjectArray();_this212.pcl=new XFAObjectArray();_this212.pdf=new XFAObjectArray();_this212.ps=new XFAObjectArray();_this212.submitUrl=new XFAObjectArray();_this212.webClient=new XFAObjectArray();_this212.zpl=new XFAObjectArray();return _this212;}_inherits(Present,_XFAObject122);return _createClass(Present);}(XFAObject);var Print=/*#__PURE__*/function(_Option19){function Print(attributes){_classCallCheck(this,Print);return _callSuper(this,Print,[CONFIG_NS_ID,"print"]);}_inherits(Print,_Option19);return _createClass(Print);}(Option01);var PrintHighQuality=/*#__PURE__*/function(_Option20){function PrintHighQuality(attributes){_classCallCheck(this,PrintHighQuality);return _callSuper(this,PrintHighQuality,[CONFIG_NS_ID,"printHighQuality"]);}_inherits(PrintHighQuality,_Option20);return _createClass(PrintHighQuality);}(Option01);var PrintScaling=/*#__PURE__*/function(_OptionObject23){function PrintScaling(attributes){_classCallCheck(this,PrintScaling);return _callSuper(this,PrintScaling,[CONFIG_NS_ID,"printScaling",["appdefault","noScaling"]]);}_inherits(PrintScaling,_OptionObject23);return _createClass(PrintScaling);}(OptionObject);var PrinterName=/*#__PURE__*/function(_StringObject27){function PrinterName(attributes){_classCallCheck(this,PrinterName);return _callSuper(this,PrinterName,[CONFIG_NS_ID,"printerName"]);}_inherits(PrinterName,_StringObject27);return _createClass(PrinterName);}(StringObject);var Producer=/*#__PURE__*/function(_StringObject28){function Producer(attributes){_classCallCheck(this,Producer);return _callSuper(this,Producer,[CONFIG_NS_ID,"producer"]);}_inherits(Producer,_StringObject28);return _createClass(Producer);}(StringObject);var Ps=/*#__PURE__*/function(_XFAObject123){function Ps(attributes){var _this213;_classCallCheck(this,Ps);_this213=_callSuper(this,Ps,[CONFIG_NS_ID,"ps",true]);_this213.name=attributes.name||"";_this213.batchOutput=null;_this213.fontInfo=null;_this213.jog=null;_this213.mediumInfo=null;_this213.outputBin=null;_this213.staple=null;_this213.xdc=null;return _this213;}_inherits(Ps,_XFAObject123);return _createClass(Ps);}(XFAObject);var Range=/*#__PURE__*/function(_ContentObject18){function Range(attributes){_classCallCheck(this,Range);return _callSuper(this,Range,[CONFIG_NS_ID,"range"]);}_inherits(Range,_ContentObject18);return _createClass(Range,[{key:$finalize,value:function value(){this[$content]=this[$content].trim().split(/\\s*,\\s*/,2).map(function(range){return range.split("-").map(function(x){return parseInt(x.trim(),10);});}).filter(function(range){return range.every(function(x){return!isNaN(x);});}).map(function(range){if(range.length===1){range.push(range[0]);}return range;});}}]);}(ContentObject);var Record=/*#__PURE__*/function(_ContentObject19){function Record(attributes){_classCallCheck(this,Record);return _callSuper(this,Record,[CONFIG_NS_ID,"record"]);}_inherits(Record,_ContentObject19);return _createClass(Record,[{key:$finalize,value:function value(){this[$content]=this[$content].trim();var n=parseInt(this[$content],10);if(!isNaN(n)&&n>=0){this[$content]=n;}}}]);}(ContentObject);var Relevant=/*#__PURE__*/function(_ContentObject20){function Relevant(attributes){_classCallCheck(this,Relevant);return _callSuper(this,Relevant,[CONFIG_NS_ID,"relevant"]);}_inherits(Relevant,_ContentObject20);return _createClass(Relevant,[{key:$finalize,value:function value(){this[$content]=this[$content].trim().split(/\\s+/);}}]);}(ContentObject);var Rename=/*#__PURE__*/function(_ContentObject21){function Rename(attributes){_classCallCheck(this,Rename);return _callSuper(this,Rename,[CONFIG_NS_ID,"rename"]);}_inherits(Rename,_ContentObject21);return _createClass(Rename,[{key:$finalize,value:function value(){this[$content]=this[$content].trim();if(this[$content].toLowerCase().startsWith("xml")||new RegExp("[\\\\p{L}_][\\\\p{L}\\\\d._\\\\p{M}-]*","u").test(this[$content])){warn("XFA - Rename: invalid XFA name");}}}]);}(ContentObject);var RenderPolicy=/*#__PURE__*/function(_OptionObject24){function RenderPolicy(attributes){_classCallCheck(this,RenderPolicy);return _callSuper(this,RenderPolicy,[CONFIG_NS_ID,"renderPolicy",["server","client"]]);}_inherits(RenderPolicy,_OptionObject24);return _createClass(RenderPolicy);}(OptionObject);var RunScripts=/*#__PURE__*/function(_OptionObject25){function RunScripts(attributes){_classCallCheck(this,RunScripts);return _callSuper(this,RunScripts,[CONFIG_NS_ID,"runScripts",["both","client","none","server"]]);}_inherits(RunScripts,_OptionObject25);return _createClass(RunScripts);}(OptionObject);var config_Script=/*#__PURE__*/function(_XFAObject124){function config_Script(attributes){var _this214;_classCallCheck(this,config_Script);_this214=_callSuper(this,config_Script,[CONFIG_NS_ID,"script",true]);_this214.currentPage=null;_this214.exclude=null;_this214.runScripts=null;return _this214;}_inherits(config_Script,_XFAObject124);return _createClass(config_Script);}(XFAObject);var ScriptModel=/*#__PURE__*/function(_OptionObject26){function ScriptModel(attributes){_classCallCheck(this,ScriptModel);return _callSuper(this,ScriptModel,[CONFIG_NS_ID,"scriptModel",["XFA","none"]]);}_inherits(ScriptModel,_OptionObject26);return _createClass(ScriptModel);}(OptionObject);var Severity=/*#__PURE__*/function(_OptionObject27){function Severity(attributes){_classCallCheck(this,Severity);return _callSuper(this,Severity,[CONFIG_NS_ID,"severity",["ignore","error","information","trace","warning"]]);}_inherits(Severity,_OptionObject27);return _createClass(Severity);}(OptionObject);var SilentPrint=/*#__PURE__*/function(_XFAObject125){function SilentPrint(attributes){var _this215;_classCallCheck(this,SilentPrint);_this215=_callSuper(this,SilentPrint,[CONFIG_NS_ID,"silentPrint",true]);_this215.addSilentPrint=null;_this215.printerName=null;return _this215;}_inherits(SilentPrint,_XFAObject125);return _createClass(SilentPrint);}(XFAObject);var Staple=/*#__PURE__*/function(_XFAObject126){function Staple(attributes){var _this216;_classCallCheck(this,Staple);_this216=_callSuper(this,Staple,[CONFIG_NS_ID,"staple"]);_this216.mode=getStringOption(attributes.mode,["usePrinterSetting","on","off"]);return _this216;}_inherits(Staple,_XFAObject126);return _createClass(Staple);}(XFAObject);var StartNode=/*#__PURE__*/function(_StringObject29){function StartNode(attributes){_classCallCheck(this,StartNode);return _callSuper(this,StartNode,[CONFIG_NS_ID,"startNode"]);}_inherits(StartNode,_StringObject29);return _createClass(StartNode);}(StringObject);var StartPage=/*#__PURE__*/function(_IntegerObject10){function StartPage(attributes){_classCallCheck(this,StartPage);return _callSuper(this,StartPage,[CONFIG_NS_ID,"startPage",0,function(n){return true;}]);}_inherits(StartPage,_IntegerObject10);return _createClass(StartPage);}(IntegerObject);var SubmitFormat=/*#__PURE__*/function(_OptionObject28){function SubmitFormat(attributes){_classCallCheck(this,SubmitFormat);return _callSuper(this,SubmitFormat,[CONFIG_NS_ID,"submitFormat",["html","delegate","fdf","xml","pdf"]]);}_inherits(SubmitFormat,_OptionObject28);return _createClass(SubmitFormat);}(OptionObject);var SubmitUrl=/*#__PURE__*/function(_StringObject30){function SubmitUrl(attributes){_classCallCheck(this,SubmitUrl);return _callSuper(this,SubmitUrl,[CONFIG_NS_ID,"submitUrl"]);}_inherits(SubmitUrl,_StringObject30);return _createClass(SubmitUrl);}(StringObject);var SubsetBelow=/*#__PURE__*/function(_IntegerObject11){function SubsetBelow(attributes){_classCallCheck(this,SubsetBelow);return _callSuper(this,SubsetBelow,[CONFIG_NS_ID,"subsetBelow",100,function(n){return n>=0&&n<=100;}]);}_inherits(SubsetBelow,_IntegerObject11);return _createClass(SubsetBelow);}(IntegerObject);var SuppressBanner=/*#__PURE__*/function(_Option21){function SuppressBanner(attributes){_classCallCheck(this,SuppressBanner);return _callSuper(this,SuppressBanner,[CONFIG_NS_ID,"suppressBanner"]);}_inherits(SuppressBanner,_Option21);return _createClass(SuppressBanner);}(Option01);var Tagged=/*#__PURE__*/function(_Option22){function Tagged(attributes){_classCallCheck(this,Tagged);return _callSuper(this,Tagged,[CONFIG_NS_ID,"tagged"]);}_inherits(Tagged,_Option22);return _createClass(Tagged);}(Option01);var config_Template=/*#__PURE__*/function(_XFAObject127){function config_Template(attributes){var _this217;_classCallCheck(this,config_Template);_this217=_callSuper(this,config_Template,[CONFIG_NS_ID,"template",true]);_this217.base=null;_this217.relevant=null;_this217.startPage=null;_this217.uri=null;_this217.xsl=null;return _this217;}_inherits(config_Template,_XFAObject127);return _createClass(config_Template);}(XFAObject);var Threshold=/*#__PURE__*/function(_OptionObject29){function Threshold(attributes){_classCallCheck(this,Threshold);return _callSuper(this,Threshold,[CONFIG_NS_ID,"threshold",["trace","error","information","warning"]]);}_inherits(Threshold,_OptionObject29);return _createClass(Threshold);}(OptionObject);var To=/*#__PURE__*/function(_OptionObject30){function To(attributes){_classCallCheck(this,To);return _callSuper(this,To,[CONFIG_NS_ID,"to",["null","memory","stderr","stdout","system","uri"]]);}_inherits(To,_OptionObject30);return _createClass(To);}(OptionObject);var TemplateCache=/*#__PURE__*/function(_XFAObject128){function TemplateCache(attributes){var _this218;_classCallCheck(this,TemplateCache);_this218=_callSuper(this,TemplateCache,[CONFIG_NS_ID,"templateCache"]);_this218.maxEntries=getInteger({data:attributes.maxEntries,defaultValue:5,validate:function validate(n){return n>=0;}});return _this218;}_inherits(TemplateCache,_XFAObject128);return _createClass(TemplateCache);}(XFAObject);var Trace=/*#__PURE__*/function(_XFAObject129){function Trace(attributes){var _this219;_classCallCheck(this,Trace);_this219=_callSuper(this,Trace,[CONFIG_NS_ID,"trace",true]);_this219.area=new XFAObjectArray();return _this219;}_inherits(Trace,_XFAObject129);return _createClass(Trace);}(XFAObject);var Transform=/*#__PURE__*/function(_XFAObject130){function Transform(attributes){var _this220;_classCallCheck(this,Transform);_this220=_callSuper(this,Transform,[CONFIG_NS_ID,"transform",true]);_this220.groupParent=null;_this220.ifEmpty=null;_this220.nameAttr=null;_this220.picture=null;_this220.presence=null;_this220.rename=null;_this220.whitespace=null;return _this220;}_inherits(Transform,_XFAObject130);return _createClass(Transform);}(XFAObject);var Type=/*#__PURE__*/function(_OptionObject31){function Type(attributes){_classCallCheck(this,Type);return _callSuper(this,Type,[CONFIG_NS_ID,"type",["none","ascii85","asciiHex","ccittfax","flate","lzw","runLength","native","xdp","mergedXDP"]]);}_inherits(Type,_OptionObject31);return _createClass(Type);}(OptionObject);var Uri=/*#__PURE__*/function(_StringObject31){function Uri(attributes){_classCallCheck(this,Uri);return _callSuper(this,Uri,[CONFIG_NS_ID,"uri"]);}_inherits(Uri,_StringObject31);return _createClass(Uri);}(StringObject);var config_Validate=/*#__PURE__*/function(_OptionObject32){function config_Validate(attributes){_classCallCheck(this,config_Validate);return _callSuper(this,config_Validate,[CONFIG_NS_ID,"validate",["preSubmit","prePrint","preExecute","preSave"]]);}_inherits(config_Validate,_OptionObject32);return _createClass(config_Validate);}(OptionObject);var ValidateApprovalSignatures=/*#__PURE__*/function(_ContentObject22){function ValidateApprovalSignatures(attributes){_classCallCheck(this,ValidateApprovalSignatures);return _callSuper(this,ValidateApprovalSignatures,[CONFIG_NS_ID,"validateApprovalSignatures"]);}_inherits(ValidateApprovalSignatures,_ContentObject22);return _createClass(ValidateApprovalSignatures,[{key:$finalize,value:function value(){this[$content]=this[$content].trim().split(/\\s+/).filter(function(x){return["docReady","postSign"].includes(x);});}}]);}(ContentObject);var ValidationMessaging=/*#__PURE__*/function(_OptionObject33){function ValidationMessaging(attributes){_classCallCheck(this,ValidationMessaging);return _callSuper(this,ValidationMessaging,[CONFIG_NS_ID,"validationMessaging",["allMessagesIndividually","allMessagesTogether","firstMessageOnly","noMessages"]]);}_inherits(ValidationMessaging,_OptionObject33);return _createClass(ValidationMessaging);}(OptionObject);var Version=/*#__PURE__*/function(_OptionObject34){function Version(attributes){_classCallCheck(this,Version);return _callSuper(this,Version,[CONFIG_NS_ID,"version",["1.7","1.6","1.5","1.4","1.3","1.2"]]);}_inherits(Version,_OptionObject34);return _createClass(Version);}(OptionObject);var VersionControl=/*#__PURE__*/function(_XFAObject131){function VersionControl(attributes){var _this221;_classCallCheck(this,VersionControl);_this221=_callSuper(this,VersionControl,[CONFIG_NS_ID,"VersionControl"]);_this221.outputBelow=getStringOption(attributes.outputBelow,["warn","error","update"]);_this221.sourceAbove=getStringOption(attributes.sourceAbove,["warn","error"]);_this221.sourceBelow=getStringOption(attributes.sourceBelow,["update","maintain"]);return _this221;}_inherits(VersionControl,_XFAObject131);return _createClass(VersionControl);}(XFAObject);var ViewerPreferences=/*#__PURE__*/function(_XFAObject132){function ViewerPreferences(attributes){var _this222;_classCallCheck(this,ViewerPreferences);_this222=_callSuper(this,ViewerPreferences,[CONFIG_NS_ID,"viewerPreferences",true]);_this222.ADBE_JSConsole=null;_this222.ADBE_JSDebugger=null;_this222.addViewerPreferences=null;_this222.duplexOption=null;_this222.enforce=null;_this222.numberOfCopies=null;_this222.pageRange=null;_this222.pickTrayByPDFSize=null;_this222.printScaling=null;return _this222;}_inherits(ViewerPreferences,_XFAObject132);return _createClass(ViewerPreferences);}(XFAObject);var WebClient=/*#__PURE__*/function(_XFAObject133){function WebClient(attributes){var _this223;_classCallCheck(this,WebClient);_this223=_callSuper(this,WebClient,[CONFIG_NS_ID,"webClient",true]);_this223.name=attributes.name?attributes.name.trim():"";_this223.fontInfo=null;_this223.xdc=null;return _this223;}_inherits(WebClient,_XFAObject133);return _createClass(WebClient);}(XFAObject);var Whitespace=/*#__PURE__*/function(_OptionObject35){function Whitespace(attributes){_classCallCheck(this,Whitespace);return _callSuper(this,Whitespace,[CONFIG_NS_ID,"whitespace",["preserve","ltrim","normalize","rtrim","trim"]]);}_inherits(Whitespace,_OptionObject35);return _createClass(Whitespace);}(OptionObject);var Window=/*#__PURE__*/function(_ContentObject23){function Window(attributes){_classCallCheck(this,Window);return _callSuper(this,Window,[CONFIG_NS_ID,"window"]);}_inherits(Window,_ContentObject23);return _createClass(Window,[{key:$finalize,value:function value(){var pair=this[$content].trim().split(/\\s*,\\s*/,2).map(function(x){return parseInt(x,10);});if(pair.some(function(x){return isNaN(x);})){this[$content]=[0,0];return;}if(pair.length===1){pair.push(pair[0]);}this[$content]=pair;}}]);}(ContentObject);var Xdc=/*#__PURE__*/function(_XFAObject134){function Xdc(attributes){var _this224;_classCallCheck(this,Xdc);_this224=_callSuper(this,Xdc,[CONFIG_NS_ID,"xdc",true]);_this224.uri=new XFAObjectArray();_this224.xsl=new XFAObjectArray();return _this224;}_inherits(Xdc,_XFAObject134);return _createClass(Xdc);}(XFAObject);var Xdp=/*#__PURE__*/function(_XFAObject135){function Xdp(attributes){var _this225;_classCallCheck(this,Xdp);_this225=_callSuper(this,Xdp,[CONFIG_NS_ID,"xdp",true]);_this225.packets=null;return _this225;}_inherits(Xdp,_XFAObject135);return _createClass(Xdp);}(XFAObject);var Xsl=/*#__PURE__*/function(_XFAObject136){function Xsl(attributes){var _this226;_classCallCheck(this,Xsl);_this226=_callSuper(this,Xsl,[CONFIG_NS_ID,"xsl",true]);_this226.debug=null;_this226.uri=null;return _this226;}_inherits(Xsl,_XFAObject136);return _createClass(Xsl);}(XFAObject);var Zpl=/*#__PURE__*/function(_XFAObject137){function Zpl(attributes){var _this227;_classCallCheck(this,Zpl);_this227=_callSuper(this,Zpl,[CONFIG_NS_ID,"zpl",true]);_this227.name=attributes.name?attributes.name.trim():"";_this227.batchOutput=null;_this227.flipLabel=null;_this227.fontInfo=null;_this227.xdc=null;return _this227;}_inherits(Zpl,_XFAObject137);return _createClass(Zpl);}(XFAObject);var ConfigNamespace=/*#__PURE__*/function(){function ConfigNamespace(){_classCallCheck(this,ConfigNamespace);}return _createClass(ConfigNamespace,null,[{key:$buildXFAObject,value:function value(name,attributes){if(ConfigNamespace.hasOwnProperty(name)){return ConfigNamespace[name](attributes);}return undefined;}},{key:"acrobat",value:function acrobat(attrs){return new Acrobat(attrs);}},{key:"acrobat7",value:function acrobat7(attrs){return new Acrobat7(attrs);}},{key:"ADBE_JSConsole",value:function ADBE_JSConsole(attrs){return new _ADBE_JSConsole(attrs);}},{key:"ADBE_JSDebugger",value:function ADBE_JSDebugger(attrs){return new _ADBE_JSDebugger(attrs);}},{key:"addSilentPrint",value:function addSilentPrint(attrs){return new AddSilentPrint(attrs);}},{key:"addViewerPreferences",value:function addViewerPreferences(attrs){return new AddViewerPreferences(attrs);}},{key:"adjustData",value:function adjustData(attrs){return new AdjustData(attrs);}},{key:"adobeExtensionLevel",value:function adobeExtensionLevel(attrs){return new AdobeExtensionLevel(attrs);}},{key:"agent",value:function agent(attrs){return new Agent(attrs);}},{key:"alwaysEmbed",value:function alwaysEmbed(attrs){return new AlwaysEmbed(attrs);}},{key:"amd",value:function amd(attrs){return new Amd(attrs);}},{key:"area",value:function area(attrs){return new config_Area(attrs);}},{key:"attributes",value:function attributes(attrs){return new Attributes(attrs);}},{key:"autoSave",value:function autoSave(attrs){return new AutoSave(attrs);}},{key:"base",value:function base(attrs){return new Base(attrs);}},{key:"batchOutput",value:function batchOutput(attrs){return new BatchOutput(attrs);}},{key:"behaviorOverride",value:function behaviorOverride(attrs){return new BehaviorOverride(attrs);}},{key:"cache",value:function cache(attrs){return new Cache(attrs);}},{key:"change",value:function change(attrs){return new Change(attrs);}},{key:"common",value:function common(attrs){return new Common(attrs);}},{key:"compress",value:function compress(attrs){return new Compress(attrs);}},{key:"compressLogicalStructure",value:function compressLogicalStructure(attrs){return new CompressLogicalStructure(attrs);}},{key:"compressObjectStream",value:function compressObjectStream(attrs){return new CompressObjectStream(attrs);}},{key:"compression",value:function compression(attrs){return new Compression(attrs);}},{key:"config",value:function config(attrs){return new Config(attrs);}},{key:"conformance",value:function conformance(attrs){return new Conformance(attrs);}},{key:"contentCopy",value:function contentCopy(attrs){return new ContentCopy(attrs);}},{key:"copies",value:function copies(attrs){return new Copies(attrs);}},{key:"creator",value:function creator(attrs){return new Creator(attrs);}},{key:"currentPage",value:function currentPage(attrs){return new CurrentPage(attrs);}},{key:"data",value:function data(attrs){return new Data(attrs);}},{key:"debug",value:function debug(attrs){return new Debug(attrs);}},{key:"defaultTypeface",value:function defaultTypeface(attrs){return new DefaultTypeface(attrs);}},{key:"destination",value:function destination(attrs){return new Destination(attrs);}},{key:"documentAssembly",value:function documentAssembly(attrs){return new DocumentAssembly(attrs);}},{key:"driver",value:function driver(attrs){return new Driver(attrs);}},{key:"duplexOption",value:function duplexOption(attrs){return new DuplexOption(attrs);}},{key:"dynamicRender",value:function dynamicRender(attrs){return new DynamicRender(attrs);}},{key:"embed",value:function embed(attrs){return new Embed(attrs);}},{key:"encrypt",value:function encrypt(attrs){return new config_Encrypt(attrs);}},{key:"encryption",value:function encryption(attrs){return new config_Encryption(attrs);}},{key:"encryptionLevel",value:function encryptionLevel(attrs){return new EncryptionLevel(attrs);}},{key:"enforce",value:function enforce(attrs){return new Enforce(attrs);}},{key:"equate",value:function equate(attrs){return new Equate(attrs);}},{key:"equateRange",value:function equateRange(attrs){return new EquateRange(attrs);}},{key:"exclude",value:function exclude(attrs){return new Exclude(attrs);}},{key:"excludeNS",value:function excludeNS(attrs){return new ExcludeNS(attrs);}},{key:"flipLabel",value:function flipLabel(attrs){return new FlipLabel(attrs);}},{key:"fontInfo",value:function fontInfo(attrs){return new config_FontInfo(attrs);}},{key:"formFieldFilling",value:function formFieldFilling(attrs){return new FormFieldFilling(attrs);}},{key:"groupParent",value:function groupParent(attrs){return new GroupParent(attrs);}},{key:"ifEmpty",value:function ifEmpty(attrs){return new IfEmpty(attrs);}},{key:"includeXDPContent",value:function includeXDPContent(attrs){return new IncludeXDPContent(attrs);}},{key:"incrementalLoad",value:function incrementalLoad(attrs){return new IncrementalLoad(attrs);}},{key:"incrementalMerge",value:function incrementalMerge(attrs){return new IncrementalMerge(attrs);}},{key:"interactive",value:function interactive(attrs){return new Interactive(attrs);}},{key:"jog",value:function jog(attrs){return new Jog(attrs);}},{key:"labelPrinter",value:function labelPrinter(attrs){return new LabelPrinter(attrs);}},{key:"layout",value:function layout(attrs){return new Layout(attrs);}},{key:"level",value:function level(attrs){return new Level(attrs);}},{key:"linearized",value:function linearized(attrs){return new Linearized(attrs);}},{key:"locale",value:function locale(attrs){return new Locale(attrs);}},{key:"localeSet",value:function localeSet(attrs){return new LocaleSet(attrs);}},{key:"log",value:function log(attrs){return new Log(attrs);}},{key:"map",value:function map(attrs){return new MapElement(attrs);}},{key:"mediumInfo",value:function mediumInfo(attrs){return new MediumInfo(attrs);}},{key:"message",value:function message(attrs){return new config_Message(attrs);}},{key:"messaging",value:function messaging(attrs){return new Messaging(attrs);}},{key:"mode",value:function mode(attrs){return new Mode(attrs);}},{key:"modifyAnnots",value:function modifyAnnots(attrs){return new ModifyAnnots(attrs);}},{key:"msgId",value:function msgId(attrs){return new MsgId(attrs);}},{key:"nameAttr",value:function nameAttr(attrs){return new NameAttr(attrs);}},{key:"neverEmbed",value:function neverEmbed(attrs){return new NeverEmbed(attrs);}},{key:"numberOfCopies",value:function numberOfCopies(attrs){return new NumberOfCopies(attrs);}},{key:"openAction",value:function openAction(attrs){return new OpenAction(attrs);}},{key:"output",value:function output(attrs){return new Output(attrs);}},{key:"outputBin",value:function outputBin(attrs){return new OutputBin(attrs);}},{key:"outputXSL",value:function outputXSL(attrs){return new OutputXSL(attrs);}},{key:"overprint",value:function overprint(attrs){return new Overprint(attrs);}},{key:"packets",value:function packets(attrs){return new Packets(attrs);}},{key:"pageOffset",value:function pageOffset(attrs){return new PageOffset(attrs);}},{key:"pageRange",value:function pageRange(attrs){return new PageRange(attrs);}},{key:"pagination",value:function pagination(attrs){return new Pagination(attrs);}},{key:"paginationOverride",value:function paginationOverride(attrs){return new PaginationOverride(attrs);}},{key:"part",value:function part(attrs){return new Part(attrs);}},{key:"pcl",value:function pcl(attrs){return new Pcl(attrs);}},{key:"pdf",value:function pdf(attrs){return new Pdf(attrs);}},{key:"pdfa",value:function pdfa(attrs){return new Pdfa(attrs);}},{key:"permissions",value:function permissions(attrs){return new Permissions(attrs);}},{key:"pickTrayByPDFSize",value:function pickTrayByPDFSize(attrs){return new PickTrayByPDFSize(attrs);}},{key:"picture",value:function picture(attrs){return new config_Picture(attrs);}},{key:"plaintextMetadata",value:function plaintextMetadata(attrs){return new PlaintextMetadata(attrs);}},{key:"presence",value:function presence(attrs){return new Presence(attrs);}},{key:"present",value:function present(attrs){return new Present(attrs);}},{key:"print",value:function print(attrs){return new Print(attrs);}},{key:"printHighQuality",value:function printHighQuality(attrs){return new PrintHighQuality(attrs);}},{key:"printScaling",value:function printScaling(attrs){return new PrintScaling(attrs);}},{key:"printerName",value:function printerName(attrs){return new PrinterName(attrs);}},{key:"producer",value:function producer(attrs){return new Producer(attrs);}},{key:"ps",value:function ps(attrs){return new Ps(attrs);}},{key:"range",value:function range(attrs){return new Range(attrs);}},{key:"record",value:function record(attrs){return new Record(attrs);}},{key:"relevant",value:function relevant(attrs){return new Relevant(attrs);}},{key:"rename",value:function rename(attrs){return new Rename(attrs);}},{key:"renderPolicy",value:function renderPolicy(attrs){return new RenderPolicy(attrs);}},{key:"runScripts",value:function runScripts(attrs){return new RunScripts(attrs);}},{key:"script",value:function script(attrs){return new config_Script(attrs);}},{key:"scriptModel",value:function scriptModel(attrs){return new ScriptModel(attrs);}},{key:"severity",value:function severity(attrs){return new Severity(attrs);}},{key:"silentPrint",value:function silentPrint(attrs){return new SilentPrint(attrs);}},{key:"staple",value:function staple(attrs){return new Staple(attrs);}},{key:"startNode",value:function startNode(attrs){return new StartNode(attrs);}},{key:"startPage",value:function startPage(attrs){return new StartPage(attrs);}},{key:"submitFormat",value:function submitFormat(attrs){return new SubmitFormat(attrs);}},{key:"submitUrl",value:function submitUrl(attrs){return new SubmitUrl(attrs);}},{key:"subsetBelow",value:function subsetBelow(attrs){return new SubsetBelow(attrs);}},{key:"suppressBanner",value:function suppressBanner(attrs){return new SuppressBanner(attrs);}},{key:"tagged",value:function tagged(attrs){return new Tagged(attrs);}},{key:"template",value:function template(attrs){return new config_Template(attrs);}},{key:"templateCache",value:function templateCache(attrs){return new TemplateCache(attrs);}},{key:"threshold",value:function threshold(attrs){return new Threshold(attrs);}},{key:"to",value:function to(attrs){return new To(attrs);}},{key:"trace",value:function trace(attrs){return new Trace(attrs);}},{key:"transform",value:function transform(attrs){return new Transform(attrs);}},{key:"type",value:function type(attrs){return new Type(attrs);}},{key:"uri",value:function uri(attrs){return new Uri(attrs);}},{key:"validate",value:function validate(attrs){return new config_Validate(attrs);}},{key:"validateApprovalSignatures",value:function validateApprovalSignatures(attrs){return new ValidateApprovalSignatures(attrs);}},{key:"validationMessaging",value:function validationMessaging(attrs){return new ValidationMessaging(attrs);}},{key:"version",value:function version(attrs){return new Version(attrs);}},{key:"versionControl",value:function versionControl(attrs){return new VersionControl(attrs);}},{key:"viewerPreferences",value:function viewerPreferences(attrs){return new ViewerPreferences(attrs);}},{key:"webClient",value:function webClient(attrs){return new WebClient(attrs);}},{key:"whitespace",value:function whitespace(attrs){return new Whitespace(attrs);}},{key:"window",value:function window(attrs){return new Window(attrs);}},{key:"xdc",value:function xdc(attrs){return new Xdc(attrs);}},{key:"xdp",value:function xdp(attrs){return new Xdp(attrs);}},{key:"xsl",value:function xsl(attrs){return new Xsl(attrs);}},{key:"zpl",value:function zpl(attrs){return new Zpl(attrs);}}]);}();;// ./src/core/xfa/connection_set.js\nvar CONNECTION_SET_NS_ID=NamespaceIds.connectionSet.id;var ConnectionSet=/*#__PURE__*/function(_XFAObject138){function ConnectionSet(attributes){var _this228;_classCallCheck(this,ConnectionSet);_this228=_callSuper(this,ConnectionSet,[CONNECTION_SET_NS_ID,"connectionSet",true]);_this228.wsdlConnection=new XFAObjectArray();_this228.xmlConnection=new XFAObjectArray();_this228.xsdConnection=new XFAObjectArray();return _this228;}_inherits(ConnectionSet,_XFAObject138);return _createClass(ConnectionSet);}(XFAObject);var EffectiveInputPolicy=/*#__PURE__*/function(_XFAObject139){function EffectiveInputPolicy(attributes){var _this229;_classCallCheck(this,EffectiveInputPolicy);_this229=_callSuper(this,EffectiveInputPolicy,[CONNECTION_SET_NS_ID,"effectiveInputPolicy"]);_this229.id=attributes.id||"";_this229.name=attributes.name||"";_this229.use=attributes.use||"";_this229.usehref=attributes.usehref||"";return _this229;}_inherits(EffectiveInputPolicy,_XFAObject139);return _createClass(EffectiveInputPolicy);}(XFAObject);var EffectiveOutputPolicy=/*#__PURE__*/function(_XFAObject140){function EffectiveOutputPolicy(attributes){var _this230;_classCallCheck(this,EffectiveOutputPolicy);_this230=_callSuper(this,EffectiveOutputPolicy,[CONNECTION_SET_NS_ID,"effectiveOutputPolicy"]);_this230.id=attributes.id||"";_this230.name=attributes.name||"";_this230.use=attributes.use||"";_this230.usehref=attributes.usehref||"";return _this230;}_inherits(EffectiveOutputPolicy,_XFAObject140);return _createClass(EffectiveOutputPolicy);}(XFAObject);var Operation=/*#__PURE__*/function(_StringObject32){function Operation(attributes){var _this231;_classCallCheck(this,Operation);_this231=_callSuper(this,Operation,[CONNECTION_SET_NS_ID,"operation"]);_this231.id=attributes.id||"";_this231.input=attributes.input||"";_this231.name=attributes.name||"";_this231.output=attributes.output||"";_this231.use=attributes.use||"";_this231.usehref=attributes.usehref||"";return _this231;}_inherits(Operation,_StringObject32);return _createClass(Operation);}(StringObject);var RootElement=/*#__PURE__*/function(_StringObject33){function RootElement(attributes){var _this232;_classCallCheck(this,RootElement);_this232=_callSuper(this,RootElement,[CONNECTION_SET_NS_ID,"rootElement"]);_this232.id=attributes.id||"";_this232.name=attributes.name||"";_this232.use=attributes.use||"";_this232.usehref=attributes.usehref||"";return _this232;}_inherits(RootElement,_StringObject33);return _createClass(RootElement);}(StringObject);var SoapAction=/*#__PURE__*/function(_StringObject34){function SoapAction(attributes){var _this233;_classCallCheck(this,SoapAction);_this233=_callSuper(this,SoapAction,[CONNECTION_SET_NS_ID,"soapAction"]);_this233.id=attributes.id||"";_this233.name=attributes.name||"";_this233.use=attributes.use||"";_this233.usehref=attributes.usehref||"";return _this233;}_inherits(SoapAction,_StringObject34);return _createClass(SoapAction);}(StringObject);var SoapAddress=/*#__PURE__*/function(_StringObject35){function SoapAddress(attributes){var _this234;_classCallCheck(this,SoapAddress);_this234=_callSuper(this,SoapAddress,[CONNECTION_SET_NS_ID,"soapAddress"]);_this234.id=attributes.id||"";_this234.name=attributes.name||"";_this234.use=attributes.use||"";_this234.usehref=attributes.usehref||"";return _this234;}_inherits(SoapAddress,_StringObject35);return _createClass(SoapAddress);}(StringObject);var connection_set_Uri=/*#__PURE__*/function(_StringObject36){function connection_set_Uri(attributes){var _this235;_classCallCheck(this,connection_set_Uri);_this235=_callSuper(this,connection_set_Uri,[CONNECTION_SET_NS_ID,"uri"]);_this235.id=attributes.id||"";_this235.name=attributes.name||"";_this235.use=attributes.use||"";_this235.usehref=attributes.usehref||"";return _this235;}_inherits(connection_set_Uri,_StringObject36);return _createClass(connection_set_Uri);}(StringObject);var WsdlAddress=/*#__PURE__*/function(_StringObject37){function WsdlAddress(attributes){var _this236;_classCallCheck(this,WsdlAddress);_this236=_callSuper(this,WsdlAddress,[CONNECTION_SET_NS_ID,"wsdlAddress"]);_this236.id=attributes.id||"";_this236.name=attributes.name||"";_this236.use=attributes.use||"";_this236.usehref=attributes.usehref||"";return _this236;}_inherits(WsdlAddress,_StringObject37);return _createClass(WsdlAddress);}(StringObject);var WsdlConnection=/*#__PURE__*/function(_XFAObject141){function WsdlConnection(attributes){var _this237;_classCallCheck(this,WsdlConnection);_this237=_callSuper(this,WsdlConnection,[CONNECTION_SET_NS_ID,"wsdlConnection",true]);_this237.dataDescription=attributes.dataDescription||"";_this237.name=attributes.name||"";_this237.effectiveInputPolicy=null;_this237.effectiveOutputPolicy=null;_this237.operation=null;_this237.soapAction=null;_this237.soapAddress=null;_this237.wsdlAddress=null;return _this237;}_inherits(WsdlConnection,_XFAObject141);return _createClass(WsdlConnection);}(XFAObject);var XmlConnection=/*#__PURE__*/function(_XFAObject142){function XmlConnection(attributes){var _this238;_classCallCheck(this,XmlConnection);_this238=_callSuper(this,XmlConnection,[CONNECTION_SET_NS_ID,"xmlConnection",true]);_this238.dataDescription=attributes.dataDescription||"";_this238.name=attributes.name||"";_this238.uri=null;return _this238;}_inherits(XmlConnection,_XFAObject142);return _createClass(XmlConnection);}(XFAObject);var XsdConnection=/*#__PURE__*/function(_XFAObject143){function XsdConnection(attributes){var _this239;_classCallCheck(this,XsdConnection);_this239=_callSuper(this,XsdConnection,[CONNECTION_SET_NS_ID,"xsdConnection",true]);_this239.dataDescription=attributes.dataDescription||"";_this239.name=attributes.name||"";_this239.rootElement=null;_this239.uri=null;return _this239;}_inherits(XsdConnection,_XFAObject143);return _createClass(XsdConnection);}(XFAObject);var ConnectionSetNamespace=/*#__PURE__*/function(){function ConnectionSetNamespace(){_classCallCheck(this,ConnectionSetNamespace);}return _createClass(ConnectionSetNamespace,null,[{key:$buildXFAObject,value:function value(name,attributes){if(ConnectionSetNamespace.hasOwnProperty(name)){return ConnectionSetNamespace[name](attributes);}return undefined;}},{key:"connectionSet",value:function connectionSet(attrs){return new ConnectionSet(attrs);}},{key:"effectiveInputPolicy",value:function effectiveInputPolicy(attrs){return new EffectiveInputPolicy(attrs);}},{key:"effectiveOutputPolicy",value:function effectiveOutputPolicy(attrs){return new EffectiveOutputPolicy(attrs);}},{key:"operation",value:function operation(attrs){return new Operation(attrs);}},{key:"rootElement",value:function rootElement(attrs){return new RootElement(attrs);}},{key:"soapAction",value:function soapAction(attrs){return new SoapAction(attrs);}},{key:"soapAddress",value:function soapAddress(attrs){return new SoapAddress(attrs);}},{key:"uri",value:function uri(attrs){return new connection_set_Uri(attrs);}},{key:"wsdlAddress",value:function wsdlAddress(attrs){return new WsdlAddress(attrs);}},{key:"wsdlConnection",value:function wsdlConnection(attrs){return new WsdlConnection(attrs);}},{key:"xmlConnection",value:function xmlConnection(attrs){return new XmlConnection(attrs);}},{key:"xsdConnection",value:function xsdConnection(attrs){return new XsdConnection(attrs);}}]);}();;// ./src/core/xfa/datasets.js\nvar DATASETS_NS_ID=NamespaceIds.datasets.id;var datasets_Data=/*#__PURE__*/function(_XmlObject){function datasets_Data(attributes){_classCallCheck(this,datasets_Data);return _callSuper(this,datasets_Data,[DATASETS_NS_ID,"data",attributes]);}_inherits(datasets_Data,_XmlObject);return _createClass(datasets_Data,[{key:$isNsAgnostic,value:function value(){return true;}}]);}(XmlObject);var Datasets=/*#__PURE__*/function(_XFAObject144){function Datasets(attributes){var _this240;_classCallCheck(this,Datasets);_this240=_callSuper(this,Datasets,[DATASETS_NS_ID,"datasets",true]);_this240.data=null;_this240.Signature=null;return _this240;}_inherits(Datasets,_XFAObject144);return _createClass(Datasets,[{key:$onChild,value:function value(child){var name=child[$nodeName];if(name==="data"&&child[$namespaceId]===DATASETS_NS_ID||name==="Signature"&&child[$namespaceId]===NamespaceIds.signature.id){this[name]=child;}this[$appendChild](child);}}]);}(XFAObject);var DatasetsNamespace=/*#__PURE__*/function(){function DatasetsNamespace(){_classCallCheck(this,DatasetsNamespace);}return _createClass(DatasetsNamespace,null,[{key:$buildXFAObject,value:function value(name,attributes){if(DatasetsNamespace.hasOwnProperty(name)){return DatasetsNamespace[name](attributes);}return undefined;}},{key:"datasets",value:function datasets(attributes){return new Datasets(attributes);}},{key:"data",value:function data(attributes){return new datasets_Data(attributes);}}]);}();;// ./src/core/xfa/locale_set.js\nvar LOCALE_SET_NS_ID=NamespaceIds.localeSet.id;var CalendarSymbols=/*#__PURE__*/function(_XFAObject145){function CalendarSymbols(attributes){var _this241;_classCallCheck(this,CalendarSymbols);_this241=_callSuper(this,CalendarSymbols,[LOCALE_SET_NS_ID,"calendarSymbols",true]);_this241.name="gregorian";_this241.dayNames=new XFAObjectArray(2);_this241.eraNames=null;_this241.meridiemNames=null;_this241.monthNames=new XFAObjectArray(2);return _this241;}_inherits(CalendarSymbols,_XFAObject145);return _createClass(CalendarSymbols);}(XFAObject);var CurrencySymbol=/*#__PURE__*/function(_StringObject38){function CurrencySymbol(attributes){var _this242;_classCallCheck(this,CurrencySymbol);_this242=_callSuper(this,CurrencySymbol,[LOCALE_SET_NS_ID,"currencySymbol"]);_this242.name=getStringOption(attributes.name,["symbol","isoname","decimal"]);return _this242;}_inherits(CurrencySymbol,_StringObject38);return _createClass(CurrencySymbol);}(StringObject);var CurrencySymbols=/*#__PURE__*/function(_XFAObject146){function CurrencySymbols(attributes){var _this243;_classCallCheck(this,CurrencySymbols);_this243=_callSuper(this,CurrencySymbols,[LOCALE_SET_NS_ID,"currencySymbols",true]);_this243.currencySymbol=new XFAObjectArray(3);return _this243;}_inherits(CurrencySymbols,_XFAObject146);return _createClass(CurrencySymbols);}(XFAObject);var DatePattern=/*#__PURE__*/function(_StringObject39){function DatePattern(attributes){var _this244;_classCallCheck(this,DatePattern);_this244=_callSuper(this,DatePattern,[LOCALE_SET_NS_ID,"datePattern"]);_this244.name=getStringOption(attributes.name,["full","long","med","short"]);return _this244;}_inherits(DatePattern,_StringObject39);return _createClass(DatePattern);}(StringObject);var DatePatterns=/*#__PURE__*/function(_XFAObject147){function DatePatterns(attributes){var _this245;_classCallCheck(this,DatePatterns);_this245=_callSuper(this,DatePatterns,[LOCALE_SET_NS_ID,"datePatterns",true]);_this245.datePattern=new XFAObjectArray(4);return _this245;}_inherits(DatePatterns,_XFAObject147);return _createClass(DatePatterns);}(XFAObject);var DateTimeSymbols=/*#__PURE__*/function(_ContentObject24){function DateTimeSymbols(attributes){_classCallCheck(this,DateTimeSymbols);return _callSuper(this,DateTimeSymbols,[LOCALE_SET_NS_ID,"dateTimeSymbols"]);}_inherits(DateTimeSymbols,_ContentObject24);return _createClass(DateTimeSymbols);}(ContentObject);var Day=/*#__PURE__*/function(_StringObject40){function Day(attributes){_classCallCheck(this,Day);return _callSuper(this,Day,[LOCALE_SET_NS_ID,"day"]);}_inherits(Day,_StringObject40);return _createClass(Day);}(StringObject);var DayNames=/*#__PURE__*/function(_XFAObject148){function DayNames(attributes){var _this246;_classCallCheck(this,DayNames);_this246=_callSuper(this,DayNames,[LOCALE_SET_NS_ID,"dayNames",true]);_this246.abbr=getInteger({data:attributes.abbr,defaultValue:0,validate:function validate(x){return x===1;}});_this246.day=new XFAObjectArray(7);return _this246;}_inherits(DayNames,_XFAObject148);return _createClass(DayNames);}(XFAObject);var Era=/*#__PURE__*/function(_StringObject41){function Era(attributes){_classCallCheck(this,Era);return _callSuper(this,Era,[LOCALE_SET_NS_ID,"era"]);}_inherits(Era,_StringObject41);return _createClass(Era);}(StringObject);var EraNames=/*#__PURE__*/function(_XFAObject149){function EraNames(attributes){var _this247;_classCallCheck(this,EraNames);_this247=_callSuper(this,EraNames,[LOCALE_SET_NS_ID,"eraNames",true]);_this247.era=new XFAObjectArray(2);return _this247;}_inherits(EraNames,_XFAObject149);return _createClass(EraNames);}(XFAObject);var locale_set_Locale=/*#__PURE__*/function(_XFAObject150){function locale_set_Locale(attributes){var _this248;_classCallCheck(this,locale_set_Locale);_this248=_callSuper(this,locale_set_Locale,[LOCALE_SET_NS_ID,"locale",true]);_this248.desc=attributes.desc||"";_this248.name="isoname";_this248.calendarSymbols=null;_this248.currencySymbols=null;_this248.datePatterns=null;_this248.dateTimeSymbols=null;_this248.numberPatterns=null;_this248.numberSymbols=null;_this248.timePatterns=null;_this248.typeFaces=null;return _this248;}_inherits(locale_set_Locale,_XFAObject150);return _createClass(locale_set_Locale);}(XFAObject);var locale_set_LocaleSet=/*#__PURE__*/function(_XFAObject151){function locale_set_LocaleSet(attributes){var _this249;_classCallCheck(this,locale_set_LocaleSet);_this249=_callSuper(this,locale_set_LocaleSet,[LOCALE_SET_NS_ID,"localeSet",true]);_this249.locale=new XFAObjectArray();return _this249;}_inherits(locale_set_LocaleSet,_XFAObject151);return _createClass(locale_set_LocaleSet);}(XFAObject);var Meridiem=/*#__PURE__*/function(_StringObject42){function Meridiem(attributes){_classCallCheck(this,Meridiem);return _callSuper(this,Meridiem,[LOCALE_SET_NS_ID,"meridiem"]);}_inherits(Meridiem,_StringObject42);return _createClass(Meridiem);}(StringObject);var MeridiemNames=/*#__PURE__*/function(_XFAObject152){function MeridiemNames(attributes){var _this250;_classCallCheck(this,MeridiemNames);_this250=_callSuper(this,MeridiemNames,[LOCALE_SET_NS_ID,"meridiemNames",true]);_this250.meridiem=new XFAObjectArray(2);return _this250;}_inherits(MeridiemNames,_XFAObject152);return _createClass(MeridiemNames);}(XFAObject);var Month=/*#__PURE__*/function(_StringObject43){function Month(attributes){_classCallCheck(this,Month);return _callSuper(this,Month,[LOCALE_SET_NS_ID,"month"]);}_inherits(Month,_StringObject43);return _createClass(Month);}(StringObject);var MonthNames=/*#__PURE__*/function(_XFAObject153){function MonthNames(attributes){var _this251;_classCallCheck(this,MonthNames);_this251=_callSuper(this,MonthNames,[LOCALE_SET_NS_ID,"monthNames",true]);_this251.abbr=getInteger({data:attributes.abbr,defaultValue:0,validate:function validate(x){return x===1;}});_this251.month=new XFAObjectArray(12);return _this251;}_inherits(MonthNames,_XFAObject153);return _createClass(MonthNames);}(XFAObject);var NumberPattern=/*#__PURE__*/function(_StringObject44){function NumberPattern(attributes){var _this252;_classCallCheck(this,NumberPattern);_this252=_callSuper(this,NumberPattern,[LOCALE_SET_NS_ID,"numberPattern"]);_this252.name=getStringOption(attributes.name,["full","long","med","short"]);return _this252;}_inherits(NumberPattern,_StringObject44);return _createClass(NumberPattern);}(StringObject);var NumberPatterns=/*#__PURE__*/function(_XFAObject154){function NumberPatterns(attributes){var _this253;_classCallCheck(this,NumberPatterns);_this253=_callSuper(this,NumberPatterns,[LOCALE_SET_NS_ID,"numberPatterns",true]);_this253.numberPattern=new XFAObjectArray(4);return _this253;}_inherits(NumberPatterns,_XFAObject154);return _createClass(NumberPatterns);}(XFAObject);var NumberSymbol=/*#__PURE__*/function(_StringObject45){function NumberSymbol(attributes){var _this254;_classCallCheck(this,NumberSymbol);_this254=_callSuper(this,NumberSymbol,[LOCALE_SET_NS_ID,"numberSymbol"]);_this254.name=getStringOption(attributes.name,["decimal","grouping","percent","minus","zero"]);return _this254;}_inherits(NumberSymbol,_StringObject45);return _createClass(NumberSymbol);}(StringObject);var NumberSymbols=/*#__PURE__*/function(_XFAObject155){function NumberSymbols(attributes){var _this255;_classCallCheck(this,NumberSymbols);_this255=_callSuper(this,NumberSymbols,[LOCALE_SET_NS_ID,"numberSymbols",true]);_this255.numberSymbol=new XFAObjectArray(5);return _this255;}_inherits(NumberSymbols,_XFAObject155);return _createClass(NumberSymbols);}(XFAObject);var TimePattern=/*#__PURE__*/function(_StringObject46){function TimePattern(attributes){var _this256;_classCallCheck(this,TimePattern);_this256=_callSuper(this,TimePattern,[LOCALE_SET_NS_ID,"timePattern"]);_this256.name=getStringOption(attributes.name,["full","long","med","short"]);return _this256;}_inherits(TimePattern,_StringObject46);return _createClass(TimePattern);}(StringObject);var TimePatterns=/*#__PURE__*/function(_XFAObject156){function TimePatterns(attributes){var _this257;_classCallCheck(this,TimePatterns);_this257=_callSuper(this,TimePatterns,[LOCALE_SET_NS_ID,"timePatterns",true]);_this257.timePattern=new XFAObjectArray(4);return _this257;}_inherits(TimePatterns,_XFAObject156);return _createClass(TimePatterns);}(XFAObject);var TypeFace=/*#__PURE__*/function(_XFAObject157){function TypeFace(attributes){var _this258;_classCallCheck(this,TypeFace);_this258=_callSuper(this,TypeFace,[LOCALE_SET_NS_ID,"typeFace",true]);_this258.name=attributes.name|"";return _this258;}_inherits(TypeFace,_XFAObject157);return _createClass(TypeFace);}(XFAObject);var TypeFaces=/*#__PURE__*/function(_XFAObject158){function TypeFaces(attributes){var _this259;_classCallCheck(this,TypeFaces);_this259=_callSuper(this,TypeFaces,[LOCALE_SET_NS_ID,"typeFaces",true]);_this259.typeFace=new XFAObjectArray();return _this259;}_inherits(TypeFaces,_XFAObject158);return _createClass(TypeFaces);}(XFAObject);var LocaleSetNamespace=/*#__PURE__*/function(){function LocaleSetNamespace(){_classCallCheck(this,LocaleSetNamespace);}return _createClass(LocaleSetNamespace,null,[{key:$buildXFAObject,value:function value(name,attributes){if(LocaleSetNamespace.hasOwnProperty(name)){return LocaleSetNamespace[name](attributes);}return undefined;}},{key:"calendarSymbols",value:function calendarSymbols(attrs){return new CalendarSymbols(attrs);}},{key:"currencySymbol",value:function currencySymbol(attrs){return new CurrencySymbol(attrs);}},{key:"currencySymbols",value:function currencySymbols(attrs){return new CurrencySymbols(attrs);}},{key:"datePattern",value:function datePattern(attrs){return new DatePattern(attrs);}},{key:"datePatterns",value:function datePatterns(attrs){return new DatePatterns(attrs);}},{key:"dateTimeSymbols",value:function dateTimeSymbols(attrs){return new DateTimeSymbols(attrs);}},{key:"day",value:function day(attrs){return new Day(attrs);}},{key:"dayNames",value:function dayNames(attrs){return new DayNames(attrs);}},{key:"era",value:function era(attrs){return new Era(attrs);}},{key:"eraNames",value:function eraNames(attrs){return new EraNames(attrs);}},{key:"locale",value:function locale(attrs){return new locale_set_Locale(attrs);}},{key:"localeSet",value:function localeSet(attrs){return new locale_set_LocaleSet(attrs);}},{key:"meridiem",value:function meridiem(attrs){return new Meridiem(attrs);}},{key:"meridiemNames",value:function meridiemNames(attrs){return new MeridiemNames(attrs);}},{key:"month",value:function month(attrs){return new Month(attrs);}},{key:"monthNames",value:function monthNames(attrs){return new MonthNames(attrs);}},{key:"numberPattern",value:function numberPattern(attrs){return new NumberPattern(attrs);}},{key:"numberPatterns",value:function numberPatterns(attrs){return new NumberPatterns(attrs);}},{key:"numberSymbol",value:function numberSymbol(attrs){return new NumberSymbol(attrs);}},{key:"numberSymbols",value:function numberSymbols(attrs){return new NumberSymbols(attrs);}},{key:"timePattern",value:function timePattern(attrs){return new TimePattern(attrs);}},{key:"timePatterns",value:function timePatterns(attrs){return new TimePatterns(attrs);}},{key:"typeFace",value:function typeFace(attrs){return new TypeFace(attrs);}},{key:"typeFaces",value:function typeFaces(attrs){return new TypeFaces(attrs);}}]);}();;// ./src/core/xfa/signature.js\nvar SIGNATURE_NS_ID=NamespaceIds.signature.id;var signature_Signature=/*#__PURE__*/function(_XFAObject159){function signature_Signature(attributes){_classCallCheck(this,signature_Signature);return _callSuper(this,signature_Signature,[SIGNATURE_NS_ID,"signature",true]);}_inherits(signature_Signature,_XFAObject159);return _createClass(signature_Signature);}(XFAObject);var SignatureNamespace=/*#__PURE__*/function(){function SignatureNamespace(){_classCallCheck(this,SignatureNamespace);}return _createClass(SignatureNamespace,null,[{key:$buildXFAObject,value:function value(name,attributes){if(SignatureNamespace.hasOwnProperty(name)){return SignatureNamespace[name](attributes);}return undefined;}},{key:"signature",value:function signature(attributes){return new signature_Signature(attributes);}}]);}();;// ./src/core/xfa/stylesheet.js\nvar STYLESHEET_NS_ID=NamespaceIds.stylesheet.id;var Stylesheet=/*#__PURE__*/function(_XFAObject160){function Stylesheet(attributes){_classCallCheck(this,Stylesheet);return _callSuper(this,Stylesheet,[STYLESHEET_NS_ID,"stylesheet",true]);}_inherits(Stylesheet,_XFAObject160);return _createClass(Stylesheet);}(XFAObject);var StylesheetNamespace=/*#__PURE__*/function(){function StylesheetNamespace(){_classCallCheck(this,StylesheetNamespace);}return _createClass(StylesheetNamespace,null,[{key:$buildXFAObject,value:function value(name,attributes){if(StylesheetNamespace.hasOwnProperty(name)){return StylesheetNamespace[name](attributes);}return undefined;}},{key:"stylesheet",value:function stylesheet(attributes){return new Stylesheet(attributes);}}]);}();;// ./src/core/xfa/xdp.js\nvar XDP_NS_ID=NamespaceIds.xdp.id;var xdp_Xdp=/*#__PURE__*/function(_XFAObject161){function xdp_Xdp(attributes){var _this260;_classCallCheck(this,xdp_Xdp);_this260=_callSuper(this,xdp_Xdp,[XDP_NS_ID,"xdp",true]);_this260.uuid=attributes.uuid||"";_this260.timeStamp=attributes.timeStamp||"";_this260.config=null;_this260.connectionSet=null;_this260.datasets=null;_this260.localeSet=null;_this260.stylesheet=new XFAObjectArray();_this260.template=null;return _this260;}_inherits(xdp_Xdp,_XFAObject161);return _createClass(xdp_Xdp,[{key:$onChildCheck,value:function value(child){var ns=NamespaceIds[child[$nodeName]];return ns&&child[$namespaceId]===ns.id;}}]);}(XFAObject);var XdpNamespace=/*#__PURE__*/function(){function XdpNamespace(){_classCallCheck(this,XdpNamespace);}return _createClass(XdpNamespace,null,[{key:$buildXFAObject,value:function value(name,attributes){if(XdpNamespace.hasOwnProperty(name)){return XdpNamespace[name](attributes);}return undefined;}},{key:"xdp",value:function xdp(attributes){return new xdp_Xdp(attributes);}}]);}();;// ./src/core/xfa/xhtml.js\nvar XHTML_NS_ID=NamespaceIds.xhtml.id;var $richText=Symbol();var VALID_STYLES=new Set(["color","font","font-family","font-size","font-stretch","font-style","font-weight","margin","margin-bottom","margin-left","margin-right","margin-top","letter-spacing","line-height","orphans","page-break-after","page-break-before","page-break-inside","tab-interval","tab-stop","text-align","text-decoration","text-indent","vertical-align","widows","kerning-mode","xfa-font-horizontal-scale","xfa-font-vertical-scale","xfa-spacerun","xfa-tab-stops"]);var StyleMapping=new Map([["page-break-after","breakAfter"],["page-break-before","breakBefore"],["page-break-inside","breakInside"],["kerning-mode",function(value){return value==="none"?"none":"normal";}],["xfa-font-horizontal-scale",function(value){return"scaleX(".concat(Math.max(0,Math.min(parseInt(value)/100)).toFixed(2),")");}],["xfa-font-vertical-scale",function(value){return"scaleY(".concat(Math.max(0,Math.min(parseInt(value)/100)).toFixed(2),")");}],["xfa-spacerun",""],["xfa-tab-stops",""],["font-size",function(value,original){value=original.fontSize=Math.abs(getMeasurement(value));return measureToString(0.99*value);}],["letter-spacing",function(value){return measureToString(getMeasurement(value));}],["line-height",function(value){return measureToString(getMeasurement(value));}],["margin",function(value){return measureToString(getMeasurement(value));}],["margin-bottom",function(value){return measureToString(getMeasurement(value));}],["margin-left",function(value){return measureToString(getMeasurement(value));}],["margin-right",function(value){return measureToString(getMeasurement(value));}],["margin-top",function(value){return measureToString(getMeasurement(value));}],["text-indent",function(value){return measureToString(getMeasurement(value));}],["font-family",function(value){return value;}],["vertical-align",function(value){return measureToString(getMeasurement(value));}]]);var spacesRegExp=/\\s+/g;var crlfRegExp=/[\\r\\n]+/g;var crlfForRichTextRegExp=/\\r\\n?/g;function mapStyle(styleStr,node,richText){var style=Object.create(null);if(!styleStr){return style;}var original=Object.create(null);var _iterator187=_createForOfIteratorHelper(styleStr.split(";").map(function(s){return s.split(":",2);})),_step187;try{for(_iterator187.s();!(_step187=_iterator187.n()).done;){var _step187$value=_slicedToArray(_step187.value,2),key=_step187$value[0],value=_step187$value[1];var mapping=StyleMapping.get(key);if(mapping===""){continue;}var newValue=value;if(mapping){newValue=typeof mapping==="string"?mapping:mapping(value,original);}if(key.endsWith("scale")){style.transform=style.transform?"".concat(style[key]," ").concat(newValue):newValue;}else{style[key.replaceAll(/-([a-zA-Z])/g,function(_,x){return x.toUpperCase();})]=newValue;}}}catch(err){_iterator187.e(err);}finally{_iterator187.f();}if(style.fontFamily){setFontFamily({typeface:style.fontFamily,weight:style.fontWeight||"normal",posture:style.fontStyle||"normal",size:original.fontSize||0},node,node[$globalData].fontFinder,style);}if(richText&&style.verticalAlign&&style.verticalAlign!=="0px"&&style.fontSize){var SUB_SUPER_SCRIPT_FACTOR=0.583;var VERTICAL_FACTOR=0.333;var fontSize=getMeasurement(style.fontSize);style.fontSize=measureToString(fontSize*SUB_SUPER_SCRIPT_FACTOR);style.verticalAlign=measureToString(Math.sign(getMeasurement(style.verticalAlign))*fontSize*VERTICAL_FACTOR);}if(richText&&style.fontSize){style.fontSize="calc(".concat(style.fontSize," * var(--total-scale-factor))");}fixTextIndent(style);return style;}function checkStyle(node){if(!node.style){return"";}return node.style.trim().split(/\\s*;\\s*/).filter(function(s){return!!s;}).map(function(s){return s.split(/\\s*:\\s*/,2);}).filter(function(_ref92){var _ref93=_slicedToArray(_ref92,2),key=_ref93[0],value=_ref93[1];if(key==="font-family"){node[$globalData].usedTypefaces.add(value);}return VALID_STYLES.has(key);}).map(function(kv){return kv.join(":");}).join(";");}var NoWhites=new Set(["body","html"]);var XhtmlObject=/*#__PURE__*/function(_XmlObject2){function XhtmlObject(attributes,name){var _this261;_classCallCheck(this,XhtmlObject);_this261=_callSuper(this,XhtmlObject,[XHTML_NS_ID,name]);_this261[$richText]=false;_this261.style=attributes.style||"";return _this261;}_inherits(XhtmlObject,_XmlObject2);return _createClass(XhtmlObject,[{key:$clean,value:function value(builder){_superPropGet(XhtmlObject,$clean,this,3)([builder]);this.style=checkStyle(this);}},{key:$acceptWhitespace,value:function value(){return!NoWhites.has(this[$nodeName]);}},{key:$onText,value:function value(str){var richText=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!richText){str=str.replaceAll(crlfRegExp,"");if(!this.style.includes("xfa-spacerun:yes")){str=str.replaceAll(spacesRegExp," ");}}else{this[$richText]=true;}if(str){this[$content]+=str;}}},{key:$pushGlyphs,value:function value(measure){var mustPop=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var xfaFont=Object.create(null);var margin={top:NaN,bottom:NaN,left:NaN,right:NaN};var lineHeight=null;var _iterator188=_createForOfIteratorHelper(this.style.split(";").map(function(s){return s.split(":",2);})),_step188;try{for(_iterator188.s();!(_step188=_iterator188.n()).done;){var _step188$value=_slicedToArray(_step188.value,2),key=_step188$value[0],_value12=_step188$value[1];switch(key){case"font-family":xfaFont.typeface=stripQuotes(_value12);break;case"font-size":xfaFont.size=getMeasurement(_value12);break;case"font-weight":xfaFont.weight=_value12;break;case"font-style":xfaFont.posture=_value12;break;case"letter-spacing":xfaFont.letterSpacing=getMeasurement(_value12);break;case"margin":var values=_value12.split(/ \\t/).map(function(x){return getMeasurement(x);});switch(values.length){case 1:margin.top=margin.bottom=margin.left=margin.right=values[0];break;case 2:margin.top=margin.bottom=values[0];margin.left=margin.right=values[1];break;case 3:margin.top=values[0];margin.bottom=values[2];margin.left=margin.right=values[1];break;case 4:margin.top=values[0];margin.left=values[1];margin.bottom=values[2];margin.right=values[3];break;}break;case"margin-top":margin.top=getMeasurement(_value12);break;case"margin-bottom":margin.bottom=getMeasurement(_value12);break;case"margin-left":margin.left=getMeasurement(_value12);break;case"margin-right":margin.right=getMeasurement(_value12);break;case"line-height":lineHeight=getMeasurement(_value12);break;}}}catch(err){_iterator188.e(err);}finally{_iterator188.f();}measure.pushData(xfaFont,margin,lineHeight);if(this[$content]){measure.addString(this[$content]);}else{var _iterator189=_createForOfIteratorHelper(this[$getChildren]()),_step189;try{for(_iterator189.s();!(_step189=_iterator189.n()).done;){var child=_step189.value;if(child[$nodeName]==="#text"){measure.addString(child[$content]);continue;}child[$pushGlyphs](measure);}}catch(err){_iterator189.e(err);}finally{_iterator189.f();}}if(mustPop){measure.popFont();}}},{key:$toHTML,value:function value(availableSpace){var children=[];this[$extra]={children:children};this[$childrenToHTML]({});if(children.length===0&&!this[$content]){return HTMLResult.EMPTY;}var value;if(this[$richText]){value=this[$content]?this[$content].replaceAll(crlfForRichTextRegExp,"\\n"):undefined;}else{value=this[$content]||undefined;}return HTMLResult.success({name:this[$nodeName],attributes:{href:this.href,style:mapStyle(this.style,this,this[$richText])},children:children,value:value});}}]);}(XmlObject);var A=/*#__PURE__*/function(_XhtmlObject){function A(attributes){var _this262;_classCallCheck(this,A);_this262=_callSuper(this,A,[attributes,"a"]);_this262.href=fixURL(attributes.href)||"";return _this262;}_inherits(A,_XhtmlObject);return _createClass(A);}(XhtmlObject);var B=/*#__PURE__*/function(_XhtmlObject2){function B(attributes){_classCallCheck(this,B);return _callSuper(this,B,[attributes,"b"]);}_inherits(B,_XhtmlObject2);return _createClass(B,[{key:$pushGlyphs,value:function value(measure){measure.pushFont({weight:"bold"});_superPropGet(B,$pushGlyphs,this,3)([measure]);measure.popFont();}}]);}(XhtmlObject);var Body=/*#__PURE__*/function(_XhtmlObject3){function Body(attributes){_classCallCheck(this,Body);return _callSuper(this,Body,[attributes,"body"]);}_inherits(Body,_XhtmlObject3);return _createClass(Body,[{key:$toHTML,value:function value(availableSpace){var res=_superPropGet(Body,$toHTML,this,3)([availableSpace]);var html=res.html;if(!html){return HTMLResult.EMPTY;}html.name="div";html.attributes["class"]=["xfaRich"];return res;}}]);}(XhtmlObject);var Br=/*#__PURE__*/function(_XhtmlObject4){function Br(attributes){_classCallCheck(this,Br);return _callSuper(this,Br,[attributes,"br"]);}_inherits(Br,_XhtmlObject4);return _createClass(Br,[{key:$text,value:function value(){return"\\n";}},{key:$pushGlyphs,value:function value(measure){measure.addString("\\n");}},{key:$toHTML,value:function value(availableSpace){return HTMLResult.success({name:"br"});}}]);}(XhtmlObject);var Html=/*#__PURE__*/function(_XhtmlObject5){function Html(attributes){_classCallCheck(this,Html);return _callSuper(this,Html,[attributes,"html"]);}_inherits(Html,_XhtmlObject5);return _createClass(Html,[{key:$toHTML,value:function value(availableSpace){var children=[];this[$extra]={children:children};this[$childrenToHTML]({});if(children.length===0){return HTMLResult.success({name:"div",attributes:{"class":["xfaRich"],style:{}},value:this[$content]||""});}if(children.length===1){var _child$attributes;var child=children[0];if((_child$attributes=child.attributes)!==null&&_child$attributes!==void 0&&_child$attributes["class"].includes("xfaRich")){return HTMLResult.success(child);}}return HTMLResult.success({name:"div",attributes:{"class":["xfaRich"],style:{}},children:children});}}]);}(XhtmlObject);var I=/*#__PURE__*/function(_XhtmlObject6){function I(attributes){_classCallCheck(this,I);return _callSuper(this,I,[attributes,"i"]);}_inherits(I,_XhtmlObject6);return _createClass(I,[{key:$pushGlyphs,value:function value(measure){measure.pushFont({posture:"italic"});_superPropGet(I,$pushGlyphs,this,3)([measure]);measure.popFont();}}]);}(XhtmlObject);var Li=/*#__PURE__*/function(_XhtmlObject7){function Li(attributes){_classCallCheck(this,Li);return _callSuper(this,Li,[attributes,"li"]);}_inherits(Li,_XhtmlObject7);return _createClass(Li);}(XhtmlObject);var Ol=/*#__PURE__*/function(_XhtmlObject8){function Ol(attributes){_classCallCheck(this,Ol);return _callSuper(this,Ol,[attributes,"ol"]);}_inherits(Ol,_XhtmlObject8);return _createClass(Ol);}(XhtmlObject);var P=/*#__PURE__*/function(_XhtmlObject9){function P(attributes){_classCallCheck(this,P);return _callSuper(this,P,[attributes,"p"]);}_inherits(P,_XhtmlObject9);return _createClass(P,[{key:$pushGlyphs,value:function value(measure){_superPropGet(P,$pushGlyphs,this,3)([measure,false]);measure.addString("\\n");measure.addPara();measure.popFont();}},{key:$text,value:function value(){var siblings=this[$getParent]()[$getChildren]();if(siblings.at(-1)===this){return _superPropGet(P,$text,this,3)([]);}return _superPropGet(P,$text,this,3)([])+"\\n";}}]);}(XhtmlObject);var Span=/*#__PURE__*/function(_XhtmlObject10){function Span(attributes){_classCallCheck(this,Span);return _callSuper(this,Span,[attributes,"span"]);}_inherits(Span,_XhtmlObject10);return _createClass(Span);}(XhtmlObject);var Sub=/*#__PURE__*/function(_XhtmlObject11){function Sub(attributes){_classCallCheck(this,Sub);return _callSuper(this,Sub,[attributes,"sub"]);}_inherits(Sub,_XhtmlObject11);return _createClass(Sub);}(XhtmlObject);var Sup=/*#__PURE__*/function(_XhtmlObject12){function Sup(attributes){_classCallCheck(this,Sup);return _callSuper(this,Sup,[attributes,"sup"]);}_inherits(Sup,_XhtmlObject12);return _createClass(Sup);}(XhtmlObject);var Ul=/*#__PURE__*/function(_XhtmlObject13){function Ul(attributes){_classCallCheck(this,Ul);return _callSuper(this,Ul,[attributes,"ul"]);}_inherits(Ul,_XhtmlObject13);return _createClass(Ul);}(XhtmlObject);var XhtmlNamespace=/*#__PURE__*/function(){function XhtmlNamespace(){_classCallCheck(this,XhtmlNamespace);}return _createClass(XhtmlNamespace,null,[{key:$buildXFAObject,value:function value(name,attributes){if(XhtmlNamespace.hasOwnProperty(name)){return XhtmlNamespace[name](attributes);}return undefined;}},{key:"a",value:function a(attributes){return new A(attributes);}},{key:"b",value:function b(attributes){return new B(attributes);}},{key:"body",value:function body(attributes){return new Body(attributes);}},{key:"br",value:function br(attributes){return new Br(attributes);}},{key:"html",value:function html(attributes){return new Html(attributes);}},{key:"i",value:function i(attributes){return new I(attributes);}},{key:"li",value:function li(attributes){return new Li(attributes);}},{key:"ol",value:function ol(attributes){return new Ol(attributes);}},{key:"p",value:function p(attributes){return new P(attributes);}},{key:"span",value:function span(attributes){return new Span(attributes);}},{key:"sub",value:function sub(attributes){return new Sub(attributes);}},{key:"sup",value:function sup(attributes){return new Sup(attributes);}},{key:"ul",value:function ul(attributes){return new Ul(attributes);}}]);}();;// ./src/core/xfa/setup.js\nvar NamespaceSetUp={config:ConfigNamespace,connection:ConnectionSetNamespace,datasets:DatasetsNamespace,localeSet:LocaleSetNamespace,signature:SignatureNamespace,stylesheet:StylesheetNamespace,template:TemplateNamespace,xdp:XdpNamespace,xhtml:XhtmlNamespace};;// ./src/core/xfa/unknown.js\nvar UnknownNamespace=/*#__PURE__*/function(){function UnknownNamespace(nsId){_classCallCheck(this,UnknownNamespace);this.namespaceId=nsId;}return _createClass(UnknownNamespace,[{key:$buildXFAObject,value:function value(name,attributes){return new XmlObject(this.namespaceId,name,attributes);}}]);}();;// ./src/core/xfa/builder.js\nvar Root=/*#__PURE__*/function(_XFAObject162){function Root(ids){var _this263;_classCallCheck(this,Root);_this263=_callSuper(this,Root,[-1,"root",Object.create(null)]);_this263.element=null;_this263[$ids]=ids;return _this263;}_inherits(Root,_XFAObject162);return _createClass(Root,[{key:$onChild,value:function value(child){this.element=child;return true;}},{key:$finalize,value:function value(){_superPropGet(Root,$finalize,this,3)([]);if(this.element.template instanceof Template){this[$ids].set($root,this.element);this.element.template[$resolvePrototypes](this[$ids]);this.element.template[$ids]=this[$ids];}}}]);}(XFAObject);var Empty=/*#__PURE__*/function(_XFAObject163){function Empty(){_classCallCheck(this,Empty);return _callSuper(this,Empty,[-1,"",Object.create(null)]);}_inherits(Empty,_XFAObject163);return _createClass(Empty,[{key:$onChild,value:function value(_){return false;}}]);}(XFAObject);var Builder=/*#__PURE__*/function(){function Builder(){var rootNameSpace=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;_classCallCheck(this,Builder);this._namespaceStack=[];this._nsAgnosticLevel=0;this._namespacePrefixes=new Map();this._namespaces=new Map();this._nextNsId=Math.max.apply(Math,_toConsumableArray(Object.values(NamespaceIds).map(function(_ref94){var id=_ref94.id;return id;})));this._currentNamespace=rootNameSpace||new UnknownNamespace(++this._nextNsId);}return _createClass(Builder,[{key:"buildRoot",value:function buildRoot(ids){return new Root(ids);}},{key:"build",value:function build(_ref95){var nsPrefix=_ref95.nsPrefix,name=_ref95.name,attributes=_ref95.attributes,namespace=_ref95.namespace,prefixes=_ref95.prefixes;var hasNamespaceDef=namespace!==null;if(hasNamespaceDef){this._namespaceStack.push(this._currentNamespace);this._currentNamespace=this._searchNamespace(namespace);}if(prefixes){this._addNamespacePrefix(prefixes);}if(attributes.hasOwnProperty($nsAttributes)){var dataTemplate=NamespaceSetUp.datasets;var nsAttrs=attributes[$nsAttributes];var xfaAttrs=null;for(var _i59=0,_Object$entries3=Object.entries(nsAttrs);_i59<_Object$entries3.length;_i59++){var _Object$entries3$_i=_slicedToArray(_Object$entries3[_i59],2),ns=_Object$entries3$_i[0],attrs=_Object$entries3$_i[1];var nsToUse=this._getNamespaceToUse(ns);if(nsToUse===dataTemplate){xfaAttrs={xfa:attrs};break;}}if(xfaAttrs){attributes[$nsAttributes]=xfaAttrs;}else{delete attributes[$nsAttributes];}}var namespaceToUse=this._getNamespaceToUse(nsPrefix);var node=(namespaceToUse===null||namespaceToUse===void 0?void 0:namespaceToUse[$buildXFAObject](name,attributes))||new Empty();if(node[$isNsAgnostic]()){this._nsAgnosticLevel++;}if(hasNamespaceDef||prefixes||node[$isNsAgnostic]()){node[$cleanup]={hasNamespace:hasNamespaceDef,prefixes:prefixes,nsAgnostic:node[$isNsAgnostic]()};}return node;}},{key:"isNsAgnostic",value:function isNsAgnostic(){return this._nsAgnosticLevel>0;}},{key:"_searchNamespace",value:function _searchNamespace(nsName){var ns=this._namespaces.get(nsName);if(ns){return ns;}for(var _i60=0,_Object$entries4=Object.entries(NamespaceIds);_i60<_Object$entries4.length;_i60++){var _Object$entries4$_i=_slicedToArray(_Object$entries4[_i60],2),name=_Object$entries4$_i[0],check=_Object$entries4$_i[1].check;if(check(nsName)){ns=NamespaceSetUp[name];if(ns){this._namespaces.set(nsName,ns);return ns;}break;}}ns=new UnknownNamespace(++this._nextNsId);this._namespaces.set(nsName,ns);return ns;}},{key:"_addNamespacePrefix",value:function _addNamespacePrefix(prefixes){var _iterator190=_createForOfIteratorHelper(prefixes),_step190;try{for(_iterator190.s();!(_step190=_iterator190.n()).done;){var _step190$value=_step190.value,prefix=_step190$value.prefix,value=_step190$value.value;var namespace=this._searchNamespace(value);var prefixStack=this._namespacePrefixes.get(prefix);if(!prefixStack){prefixStack=[];this._namespacePrefixes.set(prefix,prefixStack);}prefixStack.push(namespace);}}catch(err){_iterator190.e(err);}finally{_iterator190.f();}}},{key:"_getNamespaceToUse",value:function _getNamespaceToUse(prefix){if(!prefix){return this._currentNamespace;}var prefixStack=this._namespacePrefixes.get(prefix);if((prefixStack===null||prefixStack===void 0?void 0:prefixStack.length)>0){return prefixStack.at(-1);}warn("Unknown namespace prefix: ".concat(prefix,"."));return null;}},{key:"clean",value:function clean(data){var _this264=this;var hasNamespace=data.hasNamespace,prefixes=data.prefixes,nsAgnostic=data.nsAgnostic;if(hasNamespace){this._currentNamespace=this._namespaceStack.pop();}if(prefixes){prefixes.forEach(function(_ref96){var prefix=_ref96.prefix;_this264._namespacePrefixes.get(prefix).pop();});}if(nsAgnostic){this._nsAgnosticLevel--;}}}]);}();;// ./src/core/xfa/parser.js\nvar XFAParser=/*#__PURE__*/function(_XMLParserBase2){function XFAParser(){var _this265;var rootNameSpace=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var richText=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;_classCallCheck(this,XFAParser);_this265=_callSuper(this,XFAParser);_this265._builder=new Builder(rootNameSpace);_this265._stack=[];_this265._globalData={usedTypefaces:new Set()};_this265._ids=new Map();_this265._current=_this265._builder.buildRoot(_this265._ids);_this265._errorCode=XMLParserErrorCode.NoError;_this265._whiteRegex=/^\\s+$/;_this265._nbsps=/\\xa0+/g;_this265._richText=richText;return _this265;}_inherits(XFAParser,_XMLParserBase2);return _createClass(XFAParser,[{key:"parse",value:function parse(data){this.parseXml(data);if(this._errorCode!==XMLParserErrorCode.NoError){return undefined;}this._current[$finalize]();return this._current.element;}},{key:"onText",value:function onText(text){text=text.replace(this._nbsps,function(match){return match.slice(1)+" ";});if(this._richText||this._current[$acceptWhitespace]()){this._current[$onText](text,this._richText);return;}if(this._whiteRegex.test(text)){return;}this._current[$onText](text.trim());}},{key:"onCdata",value:function onCdata(text){this._current[$onText](text);}},{key:"_mkAttributes",value:function _mkAttributes(attributes,tagName){var namespace=null;var prefixes=null;var attributeObj=Object.create({});var _iterator191=_createForOfIteratorHelper(attributes),_step191;try{for(_iterator191.s();!(_step191=_iterator191.n()).done;){var _step191$value=_step191.value,name=_step191$value.name,value=_step191$value.value;if(name==="xmlns"){if(!namespace){namespace=value;}else{warn("XFA - multiple namespace definition in <".concat(tagName,">"));}}else if(name.startsWith("xmlns:")){var prefix=name.substring("xmlns:".length);if(!prefixes){prefixes=[];}prefixes.push({prefix:prefix,value:value});}else{var i=name.indexOf(":");if(i===-1){attributeObj[name]=value;}else{var _nsAttrs;var nsAttrs=attributeObj[$nsAttributes];if(!nsAttrs){nsAttrs=attributeObj[$nsAttributes]=Object.create(null);}var _ref97=[name.slice(0,i),name.slice(i+1)],ns=_ref97[0],attrName=_ref97[1];var attrs=(_nsAttrs=nsAttrs)[ns]||(_nsAttrs[ns]=Object.create(null));attrs[attrName]=value;}}}}catch(err){_iterator191.e(err);}finally{_iterator191.f();}return[namespace,prefixes,attributeObj];}},{key:"_getNameAndPrefix",value:function _getNameAndPrefix(name,nsAgnostic){var i=name.indexOf(":");if(i===-1){return[name,null];}return[name.substring(i+1),nsAgnostic?"":name.substring(0,i)];}},{key:"onBeginElement",value:function onBeginElement(tagName,attributes,isEmpty){var _this$_mkAttributes=this._mkAttributes(attributes,tagName),_this$_mkAttributes2=_slicedToArray(_this$_mkAttributes,3),namespace=_this$_mkAttributes2[0],prefixes=_this$_mkAttributes2[1],attributesObj=_this$_mkAttributes2[2];var _this$_getNameAndPref=this._getNameAndPrefix(tagName,this._builder.isNsAgnostic()),_this$_getNameAndPref2=_slicedToArray(_this$_getNameAndPref,2),name=_this$_getNameAndPref2[0],nsPrefix=_this$_getNameAndPref2[1];var node=this._builder.build({nsPrefix:nsPrefix,name:name,attributes:attributesObj,namespace:namespace,prefixes:prefixes});node[$globalData]=this._globalData;if(isEmpty){node[$finalize]();if(this._current[$onChild](node)){node[$setId](this._ids);}node[$clean](this._builder);return;}this._stack.push(this._current);this._current=node;}},{key:"onEndElement",value:function onEndElement(name){var node=this._current;if(node[$isCDATAXml]()&&typeof node[$content]==="string"){var parser=new XFAParser();parser._globalData=this._globalData;var root=parser.parse(node[$content]);node[$content]=null;node[$onChild](root);}node[$finalize]();this._current=this._stack.pop();if(this._current[$onChild](node)){node[$setId](this._ids);}node[$clean](this._builder);}},{key:"onError",value:function onError(code){this._errorCode=code;}}]);}(XMLParserBase);;// ./src/core/xfa/factory.js\nvar XFAFactory=/*#__PURE__*/function(){function XFAFactory(data){_classCallCheck(this,XFAFactory);try{this.root=new XFAParser().parse(XFAFactory._createDocument(data));var binder=new Binder(this.root);this.form=binder.bind();this.dataHandler=new DataHandler(this.root,binder.getData());this.form[$globalData].template=this.form;}catch(e){warn("XFA - an error occurred during parsing and binding: ".concat(e));}}return _createClass(XFAFactory,[{key:"isValid",value:function isValid(){return this.root&&this.form;}},{key:"_createPagesHelper",value:function _createPagesHelper(){var iterator=this.form[$toPages]();return new Promise(function(resolve,reject){var _nextIteration=function nextIteration(){try{var value=iterator.next();if(value.done){resolve(value.value);}else{setTimeout(_nextIteration,0);}}catch(e){reject(e);}};setTimeout(_nextIteration,0);});}},{key:"_createPages",value:function(){var _createPages2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee53(){return _regeneratorRuntime().wrap(function _callee53$(_context69){while(1)switch(_context69.prev=_context69.next){case 0:_context69.prev=0;_context69.next=3;return this._createPagesHelper();case 3:this.pages=_context69.sent;this.dims=this.pages.children.map(function(c){var _c$attributes$style=c.attributes.style,width=_c$attributes$style.width,height=_c$attributes$style.height;return[0,0,parseInt(width),parseInt(height)];});_context69.next=10;break;case 7:_context69.prev=7;_context69.t0=_context69["catch"](0);warn("XFA - an error occurred during layout: ".concat(_context69.t0));case 10:case"end":return _context69.stop();}},_callee53,this,[[0,7]]);}));function _createPages(){return _createPages2.apply(this,arguments);}return _createPages;}()},{key:"getBoundingBox",value:function getBoundingBox(pageIndex){return this.dims[pageIndex];}},{key:"getNumPages",value:function(){var _getNumPages=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee54(){return _regeneratorRuntime().wrap(function _callee54$(_context70){while(1)switch(_context70.prev=_context70.next){case 0:if(this.pages){_context70.next=3;break;}_context70.next=3;return this._createPages();case 3:return _context70.abrupt("return",this.dims.length);case 4:case"end":return _context70.stop();}},_callee54,this);}));function getNumPages(){return _getNumPages.apply(this,arguments);}return getNumPages;}()},{key:"setImages",value:function setImages(images){this.form[$globalData].images=images;}},{key:"setFonts",value:function setFonts(fonts){this.form[$globalData].fontFinder=new FontFinder(fonts);var missingFonts=[];var _iterator192=_createForOfIteratorHelper(this.form[$globalData].usedTypefaces),_step192;try{for(_iterator192.s();!(_step192=_iterator192.n()).done;){var typeface=_step192.value;typeface=stripQuotes(typeface);var font=this.form[$globalData].fontFinder.find(typeface);if(!font){missingFonts.push(typeface);}}}catch(err){_iterator192.e(err);}finally{_iterator192.f();}if(missingFonts.length>0){return missingFonts;}return null;}},{key:"appendFonts",value:function appendFonts(fonts,reallyMissingFonts){this.form[$globalData].fontFinder.add(fonts,reallyMissingFonts);}},{key:"getPages",value:function(){var _getPages=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee55(){var pages;return _regeneratorRuntime().wrap(function _callee55$(_context71){while(1)switch(_context71.prev=_context71.next){case 0:if(this.pages){_context71.next=3;break;}_context71.next=3;return this._createPages();case 3:pages=this.pages;this.pages=null;return _context71.abrupt("return",pages);case 6:case"end":return _context71.stop();}},_callee55,this);}));function getPages(){return _getPages.apply(this,arguments);}return getPages;}()},{key:"serializeData",value:function serializeData(storage){return this.dataHandler.serialize(storage);}}],[{key:"_createDocument",value:function _createDocument(data){if(!data["/xdp:xdp"]){return data["xdp:xdp"];}return Object.values(data).join("");}},{key:"getRichTextAsHtml",value:function getRichTextAsHtml(rc){if(!rc||typeof rc!=="string"){return null;}try{var root=new XFAParser(XhtmlNamespace,true).parse(rc);if(!["body","xhtml"].includes(root[$nodeName])){var newRoot=XhtmlNamespace.body({});newRoot[$appendChild](root);root=newRoot;}var result=root[$toHTML]();if(!result.success){return null;}var html=result.html;var attributes=html.attributes;if(attributes){if(attributes["class"]){attributes["class"]=attributes["class"].filter(function(attr){return!attr.startsWith("xfa");});}attributes.dir="auto";}return{html:html,str:root[$text]()};}catch(e){warn("XFA - an error occurred during parsing of rich text: ".concat(e));}return null;}}]);}();;// ./src/core/annotation.js\nvar AnnotationFactory=/*#__PURE__*/function(){function AnnotationFactory(){_classCallCheck(this,AnnotationFactory);}return _createClass(AnnotationFactory,null,[{key:"createGlobals",value:function createGlobals(pdfManager){return Promise.all([pdfManager.ensureCatalog("acroForm"),pdfManager.ensureDoc("xfaDatasets"),pdfManager.ensureCatalog("structTreeRoot"),pdfManager.ensureCatalog("baseUrl"),pdfManager.ensureCatalog("attachments")]).then(function(_ref98){var _ref99=_slicedToArray(_ref98,5),acroForm=_ref99[0],xfaDatasets=_ref99[1],structTreeRoot=_ref99[2],baseUrl=_ref99[3],attachments=_ref99[4];return{pdfManager:pdfManager,acroForm:acroForm instanceof Dict?acroForm:Dict.empty,xfaDatasets:xfaDatasets,structTreeRoot:structTreeRoot,baseUrl:baseUrl,attachments:attachments};},function(reason){warn("createGlobals: \\"".concat(reason,"\\"."));return null;});}},{key:"create",value:function(){var _create2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee56(xref,ref,annotationGlobals,idFactory,collectFields,orphanFields,pageRef){var pageIndex;return _regeneratorRuntime().wrap(function _callee56$(_context72){while(1)switch(_context72.prev=_context72.next){case 0:if(!collectFields){_context72.next=6;break;}_context72.next=3;return this._getPageIndex(xref,ref,annotationGlobals.pdfManager);case 3:_context72.t0=_context72.sent;_context72.next=7;break;case 6:_context72.t0=null;case 7:pageIndex=_context72.t0;return _context72.abrupt("return",annotationGlobals.pdfManager.ensure(this,"_create",[xref,ref,annotationGlobals,idFactory,collectFields,orphanFields,pageIndex,pageRef]));case 9:case"end":return _context72.stop();}},_callee56,this);}));function create(_x81,_x82,_x83,_x84,_x85,_x86,_x87){return _create2.apply(this,arguments);}return create;}()},{key:"_create",value:function _create(xref,ref,annotationGlobals,idFactory){var collectFields=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;var orphanFields=arguments.length>5&&arguments[5]!==undefined?arguments[5]:null;var pageIndex=arguments.length>6&&arguments[6]!==undefined?arguments[6]:null;var pageRef=arguments.length>7&&arguments[7]!==undefined?arguments[7]:null;var dict=xref.fetchIfRef(ref);if(!(dict instanceof Dict)){return undefined;}var acroForm=annotationGlobals.acroForm,pdfManager=annotationGlobals.pdfManager;var id=ref instanceof Ref?ref.toString():"annot_".concat(idFactory.createObjId());var subtype=dict.get("Subtype");subtype=subtype instanceof Name?subtype.name:null;var parameters={xref:xref,ref:ref,dict:dict,subtype:subtype,id:id,annotationGlobals:annotationGlobals,collectFields:collectFields,orphanFields:orphanFields,needAppearances:!collectFields&&acroForm.get("NeedAppearances")===true,pageIndex:pageIndex,evaluatorOptions:pdfManager.evaluatorOptions,pageRef:pageRef};switch(subtype){case"Link":return new LinkAnnotation(parameters);case"Text":return new TextAnnotation(parameters);case"Widget":var fieldType=getInheritableProperty({dict:dict,key:"FT"});fieldType=fieldType instanceof Name?fieldType.name:null;switch(fieldType){case"Tx":return new TextWidgetAnnotation(parameters);case"Btn":return new ButtonWidgetAnnotation(parameters);case"Ch":return new ChoiceWidgetAnnotation(parameters);case"Sig":return new SignatureWidgetAnnotation(parameters);}warn("Unimplemented widget field type \\"".concat(fieldType,"\\", ")+"falling back to base field type.");return new WidgetAnnotation(parameters);case"Popup":return new PopupAnnotation(parameters);case"FreeText":return new FreeTextAnnotation(parameters);case"Line":return new LineAnnotation(parameters);case"Square":return new SquareAnnotation(parameters);case"Circle":return new CircleAnnotation(parameters);case"PolyLine":return new PolylineAnnotation(parameters);case"Polygon":return new PolygonAnnotation(parameters);case"Caret":return new CaretAnnotation(parameters);case"Ink":return new InkAnnotation(parameters);case"Highlight":return new HighlightAnnotation(parameters);case"Underline":return new UnderlineAnnotation(parameters);case"Squiggly":return new SquigglyAnnotation(parameters);case"StrikeOut":return new StrikeOutAnnotation(parameters);case"Stamp":return new StampAnnotation(parameters);case"FileAttachment":return new FileAttachmentAnnotation(parameters);default:if(!collectFields){if(!subtype){warn("Annotation is missing the required /Subtype.");}else{warn("Unimplemented annotation type \\"".concat(subtype,"\\", ")+"falling back to base annotation.");}}return new Annotation(parameters);}}},{key:"_getPageIndex",value:function(){var _getPageIndex2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee57(xref,ref,pdfManager){var annotDict,pageRef,_pageIndex2,numPages,_pageIndex3,page,annotations,_iterator193,_step193,annotRef;return _regeneratorRuntime().wrap(function _callee57$(_context73){while(1)switch(_context73.prev=_context73.next){case 0:_context73.prev=0;_context73.next=3;return xref.fetchIfRefAsync(ref);case 3:annotDict=_context73.sent;if(annotDict instanceof Dict){_context73.next=6;break;}return _context73.abrupt("return",-1);case 6:pageRef=annotDict.getRaw("P");if(!(pageRef instanceof Ref)){_context73.next=18;break;}_context73.prev=8;_context73.next=11;return pdfManager.ensureCatalog("getPageIndex",[pageRef]);case 11:_pageIndex2=_context73.sent;return _context73.abrupt("return",_pageIndex2);case 15:_context73.prev=15;_context73.t0=_context73["catch"](8);info("_getPageIndex -- not a valid page reference: \\"".concat(_context73.t0,"\\"."));case 18:if(!annotDict.has("Kids")){_context73.next=20;break;}return _context73.abrupt("return",-1);case 20:_context73.next=22;return pdfManager.ensureDoc("numPages");case 22:numPages=_context73.sent;_pageIndex3=0;case 24:if(!(_pageIndex3<numPages)){_context73.next=51;break;}_context73.next=27;return pdfManager.getPage(_pageIndex3);case 27:page=_context73.sent;_context73.next=30;return pdfManager.ensure(page,"annotations");case 30:annotations=_context73.sent;_iterator193=_createForOfIteratorHelper(annotations);_context73.prev=32;_iterator193.s();case 34:if((_step193=_iterator193.n()).done){_context73.next=40;break;}annotRef=_step193.value;if(!(annotRef instanceof Ref&&isRefsEqual(annotRef,ref))){_context73.next=38;break;}return _context73.abrupt("return",_pageIndex3);case 38:_context73.next=34;break;case 40:_context73.next=45;break;case 42:_context73.prev=42;_context73.t1=_context73["catch"](32);_iterator193.e(_context73.t1);case 45:_context73.prev=45;_iterator193.f();return _context73.finish(45);case 48:_pageIndex3++;_context73.next=24;break;case 51:_context73.next=56;break;case 53:_context73.prev=53;_context73.t2=_context73["catch"](0);warn("_getPageIndex: \\"".concat(_context73.t2,"\\"."));case 56:return _context73.abrupt("return",-1);case 57:case"end":return _context73.stop();}},_callee57,null,[[0,53],[8,15],[32,42,45,48]]);}));function _getPageIndex(_x88,_x89,_x90){return _getPageIndex2.apply(this,arguments);}return _getPageIndex;}()},{key:"generateImages",value:function generateImages(annotations,xref,isOffscreenCanvasSupported){if(!isOffscreenCanvasSupported){warn("generateImages: OffscreenCanvas is not supported, cannot save or print some annotations with images.");return null;}var imagePromises;var _iterator194=_createForOfIteratorHelper(annotations),_step194;try{for(_iterator194.s();!(_step194=_iterator194.n()).done;){var _step194$value=_step194.value,bitmapId=_step194$value.bitmapId,bitmap=_step194$value.bitmap;if(!bitmap){continue;}imagePromises||(imagePromises=new Map());imagePromises.set(bitmapId,StampAnnotation.createImage(bitmap,xref));}}catch(err){_iterator194.e(err);}finally{_iterator194.f();}return imagePromises;}},{key:"saveNewAnnotations",value:function(){var _saveNewAnnotations=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee58(evaluator,task,annotations,imagePromises,changes){var xref,baseFontRef,promises,isOffscreenCanvasSupported,_iterator195,_step195,annotation,baseFont,image,imageStream,smaskStream,smaskRef,imageRef;return _regeneratorRuntime().wrap(function _callee58$(_context74){while(1)switch(_context74.prev=_context74.next){case 0:xref=evaluator.xref;promises=[];isOffscreenCanvasSupported=evaluator.options.isOffscreenCanvasSupported;_iterator195=_createForOfIteratorHelper(annotations);_context74.prev=4;_iterator195.s();case 6:if((_step195=_iterator195.n()).done){_context74.next=35;break;}annotation=_step195.value;if(!annotation.deleted){_context74.next=10;break;}return _context74.abrupt("continue",33);case 10:_context74.t0=annotation.annotationType;_context74.next=_context74.t0===AnnotationEditorType.FREETEXT?13:_context74.t0===AnnotationEditorType.HIGHLIGHT?16:_context74.t0===AnnotationEditorType.INK?18:_context74.t0===AnnotationEditorType.STAMP?20:_context74.t0===AnnotationEditorType.SIGNATURE?31:33;break;case 13:if(!baseFontRef){baseFont=new Dict(xref);baseFont.set("BaseFont",Name.get("Helvetica"));baseFont.set("Type",Name.get("Font"));baseFont.set("Subtype",Name.get("Type1"));baseFont.set("Encoding",Name.get("WinAnsiEncoding"));baseFontRef=xref.getNewTemporaryRef();changes.put(baseFontRef,{data:baseFont});}promises.push(FreeTextAnnotation.createNewAnnotation(xref,annotation,changes,{evaluator:evaluator,task:task,baseFontRef:baseFontRef}));return _context74.abrupt("break",33);case 16:if(annotation.quadPoints){promises.push(HighlightAnnotation.createNewAnnotation(xref,annotation,changes));}else{promises.push(InkAnnotation.createNewAnnotation(xref,annotation,changes));}return _context74.abrupt("break",33);case 18:promises.push(InkAnnotation.createNewAnnotation(xref,annotation,changes));return _context74.abrupt("break",33);case 20:if(!isOffscreenCanvasSupported){_context74.next=26;break;}_context74.next=23;return imagePromises===null||imagePromises===void 0?void 0:imagePromises.get(annotation.bitmapId);case 23:_context74.t1=_context74.sent;_context74.next=27;break;case 26:_context74.t1=null;case 27:image=_context74.t1;if(image!==null&&image!==void 0&&image.imageStream){imageStream=image.imageStream,smaskStream=image.smaskStream;if(smaskStream){smaskRef=xref.getNewTemporaryRef();changes.put(smaskRef,{data:smaskStream});imageStream.dict.set("SMask",smaskRef);}imageRef=image.imageRef=xref.getNewTemporaryRef();changes.put(imageRef,{data:imageStream});image.imageStream=image.smaskStream=null;}promises.push(StampAnnotation.createNewAnnotation(xref,annotation,changes,{image:image}));return _context74.abrupt("break",33);case 31:promises.push(StampAnnotation.createNewAnnotation(xref,annotation,changes,{}));return _context74.abrupt("break",33);case 33:_context74.next=6;break;case 35:_context74.next=40;break;case 37:_context74.prev=37;_context74.t2=_context74["catch"](4);_iterator195.e(_context74.t2);case 40:_context74.prev=40;_iterator195.f();return _context74.finish(40);case 43:_context74.next=45;return Promise.all(promises);case 45:_context74.t3=_context74.sent;return _context74.abrupt("return",{annotations:_context74.t3});case 47:case"end":return _context74.stop();}},_callee58,null,[[4,37,40,43]]);}));function saveNewAnnotations(_x91,_x92,_x93,_x94,_x95){return _saveNewAnnotations.apply(this,arguments);}return saveNewAnnotations;}()},{key:"printNewAnnotations",value:function(){var _printNewAnnotations=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee59(annotationGlobals,evaluator,task,annotations,imagePromises){var options,xref,promises,_iterator196,_step196,annotation,image,imageStream,smaskStream;return _regeneratorRuntime().wrap(function _callee59$(_context75){while(1)switch(_context75.prev=_context75.next){case 0:if(annotations){_context75.next=2;break;}return _context75.abrupt("return",null);case 2:options=evaluator.options,xref=evaluator.xref;promises=[];_iterator196=_createForOfIteratorHelper(annotations);_context75.prev=5;_iterator196.s();case 7:if((_step196=_iterator196.n()).done){_context75.next=35;break;}annotation=_step196.value;if(!annotation.deleted){_context75.next=11;break;}return _context75.abrupt("continue",33);case 11:_context75.t0=annotation.annotationType;_context75.next=_context75.t0===AnnotationEditorType.FREETEXT?14:_context75.t0===AnnotationEditorType.HIGHLIGHT?16:_context75.t0===AnnotationEditorType.INK?18:_context75.t0===AnnotationEditorType.STAMP?20:_context75.t0===AnnotationEditorType.SIGNATURE?31:33;break;case 14:promises.push(FreeTextAnnotation.createNewPrintAnnotation(annotationGlobals,xref,annotation,{evaluator:evaluator,task:task,evaluatorOptions:options}));return _context75.abrupt("break",33);case 16:if(annotation.quadPoints){promises.push(HighlightAnnotation.createNewPrintAnnotation(annotationGlobals,xref,annotation,{evaluatorOptions:options}));}else{promises.push(InkAnnotation.createNewPrintAnnotation(annotationGlobals,xref,annotation,{evaluatorOptions:options}));}return _context75.abrupt("break",33);case 18:promises.push(InkAnnotation.createNewPrintAnnotation(annotationGlobals,xref,annotation,{evaluatorOptions:options}));return _context75.abrupt("break",33);case 20:if(!options.isOffscreenCanvasSupported){_context75.next=26;break;}_context75.next=23;return imagePromises===null||imagePromises===void 0?void 0:imagePromises.get(annotation.bitmapId);case 23:_context75.t1=_context75.sent;_context75.next=27;break;case 26:_context75.t1=null;case 27:image=_context75.t1;if(image!==null&&image!==void 0&&image.imageStream){imageStream=image.imageStream,smaskStream=image.smaskStream;if(smaskStream){imageStream.dict.set("SMask",smaskStream);}image.imageRef=new JpegStream(imageStream,imageStream.length);image.imageStream=image.smaskStream=null;}promises.push(StampAnnotation.createNewPrintAnnotation(annotationGlobals,xref,annotation,{image:image,evaluatorOptions:options}));return _context75.abrupt("break",33);case 31:promises.push(StampAnnotation.createNewPrintAnnotation(annotationGlobals,xref,annotation,{evaluatorOptions:options}));return _context75.abrupt("break",33);case 33:_context75.next=7;break;case 35:_context75.next=40;break;case 37:_context75.prev=37;_context75.t2=_context75["catch"](5);_iterator196.e(_context75.t2);case 40:_context75.prev=40;_iterator196.f();return _context75.finish(40);case 43:return _context75.abrupt("return",Promise.all(promises));case 44:case"end":return _context75.stop();}},_callee59,null,[[5,37,40,43]]);}));function printNewAnnotations(_x96,_x97,_x98,_x99,_x100){return _printNewAnnotations.apply(this,arguments);}return printNewAnnotations;}()}]);}();function getRgbColor(color){var defaultColor=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new Uint8ClampedArray(3);if(!Array.isArray(color)){return defaultColor;}var rgbColor=defaultColor||new Uint8ClampedArray(3);switch(color.length){case 0:return null;case 1:ColorSpace.singletons.gray.getRgbItem(color,0,rgbColor,0);return rgbColor;case 3:ColorSpace.singletons.rgb.getRgbItem(color,0,rgbColor,0);return rgbColor;case 4:ColorSpace.singletons.cmyk.getRgbItem(color,0,rgbColor,0);return rgbColor;default:return defaultColor;}}function getPdfColorArray(color){return Array.from(color,function(c){return c/255;});}function getQuadPoints(dict,rect){var quadPoints=dict.getArray("QuadPoints");if(!isNumberArray(quadPoints,null)||quadPoints.length===0||quadPoints.length%8>0){return null;}var newQuadPoints=new Float32Array(quadPoints.length);for(var i=0,ii=quadPoints.length;i<ii;i+=8){var _quadPoints$slice=quadPoints.slice(i,i+8),_quadPoints$slice2=_slicedToArray(_quadPoints$slice,8),x1=_quadPoints$slice2[0],y1=_quadPoints$slice2[1],x2=_quadPoints$slice2[2],y2=_quadPoints$slice2[3],x3=_quadPoints$slice2[4],y3=_quadPoints$slice2[5],x4=_quadPoints$slice2[6],y4=_quadPoints$slice2[7];var minX=Math.min(x1,x2,x3,x4);var maxX=Math.max(x1,x2,x3,x4);var minY=Math.min(y1,y2,y3,y4);var maxY=Math.max(y1,y2,y3,y4);if(rect!==null&&(minX<rect[0]||maxX>rect[2]||minY<rect[1]||maxY>rect[3])){return null;}newQuadPoints.set([minX,maxY,maxX,maxY,minX,minY,maxX,minY],i);}return newQuadPoints;}function getTransformMatrix(rect,bbox,matrix){var _Util$getAxialAligned=Util.getAxialAlignedBoundingBox(bbox,matrix),_Util$getAxialAligned2=_slicedToArray(_Util$getAxialAligned,4),minX=_Util$getAxialAligned2[0],minY=_Util$getAxialAligned2[1],maxX=_Util$getAxialAligned2[2],maxY=_Util$getAxialAligned2[3];if(minX===maxX||minY===maxY){return[1,0,0,1,rect[0],rect[1]];}var xRatio=(rect[2]-rect[0])/(maxX-minX);var yRatio=(rect[3]-rect[1])/(maxY-minY);return[xRatio,0,0,yRatio,rect[0]-minX*xRatio,rect[1]-minY*yRatio];}var Annotation=/*#__PURE__*/function(){function Annotation(params){_classCallCheck(this,Annotation);var dict=params.dict,xref=params.xref,annotationGlobals=params.annotationGlobals,ref=params.ref,orphanFields=params.orphanFields;var parentRef=orphanFields===null||orphanFields===void 0?void 0:orphanFields.get(ref);if(parentRef){dict.set("Parent",parentRef);}this.setTitle(dict.get("T"));this.setContents(dict.get("Contents"));this.setModificationDate(dict.get("M"));this.setFlags(dict.get("F"));this.setRectangle(dict.getArray("Rect"));this.setColor(dict.getArray("C"));this.setBorderStyle(dict);this.setAppearance(dict);this.setOptionalContent(dict);var MK=dict.get("MK");this.setBorderAndBackgroundColors(MK);this.setRotation(MK,dict);this.ref=params.ref instanceof Ref?params.ref:null;this._streams=[];if(this.appearance){this._streams.push(this.appearance);}var isLocked=!!(this.flags&AnnotationFlag.LOCKED);var isContentLocked=!!(this.flags&AnnotationFlag.LOCKEDCONTENTS);this.data={annotationFlags:this.flags,borderStyle:this.borderStyle,color:this.color,backgroundColor:this.backgroundColor,borderColor:this.borderColor,rotation:this.rotation,contentsObj:this._contents,hasAppearance:!!this.appearance,id:params.id,modificationDate:this.modificationDate,rect:this.rectangle,subtype:params.subtype,hasOwnCanvas:false,noRotate:!!(this.flags&AnnotationFlag.NOROTATE),noHTML:isLocked&&isContentLocked,isEditable:false,structParent:-1};if(annotationGlobals.structTreeRoot){var structParent=dict.get("StructParent");this.data.structParent=structParent=Number.isInteger(structParent)&&structParent>=0?structParent:-1;annotationGlobals.structTreeRoot.addAnnotationIdToPage(params.pageRef,structParent);}if(params.collectFields){var kids=dict.get("Kids");if(Array.isArray(kids)){var kidIds=[];var _iterator197=_createForOfIteratorHelper(kids),_step197;try{for(_iterator197.s();!(_step197=_iterator197.n()).done;){var kid=_step197.value;if(kid instanceof Ref){kidIds.push(kid.toString());}}}catch(err){_iterator197.e(err);}finally{_iterator197.f();}if(kidIds.length!==0){this.data.kidIds=kidIds;}}this.data.actions=collectActions(xref,dict,AnnotationActionEventType);this.data.fieldName=this._constructFieldName(dict);this.data.pageIndex=params.pageIndex;}var it=dict.get("IT");if(it instanceof Name){this.data.it=it.name;}this._isOffscreenCanvasSupported=params.evaluatorOptions.isOffscreenCanvasSupported;this._fallbackFontDict=null;this._needAppearances=false;}return _createClass(Annotation,[{key:"_hasFlag",value:function _hasFlag(flags,flag){return!!(flags&flag);}},{key:"_buildFlags",value:function _buildFlags(noView,noPrint){var flags=this.flags;if(noView===undefined){if(noPrint===undefined){return undefined;}if(noPrint){return flags&~AnnotationFlag.PRINT;}return flags&~AnnotationFlag.HIDDEN|AnnotationFlag.PRINT;}if(noView){flags|=AnnotationFlag.PRINT;if(noPrint){return flags&~AnnotationFlag.NOVIEW|AnnotationFlag.HIDDEN;}return flags&~AnnotationFlag.HIDDEN|AnnotationFlag.NOVIEW;}flags&=~(AnnotationFlag.HIDDEN|AnnotationFlag.NOVIEW);if(noPrint){return flags&~AnnotationFlag.PRINT;}return flags|AnnotationFlag.PRINT;}},{key:"_isViewable",value:function _isViewable(flags){return!this._hasFlag(flags,AnnotationFlag.INVISIBLE)&&!this._hasFlag(flags,AnnotationFlag.NOVIEW);}},{key:"_isPrintable",value:function _isPrintable(flags){return this._hasFlag(flags,AnnotationFlag.PRINT)&&!this._hasFlag(flags,AnnotationFlag.HIDDEN)&&!this._hasFlag(flags,AnnotationFlag.INVISIBLE);}},{key:"mustBeViewed",value:function mustBeViewed(annotationStorage,_renderForms){var _annotationStorage$ge;var noView=annotationStorage===null||annotationStorage===void 0||(_annotationStorage$ge=annotationStorage.get(this.data.id))===null||_annotationStorage$ge===void 0?void 0:_annotationStorage$ge.noView;if(noView!==undefined){return!noView;}return this.viewable&&!this._hasFlag(this.flags,AnnotationFlag.HIDDEN);}},{key:"mustBePrinted",value:function mustBePrinted(annotationStorage){var _annotationStorage$ge2;var noPrint=annotationStorage===null||annotationStorage===void 0||(_annotationStorage$ge2=annotationStorage.get(this.data.id))===null||_annotationStorage$ge2===void 0?void 0:_annotationStorage$ge2.noPrint;if(noPrint!==undefined){return!noPrint;}return this.printable;}},{key:"mustBeViewedWhenEditing",value:function mustBeViewedWhenEditing(isEditing){var modifiedIds=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return isEditing?!this.data.isEditable:!(modifiedIds!==null&&modifiedIds!==void 0&&modifiedIds.has(this.data.id));}},{key:"viewable",get:function get(){if(this.data.quadPoints===null){return false;}if(this.flags===0){return true;}return this._isViewable(this.flags);}},{key:"printable",get:function get(){if(this.data.quadPoints===null){return false;}if(this.flags===0){return false;}return this._isPrintable(this.flags);}},{key:"_parseStringHelper",value:function _parseStringHelper(data){var str=typeof data==="string"?stringToPDFString(data):"";var dir=str&&bidi(str).dir==="rtl"?"rtl":"ltr";return{str:str,dir:dir};}},{key:"setDefaultAppearance",value:function setDefaultAppearance(params){var dict=params.dict,annotationGlobals=params.annotationGlobals;var defaultAppearance=getInheritableProperty({dict:dict,key:"DA"})||annotationGlobals.acroForm.get("DA");this._defaultAppearance=typeof defaultAppearance==="string"?defaultAppearance:"";this.data.defaultAppearanceData=parseDefaultAppearance(this._defaultAppearance);}},{key:"setTitle",value:function setTitle(title){this._title=this._parseStringHelper(title);}},{key:"setContents",value:function setContents(contents){this._contents=this._parseStringHelper(contents);}},{key:"setModificationDate",value:function setModificationDate(modificationDate){this.modificationDate=typeof modificationDate==="string"?modificationDate:null;}},{key:"setFlags",value:function setFlags(flags){this.flags=Number.isInteger(flags)&&flags>0?flags:0;if(this.flags&AnnotationFlag.INVISIBLE&&this.constructor.name!=="Annotation"){this.flags^=AnnotationFlag.INVISIBLE;}}},{key:"hasFlag",value:function hasFlag(flag){return this._hasFlag(this.flags,flag);}},{key:"setRectangle",value:function setRectangle(rectangle){this.rectangle=lookupNormalRect(rectangle,[0,0,0,0]);}},{key:"setColor",value:function setColor(color){this.color=getRgbColor(color);}},{key:"setLineEndings",value:function setLineEndings(lineEndings){this.lineEndings=["None","None"];if(Array.isArray(lineEndings)&&lineEndings.length===2){for(var i=0;i<2;i++){var obj=lineEndings[i];if(obj instanceof Name){switch(obj.name){case"None":continue;case"Square":case"Circle":case"Diamond":case"OpenArrow":case"ClosedArrow":case"Butt":case"ROpenArrow":case"RClosedArrow":case"Slash":this.lineEndings[i]=obj.name;continue;}}warn("Ignoring invalid lineEnding: ".concat(obj));}}}},{key:"setRotation",value:function setRotation(mk,dict){this.rotation=0;var angle=mk instanceof Dict?mk.get("R")||0:dict.get("Rotate")||0;if(Number.isInteger(angle)&&angle!==0){angle%=360;if(angle<0){angle+=360;}if(angle%90===0){this.rotation=angle;}}}},{key:"setBorderAndBackgroundColors",value:function setBorderAndBackgroundColors(mk){if(mk instanceof Dict){this.borderColor=getRgbColor(mk.getArray("BC"),null);this.backgroundColor=getRgbColor(mk.getArray("BG"),null);}else{this.borderColor=this.backgroundColor=null;}}},{key:"setBorderStyle",value:function setBorderStyle(borderStyle){this.borderStyle=new AnnotationBorderStyle();if(!(borderStyle instanceof Dict)){return;}if(borderStyle.has("BS")){var dict=borderStyle.get("BS");if(dict instanceof Dict){var dictType=dict.get("Type");if(!dictType||isName(dictType,"Border")){this.borderStyle.setWidth(dict.get("W"),this.rectangle);this.borderStyle.setStyle(dict.get("S"));this.borderStyle.setDashArray(dict.getArray("D"));}}}else if(borderStyle.has("Border")){var array=borderStyle.getArray("Border");if(Array.isArray(array)&&array.length>=3){this.borderStyle.setHorizontalCornerRadius(array[0]);this.borderStyle.setVerticalCornerRadius(array[1]);this.borderStyle.setWidth(array[2],this.rectangle);if(array.length===4){this.borderStyle.setDashArray(array[3],true);}}}else{this.borderStyle.setWidth(0);}}},{key:"setAppearance",value:function setAppearance(dict){this.appearance=null;var appearanceStates=dict.get("AP");if(!(appearanceStates instanceof Dict)){return;}var normalAppearanceState=appearanceStates.get("N");if(normalAppearanceState instanceof BaseStream){this.appearance=normalAppearanceState;return;}if(!(normalAppearanceState instanceof Dict)){return;}var as=dict.get("AS");if(!(as instanceof Name)||!normalAppearanceState.has(as.name)){return;}var appearance=normalAppearanceState.get(as.name);if(appearance instanceof BaseStream){this.appearance=appearance;}}},{key:"setOptionalContent",value:function setOptionalContent(dict){this.oc=null;var oc=dict.get("OC");if(oc instanceof Name){warn("setOptionalContent: Support for /Name-entry is not implemented.");}else if(oc instanceof Dict){this.oc=oc;}}},{key:"loadResources",value:function loadResources(keys,appearance){return appearance.dict.getAsync("Resources").then(function(resources){if(!resources){return undefined;}var objectLoader=new ObjectLoader(resources,keys,resources.xref);return objectLoader.load().then(function(){return resources;});});}},{key:"getOperatorList",value:function(){var _getOperatorList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee60(evaluator,task,intent,annotationStorage){var _this$data,hasOwnCanvas,id,rect,appearance,isUsingOwnCanvas,appearanceDict,resources,bbox,matrix,transform,opList,optionalContent;return _regeneratorRuntime().wrap(function _callee60$(_context76){while(1)switch(_context76.prev=_context76.next){case 0:_this$data=this.data,hasOwnCanvas=_this$data.hasOwnCanvas,id=_this$data.id,rect=_this$data.rect;appearance=this.appearance;isUsingOwnCanvas=!!(hasOwnCanvas&&intent&RenderingIntentFlag.DISPLAY);if(!(isUsingOwnCanvas&&(this.width===0||this.height===0))){_context76.next=6;break;}this.data.hasOwnCanvas=false;return _context76.abrupt("return",{opList:new OperatorList(),separateForm:false,separateCanvas:false});case 6:if(appearance){_context76.next=11;break;}if(isUsingOwnCanvas){_context76.next=9;break;}return _context76.abrupt("return",{opList:new OperatorList(),separateForm:false,separateCanvas:false});case 9:appearance=new StringStream("");appearance.dict=new Dict();case 11:appearanceDict=appearance.dict;_context76.next=14;return this.loadResources(["ExtGState","ColorSpace","Pattern","Shading","XObject","Font"],appearance);case 14:resources=_context76.sent;bbox=lookupRect(appearanceDict.getArray("BBox"),[0,0,1,1]);matrix=lookupMatrix(appearanceDict.getArray("Matrix"),IDENTITY_MATRIX);transform=getTransformMatrix(rect,bbox,matrix);opList=new OperatorList();if(!this.oc){_context76.next=23;break;}_context76.next=22;return evaluator.parseMarkedContentProps(this.oc,null);case 22:optionalContent=_context76.sent;case 23:if(optionalContent!==undefined){opList.addOp(OPS.beginMarkedContentProps,["OC",optionalContent]);}opList.addOp(OPS.beginAnnotation,[id,rect,transform,matrix,isUsingOwnCanvas]);_context76.next=27;return evaluator.getOperatorList({stream:appearance,task:task,resources:resources,operatorList:opList,fallbackFontDict:this._fallbackFontDict});case 27:opList.addOp(OPS.endAnnotation,[]);if(optionalContent!==undefined){opList.addOp(OPS.endMarkedContent,[]);}this.reset();return _context76.abrupt("return",{opList:opList,separateForm:false,separateCanvas:isUsingOwnCanvas});case 31:case"end":return _context76.stop();}},_callee60,this);}));function getOperatorList(_x101,_x102,_x103,_x104){return _getOperatorList.apply(this,arguments);}return getOperatorList;}()},{key:"save",value:function(){var _save=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee61(evaluator,task,annotationStorage,changes){return _regeneratorRuntime().wrap(function _callee61$(_context77){while(1)switch(_context77.prev=_context77.next){case 0:return _context77.abrupt("return",null);case 1:case"end":return _context77.stop();}},_callee61);}));function save(_x105,_x106,_x107,_x108){return _save.apply(this,arguments);}return save;}()},{key:"hasTextContent",get:function get(){return false;}},{key:"extractTextContent",value:function(){var _extractTextContent=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee62(evaluator,task,viewBox){var resources,text,buffer,firstPosition,sink,appearanceDict,bbox,matrix;return _regeneratorRuntime().wrap(function _callee62$(_context78){while(1)switch(_context78.prev=_context78.next){case 0:if(this.appearance){_context78.next=2;break;}return _context78.abrupt("return");case 2:_context78.next=4;return this.loadResources(["ExtGState","Font","Properties","XObject"],this.appearance);case 4:resources=_context78.sent;text=[];buffer=[];firstPosition=null;sink={desiredSize:Math.Infinity,ready:true,enqueue:function enqueue(chunk,size){var _iterator198=_createForOfIteratorHelper(chunk.items),_step198;try{for(_iterator198.s();!(_step198=_iterator198.n()).done;){var item=_step198.value;if(item.str===undefined){continue;}firstPosition||(firstPosition=item.transform.slice(-2));buffer.push(item.str);if(item.hasEOL){text.push(buffer.join("").trimEnd());buffer.length=0;}}}catch(err){_iterator198.e(err);}finally{_iterator198.f();}}};_context78.next=11;return evaluator.getTextContent({stream:this.appearance,task:task,resources:resources,includeMarkedContent:true,keepWhiteSpace:true,sink:sink,viewBox:viewBox});case 11:this.reset();if(buffer.length){text.push(buffer.join("").trimEnd());}if(text.length>1||text[0]){appearanceDict=this.appearance.dict;bbox=lookupRect(appearanceDict.getArray("BBox"),null);matrix=lookupMatrix(appearanceDict.getArray("Matrix"),null);this.data.textPosition=this._transformPoint(firstPosition,bbox,matrix);this.data.textContent=text;}case 14:case"end":return _context78.stop();}},_callee62,this);}));function extractTextContent(_x109,_x110,_x111){return _extractTextContent.apply(this,arguments);}return extractTextContent;}()},{key:"_transformPoint",value:function _transformPoint(coords,bbox,matrix){var rect=this.data.rect;bbox||(bbox=[0,0,1,1]);matrix||(matrix=[1,0,0,1,0,0]);var transform=getTransformMatrix(rect,bbox,matrix);transform[4]-=rect[0];transform[5]-=rect[1];coords=Util.applyTransform(coords,transform);return Util.applyTransform(coords,matrix);}},{key:"getFieldObject",value:function getFieldObject(){if(this.data.kidIds){return{id:this.data.id,actions:this.data.actions,name:this.data.fieldName,strokeColor:this.data.borderColor,fillColor:this.data.backgroundColor,type:"",kidIds:this.data.kidIds,page:this.data.pageIndex,rotation:this.rotation};}return null;}},{key:"reset",value:function reset(){var _iterator199=_createForOfIteratorHelper(this._streams),_step199;try{for(_iterator199.s();!(_step199=_iterator199.n()).done;){var stream=_step199.value;stream.reset();}}catch(err){_iterator199.e(err);}finally{_iterator199.f();}}},{key:"_constructFieldName",value:function _constructFieldName(dict){if(!dict.has("T")&&!dict.has("Parent")){warn("Unknown field name, falling back to empty field name.");return"";}if(!dict.has("Parent")){return stringToPDFString(dict.get("T"));}var fieldName=[];if(dict.has("T")){fieldName.unshift(stringToPDFString(dict.get("T")));}var loopDict=dict;var visited=new RefSet();if(dict.objId){visited.put(dict.objId);}while(loopDict.has("Parent")){loopDict=loopDict.get("Parent");if(!(loopDict instanceof Dict)||loopDict.objId&&visited.has(loopDict.objId)){break;}if(loopDict.objId){visited.put(loopDict.objId);}if(loopDict.has("T")){fieldName.unshift(stringToPDFString(loopDict.get("T")));}}return fieldName.join(".");}},{key:"width",get:function get(){return this.data.rect[2]-this.data.rect[0];}},{key:"height",get:function get(){return this.data.rect[3]-this.data.rect[1];}}]);}();var AnnotationBorderStyle=/*#__PURE__*/function(){function AnnotationBorderStyle(){_classCallCheck(this,AnnotationBorderStyle);this.width=1;this.rawWidth=1;this.style=AnnotationBorderStyleType.SOLID;this.dashArray=[3];this.horizontalCornerRadius=0;this.verticalCornerRadius=0;}return _createClass(AnnotationBorderStyle,[{key:"setWidth",value:function setWidth(width){var rect=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[0,0,0,0];if(width instanceof Name){this.width=0;return;}if(typeof width==="number"){if(width>0){this.rawWidth=width;var maxWidth=(rect[2]-rect[0])/2;var maxHeight=(rect[3]-rect[1])/2;if(maxWidth>0&&maxHeight>0&&(width>maxWidth||width>maxHeight)){warn("AnnotationBorderStyle.setWidth - ignoring width: ".concat(width));width=1;}}this.width=width;}}},{key:"setStyle",value:function setStyle(style){if(!(style instanceof Name)){return;}switch(style.name){case"S":this.style=AnnotationBorderStyleType.SOLID;break;case"D":this.style=AnnotationBorderStyleType.DASHED;break;case"B":this.style=AnnotationBorderStyleType.BEVELED;break;case"I":this.style=AnnotationBorderStyleType.INSET;break;case"U":this.style=AnnotationBorderStyleType.UNDERLINE;break;default:break;}}},{key:"setDashArray",value:function setDashArray(dashArray){var forceStyle=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(Array.isArray(dashArray)){var isValid=true;var allZeros=true;var _iterator200=_createForOfIteratorHelper(dashArray),_step200;try{for(_iterator200.s();!(_step200=_iterator200.n()).done;){var element=_step200.value;var validNumber=+element>=0;if(!validNumber){isValid=false;break;}else if(element>0){allZeros=false;}}}catch(err){_iterator200.e(err);}finally{_iterator200.f();}if(dashArray.length===0||isValid&&!allZeros){this.dashArray=dashArray;if(forceStyle){this.setStyle(Name.get("D"));}}else{this.width=0;}}else if(dashArray){this.width=0;}}},{key:"setHorizontalCornerRadius",value:function setHorizontalCornerRadius(radius){if(Number.isInteger(radius)){this.horizontalCornerRadius=radius;}}},{key:"setVerticalCornerRadius",value:function setVerticalCornerRadius(radius){if(Number.isInteger(radius)){this.verticalCornerRadius=radius;}}}]);}();var MarkupAnnotation=/*#__PURE__*/function(_Annotation){function MarkupAnnotation(params){var _this266;_classCallCheck(this,MarkupAnnotation);_this266=_callSuper(this,MarkupAnnotation,[params]);var dict=params.dict;if(dict.has("IRT")){var rawIRT=dict.getRaw("IRT");_this266.data.inReplyTo=rawIRT instanceof Ref?rawIRT.toString():null;var rt=dict.get("RT");_this266.data.replyType=rt instanceof Name?rt.name:AnnotationReplyType.REPLY;}var popupRef=null;if(_this266.data.replyType===AnnotationReplyType.GROUP){var parent=dict.get("IRT");_this266.setTitle(parent.get("T"));_this266.data.titleObj=_this266._title;_this266.setContents(parent.get("Contents"));_this266.data.contentsObj=_this266._contents;if(!parent.has("CreationDate")){_this266.data.creationDate=null;}else{_this266.setCreationDate(parent.get("CreationDate"));_this266.data.creationDate=_this266.creationDate;}if(!parent.has("M")){_this266.data.modificationDate=null;}else{_this266.setModificationDate(parent.get("M"));_this266.data.modificationDate=_this266.modificationDate;}popupRef=parent.getRaw("Popup");if(!parent.has("C")){_this266.data.color=null;}else{_this266.setColor(parent.getArray("C"));_this266.data.color=_this266.color;}}else{_this266.data.titleObj=_this266._title;_this266.setCreationDate(dict.get("CreationDate"));_this266.data.creationDate=_this266.creationDate;popupRef=dict.getRaw("Popup");if(!dict.has("C")){_this266.data.color=null;}}_this266.data.popupRef=popupRef instanceof Ref?popupRef.toString():null;if(dict.has("RC")){_this266.data.richText=XFAFactory.getRichTextAsHtml(dict.get("RC"));}return _this266;}_inherits(MarkupAnnotation,_Annotation);return _createClass(MarkupAnnotation,[{key:"setCreationDate",value:function setCreationDate(creationDate){this.creationDate=typeof creationDate==="string"?creationDate:null;}},{key:"_setDefaultAppearance",value:function _setDefaultAppearance(_ref100){var xref=_ref100.xref,extra=_ref100.extra,strokeColor=_ref100.strokeColor,fillColor=_ref100.fillColor,blendMode=_ref100.blendMode,strokeAlpha=_ref100.strokeAlpha,fillAlpha=_ref100.fillAlpha,pointsCallback=_ref100.pointsCallback;var minX=Number.MAX_VALUE;var minY=Number.MAX_VALUE;var maxX=Number.MIN_VALUE;var maxY=Number.MIN_VALUE;var buffer=["q"];if(extra){buffer.push(extra);}if(strokeColor){buffer.push("".concat(strokeColor[0]," ").concat(strokeColor[1]," ").concat(strokeColor[2]," RG"));}if(fillColor){buffer.push("".concat(fillColor[0]," ").concat(fillColor[1]," ").concat(fillColor[2]," rg"));}var pointsArray=this.data.quadPoints||Float32Array.from([this.rectangle[0],this.rectangle[3],this.rectangle[2],this.rectangle[3],this.rectangle[0],this.rectangle[1],this.rectangle[2],this.rectangle[1]]);for(var i=0,ii=pointsArray.length;i<ii;i+=8){var _pointsCallback=pointsCallback(buffer,pointsArray.subarray(i,i+8)),_pointsCallback2=_slicedToArray(_pointsCallback,4),mX=_pointsCallback2[0],MX=_pointsCallback2[1],mY=_pointsCallback2[2],MY=_pointsCallback2[3];minX=Math.min(minX,mX);maxX=Math.max(maxX,MX);minY=Math.min(minY,mY);maxY=Math.max(maxY,MY);}buffer.push("Q");var formDict=new Dict(xref);var appearanceStreamDict=new Dict(xref);appearanceStreamDict.set("Subtype",Name.get("Form"));var appearanceStream=new StringStream(buffer.join(" "));appearanceStream.dict=appearanceStreamDict;formDict.set("Fm0",appearanceStream);var gsDict=new Dict(xref);if(blendMode){gsDict.set("BM",Name.get(blendMode));}if(typeof strokeAlpha==="number"){gsDict.set("CA",strokeAlpha);}if(typeof fillAlpha==="number"){gsDict.set("ca",fillAlpha);}var stateDict=new Dict(xref);stateDict.set("GS0",gsDict);var resources=new Dict(xref);resources.set("ExtGState",stateDict);resources.set("XObject",formDict);var appearanceDict=new Dict(xref);appearanceDict.set("Resources",resources);var bbox=this.data.rect=[minX,minY,maxX,maxY];appearanceDict.set("BBox",bbox);this.appearance=new StringStream("/GS0 gs /Fm0 Do");this.appearance.dict=appearanceDict;this._streams.push(this.appearance,appearanceStream);}}],[{key:"createNewAnnotation",value:function(){var _createNewAnnotation=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee63(xref,annotation,changes,params){var annotationRef,ap,annotationDict,apRef;return _regeneratorRuntime().wrap(function _callee63$(_context79){while(1)switch(_context79.prev=_context79.next){case 0:annotationRef=annotation.ref||(annotation.ref=xref.getNewTemporaryRef());_context79.next=3;return this.createNewAppearanceStream(annotation,xref,params);case 3:ap=_context79.sent;if(ap){apRef=xref.getNewTemporaryRef();annotationDict=this.createNewDict(annotation,xref,{apRef:apRef});changes.put(apRef,{data:ap});}else{annotationDict=this.createNewDict(annotation,xref,{});}if(Number.isInteger(annotation.parentTreeId)){annotationDict.set("StructParent",annotation.parentTreeId);}changes.put(annotationRef,{data:annotationDict});return _context79.abrupt("return",{ref:annotationRef});case 8:case"end":return _context79.stop();}},_callee63,this);}));function createNewAnnotation(_x112,_x113,_x114,_x115){return _createNewAnnotation.apply(this,arguments);}return createNewAnnotation;}()},{key:"createNewPrintAnnotation",value:function(){var _createNewPrintAnnotation=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee64(annotationGlobals,xref,annotation,params){var ap,annotationDict,newAnnotation;return _regeneratorRuntime().wrap(function _callee64$(_context80){while(1)switch(_context80.prev=_context80.next){case 0:_context80.next=2;return this.createNewAppearanceStream(annotation,xref,params);case 2:ap=_context80.sent;annotationDict=this.createNewDict(annotation,xref,ap?{ap:ap}:{});newAnnotation=new this.prototype.constructor({dict:annotationDict,xref:xref,annotationGlobals:annotationGlobals,evaluatorOptions:params.evaluatorOptions});if(annotation.ref){newAnnotation.ref=newAnnotation.refToReplace=annotation.ref;}return _context80.abrupt("return",newAnnotation);case 7:case"end":return _context80.stop();}},_callee64,this);}));function createNewPrintAnnotation(_x116,_x117,_x118,_x119){return _createNewPrintAnnotation.apply(this,arguments);}return createNewPrintAnnotation;}()}]);}(Annotation);var WidgetAnnotation=/*#__PURE__*/function(_Annotation2){function WidgetAnnotation(params){var _this267$appearance;var _this267;_classCallCheck(this,WidgetAnnotation);_this267=_callSuper(this,WidgetAnnotation,[params]);var dict=params.dict,xref=params.xref,annotationGlobals=params.annotationGlobals;var data=_this267.data;_this267._needAppearances=params.needAppearances;data.annotationType=AnnotationType.WIDGET;if(data.fieldName===undefined){data.fieldName=_this267._constructFieldName(dict);}if(data.actions===undefined){data.actions=collectActions(xref,dict,AnnotationActionEventType);}var fieldValue=getInheritableProperty({dict:dict,key:"V",getArray:true});data.fieldValue=_this267._decodeFormValue(fieldValue);var defaultFieldValue=getInheritableProperty({dict:dict,key:"DV",getArray:true});data.defaultFieldValue=_this267._decodeFormValue(defaultFieldValue);if(fieldValue===undefined&&annotationGlobals.xfaDatasets){var path=_this267._title.str;if(path){_this267._hasValueFromXFA=true;data.fieldValue=fieldValue=annotationGlobals.xfaDatasets.getValue(path);}}if(fieldValue===undefined&&data.defaultFieldValue!==null){data.fieldValue=data.defaultFieldValue;}data.alternativeText=stringToPDFString(dict.get("TU")||"");_this267.setDefaultAppearance(params);data.hasAppearance||(data.hasAppearance=_this267._needAppearances&&data.fieldValue!==undefined&&data.fieldValue!==null);var fieldType=getInheritableProperty({dict:dict,key:"FT"});data.fieldType=fieldType instanceof Name?fieldType.name:null;var localResources=getInheritableProperty({dict:dict,key:"DR"});var acroFormResources=annotationGlobals.acroForm.get("DR");var appearanceResources=(_this267$appearance=_this267.appearance)===null||_this267$appearance===void 0?void 0:_this267$appearance.dict.get("Resources");_this267._fieldResources={localResources:localResources,acroFormResources:acroFormResources,appearanceResources:appearanceResources,mergedResources:Dict.merge({xref:xref,dictArray:[localResources,appearanceResources,acroFormResources],mergeSubDicts:true})};data.fieldFlags=getInheritableProperty({dict:dict,key:"Ff"});if(!Number.isInteger(data.fieldFlags)||data.fieldFlags<0){data.fieldFlags=0;}data.password=_this267.hasFieldFlag(AnnotationFieldFlag.PASSWORD);data.readOnly=_this267.hasFieldFlag(AnnotationFieldFlag.READONLY);data.required=_this267.hasFieldFlag(AnnotationFieldFlag.REQUIRED);data.hidden=_this267._hasFlag(data.annotationFlags,AnnotationFlag.HIDDEN)||_this267._hasFlag(data.annotationFlags,AnnotationFlag.NOVIEW);return _this267;}_inherits(WidgetAnnotation,_Annotation2);return _createClass(WidgetAnnotation,[{key:"_decodeFormValue",value:function _decodeFormValue(formValue){if(Array.isArray(formValue)){return formValue.filter(function(item){return typeof item==="string";}).map(function(item){return stringToPDFString(item);});}else if(formValue instanceof Name){return stringToPDFString(formValue.name);}else if(typeof formValue==="string"){return stringToPDFString(formValue);}return null;}},{key:"hasFieldFlag",value:function hasFieldFlag(flag){return!!(this.data.fieldFlags&flag);}},{key:"_isViewable",value:function _isViewable(flags){return true;}},{key:"mustBeViewed",value:function mustBeViewed(annotationStorage,renderForms){if(renderForms){return this.viewable;}return _superPropGet(WidgetAnnotation,"mustBeViewed",this,3)([annotationStorage,renderForms])&&!this._hasFlag(this.flags,AnnotationFlag.NOVIEW);}},{key:"getRotationMatrix",value:function getRotationMatrix(annotationStorage){var _annotationStorage$ge3;var rotation=annotationStorage===null||annotationStorage===void 0||(_annotationStorage$ge3=annotationStorage.get(this.data.id))===null||_annotationStorage$ge3===void 0?void 0:_annotationStorage$ge3.rotation;if(rotation===undefined){rotation=this.rotation;}return rotation===0?IDENTITY_MATRIX:_getRotationMatrix(rotation,this.width,this.height);}},{key:"getBorderAndBackgroundAppearances",value:function getBorderAndBackgroundAppearances(annotationStorage){var _annotationStorage$ge4;var rotation=annotationStorage===null||annotationStorage===void 0||(_annotationStorage$ge4=annotationStorage.get(this.data.id))===null||_annotationStorage$ge4===void 0?void 0:_annotationStorage$ge4.rotation;if(rotation===undefined){rotation=this.rotation;}if(!this.backgroundColor&&!this.borderColor){return"";}var rect=rotation===0||rotation===180?"0 0 ".concat(this.width," ").concat(this.height," re"):"0 0 ".concat(this.height," ").concat(this.width," re");var str="";if(this.backgroundColor){str="".concat(getPdfColor(this.backgroundColor,true)," ").concat(rect," f ");}if(this.borderColor){var borderWidth=this.borderStyle.width||1;str+="".concat(borderWidth," w ").concat(getPdfColor(this.borderColor,false)," ").concat(rect," S ");}return str;}},{key:"getOperatorList",value:function(){var _getOperatorList2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee65(evaluator,task,intent,annotationStorage){var content,opList,isUsingOwnCanvas,matrix,bbox,transform,optionalContent,stream;return _regeneratorRuntime().wrap(function _callee65$(_context81){while(1)switch(_context81.prev=_context81.next){case 0:if(!(intent&RenderingIntentFlag.ANNOTATIONS_FORMS&&!(this instanceof SignatureWidgetAnnotation)&&!this.data.noHTML&&!this.data.hasOwnCanvas)){_context81.next=2;break;}return _context81.abrupt("return",{opList:new OperatorList(),separateForm:true,separateCanvas:false});case 2:if(this._hasText){_context81.next=4;break;}return _context81.abrupt("return",_superPropGet(WidgetAnnotation,"getOperatorList",this,3)([evaluator,task,intent,annotationStorage]));case 4:_context81.next=6;return this._getAppearance(evaluator,task,intent,annotationStorage);case 6:content=_context81.sent;if(!(this.appearance&&content===null)){_context81.next=9;break;}return _context81.abrupt("return",_superPropGet(WidgetAnnotation,"getOperatorList",this,3)([evaluator,task,intent,annotationStorage]));case 9:opList=new OperatorList();if(!(!this._defaultAppearance||content===null)){_context81.next=12;break;}return _context81.abrupt("return",{opList:opList,separateForm:false,separateCanvas:false});case 12:isUsingOwnCanvas=!!(this.data.hasOwnCanvas&&intent&RenderingIntentFlag.DISPLAY);matrix=[1,0,0,1,0,0];bbox=[0,0,this.width,this.height];transform=getTransformMatrix(this.data.rect,bbox,matrix);if(!this.oc){_context81.next=20;break;}_context81.next=19;return evaluator.parseMarkedContentProps(this.oc,null);case 19:optionalContent=_context81.sent;case 20:if(optionalContent!==undefined){opList.addOp(OPS.beginMarkedContentProps,["OC",optionalContent]);}opList.addOp(OPS.beginAnnotation,[this.data.id,this.data.rect,transform,this.getRotationMatrix(annotationStorage),isUsingOwnCanvas]);stream=new StringStream(content);_context81.next=25;return evaluator.getOperatorList({stream:stream,task:task,resources:this._fieldResources.mergedResources,operatorList:opList});case 25:opList.addOp(OPS.endAnnotation,[]);if(optionalContent!==undefined){opList.addOp(OPS.endMarkedContent,[]);}return _context81.abrupt("return",{opList:opList,separateForm:false,separateCanvas:isUsingOwnCanvas});case 28:case"end":return _context81.stop();}},_callee65,this);}));function getOperatorList(_x120,_x121,_x122,_x123){return _getOperatorList2.apply(this,arguments);}return getOperatorList;}()},{key:"_getMKDict",value:function _getMKDict(rotation){var mk=new Dict(null);if(rotation){mk.set("R",rotation);}if(this.borderColor){mk.set("BC",getPdfColorArray(this.borderColor));}if(this.backgroundColor){mk.set("BG",getPdfColorArray(this.backgroundColor));}return mk.size>0?mk:null;}},{key:"amendSavedDict",value:function amendSavedDict(annotationStorage,dict){}},{key:"setValue",value:function setValue(dict,value,xref,changes){var _getParentToUpdate=getParentToUpdate(dict,this.ref,xref),parentDict=_getParentToUpdate.dict,parentRef=_getParentToUpdate.ref;if(!parentDict){dict.set("V",value);}else if(!changes.has(parentRef)){var newParentDict=parentDict.clone();newParentDict.set("V",value);changes.put(parentRef,{data:newParentDict});return newParentDict;}return null;}},{key:"save",value:function(){var _save2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee66(evaluator,task,annotationStorage,changes){var _appearance;var storageEntry,flags,value,rotation,appearance,needAppearances,xref,originalDict,dict,_iterator201,_step201,key,ap,xfa,newParentDict,maybeMK,newRef,AP,resources,appearanceStream,appearanceDict,rotationMatrix;return _regeneratorRuntime().wrap(function _callee66$(_context82){while(1)switch(_context82.prev=_context82.next){case 0:storageEntry=annotationStorage===null||annotationStorage===void 0?void 0:annotationStorage.get(this.data.id);flags=this._buildFlags(storageEntry===null||storageEntry===void 0?void 0:storageEntry.noView,storageEntry===null||storageEntry===void 0?void 0:storageEntry.noPrint);value=storageEntry===null||storageEntry===void 0?void 0:storageEntry.value,rotation=storageEntry===null||storageEntry===void 0?void 0:storageEntry.rotation;if(!(value===this.data.fieldValue||value===undefined)){_context82.next=7;break;}if(!(!this._hasValueFromXFA&&rotation===undefined&&flags===undefined)){_context82.next=6;break;}return _context82.abrupt("return");case 6:value||(value=this.data.fieldValue);case 7:if(!(rotation===undefined&&!this._hasValueFromXFA&&Array.isArray(value)&&Array.isArray(this.data.fieldValue)&&isArrayEqual(value,this.data.fieldValue)&&flags===undefined)){_context82.next=9;break;}return _context82.abrupt("return");case 9:if(rotation===undefined){rotation=this.rotation;}appearance=null;if(this._needAppearances){_context82.next=19;break;}_context82.next=14;return this._getAppearance(evaluator,task,RenderingIntentFlag.SAVE,annotationStorage);case 14:appearance=_context82.sent;if(!(appearance===null&&flags===undefined)){_context82.next=17;break;}return _context82.abrupt("return");case 17:_context82.next=19;break;case 19:needAppearances=false;if((_appearance=appearance)!==null&&_appearance!==void 0&&_appearance.needAppearances){needAppearances=true;appearance=null;}xref=evaluator.xref;originalDict=xref.fetchIfRef(this.ref);if(originalDict instanceof Dict){_context82.next=25;break;}return _context82.abrupt("return");case 25:dict=new Dict(xref);_iterator201=_createForOfIteratorHelper(originalDict.getKeys());try{for(_iterator201.s();!(_step201=_iterator201.n()).done;){key=_step201.value;if(key!=="AP"){dict.set(key,originalDict.getRaw(key));}}}catch(err){_iterator201.e(err);}finally{_iterator201.f();}if(flags!==undefined){dict.set("F",flags);if(appearance===null&&!needAppearances){ap=originalDict.getRaw("AP");if(ap){dict.set("AP",ap);}}}xfa={path:this.data.fieldName,value:value};newParentDict=this.setValue(dict,Array.isArray(value)?value.map(stringToAsciiOrUTF16BE):stringToAsciiOrUTF16BE(value),xref,changes);this.amendSavedDict(annotationStorage,newParentDict||dict);maybeMK=this._getMKDict(rotation);if(maybeMK){dict.set("MK",maybeMK);}changes.put(this.ref,{data:dict,xfa:xfa,needAppearances:needAppearances});if(appearance!==null){newRef=xref.getNewTemporaryRef();AP=new Dict(xref);dict.set("AP",AP);AP.set("N",newRef);resources=this._getSaveFieldResources(xref);appearanceStream=new StringStream(appearance);appearanceDict=appearanceStream.dict=new Dict(xref);appearanceDict.set("Subtype",Name.get("Form"));appearanceDict.set("Resources",resources);appearanceDict.set("BBox",[0,0,this.width,this.height]);rotationMatrix=this.getRotationMatrix(annotationStorage);if(rotationMatrix!==IDENTITY_MATRIX){appearanceDict.set("Matrix",rotationMatrix);}changes.put(newRef,{data:appearanceStream,xfa:null,needAppearances:false});}dict.set("M","D:".concat(getModificationDate()));case 37:case"end":return _context82.stop();}},_callee66,this);}));function save(_x124,_x125,_x126,_x127){return _save2.apply(this,arguments);}return save;}()},{key:"_getAppearance",value:function(){var _getAppearance2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee67(evaluator,task,intent,annotationStorage){var storageEntry,value,rotation,colors,option,lineCount,lines,defaultPadding,defaultHPadding,totalWidth,totalHeight,_ref102,font,defaultAppearance,fontSize,lineHeight,encodedLines,encodingError,_iterator202,_step202,line,encodedString,fontFamily,fakeUnicodeFont,resources,newFont,oldFont,_iterator203,_step203,key,fontName,i,ii,savedDefaultAppearance,_this$_computeFontSiz,_this$_computeFontSiz2,_this$_computeFontSiz3,_this$_computeFontSiz4,descent,defaultVPadding,alignment,bottomPadding,prevInfo,renderedText;return _regeneratorRuntime().wrap(function _callee67$(_context83){while(1)switch(_context83.prev=_context83.next){case 0:if(!this.data.password){_context83.next=2;break;}return _context83.abrupt("return",null);case 2:storageEntry=annotationStorage===null||annotationStorage===void 0?void 0:annotationStorage.get(this.data.id);if(storageEntry){value=storageEntry.formattedValue||storageEntry.value;rotation=storageEntry.rotation;}if(!(rotation===undefined&&value===undefined&&!this._needAppearances)){_context83.next=7;break;}if(!(!this._hasValueFromXFA||this.appearance)){_context83.next=7;break;}return _context83.abrupt("return",null);case 7:colors=this.getBorderAndBackgroundAppearances(annotationStorage);if(!(value===undefined)){_context83.next=12;break;}value=this.data.fieldValue;if(value){_context83.next=12;break;}return _context83.abrupt("return","/Tx BMC q ".concat(colors,"Q EMC"));case 12:if(Array.isArray(value)&&value.length===1){value=value[0];}assert(typeof value==="string","Expected `value` to be a string.");value=value.trimEnd();if(this.data.combo){option=this.data.options.find(function(_ref101){var exportValue=_ref101.exportValue;return value===exportValue;});value=(option===null||option===void 0?void 0:option.displayValue)||value;}if(!(value==="")){_context83.next=18;break;}return _context83.abrupt("return","/Tx BMC q ".concat(colors,"Q EMC"));case 18:if(rotation===undefined){rotation=this.rotation;}lineCount=-1;if(this.data.multiLine){lines=value.split(/\\r\\n?|\\n/).map(function(line){return line.normalize("NFC");});lineCount=lines.length;}else{lines=[value.replace(/\\r\\n?|\\n/,"").normalize("NFC")];}defaultPadding=1;defaultHPadding=2;totalWidth=this.width,totalHeight=this.height;if(rotation===90||rotation===270){_ref102=[totalHeight,totalWidth];totalWidth=_ref102[0];totalHeight=_ref102[1];}if(!this._defaultAppearance){this.data.defaultAppearanceData=parseDefaultAppearance(this._defaultAppearance="/Helvetica 0 Tf 0 g");}_context83.next=28;return WidgetAnnotation._getFontData(evaluator,task,this.data.defaultAppearanceData,this._fieldResources.mergedResources);case 28:font=_context83.sent;encodedLines=[];encodingError=false;_iterator202=_createForOfIteratorHelper(lines);try{for(_iterator202.s();!(_step202=_iterator202.n()).done;){line=_step202.value;encodedString=font.encodeString(line);if(encodedString.length>1){encodingError=true;}encodedLines.push(encodedString.join(""));}}catch(err){_iterator202.e(err);}finally{_iterator202.f();}if(!(encodingError&&intent&RenderingIntentFlag.SAVE)){_context83.next=35;break;}return _context83.abrupt("return",{needAppearances:true});case 35:if(!(encodingError&&this._isOffscreenCanvasSupported)){_context83.next=57;break;}fontFamily=this.data.comb?"monospace":"sans-serif";fakeUnicodeFont=new FakeUnicodeFont(evaluator.xref,fontFamily);resources=fakeUnicodeFont.createFontResources(lines.join(""));newFont=resources.getRaw("Font");if(this._fieldResources.mergedResources.has("Font")){oldFont=this._fieldResources.mergedResources.get("Font");_iterator203=_createForOfIteratorHelper(newFont.getKeys());try{for(_iterator203.s();!(_step203=_iterator203.n()).done;){key=_step203.value;oldFont.set(key,newFont.getRaw(key));}}catch(err){_iterator203.e(err);}finally{_iterator203.f();}}else{this._fieldResources.mergedResources.set("Font",newFont);}fontName=fakeUnicodeFont.fontName.name;_context83.next=44;return WidgetAnnotation._getFontData(evaluator,task,{fontName:fontName,fontSize:0},resources);case 44:font=_context83.sent;for(i=0,ii=encodedLines.length;i<ii;i++){encodedLines[i]=stringToUTF16String(lines[i]);}savedDefaultAppearance=Object.assign(Object.create(null),this.data.defaultAppearanceData);this.data.defaultAppearanceData.fontSize=0;this.data.defaultAppearanceData.fontName=fontName;_this$_computeFontSiz=this._computeFontSize(totalHeight-2*defaultPadding,totalWidth-2*defaultHPadding,value,font,lineCount);_this$_computeFontSiz2=_slicedToArray(_this$_computeFontSiz,3);defaultAppearance=_this$_computeFontSiz2[0];fontSize=_this$_computeFontSiz2[1];lineHeight=_this$_computeFontSiz2[2];this.data.defaultAppearanceData=savedDefaultAppearance;_context83.next=63;break;case 57:if(!this._isOffscreenCanvasSupported){warn("_getAppearance: OffscreenCanvas is not supported, annotation may not render correctly.");}_this$_computeFontSiz3=this._computeFontSize(totalHeight-2*defaultPadding,totalWidth-2*defaultHPadding,value,font,lineCount);_this$_computeFontSiz4=_slicedToArray(_this$_computeFontSiz3,3);defaultAppearance=_this$_computeFontSiz4[0];fontSize=_this$_computeFontSiz4[1];lineHeight=_this$_computeFontSiz4[2];case 63:descent=font.descent;if(isNaN(descent)){descent=BASELINE_FACTOR*lineHeight;}else{descent=Math.max(BASELINE_FACTOR*lineHeight,Math.abs(descent)*fontSize);}defaultVPadding=Math.min(Math.floor((totalHeight-fontSize)/2),defaultPadding);alignment=this.data.textAlignment;if(!this.data.multiLine){_context83.next=69;break;}return _context83.abrupt("return",this._getMultilineAppearance(defaultAppearance,encodedLines,font,fontSize,totalWidth,totalHeight,alignment,defaultHPadding,defaultVPadding,descent,lineHeight,annotationStorage));case 69:if(!this.data.comb){_context83.next=71;break;}return _context83.abrupt("return",this._getCombAppearance(defaultAppearance,font,encodedLines[0],fontSize,totalWidth,totalHeight,defaultHPadding,defaultVPadding,descent,lineHeight,annotationStorage));case 71:bottomPadding=defaultVPadding+descent;if(!(alignment===0||alignment>2)){_context83.next=74;break;}return _context83.abrupt("return","/Tx BMC q ".concat(colors,"BT ")+defaultAppearance+" 1 0 0 1 ".concat(numberToString(defaultHPadding)," ").concat(numberToString(bottomPadding)," Tm (").concat(escapeString(encodedLines[0]),") Tj")+" ET Q EMC");case 74:prevInfo={shift:0};renderedText=this._renderText(encodedLines[0],font,fontSize,totalWidth,alignment,prevInfo,defaultHPadding,bottomPadding);return _context83.abrupt("return","/Tx BMC q ".concat(colors,"BT ")+defaultAppearance+" 1 0 0 1 0 0 Tm ".concat(renderedText)+" ET Q EMC");case 77:case"end":return _context83.stop();}},_callee67,this);}));function _getAppearance(_x128,_x129,_x130,_x131){return _getAppearance2.apply(this,arguments);}return _getAppearance;}()},{key:"_getTextWidth",value:function _getTextWidth(text,font){return font.charsToGlyphs(text).reduce(function(width,glyph){return width+glyph.width;},0)/1000;}},{key:"_computeFontSize",value:function _computeFontSize(height,width,text,font,lineCount){var _this268=this;var fontSize=this.data.defaultAppearanceData.fontSize;var lineHeight=(fontSize||12)*LINE_FACTOR,numberOfLines=Math.round(height/lineHeight);if(!fontSize){var roundWithTwoDigits=function roundWithTwoDigits(x){return Math.floor(x*100)/100;};if(lineCount===-1){var textWidth=this._getTextWidth(text,font);fontSize=roundWithTwoDigits(Math.min(height/LINE_FACTOR,width/textWidth));numberOfLines=1;}else{var lines=text.split(/\\r\\n?|\\n/);var cachedLines=[];var _iterator204=_createForOfIteratorHelper(lines),_step204;try{for(_iterator204.s();!(_step204=_iterator204.n()).done;){var line=_step204.value;var encoded=font.encodeString(line).join("");var glyphs=font.charsToGlyphs(encoded);var positions=font.getCharPositions(encoded);cachedLines.push({line:encoded,glyphs:glyphs,positions:positions});}}catch(err){_iterator204.e(err);}finally{_iterator204.f();}var isTooBig=function isTooBig(fsize){var totalHeight=0;for(var _i61=0,_cachedLines=cachedLines;_i61<_cachedLines.length;_i61++){var cache=_cachedLines[_i61];var chunks=_this268._splitLine(null,font,fsize,width,cache);totalHeight+=chunks.length*fsize;if(totalHeight>height){return true;}}return false;};numberOfLines=Math.max(numberOfLines,lineCount);while(true){lineHeight=height/numberOfLines;fontSize=roundWithTwoDigits(lineHeight/LINE_FACTOR);if(isTooBig(fontSize)){numberOfLines++;continue;}break;}}var _this$data$defaultApp=this.data.defaultAppearanceData,fontName=_this$data$defaultApp.fontName,fontColor=_this$data$defaultApp.fontColor;this._defaultAppearance=createDefaultAppearance({fontSize:fontSize,fontName:fontName,fontColor:fontColor});}return[this._defaultAppearance,fontSize,height/numberOfLines];}},{key:"_renderText",value:function _renderText(text,font,fontSize,totalWidth,alignment,prevInfo,hPadding,vPadding){var shift;if(alignment===1){var width=this._getTextWidth(text,font)*fontSize;shift=(totalWidth-width)/2;}else if(alignment===2){var _width4=this._getTextWidth(text,font)*fontSize;shift=totalWidth-_width4-hPadding;}else{shift=hPadding;}var shiftStr=numberToString(shift-prevInfo.shift);prevInfo.shift=shift;vPadding=numberToString(vPadding);return"".concat(shiftStr," ").concat(vPadding," Td (").concat(escapeString(text),") Tj");}},{key:"_getSaveFieldResources",value:function _getSaveFieldResources(xref){var _this$data$defaultApp2;var _this$_fieldResources=this._fieldResources,localResources=_this$_fieldResources.localResources,appearanceResources=_this$_fieldResources.appearanceResources,acroFormResources=_this$_fieldResources.acroFormResources;var fontName=(_this$data$defaultApp2=this.data.defaultAppearanceData)===null||_this$data$defaultApp2===void 0?void 0:_this$data$defaultApp2.fontName;if(!fontName){return localResources||Dict.empty;}for(var _i62=0,_arr5=[localResources,appearanceResources];_i62<_arr5.length;_i62++){var resources=_arr5[_i62];if(resources instanceof Dict){var localFont=resources.get("Font");if(localFont instanceof Dict&&localFont.has(fontName)){return resources;}}}if(acroFormResources instanceof Dict){var acroFormFont=acroFormResources.get("Font");if(acroFormFont instanceof Dict&&acroFormFont.has(fontName)){var subFontDict=new Dict(xref);subFontDict.set(fontName,acroFormFont.getRaw(fontName));var subResourcesDict=new Dict(xref);subResourcesDict.set("Font",subFontDict);return Dict.merge({xref:xref,dictArray:[subResourcesDict,localResources],mergeSubDicts:true});}}return localResources||Dict.empty;}},{key:"getFieldObject",value:function getFieldObject(){return null;}}],[{key:"_getFontData",value:function(){var _getFontData2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee68(evaluator,task,appearanceData,resources){var operatorList,initialState,fontName,fontSize;return _regeneratorRuntime().wrap(function _callee68$(_context84){while(1)switch(_context84.prev=_context84.next){case 0:operatorList=new OperatorList();initialState={font:null,clone:function clone(){return this;}};fontName=appearanceData.fontName,fontSize=appearanceData.fontSize;_context84.next=5;return evaluator.handleSetFont(resources,[fontName&&Name.get(fontName),fontSize],null,operatorList,task,initialState,null);case 5:return _context84.abrupt("return",initialState.font);case 6:case"end":return _context84.stop();}},_callee68);}));function _getFontData(_x132,_x133,_x134,_x135){return _getFontData2.apply(this,arguments);}return _getFontData;}()}]);}(Annotation);var TextWidgetAnnotation=/*#__PURE__*/function(_WidgetAnnotation){function TextWidgetAnnotation(params){var _this269;_classCallCheck(this,TextWidgetAnnotation);_this269=_callSuper(this,TextWidgetAnnotation,[params]);var dict=params.dict;if(dict.has("PMD")){_this269.flags|=AnnotationFlag.HIDDEN;_this269.data.hidden=true;warn("Barcodes are not supported");}_this269.data.hasOwnCanvas=_this269.data.readOnly&&!_this269.data.noHTML;_this269._hasText=true;if(typeof _this269.data.fieldValue!=="string"){_this269.data.fieldValue="";}var alignment=getInheritableProperty({dict:dict,key:"Q"});if(!Number.isInteger(alignment)||alignment<0||alignment>2){alignment=null;}_this269.data.textAlignment=alignment;var maximumLength=getInheritableProperty({dict:dict,key:"MaxLen"});if(!Number.isInteger(maximumLength)||maximumLength<0){maximumLength=0;}_this269.data.maxLen=maximumLength;_this269.data.multiLine=_this269.hasFieldFlag(AnnotationFieldFlag.MULTILINE);_this269.data.comb=_this269.hasFieldFlag(AnnotationFieldFlag.COMB)&&!_this269.data.multiLine&&!_this269.data.password&&!_this269.hasFieldFlag(AnnotationFieldFlag.FILESELECT)&&_this269.data.maxLen!==0;_this269.data.doNotScroll=_this269.hasFieldFlag(AnnotationFieldFlag.DONOTSCROLL);return _this269;}_inherits(TextWidgetAnnotation,_WidgetAnnotation);return _createClass(TextWidgetAnnotation,[{key:"hasTextContent",get:function get(){return!!this.appearance&&!this._needAppearances;}},{key:"_getCombAppearance",value:function _getCombAppearance(defaultAppearance,font,text,fontSize,width,height,hPadding,vPadding,descent,lineHeight,annotationStorage){var combWidth=width/this.data.maxLen;var colors=this.getBorderAndBackgroundAppearances(annotationStorage);var buf=[];var positions=font.getCharPositions(text);var _iterator205=_createForOfIteratorHelper(positions),_step205;try{for(_iterator205.s();!(_step205=_iterator205.n()).done;){var _step205$value=_slicedToArray(_step205.value,2),start=_step205$value[0],end=_step205$value[1];buf.push("(".concat(escapeString(text.substring(start,end)),") Tj"));}}catch(err){_iterator205.e(err);}finally{_iterator205.f();}var renderedComb=buf.join(" ".concat(numberToString(combWidth)," 0 Td "));return"/Tx BMC q ".concat(colors,"BT ")+defaultAppearance+" 1 0 0 1 ".concat(numberToString(hPadding)," ").concat(numberToString(vPadding+descent)," Tm ").concat(renderedComb)+" ET Q EMC";}},{key:"_getMultilineAppearance",value:function _getMultilineAppearance(defaultAppearance,lines,font,fontSize,width,height,alignment,hPadding,vPadding,descent,lineHeight,annotationStorage){var buf=[];var totalWidth=width-2*hPadding;var prevInfo={shift:0};for(var i=0,ii=lines.length;i<ii;i++){var line=lines[i];var chunks=this._splitLine(line,font,fontSize,totalWidth);for(var j=0,jj=chunks.length;j<jj;j++){var chunk=chunks[j];var vShift=i===0&&j===0?-vPadding-(lineHeight-descent):-lineHeight;buf.push(this._renderText(chunk,font,fontSize,width,alignment,prevInfo,hPadding,vShift));}}var colors=this.getBorderAndBackgroundAppearances(annotationStorage);var renderedText=buf.join("\\n");return"/Tx BMC q ".concat(colors,"BT ")+defaultAppearance+" 1 0 0 1 0 ".concat(numberToString(height)," Tm ").concat(renderedText)+" ET Q EMC";}},{key:"_splitLine",value:function _splitLine(line,font,fontSize,width){var cache=arguments.length>4&&arguments[4]!==undefined?arguments[4]:{};line=cache.line||line;var glyphs=cache.glyphs||font.charsToGlyphs(line);if(glyphs.length<=1){return[line];}var positions=cache.positions||font.getCharPositions(line);var scale=fontSize/1000;var chunks=[];var lastSpacePosInStringStart=-1,lastSpacePosInStringEnd=-1,lastSpacePos=-1,startChunk=0,currentWidth=0;for(var i=0,ii=glyphs.length;i<ii;i++){var _positions$i=_slicedToArray(positions[i],2),start=_positions$i[0],end=_positions$i[1];var glyph=glyphs[i];var glyphWidth=glyph.width*scale;if(glyph.unicode===" "){if(currentWidth+glyphWidth>width){chunks.push(line.substring(startChunk,start));startChunk=start;currentWidth=glyphWidth;lastSpacePosInStringStart=-1;lastSpacePos=-1;}else{currentWidth+=glyphWidth;lastSpacePosInStringStart=start;lastSpacePosInStringEnd=end;lastSpacePos=i;}}else if(currentWidth+glyphWidth>width){if(lastSpacePosInStringStart!==-1){chunks.push(line.substring(startChunk,lastSpacePosInStringEnd));startChunk=lastSpacePosInStringEnd;i=lastSpacePos+1;lastSpacePosInStringStart=-1;currentWidth=0;}else{chunks.push(line.substring(startChunk,start));startChunk=start;currentWidth=glyphWidth;}}else{currentWidth+=glyphWidth;}}if(startChunk<line.length){chunks.push(line.substring(startChunk,line.length));}return chunks;}},{key:"extractTextContent",value:function(){var _extractTextContent2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee69(evaluator,task,viewBox){var text,allText,regex;return _regeneratorRuntime().wrap(function _callee69$(_context85){while(1)switch(_context85.prev=_context85.next){case 0:_context85.next=2;return _superPropGet(TextWidgetAnnotation,"extractTextContent",this,3)([evaluator,task,viewBox]);case 2:text=this.data.textContent;if(text){_context85.next=5;break;}return _context85.abrupt("return");case 5:allText=text.join("\\n");if(!(allText===this.data.fieldValue)){_context85.next=8;break;}return _context85.abrupt("return");case 8:regex=allText.replaceAll(/([.*+?^${}()|[\\]\\\\])|(\\s+)/g,function(_m,p1){return p1?"\\\\".concat(p1):"\\\\s+";});if(new RegExp("^\\\\s*".concat(regex,"\\\\s*$")).test(this.data.fieldValue)){this.data.textContent=this.data.fieldValue.split("\\n");}case 10:case"end":return _context85.stop();}},_callee69,this);}));function extractTextContent(_x136,_x137,_x138){return _extractTextContent2.apply(this,arguments);}return extractTextContent;}()},{key:"getFieldObject",value:function getFieldObject(){return{id:this.data.id,value:this.data.fieldValue,defaultValue:this.data.defaultFieldValue||"",multiline:this.data.multiLine,password:this.data.password,charLimit:this.data.maxLen,comb:this.data.comb,editable:!this.data.readOnly,hidden:this.data.hidden,name:this.data.fieldName,rect:this.data.rect,actions:this.data.actions,page:this.data.pageIndex,strokeColor:this.data.borderColor,fillColor:this.data.backgroundColor,rotation:this.rotation,type:"text"};}}]);}(WidgetAnnotation);var ButtonWidgetAnnotation=/*#__PURE__*/function(_WidgetAnnotation2){function ButtonWidgetAnnotation(params){var _this270;_classCallCheck(this,ButtonWidgetAnnotation);_this270=_callSuper(this,ButtonWidgetAnnotation,[params]);_this270.checkedAppearance=null;_this270.uncheckedAppearance=null;var isRadio=_this270.hasFieldFlag(AnnotationFieldFlag.RADIO),isPushButton=_this270.hasFieldFlag(AnnotationFieldFlag.PUSHBUTTON);_this270.data.checkBox=!isRadio&&!isPushButton;_this270.data.radioButton=isRadio&&!isPushButton;_this270.data.pushButton=isPushButton;_this270.data.isTooltipOnly=false;if(_this270.data.checkBox){_this270._processCheckBox(params);}else if(_this270.data.radioButton){_this270._processRadioButton(params);}else if(_this270.data.pushButton){_this270.data.hasOwnCanvas=true;_this270.data.noHTML=false;_this270._processPushButton(params);}else{warn("Invalid field flags for button widget annotation");}return _this270;}_inherits(ButtonWidgetAnnotation,_WidgetAnnotation2);return _createClass(ButtonWidgetAnnotation,[{key:"getOperatorList",value:function(){var _getOperatorList3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee70(evaluator,task,intent,annotationStorage){var value,rotation,storageEntry,appearance,savedAppearance,savedMatrix,operatorList;return _regeneratorRuntime().wrap(function _callee70$(_context86){while(1)switch(_context86.prev=_context86.next){case 0:if(!this.data.pushButton){_context86.next=2;break;}return _context86.abrupt("return",_superPropGet(ButtonWidgetAnnotation,"getOperatorList",this,3)([evaluator,task,intent,false,annotationStorage]));case 2:value=null;rotation=null;if(annotationStorage){storageEntry=annotationStorage.get(this.data.id);value=storageEntry?storageEntry.value:null;rotation=storageEntry?storageEntry.rotation:null;}if(!(value===null&&this.appearance)){_context86.next=7;break;}return _context86.abrupt("return",_superPropGet(ButtonWidgetAnnotation,"getOperatorList",this,3)([evaluator,task,intent,annotationStorage]));case 7:if(value===null||value===undefined){value=this.data.checkBox?this.data.fieldValue===this.data.exportValue:this.data.fieldValue===this.data.buttonValue;}appearance=value?this.checkedAppearance:this.uncheckedAppearance;if(!appearance){_context86.next=18;break;}savedAppearance=this.appearance;savedMatrix=lookupMatrix(appearance.dict.getArray("Matrix"),IDENTITY_MATRIX);if(rotation){appearance.dict.set("Matrix",this.getRotationMatrix(annotationStorage));}this.appearance=appearance;operatorList=_superPropGet(ButtonWidgetAnnotation,"getOperatorList",this,3)([evaluator,task,intent,annotationStorage]);this.appearance=savedAppearance;appearance.dict.set("Matrix",savedMatrix);return _context86.abrupt("return",operatorList);case 18:return _context86.abrupt("return",{opList:new OperatorList(),separateForm:false,separateCanvas:false});case 19:case"end":return _context86.stop();}},_callee70,this);}));function getOperatorList(_x139,_x140,_x141,_x142){return _getOperatorList3.apply(this,arguments);}return getOperatorList;}()},{key:"save",value:function(){var _save3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee71(evaluator,task,annotationStorage,changes){return _regeneratorRuntime().wrap(function _callee71$(_context87){while(1)switch(_context87.prev=_context87.next){case 0:if(!this.data.checkBox){_context87.next=3;break;}this._saveCheckbox(evaluator,task,annotationStorage,changes);return _context87.abrupt("return");case 3:if(this.data.radioButton){this._saveRadioButton(evaluator,task,annotationStorage,changes);}case 4:case"end":return _context87.stop();}},_callee71,this);}));function save(_x143,_x144,_x145,_x146){return _save3.apply(this,arguments);}return save;}()},{key:"_saveCheckbox",value:function(){var _saveCheckbox2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee72(evaluator,task,annotationStorage,changes){var storageEntry,flags,rotation,value,defaultValue,dict,xfa,name,maybeMK;return _regeneratorRuntime().wrap(function _callee72$(_context88){while(1)switch(_context88.prev=_context88.next){case 0:if(annotationStorage){_context88.next=2;break;}return _context88.abrupt("return");case 2:storageEntry=annotationStorage.get(this.data.id);flags=this._buildFlags(storageEntry===null||storageEntry===void 0?void 0:storageEntry.noView,storageEntry===null||storageEntry===void 0?void 0:storageEntry.noPrint);rotation=storageEntry===null||storageEntry===void 0?void 0:storageEntry.rotation,value=storageEntry===null||storageEntry===void 0?void 0:storageEntry.value;if(!(rotation===undefined&&flags===undefined)){_context88.next=11;break;}if(!(value===undefined)){_context88.next=8;break;}return _context88.abrupt("return");case 8:defaultValue=this.data.fieldValue===this.data.exportValue;if(!(defaultValue===value)){_context88.next=11;break;}return _context88.abrupt("return");case 11:dict=evaluator.xref.fetchIfRef(this.ref);if(dict instanceof Dict){_context88.next=14;break;}return _context88.abrupt("return");case 14:dict=dict.clone();if(rotation===undefined){rotation=this.rotation;}if(value===undefined){value=this.data.fieldValue===this.data.exportValue;}xfa={path:this.data.fieldName,value:value?this.data.exportValue:""};name=Name.get(value?this.data.exportValue:"Off");this.setValue(dict,name,evaluator.xref,changes);dict.set("AS",name);dict.set("M","D:".concat(getModificationDate()));if(flags!==undefined){dict.set("F",flags);}maybeMK=this._getMKDict(rotation);if(maybeMK){dict.set("MK",maybeMK);}changes.put(this.ref,{data:dict,xfa:xfa,needAppearances:false});case 26:case"end":return _context88.stop();}},_callee72,this);}));function _saveCheckbox(_x147,_x148,_x149,_x150){return _saveCheckbox2.apply(this,arguments);}return _saveCheckbox;}()},{key:"_saveRadioButton",value:function(){var _saveRadioButton2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee73(evaluator,task,annotationStorage,changes){var storageEntry,flags,rotation,value,defaultValue,dict,xfa,name,maybeMK;return _regeneratorRuntime().wrap(function _callee73$(_context89){while(1)switch(_context89.prev=_context89.next){case 0:if(annotationStorage){_context89.next=2;break;}return _context89.abrupt("return");case 2:storageEntry=annotationStorage.get(this.data.id);flags=this._buildFlags(storageEntry===null||storageEntry===void 0?void 0:storageEntry.noView,storageEntry===null||storageEntry===void 0?void 0:storageEntry.noPrint);rotation=storageEntry===null||storageEntry===void 0?void 0:storageEntry.rotation,value=storageEntry===null||storageEntry===void 0?void 0:storageEntry.value;if(!(rotation===undefined&&flags===undefined)){_context89.next=11;break;}if(!(value===undefined)){_context89.next=8;break;}return _context89.abrupt("return");case 8:defaultValue=this.data.fieldValue===this.data.buttonValue;if(!(defaultValue===value)){_context89.next=11;break;}return _context89.abrupt("return");case 11:dict=evaluator.xref.fetchIfRef(this.ref);if(dict instanceof Dict){_context89.next=14;break;}return _context89.abrupt("return");case 14:dict=dict.clone();if(value===undefined){value=this.data.fieldValue===this.data.buttonValue;}if(rotation===undefined){rotation=this.rotation;}xfa={path:this.data.fieldName,value:value?this.data.buttonValue:""};name=Name.get(value?this.data.buttonValue:"Off");if(value){this.setValue(dict,name,evaluator.xref,changes);}dict.set("AS",name);dict.set("M","D:".concat(getModificationDate()));if(flags!==undefined){dict.set("F",flags);}maybeMK=this._getMKDict(rotation);if(maybeMK){dict.set("MK",maybeMK);}changes.put(this.ref,{data:dict,xfa:xfa,needAppearances:false});case 26:case"end":return _context89.stop();}},_callee73,this);}));function _saveRadioButton(_x151,_x152,_x153,_x154){return _saveRadioButton2.apply(this,arguments);}return _saveRadioButton;}()},{key:"_getDefaultCheckedAppearance",value:function _getDefaultCheckedAppearance(params,type){var width=this.width,height=this.height;var bbox=[0,0,width,height];var FONT_RATIO=0.8;var fontSize=Math.min(width,height)*FONT_RATIO;var metrics,_char16;if(type==="check"){metrics={width:0.755*fontSize,height:0.705*fontSize};_char16="\\x33";}else if(type==="disc"){metrics={width:0.791*fontSize,height:0.705*fontSize};_char16="\\x6C";}else{unreachable("_getDefaultCheckedAppearance - unsupported type: ".concat(type));}var xShift=numberToString((width-metrics.width)/2);var yShift=numberToString((height-metrics.height)/2);var appearance="q BT /PdfJsZaDb ".concat(fontSize," Tf 0 g ").concat(xShift," ").concat(yShift," Td (").concat(_char16,") Tj ET Q");var appearanceStreamDict=new Dict(params.xref);appearanceStreamDict.set("FormType",1);appearanceStreamDict.set("Subtype",Name.get("Form"));appearanceStreamDict.set("Type",Name.get("XObject"));appearanceStreamDict.set("BBox",bbox);appearanceStreamDict.set("Matrix",[1,0,0,1,0,0]);appearanceStreamDict.set("Length",appearance.length);var resources=new Dict(params.xref);var font=new Dict(params.xref);font.set("PdfJsZaDb",this.fallbackFontDict);resources.set("Font",font);appearanceStreamDict.set("Resources",resources);this.checkedAppearance=new StringStream(appearance);this.checkedAppearance.dict=appearanceStreamDict;this._streams.push(this.checkedAppearance);}},{key:"_processCheckBox",value:function _processCheckBox(params){var customAppearance=params.dict.get("AP");if(!(customAppearance instanceof Dict)){return;}var normalAppearance=customAppearance.get("N");if(!(normalAppearance instanceof Dict)){return;}var asValue=this._decodeFormValue(params.dict.get("AS"));if(typeof asValue==="string"){this.data.fieldValue=asValue;}var yes=this.data.fieldValue!==null&&this.data.fieldValue!=="Off"?this.data.fieldValue:"Yes";var exportValues=normalAppearance.getKeys();if(exportValues.length===0){exportValues.push("Off",yes);}else if(exportValues.length===1){if(exportValues[0]==="Off"){exportValues.push(yes);}else{exportValues.unshift("Off");}}else if(exportValues.includes(yes)){exportValues.length=0;exportValues.push("Off",yes);}else{var otherYes=exportValues.find(function(v){return v!=="Off";});exportValues.length=0;exportValues.push("Off",otherYes);}if(!exportValues.includes(this.data.fieldValue)){this.data.fieldValue="Off";}this.data.exportValue=exportValues[1];var checkedAppearance=normalAppearance.get(this.data.exportValue);this.checkedAppearance=checkedAppearance instanceof BaseStream?checkedAppearance:null;var uncheckedAppearance=normalAppearance.get("Off");this.uncheckedAppearance=uncheckedAppearance instanceof BaseStream?uncheckedAppearance:null;if(this.checkedAppearance){this._streams.push(this.checkedAppearance);}else{this._getDefaultCheckedAppearance(params,"check");}if(this.uncheckedAppearance){this._streams.push(this.uncheckedAppearance);}this._fallbackFontDict=this.fallbackFontDict;if(this.data.defaultFieldValue===null){this.data.defaultFieldValue="Off";}}},{key:"_processRadioButton",value:function _processRadioButton(params){this.data.buttonValue=null;var fieldParent=params.dict.get("Parent");if(fieldParent instanceof Dict){this.parent=params.dict.getRaw("Parent");var fieldParentValue=fieldParent.get("V");if(fieldParentValue instanceof Name){this.data.fieldValue=this._decodeFormValue(fieldParentValue);}}var appearanceStates=params.dict.get("AP");if(!(appearanceStates instanceof Dict)){return;}var normalAppearance=appearanceStates.get("N");if(!(normalAppearance instanceof Dict)){return;}var _iterator206=_createForOfIteratorHelper(normalAppearance.getKeys()),_step206;try{for(_iterator206.s();!(_step206=_iterator206.n()).done;){var key=_step206.value;if(key!=="Off"){this.data.buttonValue=this._decodeFormValue(key);break;}}}catch(err){_iterator206.e(err);}finally{_iterator206.f();}var checkedAppearance=normalAppearance.get(this.data.buttonValue);this.checkedAppearance=checkedAppearance instanceof BaseStream?checkedAppearance:null;var uncheckedAppearance=normalAppearance.get("Off");this.uncheckedAppearance=uncheckedAppearance instanceof BaseStream?uncheckedAppearance:null;if(this.checkedAppearance){this._streams.push(this.checkedAppearance);}else{this._getDefaultCheckedAppearance(params,"disc");}if(this.uncheckedAppearance){this._streams.push(this.uncheckedAppearance);}this._fallbackFontDict=this.fallbackFontDict;if(this.data.defaultFieldValue===null){this.data.defaultFieldValue="Off";}}},{key:"_processPushButton",value:function _processPushButton(params){var dict=params.dict,annotationGlobals=params.annotationGlobals;if(!dict.has("A")&&!dict.has("AA")&&!this.data.alternativeText){warn("Push buttons without action dictionaries are not supported");return;}this.data.isTooltipOnly=!dict.has("A")&&!dict.has("AA");Catalog.parseDestDictionary({destDict:dict,resultObj:this.data,docBaseUrl:annotationGlobals.baseUrl,docAttachments:annotationGlobals.attachments});}},{key:"getFieldObject",value:function getFieldObject(){var type="button";var exportValues;if(this.data.checkBox){type="checkbox";exportValues=this.data.exportValue;}else if(this.data.radioButton){type="radiobutton";exportValues=this.data.buttonValue;}return{id:this.data.id,value:this.data.fieldValue||"Off",defaultValue:this.data.defaultFieldValue,exportValues:exportValues,editable:!this.data.readOnly,name:this.data.fieldName,rect:this.data.rect,hidden:this.data.hidden,actions:this.data.actions,page:this.data.pageIndex,strokeColor:this.data.borderColor,fillColor:this.data.backgroundColor,rotation:this.rotation,type:type};}},{key:"fallbackFontDict",get:function get(){var dict=new Dict();dict.set("BaseFont",Name.get("ZapfDingbats"));dict.set("Type",Name.get("FallbackType"));dict.set("Subtype",Name.get("FallbackType"));dict.set("Encoding",Name.get("ZapfDingbatsEncoding"));return shadow(this,"fallbackFontDict",dict);}}]);}(WidgetAnnotation);var ChoiceWidgetAnnotation=/*#__PURE__*/function(_WidgetAnnotation3){function ChoiceWidgetAnnotation(params){var _this271;_classCallCheck(this,ChoiceWidgetAnnotation);_this271=_callSuper(this,ChoiceWidgetAnnotation,[params]);var dict=params.dict,xref=params.xref;_this271.indices=dict.getArray("I");_this271.hasIndices=Array.isArray(_this271.indices)&&_this271.indices.length>0;_this271.data.options=[];var options=getInheritableProperty({dict:dict,key:"Opt"});if(Array.isArray(options)){for(var i=0,ii=options.length;i<ii;i++){var option=xref.fetchIfRef(options[i]);var isOptionArray=Array.isArray(option);_this271.data.options[i]={exportValue:_this271._decodeFormValue(isOptionArray?xref.fetchIfRef(option[0]):option),displayValue:_this271._decodeFormValue(isOptionArray?xref.fetchIfRef(option[1]):option)};}}if(!_this271.hasIndices){if(typeof _this271.data.fieldValue==="string"){_this271.data.fieldValue=[_this271.data.fieldValue];}else if(!_this271.data.fieldValue){_this271.data.fieldValue=[];}}else{_this271.data.fieldValue=[];var _ii13=_this271.data.options.length;var _iterator207=_createForOfIteratorHelper(_this271.indices),_step207;try{for(_iterator207.s();!(_step207=_iterator207.n()).done;){var _i63=_step207.value;if(Number.isInteger(_i63)&&_i63>=0&&_i63<_ii13){_this271.data.fieldValue.push(_this271.data.options[_i63].exportValue);}}}catch(err){_iterator207.e(err);}finally{_iterator207.f();}}if(_this271.data.options.length===0&&_this271.data.fieldValue.length>0){_this271.data.options=_this271.data.fieldValue.map(function(value){return{exportValue:value,displayValue:value};});}_this271.data.combo=_this271.hasFieldFlag(AnnotationFieldFlag.COMBO);_this271.data.multiSelect=_this271.hasFieldFlag(AnnotationFieldFlag.MULTISELECT);_this271._hasText=true;return _this271;}_inherits(ChoiceWidgetAnnotation,_WidgetAnnotation3);return _createClass(ChoiceWidgetAnnotation,[{key:"getFieldObject",value:function getFieldObject(){var type=this.data.combo?"combobox":"listbox";var value=this.data.fieldValue.length>0?this.data.fieldValue[0]:null;return{id:this.data.id,value:value,defaultValue:this.data.defaultFieldValue,editable:!this.data.readOnly,name:this.data.fieldName,rect:this.data.rect,numItems:this.data.fieldValue.length,multipleSelection:this.data.multiSelect,hidden:this.data.hidden,actions:this.data.actions,items:this.data.options,page:this.data.pageIndex,strokeColor:this.data.borderColor,fillColor:this.data.backgroundColor,rotation:this.rotation,type:type};}},{key:"amendSavedDict",value:function amendSavedDict(annotationStorage,dict){var _annotationStorage$ge5;if(!this.hasIndices){return;}var values=annotationStorage===null||annotationStorage===void 0||(_annotationStorage$ge5=annotationStorage.get(this.data.id))===null||_annotationStorage$ge5===void 0?void 0:_annotationStorage$ge5.value;if(!Array.isArray(values)){values=[values];}var indices=[];var options=this.data.options;for(var i=0,j=0,ii=options.length;i<ii;i++){if(options[i].exportValue===values[j]){indices.push(i);j+=1;}}dict.set("I",indices);}},{key:"_getAppearance",value:function(){var _getAppearance3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee74(evaluator,task,intent,annotationStorage){var exportedValue,rotation,storageEntry,defaultPadding,defaultHPadding,totalWidth,totalHeight,_ref103,lineCount,valueIndices,i,exportValue,font,defaultAppearance,fontSize,_lineHeight,lineWidth,value,_iterator208,_step208,displayValue,width,_this$_computeFontSiz5,_this$_computeFontSiz6,lineHeight,vPadding,numberOfVisibleLines,firstIndex,minIndex,maxIndex,end,buf,_iterator209,_step209,index,prevInfo,_i64,_displayValue,vpadding;return _regeneratorRuntime().wrap(function _callee74$(_context90){while(1)switch(_context90.prev=_context90.next){case 0:if(!this.data.combo){_context90.next=2;break;}return _context90.abrupt("return",_superPropGet(ChoiceWidgetAnnotation,"_getAppearance",this,3)([evaluator,task,intent,annotationStorage]));case 2:storageEntry=annotationStorage===null||annotationStorage===void 0?void 0:annotationStorage.get(this.data.id);if(storageEntry){rotation=storageEntry.rotation;exportedValue=storageEntry.value;}if(!(rotation===undefined&&exportedValue===undefined&&!this._needAppearances)){_context90.next=6;break;}return _context90.abrupt("return",null);case 6:if(exportedValue===undefined){exportedValue=this.data.fieldValue;}else if(!Array.isArray(exportedValue)){exportedValue=[exportedValue];}defaultPadding=1;defaultHPadding=2;totalWidth=this.width,totalHeight=this.height;if(rotation===90||rotation===270){_ref103=[totalHeight,totalWidth];totalWidth=_ref103[0];totalHeight=_ref103[1];}lineCount=this.data.options.length;valueIndices=[];for(i=0;i<lineCount;i++){exportValue=this.data.options[i].exportValue;if(exportedValue.includes(exportValue)){valueIndices.push(i);}}if(!this._defaultAppearance){this.data.defaultAppearanceData=parseDefaultAppearance(this._defaultAppearance="/Helvetica 0 Tf 0 g");}_context90.next=17;return WidgetAnnotation._getFontData(evaluator,task,this.data.defaultAppearanceData,this._fieldResources.mergedResources);case 17:font=_context90.sent;fontSize=this.data.defaultAppearanceData.fontSize;if(!fontSize){_lineHeight=(totalHeight-defaultPadding)/lineCount;lineWidth=-1;_iterator208=_createForOfIteratorHelper(this.data.options);try{for(_iterator208.s();!(_step208=_iterator208.n()).done;){displayValue=_step208.value.displayValue;width=this._getTextWidth(displayValue,font);if(width>lineWidth){lineWidth=width;value=displayValue;}}}catch(err){_iterator208.e(err);}finally{_iterator208.f();}_this$_computeFontSiz5=this._computeFontSize(_lineHeight,totalWidth-2*defaultHPadding,value,font,-1);_this$_computeFontSiz6=_slicedToArray(_this$_computeFontSiz5,2);defaultAppearance=_this$_computeFontSiz6[0];fontSize=_this$_computeFontSiz6[1];}else{defaultAppearance=this._defaultAppearance;}lineHeight=fontSize*LINE_FACTOR;vPadding=(lineHeight-fontSize)/2;numberOfVisibleLines=Math.floor(totalHeight/lineHeight);firstIndex=0;if(valueIndices.length>0){minIndex=Math.min.apply(Math,valueIndices);maxIndex=Math.max.apply(Math,valueIndices);firstIndex=Math.max(0,maxIndex-numberOfVisibleLines+1);if(firstIndex>minIndex){firstIndex=minIndex;}}end=Math.min(firstIndex+numberOfVisibleLines+1,lineCount);buf=["/Tx BMC q","1 1 ".concat(totalWidth," ").concat(totalHeight," re W n")];if(valueIndices.length){buf.push("0.600006 0.756866 0.854904 rg");_iterator209=_createForOfIteratorHelper(valueIndices);try{for(_iterator209.s();!(_step209=_iterator209.n()).done;){index=_step209.value;if(firstIndex<=index&&index<end){buf.push("1 ".concat(totalHeight-(index-firstIndex+1)*lineHeight," ").concat(totalWidth," ").concat(lineHeight," re f"));}}}catch(err){_iterator209.e(err);}finally{_iterator209.f();}}buf.push("BT",defaultAppearance,"1 0 0 1 0 ".concat(totalHeight," Tm"));prevInfo={shift:0};for(_i64=firstIndex;_i64<end;_i64++){_displayValue=this.data.options[_i64].displayValue;vpadding=_i64===firstIndex?vPadding:0;buf.push(this._renderText(_displayValue,font,fontSize,totalWidth,0,prevInfo,defaultHPadding,-lineHeight+vpadding));}buf.push("ET Q EMC");return _context90.abrupt("return",buf.join("\\n"));case 33:case"end":return _context90.stop();}},_callee74,this);}));function _getAppearance(_x155,_x156,_x157,_x158){return _getAppearance3.apply(this,arguments);}return _getAppearance;}()}]);}(WidgetAnnotation);var SignatureWidgetAnnotation=/*#__PURE__*/function(_WidgetAnnotation4){function SignatureWidgetAnnotation(params){var _this272;_classCallCheck(this,SignatureWidgetAnnotation);_this272=_callSuper(this,SignatureWidgetAnnotation,[params]);_this272.data.fieldValue=null;_this272.data.hasOwnCanvas=_this272.data.noRotate;_this272.data.noHTML=!_this272.data.hasOwnCanvas;return _this272;}_inherits(SignatureWidgetAnnotation,_WidgetAnnotation4);return _createClass(SignatureWidgetAnnotation,[{key:"getFieldObject",value:function getFieldObject(){return{id:this.data.id,value:null,page:this.data.pageIndex,type:"signature"};}}]);}(WidgetAnnotation);var TextAnnotation=/*#__PURE__*/function(_MarkupAnnotation){function TextAnnotation(params){var _this273;_classCallCheck(this,TextAnnotation);var DEFAULT_ICON_SIZE=22;_this273=_callSuper(this,TextAnnotation,[params]);_this273.data.noRotate=true;_this273.data.hasOwnCanvas=_this273.data.noRotate;_this273.data.noHTML=false;var dict=params.dict;_this273.data.annotationType=AnnotationType.TEXT;if(_this273.data.hasAppearance){_this273.data.name="NoIcon";}else{_this273.data.rect[1]=_this273.data.rect[3]-DEFAULT_ICON_SIZE;_this273.data.rect[2]=_this273.data.rect[0]+DEFAULT_ICON_SIZE;_this273.data.name=dict.has("Name")?dict.get("Name").name:"Note";}if(dict.has("State")){_this273.data.state=dict.get("State")||null;_this273.data.stateModel=dict.get("StateModel")||null;}else{_this273.data.state=null;_this273.data.stateModel=null;}return _this273;}_inherits(TextAnnotation,_MarkupAnnotation);return _createClass(TextAnnotation);}(MarkupAnnotation);var LinkAnnotation=/*#__PURE__*/function(_Annotation3){function LinkAnnotation(params){var _this274$data;var _this274;_classCallCheck(this,LinkAnnotation);_this274=_callSuper(this,LinkAnnotation,[params]);var dict=params.dict,annotationGlobals=params.annotationGlobals;_this274.data.annotationType=AnnotationType.LINK;_this274.data.noHTML=false;var quadPoints=getQuadPoints(dict,_this274.rectangle);if(quadPoints){_this274.data.quadPoints=quadPoints;}(_this274$data=_this274.data).borderColor||(_this274$data.borderColor=_this274.data.color);Catalog.parseDestDictionary({destDict:dict,resultObj:_this274.data,docBaseUrl:annotationGlobals.baseUrl,docAttachments:annotationGlobals.attachments});return _this274;}_inherits(LinkAnnotation,_Annotation3);return _createClass(LinkAnnotation);}(Annotation);var PopupAnnotation=/*#__PURE__*/function(_Annotation4){function PopupAnnotation(params){var _this275;_classCallCheck(this,PopupAnnotation);_this275=_callSuper(this,PopupAnnotation,[params]);var dict=params.dict;_this275.data.annotationType=AnnotationType.POPUP;_this275.data.noHTML=false;if(_this275.width===0||_this275.height===0){_this275.data.rect=null;}var parentItem=dict.get("Parent");if(!parentItem){warn("Popup annotation has a missing or invalid parent annotation.");return _possibleConstructorReturn(_this275);}_this275.data.parentRect=lookupNormalRect(parentItem.getArray("Rect"),null);var rt=parentItem.get("RT");if(isName(rt,AnnotationReplyType.GROUP)){parentItem=parentItem.get("IRT");}if(!parentItem.has("M")){_this275.data.modificationDate=null;}else{_this275.setModificationDate(parentItem.get("M"));_this275.data.modificationDate=_this275.modificationDate;}if(!parentItem.has("C")){_this275.data.color=null;}else{_this275.setColor(parentItem.getArray("C"));_this275.data.color=_this275.color;}if(!_this275.viewable){var parentFlags=parentItem.get("F");if(_this275._isViewable(parentFlags)){_this275.setFlags(parentFlags);}}_this275.setTitle(parentItem.get("T"));_this275.data.titleObj=_this275._title;_this275.setContents(parentItem.get("Contents"));_this275.data.contentsObj=_this275._contents;if(parentItem.has("RC")){_this275.data.richText=XFAFactory.getRichTextAsHtml(parentItem.get("RC"));}_this275.data.open=!!dict.get("Open");return _this275;}_inherits(PopupAnnotation,_Annotation4);return _createClass(PopupAnnotation);}(Annotation);var FreeTextAnnotation=/*#__PURE__*/function(_MarkupAnnotation2){function FreeTextAnnotation(params){var _this276;_classCallCheck(this,FreeTextAnnotation);_this276=_callSuper(this,FreeTextAnnotation,[params]);_this276.data.hasOwnCanvas=_this276.data.noRotate;_this276.data.isEditable=!_this276.data.noHTML;_this276.data.noHTML=false;var evaluatorOptions=params.evaluatorOptions,xref=params.xref;_this276.data.annotationType=AnnotationType.FREETEXT;_this276.setDefaultAppearance(params);_this276._hasAppearance=!!_this276.appearance;if(_this276._hasAppearance){var _parseAppearanceStrea=parseAppearanceStream(_this276.appearance,evaluatorOptions,xref),fontColor=_parseAppearanceStrea.fontColor,fontSize=_parseAppearanceStrea.fontSize;_this276.data.defaultAppearanceData.fontColor=fontColor;_this276.data.defaultAppearanceData.fontSize=fontSize||10;}else{var _this276$data$default;(_this276$data$default=_this276.data.defaultAppearanceData).fontSize||(_this276$data$default.fontSize=10);var _this276$data$default2=_this276.data.defaultAppearanceData,_fontColor=_this276$data$default2.fontColor,_fontSize=_this276$data$default2.fontSize;if(_this276._contents.str){_this276.data.textContent=_this276._contents.str.split(/\\r\\n?|\\n/).map(function(line){return line.trimEnd();});var _FakeUnicodeFont$getF=FakeUnicodeFont.getFirstPositionInfo(_this276.rectangle,_this276.rotation,_fontSize),coords=_FakeUnicodeFont$getF.coords,bbox=_FakeUnicodeFont$getF.bbox,matrix=_FakeUnicodeFont$getF.matrix;_this276.data.textPosition=_this276._transformPoint(coords,bbox,matrix);}if(_this276._isOffscreenCanvasSupported){var strokeAlpha=params.dict.get("CA");var fakeUnicodeFont=new FakeUnicodeFont(xref,"sans-serif");_this276.appearance=fakeUnicodeFont.createAppearance(_this276._contents.str,_this276.rectangle,_this276.rotation,_fontSize,_fontColor,strokeAlpha);_this276._streams.push(_this276.appearance);}else{warn("FreeTextAnnotation: OffscreenCanvas is not supported, annotation may not render correctly.");}}return _this276;}_inherits(FreeTextAnnotation,_MarkupAnnotation2);return _createClass(FreeTextAnnotation,[{key:"hasTextContent",get:function get(){return this._hasAppearance;}}],[{key:"createNewDict",value:function createNewDict(annotation,xref,_ref104){var apRef=_ref104.apRef,ap=_ref104.ap;var color=annotation.color,fontSize=annotation.fontSize,oldAnnotation=annotation.oldAnnotation,rect=annotation.rect,rotation=annotation.rotation,user=annotation.user,value=annotation.value;var freetext=oldAnnotation||new Dict(xref);freetext.set("Type",Name.get("Annot"));freetext.set("Subtype",Name.get("FreeText"));if(oldAnnotation){freetext.set("M","D:".concat(getModificationDate()));freetext["delete"]("RC");}else{freetext.set("CreationDate","D:".concat(getModificationDate()));}freetext.set("Rect",rect);var da="/Helv ".concat(fontSize," Tf ").concat(getPdfColor(color,true));freetext.set("DA",da);freetext.set("Contents",stringToAsciiOrUTF16BE(value));freetext.set("F",4);freetext.set("Border",[0,0,0]);freetext.set("Rotate",rotation);if(user){freetext.set("T",stringToAsciiOrUTF16BE(user));}if(apRef||ap){var n=new Dict(xref);freetext.set("AP",n);if(apRef){n.set("N",apRef);}else{n.set("N",ap);}}return freetext;}},{key:"createNewAppearanceStream",value:function(){var _createNewAppearanceStream=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee75(annotation,xref,params){var baseFontRef,evaluator,task,color,fontSize,rect,rotation,value,resources,font,baseFont,helv,_rect3,x1,y1,x2,y2,w,h,_ref105,lines,scale,totalWidth,encodedLines,_iterator210,_step210,_line3,encoded,lineWidth,glyphs,_iterator211,_step211,glyph,hscale,vscale,lineHeight,lineAscent,totalHeight,fscale,newFontSize,firstPoint,clipBox,matrix,buffer,vShift,i,ii,line,appearance,appearanceStreamDict,ap;return _regeneratorRuntime().wrap(function _callee75$(_context91){while(1)switch(_context91.prev=_context91.next){case 0:baseFontRef=params.baseFontRef,evaluator=params.evaluator,task=params.task;color=annotation.color,fontSize=annotation.fontSize,rect=annotation.rect,rotation=annotation.rotation,value=annotation.value;resources=new Dict(xref);font=new Dict(xref);if(baseFontRef){font.set("Helv",baseFontRef);}else{baseFont=new Dict(xref);baseFont.set("BaseFont",Name.get("Helvetica"));baseFont.set("Type",Name.get("Font"));baseFont.set("Subtype",Name.get("Type1"));baseFont.set("Encoding",Name.get("WinAnsiEncoding"));font.set("Helv",baseFont);}resources.set("Font",font);_context91.next=8;return WidgetAnnotation._getFontData(evaluator,task,{fontName:"Helv",fontSize:fontSize},resources);case 8:helv=_context91.sent;_rect3=_slicedToArray(rect,4),x1=_rect3[0],y1=_rect3[1],x2=_rect3[2],y2=_rect3[3];w=x2-x1;h=y2-y1;if(rotation%180!==0){_ref105=[h,w];w=_ref105[0];h=_ref105[1];}lines=value.split("\\n");scale=fontSize/1000;totalWidth=-Infinity;encodedLines=[];_iterator210=_createForOfIteratorHelper(lines);_context91.prev=18;_iterator210.s();case 20:if((_step210=_iterator210.n()).done){_context91.next=34;break;}_line3=_step210.value;encoded=helv.encodeString(_line3);if(!(encoded.length>1)){_context91.next=25;break;}return _context91.abrupt("return",null);case 25:_line3=encoded.join("");encodedLines.push(_line3);lineWidth=0;glyphs=helv.charsToGlyphs(_line3);_iterator211=_createForOfIteratorHelper(glyphs);try{for(_iterator211.s();!(_step211=_iterator211.n()).done;){glyph=_step211.value;lineWidth+=glyph.width*scale;}}catch(err){_iterator211.e(err);}finally{_iterator211.f();}totalWidth=Math.max(totalWidth,lineWidth);case 32:_context91.next=20;break;case 34:_context91.next=39;break;case 36:_context91.prev=36;_context91.t0=_context91["catch"](18);_iterator210.e(_context91.t0);case 39:_context91.prev=39;_iterator210.f();return _context91.finish(39);case 42:hscale=1;if(totalWidth>w){hscale=w/totalWidth;}vscale=1;lineHeight=LINE_FACTOR*fontSize;lineAscent=(LINE_FACTOR-LINE_DESCENT_FACTOR)*fontSize;totalHeight=lineHeight*lines.length;if(totalHeight>h){vscale=h/totalHeight;}fscale=Math.min(hscale,vscale);newFontSize=fontSize*fscale;_context91.t1=rotation;_context91.next=_context91.t1===0?54:_context91.t1===90?58:_context91.t1===180?62:_context91.t1===270?66:70;break;case 54:matrix=[1,0,0,1];clipBox=[rect[0],rect[1],w,h];firstPoint=[rect[0],rect[3]-lineAscent];return _context91.abrupt("break",70);case 58:matrix=[0,1,-1,0];clipBox=[rect[1],-rect[2],w,h];firstPoint=[rect[1],-rect[0]-lineAscent];return _context91.abrupt("break",70);case 62:matrix=[-1,0,0,-1];clipBox=[-rect[2],-rect[3],w,h];firstPoint=[-rect[2],-rect[1]-lineAscent];return _context91.abrupt("break",70);case 66:matrix=[0,-1,1,0];clipBox=[-rect[3],rect[0],w,h];firstPoint=[-rect[3],rect[2]-lineAscent];return _context91.abrupt("break",70);case 70:buffer=["q","".concat(matrix.join(" ")," 0 0 cm"),"".concat(clipBox.join(" ")," re W n"),"BT","".concat(getPdfColor(color,true)),"0 Tc /Helv ".concat(numberToString(newFontSize)," Tf")];buffer.push("".concat(firstPoint.join(" ")," Td (").concat(escapeString(encodedLines[0]),") Tj"));vShift=numberToString(lineHeight);for(i=1,ii=encodedLines.length;i<ii;i++){line=encodedLines[i];buffer.push("0 -".concat(vShift," Td (").concat(escapeString(line),") Tj"));}buffer.push("ET","Q");appearance=buffer.join("\\n");appearanceStreamDict=new Dict(xref);appearanceStreamDict.set("FormType",1);appearanceStreamDict.set("Subtype",Name.get("Form"));appearanceStreamDict.set("Type",Name.get("XObject"));appearanceStreamDict.set("BBox",rect);appearanceStreamDict.set("Resources",resources);appearanceStreamDict.set("Matrix",[1,0,0,1,-rect[0],-rect[1]]);ap=new StringStream(appearance);ap.dict=appearanceStreamDict;return _context91.abrupt("return",ap);case 86:case"end":return _context91.stop();}},_callee75,null,[[18,36,39,42]]);}));function createNewAppearanceStream(_x159,_x160,_x161){return _createNewAppearanceStream.apply(this,arguments);}return createNewAppearanceStream;}()}]);}(MarkupAnnotation);var LineAnnotation=/*#__PURE__*/function(_MarkupAnnotation3){function LineAnnotation(params){var _this277;_classCallCheck(this,LineAnnotation);_this277=_callSuper(this,LineAnnotation,[params]);var dict=params.dict,xref=params.xref;_this277.data.annotationType=AnnotationType.LINE;_this277.data.hasOwnCanvas=_this277.data.noRotate;_this277.data.noHTML=false;var lineCoordinates=lookupRect(dict.getArray("L"),[0,0,0,0]);_this277.data.lineCoordinates=Util.normalizeRect(lineCoordinates);_this277.setLineEndings(dict.getArray("LE"));_this277.data.lineEndings=_this277.lineEndings;if(!_this277.appearance){var strokeColor=_this277.color?getPdfColorArray(_this277.color):[0,0,0];var strokeAlpha=dict.get("CA");var interiorColor=getRgbColor(dict.getArray("IC"),null);var fillColor=interiorColor?getPdfColorArray(interiorColor):null;var fillAlpha=fillColor?strokeAlpha:null;var borderWidth=_this277.borderStyle.width||1,borderAdjust=2*borderWidth;var bbox=[_this277.data.lineCoordinates[0]-borderAdjust,_this277.data.lineCoordinates[1]-borderAdjust,_this277.data.lineCoordinates[2]+borderAdjust,_this277.data.lineCoordinates[3]+borderAdjust];if(!Util.intersect(_this277.rectangle,bbox)){_this277.rectangle=bbox;}_this277._setDefaultAppearance({xref:xref,extra:"".concat(borderWidth," w"),strokeColor:strokeColor,fillColor:fillColor,strokeAlpha:strokeAlpha,fillAlpha:fillAlpha,pointsCallback:function pointsCallback(buffer,points){buffer.push("".concat(lineCoordinates[0]," ").concat(lineCoordinates[1]," m"),"".concat(lineCoordinates[2]," ").concat(lineCoordinates[3]," l"),"S");return[points[0]-borderWidth,points[2]+borderWidth,points[7]-borderWidth,points[3]+borderWidth];}});}return _this277;}_inherits(LineAnnotation,_MarkupAnnotation3);return _createClass(LineAnnotation);}(MarkupAnnotation);var SquareAnnotation=/*#__PURE__*/function(_MarkupAnnotation4){function SquareAnnotation(params){var _this278;_classCallCheck(this,SquareAnnotation);_this278=_callSuper(this,SquareAnnotation,[params]);var dict=params.dict,xref=params.xref;_this278.data.annotationType=AnnotationType.SQUARE;_this278.data.hasOwnCanvas=_this278.data.noRotate;_this278.data.noHTML=false;if(!_this278.appearance){var strokeColor=_this278.color?getPdfColorArray(_this278.color):[0,0,0];var strokeAlpha=dict.get("CA");var interiorColor=getRgbColor(dict.getArray("IC"),null);var fillColor=interiorColor?getPdfColorArray(interiorColor):null;var fillAlpha=fillColor?strokeAlpha:null;if(_this278.borderStyle.width===0&&!fillColor){return _possibleConstructorReturn(_this278);}_this278._setDefaultAppearance({xref:xref,extra:"".concat(_this278.borderStyle.width," w"),strokeColor:strokeColor,fillColor:fillColor,strokeAlpha:strokeAlpha,fillAlpha:fillAlpha,pointsCallback:function pointsCallback(buffer,points){var x=points[4]+_this278.borderStyle.width/2;var y=points[5]+_this278.borderStyle.width/2;var width=points[6]-points[4]-_this278.borderStyle.width;var height=points[3]-points[7]-_this278.borderStyle.width;buffer.push("".concat(x," ").concat(y," ").concat(width," ").concat(height," re"));if(fillColor){buffer.push("B");}else{buffer.push("S");}return[points[0],points[2],points[7],points[3]];}});}return _this278;}_inherits(SquareAnnotation,_MarkupAnnotation4);return _createClass(SquareAnnotation);}(MarkupAnnotation);var CircleAnnotation=/*#__PURE__*/function(_MarkupAnnotation5){function CircleAnnotation(params){var _this279;_classCallCheck(this,CircleAnnotation);_this279=_callSuper(this,CircleAnnotation,[params]);var dict=params.dict,xref=params.xref;_this279.data.annotationType=AnnotationType.CIRCLE;if(!_this279.appearance){var strokeColor=_this279.color?getPdfColorArray(_this279.color):[0,0,0];var strokeAlpha=dict.get("CA");var interiorColor=getRgbColor(dict.getArray("IC"),null);var fillColor=interiorColor?getPdfColorArray(interiorColor):null;var fillAlpha=fillColor?strokeAlpha:null;if(_this279.borderStyle.width===0&&!fillColor){return _possibleConstructorReturn(_this279);}var controlPointsDistance=4/3*Math.tan(Math.PI/(2*4));_this279._setDefaultAppearance({xref:xref,extra:"".concat(_this279.borderStyle.width," w"),strokeColor:strokeColor,fillColor:fillColor,strokeAlpha:strokeAlpha,fillAlpha:fillAlpha,pointsCallback:function pointsCallback(buffer,points){var x0=points[0]+_this279.borderStyle.width/2;var y0=points[1]-_this279.borderStyle.width/2;var x1=points[6]-_this279.borderStyle.width/2;var y1=points[7]+_this279.borderStyle.width/2;var xMid=x0+(x1-x0)/2;var yMid=y0+(y1-y0)/2;var xOffset=(x1-x0)/2*controlPointsDistance;var yOffset=(y1-y0)/2*controlPointsDistance;buffer.push("".concat(xMid," ").concat(y1," m"),"".concat(xMid+xOffset," ").concat(y1," ").concat(x1," ").concat(yMid+yOffset," ").concat(x1," ").concat(yMid," c"),"".concat(x1," ").concat(yMid-yOffset," ").concat(xMid+xOffset," ").concat(y0," ").concat(xMid," ").concat(y0," c"),"".concat(xMid-xOffset," ").concat(y0," ").concat(x0," ").concat(yMid-yOffset," ").concat(x0," ").concat(yMid," c"),"".concat(x0," ").concat(yMid+yOffset," ").concat(xMid-xOffset," ").concat(y1," ").concat(xMid," ").concat(y1," c"),"h");if(fillColor){buffer.push("B");}else{buffer.push("S");}return[points[0],points[2],points[7],points[3]];}});}return _this279;}_inherits(CircleAnnotation,_MarkupAnnotation5);return _createClass(CircleAnnotation);}(MarkupAnnotation);var PolylineAnnotation=/*#__PURE__*/function(_MarkupAnnotation6){function PolylineAnnotation(params){var _this280;_classCallCheck(this,PolylineAnnotation);_this280=_callSuper(this,PolylineAnnotation,[params]);var dict=params.dict,xref=params.xref;_this280.data.annotationType=AnnotationType.POLYLINE;_this280.data.hasOwnCanvas=_this280.data.noRotate;_this280.data.noHTML=false;_this280.data.vertices=null;if(!(_this280 instanceof PolygonAnnotation)){_this280.setLineEndings(dict.getArray("LE"));_this280.data.lineEndings=_this280.lineEndings;}var rawVertices=dict.getArray("Vertices");if(!isNumberArray(rawVertices,null)){return _possibleConstructorReturn(_this280);}var vertices=_this280.data.vertices=Float32Array.from(rawVertices);if(!_this280.appearance){var strokeColor=_this280.color?getPdfColorArray(_this280.color):[0,0,0];var strokeAlpha=dict.get("CA");var borderWidth=_this280.borderStyle.width||1,borderAdjust=2*borderWidth;var bbox=[Infinity,Infinity,-Infinity,-Infinity];for(var i=0,ii=vertices.length;i<ii;i+=2){bbox[0]=Math.min(bbox[0],vertices[i]-borderAdjust);bbox[1]=Math.min(bbox[1],vertices[i+1]-borderAdjust);bbox[2]=Math.max(bbox[2],vertices[i]+borderAdjust);bbox[3]=Math.max(bbox[3],vertices[i+1]+borderAdjust);}if(!Util.intersect(_this280.rectangle,bbox)){_this280.rectangle=bbox;}_this280._setDefaultAppearance({xref:xref,extra:"".concat(borderWidth," w"),strokeColor:strokeColor,strokeAlpha:strokeAlpha,pointsCallback:function pointsCallback(buffer,points){for(var _i65=0,_ii14=vertices.length;_i65<_ii14;_i65+=2){buffer.push("".concat(vertices[_i65]," ").concat(vertices[_i65+1]," ").concat(_i65===0?"m":"l"));}buffer.push("S");return[points[0],points[2],points[7],points[3]];}});}return _this280;}_inherits(PolylineAnnotation,_MarkupAnnotation6);return _createClass(PolylineAnnotation);}(MarkupAnnotation);var PolygonAnnotation=/*#__PURE__*/function(_PolylineAnnotation){function PolygonAnnotation(params){var _this281;_classCallCheck(this,PolygonAnnotation);_this281=_callSuper(this,PolygonAnnotation,[params]);_this281.data.annotationType=AnnotationType.POLYGON;return _this281;}_inherits(PolygonAnnotation,_PolylineAnnotation);return _createClass(PolygonAnnotation);}(PolylineAnnotation);var CaretAnnotation=/*#__PURE__*/function(_MarkupAnnotation7){function CaretAnnotation(params){var _this282;_classCallCheck(this,CaretAnnotation);_this282=_callSuper(this,CaretAnnotation,[params]);_this282.data.annotationType=AnnotationType.CARET;return _this282;}_inherits(CaretAnnotation,_MarkupAnnotation7);return _createClass(CaretAnnotation);}(MarkupAnnotation);var InkAnnotation=/*#__PURE__*/function(_MarkupAnnotation8){function InkAnnotation(params){var _this283;_classCallCheck(this,InkAnnotation);_this283=_callSuper(this,InkAnnotation,[params]);_this283.data.hasOwnCanvas=_this283.data.noRotate;_this283.data.noHTML=false;var dict=params.dict,xref=params.xref;_this283.data.annotationType=AnnotationType.INK;_this283.data.inkLists=[];_this283.data.isEditable=!_this283.data.noHTML;_this283.data.noHTML=false;_this283.data.opacity=dict.get("CA")||1;var rawInkLists=dict.getArray("InkList");if(!Array.isArray(rawInkLists)){return _possibleConstructorReturn(_this283);}for(var i=0,ii=rawInkLists.length;i<ii;++i){if(!Array.isArray(rawInkLists[i])){continue;}var inkList=new Float32Array(rawInkLists[i].length);_this283.data.inkLists.push(inkList);for(var j=0,jj=rawInkLists[i].length;j<jj;j+=2){var x=xref.fetchIfRef(rawInkLists[i][j]),y=xref.fetchIfRef(rawInkLists[i][j+1]);if(typeof x==="number"&&typeof y==="number"){inkList[j]=x;inkList[j+1]=y;}}}if(!_this283.appearance){var strokeColor=_this283.color?getPdfColorArray(_this283.color):[0,0,0];var strokeAlpha=dict.get("CA");var borderWidth=_this283.borderStyle.width||1,borderAdjust=2*borderWidth;var bbox=[Infinity,Infinity,-Infinity,-Infinity];var _iterator212=_createForOfIteratorHelper(_this283.data.inkLists),_step212;try{for(_iterator212.s();!(_step212=_iterator212.n()).done;){var _inkList2=_step212.value;for(var _i67=0,_ii16=_inkList2.length;_i67<_ii16;_i67+=2){bbox[0]=Math.min(bbox[0],_inkList2[_i67]-borderAdjust);bbox[1]=Math.min(bbox[1],_inkList2[_i67+1]-borderAdjust);bbox[2]=Math.max(bbox[2],_inkList2[_i67]+borderAdjust);bbox[3]=Math.max(bbox[3],_inkList2[_i67+1]+borderAdjust);}}}catch(err){_iterator212.e(err);}finally{_iterator212.f();}if(!Util.intersect(_this283.rectangle,bbox)){_this283.rectangle=bbox;}_this283._setDefaultAppearance({xref:xref,extra:"".concat(borderWidth," w"),strokeColor:strokeColor,strokeAlpha:strokeAlpha,pointsCallback:function pointsCallback(buffer,points){var _iterator213=_createForOfIteratorHelper(_this283.data.inkLists),_step213;try{for(_iterator213.s();!(_step213=_iterator213.n()).done;){var _inkList=_step213.value;for(var _i66=0,_ii15=_inkList.length;_i66<_ii15;_i66+=2){buffer.push("".concat(_inkList[_i66]," ").concat(_inkList[_i66+1]," ").concat(_i66===0?"m":"l"));}buffer.push("S");}}catch(err){_iterator213.e(err);}finally{_iterator213.f();}return[points[0],points[2],points[7],points[3]];}});}return _this283;}_inherits(InkAnnotation,_MarkupAnnotation8);return _createClass(InkAnnotation,null,[{key:"createNewDict",value:function createNewDict(annotation,xref,_ref106){var apRef=_ref106.apRef,ap=_ref106.ap;var oldAnnotation=annotation.oldAnnotation,color=annotation.color,opacity=annotation.opacity,paths=annotation.paths,outlines=annotation.outlines,rect=annotation.rect,rotation=annotation.rotation,thickness=annotation.thickness,user=annotation.user;var ink=oldAnnotation||new Dict(xref);ink.set("Type",Name.get("Annot"));ink.set("Subtype",Name.get("Ink"));ink.set(oldAnnotation?"M":"CreationDate","D:".concat(getModificationDate()));ink.set("Rect",rect);ink.set("InkList",(outlines===null||outlines===void 0?void 0:outlines.points)||paths.points);ink.set("F",4);ink.set("Rotate",rotation);if(user){ink.set("T",stringToAsciiOrUTF16BE(user));}if(outlines){ink.set("IT",Name.get("InkHighlight"));}var bs=new Dict(xref);ink.set("BS",bs);bs.set("W",thickness);ink.set("C",getPdfColorArray(color));ink.set("CA",opacity);var n=new Dict(xref);ink.set("AP",n);if(apRef){n.set("N",apRef);}else{n.set("N",ap);}return ink;}},{key:"createNewAppearanceStream",value:function(){var _createNewAppearanceStream2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee76(annotation,xref,params){var color,rect,paths,thickness,opacity,appearanceBuffer,_iterator214,_step214,outline,i,ii,_outline$slice,_outline$slice2,c1x,c1y,c2x,c2y,x,y,appearance,appearanceStreamDict,resources,extGState,r0,ap;return _regeneratorRuntime().wrap(function _callee76$(_context92){while(1)switch(_context92.prev=_context92.next){case 0:if(!annotation.outlines){_context92.next=2;break;}return _context92.abrupt("return",this.createNewAppearanceStreamForHighlight(annotation,xref,params));case 2:color=annotation.color,rect=annotation.rect,paths=annotation.paths,thickness=annotation.thickness,opacity=annotation.opacity;appearanceBuffer=["".concat(thickness," w 1 J 1 j"),"".concat(getPdfColor(color,false))];if(opacity!==1){appearanceBuffer.push("/R0 gs");}_iterator214=_createForOfIteratorHelper(paths.lines);try{for(_iterator214.s();!(_step214=_iterator214.n()).done;){outline=_step214.value;appearanceBuffer.push("".concat(numberToString(outline[4])," ").concat(numberToString(outline[5])," m"));for(i=6,ii=outline.length;i<ii;i+=6){if(isNaN(outline[i])){appearanceBuffer.push("".concat(numberToString(outline[i+4])," ").concat(numberToString(outline[i+5])," l"));}else{_outline$slice=outline.slice(i,i+6),_outline$slice2=_slicedToArray(_outline$slice,6),c1x=_outline$slice2[0],c1y=_outline$slice2[1],c2x=_outline$slice2[2],c2y=_outline$slice2[3],x=_outline$slice2[4],y=_outline$slice2[5];appearanceBuffer.push([c1x,c1y,c2x,c2y,x,y].map(numberToString).join(" ")+" c");}}if(outline.length===6){appearanceBuffer.push("".concat(numberToString(outline[4])," ").concat(numberToString(outline[5])," l"));}}}catch(err){_iterator214.e(err);}finally{_iterator214.f();}appearanceBuffer.push("S");appearance=appearanceBuffer.join("\\n");appearanceStreamDict=new Dict(xref);appearanceStreamDict.set("FormType",1);appearanceStreamDict.set("Subtype",Name.get("Form"));appearanceStreamDict.set("Type",Name.get("XObject"));appearanceStreamDict.set("BBox",rect);appearanceStreamDict.set("Length",appearance.length);if(opacity!==1){resources=new Dict(xref);extGState=new Dict(xref);r0=new Dict(xref);r0.set("CA",opacity);r0.set("Type",Name.get("ExtGState"));extGState.set("R0",r0);resources.set("ExtGState",extGState);appearanceStreamDict.set("Resources",resources);}ap=new StringStream(appearance);ap.dict=appearanceStreamDict;return _context92.abrupt("return",ap);case 19:case"end":return _context92.stop();}},_callee76,this);}));function createNewAppearanceStream(_x162,_x163,_x164){return _createNewAppearanceStream2.apply(this,arguments);}return createNewAppearanceStream;}()},{key:"createNewAppearanceStreamForHighlight",value:function(){var _createNewAppearanceStreamForHighlight=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee77(annotation,xref,params){var color,rect,outline,opacity,appearanceBuffer,i,ii,_outline$slice3,_outline$slice4,c1x,c1y,c2x,c2y,x,y,appearance,appearanceStreamDict,resources,extGState,r0,ap;return _regeneratorRuntime().wrap(function _callee77$(_context93){while(1)switch(_context93.prev=_context93.next){case 0:color=annotation.color,rect=annotation.rect,outline=annotation.outlines.outline,opacity=annotation.opacity;appearanceBuffer=["".concat(getPdfColor(color,true)),"/R0 gs"];appearanceBuffer.push("".concat(numberToString(outline[4])," ").concat(numberToString(outline[5])," m"));for(i=6,ii=outline.length;i<ii;i+=6){if(isNaN(outline[i])){appearanceBuffer.push("".concat(numberToString(outline[i+4])," ").concat(numberToString(outline[i+5])," l"));}else{_outline$slice3=outline.slice(i,i+6),_outline$slice4=_slicedToArray(_outline$slice3,6),c1x=_outline$slice4[0],c1y=_outline$slice4[1],c2x=_outline$slice4[2],c2y=_outline$slice4[3],x=_outline$slice4[4],y=_outline$slice4[5];appearanceBuffer.push([c1x,c1y,c2x,c2y,x,y].map(numberToString).join(" ")+" c");}}appearanceBuffer.push("h f");appearance=appearanceBuffer.join("\\n");appearanceStreamDict=new Dict(xref);appearanceStreamDict.set("FormType",1);appearanceStreamDict.set("Subtype",Name.get("Form"));appearanceStreamDict.set("Type",Name.get("XObject"));appearanceStreamDict.set("BBox",rect);appearanceStreamDict.set("Length",appearance.length);resources=new Dict(xref);extGState=new Dict(xref);resources.set("ExtGState",extGState);appearanceStreamDict.set("Resources",resources);r0=new Dict(xref);extGState.set("R0",r0);r0.set("BM",Name.get("Multiply"));if(opacity!==1){r0.set("ca",opacity);r0.set("Type",Name.get("ExtGState"));}ap=new StringStream(appearance);ap.dict=appearanceStreamDict;return _context93.abrupt("return",ap);case 23:case"end":return _context93.stop();}},_callee77);}));function createNewAppearanceStreamForHighlight(_x165,_x166,_x167){return _createNewAppearanceStreamForHighlight.apply(this,arguments);}return createNewAppearanceStreamForHighlight;}()}]);}(MarkupAnnotation);var HighlightAnnotation=/*#__PURE__*/function(_MarkupAnnotation9){function HighlightAnnotation(params){var _this284;_classCallCheck(this,HighlightAnnotation);_this284=_callSuper(this,HighlightAnnotation,[params]);var dict=params.dict,xref=params.xref;_this284.data.annotationType=AnnotationType.HIGHLIGHT;_this284.data.isEditable=!_this284.data.noHTML;_this284.data.noHTML=false;_this284.data.opacity=dict.get("CA")||1;var quadPoints=_this284.data.quadPoints=getQuadPoints(dict,null);if(quadPoints){var _this284$appearance;var resources=(_this284$appearance=_this284.appearance)===null||_this284$appearance===void 0?void 0:_this284$appearance.dict.get("Resources");if(!_this284.appearance||!(resources!==null&&resources!==void 0&&resources.has("ExtGState"))){if(_this284.appearance){warn("HighlightAnnotation - ignoring built-in appearance stream.");}var fillColor=_this284.color?getPdfColorArray(_this284.color):[1,1,0];var fillAlpha=dict.get("CA");_this284._setDefaultAppearance({xref:xref,fillColor:fillColor,blendMode:"Multiply",fillAlpha:fillAlpha,pointsCallback:function pointsCallback(buffer,points){buffer.push("".concat(points[0]," ").concat(points[1]," m"),"".concat(points[2]," ").concat(points[3]," l"),"".concat(points[6]," ").concat(points[7]," l"),"".concat(points[4]," ").concat(points[5]," l"),"f");return[points[0],points[2],points[7],points[3]];}});}}else{_this284.data.popupRef=null;}return _this284;}_inherits(HighlightAnnotation,_MarkupAnnotation9);return _createClass(HighlightAnnotation,null,[{key:"createNewDict",value:function createNewDict(annotation,xref,_ref107){var apRef=_ref107.apRef,ap=_ref107.ap;var color=annotation.color,oldAnnotation=annotation.oldAnnotation,opacity=annotation.opacity,rect=annotation.rect,rotation=annotation.rotation,user=annotation.user,quadPoints=annotation.quadPoints;var highlight=oldAnnotation||new Dict(xref);highlight.set("Type",Name.get("Annot"));highlight.set("Subtype",Name.get("Highlight"));highlight.set(oldAnnotation?"M":"CreationDate","D:".concat(getModificationDate()));highlight.set("CreationDate","D:".concat(getModificationDate()));highlight.set("Rect",rect);highlight.set("F",4);highlight.set("Border",[0,0,0]);highlight.set("Rotate",rotation);highlight.set("QuadPoints",quadPoints);highlight.set("C",getPdfColorArray(color));highlight.set("CA",opacity);if(user){highlight.set("T",stringToAsciiOrUTF16BE(user));}if(apRef||ap){var n=new Dict(xref);highlight.set("AP",n);n.set("N",apRef||ap);}return highlight;}},{key:"createNewAppearanceStream",value:function(){var _createNewAppearanceStream3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee78(annotation,xref,params){var color,rect,outlines,opacity,appearanceBuffer,buffer,_iterator215,_step215,outline,i,ii,appearance,appearanceStreamDict,resources,extGState,r0,ap;return _regeneratorRuntime().wrap(function _callee78$(_context94){while(1)switch(_context94.prev=_context94.next){case 0:color=annotation.color,rect=annotation.rect,outlines=annotation.outlines,opacity=annotation.opacity;appearanceBuffer=["".concat(getPdfColor(color,true)),"/R0 gs"];buffer=[];_iterator215=_createForOfIteratorHelper(outlines);try{for(_iterator215.s();!(_step215=_iterator215.n()).done;){outline=_step215.value;buffer.length=0;buffer.push("".concat(numberToString(outline[0])," ").concat(numberToString(outline[1])," m"));for(i=2,ii=outline.length;i<ii;i+=2){buffer.push("".concat(numberToString(outline[i])," ").concat(numberToString(outline[i+1])," l"));}buffer.push("h");appearanceBuffer.push(buffer.join("\\n"));}}catch(err){_iterator215.e(err);}finally{_iterator215.f();}appearanceBuffer.push("f*");appearance=appearanceBuffer.join("\\n");appearanceStreamDict=new Dict(xref);appearanceStreamDict.set("FormType",1);appearanceStreamDict.set("Subtype",Name.get("Form"));appearanceStreamDict.set("Type",Name.get("XObject"));appearanceStreamDict.set("BBox",rect);appearanceStreamDict.set("Length",appearance.length);resources=new Dict(xref);extGState=new Dict(xref);resources.set("ExtGState",extGState);appearanceStreamDict.set("Resources",resources);r0=new Dict(xref);extGState.set("R0",r0);r0.set("BM",Name.get("Multiply"));if(opacity!==1){r0.set("ca",opacity);r0.set("Type",Name.get("ExtGState"));}ap=new StringStream(appearance);ap.dict=appearanceStreamDict;return _context94.abrupt("return",ap);case 24:case"end":return _context94.stop();}},_callee78);}));function createNewAppearanceStream(_x168,_x169,_x170){return _createNewAppearanceStream3.apply(this,arguments);}return createNewAppearanceStream;}()}]);}(MarkupAnnotation);var UnderlineAnnotation=/*#__PURE__*/function(_MarkupAnnotation10){function UnderlineAnnotation(params){var _this285;_classCallCheck(this,UnderlineAnnotation);_this285=_callSuper(this,UnderlineAnnotation,[params]);var dict=params.dict,xref=params.xref;_this285.data.annotationType=AnnotationType.UNDERLINE;var quadPoints=_this285.data.quadPoints=getQuadPoints(dict,null);if(quadPoints){if(!_this285.appearance){var strokeColor=_this285.color?getPdfColorArray(_this285.color):[0,0,0];var strokeAlpha=dict.get("CA");_this285._setDefaultAppearance({xref:xref,extra:"[] 0 d 0.571 w",strokeColor:strokeColor,strokeAlpha:strokeAlpha,pointsCallback:function pointsCallback(buffer,points){buffer.push("".concat(points[4]," ").concat(points[5]+1.3," m"),"".concat(points[6]," ").concat(points[7]+1.3," l"),"S");return[points[0],points[2],points[7],points[3]];}});}}else{_this285.data.popupRef=null;}return _this285;}_inherits(UnderlineAnnotation,_MarkupAnnotation10);return _createClass(UnderlineAnnotation);}(MarkupAnnotation);var SquigglyAnnotation=/*#__PURE__*/function(_MarkupAnnotation11){function SquigglyAnnotation(params){var _this286;_classCallCheck(this,SquigglyAnnotation);_this286=_callSuper(this,SquigglyAnnotation,[params]);var dict=params.dict,xref=params.xref;_this286.data.annotationType=AnnotationType.SQUIGGLY;var quadPoints=_this286.data.quadPoints=getQuadPoints(dict,null);if(quadPoints){if(!_this286.appearance){var strokeColor=_this286.color?getPdfColorArray(_this286.color):[0,0,0];var strokeAlpha=dict.get("CA");_this286._setDefaultAppearance({xref:xref,extra:"[] 0 d 1 w",strokeColor:strokeColor,strokeAlpha:strokeAlpha,pointsCallback:function pointsCallback(buffer,points){var dy=(points[1]-points[5])/6;var shift=dy;var x=points[4];var y=points[5];var xEnd=points[6];buffer.push("".concat(x," ").concat(y+shift," m"));do{x+=2;shift=shift===0?dy:0;buffer.push("".concat(x," ").concat(y+shift," l"));}while(x<xEnd);buffer.push("S");return[points[4],xEnd,y-2*dy,y+2*dy];}});}}else{_this286.data.popupRef=null;}return _this286;}_inherits(SquigglyAnnotation,_MarkupAnnotation11);return _createClass(SquigglyAnnotation);}(MarkupAnnotation);var StrikeOutAnnotation=/*#__PURE__*/function(_MarkupAnnotation12){function StrikeOutAnnotation(params){var _this287;_classCallCheck(this,StrikeOutAnnotation);_this287=_callSuper(this,StrikeOutAnnotation,[params]);var dict=params.dict,xref=params.xref;_this287.data.annotationType=AnnotationType.STRIKEOUT;var quadPoints=_this287.data.quadPoints=getQuadPoints(dict,null);if(quadPoints){if(!_this287.appearance){var strokeColor=_this287.color?getPdfColorArray(_this287.color):[0,0,0];var strokeAlpha=dict.get("CA");_this287._setDefaultAppearance({xref:xref,extra:"[] 0 d 1 w",strokeColor:strokeColor,strokeAlpha:strokeAlpha,pointsCallback:function pointsCallback(buffer,points){buffer.push("".concat((points[0]+points[4])/2," ")+"".concat((points[1]+points[5])/2," m"),"".concat((points[2]+points[6])/2," ")+"".concat((points[3]+points[7])/2," l"),"S");return[points[0],points[2],points[7],points[3]];}});}}else{_this287.data.popupRef=null;}return _this287;}_inherits(StrikeOutAnnotation,_MarkupAnnotation12);return _createClass(StrikeOutAnnotation);}(MarkupAnnotation);var _savedHasOwnCanvas=/*#__PURE__*/new WeakMap();var StampAnnotation=/*#__PURE__*/function(_MarkupAnnotation13){function StampAnnotation(params){var _this288;_classCallCheck(this,StampAnnotation);_this288=_callSuper(this,StampAnnotation,[params]);_classPrivateFieldInitSpec(_this288,_savedHasOwnCanvas,void 0);_this288.data.annotationType=AnnotationType.STAMP;_classPrivateFieldSet(_savedHasOwnCanvas,_this288,_this288.data.hasOwnCanvas=_this288.data.noRotate);_this288.data.isEditable=!_this288.data.noHTML;_this288.data.noHTML=false;return _this288;}_inherits(StampAnnotation,_MarkupAnnotation13);return _createClass(StampAnnotation,[{key:"mustBeViewedWhenEditing",value:function mustBeViewedWhenEditing(isEditing){var modifiedIds=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(isEditing){if(!this.data.isEditable){return false;}_classPrivateFieldSet(_savedHasOwnCanvas,this,this.data.hasOwnCanvas);this.data.hasOwnCanvas=true;return true;}this.data.hasOwnCanvas=_classPrivateFieldGet(_savedHasOwnCanvas,this);return!(modifiedIds!==null&&modifiedIds!==void 0&&modifiedIds.has(this.data.id));}}],[{key:"createImage",value:function(){var _createImage4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee79(bitmap,xref){var width,height,canvas,ctx,data,buf32,hasAlpha,jpegBufferPromise,xobjectName,imageName,image,smaskStream,alphaBuffer,i,ii,_i68,_ii17,smask,imageStream;return _regeneratorRuntime().wrap(function _callee79$(_context95){while(1)switch(_context95.prev=_context95.next){case 0:width=bitmap.width,height=bitmap.height;canvas=new OffscreenCanvas(width,height);ctx=canvas.getContext("2d",{alpha:true});ctx.drawImage(bitmap,0,0);data=ctx.getImageData(0,0,width,height).data;buf32=new Uint32Array(data.buffer);hasAlpha=buf32.some(FeatureTest.isLittleEndian?function(x){return x>>>24!==0xff;}:function(x){return(x&0xff)!==0xff;});if(hasAlpha){ctx.fillStyle="white";ctx.fillRect(0,0,width,height);ctx.drawImage(bitmap,0,0);}jpegBufferPromise=canvas.convertToBlob({type:"image/jpeg",quality:1}).then(function(blob){return blob.arrayBuffer();});xobjectName=Name.get("XObject");imageName=Name.get("Image");image=new Dict(xref);image.set("Type",xobjectName);image.set("Subtype",imageName);image.set("BitsPerComponent",8);image.set("ColorSpace",Name.get("DeviceRGB"));image.set("Filter",Name.get("DCTDecode"));image.set("BBox",[0,0,width,height]);image.set("Width",width);image.set("Height",height);smaskStream=null;if(hasAlpha){alphaBuffer=new Uint8Array(buf32.length);if(FeatureTest.isLittleEndian){for(i=0,ii=buf32.length;i<ii;i++){alphaBuffer[i]=buf32[i]>>>24;}}else{for(_i68=0,_ii17=buf32.length;_i68<_ii17;_i68++){alphaBuffer[_i68]=buf32[_i68]&0xff;}}smask=new Dict(xref);smask.set("Type",xobjectName);smask.set("Subtype",imageName);smask.set("BitsPerComponent",8);smask.set("ColorSpace",Name.get("DeviceGray"));smask.set("Width",width);smask.set("Height",height);smaskStream=new Stream(alphaBuffer,0,0,smask);}_context95.t0=Stream;_context95.next=25;return jpegBufferPromise;case 25:_context95.t1=_context95.sent;_context95.t2=image;imageStream=new _context95.t0(_context95.t1,0,0,_context95.t2);return _context95.abrupt("return",{imageStream:imageStream,smaskStream:smaskStream,width:width,height:height});case 29:case"end":return _context95.stop();}},_callee79);}));function createImage(_x171,_x172){return _createImage4.apply(this,arguments);}return createImage;}()},{key:"createNewDict",value:function createNewDict(annotation,xref,_ref108){var apRef=_ref108.apRef,ap=_ref108.ap;var oldAnnotation=annotation.oldAnnotation,rect=annotation.rect,rotation=annotation.rotation,user=annotation.user;var stamp=oldAnnotation||new Dict(xref);stamp.set("Type",Name.get("Annot"));stamp.set("Subtype",Name.get("Stamp"));stamp.set(oldAnnotation?"M":"CreationDate","D:".concat(getModificationDate()));stamp.set("Rect",rect);stamp.set("F",4);stamp.set("Border",[0,0,0]);stamp.set("Rotate",rotation);if(user){stamp.set("T",stringToAsciiOrUTF16BE(user));}if(apRef||ap){var n=new Dict(xref);stamp.set("AP",n);if(apRef){n.set("N",apRef);}else{n.set("N",ap);}}return stamp;}},{key:"createNewAppearanceStream",value:function(){var _createNewAppearanceStream4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee80(annotation,xref,params){var rotation,_params$image,imageRef,width,height,resources,xobject,appearance,appearanceStreamDict,matrix,ap;return _regeneratorRuntime().wrap(function _callee80$(_context96){while(1)switch(_context96.prev=_context96.next){case 0:if(!annotation.oldAnnotation){_context96.next=2;break;}return _context96.abrupt("return",null);case 2:if(!annotation.isSignature){_context96.next=4;break;}return _context96.abrupt("return",_assertClassBrand(StampAnnotation,this,_createNewAppearanceStreamForDrawing).call(this,annotation,xref));case 4:rotation=annotation.rotation;_params$image=params.image,imageRef=_params$image.imageRef,width=_params$image.width,height=_params$image.height;resources=new Dict(xref);xobject=new Dict(xref);resources.set("XObject",xobject);xobject.set("Im0",imageRef);appearance="q ".concat(width," 0 0 ").concat(height," 0 0 cm /Im0 Do Q");appearanceStreamDict=new Dict(xref);appearanceStreamDict.set("FormType",1);appearanceStreamDict.set("Subtype",Name.get("Form"));appearanceStreamDict.set("Type",Name.get("XObject"));appearanceStreamDict.set("BBox",[0,0,width,height]);appearanceStreamDict.set("Resources",resources);if(rotation){matrix=_getRotationMatrix(rotation,width,height);appearanceStreamDict.set("Matrix",matrix);}ap=new StringStream(appearance);ap.dict=appearanceStreamDict;return _context96.abrupt("return",ap);case 21:case"end":return _context96.stop();}},_callee80,this);}));function createNewAppearanceStream(_x173,_x174,_x175){return _createNewAppearanceStream4.apply(this,arguments);}return createNewAppearanceStream;}()}]);}(MarkupAnnotation);function _createNewAppearanceStreamForDrawing(_x247,_x248){return _createNewAppearanceStreamForDrawing3.apply(this,arguments);}function _createNewAppearanceStreamForDrawing3(){_createNewAppearanceStreamForDrawing3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee128(annotation,xref){var areContours,color,rect,lines,thickness,appearanceBuffer,_iterator263,_step263,line,i,ii,_line$slice,_line$slice2,c1x,c1y,c2x,c2y,x,y,appearance,appearanceStreamDict,ap;return _regeneratorRuntime().wrap(function _callee128$(_context147){while(1)switch(_context147.prev=_context147.next){case 0:areContours=annotation.areContours,color=annotation.color,rect=annotation.rect,lines=annotation.lines,thickness=annotation.thickness;appearanceBuffer=["".concat(thickness," w 1 J 1 j"),"".concat(getPdfColor(color,areContours))];_iterator263=_createForOfIteratorHelper(lines);try{for(_iterator263.s();!(_step263=_iterator263.n()).done;){line=_step263.value;appearanceBuffer.push("".concat(numberToString(line[4])," ").concat(numberToString(line[5])," m"));for(i=6,ii=line.length;i<ii;i+=6){if(isNaN(line[i])){appearanceBuffer.push("".concat(numberToString(line[i+4])," ").concat(numberToString(line[i+5])," l"));}else{_line$slice=line.slice(i,i+6),_line$slice2=_slicedToArray(_line$slice,6),c1x=_line$slice2[0],c1y=_line$slice2[1],c2x=_line$slice2[2],c2y=_line$slice2[3],x=_line$slice2[4],y=_line$slice2[5];appearanceBuffer.push([c1x,c1y,c2x,c2y,x,y].map(numberToString).join(" ")+" c");}}if(line.length===6){appearanceBuffer.push("".concat(numberToString(line[4])," ").concat(numberToString(line[5])," l"));}}}catch(err){_iterator263.e(err);}finally{_iterator263.f();}appearanceBuffer.push(areContours?"F":"S");appearance=appearanceBuffer.join("\\n");appearanceStreamDict=new Dict(xref);appearanceStreamDict.set("FormType",1);appearanceStreamDict.set("Subtype",Name.get("Form"));appearanceStreamDict.set("Type",Name.get("XObject"));appearanceStreamDict.set("BBox",rect);appearanceStreamDict.set("Length",appearance.length);ap=new StringStream(appearance);ap.dict=appearanceStreamDict;return _context147.abrupt("return",ap);case 15:case"end":return _context147.stop();}},_callee128);}));return _createNewAppearanceStreamForDrawing3.apply(this,arguments);}var FileAttachmentAnnotation=/*#__PURE__*/function(_MarkupAnnotation14){function FileAttachmentAnnotation(params){var _this289;_classCallCheck(this,FileAttachmentAnnotation);_this289=_callSuper(this,FileAttachmentAnnotation,[params]);var dict=params.dict,xref=params.xref;var file=new FileSpec(dict.get("FS"),xref);_this289.data.annotationType=AnnotationType.FILEATTACHMENT;_this289.data.hasOwnCanvas=_this289.data.noRotate;_this289.data.noHTML=false;_this289.data.file=file.serializable;var name=dict.get("Name");_this289.data.name=name instanceof Name?stringToPDFString(name.name):"PushPin";var fillAlpha=dict.get("ca");_this289.data.fillAlpha=typeof fillAlpha==="number"&&fillAlpha>=0&&fillAlpha<=1?fillAlpha:null;return _this289;}_inherits(FileAttachmentAnnotation,_MarkupAnnotation14);return _createClass(FileAttachmentAnnotation);}(MarkupAnnotation);;// ./src/core/decrypt_stream.js\nvar chunkSize=512;var DecryptStream=/*#__PURE__*/function(_DecodeStream12){function DecryptStream(str,maybeLength,decrypt){var _this290;_classCallCheck(this,DecryptStream);_this290=_callSuper(this,DecryptStream,[maybeLength]);_this290.str=str;_this290.dict=str.dict;_this290.decrypt=decrypt;_this290.nextChunk=null;_this290.initialized=false;return _this290;}_inherits(DecryptStream,_DecodeStream12);return _createClass(DecryptStream,[{key:"readBlock",value:function readBlock(){var _chunk3,_this$nextChunk;var chunk;if(this.initialized){chunk=this.nextChunk;}else{chunk=this.str.getBytes(chunkSize);this.initialized=true;}if(!((_chunk3=chunk)!==null&&_chunk3!==void 0&&_chunk3.length)){this.eof=true;return;}this.nextChunk=this.str.getBytes(chunkSize);var hasMoreData=((_this$nextChunk=this.nextChunk)===null||_this$nextChunk===void 0?void 0:_this$nextChunk.length)>0;var decrypt=this.decrypt;chunk=decrypt(chunk,!hasMoreData);var bufferLength=this.bufferLength,newLength=bufferLength+chunk.length,buffer=this.ensureBuffer(newLength);buffer.set(chunk,bufferLength);this.bufferLength=newLength;}}]);}(DecodeStream);;// ./src/core/crypto.js\nvar ARCFourCipher=/*#__PURE__*/function(){function ARCFourCipher(key){_classCallCheck(this,ARCFourCipher);this.a=0;this.b=0;var s=new Uint8Array(256);var keyLength=key.length;for(var i=0;i<256;++i){s[i]=i;}for(var _i69=0,j=0;_i69<256;++_i69){var tmp=s[_i69];j=j+tmp+key[_i69%keyLength]&0xff;s[_i69]=s[j];s[j]=tmp;}this.s=s;}return _createClass(ARCFourCipher,[{key:"encryptBlock",value:function encryptBlock(data){var a=this.a,b=this.b;var s=this.s;var n=data.length;var output=new Uint8Array(n);for(var i=0;i<n;++i){a=a+1&0xff;var tmp=s[a];b=b+tmp&0xff;var tmp2=s[b];s[a]=tmp2;s[b]=tmp;output[i]=data[i]^s[tmp+tmp2&0xff];}this.a=a;this.b=b;return output;}},{key:"decryptBlock",value:function decryptBlock(data){return this.encryptBlock(data);}},{key:"encrypt",value:function encrypt(data){return this.encryptBlock(data);}}]);}();var calculateMD5=function calculateMD5Closure(){var r=new Uint8Array([7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21]);var k=new Int32Array([-680876936,-389564586,606105819,-1044525330,-176418897,1200080426,-1473231341,-45705983,1770035416,-1958414417,-42063,-1990404162,1804603682,-40341101,-1502002290,1236535329,-165796510,-1069501632,643717713,-373897302,-701558691,38016083,-660478335,-405537848,568446438,-1019803690,-187363961,1163531501,-1444681467,-51403784,1735328473,-1926607734,-378558,-2022574463,1839030562,-35309556,-1530992060,1272893353,-155497632,-1094730640,681279174,-358537222,-722521979,76029189,-640364487,-421815835,530742520,-995338651,-198630844,1126891415,-1416354905,-57434055,1700485571,-1894986606,-1051523,-2054922799,1873313359,-30611744,-1560198380,1309151649,-145523070,-1120210379,718787259,-343485551]);function hash(data,offset,length){var h0=1732584193,h1=-271733879,h2=-1732584194,h3=271733878;var paddedLength=length+72&~63;var padded=new Uint8Array(paddedLength);var i,j;for(i=0;i<length;++i){padded[i]=data[offset++];}padded[i++]=0x80;var n=paddedLength-8;while(i<n){padded[i++]=0;}padded[i++]=length<<3&0xff;padded[i++]=length>>5&0xff;padded[i++]=length>>13&0xff;padded[i++]=length>>21&0xff;padded[i++]=length>>>29&0xff;padded[i++]=0;padded[i++]=0;padded[i++]=0;var w=new Int32Array(16);for(i=0;i<paddedLength;){for(j=0;j<16;++j,i+=4){w[j]=padded[i]|padded[i+1]<<8|padded[i+2]<<16|padded[i+3]<<24;}var a=h0,b=h1,c=h2,d=h3,f=void 0,g=void 0;for(j=0;j<64;++j){if(j<16){f=b&c|~b&d;g=j;}else if(j<32){f=d&b|~d&c;g=5*j+1&15;}else if(j<48){f=b^c^d;g=3*j+5&15;}else{f=c^(b|~d);g=7*j&15;}var tmp=d,rotateArg=a+f+k[j]+w[g]|0,rotate=r[j];d=c;c=b;b=b+(rotateArg<<rotate|rotateArg>>>32-rotate)|0;a=tmp;}h0=h0+a|0;h1=h1+b|0;h2=h2+c|0;h3=h3+d|0;}return new Uint8Array([h0&0xFF,h0>>8&0xFF,h0>>16&0xFF,h0>>>24&0xFF,h1&0xFF,h1>>8&0xFF,h1>>16&0xFF,h1>>>24&0xFF,h2&0xFF,h2>>8&0xFF,h2>>16&0xFF,h2>>>24&0xFF,h3&0xFF,h3>>8&0xFF,h3>>16&0xFF,h3>>>24&0xFF]);}return hash;}();var Word64=/*#__PURE__*/function(){function Word64(highInteger,lowInteger){_classCallCheck(this,Word64);this.high=highInteger|0;this.low=lowInteger|0;}return _createClass(Word64,[{key:"and",value:function and(word){this.high&=word.high;this.low&=word.low;}},{key:"xor",value:function xor(word){this.high^=word.high;this.low^=word.low;}},{key:"or",value:function or(word){this.high|=word.high;this.low|=word.low;}},{key:"shiftRight",value:function shiftRight(places){if(places>=32){this.low=this.high>>>places-32|0;this.high=0;}else{this.low=this.low>>>places|this.high<<32-places;this.high=this.high>>>places|0;}}},{key:"shiftLeft",value:function shiftLeft(places){if(places>=32){this.high=this.low<<places-32;this.low=0;}else{this.high=this.high<<places|this.low>>>32-places;this.low<<=places;}}},{key:"rotateRight",value:function rotateRight(places){var low,high;if(places&32){high=this.low;low=this.high;}else{low=this.low;high=this.high;}places&=31;this.low=low>>>places|high<<32-places;this.high=high>>>places|low<<32-places;}},{key:"not",value:function not(){this.high=~this.high;this.low=~this.low;}},{key:"add",value:function add(word){var lowAdd=(this.low>>>0)+(word.low>>>0);var highAdd=(this.high>>>0)+(word.high>>>0);if(lowAdd>0xffffffff){highAdd+=1;}this.low=lowAdd|0;this.high=highAdd|0;}},{key:"copyTo",value:function copyTo(bytes,offset){bytes[offset]=this.high>>>24&0xff;bytes[offset+1]=this.high>>16&0xff;bytes[offset+2]=this.high>>8&0xff;bytes[offset+3]=this.high&0xff;bytes[offset+4]=this.low>>>24&0xff;bytes[offset+5]=this.low>>16&0xff;bytes[offset+6]=this.low>>8&0xff;bytes[offset+7]=this.low&0xff;}},{key:"assign",value:function assign(word){this.high=word.high;this.low=word.low;}}]);}();var calculateSHA256=function calculateSHA256Closure(){function rotr(x,n){return x>>>n|x<<32-n;}function ch(x,y,z){return x&y^~x&z;}function maj(x,y,z){return x&y^x&z^y&z;}function sigma(x){return rotr(x,2)^rotr(x,13)^rotr(x,22);}function sigmaPrime(x){return rotr(x,6)^rotr(x,11)^rotr(x,25);}function littleSigma(x){return rotr(x,7)^rotr(x,18)^x>>>3;}function littleSigmaPrime(x){return rotr(x,17)^rotr(x,19)^x>>>10;}var k=[0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0x0fc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x06ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2];function hash(data,offset,length){var h0=0x6a09e667,h1=0xbb67ae85,h2=0x3c6ef372,h3=0xa54ff53a,h4=0x510e527f,h5=0x9b05688c,h6=0x1f83d9ab,h7=0x5be0cd19;var paddedLength=Math.ceil((length+9)/64)*64;var padded=new Uint8Array(paddedLength);var i,j;for(i=0;i<length;++i){padded[i]=data[offset++];}padded[i++]=0x80;var n=paddedLength-8;while(i<n){padded[i++]=0;}padded[i++]=0;padded[i++]=0;padded[i++]=0;padded[i++]=length>>>29&0xff;padded[i++]=length>>21&0xff;padded[i++]=length>>13&0xff;padded[i++]=length>>5&0xff;padded[i++]=length<<3&0xff;var w=new Uint32Array(64);for(i=0;i<paddedLength;){for(j=0;j<16;++j){w[j]=padded[i]<<24|padded[i+1]<<16|padded[i+2]<<8|padded[i+3];i+=4;}for(j=16;j<64;++j){w[j]=littleSigmaPrime(w[j-2])+w[j-7]+littleSigma(w[j-15])+w[j-16]|0;}var a=h0,b=h1,c=h2,d=h3,e=h4,f=h5,g=h6,h=h7,t1=void 0,t2=void 0;for(j=0;j<64;++j){t1=h+sigmaPrime(e)+ch(e,f,g)+k[j]+w[j];t2=sigma(a)+maj(a,b,c);h=g;g=f;f=e;e=d+t1|0;d=c;c=b;b=a;a=t1+t2|0;}h0=h0+a|0;h1=h1+b|0;h2=h2+c|0;h3=h3+d|0;h4=h4+e|0;h5=h5+f|0;h6=h6+g|0;h7=h7+h|0;}return new Uint8Array([h0>>24&0xFF,h0>>16&0xFF,h0>>8&0xFF,h0&0xFF,h1>>24&0xFF,h1>>16&0xFF,h1>>8&0xFF,h1&0xFF,h2>>24&0xFF,h2>>16&0xFF,h2>>8&0xFF,h2&0xFF,h3>>24&0xFF,h3>>16&0xFF,h3>>8&0xFF,h3&0xFF,h4>>24&0xFF,h4>>16&0xFF,h4>>8&0xFF,h4&0xFF,h5>>24&0xFF,h5>>16&0xFF,h5>>8&0xFF,h5&0xFF,h6>>24&0xFF,h6>>16&0xFF,h6>>8&0xFF,h6&0xFF,h7>>24&0xFF,h7>>16&0xFF,h7>>8&0xFF,h7&0xFF]);}return hash;}();var calculateSHA512=function calculateSHA512Closure(){function ch(result,x,y,z,tmp){result.assign(x);result.and(y);tmp.assign(x);tmp.not();tmp.and(z);result.xor(tmp);}function maj(result,x,y,z,tmp){result.assign(x);result.and(y);tmp.assign(x);tmp.and(z);result.xor(tmp);tmp.assign(y);tmp.and(z);result.xor(tmp);}function sigma(result,x,tmp){result.assign(x);result.rotateRight(28);tmp.assign(x);tmp.rotateRight(34);result.xor(tmp);tmp.assign(x);tmp.rotateRight(39);result.xor(tmp);}function sigmaPrime(result,x,tmp){result.assign(x);result.rotateRight(14);tmp.assign(x);tmp.rotateRight(18);result.xor(tmp);tmp.assign(x);tmp.rotateRight(41);result.xor(tmp);}function littleSigma(result,x,tmp){result.assign(x);result.rotateRight(1);tmp.assign(x);tmp.rotateRight(8);result.xor(tmp);tmp.assign(x);tmp.shiftRight(7);result.xor(tmp);}function littleSigmaPrime(result,x,tmp){result.assign(x);result.rotateRight(19);tmp.assign(x);tmp.rotateRight(61);result.xor(tmp);tmp.assign(x);tmp.shiftRight(6);result.xor(tmp);}var k=[new Word64(0x428a2f98,0xd728ae22),new Word64(0x71374491,0x23ef65cd),new Word64(0xb5c0fbcf,0xec4d3b2f),new Word64(0xe9b5dba5,0x8189dbbc),new Word64(0x3956c25b,0xf348b538),new Word64(0x59f111f1,0xb605d019),new Word64(0x923f82a4,0xaf194f9b),new Word64(0xab1c5ed5,0xda6d8118),new Word64(0xd807aa98,0xa3030242),new Word64(0x12835b01,0x45706fbe),new Word64(0x243185be,0x4ee4b28c),new Word64(0x550c7dc3,0xd5ffb4e2),new Word64(0x72be5d74,0xf27b896f),new Word64(0x80deb1fe,0x3b1696b1),new Word64(0x9bdc06a7,0x25c71235),new Word64(0xc19bf174,0xcf692694),new Word64(0xe49b69c1,0x9ef14ad2),new Word64(0xefbe4786,0x384f25e3),new Word64(0x0fc19dc6,0x8b8cd5b5),new Word64(0x240ca1cc,0x77ac9c65),new Word64(0x2de92c6f,0x592b0275),new Word64(0x4a7484aa,0x6ea6e483),new Word64(0x5cb0a9dc,0xbd41fbd4),new Word64(0x76f988da,0x831153b5),new Word64(0x983e5152,0xee66dfab),new Word64(0xa831c66d,0x2db43210),new Word64(0xb00327c8,0x98fb213f),new Word64(0xbf597fc7,0xbeef0ee4),new Word64(0xc6e00bf3,0x3da88fc2),new Word64(0xd5a79147,0x930aa725),new Word64(0x06ca6351,0xe003826f),new Word64(0x14292967,0x0a0e6e70),new Word64(0x27b70a85,0x46d22ffc),new Word64(0x2e1b2138,0x5c26c926),new Word64(0x4d2c6dfc,0x5ac42aed),new Word64(0x53380d13,0x9d95b3df),new Word64(0x650a7354,0x8baf63de),new Word64(0x766a0abb,0x3c77b2a8),new Word64(0x81c2c92e,0x47edaee6),new Word64(0x92722c85,0x1482353b),new Word64(0xa2bfe8a1,0x4cf10364),new Word64(0xa81a664b,0xbc423001),new Word64(0xc24b8b70,0xd0f89791),new Word64(0xc76c51a3,0x0654be30),new Word64(0xd192e819,0xd6ef5218),new Word64(0xd6990624,0x5565a910),new Word64(0xf40e3585,0x5771202a),new Word64(0x106aa070,0x32bbd1b8),new Word64(0x19a4c116,0xb8d2d0c8),new Word64(0x1e376c08,0x5141ab53),new Word64(0x2748774c,0xdf8eeb99),new Word64(0x34b0bcb5,0xe19b48a8),new Word64(0x391c0cb3,0xc5c95a63),new Word64(0x4ed8aa4a,0xe3418acb),new Word64(0x5b9cca4f,0x7763e373),new Word64(0x682e6ff3,0xd6b2b8a3),new Word64(0x748f82ee,0x5defb2fc),new Word64(0x78a5636f,0x43172f60),new Word64(0x84c87814,0xa1f0ab72),new Word64(0x8cc70208,0x1a6439ec),new Word64(0x90befffa,0x23631e28),new Word64(0xa4506ceb,0xde82bde9),new Word64(0xbef9a3f7,0xb2c67915),new Word64(0xc67178f2,0xe372532b),new Word64(0xca273ece,0xea26619c),new Word64(0xd186b8c7,0x21c0c207),new Word64(0xeada7dd6,0xcde0eb1e),new Word64(0xf57d4f7f,0xee6ed178),new Word64(0x06f067aa,0x72176fba),new Word64(0x0a637dc5,0xa2c898a6),new Word64(0x113f9804,0xbef90dae),new Word64(0x1b710b35,0x131c471b),new Word64(0x28db77f5,0x23047d84),new Word64(0x32caab7b,0x40c72493),new Word64(0x3c9ebe0a,0x15c9bebc),new Word64(0x431d67c4,0x9c100d4c),new Word64(0x4cc5d4be,0xcb3e42b6),new Word64(0x597f299c,0xfc657e2a),new Word64(0x5fcb6fab,0x3ad6faec),new Word64(0x6c44198c,0x4a475817)];function hash(data,offset,length){var mode384=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var h0,h1,h2,h3,h4,h5,h6,h7;if(!mode384){h0=new Word64(0x6a09e667,0xf3bcc908);h1=new Word64(0xbb67ae85,0x84caa73b);h2=new Word64(0x3c6ef372,0xfe94f82b);h3=new Word64(0xa54ff53a,0x5f1d36f1);h4=new Word64(0x510e527f,0xade682d1);h5=new Word64(0x9b05688c,0x2b3e6c1f);h6=new Word64(0x1f83d9ab,0xfb41bd6b);h7=new Word64(0x5be0cd19,0x137e2179);}else{h0=new Word64(0xcbbb9d5d,0xc1059ed8);h1=new Word64(0x629a292a,0x367cd507);h2=new Word64(0x9159015a,0x3070dd17);h3=new Word64(0x152fecd8,0xf70e5939);h4=new Word64(0x67332667,0xffc00b31);h5=new Word64(0x8eb44a87,0x68581511);h6=new Word64(0xdb0c2e0d,0x64f98fa7);h7=new Word64(0x47b5481d,0xbefa4fa4);}var paddedLength=Math.ceil((length+17)/128)*128;var padded=new Uint8Array(paddedLength);var i,j;for(i=0;i<length;++i){padded[i]=data[offset++];}padded[i++]=0x80;var n=paddedLength-16;while(i<n){padded[i++]=0;}padded[i++]=0;padded[i++]=0;padded[i++]=0;padded[i++]=0;padded[i++]=0;padded[i++]=0;padded[i++]=0;padded[i++]=0;padded[i++]=0;padded[i++]=0;padded[i++]=0;padded[i++]=length>>>29&0xff;padded[i++]=length>>21&0xff;padded[i++]=length>>13&0xff;padded[i++]=length>>5&0xff;padded[i++]=length<<3&0xff;var w=new Array(80);for(i=0;i<80;i++){w[i]=new Word64(0,0);}var a=new Word64(0,0),b=new Word64(0,0),c=new Word64(0,0);var d=new Word64(0,0),e=new Word64(0,0),f=new Word64(0,0);var g=new Word64(0,0),h=new Word64(0,0);var t1=new Word64(0,0),t2=new Word64(0,0);var tmp1=new Word64(0,0),tmp2=new Word64(0,0);var tmp3;for(i=0;i<paddedLength;){for(j=0;j<16;++j){w[j].high=padded[i]<<24|padded[i+1]<<16|padded[i+2]<<8|padded[i+3];w[j].low=padded[i+4]<<24|padded[i+5]<<16|padded[i+6]<<8|padded[i+7];i+=8;}for(j=16;j<80;++j){tmp3=w[j];littleSigmaPrime(tmp3,w[j-2],tmp2);tmp3.add(w[j-7]);littleSigma(tmp1,w[j-15],tmp2);tmp3.add(tmp1);tmp3.add(w[j-16]);}a.assign(h0);b.assign(h1);c.assign(h2);d.assign(h3);e.assign(h4);f.assign(h5);g.assign(h6);h.assign(h7);for(j=0;j<80;++j){t1.assign(h);sigmaPrime(tmp1,e,tmp2);t1.add(tmp1);ch(tmp1,e,f,g,tmp2);t1.add(tmp1);t1.add(k[j]);t1.add(w[j]);sigma(t2,a,tmp2);maj(tmp1,a,b,c,tmp2);t2.add(tmp1);tmp3=h;h=g;g=f;f=e;d.add(t1);e=d;d=c;c=b;b=a;tmp3.assign(t1);tmp3.add(t2);a=tmp3;}h0.add(a);h1.add(b);h2.add(c);h3.add(d);h4.add(e);h5.add(f);h6.add(g);h7.add(h);}var result;if(!mode384){result=new Uint8Array(64);h0.copyTo(result,0);h1.copyTo(result,8);h2.copyTo(result,16);h3.copyTo(result,24);h4.copyTo(result,32);h5.copyTo(result,40);h6.copyTo(result,48);h7.copyTo(result,56);}else{result=new Uint8Array(48);h0.copyTo(result,0);h1.copyTo(result,8);h2.copyTo(result,16);h3.copyTo(result,24);h4.copyTo(result,32);h5.copyTo(result,40);}return result;}return hash;}();function calculateSHA384(data,offset,length){return calculateSHA512(data,offset,length,true);}var NullCipher=/*#__PURE__*/function(){function NullCipher(){_classCallCheck(this,NullCipher);}return _createClass(NullCipher,[{key:"decryptBlock",value:function decryptBlock(data){return data;}},{key:"encrypt",value:function encrypt(data){return data;}}]);}();var AESBaseCipher=/*#__PURE__*/function(){function AESBaseCipher(){_classCallCheck(this,AESBaseCipher);this._s=new Uint8Array([0x63,0x7c,0x77,0x7b,0xf2,0x6b,0x6f,0xc5,0x30,0x01,0x67,0x2b,0xfe,0xd7,0xab,0x76,0xca,0x82,0xc9,0x7d,0xfa,0x59,0x47,0xf0,0xad,0xd4,0xa2,0xaf,0x9c,0xa4,0x72,0xc0,0xb7,0xfd,0x93,0x26,0x36,0x3f,0xf7,0xcc,0x34,0xa5,0xe5,0xf1,0x71,0xd8,0x31,0x15,0x04,0xc7,0x23,0xc3,0x18,0x96,0x05,0x9a,0x07,0x12,0x80,0xe2,0xeb,0x27,0xb2,0x75,0x09,0x83,0x2c,0x1a,0x1b,0x6e,0x5a,0xa0,0x52,0x3b,0xd6,0xb3,0x29,0xe3,0x2f,0x84,0x53,0xd1,0x00,0xed,0x20,0xfc,0xb1,0x5b,0x6a,0xcb,0xbe,0x39,0x4a,0x4c,0x58,0xcf,0xd0,0xef,0xaa,0xfb,0x43,0x4d,0x33,0x85,0x45,0xf9,0x02,0x7f,0x50,0x3c,0x9f,0xa8,0x51,0xa3,0x40,0x8f,0x92,0x9d,0x38,0xf5,0xbc,0xb6,0xda,0x21,0x10,0xff,0xf3,0xd2,0xcd,0x0c,0x13,0xec,0x5f,0x97,0x44,0x17,0xc4,0xa7,0x7e,0x3d,0x64,0x5d,0x19,0x73,0x60,0x81,0x4f,0xdc,0x22,0x2a,0x90,0x88,0x46,0xee,0xb8,0x14,0xde,0x5e,0x0b,0xdb,0xe0,0x32,0x3a,0x0a,0x49,0x06,0x24,0x5c,0xc2,0xd3,0xac,0x62,0x91,0x95,0xe4,0x79,0xe7,0xc8,0x37,0x6d,0x8d,0xd5,0x4e,0xa9,0x6c,0x56,0xf4,0xea,0x65,0x7a,0xae,0x08,0xba,0x78,0x25,0x2e,0x1c,0xa6,0xb4,0xc6,0xe8,0xdd,0x74,0x1f,0x4b,0xbd,0x8b,0x8a,0x70,0x3e,0xb5,0x66,0x48,0x03,0xf6,0x0e,0x61,0x35,0x57,0xb9,0x86,0xc1,0x1d,0x9e,0xe1,0xf8,0x98,0x11,0x69,0xd9,0x8e,0x94,0x9b,0x1e,0x87,0xe9,0xce,0x55,0x28,0xdf,0x8c,0xa1,0x89,0x0d,0xbf,0xe6,0x42,0x68,0x41,0x99,0x2d,0x0f,0xb0,0x54,0xbb,0x16]);this._inv_s=new Uint8Array([0x52,0x09,0x6a,0xd5,0x30,0x36,0xa5,0x38,0xbf,0x40,0xa3,0x9e,0x81,0xf3,0xd7,0xfb,0x7c,0xe3,0x39,0x82,0x9b,0x2f,0xff,0x87,0x34,0x8e,0x43,0x44,0xc4,0xde,0xe9,0xcb,0x54,0x7b,0x94,0x32,0xa6,0xc2,0x23,0x3d,0xee,0x4c,0x95,0x0b,0x42,0xfa,0xc3,0x4e,0x08,0x2e,0xa1,0x66,0x28,0xd9,0x24,0xb2,0x76,0x5b,0xa2,0x49,0x6d,0x8b,0xd1,0x25,0x72,0xf8,0xf6,0x64,0x86,0x68,0x98,0x16,0xd4,0xa4,0x5c,0xcc,0x5d,0x65,0xb6,0x92,0x6c,0x70,0x48,0x50,0xfd,0xed,0xb9,0xda,0x5e,0x15,0x46,0x57,0xa7,0x8d,0x9d,0x84,0x90,0xd8,0xab,0x00,0x8c,0xbc,0xd3,0x0a,0xf7,0xe4,0x58,0x05,0xb8,0xb3,0x45,0x06,0xd0,0x2c,0x1e,0x8f,0xca,0x3f,0x0f,0x02,0xc1,0xaf,0xbd,0x03,0x01,0x13,0x8a,0x6b,0x3a,0x91,0x11,0x41,0x4f,0x67,0xdc,0xea,0x97,0xf2,0xcf,0xce,0xf0,0xb4,0xe6,0x73,0x96,0xac,0x74,0x22,0xe7,0xad,0x35,0x85,0xe2,0xf9,0x37,0xe8,0x1c,0x75,0xdf,0x6e,0x47,0xf1,0x1a,0x71,0x1d,0x29,0xc5,0x89,0x6f,0xb7,0x62,0x0e,0xaa,0x18,0xbe,0x1b,0xfc,0x56,0x3e,0x4b,0xc6,0xd2,0x79,0x20,0x9a,0xdb,0xc0,0xfe,0x78,0xcd,0x5a,0xf4,0x1f,0xdd,0xa8,0x33,0x88,0x07,0xc7,0x31,0xb1,0x12,0x10,0x59,0x27,0x80,0xec,0x5f,0x60,0x51,0x7f,0xa9,0x19,0xb5,0x4a,0x0d,0x2d,0xe5,0x7a,0x9f,0x93,0xc9,0x9c,0xef,0xa0,0xe0,0x3b,0x4d,0xae,0x2a,0xf5,0xb0,0xc8,0xeb,0xbb,0x3c,0x83,0x53,0x99,0x61,0x17,0x2b,0x04,0x7e,0xba,0x77,0xd6,0x26,0xe1,0x69,0x14,0x63,0x55,0x21,0x0c,0x7d]);this._mix=new Uint32Array([0x00000000,0x0e090d0b,0x1c121a16,0x121b171d,0x3824342c,0x362d3927,0x24362e3a,0x2a3f2331,0x70486858,0x7e416553,0x6c5a724e,0x62537f45,0x486c5c74,0x4665517f,0x547e4662,0x5a774b69,0xe090d0b0,0xee99ddbb,0xfc82caa6,0xf28bc7ad,0xd8b4e49c,0xd6bde997,0xc4a6fe8a,0xcaaff381,0x90d8b8e8,0x9ed1b5e3,0x8ccaa2fe,0x82c3aff5,0xa8fc8cc4,0xa6f581cf,0xb4ee96d2,0xbae79bd9,0xdb3bbb7b,0xd532b670,0xc729a16d,0xc920ac66,0xe31f8f57,0xed16825c,0xff0d9541,0xf104984a,0xab73d323,0xa57ade28,0xb761c935,0xb968c43e,0x9357e70f,0x9d5eea04,0x8f45fd19,0x814cf012,0x3bab6bcb,0x35a266c0,0x27b971dd,0x29b07cd6,0x038f5fe7,0x0d8652ec,0x1f9d45f1,0x119448fa,0x4be30393,0x45ea0e98,0x57f11985,0x59f8148e,0x73c737bf,0x7dce3ab4,0x6fd52da9,0x61dc20a2,0xad766df6,0xa37f60fd,0xb16477e0,0xbf6d7aeb,0x955259da,0x9b5b54d1,0x894043cc,0x87494ec7,0xdd3e05ae,0xd33708a5,0xc12c1fb8,0xcf2512b3,0xe51a3182,0xeb133c89,0xf9082b94,0xf701269f,0x4de6bd46,0x43efb04d,0x51f4a750,0x5ffdaa5b,0x75c2896a,0x7bcb8461,0x69d0937c,0x67d99e77,0x3daed51e,0x33a7d815,0x21bccf08,0x2fb5c203,0x058ae132,0x0b83ec39,0x1998fb24,0x1791f62f,0x764dd68d,0x7844db86,0x6a5fcc9b,0x6456c190,0x4e69e2a1,0x4060efaa,0x527bf8b7,0x5c72f5bc,0x0605bed5,0x080cb3de,0x1a17a4c3,0x141ea9c8,0x3e218af9,0x302887f2,0x223390ef,0x2c3a9de4,0x96dd063d,0x98d40b36,0x8acf1c2b,0x84c61120,0xaef93211,0xa0f03f1a,0xb2eb2807,0xbce2250c,0xe6956e65,0xe89c636e,0xfa877473,0xf48e7978,0xdeb15a49,0xd0b85742,0xc2a3405f,0xccaa4d54,0x41ecdaf7,0x4fe5d7fc,0x5dfec0e1,0x53f7cdea,0x79c8eedb,0x77c1e3d0,0x65daf4cd,0x6bd3f9c6,0x31a4b2af,0x3fadbfa4,0x2db6a8b9,0x23bfa5b2,0x09808683,0x07898b88,0x15929c95,0x1b9b919e,0xa17c0a47,0xaf75074c,0xbd6e1051,0xb3671d5a,0x99583e6b,0x97513360,0x854a247d,0x8b432976,0xd134621f,0xdf3d6f14,0xcd267809,0xc32f7502,0xe9105633,0xe7195b38,0xf5024c25,0xfb0b412e,0x9ad7618c,0x94de6c87,0x86c57b9a,0x88cc7691,0xa2f355a0,0xacfa58ab,0xbee14fb6,0xb0e842bd,0xea9f09d4,0xe49604df,0xf68d13c2,0xf8841ec9,0xd2bb3df8,0xdcb230f3,0xcea927ee,0xc0a02ae5,0x7a47b13c,0x744ebc37,0x6655ab2a,0x685ca621,0x42638510,0x4c6a881b,0x5e719f06,0x5078920d,0x0a0fd964,0x0406d46f,0x161dc372,0x1814ce79,0x322bed48,0x3c22e043,0x2e39f75e,0x2030fa55,0xec9ab701,0xe293ba0a,0xf088ad17,0xfe81a01c,0xd4be832d,0xdab78e26,0xc8ac993b,0xc6a59430,0x9cd2df59,0x92dbd252,0x80c0c54f,0x8ec9c844,0xa4f6eb75,0xaaffe67e,0xb8e4f163,0xb6edfc68,0x0c0a67b1,0x02036aba,0x10187da7,0x1e1170ac,0x342e539d,0x3a275e96,0x283c498b,0x26354480,0x7c420fe9,0x724b02e2,0x605015ff,0x6e5918f4,0x44663bc5,0x4a6f36ce,0x587421d3,0x567d2cd8,0x37a10c7a,0x39a80171,0x2bb3166c,0x25ba1b67,0x0f853856,0x018c355d,0x13972240,0x1d9e2f4b,0x47e96422,0x49e06929,0x5bfb7e34,0x55f2733f,0x7fcd500e,0x71c45d05,0x63df4a18,0x6dd64713,0xd731dcca,0xd938d1c1,0xcb23c6dc,0xc52acbd7,0xef15e8e6,0xe11ce5ed,0xf307f2f0,0xfd0efffb,0xa779b492,0xa970b999,0xbb6bae84,0xb562a38f,0x9f5d80be,0x91548db5,0x834f9aa8,0x8d4697a3]);this._mixCol=new Uint8Array(256);for(var i=0;i<256;i++){this._mixCol[i]=i<128?i<<1:i<<1^0x1b;}this.buffer=new Uint8Array(16);this.bufferPosition=0;}return _createClass(AESBaseCipher,[{key:"_expandKey",value:function _expandKey(cipherKey){unreachable("Cannot call `_expandKey` on the base class");}},{key:"_decrypt",value:function _decrypt(input,key){var t,u,v;var state=new Uint8Array(16);state.set(input);for(var j=0,k=this._keySize;j<16;++j,++k){state[j]^=key[k];}for(var i=this._cyclesOfRepetition-1;i>=1;--i){t=state[13];state[13]=state[9];state[9]=state[5];state[5]=state[1];state[1]=t;t=state[14];u=state[10];state[14]=state[6];state[10]=state[2];state[6]=t;state[2]=u;t=state[15];u=state[11];v=state[7];state[15]=state[3];state[11]=t;state[7]=u;state[3]=v;for(var _j9=0;_j9<16;++_j9){state[_j9]=this._inv_s[state[_j9]];}for(var _j10=0,_k2=i*16;_j10<16;++_j10,++_k2){state[_j10]^=key[_k2];}for(var _j11=0;_j11<16;_j11+=4){var s0=this._mix[state[_j11]];var s1=this._mix[state[_j11+1]];var s2=this._mix[state[_j11+2]];var s3=this._mix[state[_j11+3]];t=s0^s1>>>8^s1<<24^s2>>>16^s2<<16^s3>>>24^s3<<8;state[_j11]=t>>>24&0xff;state[_j11+1]=t>>16&0xff;state[_j11+2]=t>>8&0xff;state[_j11+3]=t&0xff;}}t=state[13];state[13]=state[9];state[9]=state[5];state[5]=state[1];state[1]=t;t=state[14];u=state[10];state[14]=state[6];state[10]=state[2];state[6]=t;state[2]=u;t=state[15];u=state[11];v=state[7];state[15]=state[3];state[11]=t;state[7]=u;state[3]=v;for(var _j12=0;_j12<16;++_j12){state[_j12]=this._inv_s[state[_j12]];state[_j12]^=key[_j12];}return state;}},{key:"_encrypt",value:function _encrypt(input,key){var s=this._s;var t,u,v;var state=new Uint8Array(16);state.set(input);for(var j=0;j<16;++j){state[j]^=key[j];}for(var i=1;i<this._cyclesOfRepetition;i++){for(var _j13=0;_j13<16;++_j13){state[_j13]=s[state[_j13]];}v=state[1];state[1]=state[5];state[5]=state[9];state[9]=state[13];state[13]=v;v=state[2];u=state[6];state[2]=state[10];state[6]=state[14];state[10]=v;state[14]=u;v=state[3];u=state[7];t=state[11];state[3]=state[15];state[7]=v;state[11]=u;state[15]=t;for(var _j14=0;_j14<16;_j14+=4){var s0=state[_j14+0];var s1=state[_j14+1];var s2=state[_j14+2];var s3=state[_j14+3];t=s0^s1^s2^s3;state[_j14+0]^=t^this._mixCol[s0^s1];state[_j14+1]^=t^this._mixCol[s1^s2];state[_j14+2]^=t^this._mixCol[s2^s3];state[_j14+3]^=t^this._mixCol[s3^s0];}for(var _j15=0,k=i*16;_j15<16;++_j15,++k){state[_j15]^=key[k];}}for(var _j16=0;_j16<16;++_j16){state[_j16]=s[state[_j16]];}v=state[1];state[1]=state[5];state[5]=state[9];state[9]=state[13];state[13]=v;v=state[2];u=state[6];state[2]=state[10];state[6]=state[14];state[10]=v;state[14]=u;v=state[3];u=state[7];t=state[11];state[3]=state[15];state[7]=v;state[11]=u;state[15]=t;for(var _j17=0,_k3=this._keySize;_j17<16;++_j17,++_k3){state[_j17]^=key[_k3];}return state;}},{key:"_decryptBlock2",value:function _decryptBlock2(data,finalize){var sourceLength=data.length;var buffer=this.buffer,bufferLength=this.bufferPosition;var result=[];var iv=this.iv;for(var i=0;i<sourceLength;++i){buffer[bufferLength]=data[i];++bufferLength;if(bufferLength<16){continue;}var plain=this._decrypt(buffer,this._key);for(var j=0;j<16;++j){plain[j]^=iv[j];}iv=buffer;result.push(plain);buffer=new Uint8Array(16);bufferLength=0;}this.buffer=buffer;this.bufferLength=bufferLength;this.iv=iv;if(result.length===0){return new Uint8Array(0);}var outputLength=16*result.length;if(finalize){var lastBlock=result.at(-1);var psLen=lastBlock[15];if(psLen<=16){for(var _i70=15,ii=16-psLen;_i70>=ii;--_i70){if(lastBlock[_i70]!==psLen){psLen=0;break;}}outputLength-=psLen;result[result.length-1]=lastBlock.subarray(0,16-psLen);}}var output=new Uint8Array(outputLength);for(var _i71=0,_j18=0,_ii18=result.length;_i71<_ii18;++_i71,_j18+=16){output.set(result[_i71],_j18);}return output;}},{key:"decryptBlock",value:function decryptBlock(data,finalize){var iv=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var sourceLength=data.length;var buffer=this.buffer;var bufferLength=this.bufferPosition;if(iv){this.iv=iv;}else{for(var i=0;bufferLength<16&&i<sourceLength;++i,++bufferLength){buffer[bufferLength]=data[i];}if(bufferLength<16){this.bufferLength=bufferLength;return new Uint8Array(0);}this.iv=buffer;data=data.subarray(16);}this.buffer=new Uint8Array(16);this.bufferLength=0;this.decryptBlock=this._decryptBlock2;return this.decryptBlock(data,finalize);}},{key:"encrypt",value:function encrypt(data,iv){var sourceLength=data.length;var buffer=this.buffer,bufferLength=this.bufferPosition;var result=[];if(!iv){iv=new Uint8Array(16);}for(var i=0;i<sourceLength;++i){buffer[bufferLength]=data[i];++bufferLength;if(bufferLength<16){continue;}for(var j=0;j<16;++j){buffer[j]^=iv[j];}var cipher=this._encrypt(buffer,this._key);iv=cipher;result.push(cipher);buffer=new Uint8Array(16);bufferLength=0;}this.buffer=buffer;this.bufferLength=bufferLength;this.iv=iv;if(result.length===0){return new Uint8Array(0);}var outputLength=16*result.length;var output=new Uint8Array(outputLength);for(var _i72=0,_j19=0,ii=result.length;_i72<ii;++_i72,_j19+=16){output.set(result[_i72],_j19);}return output;}}]);}();var AES128Cipher=/*#__PURE__*/function(_AESBaseCipher){function AES128Cipher(key){var _this291;_classCallCheck(this,AES128Cipher);_this291=_callSuper(this,AES128Cipher);_this291._cyclesOfRepetition=10;_this291._keySize=160;_this291._rcon=new Uint8Array([0x8d,0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80,0x1b,0x36,0x6c,0xd8,0xab,0x4d,0x9a,0x2f,0x5e,0xbc,0x63,0xc6,0x97,0x35,0x6a,0xd4,0xb3,0x7d,0xfa,0xef,0xc5,0x91,0x39,0x72,0xe4,0xd3,0xbd,0x61,0xc2,0x9f,0x25,0x4a,0x94,0x33,0x66,0xcc,0x83,0x1d,0x3a,0x74,0xe8,0xcb,0x8d,0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80,0x1b,0x36,0x6c,0xd8,0xab,0x4d,0x9a,0x2f,0x5e,0xbc,0x63,0xc6,0x97,0x35,0x6a,0xd4,0xb3,0x7d,0xfa,0xef,0xc5,0x91,0x39,0x72,0xe4,0xd3,0xbd,0x61,0xc2,0x9f,0x25,0x4a,0x94,0x33,0x66,0xcc,0x83,0x1d,0x3a,0x74,0xe8,0xcb,0x8d,0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80,0x1b,0x36,0x6c,0xd8,0xab,0x4d,0x9a,0x2f,0x5e,0xbc,0x63,0xc6,0x97,0x35,0x6a,0xd4,0xb3,0x7d,0xfa,0xef,0xc5,0x91,0x39,0x72,0xe4,0xd3,0xbd,0x61,0xc2,0x9f,0x25,0x4a,0x94,0x33,0x66,0xcc,0x83,0x1d,0x3a,0x74,0xe8,0xcb,0x8d,0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80,0x1b,0x36,0x6c,0xd8,0xab,0x4d,0x9a,0x2f,0x5e,0xbc,0x63,0xc6,0x97,0x35,0x6a,0xd4,0xb3,0x7d,0xfa,0xef,0xc5,0x91,0x39,0x72,0xe4,0xd3,0xbd,0x61,0xc2,0x9f,0x25,0x4a,0x94,0x33,0x66,0xcc,0x83,0x1d,0x3a,0x74,0xe8,0xcb,0x8d,0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80,0x1b,0x36,0x6c,0xd8,0xab,0x4d,0x9a,0x2f,0x5e,0xbc,0x63,0xc6,0x97,0x35,0x6a,0xd4,0xb3,0x7d,0xfa,0xef,0xc5,0x91,0x39,0x72,0xe4,0xd3,0xbd,0x61,0xc2,0x9f,0x25,0x4a,0x94,0x33,0x66,0xcc,0x83,0x1d,0x3a,0x74,0xe8,0xcb,0x8d]);_this291._key=_this291._expandKey(key);return _this291;}_inherits(AES128Cipher,_AESBaseCipher);return _createClass(AES128Cipher,[{key:"_expandKey",value:function _expandKey(cipherKey){var b=176;var s=this._s;var rcon=this._rcon;var result=new Uint8Array(b);result.set(cipherKey);for(var j=16,i=1;j<b;++i){var t1=result[j-3];var t2=result[j-2];var t3=result[j-1];var t4=result[j-4];t1=s[t1];t2=s[t2];t3=s[t3];t4=s[t4];t1^=rcon[i];for(var n=0;n<4;++n){result[j]=t1^=result[j-16];j++;result[j]=t2^=result[j-16];j++;result[j]=t3^=result[j-16];j++;result[j]=t4^=result[j-16];j++;}}return result;}}]);}(AESBaseCipher);var AES256Cipher=/*#__PURE__*/function(_AESBaseCipher2){function AES256Cipher(key){var _this292;_classCallCheck(this,AES256Cipher);_this292=_callSuper(this,AES256Cipher);_this292._cyclesOfRepetition=14;_this292._keySize=224;_this292._key=_this292._expandKey(key);return _this292;}_inherits(AES256Cipher,_AESBaseCipher2);return _createClass(AES256Cipher,[{key:"_expandKey",value:function _expandKey(cipherKey){var b=240;var s=this._s;var result=new Uint8Array(b);result.set(cipherKey);var r=1;var t1,t2,t3,t4;for(var j=32,i=1;j<b;++i){if(j%32===16){t1=s[t1];t2=s[t2];t3=s[t3];t4=s[t4];}else if(j%32===0){t1=result[j-3];t2=result[j-2];t3=result[j-1];t4=result[j-4];t1=s[t1];t2=s[t2];t3=s[t3];t4=s[t4];t1^=r;if((r<<=1)>=256){r=(r^0x1b)&0xff;}}for(var n=0;n<4;++n){result[j]=t1^=result[j-32];j++;result[j]=t2^=result[j-32];j++;result[j]=t3^=result[j-32];j++;result[j]=t4^=result[j-32];j++;}}return result;}}]);}(AESBaseCipher);var PDF17=/*#__PURE__*/function(){function PDF17(){_classCallCheck(this,PDF17);}return _createClass(PDF17,[{key:"checkOwnerPassword",value:function checkOwnerPassword(password,ownerValidationSalt,userBytes,ownerPassword){var hashData=new Uint8Array(password.length+56);hashData.set(password,0);hashData.set(ownerValidationSalt,password.length);hashData.set(userBytes,password.length+ownerValidationSalt.length);var result=calculateSHA256(hashData,0,hashData.length);return isArrayEqual(result,ownerPassword);}},{key:"checkUserPassword",value:function checkUserPassword(password,userValidationSalt,userPassword){var hashData=new Uint8Array(password.length+8);hashData.set(password,0);hashData.set(userValidationSalt,password.length);var result=calculateSHA256(hashData,0,hashData.length);return isArrayEqual(result,userPassword);}},{key:"getOwnerKey",value:function getOwnerKey(password,ownerKeySalt,userBytes,ownerEncryption){var hashData=new Uint8Array(password.length+56);hashData.set(password,0);hashData.set(ownerKeySalt,password.length);hashData.set(userBytes,password.length+ownerKeySalt.length);var key=calculateSHA256(hashData,0,hashData.length);var cipher=new AES256Cipher(key);return cipher.decryptBlock(ownerEncryption,false,new Uint8Array(16));}},{key:"getUserKey",value:function getUserKey(password,userKeySalt,userEncryption){var hashData=new Uint8Array(password.length+8);hashData.set(password,0);hashData.set(userKeySalt,password.length);var key=calculateSHA256(hashData,0,hashData.length);var cipher=new AES256Cipher(key);return cipher.decryptBlock(userEncryption,false,new Uint8Array(16));}}]);}();var PDF20=/*#__PURE__*/function(){function PDF20(){_classCallCheck(this,PDF20);}return _createClass(PDF20,[{key:"_hash",value:function _hash(password,input,userBytes){var k=calculateSHA256(input,0,input.length).subarray(0,32);var e=[0];var i=0;while(i<64||e.at(-1)>i-32){var combinedLength=password.length+k.length+userBytes.length,combinedArray=new Uint8Array(combinedLength);var writeOffset=0;combinedArray.set(password,writeOffset);writeOffset+=password.length;combinedArray.set(k,writeOffset);writeOffset+=k.length;combinedArray.set(userBytes,writeOffset);var k1=new Uint8Array(combinedLength*64);for(var j=0,pos=0;j<64;j++,pos+=combinedLength){k1.set(combinedArray,pos);}var cipher=new AES128Cipher(k.subarray(0,16));e=cipher.encrypt(k1,k.subarray(16,32));var remainder=e.slice(0,16).reduce(function(a,b){return a+b;},0)%3;if(remainder===0){k=calculateSHA256(e,0,e.length);}else if(remainder===1){k=calculateSHA384(e,0,e.length);}else if(remainder===2){k=calculateSHA512(e,0,e.length);}i++;}return k.subarray(0,32);}},{key:"checkOwnerPassword",value:function checkOwnerPassword(password,ownerValidationSalt,userBytes,ownerPassword){var hashData=new Uint8Array(password.length+56);hashData.set(password,0);hashData.set(ownerValidationSalt,password.length);hashData.set(userBytes,password.length+ownerValidationSalt.length);var result=this._hash(password,hashData,userBytes);return isArrayEqual(result,ownerPassword);}},{key:"checkUserPassword",value:function checkUserPassword(password,userValidationSalt,userPassword){var hashData=new Uint8Array(password.length+8);hashData.set(password,0);hashData.set(userValidationSalt,password.length);var result=this._hash(password,hashData,[]);return isArrayEqual(result,userPassword);}},{key:"getOwnerKey",value:function getOwnerKey(password,ownerKeySalt,userBytes,ownerEncryption){var hashData=new Uint8Array(password.length+56);hashData.set(password,0);hashData.set(ownerKeySalt,password.length);hashData.set(userBytes,password.length+ownerKeySalt.length);var key=this._hash(password,hashData,userBytes);var cipher=new AES256Cipher(key);return cipher.decryptBlock(ownerEncryption,false,new Uint8Array(16));}},{key:"getUserKey",value:function getUserKey(password,userKeySalt,userEncryption){var hashData=new Uint8Array(password.length+8);hashData.set(password,0);hashData.set(userKeySalt,password.length);var key=this._hash(password,hashData,[]);var cipher=new AES256Cipher(key);return cipher.decryptBlock(userEncryption,false,new Uint8Array(16));}}]);}();var CipherTransform=/*#__PURE__*/function(){function CipherTransform(stringCipherConstructor,streamCipherConstructor){_classCallCheck(this,CipherTransform);this.StringCipherConstructor=stringCipherConstructor;this.StreamCipherConstructor=streamCipherConstructor;}return _createClass(CipherTransform,[{key:"createStream",value:function createStream(stream,length){var cipher=new this.StreamCipherConstructor();return new DecryptStream(stream,length,function cipherTransformDecryptStream(data,finalize){return cipher.decryptBlock(data,finalize);});}},{key:"decryptString",value:function decryptString(s){var cipher=new this.StringCipherConstructor();var data=stringToBytes(s);data=cipher.decryptBlock(data,true);return bytesToString(data);}},{key:"encryptString",value:function encryptString(s){var cipher=new this.StringCipherConstructor();if(cipher instanceof AESBaseCipher){var strLen=s.length;var pad=16-strLen%16;s+=String.fromCharCode(pad).repeat(pad);var iv=new Uint8Array(16);crypto.getRandomValues(iv);var _data2=stringToBytes(s);_data2=cipher.encrypt(_data2,iv);var buf=new Uint8Array(16+_data2.length);buf.set(iv);buf.set(_data2,16);return bytesToString(buf);}var data=stringToBytes(s);data=cipher.encrypt(data);return bytesToString(data);}}]);}();var _CipherTransformFactory_brand=/*#__PURE__*/new WeakSet();var CipherTransformFactory=/*#__PURE__*/function(){function CipherTransformFactory(dict,_fileId,_password){_classCallCheck(this,CipherTransformFactory);_classPrivateMethodInitSpec(this,_CipherTransformFactory_brand);var filter=dict.get("Filter");if(!isName(filter,"Standard")){throw new FormatError("unknown encryption method");}this.filterName=filter.name;this.dict=dict;var algorithm=dict.get("V");if(!Number.isInteger(algorithm)||algorithm!==1&&algorithm!==2&&algorithm!==4&&algorithm!==5){throw new FormatError("unsupported encryption algorithm");}this.algorithm=algorithm;var _keyLength=dict.get("Length");if(!_keyLength){if(algorithm<=3){_keyLength=40;}else{var cfDict=dict.get("CF");var streamCryptoName=dict.get("StmF");if(cfDict instanceof Dict&&streamCryptoName instanceof Name){cfDict.suppressEncryption=true;var handlerDict=cfDict.get(streamCryptoName.name);_keyLength=(handlerDict===null||handlerDict===void 0?void 0:handlerDict.get("Length"))||128;if(_keyLength<40){_keyLength<<=3;}}}}if(!Number.isInteger(_keyLength)||_keyLength<40||_keyLength%8!==0){throw new FormatError("invalid key length");}var ownerBytes=stringToBytes(dict.get("O")),userBytes=stringToBytes(dict.get("U"));var _ownerPassword=ownerBytes.subarray(0,32);var _userPassword=userBytes.subarray(0,32);var _flags3=dict.get("P");var _revision=dict.get("R");var _encryptMetadata=(algorithm===4||algorithm===5)&&dict.get("EncryptMetadata")!==false;this.encryptMetadata=_encryptMetadata;var fileIdBytes=stringToBytes(_fileId);var passwordBytes;if(_password){if(_revision===6){try{_password=utf8StringToString(_password);}catch(_unused12){warn("CipherTransformFactory: Unable to convert UTF8 encoded password.");}}passwordBytes=stringToBytes(_password);}var _encryptionKey;if(algorithm!==5){_encryptionKey=_assertClassBrand(_CipherTransformFactory_brand,this,_prepareKeyData).call(this,fileIdBytes,passwordBytes,_ownerPassword,_userPassword,_flags3,_revision,_keyLength,_encryptMetadata);}else{var ownerValidationSalt=ownerBytes.subarray(32,40);var ownerKeySalt=ownerBytes.subarray(40,48);var uBytes=userBytes.subarray(0,48);var userValidationSalt=userBytes.subarray(32,40);var userKeySalt=userBytes.subarray(40,48);var ownerEncryption=stringToBytes(dict.get("OE"));var userEncryption=stringToBytes(dict.get("UE"));var perms=stringToBytes(dict.get("Perms"));_encryptionKey=_assertClassBrand(_CipherTransformFactory_brand,this,_createEncryptionKey).call(this,_revision,passwordBytes,_ownerPassword,ownerValidationSalt,ownerKeySalt,uBytes,_userPassword,userValidationSalt,userKeySalt,ownerEncryption,userEncryption,perms);}if(!_encryptionKey&&!_password){throw new PasswordException("No password given",PasswordResponses.NEED_PASSWORD);}else if(!_encryptionKey&&_password){var decodedPassword=_assertClassBrand(_CipherTransformFactory_brand,this,_decodeUserPassword).call(this,passwordBytes,_ownerPassword,_revision,_keyLength);_encryptionKey=_assertClassBrand(_CipherTransformFactory_brand,this,_prepareKeyData).call(this,fileIdBytes,decodedPassword,_ownerPassword,_userPassword,_flags3,_revision,_keyLength,_encryptMetadata);}if(!_encryptionKey){throw new PasswordException("Incorrect Password",PasswordResponses.INCORRECT_PASSWORD);}if(algorithm===4&&_encryptionKey.length<16){this.encryptionKey=new Uint8Array(16);this.encryptionKey.set(_encryptionKey);}else{this.encryptionKey=_encryptionKey;}if(algorithm>=4){var cf=dict.get("CF");if(cf instanceof Dict){cf.suppressEncryption=true;}this.cf=cf;this.stmf=dict.get("StmF")||Name.get("Identity");this.strf=dict.get("StrF")||Name.get("Identity");this.eff=dict.get("EFF")||this.stmf;}}return _createClass(CipherTransformFactory,[{key:"createCipherTransform",value:function createCipherTransform(num,gen){if(this.algorithm===4||this.algorithm===5){return new CipherTransform(_assertClassBrand(_CipherTransformFactory_brand,this,_buildCipherConstructor).call(this,this.cf,this.strf,num,gen,this.encryptionKey),_assertClassBrand(_CipherTransformFactory_brand,this,_buildCipherConstructor).call(this,this.cf,this.stmf,num,gen,this.encryptionKey));}var key=_assertClassBrand(_CipherTransformFactory_brand,this,_buildObjectKey).call(this,num,gen,this.encryptionKey,false);var cipherConstructor=function cipherConstructor(){return new ARCFourCipher(key);};return new CipherTransform(cipherConstructor,cipherConstructor);}}]);}();function _createEncryptionKey(revision,password,ownerPassword,ownerValidationSalt,ownerKeySalt,uBytes,userPassword,userValidationSalt,userKeySalt,ownerEncryption,userEncryption,perms){if(password){var passwordLength=Math.min(127,password.length);password=password.subarray(0,passwordLength);}else{password=[];}var pdfAlgorithm=revision===6?new PDF20():new PDF17();if(pdfAlgorithm.checkUserPassword(password,userValidationSalt,userPassword)){return pdfAlgorithm.getUserKey(password,userKeySalt,userEncryption);}else if(password.length&&pdfAlgorithm.checkOwnerPassword(password,ownerValidationSalt,uBytes,ownerPassword)){return pdfAlgorithm.getOwnerKey(password,ownerKeySalt,uBytes,ownerEncryption);}return null;}function _prepareKeyData(fileId,password,ownerPassword,userPassword,flags,revision,keyLength,encryptMetadata){var hashDataSize=40+ownerPassword.length+fileId.length;var hashData=new Uint8Array(hashDataSize);var i=0,j,n;if(password){n=Math.min(32,password.length);for(;i<n;++i){hashData[i]=password[i];}}j=0;while(i<32){hashData[i++]=_defaultPasswordBytes._[j++];}for(j=0,n=ownerPassword.length;j<n;++j){hashData[i++]=ownerPassword[j];}hashData[i++]=flags&0xff;hashData[i++]=flags>>8&0xff;hashData[i++]=flags>>16&0xff;hashData[i++]=flags>>>24&0xff;for(j=0,n=fileId.length;j<n;++j){hashData[i++]=fileId[j];}if(revision>=4&&!encryptMetadata){hashData[i++]=0xff;hashData[i++]=0xff;hashData[i++]=0xff;hashData[i++]=0xff;}var hash=calculateMD5(hashData,0,i);var keyLengthInBytes=keyLength>>3;if(revision>=3){for(j=0;j<50;++j){hash=calculateMD5(hash,0,keyLengthInBytes);}}var encryptionKey=hash.subarray(0,keyLengthInBytes);var cipher,checkData;if(revision>=3){for(i=0;i<32;++i){hashData[i]=_defaultPasswordBytes._[i];}for(j=0,n=fileId.length;j<n;++j){hashData[i++]=fileId[j];}cipher=new ARCFourCipher(encryptionKey);checkData=cipher.encryptBlock(calculateMD5(hashData,0,i));n=encryptionKey.length;var derivedKey=new Uint8Array(n);for(j=1;j<=19;++j){for(var k=0;k<n;++k){derivedKey[k]=encryptionKey[k]^j;}cipher=new ARCFourCipher(derivedKey);checkData=cipher.encryptBlock(checkData);}for(j=0,n=checkData.length;j<n;++j){if(userPassword[j]!==checkData[j]){return null;}}}else{cipher=new ARCFourCipher(encryptionKey);checkData=cipher.encryptBlock(_defaultPasswordBytes._);for(j=0,n=checkData.length;j<n;++j){if(userPassword[j]!==checkData[j]){return null;}}}return encryptionKey;}function _decodeUserPassword(password,ownerPassword,revision,keyLength){var hashData=new Uint8Array(32);var i=0;var n=Math.min(32,password.length);for(;i<n;++i){hashData[i]=password[i];}var j=0;while(i<32){hashData[i++]=_defaultPasswordBytes._[j++];}var hash=calculateMD5(hashData,0,i);var keyLengthInBytes=keyLength>>3;if(revision>=3){for(j=0;j<50;++j){hash=calculateMD5(hash,0,hash.length);}}var cipher,userPassword;if(revision>=3){userPassword=ownerPassword;var derivedKey=new Uint8Array(keyLengthInBytes);for(j=19;j>=0;j--){for(var k=0;k<keyLengthInBytes;++k){derivedKey[k]=hash[k]^j;}cipher=new ARCFourCipher(derivedKey);userPassword=cipher.encryptBlock(userPassword);}}else{cipher=new ARCFourCipher(hash.subarray(0,keyLengthInBytes));userPassword=cipher.encryptBlock(ownerPassword);}return userPassword;}function _buildObjectKey(num,gen,encryptionKey){var isAes=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var n=encryptionKey.length;var key=new Uint8Array(n+9);key.set(encryptionKey);var i=n;key[i++]=num&0xff;key[i++]=num>>8&0xff;key[i++]=num>>16&0xff;key[i++]=gen&0xff;key[i++]=gen>>8&0xff;if(isAes){key[i++]=0x73;key[i++]=0x41;key[i++]=0x6c;key[i++]=0x54;}var hash=calculateMD5(key,0,i);return hash.subarray(0,Math.min(n+5,16));}function _buildCipherConstructor(cf,name,num,gen,key){if(!(name instanceof Name)){throw new FormatError("Invalid crypt filter name.");}var self=this;var cryptFilter=cf.get(name.name);var cfm=cryptFilter===null||cryptFilter===void 0?void 0:cryptFilter.get("CFM");if(!cfm||cfm.name==="None"){return function(){return new NullCipher();};}if(cfm.name==="V2"){return function(){return new ARCFourCipher(_assertClassBrand(_CipherTransformFactory_brand,self,_buildObjectKey).call(self,num,gen,key,false));};}if(cfm.name==="AESV2"){return function(){return new AES128Cipher(_assertClassBrand(_CipherTransformFactory_brand,self,_buildObjectKey).call(self,num,gen,key,true));};}if(cfm.name==="AESV3"){return function(){return new AES256Cipher(key);};}throw new FormatError("Unknown crypto method");}var _defaultPasswordBytes={_:new Uint8Array([0x28,0xbf,0x4e,0x5e,0x4e,0x75,0x8a,0x41,0x64,0x00,0x4e,0x56,0xff,0xfa,0x01,0x08,0x2e,0x2e,0x00,0xb6,0xd0,0x68,0x3e,0x80,0x2f,0x0c,0xa9,0xfe,0x64,0x53,0x69,0x7a])};;// ./src/core/dataset_reader.js\nfunction decodeString(str){try{return stringToUTF8String(str);}catch(ex){warn("UTF-8 decoding failed: \\"".concat(ex,"\\"."));return str;}}var DatasetXMLParser=/*#__PURE__*/function(_SimpleXMLParser){function DatasetXMLParser(options){var _this293;_classCallCheck(this,DatasetXMLParser);_this293=_callSuper(this,DatasetXMLParser,[options]);_this293.node=null;return _this293;}_inherits(DatasetXMLParser,_SimpleXMLParser);return _createClass(DatasetXMLParser,[{key:"onEndElement",value:function onEndElement(name){var node=_superPropGet(DatasetXMLParser,"onEndElement",this,3)([name]);if(node&&name==="xfa:datasets"){this.node=node;throw new Error("Aborting DatasetXMLParser.");}}}]);}(SimpleXMLParser);var DatasetReader=/*#__PURE__*/function(){function DatasetReader(data){_classCallCheck(this,DatasetReader);if(data.datasets){this.node=new SimpleXMLParser({hasAttributes:true}).parseFromString(data.datasets).documentElement;}else{var parser=new DatasetXMLParser({hasAttributes:true});try{parser.parseFromString(data["xdp:xdp"]);}catch(_unused13){}this.node=parser.node;}}return _createClass(DatasetReader,[{key:"getValue",value:function getValue(path){if(!this.node||!path){return"";}var node=this.node.searchNode(parseXFAPath(path),0);if(!node){return"";}var first=node.firstChild;if((first===null||first===void 0?void 0:first.nodeName)==="value"){return node.children.map(function(child){return decodeString(child.textContent);});}return decodeString(node.textContent);}}]);}();;// ./src/core/xref.js\nvar _firstXRefStmPos=/*#__PURE__*/new WeakMap();var XRef=/*#__PURE__*/function(){function XRef(stream,pdfManager){_classCallCheck(this,XRef);_classPrivateFieldInitSpec(this,_firstXRefStmPos,null);this.stream=stream;this.pdfManager=pdfManager;this.entries=[];this._xrefStms=new Set();this._cacheMap=new Map();this._pendingRefs=new RefSet();this._newPersistentRefNum=null;this._newTemporaryRefNum=null;this._persistentRefsCache=null;}return _createClass(XRef,[{key:"getNewPersistentRef",value:function getNewPersistentRef(obj){if(this._newPersistentRefNum===null){this._newPersistentRefNum=this.entries.length||1;}var num=this._newPersistentRefNum++;this._cacheMap.set(num,obj);return Ref.get(num,0);}},{key:"getNewTemporaryRef",value:function getNewTemporaryRef(){if(this._newTemporaryRefNum===null){this._newTemporaryRefNum=this.entries.length||1;if(this._newPersistentRefNum){this._persistentRefsCache=new Map();for(var i=this._newTemporaryRefNum;i<this._newPersistentRefNum;i++){this._persistentRefsCache.set(i,this._cacheMap.get(i));this._cacheMap["delete"](i);}}}return Ref.get(this._newTemporaryRefNum++,0);}},{key:"resetNewTemporaryRef",value:function resetNewTemporaryRef(){this._newTemporaryRefNum=null;if(this._persistentRefsCache){var _iterator216=_createForOfIteratorHelper(this._persistentRefsCache),_step216;try{for(_iterator216.s();!(_step216=_iterator216.n()).done;){var _step216$value=_slicedToArray(_step216.value,2),num=_step216$value[0],obj=_step216$value[1];this._cacheMap.set(num,obj);}}catch(err){_iterator216.e(err);}finally{_iterator216.f();}}this._persistentRefsCache=null;}},{key:"setStartXRef",value:function setStartXRef(startXRef){this.startXRefQueue=[startXRef];}},{key:"parse",value:function parse(){var recoveryMode=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var trailerDict;if(!recoveryMode){trailerDict=this.readXRef();}else{warn("Indexing all PDF objects");trailerDict=this.indexObjects();}trailerDict.assignXref(this);this.trailer=trailerDict;var encrypt;try{encrypt=trailerDict.get("Encrypt");}catch(ex){if(ex instanceof MissingDataException){throw ex;}warn("XRef.parse - Invalid \\"Encrypt\\" reference: \\"".concat(ex,"\\"."));}if(encrypt instanceof Dict){var ids=trailerDict.get("ID");var fileId=ids!==null&&ids!==void 0&&ids.length?ids[0]:"";encrypt.suppressEncryption=true;this.encrypt=new CipherTransformFactory(encrypt,fileId,this.pdfManager.password);}var root;try{root=trailerDict.get("Root");}catch(ex){if(ex instanceof MissingDataException){throw ex;}warn("XRef.parse - Invalid \\"Root\\" reference: \\"".concat(ex,"\\"."));}if(root instanceof Dict){try{var pages=root.get("Pages");if(pages instanceof Dict){this.root=root;return;}}catch(ex){if(ex instanceof MissingDataException){throw ex;}warn("XRef.parse - Invalid \\"Pages\\" reference: \\"".concat(ex,"\\"."));}}if(!recoveryMode){throw new XRefParseException();}throw new InvalidPDFException("Invalid Root reference.");}},{key:"processXRefTable",value:function processXRefTable(parser){if(!("tableState"in this)){this.tableState={entryNum:0,streamPos:parser.lexer.stream.pos,parserBuf1:parser.buf1,parserBuf2:parser.buf2};}var obj=this.readXRefTable(parser);if(!isCmd(obj,"trailer")){throw new FormatError("Invalid XRef table: could not find trailer dictionary");}var dict=parser.getObj();if(!(dict instanceof Dict)&&dict.dict){dict=dict.dict;}if(!(dict instanceof Dict)){throw new FormatError("Invalid XRef table: could not parse trailer dictionary");}delete this.tableState;return dict;}},{key:"readXRefTable",value:function readXRefTable(parser){var stream=parser.lexer.stream;var tableState=this.tableState;stream.pos=tableState.streamPos;parser.buf1=tableState.parserBuf1;parser.buf2=tableState.parserBuf2;var obj;while(true){if(!("firstEntryNum"in tableState)||!("entryCount"in tableState)){if(isCmd(obj=parser.getObj(),"trailer")){break;}tableState.firstEntryNum=obj;tableState.entryCount=parser.getObj();}var first=tableState.firstEntryNum;var count=tableState.entryCount;if(!Number.isInteger(first)||!Number.isInteger(count)){throw new FormatError("Invalid XRef table: wrong types in subsection header");}for(var i=tableState.entryNum;i<count;i++){tableState.streamPos=stream.pos;tableState.entryNum=i;tableState.parserBuf1=parser.buf1;tableState.parserBuf2=parser.buf2;var entry={};entry.offset=parser.getObj();entry.gen=parser.getObj();var type=parser.getObj();if(type instanceof Cmd){switch(type.cmd){case"f":entry.free=true;break;case"n":entry.uncompressed=true;break;}}if(!Number.isInteger(entry.offset)||!Number.isInteger(entry.gen)||!(entry.free||entry.uncompressed)){throw new FormatError("Invalid entry in XRef subsection: ".concat(first,", ").concat(count));}if(i===0&&entry.free&&first===1){first=0;}if(!this.entries[i+first]){this.entries[i+first]=entry;}}tableState.entryNum=0;tableState.streamPos=stream.pos;tableState.parserBuf1=parser.buf1;tableState.parserBuf2=parser.buf2;delete tableState.firstEntryNum;delete tableState.entryCount;}if(this.entries[0]&&!this.entries[0].free){throw new FormatError("Invalid XRef table: unexpected first object");}return obj;}},{key:"processXRefStream",value:function processXRefStream(stream){if(!("streamState"in this)){var dict=stream.dict,pos=stream.pos;var byteWidths=dict.get("W");var range=dict.get("Index")||[0,dict.get("Size")];this.streamState={entryRanges:range,byteWidths:byteWidths,entryNum:0,streamPos:pos};}this.readXRefStream(stream);delete this.streamState;return stream.dict;}},{key:"readXRefStream",value:function readXRefStream(stream){var streamState=this.streamState;stream.pos=streamState.streamPos;var _streamState$byteWidt=_slicedToArray(streamState.byteWidths,3),typeFieldWidth=_streamState$byteWidt[0],offsetFieldWidth=_streamState$byteWidt[1],generationFieldWidth=_streamState$byteWidt[2];var entryRanges=streamState.entryRanges;while(entryRanges.length>0){var _entryRanges=_slicedToArray(entryRanges,2),first=_entryRanges[0],n=_entryRanges[1];if(!Number.isInteger(first)||!Number.isInteger(n)){throw new FormatError("Invalid XRef range fields: ".concat(first,", ").concat(n));}if(!Number.isInteger(typeFieldWidth)||!Number.isInteger(offsetFieldWidth)||!Number.isInteger(generationFieldWidth)){throw new FormatError("Invalid XRef entry fields length: ".concat(first,", ").concat(n));}for(var i=streamState.entryNum;i<n;++i){streamState.entryNum=i;streamState.streamPos=stream.pos;var type=0,offset=0,generation=0;for(var j=0;j<typeFieldWidth;++j){var typeByte=stream.getByte();if(typeByte===-1){throw new FormatError("Invalid XRef byteWidths \'type\'.");}type=type<<8|typeByte;}if(typeFieldWidth===0){type=1;}for(var _j20=0;_j20<offsetFieldWidth;++_j20){var offsetByte=stream.getByte();if(offsetByte===-1){throw new FormatError("Invalid XRef byteWidths \'offset\'.");}offset=offset<<8|offsetByte;}for(var _j21=0;_j21<generationFieldWidth;++_j21){var generationByte=stream.getByte();if(generationByte===-1){throw new FormatError("Invalid XRef byteWidths \'generation\'.");}generation=generation<<8|generationByte;}var entry={};entry.offset=offset;entry.gen=generation;switch(type){case 0:entry.free=true;break;case 1:entry.uncompressed=true;break;case 2:break;default:throw new FormatError("Invalid XRef entry type: ".concat(type));}if(!this.entries[first+i]){this.entries[first+i]=entry;}}streamState.entryNum=0;streamState.streamPos=stream.pos;entryRanges.splice(0,2);}}},{key:"indexObjects",value:function indexObjects(){var TAB=0x9,LF=0xa,CR=0xd,SPACE=0x20;var PERCENT=0x25,LT=0x3c;function readToken(data,offset){var token="",ch=data[offset];while(ch!==LF&&ch!==CR&&ch!==LT){if(++offset>=data.length){break;}token+=String.fromCharCode(ch);ch=data[offset];}return token;}function skipUntil(data,offset,what){var length=what.length,dataLength=data.length;var skipped=0;while(offset<dataLength){var i=0;while(i<length&&data[offset+i]===what[i]){++i;}if(i>=length){break;}offset++;skipped++;}return skipped;}var gEndobjRegExp=/\\b(endobj|\\d+\\s+\\d+\\s+obj|xref|trailer\\s*<<)\\b/g;var gStartxrefRegExp=/\\b(startxref|\\d+\\s+\\d+\\s+obj)\\b/g;var objRegExp=/^(\\d+)\\s+(\\d+)\\s+obj\\b/;var trailerBytes=new Uint8Array([116,114,97,105,108,101,114]);var startxrefBytes=new Uint8Array([115,116,97,114,116,120,114,101,102]);var xrefBytes=new Uint8Array([47,88,82,101,102]);this.entries.length=0;this._cacheMap.clear();var stream=this.stream;stream.pos=0;var buffer=stream.getBytes(),bufferStr=bytesToString(buffer),length=buffer.length;var position=stream.start;var trailers=[],xrefStms=[];while(position<length){var ch=buffer[position];if(ch===TAB||ch===LF||ch===CR||ch===SPACE){++position;continue;}if(ch===PERCENT){do{++position;if(position>=length){break;}ch=buffer[position];}while(ch!==LF&&ch!==CR);continue;}var token=readToken(buffer,position);var m=void 0;if(token.startsWith("xref")&&(token.length===4||/\\s/.test(token[4]))){position+=skipUntil(buffer,position,trailerBytes);trailers.push(position);position+=skipUntil(buffer,position,startxrefBytes);}else if(m=objRegExp.exec(token)){var num=m[1]|0,gen=m[2]|0;var startPos=position+token.length;var contentLength=void 0,updateEntries=false;if(!this.entries[num]){updateEntries=true;}else if(this.entries[num].gen===gen){try{var parser=new Parser({lexer:new Lexer(stream.makeSubStream(startPos))});parser.getObj();updateEntries=true;}catch(ex){if(ex instanceof ParserEOFException){warn("indexObjects -- checking object (".concat(token,"): \\"").concat(ex,"\\"."));}else{updateEntries=true;}}}if(updateEntries){this.entries[num]={offset:position-stream.start,gen:gen,uncompressed:true};}gEndobjRegExp.lastIndex=startPos;var match=gEndobjRegExp.exec(bufferStr);if(match){var endPos=gEndobjRegExp.lastIndex+1;contentLength=endPos-position;if(match[1]!=="endobj"){warn("indexObjects: Found \\"".concat(match[1],"\\" inside of another \\"obj\\", ")+\'caused by missing "endobj" -- trying to recover.\');contentLength-=match[1].length+1;}}else{contentLength=length-position;}var content=buffer.subarray(position,position+contentLength);var xrefTagOffset=skipUntil(content,0,xrefBytes);if(xrefTagOffset<contentLength&&content[xrefTagOffset+5]<64){xrefStms.push(position-stream.start);this._xrefStms.add(position-stream.start);}position+=contentLength;}else if(token.startsWith("trailer")&&(token.length===7||/\\s/.test(token[7]))){trailers.push(position);var _startPos=position+token.length;var _contentLength=void 0;gStartxrefRegExp.lastIndex=_startPos;var _match7=gStartxrefRegExp.exec(bufferStr);if(_match7){var _endPos=gStartxrefRegExp.lastIndex+1;_contentLength=_endPos-position;if(_match7[1]!=="startxref"){warn("indexObjects: Found \\"".concat(_match7[1],"\\" after \\"trailer\\", ")+\'caused by missing "startxref" -- trying to recover.\');_contentLength-=_match7[1].length+1;}}else{_contentLength=length-position;}position+=_contentLength;}else{position+=token.length+1;}}for(var _i73=0,_xrefStms=xrefStms;_i73<_xrefStms.length;_i73++){var xrefStm=_xrefStms[_i73];this.startXRefQueue.push(xrefStm);this.readXRef(true);}var trailerDicts=[];var isEncrypted=false;for(var _i74=0,_trailers=trailers;_i74<_trailers.length;_i74++){var trailer=_trailers[_i74];stream.pos=trailer;var _parser=new Parser({lexer:new Lexer(stream),xref:this,allowStreams:true,recoveryMode:true});var obj=_parser.getObj();if(!isCmd(obj,"trailer")){continue;}var dict=_parser.getObj();if(!(dict instanceof Dict)){continue;}trailerDicts.push(dict);if(dict.has("Encrypt")){isEncrypted=true;}}var trailerDict,trailerError;for(var _i75=0,_arr6=[].concat(trailerDicts,["genFallback"],trailerDicts);_i75<_arr6.length;_i75++){var _dict2=_arr6[_i75];if(_dict2==="genFallback"){if(!trailerError){break;}this._generationFallback=true;continue;}var validPagesDict=false;try{var rootDict=_dict2.get("Root");if(!(rootDict instanceof Dict)){continue;}var pagesDict=rootDict.get("Pages");if(!(pagesDict instanceof Dict)){continue;}var pagesCount=pagesDict.get("Count");if(Number.isInteger(pagesCount)){validPagesDict=true;}}catch(ex){trailerError=ex;continue;}if(validPagesDict&&(!isEncrypted||_dict2.has("Encrypt"))&&_dict2.has("ID")){return _dict2;}trailerDict=_dict2;}if(trailerDict){return trailerDict;}if(this.topDict){return this.topDict;}if(!trailerDicts.length){var _iterator217=_createForOfIteratorHelper(this.entries.entries()),_step217;try{for(_iterator217.s();!(_step217=_iterator217.n()).done;){var _step217$value=_slicedToArray(_step217.value,2),_num=_step217$value[0],entry=_step217$value[1];if(!entry){continue;}var ref=Ref.get(_num,entry.gen);var _obj=void 0;try{_obj=this.fetch(ref);}catch(_unused14){continue;}if(_obj instanceof BaseStream){_obj=_obj.dict;}if(_obj instanceof Dict&&_obj.has("Root")){return _obj;}}}catch(err){_iterator217.e(err);}finally{_iterator217.f();}}throw new InvalidPDFException("Invalid PDF structure.");}},{key:"readXRef",value:function readXRef(){var recoveryMode=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var stream=this.stream;var startXRefParsedCache=new Set();while(this.startXRefQueue.length){try{var startXRef=this.startXRefQueue[0];if(startXRefParsedCache.has(startXRef)){warn("readXRef - skipping XRef table since it was already parsed.");this.startXRefQueue.shift();continue;}startXRefParsedCache.add(startXRef);stream.pos=startXRef+stream.start;var parser=new Parser({lexer:new Lexer(stream),xref:this,allowStreams:true});var obj=parser.getObj();var dict=void 0;if(isCmd(obj,"xref")){dict=this.processXRefTable(parser);if(!this.topDict){this.topDict=dict;}obj=dict.get("XRefStm");if(Number.isInteger(obj)&&!this._xrefStms.has(obj)){var _classPrivateFieldGet2;this._xrefStms.add(obj);this.startXRefQueue.push(obj);(_classPrivateFieldGet2=_classPrivateFieldGet(_firstXRefStmPos,this))!==null&&_classPrivateFieldGet2!==void 0?_classPrivateFieldGet2:_classPrivateFieldSet(_firstXRefStmPos,this,obj);}}else if(Number.isInteger(obj)){if(!Number.isInteger(parser.getObj())||!isCmd(parser.getObj(),"obj")||!((obj=parser.getObj())instanceof BaseStream)){throw new FormatError("Invalid XRef stream");}dict=this.processXRefStream(obj);if(!this.topDict){this.topDict=dict;}if(!dict){throw new FormatError("Failed to read XRef stream");}}else{throw new FormatError("Invalid XRef stream header");}obj=dict.get("Prev");if(Number.isInteger(obj)){this.startXRefQueue.push(obj);}else if(obj instanceof Ref){this.startXRefQueue.push(obj.num);}}catch(e){if(e instanceof MissingDataException){throw e;}info("(while reading XRef): "+e);}this.startXRefQueue.shift();}if(this.topDict){return this.topDict;}if(recoveryMode){return undefined;}throw new XRefParseException();}},{key:"lastXRefStreamPos",get:function get(){var _classPrivateFieldGet3;return(_classPrivateFieldGet3=_classPrivateFieldGet(_firstXRefStmPos,this))!==null&&_classPrivateFieldGet3!==void 0?_classPrivateFieldGet3:this._xrefStms.size>0?Math.max.apply(Math,_toConsumableArray(this._xrefStms)):null;}},{key:"getEntry",value:function getEntry(i){var xrefEntry=this.entries[i];if(xrefEntry&&!xrefEntry.free&&xrefEntry.offset){return xrefEntry;}return null;}},{key:"fetchIfRef",value:function fetchIfRef(obj){var suppressEncryption=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(obj instanceof Ref){return this.fetch(obj,suppressEncryption);}return obj;}},{key:"fetch",value:function fetch(ref){var suppressEncryption=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!(ref instanceof Ref)){throw new Error("ref object is not a reference");}var num=ref.num;var cacheEntry=this._cacheMap.get(num);if(cacheEntry!==undefined){if(cacheEntry instanceof Dict&&!cacheEntry.objId){cacheEntry.objId=ref.toString();}return cacheEntry;}var xrefEntry=this.getEntry(num);if(xrefEntry===null){return xrefEntry;}if(this._pendingRefs.has(ref)){this._pendingRefs.remove(ref);warn("Ignoring circular reference: ".concat(ref,"."));return CIRCULAR_REF;}this._pendingRefs.put(ref);try{xrefEntry=xrefEntry.uncompressed?this.fetchUncompressed(ref,xrefEntry,suppressEncryption):this.fetchCompressed(ref,xrefEntry,suppressEncryption);this._pendingRefs.remove(ref);}catch(ex){this._pendingRefs.remove(ref);throw ex;}if(xrefEntry instanceof Dict){xrefEntry.objId=ref.toString();}else if(xrefEntry instanceof BaseStream){xrefEntry.dict.objId=ref.toString();}return xrefEntry;}},{key:"fetchUncompressed",value:function fetchUncompressed(ref,xrefEntry){var suppressEncryption=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var gen=ref.gen;var num=ref.num;if(xrefEntry.gen!==gen){var msg="Inconsistent generation in XRef: ".concat(ref);if(this._generationFallback&&xrefEntry.gen<gen){warn(msg);return this.fetchUncompressed(Ref.get(num,xrefEntry.gen),xrefEntry,suppressEncryption);}throw new XRefEntryException(msg);}var stream=this.stream.makeSubStream(xrefEntry.offset+this.stream.start);var parser=new Parser({lexer:new Lexer(stream),xref:this,allowStreams:true});var obj1=parser.getObj();var obj2=parser.getObj();var obj3=parser.getObj();if(obj1!==num||obj2!==gen||!(obj3 instanceof Cmd)){throw new XRefEntryException("Bad (uncompressed) XRef entry: ".concat(ref));}if(obj3.cmd!=="obj"){if(obj3.cmd.startsWith("obj")){num=parseInt(obj3.cmd.substring(3),10);if(!Number.isNaN(num)){return num;}}throw new XRefEntryException("Bad (uncompressed) XRef entry: ".concat(ref));}xrefEntry=this.encrypt&&!suppressEncryption?parser.getObj(this.encrypt.createCipherTransform(num,gen)):parser.getObj();if(!(xrefEntry instanceof BaseStream)){this._cacheMap.set(num,xrefEntry);}return xrefEntry;}},{key:"fetchCompressed",value:function fetchCompressed(ref,xrefEntry){var suppressEncryption=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var tableOffset=xrefEntry.offset;var stream=this.fetch(Ref.get(tableOffset,0));if(!(stream instanceof BaseStream)){throw new FormatError("bad ObjStm stream");}var first=stream.dict.get("First");var n=stream.dict.get("N");if(!Number.isInteger(first)||!Number.isInteger(n)){throw new FormatError("invalid first and n parameters for ObjStm stream");}var parser=new Parser({lexer:new Lexer(stream),xref:this,allowStreams:true});var nums=new Array(n);var offsets=new Array(n);for(var i=0;i<n;++i){var num=parser.getObj();if(!Number.isInteger(num)){throw new FormatError("invalid object number in the ObjStm stream: ".concat(num));}var offset=parser.getObj();if(!Number.isInteger(offset)){throw new FormatError("invalid object offset in the ObjStm stream: ".concat(offset));}nums[i]=num;offsets[i]=offset;}var start=(stream.start||0)+first;var entries=new Array(n);for(var _i76=0;_i76<n;++_i76){var length=_i76<n-1?offsets[_i76+1]-offsets[_i76]:undefined;if(length<0){throw new FormatError("Invalid offset in the ObjStm stream.");}parser=new Parser({lexer:new Lexer(stream.makeSubStream(start+offsets[_i76],length,stream.dict)),xref:this,allowStreams:true});var obj=parser.getObj();entries[_i76]=obj;if(obj instanceof BaseStream){continue;}var _num2=nums[_i76],entry=this.entries[_num2];if(entry&&entry.offset===tableOffset&&entry.gen===_i76){this._cacheMap.set(_num2,obj);}}xrefEntry=entries[xrefEntry.gen];if(xrefEntry===undefined){throw new XRefEntryException("Bad (compressed) XRef entry: ".concat(ref));}return xrefEntry;}},{key:"fetchIfRefAsync",value:function(){var _fetchIfRefAsync=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee81(obj,suppressEncryption){return _regeneratorRuntime().wrap(function _callee81$(_context97){while(1)switch(_context97.prev=_context97.next){case 0:if(!(obj instanceof Ref)){_context97.next=2;break;}return _context97.abrupt("return",this.fetchAsync(obj,suppressEncryption));case 2:return _context97.abrupt("return",obj);case 3:case"end":return _context97.stop();}},_callee81,this);}));function fetchIfRefAsync(_x176,_x177){return _fetchIfRefAsync.apply(this,arguments);}return fetchIfRefAsync;}()},{key:"fetchAsync",value:function(){var _fetchAsync=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee82(ref,suppressEncryption){return _regeneratorRuntime().wrap(function _callee82$(_context98){while(1)switch(_context98.prev=_context98.next){case 0:_context98.prev=0;return _context98.abrupt("return",this.fetch(ref,suppressEncryption));case 4:_context98.prev=4;_context98.t0=_context98["catch"](0);if(_context98.t0 instanceof MissingDataException){_context98.next=8;break;}throw _context98.t0;case 8:_context98.next=10;return this.pdfManager.requestRange(_context98.t0.begin,_context98.t0.end);case 10:return _context98.abrupt("return",this.fetchAsync(ref,suppressEncryption));case 11:case"end":return _context98.stop();}},_callee82,this,[[0,4]]);}));function fetchAsync(_x178,_x179){return _fetchAsync.apply(this,arguments);}return fetchAsync;}()},{key:"getCatalogObj",value:function getCatalogObj(){return this.root;}}]);}();;// ./src/core/document.js\nvar LETTER_SIZE_MEDIABOX=[0,0,612,792];var _Page_brand=/*#__PURE__*/new WeakSet();var Page=/*#__PURE__*/function(){function Page(_ref110){var pdfManager=_ref110.pdfManager,xref=_ref110.xref,pageIndex=_ref110.pageIndex,pageDict=_ref110.pageDict,_ref109=_ref110.ref,globalIdFactory=_ref110.globalIdFactory,fontCache=_ref110.fontCache,builtInCMapCache=_ref110.builtInCMapCache,standardFontDataCache=_ref110.standardFontDataCache,globalImageCache=_ref110.globalImageCache,systemFontCache=_ref110.systemFontCache,nonBlendModesSet=_ref110.nonBlendModesSet,xfaFactory=_ref110.xfaFactory;_classCallCheck(this,Page);_classPrivateMethodInitSpec(this,_Page_brand);this.pdfManager=pdfManager;this.pageIndex=pageIndex;this.pageDict=pageDict;this.xref=xref;this.ref=_ref109;this.fontCache=fontCache;this.builtInCMapCache=builtInCMapCache;this.standardFontDataCache=standardFontDataCache;this.globalImageCache=globalImageCache;this.systemFontCache=systemFontCache;this.nonBlendModesSet=nonBlendModesSet;this.evaluatorOptions=pdfManager.evaluatorOptions;this.resourcesPromise=null;this.xfaFactory=xfaFactory;var idCounters={obj:0};this._localIdFactory=/*#__PURE__*/function(_globalIdFactory){function _class(){_classCallCheck(this,_class);return _callSuper(this,_class,arguments);}_inherits(_class,_globalIdFactory);return _createClass(_class,null,[{key:"createObjId",value:function createObjId(){return"p".concat(pageIndex,"_").concat(++idCounters.obj);}},{key:"getPageObjId",value:function getPageObjId(){return"p".concat(_ref109.toString());}}]);}(globalIdFactory);}return _createClass(Page,[{key:"_getInheritableProperty",value:function _getInheritableProperty(key){var getArray=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var value=getInheritableProperty({dict:this.pageDict,key:key,getArray:getArray,stopWhenFound:false});if(!Array.isArray(value)){return value;}if(value.length===1||!(value[0]instanceof Dict)){return value[0];}return Dict.merge({xref:this.xref,dictArray:value});}},{key:"content",get:function get(){return this.pageDict.getArray("Contents");}},{key:"resources",get:function get(){var resources=this._getInheritableProperty("Resources");return shadow(this,"resources",resources instanceof Dict?resources:Dict.empty);}},{key:"_getBoundingBox",value:function _getBoundingBox(name){if(this.xfaData){return this.xfaData.bbox;}var box=lookupNormalRect(this._getInheritableProperty(name,true),null);if(box){if(box[2]-box[0]>0&&box[3]-box[1]>0){return box;}warn("Empty, or invalid, /".concat(name," entry."));}return null;}},{key:"mediaBox",get:function get(){return shadow(this,"mediaBox",this._getBoundingBox("MediaBox")||LETTER_SIZE_MEDIABOX);}},{key:"cropBox",get:function get(){return shadow(this,"cropBox",this._getBoundingBox("CropBox")||this.mediaBox);}},{key:"userUnit",get:function get(){var obj=this.pageDict.get("UserUnit");return shadow(this,"userUnit",typeof obj==="number"&&obj>0?obj:1.0);}},{key:"view",get:function get(){var cropBox=this.cropBox,mediaBox=this.mediaBox;if(cropBox!==mediaBox&&!isArrayEqual(cropBox,mediaBox)){var box=Util.intersect(cropBox,mediaBox);if(box&&box[2]-box[0]>0&&box[3]-box[1]>0){return shadow(this,"view",box);}warn("Empty /CropBox and /MediaBox intersection.");}return shadow(this,"view",mediaBox);}},{key:"rotate",get:function get(){var rotate=this._getInheritableProperty("Rotate")||0;if(rotate%90!==0){rotate=0;}else if(rotate>=360){rotate%=360;}else if(rotate<0){rotate=(rotate%360+360)%360;}return shadow(this,"rotate",rotate);}},{key:"_onSubStreamError",value:function _onSubStreamError(reason,objId){if(this.evaluatorOptions.ignoreErrors){warn("getContentStream - ignoring sub-stream (".concat(objId,"): \\"").concat(reason,"\\"."));return;}throw reason;}},{key:"getContentStream",value:function getContentStream(){var _this294=this;return this.pdfManager.ensure(this,"content").then(function(content){if(content instanceof BaseStream){return content;}if(Array.isArray(content)){return new StreamsSequenceStream(content,_this294._onSubStreamError.bind(_this294));}return new NullStream();});}},{key:"xfaData",get:function get(){return shadow(this,"xfaData",this.xfaFactory?{bbox:this.xfaFactory.getBoundingBox(this.pageIndex)}:null);}},{key:"saveNewAnnotations",value:function(){var _saveNewAnnotations2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee83(handler,task,annotations,imagePromises,changes){var partialEvaluator,deletedAnnotations,existingAnnotations,pageDict,annotationsArray,newData,_iterator218,_step218,ref,dict,_iterator219,_step219,deletedRef;return _regeneratorRuntime().wrap(function _callee83$(_context99){while(1)switch(_context99.prev=_context99.next){case 0:if(!this.xfaFactory){_context99.next=2;break;}throw new Error("XFA: Cannot save new annotations.");case 2:partialEvaluator=new PartialEvaluator({xref:this.xref,handler:handler,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,systemFontCache:this.systemFontCache,options:this.evaluatorOptions});deletedAnnotations=new RefSetCache();existingAnnotations=new RefSet();_context99.next=7;return _assertClassBrand(_Page_brand,this,_replaceIdByRef).call(this,annotations,deletedAnnotations,existingAnnotations);case 7:pageDict=this.pageDict;annotationsArray=this.annotations.filter(function(a){return!(a instanceof Ref&&deletedAnnotations.has(a));});_context99.next=11;return AnnotationFactory.saveNewAnnotations(partialEvaluator,task,annotations,imagePromises,changes);case 11:newData=_context99.sent;_iterator218=_createForOfIteratorHelper(newData.annotations);try{for(_iterator218.s();!(_step218=_iterator218.n()).done;){ref=_step218.value.ref;if(ref instanceof Ref&&!existingAnnotations.has(ref)){annotationsArray.push(ref);}}}catch(err){_iterator218.e(err);}finally{_iterator218.f();}dict=pageDict.clone();dict.set("Annots",annotationsArray);changes.put(this.ref,{data:dict});_iterator219=_createForOfIteratorHelper(deletedAnnotations);try{for(_iterator219.s();!(_step219=_iterator219.n()).done;){deletedRef=_step219.value;changes.put(deletedRef,{data:null});}}catch(err){_iterator219.e(err);}finally{_iterator219.f();}case 19:case"end":return _context99.stop();}},_callee83,this);}));function saveNewAnnotations(_x180,_x181,_x182,_x183,_x184){return _saveNewAnnotations2.apply(this,arguments);}return saveNewAnnotations;}()},{key:"save",value:function save(handler,task,annotationStorage,changes){var partialEvaluator=new PartialEvaluator({xref:this.xref,handler:handler,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,systemFontCache:this.systemFontCache,options:this.evaluatorOptions});return this._parsedAnnotations.then(function(annotations){var promises=[];var _iterator220=_createForOfIteratorHelper(annotations),_step220;try{for(_iterator220.s();!(_step220=_iterator220.n()).done;){var annotation=_step220.value;promises.push(annotation.save(partialEvaluator,task,annotationStorage,changes)["catch"](function(reason){warn("save - ignoring annotation data during "+"\\"".concat(task.name,"\\" task: \\"").concat(reason,"\\"."));return null;}));}}catch(err){_iterator220.e(err);}finally{_iterator220.f();}return Promise.all(promises);});}},{key:"loadResources",value:function loadResources(keys){var _this295=this;this.resourcesPromise||(this.resourcesPromise=this.pdfManager.ensure(this,"resources"));return this.resourcesPromise.then(function(){var objectLoader=new ObjectLoader(_this295.resources,keys,_this295.xref);return objectLoader.load();});}},{key:"getOperatorList",value:function getOperatorList(_ref111){var _this296=this;var handler=_ref111.handler,sink=_ref111.sink,task=_ref111.task,intent=_ref111.intent,cacheKey=_ref111.cacheKey,_ref111$annotationSto=_ref111.annotationStorage,annotationStorage=_ref111$annotationSto===void 0?null:_ref111$annotationSto,_ref111$modifiedIds=_ref111.modifiedIds,modifiedIds=_ref111$modifiedIds===void 0?null:_ref111$modifiedIds;var contentStreamPromise=this.getContentStream();var resourcesPromise=this.loadResources(["ColorSpace","ExtGState","Font","Pattern","Properties","Shading","XObject"]);var partialEvaluator=new PartialEvaluator({xref:this.xref,handler:handler,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,systemFontCache:this.systemFontCache,options:this.evaluatorOptions});var newAnnotsByPage=!this.xfaFactory?getNewAnnotationsMap(annotationStorage):null;var newAnnots=newAnnotsByPage===null||newAnnotsByPage===void 0?void 0:newAnnotsByPage.get(this.pageIndex);var newAnnotationsPromise=Promise.resolve(null);var deletedAnnotations=null;if(newAnnots){var annotationGlobalsPromise=this.pdfManager.ensureDoc("annotationGlobals");var imagePromises;var missingBitmaps=new Set();var _iterator221=_createForOfIteratorHelper(newAnnots),_step221;try{for(_iterator221.s();!(_step221=_iterator221.n()).done;){var _step221$value=_step221.value,bitmapId=_step221$value.bitmapId,bitmap=_step221$value.bitmap;if(bitmapId&&!bitmap&&!missingBitmaps.has(bitmapId)){missingBitmaps.add(bitmapId);}}}catch(err){_iterator221.e(err);}finally{_iterator221.f();}var isOffscreenCanvasSupported=this.evaluatorOptions.isOffscreenCanvasSupported;if(missingBitmaps.size>0){var annotationWithBitmaps=newAnnots.slice();var _iterator222=_createForOfIteratorHelper(annotationStorage),_step222;try{for(_iterator222.s();!(_step222=_iterator222.n()).done;){var _step222$value=_slicedToArray(_step222.value,2),key=_step222$value[0],annotation=_step222$value[1];if(!key.startsWith(AnnotationEditorPrefix)){continue;}if(annotation.bitmap&&missingBitmaps.has(annotation.bitmapId)){annotationWithBitmaps.push(annotation);}}}catch(err){_iterator222.e(err);}finally{_iterator222.f();}imagePromises=AnnotationFactory.generateImages(annotationWithBitmaps,this.xref,isOffscreenCanvasSupported);}else{imagePromises=AnnotationFactory.generateImages(newAnnots,this.xref,isOffscreenCanvasSupported);}deletedAnnotations=new RefSet();newAnnotationsPromise=Promise.all([annotationGlobalsPromise,_assertClassBrand(_Page_brand,this,_replaceIdByRef).call(this,newAnnots,deletedAnnotations,null)]).then(function(_ref112){var _ref113=_slicedToArray(_ref112,1),annotationGlobals=_ref113[0];if(!annotationGlobals){return null;}return AnnotationFactory.printNewAnnotations(annotationGlobals,partialEvaluator,task,newAnnots,imagePromises);});}var pageListPromise=Promise.all([contentStreamPromise,resourcesPromise]).then(function(_ref114){var _ref115=_slicedToArray(_ref114,1),contentStream=_ref115[0];var opList=new OperatorList(intent,sink);handler.send("StartRenderPage",{transparency:partialEvaluator.hasBlendModes(_this296.resources,_this296.nonBlendModesSet),pageIndex:_this296.pageIndex,cacheKey:cacheKey});return partialEvaluator.getOperatorList({stream:contentStream,task:task,resources:_this296.resources,operatorList:opList}).then(function(){return opList;});});return Promise.all([pageListPromise,this._parsedAnnotations,newAnnotationsPromise]).then(function(_ref116){var _ref117=_slicedToArray(_ref116,3),pageOpList=_ref117[0],annotations=_ref117[1],newAnnotations=_ref117[2];if(newAnnotations){annotations=annotations.filter(function(a){return!(a.ref&&deletedAnnotations.has(a.ref));});var _loop6=function _loop6(_i77,_ii19){var newAnnotation=newAnnotations[_i77];if(newAnnotation.refToReplace){var j=annotations.findIndex(function(a){return a.ref&&isRefsEqual(a.ref,newAnnotation.refToReplace);});if(j>=0){annotations.splice(j,1,newAnnotation);newAnnotations.splice(_i77--,1);_ii19--;}}i=_i77,ii=_ii19;};for(var i=0,ii=newAnnotations.length;i<ii;i++){_loop6(i,ii);}annotations=annotations.concat(newAnnotations);}if(annotations.length===0||intent&RenderingIntentFlag.ANNOTATIONS_DISABLE){pageOpList.flush(true);return{length:pageOpList.totalLength};}var renderForms=!!(intent&RenderingIntentFlag.ANNOTATIONS_FORMS),isEditing=!!(intent&RenderingIntentFlag.IS_EDITING),intentAny=!!(intent&RenderingIntentFlag.ANY),intentDisplay=!!(intent&RenderingIntentFlag.DISPLAY),intentPrint=!!(intent&RenderingIntentFlag.PRINT);var opListPromises=[];var _iterator223=_createForOfIteratorHelper(annotations),_step223;try{for(_iterator223.s();!(_step223=_iterator223.n()).done;){var _annotation=_step223.value;if(intentAny||intentDisplay&&_annotation.mustBeViewed(annotationStorage,renderForms)&&_annotation.mustBeViewedWhenEditing(isEditing,modifiedIds)||intentPrint&&_annotation.mustBePrinted(annotationStorage)){opListPromises.push(_annotation.getOperatorList(partialEvaluator,task,intent,annotationStorage)["catch"](function(reason){warn("getOperatorList - ignoring annotation data during "+"\\"".concat(task.name,"\\" task: \\"").concat(reason,"\\"."));return{opList:null,separateForm:false,separateCanvas:false};}));}}}catch(err){_iterator223.e(err);}finally{_iterator223.f();}return Promise.all(opListPromises).then(function(opLists){var form=false,canvas=false;var _iterator224=_createForOfIteratorHelper(opLists),_step224;try{for(_iterator224.s();!(_step224=_iterator224.n()).done;){var _step224$value=_step224.value,opList=_step224$value.opList,separateForm=_step224$value.separateForm,separateCanvas=_step224$value.separateCanvas;pageOpList.addOpList(opList);form||(form=separateForm);canvas||(canvas=separateCanvas);}}catch(err){_iterator224.e(err);}finally{_iterator224.f();}pageOpList.flush(true,{form:form,canvas:canvas});return{length:pageOpList.totalLength};});});}},{key:"extractTextContent",value:function(){var _extractTextContent3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee84(_ref118){var handler,task,includeMarkedContent,disableNormalization,sink,contentStreamPromise,resourcesPromise,langPromise,_yield$Promise$all,_yield$Promise$all2,contentStream,lang,partialEvaluator;return _regeneratorRuntime().wrap(function _callee84$(_context100){while(1)switch(_context100.prev=_context100.next){case 0:handler=_ref118.handler,task=_ref118.task,includeMarkedContent=_ref118.includeMarkedContent,disableNormalization=_ref118.disableNormalization,sink=_ref118.sink;contentStreamPromise=this.getContentStream();resourcesPromise=this.loadResources(["ExtGState","Font","Properties","XObject"]);langPromise=this.pdfManager.ensureCatalog("lang");_context100.next=6;return Promise.all([contentStreamPromise,resourcesPromise,langPromise]);case 6:_yield$Promise$all=_context100.sent;_yield$Promise$all2=_slicedToArray(_yield$Promise$all,3);contentStream=_yield$Promise$all2[0];lang=_yield$Promise$all2[2];partialEvaluator=new PartialEvaluator({xref:this.xref,handler:handler,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,systemFontCache:this.systemFontCache,options:this.evaluatorOptions});return _context100.abrupt("return",partialEvaluator.getTextContent({stream:contentStream,task:task,resources:this.resources,includeMarkedContent:includeMarkedContent,disableNormalization:disableNormalization,sink:sink,viewBox:this.view,lang:lang}));case 12:case"end":return _context100.stop();}},_callee84,this);}));function extractTextContent(_x185){return _extractTextContent3.apply(this,arguments);}return extractTextContent;}()},{key:"getStructTree",value:function(){var _getStructTree=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee85(){var structTreeRoot,structTree;return _regeneratorRuntime().wrap(function _callee85$(_context101){while(1)switch(_context101.prev=_context101.next){case 0:_context101.next=2;return this.pdfManager.ensureCatalog("structTreeRoot");case 2:structTreeRoot=_context101.sent;if(structTreeRoot){_context101.next=5;break;}return _context101.abrupt("return",null);case 5:_context101.next=7;return this._parsedAnnotations;case 7:_context101.next=9;return this.pdfManager.ensure(this,"_parseStructTree",[structTreeRoot]);case 9:structTree=_context101.sent;return _context101.abrupt("return",this.pdfManager.ensure(structTree,"serializable"));case 11:case"end":return _context101.stop();}},_callee85,this);}));function getStructTree(){return _getStructTree.apply(this,arguments);}return getStructTree;}()},{key:"_parseStructTree",value:function _parseStructTree(structTreeRoot){var tree=new StructTreePage(structTreeRoot,this.pageDict);tree.parse(this.ref);return tree;}},{key:"getAnnotationsData",value:function(){var _getAnnotationsData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee86(handler,task,intent){var annotations,annotationsData,textContentPromises,partialEvaluator,intentAny,intentDisplay,intentPrint,_iterator225,_step225,annotation,isVisible;return _regeneratorRuntime().wrap(function _callee86$(_context102){while(1)switch(_context102.prev=_context102.next){case 0:_context102.next=2;return this._parsedAnnotations;case 2:annotations=_context102.sent;if(!(annotations.length===0)){_context102.next=5;break;}return _context102.abrupt("return",annotations);case 5:annotationsData=[],textContentPromises=[];intentAny=!!(intent&RenderingIntentFlag.ANY),intentDisplay=!!(intent&RenderingIntentFlag.DISPLAY),intentPrint=!!(intent&RenderingIntentFlag.PRINT);_iterator225=_createForOfIteratorHelper(annotations);try{for(_iterator225.s();!(_step225=_iterator225.n()).done;){annotation=_step225.value;isVisible=intentAny||intentDisplay&&annotation.viewable;if(isVisible||intentPrint&&annotation.printable){annotationsData.push(annotation.data);}if(annotation.hasTextContent&&isVisible){partialEvaluator||(partialEvaluator=new PartialEvaluator({xref:this.xref,handler:handler,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,systemFontCache:this.systemFontCache,options:this.evaluatorOptions}));textContentPromises.push(annotation.extractTextContent(partialEvaluator,task,[-Infinity,-Infinity,Infinity,Infinity])["catch"](function(reason){warn("getAnnotationsData - ignoring textContent during \\"".concat(task.name,"\\" task: \\"").concat(reason,"\\"."));}));}}}catch(err){_iterator225.e(err);}finally{_iterator225.f();}_context102.next=11;return Promise.all(textContentPromises);case 11:return _context102.abrupt("return",annotationsData);case 12:case"end":return _context102.stop();}},_callee86,this);}));function getAnnotationsData(_x186,_x187,_x188){return _getAnnotationsData.apply(this,arguments);}return getAnnotationsData;}()},{key:"annotations",get:function get(){var annots=this._getInheritableProperty("Annots");return shadow(this,"annotations",Array.isArray(annots)?annots:[]);}},{key:"_parsedAnnotations",get:function get(){var _this297=this;var promise=this.pdfManager.ensure(this,"annotations").then(/*#__PURE__*/function(){var _ref119=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee87(annots){var _yield$Promise$all3,_yield$Promise$all4,annotationGlobals,fieldObjects,orphanFields,annotationPromises,_iterator226,_step226,annotationRef,sortedAnnotations,popupAnnotations,widgetAnnotations,_iterator227,_step227,annotation;return _regeneratorRuntime().wrap(function _callee87$(_context103){while(1)switch(_context103.prev=_context103.next){case 0:if(!(annots.length===0)){_context103.next=2;break;}return _context103.abrupt("return",annots);case 2:_context103.next=4;return Promise.all([_this297.pdfManager.ensureDoc("annotationGlobals"),_this297.pdfManager.ensureDoc("fieldObjects")]);case 4:_yield$Promise$all3=_context103.sent;_yield$Promise$all4=_slicedToArray(_yield$Promise$all3,2);annotationGlobals=_yield$Promise$all4[0];fieldObjects=_yield$Promise$all4[1];if(annotationGlobals){_context103.next=10;break;}return _context103.abrupt("return",[]);case 10:orphanFields=fieldObjects===null||fieldObjects===void 0?void 0:fieldObjects.orphanFields;annotationPromises=[];_iterator226=_createForOfIteratorHelper(annots);try{for(_iterator226.s();!(_step226=_iterator226.n()).done;){annotationRef=_step226.value;annotationPromises.push(AnnotationFactory.create(_this297.xref,annotationRef,annotationGlobals,_this297._localIdFactory,false,orphanFields,_this297.ref)["catch"](function(reason){warn("_parsedAnnotations: \\"".concat(reason,"\\"."));return null;}));}}catch(err){_iterator226.e(err);}finally{_iterator226.f();}sortedAnnotations=[];_context103.t0=_createForOfIteratorHelper;_context103.next=18;return Promise.all(annotationPromises);case 18:_context103.t1=_context103.sent;_iterator227=(0,_context103.t0)(_context103.t1);_context103.prev=20;_iterator227.s();case 22:if((_step227=_iterator227.n()).done){_context103.next=35;break;}annotation=_step227.value;if(annotation){_context103.next=26;break;}return _context103.abrupt("continue",33);case 26:if(!(annotation instanceof WidgetAnnotation)){_context103.next=29;break;}(widgetAnnotations||(widgetAnnotations=[])).push(annotation);return _context103.abrupt("continue",33);case 29:if(!(annotation instanceof PopupAnnotation)){_context103.next=32;break;}(popupAnnotations||(popupAnnotations=[])).push(annotation);return _context103.abrupt("continue",33);case 32:sortedAnnotations.push(annotation);case 33:_context103.next=22;break;case 35:_context103.next=40;break;case 37:_context103.prev=37;_context103.t2=_context103["catch"](20);_iterator227.e(_context103.t2);case 40:_context103.prev=40;_iterator227.f();return _context103.finish(40);case 43:if(widgetAnnotations){sortedAnnotations.push.apply(sortedAnnotations,_toConsumableArray(widgetAnnotations));}if(popupAnnotations){sortedAnnotations.push.apply(sortedAnnotations,_toConsumableArray(popupAnnotations));}return _context103.abrupt("return",sortedAnnotations);case 46:case"end":return _context103.stop();}},_callee87,null,[[20,37,40,43]]);}));return function(_x189){return _ref119.apply(this,arguments);};}());return shadow(this,"_parsedAnnotations",promise);}},{key:"jsActions",get:function get(){var actions=collectActions(this.xref,this.pageDict,PageActionEventType);return shadow(this,"jsActions",actions);}}]);}();function _replaceIdByRef(_x249,_x250,_x251){return _replaceIdByRef2.apply(this,arguments);}function _replaceIdByRef2(){_replaceIdByRef2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee129(annotations,deletedAnnotations,existingAnnotations){var _this306=this;var promises,_iterator264,_step264,_loop10,_ret4;return _regeneratorRuntime().wrap(function _callee129$(_context149){while(1)switch(_context149.prev=_context149.next){case 0:promises=[];_iterator264=_createForOfIteratorHelper(annotations);_context149.prev=2;_loop10=/*#__PURE__*/_regeneratorRuntime().mark(function _loop10(){var annotation,ref,popupRef;return _regeneratorRuntime().wrap(function _loop10$(_context148){while(1)switch(_context148.prev=_context148.next){case 0:annotation=_step264.value;if(!annotation.id){_context148.next=14;break;}ref=Ref.fromString(annotation.id);if(ref){_context148.next=6;break;}warn("A non-linked annotation cannot be modified: ".concat(annotation.id));return _context148.abrupt("return",0);case 6:if(!annotation.deleted){_context148.next=10;break;}deletedAnnotations.put(ref,ref);if(annotation.popupRef){popupRef=Ref.fromString(annotation.popupRef);if(popupRef){deletedAnnotations.put(popupRef,popupRef);}}return _context148.abrupt("return",0);case 10:existingAnnotations===null||existingAnnotations===void 0||existingAnnotations.put(ref);annotation.ref=ref;promises.push(_this306.xref.fetchAsync(ref).then(function(obj){if(obj instanceof Dict){annotation.oldAnnotation=obj.clone();}},function(){warn("Cannot fetch `oldAnnotation` for: ".concat(ref,"."));}));delete annotation.id;case 14:case"end":return _context148.stop();}},_loop10);});_iterator264.s();case 5:if((_step264=_iterator264.n()).done){_context149.next=12;break;}return _context149.delegateYield(_loop10(),"t0",7);case 7:_ret4=_context149.t0;if(!(_ret4===0)){_context149.next=10;break;}return _context149.abrupt("continue",10);case 10:_context149.next=5;break;case 12:_context149.next=17;break;case 14:_context149.prev=14;_context149.t1=_context149["catch"](2);_iterator264.e(_context149.t1);case 17:_context149.prev=17;_iterator264.f();return _context149.finish(17);case 20:_context149.next=22;return Promise.all(promises);case 22:case"end":return _context149.stop();}},_callee129,null,[[2,14,17,20]]);}));return _replaceIdByRef2.apply(this,arguments);}var PDF_HEADER_SIGNATURE=new Uint8Array([0x25,0x50,0x44,0x46,0x2d]);var STARTXREF_SIGNATURE=new Uint8Array([0x73,0x74,0x61,0x72,0x74,0x78,0x72,0x65,0x66]);var ENDOBJ_SIGNATURE=new Uint8Array([0x65,0x6e,0x64,0x6f,0x62,0x6a]);function find(stream,signature){var limit=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1024;var backwards=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var signatureLength=signature.length;var scanBytes=stream.peekBytes(limit);var scanLength=scanBytes.length-signatureLength;if(scanLength<=0){return false;}if(backwards){var signatureEnd=signatureLength-1;var pos=scanBytes.length-1;while(pos>=signatureEnd){var j=0;while(j<signatureLength&&scanBytes[pos-j]===signature[signatureEnd-j]){j++;}if(j>=signatureLength){stream.pos+=pos-signatureEnd;return true;}pos--;}}else{var _pos=0;while(_pos<=scanLength){var _j22=0;while(_j22<signatureLength&&scanBytes[_pos+_j22]===signature[_j22]){_j22++;}if(_j22>=signatureLength){stream.pos+=_pos;return true;}_pos++;}}return false;}var _PDFDocument_brand=/*#__PURE__*/new WeakSet();var PDFDocument=/*#__PURE__*/function(){function PDFDocument(pdfManager,stream){_classCallCheck(this,PDFDocument);_classPrivateMethodInitSpec(this,_PDFDocument_brand);if(stream.length<=0){throw new InvalidPDFException("The PDF file is empty, i.e. its size is zero bytes.");}this.pdfManager=pdfManager;this.stream=stream;this.xref=new XRef(stream,pdfManager);this._pagePromises=new Map();this._version=null;var idCounters={font:0};this._globalIdFactory=/*#__PURE__*/function(){function _class2(){_classCallCheck(this,_class2);}return _createClass(_class2,null,[{key:"getDocId",value:function getDocId(){return"g_".concat(pdfManager.docId);}},{key:"createFontId",value:function createFontId(){return"f".concat(++idCounters.font);}},{key:"createObjId",value:function createObjId(){unreachable("Abstract method `createObjId` called.");}},{key:"getPageObjId",value:function getPageObjId(){unreachable("Abstract method `getPageObjId` called.");}}]);}();}return _createClass(PDFDocument,[{key:"parse",value:function parse(recoveryMode){this.xref.parse(recoveryMode);this.catalog=new Catalog(this.pdfManager,this.xref);}},{key:"linearization",get:function get(){var linearization=null;try{linearization=Linearization.create(this.stream);}catch(err){if(err instanceof MissingDataException){throw err;}info(err);}return shadow(this,"linearization",linearization);}},{key:"startXRef",get:function get(){var stream=this.stream;var startXRef=0;if(this.linearization){stream.reset();if(find(stream,ENDOBJ_SIGNATURE)){stream.skip(6);var ch=stream.peekByte();while(isWhiteSpace(ch)){stream.pos++;ch=stream.peekByte();}startXRef=stream.pos-stream.start;}}else{var step=1024;var startXRefLength=STARTXREF_SIGNATURE.length;var found=false,pos=stream.end;while(!found&&pos>0){pos-=step-startXRefLength;if(pos<0){pos=0;}stream.pos=pos;found=find(stream,STARTXREF_SIGNATURE,step,true);}if(found){stream.skip(9);var _ch;do{_ch=stream.getByte();}while(isWhiteSpace(_ch));var str="";while(_ch>=0x20&&_ch<=0x39){str+=String.fromCharCode(_ch);_ch=stream.getByte();}startXRef=parseInt(str,10);if(isNaN(startXRef)){startXRef=0;}}}return shadow(this,"startXRef",startXRef);}},{key:"checkHeader",value:function checkHeader(){var stream=this.stream;stream.reset();if(!find(stream,PDF_HEADER_SIGNATURE)){return;}stream.moveStart();stream.skip(PDF_HEADER_SIGNATURE.length);var version="",ch;while((ch=stream.getByte())>0x20&&version.length<7){version+=String.fromCharCode(ch);}if(PDF_VERSION_REGEXP.test(version)){this._version=version;}else{warn("Invalid PDF header version: ".concat(version));}}},{key:"parseStartXRef",value:function parseStartXRef(){this.xref.setStartXRef(this.startXRef);}},{key:"numPages",get:function get(){var num=0;if(this.catalog.hasActualNumPages){num=this.catalog.numPages;}else if(this.xfaFactory){num=this.xfaFactory.getNumPages();}else if(this.linearization){num=this.linearization.numPages;}else{num=this.catalog.numPages;}return shadow(this,"numPages",num);}},{key:"_hasOnlyDocumentSignatures",value:function _hasOnlyDocumentSignatures(fields){var _this298=this;var recursionDepth=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var RECURSION_LIMIT=10;if(!Array.isArray(fields)){return false;}return fields.every(function(field){field=_this298.xref.fetchIfRef(field);if(!(field instanceof Dict)){return false;}if(field.has("Kids")){if(++recursionDepth>RECURSION_LIMIT){warn("_hasOnlyDocumentSignatures: maximum recursion depth reached");return false;}return _this298._hasOnlyDocumentSignatures(field.get("Kids"),recursionDepth);}var isSignature=isName(field.get("FT"),"Sig");var rectangle=field.get("Rect");var isInvisible=Array.isArray(rectangle)&&rectangle.every(function(value){return value===0;});return isSignature&&isInvisible;});}},{key:"_xfaStreams",get:function get(){var acroForm=this.catalog.acroForm;if(!acroForm){return null;}var xfa=acroForm.get("XFA");var entries={"xdp:xdp":"",template:"",datasets:"",config:"",connectionSet:"",localeSet:"",stylesheet:"","/xdp:xdp":""};if(xfa instanceof BaseStream&&!xfa.isEmpty){entries["xdp:xdp"]=xfa;return entries;}if(!Array.isArray(xfa)||xfa.length===0){return null;}for(var i=0,ii=xfa.length;i<ii;i+=2){var name=void 0;if(i===0){name="xdp:xdp";}else if(i===ii-2){name="/xdp:xdp";}else{name=xfa[i];}if(!entries.hasOwnProperty(name)){continue;}var data=this.xref.fetchIfRef(xfa[i+1]);if(!(data instanceof BaseStream)||data.isEmpty){continue;}entries[name]=data;}return entries;}},{key:"xfaDatasets",get:function get(){var streams=this._xfaStreams;if(!streams){return shadow(this,"xfaDatasets",null);}for(var _i78=0,_arr7=["datasets","xdp:xdp"];_i78<_arr7.length;_i78++){var key=_arr7[_i78];var stream=streams[key];if(!stream){continue;}try{var str=stringToUTF8String(stream.getString());var data=_defineProperty({},key,str);return shadow(this,"xfaDatasets",new DatasetReader(data));}catch(_unused15){warn("XFA - Invalid utf-8 string.");break;}}return shadow(this,"xfaDatasets",null);}},{key:"xfaData",get:function get(){var streams=this._xfaStreams;if(!streams){return null;}var data=Object.create(null);for(var _i79=0,_Object$entries5=Object.entries(streams);_i79<_Object$entries5.length;_i79++){var _Object$entries5$_i=_slicedToArray(_Object$entries5[_i79],2),key=_Object$entries5$_i[0],stream=_Object$entries5$_i[1];if(!stream){continue;}try{data[key]=stringToUTF8String(stream.getString());}catch(_unused16){warn("XFA - Invalid utf-8 string.");return null;}}return data;}},{key:"xfaFactory",get:function get(){var data;if(this.pdfManager.enableXfa&&this.catalog.needsRendering&&this.formInfo.hasXfa&&!this.formInfo.hasAcroForm){data=this.xfaData;}return shadow(this,"xfaFactory",data?new XFAFactory(data):null);}},{key:"isPureXfa",get:function get(){return this.xfaFactory?this.xfaFactory.isValid():false;}},{key:"htmlForXfa",get:function get(){return this.xfaFactory?this.xfaFactory.getPages():null;}},{key:"loadXfaImages",value:function(){var _loadXfaImages=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee88(){var xfaImagesDict,keys,objectLoader,xfaImages,_iterator228,_step228,key,stream;return _regeneratorRuntime().wrap(function _callee88$(_context104){while(1)switch(_context104.prev=_context104.next){case 0:_context104.next=2;return this.pdfManager.ensureCatalog("xfaImages");case 2:xfaImagesDict=_context104.sent;if(xfaImagesDict){_context104.next=5;break;}return _context104.abrupt("return");case 5:keys=xfaImagesDict.getKeys();objectLoader=new ObjectLoader(xfaImagesDict,keys,this.xref);_context104.next=9;return objectLoader.load();case 9:xfaImages=new Map();_iterator228=_createForOfIteratorHelper(keys);try{for(_iterator228.s();!(_step228=_iterator228.n()).done;){key=_step228.value;stream=xfaImagesDict.get(key);if(stream instanceof BaseStream){xfaImages.set(key,stream.getBytes());}}}catch(err){_iterator228.e(err);}finally{_iterator228.f();}this.xfaFactory.setImages(xfaImages);case 13:case"end":return _context104.stop();}},_callee88,this);}));function loadXfaImages(){return _loadXfaImages.apply(this,arguments);}return loadXfaImages;}()},{key:"loadXfaFonts",value:function(){var _loadXfaFonts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee89(handler,task){var acroForm,resources,objectLoader,fontRes,options,partialEvaluator,operatorList,pdfFonts,initialState,promises,_iterator229,_step229,_step229$value,fontName,font,descriptor,fontFamily,fontWeight,italicAngle,cssFontInfo,missingFonts,reallyMissingFonts,_iterator230,_step230,missing,_iterator231,_step231,_missing,_i80,_arr8,fontInfo,name,dict;return _regeneratorRuntime().wrap(function _callee89$(_context105){while(1)switch(_context105.prev=_context105.next){case 0:_context105.next=2;return this.pdfManager.ensureCatalog("acroForm");case 2:acroForm=_context105.sent;if(acroForm){_context105.next=5;break;}return _context105.abrupt("return");case 5:_context105.next=7;return acroForm.getAsync("DR");case 7:resources=_context105.sent;if(resources instanceof Dict){_context105.next=10;break;}return _context105.abrupt("return");case 10:objectLoader=new ObjectLoader(resources,["Font"],this.xref);_context105.next=13;return objectLoader.load();case 13:fontRes=resources.get("Font");if(fontRes instanceof Dict){_context105.next=16;break;}return _context105.abrupt("return");case 16:options=Object.assign(Object.create(null),this.pdfManager.evaluatorOptions);options.useSystemFonts=false;partialEvaluator=new PartialEvaluator({xref:this.xref,handler:handler,pageIndex:-1,idFactory:this._globalIdFactory,fontCache:this.catalog.fontCache,builtInCMapCache:this.catalog.builtInCMapCache,standardFontDataCache:this.catalog.standardFontDataCache,options:options});operatorList=new OperatorList();pdfFonts=[];_context105.t0=function clone(){return this;};initialState={get font(){return pdfFonts.at(-1);},set font(font){pdfFonts.push(font);},clone:_context105.t0};promises=[];_iterator229=_createForOfIteratorHelper(fontRes);_context105.prev=25;_iterator229.s();case 27:if((_step229=_iterator229.n()).done){_context105.next=42;break;}_step229$value=_slicedToArray(_step229.value,2),fontName=_step229$value[0],font=_step229$value[1];descriptor=font.get("FontDescriptor");if(descriptor instanceof Dict){_context105.next=32;break;}return _context105.abrupt("continue",40);case 32:fontFamily=descriptor.get("FontFamily");fontFamily=fontFamily.replaceAll(/[ ]+(\\d)/g,"$1");fontWeight=descriptor.get("FontWeight");italicAngle=-descriptor.get("ItalicAngle");cssFontInfo={fontFamily:fontFamily,fontWeight:fontWeight,italicAngle:italicAngle};if(validateCSSFont(cssFontInfo)){_context105.next=39;break;}return _context105.abrupt("continue",40);case 39:promises.push(partialEvaluator.handleSetFont(resources,[Name.get(fontName),1],null,operatorList,task,initialState,null,cssFontInfo)["catch"](function(reason){warn("loadXfaFonts: \\"".concat(reason,"\\"."));return null;}));case 40:_context105.next=27;break;case 42:_context105.next=47;break;case 44:_context105.prev=44;_context105.t1=_context105["catch"](25);_iterator229.e(_context105.t1);case 47:_context105.prev=47;_iterator229.f();return _context105.finish(47);case 50:_context105.next=52;return Promise.all(promises);case 52:missingFonts=this.xfaFactory.setFonts(pdfFonts);if(missingFonts){_context105.next=55;break;}return _context105.abrupt("return");case 55:options.ignoreErrors=true;promises.length=0;pdfFonts.length=0;reallyMissingFonts=new Set();_iterator230=_createForOfIteratorHelper(missingFonts);try{for(_iterator230.s();!(_step230=_iterator230.n()).done;){missing=_step230.value;if(!getXfaFontName("".concat(missing,"-Regular"))){reallyMissingFonts.add(missing);}}}catch(err){_iterator230.e(err);}finally{_iterator230.f();}if(reallyMissingFonts.size){missingFonts.push("PdfJS-Fallback");}_iterator231=_createForOfIteratorHelper(missingFonts);_context105.prev=63;_iterator231.s();case 65:if((_step231=_iterator231.n()).done){_context105.next=72;break;}_missing=_step231.value;if(!reallyMissingFonts.has(_missing)){_context105.next=69;break;}return _context105.abrupt("continue",70);case 69:for(_i80=0,_arr8=[{name:"Regular",fontWeight:400,italicAngle:0},{name:"Bold",fontWeight:700,italicAngle:0},{name:"Italic",fontWeight:400,italicAngle:12},{name:"BoldItalic",fontWeight:700,italicAngle:12}];_i80<_arr8.length;_i80++){fontInfo=_arr8[_i80];name="".concat(_missing,"-").concat(fontInfo.name);dict=getXfaFontDict(name);promises.push(partialEvaluator.handleSetFont(resources,[Name.get(name),1],null,operatorList,task,initialState,dict,{fontFamily:_missing,fontWeight:fontInfo.fontWeight,italicAngle:fontInfo.italicAngle})["catch"](function(reason){warn("loadXfaFonts: \\"".concat(reason,"\\"."));return null;}));}case 70:_context105.next=65;break;case 72:_context105.next=77;break;case 74:_context105.prev=74;_context105.t2=_context105["catch"](63);_iterator231.e(_context105.t2);case 77:_context105.prev=77;_iterator231.f();return _context105.finish(77);case 80:_context105.next=82;return Promise.all(promises);case 82:this.xfaFactory.appendFonts(pdfFonts,reallyMissingFonts);case 83:case"end":return _context105.stop();}},_callee89,this,[[25,44,47,50],[63,74,77,80]]);}));function loadXfaFonts(_x190,_x191){return _loadXfaFonts.apply(this,arguments);}return loadXfaFonts;}()},{key:"serializeXfaData",value:function(){var _serializeXfaData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee90(annotationStorage){return _regeneratorRuntime().wrap(function _callee90$(_context106){while(1)switch(_context106.prev=_context106.next){case 0:return _context106.abrupt("return",this.xfaFactory?this.xfaFactory.serializeData(annotationStorage):null);case 1:case"end":return _context106.stop();}},_callee90,this);}));function serializeXfaData(_x192){return _serializeXfaData.apply(this,arguments);}return serializeXfaData;}()},{key:"version",get:function get(){return this.catalog.version||this._version;}},{key:"formInfo",get:function get(){var formInfo={hasFields:false,hasAcroForm:false,hasXfa:false,hasSignatures:false};var acroForm=this.catalog.acroForm;if(!acroForm){return shadow(this,"formInfo",formInfo);}try{var fields=acroForm.get("Fields");var hasFields=Array.isArray(fields)&&fields.length>0;formInfo.hasFields=hasFields;var xfa=acroForm.get("XFA");formInfo.hasXfa=Array.isArray(xfa)&&xfa.length>0||xfa instanceof BaseStream&&!xfa.isEmpty;var sigFlags=acroForm.get("SigFlags");var hasSignatures=!!(sigFlags&0x1);var hasOnlyDocumentSignatures=hasSignatures&&this._hasOnlyDocumentSignatures(fields);formInfo.hasAcroForm=hasFields&&!hasOnlyDocumentSignatures;formInfo.hasSignatures=hasSignatures;}catch(ex){if(ex instanceof MissingDataException){throw ex;}warn("Cannot fetch form information: \\"".concat(ex,"\\"."));}return shadow(this,"formInfo",formInfo);}},{key:"documentInfo",get:function get(){var docInfo={PDFFormatVersion:this.version,Language:this.catalog.lang,EncryptFilterName:this.xref.encrypt?this.xref.encrypt.filterName:null,IsLinearized:!!this.linearization,IsAcroFormPresent:this.formInfo.hasAcroForm,IsXFAPresent:this.formInfo.hasXfa,IsCollectionPresent:!!this.catalog.collection,IsSignaturesPresent:this.formInfo.hasSignatures};var infoDict;try{infoDict=this.xref.trailer.get("Info");}catch(err){if(err instanceof MissingDataException){throw err;}info("The document information dictionary is invalid.");}if(!(infoDict instanceof Dict)){return shadow(this,"documentInfo",docInfo);}var _iterator232=_createForOfIteratorHelper(infoDict),_step232;try{for(_iterator232.s();!(_step232=_iterator232.n()).done;){var _step232$value=_slicedToArray(_step232.value,2),key=_step232$value[0],value=_step232$value[1];switch(key){case"Title":case"Author":case"Subject":case"Keywords":case"Creator":case"Producer":case"CreationDate":case"ModDate":if(typeof value==="string"){docInfo[key]=stringToPDFString(value);continue;}break;case"Trapped":if(value instanceof Name){docInfo[key]=value;continue;}break;default:var customValue=void 0;switch(_typeof(value)){case"string":customValue=stringToPDFString(value);break;case"number":case"boolean":customValue=value;break;default:if(value instanceof Name){customValue=value;}break;}if(customValue===undefined){warn("Bad value, for custom key \\"".concat(key,"\\", in Info: ").concat(value,"."));continue;}if(!docInfo.Custom){docInfo.Custom=Object.create(null);}docInfo.Custom[key]=customValue;continue;}warn("Bad value, for key \\"".concat(key,"\\", in Info: ").concat(value,"."));}}catch(err){_iterator232.e(err);}finally{_iterator232.f();}return shadow(this,"documentInfo",docInfo);}},{key:"fingerprints",get:function get(){var FINGERPRINT_FIRST_BYTES=1024;var EMPTY_FINGERPRINT="\\x00".repeat(16);function validate(data){return typeof data==="string"&&data.length===16&&data!==EMPTY_FINGERPRINT;}var id=this.xref.trailer.get("ID");var hashOriginal,hashModified;if(Array.isArray(id)&&validate(id[0])){hashOriginal=stringToBytes(id[0]);if(id[1]!==id[0]&&validate(id[1])){hashModified=stringToBytes(id[1]);}}else{hashOriginal=calculateMD5(this.stream.getByteRange(0,FINGERPRINT_FIRST_BYTES),0,FINGERPRINT_FIRST_BYTES);}return shadow(this,"fingerprints",[toHexUtil(hashOriginal),hashModified?toHexUtil(hashModified):null]);}},{key:"_getLinearizationPage",value:function(){var _getLinearizationPage2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee91(pageIndex){var catalog,linearization,xref,ref,obj,type;return _regeneratorRuntime().wrap(function _callee91$(_context107){while(1)switch(_context107.prev=_context107.next){case 0:catalog=this.catalog,linearization=this.linearization,xref=this.xref;ref=Ref.get(linearization.objectNumberFirst,0);_context107.prev=2;_context107.next=5;return xref.fetchAsync(ref);case 5:obj=_context107.sent;if(!(obj instanceof Dict)){_context107.next=16;break;}type=obj.getRaw("Type");if(!(type instanceof Ref)){_context107.next=12;break;}_context107.next=11;return xref.fetchAsync(type);case 11:type=_context107.sent;case 12:if(!(isName(type,"Page")||!obj.has("Type")&&!obj.has("Kids")&&obj.has("Contents"))){_context107.next=16;break;}if(!catalog.pageKidsCountCache.has(ref)){catalog.pageKidsCountCache.put(ref,1);}if(!catalog.pageIndexCache.has(ref)){catalog.pageIndexCache.put(ref,0);}return _context107.abrupt("return",[obj,ref]);case 16:throw new FormatError("The Linearization dictionary doesn\'t point to a valid Page dictionary.");case 19:_context107.prev=19;_context107.t0=_context107["catch"](2);warn("_getLinearizationPage: \\"".concat(_context107.t0.message,"\\"."));return _context107.abrupt("return",catalog.getPageDict(pageIndex));case 23:case"end":return _context107.stop();}},_callee91,this,[[2,19]]);}));function _getLinearizationPage(_x193){return _getLinearizationPage2.apply(this,arguments);}return _getLinearizationPage;}()},{key:"getPage",value:function getPage(pageIndex){var _this299=this;var cachedPromise=this._pagePromises.get(pageIndex);if(cachedPromise){return cachedPromise;}var catalog=this.catalog,linearization=this.linearization,xfaFactory=this.xfaFactory;var promise;if(xfaFactory){promise=Promise.resolve([Dict.empty,null]);}else if((linearization===null||linearization===void 0?void 0:linearization.pageFirst)===pageIndex){promise=this._getLinearizationPage(pageIndex);}else{promise=catalog.getPageDict(pageIndex);}promise=promise.then(function(_ref120){var _ref121=_slicedToArray(_ref120,2),pageDict=_ref121[0],ref=_ref121[1];return new Page({pdfManager:_this299.pdfManager,xref:_this299.xref,pageIndex:pageIndex,pageDict:pageDict,ref:ref,globalIdFactory:_this299._globalIdFactory,fontCache:catalog.fontCache,builtInCMapCache:catalog.builtInCMapCache,standardFontDataCache:catalog.standardFontDataCache,globalImageCache:catalog.globalImageCache,systemFontCache:catalog.systemFontCache,nonBlendModesSet:catalog.nonBlendModesSet,xfaFactory:xfaFactory});});this._pagePromises.set(pageIndex,promise);return promise;}},{key:"checkFirstPage",value:function(){var _checkFirstPage=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee92(){var recoveryMode,_args111=arguments;return _regeneratorRuntime().wrap(function _callee92$(_context108){while(1)switch(_context108.prev=_context108.next){case 0:recoveryMode=_args111.length>0&&_args111[0]!==undefined?_args111[0]:false;if(!recoveryMode){_context108.next=3;break;}return _context108.abrupt("return");case 3:_context108.prev=3;_context108.next=6;return this.getPage(0);case 6:_context108.next=15;break;case 8:_context108.prev=8;_context108.t0=_context108["catch"](3);if(!(_context108.t0 instanceof XRefEntryException)){_context108.next=15;break;}this._pagePromises["delete"](0);_context108.next=14;return this.cleanup();case 14:throw new XRefParseException();case 15:case"end":return _context108.stop();}},_callee92,this,[[3,8]]);}));function checkFirstPage(){return _checkFirstPage.apply(this,arguments);}return checkFirstPage;}()},{key:"checkLastPage",value:function(){var _checkLastPage=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee93(){var recoveryMode,catalog,pdfManager,numPages,pagesTree,_iterator233,_step233,_step233$value,_pageIndex4,_step233$value$,pageDict,ref,promise,_args112=arguments;return _regeneratorRuntime().wrap(function _callee93$(_context109){while(1)switch(_context109.prev=_context109.next){case 0:recoveryMode=_args112.length>0&&_args112[0]!==undefined?_args112[0]:false;catalog=this.catalog,pdfManager=this.pdfManager;catalog.setActualNumPages();_context109.prev=3;_context109.next=6;return Promise.all([pdfManager.ensureDoc("xfaFactory"),pdfManager.ensureDoc("linearization"),pdfManager.ensureCatalog("numPages")]);case 6:if(!this.xfaFactory){_context109.next=10;break;}return _context109.abrupt("return");case 10:if(this.linearization){numPages=this.linearization.numPages;}else{numPages=catalog.numPages;}case 11:if(Number.isInteger(numPages)){_context109.next=15;break;}throw new FormatError("Page count is not an integer.");case 15:if(!(numPages<=1)){_context109.next=17;break;}return _context109.abrupt("return");case 17:_context109.next=19;return this.getPage(numPages-1);case 19:_context109.next=44;break;case 21:_context109.prev=21;_context109.t0=_context109["catch"](3);this._pagePromises["delete"](numPages-1);_context109.next=26;return this.cleanup();case 26:if(!(_context109.t0 instanceof XRefEntryException&&!recoveryMode)){_context109.next=28;break;}throw new XRefParseException();case 28:warn("checkLastPage - invalid /Pages tree /Count: ".concat(numPages,"."));_context109.prev=29;_context109.next=32;return catalog.getAllPageDicts(recoveryMode);case 32:pagesTree=_context109.sent;_context109.next=41;break;case 35:_context109.prev=35;_context109.t1=_context109["catch"](29);if(!(_context109.t1 instanceof XRefEntryException&&!recoveryMode)){_context109.next=39;break;}throw new XRefParseException();case 39:catalog.setActualNumPages(1);return _context109.abrupt("return");case 41:_iterator233=_createForOfIteratorHelper(pagesTree);try{for(_iterator233.s();!(_step233=_iterator233.n()).done;){_step233$value=_slicedToArray(_step233.value,2),_pageIndex4=_step233$value[0],_step233$value$=_slicedToArray(_step233$value[1],2),pageDict=_step233$value$[0],ref=_step233$value$[1];promise=void 0;if(pageDict instanceof Error){promise=Promise.reject(pageDict);promise["catch"](function(){});}else{promise=Promise.resolve(new Page({pdfManager:pdfManager,xref:this.xref,pageIndex:_pageIndex4,pageDict:pageDict,ref:ref,globalIdFactory:this._globalIdFactory,fontCache:catalog.fontCache,builtInCMapCache:catalog.builtInCMapCache,standardFontDataCache:catalog.standardFontDataCache,globalImageCache:catalog.globalImageCache,systemFontCache:catalog.systemFontCache,nonBlendModesSet:catalog.nonBlendModesSet,xfaFactory:null}));}this._pagePromises.set(_pageIndex4,promise);}}catch(err){_iterator233.e(err);}finally{_iterator233.f();}catalog.setActualNumPages(pagesTree.size);case 44:case"end":return _context109.stop();}},_callee93,this,[[3,21],[29,35]]);}));function checkLastPage(){return _checkLastPage.apply(this,arguments);}return checkLastPage;}()},{key:"fontFallback",value:function(){var _fontFallback=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee94(id,handler){var catalog,pdfManager,_iterator234,_step234,translatedFont;return _regeneratorRuntime().wrap(function _callee94$(_context110){while(1)switch(_context110.prev=_context110.next){case 0:catalog=this.catalog,pdfManager=this.pdfManager;_context110.t0=_createForOfIteratorHelper;_context110.next=4;return Promise.all(catalog.fontCache);case 4:_context110.t1=_context110.sent;_iterator234=(0,_context110.t0)(_context110.t1);_context110.prev=6;_iterator234.s();case 8:if((_step234=_iterator234.n()).done){_context110.next=15;break;}translatedFont=_step234.value;if(!(translatedFont.loadedName===id)){_context110.next=13;break;}translatedFont.fallback(handler,pdfManager.evaluatorOptions);return _context110.abrupt("return");case 13:_context110.next=8;break;case 15:_context110.next=20;break;case 17:_context110.prev=17;_context110.t2=_context110["catch"](6);_iterator234.e(_context110.t2);case 20:_context110.prev=20;_iterator234.f();return _context110.finish(20);case 23:case"end":return _context110.stop();}},_callee94,this,[[6,17,20,23]]);}));function fontFallback(_x194,_x195){return _fontFallback.apply(this,arguments);}return fontFallback;}()},{key:"cleanup",value:function(){var _cleanup2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee95(){var manuallyTriggered,_args114=arguments;return _regeneratorRuntime().wrap(function _callee95$(_context111){while(1)switch(_context111.prev=_context111.next){case 0:manuallyTriggered=_args114.length>0&&_args114[0]!==undefined?_args114[0]:false;return _context111.abrupt("return",this.catalog?this.catalog.cleanup(manuallyTriggered):clearGlobalCaches());case 2:case"end":return _context111.stop();}},_callee95,this);}));function cleanup(){return _cleanup2.apply(this,arguments);}return cleanup;}()},{key:"fieldObjects",get:function get(){var _this300=this;var promise=this.pdfManager.ensureDoc("formInfo").then(/*#__PURE__*/function(){var _ref122=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee96(formInfo){var _yield$Promise$all5,_yield$Promise$all6,annotationGlobals,acroForm,visitedRefs,allFields,fieldPromises,orphanFields,_iterator235,_step235,fieldRef,allPromises,_iterator236,_step236,_loop7;return _regeneratorRuntime().wrap(function _callee96$(_context113){while(1)switch(_context113.prev=_context113.next){case 0:if(formInfo.hasFields){_context113.next=2;break;}return _context113.abrupt("return",null);case 2:_context113.next=4;return Promise.all([_this300.pdfManager.ensureDoc("annotationGlobals"),_this300.pdfManager.ensureCatalog("acroForm")]);case 4:_yield$Promise$all5=_context113.sent;_yield$Promise$all6=_slicedToArray(_yield$Promise$all5,2);annotationGlobals=_yield$Promise$all6[0];acroForm=_yield$Promise$all6[1];if(annotationGlobals){_context113.next=10;break;}return _context113.abrupt("return",null);case 10:visitedRefs=new RefSet();allFields=Object.create(null);fieldPromises=new Map();orphanFields=new RefSetCache();_context113.t0=_createForOfIteratorHelper;_context113.next=17;return acroForm.getAsync("Fields");case 17:_context113.t1=_context113.sent;_iterator235=(0,_context113.t0)(_context113.t1);_context113.prev=19;_iterator235.s();case 21:if((_step235=_iterator235.n()).done){_context113.next=27;break;}fieldRef=_step235.value;_context113.next=25;return _assertClassBrand(_PDFDocument_brand,_this300,_collectFieldObjects).call(_this300,"",null,fieldRef,fieldPromises,annotationGlobals,visitedRefs,orphanFields);case 25:_context113.next=21;break;case 27:_context113.next=32;break;case 29:_context113.prev=29;_context113.t2=_context113["catch"](19);_iterator235.e(_context113.t2);case 32:_context113.prev=32;_iterator235.f();return _context113.finish(32);case 35:allPromises=[];_iterator236=_createForOfIteratorHelper(fieldPromises);_context113.prev=37;_loop7=/*#__PURE__*/_regeneratorRuntime().mark(function _loop7(){var _step236$value,name,promises;return _regeneratorRuntime().wrap(function _loop7$(_context112){while(1)switch(_context112.prev=_context112.next){case 0:_step236$value=_slicedToArray(_step236.value,2),name=_step236$value[0],promises=_step236$value[1];allPromises.push(Promise.all(promises).then(function(fields){fields=fields.filter(function(field){return!!field;});if(fields.length>0){allFields[name]=fields;}}));case 2:case"end":return _context112.stop();}},_loop7);});_iterator236.s();case 40:if((_step236=_iterator236.n()).done){_context113.next=44;break;}return _context113.delegateYield(_loop7(),"t3",42);case 42:_context113.next=40;break;case 44:_context113.next=49;break;case 46:_context113.prev=46;_context113.t4=_context113["catch"](37);_iterator236.e(_context113.t4);case 49:_context113.prev=49;_iterator236.f();return _context113.finish(49);case 52:_context113.next=54;return Promise.all(allPromises);case 54:return _context113.abrupt("return",{allFields:objectSize(allFields)>0?allFields:null,orphanFields:orphanFields});case 55:case"end":return _context113.stop();}},_callee96,null,[[19,29,32,35],[37,46,49,52]]);}));return function(_x196){return _ref122.apply(this,arguments);};}());return shadow(this,"fieldObjects",promise);}},{key:"hasJSActions",get:function get(){var promise=this.pdfManager.ensureDoc("_parseHasJSActions");return shadow(this,"hasJSActions",promise);}},{key:"_parseHasJSActions",value:function(){var _parseHasJSActions2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee97(){var _yield$Promise$all7,_yield$Promise$all8,catalogJsActions,fieldObjects;return _regeneratorRuntime().wrap(function _callee97$(_context114){while(1)switch(_context114.prev=_context114.next){case 0:_context114.next=2;return Promise.all([this.pdfManager.ensureCatalog("jsActions"),this.pdfManager.ensureDoc("fieldObjects")]);case 2:_yield$Promise$all7=_context114.sent;_yield$Promise$all8=_slicedToArray(_yield$Promise$all7,2);catalogJsActions=_yield$Promise$all8[0];fieldObjects=_yield$Promise$all8[1];if(!catalogJsActions){_context114.next=8;break;}return _context114.abrupt("return",true);case 8:if(!(fieldObjects!==null&&fieldObjects!==void 0&&fieldObjects.allFields)){_context114.next=10;break;}return _context114.abrupt("return",Object.values(fieldObjects.allFields).some(function(fieldObject){return fieldObject.some(function(object){return object.actions!==null;});}));case 10:return _context114.abrupt("return",false);case 11:case"end":return _context114.stop();}},_callee97,this);}));function _parseHasJSActions(){return _parseHasJSActions2.apply(this,arguments);}return _parseHasJSActions;}()},{key:"calculationOrderIds",get:function get(){var _this$catalog$acroFor;var calculationOrder=(_this$catalog$acroFor=this.catalog.acroForm)===null||_this$catalog$acroFor===void 0?void 0:_this$catalog$acroFor.get("CO");if(!Array.isArray(calculationOrder)||calculationOrder.length===0){return shadow(this,"calculationOrderIds",null);}var ids=[];var _iterator237=_createForOfIteratorHelper(calculationOrder),_step237;try{for(_iterator237.s();!(_step237=_iterator237.n()).done;){var id=_step237.value;if(id instanceof Ref){ids.push(id.toString());}}}catch(err){_iterator237.e(err);}finally{_iterator237.f();}return shadow(this,"calculationOrderIds",ids.length?ids:null);}},{key:"annotationGlobals",get:function get(){return shadow(this,"annotationGlobals",AnnotationFactory.createGlobals(this.pdfManager));}}]);}();function _collectFieldObjects(_x252,_x253,_x254,_x255,_x256,_x257,_x258){return _collectFieldObjects2.apply(this,arguments);}function _collectFieldObjects2(){_collectFieldObjects2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee130(name,parentRef,fieldRef,promises,annotationGlobals,visitedRefs,orphanFields){var xref,field,subtype,partName,obj,_partName,kids,_iterator265,_step265,kid;return _regeneratorRuntime().wrap(function _callee130$(_context150){while(1)switch(_context150.prev=_context150.next){case 0:xref=this.xref;if(!(!(fieldRef instanceof Ref)||visitedRefs.has(fieldRef))){_context150.next=3;break;}return _context150.abrupt("return");case 3:visitedRefs.put(fieldRef);_context150.next=6;return xref.fetchAsync(fieldRef);case 6:field=_context150.sent;if(field instanceof Dict){_context150.next=9;break;}return _context150.abrupt("return");case 9:_context150.next=11;return field.getAsync("Subtype");case 11:subtype=_context150.sent;subtype=subtype instanceof Name?subtype.name:null;_context150.t0=subtype;_context150.next=_context150.t0==="Link"?16:17;break;case 16:return _context150.abrupt("return");case 17:if(!field.has("T")){_context150.next=26;break;}_context150.t1=stringToPDFString;_context150.next=21;return field.getAsync("T");case 21:_context150.t2=_context150.sent;partName=(0,_context150.t1)(_context150.t2);name=name===""?partName:"".concat(name,".").concat(partName);_context150.next=47;break;case 26:obj=field;case 27:if(false){}obj=obj.getRaw("Parent")||parentRef;if(!(obj instanceof Ref)){_context150.next=35;break;}if(!visitedRefs.has(obj)){_context150.next=32;break;}return _context150.abrupt("break",47);case 32:_context150.next=34;return xref.fetchAsync(obj);case 34:obj=_context150.sent;case 35:if(obj instanceof Dict){_context150.next=37;break;}return _context150.abrupt("break",47);case 37:if(!obj.has("T")){_context150.next=45;break;}_context150.t3=stringToPDFString;_context150.next=41;return obj.getAsync("T");case 41:_context150.t4=_context150.sent;_partName=(0,_context150.t3)(_context150.t4);name=name===""?_partName:"".concat(name,".").concat(_partName);return _context150.abrupt("break",47);case 45:_context150.next=27;break;case 47:if(parentRef&&!field.has("Parent")&&isName(field.get("Subtype"),"Widget")){orphanFields.put(fieldRef,parentRef);}if(!promises.has(name)){promises.set(name,[]);}promises.get(name).push(AnnotationFactory.create(xref,fieldRef,annotationGlobals,null,true,orphanFields,null).then(function(annotation){return annotation===null||annotation===void 0?void 0:annotation.getFieldObject();})["catch"](function(reason){warn("#collectFieldObjects: \\"".concat(reason,"\\"."));return null;}));if(field.has("Kids")){_context150.next=52;break;}return _context150.abrupt("return");case 52:_context150.next=54;return field.getAsync("Kids");case 54:kids=_context150.sent;if(!Array.isArray(kids)){_context150.next=73;break;}_iterator265=_createForOfIteratorHelper(kids);_context150.prev=57;_iterator265.s();case 59:if((_step265=_iterator265.n()).done){_context150.next=65;break;}kid=_step265.value;_context150.next=63;return _assertClassBrand(_PDFDocument_brand,this,_collectFieldObjects).call(this,name,fieldRef,kid,promises,annotationGlobals,visitedRefs,orphanFields);case 63:_context150.next=59;break;case 65:_context150.next=70;break;case 67:_context150.prev=67;_context150.t5=_context150["catch"](57);_iterator265.e(_context150.t5);case 70:_context150.prev=70;_iterator265.f();return _context150.finish(70);case 73:case"end":return _context150.stop();}},_callee130,this,[[57,67,70,73]]);}));return _collectFieldObjects2.apply(this,arguments);};// ./src/core/pdf_manager.js\nfunction parseDocBaseUrl(url){if(url){var absoluteUrl=createValidAbsoluteUrl(url);if(absoluteUrl){return absoluteUrl.href;}warn("Invalid absolute docBaseUrl: \\"".concat(url,"\\"."));}return null;}var BasePdfManager=/*#__PURE__*/function(){function BasePdfManager(_ref123){var docBaseUrl=_ref123.docBaseUrl,docId=_ref123.docId,enableXfa=_ref123.enableXfa,evaluatorOptions=_ref123.evaluatorOptions,handler=_ref123.handler,password=_ref123.password;_classCallCheck(this,BasePdfManager);this._docBaseUrl=parseDocBaseUrl(docBaseUrl);this._docId=docId;this._password=password;this.enableXfa=enableXfa;evaluatorOptions.isOffscreenCanvasSupported&&(evaluatorOptions.isOffscreenCanvasSupported=FeatureTest.isOffscreenCanvasSupported);evaluatorOptions.isImageDecoderSupported&&(evaluatorOptions.isImageDecoderSupported=FeatureTest.isImageDecoderSupported);this.evaluatorOptions=Object.freeze(evaluatorOptions);ImageResizer.setOptions(evaluatorOptions);JpegStream.setOptions(evaluatorOptions);JpxImage.setOptions(_objectSpread(_objectSpread({},evaluatorOptions),{},{handler:handler}));}return _createClass(BasePdfManager,[{key:"docId",get:function get(){return this._docId;}},{key:"password",get:function get(){return this._password;}},{key:"docBaseUrl",get:function get(){return this._docBaseUrl;}},{key:"catalog",get:function get(){return this.pdfDocument.catalog;}},{key:"ensureDoc",value:function ensureDoc(prop,args){return this.ensure(this.pdfDocument,prop,args);}},{key:"ensureXRef",value:function ensureXRef(prop,args){return this.ensure(this.pdfDocument.xref,prop,args);}},{key:"ensureCatalog",value:function ensureCatalog(prop,args){return this.ensure(this.pdfDocument.catalog,prop,args);}},{key:"getPage",value:function getPage(pageIndex){return this.pdfDocument.getPage(pageIndex);}},{key:"fontFallback",value:function fontFallback(id,handler){return this.pdfDocument.fontFallback(id,handler);}},{key:"loadXfaFonts",value:function loadXfaFonts(handler,task){return this.pdfDocument.loadXfaFonts(handler,task);}},{key:"loadXfaImages",value:function loadXfaImages(){return this.pdfDocument.loadXfaImages();}},{key:"serializeXfaData",value:function serializeXfaData(annotationStorage){return this.pdfDocument.serializeXfaData(annotationStorage);}},{key:"cleanup",value:function cleanup(){var manuallyTriggered=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;return this.pdfDocument.cleanup(manuallyTriggered);}},{key:"ensure",value:function(){var _ensure=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee98(obj,prop,args){return _regeneratorRuntime().wrap(function _callee98$(_context115){while(1)switch(_context115.prev=_context115.next){case 0:unreachable("Abstract method `ensure` called");case 1:case"end":return _context115.stop();}},_callee98);}));function ensure(_x197,_x198,_x199){return _ensure.apply(this,arguments);}return ensure;}()},{key:"requestRange",value:function requestRange(begin,end){unreachable("Abstract method `requestRange` called");}},{key:"requestLoadedStream",value:function requestLoadedStream(){var noFetch=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;unreachable("Abstract method `requestLoadedStream` called");}},{key:"sendProgressiveData",value:function sendProgressiveData(chunk){unreachable("Abstract method `sendProgressiveData` called");}},{key:"updatePassword",value:function updatePassword(password){this._password=password;}},{key:"terminate",value:function terminate(reason){unreachable("Abstract method `terminate` called");}}]);}();var LocalPdfManager=/*#__PURE__*/function(_BasePdfManager){function LocalPdfManager(args){var _this301;_classCallCheck(this,LocalPdfManager);_this301=_callSuper(this,LocalPdfManager,[args]);var stream=new Stream(args.source);_this301.pdfDocument=new PDFDocument(_this301,stream);_this301._loadedStreamPromise=Promise.resolve(stream);return _this301;}_inherits(LocalPdfManager,_BasePdfManager);return _createClass(LocalPdfManager,[{key:"ensure",value:function(){var _ensure2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee99(obj,prop,args){var value;return _regeneratorRuntime().wrap(function _callee99$(_context116){while(1)switch(_context116.prev=_context116.next){case 0:value=obj[prop];if(!(typeof value==="function")){_context116.next=3;break;}return _context116.abrupt("return",value.apply(obj,args));case 3:return _context116.abrupt("return",value);case 4:case"end":return _context116.stop();}},_callee99);}));function ensure(_x200,_x201,_x202){return _ensure2.apply(this,arguments);}return ensure;}()},{key:"requestRange",value:function requestRange(begin,end){return Promise.resolve();}},{key:"requestLoadedStream",value:function requestLoadedStream(){var noFetch=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;return this._loadedStreamPromise;}},{key:"terminate",value:function terminate(reason){}}]);}(BasePdfManager);var NetworkPdfManager=/*#__PURE__*/function(_BasePdfManager2){function NetworkPdfManager(args){var _this302;_classCallCheck(this,NetworkPdfManager);_this302=_callSuper(this,NetworkPdfManager,[args]);_this302.streamManager=new ChunkedStreamManager(args.source,{msgHandler:args.handler,length:args.length,disableAutoFetch:args.disableAutoFetch,rangeChunkSize:args.rangeChunkSize});_this302.pdfDocument=new PDFDocument(_this302,_this302.streamManager.getStream());return _this302;}_inherits(NetworkPdfManager,_BasePdfManager2);return _createClass(NetworkPdfManager,[{key:"ensure",value:function(){var _ensure3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee100(obj,prop,args){var value;return _regeneratorRuntime().wrap(function _callee100$(_context117){while(1)switch(_context117.prev=_context117.next){case 0:_context117.prev=0;value=obj[prop];if(!(typeof value==="function")){_context117.next=4;break;}return _context117.abrupt("return",value.apply(obj,args));case 4:return _context117.abrupt("return",value);case 7:_context117.prev=7;_context117.t0=_context117["catch"](0);if(_context117.t0 instanceof MissingDataException){_context117.next=11;break;}throw _context117.t0;case 11:_context117.next=13;return this.requestRange(_context117.t0.begin,_context117.t0.end);case 13:return _context117.abrupt("return",this.ensure(obj,prop,args));case 14:case"end":return _context117.stop();}},_callee100,this,[[0,7]]);}));function ensure(_x203,_x204,_x205){return _ensure3.apply(this,arguments);}return ensure;}()},{key:"requestRange",value:function requestRange(begin,end){return this.streamManager.requestRange(begin,end);}},{key:"requestLoadedStream",value:function requestLoadedStream(){var noFetch=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;return this.streamManager.requestAllChunks(noFetch);}},{key:"sendProgressiveData",value:function sendProgressiveData(chunk){this.streamManager.onReceiveData({chunk:chunk});}},{key:"terminate",value:function terminate(reason){this.streamManager.abort(reason);}}]);}(BasePdfManager);;// ./src/shared/message_handler.js\nvar CallbackKind={DATA:1,ERROR:2};var StreamKind={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function onFn(){}function wrapReason(ex){if(ex instanceof AbortException||ex instanceof InvalidPDFException||ex instanceof PasswordException||ex instanceof ResponseException||ex instanceof UnknownErrorException){return ex;}if(!(ex instanceof Error||_typeof(ex)==="object"&&ex!==null)){unreachable(\'wrapReason: Expected "reason" to be a (possibly cloned) Error.\');}switch(ex.name){case"AbortException":return new AbortException(ex.message);case"InvalidPDFException":return new InvalidPDFException(ex.message);case"PasswordException":return new PasswordException(ex.message,ex.code);case"ResponseException":return new ResponseException(ex.message,ex.status,ex.missing);case"UnknownErrorException":return new UnknownErrorException(ex.message,ex.details);}return new UnknownErrorException(ex.message,ex.toString());}var _messageAC=/*#__PURE__*/new WeakMap();var _MessageHandler_brand=/*#__PURE__*/new WeakSet();var MessageHandler=/*#__PURE__*/function(){function MessageHandler(_sourceName,_targetName,_comObj){_classCallCheck(this,MessageHandler);_classPrivateMethodInitSpec(this,_MessageHandler_brand);_classPrivateFieldInitSpec(this,_messageAC,new AbortController());this.sourceName=_sourceName;this.targetName=_targetName;this.comObj=_comObj;this.callbackId=1;this.streamId=1;this.streamSinks=Object.create(null);this.streamControllers=Object.create(null);this.callbackCapabilities=Object.create(null);this.actionHandler=Object.create(null);_comObj.addEventListener("message",_assertClassBrand(_MessageHandler_brand,this,_onMessage).bind(this),{signal:_classPrivateFieldGet(_messageAC,this).signal});}return _createClass(MessageHandler,[{key:"on",value:function on(actionName,handler){var ah=this.actionHandler;if(ah[actionName]){throw new Error("There is already an actionName called \\"".concat(actionName,"\\""));}ah[actionName]=handler;}},{key:"send",value:function send(actionName,data,transfers){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:actionName,data:data},transfers);}},{key:"sendWithPromise",value:function sendWithPromise(actionName,data,transfers){var callbackId=this.callbackId++;var capability=Promise.withResolvers();this.callbackCapabilities[callbackId]=capability;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:actionName,callbackId:callbackId,data:data},transfers);}catch(ex){capability.reject(ex);}return capability.promise;}},{key:"sendWithStream",value:function sendWithStream(actionName,data,queueingStrategy,transfers){var _this303=this;var streamId=this.streamId++,sourceName=this.sourceName,targetName=this.targetName,comObj=this.comObj;return new ReadableStream({start:function start(controller){var startCapability=Promise.withResolvers();_this303.streamControllers[streamId]={controller:controller,startCall:startCapability,pullCall:null,cancelCall:null,isClosed:false};comObj.postMessage({sourceName:sourceName,targetName:targetName,action:actionName,streamId:streamId,data:data,desiredSize:controller.desiredSize},transfers);return startCapability.promise;},pull:function pull(controller){var pullCapability=Promise.withResolvers();_this303.streamControllers[streamId].pullCall=pullCapability;comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.PULL,streamId:streamId,desiredSize:controller.desiredSize});return pullCapability.promise;},cancel:function cancel(reason){assert(reason instanceof Error,"cancel must have a valid reason");var cancelCapability=Promise.withResolvers();_this303.streamControllers[streamId].cancelCall=cancelCapability;_this303.streamControllers[streamId].isClosed=true;comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.CANCEL,streamId:streamId,reason:wrapReason(reason)});return cancelCapability.promise;}},queueingStrategy);}},{key:"destroy",value:function destroy(){var _classPrivateFieldGet4;(_classPrivateFieldGet4=_classPrivateFieldGet(_messageAC,this))===null||_classPrivateFieldGet4===void 0||_classPrivateFieldGet4.abort();_classPrivateFieldSet(_messageAC,this,null);}}]);}();function _onMessage(_ref143){var data=_ref143.data;if(data.targetName!==this.sourceName){return;}if(data.stream){_assertClassBrand(_MessageHandler_brand,this,_processStreamMessage).call(this,data);return;}if(data.callback){var callbackId=data.callbackId;var capability=this.callbackCapabilities[callbackId];if(!capability){throw new Error("Cannot resolve callback ".concat(callbackId));}delete this.callbackCapabilities[callbackId];if(data.callback===CallbackKind.DATA){capability.resolve(data.data);}else if(data.callback===CallbackKind.ERROR){capability.reject(wrapReason(data.reason));}else{throw new Error("Unexpected callback case");}return;}var action=this.actionHandler[data.action];if(!action){throw new Error("Unknown action from worker: ".concat(data.action));}if(data.callbackId){var sourceName=this.sourceName,targetName=data.sourceName,comObj=this.comObj;Promise["try"](action,data.data).then(function(result){comObj.postMessage({sourceName:sourceName,targetName:targetName,callback:CallbackKind.DATA,callbackId:data.callbackId,data:result});},function(reason){comObj.postMessage({sourceName:sourceName,targetName:targetName,callback:CallbackKind.ERROR,callbackId:data.callbackId,reason:wrapReason(reason)});});return;}if(data.streamId){_assertClassBrand(_MessageHandler_brand,this,_createStreamSink).call(this,data);return;}action(data.data);}function _createStreamSink(data){var streamId=data.streamId,sourceName=this.sourceName,targetName=data.sourceName,comObj=this.comObj;var self=this,action=this.actionHandler[data.action];var streamSink={enqueue:function enqueue(chunk){var size=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var transfers=arguments.length>2?arguments[2]:undefined;if(this.isCancelled){return;}var lastDesiredSize=this.desiredSize;this.desiredSize-=size;if(lastDesiredSize>0&&this.desiredSize<=0){this.sinkCapability=Promise.withResolvers();this.ready=this.sinkCapability.promise;}comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.ENQUEUE,streamId:streamId,chunk:chunk},transfers);},close:function close(){if(this.isCancelled){return;}this.isCancelled=true;comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.CLOSE,streamId:streamId});delete self.streamSinks[streamId];},error:function error(reason){assert(reason instanceof Error,"error must have a valid reason");if(this.isCancelled){return;}this.isCancelled=true;comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.ERROR,streamId:streamId,reason:wrapReason(reason)});},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:false,desiredSize:data.desiredSize,ready:null};streamSink.sinkCapability.resolve();streamSink.ready=streamSink.sinkCapability.promise;this.streamSinks[streamId]=streamSink;Promise["try"](action,data.data,streamSink).then(function(){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.START_COMPLETE,streamId:streamId,success:true});},function(reason){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.START_COMPLETE,streamId:streamId,reason:wrapReason(reason)});});}function _processStreamMessage(data){var streamId=data.streamId,sourceName=this.sourceName,targetName=data.sourceName,comObj=this.comObj;var streamController=this.streamControllers[streamId],streamSink=this.streamSinks[streamId];switch(data.stream){case StreamKind.START_COMPLETE:if(data.success){streamController.startCall.resolve();}else{streamController.startCall.reject(wrapReason(data.reason));}break;case StreamKind.PULL_COMPLETE:if(data.success){streamController.pullCall.resolve();}else{streamController.pullCall.reject(wrapReason(data.reason));}break;case StreamKind.PULL:if(!streamSink){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.PULL_COMPLETE,streamId:streamId,success:true});break;}if(streamSink.desiredSize<=0&&data.desiredSize>0){streamSink.sinkCapability.resolve();}streamSink.desiredSize=data.desiredSize;Promise["try"](streamSink.onPull||onFn).then(function(){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.PULL_COMPLETE,streamId:streamId,success:true});},function(reason){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.PULL_COMPLETE,streamId:streamId,reason:wrapReason(reason)});});break;case StreamKind.ENQUEUE:assert(streamController,"enqueue should have stream controller");if(streamController.isClosed){break;}streamController.controller.enqueue(data.chunk);break;case StreamKind.CLOSE:assert(streamController,"close should have stream controller");if(streamController.isClosed){break;}streamController.isClosed=true;streamController.controller.close();_assertClassBrand(_MessageHandler_brand,this,_deleteStreamController).call(this,streamController,streamId);break;case StreamKind.ERROR:assert(streamController,"error should have stream controller");streamController.controller.error(wrapReason(data.reason));_assertClassBrand(_MessageHandler_brand,this,_deleteStreamController).call(this,streamController,streamId);break;case StreamKind.CANCEL_COMPLETE:if(data.success){streamController.cancelCall.resolve();}else{streamController.cancelCall.reject(wrapReason(data.reason));}_assertClassBrand(_MessageHandler_brand,this,_deleteStreamController).call(this,streamController,streamId);break;case StreamKind.CANCEL:if(!streamSink){break;}var dataReason=wrapReason(data.reason);Promise["try"](streamSink.onCancel||onFn,dataReason).then(function(){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.CANCEL_COMPLETE,streamId:streamId,success:true});},function(reason){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.CANCEL_COMPLETE,streamId:streamId,reason:wrapReason(reason)});});streamSink.sinkCapability.reject(dataReason);streamSink.isCancelled=true;delete this.streamSinks[streamId];break;default:throw new Error("Unexpected stream case");}}function _deleteStreamController(_x259,_x260){return _deleteStreamController2.apply(this,arguments);}function _deleteStreamController2(){_deleteStreamController2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee131(streamController,streamId){var _streamController$sta,_streamController$pul,_streamController$can;return _regeneratorRuntime().wrap(function _callee131$(_context151){while(1)switch(_context151.prev=_context151.next){case 0:_context151.next=2;return Promise.allSettled([(_streamController$sta=streamController.startCall)===null||_streamController$sta===void 0?void 0:_streamController$sta.promise,(_streamController$pul=streamController.pullCall)===null||_streamController$pul===void 0?void 0:_streamController$pul.promise,(_streamController$can=streamController.cancelCall)===null||_streamController$can===void 0?void 0:_streamController$can.promise]);case 2:delete this.streamControllers[streamId];case 3:case"end":return _context151.stop();}},_callee131,this);}));return _deleteStreamController2.apply(this,arguments);};// ./src/core/writer.js\nfunction writeObject(_x206,_x207,_x208,_x209){return _writeObject.apply(this,arguments);}function _writeObject(){_writeObject=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee112(ref,obj,buffer,_ref124){var _ref124$encrypt,encrypt,transform;return _regeneratorRuntime().wrap(function _callee112$(_context131){while(1)switch(_context131.prev=_context131.next){case 0:_ref124$encrypt=_ref124.encrypt,encrypt=_ref124$encrypt===void 0?null:_ref124$encrypt;transform=encrypt===null||encrypt===void 0?void 0:encrypt.createCipherTransform(ref.num,ref.gen);buffer.push("".concat(ref.num," ").concat(ref.gen," obj\\n"));if(!(obj instanceof Dict)){_context131.next=8;break;}_context131.next=6;return writeDict(obj,buffer,transform);case 6:_context131.next=16;break;case 8:if(!(obj instanceof BaseStream)){_context131.next=13;break;}_context131.next=11;return writeStream(obj,buffer,transform);case 11:_context131.next=16;break;case 13:if(!(Array.isArray(obj)||ArrayBuffer.isView(obj))){_context131.next=16;break;}_context131.next=16;return writeArray(obj,buffer,transform);case 16:buffer.push("\\nendobj\\n");case 17:case"end":return _context131.stop();}},_callee112);}));return _writeObject.apply(this,arguments);}function writeDict(_x210,_x211,_x212){return _writeDict.apply(this,arguments);}function _writeDict(){_writeDict=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee113(dict,buffer,transform){var _iterator255,_step255,key;return _regeneratorRuntime().wrap(function _callee113$(_context132){while(1)switch(_context132.prev=_context132.next){case 0:buffer.push("<<");_iterator255=_createForOfIteratorHelper(dict.getKeys());_context132.prev=2;_iterator255.s();case 4:if((_step255=_iterator255.n()).done){_context132.next=11;break;}key=_step255.value;buffer.push(" /".concat(escapePDFName(key)," "));_context132.next=9;return writeValue(dict.getRaw(key),buffer,transform);case 9:_context132.next=4;break;case 11:_context132.next=16;break;case 13:_context132.prev=13;_context132.t0=_context132["catch"](2);_iterator255.e(_context132.t0);case 16:_context132.prev=16;_iterator255.f();return _context132.finish(16);case 19:buffer.push(">>");case 20:case"end":return _context132.stop();}},_callee113,null,[[2,13,16,19]]);}));return _writeDict.apply(this,arguments);}function writeStream(_x213,_x214,_x215){return _writeStream.apply(this,arguments);}function _writeStream(){_writeStream=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee115(stream,buffer,transform){var bytes,dict,_yield$Promise$all13,_yield$Promise$all14,filter,params,filterZero,isFilterZeroFlateDecode,MIN_LENGTH_FOR_COMPRESSING,cs,writer,buf,newFilter,newParams,string;return _regeneratorRuntime().wrap(function _callee115$(_context134){while(1)switch(_context134.prev=_context134.next){case 0:bytes=stream.getBytes();dict=stream.dict;_context134.next=4;return Promise.all([dict.getAsync("Filter"),dict.getAsync("DecodeParms")]);case 4:_yield$Promise$all13=_context134.sent;_yield$Promise$all14=_slicedToArray(_yield$Promise$all13,2);filter=_yield$Promise$all14[0];params=_yield$Promise$all14[1];if(!Array.isArray(filter)){_context134.next=14;break;}_context134.next=11;return dict.xref.fetchIfRefAsync(filter[0]);case 11:_context134.t0=_context134.sent;_context134.next=15;break;case 14:_context134.t0=filter;case 15:filterZero=_context134.t0;isFilterZeroFlateDecode=isName(filterZero,"FlateDecode");MIN_LENGTH_FOR_COMPRESSING=256;if(!(bytes.length>=MIN_LENGTH_FOR_COMPRESSING||isFilterZeroFlateDecode)){_context134.next=37;break;}_context134.prev=19;cs=new CompressionStream("deflate");writer=cs.writable.getWriter();_context134.next=24;return writer.ready;case 24:writer.write(bytes).then(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee114(){return _regeneratorRuntime().wrap(function _callee114$(_context133){while(1)switch(_context133.prev=_context133.next){case 0:_context133.next=2;return writer.ready;case 2:_context133.next=4;return writer.close();case 4:case"end":return _context133.stop();}},_callee114);})))["catch"](function(){});_context134.next=27;return new Response(cs.readable).arrayBuffer();case 27:buf=_context134.sent;bytes=new Uint8Array(buf);if(!filter){newFilter=Name.get("FlateDecode");}else if(!isFilterZeroFlateDecode){newFilter=Array.isArray(filter)?[Name.get("FlateDecode")].concat(_toConsumableArray(filter)):[Name.get("FlateDecode"),filter];if(params){newParams=Array.isArray(params)?[null].concat(_toConsumableArray(params)):[null,params];}}if(newFilter){dict.set("Filter",newFilter);}if(newParams){dict.set("DecodeParms",newParams);}_context134.next=37;break;case 34:_context134.prev=34;_context134.t1=_context134["catch"](19);info("writeStream - cannot compress data: \\"".concat(_context134.t1,"\\"."));case 37:string=bytesToString(bytes);if(transform){string=transform.encryptString(string);}dict.set("Length",string.length);_context134.next=42;return writeDict(dict,buffer,transform);case 42:buffer.push(" stream\\n",string,"\\nendstream");case 43:case"end":return _context134.stop();}},_callee115,null,[[19,34]]);}));return _writeStream.apply(this,arguments);}function writeArray(_x216,_x217,_x218){return _writeArray.apply(this,arguments);}function _writeArray(){_writeArray=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee116(array,buffer,transform){var first,_iterator256,_step256,val;return _regeneratorRuntime().wrap(function _callee116$(_context135){while(1)switch(_context135.prev=_context135.next){case 0:buffer.push("[");first=true;_iterator256=_createForOfIteratorHelper(array);_context135.prev=3;_iterator256.s();case 5:if((_step256=_iterator256.n()).done){_context135.next=12;break;}val=_step256.value;if(!first){buffer.push(" ");}else{first=false;}_context135.next=10;return writeValue(val,buffer,transform);case 10:_context135.next=5;break;case 12:_context135.next=17;break;case 14:_context135.prev=14;_context135.t0=_context135["catch"](3);_iterator256.e(_context135.t0);case 17:_context135.prev=17;_iterator256.f();return _context135.finish(17);case 20:buffer.push("]");case 21:case"end":return _context135.stop();}},_callee116,null,[[3,14,17,20]]);}));return _writeArray.apply(this,arguments);}function writeValue(_x219,_x220,_x221){return _writeValue.apply(this,arguments);}function _writeValue(){_writeValue=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee117(value,buffer,transform){return _regeneratorRuntime().wrap(function _callee117$(_context136){while(1)switch(_context136.prev=_context136.next){case 0:if(!(value instanceof Name)){_context136.next=4;break;}buffer.push("/".concat(escapePDFName(value.name)));_context136.next=37;break;case 4:if(!(value instanceof Ref)){_context136.next=8;break;}buffer.push("".concat(value.num," ").concat(value.gen," R"));_context136.next=37;break;case 8:if(!(Array.isArray(value)||ArrayBuffer.isView(value))){_context136.next=13;break;}_context136.next=11;return writeArray(value,buffer,transform);case 11:_context136.next=37;break;case 13:if(!(typeof value==="string")){_context136.next=18;break;}if(transform){value=transform.encryptString(value);}buffer.push("(".concat(escapeString(value),")"));_context136.next=37;break;case 18:if(!(typeof value==="number")){_context136.next=22;break;}buffer.push(numberToString(value));_context136.next=37;break;case 22:if(!(typeof value==="boolean")){_context136.next=26;break;}buffer.push(value.toString());_context136.next=37;break;case 26:if(!(value instanceof Dict)){_context136.next=31;break;}_context136.next=29;return writeDict(value,buffer,transform);case 29:_context136.next=37;break;case 31:if(!(value instanceof BaseStream)){_context136.next=36;break;}_context136.next=34;return writeStream(value,buffer,transform);case 34:_context136.next=37;break;case 36:if(value===null){buffer.push("null");}else{warn("Unhandled value in writer: ".concat(_typeof(value),", please file a bug."));}case 37:case"end":return _context136.stop();}},_callee117);}));return _writeValue.apply(this,arguments);}function writeInt(number,size,offset,buffer){for(var i=size+offset-1;i>offset-1;i--){buffer[i]=number&0xff;number>>=8;}return offset+size;}function writeString(string,offset,buffer){for(var i=0,len=string.length;i<len;i++){buffer[offset+i]=string.charCodeAt(i)&0xff;}}function computeMD5(filesize,xrefInfo){var time=Math.floor(Date.now()/1000);var filename=xrefInfo.filename||"";var md5Buffer=[time.toString(),filename,filesize.toString()];var md5BufferLen=md5Buffer.reduce(function(a,str){return a+str.length;},0);for(var _i81=0,_Object$values=Object.values(xrefInfo.info);_i81<_Object$values.length;_i81++){var value=_Object$values[_i81];md5Buffer.push(value);md5BufferLen+=value.length;}var array=new Uint8Array(md5BufferLen);var offset=0;for(var _i82=0,_md5Buffer=md5Buffer;_i82<_md5Buffer.length;_i82++){var str=_md5Buffer[_i82];writeString(str,offset,array);offset+=str.length;}return bytesToString(calculateMD5(array));}function writeXFADataForAcroform(str,changes){var xml=new SimpleXMLParser({hasAttributes:true}).parseFromString(str);var _iterator238=_createForOfIteratorHelper(changes),_step238;try{for(_iterator238.s();!(_step238=_iterator238.n()).done;){var xfa=_step238.value.xfa;if(!xfa){continue;}var path=xfa.path,value=xfa.value;if(!path){continue;}var nodePath=parseXFAPath(path);var node=xml.documentElement.searchNode(nodePath,0);if(!node&&nodePath.length>1){node=xml.documentElement.searchNode([nodePath.at(-1)],0);}if(node){node.childNodes=Array.isArray(value)?value.map(function(val){return new SimpleDOMNode("value",val);}):[new SimpleDOMNode("#text",value)];}else{warn("Node not found for path: ".concat(path));}}}catch(err){_iterator238.e(err);}finally{_iterator238.f();}var buffer=[];xml.documentElement.dump(buffer);return buffer.join("");}function updateAcroform(_x222){return _updateAcroform.apply(this,arguments);}function _updateAcroform(){_updateAcroform=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee118(_ref125){var xref,acroForm,acroFormRef,hasXfa,hasXfaDatasetsEntry,xfaDatasetsRef,needAppearances,changes,dict,newXfa;return _regeneratorRuntime().wrap(function _callee118$(_context137){while(1)switch(_context137.prev=_context137.next){case 0:xref=_ref125.xref,acroForm=_ref125.acroForm,acroFormRef=_ref125.acroFormRef,hasXfa=_ref125.hasXfa,hasXfaDatasetsEntry=_ref125.hasXfaDatasetsEntry,xfaDatasetsRef=_ref125.xfaDatasetsRef,needAppearances=_ref125.needAppearances,changes=_ref125.changes;if(hasXfa&&!hasXfaDatasetsEntry&&!xfaDatasetsRef){warn("XFA - Cannot save it");}if(!(!needAppearances&&(!hasXfa||!xfaDatasetsRef||hasXfaDatasetsEntry))){_context137.next=4;break;}return _context137.abrupt("return");case 4:dict=acroForm.clone();if(hasXfa&&!hasXfaDatasetsEntry){newXfa=acroForm.get("XFA").slice();newXfa.splice(2,0,"datasets");newXfa.splice(3,0,xfaDatasetsRef);dict.set("XFA",newXfa);}if(needAppearances){dict.set("NeedAppearances",true);}changes.put(acroFormRef,{data:dict});case 8:case"end":return _context137.stop();}},_callee118);}));return _updateAcroform.apply(this,arguments);}function updateXFA(_ref126){var xfaData=_ref126.xfaData,xfaDatasetsRef=_ref126.xfaDatasetsRef,changes=_ref126.changes,xref=_ref126.xref;if(xfaData===null){var datasets=xref.fetchIfRef(xfaDatasetsRef);xfaData=writeXFADataForAcroform(datasets.getString(),changes);}var xfaDataStream=new StringStream(xfaData);xfaDataStream.dict=new Dict(xref);xfaDataStream.dict.set("Type",Name.get("EmbeddedFile"));changes.put(xfaDatasetsRef,{data:xfaDataStream});}function getXRefTable(_x223,_x224,_x225,_x226,_x227){return _getXRefTable.apply(this,arguments);}function _getXRefTable(){_getXRefTable=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee119(xrefInfo,baseOffset,newRefs,newXref,buffer){var indexes,indexesPosition,_iterator257,_step257,_step257$value,ref,data;return _regeneratorRuntime().wrap(function _callee119$(_context138){while(1)switch(_context138.prev=_context138.next){case 0:buffer.push("xref\\n");indexes=getIndexes(newRefs);indexesPosition=0;_iterator257=_createForOfIteratorHelper(newRefs);try{for(_iterator257.s();!(_step257=_iterator257.n()).done;){_step257$value=_step257.value,ref=_step257$value.ref,data=_step257$value.data;if(ref.num===indexes[indexesPosition]){buffer.push("".concat(indexes[indexesPosition]," ").concat(indexes[indexesPosition+1],"\\n"));indexesPosition+=2;}if(data!==null){buffer.push("".concat(baseOffset.toString().padStart(10,"0")," ").concat(Math.min(ref.gen,0xffff).toString().padStart(5,"0")," n\\r\\n"));baseOffset+=data.length;}else{buffer.push("0000000000 ".concat(Math.min(ref.gen+1,0xffff).toString().padStart(5,"0")," f\\r\\n"));}}}catch(err){_iterator257.e(err);}finally{_iterator257.f();}computeIDs(baseOffset,xrefInfo,newXref);buffer.push("trailer\\n");_context138.next=9;return writeDict(newXref,buffer);case 9:buffer.push("\\nstartxref\\n",baseOffset.toString(),"\\n%%EOF\\n");case 10:case"end":return _context138.stop();}},_callee119);}));return _getXRefTable.apply(this,arguments);}function getIndexes(newRefs){var indexes=[];var _iterator239=_createForOfIteratorHelper(newRefs),_step239;try{for(_iterator239.s();!(_step239=_iterator239.n()).done;){var ref=_step239.value.ref;if(ref.num===indexes.at(-2)+indexes.at(-1)){indexes[indexes.length-1]+=1;}else{indexes.push(ref.num,1);}}}catch(err){_iterator239.e(err);}finally{_iterator239.f();}return indexes;}function getXRefStreamTable(_x228,_x229,_x230,_x231,_x232){return _getXRefStreamTable.apply(this,arguments);}function _getXRefStreamTable(){_getXRefStreamTable=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee120(xrefInfo,baseOffset,newRefs,newXref,buffer){var xrefTableData,maxOffset,maxGen,_iterator258,_step258,_step258$value,ref,_data4,_gen,offsetSize,maxGenSize,sizes,structSize,data,stream,offset,_i84,_xrefTableData,_xrefTableData$_i,type,objOffset,gen;return _regeneratorRuntime().wrap(function _callee120$(_context139){while(1)switch(_context139.prev=_context139.next){case 0:xrefTableData=[];maxOffset=0;maxGen=0;_iterator258=_createForOfIteratorHelper(newRefs);try{for(_iterator258.s();!(_step258=_iterator258.n()).done;){_step258$value=_step258.value,ref=_step258$value.ref,_data4=_step258$value.data;_gen=void 0;maxOffset=Math.max(maxOffset,baseOffset);if(_data4!==null){_gen=Math.min(ref.gen,0xffff);xrefTableData.push([1,baseOffset,_gen]);baseOffset+=_data4.length;}else{_gen=Math.min(ref.gen+1,0xffff);xrefTableData.push([0,0,_gen]);}maxGen=Math.max(maxGen,_gen);}}catch(err){_iterator258.e(err);}finally{_iterator258.f();}newXref.set("Index",getIndexes(newRefs));offsetSize=getSizeInBytes(maxOffset);maxGenSize=getSizeInBytes(maxGen);sizes=[1,offsetSize,maxGenSize];newXref.set("W",sizes);computeIDs(baseOffset,xrefInfo,newXref);structSize=sizes.reduce(function(a,x){return a+x;},0);data=new Uint8Array(structSize*xrefTableData.length);stream=new Stream(data);stream.dict=newXref;offset=0;for(_i84=0,_xrefTableData=xrefTableData;_i84<_xrefTableData.length;_i84++){_xrefTableData$_i=_slicedToArray(_xrefTableData[_i84],3),type=_xrefTableData$_i[0],objOffset=_xrefTableData$_i[1],gen=_xrefTableData$_i[2];offset=writeInt(type,sizes[0],offset,data);offset=writeInt(objOffset,sizes[1],offset,data);offset=writeInt(gen,sizes[2],offset,data);}_context139.next=19;return writeObject(xrefInfo.newRef,stream,buffer,{});case 19:buffer.push("startxref\\n",baseOffset.toString(),"\\n%%EOF\\n");case 20:case"end":return _context139.stop();}},_callee120);}));return _getXRefStreamTable.apply(this,arguments);}function computeIDs(baseOffset,xrefInfo,newXref){if(Array.isArray(xrefInfo.fileIds)&&xrefInfo.fileIds.length>0){var md5=computeMD5(baseOffset,xrefInfo);newXref.set("ID",[xrefInfo.fileIds[0],md5]);}}function getTrailerDict(xrefInfo,changes,useXrefStream){var newXref=new Dict(null);newXref.set("Prev",xrefInfo.startXRef);var refForXrefTable=xrefInfo.newRef;if(useXrefStream){changes.put(refForXrefTable,{data:""});newXref.set("Size",refForXrefTable.num+1);newXref.set("Type",Name.get("XRef"));}else{newXref.set("Size",refForXrefTable.num);}if(xrefInfo.rootRef!==null){newXref.set("Root",xrefInfo.rootRef);}if(xrefInfo.infoRef!==null){newXref.set("Info",xrefInfo.infoRef);}if(xrefInfo.encryptRef!==null){newXref.set("Encrypt",xrefInfo.encryptRef);}return newXref;}function writeChanges(_x233,_x234){return _writeChanges.apply(this,arguments);}function _writeChanges(){_writeChanges=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee121(changes,xref){var buffer,newRefs,_iterator259,_step259,_step259$value,ref,data,_args143=arguments;return _regeneratorRuntime().wrap(function _callee121$(_context140){while(1)switch(_context140.prev=_context140.next){case 0:buffer=_args143.length>2&&_args143[2]!==undefined?_args143[2]:[];newRefs=[];_iterator259=_createForOfIteratorHelper(changes.items());_context140.prev=3;_iterator259.s();case 5:if((_step259=_iterator259.n()).done){_context140.next=16;break;}_step259$value=_slicedToArray(_step259.value,2),ref=_step259$value[0],data=_step259$value[1].data;if(!(data===null||typeof data==="string")){_context140.next=10;break;}newRefs.push({ref:ref,data:data});return _context140.abrupt("continue",14);case 10:_context140.next=12;return writeObject(ref,data,buffer,xref);case 12:newRefs.push({ref:ref,data:buffer.join("")});buffer.length=0;case 14:_context140.next=5;break;case 16:_context140.next=21;break;case 18:_context140.prev=18;_context140.t0=_context140["catch"](3);_iterator259.e(_context140.t0);case 21:_context140.prev=21;_iterator259.f();return _context140.finish(21);case 24:return _context140.abrupt("return",newRefs.sort(function(a,b){return a.ref.num-b.ref.num;}));case 25:case"end":return _context140.stop();}},_callee121,null,[[3,18,21,24]]);}));return _writeChanges.apply(this,arguments);}function incrementalUpdate(_x235){return _incrementalUpdate.apply(this,arguments);}function _incrementalUpdate(){_incrementalUpdate=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee122(_ref127){var originalData,xrefInfo,changes,_ref127$xref,xref,_ref127$hasXfa,hasXfa,_ref127$xfaDatasetsRe,xfaDatasetsRef,_ref127$hasXfaDataset,hasXfaDatasetsEntry,needAppearances,_ref127$acroFormRef,acroFormRef,_ref127$acroForm,acroForm,_ref127$xfaData,xfaData,_ref127$useXrefStream,useXrefStream,newXref,buffer,newRefs,baseOffset,lastByte,_iterator260,_step260,data,totalLength,array,offset,_i85,_buffer2,str;return _regeneratorRuntime().wrap(function _callee122$(_context141){while(1)switch(_context141.prev=_context141.next){case 0:originalData=_ref127.originalData,xrefInfo=_ref127.xrefInfo,changes=_ref127.changes,_ref127$xref=_ref127.xref,xref=_ref127$xref===void 0?null:_ref127$xref,_ref127$hasXfa=_ref127.hasXfa,hasXfa=_ref127$hasXfa===void 0?false:_ref127$hasXfa,_ref127$xfaDatasetsRe=_ref127.xfaDatasetsRef,xfaDatasetsRef=_ref127$xfaDatasetsRe===void 0?null:_ref127$xfaDatasetsRe,_ref127$hasXfaDataset=_ref127.hasXfaDatasetsEntry,hasXfaDatasetsEntry=_ref127$hasXfaDataset===void 0?false:_ref127$hasXfaDataset,needAppearances=_ref127.needAppearances,_ref127$acroFormRef=_ref127.acroFormRef,acroFormRef=_ref127$acroFormRef===void 0?null:_ref127$acroFormRef,_ref127$acroForm=_ref127.acroForm,acroForm=_ref127$acroForm===void 0?null:_ref127$acroForm,_ref127$xfaData=_ref127.xfaData,xfaData=_ref127$xfaData===void 0?null:_ref127$xfaData,_ref127$useXrefStream=_ref127.useXrefStream,useXrefStream=_ref127$useXrefStream===void 0?false:_ref127$useXrefStream;_context141.next=3;return updateAcroform({xref:xref,acroForm:acroForm,acroFormRef:acroFormRef,hasXfa:hasXfa,hasXfaDatasetsEntry:hasXfaDatasetsEntry,xfaDatasetsRef:xfaDatasetsRef,needAppearances:needAppearances,changes:changes});case 3:if(hasXfa){updateXFA({xfaData:xfaData,xfaDatasetsRef:xfaDatasetsRef,changes:changes,xref:xref});}newXref=getTrailerDict(xrefInfo,changes,useXrefStream);buffer=[];_context141.next=8;return writeChanges(changes,xref,buffer);case 8:newRefs=_context141.sent;baseOffset=originalData.length;lastByte=originalData.at(-1);if(lastByte!==0x0a&&lastByte!==0x0d){buffer.push("\\n");baseOffset+=1;}_iterator260=_createForOfIteratorHelper(newRefs);try{for(_iterator260.s();!(_step260=_iterator260.n()).done;){data=_step260.value.data;if(data!==null){buffer.push(data);}}}catch(err){_iterator260.e(err);}finally{_iterator260.f();}_context141.next=16;return useXrefStream?getXRefStreamTable(xrefInfo,baseOffset,newRefs,newXref,buffer):getXRefTable(xrefInfo,baseOffset,newRefs,newXref,buffer);case 16:totalLength=buffer.reduce(function(a,str){return a+str.length;},originalData.length);array=new Uint8Array(totalLength);array.set(originalData);offset=originalData.length;for(_i85=0,_buffer2=buffer;_i85<_buffer2.length;_i85++){str=_buffer2[_i85];writeString(str,offset,array);offset+=str.length;}return _context141.abrupt("return",array);case 22:case"end":return _context141.stop();}},_callee122);}));return _incrementalUpdate.apply(this,arguments);};// ./src/core/worker_stream.js\nvar PDFWorkerStream=/*#__PURE__*/function(){function PDFWorkerStream(msgHandler){_classCallCheck(this,PDFWorkerStream);this._msgHandler=msgHandler;this._contentLength=null;this._fullRequestReader=null;this._rangeRequestReaders=[];this.options=null;}return _createClass(PDFWorkerStream,[{key:"getFullReader",value:function getFullReader(options){if(options){this.options=options;}assert(!this._fullRequestReader,"PDFWorkerStream.getFullReader can only be called once.");this._fullRequestReader=new PDFWorkerStreamReader(this._msgHandler);return this._fullRequestReader;}},{key:"getRangeReader",value:function getRangeReader(begin,end){var reader=new PDFWorkerStreamRangeReader(begin,end,this._msgHandler);this._rangeRequestReaders.push(reader);return reader;}},{key:"cancelAllRequests",value:function cancelAllRequests(reason){var _this$_fullRequestRea;(_this$_fullRequestRea=this._fullRequestReader)===null||_this$_fullRequestRea===void 0||_this$_fullRequestRea.cancel(reason);var _iterator240=_createForOfIteratorHelper(this._rangeRequestReaders.slice(0)),_step240;try{for(_iterator240.s();!(_step240=_iterator240.n()).done;){var reader=_step240.value;reader.cancel(reason);}}catch(err){_iterator240.e(err);}finally{_iterator240.f();}}}]);}();var PDFWorkerStreamReader=/*#__PURE__*/function(){function PDFWorkerStreamReader(msgHandler){var _this304=this;_classCallCheck(this,PDFWorkerStreamReader);this._msgHandler=msgHandler;this.onProgress=null;this._contentLength=null;this._isRangeSupported=false;this._isStreamingSupported=false;var readableStream=this._msgHandler.sendWithStream("GetReader");this._reader=readableStream.getReader();this._headersReady=this._msgHandler.sendWithPromise("ReaderHeadersReady").then(function(data){_this304._isStreamingSupported=data.isStreamingSupported;_this304._isRangeSupported=data.isRangeSupported;_this304._contentLength=data.contentLength;});}return _createClass(PDFWorkerStreamReader,[{key:"headersReady",get:function get(){return this._headersReady;}},{key:"contentLength",get:function get(){return this._contentLength;}},{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported;}},{key:"isRangeSupported",get:function get(){return this._isRangeSupported;}},{key:"read",value:function(){var _read=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee101(){var _yield$this$_reader$r,value,done;return _regeneratorRuntime().wrap(function _callee101$(_context118){while(1)switch(_context118.prev=_context118.next){case 0:_context118.next=2;return this._reader.read();case 2:_yield$this$_reader$r=_context118.sent;value=_yield$this$_reader$r.value;done=_yield$this$_reader$r.done;if(!done){_context118.next=7;break;}return _context118.abrupt("return",{value:undefined,done:true});case 7:return _context118.abrupt("return",{value:value.buffer,done:false});case 8:case"end":return _context118.stop();}},_callee101,this);}));function read(){return _read.apply(this,arguments);}return read;}()},{key:"cancel",value:function cancel(reason){this._reader.cancel(reason);}}]);}();var PDFWorkerStreamRangeReader=/*#__PURE__*/function(){function PDFWorkerStreamRangeReader(begin,end,msgHandler){_classCallCheck(this,PDFWorkerStreamRangeReader);this._msgHandler=msgHandler;this.onProgress=null;var readableStream=this._msgHandler.sendWithStream("GetRangeReader",{begin:begin,end:end});this._reader=readableStream.getReader();}return _createClass(PDFWorkerStreamRangeReader,[{key:"isStreamingSupported",get:function get(){return false;}},{key:"read",value:function(){var _read2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee102(){var _yield$this$_reader$r2,value,done;return _regeneratorRuntime().wrap(function _callee102$(_context119){while(1)switch(_context119.prev=_context119.next){case 0:_context119.next=2;return this._reader.read();case 2:_yield$this$_reader$r2=_context119.sent;value=_yield$this$_reader$r2.value;done=_yield$this$_reader$r2.done;if(!done){_context119.next=7;break;}return _context119.abrupt("return",{value:undefined,done:true});case 7:return _context119.abrupt("return",{value:value.buffer,done:false});case 8:case"end":return _context119.stop();}},_callee102,this);}));function read(){return _read2.apply(this,arguments);}return read;}()},{key:"cancel",value:function cancel(reason){this._reader.cancel(reason);}}]);}();;// ./src/core/worker.js\nvar WorkerTask=/*#__PURE__*/function(){function WorkerTask(name){_classCallCheck(this,WorkerTask);this.name=name;this.terminated=false;this._capability=Promise.withResolvers();}return _createClass(WorkerTask,[{key:"finished",get:function get(){return this._capability.promise;}},{key:"finish",value:function finish(){this._capability.resolve();}},{key:"terminate",value:function terminate(){this.terminated=true;}},{key:"ensureNotTerminated",value:function ensureNotTerminated(){if(this.terminated){throw new Error("Worker task was terminated");}}}]);}();var _WorkerMessageHandler=/*#__PURE__*/function(){function _WorkerMessageHandler(){_classCallCheck(this,_WorkerMessageHandler);}return _createClass(_WorkerMessageHandler,null,[{key:"setup",value:function setup(handler,port){var _this305=this;var testMessageProcessed=false;handler.on("test",function(data){if(testMessageProcessed){return;}testMessageProcessed=true;handler.send("test",data instanceof Uint8Array);});handler.on("configure",function(data){setVerbosityLevel(data.verbosity);});handler.on("GetDocRequest",function(data){return _this305.createDocumentHandler(data,port);});}},{key:"createDocumentHandler",value:function createDocumentHandler(docParams,port){var pdfManager;var terminated=false;var cancelXHRs=null;var WorkerTasks=new Set();var verbosity=getVerbosityLevel();var _docParams=docParams,docId=_docParams.docId,apiVersion=_docParams.apiVersion;var workerVersion="5.0.0";if(apiVersion!==workerVersion){throw new Error("The API version \\"".concat(apiVersion,"\\" does not match ")+"the Worker version \\"".concat(workerVersion,"\\"."));}var enumerableProperties=[];for(var property in[]){enumerableProperties.push(property);}if(enumerableProperties.length){throw new Error("The `Array.prototype` contains unexpected enumerable properties: "+enumerableProperties.join(", ")+"; thus breaking e.g. `for...in` iteration of `Array`s.");}var workerHandlerName=docId+"_worker";var handler=new MessageHandler(workerHandlerName,docId,port);function ensureNotTerminated(){if(terminated){throw new Error("Worker was terminated");}}function startWorkerTask(task){WorkerTasks.add(task);}function finishWorkerTask(task){task.finish();WorkerTasks["delete"](task);}function loadDocument(_x236){return _loadDocument.apply(this,arguments);}function _loadDocument(){_loadDocument=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee106(recoveryMode){var isPureXfa,task,_yield$Promise$all11,_yield$Promise$all12,numPages,fingerprints,htmlForXfa;return _regeneratorRuntime().wrap(function _callee106$(_context125){while(1)switch(_context125.prev=_context125.next){case 0:_context125.next=2;return pdfManager.ensureDoc("checkHeader");case 2:_context125.next=4;return pdfManager.ensureDoc("parseStartXRef");case 4:_context125.next=6;return pdfManager.ensureDoc("parse",[recoveryMode]);case 6:_context125.next=8;return pdfManager.ensureDoc("checkFirstPage",[recoveryMode]);case 8:_context125.next=10;return pdfManager.ensureDoc("checkLastPage",[recoveryMode]);case 10:_context125.next=12;return pdfManager.ensureDoc("isPureXfa");case 12:isPureXfa=_context125.sent;if(!isPureXfa){_context125.next=18;break;}task=new WorkerTask("loadXfaFonts");startWorkerTask(task);_context125.next=18;return Promise.all([pdfManager.loadXfaFonts(handler,task)["catch"](function(reason){}).then(function(){return finishWorkerTask(task);}),pdfManager.loadXfaImages()]);case 18:_context125.next=20;return Promise.all([pdfManager.ensureDoc("numPages"),pdfManager.ensureDoc("fingerprints")]);case 20:_yield$Promise$all11=_context125.sent;_yield$Promise$all12=_slicedToArray(_yield$Promise$all11,2);numPages=_yield$Promise$all12[0];fingerprints=_yield$Promise$all12[1];if(!isPureXfa){_context125.next=30;break;}_context125.next=27;return pdfManager.ensureDoc("htmlForXfa");case 27:_context125.t0=_context125.sent;_context125.next=31;break;case 30:_context125.t0=null;case 31:htmlForXfa=_context125.t0;return _context125.abrupt("return",{numPages:numPages,fingerprints:fingerprints,htmlForXfa:htmlForXfa});case 33:case"end":return _context125.stop();}},_callee106);}));return _loadDocument.apply(this,arguments);}function getPdfManager(_x237){return _getPdfManager.apply(this,arguments);}function _getPdfManager(){_getPdfManager=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee107(_ref128){var data,password,disableAutoFetch,rangeChunkSize,length,docBaseUrl,enableXfa,evaluatorOptions,options,pdfManagerArgs,pdfStream,fullRequest,pdfManagerCapability,newPdfManager,cachedChunks,loaded;return _regeneratorRuntime().wrap(function _callee107$(_context126){while(1)switch(_context126.prev=_context126.next){case 0:data=_ref128.data,password=_ref128.password,disableAutoFetch=_ref128.disableAutoFetch,rangeChunkSize=_ref128.rangeChunkSize,length=_ref128.length,docBaseUrl=_ref128.docBaseUrl,enableXfa=_ref128.enableXfa,evaluatorOptions=_ref128.evaluatorOptions,options=_ref128.options;pdfManagerArgs={source:null,disableAutoFetch:disableAutoFetch,docBaseUrl:docBaseUrl,docId:docId,enableXfa:enableXfa,evaluatorOptions:evaluatorOptions,handler:handler,length:length,password:password,rangeChunkSize:rangeChunkSize};if(!data){_context126.next=5;break;}pdfManagerArgs.source=data;return _context126.abrupt("return",new LocalPdfManager(pdfManagerArgs));case 5:pdfStream=new PDFWorkerStream(handler),fullRequest=pdfStream.getFullReader(_objectSpread({},options));pdfManagerCapability=Promise.withResolvers();cachedChunks=[],loaded=0;fullRequest.headersReady.then(function(){if(!fullRequest.isRangeSupported){return;}pdfManagerArgs.source=pdfStream;pdfManagerArgs.length=fullRequest.contentLength;pdfManagerArgs.disableAutoFetch||(pdfManagerArgs.disableAutoFetch=fullRequest.isStreamingSupported);newPdfManager=new NetworkPdfManager(pdfManagerArgs);for(var _i83=0,_cachedChunks=cachedChunks;_i83<_cachedChunks.length;_i83++){var chunk=_cachedChunks[_i83];newPdfManager.sendProgressiveData(chunk);}cachedChunks=[];pdfManagerCapability.resolve(newPdfManager);cancelXHRs=null;})["catch"](function(reason){pdfManagerCapability.reject(reason);cancelXHRs=null;});new Promise(function(resolve,reject){var _readChunk2=function readChunk(_ref138){var value=_ref138.value,done=_ref138.done;try{ensureNotTerminated();if(done){if(!newPdfManager){var pdfFile=arrayBuffersToBytes(cachedChunks);cachedChunks=[];if(length&&pdfFile.length!==length){warn("reported HTTP length is different from actual");}pdfManagerArgs.source=pdfFile;newPdfManager=new LocalPdfManager(pdfManagerArgs);pdfManagerCapability.resolve(newPdfManager);}cancelXHRs=null;return;}loaded+=value.byteLength;if(!fullRequest.isStreamingSupported){handler.send("DocProgress",{loaded:loaded,total:Math.max(loaded,fullRequest.contentLength||0)});}if(newPdfManager){newPdfManager.sendProgressiveData(value);}else{cachedChunks.push(value);}fullRequest.read().then(_readChunk2,reject);}catch(e){reject(e);}};fullRequest.read().then(_readChunk2,reject);})["catch"](function(e){pdfManagerCapability.reject(e);cancelXHRs=null;});cancelXHRs=function cancelXHRs(reason){pdfStream.cancelAllRequests(reason);};return _context126.abrupt("return",pdfManagerCapability.promise);case 12:case"end":return _context126.stop();}},_callee107);}));return _getPdfManager.apply(this,arguments);}function setupDoc(data){function onSuccess(doc){ensureNotTerminated();handler.send("GetDoc",{pdfInfo:doc});}function onFailure(ex){ensureNotTerminated();if(ex instanceof PasswordException){var task=new WorkerTask("PasswordException: response ".concat(ex.code));startWorkerTask(task);handler.sendWithPromise("PasswordRequest",ex).then(function(_ref129){var password=_ref129.password;finishWorkerTask(task);pdfManager.updatePassword(password);pdfManagerReady();})["catch"](function(){finishWorkerTask(task);handler.send("DocException",ex);});}else{handler.send("DocException",wrapReason(ex));}}function pdfManagerReady(){ensureNotTerminated();loadDocument(false).then(onSuccess,function(reason){ensureNotTerminated();if(!(reason instanceof XRefParseException)){onFailure(reason);return;}pdfManager.requestLoadedStream().then(function(){ensureNotTerminated();loadDocument(true).then(onSuccess,onFailure);});});}ensureNotTerminated();getPdfManager(data).then(function(newPdfManager){if(terminated){newPdfManager.terminate(new AbortException("Worker was terminated."));throw new Error("Worker was terminated");}pdfManager=newPdfManager;pdfManager.requestLoadedStream(true).then(function(stream){handler.send("DataLoaded",{length:stream.bytes.byteLength});});}).then(pdfManagerReady,onFailure);}handler.on("GetPage",function(data){return pdfManager.getPage(data.pageIndex).then(function(page){return Promise.all([pdfManager.ensure(page,"rotate"),pdfManager.ensure(page,"ref"),pdfManager.ensure(page,"userUnit"),pdfManager.ensure(page,"view")]).then(function(_ref130){var _ref$toString;var _ref131=_slicedToArray(_ref130,4),rotate=_ref131[0],ref=_ref131[1],userUnit=_ref131[2],view=_ref131[3];return{rotate:rotate,ref:ref,refStr:(_ref$toString=ref===null||ref===void 0?void 0:ref.toString())!==null&&_ref$toString!==void 0?_ref$toString:null,userUnit:userUnit,view:view};});});});handler.on("GetPageIndex",function(data){var pageRef=Ref.get(data.num,data.gen);return pdfManager.ensureCatalog("getPageIndex",[pageRef]);});handler.on("GetDestinations",function(data){return pdfManager.ensureCatalog("destinations");});handler.on("GetDestination",function(data){return pdfManager.ensureCatalog("getDestination",[data.id]);});handler.on("GetPageLabels",function(data){return pdfManager.ensureCatalog("pageLabels");});handler.on("GetPageLayout",function(data){return pdfManager.ensureCatalog("pageLayout");});handler.on("GetPageMode",function(data){return pdfManager.ensureCatalog("pageMode");});handler.on("GetViewerPreferences",function(data){return pdfManager.ensureCatalog("viewerPreferences");});handler.on("GetOpenAction",function(data){return pdfManager.ensureCatalog("openAction");});handler.on("GetAttachments",function(data){return pdfManager.ensureCatalog("attachments");});handler.on("GetDocJSActions",function(data){return pdfManager.ensureCatalog("jsActions");});handler.on("GetPageJSActions",function(_ref132){var pageIndex=_ref132.pageIndex;return pdfManager.getPage(pageIndex).then(function(page){return pdfManager.ensure(page,"jsActions");});});handler.on("GetOutline",function(data){return pdfManager.ensureCatalog("documentOutline");});handler.on("GetOptionalContentConfig",function(data){return pdfManager.ensureCatalog("optionalContentConfig");});handler.on("GetPermissions",function(data){return pdfManager.ensureCatalog("permissions");});handler.on("GetMetadata",function(data){return Promise.all([pdfManager.ensureDoc("documentInfo"),pdfManager.ensureCatalog("metadata")]);});handler.on("GetMarkInfo",function(data){return pdfManager.ensureCatalog("markInfo");});handler.on("GetData",function(data){return pdfManager.requestLoadedStream().then(function(stream){return stream.bytes;});});handler.on("GetAnnotations",function(_ref133){var pageIndex=_ref133.pageIndex,intent=_ref133.intent;return pdfManager.getPage(pageIndex).then(function(page){var task=new WorkerTask("GetAnnotations: page ".concat(pageIndex));startWorkerTask(task);return page.getAnnotationsData(handler,task,intent).then(function(data){finishWorkerTask(task);return data;},function(reason){finishWorkerTask(task);throw reason;});});});handler.on("GetFieldObjects",function(data){return pdfManager.ensureDoc("fieldObjects").then(function(fieldObjects){return(fieldObjects===null||fieldObjects===void 0?void 0:fieldObjects.allFields)||null;});});handler.on("HasJSActions",function(data){return pdfManager.ensureDoc("hasJSActions");});handler.on("GetCalculationOrderIds",function(data){return pdfManager.ensureDoc("calculationOrderIds");});handler.on("SaveDocument",/*#__PURE__*/function(){var _ref135=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee105(_ref134){var isPureXfa,numPages,annotationStorage,filename,globalPromises,changes,promises,newAnnotationsByPage,_yield$Promise$all9,_yield$Promise$all10,stream,acroForm,acroFormRef,startXRef,xref,linearization,_structTreeRoot,catalogRef,structTreeRoot,imagePromises,newAnnotationPromises,_iterator241,_step241,_loop8,_loop9,_pageIndex5,refs,xfaData,needAppearances,xfa,xfaDatasetsRef,hasXfaDatasetsEntry,i,ii,newXrefInfo,_xref$lastXRefStreamP,infoObj,xrefInfo,_iterator242,_step242,_step242$value,key,value;return _regeneratorRuntime().wrap(function _callee105$(_context124){while(1)switch(_context124.prev=_context124.next){case 0:isPureXfa=_ref134.isPureXfa,numPages=_ref134.numPages,annotationStorage=_ref134.annotationStorage,filename=_ref134.filename;globalPromises=[pdfManager.requestLoadedStream(),pdfManager.ensureCatalog("acroForm"),pdfManager.ensureCatalog("acroFormRef"),pdfManager.ensureDoc("startXRef"),pdfManager.ensureDoc("xref"),pdfManager.ensureDoc("linearization"),pdfManager.ensureCatalog("structTreeRoot")];changes=new RefSetCache();promises=[];newAnnotationsByPage=!isPureXfa?getNewAnnotationsMap(annotationStorage):null;_context124.next=7;return Promise.all(globalPromises);case 7:_yield$Promise$all9=_context124.sent;_yield$Promise$all10=_slicedToArray(_yield$Promise$all9,7);stream=_yield$Promise$all10[0];acroForm=_yield$Promise$all10[1];acroFormRef=_yield$Promise$all10[2];startXRef=_yield$Promise$all10[3];xref=_yield$Promise$all10[4];linearization=_yield$Promise$all10[5];_structTreeRoot=_yield$Promise$all10[6];catalogRef=xref.trailer.getRaw("Root")||null;if(!newAnnotationsByPage){_context124.next=48;break;}if(_structTreeRoot){_context124.next=25;break;}_context124.next=21;return StructTreeRoot.canCreateStructureTree({catalogRef:catalogRef,pdfManager:pdfManager,newAnnotationsByPage:newAnnotationsByPage});case 21:if(!_context124.sent){_context124.next=23;break;}structTreeRoot=null;case 23:_context124.next=29;break;case 25:_context124.next=27;return _structTreeRoot.canUpdateStructTree({pdfManager:pdfManager,xref:xref,newAnnotationsByPage:newAnnotationsByPage});case 27:if(!_context124.sent){_context124.next=29;break;}structTreeRoot=_structTreeRoot;case 29:imagePromises=AnnotationFactory.generateImages(annotationStorage.values(),xref,pdfManager.evaluatorOptions.isOffscreenCanvasSupported);newAnnotationPromises=structTreeRoot===undefined?promises:[];_iterator241=_createForOfIteratorHelper(newAnnotationsByPage);_context124.prev=32;_loop8=/*#__PURE__*/_regeneratorRuntime().mark(function _loop8(){var _step241$value,pageIndex,annotations;return _regeneratorRuntime().wrap(function _loop8$(_context122){while(1)switch(_context122.prev=_context122.next){case 0:_step241$value=_slicedToArray(_step241.value,2),pageIndex=_step241$value[0],annotations=_step241$value[1];newAnnotationPromises.push(pdfManager.getPage(pageIndex).then(function(page){var task=new WorkerTask("Save (editor): page ".concat(pageIndex));startWorkerTask(task);return page.saveNewAnnotations(handler,task,annotations,imagePromises,changes)["finally"](function(){finishWorkerTask(task);});}));case 2:case"end":return _context122.stop();}},_loop8);});_iterator241.s();case 35:if((_step241=_iterator241.n()).done){_context124.next=39;break;}return _context124.delegateYield(_loop8(),"t0",37);case 37:_context124.next=35;break;case 39:_context124.next=44;break;case 41:_context124.prev=41;_context124.t1=_context124["catch"](32);_iterator241.e(_context124.t1);case 44:_context124.prev=44;_iterator241.f();return _context124.finish(44);case 47:if(structTreeRoot===null){promises.push(Promise.all(newAnnotationPromises).then(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee103(){return _regeneratorRuntime().wrap(function _callee103$(_context120){while(1)switch(_context120.prev=_context120.next){case 0:_context120.next=2;return StructTreeRoot.createStructureTree({newAnnotationsByPage:newAnnotationsByPage,xref:xref,catalogRef:catalogRef,pdfManager:pdfManager,changes:changes});case 2:case"end":return _context120.stop();}},_callee103);}))));}else if(structTreeRoot){promises.push(Promise.all(newAnnotationPromises).then(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee104(){return _regeneratorRuntime().wrap(function _callee104$(_context121){while(1)switch(_context121.prev=_context121.next){case 0:_context121.next=2;return structTreeRoot.updateStructureTree({newAnnotationsByPage:newAnnotationsByPage,pdfManager:pdfManager,changes:changes});case 2:case"end":return _context121.stop();}},_callee104);}))));}case 48:if(!isPureXfa){_context124.next=52;break;}promises.push(pdfManager.serializeXfaData(annotationStorage));_context124.next=59;break;case 52:_loop9=/*#__PURE__*/_regeneratorRuntime().mark(function _loop9(_pageIndex5){return _regeneratorRuntime().wrap(function _loop9$(_context123){while(1)switch(_context123.prev=_context123.next){case 0:promises.push(pdfManager.getPage(_pageIndex5).then(function(page){var task=new WorkerTask("Save: page ".concat(_pageIndex5));startWorkerTask(task);return page.save(handler,task,annotationStorage,changes)["finally"](function(){finishWorkerTask(task);});}));case 1:case"end":return _context123.stop();}},_loop9);});_pageIndex5=0;case 54:if(!(_pageIndex5<numPages)){_context124.next=59;break;}return _context124.delegateYield(_loop9(_pageIndex5),"t2",56);case 56:_pageIndex5++;_context124.next=54;break;case 59:_context124.next=61;return Promise.all(promises);case 61:refs=_context124.sent;xfaData=null;if(!isPureXfa){_context124.next=69;break;}xfaData=refs[0];if(xfaData){_context124.next=67;break;}return _context124.abrupt("return",stream.bytes);case 67:_context124.next=71;break;case 69:if(!(changes.size===0)){_context124.next=71;break;}return _context124.abrupt("return",stream.bytes);case 71:needAppearances=acroFormRef&&acroForm instanceof Dict&&changes.values().some(function(ref){return ref.needAppearances;});xfa=acroForm instanceof Dict&&acroForm.get("XFA")||null;xfaDatasetsRef=null;hasXfaDatasetsEntry=false;if(Array.isArray(xfa)){for(i=0,ii=xfa.length;i<ii;i+=2){if(xfa[i]==="datasets"){xfaDatasetsRef=xfa[i+1];hasXfaDatasetsEntry=true;}}if(xfaDatasetsRef===null){xfaDatasetsRef=xref.getNewTemporaryRef();}}else if(xfa){warn("Unsupported XFA type.");}newXrefInfo=Object.create(null);if(xref.trailer){infoObj=Object.create(null);xrefInfo=xref.trailer.get("Info")||null;if(xrefInfo instanceof Dict){_iterator242=_createForOfIteratorHelper(xrefInfo);try{for(_iterator242.s();!(_step242=_iterator242.n()).done;){_step242$value=_slicedToArray(_step242.value,2),key=_step242$value[0],value=_step242$value[1];if(typeof value==="string"){infoObj[key]=stringToPDFString(value);}}}catch(err){_iterator242.e(err);}finally{_iterator242.f();}}newXrefInfo={rootRef:catalogRef,encryptRef:xref.trailer.getRaw("Encrypt")||null,newRef:xref.getNewTemporaryRef(),infoRef:xref.trailer.getRaw("Info")||null,info:infoObj,fileIds:xref.trailer.get("ID")||null,startXRef:linearization?startXRef:(_xref$lastXRefStreamP=xref.lastXRefStreamPos)!==null&&_xref$lastXRefStreamP!==void 0?_xref$lastXRefStreamP:startXRef,filename:filename};}return _context124.abrupt("return",incrementalUpdate({originalData:stream.bytes,xrefInfo:newXrefInfo,changes:changes,xref:xref,hasXfa:!!xfa,xfaDatasetsRef:xfaDatasetsRef,hasXfaDatasetsEntry:hasXfaDatasetsEntry,needAppearances:needAppearances,acroFormRef:acroFormRef,acroForm:acroForm,xfaData:xfaData,useXrefStream:isDict(xref.topDict,"XRef")})["finally"](function(){xref.resetNewTemporaryRef();}));case 79:case"end":return _context124.stop();}},_callee105,null,[[32,41,44,47]]);}));return function(_x238){return _ref135.apply(this,arguments);};}());handler.on("GetOperatorList",function(data,sink){var pageIndex=data.pageIndex;pdfManager.getPage(pageIndex).then(function(page){var task=new WorkerTask("GetOperatorList: page ".concat(pageIndex));startWorkerTask(task);var start=verbosity>=VerbosityLevel.INFOS?Date.now():0;page.getOperatorList({handler:handler,sink:sink,task:task,intent:data.intent,cacheKey:data.cacheKey,annotationStorage:data.annotationStorage,modifiedIds:data.modifiedIds}).then(function(operatorListInfo){finishWorkerTask(task);if(start){info("page=".concat(pageIndex+1," - getOperatorList: time=")+"".concat(Date.now()-start,"ms, len=").concat(operatorListInfo.length));}sink.close();},function(reason){finishWorkerTask(task);if(task.terminated){return;}sink.error(reason);});});});handler.on("GetTextContent",function(data,sink){var pageIndex=data.pageIndex,includeMarkedContent=data.includeMarkedContent,disableNormalization=data.disableNormalization;pdfManager.getPage(pageIndex).then(function(page){var task=new WorkerTask("GetTextContent: page "+pageIndex);startWorkerTask(task);var start=verbosity>=VerbosityLevel.INFOS?Date.now():0;page.extractTextContent({handler:handler,task:task,sink:sink,includeMarkedContent:includeMarkedContent,disableNormalization:disableNormalization}).then(function(){finishWorkerTask(task);if(start){info("page=".concat(pageIndex+1," - getTextContent: time=")+"".concat(Date.now()-start,"ms"));}sink.close();},function(reason){finishWorkerTask(task);if(task.terminated){return;}sink.error(reason);});});});handler.on("GetStructTree",function(data){return pdfManager.getPage(data.pageIndex).then(function(page){return pdfManager.ensure(page,"getStructTree");});});handler.on("FontFallback",function(data){return pdfManager.fontFallback(data.id,handler);});handler.on("Cleanup",function(data){return pdfManager.cleanup(true);});handler.on("Terminate",function(data){var _cancelXHRs;terminated=true;var waitOn=[];if(pdfManager){pdfManager.terminate(new AbortException("Worker was terminated."));var cleanupPromise=pdfManager.cleanup();waitOn.push(cleanupPromise);pdfManager=null;}else{clearGlobalCaches();}(_cancelXHRs=cancelXHRs)===null||_cancelXHRs===void 0||_cancelXHRs(new AbortException("Worker was terminated."));var _iterator243=_createForOfIteratorHelper(WorkerTasks),_step243;try{for(_iterator243.s();!(_step243=_iterator243.n()).done;){var task=_step243.value;waitOn.push(task.finished);task.terminate();}}catch(err){_iterator243.e(err);}finally{_iterator243.f();}return Promise.all(waitOn).then(function(){handler.destroy();handler=null;});});handler.on("Ready",function(data){setupDoc(docParams);docParams=null;});return workerHandlerName;}},{key:"initializeFromPort",value:function initializeFromPort(port){var handler=new MessageHandler("worker","main",port);this.setup(handler,port);handler.send("ready",null);}}]);}();_WorkerMessageHandler2=_WorkerMessageHandler;(function(){if(typeof window==="undefined"&&!isNodeJS&&typeof self!=="undefined"&&typeof self.postMessage==="function"&&"onmessage"in self){_WorkerMessageHandler2.initializeFromPort(self);}})();;// ./src/pdf.worker.js\nvar pdfjsVersion="5.0.0";var pdfjsBuild="a5ccc2a";var __webpack_exports__WorkerMessageHandler=exports.WorkerMessageHandler=__nested_webpack_exports__.WorkerMessageHandler;\n//# sourceMappingURL=pdf.worker.js.map\n\n\n//# sourceURL=webpack://ViewerJS/../pdfjs-local/build/dist/build/pdf.worker.js?')},42043:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar uncurryThis = __webpack_require__(79504);\nvar requireObjectCoercible = __webpack_require__(67750);\nvar toString = __webpack_require__(655);\n\nvar charCodeAt = uncurryThis(''.charCodeAt);\n\n// `String.prototype.isWellFormed` method\n// https://tc39.es/ecma262/#sec-string.prototype.iswellformed\n$({ target: 'String', proto: true }, {\n  isWellFormed: function isWellFormed() {\n    var S = toString(requireObjectCoercible(this));\n    var length = S.length;\n    for (var i = 0; i < length; i++) {\n      var charCode = charCodeAt(S, i);\n      // single UTF-16 code unit\n      if ((charCode & 0xF800) !== 0xD800) continue;\n      // unpaired surrogate\n      if (charCode >= 0xDC00 || ++i >= length || (charCodeAt(S, i) & 0xFC00) !== 0xDC00) return false;\n    } return true;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.string.is-well-formed.js?")},42207:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar globalThis = __webpack_require__(44576);\nvar getBuiltIn = __webpack_require__(97751);\nvar uncurryThis = __webpack_require__(79504);\nvar call = __webpack_require__(69565);\nvar fails = __webpack_require__(79039);\nvar toString = __webpack_require__(655);\nvar validateArgumentsLength = __webpack_require__(22812);\nvar i2c = (__webpack_require__(92804).i2c);\n\nvar $btoa = getBuiltIn('btoa');\nvar charAt = uncurryThis(''.charAt);\nvar charCodeAt = uncurryThis(''.charCodeAt);\n\nvar BASIC = !!$btoa && !fails(function () {\n  return $btoa('hi') !== 'aGk=';\n});\n\nvar NO_ARG_RECEIVING_CHECK = BASIC && !fails(function () {\n  $btoa();\n});\n\nvar WRONG_ARG_CONVERSION = BASIC && fails(function () {\n  return $btoa(null) !== 'bnVsbA==';\n});\n\nvar WRONG_ARITY = BASIC && $btoa.length !== 1;\n\n// `btoa` method\n// https://html.spec.whatwg.org/multipage/webappapis.html#dom-btoa\n$({ global: true, bind: true, enumerable: true, forced: !BASIC || NO_ARG_RECEIVING_CHECK || WRONG_ARG_CONVERSION || WRONG_ARITY }, {\n  btoa: function btoa(data) {\n    validateArgumentsLength(arguments.length, 1);\n    // `webpack` dev server bug on IE global methods - use call(fn, global, ...)\n    if (BASIC) return call($btoa, globalThis, toString(data));\n    var string = toString(data);\n    var output = '';\n    var position = 0;\n    var map = i2c;\n    var block, charCode;\n    while (charAt(string, position) || (map = '=', position % 1)) {\n      charCode = charCodeAt(string, position += 3 / 4);\n      if (charCode > 0xFF) {\n        throw new (getBuiltIn('DOMException'))('The string contains characters outside of the Latin1 range', 'InvalidCharacterError');\n      }\n      block = block << 8 | charCode;\n      output += charAt(map, 63 & block >> 8 - position % 1 * 8);\n    } return output;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/web.btoa.js?")},42303:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar globalThis = __webpack_require__(44576);\nvar uncurryThis = __webpack_require__(79504);\n\nvar Uint8Array = globalThis.Uint8Array;\nvar SyntaxError = globalThis.SyntaxError;\nvar parseInt = globalThis.parseInt;\nvar min = Math.min;\nvar NOT_HEX = /[^\\da-f]/i;\nvar exec = uncurryThis(NOT_HEX.exec);\nvar stringSlice = uncurryThis(''.slice);\n\nmodule.exports = function (string, into) {\n  var stringLength = string.length;\n  if (stringLength % 2 !== 0) throw new SyntaxError('String should be an even number of characters');\n  var maxLength = into ? min(into.length, stringLength / 2) : stringLength / 2;\n  var bytes = into || new Uint8Array(maxLength);\n  var read = 0;\n  var written = 0;\n  while (written < maxLength) {\n    var hexits = stringSlice(string, read, read += 2);\n    if (exec(NOT_HEX, hexits)) throw new SyntaxError('String should only contain hex characters');\n    bytes[written++] = parseInt(hexits, 16);\n  }\n  return { bytes: bytes, read: read };\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/uint8-from-hex.js?")},42551:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n/* eslint-disable no-undef, no-useless-call, sonarjs/no-reference-error -- required for testing */\n/* eslint-disable es/no-legacy-object-prototype-accessor-methods -- required for testing */\nvar IS_PURE = __webpack_require__(96395);\nvar globalThis = __webpack_require__(44576);\nvar fails = __webpack_require__(79039);\nvar WEBKIT = __webpack_require__(3607);\n\n// Forced replacement object prototype accessors methods\nmodule.exports = IS_PURE || !fails(function () {\n  // This feature detection crashes old WebKit\n  // https://github.com/zloirock/core-js/issues/232\n  if (WEBKIT && WEBKIT < 535) return;\n  var key = Math.random();\n  // In FF throws only define methods\n  __defineSetter__.call(null, key, function () { /* empty */ });\n  delete globalThis[key];\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/object-prototype-accessors-forced.js?")},42762:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar $trim = (__webpack_require__(43802).trim);\nvar forcedStringTrimMethod = __webpack_require__(60706);\n\n// `String.prototype.trim` method\n// https://tc39.es/ecma262/#sec-string.prototype.trim\n$({ target: 'String', proto: true, forced: forcedStringTrimMethod('trim') }, {\n  trim: function trim() {\n    return $trim(this);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.string.trim.js?")},42781:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar repeat = __webpack_require__(72333);\n\n// `String.prototype.repeat` method\n// https://tc39.es/ecma262/#sec-string.prototype.repeat\n$({ target: 'String', proto: true }, {\n  repeat: repeat\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.string.repeat.js?")},42787:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar hasOwn = __webpack_require__(39297);\nvar isCallable = __webpack_require__(94901);\nvar toObject = __webpack_require__(48981);\nvar sharedKey = __webpack_require__(66119);\nvar CORRECT_PROTOTYPE_GETTER = __webpack_require__(12211);\n\nvar IE_PROTO = sharedKey('IE_PROTO');\nvar $Object = Object;\nvar ObjectPrototype = $Object.prototype;\n\n// `Object.getPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.getprototypeof\n// eslint-disable-next-line es/no-object-getprototypeof -- safe\nmodule.exports = CORRECT_PROTOTYPE_GETTER ? $Object.getPrototypeOf : function (O) {\n  var object = toObject(O);\n  if (hasOwn(object, IE_PROTO)) return object[IE_PROTO];\n  var constructor = object.constructor;\n  if (isCallable(constructor) && object instanceof constructor) {\n    return constructor.prototype;\n  } return object instanceof $Object ? ObjectPrototype : null;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/object-get-prototype-of.js?")},43144:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// https://github.com/tc39/proposal-promise-allSettled\n__webpack_require__(35874);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/proposals/promise-all-settled.js?")},43250:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(37467);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.typed-array.to-reversed.js?")},43251:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar bind = __webpack_require__(76080);\nvar call = __webpack_require__(69565);\nvar aConstructor = __webpack_require__(35548);\nvar toObject = __webpack_require__(48981);\nvar lengthOfArrayLike = __webpack_require__(26198);\nvar getIterator = __webpack_require__(70081);\nvar getIteratorMethod = __webpack_require__(50851);\nvar isArrayIteratorMethod = __webpack_require__(44209);\nvar isBigIntArray = __webpack_require__(18727);\nvar aTypedArrayConstructor = (__webpack_require__(94644).aTypedArrayConstructor);\nvar toBigInt = __webpack_require__(75854);\n\nmodule.exports = function from(source /* , mapfn, thisArg */) {\n  var C = aConstructor(this);\n  var O = toObject(source);\n  var argumentsLength = arguments.length;\n  var mapfn = argumentsLength > 1 ? arguments[1] : undefined;\n  var mapping = mapfn !== undefined;\n  var iteratorMethod = getIteratorMethod(O);\n  var i, length, result, thisIsBigIntArray, value, step, iterator, next;\n  if (iteratorMethod && !isArrayIteratorMethod(iteratorMethod)) {\n    iterator = getIterator(O, iteratorMethod);\n    next = iterator.next;\n    O = [];\n    while (!(step = call(next, iterator)).done) {\n      O.push(step.value);\n    }\n  }\n  if (mapping && argumentsLength > 2) {\n    mapfn = bind(mapfn, arguments[2]);\n  }\n  length = lengthOfArrayLike(O);\n  result = new (aTypedArrayConstructor(C))(length);\n  thisIsBigIntArray = isBigIntArray(result);\n  for (i = 0; length > i; i++) {\n    value = mapping ? mapfn(O[i], i) : O[i];\n    // FF30- typed arrays doesn't properly convert objects to typed array values\n    result[i] = thisIsBigIntArray ? toBigInt(value) : +value;\n  }\n  return result;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/typed-array-from.js?")},43275:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar globalThis = __webpack_require__(44576);\nvar defineWellKnownSymbol = __webpack_require__(70511);\nvar defineProperty = (__webpack_require__(24913).f);\nvar getOwnPropertyDescriptor = (__webpack_require__(77347).f);\n\nvar Symbol = globalThis.Symbol;\n\n// `Symbol.dispose` well-known symbol\n// https://github.com/tc39/proposal-explicit-resource-management\ndefineWellKnownSymbol('dispose');\n\nif (Symbol) {\n  var descriptor = getOwnPropertyDescriptor(Symbol, 'dispose');\n  // workaround of NodeJS 20.4 bug\n  // https://github.com/nodejs/node/issues/48699\n  // and incorrect descriptor from some transpilers and userland helpers\n  if (descriptor.enumerable && descriptor.configurable && descriptor.writable) {\n    defineProperty(Symbol, 'dispose', { value: descriptor.value, enumerable: false, configurable: false, writable: false });\n  }\n}\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.symbol.dispose.js?")},43359:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove this line from `core-js@4`\n__webpack_require__(58934);\nvar $ = __webpack_require__(46518);\nvar trimStart = __webpack_require__(53487);\n\n// `String.prototype.trimStart` method\n// https://tc39.es/ecma262/#sec-string.prototype.trimstart\n// eslint-disable-next-line es/no-string-prototype-trimstart-trimend -- safe\n$({ target: 'String', proto: true, name: 'trimStart', forced: ''.trimStart !== trimStart }, {\n  trimStart: trimStart\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.string.trim-start.js?")},43375:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(17642);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.set.difference.v2.js?")},43591:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/**\r\n * A collection of shims that provide minimal functionality of the ES6 collections.\r\n *\r\n * These implementations are not meant to be used outside of the ResizeObserver\r\n * modules as they cover only a limited range of use cases.\r\n */\r\n/* eslint-disable require-jsdoc, valid-jsdoc */\r\nvar MapShim = (function () {\r\n    if (typeof Map !== 'undefined') {\r\n        return Map;\r\n    }\r\n    /**\r\n     * Returns index in provided array that matches the specified key.\r\n     *\r\n     * @param {Array<Array>} arr\r\n     * @param {*} key\r\n     * @returns {number}\r\n     */\r\n    function getIndex(arr, key) {\r\n        var result = -1;\r\n        arr.some(function (entry, index) {\r\n            if (entry[0] === key) {\r\n                result = index;\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n        return result;\r\n    }\r\n    return /** @class */ (function () {\r\n        function class_1() {\r\n            this.__entries__ = [];\r\n        }\r\n        Object.defineProperty(class_1.prototype, \"size\", {\r\n            /**\r\n             * @returns {boolean}\r\n             */\r\n            get: function () {\r\n                return this.__entries__.length;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        /**\r\n         * @param {*} key\r\n         * @returns {*}\r\n         */\r\n        class_1.prototype.get = function (key) {\r\n            var index = getIndex(this.__entries__, key);\r\n            var entry = this.__entries__[index];\r\n            return entry && entry[1];\r\n        };\r\n        /**\r\n         * @param {*} key\r\n         * @param {*} value\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.set = function (key, value) {\r\n            var index = getIndex(this.__entries__, key);\r\n            if (~index) {\r\n                this.__entries__[index][1] = value;\r\n            }\r\n            else {\r\n                this.__entries__.push([key, value]);\r\n            }\r\n        };\r\n        /**\r\n         * @param {*} key\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.delete = function (key) {\r\n            var entries = this.__entries__;\r\n            var index = getIndex(entries, key);\r\n            if (~index) {\r\n                entries.splice(index, 1);\r\n            }\r\n        };\r\n        /**\r\n         * @param {*} key\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.has = function (key) {\r\n            return !!~getIndex(this.__entries__, key);\r\n        };\r\n        /**\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.clear = function () {\r\n            this.__entries__.splice(0);\r\n        };\r\n        /**\r\n         * @param {Function} callback\r\n         * @param {*} [ctx=null]\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.forEach = function (callback, ctx) {\r\n            if (ctx === void 0) { ctx = null; }\r\n            for (var _i = 0, _a = this.__entries__; _i < _a.length; _i++) {\r\n                var entry = _a[_i];\r\n                callback.call(ctx, entry[1], entry[0]);\r\n            }\r\n        };\r\n        return class_1;\r\n    }());\r\n})();\n\n/**\r\n * Detects whether window and document objects are available in current environment.\r\n */\r\nvar isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined' && window.document === document;\n\n// Returns global object of a current environment.\r\nvar global$1 = (function () {\r\n    if (typeof __webpack_require__.g !== 'undefined' && __webpack_require__.g.Math === Math) {\r\n        return __webpack_require__.g;\r\n    }\r\n    if (typeof self !== 'undefined' && self.Math === Math) {\r\n        return self;\r\n    }\r\n    if (typeof window !== 'undefined' && window.Math === Math) {\r\n        return window;\r\n    }\r\n    // eslint-disable-next-line no-new-func\r\n    return Function('return this')();\r\n})();\n\n/**\r\n * A shim for the requestAnimationFrame which falls back to the setTimeout if\r\n * first one is not supported.\r\n *\r\n * @returns {number} Requests' identifier.\r\n */\r\nvar requestAnimationFrame$1 = (function () {\r\n    if (typeof requestAnimationFrame === 'function') {\r\n        // It's required to use a bounded function because IE sometimes throws\r\n        // an \"Invalid calling object\" error if rAF is invoked without the global\r\n        // object on the left hand side.\r\n        return requestAnimationFrame.bind(global$1);\r\n    }\r\n    return function (callback) { return setTimeout(function () { return callback(Date.now()); }, 1000 / 60); };\r\n})();\n\n// Defines minimum timeout before adding a trailing call.\r\nvar trailingTimeout = 2;\r\n/**\r\n * Creates a wrapper function which ensures that provided callback will be\r\n * invoked only once during the specified delay period.\r\n *\r\n * @param {Function} callback - Function to be invoked after the delay period.\r\n * @param {number} delay - Delay after which to invoke callback.\r\n * @returns {Function}\r\n */\r\nfunction throttle (callback, delay) {\r\n    var leadingCall = false, trailingCall = false, lastCallTime = 0;\r\n    /**\r\n     * Invokes the original callback function and schedules new invocation if\r\n     * the \"proxy\" was called during current request.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    function resolvePending() {\r\n        if (leadingCall) {\r\n            leadingCall = false;\r\n            callback();\r\n        }\r\n        if (trailingCall) {\r\n            proxy();\r\n        }\r\n    }\r\n    /**\r\n     * Callback invoked after the specified delay. It will further postpone\r\n     * invocation of the original function delegating it to the\r\n     * requestAnimationFrame.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    function timeoutCallback() {\r\n        requestAnimationFrame$1(resolvePending);\r\n    }\r\n    /**\r\n     * Schedules invocation of the original function.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    function proxy() {\r\n        var timeStamp = Date.now();\r\n        if (leadingCall) {\r\n            // Reject immediately following calls.\r\n            if (timeStamp - lastCallTime < trailingTimeout) {\r\n                return;\r\n            }\r\n            // Schedule new call to be in invoked when the pending one is resolved.\r\n            // This is important for \"transitions\" which never actually start\r\n            // immediately so there is a chance that we might miss one if change\r\n            // happens amids the pending invocation.\r\n            trailingCall = true;\r\n        }\r\n        else {\r\n            leadingCall = true;\r\n            trailingCall = false;\r\n            setTimeout(timeoutCallback, delay);\r\n        }\r\n        lastCallTime = timeStamp;\r\n    }\r\n    return proxy;\r\n}\n\n// Minimum delay before invoking the update of observers.\r\nvar REFRESH_DELAY = 20;\r\n// A list of substrings of CSS properties used to find transition events that\r\n// might affect dimensions of observed elements.\r\nvar transitionKeys = ['top', 'right', 'bottom', 'left', 'width', 'height', 'size', 'weight'];\r\n// Check if MutationObserver is available.\r\nvar mutationObserverSupported = typeof MutationObserver !== 'undefined';\r\n/**\r\n * Singleton controller class which handles updates of ResizeObserver instances.\r\n */\r\nvar ResizeObserverController = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance of ResizeObserverController.\r\n     *\r\n     * @private\r\n     */\r\n    function ResizeObserverController() {\r\n        /**\r\n         * Indicates whether DOM listeners have been added.\r\n         *\r\n         * @private {boolean}\r\n         */\r\n        this.connected_ = false;\r\n        /**\r\n         * Tells that controller has subscribed for Mutation Events.\r\n         *\r\n         * @private {boolean}\r\n         */\r\n        this.mutationEventsAdded_ = false;\r\n        /**\r\n         * Keeps reference to the instance of MutationObserver.\r\n         *\r\n         * @private {MutationObserver}\r\n         */\r\n        this.mutationsObserver_ = null;\r\n        /**\r\n         * A list of connected observers.\r\n         *\r\n         * @private {Array<ResizeObserverSPI>}\r\n         */\r\n        this.observers_ = [];\r\n        this.onTransitionEnd_ = this.onTransitionEnd_.bind(this);\r\n        this.refresh = throttle(this.refresh.bind(this), REFRESH_DELAY);\r\n    }\r\n    /**\r\n     * Adds observer to observers list.\r\n     *\r\n     * @param {ResizeObserverSPI} observer - Observer to be added.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.addObserver = function (observer) {\r\n        if (!~this.observers_.indexOf(observer)) {\r\n            this.observers_.push(observer);\r\n        }\r\n        // Add listeners if they haven't been added yet.\r\n        if (!this.connected_) {\r\n            this.connect_();\r\n        }\r\n    };\r\n    /**\r\n     * Removes observer from observers list.\r\n     *\r\n     * @param {ResizeObserverSPI} observer - Observer to be removed.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.removeObserver = function (observer) {\r\n        var observers = this.observers_;\r\n        var index = observers.indexOf(observer);\r\n        // Remove observer if it's present in registry.\r\n        if (~index) {\r\n            observers.splice(index, 1);\r\n        }\r\n        // Remove listeners if controller has no connected observers.\r\n        if (!observers.length && this.connected_) {\r\n            this.disconnect_();\r\n        }\r\n    };\r\n    /**\r\n     * Invokes the update of observers. It will continue running updates insofar\r\n     * it detects changes.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.refresh = function () {\r\n        var changesDetected = this.updateObservers_();\r\n        // Continue running updates if changes have been detected as there might\r\n        // be future ones caused by CSS transitions.\r\n        if (changesDetected) {\r\n            this.refresh();\r\n        }\r\n    };\r\n    /**\r\n     * Updates every observer from observers list and notifies them of queued\r\n     * entries.\r\n     *\r\n     * @private\r\n     * @returns {boolean} Returns \"true\" if any observer has detected changes in\r\n     *      dimensions of it's elements.\r\n     */\r\n    ResizeObserverController.prototype.updateObservers_ = function () {\r\n        // Collect observers that have active observations.\r\n        var activeObservers = this.observers_.filter(function (observer) {\r\n            return observer.gatherActive(), observer.hasActive();\r\n        });\r\n        // Deliver notifications in a separate cycle in order to avoid any\r\n        // collisions between observers, e.g. when multiple instances of\r\n        // ResizeObserver are tracking the same element and the callback of one\r\n        // of them changes content dimensions of the observed target. Sometimes\r\n        // this may result in notifications being blocked for the rest of observers.\r\n        activeObservers.forEach(function (observer) { return observer.broadcastActive(); });\r\n        return activeObservers.length > 0;\r\n    };\r\n    /**\r\n     * Initializes DOM listeners.\r\n     *\r\n     * @private\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.connect_ = function () {\r\n        // Do nothing if running in a non-browser environment or if listeners\r\n        // have been already added.\r\n        if (!isBrowser || this.connected_) {\r\n            return;\r\n        }\r\n        // Subscription to the \"Transitionend\" event is used as a workaround for\r\n        // delayed transitions. This way it's possible to capture at least the\r\n        // final state of an element.\r\n        document.addEventListener('transitionend', this.onTransitionEnd_);\r\n        window.addEventListener('resize', this.refresh);\r\n        if (mutationObserverSupported) {\r\n            this.mutationsObserver_ = new MutationObserver(this.refresh);\r\n            this.mutationsObserver_.observe(document, {\r\n                attributes: true,\r\n                childList: true,\r\n                characterData: true,\r\n                subtree: true\r\n            });\r\n        }\r\n        else {\r\n            document.addEventListener('DOMSubtreeModified', this.refresh);\r\n            this.mutationEventsAdded_ = true;\r\n        }\r\n        this.connected_ = true;\r\n    };\r\n    /**\r\n     * Removes DOM listeners.\r\n     *\r\n     * @private\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.disconnect_ = function () {\r\n        // Do nothing if running in a non-browser environment or if listeners\r\n        // have been already removed.\r\n        if (!isBrowser || !this.connected_) {\r\n            return;\r\n        }\r\n        document.removeEventListener('transitionend', this.onTransitionEnd_);\r\n        window.removeEventListener('resize', this.refresh);\r\n        if (this.mutationsObserver_) {\r\n            this.mutationsObserver_.disconnect();\r\n        }\r\n        if (this.mutationEventsAdded_) {\r\n            document.removeEventListener('DOMSubtreeModified', this.refresh);\r\n        }\r\n        this.mutationsObserver_ = null;\r\n        this.mutationEventsAdded_ = false;\r\n        this.connected_ = false;\r\n    };\r\n    /**\r\n     * \"Transitionend\" event handler.\r\n     *\r\n     * @private\r\n     * @param {TransitionEvent} event\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.onTransitionEnd_ = function (_a) {\r\n        var _b = _a.propertyName, propertyName = _b === void 0 ? '' : _b;\r\n        // Detect whether transition may affect dimensions of an element.\r\n        var isReflowProperty = transitionKeys.some(function (key) {\r\n            return !!~propertyName.indexOf(key);\r\n        });\r\n        if (isReflowProperty) {\r\n            this.refresh();\r\n        }\r\n    };\r\n    /**\r\n     * Returns instance of the ResizeObserverController.\r\n     *\r\n     * @returns {ResizeObserverController}\r\n     */\r\n    ResizeObserverController.getInstance = function () {\r\n        if (!this.instance_) {\r\n            this.instance_ = new ResizeObserverController();\r\n        }\r\n        return this.instance_;\r\n    };\r\n    /**\r\n     * Holds reference to the controller's instance.\r\n     *\r\n     * @private {ResizeObserverController}\r\n     */\r\n    ResizeObserverController.instance_ = null;\r\n    return ResizeObserverController;\r\n}());\n\n/**\r\n * Defines non-writable/enumerable properties of the provided target object.\r\n *\r\n * @param {Object} target - Object for which to define properties.\r\n * @param {Object} props - Properties to be defined.\r\n * @returns {Object} Target object.\r\n */\r\nvar defineConfigurable = (function (target, props) {\r\n    for (var _i = 0, _a = Object.keys(props); _i < _a.length; _i++) {\r\n        var key = _a[_i];\r\n        Object.defineProperty(target, key, {\r\n            value: props[key],\r\n            enumerable: false,\r\n            writable: false,\r\n            configurable: true\r\n        });\r\n    }\r\n    return target;\r\n});\n\n/**\r\n * Returns the global object associated with provided element.\r\n *\r\n * @param {Object} target\r\n * @returns {Object}\r\n */\r\nvar getWindowOf = (function (target) {\r\n    // Assume that the element is an instance of Node, which means that it\r\n    // has the \"ownerDocument\" property from which we can retrieve a\r\n    // corresponding global object.\r\n    var ownerGlobal = target && target.ownerDocument && target.ownerDocument.defaultView;\r\n    // Return the local global object if it's not possible extract one from\r\n    // provided element.\r\n    return ownerGlobal || global$1;\r\n});\n\n// Placeholder of an empty content rectangle.\r\nvar emptyRect = createRectInit(0, 0, 0, 0);\r\n/**\r\n * Converts provided string to a number.\r\n *\r\n * @param {number|string} value\r\n * @returns {number}\r\n */\r\nfunction toFloat(value) {\r\n    return parseFloat(value) || 0;\r\n}\r\n/**\r\n * Extracts borders size from provided styles.\r\n *\r\n * @param {CSSStyleDeclaration} styles\r\n * @param {...string} positions - Borders positions (top, right, ...)\r\n * @returns {number}\r\n */\r\nfunction getBordersSize(styles) {\r\n    var positions = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        positions[_i - 1] = arguments[_i];\r\n    }\r\n    return positions.reduce(function (size, position) {\r\n        var value = styles['border-' + position + '-width'];\r\n        return size + toFloat(value);\r\n    }, 0);\r\n}\r\n/**\r\n * Extracts paddings sizes from provided styles.\r\n *\r\n * @param {CSSStyleDeclaration} styles\r\n * @returns {Object} Paddings box.\r\n */\r\nfunction getPaddings(styles) {\r\n    var positions = ['top', 'right', 'bottom', 'left'];\r\n    var paddings = {};\r\n    for (var _i = 0, positions_1 = positions; _i < positions_1.length; _i++) {\r\n        var position = positions_1[_i];\r\n        var value = styles['padding-' + position];\r\n        paddings[position] = toFloat(value);\r\n    }\r\n    return paddings;\r\n}\r\n/**\r\n * Calculates content rectangle of provided SVG element.\r\n *\r\n * @param {SVGGraphicsElement} target - Element content rectangle of which needs\r\n *      to be calculated.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction getSVGContentRect(target) {\r\n    var bbox = target.getBBox();\r\n    return createRectInit(0, 0, bbox.width, bbox.height);\r\n}\r\n/**\r\n * Calculates content rectangle of provided HTMLElement.\r\n *\r\n * @param {HTMLElement} target - Element for which to calculate the content rectangle.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction getHTMLElementContentRect(target) {\r\n    // Client width & height properties can't be\r\n    // used exclusively as they provide rounded values.\r\n    var clientWidth = target.clientWidth, clientHeight = target.clientHeight;\r\n    // By this condition we can catch all non-replaced inline, hidden and\r\n    // detached elements. Though elements with width & height properties less\r\n    // than 0.5 will be discarded as well.\r\n    //\r\n    // Without it we would need to implement separate methods for each of\r\n    // those cases and it's not possible to perform a precise and performance\r\n    // effective test for hidden elements. E.g. even jQuery's ':visible' filter\r\n    // gives wrong results for elements with width & height less than 0.5.\r\n    if (!clientWidth && !clientHeight) {\r\n        return emptyRect;\r\n    }\r\n    var styles = getWindowOf(target).getComputedStyle(target);\r\n    var paddings = getPaddings(styles);\r\n    var horizPad = paddings.left + paddings.right;\r\n    var vertPad = paddings.top + paddings.bottom;\r\n    // Computed styles of width & height are being used because they are the\r\n    // only dimensions available to JS that contain non-rounded values. It could\r\n    // be possible to utilize the getBoundingClientRect if only it's data wasn't\r\n    // affected by CSS transformations let alone paddings, borders and scroll bars.\r\n    var width = toFloat(styles.width), height = toFloat(styles.height);\r\n    // Width & height include paddings and borders when the 'border-box' box\r\n    // model is applied (except for IE).\r\n    if (styles.boxSizing === 'border-box') {\r\n        // Following conditions are required to handle Internet Explorer which\r\n        // doesn't include paddings and borders to computed CSS dimensions.\r\n        //\r\n        // We can say that if CSS dimensions + paddings are equal to the \"client\"\r\n        // properties then it's either IE, and thus we don't need to subtract\r\n        // anything, or an element merely doesn't have paddings/borders styles.\r\n        if (Math.round(width + horizPad) !== clientWidth) {\r\n            width -= getBordersSize(styles, 'left', 'right') + horizPad;\r\n        }\r\n        if (Math.round(height + vertPad) !== clientHeight) {\r\n            height -= getBordersSize(styles, 'top', 'bottom') + vertPad;\r\n        }\r\n    }\r\n    // Following steps can't be applied to the document's root element as its\r\n    // client[Width/Height] properties represent viewport area of the window.\r\n    // Besides, it's as well not necessary as the <html> itself neither has\r\n    // rendered scroll bars nor it can be clipped.\r\n    if (!isDocumentElement(target)) {\r\n        // In some browsers (only in Firefox, actually) CSS width & height\r\n        // include scroll bars size which can be removed at this step as scroll\r\n        // bars are the only difference between rounded dimensions + paddings\r\n        // and \"client\" properties, though that is not always true in Chrome.\r\n        var vertScrollbar = Math.round(width + horizPad) - clientWidth;\r\n        var horizScrollbar = Math.round(height + vertPad) - clientHeight;\r\n        // Chrome has a rather weird rounding of \"client\" properties.\r\n        // E.g. for an element with content width of 314.2px it sometimes gives\r\n        // the client width of 315px and for the width of 314.7px it may give\r\n        // 314px. And it doesn't happen all the time. So just ignore this delta\r\n        // as a non-relevant.\r\n        if (Math.abs(vertScrollbar) !== 1) {\r\n            width -= vertScrollbar;\r\n        }\r\n        if (Math.abs(horizScrollbar) !== 1) {\r\n            height -= horizScrollbar;\r\n        }\r\n    }\r\n    return createRectInit(paddings.left, paddings.top, width, height);\r\n}\r\n/**\r\n * Checks whether provided element is an instance of the SVGGraphicsElement.\r\n *\r\n * @param {Element} target - Element to be checked.\r\n * @returns {boolean}\r\n */\r\nvar isSVGGraphicsElement = (function () {\r\n    // Some browsers, namely IE and Edge, don't have the SVGGraphicsElement\r\n    // interface.\r\n    if (typeof SVGGraphicsElement !== 'undefined') {\r\n        return function (target) { return target instanceof getWindowOf(target).SVGGraphicsElement; };\r\n    }\r\n    // If it's so, then check that element is at least an instance of the\r\n    // SVGElement and that it has the \"getBBox\" method.\r\n    // eslint-disable-next-line no-extra-parens\r\n    return function (target) { return (target instanceof getWindowOf(target).SVGElement &&\r\n        typeof target.getBBox === 'function'); };\r\n})();\r\n/**\r\n * Checks whether provided element is a document element (<html>).\r\n *\r\n * @param {Element} target - Element to be checked.\r\n * @returns {boolean}\r\n */\r\nfunction isDocumentElement(target) {\r\n    return target === getWindowOf(target).document.documentElement;\r\n}\r\n/**\r\n * Calculates an appropriate content rectangle for provided html or svg element.\r\n *\r\n * @param {Element} target - Element content rectangle of which needs to be calculated.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction getContentRect(target) {\r\n    if (!isBrowser) {\r\n        return emptyRect;\r\n    }\r\n    if (isSVGGraphicsElement(target)) {\r\n        return getSVGContentRect(target);\r\n    }\r\n    return getHTMLElementContentRect(target);\r\n}\r\n/**\r\n * Creates rectangle with an interface of the DOMRectReadOnly.\r\n * Spec: https://drafts.fxtf.org/geometry/#domrectreadonly\r\n *\r\n * @param {DOMRectInit} rectInit - Object with rectangle's x/y coordinates and dimensions.\r\n * @returns {DOMRectReadOnly}\r\n */\r\nfunction createReadOnlyRect(_a) {\r\n    var x = _a.x, y = _a.y, width = _a.width, height = _a.height;\r\n    // If DOMRectReadOnly is available use it as a prototype for the rectangle.\r\n    var Constr = typeof DOMRectReadOnly !== 'undefined' ? DOMRectReadOnly : Object;\r\n    var rect = Object.create(Constr.prototype);\r\n    // Rectangle's properties are not writable and non-enumerable.\r\n    defineConfigurable(rect, {\r\n        x: x, y: y, width: width, height: height,\r\n        top: y,\r\n        right: x + width,\r\n        bottom: height + y,\r\n        left: x\r\n    });\r\n    return rect;\r\n}\r\n/**\r\n * Creates DOMRectInit object based on the provided dimensions and the x/y coordinates.\r\n * Spec: https://drafts.fxtf.org/geometry/#dictdef-domrectinit\r\n *\r\n * @param {number} x - X coordinate.\r\n * @param {number} y - Y coordinate.\r\n * @param {number} width - Rectangle's width.\r\n * @param {number} height - Rectangle's height.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction createRectInit(x, y, width, height) {\r\n    return { x: x, y: y, width: width, height: height };\r\n}\n\n/**\r\n * Class that is responsible for computations of the content rectangle of\r\n * provided DOM element and for keeping track of it's changes.\r\n */\r\nvar ResizeObservation = /** @class */ (function () {\r\n    /**\r\n     * Creates an instance of ResizeObservation.\r\n     *\r\n     * @param {Element} target - Element to be observed.\r\n     */\r\n    function ResizeObservation(target) {\r\n        /**\r\n         * Broadcasted width of content rectangle.\r\n         *\r\n         * @type {number}\r\n         */\r\n        this.broadcastWidth = 0;\r\n        /**\r\n         * Broadcasted height of content rectangle.\r\n         *\r\n         * @type {number}\r\n         */\r\n        this.broadcastHeight = 0;\r\n        /**\r\n         * Reference to the last observed content rectangle.\r\n         *\r\n         * @private {DOMRectInit}\r\n         */\r\n        this.contentRect_ = createRectInit(0, 0, 0, 0);\r\n        this.target = target;\r\n    }\r\n    /**\r\n     * Updates content rectangle and tells whether it's width or height properties\r\n     * have changed since the last broadcast.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    ResizeObservation.prototype.isActive = function () {\r\n        var rect = getContentRect(this.target);\r\n        this.contentRect_ = rect;\r\n        return (rect.width !== this.broadcastWidth ||\r\n            rect.height !== this.broadcastHeight);\r\n    };\r\n    /**\r\n     * Updates 'broadcastWidth' and 'broadcastHeight' properties with a data\r\n     * from the corresponding properties of the last observed content rectangle.\r\n     *\r\n     * @returns {DOMRectInit} Last observed content rectangle.\r\n     */\r\n    ResizeObservation.prototype.broadcastRect = function () {\r\n        var rect = this.contentRect_;\r\n        this.broadcastWidth = rect.width;\r\n        this.broadcastHeight = rect.height;\r\n        return rect;\r\n    };\r\n    return ResizeObservation;\r\n}());\n\nvar ResizeObserverEntry = /** @class */ (function () {\r\n    /**\r\n     * Creates an instance of ResizeObserverEntry.\r\n     *\r\n     * @param {Element} target - Element that is being observed.\r\n     * @param {DOMRectInit} rectInit - Data of the element's content rectangle.\r\n     */\r\n    function ResizeObserverEntry(target, rectInit) {\r\n        var contentRect = createReadOnlyRect(rectInit);\r\n        // According to the specification following properties are not writable\r\n        // and are also not enumerable in the native implementation.\r\n        //\r\n        // Property accessors are not being used as they'd require to define a\r\n        // private WeakMap storage which may cause memory leaks in browsers that\r\n        // don't support this type of collections.\r\n        defineConfigurable(this, { target: target, contentRect: contentRect });\r\n    }\r\n    return ResizeObserverEntry;\r\n}());\n\nvar ResizeObserverSPI = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance of ResizeObserver.\r\n     *\r\n     * @param {ResizeObserverCallback} callback - Callback function that is invoked\r\n     *      when one of the observed elements changes it's content dimensions.\r\n     * @param {ResizeObserverController} controller - Controller instance which\r\n     *      is responsible for the updates of observer.\r\n     * @param {ResizeObserver} callbackCtx - Reference to the public\r\n     *      ResizeObserver instance which will be passed to callback function.\r\n     */\r\n    function ResizeObserverSPI(callback, controller, callbackCtx) {\r\n        /**\r\n         * Collection of resize observations that have detected changes in dimensions\r\n         * of elements.\r\n         *\r\n         * @private {Array<ResizeObservation>}\r\n         */\r\n        this.activeObservations_ = [];\r\n        /**\r\n         * Registry of the ResizeObservation instances.\r\n         *\r\n         * @private {Map<Element, ResizeObservation>}\r\n         */\r\n        this.observations_ = new MapShim();\r\n        if (typeof callback !== 'function') {\r\n            throw new TypeError('The callback provided as parameter 1 is not a function.');\r\n        }\r\n        this.callback_ = callback;\r\n        this.controller_ = controller;\r\n        this.callbackCtx_ = callbackCtx;\r\n    }\r\n    /**\r\n     * Starts observing provided element.\r\n     *\r\n     * @param {Element} target - Element to be observed.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.observe = function (target) {\r\n        if (!arguments.length) {\r\n            throw new TypeError('1 argument required, but only 0 present.');\r\n        }\r\n        // Do nothing if current environment doesn't have the Element interface.\r\n        if (typeof Element === 'undefined' || !(Element instanceof Object)) {\r\n            return;\r\n        }\r\n        if (!(target instanceof getWindowOf(target).Element)) {\r\n            throw new TypeError('parameter 1 is not of type \"Element\".');\r\n        }\r\n        var observations = this.observations_;\r\n        // Do nothing if element is already being observed.\r\n        if (observations.has(target)) {\r\n            return;\r\n        }\r\n        observations.set(target, new ResizeObservation(target));\r\n        this.controller_.addObserver(this);\r\n        // Force the update of observations.\r\n        this.controller_.refresh();\r\n    };\r\n    /**\r\n     * Stops observing provided element.\r\n     *\r\n     * @param {Element} target - Element to stop observing.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.unobserve = function (target) {\r\n        if (!arguments.length) {\r\n            throw new TypeError('1 argument required, but only 0 present.');\r\n        }\r\n        // Do nothing if current environment doesn't have the Element interface.\r\n        if (typeof Element === 'undefined' || !(Element instanceof Object)) {\r\n            return;\r\n        }\r\n        if (!(target instanceof getWindowOf(target).Element)) {\r\n            throw new TypeError('parameter 1 is not of type \"Element\".');\r\n        }\r\n        var observations = this.observations_;\r\n        // Do nothing if element is not being observed.\r\n        if (!observations.has(target)) {\r\n            return;\r\n        }\r\n        observations.delete(target);\r\n        if (!observations.size) {\r\n            this.controller_.removeObserver(this);\r\n        }\r\n    };\r\n    /**\r\n     * Stops observing all elements.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.disconnect = function () {\r\n        this.clearActive();\r\n        this.observations_.clear();\r\n        this.controller_.removeObserver(this);\r\n    };\r\n    /**\r\n     * Collects observation instances the associated element of which has changed\r\n     * it's content rectangle.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.gatherActive = function () {\r\n        var _this = this;\r\n        this.clearActive();\r\n        this.observations_.forEach(function (observation) {\r\n            if (observation.isActive()) {\r\n                _this.activeObservations_.push(observation);\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Invokes initial callback function with a list of ResizeObserverEntry\r\n     * instances collected from active resize observations.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.broadcastActive = function () {\r\n        // Do nothing if observer doesn't have active observations.\r\n        if (!this.hasActive()) {\r\n            return;\r\n        }\r\n        var ctx = this.callbackCtx_;\r\n        // Create ResizeObserverEntry instance for every active observation.\r\n        var entries = this.activeObservations_.map(function (observation) {\r\n            return new ResizeObserverEntry(observation.target, observation.broadcastRect());\r\n        });\r\n        this.callback_.call(ctx, entries, ctx);\r\n        this.clearActive();\r\n    };\r\n    /**\r\n     * Clears the collection of active observations.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.clearActive = function () {\r\n        this.activeObservations_.splice(0);\r\n    };\r\n    /**\r\n     * Tells whether observer has active observations.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    ResizeObserverSPI.prototype.hasActive = function () {\r\n        return this.activeObservations_.length > 0;\r\n    };\r\n    return ResizeObserverSPI;\r\n}());\n\n// Registry of internal observers. If WeakMap is not available use current shim\r\n// for the Map collection as it has all required methods and because WeakMap\r\n// can't be fully polyfilled anyway.\r\nvar observers = typeof WeakMap !== 'undefined' ? new WeakMap() : new MapShim();\r\n/**\r\n * ResizeObserver API. Encapsulates the ResizeObserver SPI implementation\r\n * exposing only those methods and properties that are defined in the spec.\r\n */\r\nvar ResizeObserver = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance of ResizeObserver.\r\n     *\r\n     * @param {ResizeObserverCallback} callback - Callback that is invoked when\r\n     *      dimensions of the observed elements change.\r\n     */\r\n    function ResizeObserver(callback) {\r\n        if (!(this instanceof ResizeObserver)) {\r\n            throw new TypeError('Cannot call a class as a function.');\r\n        }\r\n        if (!arguments.length) {\r\n            throw new TypeError('1 argument required, but only 0 present.');\r\n        }\r\n        var controller = ResizeObserverController.getInstance();\r\n        var observer = new ResizeObserverSPI(callback, controller, this);\r\n        observers.set(this, observer);\r\n    }\r\n    return ResizeObserver;\r\n}());\r\n// Expose public methods of ResizeObserver.\r\n[\r\n    'observe',\r\n    'unobserve',\r\n    'disconnect'\r\n].forEach(function (method) {\r\n    ResizeObserver.prototype[method] = function () {\r\n        var _a;\r\n        return (_a = observers.get(this))[method].apply(_a, arguments);\r\n    };\r\n});\n\nvar index = (function () {\r\n    // Export existing implementation if available.\r\n    if (typeof global$1.ResizeObserver !== 'undefined') {\r\n        return global$1.ResizeObserver;\r\n    }\r\n    return ResizeObserver;\r\n})();\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (index);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/resize-observer-polyfill/dist/ResizeObserver.es.js?")},43724:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar fails = __webpack_require__(79039);\n\n// Detect IE8's incomplete defineProperty implementation\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] !== 7;\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/descriptors.js?")},43799:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(14628);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.promise.with-resolvers.js?")},43802:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar uncurryThis = __webpack_require__(79504);\nvar requireObjectCoercible = __webpack_require__(67750);\nvar toString = __webpack_require__(655);\nvar whitespaces = __webpack_require__(47452);\n\nvar replace = uncurryThis(''.replace);\nvar ltrim = RegExp('^[' + whitespaces + ']+');\nvar rtrim = RegExp('(^|[^' + whitespaces + '])[' + whitespaces + ']+$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = toString(requireObjectCoercible($this));\n    if (TYPE & 1) string = replace(string, ltrim, '');\n    if (TYPE & 2) string = replace(string, rtrim, '$1');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.es/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/string-trim.js?")},43839:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar bind = __webpack_require__(76080);\nvar IndexedObject = __webpack_require__(47055);\nvar toObject = __webpack_require__(48981);\nvar lengthOfArrayLike = __webpack_require__(26198);\n\n// `Array.prototype.{ findLast, findLastIndex }` methods implementation\nvar createMethod = function (TYPE) {\n  var IS_FIND_LAST_INDEX = TYPE === 1;\n  return function ($this, callbackfn, that) {\n    var O = toObject($this);\n    var self = IndexedObject(O);\n    var index = lengthOfArrayLike(self);\n    var boundFunction = bind(callbackfn, that);\n    var value, result;\n    while (index-- > 0) {\n      value = self[index];\n      result = boundFunction(value, index, O);\n      if (result) switch (TYPE) {\n        case 0: return value; // findLast\n        case 1: return index; // findLastIndex\n      }\n    }\n    return IS_FIND_LAST_INDEX ? -1 : undefined;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.findLast` method\n  // https://github.com/tc39/proposal-array-find-from-last\n  findLast: createMethod(0),\n  // `Array.prototype.findLastIndex` method\n  // https://github.com/tc39/proposal-array-find-from-last\n  findLastIndex: createMethod(1)\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/array-iteration-from-last.js?")},44114:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar toObject = __webpack_require__(48981);\nvar lengthOfArrayLike = __webpack_require__(26198);\nvar setArrayLength = __webpack_require__(34527);\nvar doesNotExceedSafeInteger = __webpack_require__(96837);\nvar fails = __webpack_require__(79039);\n\nvar INCORRECT_TO_LENGTH = fails(function () {\n  return [].push.call({ length: 0x100000000 }, 1) !== 4294967297;\n});\n\n// V8 <= 121 and Safari <= 15.4; FF < 23 throws InternalError\n// https://bugs.chromium.org/p/v8/issues/detail?id=12681\nvar properErrorOnNonWritableLength = function () {\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).push();\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n};\n\nvar FORCED = INCORRECT_TO_LENGTH || !properErrorOnNonWritableLength();\n\n// `Array.prototype.push` method\n// https://tc39.es/ecma262/#sec-array.prototype.push\n$({ target: 'Array', proto: true, arity: 1, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  push: function push(item) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var argCount = arguments.length;\n    doesNotExceedSafeInteger(len + argCount);\n    for (var i = 0; i < argCount; i++) {\n      O[len] = arguments[i];\n      len++;\n    }\n    setArrayLength(O, len);\n    return len;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array.push.js?")},44124:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar globalThis = __webpack_require__(44576);\n\nmodule.exports = function (CONSTRUCTOR, METHOD) {\n  var Constructor = globalThis[CONSTRUCTOR];\n  var Prototype = Constructor && Constructor.prototype;\n  return Prototype && Prototype[METHOD];\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/get-built-in-prototype-method.js?")},44204:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar aSet = __webpack_require__(97080);\nvar add = (__webpack_require__(94402).add);\nvar clone = __webpack_require__(89286);\nvar getSetRecord = __webpack_require__(83789);\nvar iterateSimple = __webpack_require__(40507);\n\n// `Set.prototype.union` method\n// https://github.com/tc39/proposal-set-methods\nmodule.exports = function union(other) {\n  var O = aSet(this);\n  var keysIter = getSetRecord(other).getIterator();\n  var result = clone(O);\n  iterateSimple(keysIter, function (it) {\n    add(result, it);\n  });\n  return result;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/set-union.js?")},44209:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar wellKnownSymbol = __webpack_require__(78227);\nvar Iterators = __webpack_require__(26269);\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar ArrayPrototype = Array.prototype;\n\n// check on default Array iterator\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/is-array-iterator-method.js?")},44213:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar DESCRIPTORS = __webpack_require__(43724);\nvar uncurryThis = __webpack_require__(79504);\nvar call = __webpack_require__(69565);\nvar fails = __webpack_require__(79039);\nvar objectKeys = __webpack_require__(71072);\nvar getOwnPropertySymbolsModule = __webpack_require__(33717);\nvar propertyIsEnumerableModule = __webpack_require__(48773);\nvar toObject = __webpack_require__(48981);\nvar IndexedObject = __webpack_require__(47055);\n\n// eslint-disable-next-line es/no-object-assign -- safe\nvar $assign = Object.assign;\n// eslint-disable-next-line es/no-object-defineproperty -- required for testing\nvar defineProperty = Object.defineProperty;\nvar concat = uncurryThis([].concat);\n\n// `Object.assign` method\n// https://tc39.es/ecma262/#sec-object.assign\nmodule.exports = !$assign || fails(function () {\n  // should have correct order of operations (Edge bug)\n  if (DESCRIPTORS && $assign({ b: 1 }, $assign(defineProperty({}, 'a', {\n    enumerable: true,\n    get: function () {\n      defineProperty(this, 'b', {\n        value: 3,\n        enumerable: false\n      });\n    }\n  }), { b: 2 })).b !== 1) return true;\n  // should work with symbols and should have deterministic property order (V8 bug)\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line es/no-symbol -- safe\n  var symbol = Symbol('assign detection');\n  var alphabet = 'abcdefghijklmnopqrst';\n  A[symbol] = 7;\n  // eslint-disable-next-line es/no-array-prototype-foreach -- safe\n  alphabet.split('').forEach(function (chr) { B[chr] = chr; });\n  return $assign({}, A)[symbol] !== 7 || objectKeys($assign({}, B)).join('') !== alphabet;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars -- required for `.length`\n  var T = toObject(target);\n  var argumentsLength = arguments.length;\n  var index = 1;\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  var propertyIsEnumerable = propertyIsEnumerableModule.f;\n  while (argumentsLength > index) {\n    var S = IndexedObject(arguments[index++]);\n    var keys = getOwnPropertySymbols ? concat(objectKeys(S), getOwnPropertySymbols(S)) : objectKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) {\n      key = keys[j++];\n      if (!DESCRIPTORS || call(propertyIsEnumerable, S, key)) T[key] = S[key];\n    }\n  } return T;\n} : $assign;\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/object-assign.js?")},44265:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar userAgent = __webpack_require__(82839);\n\nmodule.exports = /ipad|iphone|ipod/i.test(userAgent) && typeof Pebble != 'undefined';\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/environment-is-ios-pebble.js?")},44435:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\n\n// `Number.MIN_SAFE_INTEGER` constant\n// https://tc39.es/ecma262/#sec-number.min_safe_integer\n$({ target: 'Number', stat: true, nonConfigurable: true, nonWritable: true }, {\n  MIN_SAFE_INTEGER: -0x1FFFFFFFFFFFFF\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.number.min-safe-integer.js?")},44496:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar ArrayBufferViewCore = __webpack_require__(94644);\nvar $includes = (__webpack_require__(19617).includes);\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.includes` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.includes\nexportTypedArrayMethod('includes', function includes(searchElement /* , fromIndex */) {\n  return $includes(aTypedArray(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.includes.js?")},44576:function(module,__unused_webpack_exports,__webpack_require__){"use strict";eval("\nvar check = function (it) {\n  return it && it.Math === Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line es/no-global-this -- safe\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  // eslint-disable-next-line no-restricted-globals -- safe\n  check(typeof self == 'object' && self) ||\n  check(typeof __webpack_require__.g == 'object' && __webpack_require__.g) ||\n  check(typeof this == 'object' && this) ||\n  // eslint-disable-next-line no-new-func -- fallback\n  (function () { return this; })() || Function('return this')();\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/global-this.js?")},44590:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(42043);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.string.is-well-formed.js?")},44690:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar call = __webpack_require__(69565);\nvar createAsyncIteratorProxy = __webpack_require__(92059);\n\nmodule.exports = createAsyncIteratorProxy(function () {\n  return call(this.next, this.iterator);\n}, true);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/async-iterator-wrap.js?")},44732:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar ArrayBufferViewCore = __webpack_require__(94644);\nvar uncurryThis = __webpack_require__(79504);\nvar aCallable = __webpack_require__(79306);\nvar arrayFromConstructorAndList = __webpack_require__(35370);\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar getTypedArrayConstructor = ArrayBufferViewCore.getTypedArrayConstructor;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\nvar sort = uncurryThis(ArrayBufferViewCore.TypedArrayPrototype.sort);\n\n// `%TypedArray%.prototype.toSorted` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.tosorted\nexportTypedArrayMethod('toSorted', function toSorted(compareFn) {\n  if (compareFn !== undefined) aCallable(compareFn);\n  var O = aTypedArray(this);\n  var A = arrayFromConstructorAndList(getTypedArrayConstructor(O), O);\n  return sort(A, compareFn);\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.to-sorted.js?")},45374:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\n\n// `Number.EPSILON` constant\n// https://tc39.es/ecma262/#sec-number.epsilon\n$({ target: 'Number', stat: true, nonConfigurable: true, nonWritable: true }, {\n  EPSILON: Math.pow(2, -52)\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.number.epsilon.js?")},45700:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar defineWellKnownSymbol = __webpack_require__(70511);\nvar defineSymbolToPrimitive = __webpack_require__(58242);\n\n// `Symbol.toPrimitive` well-known symbol\n// https://tc39.es/ecma262/#sec-symbol.toprimitive\ndefineWellKnownSymbol('toPrimitive');\n\n// `Symbol.prototype[@@toPrimitive]` method\n// https://tc39.es/ecma262/#sec-symbol.prototype-@@toprimitive\ndefineSymbolToPrimitive();\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.symbol.to-primitive.js?")},45781:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar getBuiltIn = __webpack_require__(97751);\nvar validateArgumentsLength = __webpack_require__(22812);\nvar toString = __webpack_require__(655);\nvar USE_NATIVE_URL = __webpack_require__(67416);\n\nvar URL = getBuiltIn('URL');\n\n// `URL.parse` method\n// https://url.spec.whatwg.org/#dom-url-canparse\n$({ target: 'URL', stat: true, forced: !USE_NATIVE_URL }, {\n  parse: function parse(url) {\n    var length = validateArgumentsLength(arguments.length, 1);\n    var urlString = toString(url);\n    var base = length < 2 || arguments[1] === undefined ? undefined : toString(arguments[1]);\n    try {\n      return new URL(urlString, base);\n    } catch (error) {\n      return null;\n    }\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/web.url.parse.js?")},45806:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: in core-js@4, move /modules/ dependencies to public entries for better optimization by tools like `preset-env`\n__webpack_require__(47764);\nvar $ = __webpack_require__(46518);\nvar DESCRIPTORS = __webpack_require__(43724);\nvar USE_NATIVE_URL = __webpack_require__(67416);\nvar globalThis = __webpack_require__(44576);\nvar bind = __webpack_require__(76080);\nvar uncurryThis = __webpack_require__(79504);\nvar defineBuiltIn = __webpack_require__(36840);\nvar defineBuiltInAccessor = __webpack_require__(62106);\nvar anInstance = __webpack_require__(90679);\nvar hasOwn = __webpack_require__(39297);\nvar assign = __webpack_require__(44213);\nvar arrayFrom = __webpack_require__(97916);\nvar arraySlice = __webpack_require__(67680);\nvar codeAt = (__webpack_require__(68183).codeAt);\nvar toASCII = __webpack_require__(3717);\nvar $toString = __webpack_require__(655);\nvar setToStringTag = __webpack_require__(10687);\nvar validateArgumentsLength = __webpack_require__(22812);\nvar URLSearchParamsModule = __webpack_require__(98406);\nvar InternalStateModule = __webpack_require__(91181);\n\nvar setInternalState = InternalStateModule.set;\nvar getInternalURLState = InternalStateModule.getterFor('URL');\nvar URLSearchParams = URLSearchParamsModule.URLSearchParams;\nvar getInternalSearchParamsState = URLSearchParamsModule.getState;\n\nvar NativeURL = globalThis.URL;\nvar TypeError = globalThis.TypeError;\nvar parseInt = globalThis.parseInt;\nvar floor = Math.floor;\nvar pow = Math.pow;\nvar charAt = uncurryThis(''.charAt);\nvar exec = uncurryThis(/./.exec);\nvar join = uncurryThis([].join);\nvar numberToString = uncurryThis(1.0.toString);\nvar pop = uncurryThis([].pop);\nvar push = uncurryThis([].push);\nvar replace = uncurryThis(''.replace);\nvar shift = uncurryThis([].shift);\nvar split = uncurryThis(''.split);\nvar stringSlice = uncurryThis(''.slice);\nvar toLowerCase = uncurryThis(''.toLowerCase);\nvar unshift = uncurryThis([].unshift);\n\nvar INVALID_AUTHORITY = 'Invalid authority';\nvar INVALID_SCHEME = 'Invalid scheme';\nvar INVALID_HOST = 'Invalid host';\nvar INVALID_PORT = 'Invalid port';\n\nvar ALPHA = /[a-z]/i;\n// eslint-disable-next-line regexp/no-obscure-range -- safe\nvar ALPHANUMERIC = /[\\d+-.a-z]/i;\nvar DIGIT = /\\d/;\nvar HEX_START = /^0x/i;\nvar OCT = /^[0-7]+$/;\nvar DEC = /^\\d+$/;\nvar HEX = /^[\\da-f]+$/i;\n/* eslint-disable regexp/no-control-character -- safe */\nvar FORBIDDEN_HOST_CODE_POINT = /[\\0\\t\\n\\r #%/:<>?@[\\\\\\]^|]/;\nvar FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT = /[\\0\\t\\n\\r #/:<>?@[\\\\\\]^|]/;\nvar LEADING_C0_CONTROL_OR_SPACE = /^[\\u0000-\\u0020]+/;\nvar TRAILING_C0_CONTROL_OR_SPACE = /(^|[^\\u0000-\\u0020])[\\u0000-\\u0020]+$/;\nvar TAB_AND_NEW_LINE = /[\\t\\n\\r]/g;\n/* eslint-enable regexp/no-control-character -- safe */\nvar EOF;\n\n// https://url.spec.whatwg.org/#ipv4-number-parser\nvar parseIPv4 = function (input) {\n  var parts = split(input, '.');\n  var partsLength, numbers, index, part, radix, number, ipv4;\n  if (parts.length && parts[parts.length - 1] === '') {\n    parts.length--;\n  }\n  partsLength = parts.length;\n  if (partsLength > 4) return input;\n  numbers = [];\n  for (index = 0; index < partsLength; index++) {\n    part = parts[index];\n    if (part === '') return input;\n    radix = 10;\n    if (part.length > 1 && charAt(part, 0) === '0') {\n      radix = exec(HEX_START, part) ? 16 : 8;\n      part = stringSlice(part, radix === 8 ? 1 : 2);\n    }\n    if (part === '') {\n      number = 0;\n    } else {\n      if (!exec(radix === 10 ? DEC : radix === 8 ? OCT : HEX, part)) return input;\n      number = parseInt(part, radix);\n    }\n    push(numbers, number);\n  }\n  for (index = 0; index < partsLength; index++) {\n    number = numbers[index];\n    if (index === partsLength - 1) {\n      if (number >= pow(256, 5 - partsLength)) return null;\n    } else if (number > 255) return null;\n  }\n  ipv4 = pop(numbers);\n  for (index = 0; index < numbers.length; index++) {\n    ipv4 += numbers[index] * pow(256, 3 - index);\n  }\n  return ipv4;\n};\n\n// https://url.spec.whatwg.org/#concept-ipv6-parser\n// eslint-disable-next-line max-statements -- TODO\nvar parseIPv6 = function (input) {\n  var address = [0, 0, 0, 0, 0, 0, 0, 0];\n  var pieceIndex = 0;\n  var compress = null;\n  var pointer = 0;\n  var value, length, numbersSeen, ipv4Piece, number, swaps, swap;\n\n  var chr = function () {\n    return charAt(input, pointer);\n  };\n\n  if (chr() === ':') {\n    if (charAt(input, 1) !== ':') return;\n    pointer += 2;\n    pieceIndex++;\n    compress = pieceIndex;\n  }\n  while (chr()) {\n    if (pieceIndex === 8) return;\n    if (chr() === ':') {\n      if (compress !== null) return;\n      pointer++;\n      pieceIndex++;\n      compress = pieceIndex;\n      continue;\n    }\n    value = length = 0;\n    while (length < 4 && exec(HEX, chr())) {\n      value = value * 16 + parseInt(chr(), 16);\n      pointer++;\n      length++;\n    }\n    if (chr() === '.') {\n      if (length === 0) return;\n      pointer -= length;\n      if (pieceIndex > 6) return;\n      numbersSeen = 0;\n      while (chr()) {\n        ipv4Piece = null;\n        if (numbersSeen > 0) {\n          if (chr() === '.' && numbersSeen < 4) pointer++;\n          else return;\n        }\n        if (!exec(DIGIT, chr())) return;\n        while (exec(DIGIT, chr())) {\n          number = parseInt(chr(), 10);\n          if (ipv4Piece === null) ipv4Piece = number;\n          else if (ipv4Piece === 0) return;\n          else ipv4Piece = ipv4Piece * 10 + number;\n          if (ipv4Piece > 255) return;\n          pointer++;\n        }\n        address[pieceIndex] = address[pieceIndex] * 256 + ipv4Piece;\n        numbersSeen++;\n        if (numbersSeen === 2 || numbersSeen === 4) pieceIndex++;\n      }\n      if (numbersSeen !== 4) return;\n      break;\n    } else if (chr() === ':') {\n      pointer++;\n      if (!chr()) return;\n    } else if (chr()) return;\n    address[pieceIndex++] = value;\n  }\n  if (compress !== null) {\n    swaps = pieceIndex - compress;\n    pieceIndex = 7;\n    while (pieceIndex !== 0 && swaps > 0) {\n      swap = address[pieceIndex];\n      address[pieceIndex--] = address[compress + swaps - 1];\n      address[compress + --swaps] = swap;\n    }\n  } else if (pieceIndex !== 8) return;\n  return address;\n};\n\nvar findLongestZeroSequence = function (ipv6) {\n  var maxIndex = null;\n  var maxLength = 1;\n  var currStart = null;\n  var currLength = 0;\n  var index = 0;\n  for (; index < 8; index++) {\n    if (ipv6[index] !== 0) {\n      if (currLength > maxLength) {\n        maxIndex = currStart;\n        maxLength = currLength;\n      }\n      currStart = null;\n      currLength = 0;\n    } else {\n      if (currStart === null) currStart = index;\n      ++currLength;\n    }\n  }\n  return currLength > maxLength ? currStart : maxIndex;\n};\n\n// https://url.spec.whatwg.org/#host-serializing\nvar serializeHost = function (host) {\n  var result, index, compress, ignore0;\n\n  // ipv4\n  if (typeof host == 'number') {\n    result = [];\n    for (index = 0; index < 4; index++) {\n      unshift(result, host % 256);\n      host = floor(host / 256);\n    }\n    return join(result, '.');\n  }\n\n  // ipv6\n  if (typeof host == 'object') {\n    result = '';\n    compress = findLongestZeroSequence(host);\n    for (index = 0; index < 8; index++) {\n      if (ignore0 && host[index] === 0) continue;\n      if (ignore0) ignore0 = false;\n      if (compress === index) {\n        result += index ? ':' : '::';\n        ignore0 = true;\n      } else {\n        result += numberToString(host[index], 16);\n        if (index < 7) result += ':';\n      }\n    }\n    return '[' + result + ']';\n  }\n\n  return host;\n};\n\nvar C0ControlPercentEncodeSet = {};\nvar fragmentPercentEncodeSet = assign({}, C0ControlPercentEncodeSet, {\n  ' ': 1, '\"': 1, '<': 1, '>': 1, '`': 1\n});\nvar pathPercentEncodeSet = assign({}, fragmentPercentEncodeSet, {\n  '#': 1, '?': 1, '{': 1, '}': 1\n});\nvar userinfoPercentEncodeSet = assign({}, pathPercentEncodeSet, {\n  '/': 1, ':': 1, ';': 1, '=': 1, '@': 1, '[': 1, '\\\\': 1, ']': 1, '^': 1, '|': 1\n});\n\nvar percentEncode = function (chr, set) {\n  var code = codeAt(chr, 0);\n  return code > 0x20 && code < 0x7F && !hasOwn(set, chr) ? chr : encodeURIComponent(chr);\n};\n\n// https://url.spec.whatwg.org/#special-scheme\nvar specialSchemes = {\n  ftp: 21,\n  file: null,\n  http: 80,\n  https: 443,\n  ws: 80,\n  wss: 443\n};\n\n// https://url.spec.whatwg.org/#windows-drive-letter\nvar isWindowsDriveLetter = function (string, normalized) {\n  var second;\n  return string.length === 2 && exec(ALPHA, charAt(string, 0))\n    && ((second = charAt(string, 1)) === ':' || (!normalized && second === '|'));\n};\n\n// https://url.spec.whatwg.org/#start-with-a-windows-drive-letter\nvar startsWithWindowsDriveLetter = function (string) {\n  var third;\n  return string.length > 1 && isWindowsDriveLetter(stringSlice(string, 0, 2)) && (\n    string.length === 2 ||\n    ((third = charAt(string, 2)) === '/' || third === '\\\\' || third === '?' || third === '#')\n  );\n};\n\n// https://url.spec.whatwg.org/#single-dot-path-segment\nvar isSingleDot = function (segment) {\n  return segment === '.' || toLowerCase(segment) === '%2e';\n};\n\n// https://url.spec.whatwg.org/#double-dot-path-segment\nvar isDoubleDot = function (segment) {\n  segment = toLowerCase(segment);\n  return segment === '..' || segment === '%2e.' || segment === '.%2e' || segment === '%2e%2e';\n};\n\n// States:\nvar SCHEME_START = {};\nvar SCHEME = {};\nvar NO_SCHEME = {};\nvar SPECIAL_RELATIVE_OR_AUTHORITY = {};\nvar PATH_OR_AUTHORITY = {};\nvar RELATIVE = {};\nvar RELATIVE_SLASH = {};\nvar SPECIAL_AUTHORITY_SLASHES = {};\nvar SPECIAL_AUTHORITY_IGNORE_SLASHES = {};\nvar AUTHORITY = {};\nvar HOST = {};\nvar HOSTNAME = {};\nvar PORT = {};\nvar FILE = {};\nvar FILE_SLASH = {};\nvar FILE_HOST = {};\nvar PATH_START = {};\nvar PATH = {};\nvar CANNOT_BE_A_BASE_URL_PATH = {};\nvar QUERY = {};\nvar FRAGMENT = {};\n\nvar URLState = function (url, isBase, base) {\n  var urlString = $toString(url);\n  var baseState, failure, searchParams;\n  if (isBase) {\n    failure = this.parse(urlString);\n    if (failure) throw new TypeError(failure);\n    this.searchParams = null;\n  } else {\n    if (base !== undefined) baseState = new URLState(base, true);\n    failure = this.parse(urlString, null, baseState);\n    if (failure) throw new TypeError(failure);\n    searchParams = getInternalSearchParamsState(new URLSearchParams());\n    searchParams.bindURL(this);\n    this.searchParams = searchParams;\n  }\n};\n\nURLState.prototype = {\n  type: 'URL',\n  // https://url.spec.whatwg.org/#url-parsing\n  // eslint-disable-next-line max-statements -- TODO\n  parse: function (input, stateOverride, base) {\n    var url = this;\n    var state = stateOverride || SCHEME_START;\n    var pointer = 0;\n    var buffer = '';\n    var seenAt = false;\n    var seenBracket = false;\n    var seenPasswordToken = false;\n    var codePoints, chr, bufferCodePoints, failure;\n\n    input = $toString(input);\n\n    if (!stateOverride) {\n      url.scheme = '';\n      url.username = '';\n      url.password = '';\n      url.host = null;\n      url.port = null;\n      url.path = [];\n      url.query = null;\n      url.fragment = null;\n      url.cannotBeABaseURL = false;\n      input = replace(input, LEADING_C0_CONTROL_OR_SPACE, '');\n      input = replace(input, TRAILING_C0_CONTROL_OR_SPACE, '$1');\n    }\n\n    input = replace(input, TAB_AND_NEW_LINE, '');\n\n    codePoints = arrayFrom(input);\n\n    while (pointer <= codePoints.length) {\n      chr = codePoints[pointer];\n      switch (state) {\n        case SCHEME_START:\n          if (chr && exec(ALPHA, chr)) {\n            buffer += toLowerCase(chr);\n            state = SCHEME;\n          } else if (!stateOverride) {\n            state = NO_SCHEME;\n            continue;\n          } else return INVALID_SCHEME;\n          break;\n\n        case SCHEME:\n          if (chr && (exec(ALPHANUMERIC, chr) || chr === '+' || chr === '-' || chr === '.')) {\n            buffer += toLowerCase(chr);\n          } else if (chr === ':') {\n            if (stateOverride && (\n              (url.isSpecial() !== hasOwn(specialSchemes, buffer)) ||\n              (buffer === 'file' && (url.includesCredentials() || url.port !== null)) ||\n              (url.scheme === 'file' && !url.host)\n            )) return;\n            url.scheme = buffer;\n            if (stateOverride) {\n              if (url.isSpecial() && specialSchemes[url.scheme] === url.port) url.port = null;\n              return;\n            }\n            buffer = '';\n            if (url.scheme === 'file') {\n              state = FILE;\n            } else if (url.isSpecial() && base && base.scheme === url.scheme) {\n              state = SPECIAL_RELATIVE_OR_AUTHORITY;\n            } else if (url.isSpecial()) {\n              state = SPECIAL_AUTHORITY_SLASHES;\n            } else if (codePoints[pointer + 1] === '/') {\n              state = PATH_OR_AUTHORITY;\n              pointer++;\n            } else {\n              url.cannotBeABaseURL = true;\n              push(url.path, '');\n              state = CANNOT_BE_A_BASE_URL_PATH;\n            }\n          } else if (!stateOverride) {\n            buffer = '';\n            state = NO_SCHEME;\n            pointer = 0;\n            continue;\n          } else return INVALID_SCHEME;\n          break;\n\n        case NO_SCHEME:\n          if (!base || (base.cannotBeABaseURL && chr !== '#')) return INVALID_SCHEME;\n          if (base.cannotBeABaseURL && chr === '#') {\n            url.scheme = base.scheme;\n            url.path = arraySlice(base.path);\n            url.query = base.query;\n            url.fragment = '';\n            url.cannotBeABaseURL = true;\n            state = FRAGMENT;\n            break;\n          }\n          state = base.scheme === 'file' ? FILE : RELATIVE;\n          continue;\n\n        case SPECIAL_RELATIVE_OR_AUTHORITY:\n          if (chr === '/' && codePoints[pointer + 1] === '/') {\n            state = SPECIAL_AUTHORITY_IGNORE_SLASHES;\n            pointer++;\n          } else {\n            state = RELATIVE;\n            continue;\n          } break;\n\n        case PATH_OR_AUTHORITY:\n          if (chr === '/') {\n            state = AUTHORITY;\n            break;\n          } else {\n            state = PATH;\n            continue;\n          }\n\n        case RELATIVE:\n          url.scheme = base.scheme;\n          if (chr === EOF) {\n            url.username = base.username;\n            url.password = base.password;\n            url.host = base.host;\n            url.port = base.port;\n            url.path = arraySlice(base.path);\n            url.query = base.query;\n          } else if (chr === '/' || (chr === '\\\\' && url.isSpecial())) {\n            state = RELATIVE_SLASH;\n          } else if (chr === '?') {\n            url.username = base.username;\n            url.password = base.password;\n            url.host = base.host;\n            url.port = base.port;\n            url.path = arraySlice(base.path);\n            url.query = '';\n            state = QUERY;\n          } else if (chr === '#') {\n            url.username = base.username;\n            url.password = base.password;\n            url.host = base.host;\n            url.port = base.port;\n            url.path = arraySlice(base.path);\n            url.query = base.query;\n            url.fragment = '';\n            state = FRAGMENT;\n          } else {\n            url.username = base.username;\n            url.password = base.password;\n            url.host = base.host;\n            url.port = base.port;\n            url.path = arraySlice(base.path);\n            url.path.length--;\n            state = PATH;\n            continue;\n          } break;\n\n        case RELATIVE_SLASH:\n          if (url.isSpecial() && (chr === '/' || chr === '\\\\')) {\n            state = SPECIAL_AUTHORITY_IGNORE_SLASHES;\n          } else if (chr === '/') {\n            state = AUTHORITY;\n          } else {\n            url.username = base.username;\n            url.password = base.password;\n            url.host = base.host;\n            url.port = base.port;\n            state = PATH;\n            continue;\n          } break;\n\n        case SPECIAL_AUTHORITY_SLASHES:\n          state = SPECIAL_AUTHORITY_IGNORE_SLASHES;\n          if (chr !== '/' || charAt(buffer, pointer + 1) !== '/') continue;\n          pointer++;\n          break;\n\n        case SPECIAL_AUTHORITY_IGNORE_SLASHES:\n          if (chr !== '/' && chr !== '\\\\') {\n            state = AUTHORITY;\n            continue;\n          } break;\n\n        case AUTHORITY:\n          if (chr === '@') {\n            if (seenAt) buffer = '%40' + buffer;\n            seenAt = true;\n            bufferCodePoints = arrayFrom(buffer);\n            for (var i = 0; i < bufferCodePoints.length; i++) {\n              var codePoint = bufferCodePoints[i];\n              if (codePoint === ':' && !seenPasswordToken) {\n                seenPasswordToken = true;\n                continue;\n              }\n              var encodedCodePoints = percentEncode(codePoint, userinfoPercentEncodeSet);\n              if (seenPasswordToken) url.password += encodedCodePoints;\n              else url.username += encodedCodePoints;\n            }\n            buffer = '';\n          } else if (\n            chr === EOF || chr === '/' || chr === '?' || chr === '#' ||\n            (chr === '\\\\' && url.isSpecial())\n          ) {\n            if (seenAt && buffer === '') return INVALID_AUTHORITY;\n            pointer -= arrayFrom(buffer).length + 1;\n            buffer = '';\n            state = HOST;\n          } else buffer += chr;\n          break;\n\n        case HOST:\n        case HOSTNAME:\n          if (stateOverride && url.scheme === 'file') {\n            state = FILE_HOST;\n            continue;\n          } else if (chr === ':' && !seenBracket) {\n            if (buffer === '') return INVALID_HOST;\n            failure = url.parseHost(buffer);\n            if (failure) return failure;\n            buffer = '';\n            state = PORT;\n            if (stateOverride === HOSTNAME) return;\n          } else if (\n            chr === EOF || chr === '/' || chr === '?' || chr === '#' ||\n            (chr === '\\\\' && url.isSpecial())\n          ) {\n            if (url.isSpecial() && buffer === '') return INVALID_HOST;\n            if (stateOverride && buffer === '' && (url.includesCredentials() || url.port !== null)) return;\n            failure = url.parseHost(buffer);\n            if (failure) return failure;\n            buffer = '';\n            state = PATH_START;\n            if (stateOverride) return;\n            continue;\n          } else {\n            if (chr === '[') seenBracket = true;\n            else if (chr === ']') seenBracket = false;\n            buffer += chr;\n          } break;\n\n        case PORT:\n          if (exec(DIGIT, chr)) {\n            buffer += chr;\n          } else if (\n            chr === EOF || chr === '/' || chr === '?' || chr === '#' ||\n            (chr === '\\\\' && url.isSpecial()) ||\n            stateOverride\n          ) {\n            if (buffer !== '') {\n              var port = parseInt(buffer, 10);\n              if (port > 0xFFFF) return INVALID_PORT;\n              url.port = (url.isSpecial() && port === specialSchemes[url.scheme]) ? null : port;\n              buffer = '';\n            }\n            if (stateOverride) return;\n            state = PATH_START;\n            continue;\n          } else return INVALID_PORT;\n          break;\n\n        case FILE:\n          url.scheme = 'file';\n          if (chr === '/' || chr === '\\\\') state = FILE_SLASH;\n          else if (base && base.scheme === 'file') {\n            switch (chr) {\n              case EOF:\n                url.host = base.host;\n                url.path = arraySlice(base.path);\n                url.query = base.query;\n                break;\n              case '?':\n                url.host = base.host;\n                url.path = arraySlice(base.path);\n                url.query = '';\n                state = QUERY;\n                break;\n              case '#':\n                url.host = base.host;\n                url.path = arraySlice(base.path);\n                url.query = base.query;\n                url.fragment = '';\n                state = FRAGMENT;\n                break;\n              default:\n                if (!startsWithWindowsDriveLetter(join(arraySlice(codePoints, pointer), ''))) {\n                  url.host = base.host;\n                  url.path = arraySlice(base.path);\n                  url.shortenPath();\n                }\n                state = PATH;\n                continue;\n            }\n          } else {\n            state = PATH;\n            continue;\n          } break;\n\n        case FILE_SLASH:\n          if (chr === '/' || chr === '\\\\') {\n            state = FILE_HOST;\n            break;\n          }\n          if (base && base.scheme === 'file' && !startsWithWindowsDriveLetter(join(arraySlice(codePoints, pointer), ''))) {\n            if (isWindowsDriveLetter(base.path[0], true)) push(url.path, base.path[0]);\n            else url.host = base.host;\n          }\n          state = PATH;\n          continue;\n\n        case FILE_HOST:\n          if (chr === EOF || chr === '/' || chr === '\\\\' || chr === '?' || chr === '#') {\n            if (!stateOverride && isWindowsDriveLetter(buffer)) {\n              state = PATH;\n            } else if (buffer === '') {\n              url.host = '';\n              if (stateOverride) return;\n              state = PATH_START;\n            } else {\n              failure = url.parseHost(buffer);\n              if (failure) return failure;\n              if (url.host === 'localhost') url.host = '';\n              if (stateOverride) return;\n              buffer = '';\n              state = PATH_START;\n            } continue;\n          } else buffer += chr;\n          break;\n\n        case PATH_START:\n          if (url.isSpecial()) {\n            state = PATH;\n            if (chr !== '/' && chr !== '\\\\') continue;\n          } else if (!stateOverride && chr === '?') {\n            url.query = '';\n            state = QUERY;\n          } else if (!stateOverride && chr === '#') {\n            url.fragment = '';\n            state = FRAGMENT;\n          } else if (chr !== EOF) {\n            state = PATH;\n            if (chr !== '/') continue;\n          } break;\n\n        case PATH:\n          if (\n            chr === EOF || chr === '/' ||\n            (chr === '\\\\' && url.isSpecial()) ||\n            (!stateOverride && (chr === '?' || chr === '#'))\n          ) {\n            if (isDoubleDot(buffer)) {\n              url.shortenPath();\n              if (chr !== '/' && !(chr === '\\\\' && url.isSpecial())) {\n                push(url.path, '');\n              }\n            } else if (isSingleDot(buffer)) {\n              if (chr !== '/' && !(chr === '\\\\' && url.isSpecial())) {\n                push(url.path, '');\n              }\n            } else {\n              if (url.scheme === 'file' && !url.path.length && isWindowsDriveLetter(buffer)) {\n                if (url.host) url.host = '';\n                buffer = charAt(buffer, 0) + ':'; // normalize windows drive letter\n              }\n              push(url.path, buffer);\n            }\n            buffer = '';\n            if (url.scheme === 'file' && (chr === EOF || chr === '?' || chr === '#')) {\n              while (url.path.length > 1 && url.path[0] === '') {\n                shift(url.path);\n              }\n            }\n            if (chr === '?') {\n              url.query = '';\n              state = QUERY;\n            } else if (chr === '#') {\n              url.fragment = '';\n              state = FRAGMENT;\n            }\n          } else {\n            buffer += percentEncode(chr, pathPercentEncodeSet);\n          } break;\n\n        case CANNOT_BE_A_BASE_URL_PATH:\n          if (chr === '?') {\n            url.query = '';\n            state = QUERY;\n          } else if (chr === '#') {\n            url.fragment = '';\n            state = FRAGMENT;\n          } else if (chr !== EOF) {\n            url.path[0] += percentEncode(chr, C0ControlPercentEncodeSet);\n          } break;\n\n        case QUERY:\n          if (!stateOverride && chr === '#') {\n            url.fragment = '';\n            state = FRAGMENT;\n          } else if (chr !== EOF) {\n            if (chr === \"'\" && url.isSpecial()) url.query += '%27';\n            else if (chr === '#') url.query += '%23';\n            else url.query += percentEncode(chr, C0ControlPercentEncodeSet);\n          } break;\n\n        case FRAGMENT:\n          if (chr !== EOF) url.fragment += percentEncode(chr, fragmentPercentEncodeSet);\n          break;\n      }\n\n      pointer++;\n    }\n  },\n  // https://url.spec.whatwg.org/#host-parsing\n  parseHost: function (input) {\n    var result, codePoints, index;\n    if (charAt(input, 0) === '[') {\n      if (charAt(input, input.length - 1) !== ']') return INVALID_HOST;\n      result = parseIPv6(stringSlice(input, 1, -1));\n      if (!result) return INVALID_HOST;\n      this.host = result;\n    // opaque host\n    } else if (!this.isSpecial()) {\n      if (exec(FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT, input)) return INVALID_HOST;\n      result = '';\n      codePoints = arrayFrom(input);\n      for (index = 0; index < codePoints.length; index++) {\n        result += percentEncode(codePoints[index], C0ControlPercentEncodeSet);\n      }\n      this.host = result;\n    } else {\n      input = toASCII(input);\n      if (exec(FORBIDDEN_HOST_CODE_POINT, input)) return INVALID_HOST;\n      result = parseIPv4(input);\n      if (result === null) return INVALID_HOST;\n      this.host = result;\n    }\n  },\n  // https://url.spec.whatwg.org/#cannot-have-a-username-password-port\n  cannotHaveUsernamePasswordPort: function () {\n    return !this.host || this.cannotBeABaseURL || this.scheme === 'file';\n  },\n  // https://url.spec.whatwg.org/#include-credentials\n  includesCredentials: function () {\n    return this.username !== '' || this.password !== '';\n  },\n  // https://url.spec.whatwg.org/#is-special\n  isSpecial: function () {\n    return hasOwn(specialSchemes, this.scheme);\n  },\n  // https://url.spec.whatwg.org/#shorten-a-urls-path\n  shortenPath: function () {\n    var path = this.path;\n    var pathSize = path.length;\n    if (pathSize && (this.scheme !== 'file' || pathSize !== 1 || !isWindowsDriveLetter(path[0], true))) {\n      path.length--;\n    }\n  },\n  // https://url.spec.whatwg.org/#concept-url-serializer\n  serialize: function () {\n    var url = this;\n    var scheme = url.scheme;\n    var username = url.username;\n    var password = url.password;\n    var host = url.host;\n    var port = url.port;\n    var path = url.path;\n    var query = url.query;\n    var fragment = url.fragment;\n    var output = scheme + ':';\n    if (host !== null) {\n      output += '//';\n      if (url.includesCredentials()) {\n        output += username + (password ? ':' + password : '') + '@';\n      }\n      output += serializeHost(host);\n      if (port !== null) output += ':' + port;\n    } else if (scheme === 'file') output += '//';\n    output += url.cannotBeABaseURL ? path[0] : path.length ? '/' + join(path, '/') : '';\n    if (query !== null) output += '?' + query;\n    if (fragment !== null) output += '#' + fragment;\n    return output;\n  },\n  // https://url.spec.whatwg.org/#dom-url-href\n  setHref: function (href) {\n    var failure = this.parse(href);\n    if (failure) throw new TypeError(failure);\n    this.searchParams.update();\n  },\n  // https://url.spec.whatwg.org/#dom-url-origin\n  getOrigin: function () {\n    var scheme = this.scheme;\n    var port = this.port;\n    if (scheme === 'blob') try {\n      return new URLConstructor(scheme.path[0]).origin;\n    } catch (error) {\n      return 'null';\n    }\n    if (scheme === 'file' || !this.isSpecial()) return 'null';\n    return scheme + '://' + serializeHost(this.host) + (port !== null ? ':' + port : '');\n  },\n  // https://url.spec.whatwg.org/#dom-url-protocol\n  getProtocol: function () {\n    return this.scheme + ':';\n  },\n  setProtocol: function (protocol) {\n    this.parse($toString(protocol) + ':', SCHEME_START);\n  },\n  // https://url.spec.whatwg.org/#dom-url-username\n  getUsername: function () {\n    return this.username;\n  },\n  setUsername: function (username) {\n    var codePoints = arrayFrom($toString(username));\n    if (this.cannotHaveUsernamePasswordPort()) return;\n    this.username = '';\n    for (var i = 0; i < codePoints.length; i++) {\n      this.username += percentEncode(codePoints[i], userinfoPercentEncodeSet);\n    }\n  },\n  // https://url.spec.whatwg.org/#dom-url-password\n  getPassword: function () {\n    return this.password;\n  },\n  setPassword: function (password) {\n    var codePoints = arrayFrom($toString(password));\n    if (this.cannotHaveUsernamePasswordPort()) return;\n    this.password = '';\n    for (var i = 0; i < codePoints.length; i++) {\n      this.password += percentEncode(codePoints[i], userinfoPercentEncodeSet);\n    }\n  },\n  // https://url.spec.whatwg.org/#dom-url-host\n  getHost: function () {\n    var host = this.host;\n    var port = this.port;\n    return host === null ? ''\n      : port === null ? serializeHost(host)\n      : serializeHost(host) + ':' + port;\n  },\n  setHost: function (host) {\n    if (this.cannotBeABaseURL) return;\n    this.parse(host, HOST);\n  },\n  // https://url.spec.whatwg.org/#dom-url-hostname\n  getHostname: function () {\n    var host = this.host;\n    return host === null ? '' : serializeHost(host);\n  },\n  setHostname: function (hostname) {\n    if (this.cannotBeABaseURL) return;\n    this.parse(hostname, HOSTNAME);\n  },\n  // https://url.spec.whatwg.org/#dom-url-port\n  getPort: function () {\n    var port = this.port;\n    return port === null ? '' : $toString(port);\n  },\n  setPort: function (port) {\n    if (this.cannotHaveUsernamePasswordPort()) return;\n    port = $toString(port);\n    if (port === '') this.port = null;\n    else this.parse(port, PORT);\n  },\n  // https://url.spec.whatwg.org/#dom-url-pathname\n  getPathname: function () {\n    var path = this.path;\n    return this.cannotBeABaseURL ? path[0] : path.length ? '/' + join(path, '/') : '';\n  },\n  setPathname: function (pathname) {\n    if (this.cannotBeABaseURL) return;\n    this.path = [];\n    this.parse(pathname, PATH_START);\n  },\n  // https://url.spec.whatwg.org/#dom-url-search\n  getSearch: function () {\n    var query = this.query;\n    return query ? '?' + query : '';\n  },\n  setSearch: function (search) {\n    search = $toString(search);\n    if (search === '') {\n      this.query = null;\n    } else {\n      if (charAt(search, 0) === '?') search = stringSlice(search, 1);\n      this.query = '';\n      this.parse(search, QUERY);\n    }\n    this.searchParams.update();\n  },\n  // https://url.spec.whatwg.org/#dom-url-searchparams\n  getSearchParams: function () {\n    return this.searchParams.facade;\n  },\n  // https://url.spec.whatwg.org/#dom-url-hash\n  getHash: function () {\n    var fragment = this.fragment;\n    return fragment ? '#' + fragment : '';\n  },\n  setHash: function (hash) {\n    hash = $toString(hash);\n    if (hash === '') {\n      this.fragment = null;\n      return;\n    }\n    if (charAt(hash, 0) === '#') hash = stringSlice(hash, 1);\n    this.fragment = '';\n    this.parse(hash, FRAGMENT);\n  },\n  update: function () {\n    this.query = this.searchParams.serialize() || null;\n  }\n};\n\n// `URL` constructor\n// https://url.spec.whatwg.org/#url-class\nvar URLConstructor = function URL(url /* , base */) {\n  var that = anInstance(this, URLPrototype);\n  var base = validateArgumentsLength(arguments.length, 1) > 1 ? arguments[1] : undefined;\n  var state = setInternalState(that, new URLState(url, false, base));\n  if (!DESCRIPTORS) {\n    that.href = state.serialize();\n    that.origin = state.getOrigin();\n    that.protocol = state.getProtocol();\n    that.username = state.getUsername();\n    that.password = state.getPassword();\n    that.host = state.getHost();\n    that.hostname = state.getHostname();\n    that.port = state.getPort();\n    that.pathname = state.getPathname();\n    that.search = state.getSearch();\n    that.searchParams = state.getSearchParams();\n    that.hash = state.getHash();\n  }\n};\n\nvar URLPrototype = URLConstructor.prototype;\n\nvar accessorDescriptor = function (getter, setter) {\n  return {\n    get: function () {\n      return getInternalURLState(this)[getter]();\n    },\n    set: setter && function (value) {\n      return getInternalURLState(this)[setter](value);\n    },\n    configurable: true,\n    enumerable: true\n  };\n};\n\nif (DESCRIPTORS) {\n  // `URL.prototype.href` accessors pair\n  // https://url.spec.whatwg.org/#dom-url-href\n  defineBuiltInAccessor(URLPrototype, 'href', accessorDescriptor('serialize', 'setHref'));\n  // `URL.prototype.origin` getter\n  // https://url.spec.whatwg.org/#dom-url-origin\n  defineBuiltInAccessor(URLPrototype, 'origin', accessorDescriptor('getOrigin'));\n  // `URL.prototype.protocol` accessors pair\n  // https://url.spec.whatwg.org/#dom-url-protocol\n  defineBuiltInAccessor(URLPrototype, 'protocol', accessorDescriptor('getProtocol', 'setProtocol'));\n  // `URL.prototype.username` accessors pair\n  // https://url.spec.whatwg.org/#dom-url-username\n  defineBuiltInAccessor(URLPrototype, 'username', accessorDescriptor('getUsername', 'setUsername'));\n  // `URL.prototype.password` accessors pair\n  // https://url.spec.whatwg.org/#dom-url-password\n  defineBuiltInAccessor(URLPrototype, 'password', accessorDescriptor('getPassword', 'setPassword'));\n  // `URL.prototype.host` accessors pair\n  // https://url.spec.whatwg.org/#dom-url-host\n  defineBuiltInAccessor(URLPrototype, 'host', accessorDescriptor('getHost', 'setHost'));\n  // `URL.prototype.hostname` accessors pair\n  // https://url.spec.whatwg.org/#dom-url-hostname\n  defineBuiltInAccessor(URLPrototype, 'hostname', accessorDescriptor('getHostname', 'setHostname'));\n  // `URL.prototype.port` accessors pair\n  // https://url.spec.whatwg.org/#dom-url-port\n  defineBuiltInAccessor(URLPrototype, 'port', accessorDescriptor('getPort', 'setPort'));\n  // `URL.prototype.pathname` accessors pair\n  // https://url.spec.whatwg.org/#dom-url-pathname\n  defineBuiltInAccessor(URLPrototype, 'pathname', accessorDescriptor('getPathname', 'setPathname'));\n  // `URL.prototype.search` accessors pair\n  // https://url.spec.whatwg.org/#dom-url-search\n  defineBuiltInAccessor(URLPrototype, 'search', accessorDescriptor('getSearch', 'setSearch'));\n  // `URL.prototype.searchParams` getter\n  // https://url.spec.whatwg.org/#dom-url-searchparams\n  defineBuiltInAccessor(URLPrototype, 'searchParams', accessorDescriptor('getSearchParams'));\n  // `URL.prototype.hash` accessors pair\n  // https://url.spec.whatwg.org/#dom-url-hash\n  defineBuiltInAccessor(URLPrototype, 'hash', accessorDescriptor('getHash', 'setHash'));\n}\n\n// `URL.prototype.toJSON` method\n// https://url.spec.whatwg.org/#dom-url-tojson\ndefineBuiltIn(URLPrototype, 'toJSON', function toJSON() {\n  return getInternalURLState(this).serialize();\n}, { enumerable: true });\n\n// `URL.prototype.toString` method\n// https://url.spec.whatwg.org/#URL-stringification-behavior\ndefineBuiltIn(URLPrototype, 'toString', function toString() {\n  return getInternalURLState(this).serialize();\n}, { enumerable: true });\n\nif (NativeURL) {\n  var nativeCreateObjectURL = NativeURL.createObjectURL;\n  var nativeRevokeObjectURL = NativeURL.revokeObjectURL;\n  // `URL.createObjectURL` method\n  // https://developer.mozilla.org/en-US/docs/Web/API/URL/createObjectURL\n  if (nativeCreateObjectURL) defineBuiltIn(URLConstructor, 'createObjectURL', bind(nativeCreateObjectURL, NativeURL));\n  // `URL.revokeObjectURL` method\n  // https://developer.mozilla.org/en-US/docs/Web/API/URL/revokeObjectURL\n  if (nativeRevokeObjectURL) defineBuiltIn(URLConstructor, 'revokeObjectURL', bind(nativeRevokeObjectURL, NativeURL));\n}\n\nsetToStringTag(URLConstructor, 'URL');\n\n$({ global: true, constructor: true, forced: !USE_NATIVE_URL, sham: !DESCRIPTORS }, {\n  URL: URLConstructor\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/web.url.constructor.js?")},45876:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar isSubsetOf = __webpack_require__(53838);\nvar setMethodAcceptSetLike = __webpack_require__(84916);\n\nvar INCORRECT = !setMethodAcceptSetLike('isSubsetOf', function (result) {\n  return result;\n});\n\n// `Set.prototype.isSubsetOf` method\n// https://tc39.es/ecma262/#sec-set.prototype.issubsetof\n$({ target: 'Set', proto: true, real: true, forced: INCORRECT }, {\n  isSubsetOf: isSubsetOf\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.set.is-subset-of.v2.js?")},45882:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(49603);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.iterator.from.js?")},46058:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar $group = __webpack_require__(77957);\nvar addToUnscopables = __webpack_require__(6469);\n\n// `Array.prototype.group` method\n// https://github.com/tc39/proposal-array-grouping\n$({ target: 'Array', proto: true }, {\n  group: function group(callbackfn /* , thisArg */) {\n    var thisArg = arguments.length > 1 ? arguments[1] : undefined;\n    return $group(this, callbackfn, thisArg);\n  }\n});\n\naddToUnscopables('group');\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.array.group.js?")},46276:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar createHTML = __webpack_require__(77240);\nvar forcedStringHTMLMethod = __webpack_require__(23061);\n\n// `String.prototype.strike` method\n// https://tc39.es/ecma262/#sec-string.prototype.strike\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('strike') }, {\n  strike: function strike() {\n    return createHTML(this, 'strike', '', '');\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.string.strike.js?")},46449:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar flattenIntoArray = __webpack_require__(70259);\nvar toObject = __webpack_require__(48981);\nvar lengthOfArrayLike = __webpack_require__(26198);\nvar toIntegerOrInfinity = __webpack_require__(91291);\nvar arraySpeciesCreate = __webpack_require__(1469);\n\n// `Array.prototype.flat` method\n// https://tc39.es/ecma262/#sec-array.prototype.flat\n$({ target: 'Array', proto: true }, {\n  flat: function flat(/* depthArg = 1 */) {\n    var depthArg = arguments.length ? arguments[0] : undefined;\n    var O = toObject(this);\n    var sourceLen = lengthOfArrayLike(O);\n    var A = arraySpeciesCreate(O, 0);\n    A.length = flattenIntoArray(A, O, O, sourceLen, 0, depthArg === undefined ? 1 : toIntegerOrInfinity(depthArg));\n    return A;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array.flat.js?")},46518:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar globalThis = __webpack_require__(44576);\nvar getOwnPropertyDescriptor = (__webpack_require__(77347).f);\nvar createNonEnumerableProperty = __webpack_require__(66699);\nvar defineBuiltIn = __webpack_require__(36840);\nvar defineGlobalProperty = __webpack_require__(39433);\nvar copyConstructorProperties = __webpack_require__(77740);\nvar isForced = __webpack_require__(92796);\n\n/*\n  options.target         - name of the target object\n  options.global         - target is the global object\n  options.stat           - export as static methods of target\n  options.proto          - export as prototype methods of target\n  options.real           - real prototype method for the `pure` version\n  options.forced         - export even if the native feature is available\n  options.bind           - bind methods to the target, required for the `pure` version\n  options.wrap           - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe         - use the simple assignment of property instead of delete + defineProperty\n  options.sham           - add a flag to not completely full polyfills\n  options.enumerable     - export as enumerable property\n  options.dontCallGetSet - prevent calling a getter on target\n  options.name           - the .name of the function if it does not match the key\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = globalThis;\n  } else if (STATIC) {\n    target = globalThis[TARGET] || defineGlobalProperty(TARGET, {});\n  } else {\n    target = globalThis[TARGET] && globalThis[TARGET].prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.dontCallGetSet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty == typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, 'sham', true);\n    }\n    defineBuiltIn(target, key, sourceProperty, options);\n  }\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/export.js?")},46594:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar createTypedArrayConstructor = __webpack_require__(15823);\n\n// `Int8Array` constructor\n// https://tc39.es/ecma262/#sec-typedarray-objects\ncreateTypedArrayConstructor('Int8', function (init) {\n  return function Int8Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.int8-array.js?")},46706:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar uncurryThis = __webpack_require__(79504);\nvar aCallable = __webpack_require__(79306);\n\nmodule.exports = function (object, key, method) {\n  try {\n    // eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\n    return uncurryThis(aCallable(Object.getOwnPropertyDescriptor(object, key)[method]));\n  } catch (error) { /* empty */ }\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/function-uncurry-this-accessor.js?")},46761:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar ArrayBufferViewCore = __webpack_require__(94644);\n\nvar NATIVE_ARRAY_BUFFER_VIEWS = ArrayBufferViewCore.NATIVE_ARRAY_BUFFER_VIEWS;\n\n// `ArrayBuffer.isView` method\n// https://tc39.es/ecma262/#sec-arraybuffer.isview\n$({ target: 'ArrayBuffer', stat: true, forced: !NATIVE_ARRAY_BUFFER_VIEWS }, {\n  isView: ArrayBufferViewCore.isView\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array-buffer.is-view.js?")},46967:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar toObject = __webpack_require__(48981);\nvar isPrototypeOf = __webpack_require__(1625);\nvar getAsyncIteratorFlattenable = __webpack_require__(50133);\nvar AsyncIteratorPrototype = __webpack_require__(53982);\nvar WrapAsyncIterator = __webpack_require__(44690);\nvar IS_PURE = __webpack_require__(96395);\n\n// `AsyncIterator.from` method\n// https://github.com/tc39/proposal-async-iterator-helpers\n$({ target: 'AsyncIterator', stat: true, forced: IS_PURE }, {\n  from: function from(O) {\n    var iteratorRecord = getAsyncIteratorFlattenable(typeof O == 'string' ? toObject(O) : O);\n    return isPrototypeOf(AsyncIteratorPrototype, iteratorRecord.iterator)\n      ? iteratorRecord.iterator\n      : new WrapAsyncIterator(iteratorRecord);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.async-iterator.from.js?")},47055:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar uncurryThis = __webpack_require__(79504);\nvar fails = __webpack_require__(79039);\nvar classof = __webpack_require__(22195);\n\nvar $Object = Object;\nvar split = uncurryThis(''.split);\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return !$Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) === 'String' ? split(it, '') : $Object(it);\n} : $Object;\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/indexed-object.js?")},47072:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar uncurryThis = __webpack_require__(79504);\nvar aCallable = __webpack_require__(79306);\nvar requireObjectCoercible = __webpack_require__(67750);\nvar iterate = __webpack_require__(72652);\nvar MapHelpers = __webpack_require__(72248);\nvar IS_PURE = __webpack_require__(96395);\nvar fails = __webpack_require__(79039);\n\nvar Map = MapHelpers.Map;\nvar has = MapHelpers.has;\nvar get = MapHelpers.get;\nvar set = MapHelpers.set;\nvar push = uncurryThis([].push);\n\nvar DOES_NOT_WORK_WITH_PRIMITIVES = IS_PURE || fails(function () {\n  return Map.groupBy('ab', function (it) {\n    return it;\n  }).get('a').length !== 1;\n});\n\n// `Map.groupBy` method\n// https://tc39.es/ecma262/#sec-map.groupby\n$({ target: 'Map', stat: true, forced: IS_PURE || DOES_NOT_WORK_WITH_PRIMITIVES }, {\n  groupBy: function groupBy(items, callbackfn) {\n    requireObjectCoercible(items);\n    aCallable(callbackfn);\n    var map = new Map();\n    var k = 0;\n    iterate(items, function (value) {\n      var key = callbackfn(value, k++);\n      if (!has(map, key)) set(map, key, [value]);\n      else push(get(map, key), value);\n    });\n    return map;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.map.group-by.js?")},47390:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(10255);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.data-view.get-float16.js?")},47452:module=>{"use strict";eval("\n// a string of all valid unicode whitespaces\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002' +\n  '\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/whitespaces.js?")},47566:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar defineBuiltIn = __webpack_require__(36840);\nvar uncurryThis = __webpack_require__(79504);\nvar toString = __webpack_require__(655);\nvar validateArgumentsLength = __webpack_require__(22812);\n\nvar $URLSearchParams = URLSearchParams;\nvar URLSearchParamsPrototype = $URLSearchParams.prototype;\nvar getAll = uncurryThis(URLSearchParamsPrototype.getAll);\nvar $has = uncurryThis(URLSearchParamsPrototype.has);\nvar params = new $URLSearchParams('a=1');\n\n// `undefined` case is a Chromium 117 bug\n// https://bugs.chromium.org/p/v8/issues/detail?id=14222\nif (params.has('a', 2) || !params.has('a', undefined)) {\n  defineBuiltIn(URLSearchParamsPrototype, 'has', function has(name /* , value */) {\n    var length = arguments.length;\n    var $value = length < 2 ? undefined : arguments[1];\n    if (length && $value === undefined) return $has(this, name);\n    var values = getAll(this, name); // also validates `this`\n    validateArgumentsLength(length, 1);\n    var value = toString($value);\n    var index = 0;\n    while (index < values.length) {\n      if (values[index++] === value) return true;\n    } return false;\n  }, { enumerable: true, unsafe: true });\n}\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/web.url-search-params.has.js?")},47575:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(93518);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.promise.any.js?")},47628:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(31689);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.promise.try.js?")},47764:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar charAt = (__webpack_require__(68183).charAt);\nvar toString = __webpack_require__(655);\nvar InternalStateModule = __webpack_require__(91181);\nvar defineIterator = __webpack_require__(51088);\nvar createIterResultObject = __webpack_require__(62529);\n\nvar STRING_ITERATOR = 'String Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(STRING_ITERATOR);\n\n// `String.prototype[@@iterator]` method\n// https://tc39.es/ecma262/#sec-string.prototype-@@iterator\ndefineIterator(String, 'String', function (iterated) {\n  setInternalState(this, {\n    type: STRING_ITERATOR,\n    string: toString(iterated),\n    index: 0\n  });\n// `%StringIteratorPrototype%.next` method\n// https://tc39.es/ecma262/#sec-%stringiteratorprototype%.next\n}, function next() {\n  var state = getInternalState(this);\n  var string = state.string;\n  var index = state.index;\n  var point;\n  if (index >= string.length) return createIterResultObject(undefined, true);\n  point = charAt(string, index);\n  state.index += point.length;\n  return createIterResultObject(point, false);\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.string.iterator.js?")},47801:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(77936);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.array-buffer.transfer-to-fixed-length.js?")},48140:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar ArrayBufferViewCore = __webpack_require__(94644);\nvar lengthOfArrayLike = __webpack_require__(26198);\nvar toIntegerOrInfinity = __webpack_require__(91291);\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.at` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.at\nexportTypedArrayMethod('at', function at(index) {\n  var O = aTypedArray(this);\n  var len = lengthOfArrayLike(O);\n  var relativeIndex = toIntegerOrInfinity(index);\n  var k = relativeIndex >= 0 ? relativeIndex : len + relativeIndex;\n  return (k < 0 || k >= len) ? undefined : O[k];\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.at.js?")},48345:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS = __webpack_require__(72805);\nvar exportTypedArrayStaticMethod = (__webpack_require__(94644).exportTypedArrayStaticMethod);\nvar typedArrayFrom = __webpack_require__(43251);\n\n// `%TypedArray%.from` method\n// https://tc39.es/ecma262/#sec-%typedarray%.from\nexportTypedArrayStaticMethod('from', typedArrayFrom, TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.from.js?")},48408:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove this module from `core-js@4` since it's replaced to module below\n__webpack_require__(98406);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/web.url-search-params.js?")},48523:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar collection = __webpack_require__(16468);\nvar collectionStrong = __webpack_require__(86938);\n\n// `Map` constructor\n// https://tc39.es/ecma262/#sec-map-objects\ncollection('Map', function (init) {\n  return function Map() { return init(this, arguments.length ? arguments[0] : undefined); };\n}, collectionStrong);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.map.constructor.js?")},48598:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar uncurryThis = __webpack_require__(79504);\nvar IndexedObject = __webpack_require__(47055);\nvar toIndexedObject = __webpack_require__(25397);\nvar arrayMethodIsStrict = __webpack_require__(34598);\n\nvar nativeJoin = uncurryThis([].join);\n\nvar ES3_STRINGS = IndexedObject !== Object;\nvar FORCED = ES3_STRINGS || !arrayMethodIsStrict('join', ',');\n\n// `Array.prototype.join` method\n// https://tc39.es/ecma262/#sec-array.prototype.join\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  join: function join(separator) {\n    return nativeJoin(toIndexedObject(this), separator === undefined ? ',' : separator);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array.join.js?")},48646:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar call = __webpack_require__(69565);\nvar anObject = __webpack_require__(28551);\nvar getIteratorDirect = __webpack_require__(1767);\nvar getIteratorMethod = __webpack_require__(50851);\n\nmodule.exports = function (obj, stringHandling) {\n  if (!stringHandling || typeof obj !== 'string') anObject(obj);\n  var method = getIteratorMethod(obj);\n  return getIteratorDirect(anObject(method !== undefined ? call(method, obj) : obj));\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/get-iterator-flattenable.js?")},48686:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar DESCRIPTORS = __webpack_require__(43724);\nvar fails = __webpack_require__(79039);\n\n// V8 ~ Chrome 36-\n// https://bugs.chromium.org/p/v8/issues/detail?id=3334\nmodule.exports = DESCRIPTORS && fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(function () { /* empty */ }, 'prototype', {\n    value: 42,\n    writable: false\n  }).prototype !== 42;\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/v8-prototype-define-bug.js?")},48718:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar createHTML = __webpack_require__(77240);\nvar forcedStringHTMLMethod = __webpack_require__(23061);\n\n// `String.prototype.sub` method\n// https://tc39.es/ecma262/#sec-string.prototype.sub\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('sub') }, {\n  sub: function sub() {\n    return createHTML(this, 'sub', '', '');\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.string.sub.js?")},48773:(__unused_webpack_module,exports)=>{"use strict";eval("\nvar $propertyIsEnumerable = {}.propertyIsEnumerable;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !$propertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : $propertyIsEnumerable;\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/object-property-is-enumerable.js?")},48957:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar isCallable = __webpack_require__(94901);\nvar isObject = __webpack_require__(20034);\nvar definePropertyModule = __webpack_require__(24913);\nvar isPrototypeOf = __webpack_require__(1625);\nvar wellKnownSymbol = __webpack_require__(78227);\nvar makeBuiltIn = __webpack_require__(50283);\n\nvar HAS_INSTANCE = wellKnownSymbol('hasInstance');\nvar FunctionPrototype = Function.prototype;\n\n// `Function.prototype[@@hasInstance]` method\n// https://tc39.es/ecma262/#sec-function.prototype-@@hasinstance\nif (!(HAS_INSTANCE in FunctionPrototype)) {\n  definePropertyModule.f(FunctionPrototype, HAS_INSTANCE, { value: makeBuiltIn(function (O) {\n    if (!isCallable(this) || !isObject(O)) return false;\n    var P = this.prototype;\n    return isObject(P) ? isPrototypeOf(P, O) : O instanceof this;\n  }, HAS_INSTANCE) });\n}\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.function.has-instance.js?")},48980:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar $findIndex = (__webpack_require__(59213).findIndex);\nvar addToUnscopables = __webpack_require__(6469);\n\nvar FIND_INDEX = 'findIndex';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\n// eslint-disable-next-line es/no-array-prototype-findindex -- testing\nif (FIND_INDEX in []) Array(1)[FIND_INDEX](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.findIndex` method\n// https://tc39.es/ecma262/#sec-array.prototype.findindex\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $findIndex(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND_INDEX);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array.find-index.js?")},48981:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar requireObjectCoercible = __webpack_require__(67750);\n\nvar $Object = Object;\n\n// `ToObject` abstract operation\n// https://tc39.es/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return $Object(requireObjectCoercible(argument));\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/to-object.js?")},49340:module=>{"use strict";eval("\nvar log = Math.log;\nvar LOG10E = Math.LOG10E;\n\n// eslint-disable-next-line es/no-math-log10 -- safe\nmodule.exports = Math.log10 || function log10(x) {\n  return log(x) * LOG10E;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/math-log10.js?")},49603:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar call = __webpack_require__(69565);\nvar toObject = __webpack_require__(48981);\nvar isPrototypeOf = __webpack_require__(1625);\nvar IteratorPrototype = (__webpack_require__(57657).IteratorPrototype);\nvar createIteratorProxy = __webpack_require__(19462);\nvar getIteratorFlattenable = __webpack_require__(48646);\nvar IS_PURE = __webpack_require__(96395);\n\nvar IteratorProxy = createIteratorProxy(function () {\n  return call(this.next, this.iterator);\n}, true);\n\n// `Iterator.from` method\n// https://tc39.es/ecma262/#sec-iterator.from\n$({ target: 'Iterator', stat: true, forced: IS_PURE }, {\n  from: function from(O) {\n    var iteratorRecord = getIteratorFlattenable(typeof O == 'string' ? toObject(O) : O, true);\n    return isPrototypeOf(IteratorPrototype, iteratorRecord.iterator)\n      ? iteratorRecord.iterator\n      : new IteratorProxy(iteratorRecord);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.iterator.from.js?")},49631:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar globalThis = __webpack_require__(44576);\nvar uncurryThis = __webpack_require__(79504);\nvar anObjectOrUndefined = __webpack_require__(83972);\nvar anUint8Array = __webpack_require__(34154);\nvar notDetached = __webpack_require__(55169);\nvar base64Map = __webpack_require__(92804);\nvar getAlphabetOption = __webpack_require__(944);\n\nvar base64Alphabet = base64Map.i2c;\nvar base64UrlAlphabet = base64Map.i2cUrl;\n\nvar charAt = uncurryThis(''.charAt);\n\n// `Uint8Array.prototype.toBase64` method\n// https://github.com/tc39/proposal-arraybuffer-base64\nif (globalThis.Uint8Array) $({ target: 'Uint8Array', proto: true }, {\n  toBase64: function toBase64(/* options */) {\n    var array = anUint8Array(this);\n    var options = arguments.length ? anObjectOrUndefined(arguments[0]) : undefined;\n    var alphabet = getAlphabetOption(options) === 'base64' ? base64Alphabet : base64UrlAlphabet;\n    var omitPadding = !!options && !!options.omitPadding;\n    notDetached(this.buffer);\n\n    var result = '';\n    var i = 0;\n    var length = array.length;\n    var triplet;\n\n    var at = function (shift) {\n      return charAt(alphabet, (triplet >> (6 * shift)) & 63);\n    };\n\n    for (; i + 2 < length; i += 3) {\n      triplet = (array[i] << 16) + (array[i + 1] << 8) + array[i + 2];\n      result += at(3) + at(2) + at(1) + at(0);\n    }\n    if (i + 2 === length) {\n      triplet = (array[i] << 16) + (array[i + 1] << 8);\n      result += at(3) + at(2) + at(1) + (omitPadding ? '' : '=');\n    } else if (i + 1 === length) {\n      triplet = array[i] << 16;\n      result += at(3) + at(2) + (omitPadding ? '' : '==');\n    }\n\n    return result;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.uint8-array.to-base64.js?")},49773:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar NATIVE_SYMBOL = __webpack_require__(4495);\nvar fails = __webpack_require__(79039);\nvar getOwnPropertySymbolsModule = __webpack_require__(33717);\nvar toObject = __webpack_require__(48981);\n\n// V8 ~ Chrome 38 and 39 `Object.getOwnPropertySymbols` fails on primitives\n// https://bugs.chromium.org/p/v8/issues/detail?id=3443\nvar FORCED = !NATIVE_SYMBOL || fails(function () { getOwnPropertySymbolsModule.f(1); });\n\n// `Object.getOwnPropertySymbols` method\n// https://tc39.es/ecma262/#sec-object.getownpropertysymbols\n$({ target: 'Object', stat: true, forced: FORCED }, {\n  getOwnPropertySymbols: function getOwnPropertySymbols(it) {\n    var $getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n    return $getOwnPropertySymbols ? $getOwnPropertySymbols(toObject(it)) : [];\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.object.get-own-property-symbols.js?")},49797:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar globalThis = __webpack_require__(44576);\nvar aString = __webpack_require__(63463);\nvar anUint8Array = __webpack_require__(34154);\nvar notDetached = __webpack_require__(55169);\nvar $fromHex = __webpack_require__(42303);\n\n// `Uint8Array.prototype.setFromHex` method\n// https://github.com/tc39/proposal-arraybuffer-base64\nif (globalThis.Uint8Array) $({ target: 'Uint8Array', proto: true }, {\n  setFromHex: function setFromHex(string) {\n    anUint8Array(this);\n    aString(string);\n    notDetached(this.buffer);\n    var read = $fromHex(string, this).read;\n    return { read: read, written: read / 2 };\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.uint8-array.set-from-hex.js?")},49806:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(30067);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.aggregate-error.js?")},50113:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar $find = (__webpack_require__(59213).find);\nvar addToUnscopables = __webpack_require__(6469);\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\n// eslint-disable-next-line es/no-array-prototype-find -- testing\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.es/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array.find.js?")},50133:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar call = __webpack_require__(69565);\nvar isCallable = __webpack_require__(94901);\nvar anObject = __webpack_require__(28551);\nvar getIteratorDirect = __webpack_require__(1767);\nvar getIteratorMethod = __webpack_require__(50851);\nvar getMethod = __webpack_require__(55966);\nvar wellKnownSymbol = __webpack_require__(78227);\nvar AsyncFromSyncIterator = __webpack_require__(24074);\n\nvar ASYNC_ITERATOR = wellKnownSymbol('asyncIterator');\n\nmodule.exports = function (obj) {\n  var object = anObject(obj);\n  var alreadyAsync = true;\n  var method = getMethod(object, ASYNC_ITERATOR);\n  var iterator;\n  if (!isCallable(method)) {\n    method = getIteratorMethod(object);\n    alreadyAsync = false;\n  }\n  if (method !== undefined) {\n    iterator = call(method, object);\n  } else {\n    iterator = object;\n    alreadyAsync = true;\n  }\n  anObject(iterator);\n  return getIteratorDirect(alreadyAsync ? iterator : new AsyncFromSyncIterator(getIteratorDirect(iterator)));\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/get-async-iterator-flattenable.js?")},50283:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar uncurryThis = __webpack_require__(79504);\nvar fails = __webpack_require__(79039);\nvar isCallable = __webpack_require__(94901);\nvar hasOwn = __webpack_require__(39297);\nvar DESCRIPTORS = __webpack_require__(43724);\nvar CONFIGURABLE_FUNCTION_NAME = (__webpack_require__(10350).CONFIGURABLE);\nvar inspectSource = __webpack_require__(33706);\nvar InternalStateModule = __webpack_require__(91181);\n\nvar enforceInternalState = InternalStateModule.enforce;\nvar getInternalState = InternalStateModule.get;\nvar $String = String;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\nvar stringSlice = uncurryThis(''.slice);\nvar replace = uncurryThis(''.replace);\nvar join = uncurryThis([].join);\n\nvar CONFIGURABLE_LENGTH = DESCRIPTORS && !fails(function () {\n  return defineProperty(function () { /* empty */ }, 'length', { value: 8 }).length !== 8;\n});\n\nvar TEMPLATE = String(String).split('String');\n\nvar makeBuiltIn = module.exports = function (value, name, options) {\n  if (stringSlice($String(name), 0, 7) === 'Symbol(') {\n    name = '[' + replace($String(name), /^Symbol\\(([^)]*)\\).*$/, '$1') + ']';\n  }\n  if (options && options.getter) name = 'get ' + name;\n  if (options && options.setter) name = 'set ' + name;\n  if (!hasOwn(value, 'name') || (CONFIGURABLE_FUNCTION_NAME && value.name !== name)) {\n    if (DESCRIPTORS) defineProperty(value, 'name', { value: name, configurable: true });\n    else value.name = name;\n  }\n  if (CONFIGURABLE_LENGTH && options && hasOwn(options, 'arity') && value.length !== options.arity) {\n    defineProperty(value, 'length', { value: options.arity });\n  }\n  try {\n    if (options && hasOwn(options, 'constructor') && options.constructor) {\n      if (DESCRIPTORS) defineProperty(value, 'prototype', { writable: false });\n    // in V8 ~ Chrome 53, prototypes of some methods, like `Array.prototype.values`, are non-writable\n    } else if (value.prototype) value.prototype = undefined;\n  } catch (error) { /* empty */ }\n  var state = enforceInternalState(value);\n  if (!hasOwn(state, 'source')) {\n    state.source = join(TEMPLATE, typeof name == 'string' ? name : '');\n  } return value;\n};\n\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n// eslint-disable-next-line no-extend-native -- required\nFunction.prototype.toString = makeBuiltIn(function toString() {\n  return isCallable(this) && getInternalState(this).source || inspectSource(this);\n}, 'toString');\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/make-built-in.js?")},50360:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar globalThis = __webpack_require__(44576);\n\nvar globalIsFinite = globalThis.isFinite;\n\n// `Number.isFinite` method\n// https://tc39.es/ecma262/#sec-number.isfinite\n// eslint-disable-next-line es/no-number-isfinite -- safe\nmodule.exports = Number.isFinite || function isFinite(it) {\n  return typeof it == 'number' && globalIsFinite(it);\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/number-is-finite.js?")},50375:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar uncurryThis = __webpack_require__(79504);\nvar requireObjectCoercible = __webpack_require__(67750);\nvar toIntegerOrInfinity = __webpack_require__(91291);\nvar toString = __webpack_require__(655);\n\nvar stringSlice = uncurryThis(''.slice);\nvar max = Math.max;\nvar min = Math.min;\n\n// eslint-disable-next-line unicorn/prefer-string-slice -- required for testing\nvar FORCED = !''.substr || 'ab'.substr(-1) !== 'b';\n\n// `String.prototype.substr` method\n// https://tc39.es/ecma262/#sec-string.prototype.substr\n$({ target: 'String', proto: true, forced: FORCED }, {\n  substr: function substr(start, length) {\n    var that = toString(requireObjectCoercible(this));\n    var size = that.length;\n    var intStart = toIntegerOrInfinity(start);\n    var intLength, intEnd;\n    if (intStart === Infinity) intStart = 0;\n    if (intStart < 0) intStart = max(size + intStart, 0);\n    intLength = length === undefined ? size : toIntegerOrInfinity(length);\n    if (intLength <= 0 || intLength === Infinity) return '';\n    intEnd = min(intStart + intLength, size);\n    return intStart >= intEnd ? '' : stringSlice(that, intStart, intEnd);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.string.substr.js?")},50778:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar createHTML = __webpack_require__(77240);\nvar forcedStringHTMLMethod = __webpack_require__(23061);\n\n// `String.prototype.link` method\n// https://tc39.es/ecma262/#sec-string.prototype.link\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('link') }, {\n  link: function link(url) {\n    return createHTML(this, 'a', 'href', url);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.string.link.js?")},50851:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar classof = __webpack_require__(36955);\nvar getMethod = __webpack_require__(55966);\nvar isNullOrUndefined = __webpack_require__(64117);\nvar Iterators = __webpack_require__(26269);\nvar wellKnownSymbol = __webpack_require__(78227);\n\nvar ITERATOR = wellKnownSymbol('iterator');\n\nmodule.exports = function (it) {\n  if (!isNullOrUndefined(it)) return getMethod(it, ITERATOR)\n    || getMethod(it, '@@iterator')\n    || Iterators[classof(it)];\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/get-iterator-method.js?")},51088:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar call = __webpack_require__(69565);\nvar IS_PURE = __webpack_require__(96395);\nvar FunctionName = __webpack_require__(10350);\nvar isCallable = __webpack_require__(94901);\nvar createIteratorConstructor = __webpack_require__(33994);\nvar getPrototypeOf = __webpack_require__(42787);\nvar setPrototypeOf = __webpack_require__(52967);\nvar setToStringTag = __webpack_require__(10687);\nvar createNonEnumerableProperty = __webpack_require__(66699);\nvar defineBuiltIn = __webpack_require__(36840);\nvar wellKnownSymbol = __webpack_require__(78227);\nvar Iterators = __webpack_require__(26269);\nvar IteratorsCore = __webpack_require__(57657);\n\nvar PROPER_FUNCTION_NAME = FunctionName.PROPER;\nvar CONFIGURABLE_FUNCTION_NAME = FunctionName.CONFIGURABLE;\nvar IteratorPrototype = IteratorsCore.IteratorPrototype;\nvar BUGGY_SAFARI_ITERATORS = IteratorsCore.BUGGY_SAFARI_ITERATORS;\nvar ITERATOR = wellKnownSymbol('iterator');\nvar KEYS = 'keys';\nvar VALUES = 'values';\nvar ENTRIES = 'entries';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Iterable, NAME, IteratorConstructor, next, DEFAULT, IS_SET, FORCED) {\n  createIteratorConstructor(IteratorConstructor, NAME, next);\n\n  var getIterationMethod = function (KIND) {\n    if (KIND === DEFAULT && defaultIterator) return defaultIterator;\n    if (!BUGGY_SAFARI_ITERATORS && KIND && KIND in IterablePrototype) return IterablePrototype[KIND];\n\n    switch (KIND) {\n      case KEYS: return function keys() { return new IteratorConstructor(this, KIND); };\n      case VALUES: return function values() { return new IteratorConstructor(this, KIND); };\n      case ENTRIES: return function entries() { return new IteratorConstructor(this, KIND); };\n    }\n\n    return function () { return new IteratorConstructor(this); };\n  };\n\n  var TO_STRING_TAG = NAME + ' Iterator';\n  var INCORRECT_VALUES_NAME = false;\n  var IterablePrototype = Iterable.prototype;\n  var nativeIterator = IterablePrototype[ITERATOR]\n    || IterablePrototype['@@iterator']\n    || DEFAULT && IterablePrototype[DEFAULT];\n  var defaultIterator = !BUGGY_SAFARI_ITERATORS && nativeIterator || getIterationMethod(DEFAULT);\n  var anyNativeIterator = NAME === 'Array' ? IterablePrototype.entries || nativeIterator : nativeIterator;\n  var CurrentIteratorPrototype, methods, KEY;\n\n  // fix native\n  if (anyNativeIterator) {\n    CurrentIteratorPrototype = getPrototypeOf(anyNativeIterator.call(new Iterable()));\n    if (CurrentIteratorPrototype !== Object.prototype && CurrentIteratorPrototype.next) {\n      if (!IS_PURE && getPrototypeOf(CurrentIteratorPrototype) !== IteratorPrototype) {\n        if (setPrototypeOf) {\n          setPrototypeOf(CurrentIteratorPrototype, IteratorPrototype);\n        } else if (!isCallable(CurrentIteratorPrototype[ITERATOR])) {\n          defineBuiltIn(CurrentIteratorPrototype, ITERATOR, returnThis);\n        }\n      }\n      // Set @@toStringTag to native iterators\n      setToStringTag(CurrentIteratorPrototype, TO_STRING_TAG, true, true);\n      if (IS_PURE) Iterators[TO_STRING_TAG] = returnThis;\n    }\n  }\n\n  // fix Array.prototype.{ values, @@iterator }.name in V8 / FF\n  if (PROPER_FUNCTION_NAME && DEFAULT === VALUES && nativeIterator && nativeIterator.name !== VALUES) {\n    if (!IS_PURE && CONFIGURABLE_FUNCTION_NAME) {\n      createNonEnumerableProperty(IterablePrototype, 'name', VALUES);\n    } else {\n      INCORRECT_VALUES_NAME = true;\n      defaultIterator = function values() { return call(nativeIterator, this); };\n    }\n  }\n\n  // export additional methods\n  if (DEFAULT) {\n    methods = {\n      values: getIterationMethod(VALUES),\n      keys: IS_SET ? defaultIterator : getIterationMethod(KEYS),\n      entries: getIterationMethod(ENTRIES)\n    };\n    if (FORCED) for (KEY in methods) {\n      if (BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME || !(KEY in IterablePrototype)) {\n        defineBuiltIn(IterablePrototype, KEY, methods[KEY]);\n      }\n    } else $({ target: NAME, proto: true, forced: BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME }, methods);\n  }\n\n  // define iterator\n  if ((!IS_PURE || FORCED) && IterablePrototype[ITERATOR] !== defaultIterator) {\n    defineBuiltIn(IterablePrototype, ITERATOR, defaultIterator, { name: DEFAULT });\n  }\n  Iterators[NAME] = defaultIterator;\n\n  return methods;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/iterator-define.js?")},51481:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar newPromiseCapabilityModule = __webpack_require__(36043);\nvar FORCED_PROMISE_CONSTRUCTOR = (__webpack_require__(10916).CONSTRUCTOR);\n\n// `Promise.reject` method\n// https://tc39.es/ecma262/#sec-promise.reject\n$({ target: 'Promise', stat: true, forced: FORCED_PROMISE_CONSTRUCTOR }, {\n  reject: function reject(r) {\n    var capability = newPromiseCapabilityModule.f(this);\n    var capabilityReject = capability.reject;\n    capabilityReject(r);\n    return capability.promise;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.promise.reject.js?")},51629:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar forEach = __webpack_require__(90235);\n\n// `Array.prototype.forEach` method\n// https://tc39.es/ecma262/#sec-array.prototype.foreach\n// eslint-disable-next-line es/no-array-prototype-foreach -- safe\n$({ target: 'Array', proto: true, forced: [].forEach !== forEach }, {\n  forEach: forEach\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array.for-each.js?")},51755:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(67438);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.string.to-well-formed.js?")},51839:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(48140);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.typed-array.at.js?")},52568:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar ArrayBufferViewCore = __webpack_require__(94644);\nvar TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS = __webpack_require__(72805);\n\nvar aTypedArrayConstructor = ArrayBufferViewCore.aTypedArrayConstructor;\nvar exportTypedArrayStaticMethod = ArrayBufferViewCore.exportTypedArrayStaticMethod;\n\n// `%TypedArray%.of` method\n// https://tc39.es/ecma262/#sec-%typedarray%.of\nexportTypedArrayStaticMethod('of', function of(/* ...items */) {\n  var index = 0;\n  var length = arguments.length;\n  var result = new (aTypedArrayConstructor(this))(length);\n  while (length > index) result[index] = arguments[index++];\n  return result;\n}, TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.of.js?")},52675:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove this module from `core-js@4` since it's split to modules listed below\n__webpack_require__(6761);\n__webpack_require__(81510);\n__webpack_require__(97812);\n__webpack_require__(33110);\n__webpack_require__(49773);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.symbol.js?")},52703:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar globalThis = __webpack_require__(44576);\nvar fails = __webpack_require__(79039);\nvar uncurryThis = __webpack_require__(79504);\nvar toString = __webpack_require__(655);\nvar trim = (__webpack_require__(43802).trim);\nvar whitespaces = __webpack_require__(47452);\n\nvar $parseInt = globalThis.parseInt;\nvar Symbol = globalThis.Symbol;\nvar ITERATOR = Symbol && Symbol.iterator;\nvar hex = /^[+-]?0x/i;\nvar exec = uncurryThis(hex.exec);\nvar FORCED = $parseInt(whitespaces + '08') !== 8 || $parseInt(whitespaces + '0x16') !== 22\n  // MS Edge 18- broken with boxed symbols\n  || (ITERATOR && !fails(function () { $parseInt(Object(ITERATOR)); }));\n\n// `parseInt` method\n// https://tc39.es/ecma262/#sec-parseint-string-radix\nmodule.exports = FORCED ? function parseInt(string, radix) {\n  var S = trim(toString(string));\n  return $parseInt(S, (radix >>> 0) || (exec(hex, S) ? 16 : 10));\n} : $parseInt;\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/number-parse-int.js?")},52811:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar FREEZING = __webpack_require__(92744);\nvar fails = __webpack_require__(79039);\nvar isObject = __webpack_require__(20034);\nvar onFreeze = (__webpack_require__(3451).onFreeze);\n\n// eslint-disable-next-line es/no-object-freeze -- safe\nvar $freeze = Object.freeze;\nvar FAILS_ON_PRIMITIVES = fails(function () { $freeze(1); });\n\n// `Object.freeze` method\n// https://tc39.es/ecma262/#sec-object.freeze\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES, sham: !FREEZING }, {\n  freeze: function freeze(it) {\n    return $freeze && isObject(it) ? $freeze(onFreeze(it)) : it;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.object.freeze.js?")},52967:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n/* eslint-disable no-proto -- safe */\nvar uncurryThisAccessor = __webpack_require__(46706);\nvar isObject = __webpack_require__(20034);\nvar requireObjectCoercible = __webpack_require__(67750);\nvar aPossiblePrototype = __webpack_require__(73506);\n\n// `Object.setPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.setprototypeof\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n// eslint-disable-next-line es/no-object-setprototypeof -- safe\nmodule.exports = Object.setPrototypeOf || ('__proto__' in {} ? function () {\n  var CORRECT_SETTER = false;\n  var test = {};\n  var setter;\n  try {\n    setter = uncurryThisAccessor(Object.prototype, '__proto__', 'set');\n    setter(test, []);\n    CORRECT_SETTER = test instanceof Array;\n  } catch (error) { /* empty */ }\n  return function setPrototypeOf(O, proto) {\n    requireObjectCoercible(O);\n    aPossiblePrototype(proto);\n    if (!isObject(O)) return O;\n    if (CORRECT_SETTER) setter(O, proto);\n    else O.__proto__ = proto;\n    return O;\n  };\n}() : undefined);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/object-set-prototype-of.js?")},53179:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar TO_STRING_TAG_SUPPORT = __webpack_require__(92140);\nvar classof = __webpack_require__(36955);\n\n// `Object.prototype.toString` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.tostring\nmodule.exports = TO_STRING_TAG_SUPPORT ? {}.toString : function toString() {\n  return '[object ' + classof(this) + ']';\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/object-to-string.js?")},53250:module=>{"use strict";eval("\n// eslint-disable-next-line es/no-math-expm1 -- safe\nvar $expm1 = Math.expm1;\nvar exp = Math.exp;\n\n// `Math.expm1` method implementation\n// https://tc39.es/ecma262/#sec-math.expm1\nmodule.exports = (!$expm1\n  // Old FF bug\n  // eslint-disable-next-line no-loss-of-precision -- required for old engines\n  || $expm1(10) > 22025.465794806719 || $expm1(10) < 22025.4657948067165168\n  // Tor Browser bug\n  || $expm1(-2e-17) !== -2e-17\n) ? function expm1(x) {\n  var n = +x;\n  return n === 0 ? n : n > -1e-6 && n < 1e-6 ? n + n * n / 2 : exp(n) - 1;\n} : $expm1;\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/math-expm1.js?")},53487:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $trimStart = (__webpack_require__(43802).start);\nvar forcedStringTrimMethod = __webpack_require__(60706);\n\n// `String.prototype.{ trimStart, trimLeft }` method\n// https://tc39.es/ecma262/#sec-string.prototype.trimstart\n// https://tc39.es/ecma262/#String.prototype.trimleft\nmodule.exports = forcedStringTrimMethod('trimStart') ? function trimStart() {\n  return $trimStart(this);\n// eslint-disable-next-line es/no-string-prototype-trimstart-trimend -- safe\n} : ''.trimStart;\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/string-trim-start.js?")},53602:module=>{"use strict";eval("\nvar EPSILON = 2.220446049250313e-16; // Number.EPSILON\nvar INVERSE_EPSILON = 1 / EPSILON;\n\nmodule.exports = function (n) {\n  return n + INVERSE_EPSILON - INVERSE_EPSILON;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/math-round-ties-to-even.js?")},53640:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar anObject = __webpack_require__(28551);\nvar ordinaryToPrimitive = __webpack_require__(84270);\n\nvar $TypeError = TypeError;\n\n// `Date.prototype[@@toPrimitive](hint)` method implementation\n// https://tc39.es/ecma262/#sec-date.prototype-@@toprimitive\nmodule.exports = function (hint) {\n  anObject(this);\n  if (hint === 'string' || hint === 'default') hint = 'string';\n  else if (hint !== 'number') throw new $TypeError('Incorrect hint');\n  return ordinaryToPrimitive(this, hint);\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/date-to-primitive.js?")},53838:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar aSet = __webpack_require__(97080);\nvar size = __webpack_require__(25170);\nvar iterate = __webpack_require__(38469);\nvar getSetRecord = __webpack_require__(83789);\n\n// `Set.prototype.isSubsetOf` method\n// https://tc39.github.io/proposal-set-methods/#Set.prototype.isSubsetOf\nmodule.exports = function isSubsetOf(other) {\n  var O = aSet(this);\n  var otherRec = getSetRecord(other);\n  if (size(O) > otherRec.size) return false;\n  return iterate(O, function (e) {\n    if (!otherRec.includes(e)) return false;\n  }, true) !== false;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/set-is-subset-of.js?")},53921:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar iterate = __webpack_require__(72652);\nvar createProperty = __webpack_require__(97040);\n\n// `Object.fromEntries` method\n// https://tc39.es/ecma262/#sec-object.fromentries\n$({ target: 'Object', stat: true }, {\n  fromEntries: function fromEntries(iterable) {\n    var obj = {};\n    iterate(iterable, function (k, v) {\n      createProperty(obj, k, v);\n    }, { AS_ENTRIES: true });\n    return obj;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.object.from-entries.js?")},53982:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar globalThis = __webpack_require__(44576);\nvar shared = __webpack_require__(77629);\nvar isCallable = __webpack_require__(94901);\nvar create = __webpack_require__(2360);\nvar getPrototypeOf = __webpack_require__(42787);\nvar defineBuiltIn = __webpack_require__(36840);\nvar wellKnownSymbol = __webpack_require__(78227);\nvar IS_PURE = __webpack_require__(96395);\n\nvar USE_FUNCTION_CONSTRUCTOR = 'USE_FUNCTION_CONSTRUCTOR';\nvar ASYNC_ITERATOR = wellKnownSymbol('asyncIterator');\nvar AsyncIterator = globalThis.AsyncIterator;\nvar PassedAsyncIteratorPrototype = shared.AsyncIteratorPrototype;\nvar AsyncIteratorPrototype, prototype;\n\nif (PassedAsyncIteratorPrototype) {\n  AsyncIteratorPrototype = PassedAsyncIteratorPrototype;\n} else if (isCallable(AsyncIterator)) {\n  AsyncIteratorPrototype = AsyncIterator.prototype;\n} else if (shared[USE_FUNCTION_CONSTRUCTOR] || globalThis[USE_FUNCTION_CONSTRUCTOR]) {\n  try {\n    // eslint-disable-next-line no-new-func -- we have no alternatives without usage of modern syntax\n    prototype = getPrototypeOf(getPrototypeOf(getPrototypeOf(Function('return async function*(){}()')())));\n    if (getPrototypeOf(prototype) === Object.prototype) AsyncIteratorPrototype = prototype;\n  } catch (error) { /* empty */ }\n}\n\nif (!AsyncIteratorPrototype) AsyncIteratorPrototype = {};\nelse if (IS_PURE) AsyncIteratorPrototype = create(AsyncIteratorPrototype);\n\nif (!isCallable(AsyncIteratorPrototype[ASYNC_ITERATOR])) {\n  defineBuiltIn(AsyncIteratorPrototype, ASYNC_ITERATOR, function () {\n    return this;\n  });\n}\n\nmodule.exports = AsyncIteratorPrototype;\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/async-iterator-prototype.js?")},54075:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// https://github.com/tc39/proposal-change-array-by-copy\n__webpack_require__(54151);\n__webpack_require__(72400);\n__webpack_require__(73677);\n__webpack_require__(85901);\n__webpack_require__(43250);\n__webpack_require__(10149);\n// TODO: Remove from `core-js@4`\n__webpack_require__(67302);\n__webpack_require__(24082);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/proposals/change-array-by-copy.js?")},54151:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(9678);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.array.to-reversed.js?")},54520:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(22489);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.iterator.filter.js?")},54554:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar toObject = __webpack_require__(48981);\nvar toAbsoluteIndex = __webpack_require__(35610);\nvar toIntegerOrInfinity = __webpack_require__(91291);\nvar lengthOfArrayLike = __webpack_require__(26198);\nvar setArrayLength = __webpack_require__(34527);\nvar doesNotExceedSafeInteger = __webpack_require__(96837);\nvar arraySpeciesCreate = __webpack_require__(1469);\nvar createProperty = __webpack_require__(97040);\nvar deletePropertyOrThrow = __webpack_require__(84606);\nvar arrayMethodHasSpeciesSupport = __webpack_require__(70597);\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// `Array.prototype.splice` method\n// https://tc39.es/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toIntegerOrInfinity(deleteCount), 0), len - actualStart);\n    }\n    doesNotExceedSafeInteger(len + insertCount - actualDeleteCount);\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else deletePropertyOrThrow(O, to);\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) deletePropertyOrThrow(O, k - 1);\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else deletePropertyOrThrow(O, to);\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    setArrayLength(O, len - actualDeleteCount + insertCount);\n    return A;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array.splice.js?")},54743:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar globalThis = __webpack_require__(44576);\nvar arrayBufferModule = __webpack_require__(66346);\nvar setSpecies = __webpack_require__(87633);\n\nvar ARRAY_BUFFER = 'ArrayBuffer';\nvar ArrayBuffer = arrayBufferModule[ARRAY_BUFFER];\nvar NativeArrayBuffer = globalThis[ARRAY_BUFFER];\n\n// `ArrayBuffer` constructor\n// https://tc39.es/ecma262/#sec-arraybuffer-constructor\n$({ global: true, constructor: true, forced: NativeArrayBuffer !== ArrayBuffer }, {\n  ArrayBuffer: ArrayBuffer\n});\n\nsetSpecies(ARRAY_BUFFER);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array-buffer.constructor.js?")},54972:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar call = __webpack_require__(69565);\nvar anObject = __webpack_require__(28551);\nvar getIteratorDirect = __webpack_require__(1767);\nvar notANaN = __webpack_require__(24149);\nvar toPositiveInteger = __webpack_require__(99590);\nvar createIteratorProxy = __webpack_require__(19462);\nvar iteratorClose = __webpack_require__(9539);\nvar IS_PURE = __webpack_require__(96395);\n\nvar IteratorProxy = createIteratorProxy(function () {\n  var iterator = this.iterator;\n  if (!this.remaining--) {\n    this.done = true;\n    return iteratorClose(iterator, 'normal', undefined);\n  }\n  var result = anObject(call(this.next, iterator));\n  var done = this.done = !!result.done;\n  if (!done) return result.value;\n});\n\n// `Iterator.prototype.take` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.take\n$({ target: 'Iterator', proto: true, real: true, forced: IS_PURE }, {\n  take: function take(limit) {\n    anObject(this);\n    var remaining = toPositiveInteger(notANaN(+limit));\n    return new IteratorProxy(getIteratorDirect(this), {\n      remaining: remaining\n    });\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.iterator.take.js?")},55002:module=>{"use strict";eval("\nmodule.exports = {\n  IndexSizeError: { s: 'INDEX_SIZE_ERR', c: 1, m: 1 },\n  DOMStringSizeError: { s: 'DOMSTRING_SIZE_ERR', c: 2, m: 0 },\n  HierarchyRequestError: { s: 'HIERARCHY_REQUEST_ERR', c: 3, m: 1 },\n  WrongDocumentError: { s: 'WRONG_DOCUMENT_ERR', c: 4, m: 1 },\n  InvalidCharacterError: { s: 'INVALID_CHARACTER_ERR', c: 5, m: 1 },\n  NoDataAllowedError: { s: 'NO_DATA_ALLOWED_ERR', c: 6, m: 0 },\n  NoModificationAllowedError: { s: 'NO_MODIFICATION_ALLOWED_ERR', c: 7, m: 1 },\n  NotFoundError: { s: 'NOT_FOUND_ERR', c: 8, m: 1 },\n  NotSupportedError: { s: 'NOT_SUPPORTED_ERR', c: 9, m: 1 },\n  InUseAttributeError: { s: 'INUSE_ATTRIBUTE_ERR', c: 10, m: 1 },\n  InvalidStateError: { s: 'INVALID_STATE_ERR', c: 11, m: 1 },\n  SyntaxError: { s: 'SYNTAX_ERR', c: 12, m: 1 },\n  InvalidModificationError: { s: 'INVALID_MODIFICATION_ERR', c: 13, m: 1 },\n  NamespaceError: { s: 'NAMESPACE_ERR', c: 14, m: 1 },\n  InvalidAccessError: { s: 'INVALID_ACCESS_ERR', c: 15, m: 1 },\n  ValidationError: { s: 'VALIDATION_ERR', c: 16, m: 0 },\n  TypeMismatchError: { s: 'TYPE_MISMATCH_ERR', c: 17, m: 1 },\n  SecurityError: { s: 'SECURITY_ERR', c: 18, m: 1 },\n  NetworkError: { s: 'NETWORK_ERR', c: 19, m: 1 },\n  AbortError: { s: 'ABORT_ERR', c: 20, m: 1 },\n  URLMismatchError: { s: 'URL_MISMATCH_ERR', c: 21, m: 1 },\n  QuotaExceededError: { s: 'QUOTA_EXCEEDED_ERR', c: 22, m: 1 },\n  TimeoutError: { s: 'TIMEOUT_ERR', c: 23, m: 1 },\n  InvalidNodeTypeError: { s: 'INVALID_NODE_TYPE_ERR', c: 24, m: 1 },\n  DataCloneError: { s: 'DATA_CLONE_ERR', c: 25, m: 1 }\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/dom-exception-constants.js?")},55035:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// https://github.com/tc39/proposal-decorator-metadata\n__webpack_require__(16401);\n__webpack_require__(30465);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/proposals/decorator-metadata-v2.js?")},55081:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar globalThis = __webpack_require__(44576);\n\n// `globalThis` object\n// https://tc39.es/ecma262/#sec-globalthis\n$({ global: true, forced: globalThis.globalThis !== globalThis }, {\n  globalThis: globalThis\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.global-this.js?")},55169:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar isDetached = __webpack_require__(3238);\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (it) {\n  if (isDetached(it)) throw new $TypeError('ArrayBuffer is detached');\n  return it;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/array-buffer-not-detached.js?")},55815:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar getBuiltIn = __webpack_require__(97751);\nvar getBuiltInNodeModule = __webpack_require__(89429);\nvar fails = __webpack_require__(79039);\nvar create = __webpack_require__(2360);\nvar createPropertyDescriptor = __webpack_require__(6980);\nvar defineProperty = (__webpack_require__(24913).f);\nvar defineBuiltIn = __webpack_require__(36840);\nvar defineBuiltInAccessor = __webpack_require__(62106);\nvar hasOwn = __webpack_require__(39297);\nvar anInstance = __webpack_require__(90679);\nvar anObject = __webpack_require__(28551);\nvar errorToString = __webpack_require__(77536);\nvar normalizeStringArgument = __webpack_require__(32603);\nvar DOMExceptionConstants = __webpack_require__(55002);\nvar clearErrorStack = __webpack_require__(38574);\nvar InternalStateModule = __webpack_require__(91181);\nvar DESCRIPTORS = __webpack_require__(43724);\nvar IS_PURE = __webpack_require__(96395);\n\nvar DOM_EXCEPTION = 'DOMException';\nvar DATA_CLONE_ERR = 'DATA_CLONE_ERR';\nvar Error = getBuiltIn('Error');\n// NodeJS < 17.0 does not expose `DOMException` to global\nvar NativeDOMException = getBuiltIn(DOM_EXCEPTION) || (function () {\n  try {\n    // NodeJS < 15.0 does not expose `MessageChannel` to global\n    var MessageChannel = getBuiltIn('MessageChannel') || getBuiltInNodeModule('worker_threads').MessageChannel;\n    // eslint-disable-next-line es/no-weak-map, unicorn/require-post-message-target-origin -- safe\n    new MessageChannel().port1.postMessage(new WeakMap());\n  } catch (error) {\n    if (error.name === DATA_CLONE_ERR && error.code === 25) return error.constructor;\n  }\n})();\nvar NativeDOMExceptionPrototype = NativeDOMException && NativeDOMException.prototype;\nvar ErrorPrototype = Error.prototype;\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(DOM_EXCEPTION);\nvar HAS_STACK = 'stack' in new Error(DOM_EXCEPTION);\n\nvar codeFor = function (name) {\n  return hasOwn(DOMExceptionConstants, name) && DOMExceptionConstants[name].m ? DOMExceptionConstants[name].c : 0;\n};\n\nvar $DOMException = function DOMException() {\n  anInstance(this, DOMExceptionPrototype);\n  var argumentsLength = arguments.length;\n  var message = normalizeStringArgument(argumentsLength < 1 ? undefined : arguments[0]);\n  var name = normalizeStringArgument(argumentsLength < 2 ? undefined : arguments[1], 'Error');\n  var code = codeFor(name);\n  setInternalState(this, {\n    type: DOM_EXCEPTION,\n    name: name,\n    message: message,\n    code: code\n  });\n  if (!DESCRIPTORS) {\n    this.name = name;\n    this.message = message;\n    this.code = code;\n  }\n  if (HAS_STACK) {\n    var error = new Error(message);\n    error.name = DOM_EXCEPTION;\n    defineProperty(this, 'stack', createPropertyDescriptor(1, clearErrorStack(error.stack, 1)));\n  }\n};\n\nvar DOMExceptionPrototype = $DOMException.prototype = create(ErrorPrototype);\n\nvar createGetterDescriptor = function (get) {\n  return { enumerable: true, configurable: true, get: get };\n};\n\nvar getterFor = function (key) {\n  return createGetterDescriptor(function () {\n    return getInternalState(this)[key];\n  });\n};\n\nif (DESCRIPTORS) {\n  // `DOMException.prototype.code` getter\n  defineBuiltInAccessor(DOMExceptionPrototype, 'code', getterFor('code'));\n  // `DOMException.prototype.message` getter\n  defineBuiltInAccessor(DOMExceptionPrototype, 'message', getterFor('message'));\n  // `DOMException.prototype.name` getter\n  defineBuiltInAccessor(DOMExceptionPrototype, 'name', getterFor('name'));\n}\n\ndefineProperty(DOMExceptionPrototype, 'constructor', createPropertyDescriptor(1, $DOMException));\n\n// FF36- DOMException is a function, but can't be constructed\nvar INCORRECT_CONSTRUCTOR = fails(function () {\n  return !(new NativeDOMException() instanceof Error);\n});\n\n// Safari 10.1 / Chrome 32- / IE8- DOMException.prototype.toString bugs\nvar INCORRECT_TO_STRING = INCORRECT_CONSTRUCTOR || fails(function () {\n  return ErrorPrototype.toString !== errorToString || String(new NativeDOMException(1, 2)) !== '2: 1';\n});\n\n// Deno 1.6.3- DOMException.prototype.code just missed\nvar INCORRECT_CODE = INCORRECT_CONSTRUCTOR || fails(function () {\n  return new NativeDOMException(1, 'DataCloneError').code !== 25;\n});\n\n// Deno 1.6.3- DOMException constants just missed\nvar MISSED_CONSTANTS = INCORRECT_CONSTRUCTOR\n  || NativeDOMException[DATA_CLONE_ERR] !== 25\n  || NativeDOMExceptionPrototype[DATA_CLONE_ERR] !== 25;\n\nvar FORCED_CONSTRUCTOR = IS_PURE ? INCORRECT_TO_STRING || INCORRECT_CODE || MISSED_CONSTANTS : INCORRECT_CONSTRUCTOR;\n\n// `DOMException` constructor\n// https://webidl.spec.whatwg.org/#idl-DOMException\n$({ global: true, constructor: true, forced: FORCED_CONSTRUCTOR }, {\n  DOMException: FORCED_CONSTRUCTOR ? $DOMException : NativeDOMException\n});\n\nvar PolyfilledDOMException = getBuiltIn(DOM_EXCEPTION);\nvar PolyfilledDOMExceptionPrototype = PolyfilledDOMException.prototype;\n\nif (INCORRECT_TO_STRING && (IS_PURE || NativeDOMException === PolyfilledDOMException)) {\n  defineBuiltIn(PolyfilledDOMExceptionPrototype, 'toString', errorToString);\n}\n\nif (INCORRECT_CODE && DESCRIPTORS && NativeDOMException === PolyfilledDOMException) {\n  defineBuiltInAccessor(PolyfilledDOMExceptionPrototype, 'code', createGetterDescriptor(function () {\n    return codeFor(anObject(this).name);\n  }));\n}\n\n// `DOMException` constants\nfor (var key in DOMExceptionConstants) if (hasOwn(DOMExceptionConstants, key)) {\n  var constant = DOMExceptionConstants[key];\n  var constantName = constant.s;\n  var descriptor = createPropertyDescriptor(6, constant.c);\n  if (!hasOwn(PolyfilledDOMException, constantName)) {\n    defineProperty(PolyfilledDOMException, constantName, descriptor);\n  }\n  if (!hasOwn(PolyfilledDOMExceptionPrototype, constantName)) {\n    defineProperty(PolyfilledDOMExceptionPrototype, constantName, descriptor);\n  }\n}\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/web.dom-exception.constructor.js?")},55966:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar aCallable = __webpack_require__(79306);\nvar isNullOrUndefined = __webpack_require__(64117);\n\n// `GetMethod` abstract operation\n// https://tc39.es/ecma262/#sec-getmethod\nmodule.exports = function (V, P) {\n  var func = V[P];\n  return isNullOrUndefined(func) ? undefined : aCallable(func);\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/get-method.js?")},56279:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar defineBuiltIn = __webpack_require__(36840);\n\nmodule.exports = function (target, src, options) {\n  for (var key in src) defineBuiltIn(target, key, src[key], options);\n  return target;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/define-built-ins.js?")},56624:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar log1p = __webpack_require__(7740);\n\n// `Math.log1p` method\n// https://tc39.es/ecma262/#sec-math.log1p\n$({ target: 'Math', stat: true }, { log1p: log1p });\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.math.log1p.js?")},56682:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar call = __webpack_require__(69565);\nvar anObject = __webpack_require__(28551);\nvar isCallable = __webpack_require__(94901);\nvar classof = __webpack_require__(22195);\nvar regexpExec = __webpack_require__(57323);\n\nvar $TypeError = TypeError;\n\n// `RegExpExec` abstract operation\n// https://tc39.es/ecma262/#sec-regexpexec\nmodule.exports = function (R, S) {\n  var exec = R.exec;\n  if (isCallable(exec)) {\n    var result = call(exec, R, S);\n    if (result !== null) anObject(result);\n    return result;\n  }\n  if (classof(R) === 'RegExp') return call(regexpExec, R, S);\n  throw new $TypeError('RegExp#exec called on incompatible receiver');\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/regexp-exec-abstract.js?")},56969:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar toPrimitive = __webpack_require__(72777);\nvar isSymbol = __webpack_require__(10757);\n\n// `ToPropertyKey` abstract operation\n// https://tc39.es/ecma262/#sec-topropertykey\nmodule.exports = function (argument) {\n  var key = toPrimitive(argument, 'string');\n  return isSymbol(key) ? key : key + '';\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/to-property-key.js?")},57019:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(47072);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.map.group-by.js?")},57029:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar toObject = __webpack_require__(48981);\nvar toAbsoluteIndex = __webpack_require__(35610);\nvar lengthOfArrayLike = __webpack_require__(26198);\nvar deletePropertyOrThrow = __webpack_require__(84606);\n\nvar min = Math.min;\n\n// `Array.prototype.copyWithin` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.copywithin\n// eslint-disable-next-line es/no-array-prototype-copywithin -- safe\nmodule.exports = [].copyWithin || function copyWithin(target /* = 0 */, start /* = 0, end = @length */) {\n  var O = toObject(this);\n  var len = lengthOfArrayLike(O);\n  var to = toAbsoluteIndex(target, len);\n  var from = toAbsoluteIndex(start, len);\n  var end = arguments.length > 2 ? arguments[2] : undefined;\n  var count = min((end === undefined ? len : toAbsoluteIndex(end, len)) - from, len - to);\n  var inc = 1;\n  if (from < to && to < from + count) {\n    inc = -1;\n    from += count - 1;\n    to += count - 1;\n  }\n  while (count-- > 0) {\n    if (from in O) O[to] = O[from];\n    else deletePropertyOrThrow(O, to);\n    to += inc;\n    from += inc;\n  } return O;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/array-copy-within.js?")},57051:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar globalThis = __webpack_require__(44576);\nvar arrayFromConstructorAndList = __webpack_require__(35370);\nvar $fromBase64 = __webpack_require__(59143);\n\nvar Uint8Array = globalThis.Uint8Array;\n\n// `Uint8Array.fromBase64` method\n// https://github.com/tc39/proposal-arraybuffer-base64\nif (Uint8Array) $({ target: 'Uint8Array', stat: true }, {\n  fromBase64: function fromBase64(string /* , options */) {\n    var result = $fromBase64(string, arguments.length > 1 ? arguments[1] : undefined, null, 0x1FFFFFFFFFFFFF);\n    return arrayFromConstructorAndList(Uint8Array, result.bytes);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.uint8-array.from-base64.js?")},57145:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar uncurryThis = __webpack_require__(79504);\nvar aCallable = __webpack_require__(79306);\nvar toIndexedObject = __webpack_require__(25397);\nvar arrayFromConstructorAndList = __webpack_require__(35370);\nvar getBuiltInPrototypeMethod = __webpack_require__(44124);\nvar addToUnscopables = __webpack_require__(6469);\n\nvar $Array = Array;\nvar sort = uncurryThis(getBuiltInPrototypeMethod('Array', 'sort'));\n\n// `Array.prototype.toSorted` method\n// https://tc39.es/ecma262/#sec-array.prototype.tosorted\n$({ target: 'Array', proto: true }, {\n  toSorted: function toSorted(compareFn) {\n    if (compareFn !== undefined) aCallable(compareFn);\n    var O = toIndexedObject(this);\n    var A = arrayFromConstructorAndList($Array, O);\n    return sort(A, compareFn);\n  }\n});\n\naddToUnscopables('toSorted');\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array.to-sorted.js?")},57301:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar ArrayBufferViewCore = __webpack_require__(94644);\nvar $some = (__webpack_require__(59213).some);\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.some` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.some\nexportTypedArrayMethod('some', function some(callbackfn /* , thisArg */) {\n  return $some(aTypedArray(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.some.js?")},57323:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n/* eslint-disable regexp/no-empty-capturing-group, regexp/no-empty-group, regexp/no-lazy-ends -- testing */\n/* eslint-disable regexp/no-useless-quantifier -- testing */\nvar call = __webpack_require__(69565);\nvar uncurryThis = __webpack_require__(79504);\nvar toString = __webpack_require__(655);\nvar regexpFlags = __webpack_require__(67979);\nvar stickyHelpers = __webpack_require__(58429);\nvar shared = __webpack_require__(25745);\nvar create = __webpack_require__(2360);\nvar getInternalState = (__webpack_require__(91181).get);\nvar UNSUPPORTED_DOT_ALL = __webpack_require__(83635);\nvar UNSUPPORTED_NCG = __webpack_require__(18814);\n\nvar nativeReplace = shared('native-string-replace', String.prototype.replace);\nvar nativeExec = RegExp.prototype.exec;\nvar patchedExec = nativeExec;\nvar charAt = uncurryThis(''.charAt);\nvar indexOf = uncurryThis(''.indexOf);\nvar replace = uncurryThis(''.replace);\nvar stringSlice = uncurryThis(''.slice);\n\nvar UPDATES_LAST_INDEX_WRONG = (function () {\n  var re1 = /a/;\n  var re2 = /b*/g;\n  call(nativeExec, re1, 'a');\n  call(nativeExec, re2, 'a');\n  return re1.lastIndex !== 0 || re2.lastIndex !== 0;\n})();\n\nvar UNSUPPORTED_Y = stickyHelpers.BROKEN_CARET;\n\n// nonparticipating capturing group, copied from es5-shim's String#split patch.\nvar NPCG_INCLUDED = /()??/.exec('')[1] !== undefined;\n\nvar PATCH = UPDATES_LAST_INDEX_WRONG || NPCG_INCLUDED || UNSUPPORTED_Y || UNSUPPORTED_DOT_ALL || UNSUPPORTED_NCG;\n\nif (PATCH) {\n  patchedExec = function exec(string) {\n    var re = this;\n    var state = getInternalState(re);\n    var str = toString(string);\n    var raw = state.raw;\n    var result, reCopy, lastIndex, match, i, object, group;\n\n    if (raw) {\n      raw.lastIndex = re.lastIndex;\n      result = call(patchedExec, raw, str);\n      re.lastIndex = raw.lastIndex;\n      return result;\n    }\n\n    var groups = state.groups;\n    var sticky = UNSUPPORTED_Y && re.sticky;\n    var flags = call(regexpFlags, re);\n    var source = re.source;\n    var charsAdded = 0;\n    var strCopy = str;\n\n    if (sticky) {\n      flags = replace(flags, 'y', '');\n      if (indexOf(flags, 'g') === -1) {\n        flags += 'g';\n      }\n\n      strCopy = stringSlice(str, re.lastIndex);\n      // Support anchored sticky behavior.\n      if (re.lastIndex > 0 && (!re.multiline || re.multiline && charAt(str, re.lastIndex - 1) !== '\\n')) {\n        source = '(?: ' + source + ')';\n        strCopy = ' ' + strCopy;\n        charsAdded++;\n      }\n      // ^(? + rx + ) is needed, in combination with some str slicing, to\n      // simulate the 'y' flag.\n      reCopy = new RegExp('^(?:' + source + ')', flags);\n    }\n\n    if (NPCG_INCLUDED) {\n      reCopy = new RegExp('^' + source + '$(?!\\\\s)', flags);\n    }\n    if (UPDATES_LAST_INDEX_WRONG) lastIndex = re.lastIndex;\n\n    match = call(nativeExec, sticky ? reCopy : re, strCopy);\n\n    if (sticky) {\n      if (match) {\n        match.input = stringSlice(match.input, charsAdded);\n        match[0] = stringSlice(match[0], charsAdded);\n        match.index = re.lastIndex;\n        re.lastIndex += match[0].length;\n      } else re.lastIndex = 0;\n    } else if (UPDATES_LAST_INDEX_WRONG && match) {\n      re.lastIndex = re.global ? match.index + match[0].length : lastIndex;\n    }\n    if (NPCG_INCLUDED && match && match.length > 1) {\n      // Fix browsers whose `exec` methods don't consistently return `undefined`\n      // for NPCG, like IE8. NOTE: This doesn't work for /(.?)?/\n      call(nativeReplace, match[0], reCopy, function () {\n        for (i = 1; i < arguments.length - 2; i++) {\n          if (arguments[i] === undefined) match[i] = undefined;\n        }\n      });\n    }\n\n    if (match && groups) {\n      match.groups = object = create(null);\n      for (i = 0; i < groups.length; i++) {\n        group = groups[i];\n        object[group[0]] = match[group[1]];\n      }\n    }\n\n    return match;\n  };\n}\n\nmodule.exports = patchedExec;\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/regexp-exec.js?")},57465:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar DESCRIPTORS = __webpack_require__(43724);\nvar UNSUPPORTED_DOT_ALL = __webpack_require__(83635);\nvar classof = __webpack_require__(22195);\nvar defineBuiltInAccessor = __webpack_require__(62106);\nvar getInternalState = (__webpack_require__(91181).get);\n\nvar RegExpPrototype = RegExp.prototype;\nvar $TypeError = TypeError;\n\n// `RegExp.prototype.dotAll` getter\n// https://tc39.es/ecma262/#sec-get-regexp.prototype.dotall\nif (DESCRIPTORS && UNSUPPORTED_DOT_ALL) {\n  defineBuiltInAccessor(RegExpPrototype, 'dotAll', {\n    configurable: true,\n    get: function dotAll() {\n      if (this === RegExpPrototype) return;\n      // We can't use InternalStateModule.getterFor because\n      // we don't add metadata for regexps created by a literal.\n      if (classof(this) === 'RegExp') {\n        return !!getInternalState(this).dotAll;\n      }\n      throw new $TypeError('Incompatible receiver, RegExp required');\n    }\n  });\n}\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.regexp.dot-all.js?")},57657:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar fails = __webpack_require__(79039);\nvar isCallable = __webpack_require__(94901);\nvar isObject = __webpack_require__(20034);\nvar create = __webpack_require__(2360);\nvar getPrototypeOf = __webpack_require__(42787);\nvar defineBuiltIn = __webpack_require__(36840);\nvar wellKnownSymbol = __webpack_require__(78227);\nvar IS_PURE = __webpack_require__(96395);\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar BUGGY_SAFARI_ITERATORS = false;\n\n// `%IteratorPrototype%` object\n// https://tc39.es/ecma262/#sec-%iteratorprototype%-object\nvar IteratorPrototype, PrototypeOfArrayIteratorPrototype, arrayIterator;\n\n/* eslint-disable es/no-array-prototype-keys -- safe */\nif ([].keys) {\n  arrayIterator = [].keys();\n  // Safari 8 has buggy iterators w/o `next`\n  if (!('next' in arrayIterator)) BUGGY_SAFARI_ITERATORS = true;\n  else {\n    PrototypeOfArrayIteratorPrototype = getPrototypeOf(getPrototypeOf(arrayIterator));\n    if (PrototypeOfArrayIteratorPrototype !== Object.prototype) IteratorPrototype = PrototypeOfArrayIteratorPrototype;\n  }\n}\n\nvar NEW_ITERATOR_PROTOTYPE = !isObject(IteratorPrototype) || fails(function () {\n  var test = {};\n  // FF44- legacy iterators case\n  return IteratorPrototype[ITERATOR].call(test) !== test;\n});\n\nif (NEW_ITERATOR_PROTOTYPE) IteratorPrototype = {};\nelse if (IS_PURE) IteratorPrototype = create(IteratorPrototype);\n\n// `%IteratorPrototype%[@@iterator]()` method\n// https://tc39.es/ecma262/#sec-%iteratorprototype%-@@iterator\nif (!isCallable(IteratorPrototype[ITERATOR])) {\n  defineBuiltIn(IteratorPrototype, ITERATOR, function () {\n    return this;\n  });\n}\n\nmodule.exports = {\n  IteratorPrototype: IteratorPrototype,\n  BUGGY_SAFARI_ITERATORS: BUGGY_SAFARI_ITERATORS\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/iterators-core.js?")},57696:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar toIntegerOrInfinity = __webpack_require__(91291);\nvar toLength = __webpack_require__(18014);\n\nvar $RangeError = RangeError;\n\n// `ToIndex` abstract operation\n// https://tc39.es/ecma262/#sec-toindex\nmodule.exports = function (it) {\n  if (it === undefined) return 0;\n  var number = toIntegerOrInfinity(it);\n  var length = toLength(number);\n  if (number !== length) throw new $RangeError('Wrong length or index');\n  return length;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/to-index.js?")},57829:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar charAt = (__webpack_require__(68183).charAt);\n\n// `AdvanceStringIndex` abstract operation\n// https://tc39.es/ecma262/#sec-advancestringindex\nmodule.exports = function (S, index, unicode) {\n  return index + (unicode ? charAt(S, index).length : 1);\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/advance-string-index.js?")},58004:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar fails = __webpack_require__(79039);\nvar intersection = __webpack_require__(68750);\nvar setMethodAcceptSetLike = __webpack_require__(84916);\n\nvar INCORRECT = !setMethodAcceptSetLike('intersection', function (result) {\n  return result.size === 2 && result.has(1) && result.has(2);\n}) || fails(function () {\n  // eslint-disable-next-line es/no-array-from, es/no-set, es/no-set-prototype-intersection -- testing\n  return String(Array.from(new Set([1, 2, 3]).intersection(new Set([3, 2])))) !== '3,2';\n});\n\n// `Set.prototype.intersection` method\n// https://tc39.es/ecma262/#sec-set.prototype.intersection\n$({ target: 'Set', proto: true, real: true, forced: INCORRECT }, {\n  intersection: intersection\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.set.intersection.v2.js?")},58029:module=>{eval("function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 58029;\nmodule.exports = webpackEmptyContext;\n\n//# sourceURL=webpack://ViewerJS/../pdfjs-local/build/dist/build/_sync?")},58229:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar toPositiveInteger = __webpack_require__(99590);\n\nvar $RangeError = RangeError;\n\nmodule.exports = function (it, BYTES) {\n  var offset = toPositiveInteger(it);\n  if (offset % BYTES) throw new $RangeError('Wrong offset');\n  return offset;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/to-offset.js?")},58242:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar call = __webpack_require__(69565);\nvar getBuiltIn = __webpack_require__(97751);\nvar wellKnownSymbol = __webpack_require__(78227);\nvar defineBuiltIn = __webpack_require__(36840);\n\nmodule.exports = function () {\n  var Symbol = getBuiltIn('Symbol');\n  var SymbolPrototype = Symbol && Symbol.prototype;\n  var valueOf = SymbolPrototype && SymbolPrototype.valueOf;\n  var TO_PRIMITIVE = wellKnownSymbol('toPrimitive');\n\n  if (SymbolPrototype && !SymbolPrototype[TO_PRIMITIVE]) {\n    // `Symbol.prototype[@@toPrimitive]` method\n    // https://tc39.es/ecma262/#sec-symbol.prototype-@@toprimitive\n    // eslint-disable-next-line no-unused-vars -- required for .length\n    defineBuiltIn(SymbolPrototype, TO_PRIMITIVE, function (hint) {\n      return call(valueOf, this);\n    }, { arity: 1 });\n  }\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/symbol-define-to-primitive.js?")},58319:module=>{"use strict";eval("\nvar round = Math.round;\n\nmodule.exports = function (it) {\n  var value = round(it);\n  return value < 0 ? 0 : value > 0xFF ? 0xFF : value & 0xFF;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/to-uint8-clamped.js?")},58335:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar DESCRIPTORS = __webpack_require__(43724);\nvar globalThis = __webpack_require__(44576);\nvar getBuiltIn = __webpack_require__(97751);\nvar uncurryThis = __webpack_require__(79504);\nvar call = __webpack_require__(69565);\nvar isCallable = __webpack_require__(94901);\nvar isObject = __webpack_require__(20034);\nvar isArray = __webpack_require__(34376);\nvar hasOwn = __webpack_require__(39297);\nvar toString = __webpack_require__(655);\nvar lengthOfArrayLike = __webpack_require__(26198);\nvar createProperty = __webpack_require__(97040);\nvar fails = __webpack_require__(79039);\nvar parseJSONString = __webpack_require__(616);\nvar NATIVE_SYMBOL = __webpack_require__(4495);\n\nvar JSON = globalThis.JSON;\nvar Number = globalThis.Number;\nvar SyntaxError = globalThis.SyntaxError;\nvar nativeParse = JSON && JSON.parse;\nvar enumerableOwnProperties = getBuiltIn('Object', 'keys');\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar at = uncurryThis(''.charAt);\nvar slice = uncurryThis(''.slice);\nvar exec = uncurryThis(/./.exec);\nvar push = uncurryThis([].push);\n\nvar IS_DIGIT = /^\\d$/;\nvar IS_NON_ZERO_DIGIT = /^[1-9]$/;\nvar IS_NUMBER_START = /^[\\d-]$/;\nvar IS_WHITESPACE = /^[\\t\\n\\r ]$/;\n\nvar PRIMITIVE = 0;\nvar OBJECT = 1;\n\nvar $parse = function (source, reviver) {\n  source = toString(source);\n  var context = new Context(source, 0, '');\n  var root = context.parse();\n  var value = root.value;\n  var endIndex = context.skip(IS_WHITESPACE, root.end);\n  if (endIndex < source.length) {\n    throw new SyntaxError('Unexpected extra character: \"' + at(source, endIndex) + '\" after the parsed data at: ' + endIndex);\n  }\n  return isCallable(reviver) ? internalize({ '': value }, '', reviver, root) : value;\n};\n\nvar internalize = function (holder, name, reviver, node) {\n  var val = holder[name];\n  var unmodified = node && val === node.value;\n  var context = unmodified && typeof node.source == 'string' ? { source: node.source } : {};\n  var elementRecordsLen, keys, len, i, P;\n  if (isObject(val)) {\n    var nodeIsArray = isArray(val);\n    var nodes = unmodified ? node.nodes : nodeIsArray ? [] : {};\n    if (nodeIsArray) {\n      elementRecordsLen = nodes.length;\n      len = lengthOfArrayLike(val);\n      for (i = 0; i < len; i++) {\n        internalizeProperty(val, i, internalize(val, '' + i, reviver, i < elementRecordsLen ? nodes[i] : undefined));\n      }\n    } else {\n      keys = enumerableOwnProperties(val);\n      len = lengthOfArrayLike(keys);\n      for (i = 0; i < len; i++) {\n        P = keys[i];\n        internalizeProperty(val, P, internalize(val, P, reviver, hasOwn(nodes, P) ? nodes[P] : undefined));\n      }\n    }\n  }\n  return call(reviver, holder, name, val, context);\n};\n\nvar internalizeProperty = function (object, key, value) {\n  if (DESCRIPTORS) {\n    var descriptor = getOwnPropertyDescriptor(object, key);\n    if (descriptor && !descriptor.configurable) return;\n  }\n  if (value === undefined) delete object[key];\n  else createProperty(object, key, value);\n};\n\nvar Node = function (value, end, source, nodes) {\n  this.value = value;\n  this.end = end;\n  this.source = source;\n  this.nodes = nodes;\n};\n\nvar Context = function (source, index) {\n  this.source = source;\n  this.index = index;\n};\n\n// https://www.json.org/json-en.html\nContext.prototype = {\n  fork: function (nextIndex) {\n    return new Context(this.source, nextIndex);\n  },\n  parse: function () {\n    var source = this.source;\n    var i = this.skip(IS_WHITESPACE, this.index);\n    var fork = this.fork(i);\n    var chr = at(source, i);\n    if (exec(IS_NUMBER_START, chr)) return fork.number();\n    switch (chr) {\n      case '{':\n        return fork.object();\n      case '[':\n        return fork.array();\n      case '\"':\n        return fork.string();\n      case 't':\n        return fork.keyword(true);\n      case 'f':\n        return fork.keyword(false);\n      case 'n':\n        return fork.keyword(null);\n    } throw new SyntaxError('Unexpected character: \"' + chr + '\" at: ' + i);\n  },\n  node: function (type, value, start, end, nodes) {\n    return new Node(value, end, type ? null : slice(this.source, start, end), nodes);\n  },\n  object: function () {\n    var source = this.source;\n    var i = this.index + 1;\n    var expectKeypair = false;\n    var object = {};\n    var nodes = {};\n    while (i < source.length) {\n      i = this.until(['\"', '}'], i);\n      if (at(source, i) === '}' && !expectKeypair) {\n        i++;\n        break;\n      }\n      // Parsing the key\n      var result = this.fork(i).string();\n      var key = result.value;\n      i = result.end;\n      i = this.until([':'], i) + 1;\n      // Parsing value\n      i = this.skip(IS_WHITESPACE, i);\n      result = this.fork(i).parse();\n      createProperty(nodes, key, result);\n      createProperty(object, key, result.value);\n      i = this.until([',', '}'], result.end);\n      var chr = at(source, i);\n      if (chr === ',') {\n        expectKeypair = true;\n        i++;\n      } else if (chr === '}') {\n        i++;\n        break;\n      }\n    }\n    return this.node(OBJECT, object, this.index, i, nodes);\n  },\n  array: function () {\n    var source = this.source;\n    var i = this.index + 1;\n    var expectElement = false;\n    var array = [];\n    var nodes = [];\n    while (i < source.length) {\n      i = this.skip(IS_WHITESPACE, i);\n      if (at(source, i) === ']' && !expectElement) {\n        i++;\n        break;\n      }\n      var result = this.fork(i).parse();\n      push(nodes, result);\n      push(array, result.value);\n      i = this.until([',', ']'], result.end);\n      if (at(source, i) === ',') {\n        expectElement = true;\n        i++;\n      } else if (at(source, i) === ']') {\n        i++;\n        break;\n      }\n    }\n    return this.node(OBJECT, array, this.index, i, nodes);\n  },\n  string: function () {\n    var index = this.index;\n    var parsed = parseJSONString(this.source, this.index + 1);\n    return this.node(PRIMITIVE, parsed.value, index, parsed.end);\n  },\n  number: function () {\n    var source = this.source;\n    var startIndex = this.index;\n    var i = startIndex;\n    if (at(source, i) === '-') i++;\n    if (at(source, i) === '0') i++;\n    else if (exec(IS_NON_ZERO_DIGIT, at(source, i))) i = this.skip(IS_DIGIT, i + 1);\n    else throw new SyntaxError('Failed to parse number at: ' + i);\n    if (at(source, i) === '.') i = this.skip(IS_DIGIT, i + 1);\n    if (at(source, i) === 'e' || at(source, i) === 'E') {\n      i++;\n      if (at(source, i) === '+' || at(source, i) === '-') i++;\n      var exponentStartIndex = i;\n      i = this.skip(IS_DIGIT, i);\n      if (exponentStartIndex === i) throw new SyntaxError(\"Failed to parse number's exponent value at: \" + i);\n    }\n    return this.node(PRIMITIVE, Number(slice(source, startIndex, i)), startIndex, i);\n  },\n  keyword: function (value) {\n    var keyword = '' + value;\n    var index = this.index;\n    var endIndex = index + keyword.length;\n    if (slice(this.source, index, endIndex) !== keyword) throw new SyntaxError('Failed to parse value at: ' + index);\n    return this.node(PRIMITIVE, value, index, endIndex);\n  },\n  skip: function (regex, i) {\n    var source = this.source;\n    for (; i < source.length; i++) if (!exec(regex, at(source, i))) break;\n    return i;\n  },\n  until: function (array, i) {\n    i = this.skip(IS_WHITESPACE, i);\n    var chr = at(this.source, i);\n    for (var j = 0; j < array.length; j++) if (array[j] === chr) return i;\n    throw new SyntaxError('Unexpected character: \"' + chr + '\" at: ' + i);\n  }\n};\n\nvar NO_SOURCE_SUPPORT = fails(function () {\n  var unsafeInt = '9007199254740993';\n  var source;\n  nativeParse(unsafeInt, function (key, value, context) {\n    source = context.source;\n  });\n  return source !== unsafeInt;\n});\n\nvar PROPER_BASE_PARSE = NATIVE_SYMBOL && !fails(function () {\n  // Safari 9 bug\n  return 1 / nativeParse('-0 \\t') !== -Infinity;\n});\n\n// `JSON.parse` method\n// https://tc39.es/ecma262/#sec-json.parse\n// https://github.com/tc39/proposal-json-parse-with-source\n$({ target: 'JSON', stat: true, forced: NO_SOURCE_SUPPORT }, {\n  parse: function parse(text, reviver) {\n    return PROPER_BASE_PARSE && !isCallable(reviver) ? nativeParse(text) : $parse(text, reviver);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.json.parse.js?")},58429:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar fails = __webpack_require__(79039);\nvar globalThis = __webpack_require__(44576);\n\n// babel-minify and Closure Compiler transpiles RegExp('a', 'y') -> /a/y and it causes SyntaxError\nvar $RegExp = globalThis.RegExp;\n\nvar UNSUPPORTED_Y = fails(function () {\n  var re = $RegExp('a', 'y');\n  re.lastIndex = 2;\n  return re.exec('abcd') !== null;\n});\n\n// UC Browser bug\n// https://github.com/zloirock/core-js/issues/1008\nvar MISSED_STICKY = UNSUPPORTED_Y || fails(function () {\n  return !$RegExp('a', 'y').sticky;\n});\n\nvar BROKEN_CARET = UNSUPPORTED_Y || fails(function () {\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=773687\n  var re = $RegExp('^r', 'gy');\n  re.lastIndex = 2;\n  return re.exec('str') !== null;\n});\n\nmodule.exports = {\n  BROKEN_CARET: BROKEN_CARET,\n  MISSED_STICKY: MISSED_STICKY,\n  UNSUPPORTED_Y: UNSUPPORTED_Y\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/regexp-sticky-helpers.js?")},58622:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar globalThis = __webpack_require__(44576);\nvar isCallable = __webpack_require__(94901);\n\nvar WeakMap = globalThis.WeakMap;\n\nmodule.exports = isCallable(WeakMap) && /native code/.test(String(WeakMap));\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/weak-map-basic-detection.js?")},58934:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar trimStart = __webpack_require__(53487);\n\n// `String.prototype.trimLeft` method\n// https://tc39.es/ecma262/#sec-string.prototype.trimleft\n// eslint-disable-next-line es/no-string-prototype-trimleft-trimright -- safe\n$({ target: 'String', proto: true, name: 'trimStart', forced: ''.trimLeft !== trimStart }, {\n  trimLeft: trimStart\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.string.trim-left.js?")},58940:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar $parseInt = __webpack_require__(52703);\n\n// `parseInt` method\n// https://tc39.es/ecma262/#sec-parseint-string-radix\n$({ global: true, forced: parseInt !== $parseInt }, {\n  parseInt: $parseInt\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.parse-int.js?")},59089:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\nvar $ = __webpack_require__(46518);\nvar uncurryThis = __webpack_require__(79504);\n\nvar $Date = Date;\nvar thisTimeValue = uncurryThis($Date.prototype.getTime);\n\n// `Date.now` method\n// https://tc39.es/ecma262/#sec-date.now\n$({ target: 'Date', stat: true }, {\n  now: function now() {\n    return thisTimeValue(new $Date());\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.date.now.js?")},59143:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar globalThis = __webpack_require__(44576);\nvar uncurryThis = __webpack_require__(79504);\nvar anObjectOrUndefined = __webpack_require__(83972);\nvar aString = __webpack_require__(63463);\nvar hasOwn = __webpack_require__(39297);\nvar base64Map = __webpack_require__(92804);\nvar getAlphabetOption = __webpack_require__(944);\nvar notDetached = __webpack_require__(55169);\n\nvar base64Alphabet = base64Map.c2i;\nvar base64UrlAlphabet = base64Map.c2iUrl;\n\nvar SyntaxError = globalThis.SyntaxError;\nvar TypeError = globalThis.TypeError;\nvar at = uncurryThis(''.charAt);\n\nvar skipAsciiWhitespace = function (string, index) {\n  var length = string.length;\n  for (;index < length; index++) {\n    var chr = at(string, index);\n    if (chr !== ' ' && chr !== '\\t' && chr !== '\\n' && chr !== '\\f' && chr !== '\\r') break;\n  } return index;\n};\n\nvar decodeBase64Chunk = function (chunk, alphabet, throwOnExtraBits) {\n  var chunkLength = chunk.length;\n\n  if (chunkLength < 4) {\n    chunk += chunkLength === 2 ? 'AA' : 'A';\n  }\n\n  var triplet = (alphabet[at(chunk, 0)] << 18)\n    + (alphabet[at(chunk, 1)] << 12)\n    + (alphabet[at(chunk, 2)] << 6)\n    + alphabet[at(chunk, 3)];\n\n  var chunkBytes = [\n    (triplet >> 16) & 255,\n    (triplet >> 8) & 255,\n    triplet & 255\n  ];\n\n  if (chunkLength === 2) {\n    if (throwOnExtraBits && chunkBytes[1] !== 0) {\n      throw new SyntaxError('Extra bits');\n    }\n    return [chunkBytes[0]];\n  }\n\n  if (chunkLength === 3) {\n    if (throwOnExtraBits && chunkBytes[2] !== 0) {\n      throw new SyntaxError('Extra bits');\n    }\n    return [chunkBytes[0], chunkBytes[1]];\n  }\n\n  return chunkBytes;\n};\n\nvar writeBytes = function (bytes, elements, written) {\n  var elementsLength = elements.length;\n  for (var index = 0; index < elementsLength; index++) {\n    bytes[written + index] = elements[index];\n  }\n  return written + elementsLength;\n};\n\n/* eslint-disable max-statements, max-depth -- TODO */\nmodule.exports = function (string, options, into, maxLength) {\n  aString(string);\n  anObjectOrUndefined(options);\n  var alphabet = getAlphabetOption(options) === 'base64' ? base64Alphabet : base64UrlAlphabet;\n  var lastChunkHandling = options ? options.lastChunkHandling : undefined;\n\n  if (lastChunkHandling === undefined) lastChunkHandling = 'loose';\n\n  if (lastChunkHandling !== 'loose' && lastChunkHandling !== 'strict' && lastChunkHandling !== 'stop-before-partial') {\n    throw new TypeError('Incorrect `lastChunkHandling` option');\n  }\n\n  if (into) notDetached(into.buffer);\n\n  var bytes = into || [];\n  var written = 0;\n  var read = 0;\n  var chunk = '';\n  var index = 0;\n\n  if (maxLength) while (true) {\n    index = skipAsciiWhitespace(string, index);\n    if (index === string.length) {\n      if (chunk.length > 0) {\n        if (lastChunkHandling === 'stop-before-partial') {\n          break;\n        }\n        if (lastChunkHandling === 'loose') {\n          if (chunk.length === 1) {\n            throw new SyntaxError('Malformed padding: exactly one additional character');\n          }\n          written = writeBytes(bytes, decodeBase64Chunk(chunk, alphabet, false), written);\n        } else {\n          throw new SyntaxError('Missing padding');\n        }\n      }\n      read = string.length;\n      break;\n    }\n    var chr = at(string, index);\n    ++index;\n    if (chr === '=') {\n      if (chunk.length < 2) {\n        throw new SyntaxError('Padding is too early');\n      }\n      index = skipAsciiWhitespace(string, index);\n      if (chunk.length === 2) {\n        if (index === string.length) {\n          if (lastChunkHandling === 'stop-before-partial') {\n            break;\n          }\n          throw new SyntaxError('Malformed padding: only one =');\n        }\n        if (at(string, index) === '=') {\n          ++index;\n          index = skipAsciiWhitespace(string, index);\n        }\n      }\n      if (index < string.length) {\n        throw new SyntaxError('Unexpected character after padding');\n      }\n      written = writeBytes(bytes, decodeBase64Chunk(chunk, alphabet, lastChunkHandling === 'strict'), written);\n      read = string.length;\n      break;\n    }\n    if (!hasOwn(alphabet, chr)) {\n      throw new SyntaxError('Unexpected character');\n    }\n    var remainingBytes = maxLength - written;\n    if (remainingBytes === 1 && chunk.length === 2 || remainingBytes === 2 && chunk.length === 3) {\n      // special case: we can fit exactly the number of bytes currently represented by chunk, so we were just checking for `=`\n      break;\n    }\n\n    chunk += chr;\n    if (chunk.length === 4) {\n      written = writeBytes(bytes, decodeBase64Chunk(chunk, alphabet, false), written);\n      chunk = '';\n      read = index;\n      if (written === maxLength) {\n        break;\n      }\n    }\n  }\n\n  return { bytes: bytes, read: read, written: written };\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/uint8-from-base64.js?")},59149:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar isIntegralNumber = __webpack_require__(2087);\n\nvar abs = Math.abs;\n\n// `Number.isSafeInteger` method\n// https://tc39.es/ecma262/#sec-number.issafeinteger\n$({ target: 'Number', stat: true }, {\n  isSafeInteger: function isSafeInteger(number) {\n    return isIntegralNumber(number) && abs(number) <= 0x1FFFFFFFFFFFFF;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.number.is-safe-integer.js?")},59213:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar bind = __webpack_require__(76080);\nvar uncurryThis = __webpack_require__(79504);\nvar IndexedObject = __webpack_require__(47055);\nvar toObject = __webpack_require__(48981);\nvar lengthOfArrayLike = __webpack_require__(26198);\nvar arraySpeciesCreate = __webpack_require__(1469);\n\nvar push = uncurryThis([].push);\n\n// `Array.prototype.{ forEach, map, filter, some, every, find, findIndex, filterReject }` methods implementation\nvar createMethod = function (TYPE) {\n  var IS_MAP = TYPE === 1;\n  var IS_FILTER = TYPE === 2;\n  var IS_SOME = TYPE === 3;\n  var IS_EVERY = TYPE === 4;\n  var IS_FIND_INDEX = TYPE === 6;\n  var IS_FILTER_REJECT = TYPE === 7;\n  var NO_HOLES = TYPE === 5 || IS_FIND_INDEX;\n  return function ($this, callbackfn, that, specificCreate) {\n    var O = toObject($this);\n    var self = IndexedObject(O);\n    var length = lengthOfArrayLike(self);\n    var boundFunction = bind(callbackfn, that);\n    var index = 0;\n    var create = specificCreate || arraySpeciesCreate;\n    var target = IS_MAP ? create($this, length) : IS_FILTER || IS_FILTER_REJECT ? create($this, 0) : undefined;\n    var value, result;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      value = self[index];\n      result = boundFunction(value, index, O);\n      if (TYPE) {\n        if (IS_MAP) target[index] = result; // map\n        else if (result) switch (TYPE) {\n          case 3: return true;              // some\n          case 5: return value;             // find\n          case 6: return index;             // findIndex\n          case 2: push(target, value);      // filter\n        } else switch (TYPE) {\n          case 4: return false;             // every\n          case 7: push(target, value);      // filterReject\n        }\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.forEach` method\n  // https://tc39.es/ecma262/#sec-array.prototype.foreach\n  forEach: createMethod(0),\n  // `Array.prototype.map` method\n  // https://tc39.es/ecma262/#sec-array.prototype.map\n  map: createMethod(1),\n  // `Array.prototype.filter` method\n  // https://tc39.es/ecma262/#sec-array.prototype.filter\n  filter: createMethod(2),\n  // `Array.prototype.some` method\n  // https://tc39.es/ecma262/#sec-array.prototype.some\n  some: createMethod(3),\n  // `Array.prototype.every` method\n  // https://tc39.es/ecma262/#sec-array.prototype.every\n  every: createMethod(4),\n  // `Array.prototype.find` method\n  // https://tc39.es/ecma262/#sec-array.prototype.find\n  find: createMethod(5),\n  // `Array.prototype.findIndex` method\n  // https://tc39.es/ecma262/#sec-array.prototype.findIndex\n  findIndex: createMethod(6),\n  // `Array.prototype.filterReject` method\n  // https://github.com/tc39/proposal-array-filtering\n  filterReject: createMethod(7)\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/array-iteration.js?")},59225:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar globalThis = __webpack_require__(44576);\nvar apply = __webpack_require__(18745);\nvar bind = __webpack_require__(76080);\nvar isCallable = __webpack_require__(94901);\nvar hasOwn = __webpack_require__(39297);\nvar fails = __webpack_require__(79039);\nvar html = __webpack_require__(20397);\nvar arraySlice = __webpack_require__(67680);\nvar createElement = __webpack_require__(4055);\nvar validateArgumentsLength = __webpack_require__(22812);\nvar IS_IOS = __webpack_require__(89544);\nvar IS_NODE = __webpack_require__(16193);\n\nvar set = globalThis.setImmediate;\nvar clear = globalThis.clearImmediate;\nvar process = globalThis.process;\nvar Dispatch = globalThis.Dispatch;\nvar Function = globalThis.Function;\nvar MessageChannel = globalThis.MessageChannel;\nvar String = globalThis.String;\nvar counter = 0;\nvar queue = {};\nvar ONREADYSTATECHANGE = 'onreadystatechange';\nvar $location, defer, channel, port;\n\nfails(function () {\n  // Deno throws a ReferenceError on `location` access without `--location` flag\n  $location = globalThis.location;\n});\n\nvar run = function (id) {\n  if (hasOwn(queue, id)) {\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\n\nvar runner = function (id) {\n  return function () {\n    run(id);\n  };\n};\n\nvar eventListener = function (event) {\n  run(event.data);\n};\n\nvar globalPostMessageDefer = function (id) {\n  // old engines have not location.origin\n  globalThis.postMessage(String(id), $location.protocol + '//' + $location.host);\n};\n\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif (!set || !clear) {\n  set = function setImmediate(handler) {\n    validateArgumentsLength(arguments.length, 1);\n    var fn = isCallable(handler) ? handler : Function(handler);\n    var args = arraySlice(arguments, 1);\n    queue[++counter] = function () {\n      apply(fn, undefined, args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clear = function clearImmediate(id) {\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if (IS_NODE) {\n    defer = function (id) {\n      process.nextTick(runner(id));\n    };\n  // Sphere (JS game engine) Dispatch API\n  } else if (Dispatch && Dispatch.now) {\n    defer = function (id) {\n      Dispatch.now(runner(id));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  // except iOS - https://github.com/zloirock/core-js/issues/624\n  } else if (MessageChannel && !IS_IOS) {\n    channel = new MessageChannel();\n    port = channel.port2;\n    channel.port1.onmessage = eventListener;\n    defer = bind(port.postMessage, port);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if (\n    globalThis.addEventListener &&\n    isCallable(globalThis.postMessage) &&\n    !globalThis.importScripts &&\n    $location && $location.protocol !== 'file:' &&\n    !fails(globalPostMessageDefer)\n  ) {\n    defer = globalPostMessageDefer;\n    globalThis.addEventListener('message', eventListener, false);\n  // IE8-\n  } else if (ONREADYSTATECHANGE in createElement('script')) {\n    defer = function (id) {\n      html.appendChild(createElement('script'))[ONREADYSTATECHANGE] = function () {\n        html.removeChild(this);\n        run(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function (id) {\n      setTimeout(runner(id), 0);\n    };\n  }\n}\n\nmodule.exports = {\n  set: set,\n  clear: clear\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/task.js?")},59494:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n__webpack_require__(84315);\n__webpack_require__(79147);\n\nmodule.exports = __webpack_require__(19167);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/actual/index.js?")},59848:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove this module from `core-js@4` since it's split to modules listed below\n__webpack_require__(86368);\n__webpack_require__(29309);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/web.immediate.js?")},59904:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\nvar $ = __webpack_require__(46518);\nvar DESCRIPTORS = __webpack_require__(43724);\nvar create = __webpack_require__(2360);\n\n// `Object.create` method\n// https://tc39.es/ecma262/#sec-object.create\n$({ target: 'Object', stat: true, sham: !DESCRIPTORS }, {\n  create: create\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.object.create.js?")},60193:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar defineWellKnownSymbol = __webpack_require__(70511);\n\n// `Symbol.hasInstance` well-known symbol\n// https://tc39.es/ecma262/#sec-symbol.hasinstance\ndefineWellKnownSymbol('hasInstance');\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.symbol.has-instance.js?")},60268:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar createHTML = __webpack_require__(77240);\nvar forcedStringHTMLMethod = __webpack_require__(23061);\n\n// `String.prototype.fontcolor` method\n// https://tc39.es/ecma262/#sec-string.prototype.fontcolor\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('fontcolor') }, {\n  fontcolor: function fontcolor(color) {\n    return createHTML(this, 'font', 'color', color);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.string.fontcolor.js?")},60479:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar setToStringTag = __webpack_require__(10687);\n\n// Math[@@toStringTag] property\n// https://tc39.es/ecma262/#sec-math-@@tostringtag\nsetToStringTag(Math, 'Math', true);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.math.to-string-tag.js?")},60511:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval('\nvar isRegExp = __webpack_require__(60788);\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (it) {\n  if (isRegExp(it)) {\n    throw new $TypeError("The method doesn\'t accept regular expressions");\n  } return it;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/not-a-regexp.js?')},60533:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// https://github.com/tc39/proposal-string-pad-start-end\nvar uncurryThis = __webpack_require__(79504);\nvar toLength = __webpack_require__(18014);\nvar toString = __webpack_require__(655);\nvar $repeat = __webpack_require__(72333);\nvar requireObjectCoercible = __webpack_require__(67750);\n\nvar repeat = uncurryThis($repeat);\nvar stringSlice = uncurryThis(''.slice);\nvar ceil = Math.ceil;\n\n// `String.prototype.{ padStart, padEnd }` methods implementation\nvar createMethod = function (IS_END) {\n  return function ($this, maxLength, fillString) {\n    var S = toString(requireObjectCoercible($this));\n    var intMaxLength = toLength(maxLength);\n    var stringLength = S.length;\n    var fillStr = fillString === undefined ? ' ' : toString(fillString);\n    var fillLen, stringFiller;\n    if (intMaxLength <= stringLength || fillStr === '') return S;\n    fillLen = intMaxLength - stringLength;\n    stringFiller = repeat(fillStr, ceil(fillLen / fillStr.length));\n    if (stringFiller.length > fillLen) stringFiller = stringSlice(stringFiller, 0, fillLen);\n    return IS_END ? S + stringFiller : stringFiller + S;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.padStart` method\n  // https://tc39.es/ecma262/#sec-string.prototype.padstart\n  start: createMethod(false),\n  // `String.prototype.padEnd` method\n  // https://tc39.es/ecma262/#sec-string.prototype.padend\n  end: createMethod(true)\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/string-pad.js?")},60605:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar fround = __webpack_require__(15617);\n\n// `Math.fround` method\n// https://tc39.es/ecma262/#sec-math.fround\n$({ target: 'Math', stat: true }, { fround: fround });\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.math.fround.js?")},60706:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar PROPER_FUNCTION_NAME = (__webpack_require__(10350).PROPER);\nvar fails = __webpack_require__(79039);\nvar whitespaces = __webpack_require__(47452);\n\nvar non = '\\u200B\\u0085\\u180E';\n\n// check that a method works with the correct list\n// of whitespaces and has a correct name\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    return !!whitespaces[METHOD_NAME]()\n      || non[METHOD_NAME]() !== non\n      || (PROPER_FUNCTION_NAME && whitespaces[METHOD_NAME].name !== METHOD_NAME);\n  });\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/string-trim-forced.js?")},60739:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar fails = __webpack_require__(79039);\nvar toObject = __webpack_require__(48981);\nvar toPrimitive = __webpack_require__(72777);\n\nvar FORCED = fails(function () {\n  return new Date(NaN).toJSON() !== null\n    || Date.prototype.toJSON.call({ toISOString: function () { return 1; } }) !== 1;\n});\n\n// `Date.prototype.toJSON` method\n// https://tc39.es/ecma262/#sec-date.prototype.tojson\n$({ target: 'Date', proto: true, arity: 1, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  toJSON: function toJSON(key) {\n    var O = toObject(this);\n    var pv = toPrimitive(O, 'number');\n    return typeof pv == 'number' && !isFinite(pv) ? null : O.toISOString();\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.date.to-json.js?")},60788:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar isObject = __webpack_require__(20034);\nvar classof = __webpack_require__(22195);\nvar wellKnownSymbol = __webpack_require__(78227);\n\nvar MATCH = wellKnownSymbol('match');\n\n// `IsRegExp` abstract operation\n// https://tc39.es/ecma262/#sec-isregexp\nmodule.exports = function (it) {\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : classof(it) === 'RegExp');\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/is-regexp.js?")},60825:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar getBuiltIn = __webpack_require__(97751);\nvar apply = __webpack_require__(18745);\nvar bind = __webpack_require__(30566);\nvar aConstructor = __webpack_require__(35548);\nvar anObject = __webpack_require__(28551);\nvar isObject = __webpack_require__(20034);\nvar create = __webpack_require__(2360);\nvar fails = __webpack_require__(79039);\n\nvar nativeConstruct = getBuiltIn('Reflect', 'construct');\nvar ObjectPrototype = Object.prototype;\nvar push = [].push;\n\n// `Reflect.construct` method\n// https://tc39.es/ecma262/#sec-reflect.construct\n// MS Edge supports only 2 arguments and argumentsList argument is optional\n// FF Nightly sets third argument as `new.target`, but does not create `this` from it\nvar NEW_TARGET_BUG = fails(function () {\n  function F() { /* empty */ }\n  return !(nativeConstruct(function () { /* empty */ }, [], F) instanceof F);\n});\n\nvar ARGS_BUG = !fails(function () {\n  nativeConstruct(function () { /* empty */ });\n});\n\nvar FORCED = NEW_TARGET_BUG || ARGS_BUG;\n\n$({ target: 'Reflect', stat: true, forced: FORCED, sham: FORCED }, {\n  construct: function construct(Target, args /* , newTarget */) {\n    aConstructor(Target);\n    anObject(args);\n    var newTarget = arguments.length < 3 ? Target : aConstructor(arguments[2]);\n    if (ARGS_BUG && !NEW_TARGET_BUG) return nativeConstruct(Target, args, newTarget);\n    if (Target === newTarget) {\n      // w/o altered newTarget, optimization for 0-4 arguments\n      switch (args.length) {\n        case 0: return new Target();\n        case 1: return new Target(args[0]);\n        case 2: return new Target(args[0], args[1]);\n        case 3: return new Target(args[0], args[1], args[2]);\n        case 4: return new Target(args[0], args[1], args[2], args[3]);\n      }\n      // w/o altered newTarget, lot of arguments case\n      var $args = [null];\n      apply(push, $args, args);\n      return new (apply(bind, Target, $args))();\n    }\n    // with altered newTarget, not support built-in constructors\n    var proto = newTarget.prototype;\n    var instance = create(isObject(proto) ? proto : ObjectPrototype);\n    var result = apply(Target, instance, args);\n    return isObject(result) ? result : instance;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.reflect.construct.js?")},61034:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar call = __webpack_require__(69565);\nvar hasOwn = __webpack_require__(39297);\nvar isPrototypeOf = __webpack_require__(1625);\nvar regExpFlags = __webpack_require__(67979);\n\nvar RegExpPrototype = RegExp.prototype;\n\nmodule.exports = function (R) {\n  var flags = R.flags;\n  return flags === undefined && !('flags' in RegExpPrototype) && !hasOwn(R, 'flags') && isPrototypeOf(RegExpPrototype, R)\n    ? call(regExpFlags, R) : flags;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/regexp-get-flags.js?")},61699:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar uncurryThis = __webpack_require__(79504);\nvar fails = __webpack_require__(79039);\n\n// IE8- non-standard case\nvar FORCED = fails(function () {\n  // eslint-disable-next-line es/no-date-prototype-getyear-setyear -- detection\n  return new Date(16e11).getYear() !== 120;\n});\n\nvar getFullYear = uncurryThis(Date.prototype.getFullYear);\n\n// `Date.prototype.getYear` method\n// https://tc39.es/ecma262/#sec-date.prototype.getyear\n$({ target: 'Date', proto: true, forced: FORCED }, {\n  getYear: function getYear() {\n    return getFullYear(this) - 1900;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.date.get-year.js?")},61701:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar map = __webpack_require__(20713);\nvar IS_PURE = __webpack_require__(96395);\n\n// `Iterator.prototype.map` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.map\n$({ target: 'Iterator', proto: true, real: true, forced: IS_PURE }, {\n  map: map\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.iterator.map.js?")},61740:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar createTypedArrayConstructor = __webpack_require__(15823);\n\n// `Uint32Array` constructor\n// https://tc39.es/ecma262/#sec-typedarray-objects\ncreateTypedArrayConstructor('Uint32', function (init) {\n  return function Uint32Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.uint32-array.js?")},61806:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar anObject = __webpack_require__(28551);\nvar iterate = __webpack_require__(72652);\nvar getIteratorDirect = __webpack_require__(1767);\n\nvar push = [].push;\n\n// `Iterator.prototype.toArray` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.toarray\n$({ target: 'Iterator', proto: true, real: true }, {\n  toArray: function toArray() {\n    var result = [];\n    iterate(getIteratorDirect(anObject(this)), push, { that: result, IS_RECORD: true });\n    return result;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.iterator.to-array.js?")},61828:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar uncurryThis = __webpack_require__(79504);\nvar hasOwn = __webpack_require__(39297);\nvar toIndexedObject = __webpack_require__(25397);\nvar indexOf = (__webpack_require__(19617).indexOf);\nvar hiddenKeys = __webpack_require__(30421);\n\nvar push = uncurryThis([].push);\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !hasOwn(hiddenKeys, key) && hasOwn(O, key) && push(result, key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (hasOwn(O, key = names[i++])) {\n    ~indexOf(result, key) || push(result, key);\n  }\n  return result;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/object-keys-internal.js?")},61833:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar defineWellKnownSymbol = __webpack_require__(70511);\n\n// `Symbol.search` well-known symbol\n// https://tc39.es/ecma262/#sec-symbol.search\ndefineWellKnownSymbol('search');\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.symbol.search.js?")},62010:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar DESCRIPTORS = __webpack_require__(43724);\nvar FUNCTION_NAME_EXISTS = (__webpack_require__(10350).EXISTS);\nvar uncurryThis = __webpack_require__(79504);\nvar defineBuiltInAccessor = __webpack_require__(62106);\n\nvar FunctionPrototype = Function.prototype;\nvar functionToString = uncurryThis(FunctionPrototype.toString);\nvar nameRE = /function\\b(?:\\s|\\/\\*[\\S\\s]*?\\*\\/|\\/\\/[^\\n\\r]*[\\n\\r]+)*([^\\s(/]*)/;\nvar regExpExec = uncurryThis(nameRE.exec);\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !FUNCTION_NAME_EXISTS) {\n  defineBuiltInAccessor(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return regExpExec(nameRE, functionToString(this))[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.function.name.js?")},62062:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar $map = (__webpack_require__(59213).map);\nvar arrayMethodHasSpeciesSupport = __webpack_require__(70597);\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n\n// `Array.prototype.map` method\n// https://tc39.es/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array.map.js?")},62106:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar makeBuiltIn = __webpack_require__(50283);\nvar defineProperty = __webpack_require__(24913);\n\nmodule.exports = function (target, name, descriptor) {\n  if (descriptor.get) makeBuiltIn(descriptor.get, name, { getter: true });\n  if (descriptor.set) makeBuiltIn(descriptor.set, name, { setter: true });\n  return defineProperty.f(target, name, descriptor);\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/define-built-in-accessor.js?")},62337:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar uncurryThis = __webpack_require__(79504);\nvar toIntegerOrInfinity = __webpack_require__(91291);\nvar thisNumberValue = __webpack_require__(31240);\nvar $repeat = __webpack_require__(72333);\nvar log10 = __webpack_require__(49340);\nvar fails = __webpack_require__(79039);\n\nvar $RangeError = RangeError;\nvar $String = String;\nvar $isFinite = isFinite;\nvar abs = Math.abs;\nvar floor = Math.floor;\nvar pow = Math.pow;\nvar round = Math.round;\nvar nativeToExponential = uncurryThis(1.0.toExponential);\nvar repeat = uncurryThis($repeat);\nvar stringSlice = uncurryThis(''.slice);\n\n// Edge 17-\nvar ROUNDS_PROPERLY = nativeToExponential(-6.9e-11, 4) === '-6.9000e-11'\n  // IE11- && Edge 14-\n  && nativeToExponential(1.255, 2) === '1.25e+0'\n  // FF86-, V8 ~ Chrome 49-50\n  && nativeToExponential(12345, 3) === '1.235e+4'\n  // FF86-, V8 ~ Chrome 49-50\n  && nativeToExponential(25, 0) === '3e+1';\n\n// IE8-\nvar throwsOnInfinityFraction = function () {\n  return fails(function () {\n    nativeToExponential(1, Infinity);\n  }) && fails(function () {\n    nativeToExponential(1, -Infinity);\n  });\n};\n\n// Safari <11 && FF <50\nvar properNonFiniteThisCheck = function () {\n  return !fails(function () {\n    nativeToExponential(Infinity, Infinity);\n    nativeToExponential(NaN, Infinity);\n  });\n};\n\nvar FORCED = !ROUNDS_PROPERLY || !throwsOnInfinityFraction() || !properNonFiniteThisCheck();\n\n// `Number.prototype.toExponential` method\n// https://tc39.es/ecma262/#sec-number.prototype.toexponential\n$({ target: 'Number', proto: true, forced: FORCED }, {\n  toExponential: function toExponential(fractionDigits) {\n    var x = thisNumberValue(this);\n    if (fractionDigits === undefined) return nativeToExponential(x);\n    var f = toIntegerOrInfinity(fractionDigits);\n    if (!$isFinite(x)) return String(x);\n    // TODO: ES2018 increased the maximum number of fraction digits to 100, need to improve the implementation\n    if (f < 0 || f > 20) throw new $RangeError('Incorrect fraction digits');\n    if (ROUNDS_PROPERLY) return nativeToExponential(x, f);\n    var s = '';\n    var m, e, c, d;\n    if (x < 0) {\n      s = '-';\n      x = -x;\n    }\n    if (x === 0) {\n      e = 0;\n      m = repeat('0', f + 1);\n    } else {\n      // this block is based on https://gist.github.com/SheetJSDev/1100ad56b9f856c95299ed0e068eea08\n      // TODO: improve accuracy with big fraction digits\n      var l = log10(x);\n      e = floor(l);\n      var w = pow(10, e - f);\n      var n = round(x / w);\n      if (2 * x >= (2 * n + 1) * w) {\n        n += 1;\n      }\n      if (n >= pow(10, f + 1)) {\n        n /= 10;\n        e += 1;\n      }\n      m = $String(n);\n    }\n    if (f !== 0) {\n      m = stringSlice(m, 0, 1) + '.' + stringSlice(m, 1);\n    }\n    if (e === 0) {\n      c = '+';\n      d = '0';\n    } else {\n      c = e > 0 ? '+' : '-';\n      d = $String(abs(e));\n    }\n    m += 'e' + c + d;\n    return s + m;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.number.to-exponential.js?")},62480:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(55081);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.global-this.js?")},62529:module=>{"use strict";eval("\n// `CreateIterResultObject` abstract operation\n// https://tc39.es/ecma262/#sec-createiterresultobject\nmodule.exports = function (value, done) {\n  return { value: value, done: done };\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/create-iter-result-object.js?")},62953:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar globalThis = __webpack_require__(44576);\nvar DOMIterables = __webpack_require__(67400);\nvar DOMTokenListPrototype = __webpack_require__(79296);\nvar ArrayIteratorMethods = __webpack_require__(23792);\nvar createNonEnumerableProperty = __webpack_require__(66699);\nvar setToStringTag = __webpack_require__(10687);\nvar wellKnownSymbol = __webpack_require__(78227);\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar ArrayValues = ArrayIteratorMethods.values;\n\nvar handlePrototype = function (CollectionPrototype, COLLECTION_NAME) {\n  if (CollectionPrototype) {\n    // some Chrome versions have non-configurable methods on DOMTokenList\n    if (CollectionPrototype[ITERATOR] !== ArrayValues) try {\n      createNonEnumerableProperty(CollectionPrototype, ITERATOR, ArrayValues);\n    } catch (error) {\n      CollectionPrototype[ITERATOR] = ArrayValues;\n    }\n    setToStringTag(CollectionPrototype, COLLECTION_NAME, true);\n    if (DOMIterables[COLLECTION_NAME]) for (var METHOD_NAME in ArrayIteratorMethods) {\n      // some Chrome versions have non-configurable methods on DOMTokenList\n      if (CollectionPrototype[METHOD_NAME] !== ArrayIteratorMethods[METHOD_NAME]) try {\n        createNonEnumerableProperty(CollectionPrototype, METHOD_NAME, ArrayIteratorMethods[METHOD_NAME]);\n      } catch (error) {\n        CollectionPrototype[METHOD_NAME] = ArrayIteratorMethods[METHOD_NAME];\n      }\n    }\n  }\n};\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  handlePrototype(globalThis[COLLECTION_NAME] && globalThis[COLLECTION_NAME].prototype, COLLECTION_NAME);\n}\n\nhandlePrototype(DOMTokenListPrototype, 'DOMTokenList');\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/web.dom-collections.iterator.js?")},63463:module=>{"use strict";eval("\nvar $TypeError = TypeError;\n\nmodule.exports = function (argument) {\n  if (typeof argument == 'string') return argument;\n  throw new $TypeError('Argument is not a string');\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/a-string.js?")},63548:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar DESCRIPTORS = __webpack_require__(43724);\nvar defineBuiltInAccessor = __webpack_require__(62106);\nvar isObject = __webpack_require__(20034);\nvar isPossiblePrototype = __webpack_require__(13925);\nvar toObject = __webpack_require__(48981);\nvar requireObjectCoercible = __webpack_require__(67750);\n\n// eslint-disable-next-line es/no-object-getprototypeof -- safe\nvar getPrototypeOf = Object.getPrototypeOf;\n// eslint-disable-next-line es/no-object-setprototypeof -- safe\nvar setPrototypeOf = Object.setPrototypeOf;\nvar ObjectPrototype = Object.prototype;\nvar PROTO = '__proto__';\n\n// `Object.prototype.__proto__` accessor\n// https://tc39.es/ecma262/#sec-object.prototype.__proto__\nif (DESCRIPTORS && getPrototypeOf && setPrototypeOf && !(PROTO in ObjectPrototype)) try {\n  defineBuiltInAccessor(ObjectPrototype, PROTO, {\n    configurable: true,\n    get: function __proto__() {\n      return getPrototypeOf(toObject(this));\n    },\n    set: function __proto__(proto) {\n      var O = requireObjectCoercible(this);\n      if (isPossiblePrototype(proto) && isObject(O)) {\n        setPrototypeOf(O, proto);\n      }\n    }\n  });\n} catch (error) { /* empty */ }\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.object.proto.js?")},64117:module=>{"use strict";eval("\n// we can't use just `it == null` since of `document.all` special case\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot-aec\nmodule.exports = function (it) {\n  return it === null || it === undefined;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/is-null-or-undefined.js?")},64346:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar isArray = __webpack_require__(34376);\n\n// `Array.isArray` method\n// https://tc39.es/ecma262/#sec-array.isarray\n$({ target: 'Array', stat: true }, {\n  isArray: isArray\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array.is-array.js?")},64444:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar sign = __webpack_require__(77782);\n\nvar abs = Math.abs;\nvar pow = Math.pow;\n\n// `Math.cbrt` method\n// https://tc39.es/ecma262/#sec-math.cbrt\n$({ target: 'Math', stat: true }, {\n  cbrt: function cbrt(x) {\n    var n = +x;\n    return sign(n) * pow(abs(n), 1 / 3);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.math.cbrt.js?")},64449:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar aSet = __webpack_require__(97080);\nvar has = (__webpack_require__(94402).has);\nvar size = __webpack_require__(25170);\nvar getSetRecord = __webpack_require__(83789);\nvar iterateSet = __webpack_require__(38469);\nvar iterateSimple = __webpack_require__(40507);\nvar iteratorClose = __webpack_require__(9539);\n\n// `Set.prototype.isDisjointFrom` method\n// https://tc39.github.io/proposal-set-methods/#Set.prototype.isDisjointFrom\nmodule.exports = function isDisjointFrom(other) {\n  var O = aSet(this);\n  var otherRec = getSetRecord(other);\n  if (size(O) <= otherRec.size) return iterateSet(O, function (e) {\n    if (otherRec.includes(e)) return false;\n  }, true) !== false;\n  var iterator = otherRec.getIterator();\n  return iterateSimple(iterator, function (e) {\n    if (has(O, e)) return iteratorClose(iterator, 'normal', false);\n  }) !== false;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/set-is-disjoint-from.js?")},64601:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\n\n// `Number.MAX_SAFE_INTEGER` constant\n// https://tc39.es/ecma262/#sec-number.max_safe_integer\n$({ target: 'Number', stat: true, nonConfigurable: true, nonWritable: true }, {\n  MAX_SAFE_INTEGER: 0x1FFFFFFFFFFFFF\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.number.max-safe-integer.js?")},64673:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// https://github.com/tc39/proposal-promise-with-resolvers\n__webpack_require__(43799);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/proposals/promise-with-resolvers.js?")},64743:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(29314);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.iterator.drop.js?")},64979:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar globalThis = __webpack_require__(44576);\nvar getBuiltIn = __webpack_require__(97751);\nvar createPropertyDescriptor = __webpack_require__(6980);\nvar defineProperty = (__webpack_require__(24913).f);\nvar hasOwn = __webpack_require__(39297);\nvar anInstance = __webpack_require__(90679);\nvar inheritIfRequired = __webpack_require__(23167);\nvar normalizeStringArgument = __webpack_require__(32603);\nvar DOMExceptionConstants = __webpack_require__(55002);\nvar clearErrorStack = __webpack_require__(38574);\nvar DESCRIPTORS = __webpack_require__(43724);\nvar IS_PURE = __webpack_require__(96395);\n\nvar DOM_EXCEPTION = 'DOMException';\nvar Error = getBuiltIn('Error');\nvar NativeDOMException = getBuiltIn(DOM_EXCEPTION);\n\nvar $DOMException = function DOMException() {\n  anInstance(this, DOMExceptionPrototype);\n  var argumentsLength = arguments.length;\n  var message = normalizeStringArgument(argumentsLength < 1 ? undefined : arguments[0]);\n  var name = normalizeStringArgument(argumentsLength < 2 ? undefined : arguments[1], 'Error');\n  var that = new NativeDOMException(message, name);\n  var error = new Error(message);\n  error.name = DOM_EXCEPTION;\n  defineProperty(that, 'stack', createPropertyDescriptor(1, clearErrorStack(error.stack, 1)));\n  inheritIfRequired(that, this, $DOMException);\n  return that;\n};\n\nvar DOMExceptionPrototype = $DOMException.prototype = NativeDOMException.prototype;\n\nvar ERROR_HAS_STACK = 'stack' in new Error(DOM_EXCEPTION);\nvar DOM_EXCEPTION_HAS_STACK = 'stack' in new NativeDOMException(1, 2);\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar descriptor = NativeDOMException && DESCRIPTORS && Object.getOwnPropertyDescriptor(globalThis, DOM_EXCEPTION);\n\n// Bun ~ 0.1.1 DOMException have incorrect descriptor and we can't redefine it\n// https://github.com/Jarred-Sumner/bun/issues/399\nvar BUGGY_DESCRIPTOR = !!descriptor && !(descriptor.writable && descriptor.configurable);\n\nvar FORCED_CONSTRUCTOR = ERROR_HAS_STACK && !BUGGY_DESCRIPTOR && !DOM_EXCEPTION_HAS_STACK;\n\n// `DOMException` constructor patch for `.stack` where it's required\n// https://webidl.spec.whatwg.org/#es-DOMException-specialness\n$({ global: true, constructor: true, forced: IS_PURE || FORCED_CONSTRUCTOR }, { // TODO: fix export logic\n  DOMException: FORCED_CONSTRUCTOR ? $DOMException : NativeDOMException\n});\n\nvar PolyfilledDOMException = getBuiltIn(DOM_EXCEPTION);\nvar PolyfilledDOMExceptionPrototype = PolyfilledDOMException.prototype;\n\nif (PolyfilledDOMExceptionPrototype.constructor !== PolyfilledDOMException) {\n  if (!IS_PURE) {\n    defineProperty(PolyfilledDOMExceptionPrototype, 'constructor', createPropertyDescriptor(1, PolyfilledDOMException));\n  }\n\n  for (var key in DOMExceptionConstants) if (hasOwn(DOMExceptionConstants, key)) {\n    var constant = DOMExceptionConstants[key];\n    var constantName = constant.s;\n    if (!hasOwn(PolyfilledDOMException, constantName)) {\n      defineProperty(PolyfilledDOMException, constantName, createPropertyDescriptor(6, constant.c));\n    }\n  }\n}\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/web.dom-exception.stack.js?")},65070:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar expm1 = __webpack_require__(53250);\n\n// `Math.expm1` method\n// https://tc39.es/ecma262/#sec-math.expm1\n// eslint-disable-next-line es/no-math-expm1 -- required for testing\n$({ target: 'Math', stat: true, forced: expm1 !== Math.expm1 }, { expm1: expm1 });\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.math.expm1.js?")},65746:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar FREEZING = __webpack_require__(92744);\nvar globalThis = __webpack_require__(44576);\nvar uncurryThis = __webpack_require__(79504);\nvar defineBuiltIns = __webpack_require__(56279);\nvar InternalMetadataModule = __webpack_require__(3451);\nvar collection = __webpack_require__(16468);\nvar collectionWeak = __webpack_require__(91625);\nvar isObject = __webpack_require__(20034);\nvar enforceInternalState = (__webpack_require__(91181).enforce);\nvar fails = __webpack_require__(79039);\nvar NATIVE_WEAK_MAP = __webpack_require__(58622);\n\nvar $Object = Object;\n// eslint-disable-next-line es/no-array-isarray -- safe\nvar isArray = Array.isArray;\n// eslint-disable-next-line es/no-object-isextensible -- safe\nvar isExtensible = $Object.isExtensible;\n// eslint-disable-next-line es/no-object-isfrozen -- safe\nvar isFrozen = $Object.isFrozen;\n// eslint-disable-next-line es/no-object-issealed -- safe\nvar isSealed = $Object.isSealed;\n// eslint-disable-next-line es/no-object-freeze -- safe\nvar freeze = $Object.freeze;\n// eslint-disable-next-line es/no-object-seal -- safe\nvar seal = $Object.seal;\n\nvar IS_IE11 = !globalThis.ActiveXObject && 'ActiveXObject' in globalThis;\nvar InternalWeakMap;\n\nvar wrapper = function (init) {\n  return function WeakMap() {\n    return init(this, arguments.length ? arguments[0] : undefined);\n  };\n};\n\n// `WeakMap` constructor\n// https://tc39.es/ecma262/#sec-weakmap-constructor\nvar $WeakMap = collection('WeakMap', wrapper, collectionWeak);\nvar WeakMapPrototype = $WeakMap.prototype;\nvar nativeSet = uncurryThis(WeakMapPrototype.set);\n\n// Chakra Edge bug: adding frozen arrays to WeakMap unfreeze them\nvar hasMSEdgeFreezingBug = function () {\n  return FREEZING && fails(function () {\n    var frozenArray = freeze([]);\n    nativeSet(new $WeakMap(), frozenArray, 1);\n    return !isFrozen(frozenArray);\n  });\n};\n\n// IE11 WeakMap frozen keys fix\n// We can't use feature detection because it crash some old IE builds\n// https://github.com/zloirock/core-js/issues/485\nif (NATIVE_WEAK_MAP) if (IS_IE11) {\n  InternalWeakMap = collectionWeak.getConstructor(wrapper, 'WeakMap', true);\n  InternalMetadataModule.enable();\n  var nativeDelete = uncurryThis(WeakMapPrototype['delete']);\n  var nativeHas = uncurryThis(WeakMapPrototype.has);\n  var nativeGet = uncurryThis(WeakMapPrototype.get);\n  defineBuiltIns(WeakMapPrototype, {\n    'delete': function (key) {\n      if (isObject(key) && !isExtensible(key)) {\n        var state = enforceInternalState(this);\n        if (!state.frozen) state.frozen = new InternalWeakMap();\n        return nativeDelete(this, key) || state.frozen['delete'](key);\n      } return nativeDelete(this, key);\n    },\n    has: function has(key) {\n      if (isObject(key) && !isExtensible(key)) {\n        var state = enforceInternalState(this);\n        if (!state.frozen) state.frozen = new InternalWeakMap();\n        return nativeHas(this, key) || state.frozen.has(key);\n      } return nativeHas(this, key);\n    },\n    get: function get(key) {\n      if (isObject(key) && !isExtensible(key)) {\n        var state = enforceInternalState(this);\n        if (!state.frozen) state.frozen = new InternalWeakMap();\n        return nativeHas(this, key) ? nativeGet(this, key) : state.frozen.get(key);\n      } return nativeGet(this, key);\n    },\n    set: function set(key, value) {\n      if (isObject(key) && !isExtensible(key)) {\n        var state = enforceInternalState(this);\n        if (!state.frozen) state.frozen = new InternalWeakMap();\n        nativeHas(this, key) ? nativeSet(this, key, value) : state.frozen.set(key, value);\n      } else nativeSet(this, key, value);\n      return this;\n    }\n  });\n// Chakra Edge frozen keys fix\n} else if (hasMSEdgeFreezingBug()) {\n  defineBuiltIns(WeakMapPrototype, {\n    set: function set(key, value) {\n      var arrayIntegrityLevel;\n      if (isArray(key)) {\n        if (isFrozen(key)) arrayIntegrityLevel = freeze;\n        else if (isSealed(key)) arrayIntegrityLevel = seal;\n      }\n      nativeSet(this, key, value);\n      if (arrayIntegrityLevel) arrayIntegrityLevel(key);\n      return this;\n    }\n  });\n}\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.weak-map.constructor.js?")},65810:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar isObject = __webpack_require__(20034);\nvar getInternalState = (__webpack_require__(91181).get);\n\nmodule.exports = function isRawJSON(O) {\n  if (!isObject(O)) return false;\n  var state = getInternalState(O);\n  return !!state && state.type === 'RawJSON';\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/is-raw-json.js?")},66090:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(77691);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.object.group-by.js?")},66119:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar shared = __webpack_require__(25745);\nvar uid = __webpack_require__(33392);\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/shared-key.js?")},66197:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(31698);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.set.union.v2.js?")},66346:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar globalThis = __webpack_require__(44576);\nvar uncurryThis = __webpack_require__(79504);\nvar DESCRIPTORS = __webpack_require__(43724);\nvar NATIVE_ARRAY_BUFFER = __webpack_require__(77811);\nvar FunctionName = __webpack_require__(10350);\nvar createNonEnumerableProperty = __webpack_require__(66699);\nvar defineBuiltInAccessor = __webpack_require__(62106);\nvar defineBuiltIns = __webpack_require__(56279);\nvar fails = __webpack_require__(79039);\nvar anInstance = __webpack_require__(90679);\nvar toIntegerOrInfinity = __webpack_require__(91291);\nvar toLength = __webpack_require__(18014);\nvar toIndex = __webpack_require__(57696);\nvar fround = __webpack_require__(15617);\nvar IEEE754 = __webpack_require__(88490);\nvar getPrototypeOf = __webpack_require__(42787);\nvar setPrototypeOf = __webpack_require__(52967);\nvar arrayFill = __webpack_require__(84373);\nvar arraySlice = __webpack_require__(67680);\nvar inheritIfRequired = __webpack_require__(23167);\nvar copyConstructorProperties = __webpack_require__(77740);\nvar setToStringTag = __webpack_require__(10687);\nvar InternalStateModule = __webpack_require__(91181);\n\nvar PROPER_FUNCTION_NAME = FunctionName.PROPER;\nvar CONFIGURABLE_FUNCTION_NAME = FunctionName.CONFIGURABLE;\nvar ARRAY_BUFFER = 'ArrayBuffer';\nvar DATA_VIEW = 'DataView';\nvar PROTOTYPE = 'prototype';\nvar WRONG_LENGTH = 'Wrong length';\nvar WRONG_INDEX = 'Wrong index';\nvar getInternalArrayBufferState = InternalStateModule.getterFor(ARRAY_BUFFER);\nvar getInternalDataViewState = InternalStateModule.getterFor(DATA_VIEW);\nvar setInternalState = InternalStateModule.set;\nvar NativeArrayBuffer = globalThis[ARRAY_BUFFER];\nvar $ArrayBuffer = NativeArrayBuffer;\nvar ArrayBufferPrototype = $ArrayBuffer && $ArrayBuffer[PROTOTYPE];\nvar $DataView = globalThis[DATA_VIEW];\nvar DataViewPrototype = $DataView && $DataView[PROTOTYPE];\nvar ObjectPrototype = Object.prototype;\nvar Array = globalThis.Array;\nvar RangeError = globalThis.RangeError;\nvar fill = uncurryThis(arrayFill);\nvar reverse = uncurryThis([].reverse);\n\nvar packIEEE754 = IEEE754.pack;\nvar unpackIEEE754 = IEEE754.unpack;\n\nvar packInt8 = function (number) {\n  return [number & 0xFF];\n};\n\nvar packInt16 = function (number) {\n  return [number & 0xFF, number >> 8 & 0xFF];\n};\n\nvar packInt32 = function (number) {\n  return [number & 0xFF, number >> 8 & 0xFF, number >> 16 & 0xFF, number >> 24 & 0xFF];\n};\n\nvar unpackInt32 = function (buffer) {\n  return buffer[3] << 24 | buffer[2] << 16 | buffer[1] << 8 | buffer[0];\n};\n\nvar packFloat32 = function (number) {\n  return packIEEE754(fround(number), 23, 4);\n};\n\nvar packFloat64 = function (number) {\n  return packIEEE754(number, 52, 8);\n};\n\nvar addGetter = function (Constructor, key, getInternalState) {\n  defineBuiltInAccessor(Constructor[PROTOTYPE], key, {\n    configurable: true,\n    get: function () {\n      return getInternalState(this)[key];\n    }\n  });\n};\n\nvar get = function (view, count, index, isLittleEndian) {\n  var store = getInternalDataViewState(view);\n  var intIndex = toIndex(index);\n  var boolIsLittleEndian = !!isLittleEndian;\n  if (intIndex + count > store.byteLength) throw new RangeError(WRONG_INDEX);\n  var bytes = store.bytes;\n  var start = intIndex + store.byteOffset;\n  var pack = arraySlice(bytes, start, start + count);\n  return boolIsLittleEndian ? pack : reverse(pack);\n};\n\nvar set = function (view, count, index, conversion, value, isLittleEndian) {\n  var store = getInternalDataViewState(view);\n  var intIndex = toIndex(index);\n  var pack = conversion(+value);\n  var boolIsLittleEndian = !!isLittleEndian;\n  if (intIndex + count > store.byteLength) throw new RangeError(WRONG_INDEX);\n  var bytes = store.bytes;\n  var start = intIndex + store.byteOffset;\n  for (var i = 0; i < count; i++) bytes[start + i] = pack[boolIsLittleEndian ? i : count - i - 1];\n};\n\nif (!NATIVE_ARRAY_BUFFER) {\n  $ArrayBuffer = function ArrayBuffer(length) {\n    anInstance(this, ArrayBufferPrototype);\n    var byteLength = toIndex(length);\n    setInternalState(this, {\n      type: ARRAY_BUFFER,\n      bytes: fill(Array(byteLength), 0),\n      byteLength: byteLength\n    });\n    if (!DESCRIPTORS) {\n      this.byteLength = byteLength;\n      this.detached = false;\n    }\n  };\n\n  ArrayBufferPrototype = $ArrayBuffer[PROTOTYPE];\n\n  $DataView = function DataView(buffer, byteOffset, byteLength) {\n    anInstance(this, DataViewPrototype);\n    anInstance(buffer, ArrayBufferPrototype);\n    var bufferState = getInternalArrayBufferState(buffer);\n    var bufferLength = bufferState.byteLength;\n    var offset = toIntegerOrInfinity(byteOffset);\n    if (offset < 0 || offset > bufferLength) throw new RangeError('Wrong offset');\n    byteLength = byteLength === undefined ? bufferLength - offset : toLength(byteLength);\n    if (offset + byteLength > bufferLength) throw new RangeError(WRONG_LENGTH);\n    setInternalState(this, {\n      type: DATA_VIEW,\n      buffer: buffer,\n      byteLength: byteLength,\n      byteOffset: offset,\n      bytes: bufferState.bytes\n    });\n    if (!DESCRIPTORS) {\n      this.buffer = buffer;\n      this.byteLength = byteLength;\n      this.byteOffset = offset;\n    }\n  };\n\n  DataViewPrototype = $DataView[PROTOTYPE];\n\n  if (DESCRIPTORS) {\n    addGetter($ArrayBuffer, 'byteLength', getInternalArrayBufferState);\n    addGetter($DataView, 'buffer', getInternalDataViewState);\n    addGetter($DataView, 'byteLength', getInternalDataViewState);\n    addGetter($DataView, 'byteOffset', getInternalDataViewState);\n  }\n\n  defineBuiltIns(DataViewPrototype, {\n    getInt8: function getInt8(byteOffset) {\n      return get(this, 1, byteOffset)[0] << 24 >> 24;\n    },\n    getUint8: function getUint8(byteOffset) {\n      return get(this, 1, byteOffset)[0];\n    },\n    getInt16: function getInt16(byteOffset /* , littleEndian */) {\n      var bytes = get(this, 2, byteOffset, arguments.length > 1 ? arguments[1] : false);\n      return (bytes[1] << 8 | bytes[0]) << 16 >> 16;\n    },\n    getUint16: function getUint16(byteOffset /* , littleEndian */) {\n      var bytes = get(this, 2, byteOffset, arguments.length > 1 ? arguments[1] : false);\n      return bytes[1] << 8 | bytes[0];\n    },\n    getInt32: function getInt32(byteOffset /* , littleEndian */) {\n      return unpackInt32(get(this, 4, byteOffset, arguments.length > 1 ? arguments[1] : false));\n    },\n    getUint32: function getUint32(byteOffset /* , littleEndian */) {\n      return unpackInt32(get(this, 4, byteOffset, arguments.length > 1 ? arguments[1] : false)) >>> 0;\n    },\n    getFloat32: function getFloat32(byteOffset /* , littleEndian */) {\n      return unpackIEEE754(get(this, 4, byteOffset, arguments.length > 1 ? arguments[1] : false), 23);\n    },\n    getFloat64: function getFloat64(byteOffset /* , littleEndian */) {\n      return unpackIEEE754(get(this, 8, byteOffset, arguments.length > 1 ? arguments[1] : false), 52);\n    },\n    setInt8: function setInt8(byteOffset, value) {\n      set(this, 1, byteOffset, packInt8, value);\n    },\n    setUint8: function setUint8(byteOffset, value) {\n      set(this, 1, byteOffset, packInt8, value);\n    },\n    setInt16: function setInt16(byteOffset, value /* , littleEndian */) {\n      set(this, 2, byteOffset, packInt16, value, arguments.length > 2 ? arguments[2] : false);\n    },\n    setUint16: function setUint16(byteOffset, value /* , littleEndian */) {\n      set(this, 2, byteOffset, packInt16, value, arguments.length > 2 ? arguments[2] : false);\n    },\n    setInt32: function setInt32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packInt32, value, arguments.length > 2 ? arguments[2] : false);\n    },\n    setUint32: function setUint32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packInt32, value, arguments.length > 2 ? arguments[2] : false);\n    },\n    setFloat32: function setFloat32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packFloat32, value, arguments.length > 2 ? arguments[2] : false);\n    },\n    setFloat64: function setFloat64(byteOffset, value /* , littleEndian */) {\n      set(this, 8, byteOffset, packFloat64, value, arguments.length > 2 ? arguments[2] : false);\n    }\n  });\n} else {\n  var INCORRECT_ARRAY_BUFFER_NAME = PROPER_FUNCTION_NAME && NativeArrayBuffer.name !== ARRAY_BUFFER;\n  /* eslint-disable no-new, sonarjs/inconsistent-function-call -- required for testing */\n  if (!fails(function () {\n    NativeArrayBuffer(1);\n  }) || !fails(function () {\n    new NativeArrayBuffer(-1);\n  }) || fails(function () {\n    new NativeArrayBuffer();\n    new NativeArrayBuffer(1.5);\n    new NativeArrayBuffer(NaN);\n    return NativeArrayBuffer.length !== 1 || INCORRECT_ARRAY_BUFFER_NAME && !CONFIGURABLE_FUNCTION_NAME;\n  })) {\n    /* eslint-enable no-new, sonarjs/inconsistent-function-call -- required for testing */\n    $ArrayBuffer = function ArrayBuffer(length) {\n      anInstance(this, ArrayBufferPrototype);\n      return inheritIfRequired(new NativeArrayBuffer(toIndex(length)), this, $ArrayBuffer);\n    };\n\n    $ArrayBuffer[PROTOTYPE] = ArrayBufferPrototype;\n\n    ArrayBufferPrototype.constructor = $ArrayBuffer;\n\n    copyConstructorProperties($ArrayBuffer, NativeArrayBuffer);\n  } else if (INCORRECT_ARRAY_BUFFER_NAME && CONFIGURABLE_FUNCTION_NAME) {\n    createNonEnumerableProperty(NativeArrayBuffer, 'name', ARRAY_BUFFER);\n  }\n\n  // WebKit bug - the same parent prototype for typed arrays and data view\n  if (setPrototypeOf && getPrototypeOf(DataViewPrototype) !== ObjectPrototype) {\n    setPrototypeOf(DataViewPrototype, ObjectPrototype);\n  }\n\n  // iOS Safari 7.x bug\n  var testView = new $DataView(new $ArrayBuffer(2));\n  var $setInt8 = uncurryThis(DataViewPrototype.setInt8);\n  testView.setInt8(0, 2147483648);\n  testView.setInt8(1, 2147483649);\n  if (testView.getInt8(0) || !testView.getInt8(1)) defineBuiltIns(DataViewPrototype, {\n    setInt8: function setInt8(byteOffset, value) {\n      $setInt8(this, byteOffset, value << 24 >> 24);\n    },\n    setUint8: function setUint8(byteOffset, value) {\n      $setInt8(this, byteOffset, value << 24 >> 24);\n    }\n  }, { unsafe: true });\n}\n\nsetToStringTag($ArrayBuffer, ARRAY_BUFFER);\nsetToStringTag($DataView, DATA_VIEW);\n\nmodule.exports = {\n  ArrayBuffer: $ArrayBuffer,\n  DataView: $DataView\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/array-buffer.js?")},66412:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar defineWellKnownSymbol = __webpack_require__(70511);\n\n// `Symbol.asyncIterator` well-known symbol\n// https://tc39.es/ecma262/#sec-symbol.asynciterator\ndefineWellKnownSymbol('asyncIterator');\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.symbol.async-iterator.js?")},66557:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// https://github.com/tc39/proposal-explicit-resource-management\nvar $ = __webpack_require__(46518);\nvar DESCRIPTORS = __webpack_require__(43724);\nvar getBuiltIn = __webpack_require__(97751);\nvar aCallable = __webpack_require__(79306);\nvar anInstance = __webpack_require__(90679);\nvar defineBuiltIn = __webpack_require__(36840);\nvar defineBuiltIns = __webpack_require__(56279);\nvar defineBuiltInAccessor = __webpack_require__(62106);\nvar wellKnownSymbol = __webpack_require__(78227);\nvar InternalStateModule = __webpack_require__(91181);\nvar addDisposableResource = __webpack_require__(91021);\n\nvar SuppressedError = getBuiltIn('SuppressedError');\nvar $ReferenceError = ReferenceError;\n\nvar DISPOSE = wellKnownSymbol('dispose');\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\n\nvar DISPOSABLE_STACK = 'DisposableStack';\nvar setInternalState = InternalStateModule.set;\nvar getDisposableStackInternalState = InternalStateModule.getterFor(DISPOSABLE_STACK);\n\nvar HINT = 'sync-dispose';\nvar DISPOSED = 'disposed';\nvar PENDING = 'pending';\n\nvar getPendingDisposableStackInternalState = function (stack) {\n  var internalState = getDisposableStackInternalState(stack);\n  if (internalState.state === DISPOSED) throw new $ReferenceError(DISPOSABLE_STACK + ' already disposed');\n  return internalState;\n};\n\nvar $DisposableStack = function DisposableStack() {\n  setInternalState(anInstance(this, DisposableStackPrototype), {\n    type: DISPOSABLE_STACK,\n    state: PENDING,\n    stack: []\n  });\n\n  if (!DESCRIPTORS) this.disposed = false;\n};\n\nvar DisposableStackPrototype = $DisposableStack.prototype;\n\ndefineBuiltIns(DisposableStackPrototype, {\n  dispose: function dispose() {\n    var internalState = getDisposableStackInternalState(this);\n    if (internalState.state === DISPOSED) return;\n    internalState.state = DISPOSED;\n    if (!DESCRIPTORS) this.disposed = true;\n    var stack = internalState.stack;\n    var i = stack.length;\n    var thrown = false;\n    var suppressed;\n    while (i) {\n      var disposeMethod = stack[--i];\n      stack[i] = null;\n      try {\n        disposeMethod();\n      } catch (errorResult) {\n        if (thrown) {\n          suppressed = new SuppressedError(errorResult, suppressed);\n        } else {\n          thrown = true;\n          suppressed = errorResult;\n        }\n      }\n    }\n    internalState.stack = null;\n    if (thrown) throw suppressed;\n  },\n  use: function use(value) {\n    addDisposableResource(getPendingDisposableStackInternalState(this), value, HINT);\n    return value;\n  },\n  adopt: function adopt(value, onDispose) {\n    var internalState = getPendingDisposableStackInternalState(this);\n    aCallable(onDispose);\n    addDisposableResource(internalState, undefined, HINT, function () {\n      onDispose(value);\n    });\n    return value;\n  },\n  defer: function defer(onDispose) {\n    var internalState = getPendingDisposableStackInternalState(this);\n    aCallable(onDispose);\n    addDisposableResource(internalState, undefined, HINT, onDispose);\n  },\n  move: function move() {\n    var internalState = getPendingDisposableStackInternalState(this);\n    var newDisposableStack = new $DisposableStack();\n    getDisposableStackInternalState(newDisposableStack).stack = internalState.stack;\n    internalState.stack = [];\n    internalState.state = DISPOSED;\n    if (!DESCRIPTORS) this.disposed = true;\n    return newDisposableStack;\n  }\n});\n\nif (DESCRIPTORS) defineBuiltInAccessor(DisposableStackPrototype, 'disposed', {\n  configurable: true,\n  get: function disposed() {\n    return getDisposableStackInternalState(this).state === DISPOSED;\n  }\n});\n\ndefineBuiltIn(DisposableStackPrototype, DISPOSE, DisposableStackPrototype.dispose, { name: 'dispose' });\ndefineBuiltIn(DisposableStackPrototype, TO_STRING_TAG, DISPOSABLE_STACK, { nonWritable: true });\n\n$({ global: true, constructor: true }, {\n  DisposableStack: $DisposableStack\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.disposable-stack.constructor.js?")},66651:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar ArrayBufferViewCore = __webpack_require__(94644);\nvar $indexOf = (__webpack_require__(19617).indexOf);\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.indexOf` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.indexof\nexportTypedArrayMethod('indexOf', function indexOf(searchElement /* , fromIndex */) {\n  return $indexOf(aTypedArray(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.index-of.js?")},66699:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar DESCRIPTORS = __webpack_require__(43724);\nvar definePropertyModule = __webpack_require__(24913);\nvar createPropertyDescriptor = __webpack_require__(6980);\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/create-non-enumerable-property.js?")},66812:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar ArrayBufferViewCore = __webpack_require__(94644);\nvar apply = __webpack_require__(18745);\nvar $lastIndexOf = __webpack_require__(8379);\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.lastIndexOf` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.lastindexof\nexportTypedArrayMethod('lastIndexOf', function lastIndexOf(searchElement /* , fromIndex */) {\n  var length = arguments.length;\n  return apply($lastIndexOf, aTypedArray(this), length > 1 ? [searchElement, arguments[1]] : [searchElement]);\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.last-index-of.js?")},66933:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar uncurryThis = __webpack_require__(79504);\nvar isArray = __webpack_require__(34376);\nvar isCallable = __webpack_require__(94901);\nvar classof = __webpack_require__(22195);\nvar toString = __webpack_require__(655);\n\nvar push = uncurryThis([].push);\n\nmodule.exports = function (replacer) {\n  if (isCallable(replacer)) return replacer;\n  if (!isArray(replacer)) return;\n  var rawLength = replacer.length;\n  var keys = [];\n  for (var i = 0; i < rawLength; i++) {\n    var element = replacer[i];\n    if (typeof element == 'string') push(keys, element);\n    else if (typeof element == 'number' || classof(element) === 'Number' || classof(element) === 'String') push(keys, toString(element));\n  }\n  var keysLength = keys.length;\n  var root = true;\n  return function (key, value) {\n    if (root) {\n      root = false;\n      return value;\n    }\n    if (isArray(this)) return value;\n    for (var j = 0; j < keysLength; j++) if (keys[j] === key) return value;\n  };\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/get-json-replacer-function.js?")},67296:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar NATIVE_RAW_JSON = __webpack_require__(27819);\nvar isRawJSON = __webpack_require__(65810);\n\n// `JSON.parse` method\n// https://tc39.es/proposal-json-parse-with-source/#sec-json.israwjson\n// https://github.com/tc39/proposal-json-parse-with-source\n$({ target: 'JSON', stat: true, forced: !NATIVE_RAW_JSON }, {\n  isRawJSON: isRawJSON\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.json.is-raw-json.js?")},67302:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\nvar ArrayBufferViewCore = __webpack_require__(94644);\nvar lengthOfArrayLike = __webpack_require__(26198);\nvar isBigIntArray = __webpack_require__(18727);\nvar toAbsoluteIndex = __webpack_require__(35610);\nvar toBigInt = __webpack_require__(75854);\nvar toIntegerOrInfinity = __webpack_require__(91291);\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar getTypedArrayConstructor = ArrayBufferViewCore.getTypedArrayConstructor;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\nvar max = Math.max;\nvar min = Math.min;\n\n// `%TypedArray%.prototype.toSpliced` method\n// https://tc39.es/proposal-change-array-by-copy/#sec-%typedarray%.prototype.toSpliced\nexportTypedArrayMethod('toSpliced', function toSpliced(start, deleteCount /* , ...items */) {\n  var O = aTypedArray(this);\n  var C = getTypedArrayConstructor(O);\n  var len = lengthOfArrayLike(O);\n  var actualStart = toAbsoluteIndex(start, len);\n  var argumentsLength = arguments.length;\n  var k = 0;\n  var insertCount, actualDeleteCount, thisIsBigIntArray, convertedItems, value, newLen, A;\n  if (argumentsLength === 0) {\n    insertCount = actualDeleteCount = 0;\n  } else if (argumentsLength === 1) {\n    insertCount = 0;\n    actualDeleteCount = len - actualStart;\n  } else {\n    actualDeleteCount = min(max(toIntegerOrInfinity(deleteCount), 0), len - actualStart);\n    insertCount = argumentsLength - 2;\n    if (insertCount) {\n      convertedItems = new C(insertCount);\n      thisIsBigIntArray = isBigIntArray(convertedItems);\n      for (var i = 2; i < argumentsLength; i++) {\n        value = arguments[i];\n        // FF30- typed arrays doesn't properly convert objects to typed array values\n        convertedItems[i - 2] = thisIsBigIntArray ? toBigInt(value) : +value;\n      }\n    }\n  }\n  newLen = len + insertCount - actualDeleteCount;\n  A = new C(newLen);\n\n  for (; k < actualStart; k++) A[k] = O[k];\n  for (; k < actualStart + insertCount; k++) A[k] = convertedItems[k - actualStart];\n  for (; k < newLen; k++) A[k] = O[k + actualDeleteCount - insertCount];\n\n  return A;\n}, true);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.typed-array.to-spliced.js?")},67357:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar uncurryThis = __webpack_require__(79504);\nvar requireObjectCoercible = __webpack_require__(67750);\nvar toIntegerOrInfinity = __webpack_require__(91291);\nvar toString = __webpack_require__(655);\nvar fails = __webpack_require__(79039);\n\nvar charAt = uncurryThis(''.charAt);\n\nvar FORCED = fails(function () {\n  // eslint-disable-next-line es/no-string-prototype-at -- safe\n  return '𠮷'.at(-2) !== '\\uD842';\n});\n\n// `String.prototype.at` method\n// https://tc39.es/ecma262/#sec-string.prototype.at\n$({ target: 'String', proto: true, forced: FORCED }, {\n  at: function at(index) {\n    var S = toString(requireObjectCoercible(this));\n    var len = S.length;\n    var relativeIndex = toIntegerOrInfinity(index);\n    var k = relativeIndex >= 0 ? relativeIndex : len + relativeIndex;\n    return (k < 0 || k >= len) ? undefined : charAt(S, k);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.string.at-alternative.js?")},67394:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar globalThis = __webpack_require__(44576);\nvar uncurryThisAccessor = __webpack_require__(46706);\nvar classof = __webpack_require__(22195);\n\nvar ArrayBuffer = globalThis.ArrayBuffer;\nvar TypeError = globalThis.TypeError;\n\n// Includes\n// - Perform ? RequireInternalSlot(O, [[ArrayBufferData]]).\n// - If IsSharedArrayBuffer(O) is true, throw a TypeError exception.\nmodule.exports = ArrayBuffer && uncurryThisAccessor(ArrayBuffer.prototype, 'byteLength', 'get') || function (O) {\n  if (classof(O) !== 'ArrayBuffer') throw new TypeError('ArrayBuffer expected');\n  return O.byteLength;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/array-buffer-byte-length.js?")},67400:module=>{"use strict";eval("\n// iterable DOM collections\n// flag - `iterable` interface - 'entries', 'keys', 'values', 'forEach' methods\nmodule.exports = {\n  CSSRuleList: 0,\n  CSSStyleDeclaration: 0,\n  CSSValueList: 0,\n  ClientRectList: 0,\n  DOMRectList: 0,\n  DOMStringList: 0,\n  DOMTokenList: 1,\n  DataTransferItemList: 0,\n  FileList: 0,\n  HTMLAllCollection: 0,\n  HTMLCollection: 0,\n  HTMLFormElement: 0,\n  HTMLSelectElement: 0,\n  MediaList: 0,\n  MimeTypeArray: 0,\n  NamedNodeMap: 0,\n  NodeList: 1,\n  PaintRequestList: 0,\n  Plugin: 0,\n  PluginArray: 0,\n  SVGLengthList: 0,\n  SVGNumberList: 0,\n  SVGPathSegList: 0,\n  SVGPointList: 0,\n  SVGStringList: 0,\n  SVGTransformList: 0,\n  SourceBufferList: 0,\n  StyleSheetList: 0,\n  TextTrackCueList: 0,\n  TextTrackList: 0,\n  TouchList: 0\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/dom-iterables.js?")},67416:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar fails = __webpack_require__(79039);\nvar wellKnownSymbol = __webpack_require__(78227);\nvar DESCRIPTORS = __webpack_require__(43724);\nvar IS_PURE = __webpack_require__(96395);\n\nvar ITERATOR = wellKnownSymbol('iterator');\n\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line unicorn/relative-url-style -- required for testing\n  var url = new URL('b?a=1&b=2&c=3', 'https://a');\n  var params = url.searchParams;\n  var params2 = new URLSearchParams('a=1&a=2&b=3');\n  var result = '';\n  url.pathname = 'c%20d';\n  params.forEach(function (value, key) {\n    params['delete']('b');\n    result += key + value;\n  });\n  params2['delete']('a', 2);\n  // `undefined` case is a Chromium 117 bug\n  // https://bugs.chromium.org/p/v8/issues/detail?id=14222\n  params2['delete']('b', undefined);\n  return (IS_PURE && (!url.toJSON || !params2.has('a', 1) || params2.has('a', 2) || !params2.has('a', undefined) || params2.has('b')))\n    || (!params.size && (IS_PURE || !DESCRIPTORS))\n    || !params.sort\n    || url.href !== 'https://a/c%20d?a=1&c=3'\n    || params.get('c') !== '3'\n    || String(new URLSearchParams('?a=1')) !== 'a=1'\n    || !params[ITERATOR]\n    // throws in Edge\n    || new URL('https://a@b').username !== 'a'\n    || new URLSearchParams(new URLSearchParams('a=b')).get('a') !== 'b'\n    // not punycoded in Edge\n    || new URL('https://тест').host !== 'xn--e1aybc'\n    // not escaped in Chrome 62-\n    || new URL('https://a#б').hash !== '#%D0%B1'\n    // fails in Chrome 66-\n    || result !== 'a1c3'\n    // throws in Safari\n    || new URL('https://x', undefined).host !== 'x';\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/url-constructor-detection.js?")},67438:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar call = __webpack_require__(69565);\nvar uncurryThis = __webpack_require__(79504);\nvar requireObjectCoercible = __webpack_require__(67750);\nvar toString = __webpack_require__(655);\nvar fails = __webpack_require__(79039);\n\nvar $Array = Array;\nvar charAt = uncurryThis(''.charAt);\nvar charCodeAt = uncurryThis(''.charCodeAt);\nvar join = uncurryThis([].join);\n// eslint-disable-next-line es/no-string-prototype-towellformed -- safe\nvar $toWellFormed = ''.toWellFormed;\nvar REPLACEMENT_CHARACTER = '\\uFFFD';\n\n// Safari bug\nvar TO_STRING_CONVERSION_BUG = $toWellFormed && fails(function () {\n  return call($toWellFormed, 1) !== '1';\n});\n\n// `String.prototype.toWellFormed` method\n// https://tc39.es/ecma262/#sec-string.prototype.towellformed\n$({ target: 'String', proto: true, forced: TO_STRING_CONVERSION_BUG }, {\n  toWellFormed: function toWellFormed() {\n    var S = toString(requireObjectCoercible(this));\n    if (TO_STRING_CONVERSION_BUG) return call($toWellFormed, S);\n    var length = S.length;\n    var result = $Array(length);\n    for (var i = 0; i < length; i++) {\n      var charCode = charCodeAt(S, i);\n      // single UTF-16 code unit\n      if ((charCode & 0xF800) !== 0xD800) result[i] = charAt(S, i);\n      // unpaired surrogate\n      else if (charCode >= 0xDC00 || i + 1 >= length || (charCodeAt(S, i + 1) & 0xFC00) !== 0xDC00) result[i] = REPLACEMENT_CHARACTER;\n      // surrogate pair\n      else {\n        result[i] = charAt(S, i);\n        result[++i] = charAt(S, i);\n      }\n    } return join(result, '');\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.string.to-well-formed.js?")},67680:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar uncurryThis = __webpack_require__(79504);\n\nmodule.exports = uncurryThis([].slice);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/array-slice.js?")},67750:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval('\nvar isNullOrUndefined = __webpack_require__(64117);\n\nvar $TypeError = TypeError;\n\n// `RequireObjectCoercible` abstract operation\n// https://tc39.es/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (isNullOrUndefined(it)) throw new $TypeError("Can\'t call method on " + it);\n  return it;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/require-object-coercible.js?')},67787:module=>{"use strict";eval("\nvar log = Math.log;\nvar LN2 = Math.LN2;\n\n// `Math.log2` method\n// https://tc39.es/ecma262/#sec-math.log2\n// eslint-disable-next-line es/no-math-log2 -- safe\nmodule.exports = Math.log2 || function log2(x) {\n  return log(x) / LN2;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/math-log2.js?")},67945:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar DESCRIPTORS = __webpack_require__(43724);\nvar defineProperties = (__webpack_require__(96801).f);\n\n// `Object.defineProperties` method\n// https://tc39.es/ecma262/#sec-object.defineproperties\n// eslint-disable-next-line es/no-object-defineproperties -- safe\n$({ target: 'Object', stat: true, forced: Object.defineProperties !== defineProperties, sham: !DESCRIPTORS }, {\n  defineProperties: defineProperties\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.object.define-properties.js?")},67947:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar defineWellKnownSymbol = __webpack_require__(70511);\n\n// `Symbol.species` well-known symbol\n// https://tc39.es/ecma262/#sec-symbol.species\ndefineWellKnownSymbol('species');\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.symbol.species.js?")},67979:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar anObject = __webpack_require__(28551);\n\n// `RegExp.prototype.flags` getter implementation\n// https://tc39.es/ecma262/#sec-get-regexp.prototype.flags\nmodule.exports = function () {\n  var that = anObject(this);\n  var result = '';\n  if (that.hasIndices) result += 'd';\n  if (that.global) result += 'g';\n  if (that.ignoreCase) result += 'i';\n  if (that.multiline) result += 'm';\n  if (that.dotAll) result += 's';\n  if (that.unicode) result += 'u';\n  if (that.unicodeSets) result += 'v';\n  if (that.sticky) result += 'y';\n  return result;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/regexp-flags.js?")},68156:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar $padStart = (__webpack_require__(60533).start);\nvar WEBKIT_BUG = __webpack_require__(83063);\n\n// `String.prototype.padStart` method\n// https://tc39.es/ecma262/#sec-string.prototype.padstart\n$({ target: 'String', proto: true, forced: WEBKIT_BUG }, {\n  padStart: function padStart(maxLength /* , fillString = ' ' */) {\n    return $padStart(this, maxLength, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.string.pad-start.js?")},68183:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar uncurryThis = __webpack_require__(79504);\nvar toIntegerOrInfinity = __webpack_require__(91291);\nvar toString = __webpack_require__(655);\nvar requireObjectCoercible = __webpack_require__(67750);\n\nvar charAt = uncurryThis(''.charAt);\nvar charCodeAt = uncurryThis(''.charCodeAt);\nvar stringSlice = uncurryThis(''.slice);\n\nvar createMethod = function (CONVERT_TO_STRING) {\n  return function ($this, pos) {\n    var S = toString(requireObjectCoercible($this));\n    var position = toIntegerOrInfinity(pos);\n    var size = S.length;\n    var first, second;\n    if (position < 0 || position >= size) return CONVERT_TO_STRING ? '' : undefined;\n    first = charCodeAt(S, position);\n    return first < 0xD800 || first > 0xDBFF || position + 1 === size\n      || (second = charCodeAt(S, position + 1)) < 0xDC00 || second > 0xDFFF\n        ? CONVERT_TO_STRING\n          ? charAt(S, position)\n          : first\n        : CONVERT_TO_STRING\n          ? stringSlice(S, position, position + 2)\n          : (first - 0xD800 << 10) + (second - 0xDC00) + 0x10000;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.codePointAt` method\n  // https://tc39.es/ecma262/#sec-string.prototype.codepointat\n  codeAt: createMethod(false),\n  // `String.prototype.at` method\n  // https://github.com/mathiasbynens/String.prototype.at\n  charAt: createMethod(true)\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/string-multibyte.js?")},68750:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar aSet = __webpack_require__(97080);\nvar SetHelpers = __webpack_require__(94402);\nvar size = __webpack_require__(25170);\nvar getSetRecord = __webpack_require__(83789);\nvar iterateSet = __webpack_require__(38469);\nvar iterateSimple = __webpack_require__(40507);\n\nvar Set = SetHelpers.Set;\nvar add = SetHelpers.add;\nvar has = SetHelpers.has;\n\n// `Set.prototype.intersection` method\n// https://github.com/tc39/proposal-set-methods\nmodule.exports = function intersection(other) {\n  var O = aSet(this);\n  var otherRec = getSetRecord(other);\n  var result = new Set();\n\n  if (size(O) > otherRec.size) {\n    iterateSimple(otherRec.getIterator(), function (e) {\n      if (has(O, e)) add(result, e);\n    });\n  } else {\n    iterateSet(O, function (e) {\n      if (otherRec.includes(e)) add(result, e);\n    });\n  }\n\n  return result;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/set-intersection.js?")},69085:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar assign = __webpack_require__(44213);\n\n// `Object.assign` method\n// https://tc39.es/ecma262/#sec-object.assign\n// eslint-disable-next-line es/no-object-assign -- required for testing\n$({ target: 'Object', stat: true, arity: 2, forced: Object.assign !== assign }, {\n  assign: assign\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.object.assign.js?")},69479:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar globalThis = __webpack_require__(44576);\nvar DESCRIPTORS = __webpack_require__(43724);\nvar defineBuiltInAccessor = __webpack_require__(62106);\nvar regExpFlags = __webpack_require__(67979);\nvar fails = __webpack_require__(79039);\n\n// babel-minify and Closure Compiler transpiles RegExp('.', 'd') -> /./d and it causes SyntaxError\nvar RegExp = globalThis.RegExp;\nvar RegExpPrototype = RegExp.prototype;\n\nvar FORCED = DESCRIPTORS && fails(function () {\n  var INDICES_SUPPORT = true;\n  try {\n    RegExp('.', 'd');\n  } catch (error) {\n    INDICES_SUPPORT = false;\n  }\n\n  var O = {};\n  // modern V8 bug\n  var calls = '';\n  var expected = INDICES_SUPPORT ? 'dgimsy' : 'gimsy';\n\n  var addGetter = function (key, chr) {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty(O, key, { get: function () {\n      calls += chr;\n      return true;\n    } });\n  };\n\n  var pairs = {\n    dotAll: 's',\n    global: 'g',\n    ignoreCase: 'i',\n    multiline: 'm',\n    sticky: 'y'\n  };\n\n  if (INDICES_SUPPORT) pairs.hasIndices = 'd';\n\n  for (var key in pairs) addGetter(key, pairs[key]);\n\n  // eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\n  var result = Object.getOwnPropertyDescriptor(RegExpPrototype, 'flags').get.call(O);\n\n  return result !== expected || calls !== expected;\n});\n\n// `RegExp.prototype.flags` getter\n// https://tc39.es/ecma262/#sec-get-regexp.prototype.flags\nif (FORCED) defineBuiltInAccessor(RegExpPrototype, 'flags', {\n  configurable: true,\n  get: regExpFlags\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.regexp.flags.js?")},69539:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar ArrayBufferViewCore = __webpack_require__(94644);\nvar $filter = (__webpack_require__(59213).filter);\nvar fromSameTypeAndList = __webpack_require__(29948);\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.filter` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.filter\nexportTypedArrayMethod('filter', function filter(callbackfn /* , thisArg */) {\n  var list = $filter(aTypedArray(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  return fromSameTypeAndList(this, list);\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.filter.js?")},69546:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar createHTML = __webpack_require__(77240);\nvar forcedStringHTMLMethod = __webpack_require__(23061);\n\n// `String.prototype.fontsize` method\n// https://tc39.es/ecma262/#sec-string.prototype.fontsize\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('fontsize') }, {\n  fontsize: function fontsize(size) {\n    return createHTML(this, 'font', 'size', size);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.string.fontsize.js?")},69565:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar NATIVE_BIND = __webpack_require__(40616);\n\nvar call = Function.prototype.call;\n// eslint-disable-next-line es/no-function-prototype-bind -- safe\nmodule.exports = NATIVE_BIND ? call.bind(call) : function () {\n  return call.apply(call, arguments);\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/function-call.js?")},70081:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar call = __webpack_require__(69565);\nvar aCallable = __webpack_require__(79306);\nvar anObject = __webpack_require__(28551);\nvar tryToString = __webpack_require__(16823);\nvar getIteratorMethod = __webpack_require__(50851);\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (argument, usingIterator) {\n  var iteratorMethod = arguments.length < 2 ? getIteratorMethod(argument) : usingIterator;\n  if (aCallable(iteratorMethod)) return anObject(call(iteratorMethod, argument));\n  throw new $TypeError(tryToString(argument) + ' is not iterable');\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/get-iterator.js?")},70259:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar isArray = __webpack_require__(34376);\nvar lengthOfArrayLike = __webpack_require__(26198);\nvar doesNotExceedSafeInteger = __webpack_require__(96837);\nvar bind = __webpack_require__(76080);\n\n// `FlattenIntoArray` abstract operation\n// https://tc39.github.io/proposal-flatMap/#sec-FlattenIntoArray\nvar flattenIntoArray = function (target, original, source, sourceLen, start, depth, mapper, thisArg) {\n  var targetIndex = start;\n  var sourceIndex = 0;\n  var mapFn = mapper ? bind(mapper, thisArg) : false;\n  var element, elementLen;\n\n  while (sourceIndex < sourceLen) {\n    if (sourceIndex in source) {\n      element = mapFn ? mapFn(source[sourceIndex], sourceIndex, original) : source[sourceIndex];\n\n      if (depth > 0 && isArray(element)) {\n        elementLen = lengthOfArrayLike(element);\n        targetIndex = flattenIntoArray(target, original, element, elementLen, targetIndex, depth - 1) - 1;\n      } else {\n        doesNotExceedSafeInteger(targetIndex + 1);\n        target[targetIndex] = element;\n      }\n\n      targetIndex++;\n    }\n    sourceIndex++;\n  }\n  return targetIndex;\n};\n\nmodule.exports = flattenIntoArray;\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/flatten-into-array.js?")},70380:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar uncurryThis = __webpack_require__(79504);\nvar fails = __webpack_require__(79039);\nvar padStart = (__webpack_require__(60533).start);\n\nvar $RangeError = RangeError;\nvar $isFinite = isFinite;\nvar abs = Math.abs;\nvar DatePrototype = Date.prototype;\nvar nativeDateToISOString = DatePrototype.toISOString;\nvar thisTimeValue = uncurryThis(DatePrototype.getTime);\nvar getUTCDate = uncurryThis(DatePrototype.getUTCDate);\nvar getUTCFullYear = uncurryThis(DatePrototype.getUTCFullYear);\nvar getUTCHours = uncurryThis(DatePrototype.getUTCHours);\nvar getUTCMilliseconds = uncurryThis(DatePrototype.getUTCMilliseconds);\nvar getUTCMinutes = uncurryThis(DatePrototype.getUTCMinutes);\nvar getUTCMonth = uncurryThis(DatePrototype.getUTCMonth);\nvar getUTCSeconds = uncurryThis(DatePrototype.getUTCSeconds);\n\n// `Date.prototype.toISOString` method implementation\n// https://tc39.es/ecma262/#sec-date.prototype.toisostring\n// PhantomJS / old WebKit fails here:\nmodule.exports = (fails(function () {\n  return nativeDateToISOString.call(new Date(-5e13 - 1)) !== '0385-07-25T07:06:39.999Z';\n}) || !fails(function () {\n  nativeDateToISOString.call(new Date(NaN));\n})) ? function toISOString() {\n  if (!$isFinite(thisTimeValue(this))) throw new $RangeError('Invalid time value');\n  var date = this;\n  var year = getUTCFullYear(date);\n  var milliseconds = getUTCMilliseconds(date);\n  var sign = year < 0 ? '-' : year > 9999 ? '+' : '';\n  return sign + padStart(abs(year), sign ? 6 : 4, 0) +\n    '-' + padStart(getUTCMonth(date) + 1, 2, 0) +\n    '-' + padStart(getUTCDate(date), 2, 0) +\n    'T' + padStart(getUTCHours(date), 2, 0) +\n    ':' + padStart(getUTCMinutes(date), 2, 0) +\n    ':' + padStart(getUTCSeconds(date), 2, 0) +\n    '.' + padStart(milliseconds, 3, 0) +\n    'Z';\n} : nativeDateToISOString;\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/date-to-iso-string.js?")},70511:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar path = __webpack_require__(19167);\nvar hasOwn = __webpack_require__(39297);\nvar wrappedWellKnownSymbolModule = __webpack_require__(1951);\nvar defineProperty = (__webpack_require__(24913).f);\n\nmodule.exports = function (NAME) {\n  var Symbol = path.Symbol || (path.Symbol = {});\n  if (!hasOwn(Symbol, NAME)) defineProperty(Symbol, NAME, {\n    value: wrappedWellKnownSymbolModule.f(NAME)\n  });\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/well-known-symbol-define.js?")},70597:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar fails = __webpack_require__(79039);\nvar wellKnownSymbol = __webpack_require__(78227);\nvar V8_VERSION = __webpack_require__(39519);\n\nvar SPECIES = wellKnownSymbol('species');\n\nmodule.exports = function (METHOD_NAME) {\n  // We can't use this feature detection in V8 since it causes\n  // deoptimization and serious performance degradation\n  // https://github.com/zloirock/core-js/issues/677\n  return V8_VERSION >= 51 || !fails(function () {\n    var array = [];\n    var constructor = array.constructor = {};\n    constructor[SPECIES] = function () {\n      return { foo: 1 };\n    };\n    return array[METHOD_NAME](Boolean).foo !== 1;\n  });\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/array-method-has-species-support.js?")},70761:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar trunc = __webpack_require__(80741);\n\n// `Math.trunc` method\n// https://tc39.es/ecma262/#sec-math.trunc\n$({ target: 'Math', stat: true }, {\n  trunc: trunc\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.math.trunc.js?")},71072:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar internalObjectKeys = __webpack_require__(61828);\nvar enumBugKeys = __webpack_require__(88727);\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n// eslint-disable-next-line es/no-object-keys -- safe\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/object-keys.js?")},71137:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar ownKeys = __webpack_require__(35031);\n\n// `Reflect.ownKeys` method\n// https://tc39.es/ecma262/#sec-reflect.ownkeys\n$({ target: 'Reflect', stat: true }, {\n  ownKeys: ownKeys\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.reflect.own-keys.js?")},71338:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// https://github.com/tc39/proposal-global\n__webpack_require__(62480);\nvar globalThis = __webpack_require__(44576);\n\nmodule.exports = globalThis;\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/proposals/global-this.js?")},71658:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar addToUnscopables = __webpack_require__(6469);\nvar doesNotExceedSafeInteger = __webpack_require__(96837);\nvar lengthOfArrayLike = __webpack_require__(26198);\nvar toAbsoluteIndex = __webpack_require__(35610);\nvar toIndexedObject = __webpack_require__(25397);\nvar toIntegerOrInfinity = __webpack_require__(91291);\n\nvar $Array = Array;\nvar max = Math.max;\nvar min = Math.min;\n\n// `Array.prototype.toSpliced` method\n// https://tc39.es/ecma262/#sec-array.prototype.tospliced\n$({ target: 'Array', proto: true }, {\n  toSpliced: function toSpliced(start, deleteCount /* , ...items */) {\n    var O = toIndexedObject(this);\n    var len = lengthOfArrayLike(O);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var k = 0;\n    var insertCount, actualDeleteCount, newLen, A;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toIntegerOrInfinity(deleteCount), 0), len - actualStart);\n    }\n    newLen = doesNotExceedSafeInteger(len + insertCount - actualDeleteCount);\n    A = $Array(newLen);\n\n    for (; k < actualStart; k++) A[k] = O[k];\n    for (; k < actualStart + insertCount; k++) A[k] = arguments[k - actualStart + 2];\n    for (; k < newLen; k++) A[k] = O[k + actualDeleteCount - insertCount];\n\n    return A;\n  }\n});\n\naddToUnscopables('toSpliced');\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array.to-spliced.js?")},71678:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar IS_PURE = __webpack_require__(96395);\nvar $ = __webpack_require__(46518);\nvar globalThis = __webpack_require__(44576);\nvar getBuiltIn = __webpack_require__(97751);\nvar uncurryThis = __webpack_require__(79504);\nvar fails = __webpack_require__(79039);\nvar uid = __webpack_require__(33392);\nvar isCallable = __webpack_require__(94901);\nvar isConstructor = __webpack_require__(33517);\nvar isNullOrUndefined = __webpack_require__(64117);\nvar isObject = __webpack_require__(20034);\nvar isSymbol = __webpack_require__(10757);\nvar iterate = __webpack_require__(72652);\nvar anObject = __webpack_require__(28551);\nvar classof = __webpack_require__(36955);\nvar hasOwn = __webpack_require__(39297);\nvar createProperty = __webpack_require__(97040);\nvar createNonEnumerableProperty = __webpack_require__(66699);\nvar lengthOfArrayLike = __webpack_require__(26198);\nvar validateArgumentsLength = __webpack_require__(22812);\nvar getRegExpFlags = __webpack_require__(61034);\nvar MapHelpers = __webpack_require__(72248);\nvar SetHelpers = __webpack_require__(94402);\nvar setIterate = __webpack_require__(38469);\nvar detachTransferable = __webpack_require__(94483);\nvar ERROR_STACK_INSTALLABLE = __webpack_require__(24659);\nvar PROPER_STRUCTURED_CLONE_TRANSFER = __webpack_require__(1548);\n\nvar Object = globalThis.Object;\nvar Array = globalThis.Array;\nvar Date = globalThis.Date;\nvar Error = globalThis.Error;\nvar TypeError = globalThis.TypeError;\nvar PerformanceMark = globalThis.PerformanceMark;\nvar DOMException = getBuiltIn('DOMException');\nvar Map = MapHelpers.Map;\nvar mapHas = MapHelpers.has;\nvar mapGet = MapHelpers.get;\nvar mapSet = MapHelpers.set;\nvar Set = SetHelpers.Set;\nvar setAdd = SetHelpers.add;\nvar setHas = SetHelpers.has;\nvar objectKeys = getBuiltIn('Object', 'keys');\nvar push = uncurryThis([].push);\nvar thisBooleanValue = uncurryThis(true.valueOf);\nvar thisNumberValue = uncurryThis(1.0.valueOf);\nvar thisStringValue = uncurryThis(''.valueOf);\nvar thisTimeValue = uncurryThis(Date.prototype.getTime);\nvar PERFORMANCE_MARK = uid('structuredClone');\nvar DATA_CLONE_ERROR = 'DataCloneError';\nvar TRANSFERRING = 'Transferring';\n\nvar checkBasicSemantic = function (structuredCloneImplementation) {\n  return !fails(function () {\n    var set1 = new globalThis.Set([7]);\n    var set2 = structuredCloneImplementation(set1);\n    var number = structuredCloneImplementation(Object(7));\n    return set2 === set1 || !set2.has(7) || !isObject(number) || +number !== 7;\n  }) && structuredCloneImplementation;\n};\n\nvar checkErrorsCloning = function (structuredCloneImplementation, $Error) {\n  return !fails(function () {\n    var error = new $Error();\n    var test = structuredCloneImplementation({ a: error, b: error });\n    return !(test && test.a === test.b && test.a instanceof $Error && test.a.stack === error.stack);\n  });\n};\n\n// https://github.com/whatwg/html/pull/5749\nvar checkNewErrorsCloningSemantic = function (structuredCloneImplementation) {\n  return !fails(function () {\n    var test = structuredCloneImplementation(new globalThis.AggregateError([1], PERFORMANCE_MARK, { cause: 3 }));\n    return test.name !== 'AggregateError' || test.errors[0] !== 1 || test.message !== PERFORMANCE_MARK || test.cause !== 3;\n  });\n};\n\n// FF94+, Safari 15.4+, Chrome 98+, NodeJS 17.0+, Deno 1.13+\n// FF<103 and Safari implementations can't clone errors\n// https://bugzilla.mozilla.org/show_bug.cgi?id=1556604\n// FF103 can clone errors, but `.stack` of clone is an empty string\n// https://bugzilla.mozilla.org/show_bug.cgi?id=1778762\n// FF104+ fixed it on usual errors, but not on DOMExceptions\n// https://bugzilla.mozilla.org/show_bug.cgi?id=1777321\n// Chrome <102 returns `null` if cloned object contains multiple references to one error\n// https://bugs.chromium.org/p/v8/issues/detail?id=12542\n// NodeJS implementation can't clone DOMExceptions\n// https://github.com/nodejs/node/issues/41038\n// only FF103+ supports new (html/5749) error cloning semantic\nvar nativeStructuredClone = globalThis.structuredClone;\n\nvar FORCED_REPLACEMENT = IS_PURE\n  || !checkErrorsCloning(nativeStructuredClone, Error)\n  || !checkErrorsCloning(nativeStructuredClone, DOMException)\n  || !checkNewErrorsCloningSemantic(nativeStructuredClone);\n\n// Chrome 82+, Safari 14.1+, Deno 1.11+\n// Chrome 78-81 implementation swaps `.name` and `.message` of cloned `DOMException`\n// Chrome returns `null` if cloned object contains multiple references to one error\n// Safari 14.1 implementation doesn't clone some `RegExp` flags, so requires a workaround\n// Safari implementation can't clone errors\n// Deno 1.2-1.10 implementations too naive\n// NodeJS 16.0+ does not have `PerformanceMark` constructor\n// NodeJS <17.2 structured cloning implementation from `performance.mark` is too naive\n// and can't clone, for example, `RegExp` or some boxed primitives\n// https://github.com/nodejs/node/issues/40840\n// no one of those implementations supports new (html/5749) error cloning semantic\nvar structuredCloneFromMark = !nativeStructuredClone && checkBasicSemantic(function (value) {\n  return new PerformanceMark(PERFORMANCE_MARK, { detail: value }).detail;\n});\n\nvar nativeRestrictedStructuredClone = checkBasicSemantic(nativeStructuredClone) || structuredCloneFromMark;\n\nvar throwUncloneable = function (type) {\n  throw new DOMException('Uncloneable type: ' + type, DATA_CLONE_ERROR);\n};\n\nvar throwUnpolyfillable = function (type, action) {\n  throw new DOMException((action || 'Cloning') + ' of ' + type + ' cannot be properly polyfilled in this engine', DATA_CLONE_ERROR);\n};\n\nvar tryNativeRestrictedStructuredClone = function (value, type) {\n  if (!nativeRestrictedStructuredClone) throwUnpolyfillable(type);\n  return nativeRestrictedStructuredClone(value);\n};\n\nvar createDataTransfer = function () {\n  var dataTransfer;\n  try {\n    dataTransfer = new globalThis.DataTransfer();\n  } catch (error) {\n    try {\n      dataTransfer = new globalThis.ClipboardEvent('').clipboardData;\n    } catch (error2) { /* empty */ }\n  }\n  return dataTransfer && dataTransfer.items && dataTransfer.files ? dataTransfer : null;\n};\n\nvar cloneBuffer = function (value, map, $type) {\n  if (mapHas(map, value)) return mapGet(map, value);\n\n  var type = $type || classof(value);\n  var clone, length, options, source, target, i;\n\n  if (type === 'SharedArrayBuffer') {\n    if (nativeRestrictedStructuredClone) clone = nativeRestrictedStructuredClone(value);\n    // SharedArrayBuffer should use shared memory, we can't polyfill it, so return the original\n    else clone = value;\n  } else {\n    var DataView = globalThis.DataView;\n\n    // `ArrayBuffer#slice` is not available in IE10\n    // `ArrayBuffer#slice` and `DataView` are not available in old FF\n    if (!DataView && !isCallable(value.slice)) throwUnpolyfillable('ArrayBuffer');\n    // detached buffers throws in `DataView` and `.slice`\n    try {\n      if (isCallable(value.slice) && !value.resizable) {\n        clone = value.slice(0);\n      } else {\n        length = value.byteLength;\n        options = 'maxByteLength' in value ? { maxByteLength: value.maxByteLength } : undefined;\n        // eslint-disable-next-line es/no-resizable-and-growable-arraybuffers -- safe\n        clone = new ArrayBuffer(length, options);\n        source = new DataView(value);\n        target = new DataView(clone);\n        for (i = 0; i < length; i++) {\n          target.setUint8(i, source.getUint8(i));\n        }\n      }\n    } catch (error) {\n      throw new DOMException('ArrayBuffer is detached', DATA_CLONE_ERROR);\n    }\n  }\n\n  mapSet(map, value, clone);\n\n  return clone;\n};\n\nvar cloneView = function (value, type, offset, length, map) {\n  var C = globalThis[type];\n  // in some old engines like Safari 9, typeof C is 'object'\n  // on Uint8ClampedArray or some other constructors\n  if (!isObject(C)) throwUnpolyfillable(type);\n  return new C(cloneBuffer(value.buffer, map), offset, length);\n};\n\nvar structuredCloneInternal = function (value, map) {\n  if (isSymbol(value)) throwUncloneable('Symbol');\n  if (!isObject(value)) return value;\n  // effectively preserves circular references\n  if (map) {\n    if (mapHas(map, value)) return mapGet(map, value);\n  } else map = new Map();\n\n  var type = classof(value);\n  var C, name, cloned, dataTransfer, i, length, keys, key;\n\n  switch (type) {\n    case 'Array':\n      cloned = Array(lengthOfArrayLike(value));\n      break;\n    case 'Object':\n      cloned = {};\n      break;\n    case 'Map':\n      cloned = new Map();\n      break;\n    case 'Set':\n      cloned = new Set();\n      break;\n    case 'RegExp':\n      // in this block because of a Safari 14.1 bug\n      // old FF does not clone regexes passed to the constructor, so get the source and flags directly\n      cloned = new RegExp(value.source, getRegExpFlags(value));\n      break;\n    case 'Error':\n      name = value.name;\n      switch (name) {\n        case 'AggregateError':\n          cloned = new (getBuiltIn(name))([]);\n          break;\n        case 'EvalError':\n        case 'RangeError':\n        case 'ReferenceError':\n        case 'SuppressedError':\n        case 'SyntaxError':\n        case 'TypeError':\n        case 'URIError':\n          cloned = new (getBuiltIn(name))();\n          break;\n        case 'CompileError':\n        case 'LinkError':\n        case 'RuntimeError':\n          cloned = new (getBuiltIn('WebAssembly', name))();\n          break;\n        default:\n          cloned = new Error();\n      }\n      break;\n    case 'DOMException':\n      cloned = new DOMException(value.message, value.name);\n      break;\n    case 'ArrayBuffer':\n    case 'SharedArrayBuffer':\n      cloned = cloneBuffer(value, map, type);\n      break;\n    case 'DataView':\n    case 'Int8Array':\n    case 'Uint8Array':\n    case 'Uint8ClampedArray':\n    case 'Int16Array':\n    case 'Uint16Array':\n    case 'Int32Array':\n    case 'Uint32Array':\n    case 'Float16Array':\n    case 'Float32Array':\n    case 'Float64Array':\n    case 'BigInt64Array':\n    case 'BigUint64Array':\n      length = type === 'DataView' ? value.byteLength : value.length;\n      cloned = cloneView(value, type, value.byteOffset, length, map);\n      break;\n    case 'DOMQuad':\n      try {\n        cloned = new DOMQuad(\n          structuredCloneInternal(value.p1, map),\n          structuredCloneInternal(value.p2, map),\n          structuredCloneInternal(value.p3, map),\n          structuredCloneInternal(value.p4, map)\n        );\n      } catch (error) {\n        cloned = tryNativeRestrictedStructuredClone(value, type);\n      }\n      break;\n    case 'File':\n      if (nativeRestrictedStructuredClone) try {\n        cloned = nativeRestrictedStructuredClone(value);\n        // NodeJS 20.0.0 bug, https://github.com/nodejs/node/issues/47612\n        if (classof(cloned) !== type) cloned = undefined;\n      } catch (error) { /* empty */ }\n      if (!cloned) try {\n        cloned = new File([value], value.name, value);\n      } catch (error) { /* empty */ }\n      if (!cloned) throwUnpolyfillable(type);\n      break;\n    case 'FileList':\n      dataTransfer = createDataTransfer();\n      if (dataTransfer) {\n        for (i = 0, length = lengthOfArrayLike(value); i < length; i++) {\n          dataTransfer.items.add(structuredCloneInternal(value[i], map));\n        }\n        cloned = dataTransfer.files;\n      } else cloned = tryNativeRestrictedStructuredClone(value, type);\n      break;\n    case 'ImageData':\n      // Safari 9 ImageData is a constructor, but typeof ImageData is 'object'\n      try {\n        cloned = new ImageData(\n          structuredCloneInternal(value.data, map),\n          value.width,\n          value.height,\n          { colorSpace: value.colorSpace }\n        );\n      } catch (error) {\n        cloned = tryNativeRestrictedStructuredClone(value, type);\n      } break;\n    default:\n      if (nativeRestrictedStructuredClone) {\n        cloned = nativeRestrictedStructuredClone(value);\n      } else switch (type) {\n        case 'BigInt':\n          // can be a 3rd party polyfill\n          cloned = Object(value.valueOf());\n          break;\n        case 'Boolean':\n          cloned = Object(thisBooleanValue(value));\n          break;\n        case 'Number':\n          cloned = Object(thisNumberValue(value));\n          break;\n        case 'String':\n          cloned = Object(thisStringValue(value));\n          break;\n        case 'Date':\n          cloned = new Date(thisTimeValue(value));\n          break;\n        case 'Blob':\n          try {\n            cloned = value.slice(0, value.size, value.type);\n          } catch (error) {\n            throwUnpolyfillable(type);\n          } break;\n        case 'DOMPoint':\n        case 'DOMPointReadOnly':\n          C = globalThis[type];\n          try {\n            cloned = C.fromPoint\n              ? C.fromPoint(value)\n              : new C(value.x, value.y, value.z, value.w);\n          } catch (error) {\n            throwUnpolyfillable(type);\n          } break;\n        case 'DOMRect':\n        case 'DOMRectReadOnly':\n          C = globalThis[type];\n          try {\n            cloned = C.fromRect\n              ? C.fromRect(value)\n              : new C(value.x, value.y, value.width, value.height);\n          } catch (error) {\n            throwUnpolyfillable(type);\n          } break;\n        case 'DOMMatrix':\n        case 'DOMMatrixReadOnly':\n          C = globalThis[type];\n          try {\n            cloned = C.fromMatrix\n              ? C.fromMatrix(value)\n              : new C(value);\n          } catch (error) {\n            throwUnpolyfillable(type);\n          } break;\n        case 'AudioData':\n        case 'VideoFrame':\n          if (!isCallable(value.clone)) throwUnpolyfillable(type);\n          try {\n            cloned = value.clone();\n          } catch (error) {\n            throwUncloneable(type);\n          } break;\n        case 'CropTarget':\n        case 'CryptoKey':\n        case 'FileSystemDirectoryHandle':\n        case 'FileSystemFileHandle':\n        case 'FileSystemHandle':\n        case 'GPUCompilationInfo':\n        case 'GPUCompilationMessage':\n        case 'ImageBitmap':\n        case 'RTCCertificate':\n        case 'WebAssembly.Module':\n          throwUnpolyfillable(type);\n          // break omitted\n        default:\n          throwUncloneable(type);\n      }\n  }\n\n  mapSet(map, value, cloned);\n\n  switch (type) {\n    case 'Array':\n    case 'Object':\n      keys = objectKeys(value);\n      for (i = 0, length = lengthOfArrayLike(keys); i < length; i++) {\n        key = keys[i];\n        createProperty(cloned, key, structuredCloneInternal(value[key], map));\n      } break;\n    case 'Map':\n      value.forEach(function (v, k) {\n        mapSet(cloned, structuredCloneInternal(k, map), structuredCloneInternal(v, map));\n      });\n      break;\n    case 'Set':\n      value.forEach(function (v) {\n        setAdd(cloned, structuredCloneInternal(v, map));\n      });\n      break;\n    case 'Error':\n      createNonEnumerableProperty(cloned, 'message', structuredCloneInternal(value.message, map));\n      if (hasOwn(value, 'cause')) {\n        createNonEnumerableProperty(cloned, 'cause', structuredCloneInternal(value.cause, map));\n      }\n      if (name === 'AggregateError') {\n        cloned.errors = structuredCloneInternal(value.errors, map);\n      } else if (name === 'SuppressedError') {\n        cloned.error = structuredCloneInternal(value.error, map);\n        cloned.suppressed = structuredCloneInternal(value.suppressed, map);\n      } // break omitted\n    case 'DOMException':\n      if (ERROR_STACK_INSTALLABLE) {\n        createNonEnumerableProperty(cloned, 'stack', structuredCloneInternal(value.stack, map));\n      }\n  }\n\n  return cloned;\n};\n\nvar tryToTransfer = function (rawTransfer, map) {\n  if (!isObject(rawTransfer)) throw new TypeError('Transfer option cannot be converted to a sequence');\n\n  var transfer = [];\n\n  iterate(rawTransfer, function (value) {\n    push(transfer, anObject(value));\n  });\n\n  var i = 0;\n  var length = lengthOfArrayLike(transfer);\n  var buffers = new Set();\n  var value, type, C, transferred, canvas, context;\n\n  while (i < length) {\n    value = transfer[i++];\n\n    type = classof(value);\n\n    if (type === 'ArrayBuffer' ? setHas(buffers, value) : mapHas(map, value)) {\n      throw new DOMException('Duplicate transferable', DATA_CLONE_ERROR);\n    }\n\n    if (type === 'ArrayBuffer') {\n      setAdd(buffers, value);\n      continue;\n    }\n\n    if (PROPER_STRUCTURED_CLONE_TRANSFER) {\n      transferred = nativeStructuredClone(value, { transfer: [value] });\n    } else switch (type) {\n      case 'ImageBitmap':\n        C = globalThis.OffscreenCanvas;\n        if (!isConstructor(C)) throwUnpolyfillable(type, TRANSFERRING);\n        try {\n          canvas = new C(value.width, value.height);\n          context = canvas.getContext('bitmaprenderer');\n          context.transferFromImageBitmap(value);\n          transferred = canvas.transferToImageBitmap();\n        } catch (error) { /* empty */ }\n        break;\n      case 'AudioData':\n      case 'VideoFrame':\n        if (!isCallable(value.clone) || !isCallable(value.close)) throwUnpolyfillable(type, TRANSFERRING);\n        try {\n          transferred = value.clone();\n          value.close();\n        } catch (error) { /* empty */ }\n        break;\n      case 'MediaSourceHandle':\n      case 'MessagePort':\n      case 'MIDIAccess':\n      case 'OffscreenCanvas':\n      case 'ReadableStream':\n      case 'RTCDataChannel':\n      case 'TransformStream':\n      case 'WebTransportReceiveStream':\n      case 'WebTransportSendStream':\n      case 'WritableStream':\n        throwUnpolyfillable(type, TRANSFERRING);\n    }\n\n    if (transferred === undefined) throw new DOMException('This object cannot be transferred: ' + type, DATA_CLONE_ERROR);\n\n    mapSet(map, value, transferred);\n  }\n\n  return buffers;\n};\n\nvar detachBuffers = function (buffers) {\n  setIterate(buffers, function (buffer) {\n    if (PROPER_STRUCTURED_CLONE_TRANSFER) {\n      nativeRestrictedStructuredClone(buffer, { transfer: [buffer] });\n    } else if (isCallable(buffer.transfer)) {\n      buffer.transfer();\n    } else if (detachTransferable) {\n      detachTransferable(buffer);\n    } else {\n      throwUnpolyfillable('ArrayBuffer', TRANSFERRING);\n    }\n  });\n};\n\n// `structuredClone` method\n// https://html.spec.whatwg.org/multipage/structured-data.html#dom-structuredclone\n$({ global: true, enumerable: true, sham: !PROPER_STRUCTURED_CLONE_TRANSFER, forced: FORCED_REPLACEMENT }, {\n  structuredClone: function structuredClone(value /* , { transfer } */) {\n    var options = validateArgumentsLength(arguments.length, 1) > 1 && !isNullOrUndefined(arguments[1]) ? anObject(arguments[1]) : undefined;\n    var transfer = options ? options.transfer : undefined;\n    var map, buffers;\n\n    if (transfer !== undefined) {\n      map = new Map();\n      buffers = tryToTransfer(transfer, map);\n    }\n\n    var clone = structuredCloneInternal(value, map);\n\n    // since of an issue with cloning views of transferred buffers, we a forced to detach them later\n    // https://github.com/zloirock/core-js/issues/1265\n    if (buffers) detachBuffers(buffers);\n\n    return clone;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/web.structured-clone.js?")},71761:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar call = __webpack_require__(69565);\nvar fixRegExpWellKnownSymbolLogic = __webpack_require__(89228);\nvar anObject = __webpack_require__(28551);\nvar isNullOrUndefined = __webpack_require__(64117);\nvar toLength = __webpack_require__(18014);\nvar toString = __webpack_require__(655);\nvar requireObjectCoercible = __webpack_require__(67750);\nvar getMethod = __webpack_require__(55966);\nvar advanceStringIndex = __webpack_require__(57829);\nvar regExpExec = __webpack_require__(56682);\n\n// @@match logic\nfixRegExpWellKnownSymbolLogic('match', function (MATCH, nativeMatch, maybeCallNative) {\n  return [\n    // `String.prototype.match` method\n    // https://tc39.es/ecma262/#sec-string.prototype.match\n    function match(regexp) {\n      var O = requireObjectCoercible(this);\n      var matcher = isNullOrUndefined(regexp) ? undefined : getMethod(regexp, MATCH);\n      return matcher ? call(matcher, regexp, O) : new RegExp(regexp)[MATCH](toString(O));\n    },\n    // `RegExp.prototype[@@match]` method\n    // https://tc39.es/ecma262/#sec-regexp.prototype-@@match\n    function (string) {\n      var rx = anObject(this);\n      var S = toString(string);\n      var res = maybeCallNative(nativeMatch, rx, S);\n\n      if (res.done) return res.value;\n\n      if (!rx.global) return regExpExec(rx, S);\n\n      var fullUnicode = rx.unicode;\n      rx.lastIndex = 0;\n      var A = [];\n      var n = 0;\n      var result;\n      while ((result = regExpExec(rx, S)) !== null) {\n        var matchStr = toString(result[0]);\n        A[n] = matchStr;\n        if (matchStr === '') rx.lastIndex = advanceStringIndex(S, toLength(rx.lastIndex), fullUnicode);\n        n++;\n      }\n      return n === 0 ? null : A;\n    }\n  ];\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.string.match.js?")},72107:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar createTypedArrayConstructor = __webpack_require__(15823);\n\n// `Int16Array` constructor\n// https://tc39.es/ecma262/#sec-typedarray-objects\ncreateTypedArrayConstructor('Int16', function (init) {\n  return function Int16Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.int16-array.js?")},72152:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar fails = __webpack_require__(79039);\n\n// eslint-disable-next-line es/no-math-imul -- required for testing\nvar $imul = Math.imul;\n\nvar FORCED = fails(function () {\n  return $imul(0xFFFFFFFF, 5) !== -5 || $imul.length !== 2;\n});\n\n// `Math.imul` method\n// https://tc39.es/ecma262/#sec-math.imul\n// some WebKit versions fails with big numbers, some has wrong arity\n$({ target: 'Math', stat: true, forced: FORCED }, {\n  imul: function imul(x, y) {\n    var UINT16 = 0xFFFF;\n    var xn = +x;\n    var yn = +y;\n    var xl = UINT16 & xn;\n    var yl = UINT16 & yn;\n    return 0 | xl * yl + ((UINT16 & xn >>> 16) * yl + xl * (UINT16 & yn >>> 16) << 16 >>> 0);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.math.imul.js?")},72170:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar ArrayBufferViewCore = __webpack_require__(94644);\nvar $every = (__webpack_require__(59213).every);\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.every` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.every\nexportTypedArrayMethod('every', function every(callbackfn /* , thisArg */) {\n  return $every(aTypedArray(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.every.js?")},72248:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar uncurryThis = __webpack_require__(79504);\n\n// eslint-disable-next-line es/no-map -- safe\nvar MapPrototype = Map.prototype;\n\nmodule.exports = {\n  // eslint-disable-next-line es/no-map -- safe\n  Map: Map,\n  set: uncurryThis(MapPrototype.set),\n  get: uncurryThis(MapPrototype.get),\n  has: uncurryThis(MapPrototype.has),\n  remove: uncurryThis(MapPrototype['delete']),\n  proto: MapPrototype\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/map-helpers.js?")},72333:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar toIntegerOrInfinity = __webpack_require__(91291);\nvar toString = __webpack_require__(655);\nvar requireObjectCoercible = __webpack_require__(67750);\n\nvar $RangeError = RangeError;\n\n// `String.prototype.repeat` method implementation\n// https://tc39.es/ecma262/#sec-string.prototype.repeat\nmodule.exports = function repeat(count) {\n  var str = toString(requireObjectCoercible(this));\n  var result = '';\n  var n = toIntegerOrInfinity(count);\n  if (n < 0 || n === Infinity) throw new $RangeError('Wrong number of repetitions');\n  for (;n > 0; (n >>>= 1) && (str += str)) if (n & 1) result += str;\n  return result;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/string-repeat.js?")},72400:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(57145);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.array.to-sorted.js?")},72577:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(20116);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.iterator.find.js?")},72652:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar bind = __webpack_require__(76080);\nvar call = __webpack_require__(69565);\nvar anObject = __webpack_require__(28551);\nvar tryToString = __webpack_require__(16823);\nvar isArrayIteratorMethod = __webpack_require__(44209);\nvar lengthOfArrayLike = __webpack_require__(26198);\nvar isPrototypeOf = __webpack_require__(1625);\nvar getIterator = __webpack_require__(70081);\nvar getIteratorMethod = __webpack_require__(50851);\nvar iteratorClose = __webpack_require__(9539);\n\nvar $TypeError = TypeError;\n\nvar Result = function (stopped, result) {\n  this.stopped = stopped;\n  this.result = result;\n};\n\nvar ResultPrototype = Result.prototype;\n\nmodule.exports = function (iterable, unboundFunction, options) {\n  var that = options && options.that;\n  var AS_ENTRIES = !!(options && options.AS_ENTRIES);\n  var IS_RECORD = !!(options && options.IS_RECORD);\n  var IS_ITERATOR = !!(options && options.IS_ITERATOR);\n  var INTERRUPTED = !!(options && options.INTERRUPTED);\n  var fn = bind(unboundFunction, that);\n  var iterator, iterFn, index, length, result, next, step;\n\n  var stop = function (condition) {\n    if (iterator) iteratorClose(iterator, 'normal', condition);\n    return new Result(true, condition);\n  };\n\n  var callFn = function (value) {\n    if (AS_ENTRIES) {\n      anObject(value);\n      return INTERRUPTED ? fn(value[0], value[1], stop) : fn(value[0], value[1]);\n    } return INTERRUPTED ? fn(value, stop) : fn(value);\n  };\n\n  if (IS_RECORD) {\n    iterator = iterable.iterator;\n  } else if (IS_ITERATOR) {\n    iterator = iterable;\n  } else {\n    iterFn = getIteratorMethod(iterable);\n    if (!iterFn) throw new $TypeError(tryToString(iterable) + ' is not iterable');\n    // optimisation for array iterators\n    if (isArrayIteratorMethod(iterFn)) {\n      for (index = 0, length = lengthOfArrayLike(iterable); length > index; index++) {\n        result = callFn(iterable[index]);\n        if (result && isPrototypeOf(ResultPrototype, result)) return result;\n      } return new Result(false);\n    }\n    iterator = getIterator(iterable, iterFn);\n  }\n\n  next = IS_RECORD ? iterable.next : iterator.next;\n  while (!(step = call(next, iterator)).done) {\n    try {\n      result = callFn(step.value);\n    } catch (error) {\n      iteratorClose(iterator, 'throw', error);\n    }\n    if (typeof result == 'object' && result && isPrototypeOf(ResultPrototype, result)) return result;\n  } return new Result(false);\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/iterate.js?")},72712:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar $reduce = (__webpack_require__(80926).left);\nvar arrayMethodIsStrict = __webpack_require__(34598);\nvar CHROME_VERSION = __webpack_require__(39519);\nvar IS_NODE = __webpack_require__(16193);\n\n// Chrome 80-82 has a critical bug\n// https://bugs.chromium.org/p/chromium/issues/detail?id=1049982\nvar CHROME_BUG = !IS_NODE && CHROME_VERSION > 79 && CHROME_VERSION < 83;\nvar FORCED = CHROME_BUG || !arrayMethodIsStrict('reduce');\n\n// `Array.prototype.reduce` method\n// https://tc39.es/ecma262/#sec-array.prototype.reduce\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  reduce: function reduce(callbackfn /* , initialValue */) {\n    var length = arguments.length;\n    return $reduce(this, callbackfn, length, length > 1 ? arguments[1] : undefined);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array.reduce.js?")},72777:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar call = __webpack_require__(69565);\nvar isObject = __webpack_require__(20034);\nvar isSymbol = __webpack_require__(10757);\nvar getMethod = __webpack_require__(55966);\nvar ordinaryToPrimitive = __webpack_require__(84270);\nvar wellKnownSymbol = __webpack_require__(78227);\n\nvar $TypeError = TypeError;\nvar TO_PRIMITIVE = wellKnownSymbol('toPrimitive');\n\n// `ToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-toprimitive\nmodule.exports = function (input, pref) {\n  if (!isObject(input) || isSymbol(input)) return input;\n  var exoticToPrim = getMethod(input, TO_PRIMITIVE);\n  var result;\n  if (exoticToPrim) {\n    if (pref === undefined) pref = 'default';\n    result = call(exoticToPrim, input, pref);\n    if (!isObject(result) || isSymbol(result)) return result;\n    throw new $TypeError(\"Can't convert object to primitive value\");\n  }\n  if (pref === undefined) pref = 'number';\n  return ordinaryToPrimitive(input, pref);\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/to-primitive.js?")},72805:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n/* eslint-disable no-new, sonarjs/inconsistent-function-call -- required for testing */\nvar globalThis = __webpack_require__(44576);\nvar fails = __webpack_require__(79039);\nvar checkCorrectnessOfIteration = __webpack_require__(84428);\nvar NATIVE_ARRAY_BUFFER_VIEWS = (__webpack_require__(94644).NATIVE_ARRAY_BUFFER_VIEWS);\n\nvar ArrayBuffer = globalThis.ArrayBuffer;\nvar Int8Array = globalThis.Int8Array;\n\nmodule.exports = !NATIVE_ARRAY_BUFFER_VIEWS || !fails(function () {\n  Int8Array(1);\n}) || !fails(function () {\n  new Int8Array(-1);\n}) || !checkCorrectnessOfIteration(function (iterable) {\n  new Int8Array();\n  new Int8Array(null);\n  new Int8Array(1.5);\n  new Int8Array(iterable);\n}, true) || fails(function () {\n  // Safari (11+) bug - a reason why even Safari 13 should load a typed array polyfill\n  return new Int8Array(new ArrayBuffer(2), 1, undefined).length !== 1;\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/typed-array-constructors-require-wrappers.js?")},73285:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";eval('\n\n__webpack_require__(52675);\n__webpack_require__(89463);\n__webpack_require__(2259);\n__webpack_require__(2008);\n__webpack_require__(94490);\n__webpack_require__(23288);\n__webpack_require__(62010);\n__webpack_require__(59904);\n__webpack_require__(67945);\n__webpack_require__(84185);\n__webpack_require__(83851);\n__webpack_require__(81278);\n__webpack_require__(40875);\n__webpack_require__(10287);\n__webpack_require__(3362);\n__webpack_require__(38781);\nObject.defineProperty(exports, "__esModule", ({\n  value: true\n}));\nexports["default"] = void 0;\n__webpack_require__(45700);\n__webpack_require__(28706);\n__webpack_require__(51629);\n__webpack_require__(23418);\n__webpack_require__(25276);\n__webpack_require__(64346);\n__webpack_require__(23792);\n__webpack_require__(62062);\n__webpack_require__(72712);\n__webpack_require__(34782);\n__webpack_require__(15086);\n__webpack_require__(54743);\n__webpack_require__(11745);\n__webpack_require__(38309);\n__webpack_require__(89572);\n__webpack_require__(2892);\n__webpack_require__(32637);\n__webpack_require__(79432);\n__webpack_require__(26099);\n__webpack_require__(16034);\n__webpack_require__(58940);\n__webpack_require__(27495);\n__webpack_require__(47764);\n__webpack_require__(71761);\n__webpack_require__(5746);\n__webpack_require__(22134);\n__webpack_require__(81630);\n__webpack_require__(72170);\n__webpack_require__(75044);\n__webpack_require__(69539);\n__webpack_require__(31694);\n__webpack_require__(89955);\n__webpack_require__(33206);\n__webpack_require__(44496);\n__webpack_require__(66651);\n__webpack_require__(12887);\n__webpack_require__(19369);\n__webpack_require__(66812);\n__webpack_require__(8995);\n__webpack_require__(31575);\n__webpack_require__(36072);\n__webpack_require__(88747);\n__webpack_require__(28845);\n__webpack_require__(29423);\n__webpack_require__(57301);\n__webpack_require__(373);\n__webpack_require__(86614);\n__webpack_require__(41405);\n__webpack_require__(33684);\n__webpack_require__(73772);\n__webpack_require__(30958);\n__webpack_require__(23500);\n__webpack_require__(62953);\n__webpack_require__(76031);\n__webpack_require__(3296);\n__webpack_require__(27208);\n__webpack_require__(48408);\n__webpack_require__(59494);\nvar _resizeObserverPolyfill = _interopRequireDefault(__webpack_require__(43591));\nvar pdfjsLib = _interopRequireWildcard(__webpack_require__(13394));\n__webpack_require__(41852);\nvar _viewerType = __webpack_require__(87312);\nvar _Renderer = __webpack_require__(82485);\nvar _ui = __webpack_require__(32604);\nvar _Outlines = __webpack_require__(73913);\nvar _UIControl = __webpack_require__(34335);\nvar _DrawingCanvas = __webpack_require__(76406);\nvar _pdfTypes = __webpack_require__(30793);\nvar _SearchManager = __webpack_require__(32707);\nvar _PrintManager = __webpack_require__(13152);\nvar _PixelsPerInch;\nfunction _getRequireWildcardCache(e) { if ("function" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || "object" != _typeof(e) && "function" != typeof e) return { "default": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if ("default" !== u && {}.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n["default"] = e, t && t.set(e, n), n; }\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { "default": e }; }\nfunction _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }\nfunction _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a \'" + n + "\' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }\nfunction _classPrivateMethodInitSpec(e, a) { _checkPrivateRedeclaration(e, a), a.add(e); }\nfunction _classPrivateFieldInitSpec(e, t, a) { _checkPrivateRedeclaration(e, t), t.set(e, a); }\nfunction _checkPrivateRedeclaration(e, t) { if (t.has(e)) throw new TypeError("Cannot initialize the same private elements twice on an object"); }\nfunction _classPrivateFieldGet(s, a) { return s.get(_assertClassBrand(s, a)); }\nfunction _assertClassBrand(e, t, n) { if ("function" == typeof e ? e === t : e.has(t)) return arguments.length < 3 ? t : n; throw new TypeError("Private element is not present on this object"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }\nfunction _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }\nvar PixelsPerInch = /*#__PURE__*/_createClass(function PixelsPerInch() {\n  _classCallCheck(this, PixelsPerInch);\n});\n_PixelsPerInch = PixelsPerInch;\n_defineProperty(PixelsPerInch, "CSS", 96.0);\n_defineProperty(PixelsPerInch, "PDF", 72.0);\n_defineProperty(PixelsPerInch, "PDF_TO_CSS_UNITS", _PixelsPerInch.CSS / _PixelsPerInch.PDF);\nif (!window.ResizeObserver) {\n  window.ResizeObserver = _resizeObserverPolyfill["default"];\n}\n/**\n * PC\n * 0.1, 5.0\n *\n * 모바일\n * 0.6, 3.0\n */\nvar _isPreventEvent = /*#__PURE__*/new WeakMap();\nvar _onClickAnnotation = /*#__PURE__*/new WeakMap();\nvar _PdfCore_brand = /*#__PURE__*/new WeakSet();\nvar _unload = /*#__PURE__*/new WeakMap();\nvar _getTotalHeight = /*#__PURE__*/new WeakMap();\nvar _getMaxWidth = /*#__PURE__*/new WeakMap();\nvar _getMinWidth = /*#__PURE__*/new WeakMap();\nvar _getMaxHeight = /*#__PURE__*/new WeakMap();\nvar _findCurrentToc = /*#__PURE__*/new WeakMap();\nvar _validateCurrentPage = /*#__PURE__*/new WeakMap();\nvar _setPage = /*#__PURE__*/new WeakMap();\nvar _runTask = /*#__PURE__*/new WeakMap();\nvar _loadPdf = /*#__PURE__*/new WeakMap();\nvar _updateScrollInfo = /*#__PURE__*/new WeakMap();\nvar _restoreScrollPosition = /*#__PURE__*/new WeakMap();\nvar _validate = /*#__PURE__*/new WeakMap();\nvar PdfCore = /*#__PURE__*/function () {\n  function PdfCore() {\n    var _this = this;\n    _classCallCheck(this, PdfCore);\n    _classPrivateMethodInitSpec(this, _PdfCore_brand);\n    _defineProperty(this, "reset", function () {\n      var _this$renderer, _this$outlines, _this$keyboardControl, _this$mouseControl, _this$touchControl, _this$canvasManager, _this$searchManager, _this$printManager;\n      _this.annotationFactory = null;\n      _this.renderItems = [];\n      _this.currentUserScale = 1.0;\n      _this.currentPage = 1;\n      _this.pdfDocument = null;\n      _this.totalPages = 0;\n      _this.outline = null;\n\n      //renderer 초기화\n      (_this$renderer = _this.renderer) === null || _this$renderer === void 0 || _this$renderer.destroy();\n      _this.renderer = null;\n\n      //목차 초기화.\n      (_this$outlines = _this.outlines) === null || _this$outlines === void 0 || _this$outlines.destroy();\n\n      //키보드\n      (_this$keyboardControl = _this.keyboardControl) === null || _this$keyboardControl === void 0 || _this$keyboardControl.destroy();\n      _this.keyboardControl = new _UIControl.KeyboardControl({\n        onNext: _this.gotoNextPage,\n        onPrev: _this.gotoPrevPage,\n        isPreventEvent: _classPrivateFieldGet(_isPreventEvent, _this)\n      });\n\n      //마우스\n      (_this$mouseControl = _this.mouseControl) === null || _this$mouseControl === void 0 || _this$mouseControl.destroy();\n      _this.mouseControl = new _UIControl.MouseControl({\n        minScale: _this.minUserScale,\n        maxScale: _this.maxUserScale,\n        scrollContainer: _this.elementBuilder.elements.documentScrollContainer,\n        getCurrentScale: function getCurrentScale() {\n          return _this.currentUserScale;\n        },\n        setScale: _this.setScale,\n        isPreventEvent: _classPrivateFieldGet(_isPreventEvent, _this),\n        requestPageAnnotation: function requestPageAnnotation(page) {\n          return _this.renderItems[page].annotations;\n        },\n        reqeustPageTextInfo: function reqeustPageTextInfo(page) {\n          return _this.renderItems[page].getTextInfo();\n        },\n        reqeustPageTextInfoUpdate: function reqeustPageTextInfoUpdate(page) {\n          return _this.renderItems[page].textInfoUpdate();\n        },\n        requestSelection: function requestSelection(page, info) {\n          return _this.renderItems[page].drawSelection(info);\n        },\n        requestClearSelection: function requestClearSelection(page) {\n          return _this.renderItems[page].clearSelection();\n        },\n        onClickAnnotation: _classPrivateFieldGet(_onClickAnnotation, _this),\n        onClick: _this.callbackOpt.onClick,\n        onSelectionEnded: function onSelectionEnded(startSelectionObject, endSelectionObject) {\n          console.log(\'##onSelectionEnded\', startSelectionObject, endSelectionObject);\n        },\n        userZoomFactor: _this.perfomance.deviceType == \'pc\' && !_this.perfomance.isApple ? 0.001 : 0.001\n      });\n\n      //터치\n      (_this$touchControl = _this.touchControl) === null || _this$touchControl === void 0 || _this$touchControl.destroy();\n      _this.touchControl = new _UIControl.TouchControl({\n        scrollContainer: _this.elementBuilder.elements.documentScrollContainer,\n        getCurrentScale: function getCurrentScale() {\n          return _this.currentUserScale;\n        },\n        setScale: _this.setScale,\n        disableTouchAction: _this.elementBuilder.disableTouch,\n        activeTouchAction: _this.elementBuilder.activeTouch,\n        isPreventEvent: _classPrivateFieldGet(_isPreventEvent, _this),\n        requestPageAnnotation: function requestPageAnnotation(page) {\n          return _this.renderItems[page].annotations;\n        },\n        onClickAnnotation: _classPrivateFieldGet(_onClickAnnotation, _this),\n        onSwipeEvent: function onSwipeEvent(direction) {\n          if (_this.currentPageMode != _viewerType.PageMode.SCROLL) {\n            if (direction == \'ltr\') {\n              _this.gotoNextPage();\n            } else {\n              _this.gotoPrevPage();\n            }\n          }\n        },\n        isScrolling: function isScrolling() {\n          return _this.isScrolling;\n        },\n        onClick: _this.callbackOpt.onClick\n      });\n      (_this$canvasManager = _this.canvasManager) === null || _this$canvasManager === void 0 || _this$canvasManager.destroy();\n      _this.canvasManager = null;\n      (_this$searchManager = _this.searchManager) === null || _this$searchManager === void 0 || _this$searchManager.destroy();\n      _this.searchManager = null;\n      (_this$printManager = _this.printManager) === null || _this$printManager === void 0 || _this$printManager.destroy();\n      _this.printManager = null;\n      _assertClassBrand(_PdfCore_brand, _this, _setScaleRootValue).call(_this);\n    });\n    _classPrivateFieldInitSpec(this, _isPreventEvent, function () {\n      var _this$canvasManager2, _this$canvasManager3;\n      return ((_this$canvasManager2 = _this.canvasManager) === null || _this$canvasManager2 === void 0 ? void 0 : _this$canvasManager2.editAnnotation) || ((_this$canvasManager3 = _this.canvasManager) === null || _this$canvasManager3 === void 0 ? void 0 : _this$canvasManager3.isDrawing);\n    });\n    _classPrivateFieldInitSpec(this, _onClickAnnotation, /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(annotation) {\n        var dest;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              dest = annotation.dest;\n              _context.next = 3;\n              return _assertClassBrand(_PdfCore_brand, _this, _goToDestination).call(_this, dest);\n            case 3:\n            case "end":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n    /**\n     * pdf 초기화 함수\n     * @param {InitPdfParams} params\n     */\n    _defineProperty(this, "init", /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(params) {\n        var isPageMode, pdfversion, defaultParams, loadingTask;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return (0, _ui.detectDevicePerformance)();\n            case 2:\n              _this.perfomance = _context3.sent;\n              //Element Builder\n              _this.elementBuilder = new _Renderer.ElementBuilder();\n              _this.elementBuilder.createPDFViewer(params.viewerId);\n              _this.reset();\n\n              //페이지 모드\n              if (params.pageMode) {\n                isPageMode = Object.values(_viewerType.PageMode).some(function (it) {\n                  return params.pageMode;\n                });\n                if (isPageMode) {\n                  _this.currentPageMode = params.pageMode;\n                }\n              }\n              //보려는 페이지\n              if (params.pageNum && isFinite(params.pageNum)) {\n                _this.currentPage = params.pageNum;\n              }\n\n              /**\n               * 모바일일 경우 확대 비율 조정\n               */\n              if (_this.perfomance.deviceType == \'mobile\') {\n                _this.minUserScale = 0.6;\n                _this.maxUserScale = 3.0;\n              }\n              /**\n               * 최신버전은 npm저장소에서 지원하지 않음.\n               */\n              pdfversion = \'4.10.38\';\n              defaultParams = {\n                enableXfa: true,\n                disableFontFace: true,\n                // cMapUrl: `https://cdn.jsdelivr.net/npm/pdfjs-dist@${pdfversion}/cmaps/`,\n                // standardFontDataUrl: `https://cdn.jsdelivr.net/npm/pdfjs-dist@${pdfversion}/standard_fonts/`,\n                cMapUrl: "cmaps/",\n                standardFontDataUrl: "standard_fonts/",\n                disableStream: false,\n                // 스트리밍 활성화\n                disableRange: false,\n                // 부분 요청 활성화 (서버가 지원해야 함)\n                disableAutoFetch: false,\n                // 필요 없는 데이터도 미리 가져와서 성능 향상,\n                enableHWA: true,\n                // Enables hardware acceleration for\n                useSystemFonts: false,\n                verbosity: 0,\n                docBaseUrl: \'\',\n                fontExtraProperties: false,\n                isEvalSupported: true,\n                maxImageSize: -1,\n                pdfBug: false,\n                useWasm: true,\n                wasmUrl: \'wasm/\'\n              };\n              _this.cunckedParams = _objectSpread(_objectSpread({}, defaultParams), params);\n              loadingTask = pdfjsLib.getDocument(_this.cunckedParams);\n              _context3.next = 15;\n              return loadingTask.promise;\n            case 15:\n              _this.pdfDocument = _context3.sent;\n              _this.totalPages = _this.pdfDocument.numPages;\n              //검색\n              _this.searchManager = new _SearchManager.SearchManager(_this.pdfDocument, _this.findToc);\n              //목차\n              _this.outlines = new _Outlines.Outlines();\n              _context3.prev = 19;\n              _context3.next = 22;\n              return _this.pdfDocument.getPage(1);\n            case 22:\n              _this.firstPage = _context3.sent;\n              _this.firstScale = _this.firstPage.getViewport({\n                scale: 1\n              });\n              _context3.next = 28;\n              break;\n            case 26:\n              _context3.prev = 26;\n              _context3.t0 = _context3["catch"](19);\n            case 28:\n              _context3.prev = 28;\n              _context3.next = 31;\n              return _this.pdfDocument.getPage(_this.totalPages);\n            case 31:\n              _this.lastPage = _context3.sent;\n              _context3.next = 36;\n              break;\n            case 34:\n              _context3.prev = 34;\n              _context3.t1 = _context3["catch"](28);\n            case 36:\n              if (_this.abortController) {\n                _this.abortController.abort();\n                _this.abortController = null;\n              }\n              _this.abortController = new AbortController();\n\n              //왼쪽에있는 element클릭 콜백.\n              _this.elementBuilder.callbackOpt = {\n                /**\n                 * 페이지모드 클릭\n                 */\n                onClickViewMode: function onClickViewMode(type) {\n                  _this.setPageMode(type);\n                },\n                /**\n                 * 필기모드 변경 클릭\n                 */\n                onClickAnnotaion: function onClickAnnotaion(type, isAnnotaion) {\n                  /**\n                   * annotation모드 대상\n                   */\n                  if (type == \'Eraser\') {\n                    _this.canvasManager.currentEraser = _pdfTypes.PdfAnnotationType.Eraser.OBJECT;\n                  } else if (type == \'Color\') {\n                    _this.canvasManager.currentColor = type;\n                  } else if (type == \'Select\') {\n                    _this.canvasManager.editAnnotation = false;\n                  } else if (type == \'Next\') {\n                    _this.canvasManager.moveNextHistory();\n                  } else if (type == \'Prev\') {\n                    _this.canvasManager.movePrevHistory();\n                  } else {\n                    _this.canvasManager.currentAnnoataionMode = type;\n                  }\n                }\n              };\n\n              /** rendering Queue */\n              _this.renderer = new _Renderer.Renderer(_this.elementBuilder.elements.documentScrollContainer, _this.elementBuilder.elements.virtualListBody, _this.totalPages + 1, _this.perfomance, /*#__PURE__*/function () {\n                var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(t) {\n                  return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n                    while (1) switch (_context2.prev = _context2.next) {\n                      case 0:\n                        _classPrivateFieldGet(_runTask, _this).call(_this, t);\n                      case 1:\n                      case "end":\n                        return _context2.stop();\n                    }\n                  }, _callee2);\n                }));\n                return function (_x3) {\n                  return _ref3.apply(this, arguments);\n                };\n              }(), null, function (renderedItem) {\n                //현재 화면에 보여지는 일부를 제외하곤 canvas를 제거해준다.\n                for (var index = 0; index < _this.renderItems.length; index++) {\n                  var view = _this.renderItems[index];\n                  if (!renderedItem.has(index)) {\n                    view.clear();\n                  }\n                }\n              });\n\n              /** canvas manager */\n              _this.canvasManager = new _DrawingCanvas.CanvasManager({\n                containerElement: _this.elementBuilder.elements.documentScrollContainer,\n                requestPageViewport: function requestPageViewport(targeCanvaNumber) {\n                  var _this$renderItems$tar;\n                  return (_this$renderItems$tar = _this.renderItems[targeCanvaNumber]) === null || _this$renderItems$tar === void 0 ? void 0 : _this$renderItems$tar.viewport;\n                },\n                requestPageScale: function requestPageScale(targeCanvaNumber) {\n                  var _this$renderItems$tar2;\n                  return (_this$renderItems$tar2 = _this.renderItems[targeCanvaNumber]) === null || _this$renderItems$tar2 === void 0 ? void 0 : _this$renderItems$tar2.scale;\n                },\n                requestPageRotate: function requestPageRotate(targeCanvaNumber) {\n                  var _this$renderItems$tar3;\n                  return (_this$renderItems$tar3 = _this.renderItems[targeCanvaNumber]) === null || _this$renderItems$tar3 === void 0 ? void 0 : _this$renderItems$tar3.rotation;\n                },\n                requestPageCtx: function requestPageCtx(targeCanvaNumber) {\n                  var _this$renderItems$tar4;\n                  return (_this$renderItems$tar4 = _this.renderItems[targeCanvaNumber]) === null || _this$renderItems$tar4 === void 0 ? void 0 : _this$renderItems$tar4.cacheCtx;\n                },\n                annotations: params === null || params === void 0 ? void 0 : params.annotations,\n                onHistoryChanged: _this.callbackOpt.onAnnotationHistoryChanged\n              });\n              _this.printManager = new _PrintManager.PrintManager({\n                pdfDocument: _this.pdfDocument\n              });\n\n              //Event Binding\n              _assertClassBrand(_PdfCore_brand, _this, _addEvent).call(_this);\n              //사전아이템 세팅\n              _assertClassBrand(_PdfCore_brand, _this, _addPreContents).call(_this);\n              //page mode set\n              _this.setPageMode(_this.currentPageMode);\n              try {\n                _this.pdfDocument.getOutline().then(function (outline) {\n                  if (outline) {\n                    _this.outlines.gether(outline, _this.pdfDocument).then(function () {\n                      if (typeof _this.callbackOpt.onOutlineReady == \'function\') {\n                        _this.callbackOpt.onOutlineReady(_toConsumableArray(_this.outlines.toc));\n                      }\n                    })["catch"](function (err) {\n                      console.error(\'목차 파싱 실패.\', err);\n                    });\n                  } else {\n                    if (typeof _this.callbackOpt.onOutlineReady == \'function\') {\n                      _this.callbackOpt.onOutlineReady([]);\n                    }\n                  }\n                })["catch"](function (err) {\n                  console.error(\'목차 파싱 실패\', err);\n                });\n              } catch (err) {\n                console.error(\'목차 파싱 실패,\', err);\n              }\n              // try {\n              //   this.attachment = await this.pdfDocument.getAttachments();\n              // } catch (err) {\n              //   console.error(err);\n              // }\n              // try {\n              //   this.contentConfig = await this.pdfDocument.getOptionalContentConfig();\n              // } catch (err) {}\n              // try {\n              //   this.labels = await this.pdfDocument.getPageLabels();\n              // } catch (err) {}\n              // try {\n              //   this.metadata = await this.pdfDocument.getMetadata();\n              // } catch (err) {}\n\n              // this.objects = await this.pdfDocument.getFieldObjects();\n              // this.hasjsaction = await this.pdfDocument.hasJSActions();\n              // this.jsaction = await this.pdfDocument.getJSActions();\n              // this.action = await this.pdfDocument.getOpenAction();\n              // this.calcul = await this.pdfDocument.getCalculationOrderIds();\n              // this.destinations = await this.pdfDocument.getDestinations();\n              // this.storage = this.pdfDocument.annotationStorage;\n              // this.data = await this.pdfDocument.getData();\n              // const d = await this.pdfDocument.getJSActions();\n\n              // this.pdfDocument.saveDocument()\n              // console.log(this);\n              // console.log(this.pdfDocument);\n            case 46:\n            case "end":\n              return _context3.stop();\n          }\n        }, _callee3, null, [[19, 26], [28, 34]]);\n      }));\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n    _classPrivateFieldInitSpec(this, _unload, function () {\n      var _this$renderer2, _this$outlines2, _this$keyboardControl2, _this$pdfDocument, _this$mouseControl2, _this$canvasManager4;\n      (_this$renderer2 = _this.renderer) === null || _this$renderer2 === void 0 || _this$renderer2.destroy();\n      (_this$outlines2 = _this.outlines) === null || _this$outlines2 === void 0 || _this$outlines2.destroy();\n      (_this$keyboardControl2 = _this.keyboardControl) === null || _this$keyboardControl2 === void 0 || _this$keyboardControl2.destroy();\n      (_this$pdfDocument = _this.pdfDocument) === null || _this$pdfDocument === void 0 || _this$pdfDocument.destroy();\n      (_this$mouseControl2 = _this.mouseControl) === null || _this$mouseControl2 === void 0 || _this$mouseControl2.destroy();\n      (_this$canvasManager4 = _this.canvasManager) === null || _this$canvasManager4 === void 0 || _this$canvasManager4.destroy();\n      _this.annotationFactory = null;\n      _this.renderItems = null;\n      _this.currentUserScale = null;\n      _this.currentPage = null;\n      _this.pdfDocument = null;\n      _this.totalPages = null;\n      _this.outline = null;\n      _this.renderer = null;\n      _this.outlines = null;\n      _this.keyboardControl = null;\n      _this.pdfDocument = null;\n      _this.mouseControl = null;\n      _this.canvasManager = null;\n    });\n    /**\n     * 전체 앨리먼트 높이 계산.\n     * @returns\n     */\n    _classPrivateFieldInitSpec(this, _getTotalHeight, function () {\n      return _this.renderItems.slice(1).reduce(function (sum, item) {\n        return sum + item.pageSize.height;\n      }, 0);\n    });\n    /**\n     * 가장큰 앨리먼트 사이즈 계산.\n     */\n    _classPrivateFieldInitSpec(this, _getMaxWidth, function () {\n      return Math.max.apply(Math, _toConsumableArray(_this.renderItems.map(function (it) {\n        return it.pageSize.width;\n      })));\n    });\n    /**\n     * 가장작은 앨리먼트 사이즈 계산.\n     */\n    _classPrivateFieldInitSpec(this, _getMinWidth, function () {\n      return Math.min.apply(Math, _toConsumableArray(_this.renderItems.map(function (it) {\n        return it.pageSize.width;\n      })));\n    });\n    /**\n     * 가장큰 앨리먼트 사이즈 계산.\n     */\n    _classPrivateFieldInitSpec(this, _getMaxHeight, function () {\n      return Math.max.apply(Math, _toConsumableArray(_this.renderItems.map(function (it) {\n        return it.pageSize.height;\n      })));\n    });\n    /**\n     * 현재 목차찾기.\n     * @returns\n     */\n    _classPrivateFieldInitSpec(this, _findCurrentToc, function () {\n      return _this.findToc(_this.currentPage);\n    });\n    /**\n     * 목차 찾기 기능\n     * @param {number} findPageNum\n     * @returns\n     */\n    _defineProperty(this, "findToc", function (findPageNum) {\n      var _this$outlines3, _this$outlines4;\n      if (!((_this$outlines3 = _this.outlines) !== null && _this$outlines3 !== void 0 && _this$outlines3.toc)) {\n        return;\n      }\n      if (((_this$outlines4 = _this.outlines) === null || _this$outlines4 === void 0 || (_this$outlines4 = _this$outlines4.toc) === null || _this$outlines4 === void 0 ? void 0 : _this$outlines4.length) == 0) {\n        return;\n      }\n      if (!isFinite(findPageNum)) {\n        return;\n      }\n\n      // 현재 페이지보다 작거나 같은 목차 중 가장 마지막 것을 찾는다\n      var currentToc = null;\n      for (var i = 0; i < _this.outlines.toc.length; i++) {\n        var tocPage = _this.outlines.toc[i];\n        if (tocPage.pageNum > findPageNum) {\n          break;\n        }\n        currentToc = tocPage;\n      }\n      return currentToc;\n    });\n    /**\n     * 페이지 모드 변경\n     * @param {PageMode} mode\n     */\n    _defineProperty(this, "setPageMode", /*#__PURE__*/function () {\n      var _ref4 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(mode) {\n        var _this$callbackOpt;\n        var is, rect, isDual, _this$callbackOpt2, toc;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              is = false;\n              if (_this.currentPageMode == _viewerType.PageMode.SCROLL && _this.currentPageMode != mode) {\n                /**\n                 * 스크롤모드 -> 페이지모드 이동시 스크롤 진행중에 모드변경하면 백지현상 수정\n                 */\n                _this.elementBuilder.elements.documentScrollContainer.style.overflow = \'hidden\';\n                is = true;\n                _assertClassBrand(_PdfCore_brand, _this, _cleanContents).call(_this);\n                _assertClassBrand(_PdfCore_brand, _this, _abortScrollEvent).call(_this);\n              }\n              if (mode == _viewerType.PageMode.DUAL) {\n                _this.currentPageMode = mode;\n              } else if (mode == _viewerType.PageMode.FIRST_DUAL) {\n                _this.currentPageMode = mode;\n              } else if (mode == _viewerType.PageMode.SCROLL) {\n                _this.currentPageMode = mode;\n                _assertClassBrand(_PdfCore_brand, _this, _cleanContents).call(_this);\n                _assertClassBrand(_PdfCore_brand, _this, _abortScrollEvent).call(_this);\n                _assertClassBrand(_PdfCore_brand, _this, _addScrollEvent).call(_this);\n              } else if (mode == _viewerType.PageMode.SINGLE) {\n                _this.currentPageMode = mode;\n              }\n              document.body.dataset.pagemode = _this.currentPageMode;\n\n              /**\n               * 페이지 지정하기전 한번더 체크\n               */\n              _classPrivateFieldGet(_validateCurrentPage, _this).call(_this);\n              //컨텐츠 추가\n              _assertClassBrand(_PdfCore_brand, _this, _addContents).call(_this);\n              // 리사이즈 되는 동안에는 레이아웃들이 parents사이즈에 맞게 재정렬 될수있도록 리사이징\n              rect = _assertClassBrand(_PdfCore_brand, _this, _getParentRect).call(_this);\n              isDual = _this.currentPageMode == _viewerType.PageMode.DUAL || _this.currentPageMode == _viewerType.PageMode.FIRST_DUAL;\n              _this.renderItems.forEach(function (it) {\n                it.preCalc(rect, isDual, _this.currentUserScale);\n              });\n              //스크롤 안쪽 컨테이너 사이즈조정\n              _assertClassBrand(_PdfCore_brand, _this, _updateScrollContainerSize).call(_this);\n              //스크롤모드엔 페이지 이동\n              if (_this.currentPageMode == _viewerType.PageMode.SCROLL) {\n                _this.gotoPage(_this.currentPage);\n              }\n\n              //worker에 canvas요청\n              _this.renderer.prioritizeVisiblePages(_this.currentPage);\n              if (is) {\n                /**\n                 * 스크롤모드 -> 페이지모드 이동시 스크롤 진행중에 모드변경하면 백지현상 수정\n                 */\n                _this.elementBuilder.elements.documentScrollContainer.style.overflow = \'auto\';\n                _assertClassBrand(_PdfCore_brand, _this, _addScrollEvent).call(_this);\n              }\n\n              //페이지 변경 콜백\n              if (typeof ((_this$callbackOpt = _this.callbackOpt) === null || _this$callbackOpt === void 0 ? void 0 : _this$callbackOpt.onPageChanged) == \'function\') {\n                toc = _classPrivateFieldGet(_findCurrentToc, _this).call(_this);\n                (_this$callbackOpt2 = _this.callbackOpt) === null || _this$callbackOpt2 === void 0 || _this$callbackOpt2.onPageChanged(_this.currentPage, _this.totalPages, toc === null || toc === void 0 ? void 0 : toc.title);\n              }\n            case 14:\n            case "end":\n              return _context4.stop();\n          }\n        }, _callee4);\n      }));\n      return function (_x4) {\n        return _ref4.apply(this, arguments);\n      };\n    }());\n    /**\n     * 다음 페이지로 이동\n     */\n    _defineProperty(this, "gotoNextPage", /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n      var isDual, movedPage, isLast;\n      return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n        while (1) switch (_context5.prev = _context5.next) {\n          case 0:\n            isDual = _this.currentPageMode == _viewerType.PageMode.DUAL || _this.currentPageMode == _viewerType.PageMode.FIRST_DUAL;\n            movedPage = Math.min(isDual ? _this.currentPage + 2 : _this.currentPage + 1, _this.totalPages);\n            isLast = isDual ? _this.currentPage === movedPage || _this.currentPage === movedPage - 1 : _this.currentPage === movedPage;\n            if (!isLast) {\n              _context5.next = 7;\n              break;\n            }\n            if (typeof _this.callbackOpt.onLastPage == \'function\') {\n              _this.callbackOpt.onLastPage();\n            }\n            _context5.next = 8;\n            break;\n          case 7:\n            return _context5.abrupt("return", _this.gotoPage(movedPage));\n          case 8:\n          case "end":\n            return _context5.stop();\n        }\n      }, _callee5);\n    })));\n    /**\n     * 이전 페이지로 이동\n     */\n    _defineProperty(this, "gotoPrevPage", /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n      var isDual, movedPage, isFirst;\n      return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n        while (1) switch (_context6.prev = _context6.next) {\n          case 0:\n            isDual = _this.currentPageMode == _viewerType.PageMode.DUAL || _this.currentPageMode == _viewerType.PageMode.FIRST_DUAL;\n            movedPage = Math.max(isDual ? _this.currentPage - 2 : _this.currentPage - 1, 1);\n            isFirst = _this.currentPage == 1 && _this.currentPage == movedPage;\n            if (!isFirst) {\n              _context6.next = 7;\n              break;\n            }\n            if (typeof _this.callbackOpt.onFirstPage == \'function\') {\n              _this.callbackOpt.onFirstPage();\n            }\n            _context6.next = 8;\n            break;\n          case 7:\n            return _context6.abrupt("return", _this.gotoPage(movedPage));\n          case 8:\n          case "end":\n            return _context6.stop();\n        }\n      }, _callee6);\n    })));\n    /**\n     * 페이지 이동\n     * @param {number} page 페이지 번호\n     * @returns\n     */\n    _defineProperty(this, "gotoPage", /*#__PURE__*/function () {\n      var _ref7 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(page) {\n        return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n          while (1) switch (_context7.prev = _context7.next) {\n            case 0:\n              return _context7.abrupt("return", _classPrivateFieldGet(_setPage, _this).call(_this, page));\n            case 1:\n            case "end":\n              return _context7.stop();\n          }\n        }, _callee7);\n      }));\n      return function (_x5) {\n        return _ref7.apply(this, arguments);\n      };\n    }());\n    /**\n     * 검색 페이지 이동\n     * @param {SearchMatch} searchParam 페이지 번호\n     */\n    _defineProperty(this, "gotoSearchPage", /*#__PURE__*/function () {\n      var _ref8 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(searchParam) {\n        var pageNum, index, match, snippet;\n        return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n          while (1) switch (_context8.prev = _context8.next) {\n            case 0:\n              pageNum = searchParam.pageNum, index = searchParam.index, match = searchParam.match, snippet = searchParam.snippet;\n              _context8.next = 3;\n              return _this.gotoPage(pageNum);\n            case 3:\n              if (_this.reachSearchTimer) {\n                clearTimeout(_this.reachSearchTimer);\n                _this.reachSearchTimer = null;\n              }\n              _this.reachSearchTimer = setInterval(function () {\n                if (_this.renderItems[pageNum].renderingTimerTextLayer == null) {\n                  // this.renderItems[pageNum].textInfo.forEach(info => {\n                  //   info.text;\n                  // });\n                  if (_this.reachSearchTimer) {\n                    clearTimeout(_this.reachSearchTimer);\n                    _this.reachSearchTimer = null;\n                  }\n                }\n              }, 1000);\n            case 5:\n            case "end":\n              return _context8.stop();\n          }\n        }, _callee8);\n      }));\n      return function (_x6) {\n        return _ref8.apply(this, arguments);\n      };\n    }());\n    /**\n     * 페이지가 항상 유지되도록 체크\n     */\n    _classPrivateFieldInitSpec(this, _validateCurrentPage, function () {\n      //짝수\n      if (_this.currentPageMode == _viewerType.PageMode.FIRST_DUAL) {\n        if (_this.currentPage != 1) {\n          if (_this.currentPage % 2 != 0) {\n            _this.currentPage -= 1;\n            return true;\n          }\n        }\n      }\n      //홀수\n      else if (_this.currentPageMode == _viewerType.PageMode.DUAL) {\n        if (_this.currentPage != 1) {\n          if (_this.currentPage % 2 == 0) {\n            _this.currentPage += 1;\n            return true;\n          }\n        }\n      }\n      return false;\n    });\n    /**\n     * private 페이지 이동\n     * @param {number} page 페이지 번호\n     */\n    _classPrivateFieldInitSpec(this, _setPage, /*#__PURE__*/function () {\n      var _ref9 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9(page) {\n        var gotooffset;\n        return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n          while (1) switch (_context9.prev = _context9.next) {\n            case 0:\n              if ((0, _ui.validateNumberInput)(page)) {\n                _context9.next = 2;\n                break;\n              }\n              throw new Error(\'Parameter values ​​must be of number type.\');\n            case 2:\n              _this.currentPage = page;\n              if (!(_this.currentPageMode == _viewerType.PageMode.DUAL)) {\n                _context9.next = 7;\n                break;\n              }\n              _this.setPageMode();\n              _context9.next = 21;\n              break;\n            case 7:\n              if (!(_this.currentPageMode == _viewerType.PageMode.FIRST_DUAL)) {\n                _context9.next = 11;\n                break;\n              }\n              _this.setPageMode();\n              _context9.next = 21;\n              break;\n            case 11:\n              if (!(_this.currentPageMode == _viewerType.PageMode.SCROLL)) {\n                _context9.next = 16;\n                break;\n              }\n              gotooffset = _this.renderItems[_this.currentPage].element.offsetTop + _this.elementBuilder.elements.virtualListBody.offsetTop;\n              _this.elementBuilder.elements.documentScrollContainer.scrollTop = gotooffset;\n              _context9.next = 21;\n              break;\n            case 16:\n              if (!(_this.currentPageMode == _viewerType.PageMode.SINGLE)) {\n                _context9.next = 20;\n                break;\n              }\n              _this.setPageMode();\n              _context9.next = 21;\n              break;\n            case 20:\n              throw new Error(\'정의되지 않은 페이지모드\');\n            case 21:\n            case "end":\n              return _context9.stop();\n          }\n        }, _callee9);\n      }));\n      return function (_x7) {\n        return _ref9.apply(this, arguments);\n      };\n    }());\n    /**\n     * 페이지 task run\n     * @param {number} page\n     * @returns\n     */\n    _classPrivateFieldInitSpec(this, _runTask, /*#__PURE__*/function () {\n      var _ref0 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee0(page) {\n        var taskPage, view;\n        return _regeneratorRuntime().wrap(function _callee0$(_context0) {\n          while (1) switch (_context0.prev = _context0.next) {\n            case 0:\n              // console.log(\'==runtask\', page);\n              taskPage = page;\n              view = _this.renderItems[page];\n              if (!(page <= 0)) {\n                _context0.next = 4;\n                break;\n              }\n              return _context0.abrupt("return", true);\n            case 4:\n              if (view) {\n                _context0.next = 6;\n                break;\n              }\n              return _context0.abrupt("return", true);\n            case 6:\n              if (!(view.taskStatus === _viewerType.TaskType.LOADING || view.taskStatus === _viewerType.TaskType.COMPLETE)) {\n                _context0.next = 9;\n                break;\n              }\n              // annotation update\n              _this.canvasManager.requestPageInvalidate(page);\n              return _context0.abrupt("return", true);\n            case 9:\n              view.taskStatus = _viewerType.TaskType.LOADING;\n\n              // PDF 페이지를 렌더링 요청\n              _context0.next = 12;\n              return _classPrivateFieldGet(_loadPdf, _this).call(_this, taskPage);\n            case 12:\n              return _context0.abrupt("return", true);\n            case 13:\n            case "end":\n              return _context0.stop();\n          }\n        }, _callee0);\n      }));\n      return function (_x8) {\n        return _ref0.apply(this, arguments);\n      };\n    }());\n    /**\n     * PDF 페이지를 렌더링 요청\n     * @param {number} page\n     * @returns\n     */\n    _classPrivateFieldInitSpec(this, _loadPdf, /*#__PURE__*/function () {\n      var _ref1 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee10(page) {\n        var view, pdfPage, canvas, ctx, isPcWindow, devicePixelRatio, viewport, _viewport, llxParent, llyParent, urxParent, uryParent, originalWidth, originalHeight, optimalScale, MAX_MB_LIMIT, MAX_LIMIT, MIN_SCALE_LIMIT, isAppleMobile, finalScale, viewportRescale, currentPx, scaleFactor, renderContext, rendered, old, _ctx, stream;\n        return _regeneratorRuntime().wrap(function _callee10$(_context10) {\n          while (1) switch (_context10.prev = _context10.next) {\n            case 0:\n              view = _this.renderItems[page]; // console.time(\'loadPdf\' + page);\n              _context10.prev = 1;\n              if (!view.pdfPage) {\n                _context10.next = 6;\n                break;\n              }\n              view.pdfPage = pdfPage;\n              _context10.next = 12;\n              break;\n            case 6:\n              _context10.next = 8;\n              return _this.pdfDocument.getPage(page);\n            case 8:\n              pdfPage = _context10.sent;\n              view.pageInfo = pdfPage._pageInfo;\n              view.viewBox = pdfPage.getViewport(1).viewBox;\n              view.rotation = pdfPage.getViewport(1).rotation;\n            case 12:\n              canvas = _this.elementBuilder.createCanvas();\n              canvas.dataset.page = page;\n              ctx = canvas.getContext(\'2d\', {\n                alpha: false,\n                willReadFrequently: false\n              });\n              ctx.imageSmoothingEnabled = false;\n              isPcWindow = !_this.perfomance.isApple && _this.perfomance.deviceType == \'pc\';\n              devicePixelRatio = window.devicePixelRatio == 1 && isPcWindow ? PixelsPerInch.PDF_TO_CSS_UNITS : window.devicePixelRatio;\n              viewport = pdfPage.view;\n              _viewport = _slicedToArray(viewport, 4), llxParent = _viewport[0], llyParent = _viewport[1], urxParent = _viewport[2], uryParent = _viewport[3];\n              originalWidth = urxParent - llxParent; // PDF 페이지의 원본 너비\n              originalHeight = uryParent - llyParent; // PDF 페이지의 원본 높이\n              canvas.dataset.width = originalWidth;\n              canvas.dataset.height = originalHeight;\n              optimalScale = (0, _ui.calculateOptimalScale)(view.pageSize.width, view.pageSize.height, originalWidth, originalHeight); // optimize pdf canvas memory\n              // pc는 50mb상한, 모바일 10mb상한\n              MAX_MB_LIMIT = _this.perfomance.deviceType == \'pc\' ? 25 : 2;\n              MAX_LIMIT = MAX_MB_LIMIT * 1024 * 1024;\n              MIN_SCALE_LIMIT = 0.6; // 특정 스케일 이하로 떨지면 canvas에 표현자체가 안되는버그가있다.\n              isAppleMobile = _this.perfomance.deviceType == \'mobile\' && _this.perfomance.isApple;\n              if (isAppleMobile) {\n                finalScale = Math.max(optimalScale, MIN_SCALE_LIMIT) * devicePixelRatio;\n              } else {\n                finalScale = optimalScale * devicePixelRatio;\n              }\n              viewportRescale = pdfPage.getViewport({\n                scale: finalScale\n              }); // 랜더링하려는 canvas px값\n              currentPx = viewportRescale.width * viewportRescale.height; // apple 모바일 일경우 무조건 체큰\n              if (currentPx > MAX_LIMIT || isAppleMobile) {\n                //넘치면 여기서 viewPort 재계산\n                scaleFactor = Math.sqrt(MAX_LIMIT / currentPx); // 비율 계산\n                viewportRescale = pdfPage.getViewport({\n                  scale: finalScale * scaleFactor\n                });\n              } else if (isPcWindow) {\n                viewportRescale = pdfPage.getViewport({\n                  scale: finalScale * 1.3333\n                });\n              }\n              //\n              renderContext = {\n                canvasContext: ctx,\n                viewport: viewportRescale\n              };\n              view.viewport = viewportRescale;\n              canvas.width = Math.floor(viewportRescale.width);\n              canvas.height = Math.floor(viewportRescale.height);\n              if (!(_this.currentPageMode == _viewerType.PageMode.SCROLL)) {\n                _context10.next = 41;\n                break;\n              }\n              setTimeout(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee1() {\n                var rendered, old, stream;\n                return _regeneratorRuntime().wrap(function _callee1$(_context1) {\n                  while (1) switch (_context1.prev = _context1.next) {\n                    case 0:\n                      _context1.prev = 0;\n                      if (!(view.taskStatus == _viewerType.TaskType.LOADING)) {\n                        _context1.next = 26;\n                        break;\n                      }\n                      if (!(_this.renderer.visiblePageCount < Math.abs(page - _this.currentPage))) {\n                        _context1.next = 6;\n                        break;\n                      }\n                      // console.log(\'랜더링이 필요 없을지도?1\', page);\n                      pdfPage.cleanup(true);\n                      // rendered.cancel();\n                      view.reset();\n                      return _context1.abrupt("return");\n                    case 6:\n                      rendered = pdfPage.render(renderContext);\n                      if (!(_this.renderer.visiblePageCount < Math.abs(page - _this.currentPage))) {\n                        _context1.next = 12;\n                        break;\n                      }\n                      // console.log(\'랜더링이 필요 없을지도?2\', page);\n                      pdfPage.cleanup(true);\n                      rendered.cancel();\n                      view.reset();\n                      return _context1.abrupt("return");\n                    case 12:\n                      _context1.next = 14;\n                      return rendered.promise;\n                    case 14:\n                      if (!(_this.renderer.visiblePageCount < Math.abs(page - _this.currentPage))) {\n                        _context1.next = 19;\n                        break;\n                      }\n                      // console.log(\'랜더링이 필요 없을지도?3\', page);\n                      pdfPage.cleanup(true);\n                      rendered.cancel();\n                      view.reset();\n                      return _context1.abrupt("return");\n                    case 19:\n                      view.taskStatus = _viewerType.TaskType.COMPLETE;\n                      old = view.pageContainer.querySelector(\'canvas\');\n                      if (old) {\n                        old.width = Math.floor(viewportRescale.width);\n                        old.height = Math.floor(viewportRescale.height);\n                        view.pageContainer.replaceChild(canvas, old);\n                      } else {\n                        view.pageContainer.appendChild(canvas);\n                        canvas = null;\n                      }\n                      // view 업데이트\n                      view.update();\n                      //annotation 업데이트\n                      _this.canvasManager.requestPageInvalidate(page);\n                      // console.timeEnd(\'loadPdf\' + page);\n                      if (!view.loadTextContents) {\n                        view.loadTextContents = true;\n                        stream = pdfPage.streamTextContent({\n                          includeMarkedContent: true,\n                          disableNormalization: true\n                        });\n                        view.setTextContent(stream);\n                      }\n                      if (!view.loadAnnotation) {\n                        view.loadAnnotation = true;\n                        pdfPage.getAnnotations().then(function (annotations) {\n                          view.setAnnotation(annotations, _this.currentUserScale);\n                        })["catch"](function (err) {});\n                      }\n                    case 26:\n                      _context1.next = 32;\n                      break;\n                    case 28:\n                      _context1.prev = 28;\n                      _context1.t0 = _context1["catch"](0);\n                      view.reset();\n                      console.error(\'load pdf error2 => \', _context1.t0);\n                    case 32:\n                    case "end":\n                      return _context1.stop();\n                  }\n                }, _callee1, null, [[0, 28]]);\n              })), 300);\n              _context10.next = 73;\n              break;\n            case 41:\n              _context10.prev = 41;\n              if (!(view.taskStatus == _viewerType.TaskType.LOADING)) {\n                _context10.next = 67;\n                break;\n              }\n              if (!(_this.renderer.visiblePageCount < Math.abs(page - _this.currentPage))) {\n                _context10.next = 47;\n                break;\n              }\n              // console.log(\'랜더링이 필요 없을지도?1\', page);\n              pdfPage.cleanup(true);\n              // rendered.cancel();\n              view.reset();\n              return _context10.abrupt("return");\n            case 47:\n              rendered = pdfPage.render(renderContext);\n              if (!(_this.renderer.visiblePageCount < Math.abs(page - _this.currentPage))) {\n                _context10.next = 53;\n                break;\n              }\n              // console.log(\'랜더링이 필요 없을지도?2\', page);\n              pdfPage.cleanup(true);\n              rendered.cancel();\n              view.reset();\n              return _context10.abrupt("return");\n            case 53:\n              _context10.next = 55;\n              return rendered.promise;\n            case 55:\n              if (!(_this.renderer.visiblePageCount < Math.abs(page - _this.currentPage))) {\n                _context10.next = 60;\n                break;\n              }\n              // console.log(\'랜더링이 필요 없을지도?3\', page);\n              pdfPage.cleanup(true);\n              rendered.cancel();\n              view.reset();\n              return _context10.abrupt("return");\n            case 60:\n              view.taskStatus = _viewerType.TaskType.COMPLETE;\n              //이전캔버스\n              old = view.pageContainer.querySelector(\'canvas\');\n              if (old) {\n                old.width = Math.floor(viewportRescale.width);\n                old.height = Math.floor(viewportRescale.height);\n                _ctx = old.getContext(\'2d\', {\n                  alpha: false,\n                  willReadFrequently: false\n                });\n                _ctx.clearRect(0, 0, old.width, old.height);\n                _ctx.drawImage(canvas, 0, 0, old.width, old.height);\n                canvas.width = 0;\n                canvas.height = 0;\n                canvas.remove();\n                canvas = null;\n                old = null;\n              } else {\n                //캔버스가 없으면 추가\n                view.pageContainer.appendChild(canvas);\n                canvas = null;\n              }\n              // view 업데이트\n              view.update();\n              //annotation 업데이트\n              _this.canvasManager.requestPageInvalidate(page);\n              // console.timeEnd(\'loadPdf\' + page);\n              if (!view.loadTextContents) {\n                view.loadTextContents = true;\n                stream = pdfPage.streamTextContent({\n                  includeMarkedContent: true,\n                  disableNormalization: true\n                });\n                view.setTextContent(stream);\n              }\n              if (!view.loadAnnotation) {\n                view.loadAnnotation = true;\n                pdfPage.getAnnotations().then(function (annotations) {\n                  view.setAnnotation(annotations, _this.currentUserScale);\n                })["catch"](function (err) {});\n              }\n            case 67:\n              _context10.next = 73;\n              break;\n            case 69:\n              _context10.prev = 69;\n              _context10.t0 = _context10["catch"](41);\n              view.reset();\n              console.error(\'load pdf error2 => \', _context10.t0);\n            case 73:\n              return _context10.abrupt("return", true);\n            case 76:\n              _context10.prev = 76;\n              _context10.t1 = _context10["catch"](1);\n              console.error(\'load pdf error => \', _context10.t1);\n            case 79:\n            case "end":\n              return _context10.stop();\n          }\n        }, _callee10, null, [[1, 76], [41, 69]]);\n      }));\n      return function (_x9) {\n        return _ref1.apply(this, arguments);\n      };\n    }());\n    /**\n     * [스크롤시] 정보를 업데이트한다.\n     */\n    _classPrivateFieldInitSpec(this, _updateScrollInfo, function () {\n      _this.isScrolling = true;\n      if (_this.scrollTimer) {\n        clearTimeout(_this.scrollTimer);\n        _this.scrollTimer = null;\n      }\n      _this.scrollTimer = setTimeout(function () {\n        _this.isScrolling = false;\n        _this.scrollTimer = null;\n      }, 300);\n      var _this$elementBuilder$ = _this.elementBuilder.elements.documentScrollContainer,\n        scrollTop = _this$elementBuilder$.scrollTop,\n        scrollLeft = _this$elementBuilder$.scrollLeft;\n      var children = _this.elementBuilder.elements.virtualListBody.children;\n      if (children.length === 0) return;\n\n      // 현재 scrollTop과 scrollLeft에 가장 가까운 자식 요소 찾기\n      var closestChild = children[0];\n      for (var i = 1; i < children.length; i++) {\n        if (children[i].offsetTop > scrollTop && children[i].offsetLeft > scrollLeft) break;\n        closestChild = children[i];\n      }\n\n      // 자식 요소 내 상대적 비율 계산 (0 ~ 1 사이)\n      var offsetWithinChildTop = scrollTop - closestChild.offsetTop;\n      var childHeight = closestChild.offsetHeight;\n      var topRatio = childHeight > 0 ? offsetWithinChildTop / childHeight : 0;\n      var offsetWithinChildLeft = scrollLeft - closestChild.offsetLeft;\n      var childWidth = closestChild.offsetWidth;\n      var leftRatio = childWidth > 0 ? offsetWithinChildLeft / childWidth : 0;\n      _this.lastScrollInfo = {\n        index: Array.from(children).indexOf(closestChild),\n        topRatio: topRatio,\n        leftRatio: leftRatio\n      };\n    });\n    /**\n     * [라사이즈시] #updateScrollInfo으로 저장한 값 기준 마지막 보았던 위치로 이동시킨다.\n     */\n    _classPrivateFieldInitSpec(this, _restoreScrollPosition, function () {\n      var _this$lastScrollInfo = _this.lastScrollInfo,\n        index = _this$lastScrollInfo.index,\n        topRatio = _this$lastScrollInfo.topRatio,\n        leftRatio = _this$lastScrollInfo.leftRatio;\n      var children = _this.elementBuilder.elements.virtualListBody.children;\n      if (index >= children.length) return;\n      var targetChild = children[index];\n      var newScrollTop = targetChild.offsetTop + _this.elementBuilder.elements.virtualListBody.offsetTop + targetChild.offsetHeight * topRatio;\n      var newScrollLeft = targetChild.offsetLeft + targetChild.offsetWidth * leftRatio;\n      _this.elementBuilder.elements.documentScrollContainer.scrollTo({\n        top: newScrollTop,\n        left: newScrollLeft,\n        behavior: \'instant\'\n      });\n    });\n    /**\n     * 사전계산, 가상 스크롤 컨테이너 사이즈 재정렬\n     * @param {boolean} isRequestLoadpage loadPage요청\n     */\n    _classPrivateFieldInitSpec(this, _validate, function () {\n      var isRequestLoadpage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      /**\n       * 스크롤모드 -> 페이지모드 이동시 스크롤 진행중에 모드변경하면 백지현상 수정\n       */\n      if (_this.currentPageMode == _viewerType.PageMode.SCROLL) {\n        _this.elementBuilder.elements.documentScrollContainer.style.overflow = \'hidden\';\n      }\n\n      //scroll listner잠시 해제\n      _assertClassBrand(_PdfCore_brand, _this, _abortScrollEvent).call(_this);\n      if (_this.resizeTimer) {\n        clearTimeout(_this.resizeTimer);\n        _this.resizeTimer = null;\n      }\n      _this.resizeTimer = setTimeout(function () {\n        //canvas 요청전 task값 초기화\n        _this.renderItems.forEach(function (it) {\n          it.reset();\n        });\n\n        //scroll listner 복구\n        _assertClassBrand(_PdfCore_brand, _this, _addScrollEvent).call(_this);\n\n        // const rect = this.#getParentRect();\n        // const isDual =\n        //   this.currentPageMode == PageMode.DUAL ||\n        //   this.currentPageMode == PageMode.FIRST_DUAL;\n        // this.renderItems.forEach(it => {\n        //   it.preCalc(rect, isDual, this.currentUserScale);\n        // });\n\n        // this.#updateScrollContainerSize();\n\n        if (isRequestLoadpage) {\n          _this.renderer.prioritizeVisiblePages(_this.currentPage);\n        }\n      }, 300);\n      // 리사이즈 되는 동안에는 레이아웃들이 parents사이즈에 맞게 재정렬 될수있도록 리사이징\n      var rect = _assertClassBrand(_PdfCore_brand, _this, _getParentRect).call(_this);\n      var isDual = _this.currentPageMode == _viewerType.PageMode.DUAL || _this.currentPageMode == _viewerType.PageMode.FIRST_DUAL;\n      _this.renderItems.forEach(function (it) {\n        it.preCalc(rect, isDual, _this.currentUserScale);\n      });\n      _assertClassBrand(_PdfCore_brand, _this, _updateScrollContainerSize).call(_this, true);\n\n      /**\n       * 스크롤모드 -> 페이지모드 이동시 스크롤 진행중에 모드변경하면 백지현상 수정\n       */\n      if (_this.currentPageMode == _viewerType.PageMode.SCROLL) {\n        _this.elementBuilder.elements.documentScrollContainer.style.overflow = \'auto\';\n      }\n    });\n    _defineProperty(this, "setRealVH", function () {\n      var vh = window.innerHeight * 0.01;\n      document.documentElement.style.setProperty(\'--vh\', "".concat(vh, "px"));\n    });\n    /**\n     * 스케일 증가 0.1씩\n     */\n    _defineProperty(this, "setScaleIncrease", function () {\n      var newScale = _this.currentUserScale + 0.1;\n      _this.setScale(newScale, true, true);\n      _this.mouseControl.scale = _this.currentUserScale;\n    });\n    /**\n     * 스케일 축소 0.1씩\n     */\n    _defineProperty(this, "setScaleDecrease", function () {\n      var newScale = _this.currentUserScale - 0.1;\n      _this.setScale(newScale, true, true);\n      _this.mouseControl.scale = _this.currentUserScale;\n    });\n    /**\n     * 스케일 1로 복귀\n     */\n    _defineProperty(this, "setScaleOrigin", function () {\n      _this.setScale(1, true, true);\n      _this.mouseControl.scale = _this.currentUserScale;\n    });\n    /**\n     * 스케일을 너비에 맞춤\n     */\n    _defineProperty(this, "setScaleFitWidth", function () {\n      var ratio = _assertClassBrand(_PdfCore_brand, _this, _calculateScaleFitWidthRatio).call(_this);\n      _this.setScale(ratio, true, true);\n      _this.mouseControl.scale = _this.currentUserScale;\n    });\n    /**\n     * 스케일 변경 함수\n     * @param {number} newScale 확대,축소 스케일값\n     * @param {boolean} isRequestLoadpage scale변경후 재랜더링할지 여부\n     * @param {boolean} isGotoPage 보이는 화면 가운대로 이동할지 여부\n     */\n    _defineProperty(this, "setScale", function (newScale) {\n      var _this$callbackOpt$onS, _this$callbackOpt3;\n      var isRequestLoadpage = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var isGotoPage = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var newScrollTop = 0;\n      var newScrollLeft = 0;\n      //동일 스케일일 경우 더이상 작동하지 않도록 flag\n      var isSame = false;\n      if (isGotoPage) {\n        var beforeScale = _this.currentUserScale;\n        var _this$elementBuilder$2 = _this.elementBuilder.elements.documentScrollContainer,\n          scrollTop = _this$elementBuilder$2.scrollTop,\n          scrollLeft = _this$elementBuilder$2.scrollLeft;\n        var y = window.innerHeight / 2;\n        var x = window.innerWidth / 2;\n        newScrollTop = (scrollTop + _this.elementBuilder.elements.virtualListBody.offsetTop + y) * (newScale / beforeScale) - y;\n        newScrollLeft = (scrollLeft + x) * (newScale / beforeScale) - x;\n      }\n      if (typeof newScale == \'number\') {\n        var adaptScale = Math.min(_this.maxUserScale, Math.max(_this.minUserScale, newScale));\n        isSame = adaptScale == _this.currentUserScale;\n\n        //스케일값 세팅\n        _this.currentUserScale = adaptScale;\n      }\n      _assertClassBrand(_PdfCore_brand, _this, _setScaleRootValue).call(_this);\n      //사이즈 재정렬\n      _classPrivateFieldGet(_validate, _this).call(_this, isRequestLoadpage);\n      if (isGotoPage && !isSame) {\n        _this.elementBuilder.elements.documentScrollContainer.scrollTo({\n          top: newScrollTop,\n          left: newScrollLeft,\n          behavior: \'instant\'\n        });\n      }\n      (_this$callbackOpt$onS = (_this$callbackOpt3 = _this.callbackOpt).onScaleChanged) === null || _this$callbackOpt$onS === void 0 || _this$callbackOpt$onS.call(_this$callbackOpt3, _this.currentUserScale);\n    });\n    /*************************************\n     *************** Search **************\n     *************************************/\n    /**\n     * 전체 페이지를 순회하며, 검색어를 포함하는 결과를 콜백으로 전달합니다.\n     * @param {string} keyword 검색어\n     * @param {SearchCallback} callback - 검색 콜백 함수.\n     * @returns {Promise<boolean|null>} 정상 완료 시 true, 중단 시 null 반환.\n     */\n    _defineProperty(this, "search", function () {\n      var keyword = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \'\';\n      var callback = arguments.length > 1 ? arguments[1] : undefined;\n      return _this.searchManager.search(keyword, callback);\n    });\n    /**\n     * 진행 중인 검색을 중단하는 함수\n     * 이 함수를 호출하면 현재 진행 중인 검색 중지됩니다.\n     */\n    _defineProperty(this, "stopSearch", function () {\n      return _this.searchManager.stopSearch();\n    });\n    /*****************************************\n     *************** Annotation **************\n     *****************************************/\n    /**\n     * 수정모드 on/off\n     * @param {boolean} isStart\n     */\n    _defineProperty(this, "annotationEditMode", function (isStart) {\n      if (!(isStart === true || isStart === false)) {\n        throw new Error(\'Value must be boolean\');\n      }\n      _this.canvasManager.editAnnotation = isStart;\n      _this.canvasManager.clearHistory();\n      if (isStart) {\n        _this.upToAnno();\n      } else {\n        _this.upToText();\n      }\n    });\n    /**\n     * 필기모드 변경, 변경시 수정모드도 true\n     * @param {string} type 필기모드 타입\n     */\n    _defineProperty(this, "changeAnnotationType", function (type) {\n      //선지우개, 영역지우개\n      if (type == _pdfTypes.PdfAnnotationType.Eraser.NORMAL || type == _pdfTypes.PdfAnnotationType.Eraser.OBJECT) {\n        _this.canvasManager.currentEraser = type;\n      } else {\n        //그외 필기모드.\n        _this.canvasManager.currentAnnoataionMode = type;\n      }\n      _this.upToAnno();\n    });\n    /**\n     * 색상 변경\n     * @param {Array} color 색상\n     */\n    _defineProperty(this, "changeAnnotationColor", function (color) {\n      if (Array.isArray(color)) {\n        _this.canvasManager.currentColor = new Uint8ClampedArray(color);\n      } else if (typeof color == \'string\') {\n        _this.canvasManager.currentColor = new Uint8ClampedArray((0, _ui.hexToRgb)(color));\n      } else if (color instanceof Uint8ClampedArray) {\n        _this.canvasManager.currentColor = color;\n      }\n    });\n    /**\n     * 불투명도 변경\n     * @param {number} opacity 불투명도 0.1 ~ 1사이 숫자만 가능.\n     */\n    _defineProperty(this, "changeAnnotationOpacity", function (opacity) {\n      if (opacity < 0.1 || opacity > 1) {\n        throw new Error(\'Value must be between 0.1 and 1\');\n      }\n      _this.canvasManager.currentColorAlpha = opacity;\n    });\n    /**\n     * 필기 두께 변경\n     * @param {number} width 선의 너비\n     */\n    _defineProperty(this, "changeAnnotationBorderWidth", function (width) {\n      _this.canvasManager.currentBorderStyle = width;\n    });\n    /**\n     * 지우개의 두께 변경\n     * @param {number} width 선의 너비\n     */\n    _defineProperty(this, "changeAnnotationEraserBorderWidth", function (width) {\n      _this.canvasManager.currentEraserBorderStyle = width;\n    });\n    /**\n     * annotation 제거\n     * @param {string|number} annotationId\n     * @returns\n     */\n    _defineProperty(this, "removeAnnotation", function (annotationId) {\n      return _this.canvasManager.removeAnnotation(annotationId);\n    });\n    /**\n     * annotation 수정\n     * @param {*} willEditedAnnotation\n     * @returns\n     */\n    _defineProperty(this, "modifyAnnotation", function (willEditedAnnotation) {\n      return _this.canvasManager.modifyAnnotation(willEditedAnnotation);\n    });\n    /**\n     * annotation 저장\n     * @param {string|Array} annotations\n     * @returns\n     */\n    _defineProperty(this, "importAnnotations", function (annotations) {\n      return _this.canvasManager.importAnnotations(annotations);\n    });\n    /**\n     * annotation 추출\n     * @returns\n     */\n    _defineProperty(this, "exportAnnotations", function () {\n      return _this.canvasManager.exportAnnotations();\n    });\n    /**\n     * PDF 페이지를 이미지로 추출 요청\n     * @param {number} page 페이지\n     * @param {number} targetWidth 너비\n     * @param {number} targetHeight 높이\n     * @returns\n     */\n    _defineProperty(this, "pdfToImage", /*#__PURE__*/function () {\n      var _ref11 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee11(page, targetWidth, targetHeight) {\n        var view, canvas, ctx, isPcWindow, pdfPage, devicePixelRatio, viewport, _viewport2, llxParent, llyParent, urxParent, uryParent, originalWidth, originalHeight, size, optimalScale, finalScale, viewportRescale, renderContext, imageDataURL;\n        return _regeneratorRuntime().wrap(function _callee11$(_context11) {\n          while (1) switch (_context11.prev = _context11.next) {\n            case 0:\n              view = _this.renderItems[page];\n              canvas = _this.elementBuilder.createCanvas();\n              ctx = canvas.getContext(\'2d\', {\n                alpha: false,\n                willReadFrequently: false\n              });\n              ctx.imageSmoothingEnabled = false;\n              isPcWindow = !_this.perfomance.isApple && _this.perfomance.deviceType == \'pc\';\n              _context11.next = 7;\n              return _this.pdfDocument.getPage(page);\n            case 7:\n              pdfPage = _context11.sent;\n              devicePixelRatio = window.devicePixelRatio == 1 && isPcWindow ? PixelsPerInch.PDF_TO_CSS_UNITS : window.devicePixelRatio;\n              viewport = pdfPage.view;\n              _viewport2 = _slicedToArray(viewport, 4), llxParent = _viewport2[0], llyParent = _viewport2[1], urxParent = _viewport2[2], uryParent = _viewport2[3];\n              originalWidth = urxParent - llxParent; // PDF 페이지의 원본 너비\n              originalHeight = uryParent - llyParent; // PDF 페이지의 원본 높이\n              size = view.calculatePageSize(targetWidth, targetHeight);\n              optimalScale = (0, _ui.calculateOptimalScale)(size.pageWidth, size.pageHeight, originalWidth, originalHeight);\n              finalScale = optimalScale * devicePixelRatio; // 디바이스 픽셀 비율 반영\n              viewportRescale = pdfPage.getViewport({\n                scale: finalScale\n              });\n              renderContext = {\n                canvasContext: ctx,\n                viewport: viewportRescale\n              };\n              canvas.width = Math.floor(viewportRescale.width);\n              canvas.height = Math.floor(viewportRescale.height);\n              _context11.next = 22;\n              return pdfPage.render(renderContext).promise;\n            case 22:\n              _this.canvasManager.requestThumbnailPageInvalidate(page, ctx, viewportRescale, viewportRescale.scale, pdfPage.getViewport(1).rotation);\n              imageDataURL = canvas.toDataURL(\'image/png\'); // \'image/jpeg\'도 가능\n              return _context11.abrupt("return", imageDataURL);\n            case 25:\n            case "end":\n              return _context11.stop();\n          }\n        }, _callee11);\n      }));\n      return function (_x0, _x1, _x10) {\n        return _ref11.apply(this, arguments);\n      };\n    }());\n    _defineProperty(this, "upToText", function () {\n      _this.renderItems.forEach(function (it) {\n        return it.upToText();\n      });\n    });\n    _defineProperty(this, "upToAnno", function () {\n      _this.renderItems.forEach(function (it) {\n        return it.upToAnno();\n      });\n    });\n    _defineProperty(this, "saveDocument", /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee12() {\n      var loadingTask, pdfDocument, annotations, parsed, padArrayToMultipleOfSix, data, blob, urlBlob, a;\n      return _regeneratorRuntime().wrap(function _callee12$(_context12) {\n        while (1) switch (_context12.prev = _context12.next) {\n          case 0:\n            padArrayToMultipleOfSix = function _padArrayToMultipleOf(coordinates) {\n              // 2. 그 다음, 전체 길이가 6의 배수가 되도록 추가 패딩\n              var remainder = coordinates.length % 6;\n              if (remainder !== 0) {\n                var padLength = 6 - remainder;\n                for (var i = 0; i < padLength; i++) {\n                  coordinates.unshift(NaN);\n                }\n              }\n              return coordinates;\n            };\n            loadingTask = pdfjsLib.getDocument(_this.cunckedParams);\n            _context12.next = 4;\n            return loadingTask.promise;\n          case 4:\n            pdfDocument = _context12.sent;\n            annotations = _this.canvasManager.exportAnnotations();\n            parsed = JSON.parse(annotations);\n            parsed.forEach(function (it) {\n              var ponits = [];\n              var totalSize = it.inkLists.length;\n              for (var index = 0; index < totalSize; index++) {\n                ponits.push([index * 8 + 1, index * 8 + 2, index * 8 + 3, index * 8 + 4, index * 8 + 5, index * 8 + 6, index * 8 + 7, index * 8 + 8]);\n              }\n              var nIT = _objectSpread(_objectSpread({}, it), {}, {\n                annotationType: 15,\n                rotation: 0,\n                thickness: it.width,\n                paths: {\n                  lines: it.inkLists.map(function (it3) {\n                    return padArrayToMultipleOfSix(it3);\n                  })\n                  // points: ponits,\n                }\n              });\n              pdfDocument.annotationStorage.setValue(\'pdfjs_internal_editor_\' + it.id, nIT);\n            });\n            // const AnnotationEditorType = {\n            //   DISABLE: -1,\n            //   NONE: 0,\n            //   FREETEXT: 3,\n            //   HIGHLIGHT: 9,\n            //   STAMP: 13,\n            //   INK: 15,\n            //   SIGNATURE: 101,\n            // };\n            _context12.next = 10;\n            return pdfDocument.saveDocument();\n          case 10:\n            data = _context12.sent;\n            _context12.next = 13;\n            return loadingTask.destroy();\n          case 13:\n            blob = new Blob([data], {\n              type: \'application/pdf\'\n            });\n            urlBlob = URL.createObjectURL(blob);\n            a = document.createElement(\'a\');\n            a.href = urlBlob;\n            a.download = \'saved-document.pdf\';\n            a.click();\n            URL.revokeObjectURL(urlBlob); // 메모리 해제\n          case 20:\n          case "end":\n            return _context12.stop();\n        }\n      }, _callee12);\n    })));\n    _defineProperty(this, "retryRender", function (page) {\n      _this.renderItems[page].clear();\n      _classPrivateFieldGet(_loadPdf, _this).call(_this, page);\n    });\n    _defineProperty(this, "loadPage", function (page) {\n      return _this.pdfDocument.getPage(page);\n    });\n    _defineProperty(this, "print", function () {\n      return _this.printManager.run();\n    });\n    /** @type { PageMode } */\n    this.currentPageMode = _viewerType.PageMode.SCROLL;\n    // this.currentPageMode = PageMode.FIRST_DUAL;\n    // 최소 스케일값\n    this.minUserScale = 0.1;\n    // 현재 유저가 확대한 스케일값\n    this.currentUserScale = 1.0;\n    // 최대 스케일값\n    this.maxUserScale = 5.0;\n    /** @type {number} 현재 PDF 페이지, 1부터 시작 */\n    this.currentPage = 1;\n    /** @type { import(\'pdfjs-local/build/dist\').PDFDocumentProxy} */\n    this.pdfDocument = null;\n    // PDF 전체페이지 수\n    this.totalPages = 0;\n    // 목차객체\n    this.outline = null;\n    /**@type {ElementBuilder>} */\n    this.elementBuilder = null;\n    /**@type {Renderer} */\n    this.renderer = null;\n    /**@type {Array<PageSectionView>} */\n    this.renderItems = [];\n    this.resizeTimer = null;\n\n    /**@type {AbortController} */\n    this.abortController = null;\n    this.lastScrollInfo = {\n      index: 0,\n      topRatio: 0,\n      leftRatio: 0\n    };\n    this.initialScroll = {\n      top: 0,\n      left: 0\n    };\n    this.resizeObserver = null;\n\n    /**@type { KeyboardControl } 키보드 이벤트 제어 */\n    this.keyboardControl = null;\n\n    /**@type { MouseControl } 마우스 이벤트 제어 */\n    this.mouseControl = null;\n\n    /**@type { TouchControl } 터치 이벤트 제어 */\n    this.touchControl = null;\n    this.isScrolling = false;\n    this.scrollTimer = null;\n\n    /**\n     * pdf core 콜백\n     * @type {CallbackOptions}\n     */\n    this.callbackOpt = {\n      onClick: null,\n      onPageChanged: null,\n      onLastPage: null,\n      onFirstPage: null,\n      onOutlineReady: null,\n      onScaleChanged: null,\n      onAnnotationHistoryChanged: null\n    };\n    /**@type {CanvasManager} */\n    this.canvasManager = null;\n\n    /**@type {SearchManager} */\n    this.searchManager = null;\n\n    /**@type {PrintManager} */\n    this.printManager = null;\n    this.cunckedParams = null;\n    this.reachSearchTimer = null;\n    this.setRealVH();\n  }\n  return _createClass(PdfCore, [{\n    key: "add",\n    value: function add(page) {\n      var container = this.elementBuilder.elements.virtualListBody;\n      var items = this.renderVisibleScrollItem(page);\n      var existingCount = container.children.length;\n      var requiredCount = items.length; // 항상 30개일 것\n\n      var firstIndex = items[0].pageNum - 1;\n      var topOffset = 0;\n      for (var i = 0; i < firstIndex; i++) {\n        topOffset += this.renderItems[i].pageSize.height;\n      }\n      // console.log(container.style.top, topOffset);\n      var isSameOffset = parseInt(container.style.top) != topOffset;\n      if (isSameOffset) {\n        container.style.top = "".concat(topOffset, "px");\n      }\n      items.forEach(function (item, i) {\n        if (i < existingCount) {\n          var _container$children$i;\n          if (container.children[i] && item.pageNum != ((_container$children$i = container.children[i].dataset) === null || _container$children$i === void 0 ? void 0 : _container$children$i.pdfpage)) {\n            container.replaceChild(item.element, container.children[i]);\n          }\n          // 기존에 있는 요소는 교체\n        } else {\n          // 새로 추가해야 하는 경우\n          container.appendChild(item.element);\n        }\n      });\n\n      // 만약 기존 DOM이 더 많다면 잘라내기 (ex. 이전에 35개였는데 지금은 30개만 필요할 때)\n      while (container.children.length > requiredCount) {\n        container.removeChild(container.lastChild);\n      }\n      if (isSameOffset) {\n        this.gotoPage(page);\n      }\n      this.renderer.prioritizeVisiblePages(page);\n    }\n    /**\n     *\n     * @param {number} page\n     * @returns\n     */\n  }, {\n    key: "renderVisibleScrollItem",\n    value: function renderVisibleScrollItem(page) {\n      // 페이지 모드에 따라 표시할 항목 결정\n      var itemsToRender = [];\n      var range = 15; // 앞뒤 10개\n      var start = Math.max(page - range, 1);\n      var end = Math.min(page + range, this.renderItems.length);\n      itemsToRender = this.renderItems.slice(start, end);\n      return itemsToRender;\n    }\n    /**\n     * 컨텐츠 추가 및 교체\n     */\n  }]);\n}();\nfunction _addEvent() {\n  var _this2 = this;\n  //리사이징\n  window.addEventListener(\'resize\', function () {\n    _this2.setRealVH();\n    // this.#validate();\n  });\n  window.addEventListener(\'unload\', function () {\n    return _classPrivateFieldGet(_unload, _this2);\n  });\n  //마우스 오른쪽 막기\n  document.addEventListener(\'contextmenu\', function (event) {\n    return event.preventDefault();\n  });\n  //스크롤\n  _assertClassBrand(_PdfCore_brand, this, _addResizeParentEvent).call(this, this.elementBuilder.elements.container);\n}\n/**\n * 스크롤 이벤트 추가.\n */\nfunction _addScrollEvent() {\n  var _this3 = this;\n  _assertClassBrand(_PdfCore_brand, this, _abortScrollEvent).call(this);\n  /** scroll Listener */\n  (0, _ui.watchScroll)(this.elementBuilder.elements.documentScrollContainer, function (e) {\n    // console.log(\'##\');\n    //스크롤 정보 갱신\n    _classPrivateFieldGet(_updateScrollInfo, _this3).call(_this3);\n\n    //스크롤 모드일때만 랜더링 콜백\n    if (_this3.currentPageMode == _viewerType.PageMode.SCROLL) {\n      var _findId$element, _this3$callbackOpt;\n      var findId = (0, _ui.highestVisibleId)(_this3.elementBuilder.elements.documentScrollContainer, true);\n      if (!(findId !== null && findId !== void 0 && (_findId$element = findId.element) !== null && _findId$element !== void 0 && (_findId$element = _findId$element.dataset) !== null && _findId$element !== void 0 && _findId$element.pdfpage)) {\n        return;\n      }\n      // const topPage = parseInt(findId.closestToTop.dataset.pdfpage);\n      var targetPage = parseInt(findId.element.dataset.pdfpage);\n      // this.add(topPage);\n\n      _this3.renderer.prioritizeVisiblePages(targetPage);\n      _this3.currentPage = targetPage;\n      if (typeof ((_this3$callbackOpt = _this3.callbackOpt) === null || _this3$callbackOpt === void 0 ? void 0 : _this3$callbackOpt.onPageChanged) == \'function\') {\n        var _this3$callbackOpt2;\n        var toc = _classPrivateFieldGet(_findCurrentToc, _this3).call(_this3);\n        (_this3$callbackOpt2 = _this3.callbackOpt) === null || _this3$callbackOpt2 === void 0 || _this3$callbackOpt2.onPageChanged(_this3.currentPage, _this3.totalPages, toc === null || toc === void 0 ? void 0 : toc.title);\n      }\n    }\n  }, this.abortController.signal);\n}\n/**\n * 스크롤이벤트 제거\n */\nfunction _abortScrollEvent() {\n  if (this.abortController) {\n    this.abortController.abort();\n    this.abortController = null;\n  }\n  this.abortController = new AbortController();\n}\n/**\n * 컨텐츠 컨테이너 하위element 전부 제거.\n */\nfunction _cleanContents() {\n  while (this.elementBuilder.elements.virtualListBody.firstChild) {\n    this.elementBuilder.elements.virtualListBody.removeChild(this.elementBuilder.elements.virtualListBody.lastChild);\n  }\n}\n/**\n * 컨텐츠 추가전 사전 계산.\n */\nfunction _addPreContents() {\n  var parentRect = _assertClassBrand(_PdfCore_brand, this, _getParentRect).call(this);\n  var isDual = this.currentPageMode == _viewerType.PageMode.DUAL || this.currentPageMode == _viewerType.PageMode.FIRST_DUAL;\n  for (var index = 0; index < this.totalPages + 1; index++) {\n    var id = \'pageSection\' + index;\n    var view = new _Renderer.PageSectionView({\n      pageNum: index,\n      id: id,\n      pageInfo: this.lastPage._pageInfo,\n      viewBox: this.firstScale.viewBox,\n      rotation: this.firstScale.rotation,\n      requestAnnotationInvalidate: this.canvasManager.invalidate\n    });\n\n    //마지막 컨텐츠 기준으로 사이즈를 미리계산\n    view.preCalc(parentRect, isDual, this.currentUserScale);\n    this.renderItems.push(view);\n  }\n}\nfunction _addContents() {\n  var _this4 = this;\n  var container = this.elementBuilder.elements.virtualListBody;\n\n  // 페이지 모드에 따라 표시할 항목 결정\n  var itemsToRender = [];\n\n  //스크롤\n  if (this.currentPageMode === _viewerType.PageMode.SCROLL) {\n    itemsToRender = this.renderItems.slice(1, this.totalPages + 1);\n    // itemsToRender = this.renderVisibleScrollItem(this.currentPage);\n  }\n  //첫페이지는 비움\n  else if (this.currentPageMode === _viewerType.PageMode.FIRST_DUAL) {\n    if (this.currentPage == 1) {\n      itemsToRender = [this.renderItems[0], this.renderItems[this.currentPage]];\n    } else {\n      itemsToRender = [this.renderItems[this.currentPage], this.renderItems[this.currentPage + 1]];\n    }\n  }\n  //첫페이지부터 양면\n  else if (this.currentPageMode === _viewerType.PageMode.DUAL) {\n    itemsToRender = this.renderItems.slice(1, this.totalPages + 1);\n    itemsToRender = [this.renderItems[this.currentPage], this.renderItems[this.currentPage + 1]];\n  }\n  //단면\n  else if (this.currentPageMode === _viewerType.PageMode.SINGLE) {\n    itemsToRender = [this.renderItems[this.currentPage]];\n  }\n\n  // 기존 요소 목록 가져오기\n  var existingElements = Array.from(container.children);\n\n  // 새로운 요소와 기존 요소 비교 및 업데이트\n  itemsToRender.forEach(function (newItem, index) {\n    if (!newItem) return;\n    var idx = _this4.currentPageMode == _viewerType.PageMode.SCROLL ? index + 1 : index;\n    if (existingElements[idx]) {\n      // 기존 요소와 교체\n      if (existingElements[idx] !== newItem.element) {\n        var _itemsToRender;\n        if (existingElements[idx] == ((_itemsToRender = itemsToRender[index - 1]) === null || _itemsToRender === void 0 ? void 0 : _itemsToRender.element)) {\n          container.appendChild(newItem.element);\n        } else {\n          container.replaceChild(newItem.element, existingElements[idx]);\n        }\n      }\n    } else {\n      // 새 요소 추가\n      container.appendChild(newItem.element);\n    }\n  });\n\n  // 기존 요소 중 필요 없는 것은 제거\n  while (container.children.length > itemsToRender.length) {\n    container.removeChild(container.lastChild);\n  }\n  if (!itemsToRender[1]) {\n    if (container.children[1]) {\n      container.removeChild(existingElements[1]);\n    }\n  }\n  itemsToRender = null;\n}\n/**\n * 스크롤 하위 아이들 사이즈 조정\n */\nfunction _updateScrollContainerSize(isFrequentlyCall) {\n  // console.time(\'updateScrollContainerSize\');\n  var isDual = this.currentPageMode == _viewerType.PageMode.FIRST_DUAL || this.currentPageMode == _viewerType.PageMode.DUAL;\n  var isScroll = this.currentPageMode == _viewerType.PageMode.SCROLL;\n  /**넓이 합산 */\n  var totalHeight = isScroll ? _classPrivateFieldGet(_getTotalHeight, this).call(this) : _classPrivateFieldGet(_getMaxHeight, this).call(this);\n  var size = null;\n  var size2 = null;\n  //페이지 모드시 계산한다.\n  if (this.currentPageMode == _viewerType.PageMode.FIRST_DUAL) {\n    var _this$renderItems$ind, _this$renderItems$ind2, _this$renderItems$ind3;\n    var isFirstPage = this.currentPage === 1;\n    var index1 = isFirstPage ? this.currentPage - 1 : this.currentPage;\n    var index2 = isFirstPage ? this.currentPage : this.currentPage + 1;\n    size = (_this$renderItems$ind = this.renderItems[index1]) === null || _this$renderItems$ind === void 0 ? void 0 : _this$renderItems$ind.pageSize;\n    size2 = (_this$renderItems$ind2 = (_this$renderItems$ind3 = this.renderItems[index2]) === null || _this$renderItems$ind3 === void 0 ? void 0 : _this$renderItems$ind3.pageSize) !== null && _this$renderItems$ind2 !== void 0 ? _this$renderItems$ind2 : size;\n  } else {\n    var _this$renderItems, _this$renderItems$pag, _this$renderItems2;\n    var offset1 = this.currentPageMode === _viewerType.PageMode.FIRST_DUAL ? -1 : 0;\n    var offset2 = this.currentPageMode === _viewerType.PageMode.DUAL ? 1 : 0;\n    size = (_this$renderItems = this.renderItems[this.currentPage + offset1]) === null || _this$renderItems === void 0 ? void 0 : _this$renderItems.pageSize;\n    size2 = (_this$renderItems$pag = (_this$renderItems2 = this.renderItems[this.currentPage + offset2]) === null || _this$renderItems2 === void 0 ? void 0 : _this$renderItems2.pageSize) !== null && _this$renderItems$pag !== void 0 ? _this$renderItems$pag : size;\n  }\n\n  /** 최대 너비지정 */\n  var maxWidth = isDual ? size.width + size2.width : _classPrivateFieldGet(_getMinWidth, this).call(this);\n\n  //아이템 상위 스크롤 컨테이너의 widht,height사이즈를 지정\n  this.elementBuilder.elements.virtualListWidthContainer.style.width = maxWidth + \'px\';\n  this.elementBuilder.elements.virtualListHeightContainer.style.height = totalHeight + \'px\';\n\n  //update item\n  this.renderItems.forEach(function (view) {\n    return view.update(isFrequentlyCall);\n  });\n  return totalHeight;\n}\n/**\n * dest로 이동\n *\n * @param {string|Array} dest - The named, or explicit, PDF destination.\n */\nfunction _goToDestination(_x11) {\n  return _goToDestination2.apply(this, arguments);\n}\nfunction _goToDestination2() {\n  _goToDestination2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee13(dest) {\n    var namedDest, explicitDest, pageNumber, _explicitDest, _explicitDest2, destRef;\n    return _regeneratorRuntime().wrap(function _callee13$(_context13) {\n      while (1) switch (_context13.prev = _context13.next) {\n        case 0:\n          if (this.pdfDocument) {\n            _context13.next = 2;\n            break;\n          }\n          return _context13.abrupt("return");\n        case 2:\n          if (!(typeof dest === \'string\')) {\n            _context13.next = 9;\n            break;\n          }\n          namedDest = dest;\n          _context13.next = 6;\n          return this.pdfDocument.getDestination(dest);\n        case 6:\n          explicitDest = _context13.sent;\n          _context13.next = 13;\n          break;\n        case 9:\n          namedDest = null;\n          _context13.next = 12;\n          return dest;\n        case 12:\n          explicitDest = _context13.sent;\n        case 13:\n          if (Array.isArray(explicitDest)) {\n            _context13.next = 16;\n            break;\n          }\n          console.error("goToDestination: \\"".concat(explicitDest, "\\" is not a valid destination array, for dest=\\"").concat(dest, "\\"."));\n          return _context13.abrupt("return");\n        case 16:\n          // Dest array looks like that: <page-ref> </XYZ|/FitXXX> <args..>\n          _explicitDest = explicitDest, _explicitDest2 = _slicedToArray(_explicitDest, 1), destRef = _explicitDest2[0];\n          if (!(destRef && _typeof(destRef) === \'object\')) {\n            _context13.next = 33;\n            break;\n          }\n          pageNumber = this.pdfDocument.cachedPageNumber(destRef);\n          if (pageNumber) {\n            _context13.next = 31;\n            break;\n          }\n          _context13.prev = 20;\n          _context13.next = 23;\n          return this.pdfDocument.getPageIndex(destRef);\n        case 23:\n          _context13.t0 = _context13.sent;\n          pageNumber = _context13.t0 + 1;\n          _context13.next = 31;\n          break;\n        case 27:\n          _context13.prev = 27;\n          _context13.t1 = _context13["catch"](20);\n          console.error("goToDestination: \\"".concat(destRef, "\\" is not a valid page reference, for dest=\\"").concat(dest, "\\"."));\n          return _context13.abrupt("return");\n        case 31:\n          _context13.next = 34;\n          break;\n        case 33:\n          if (Number.isInteger(destRef)) {\n            pageNumber = destRef + 1;\n          }\n        case 34:\n          if (!(!pageNumber || pageNumber < 1 || pageNumber > this.pagesCount)) {\n            _context13.next = 37;\n            break;\n          }\n          console.error("goToDestination: \\"".concat(pageNumber, "\\" is not a valid page number, for dest=\\"").concat(dest, "\\"."));\n          return _context13.abrupt("return");\n        case 37:\n          //페이지 이동\n          this.gotoPage(pageNumber);\n        case 38:\n        case "end":\n          return _context13.stop();\n      }\n    }, _callee13, this, [[20, 27]]);\n  }));\n  return _goToDestination2.apply(this, arguments);\n}\n/**\n * parent Element에 resize이벤트 리스너 추가.\n */\nfunction _addResizeParentEvent(parent) {\n  var _this$resizeObserver,\n    _this5 = this;\n  (_this$resizeObserver = this.resizeObserver) === null || _this$resizeObserver === void 0 || _this$resizeObserver.disconnect();\n  this.resizeObserver = null;\n  this.resizeObserver = new _resizeObserverPolyfill["default"](function () {\n    _classPrivateFieldGet(_validate, _this5).call(_this5);\n    _classPrivateFieldGet(_restoreScrollPosition, _this5).call(_this5);\n  });\n  this.resizeObserver.observe(parent);\n}\n/**\n * 스케일 값에따른 parent값 조정\n */\nfunction _getParentRect() {\n  var rect = this.elementBuilder.elements.documentScrollContainer.getBoundingClientRect();\n  // currentUserScale 만큼 rect 값 조정\n  var scaledRect = {\n    x: rect.x * this.currentUserScale,\n    y: rect.y * this.currentUserScale,\n    width: rect.width * this.currentUserScale,\n    height: rect.height * this.currentUserScale,\n    top: rect.top * this.currentUserScale,\n    left: rect.left * this.currentUserScale,\n    right: rect.right * this.currentUserScale,\n    bottom: rect.bottom * this.currentUserScale\n  };\n  return scaledRect;\n}\n/**\n * 현재 적용된 비율에서 너비에 맞는 비율을 계산하는 로직\n */\nfunction _calculateScaleFitWidthRatio() {\n  var containerWidth = this.elementBuilder.elements.container.clientWidth;\n  var isDualPage = this.currentPageMode === _viewerType.PageMode.DUAL || this.currentPageMode === _viewerType.PageMode.FIRST_DUAL;\n  var availableWidth = isDualPage ? containerWidth / 2 : containerWidth;\n  var currentItem = this.renderItems[this.currentPage];\n  var originalPageWidth = currentItem.pageSize.width / this.currentUserScale;\n  return availableWidth / originalPageWidth;\n}\nfunction _setScaleRootValue() {\n  document.documentElement.style.setProperty(\'--total-scale-factor\', this.currentUserScale);\n}\nvar _default = exports["default"] = PdfCore;\n\n//# sourceURL=webpack://ViewerJS/./src/pdf/core/PdfCore.js?')},73506:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar isPossiblePrototype = __webpack_require__(13925);\n\nvar $String = String;\nvar $TypeError = TypeError;\n\nmodule.exports = function (argument) {\n  if (isPossiblePrototype(argument)) return argument;\n  throw new $TypeError(\"Can't set \" + $String(argument) + ' as a prototype');\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/a-possible-prototype.js?")},73677:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(71658);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.array.to-spliced.js?")},73772:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove this module from `core-js@4` since it's replaced to module below\n__webpack_require__(65746);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.weak-map.js?")},73913:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";eval('\n\n__webpack_require__(52675);\n__webpack_require__(89463);\n__webpack_require__(2259);\n__webpack_require__(45700);\n__webpack_require__(51629);\n__webpack_require__(23418);\n__webpack_require__(94490);\n__webpack_require__(89572);\n__webpack_require__(94170);\n__webpack_require__(2892);\n__webpack_require__(59904);\n__webpack_require__(84185);\n__webpack_require__(40875);\n__webpack_require__(10287);\n__webpack_require__(60825);\n__webpack_require__(23500);\nObject.defineProperty(exports, "__esModule", ({\n  value: true\n}));\nexports.Outlines = void 0;\n__webpack_require__(28706);\n__webpack_require__(74423);\n__webpack_require__(64346);\n__webpack_require__(23792);\n__webpack_require__(34782);\n__webpack_require__(60739);\n__webpack_require__(23288);\n__webpack_require__(62010);\n__webpack_require__(32637);\n__webpack_require__(79432);\n__webpack_require__(26099);\n__webpack_require__(78459);\n__webpack_require__(3362);\n__webpack_require__(27495);\n__webpack_require__(38781);\n__webpack_require__(21699);\n__webpack_require__(47764);\n__webpack_require__(71761);\n__webpack_require__(25440);\n__webpack_require__(73772);\n__webpack_require__(12041);\n__webpack_require__(62953);\nvar _ui = __webpack_require__(32604);\nfunction _toArray(r) { return _arrayWithHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableRest(); }\nfunction _iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }\nfunction _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); return e; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }\nfunction _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }\nfunction _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }\nfunction _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a \'" + n + "\' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }\nfunction _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }\nfunction _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }\nfunction _classPrivateFieldInitSpec(e, t, a) { _checkPrivateRedeclaration(e, t), t.set(e, a); }\nfunction _checkPrivateRedeclaration(e, t) { if (t.has(e)) throw new TypeError("Cannot initialize the same private elements twice on an object"); }\nfunction _classPrivateFieldGet(s, a) { return s.get(_assertClassBrand(s, a)); }\nfunction _assertClassBrand(e, t, n) { if ("function" == typeof e ? e === t : e.has(t)) return arguments.length < 3 ? t : n; throw new TypeError("Private element is not present on this object"); }\nvar _getPageFromDest = /*#__PURE__*/new WeakMap();\nvar Outlines = exports.Outlines = /*#__PURE__*/function () {\n  function Outlines() {\n    _classCallCheck(this, Outlines);\n    _classPrivateFieldInitSpec(this, _getPageFromDest, /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(pdfDocument, dest) {\n        var namedDest, explicitDest, pageNumber, _explicitDest, _explicitDest2, destRef;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              if (pdfDocument) {\n                _context.next = 2;\n                break;\n              }\n              return _context.abrupt("return");\n            case 2:\n              if (!(typeof dest === \'string\')) {\n                _context.next = 9;\n                break;\n              }\n              namedDest = dest;\n              _context.next = 6;\n              return pdfDocument.getDestination(dest);\n            case 6:\n              explicitDest = _context.sent;\n              _context.next = 13;\n              break;\n            case 9:\n              namedDest = null;\n              _context.next = 12;\n              return dest;\n            case 12:\n              explicitDest = _context.sent;\n            case 13:\n              if (Array.isArray(explicitDest)) {\n                _context.next = 16;\n                break;\n              }\n              console.error("goToDestination: \\"".concat(explicitDest, "\\" is not a valid destination array, for dest=\\"").concat(dest, "\\"."));\n              return _context.abrupt("return");\n            case 16:\n              // Dest array looks like that: <page-ref> </XYZ|/FitXXX> <args..>\n              _explicitDest = explicitDest, _explicitDest2 = _slicedToArray(_explicitDest, 1), destRef = _explicitDest2[0];\n              if (!(destRef && _typeof(destRef) === \'object\')) {\n                _context.next = 33;\n                break;\n              }\n              pageNumber = pdfDocument.cachedPageNumber(destRef);\n              if (pageNumber) {\n                _context.next = 31;\n                break;\n              }\n              _context.prev = 20;\n              _context.next = 23;\n              return pdfDocument.getPageIndex(destRef);\n            case 23:\n              _context.t0 = _context.sent;\n              pageNumber = _context.t0 + 1;\n              _context.next = 31;\n              break;\n            case 27:\n              _context.prev = 27;\n              _context.t1 = _context["catch"](20);\n              console.error("goToDestination: \\"".concat(destRef, "\\" is not a valid page reference, for dest=\\"").concat(dest, "\\"."));\n              return _context.abrupt("return");\n            case 31:\n              _context.next = 34;\n              break;\n            case 33:\n              if (Number.isInteger(destRef)) {\n                pageNumber = destRef + 1;\n              }\n            case 34:\n              return _context.abrupt("return", pageNumber);\n            case 35:\n            case "end":\n              return _context.stop();\n          }\n        }, _callee, null, [[20, 27]]);\n      }));\n      return function (_x, _x2) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n    this._outline = null;\n    this._pdfDocument = null;\n    /** @type { TocItem[] | null } */\n    this.toc = null;\n  }\n  return _createClass(Outlines, [{\n    key: "destroy",\n    value: function destroy() {\n      this._outline = null;\n      this._pdfDocument = null;\n      this.toc = null;\n    }\n  }, {\n    key: "gether",\n    value: function () {\n      var _gether = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(outline, pdfDocument) {\n        var queue, outlineCount, hasAnyNesting, levelData, currentDepth, _iterator, _step, item, _iterator2, _step2, t;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              if (this._outline) {\n                this.reset();\n              }\n              this._outline = outline || null;\n              this._pdfDocument = pdfDocument || null;\n\n              // const fragment = document.createDocumentFragment();\n              queue = [{\n                items: outline,\n                depth: 0\n              }];\n              outlineCount = 0, hasAnyNesting = false;\n              this.toc = [];\n              while (queue.length > 0) {\n                levelData = queue.shift();\n                currentDepth = levelData.depth;\n                _iterator = _createForOfIteratorHelper(levelData.items);\n                try {\n                  for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                    item = _step.value;\n                    item.depth = currentDepth; // <--- depth 추가\n                    item.title = (0, _ui.normalizeTextContent)(item.title);\n                    this.toc.push({\n                      title: item.title,\n                      depth: item.depth,\n                      dest: item.dest\n                    });\n                    // const div = document.createElement(\'div\');\n                    // div.className = \'treeItem\';\n\n                    // const element = document.createElement(\'a\');\n                    // // this._bindLink(element, item);\n                    // // this._setStyles(element, item);\n                    // element.textContent = normalizeTextContent(item.title);\n\n                    // div.append(element);\n\n                    if (item.items.length > 0) {\n                      hasAnyNesting = true;\n                      //   this._addToggleButton(div, item);\n\n                      // const itemsDiv = document.createElement(\'div\');\n                      // itemsDiv.className = \'treeItems\';\n                      // div.append(itemsDiv);\n\n                      queue.push({\n                        // parent: itemsDiv,\n                        items: item.items,\n                        depth: currentDepth + 1\n                      });\n                    }\n\n                    // levelData.parent.append(div);\n                    outlineCount++;\n                  }\n                } catch (err) {\n                  _iterator.e(err);\n                } finally {\n                  _iterator.f();\n                }\n              }\n              _iterator2 = _createForOfIteratorHelper(this.toc);\n              _context2.prev = 8;\n              _iterator2.s();\n            case 10:\n              if ((_step2 = _iterator2.n()).done) {\n                _context2.next = 18;\n                break;\n              }\n              t = _step2.value;\n              _context2.next = 14;\n              return _classPrivateFieldGet(_getPageFromDest, this).call(this, pdfDocument, t.dest);\n            case 14:\n              t.pageNum = _context2.sent;\n              //text nomalize\n              delete t.dest;\n            case 16:\n              _context2.next = 10;\n              break;\n            case 18:\n              _context2.next = 23;\n              break;\n            case 20:\n              _context2.prev = 20;\n              _context2.t0 = _context2["catch"](8);\n              _iterator2.e(_context2.t0);\n            case 23:\n              _context2.prev = 23;\n              _iterator2.f();\n              return _context2.finish(23);\n            case 26:\n            case "end":\n              return _context2.stop();\n          }\n        }, _callee2, this, [[8, 20, 23, 26]]);\n      }));\n      function gether(_x3, _x4) {\n        return _gether.apply(this, arguments);\n      }\n      return gether;\n    }()\n  }]);\n}();\nvar DEFAULT_LINK_REL = \'noopener noreferrer nofollow\';\nvar LinkTarget = {\n  NONE: 0,\n  // Default value.\n  SELF: 1,\n  BLANK: 2,\n  PARENT: 3,\n  TOP: 4\n};\n\n/**\n * @typedef {Object} PDFLinkServiceOptions\n * @property {EventBus} eventBus - The application event bus.\n * @property {number} [externalLinkTarget] - Specifies the `target` attribute\n *   for external links. Must use one of the values from {LinkTarget}.\n *   Defaults to using no target.\n * @property {string} [externalLinkRel] - Specifies the `rel` attribute for\n *   external links. Defaults to stripping the referrer.\n * @property {boolean} [ignoreDestinationZoom] - Ignores the zoom argument,\n *   thus preserving the current zoom level in the viewer, when navigating\n *   to internal destinations. The default value is `false`.\n */\n\n/**\n * Performs navigation functions inside PDF, such as opening specified page,\n * or destination.\n * @implements {IPDFLinkService}\n */\nvar PDFLinkService = /*#__PURE__*/(/* unused pure expression or super */ null && (function () {\n  /**\n   * @param {PDFLinkServiceOptions} options\n   */\n  function PDFLinkService() {\n    var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      eventBus = _ref2.eventBus,\n      _ref2$externalLinkTar = _ref2.externalLinkTarget,\n      externalLinkTarget = _ref2$externalLinkTar === void 0 ? null : _ref2$externalLinkTar,\n      _ref2$externalLinkRel = _ref2.externalLinkRel,\n      externalLinkRel = _ref2$externalLinkRel === void 0 ? null : _ref2$externalLinkRel,\n      _ref2$ignoreDestinati = _ref2.ignoreDestinationZoom,\n      ignoreDestinationZoom = _ref2$ignoreDestinati === void 0 ? false : _ref2$ignoreDestinati;\n    _classCallCheck(this, PDFLinkService);\n    _defineProperty(this, "externalLinkEnabled", true);\n    this.eventBus = eventBus;\n    this.externalLinkTarget = externalLinkTarget;\n    this.externalLinkRel = externalLinkRel;\n    this._ignoreDestinationZoom = ignoreDestinationZoom;\n    this.baseUrl = null;\n    this.pdfDocument = null;\n    this.pdfViewer = null;\n    this.pdfHistory = null;\n  }\n  return _createClass(PDFLinkService, [{\n    key: "setDocument",\n    value: function setDocument(pdfDocument) {\n      var baseUrl = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      this.baseUrl = baseUrl;\n      this.pdfDocument = pdfDocument;\n    }\n  }, {\n    key: "setViewer",\n    value: function setViewer(pdfViewer) {\n      this.pdfViewer = pdfViewer;\n    }\n  }, {\n    key: "setHistory",\n    value: function setHistory(pdfHistory) {\n      this.pdfHistory = pdfHistory;\n    }\n\n    /**\n     * @type {number}\n     */\n  }, {\n    key: "pagesCount",\n    get: function get() {\n      return this.pdfDocument ? this.pdfDocument.numPages : 0;\n    }\n\n    /**\n     * @type {number}\n     */\n  }, {\n    key: "page",\n    get: function get() {\n      return this.pdfDocument ? this.pdfViewer.currentPageNumber : 1;\n    }\n\n    /**\n     * @param {number} value\n     */,\n    set: function set(value) {\n      if (this.pdfDocument) {\n        this.pdfViewer.currentPageNumber = value;\n      }\n    }\n\n    /**\n     * @type {number}\n     */\n  }, {\n    key: "rotation",\n    get: function get() {\n      return this.pdfDocument ? this.pdfViewer.pagesRotation : 0;\n    }\n\n    /**\n     * @param {number} value\n     */,\n    set: function set(value) {\n      if (this.pdfDocument) {\n        this.pdfViewer.pagesRotation = value;\n      }\n    }\n\n    /**\n     * @type {boolean}\n     */\n  }, {\n    key: "isInPresentationMode",\n    get: function get() {\n      return this.pdfDocument ? this.pdfViewer.isInPresentationMode : false;\n    }\n\n    /**\n     * This method will, when available, also update the browser history.\n     *\n     * @param {string|Array} dest - The named, or explicit, PDF destination.\n     */\n  }, {\n    key: "goToDestination",\n    value: (function () {\n      var _goToDestination = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(dest) {\n        var namedDest, explicitDest, pageNumber, _explicitDest3, _explicitDest4, destRef;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              if (this.pdfDocument) {\n                _context3.next = 2;\n                break;\n              }\n              return _context3.abrupt("return");\n            case 2:\n              if (!(typeof dest === \'string\')) {\n                _context3.next = 9;\n                break;\n              }\n              namedDest = dest;\n              _context3.next = 6;\n              return this.pdfDocument.getDestination(dest);\n            case 6:\n              explicitDest = _context3.sent;\n              _context3.next = 13;\n              break;\n            case 9:\n              namedDest = null;\n              _context3.next = 12;\n              return dest;\n            case 12:\n              explicitDest = _context3.sent;\n            case 13:\n              if (Array.isArray(explicitDest)) {\n                _context3.next = 16;\n                break;\n              }\n              console.error("goToDestination: \\"".concat(explicitDest, "\\" is not a valid destination array, for dest=\\"").concat(dest, "\\"."));\n              return _context3.abrupt("return");\n            case 16:\n              // Dest array looks like that: <page-ref> </XYZ|/FitXXX> <args..>\n              _explicitDest3 = explicitDest, _explicitDest4 = _slicedToArray(_explicitDest3, 1), destRef = _explicitDest4[0];\n              if (!(destRef && _typeof(destRef) === \'object\')) {\n                _context3.next = 33;\n                break;\n              }\n              pageNumber = this.pdfDocument.cachedPageNumber(destRef);\n              if (pageNumber) {\n                _context3.next = 31;\n                break;\n              }\n              _context3.prev = 20;\n              _context3.next = 23;\n              return this.pdfDocument.getPageIndex(destRef);\n            case 23:\n              _context3.t0 = _context3.sent;\n              pageNumber = _context3.t0 + 1;\n              _context3.next = 31;\n              break;\n            case 27:\n              _context3.prev = 27;\n              _context3.t1 = _context3["catch"](20);\n              console.error("goToDestination: \\"".concat(destRef, "\\" is not a valid page reference, for dest=\\"").concat(dest, "\\"."));\n              return _context3.abrupt("return");\n            case 31:\n              _context3.next = 34;\n              break;\n            case 33:\n              if (Number.isInteger(destRef)) {\n                pageNumber = destRef + 1;\n              }\n            case 34:\n              if (!(!pageNumber || pageNumber < 1 || pageNumber > this.pagesCount)) {\n                _context3.next = 37;\n                break;\n              }\n              console.error("goToDestination: \\"".concat(pageNumber, "\\" is not a valid page number, for dest=\\"").concat(dest, "\\"."));\n              return _context3.abrupt("return");\n            case 37:\n              if (this.pdfHistory) {\n                // Update the browser history before scrolling the new destination into\n                // view, to be able to accurately capture the current document position.\n                this.pdfHistory.pushCurrentPosition();\n                this.pdfHistory.push({\n                  namedDest: namedDest,\n                  explicitDest: explicitDest,\n                  pageNumber: pageNumber\n                });\n              }\n              this.pdfViewer.scrollPageIntoView({\n                pageNumber: pageNumber,\n                destArray: explicitDest,\n                ignoreDestinationZoom: this._ignoreDestinationZoom\n              });\n            case 39:\n            case "end":\n              return _context3.stop();\n          }\n        }, _callee3, this, [[20, 27]]);\n      }));\n      function goToDestination(_x5) {\n        return _goToDestination.apply(this, arguments);\n      }\n      return goToDestination;\n    }()\n    /**\n     * This method will, when available, also update the browser history.\n     *\n     * @param {number|string} val - The page number, or page label.\n     */\n    )\n  }, {\n    key: "goToPage",\n    value: function goToPage(val) {\n      if (!this.pdfDocument) {\n        return;\n      }\n      var pageNumber = typeof val === \'string\' && this.pdfViewer.pageLabelToPageNumber(val) || val | 0;\n      if (!(Number.isInteger(pageNumber) && pageNumber > 0 && pageNumber <= this.pagesCount)) {\n        console.error("PDFLinkService.goToPage: \\"".concat(val, "\\" is not a valid page."));\n        return;\n      }\n      if (this.pdfHistory) {\n        // Update the browser history before scrolling the new page into view,\n        // to be able to accurately capture the current document position.\n        this.pdfHistory.pushCurrentPosition();\n        this.pdfHistory.pushPage(pageNumber);\n      }\n      this.pdfViewer.scrollPageIntoView({\n        pageNumber: pageNumber\n      });\n    }\n\n    /**\n     * Adds various attributes (href, title, target, rel) to hyperlinks.\n     * @param {HTMLAnchorElement} link\n     * @param {string} url\n     * @param {boolean} [newWindow]\n     */\n  }, {\n    key: "addLinkAttributes",\n    value: function addLinkAttributes(link, url) {\n      var newWindow = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      if (!url || typeof url !== \'string\') {\n        throw new Error(\'A valid "url" parameter must provided.\');\n      }\n      var target = newWindow ? LinkTarget.BLANK : this.externalLinkTarget,\n        rel = this.externalLinkRel;\n      if (this.externalLinkEnabled) {\n        link.href = link.title = url;\n      } else {\n        link.href = \'\';\n        link.title = "Disabled: ".concat(url);\n        link.onclick = function () {\n          return false;\n        };\n      }\n      var targetStr = \'\'; // LinkTarget.NONE\n      switch (target) {\n        case LinkTarget.NONE:\n          break;\n        case LinkTarget.SELF:\n          targetStr = \'_self\';\n          break;\n        case LinkTarget.BLANK:\n          targetStr = \'_blank\';\n          break;\n        case LinkTarget.PARENT:\n          targetStr = \'_parent\';\n          break;\n        case LinkTarget.TOP:\n          targetStr = \'_top\';\n          break;\n      }\n      link.target = targetStr;\n      link.rel = typeof rel === \'string\' ? rel : DEFAULT_LINK_REL;\n    }\n\n    /**\n     * @param {string|Array} dest - The PDF destination object.\n     * @returns {string} The hyperlink to the PDF object.\n     */\n  }, {\n    key: "getDestinationHash",\n    value: function getDestinationHash(dest) {\n      if (typeof dest === \'string\') {\n        if (dest.length > 0) {\n          return this.getAnchorUrl(\'#\' + escape(dest));\n        }\n      } else if (Array.isArray(dest)) {\n        var str = JSON.stringify(dest);\n        if (str.length > 0) {\n          return this.getAnchorUrl(\'#\' + escape(str));\n        }\n      }\n      return this.getAnchorUrl(\'\');\n    }\n\n    /**\n     * Prefix the full url on anchor links to make sure that links are resolved\n     * relative to the current URL instead of the one defined in <base href>.\n     * @param {string} anchor - The anchor hash, including the #.\n     * @returns {string} The hyperlink to the PDF object.\n     */\n  }, {\n    key: "getAnchorUrl",\n    value: function getAnchorUrl(anchor) {\n      return this.baseUrl ? this.baseUrl + anchor : anchor;\n    }\n\n    /**\n     * @param {string} hash\n     */\n  }, {\n    key: "setHash",\n    value: function setHash(hash) {\n      if (!this.pdfDocument) {\n        return;\n      }\n      var pageNumber, dest;\n      if (hash.includes(\'=\')) {\n        var params = (0, _ui.parseQueryString)(hash);\n        if (params.has(\'search\')) {\n          var query = params.get(\'search\').replaceAll(\'"\', \'\'),\n            phrase = params.get(\'phrase\') === \'true\';\n          this.eventBus.dispatch(\'findfromurlhash\', {\n            source: this,\n            query: phrase ? query : query.match(/\\S+/g)\n          });\n        }\n        // borrowing syntax from "Parameters for Opening PDF Files"\n        if (params.has(\'page\')) {\n          pageNumber = params.get(\'page\') | 0 || 1;\n        }\n        if (params.has(\'zoom\')) {\n          // Build the destination array.\n          var zoomArgs = params.get(\'zoom\').split(\',\'); // scale,left,top\n          var zoomArg = zoomArgs[0];\n          var zoomArgNumber = parseFloat(zoomArg);\n          if (!zoomArg.includes(\'Fit\')) {\n            // If the zoomArg is a number, it has to get divided by 100. If it\'s\n            // a string, it should stay as it is.\n            dest = [null, {\n              name: \'XYZ\'\n            }, zoomArgs.length > 1 ? zoomArgs[1] | 0 : null, zoomArgs.length > 2 ? zoomArgs[2] | 0 : null, zoomArgNumber ? zoomArgNumber / 100 : zoomArg];\n          } else if (zoomArg === \'Fit\' || zoomArg === \'FitB\') {\n            dest = [null, {\n              name: zoomArg\n            }];\n          } else if (zoomArg === \'FitH\' || zoomArg === \'FitBH\' || zoomArg === \'FitV\' || zoomArg === \'FitBV\') {\n            dest = [null, {\n              name: zoomArg\n            }, zoomArgs.length > 1 ? zoomArgs[1] | 0 : null];\n          } else if (zoomArg === \'FitR\') {\n            if (zoomArgs.length !== 5) {\n              console.error(\'PDFLinkService.setHash: Not enough parameters for "FitR".\');\n            } else {\n              dest = [null, {\n                name: zoomArg\n              }, zoomArgs[1] | 0, zoomArgs[2] | 0, zoomArgs[3] | 0, zoomArgs[4] | 0];\n            }\n          } else {\n            console.error("PDFLinkService.setHash: \\"".concat(zoomArg, "\\" is not a valid zoom value."));\n          }\n        }\n        if (dest) {\n          this.pdfViewer.scrollPageIntoView({\n            pageNumber: pageNumber || this.page,\n            destArray: dest,\n            allowNegativeOffset: true\n          });\n        } else if (pageNumber) {\n          this.page = pageNumber; // simple page\n        }\n        if (params.has(\'pagemode\')) {\n          this.eventBus.dispatch(\'pagemode\', {\n            source: this,\n            mode: params.get(\'pagemode\')\n          });\n        }\n        // Ensure that this parameter is *always* handled last, in order to\n        // guarantee that it won\'t be overridden (e.g. by the "page" parameter).\n        if (params.has(\'nameddest\')) {\n          this.goToDestination(params.get(\'nameddest\'));\n        }\n        if (typeof PDFJSDev === \'undefined\' || !PDFJSDev.test(\'MOZCENTRAL\')) {\n          return;\n        }\n        // Support opening of PDF attachments in the Firefox PDF Viewer,\n        // which uses a couple of non-standard hash parameters; refer to\n        // `DownloadManager.openOrDownloadData` in the firefoxcom.js file.\n        if (!params.has(\'filename\') || !params.has(\'filedest\')) {\n          return;\n        }\n        hash = params.get(\'filedest\');\n      }\n\n      // Named (or explicit) destination.\n      dest = unescape(hash);\n      try {\n        dest = JSON.parse(dest);\n        if (!Array.isArray(dest)) {\n          // Avoid incorrectly rejecting a valid named destination, such as\n          // e.g. "4.3" or "true", because `JSON.parse` converted its type.\n          dest = dest.toString();\n        }\n      } catch (_unused3) {}\n      if (typeof dest === \'string\' || _isValidExplicitDest.call(PDFLinkService, dest)) {\n        this.goToDestination(dest);\n        return;\n      }\n      console.error("PDFLinkService.setHash: \\"".concat(unescape(hash), "\\" is not a valid destination."));\n    }\n\n    /**\n     * @param {string} action\n     */\n  }, {\n    key: "executeNamedAction",\n    value: function executeNamedAction(action) {\n      var _this$pdfHistory, _this$pdfHistory2;\n      if (!this.pdfDocument) {\n        return;\n      }\n      // See PDF reference, table 8.45 - Named action\n      switch (action) {\n        case \'GoBack\':\n          (_this$pdfHistory = this.pdfHistory) === null || _this$pdfHistory === void 0 || _this$pdfHistory.back();\n          break;\n        case \'GoForward\':\n          (_this$pdfHistory2 = this.pdfHistory) === null || _this$pdfHistory2 === void 0 || _this$pdfHistory2.forward();\n          break;\n        case \'NextPage\':\n          this.pdfViewer.nextPage();\n          break;\n        case \'PrevPage\':\n          this.pdfViewer.previousPage();\n          break;\n        case \'LastPage\':\n          this.page = this.pagesCount;\n          break;\n        case \'FirstPage\':\n          this.page = 1;\n          break;\n        default:\n          break;\n        // No action according to spec\n      }\n      this.eventBus.dispatch(\'namedaction\', {\n        source: this,\n        action: action\n      });\n    }\n\n    /**\n     * @param {Object} action\n     */\n  }, {\n    key: "executeSetOCGState",\n    value: (function () {\n      var _executeSetOCGState = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(action) {\n        var pdfDocument, optionalContentConfig;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              if (this.pdfDocument) {\n                _context4.next = 2;\n                break;\n              }\n              return _context4.abrupt("return");\n            case 2:\n              pdfDocument = this.pdfDocument;\n              _context4.next = 5;\n              return this.pdfViewer.optionalContentConfigPromise;\n            case 5:\n              optionalContentConfig = _context4.sent;\n              if (!(pdfDocument !== this.pdfDocument)) {\n                _context4.next = 8;\n                break;\n              }\n              return _context4.abrupt("return");\n            case 8:\n              optionalContentConfig.setOCGState(action);\n              this.pdfViewer.optionalContentConfigPromise = Promise.resolve(optionalContentConfig);\n            case 10:\n            case "end":\n              return _context4.stop();\n          }\n        }, _callee4, this);\n      }));\n      function executeSetOCGState(_x6) {\n        return _executeSetOCGState.apply(this, arguments);\n      }\n      return executeSetOCGState;\n    }())\n  }]);\n}()));\n/**\n * @implements {IPDFLinkService}\n */\nfunction _isValidExplicitDest(dest) {\n  if (!Array.isArray(dest) || dest.length < 2) {\n    return false;\n  }\n  var _dest = _toArray(dest),\n    page = _dest[0],\n    zoom = _dest[1],\n    args = _dest.slice(2);\n  if (!(_typeof(page) === \'object\' && Number.isInteger(page === null || page === void 0 ? void 0 : page.num) && Number.isInteger(page === null || page === void 0 ? void 0 : page.gen)) && !Number.isInteger(page)) {\n    return false;\n  }\n  if (!(_typeof(zoom) === \'object\' && typeof (zoom === null || zoom === void 0 ? void 0 : zoom.name) === \'string\')) {\n    return false;\n  }\n  var argsLen = args.length;\n  var allowNull = true;\n  switch (zoom.name) {\n    case \'XYZ\':\n      if (argsLen < 2 || argsLen > 3) {\n        return false;\n      }\n      break;\n    case \'Fit\':\n    case \'FitB\':\n      return argsLen === 0;\n    case \'FitH\':\n    case \'FitBH\':\n    case \'FitV\':\n    case \'FitBV\':\n      if (argsLen > 1) {\n        return false;\n      }\n      break;\n    case \'FitR\':\n      if (argsLen !== 4) {\n        return false;\n      }\n      allowNull = false;\n      break;\n    default:\n      return false;\n  }\n  var _iterator3 = _createForOfIteratorHelper(args),\n    _step3;\n  try {\n    for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n      var arg = _step3.value;\n      if (!(typeof arg === \'number\' || allowNull && arg === null)) {\n        return false;\n      }\n    }\n  } catch (err) {\n    _iterator3.e(err);\n  } finally {\n    _iterator3.f();\n  }\n  return true;\n}\nvar SimpleLinkService = /*#__PURE__*/(/* unused pure expression or super */ null && (function (_PDFLinkService2) {\n  function SimpleLinkService() {\n    _classCallCheck(this, SimpleLinkService);\n    return _callSuper(this, SimpleLinkService, arguments);\n  }\n  _inherits(SimpleLinkService, _PDFLinkService2);\n  return _createClass(SimpleLinkService, [{\n    key: "setDocument",\n    value: function setDocument(pdfDocument) {\n      var baseUrl = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    }\n  }]);\n}(PDFLinkService)));\n\n//# sourceURL=webpack://ViewerJS/./src/pdf/core/Outlines.js?')},74147:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// https://github.com/tc39/proposal-async-explicit-resource-management\nvar call = __webpack_require__(69565);\nvar defineBuiltIn = __webpack_require__(36840);\nvar getBuiltIn = __webpack_require__(97751);\nvar getMethod = __webpack_require__(55966);\nvar hasOwn = __webpack_require__(39297);\nvar wellKnownSymbol = __webpack_require__(78227);\nvar AsyncIteratorPrototype = __webpack_require__(53982);\n\nvar ASYNC_DISPOSE = wellKnownSymbol('asyncDispose');\nvar Promise = getBuiltIn('Promise');\n\nif (!hasOwn(AsyncIteratorPrototype, ASYNC_DISPOSE)) {\n  defineBuiltIn(AsyncIteratorPrototype, ASYNC_DISPOSE, function () {\n    var O = this;\n    return new Promise(function (resolve, reject) {\n      var $return = getMethod(O, 'return');\n      if ($return) {\n        Promise.resolve(call($return, O)).then(function () {\n          resolve(undefined);\n        }, reject);\n      } else resolve(undefined);\n    });\n  });\n}\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.async-iterator.async-dispose.js?")},74423:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar $includes = (__webpack_require__(19617).includes);\nvar fails = __webpack_require__(79039);\nvar addToUnscopables = __webpack_require__(6469);\n\n// FF99+ bug\nvar BROKEN_ON_SPARSE = fails(function () {\n  // eslint-disable-next-line es/no-array-prototype-includes -- detection\n  return !Array(1).includes();\n});\n\n// `Array.prototype.includes` method\n// https://tc39.es/ecma262/#sec-array.prototype.includes\n$({ target: 'Array', proto: true, forced: BROKEN_ON_SPARSE }, {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('includes');\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array.includes.js?")},74488:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar arraySlice = __webpack_require__(67680);\n\nvar floor = Math.floor;\n\nvar sort = function (array, comparefn) {\n  var length = array.length;\n\n  if (length < 8) {\n    // insertion sort\n    var i = 1;\n    var element, j;\n\n    while (i < length) {\n      j = i;\n      element = array[i];\n      while (j && comparefn(array[j - 1], element) > 0) {\n        array[j] = array[--j];\n      }\n      if (j !== i++) array[j] = element;\n    }\n  } else {\n    // merge sort\n    var middle = floor(length / 2);\n    var left = sort(arraySlice(array, 0, middle), comparefn);\n    var right = sort(arraySlice(array, middle), comparefn);\n    var llength = left.length;\n    var rlength = right.length;\n    var lindex = 0;\n    var rindex = 0;\n\n    while (lindex < llength || rindex < rlength) {\n      array[lindex + rindex] = (lindex < llength && rindex < rlength)\n        ? comparefn(left[lindex], right[rindex]) <= 0 ? left[lindex++] : right[rindex++]\n        : lindex < llength ? left[lindex++] : right[rindex++];\n    }\n  }\n\n  return array;\n};\n\nmodule.exports = sort;\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/array-sort.js?")},74648:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar $every = (__webpack_require__(36639).every);\n\n// `AsyncIterator.prototype.every` method\n// https://github.com/tc39/proposal-async-iterator-helpers\n$({ target: 'AsyncIterator', proto: true, real: true }, {\n  every: function every(predicate) {\n    return $every(this, predicate);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.async-iterator.every.js?")},74845:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// https://github.com/tc39/proposal-array-grouping\n// TODO: Remove from `core-js@4`\n__webpack_require__(6986);\n__webpack_require__(88177);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/proposals/array-grouping-stage-3.js?")},75044:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar ArrayBufferViewCore = __webpack_require__(94644);\nvar $fill = __webpack_require__(84373);\nvar toBigInt = __webpack_require__(75854);\nvar classof = __webpack_require__(36955);\nvar call = __webpack_require__(69565);\nvar uncurryThis = __webpack_require__(79504);\nvar fails = __webpack_require__(79039);\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\nvar slice = uncurryThis(''.slice);\n\n// V8 ~ Chrome < 59, Safari < 14.1, FF < 55, Edge <=18\nvar CONVERSION_BUG = fails(function () {\n  var count = 0;\n  // eslint-disable-next-line es/no-typed-arrays -- safe\n  new Int8Array(2).fill({ valueOf: function () { return count++; } });\n  return count !== 1;\n});\n\n// `%TypedArray%.prototype.fill` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.fill\nexportTypedArrayMethod('fill', function fill(value /* , start, end */) {\n  var length = arguments.length;\n  aTypedArray(this);\n  var actualValue = slice(classof(this), 0, 3) === 'Big' ? toBigInt(value) : +value;\n  return call($fill, this, actualValue, length > 1 ? arguments[1] : undefined, length > 2 ? arguments[2] : undefined);\n}, CONVERSION_BUG);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.fill.js?")},75056:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";eval('\n\n__webpack_require__(52675);\n__webpack_require__(89463);\n__webpack_require__(2259);\n__webpack_require__(45700);\n__webpack_require__(94490);\n__webpack_require__(34782);\n__webpack_require__(89572);\n__webpack_require__(94170);\n__webpack_require__(62010);\n__webpack_require__(2892);\n__webpack_require__(59904);\n__webpack_require__(84185);\n__webpack_require__(40875);\n__webpack_require__(10287);\n__webpack_require__(3362);\n__webpack_require__(60825);\n__webpack_require__(27495);\n__webpack_require__(38781);\n__webpack_require__(62953);\nObject.defineProperty(exports, "__esModule", ({\n  value: true\n}));\nexports.UnderlineAnnotation = exports.StrikeOutAnnotation = exports.SquareAnnotation = exports.PopupAnnotation = exports.PolygonAnnotation = exports.LinkAnnotation = exports.LineAnnotation = exports.InkAnnotation = exports.HighlightAnnotation = exports.CircleAnnotation = exports.BaseAnnotation = exports.AnnotationFactory = void 0;\n__webpack_require__(28706);\n__webpack_require__(88431);\n__webpack_require__(33771);\n__webpack_require__(51629);\n__webpack_require__(23418);\n__webpack_require__(64346);\n__webpack_require__(23792);\n__webpack_require__(62062);\n__webpack_require__(54743);\n__webpack_require__(11745);\n__webpack_require__(38309);\n__webpack_require__(23288);\n__webpack_require__(9868);\n__webpack_require__(79432);\n__webpack_require__(26099);\n__webpack_require__(78459);\n__webpack_require__(47764);\n__webpack_require__(11392);\n__webpack_require__(34594);\n__webpack_require__(22134);\n__webpack_require__(81630);\n__webpack_require__(72170);\n__webpack_require__(75044);\n__webpack_require__(69539);\n__webpack_require__(31694);\n__webpack_require__(89955);\n__webpack_require__(33206);\n__webpack_require__(44496);\n__webpack_require__(66651);\n__webpack_require__(12887);\n__webpack_require__(19369);\n__webpack_require__(66812);\n__webpack_require__(8995);\n__webpack_require__(31575);\n__webpack_require__(36072);\n__webpack_require__(88747);\n__webpack_require__(28845);\n__webpack_require__(29423);\n__webpack_require__(57301);\n__webpack_require__(373);\n__webpack_require__(86614);\n__webpack_require__(41405);\n__webpack_require__(33684);\n__webpack_require__(23500);\nvar _ui = __webpack_require__(32604);\nvar _pdfTypes = __webpack_require__(30793);\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(t, e) { if (e && ("object" == _typeof(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return _assertThisInitialized(t); }\nfunction _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); return e; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }\nfunction _inherits(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e); }\nfunction _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }\nfunction _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a \'" + n + "\' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }\nfunction _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }\nvar AnnotationCanvasFactory = /*#__PURE__*/(/* unused pure expression or super */ null && (_createClass(function AnnotationCanvasFactory() {\n  _classCallCheck(this, AnnotationCanvasFactory);\n})));\n/**\n * annotation 만드는 위치.\n */\nvar AnnotationFactory = exports.AnnotationFactory = /*#__PURE__*/function () {\n  function AnnotationFactory() {\n    _classCallCheck(this, AnnotationFactory);\n  }\n\n  /**\n   *\n   * @param {*} params\n   * @returns {BaseAnnotation}\n   */\n  return _createClass(AnnotationFactory, null, [{\n    key: "create",\n    value: function create(params, pageNum, scale) {\n      var annotationFlags = params.annotationFlags,\n        annotationType = params.annotationType,\n        backgroundColor = params.backgroundColor,\n        borderColor = params.borderColor,\n        borderStyle = params.borderStyle,\n        color = params.color,\n        contentsObj = params.contentsObj,\n        dest = params.dest,\n        hasAppearance = params.hasAppearance,\n        hasOwnCanvas = params.hasOwnCanvas,\n        id = params.id,\n        isEditable = params.isEditable,\n        modificationDate = params.modificationDate,\n        noHTML = params.noHTML,\n        noRotate = params.noRotate,\n        rect = params.rect,\n        rotation = params.rotation,\n        structParent = params.structParent,\n        subtype = params.subtype,\n        creationDate = params.creationDate;\n      if (typeof params.pageNum == \'number\') {} else {\n        if (typeof pageNum == \'number\') {\n          params.pageNum = pageNum;\n          params.pageIndex = pageNum - 1;\n        }\n      }\n      switch (subtype) {\n        case _pdfTypes.PdfAnnotationType.SubType.CARET:\n          return new BaseAnnotation(params);\n        case _pdfTypes.PdfAnnotationType.SubType.CIRCLE:\n          return new CircleAnnotation(params);\n        case _pdfTypes.PdfAnnotationType.SubType.FILEATTACHMENT:\n          return new BaseAnnotation(params);\n        case _pdfTypes.PdfAnnotationType.SubType.FREETEXT:\n          return new BaseAnnotation(params);\n        case _pdfTypes.PdfAnnotationType.SubType.HIGHLIGHT:\n          return new HighlightAnnotation(params);\n        case _pdfTypes.PdfAnnotationType.SubType.INK:\n          return new InkAnnotation(params);\n        case _pdfTypes.PdfAnnotationType.SubType.LINE:\n          return new LineAnnotation(params);\n        case _pdfTypes.PdfAnnotationType.SubType.LINK:\n          return new LinkAnnotation(params);\n        case _pdfTypes.PdfAnnotationType.SubType.MOVIE:\n          return new BaseAnnotation(params);\n        case _pdfTypes.PdfAnnotationType.SubType.POLYGON:\n          return new PolygonAnnotation(params);\n        case _pdfTypes.PdfAnnotationType.SubType.POLYLINE:\n          return new BaseAnnotation(params);\n        case _pdfTypes.PdfAnnotationType.SubType.POPUP:\n          return new PopupAnnotation(params);\n        case _pdfTypes.PdfAnnotationType.SubType.PRINTERMARK:\n          return new BaseAnnotation(params);\n        case _pdfTypes.PdfAnnotationType.SubType.REDACT:\n          return new BaseAnnotation(params);\n        case _pdfTypes.PdfAnnotationType.SubType.SCREEN:\n          return new BaseAnnotation(params);\n        case _pdfTypes.PdfAnnotationType.SubType.SOUND:\n          return new BaseAnnotation(params);\n        case _pdfTypes.PdfAnnotationType.SubType.SQUARE:\n          return new SquareAnnotation(params);\n        case _pdfTypes.PdfAnnotationType.SubType.SQUIGGLY:\n          return new BaseAnnotation(params);\n        case _pdfTypes.PdfAnnotationType.SubType.STAMP:\n          return new BaseAnnotation(params);\n        case _pdfTypes.PdfAnnotationType.SubType.STRIKEOUT:\n          return new StrikeOutAnnotation(params);\n        case _pdfTypes.PdfAnnotationType.SubType.TEXT:\n          return new BaseAnnotation(params);\n        case _pdfTypes.PdfAnnotationType.SubType.THREED:\n          return new BaseAnnotation(params);\n        case _pdfTypes.PdfAnnotationType.SubType.TRAPNET:\n          return new BaseAnnotation(params);\n        case _pdfTypes.PdfAnnotationType.SubType.UNDERLINE:\n          return new UnderlineAnnotation(params);\n        case _pdfTypes.PdfAnnotationType.SubType.WATERMARK:\n          return new BaseAnnotation(params);\n        case _pdfTypes.PdfAnnotationType.SubType.WIDGET:\n          return new BaseAnnotation(params);\n        case _pdfTypes.PdfAnnotationType.SubType.ERASER:\n          return new EraserAnnotation(params);\n        default:\n          return new BaseAnnotation(params);\n      }\n    }\n  }, {\n    key: "drawAnnotation",\n    value: function () {\n      var _drawAnnotation = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var _ref,\n          ctx,\n          canvasRect,\n          canvasWidth,\n          canvasHeight,\n          annotation,\n          scale,\n          rotation,\n          inkLists,\n          rect,\n          borderStyle,\n          opacity,\n          color,\n          it,\n          lineCoordinates,\n          lineEndings,\n          vertices,\n          _args = arguments;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _ref = _args.length > 0 && _args[0] !== undefined ? _args[0] : {}, ctx = _ref.ctx, canvasRect = _ref.canvasRect, canvasWidth = _ref.canvasWidth, canvasHeight = _ref.canvasHeight, annotation = _ref.annotation, scale = _ref.scale, rotation = _ref.rotation;\n              inkLists = annotation.inkLists, rect = annotation.rect, borderStyle = annotation.borderStyle, opacity = annotation.opacity, color = annotation.color, it = annotation.it, lineCoordinates = annotation.lineCoordinates, lineEndings = annotation.lineEndings, vertices = annotation.vertices;\n              if (annotation instanceof InkAnnotation || annotation instanceof EraserAnnotation) {\n                this.drawInkOnCanvas({\n                  ctx: ctx,\n                  inkLists: inkLists,\n                  rect: rect,\n                  canvasRect: canvasRect,\n                  dispWidth: canvasWidth,\n                  dispHeight: canvasHeight,\n                  borderStyle: borderStyle,\n                  opacity: opacity,\n                  color: color,\n                  scale: scale,\n                  rotation: rotation,\n                  isEraser: annotation instanceof EraserAnnotation\n                });\n              } else if (annotation instanceof SquareAnnotation) {\n                this.drawRectOnCanvas({\n                  ctx: ctx,\n                  inkLists: inkLists,\n                  rect: rect,\n                  canvasRect: canvasRect,\n                  dispWidth: canvasWidth,\n                  dispHeight: canvasHeight,\n                  borderStyle: borderStyle,\n                  opacity: opacity,\n                  color: color,\n                  scale: scale,\n                  rotation: rotation\n                });\n              } else if (annotation instanceof LineAnnotation) {\n                this.drawLineOnCanvas({\n                  ctx: ctx,\n                  inkLists: inkLists,\n                  rect: rect,\n                  canvasRect: canvasRect,\n                  dispWidth: canvasWidth,\n                  dispHeight: canvasHeight,\n                  borderStyle: borderStyle,\n                  opacity: opacity,\n                  color: color,\n                  scale: scale,\n                  rotation: rotation,\n                  it: it,\n                  lineCoordinates: lineCoordinates,\n                  lineEndings: lineEndings\n                });\n              } else {\n                this.drawRectOnCanvas({\n                  ctx: ctx,\n                  inkLists: inkLists,\n                  rect: rect,\n                  canvasRect: canvasRect,\n                  dispWidth: canvasWidth,\n                  dispHeight: canvasHeight,\n                  borderStyle: borderStyle,\n                  opacity: opacity,\n                  color: color,\n                  scale: scale,\n                  rotation: rotation\n                });\n              }\n            case 3:\n            case "end":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function drawAnnotation() {\n        return _drawAnnotation.apply(this, arguments);\n      }\n      return drawAnnotation;\n    }()\n    /**\n     * rect 데이터 그리기\n     */\n  }, {\n    key: "drawRectOnCanvas",\n    value: function drawRectOnCanvas(_ref2) {\n      var ctx = _ref2.ctx,\n        rect = _ref2.rect,\n        canvasRect = _ref2.canvasRect,\n        dispWidth = _ref2.dispWidth,\n        dispHeight = _ref2.dispHeight,\n        borderStyle = _ref2.borderStyle,\n        _ref2$opacity = _ref2.opacity,\n        opacity = _ref2$opacity === void 0 ? 1 : _ref2$opacity,\n        color = _ref2.color,\n        scale = _ref2.scale,\n        rotation = _ref2.rotation;\n      ctx.save();\n      var rgba = "rgba(".concat(color[0], ",").concat(color[1], ",").concat(color[2], ",").concat(opacity, ")");\n      ctx.globalCompositeOperation = \'source-over\';\n      ctx.strokeStyle = rgba;\n      ctx.lineWidth = borderStyle.rawWidth * scale * window.devicePixelRatio; // 스케일 적용된 선 두께\n\n      ctx.setLineDash([]);\n\n      // PDF의 annotation rect: [llx, lly, urx, ury]\n      var _rect = _slicedToArray(rect, 4),\n        llxParent = _rect[0],\n        llyParent = _rect[1],\n        urxParent = _rect[2],\n        uryParent = _rect[3];\n      var widthPDF = urxParent - llxParent;\n      var heightPDF = uryParent - llyParent;\n\n      // PDF에서는 lower-left가 (llx, lly)이고, 상단 좌표는 (llx, ury)\n      var topLeftPDF_X = llxParent;\n      var topLeftPDF_Y = uryParent;\n\n      // PDF 전체 영역(canvasRect)은 역시 [llx, lly, urx, ury] 형식이므로 내부적으로 변환\n      var _this$transformCoordi = this.transformCoordinate(topLeftPDF_X, topLeftPDF_Y, canvasRect, dispWidth, dispHeight, rotation),\n        _this$transformCoordi2 = _slicedToArray(_this$transformCoordi, 2),\n        canvasX = _this$transformCoordi2[0],\n        canvasY = _this$transformCoordi2[1];\n\n      // 사각형의 크기도 변환:\n      var canvasWidth = widthPDF / (canvasRect[2] - canvasRect[0]) * dispWidth;\n      var canvasHeight = heightPDF / (canvasRect[3] - canvasRect[1]) * dispHeight;\n\n      // 사각형 그리기 (strokeRect는 좌측 상단 좌표와 width, height를 사용)\n      ctx.strokeRect(canvasX, canvasY, canvasWidth, canvasHeight);\n      ctx.restore();\n    }\n    /**\n     * ink data그리기.\n     */\n  }, {\n    key: "drawInkOnCanvas",\n    value: function drawInkOnCanvas(_ref3) {\n      var _this = this;\n      var ctx = _ref3.ctx,\n        inkLists = _ref3.inkLists,\n        rect = _ref3.rect,\n        canvasRect = _ref3.canvasRect,\n        dispWidth = _ref3.dispWidth,\n        dispHeight = _ref3.dispHeight,\n        borderStyle = _ref3.borderStyle,\n        opacity = _ref3.opacity,\n        color = _ref3.color,\n        scale = _ref3.scale,\n        rotation = _ref3.rotation,\n        isEraser = _ref3.isEraser;\n      ctx.save();\n      var rgba = "rgba(".concat(color[0], ",").concat(color[1], ",").concat(color[2], ",").concat(opacity, ")");\n      var lw = borderStyle.rawWidth * scale * window.devicePixelRatio;\n      ctx.globalCompositeOperation = isEraser ? \'destination-out\' : \'source-over\';\n      ctx.strokeStyle = rgba;\n      ctx.lineWidth = lw;\n      ctx.lineJoin = \'round\';\n      ctx.lineCap = \'round\';\n      ctx.setLineDash([]);\n\n      // inkLists는 각 자유선(stroke)이 PDF 좌표계상의 점 배열입니다.\n      inkLists.forEach(function (stroke) {\n        if (stroke.length < 2) return; // 최소 두 점 필요\n\n        // 첫번째 점 이동\n        var _this$transformCoordi3 = _this.transformCoordinate(stroke[0], stroke[1], canvasRect, dispWidth, dispHeight, rotation),\n          _this$transformCoordi4 = _slicedToArray(_this$transformCoordi3, 2),\n          startX = _this$transformCoordi4[0],\n          startY = _this$transformCoordi4[1];\n        //하나일경우 점으로 표현\n        if (stroke.length == 2) {\n          ctx.beginPath();\n          ctx.arc(startX, startY, lw / 2, 0, Math.PI * 2); // 반지름 5px 점\n          ctx.fill();\n        }\n        //자유선 표현\n        else {\n          ctx.beginPath();\n          // 첫번째 점 이동\n          ctx.moveTo(startX, startY);\n          // 이후 점들을 선으로 연결\n          for (var i = 2; i < stroke.length; i += 2) {\n            var _this$transformCoordi5 = _this.transformCoordinate(stroke[i], stroke[i + 1], canvasRect, dispWidth, dispHeight, rotation),\n              _this$transformCoordi6 = _slicedToArray(_this$transformCoordi5, 2),\n              ptX = _this$transformCoordi6[0],\n              ptY = _this$transformCoordi6[1];\n            ctx.lineTo(ptX, ptY);\n          }\n          ctx.stroke();\n        }\n      });\n      ctx.restore();\n    }\n\n    /**\n     * ink data그리기.\n     */\n  }, {\n    key: "drawLineOnCanvas",\n    value: function drawLineOnCanvas(_ref4) {\n      var ctx = _ref4.ctx,\n        inkLists = _ref4.inkLists,\n        rect = _ref4.rect,\n        canvasRect = _ref4.canvasRect,\n        dispWidth = _ref4.dispWidth,\n        dispHeight = _ref4.dispHeight,\n        borderStyle = _ref4.borderStyle,\n        opacity = _ref4.opacity,\n        color = _ref4.color,\n        scale = _ref4.scale,\n        rotation = _ref4.rotation,\n        it = _ref4.it,\n        lineCoordinates = _ref4.lineCoordinates,\n        lineEndings = _ref4.lineEndings;\n      ctx.save();\n      ctx.globalCompositeOperation = \'source-over\';\n      var rgba = "rgba(".concat(color[0], ",").concat(color[1], ",").concat(color[2], ",").concat(opacity, ")");\n      var lw = borderStyle.rawWidth * scale * window.devicePixelRatio;\n      // console.log(\'#lineCoordinates\', lineCoordinates);\n\n      // const normalizeRect = rect => {\n      //   const r = rect.slice(0); // clone rect\n      //   if (rect[0] > rect[2]) {\n      //     r[0] = rect[2];\n      //     r[2] = rect[0];\n      //     console.log(\'##\');\n      //   }\n      //   if (rect[1] > rect[3]) {\n      //     r[1] = rect[3];\n      //     r[3] = rect[1];\n      //     console.log(\'@@\');\n      //   }\n      //   return r;\n      // };\n\n      var transformed = new Float32Array(lineCoordinates);\n\n      //최대,최소값 반전\n      // if (transformed[1] > transformed[3]) {\n      //   const temp = transformed[1];\n      //   transformed.set([transformed[3]], 1);\n      //   transformed.set([temp], 3);\n      // } else if (transformed[0] > transformed[2]) {\n      //   const temp2 = transformed[0];\n      //   transformed.set([transformed[2]], 0);\n      //   transformed.set([temp2], 2);\n      // } else {\n      //   const temp2 = transformed[0];\n      //   transformed.set([transformed[2]], 0);\n      //   transformed.set([temp2], 2);\n      // }\n      var _transformed = _slicedToArray(transformed, 4),\n        x1 = _transformed[0],\n        y1 = _transformed[1],\n        x2 = _transformed[2],\n        y2 = _transformed[3];\n      var _this$transformCoordi7 = this.transformCoordinate(x1, y1, canvasRect, dispWidth, dispHeight, rotation),\n        _this$transformCoordi8 = _slicedToArray(_this$transformCoordi7, 2),\n        minx = _this$transformCoordi8[0],\n        miny = _this$transformCoordi8[1];\n      var _this$transformCoordi9 = this.transformCoordinate(x2, y2, canvasRect, dispWidth, dispHeight, rotation),\n        _this$transformCoordi0 = _slicedToArray(_this$transformCoordi9, 2),\n        maxx = _this$transformCoordi0[0],\n        maxy = _this$transformCoordi0[1];\n\n      // console.log(\'##\', minx, miny, maxx, maxy);\n      // console.log(\n      //   `\\x1b[38;2;${color[0]};${color[1]};${color[2]}mtext!\\x1b[0m`,\n      //   lineCoordinates,\n      // );\n      // console.log(\'Transformed:\', x1, y1, \'→\', minx, miny);\n      // console.log(\'Transformed:\', x2, y2, \'→\', maxx, maxy);\n\n      ctx.strokeStyle = rgba;\n      ctx.lineWidth = lw;\n      ctx.lineJoin = \'round\';\n      ctx.lineCap = \'square\';\n\n      // 직선 그리기\n      ctx.beginPath();\n      // ctx.moveTo(x1, y1); // 시작점 (minx, miny)\n      // ctx.lineTo(x2, y2); // 끝점 (maxx, maxy)\n      ctx.moveTo(minx, miny); // 시작점 (minx, miny)\n      ctx.lineTo(maxx, maxy); // 끝점 (maxx, maxy)\n      ctx.stroke(); // 직선 그리기\n\n      ctx.restore();\n    }\n\n    /**\n     * 마우스 좌표가 특정 annotation 사각형 내부에 있는지 판단하는 함수\n     * @param {number} mouseX 캔버스 내 마우스 x 좌표\n     * @param {number} mouseY 캔버스 내 마우스 y 좌표\n     * @param {Array} annotationRect PDF annotation의 rect: [llx, lly, urx, ury]\n     * @param {Array} canvasRect PDF 전체 영역의 절대 rect: [llx, lly, urx, ury]\n     * @param {number} dispWidth 캔버스의 스타일 width (픽셀)\n     * @param {number} dispHeight 캔버스의 스타일 height (픽셀)\n     * @returns {boolean} 마우스가 annotation 영역 안에 있으면 true, 아니면 false\n     */\n  }, {\n    key: "isPointInAnnotation",\n    value: function isPointInAnnotation(mouseX, mouseY, annotationRect, canvasRect, dispWidth, dispHeight, styleWidth, styleHeight) {}\n  }, {\n    key: "sampe",\n    value: function sampe() {\n      var ink = new InkAnnotation();\n      var line = new LineAnnotation();\n      var squre = new SquareAnnotation();\n      var circle = new CircleAnnotation();\n      var polygon = new PolygonAnnotation();\n      var popup = new PopupAnnotation();\n      var link = new LinkAnnotation();\n      var highlight = new HighlightAnnotation();\n      var underline = new UnderlineAnnotation();\n      var strikeout = new StrikeOutAnnotation();\n      ink.sample();\n      line.sample();\n      squre.sample();\n      circle.sample();\n      polygon.sample();\n      popup.sample();\n      link.sample();\n      highlight.sample();\n      underline.sample();\n      strikeout.sample();\n      return [ink, line, squre, circle, polygon, popup, link, highlight, underline, strikeout];\n    }\n\n    /**\n     * 이벤트 값에서 상대 좌표 추출\n     * @param {MouseEvent|TouchEvent} e\n     * @param {*} canvas\n     * @returns\n     */\n  }, {\n    key: "transformCoordinate",\n    value:\n    /**\n     * PDF 좌표를 캔버스 디스플레이 좌표로 변환하는 함수\n     * @param {number} x PDF 좌표의 x\n     * @param {number} y PDF 좌표의 y\n     * @param {Array} canvasRect PDF의 원본 절대 rect: [left, top, width, height]\n     * @param {number} dispWidth 캔버스의 스타일 width\n     * @param {number} dispHeight 캔버스의 스타일 height\n     * @returns {Array} [canvasX, canvasY]\n     */\n    function transformCoordinate(x, y, canvasRect, dispWidth, dispHeight, rotation) {\n      if (rotation == 90 || rotation == 270) {\n        var _canvasRect = _slicedToArray(canvasRect, 4),\n          _lly = _canvasRect[0],\n          _llx = _canvasRect[1],\n          _ury = _canvasRect[2],\n          _urx = _canvasRect[3];\n        var _pdfWidth = _urx - _llx;\n        var _pdfHeight = _ury - _lly;\n\n        // PDF 좌표의 상대 위치 (0~1)\n        var _relativeX = (y - _llx) / _pdfWidth;\n        var _relativeY = (x - _lly) / _pdfHeight;\n        var _canvasX = _relativeX * dispWidth;\n        var _canvasY = _relativeY * dispHeight;\n        return [_canvasX, _canvasY];\n      }\n      var _canvasRect2 = _slicedToArray(canvasRect, 4),\n        llx = _canvasRect2[0],\n        lly = _canvasRect2[1],\n        urx = _canvasRect2[2],\n        ury = _canvasRect2[3];\n      var pdfWidth = urx - llx;\n      var pdfHeight = ury - lly;\n\n      // PDF 좌표의 상대 위치 (0~1)\n      var relativeX = (x - llx) / pdfWidth;\n      var relativeY = (y - lly) / pdfHeight;\n\n      // 캔버스는 원점이 좌측 상단이므로 y축은 (1 - relativeY)로 반전\n      var canvasX = relativeX * dispWidth;\n      var canvasY = (1 - relativeY) * dispHeight;\n      return [canvasX, canvasY]; // 0도, 180도일 때 기본 좌표 반환\n    }\n  }]);\n}();\n_defineProperty(AnnotationFactory, "getRelativeCoordinates", function (e, canvas) {\n  if (!canvas) {\n    return [];\n  }\n\n  // console.log(e);\n  var x = e.type.startsWith(\'mouse\') ? e.clientX : e.changedTouches[0].clientX;\n  var y = e.type.startsWith(\'mouse\') ? e.clientY : e.changedTouches[0].clientY;\n  var rect = canvas.getBoundingClientRect();\n  // CSS 크기와 실제 캔버스 크기 비율 계산\n  var scaleX = canvas.width / rect.width;\n  var scaleY = canvas.height / rect.height;\n  return [parseFloat(((x - rect.left) * scaleX).toFixed(6)), parseFloat(((y - rect.top) * scaleY).toFixed(6))];\n});\n/**\n * 캔버스 상대 좌표를 절대 좌표로 변환하는 작업\n * @param {number} relativeX\n * @param {number} relativeY\n * @param {number} canvasWidth\n * @param {number} canvasHeight\n * @returns\n */\n_defineProperty(AnnotationFactory, "convertCordinate", function (relativeX, relativeY, canvasWidth, canvasHeight, viewPort, rotate) {\n  var _viewPort$viewBox = _slicedToArray(viewPort.viewBox, 4),\n    minX = _viewPort$viewBox[0],\n    minY = _viewPort$viewBox[1],\n    maxX = _viewPort$viewBox[2],\n    maxY = _viewPort$viewBox[3];\n  var originWidth = maxX - minX;\n  var originHeight = maxY - minY;\n  var scaledX = originWidth / canvasWidth;\n  var scaledY = originHeight / canvasHeight;\n  if (rotate === 90) {\n    return [minX + relativeY * (originWidth / canvasHeight), minY + relativeX * (originHeight / canvasWidth)];\n  } else {\n    return [minX + relativeX * scaledX, minY + (canvasHeight - relativeY) * scaledY];\n  }\n});\n/**\n * 중복좌표 제거 로직\n * @param {*} x\n * @param {*} y\n * @param {*} list\n * @returns\n */\n_defineProperty(AnnotationFactory, "duplicateCordinate", function (x, y, list) {\n  var lastX = list[list.length - 2];\n  var lastY = list[list.length - 1];\n  if (lastX == x && lastY == y) {\n    return true;\n  }\n  return false;\n});\n/**\n * 좌표에서 rect 추출\n * @param {*} coords\n * @returns\n */\n_defineProperty(AnnotationFactory, "calculateBoundingRect", function (coords) {\n  var minX = Infinity,\n    maxX = -Infinity;\n  var minY = Infinity,\n    maxY = -Infinity;\n\n  // 각 좌표에 대해 최소값과 최대값을 계산\n  for (var i = 0; i < coords.length; i++) {\n    for (var j = 0; j < coords[i].length; j += 2) {\n      // x, y 짝으로 처리\n      var x = coords[i][j];\n      var y = coords[i][j + 1];\n      minX = Math.min(minX, x);\n      maxX = Math.max(maxX, x);\n      minY = Math.min(minY, y);\n      maxY = Math.max(maxY, y);\n    }\n  }\n\n  // 직사각형의 좌표와 크기 계산\n  var rect = [minX, minY, maxX, maxY];\n  return rect;\n});\nvar BaseAnnotation = exports.BaseAnnotation = /*#__PURE__*/function () {\n  function BaseAnnotation() {\n    var _ref5 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      annotationFlags = _ref5.annotationFlags,\n      annotationType = _ref5.annotationType,\n      backgroundColor = _ref5.backgroundColor,\n      borderColor = _ref5.borderColor,\n      borderStyle = _ref5.borderStyle,\n      color = _ref5.color,\n      opacity = _ref5.opacity,\n      contentsObj = _ref5.contentsObj,\n      dest = _ref5.dest,\n      hasAppearance = _ref5.hasAppearance,\n      hasOwnCanvas = _ref5.hasOwnCanvas,\n      id = _ref5.id,\n      isEditable = _ref5.isEditable,\n      modificationDate = _ref5.modificationDate,\n      noHTML = _ref5.noHTML,\n      noRotate = _ref5.noRotate,\n      rect = _ref5.rect,\n      rotation = _ref5.rotation,\n      structParent = _ref5.structParent,\n      subtype = _ref5.subtype,\n      borderWidth = _ref5.borderWidth,\n      width = _ref5.width,\n      pageNum = _ref5.pageNum,\n      pageIndex = _ref5.pageIndex,\n      creationDate = _ref5.creationDate;\n    _classCallCheck(this, BaseAnnotation);\n    this.pageNum = pageNum;\n    this.pageIndex = pageIndex;\n    this.id = id;\n    this.type = annotationType;\n    this.subtype = subtype;\n    this.flag = annotationFlags;\n    this.rect = rect; // [x1, y1, x2, y2]\n    this.contents = contentsObj;\n    this.color = color || new Uint8ClampedArray([0, 0, 0]);\n    /**@type {number} */\n    this.opacity = opacity || 1;\n    this.backgroundColor = backgroundColor;\n    this.borderColor = borderColor;\n    this.borderStyle = borderStyle;\n    if (typeof borderWidth == \'number\') {\n      this.borderStyle = {\n        width: borderWidth,\n        rawWidth: borderWidth,\n        style: 1,\n        dashArray: [3],\n        horizontalCornerRadius: 0,\n        verticalCornerRadius: 0\n      };\n    }\n    if (typeof width == \'number\') {\n      this.borderStyle = {\n        width: width,\n        rawWidth: width,\n        style: 1,\n        dashArray: [3],\n        horizontalCornerRadius: 0,\n        verticalCornerRadius: 0\n      };\n    }\n    this.modificationDate = null;\n    this.creationDate = null;\n    if (modificationDate instanceof Date) {\n      this.modificationDate = (0, _ui.formatToPdfDate)(modificationDate);\n    }\n    if (creationDate instanceof Date) {\n      this.creationDate = (0, _ui.formatToPdfDate)(creationDate);\n    }\n    if (!this.modificationDate) {\n      this.modificationDate = (0, _ui.formatToPdfDate)();\n    }\n    if (!this.creationDate) {\n      this.creationDate = (0, _ui.formatToPdfDate)();\n    }\n  }\n  return _createClass(BaseAnnotation, [{\n    key: "isArrayOfFloat32Array",\n    value: function isArrayOfFloat32Array(value) {\n      return Array.isArray(value) && value.every(function (item) {\n        return item instanceof Float32Array;\n      });\n    }\n  }, {\n    key: "toObject",\n    value: function toObject() {\n      var _this2 = this;\n      var newObject = {};\n      Object.keys(this).forEach(function (it) {\n        var value = _this2[it];\n        if (value != null && value != undefined) {\n          if (it === \'borderStyle\') {\n            if (_typeof(value) === \'object\') {\n              newObject[\'width\'] = value.rawWidth;\n            }\n          } else if (it === \'color\') {\n            if (value instanceof Uint8ClampedArray) {\n              newObject[it] = Array.from(value);\n            }\n          } else {\n            if (value instanceof Float32Array) {\n              newObject[it] = Array.from(value);\n            } else if (_this2.isArrayOfFloat32Array(value)) {\n              newObject[it] = value.map(function (it) {\n                return Array.from(it);\n              });\n            } else {\n              newObject[it] = value;\n            }\n          }\n        }\n      });\n      return newObject;\n    }\n  }, {\n    key: "rectToPx",\n    value: function rectToPx(parentOriginRect, targetWidth, targetHeigh) {\n      return (0, _ui.getPdfScreenRect)(parentOriginRect, this.rect, targetWidth, targetHeigh);\n    }\n  }]);\n}();\n/**\n * 자유선\n */\nvar InkAnnotation = exports.InkAnnotation = /*#__PURE__*/function (_BaseAnnotation) {\n  function InkAnnotation(params) {\n    var _this3;\n    _classCallCheck(this, InkAnnotation);\n    _this3 = _callSuper(this, InkAnnotation, [params]);\n    if ((params === null || params === void 0 ? void 0 : params.inkLists) instanceof Float32Array) {\n      /**\n       * @type {Float32Array}\n       */\n      _this3.inkLists = params === null || params === void 0 ? void 0 : params.inkLists;\n    } else if (Array.isArray(params === null || params === void 0 ? void 0 : params.inkLists)) {\n      /**\n       * @type {Float32Array}\n       */\n      _this3.inkLists = params === null || params === void 0 ? void 0 : params.inkLists;\n    } else {\n      throw new Error(\'Unknown Type\');\n    }\n    return _this3;\n  }\n  _inherits(InkAnnotation, _BaseAnnotation);\n  return _createClass(InkAnnotation, [{\n    key: "sample",\n    value: function sample() {\n      this.color = [19, 115, 232];\n      this.rect = [104.461, 156.198, 138.38, 184.672];\n      this.inkLists = [new Float32Array([136.14599609375, 159.16200256347656, 134.83700561523438, 159.16200256347656, 133.5279998779297, 159.16200256347656, 131.56399536132812, 159.16200256347656, 130.2550048828125, 159.16200256347656, 128.29100036621094, 159.16200256347656, 126.98200225830078, 159.16200256347656, 125.6729965209961, 159.16200256347656, 123.70999908447266, 159.16200256347656, 122.4010009765625, 159.16200256347656, 119.78199768066406, 159.16200256347656, 117.16400146484375, 159.16200256347656, 115.20099639892578, 159.16200256347656, 113.89099884033203, 159.8159942626953, 113.23699951171875, 159.8159942626953, 112.58200073242188, 159.8159942626953, 111.9280014038086, 159.8159942626953, 111.27300262451172, 159.8159942626953, 111.27300262451172, 160.4709930419922, 110.61900329589844, 161.125, 109.96399688720703, 161.77999877929688, 109.30999755859375, 162.4340057373047, 109.30999755859375, 163.08900451660156, 108.65499877929688, 163.08900451660156, 108.65499877929688, 163.7429962158203, 108.65499877929688, 164.3979949951172, 108.65499877929688, 165.05299377441406, 108, 165.70700073242188, 108, 166.36199951171875, 108, 167.01600646972656, 108, 168.3249969482422, 107.34600067138672, 168.97999572753906, 107.34600067138672, 169.63400268554688, 107.34600067138672, 170.28900146484375, 107.34600067138672, 170.9429931640625, 107.34600067138672, 171.59800720214844, 107.34600067138672, 172.2530059814453, 107.34600067138672, 172.90699768066406, 107.34600067138672, 173.56199645996094, 107.34600067138672, 174.21600341796875, 107.34600067138672, 174.87100219726562, 107.34600067138672, 175.52499389648438, 107.34600067138672, 176.17999267578125, 108, 176.83399963378906, 108, 177.48899841308594, 108.65499877929688, 178.1439971923828, 109.30999755859375, 178.79800415039062, 109.96399688720703, 179.4530029296875, 110.61900329589844, 180.10699462890625, 111.27300262451172, 180.10699462890625, 111.9280014038086, 180.76199340820312, 113.23699951171875, 180.76199340820312, 113.89099884033203, 180.76199340820312, 114.5459976196289, 181.41600036621094, 115.20099639892578, 181.41600036621094, 117.16400146484375, 181.41600036621094, 118.4729995727539, 182.0709991455078, 121.09100341796875, 182.0709991455078, 121.74600219726562, 182.0709991455078, 123.05500030517578, 182.0709991455078, 124.36399841308594, 182.0709991455078, 125.01899719238281, 182.0709991455078, 125.6729965209961, 182.0709991455078, 126.98200225830078, 182.0709991455078, 127.63700103759766, 182.0709991455078, 128.29100036621094, 181.41600036621094, 128.9459991455078, 181.41600036621094, 129.6009979248047, 181.41600036621094, 130.2550048828125, 181.41600036621094, 131.56399536132812, 181.41600036621094, 132.218994140625, 181.41600036621094, 133.5279998779297, 180.76199340820312, 134.1820068359375, 180.10699462890625, 134.83700561523438, 180.10699462890625, 134.83700561523438, 178.79800415039062, 135.49200439453125, 178.1439971923828, 136.14599609375, 176.83399963378906, 136.14599609375, 176.17999267578125, 136.14599609375, 175.52499389648438, 136.14599609375, 174.87100219726562, 136.14599609375, 173.56199645996094, 136.14599609375, 171.59800720214844, 136.14599609375, 170.28900146484375, 136.14599609375, 169.63400268554688, 136.14599609375, 168.97999572753906, 136.14599609375, 167.67100524902344, 136.14599609375, 167.01600646972656, 135.49200439453125, 165.70700073242188, 135.49200439453125, 165.05299377441406, 135.49200439453125, 164.3979949951172, 134.83700561523438, 163.08900451660156, 134.1820068359375, 161.77999877929688, 133.5279998779297, 160.4709930419922, 132.218994140625, 159.16200256347656, 132.218994140625, 158.5070037841797, 131.56399536132812, 157.85299682617188, 131.56399536132812, 157.197998046875, 130.91000366210938, 157.197998046875])];\n      this.opacity = 1;\n    }\n  }]);\n}(BaseAnnotation);\n/**\n * 지우개 자유선\n */\nvar EraserAnnotation = /*#__PURE__*/function (_BaseAnnotation2) {\n  function EraserAnnotation(params) {\n    var _this4;\n    _classCallCheck(this, EraserAnnotation);\n    _this4 = _callSuper(this, EraserAnnotation, [params]);\n    /**\n     * @type {Float32Array}\n     */\n    _this4.inkLists = params === null || params === void 0 ? void 0 : params.inkLists;\n    return _this4;\n  }\n  _inherits(EraserAnnotation, _BaseAnnotation2);\n  return _createClass(EraserAnnotation);\n}(BaseAnnotation);\n/**\n * 직선\n */\nvar LineAnnotation = exports.LineAnnotation = /*#__PURE__*/function (_BaseAnnotation3) {\n  function LineAnnotation(params) {\n    var _this5;\n    _classCallCheck(this, LineAnnotation);\n    _this5 = _callSuper(this, LineAnnotation, [params]);\n    /**\n     * @type {Array<Number>}\n     */\n    _this5.lineCoordinates = params === null || params === void 0 ? void 0 : params.lineCoordinates;\n    /**\n     * 0: 선의 시작\n     * 1: 선의 종료\n     * @type {Array<String>} \n     * \n        [\n            "None",\n            "OpenArrow"\n        ]\n    */\n    _this5.lineEndings = params === null || params === void 0 ? void 0 : params.lineEndings;\n    /**\n     * @type {String} 선타입 LineArrow\n     */\n    _this5.it = params === null || params === void 0 ? void 0 : params.it;\n    return _this5;\n  }\n  _inherits(LineAnnotation, _BaseAnnotation3);\n  return _createClass(LineAnnotation, [{\n    key: "sample",\n    value: function sample() {\n      this.color = [19, 115, 232];\n      this.rect = [186.937, 177.88, 365.502, 188.88];\n      this.lineCoordinates = [192.437, 183.38, 360.002, 183.38];\n      this.lineEndings = [\'None\', \'None\'];\n    }\n  }, {\n    key: "sample2",\n    value: function sample2() {\n      this.color = [19, 115, 232];\n      this.rect = [30.1092, 198.435, 46.4729, 219.38];\n      this.lineCoordinates = [192.437, 183.38, 360.002, 183.38];\n      this.lineEndings = [\'None\', \'OpenArrow\'];\n      this.it = LineArrow;\n    }\n  }]);\n}(BaseAnnotation);\n/**\n * 사각형\n * rect\n */\nvar SquareAnnotation = exports.SquareAnnotation = /*#__PURE__*/function (_BaseAnnotation4) {\n  function SquareAnnotation(params) {\n    _classCallCheck(this, SquareAnnotation);\n    return _callSuper(this, SquareAnnotation, [params]);\n  }\n  _inherits(SquareAnnotation, _BaseAnnotation4);\n  return _createClass(SquareAnnotation, [{\n    key: "sample",\n    value: function sample() {\n      this.color = [19, 115, 232];\n      this.rect = [248.883, 65.7158, 297.01, 85.0431];\n    }\n  }]);\n}(BaseAnnotation);\n/**\n * 원형\n * rect\n */\nvar CircleAnnotation = exports.CircleAnnotation = /*#__PURE__*/function (_BaseAnnotation5) {\n  function CircleAnnotation(params) {\n    _classCallCheck(this, CircleAnnotation);\n    return _callSuper(this, CircleAnnotation, [params]);\n  }\n  _inherits(CircleAnnotation, _BaseAnnotation5);\n  return _createClass(CircleAnnotation, [{\n    key: "sample",\n    value: function sample() {\n      this.color = [19, 115, 232];\n      this.rect = [29.6092, 55.243, 92.7913, 90.2795];\n    }\n  }]);\n}(BaseAnnotation);\n/**\n * 다각형\n * rect\n * vertices\n */\nvar PolygonAnnotation = exports.PolygonAnnotation = /*#__PURE__*/function (_BaseAnnotation6) {\n  function PolygonAnnotation(params) {\n    var _this6;\n    _classCallCheck(this, PolygonAnnotation);\n    _this6 = _callSuper(this, PolygonAnnotation, [params]);\n    /**\n     * @type {Float32Array}\n     * \n    \n     */\n    _this6.vertices = params === null || params === void 0 ? void 0 : params.vertices;\n    /** @type {String} "PolygonCloud" */\n    _this6.it = params === null || params === void 0 ? void 0 : params.it;\n    return _this6;\n  }\n  _inherits(PolygonAnnotation, _BaseAnnotation6);\n  return _createClass(PolygonAnnotation, [{\n    key: "sample",\n    value: function sample() {\n      this.color = [19, 115, 232];\n      this.rect = [46.1275, 484.781, 109.655, 524.091];\n      this.vertices = new Float32Array([265.0920104980469, 150.65199279785156, 231.7100067138672, 118.58000183105469, 265.0920104980469, 150.65199279785156]);\n    }\n  }]);\n}(BaseAnnotation);\n/**\n * 팝업\n * rect\n * parentRect\n */\nvar PopupAnnotation = exports.PopupAnnotation = /*#__PURE__*/function (_BaseAnnotation7) {\n  function PopupAnnotation(params) {\n    var _this7;\n    _classCallCheck(this, PopupAnnotation);\n    _this7 = _callSuper(this, PopupAnnotation, [params]);\n    /**\n     * @type {Array<number>}\n     */\n    _this7.parentRect = params === null || params === void 0 ? void 0 : params.parentRect;\n    return _this7;\n  }\n  _inherits(PopupAnnotation, _BaseAnnotation7);\n  return _createClass(PopupAnnotation, [{\n    key: "sample",\n    value: function sample() {\n      this.color = [19, 115, 232];\n      this.rect = [46.1275, 484.781, 109.655, 524.091];\n      this.vertices = new Float32Array([265.0920104980469, 150.65199279785156, 231.7100067138672, 118.58000183105469, 265.0920104980469, 150.65199279785156]);\n    }\n  }]);\n}(BaseAnnotation);\n/**\n * 링크\n * rect\n * dest\n */\nvar LinkAnnotation = exports.LinkAnnotation = /*#__PURE__*/function (_BaseAnnotation8) {\n  function LinkAnnotation(params) {\n    var _this8;\n    _classCallCheck(this, LinkAnnotation);\n    _this8 = _callSuper(this, LinkAnnotation, [params]);\n    /**\n     * @type {Array<number>}\n     */\n    _this8.dest = params === null || params === void 0 ? void 0 : params.dest;\n    return _this8;\n  }\n  _inherits(LinkAnnotation, _BaseAnnotation8);\n  return _createClass(LinkAnnotation, [{\n    key: "sample",\n    value: function sample() {\n      this.color = [19, 115, 232];\n      this.rect = [46.1275, 484.781, 109.655, 524.091];\n    }\n  }]);\n}(BaseAnnotation);\n/**\n * 하이라이트\n * rect\n * quadPoints\n */\nvar HighlightAnnotation = exports.HighlightAnnotation = /*#__PURE__*/function (_BaseAnnotation9) {\n  function HighlightAnnotation(params) {\n    var _this9;\n    _classCallCheck(this, HighlightAnnotation);\n    _this9 = _callSuper(this, HighlightAnnotation, [params]);\n    /**\n     * @type {Float32Array}\n     */\n    _this9.quadPoints = params === null || params === void 0 ? void 0 : params.quadPoints;\n    return _this9;\n  }\n  _inherits(HighlightAnnotation, _BaseAnnotation9);\n  return _createClass(HighlightAnnotation, [{\n    key: "sample",\n    value: function sample() {\n      this.color = [19, 115, 232];\n      this.rect = [85.1847, 532.536, 360.438, 548.97];\n      this.quadPoints = new Float32Array([85.66809844970703, 548.4869995117188, 359.9549865722656, 548.4869995117188, 85.66809844970703, 533.0189819335938, 359.9549865722656, 533.0189819335938]);\n    }\n  }]);\n}(BaseAnnotation);\n/**\n * 밑줄\n * rect\n * quadPoints\n */\nvar UnderlineAnnotation = exports.UnderlineAnnotation = /*#__PURE__*/function (_BaseAnnotation0) {\n  function UnderlineAnnotation(params) {\n    var _this0;\n    _classCallCheck(this, UnderlineAnnotation);\n    _this0 = _callSuper(this, UnderlineAnnotation, [params]);\n    /**\n     * @type {Float32Array}\n     */\n    _this0.quadPoints = params === null || params === void 0 ? void 0 : params.quadPoints;\n    return _this0;\n  }\n  _inherits(UnderlineAnnotation, _BaseAnnotation0);\n  return _createClass(UnderlineAnnotation, [{\n    key: "sample",\n    value: function sample() {\n      this.color = [19, 115, 232];\n      this.rect = [23.7676, 438.454, 364.571, 479.255];\n      this.quadPoints = new Float32Array([85.66809844970703, 548.4869995117188, 359.9549865722656, 548.4869995117188, 85.66809844970703, 533.0189819335938, 359.9549865722656, 533.0189819335938]);\n    }\n  }]);\n}(BaseAnnotation);\n/**\n * 취소선\n * rect\n * quadPoints\n */\nvar StrikeOutAnnotation = exports.StrikeOutAnnotation = /*#__PURE__*/function (_BaseAnnotation1) {\n  function StrikeOutAnnotation(params) {\n    var _this1;\n    _classCallCheck(this, StrikeOutAnnotation);\n    _this1 = _callSuper(this, StrikeOutAnnotation, [params]);\n    /**\n     * @type {Float32Array}\n     */\n    _this1.quadPoints = params === null || params === void 0 ? void 0 : params.quadPoints;\n    return _this1;\n  }\n  _inherits(StrikeOutAnnotation, _BaseAnnotation1);\n  return _createClass(StrikeOutAnnotation, [{\n    key: "sample",\n    value: function sample() {\n      this.color = [248, 100, 100];\n      this.rect = [120.912, 391.654, 310.385, 409.055];\n      this.quadPoints = new Float32Array([125.5250015258789, 408.0880126953125, 305.77301025390625, 408.0880126953125, 125.5250015258789, 392.6210021972656, 305.77301025390625, 392.6210021972656]);\n    }\n  }]);\n}(BaseAnnotation);\n\n//# sourceURL=webpack://ViewerJS/./src/pdf/core/Annotation.js?')},75376:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar log10 = __webpack_require__(49340);\n\n// `Math.log10` method\n// https://tc39.es/ecma262/#sec-math.log10\n$({ target: 'Math', stat: true }, {\n  log10: log10\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.math.log10.js?")},75854:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar toPrimitive = __webpack_require__(72777);\n\nvar $TypeError = TypeError;\n\n// `ToBigInt` abstract operation\n// https://tc39.es/ecma262/#sec-tobigint\nmodule.exports = function (argument) {\n  var prim = toPrimitive(argument, 'number');\n  if (typeof prim == 'number') throw new $TypeError(\"Can't convert number to bigint\");\n  // eslint-disable-next-line es/no-bigint -- safe\n  return BigInt(prim);\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/to-big-int.js?")},76031:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove this module from `core-js@4` since it's split to modules listed below\n__webpack_require__(15575);\n__webpack_require__(24599);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/web.timers.js?")},76080:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar uncurryThis = __webpack_require__(27476);\nvar aCallable = __webpack_require__(79306);\nvar NATIVE_BIND = __webpack_require__(40616);\n\nvar bind = uncurryThis(uncurryThis.bind);\n\n// optional / simple context binding\nmodule.exports = function (fn, that) {\n  aCallable(fn);\n  return that === undefined ? fn : NATIVE_BIND ? bind(fn, that) : function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/function-bind-context.js?")},76406:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";eval('\n\n__webpack_require__(52675);\n__webpack_require__(89463);\n__webpack_require__(2259);\n__webpack_require__(45700);\n__webpack_require__(23418);\n__webpack_require__(34782);\n__webpack_require__(89572);\n__webpack_require__(23288);\n__webpack_require__(62010);\n__webpack_require__(67945);\n__webpack_require__(84185);\n__webpack_require__(83851);\n__webpack_require__(81278);\n__webpack_require__(27495);\n__webpack_require__(38781);\nObject.defineProperty(exports, "__esModule", ({\n  value: true\n}));\nexports.CanvasManager = void 0;\n__webpack_require__(28706);\n__webpack_require__(2008);\n__webpack_require__(48980);\n__webpack_require__(51629);\n__webpack_require__(74423);\n__webpack_require__(64346);\n__webpack_require__(23792);\n__webpack_require__(62062);\n__webpack_require__(54554);\n__webpack_require__(54743);\n__webpack_require__(11745);\n__webpack_require__(38309);\n__webpack_require__(59089);\n__webpack_require__(60739);\n__webpack_require__(36033);\n__webpack_require__(39469);\n__webpack_require__(2892);\n__webpack_require__(69085);\n__webpack_require__(59904);\n__webpack_require__(40875);\n__webpack_require__(79432);\n__webpack_require__(26099);\n__webpack_require__(16034);\n__webpack_require__(31415);\n__webpack_require__(21699);\n__webpack_require__(47764);\n__webpack_require__(34594);\n__webpack_require__(22134);\n__webpack_require__(81630);\n__webpack_require__(72170);\n__webpack_require__(75044);\n__webpack_require__(69539);\n__webpack_require__(31694);\n__webpack_require__(89955);\n__webpack_require__(33206);\n__webpack_require__(44496);\n__webpack_require__(66651);\n__webpack_require__(12887);\n__webpack_require__(19369);\n__webpack_require__(66812);\n__webpack_require__(8995);\n__webpack_require__(31575);\n__webpack_require__(36072);\n__webpack_require__(88747);\n__webpack_require__(28845);\n__webpack_require__(29423);\n__webpack_require__(57301);\n__webpack_require__(373);\n__webpack_require__(86614);\n__webpack_require__(41405);\n__webpack_require__(33684);\n__webpack_require__(73772);\n__webpack_require__(23500);\n__webpack_require__(62953);\nvar _ui = __webpack_require__(32604);\nvar _pdfTypes = __webpack_require__(30793);\nvar _Annotation = __webpack_require__(75056);\nfunction _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }\nfunction _iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }\nfunction _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }\nfunction _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }\nfunction _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }\nfunction _classPrivateFieldInitSpec(e, t, a) { _checkPrivateRedeclaration(e, t), t.set(e, a); }\nfunction _checkPrivateRedeclaration(e, t) { if (t.has(e)) throw new TypeError("Cannot initialize the same private elements twice on an object"); }\nfunction _classPrivateFieldGet(s, a) { return s.get(_assertClassBrand(s, a)); }\nfunction _classPrivateFieldSet(s, a, r) { return s.set(_assertClassBrand(s, a), r), r; }\nfunction _assertClassBrand(e, t, n) { if ("function" == typeof e ? e === t : e.has(t)) return arguments.length < 3 ? t : n; throw new TypeError("Private element is not present on this object"); }\nvar CanvasFactory = {\n  /**\n   * 직선 그리기.\n   * @param {CanvasRenderingContext2D} ctx\n   * @param {number} x1\n   * @param {number} y1\n   * @param {number} x2\n   * @param {number} y2\n   */\n  drawLine: function drawLine(ctx, x1, y1, x2, y2) {\n    ctx.beginPath();\n    ctx.moveTo(x1, y1);\n    ctx.lineTo(x2, y2);\n    ctx.stroke();\n  },\n  /**\n   * 자유선 그리기 시작\n   * @param {CanvasRenderingContext2D} ctx\n   * @param {number} x\n   * @param {number} y\n   **/\n  beginFreeLine: function beginFreeLine(ctx, x, y) {\n    ctx.beginPath();\n    ctx.moveTo(x, y);\n  },\n  /**\n   * 직선 그리기 이동\n   * @param {CanvasRenderingContext2D} ctx\n   * @param {number} x\n   * @param {number} y\n   **/\n  moveFreeLine: function moveFreeLine(ctx, x, y) {\n    ctx.lineTo(x, y);\n    ctx.stroke();\n  },\n  endFreeLine: function endFreeLine() {},\n  /**\n   * context 닫기\n   * @param {CanvasRenderingContext2D} ctx\n   **/\n  close: function close(ctx) {\n    ctx.closePath();\n  },\n  /**\n   * canvas clear\n   * @param {CanvasRenderingContext2D} ctx\n   * @param {number} width\n   * @param {number} height\n   **/\n  clear: function clear(ctx, width, height) {\n    ctx.clearRect(0, 0, width, height);\n  }\n};\nfunction cloneClassInstance(instance) {\n  var clone = Object.create(Object.getPrototypeOf(instance));\n  return Object.assign(clone, structuredClone(instance));\n}\nvar _baseHistoryIndex = /*#__PURE__*/new WeakMap();\nvar _currentHistoryIndex = /*#__PURE__*/new WeakMap();\nvar _currentHistory = /*#__PURE__*/new WeakMap();\nvar _currentMasterPath = /*#__PURE__*/new WeakMap();\nvar _currentPath = /*#__PURE__*/new WeakMap();\nvar _tempCurrentPath = /*#__PURE__*/new WeakMap();\nvar _defaultPath = /*#__PURE__*/new WeakMap();\nvar _canvas = /*#__PURE__*/new WeakMap();\nvar _ctx = /*#__PURE__*/new WeakMap();\nvar _containerElement = /*#__PURE__*/new WeakMap();\nvar _requestPageViewport = /*#__PURE__*/new WeakMap();\nvar _requestPageScale = /*#__PURE__*/new WeakMap();\nvar _requestPageRotate = /*#__PURE__*/new WeakMap();\nvar _requestPageCtx = /*#__PURE__*/new WeakMap();\nvar _isDrawing = /*#__PURE__*/new WeakMap();\nvar _editAnnotation = /*#__PURE__*/new WeakMap();\nvar _currentAnnoataionMode = /*#__PURE__*/new WeakMap();\nvar _currentColor = /*#__PURE__*/new WeakMap();\nvar _currentColorAlpha = /*#__PURE__*/new WeakMap();\nvar _currentBorderStyle = /*#__PURE__*/new WeakMap();\nvar _currentEraser = /*#__PURE__*/new WeakMap();\nvar _currentEraserBorderStyle = /*#__PURE__*/new WeakMap();\nvar _startX = /*#__PURE__*/new WeakMap();\nvar _startY = /*#__PURE__*/new WeakMap();\nvar _invalidate = /*#__PURE__*/new WeakMap();\nvar _createAnnotation = /*#__PURE__*/new WeakMap();\nvar CanvasManager = exports.CanvasManager = /*#__PURE__*/function () {\n  function CanvasManager() {\n    var _this = this;\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      containerElement = _ref.containerElement,\n      requestPageViewport = _ref.requestPageViewport,\n      requestPageScale = _ref.requestPageScale,\n      requestPageRotate = _ref.requestPageRotate,\n      requestPageCtx = _ref.requestPageCtx,\n      _annotations = _ref.annotations,\n      onHistoryChanged = _ref.onHistoryChanged;\n    _classCallCheck(this, CanvasManager);\n    /** @type {number} 그리기 초기 히스토리 index */\n    _classPrivateFieldInitSpec(this, _baseHistoryIndex, -1);\n    /** @type {number} 그리기 히스토리 index */\n    _classPrivateFieldInitSpec(this, _currentHistoryIndex, -1);\n    /** @type {Array} 그리기 히스토리 */\n    _classPrivateFieldInitSpec(this, _currentHistory, []);\n    /**  랜더링 되는 master Array */\n    _classPrivateFieldInitSpec(this, _currentMasterPath, []);\n    /** temp의 상위 parent Array */\n    _classPrivateFieldInitSpec(this, _currentPath, []);\n    /** x,y좌표들을 담는 Array */\n    _classPrivateFieldInitSpec(this, _tempCurrentPath, []);\n    /**  시작할때 가지고 들어오는  Array */\n    _classPrivateFieldInitSpec(this, _defaultPath, []);\n    /** @type {HTMLCanvasElement} */\n    _classPrivateFieldInitSpec(this, _canvas, null);\n    /** @type {CanvasRenderingContext2D} */\n    _classPrivateFieldInitSpec(this, _ctx, null);\n    /** @type {HTMLElement} */\n    _classPrivateFieldInitSpec(this, _containerElement, null);\n    _classPrivateFieldInitSpec(this, _requestPageViewport, null);\n    _classPrivateFieldInitSpec(this, _requestPageScale, null);\n    _classPrivateFieldInitSpec(this, _requestPageRotate, null);\n    _classPrivateFieldInitSpec(this, _requestPageCtx, null);\n    /** @type {Boolean} 마우스,터치가 시작했는지 여부 */\n    _classPrivateFieldInitSpec(this, _isDrawing, false);\n    /** @type {Boolean} 수정모드 여부 */\n    _classPrivateFieldInitSpec(this, _editAnnotation, false);\n    /** @type {PdfAnnotationType.SubType} 캔버스 annotation모드 */\n    _classPrivateFieldInitSpec(this, _currentAnnoataionMode, _pdfTypes.PdfAnnotationType.SubType.INK);\n    /** @type {Uint8ClampedArray} 캔버스 펜컬러 rgb */\n    _classPrivateFieldInitSpec(this, _currentColor, new Uint8ClampedArray([0, 0, 0]));\n    /** @type {number} 캔버스 펜컬러 alpha값 */\n    _classPrivateFieldInitSpec(this, _currentColorAlpha, 1);\n    /** 캔버스 펜두께 */\n    _classPrivateFieldInitSpec(this, _currentBorderStyle, {\n      dashArray: [3],\n      horizontalCornerRadius: 0,\n      rawWidth: 5,\n      style: 1,\n      verticalCornerRadius: 0,\n      width: 0\n    });\n    /** 현재 사용중인 지우개 */\n    _classPrivateFieldInitSpec(this, _currentEraser, _pdfTypes.PdfAnnotationType.Eraser.NONE);\n    /** 현재 사용중인 지우개 두께 */\n    _classPrivateFieldInitSpec(this, _currentEraserBorderStyle, {\n      dashArray: [3],\n      horizontalCornerRadius: 0,\n      rawWidth: 10,\n      style: 1,\n      verticalCornerRadius: 0,\n      width: 0\n    });\n    _classPrivateFieldInitSpec(this, _startX, 0);\n    _classPrivateFieldInitSpec(this, _startY, 0);\n    _defineProperty(this, "callbackOpt", {\n      onCreateAnnotation: null,\n      onRemoveAnnotation: null,\n      onHistoryChanged: null\n    });\n    /**\n     * 현재 캔버스의 번호\n     */\n    _defineProperty(this, "getPageNum", function () {\n      var _classPrivateFieldGet2;\n      return Number((_classPrivateFieldGet2 = _classPrivateFieldGet(_canvas, _this)) === null || _classPrivateFieldGet2 === void 0 || (_classPrivateFieldGet2 = _classPrivateFieldGet2.dataset) === null || _classPrivateFieldGet2 === void 0 ? void 0 : _classPrivateFieldGet2.pagenum);\n    });\n    /**\n     * 확대 스케일\n     */\n    _defineProperty(this, "getScale", function () {\n      var _classPrivateFieldGet3;\n      return Number((_classPrivateFieldGet3 = _classPrivateFieldGet(_canvas, _this)) === null || _classPrivateFieldGet3 === void 0 || (_classPrivateFieldGet3 = _classPrivateFieldGet3.dataset) === null || _classPrivateFieldGet3 === void 0 ? void 0 : _classPrivateFieldGet3.scale);\n    });\n    /**\n     * 회전 방향\n     */\n    _defineProperty(this, "getRotate", function () {\n      var _classPrivateFieldGet4;\n      return Number((_classPrivateFieldGet4 = _classPrivateFieldGet(_canvas, _this)) === null || _classPrivateFieldGet4 === void 0 || (_classPrivateFieldGet4 = _classPrivateFieldGet4.dataset) === null || _classPrivateFieldGet4 === void 0 ? void 0 : _classPrivateFieldGet4.rotation);\n    });\n    /**\n     * 좌표에서 annotation 위치 찾기\n     * @param {MouseEvent|TouchEvent} e\n     * @param {HTMLCanvasElement} canvas\n     * @returns\n     */\n    _defineProperty(this, "findInAnnotation", function (e, canvas) {\n      var _canvas$dataset, _canvas$dataset2;\n      if (!(canvas instanceof HTMLCanvasElement)) {\n        return;\n      }\n      var _AnnotationFactory$ge = _Annotation.AnnotationFactory.getRelativeCoordinates(e, canvas),\n        _AnnotationFactory$ge2 = _slicedToArray(_AnnotationFactory$ge, 2),\n        moveX = _AnnotationFactory$ge2[0],\n        moveY = _AnnotationFactory$ge2[1];\n      var pagenum = Number((_canvas$dataset = canvas.dataset) === null || _canvas$dataset === void 0 ? void 0 : _canvas$dataset.pagenum);\n      var viewPort = _classPrivateFieldGet(_requestPageViewport, _this).call(_this, pagenum);\n      if (!viewPort) {\n        return;\n      }\n      var _AnnotationFactory$co = _Annotation.AnnotationFactory.convertCordinate(moveX, moveY, canvas.width, canvas.height, viewPort, Number(canvas === null || canvas === void 0 || (_canvas$dataset2 = canvas.dataset) === null || _canvas$dataset2 === void 0 ? void 0 : _canvas$dataset2.rotation)),\n        _AnnotationFactory$co2 = _slicedToArray(_AnnotationFactory$co, 2),\n        ax = _AnnotationFactory$co2[0],\n        ay = _AnnotationFactory$co2[1];\n      var curruntIdx = -1;\n      var id = -1;\n      var _iterator = _createForOfIteratorHelper(_classPrivateFieldGet(_currentMasterPath, _this)),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var it = _step.value;\n          if (it.subtype == \'Eraser\') {\n            continue;\n          }\n          /** ink(자유선)의 x,y좌표가 맞는지 확인하는 로직 */\n          if (it.inkLists) {\n            var _iterator2 = _createForOfIteratorHelper(it.inkLists.entries()),\n              _step2;\n            try {\n              for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n                var _step2$value = _slicedToArray(_step2.value, 2),\n                  idx = _step2$value[0],\n                  ink = _step2$value[1];\n                var test = _this.isMouseNearPoints(ax, ay, ink);\n                if (test) {\n                  curruntIdx = idx;\n                  id = it.id;\n                  break; // 루프 종료\n                }\n              }\n            } catch (err) {\n              _iterator2.e(err);\n            } finally {\n              _iterator2.f();\n            }\n          } else if (it.lineCoordinates) {\n            /** line(직선)의 x,y좌표가 맞는지 확인하는 로직 */\n            var _test = _this.isPointNearLine(ax, ay, it.lineCoordinates[0], it.lineCoordinates[1], it.lineCoordinates[2], it.lineCoordinates[3]);\n            if (_test) {\n              curruntIdx = -1;\n              id = it.id;\n              break;\n            }\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      if (curruntIdx == -1 && curruntIdx == 1) {\n        return null;\n      }\n      return {\n        id: id,\n        index: curruntIdx\n      };\n    });\n    /**\n     * 좌표 추가\n     * @param {number} x\n     * @param {number} y\n     */\n    _defineProperty(this, "addCordinate", function (x, y) {\n      var viewPort = _classPrivateFieldGet(_requestPageViewport, _this).call(_this, _this.getPageNum());\n      if (!viewPort) {\n        return;\n      }\n      var _AnnotationFactory$co3 = _Annotation.AnnotationFactory.convertCordinate(x, y, _classPrivateFieldGet(_canvas, _this).width, _classPrivateFieldGet(_canvas, _this).height, viewPort, _this.getRotate()),\n        _AnnotationFactory$co4 = _slicedToArray(_AnnotationFactory$co3, 2),\n        ax = _AnnotationFactory$co4[0],\n        ay = _AnnotationFactory$co4[1];\n      _classPrivateFieldGet(_tempCurrentPath, _this).push(ax, ay);\n    });\n    /**\n     * 현재 색상을 캔버스에 맞춰 변경\n     * @returns\n     */\n    _defineProperty(this, "changeCurrentColor", function () {\n      if (Array.isArray(_this.currentColor)) {\n        return "rgba(".concat(_this.currentColor[0], ",").concat(_this.currentColor[1], ",").concat(_this.currentColor[2], ",").concat(_this.currentColorAlpha, ")");\n      }\n    });\n    /**\n     * 선너비에 맞춰 변경\n     */\n    _defineProperty(this, "changeCurrentLinewidth", function () {\n      var isEraser = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      return isEraser ? _classPrivateFieldGet(_currentEraserBorderStyle, _this).rawWidth * _this.getScale() * window.devicePixelRatio : _classPrivateFieldGet(_currentBorderStyle, _this).rawWidth * _this.getScale() * window.devicePixelRatio;\n    });\n    /**\n     * 선너비에 맞춰 변경\n     */\n    _defineProperty(this, "changeCompositeOperation", function () {\n      var isEraser = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      return isEraser ? \'destination-out\' : \'source-over\';\n    });\n    /**\n     * canvas global style변경\n     * @param {boolean} isEraser\n     */\n    _defineProperty(this, "changeCanvasStyle", function () {\n      var isEraser = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      // setStyle\n      _classPrivateFieldGet(_ctx, _this).globalCompositeOperation = _this.changeCompositeOperation(isEraser);\n      _classPrivateFieldGet(_ctx, _this).lineWidth = _this.changeCurrentLinewidth(isEraser);\n      _classPrivateFieldGet(_ctx, _this).strokeStyle = _this.changeCurrentColor();\n      _classPrivateFieldGet(_ctx, _this).lineJoin = \'round\';\n      _classPrivateFieldGet(_ctx, _this).lineCap = \'round\';\n    });\n    /**\n     * 이벤트 핸들링.\n     * @param {MouseEvent|TouchEvent} e 이벤트 객체\n     */\n    _defineProperty(this, "handleEvent", function (e) {\n      if (!_classPrivateFieldGet(_editAnnotation, _this) || _classPrivateFieldGet(_currentAnnoataionMode, _this) == _pdfTypes.PdfAnnotationType.SubType.NONE) {\n        return;\n      }\n      var isEraser = _this.currentEraser == _pdfTypes.PdfAnnotationType.Eraser.NORMAL;\n      switch (e.type) {\n        case \'mousedown\':\n        case \'touchstart\':\n          e.preventDefault();\n          if (!_classPrivateFieldGet(_editAnnotation, _this)) {\n            return;\n          }\n          if (e.target instanceof HTMLCanvasElement) {\n            //객체 지우개\n            if (_this.currentEraser == _pdfTypes.PdfAnnotationType.Eraser.OBJECT) {\n              var findTarget = _this.findInAnnotation(e, e.target);\n              if (findTarget) {\n                var hasRemoveTarget = _this.removeAnnotation(findTarget === null || findTarget === void 0 ? void 0 : findTarget.id, findTarget === null || findTarget === void 0 ? void 0 : findTarget.index, true);\n                console.log(\'지우개 대상 찾음.hasRemoveTarget\', hasRemoveTarget);\n              }\n              return;\n            }\n            _classPrivateFieldSet(_canvas, _this, e.target);\n            _classPrivateFieldSet(_ctx, _this, _classPrivateFieldGet(_canvas, _this).getContext(\'2d\'));\n          }\n          _classPrivateFieldSet(_isDrawing, _this, true);\n\n          /**\n           * 상대좌표계산\n           */\n          var _AnnotationFactory$ge3 = _Annotation.AnnotationFactory.getRelativeCoordinates(e, _classPrivateFieldGet(_canvas, _this)),\n            _AnnotationFactory$ge4 = _slicedToArray(_AnnotationFactory$ge3, 2),\n            x = _AnnotationFactory$ge4[0],\n            y = _AnnotationFactory$ge4[1];\n\n          // 자유선 or 일반 지우개\n          if (_this.currentAnnoataionMode === _pdfTypes.PdfAnnotationType.SubType.INK || isEraser) {\n            var isDuplicate = _Annotation.AnnotationFactory.duplicateCordinate(x, y, _classPrivateFieldGet(_tempCurrentPath, _this));\n            if (isDuplicate) {\n              return;\n            }\n            //style\n            _this.changeCanvasStyle(isEraser);\n            //draw\n            CanvasFactory.beginFreeLine(_classPrivateFieldGet(_ctx, _this), x, y);\n            //add cordinate\n            _this.addCordinate(x, y);\n          }\n          //직선\n          else if (_this.currentAnnoataionMode === _pdfTypes.PdfAnnotationType.SubType.LINE) {\n            //style\n            _this.changeCanvasStyle(isEraser);\n            //add cordinate\n            _classPrivateFieldSet(_startX, _this, x);\n            _classPrivateFieldSet(_startY, _this, y);\n            _this.addCordinate(x, y);\n          }\n          e.stopPropagation();\n          break;\n        case \'mousemove\':\n        case \'touchmove\':\n          e.preventDefault();\n          if (!_classPrivateFieldGet(_isDrawing, _this)) return;\n          if (_this.currentEraser == _pdfTypes.PdfAnnotationType.Eraser.OBJECT) {\n            return;\n          }\n          if (!_classPrivateFieldGet(_canvas, _this)) {\n            return;\n          }\n          var _AnnotationFactory$ge5 = _Annotation.AnnotationFactory.getRelativeCoordinates(e, _classPrivateFieldGet(_canvas, _this)),\n            _AnnotationFactory$ge6 = _slicedToArray(_AnnotationFactory$ge5, 2),\n            moveX = _AnnotationFactory$ge6[0],\n            moveY = _AnnotationFactory$ge6[1];\n\n          //자유선\n          if (_this.currentAnnoataionMode === _pdfTypes.PdfAnnotationType.SubType.INK || isEraser) {\n            var isDuplicate2 = _Annotation.AnnotationFactory.duplicateCordinate(moveX, moveY, _classPrivateFieldGet(_tempCurrentPath, _this));\n            if (isDuplicate2) {\n              return;\n            }\n            //draw\n            CanvasFactory.moveFreeLine(_classPrivateFieldGet(_ctx, _this), moveX, moveY);\n            //add cordinate\n            _this.addCordinate(moveX, moveY);\n          }\n          //직선\n          else if (_this.currentAnnoataionMode === _pdfTypes.PdfAnnotationType.SubType.LINE) {\n            //전부 제거\n            CanvasFactory.clear(_classPrivateFieldGet(_ctx, _this), _classPrivateFieldGet(_canvas, _this).width, _classPrivateFieldGet(_canvas, _this).height);\n            //기억한 애들 복구\n            _this.invalidate();\n            //직선 그려주기.\n            CanvasFactory.drawLine(_classPrivateFieldGet(_ctx, _this), _classPrivateFieldGet(_startX, _this), _classPrivateFieldGet(_startY, _this), moveX, moveY);\n          }\n          e.stopPropagation();\n          break;\n        case \'mouseup\':\n        case \'touchend\':\n          _classPrivateFieldSet(_isDrawing, _this, false);\n          if (_this.currentEraser == _pdfTypes.PdfAnnotationType.Eraser.OBJECT) {\n            return;\n          }\n          if (!_classPrivateFieldGet(_canvas, _this)) {\n            return;\n          }\n          CanvasFactory.close(_classPrivateFieldGet(_ctx, _this));\n          CanvasFactory.clear(_classPrivateFieldGet(_ctx, _this), _classPrivateFieldGet(_canvas, _this).width, _classPrivateFieldGet(_canvas, _this).height);\n          var viewPort = _classPrivateFieldGet(_requestPageViewport, _this).call(_this, _this.getPageNum());\n          if (!viewPort) {\n            return;\n          }\n\n          //자유선\n          if (_this.currentAnnoataionMode === _pdfTypes.PdfAnnotationType.SubType.INK || isEraser) {\n            _classPrivateFieldGet(_currentPath, _this).push(_classPrivateFieldGet(_tempCurrentPath, _this));\n            _classPrivateFieldSet(_tempCurrentPath, _this, []);\n\n            /**\n             * viewBox의 시작점 만큼 보정을 해줘야한다.\n             */\n            var ls = _classPrivateFieldGet(_currentPath, _this).map(function (stroke) {\n              return new Float32Array(stroke);\n            });\n            console.log(_classPrivateFieldGet(_currentMasterPath, _this));\n            var last = _classPrivateFieldGet(_currentMasterPath, _this)[_classPrivateFieldGet(_currentMasterPath, _this).length - 1];\n            var isOld = (last === null || last === void 0 ? void 0 : last.color[0]) === _this.currentColor[0] && (last === null || last === void 0 ? void 0 : last.color[1]) === _this.currentColor[1] && (last === null || last === void 0 ? void 0 : last.color[2]) === _this.currentColor[2] && (last === null || last === void 0 ? void 0 : last.opacity) === _this.currentColorAlpha && (last === null || last === void 0 ? void 0 : last.borderStyle.rawWidth) == _classPrivateFieldGet(_currentBorderStyle, _this).rawWidth && (last === null || last === void 0 ? void 0 : last.subtype) == _classPrivateFieldGet(_currentAnnoataionMode, _this) && (last === null || last === void 0 ? void 0 : last.pageNum) == _this.getPageNum();\n            /**\n             * 바로 이전 객체가 같은 ink객체면 inkList에 그대로 추가한다.\n             */\n            if (isOld && !isEraser) {\n              _classPrivateFieldGet(_currentMasterPath, _this)[_classPrivateFieldGet(_currentMasterPath, _this).length - 1].inkLists.push(ls[0]);\n              _classPrivateFieldGet(_currentMasterPath, _this)[_classPrivateFieldGet(_currentMasterPath, _this).length - 1].modificationDate = (0, _ui.formatToPdfDate)();\n              _this.addHistory(_toConsumableArray(_classPrivateFieldGet(_currentMasterPath, _this)));\n            } else {\n              var obj = {\n                id: Date.now(),\n                inkLists: ls,\n                rect: _Annotation.AnnotationFactory.calculateBoundingRect(ls),\n                color: _classPrivateFieldGet(_currentColor, _this),\n                subtype: isEraser ? _pdfTypes.PdfAnnotationType.SubType.ERASER : _classPrivateFieldGet(_currentAnnoataionMode, _this),\n                borderStyle: isEraser ? _objectSpread({}, _classPrivateFieldGet(_currentEraserBorderStyle, _this)) : _objectSpread({}, _classPrivateFieldGet(_currentBorderStyle, _this))\n              };\n              var anno = _Annotation.AnnotationFactory.create(obj, _this.getPageNum(), _this.getScale());\n              _classPrivateFieldGet(_createAnnotation, _this).call(_this, anno);\n            }\n            _classPrivateFieldSet(_currentPath, _this, []);\n          }\n          //직선\n          else if (_this.currentAnnoataionMode === _pdfTypes.PdfAnnotationType.SubType.LINE) {\n            //\n            var _AnnotationFactory$ge7 = _Annotation.AnnotationFactory.getRelativeCoordinates(e, _classPrivateFieldGet(_canvas, _this)),\n              _AnnotationFactory$ge8 = _slicedToArray(_AnnotationFactory$ge7, 2),\n              endX = _AnnotationFactory$ge8[0],\n              endY = _AnnotationFactory$ge8[1];\n\n            //좌표담기\n            _this.addCordinate(endX, endY);\n            var transformed = new Float32Array(_classPrivateFieldGet(_tempCurrentPath, _this));\n            // // //최대,최소값 반전\n            // if (transformed[1] > transformed[3]) {\n            //   const temp = transformed[1];\n            //   transformed.set([transformed[3]], 1);\n            //   transformed.set([temp], 3);\n            // } else if (transformed[0] > transformed[2]) {\n            //   const temp2 = transformed[0];\n            //   transformed.set([transformed[2]], 0);\n            //   transformed.set([temp2], 2);\n            // } else {\n            //   const temp2 = transformed[0];\n            //   transformed.set([transformed[2]], 0);\n            //   transformed.set([temp2], 2);\n            // }\n\n            // 객체 생성\n            var _anno = _Annotation.AnnotationFactory.create({\n              id: Date.now(),\n              lineCoordinates: transformed,\n              rect: _Annotation.AnnotationFactory.calculateBoundingRect([_toConsumableArray(transformed)]),\n              lineEndings: [\'None\', \'None\'],\n              color: _classPrivateFieldGet(_currentColor, _this),\n              subtype: _classPrivateFieldGet(_currentAnnoataionMode, _this),\n              borderStyle: _objectSpread({}, _classPrivateFieldGet(_currentBorderStyle, _this))\n            }, _this.getPageNum(), _this.getScale());\n            _classPrivateFieldGet(_createAnnotation, _this).call(_this, _anno);\n            transformed = null;\n            _classPrivateFieldSet(_tempCurrentPath, _this, []);\n          }\n          _this.invalidate();\n          _classPrivateFieldSet(_canvas, _this, null);\n          _classPrivateFieldSet(_ctx, _this, null);\n          break;\n        case \'mouseout\':\n        case \'touchcancel\':\n          // this.#isDrawing = false;\n          // this.#canvas = null;\n          // this.#ctx = null;\n          break;\n      }\n    });\n    _defineProperty(this, "destroy", function () {\n      _this.removeListners();\n      _classPrivateFieldSet(_requestPageRotate, _this, null);\n      _classPrivateFieldSet(_requestPageScale, _this, null);\n      _classPrivateFieldSet(_requestPageViewport, _this, null);\n      _classPrivateFieldSet(_requestPageRotate, _this, null);\n      _classPrivateFieldSet(_requestPageCtx, _this, null);\n      _classPrivateFieldSet(_containerElement, _this, null);\n    });\n    /**\n     * 에노테이션 제거\n     * @param {string|number} annotationId\n     * @param {string|number} index\n     * @param {boolean} index\n     */\n    _defineProperty(this, "removeAnnotation", function (annotationId, index, usingEraser) {\n      if (annotationId == null || annotationId == undefined) {\n        throw new Error(\'필수파라미터 누락\');\n      }\n      var idx = _classPrivateFieldGet(_currentMasterPath, _this).findIndex(function (item) {\n        return item.id === annotationId;\n      });\n      if (idx !== -1) {\n        _this.clearValidate();\n        if (index >= 0 && _classPrivateFieldGet(_currentMasterPath, _this)[idx].inkLists) {\n          if (_classPrivateFieldGet(_currentMasterPath, _this)[idx].inkLists.length == 1 && index == 0) {\n            _classPrivateFieldGet(_currentMasterPath, _this).splice(idx, 1);\n          } else {\n            _classPrivateFieldGet(_currentMasterPath, _this)[idx].inkLists.splice(index, 1);\n          }\n        } else {\n          _classPrivateFieldGet(_currentMasterPath, _this).splice(idx, 1);\n        }\n        if (usingEraser) {\n          _this.addHistory(_toConsumableArray(_classPrivateFieldGet(_currentMasterPath, _this)));\n        } else {\n          _this.clearHistory();\n        }\n        _this.invalidate();\n        return true;\n      } else {\n        //제거할 대상을 찾지 못함.\n      }\n    });\n    /**\n     * annotation 수정\n     * @param {*} willEditedAnnotation\n     */\n    _defineProperty(this, "modifyAnnotation", function (willEditedAnnotation) {\n      if (!willEditedAnnotation) {\n        throw new Error(\'필수파라미터 누락\');\n      }\n      if (!willEditedAnnotation.id) {\n        throw new Error(\'필수파라미터 누락[id]\');\n      }\n      if (!willEditedAnnotation.subtype) {\n        throw new Error(\'필수파라미터 누락[subtype]\');\n      }\n      if (!willEditedAnnotation.color) {\n        throw new Error(\'필수파라미터 누락[color]\');\n      }\n      if (!Array.isArray(willEditedAnnotation.color)) {\n        throw new Error(\'필파라미터 오류[color]\');\n      }\n      if (!isFinite(willEditedAnnotation.opacity)) {\n        throw new Error(\'필수파라미터 누락[opacity]\');\n      }\n      if (!isFinite(willEditedAnnotation.pageNum)) {\n        throw new Error(\'필수파라미터 누락[pageNum]\');\n      }\n      if (!isFinite(willEditedAnnotation.width)) {\n        throw new Error(\'필수파라미터 누락[width]\');\n      }\n      var idx = _classPrivateFieldGet(_currentMasterPath, _this).findIndex(function (item) {\n        return item.id === willEditedAnnotation.id;\n      });\n      if (idx !== -1) {\n        _classPrivateFieldGet(_currentMasterPath, _this)[idx] = _Annotation.AnnotationFactory.create(willEditedAnnotation);\n      } else {\n        throw new Error(\'해당 아이디는 찾을수 없습니다.\');\n      }\n      _this.clearValidate();\n      _this.invalidate();\n    });\n    /**\n     * 그려진 페이지 전부 제거\n     */\n    _defineProperty(this, "clearValidate", function () {\n      _classPrivateFieldGet(_defaultPath, _this).forEach(function (annotation) {\n        var ctx = _classPrivateFieldGet(_requestPageCtx, _this).call(_this, annotation.pageNum);\n        var viewPort = _classPrivateFieldGet(_requestPageViewport, _this).call(_this, annotation.pageNum);\n        ctx.clearRect(0, 0, Math.floor(viewPort.width), Math.floor(viewPort.height));\n      });\n      _classPrivateFieldGet(_currentMasterPath, _this).forEach(function (annotation) {\n        var ctx = _classPrivateFieldGet(_requestPageCtx, _this).call(_this, annotation.pageNum);\n        var viewPort = _classPrivateFieldGet(_requestPageViewport, _this).call(_this, annotation.pageNum);\n        ctx.clearRect(0, 0, Math.floor(viewPort.width), Math.floor(viewPort.height));\n      });\n    });\n    /**\n     * 현재 그려진 애들 기준으로 그려준다.\n     */\n    _defineProperty(this, "invalidate", function () {\n      _classPrivateFieldGet(_defaultPath, _this).forEach(function (annotation) {\n        var ctx = _classPrivateFieldGet(_requestPageCtx, _this).call(_this, annotation.pageNum);\n        var viewPort = _classPrivateFieldGet(_requestPageViewport, _this).call(_this, annotation.pageNum);\n        var scale = _classPrivateFieldGet(_requestPageScale, _this).call(_this, annotation.pageNum);\n        var rotate = _classPrivateFieldGet(_requestPageRotate, _this).call(_this, annotation.pageNum);\n        _classPrivateFieldGet(_invalidate, _this).call(_this, annotation, ctx, viewPort, scale, rotate);\n      });\n      _classPrivateFieldGet(_currentMasterPath, _this).forEach(function (annotation) {\n        var ctx = _classPrivateFieldGet(_requestPageCtx, _this).call(_this, annotation.pageNum);\n        var viewPort = _classPrivateFieldGet(_requestPageViewport, _this).call(_this, annotation.pageNum);\n        var scale = _classPrivateFieldGet(_requestPageScale, _this).call(_this, annotation.pageNum);\n        var rotate = _classPrivateFieldGet(_requestPageRotate, _this).call(_this, annotation.pageNum);\n        _classPrivateFieldGet(_invalidate, _this).call(_this, annotation, ctx, viewPort, scale, rotate);\n      });\n    });\n    /**\n     * 현재 그려진 애들 기준으로 그려준다.\n     * @param {number} requestPage 다시그릴 페이지 번호.\n     */\n    _defineProperty(this, "requestPageInvalidate", function (requestPage) {\n      _classPrivateFieldGet(_defaultPath, _this).filter(function (annotation) {\n        return annotation.pageNum == requestPage;\n      }).forEach(function (annotation) {\n        var ctx = _classPrivateFieldGet(_requestPageCtx, _this).call(_this, annotation.pageNum);\n        var viewPort = _classPrivateFieldGet(_requestPageViewport, _this).call(_this, annotation.pageNum);\n        var scale = _classPrivateFieldGet(_requestPageScale, _this).call(_this, annotation.pageNum);\n        var rotate = _classPrivateFieldGet(_requestPageRotate, _this).call(_this, annotation.pageNum);\n        _classPrivateFieldGet(_invalidate, _this).call(_this, annotation, ctx, viewPort, scale, rotate);\n      });\n      _classPrivateFieldGet(_currentMasterPath, _this).filter(function (annotation) {\n        return annotation.pageNum == requestPage;\n      }).forEach(function (annotation) {\n        var ctx = _classPrivateFieldGet(_requestPageCtx, _this).call(_this, annotation.pageNum);\n        var viewPort = _classPrivateFieldGet(_requestPageViewport, _this).call(_this, annotation.pageNum);\n        var scale = _classPrivateFieldGet(_requestPageScale, _this).call(_this, annotation.pageNum);\n        var rotate = _classPrivateFieldGet(_requestPageRotate, _this).call(_this, annotation.pageNum);\n        _classPrivateFieldGet(_invalidate, _this).call(_this, annotation, ctx, viewPort, scale, rotate);\n      });\n    });\n    /**\n     * 특정캔버스에 그리는 기능\n     * @param {*} requestPage\n     * @param {*} ctx\n     * @param {*} viewPort\n     * @param {*} scale\n     * @param {*} rotate\n     */\n    _defineProperty(this, "requestThumbnailPageInvalidate", function (requestPage, ctx, viewPort, scale, rotate) {\n      _classPrivateFieldGet(_currentMasterPath, _this).filter(function (annotation) {\n        return annotation.pageNum == requestPage;\n      }).forEach(function (annotation) {\n        _classPrivateFieldGet(_invalidate, _this).call(_this, annotation, ctx, viewPort, scale, rotate);\n      });\n    });\n    _classPrivateFieldInitSpec(this, _invalidate, function (annotation, ctx, viewPort, scale, rotate) {\n      return _Annotation.AnnotationFactory.drawAnnotation({\n        ctx: ctx,\n        canvasRect: viewPort.viewBox,\n        canvasWidth: viewPort.width,\n        canvasHeight: viewPort.height,\n        annotation: annotation,\n        scale: scale,\n        rotation: rotate\n      });\n    });\n    /**\n     * annotation 생성\n     * @param {*} annotation\n     */\n    _classPrivateFieldInitSpec(this, _createAnnotation, function (annotation) {\n      _classPrivateFieldGet(_currentMasterPath, _this).push(annotation);\n      _this.addHistory(_toConsumableArray(_classPrivateFieldGet(_currentMasterPath, _this)));\n    });\n    /**\n     * 히스토리 저장\n     * @param {object} historyObject\n     */\n    _defineProperty(this, "addHistory", function (historyObject) {\n      if (Array.isArray(historyObject)) {\n        var newArrat = [];\n        for (var index = 0; index < historyObject.length; index++) {\n          var element = historyObject[index];\n          newArrat.push(cloneClassInstance(element));\n        }\n        _classPrivateFieldGet(_currentHistory, _this).push(newArrat);\n        newArrat = null;\n      }\n      _classPrivateFieldSet(_currentHistoryIndex, _this, _classPrivateFieldGet(_currentHistory, _this).length - 1);\n      if (_this.onHistoryChanged) {\n        _this.onHistoryChanged(_this.hasPrevHistory(), _this.hasNextHistory());\n      }\n    });\n    /**\n     * 다음으로 이동\n     */\n    _defineProperty(this, "moveNextHistory", function () {\n      if (_classPrivateFieldGet(_currentHistoryIndex, _this) < _classPrivateFieldGet(_currentHistory, _this).length - 1) {\n        var _this$currentHistoryI, _this$currentHistoryI2;\n        _this.clearValidate();\n        _classPrivateFieldSet(_currentHistoryIndex, _this, (_this$currentHistoryI = _classPrivateFieldGet(_currentHistoryIndex, _this), _this$currentHistoryI2 = _this$currentHistoryI++, _this$currentHistoryI)), _this$currentHistoryI2;\n        _classPrivateFieldSet(_currentMasterPath, _this, _toConsumableArray(_classPrivateFieldGet(_currentHistory, _this)[_classPrivateFieldGet(_currentHistoryIndex, _this)]));\n        _this.invalidate();\n      } else {\n        //none\n        console.log(\'없음\');\n      }\n      if (_this.onHistoryChanged) {\n        _this.onHistoryChanged(_this.hasPrevHistory(), _this.hasNextHistory());\n      }\n    });\n    /**\n     * 이전으로 이동\n     */\n    _defineProperty(this, "movePrevHistory", function () {\n      if (_classPrivateFieldGet(_currentHistoryIndex, _this) > 0) {\n        var _this$currentHistoryI3, _this$currentHistoryI4;\n        _this.clearValidate();\n        _classPrivateFieldSet(_currentHistoryIndex, _this, (_this$currentHistoryI3 = _classPrivateFieldGet(_currentHistoryIndex, _this), _this$currentHistoryI4 = _this$currentHistoryI3--, _this$currentHistoryI3)), _this$currentHistoryI4;\n        _classPrivateFieldSet(_currentMasterPath, _this, _toConsumableArray(_classPrivateFieldGet(_currentHistory, _this)[_classPrivateFieldGet(_currentHistoryIndex, _this)]));\n        _this.invalidate();\n      } else if (_classPrivateFieldGet(_currentHistoryIndex, _this) == 0) {\n        _this.clearValidate();\n        if (_classPrivateFieldGet(_baseHistoryIndex, _this) >= 0) {\n          //이중배열이 존재하면 그걸 pop\n          if (_classPrivateFieldGet(_currentMasterPath, _this)[_classPrivateFieldGet(_currentMasterPath, _this).length - 1].inkLists) {\n            if (_classPrivateFieldGet(_currentMasterPath, _this)[_classPrivateFieldGet(_currentMasterPath, _this).length - 1].inkLists.length == 1) {\n              //한개남앗으면 그배열자체가 제거대상이니 그배열을 제거\n              _classPrivateFieldGet(_currentMasterPath, _this).pop();\n            } else {\n              _classPrivateFieldGet(_currentMasterPath, _this)[_classPrivateFieldGet(_currentMasterPath, _this).length - 1].inkLists.pop();\n            }\n          }\n          // 그렇지 않으면 배열제거\n          else {\n            _classPrivateFieldGet(_currentMasterPath, _this).pop();\n          }\n        } else {\n          _classPrivateFieldSet(_currentMasterPath, _this, []);\n        }\n        _classPrivateFieldSet(_currentHistoryIndex, _this, -1);\n        _this.invalidate();\n      } else {\n        //none\n        console.log(\'없음\');\n      }\n      if (_this.onHistoryChanged) {\n        _this.onHistoryChanged(_this.hasPrevHistory(), _this.hasNextHistory());\n      }\n    });\n    /**\n     * 히스토리 초기화\n     */\n    _defineProperty(this, "clearHistory", function () {\n      _classPrivateFieldSet(_currentHistory, _this, []);\n      _classPrivateFieldSet(_currentHistoryIndex, _this, -1);\n      _classPrivateFieldSet(_baseHistoryIndex, _this, _classPrivateFieldGet(_currentMasterPath, _this).length - 1);\n      if (_this.onHistoryChanged) {\n        _this.onHistoryChanged(_this.hasPrevHistory(), _this.hasNextHistory());\n      }\n    });\n    /**\n     * 이전 히스토리가 있는지 여부 반환\n     */\n    _defineProperty(this, "hasPrevHistory", function () {\n      if (_classPrivateFieldGet(_currentHistoryIndex, _this) > 0) {\n        return true;\n      }\n      if (_classPrivateFieldGet(_currentHistoryIndex, _this) === 0 && _classPrivateFieldGet(_baseHistoryIndex, _this) >= 0 && _classPrivateFieldGet(_currentMasterPath, _this).length > 0) {\n        return true;\n      }\n      if (_classPrivateFieldGet(_baseHistoryIndex, _this) === -1 && _classPrivateFieldGet(_currentHistoryIndex, _this) === 0) {\n        return true;\n      }\n      return false;\n    });\n    /**\n     * 다음 히스토리가 있는지 여부 반환\n     */\n    _defineProperty(this, "hasNextHistory", function () {\n      return _classPrivateFieldGet(_currentHistoryIndex, _this) < _classPrivateFieldGet(_currentHistory, _this).length - 1;\n    });\n    /**\n     * annotation 저장\n     * @param {Array} annotations\n     */\n    _defineProperty(this, "importAnnotations", function (annotations) {\n      if (typeof annotations == \'string\') {\n        try {\n          var objectAnnotations = JSON.parse(annotations);\n          if (Array.isArray(objectAnnotations)) {\n            _classPrivateFieldSet(_currentMasterPath, _this, objectAnnotations.map(function (it) {\n              return _Annotation.AnnotationFactory.create(it);\n            }));\n          } else {\n            throw new Error(\'미지원 타입,\');\n          }\n        } catch (err) {\n          throw new Error(\'미지원 타입.\');\n        }\n      } else if (Array.isArray(annotations)) {\n        _classPrivateFieldSet(_currentMasterPath, _this, annotations.map(function (it) {\n          return _Annotation.AnnotationFactory.create(it);\n        }));\n      } else {\n        throw new Error(\'미지원 타입\');\n      }\n      _this.clearValidate();\n      _this.invalidate();\n      _classPrivateFieldSet(_baseHistoryIndex, _this, _classPrivateFieldGet(_currentMasterPath, _this).length - 1);\n      if (_this.onHistoryChanged) {\n        _this.onHistoryChanged(_this.hasPrevHistory(), _this.hasNextHistory());\n      }\n    });\n    /**\n     * annotation 추출\n     */\n    _defineProperty(this, "exportAnnotations", function () {\n      return JSON.stringify(_classPrivateFieldGet(_currentMasterPath, _this).map(function (it) {\n        return it.toObject();\n      }));\n    });\n    _classPrivateFieldSet(_containerElement, this, containerElement);\n    _classPrivateFieldSet(_requestPageViewport, this, requestPageViewport);\n    _classPrivateFieldSet(_requestPageScale, this, requestPageScale);\n    _classPrivateFieldSet(_requestPageRotate, this, requestPageRotate);\n    _classPrivateFieldSet(_requestPageCtx, this, requestPageCtx);\n    this.onHistoryChanged = onHistoryChanged;\n    if (Array.isArray(_annotations)) {\n      _classPrivateFieldSet(_defaultPath, this, _annotations);\n    }\n    this.removeListners();\n    this.addEventListners();\n  }\n  return _createClass(CanvasManager, [{\n    key: "isDrawing",\n    get: function get() {\n      return _classPrivateFieldGet(_isDrawing, this) == true;\n    }\n  }, {\n    key: "editAnnotation",\n    get: function get() {\n      return _classPrivateFieldGet(_editAnnotation, this);\n    },\n    set: function set(isEditing) {\n      _classPrivateFieldSet(_editAnnotation, this, isEditing === true);\n    }\n  }, {\n    key: "currentAnnoataionMode",\n    get: function get() {\n      return _classPrivateFieldGet(_currentAnnoataionMode, this);\n    },\n    set: function set(annotationMode) {\n      if (!Object.values(_pdfTypes.PdfAnnotationType.SubType).includes(annotationMode)) {\n        throw new Error(\'정의되지 않은 모드\');\n      }\n      this.editAnnotation = true;\n      _classPrivateFieldSet(_currentAnnoataionMode, this, annotationMode);\n      _classPrivateFieldSet(_currentEraser, this, _pdfTypes.PdfAnnotationType.Eraser.NONE);\n    }\n\n    /**\n     * 색깔\n     */\n  }, {\n    key: "currentColor",\n    get: function get() {\n      return _classPrivateFieldGet(_currentColor, this);\n    },\n    set: function set(color) {\n      _classPrivateFieldSet(_currentColor, this, color);\n    }\n\n    /**\n     * 투명도\n     */\n  }, {\n    key: "currentColorAlpha",\n    get: function get() {\n      return _classPrivateFieldGet(_currentColorAlpha, this);\n    },\n    set: function set(alpha) {\n      _classPrivateFieldSet(_currentColorAlpha, this, alpha);\n    }\n\n    /**\n     * 지우개\n     */\n  }, {\n    key: "currentEraser",\n    get: function get() {\n      return _classPrivateFieldGet(_currentEraser, this);\n    },\n    set: function set(eraserType) {\n      if (!Object.values(_pdfTypes.PdfAnnotationType.Eraser).includes(eraserType)) {\n        throw new Error(\'정의되지 않은 모드\');\n      }\n      _classPrivateFieldSet(_currentEraser, this, eraserType);\n      this.editAnnotation = true;\n    }\n\n    /**\n     * 선스타일,두께\n     */\n  }, {\n    key: "currentBorderStyle",\n    get: function get() {\n      return _classPrivateFieldGet(_currentBorderStyle, this);\n    },\n    set: function set(border) {\n      if (border == undefined || border == null) {\n        throw new Error(\'타입에러\');\n      }\n      if (_typeof(border) == \'object\') {\n        _classPrivateFieldSet(_currentBorderStyle, this, border);\n      } else if (typeof border == \'number\') {\n        _classPrivateFieldSet(_currentBorderStyle, this, {\n          dashArray: [3],\n          horizontalCornerRadius: 0,\n          rawWidth: border,\n          style: 1,\n          verticalCornerRadius: 0,\n          width: 0\n        });\n      }\n    }\n\n    /**\n     * 지우개의 두께\n     */\n  }, {\n    key: "currentEraserBorderStyle",\n    get: function get() {\n      return _classPrivateFieldGet(_currentEraserBorderStyle, this);\n    },\n    set: function set(border) {\n      if (border == undefined || border == null) {\n        throw new Error(\'타입에러\');\n      }\n      if (_typeof(border) == \'object\') {\n        _classPrivateFieldSet(_currentEraserBorderStyle, this, border);\n      } else if (typeof border == \'number\') {\n        _classPrivateFieldSet(_currentEraserBorderStyle, this, {\n          dashArray: [3],\n          horizontalCornerRadius: 0,\n          rawWidth: border,\n          style: 1,\n          verticalCornerRadius: 0,\n          width: 0\n        });\n      }\n    }\n  }, {\n    key: "addEventListners",\n    value: function addEventListners() {\n      var _classPrivateFieldGet5, _classPrivateFieldGet6, _classPrivateFieldGet7, _classPrivateFieldGet8, _classPrivateFieldGet9, _classPrivateFieldGet0, _classPrivateFieldGet1, _classPrivateFieldGet10;\n      (_classPrivateFieldGet5 = _classPrivateFieldGet(_containerElement, this)) === null || _classPrivateFieldGet5 === void 0 || _classPrivateFieldGet5.addEventListener(\'touchstart\', this.handleEvent);\n      (_classPrivateFieldGet6 = _classPrivateFieldGet(_containerElement, this)) === null || _classPrivateFieldGet6 === void 0 || _classPrivateFieldGet6.addEventListener(\'touchmove\', this.handleEvent);\n      (_classPrivateFieldGet7 = _classPrivateFieldGet(_containerElement, this)) === null || _classPrivateFieldGet7 === void 0 || _classPrivateFieldGet7.addEventListener(\'touchend\', this.handleEvent);\n      (_classPrivateFieldGet8 = _classPrivateFieldGet(_containerElement, this)) === null || _classPrivateFieldGet8 === void 0 || _classPrivateFieldGet8.addEventListener(\'touchcancel\', this.handleEvent);\n      (_classPrivateFieldGet9 = _classPrivateFieldGet(_containerElement, this)) === null || _classPrivateFieldGet9 === void 0 || _classPrivateFieldGet9.addEventListener(\'mousedown\', this.handleEvent);\n      (_classPrivateFieldGet0 = _classPrivateFieldGet(_containerElement, this)) === null || _classPrivateFieldGet0 === void 0 || _classPrivateFieldGet0.addEventListener(\'mousemove\', this.handleEvent);\n      (_classPrivateFieldGet1 = _classPrivateFieldGet(_containerElement, this)) === null || _classPrivateFieldGet1 === void 0 || _classPrivateFieldGet1.addEventListener(\'mouseup\', this.handleEvent);\n      (_classPrivateFieldGet10 = _classPrivateFieldGet(_containerElement, this)) === null || _classPrivateFieldGet10 === void 0 || _classPrivateFieldGet10.addEventListener(\'mouseout\', this.handleEvent);\n    }\n  }, {\n    key: "removeListners",\n    value: function removeListners() {\n      var _classPrivateFieldGet11, _classPrivateFieldGet12, _classPrivateFieldGet13, _classPrivateFieldGet14, _classPrivateFieldGet15, _classPrivateFieldGet16, _classPrivateFieldGet17, _classPrivateFieldGet18;\n      (_classPrivateFieldGet11 = _classPrivateFieldGet(_containerElement, this)) === null || _classPrivateFieldGet11 === void 0 || _classPrivateFieldGet11.removeEventListener(\'touchstart\', this.handleEvent);\n      (_classPrivateFieldGet12 = _classPrivateFieldGet(_containerElement, this)) === null || _classPrivateFieldGet12 === void 0 || _classPrivateFieldGet12.removeEventListener(\'touchmove\', this.handleEvent);\n      (_classPrivateFieldGet13 = _classPrivateFieldGet(_containerElement, this)) === null || _classPrivateFieldGet13 === void 0 || _classPrivateFieldGet13.removeEventListener(\'touchend\', this.handleEvent);\n      (_classPrivateFieldGet14 = _classPrivateFieldGet(_containerElement, this)) === null || _classPrivateFieldGet14 === void 0 || _classPrivateFieldGet14.removeEventListener(\'touchcancel\', this.handleEvent);\n      (_classPrivateFieldGet15 = _classPrivateFieldGet(_containerElement, this)) === null || _classPrivateFieldGet15 === void 0 || _classPrivateFieldGet15.removeEventListener(\'mousedown\', this.handleEvent);\n      (_classPrivateFieldGet16 = _classPrivateFieldGet(_containerElement, this)) === null || _classPrivateFieldGet16 === void 0 || _classPrivateFieldGet16.removeEventListener(\'mousemove\', this.handleEvent);\n      (_classPrivateFieldGet17 = _classPrivateFieldGet(_containerElement, this)) === null || _classPrivateFieldGet17 === void 0 || _classPrivateFieldGet17.removeEventListener(\'mouseup\', this.handleEvent);\n      (_classPrivateFieldGet18 = _classPrivateFieldGet(_containerElement, this)) === null || _classPrivateFieldGet18 === void 0 || _classPrivateFieldGet18.removeEventListener(\'mouseout\', this.handleEvent);\n    }\n  }, {\n    key: "isMouseNearPoints",\n    value:\n    /**\n     * 마우스 포인터 끝을 중앙점으로 인식\n     * @param {number} mouseX\n     * @param {number} mouseY\n     * @param {Array} points\n     * @returns\n     */\n    function isMouseNearPoints(mouseX, mouseY, points) {\n      var radius = 15; // 원의 반지름\n      var centerX = mouseX;\n      var centerY = mouseY;\n      var radiusSquared = radius * radius; // 거리 비교 최적화\n\n      // 연속된 배열을 (x, y) 쌍으로 처리\n      for (var i = 0; i < points.length; i += 2) {\n        var x = points[i];\n        var y = points[i + 1];\n\n        // 거리 제곱 계산\n        var distanceSquared = Math.pow(centerX - x, 2) + Math.pow(centerY - y, 2);\n        if (distanceSquared <= radiusSquared) {\n          return true; // 마우스가 닿으면 즉시 true 반환\n        }\n      }\n      return false; // 모든 좌표와 비교 후 닿지 않으면 false 반환\n    }\n    /**\n     * 라인이 마우스끝에 닿는지 체크하는 로직\n     * @param {*} mx\n     * @param {*} my\n     * @param {*} x1\n     * @param {*} y1\n     * @param {*} x2\n     * @param {*} y2\n     * @param {*} threshold\n     * @returns\n     */\n  }, {\n    key: "isPointNearLine",\n    value: function isPointNearLine(mx, my, x1, y1, x2, y2) {\n      var threshold = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 15;\n      // 선이 점으로 수렴한 경우 (x1 == x2 && y1 == y2)\n      var dx = x2 - x1;\n      var dy = y2 - y1;\n      if (dx === 0 && dy === 0) {\n        var dist = Math.hypot(mx - x1, my - y1);\n        return dist <= threshold;\n      }\n\n      // 선분을 벡터로 보고, 마우스 위치를 투영\n      var t = ((mx - x1) * dx + (my - y1) * dy) / (dx * dx + dy * dy);\n\n      // t가 0~1 사이가 아니면 선분 범위 밖이므로 제외\n      if (t < 0 || t > 1) return false;\n\n      // 선분 위의 가장 가까운 점\n      var closestX = x1 + t * dx;\n      var closestY = y1 + t * dy;\n\n      // 마우스와 선분 사이 거리 계산\n      var distance = Math.hypot(mx - closestX, my - closestY);\n      return distance <= threshold;\n    }\n  }, {\n    key: "convertCordinate",\n    value:\n    /**\n     * 캔버스 상대 좌표를 절대 좌표로 변환하는 작업\n     * @param {number} relativeX\n     * @param {number} relativeY\n     * @returns\n     */\n    function convertCordinate(relativeX, relativeY, canvasWidth, canvasHeight, viewPort) {\n      var _viewPort$viewBox = _slicedToArray(viewPort.viewBox, 4),\n        minX = _viewPort$viewBox[0],\n        minY = _viewPort$viewBox[1],\n        maxX = _viewPort$viewBox[2],\n        maxY = _viewPort$viewBox[3];\n      var originWidth = maxX - minX;\n      var originHeight = maxY - minY;\n      var scaledX = originWidth / canvasWidth;\n      var scaledY = originHeight / canvasHeight;\n      if (this.getRotate() === 90) {\n        return [minX + relativeY * (originWidth / canvasHeight), minY + relativeX * (originHeight / canvasWidth)];\n      } else {\n        return [minX + relativeX * scaledX, minY + (canvasHeight - relativeY) * scaledY];\n      }\n    }\n  }]);\n}();\n\n//# sourceURL=webpack://ViewerJS/./src/pdf/core/DrawingCanvas.js?')},76918:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar defineBuiltIn = __webpack_require__(36840);\nvar errorToString = __webpack_require__(77536);\n\nvar ErrorPrototype = Error.prototype;\n\n// `Error.prototype.toString` method fix\n// https://tc39.es/ecma262/#sec-error.prototype.tostring\nif (ErrorPrototype.toString !== errorToString) {\n  defineBuiltIn(ErrorPrototype, 'toString', errorToString);\n}\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.error.to-string.js?")},77232:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// https://github.com/tc39/proposal-json-parse-with-source\n__webpack_require__(67296);\n__webpack_require__(58335);\n__webpack_require__(33981);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/proposals/json-parse-with-source.js?")},77240:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar uncurryThis = __webpack_require__(79504);\nvar requireObjectCoercible = __webpack_require__(67750);\nvar toString = __webpack_require__(655);\n\nvar quot = /\"/g;\nvar replace = uncurryThis(''.replace);\n\n// `CreateHTML` abstract operation\n// https://tc39.es/ecma262/#sec-createhtml\nmodule.exports = function (string, tag, attribute, value) {\n  var S = toString(requireObjectCoercible(string));\n  var p1 = '<' + tag;\n  if (attribute !== '') p1 += ' ' + attribute + '=\"' + replace(toString(value), quot, '&quot;') + '\"';\n  return p1 + '>' + S + '</' + tag + '>';\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/create-html.js?")},77347:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";eval("\nvar DESCRIPTORS = __webpack_require__(43724);\nvar call = __webpack_require__(69565);\nvar propertyIsEnumerableModule = __webpack_require__(48773);\nvar createPropertyDescriptor = __webpack_require__(6980);\nvar toIndexedObject = __webpack_require__(25397);\nvar toPropertyKey = __webpack_require__(56969);\nvar hasOwn = __webpack_require__(39297);\nvar IE8_DOM_DEFINE = __webpack_require__(35917);\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPropertyKey(P);\n  if (IE8_DOM_DEFINE) try {\n    return $getOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (hasOwn(O, P)) return createPropertyDescriptor(!call(propertyIsEnumerableModule.f, O, P), O[P]);\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/object-get-own-property-descriptor.js?")},77536:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar DESCRIPTORS = __webpack_require__(43724);\nvar fails = __webpack_require__(79039);\nvar anObject = __webpack_require__(28551);\nvar normalizeStringArgument = __webpack_require__(32603);\n\nvar nativeErrorToString = Error.prototype.toString;\n\nvar INCORRECT_TO_STRING = fails(function () {\n  if (DESCRIPTORS) {\n    // Chrome 32- incorrectly call accessor\n    // eslint-disable-next-line es/no-object-create, es/no-object-defineproperty -- safe\n    var object = Object.create(Object.defineProperty({}, 'name', { get: function () {\n      return this === object;\n    } }));\n    if (nativeErrorToString.call(object) !== 'true') return true;\n  }\n  // FF10- does not properly handle non-strings\n  return nativeErrorToString.call({ message: 1, name: 2 }) !== '2: 1'\n    // IE8 does not properly handle defaults\n    || nativeErrorToString.call({}) !== 'Error';\n});\n\nmodule.exports = INCORRECT_TO_STRING ? function toString() {\n  var O = anObject(this);\n  var name = normalizeStringArgument(O.name, 'Error');\n  var message = normalizeStringArgument(O.message);\n  return !name ? message : !message ? name : name + ': ' + message;\n} : nativeErrorToString;\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/error-to-string.js?")},77584:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar isObject = __webpack_require__(20034);\nvar createNonEnumerableProperty = __webpack_require__(66699);\n\n// `InstallErrorCause` abstract operation\n// https://tc39.es/proposal-error-cause/#sec-errorobjects-install-error-cause\nmodule.exports = function (O, options) {\n  if (isObject(options) && 'cause' in options) {\n    createNonEnumerableProperty(O, 'cause', options.cause);\n  }\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/install-error-cause.js?")},77629:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar IS_PURE = __webpack_require__(96395);\nvar globalThis = __webpack_require__(44576);\nvar defineGlobalProperty = __webpack_require__(39433);\n\nvar SHARED = '__core-js_shared__';\nvar store = module.exports = globalThis[SHARED] || defineGlobalProperty(SHARED, {});\n\n(store.versions || (store.versions = [])).push({\n  version: '3.41.0',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: '© 2014-2025 Denis Pushkarev (zloirock.ru)',\n  license: 'https://github.com/zloirock/core-js/blob/v3.41.0/LICENSE',\n  source: 'https://github.com/zloirock/core-js'\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/shared-store.js?")},77691:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar getBuiltIn = __webpack_require__(97751);\nvar uncurryThis = __webpack_require__(79504);\nvar aCallable = __webpack_require__(79306);\nvar requireObjectCoercible = __webpack_require__(67750);\nvar toPropertyKey = __webpack_require__(56969);\nvar iterate = __webpack_require__(72652);\nvar fails = __webpack_require__(79039);\n\n// eslint-disable-next-line es/no-object-groupby -- testing\nvar nativeGroupBy = Object.groupBy;\nvar create = getBuiltIn('Object', 'create');\nvar push = uncurryThis([].push);\n\nvar DOES_NOT_WORK_WITH_PRIMITIVES = !nativeGroupBy || fails(function () {\n  return nativeGroupBy('ab', function (it) {\n    return it;\n  }).a.length !== 1;\n});\n\n// `Object.groupBy` method\n// https://tc39.es/ecma262/#sec-object.groupby\n$({ target: 'Object', stat: true, forced: DOES_NOT_WORK_WITH_PRIMITIVES }, {\n  groupBy: function groupBy(items, callbackfn) {\n    requireObjectCoercible(items);\n    aCallable(callbackfn);\n    var obj = create(null);\n    var k = 0;\n    iterate(items, function (value) {\n      var key = toPropertyKey(callbackfn(value, k++));\n      // in some IE versions, `hasOwnProperty` returns incorrect result on integer keys\n      // but since it's a `null` prototype object, we can safely use `in`\n      if (key in obj) push(obj[key], value);\n      else obj[key] = [value];\n    });\n    return obj;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.object.group-by.js?")},77740:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar hasOwn = __webpack_require__(39297);\nvar ownKeys = __webpack_require__(35031);\nvar getOwnPropertyDescriptorModule = __webpack_require__(77347);\nvar definePropertyModule = __webpack_require__(24913);\n\nmodule.exports = function (target, source, exceptions) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!hasOwn(target, key) && !(exceptions && hasOwn(exceptions, key))) {\n      defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n    }\n  }\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/copy-constructor-properties.js?")},77762:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar expm1 = __webpack_require__(53250);\n\n// eslint-disable-next-line es/no-math-cosh -- required for testing\nvar $cosh = Math.cosh;\nvar abs = Math.abs;\nvar E = Math.E;\n\nvar FORCED = !$cosh || $cosh(710) === Infinity;\n\n// `Math.cosh` method\n// https://tc39.es/ecma262/#sec-math.cosh\n$({ target: 'Math', stat: true, forced: FORCED }, {\n  cosh: function cosh(x) {\n    var t = expm1(abs(x) - 1) + 1;\n    return (t + 1 / (t * E * E)) * (E / 2);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.math.cosh.js?")},77782:module=>{"use strict";eval("\n// `Math.sign` method implementation\n// https://tc39.es/ecma262/#sec-math.sign\n// eslint-disable-next-line es/no-math-sign -- safe\nmodule.exports = Math.sign || function sign(x) {\n  var n = +x;\n  // eslint-disable-next-line no-self-compare -- NaN check\n  return n === 0 || n !== n ? n : n < 0 ? -1 : 1;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/math-sign.js?")},77811:module=>{"use strict";eval("\n// eslint-disable-next-line es/no-typed-arrays -- safe\nmodule.exports = typeof ArrayBuffer != 'undefined' && typeof DataView != 'undefined';\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/array-buffer-basic-detection.js?")},77936:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar $transfer = __webpack_require__(95636);\n\n// `ArrayBuffer.prototype.transferToFixedLength` method\n// https://tc39.es/proposal-arraybuffer-transfer/#sec-arraybuffer.prototype.transfertofixedlength\nif ($transfer) $({ target: 'ArrayBuffer', proto: true }, {\n  transferToFixedLength: function transferToFixedLength() {\n    return $transfer(this, arguments.length ? arguments[0] : undefined, false);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array-buffer.transfer-to-fixed-length.js?")},77957:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar bind = __webpack_require__(76080);\nvar uncurryThis = __webpack_require__(79504);\nvar IndexedObject = __webpack_require__(47055);\nvar toObject = __webpack_require__(48981);\nvar toPropertyKey = __webpack_require__(56969);\nvar lengthOfArrayLike = __webpack_require__(26198);\nvar objectCreate = __webpack_require__(2360);\nvar arrayFromConstructorAndList = __webpack_require__(35370);\n\nvar $Array = Array;\nvar push = uncurryThis([].push);\n\nmodule.exports = function ($this, callbackfn, that, specificConstructor) {\n  var O = toObject($this);\n  var self = IndexedObject(O);\n  var boundFunction = bind(callbackfn, that);\n  var target = objectCreate(null);\n  var length = lengthOfArrayLike(self);\n  var index = 0;\n  var Constructor, key, value;\n  for (;length > index; index++) {\n    value = self[index];\n    key = toPropertyKey(boundFunction(value, index, O));\n    // in some IE versions, `hasOwnProperty` returns incorrect result on integer keys\n    // but since it's a `null` prototype object, we can safely use `in`\n    if (key in target) push(target[key], value);\n    else target[key] = [value];\n  }\n  // TODO: Remove this block from `core-js@4`\n  if (specificConstructor) {\n    Constructor = specificConstructor(O);\n    if (Constructor !== $Array) {\n      for (key in target) target[key] = arrayFromConstructorAndList(Constructor, target[key]);\n    }\n  } return target;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/array-group.js?")},78100:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar $transfer = __webpack_require__(95636);\n\n// `ArrayBuffer.prototype.transfer` method\n// https://tc39.es/proposal-arraybuffer-transfer/#sec-arraybuffer.prototype.transfer\nif ($transfer) $({ target: 'ArrayBuffer', proto: true }, {\n  transfer: function transfer() {\n    return $transfer(this, arguments.length ? arguments[0] : undefined, true);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array-buffer.transfer.js?")},78125:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar getBuiltIn = __webpack_require__(97751);\nvar defineWellKnownSymbol = __webpack_require__(70511);\nvar setToStringTag = __webpack_require__(10687);\n\n// `Symbol.toStringTag` well-known symbol\n// https://tc39.es/ecma262/#sec-symbol.tostringtag\ndefineWellKnownSymbol('toStringTag');\n\n// `Symbol.prototype[@@toStringTag]` property\n// https://tc39.es/ecma262/#sec-symbol.prototype-@@tostringtag\nsetToStringTag(getBuiltIn('Symbol'), 'Symbol');\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.symbol.to-string-tag.js?")},78227:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar globalThis = __webpack_require__(44576);\nvar shared = __webpack_require__(25745);\nvar hasOwn = __webpack_require__(39297);\nvar uid = __webpack_require__(33392);\nvar NATIVE_SYMBOL = __webpack_require__(4495);\nvar USE_SYMBOL_AS_UID = __webpack_require__(7040);\n\nvar Symbol = globalThis.Symbol;\nvar WellKnownSymbolsStore = shared('wks');\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol['for'] || Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!hasOwn(WellKnownSymbolsStore, name)) {\n    WellKnownSymbolsStore[name] = NATIVE_SYMBOL && hasOwn(Symbol, name)\n      ? Symbol[name]\n      : createWellKnownSymbol('Symbol.' + name);\n  } return WellKnownSymbolsStore[name];\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/well-known-symbol.js?")},78347:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar hasOwn = __webpack_require__(39297);\n\n// `Object.hasOwn` method\n// https://tc39.es/ecma262/#sec-object.hasown\n$({ target: 'Object', stat: true }, {\n  hasOwn: hasOwn\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.object.has-own.js?")},78350:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar flattenIntoArray = __webpack_require__(70259);\nvar aCallable = __webpack_require__(79306);\nvar toObject = __webpack_require__(48981);\nvar lengthOfArrayLike = __webpack_require__(26198);\nvar arraySpeciesCreate = __webpack_require__(1469);\n\n// `Array.prototype.flatMap` method\n// https://tc39.es/ecma262/#sec-array.prototype.flatmap\n$({ target: 'Array', proto: true }, {\n  flatMap: function flatMap(callbackfn /* , thisArg */) {\n    var O = toObject(this);\n    var sourceLen = lengthOfArrayLike(O);\n    var A;\n    aCallable(callbackfn);\n    A = arraySpeciesCreate(O, 0);\n    A.length = flattenIntoArray(A, O, O, sourceLen, 0, 1, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    return A;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array.flat-map.js?")},78459:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar $parseFloat = __webpack_require__(33904);\n\n// `parseFloat` method\n// https://tc39.es/ecma262/#sec-parsefloat-string\n$({ global: true, forced: parseFloat !== $parseFloat }, {\n  parseFloat: $parseFloat\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.parse-float.js?")},78553:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar fails = __webpack_require__(79039);\nvar expm1 = __webpack_require__(53250);\n\nvar abs = Math.abs;\nvar exp = Math.exp;\nvar E = Math.E;\n\nvar FORCED = fails(function () {\n  // eslint-disable-next-line es/no-math-sinh -- required for testing\n  return Math.sinh(-2e-17) !== -2e-17;\n});\n\n// `Math.sinh` method\n// https://tc39.es/ecma262/#sec-math.sinh\n// V8 near Chromium 38 has a problem with very small numbers\n$({ target: 'Math', stat: true, forced: FORCED }, {\n  sinh: function sinh(x) {\n    var n = +x;\n    return abs(n) < 1 ? (expm1(n) - expm1(-n)) / 2 : (exp(n - 1) - exp(-n - 1)) * (E / 2);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.math.sinh.js?")},79039:module=>{"use strict";eval("\nmodule.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/fails.js?")},79147:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar parent = __webpack_require__(35714);\n\n__webpack_require__(19817);\n__webpack_require__(15218);\n__webpack_require__(55035);\n__webpack_require__(12330);\n__webpack_require__(32376);\n__webpack_require__(77232);\n__webpack_require__(599);\n// TODO: Obsolete versions, remove from `core-js@4`\n__webpack_require__(74845);\n__webpack_require__(93854);\n__webpack_require__(54075);\n__webpack_require__(15486);\n\nmodule.exports = parent;\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/stage/3.js?")},79296:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// in old WebKit versions, `element.classList` is not an instance of global `DOMTokenList`\nvar documentCreateElement = __webpack_require__(4055);\n\nvar classList = documentCreateElement('span').classList;\nvar DOMTokenListPrototype = classList && classList.constructor && classList.constructor.prototype;\n\nmodule.exports = DOMTokenListPrototype === Object.prototype ? undefined : DOMTokenListPrototype;\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/dom-token-list-prototype.js?")},79306:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar isCallable = __webpack_require__(94901);\nvar tryToString = __webpack_require__(16823);\n\nvar $TypeError = TypeError;\n\n// `Assert: IsCallable(argument) is true`\nmodule.exports = function (argument) {\n  if (isCallable(argument)) return argument;\n  throw new $TypeError(tryToString(argument) + ' is not a function');\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/a-callable.js?")},79432:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar toObject = __webpack_require__(48981);\nvar nativeKeys = __webpack_require__(71072);\nvar fails = __webpack_require__(79039);\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeKeys(1); });\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  keys: function keys(it) {\n    return nativeKeys(toObject(it));\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.object.keys.js?")},79472:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar globalThis = __webpack_require__(44576);\nvar apply = __webpack_require__(18745);\nvar isCallable = __webpack_require__(94901);\nvar ENVIRONMENT = __webpack_require__(84215);\nvar USER_AGENT = __webpack_require__(82839);\nvar arraySlice = __webpack_require__(67680);\nvar validateArgumentsLength = __webpack_require__(22812);\n\nvar Function = globalThis.Function;\n// dirty IE9- and Bun 0.3.0- checks\nvar WRAP = /MSIE .\\./.test(USER_AGENT) || ENVIRONMENT === 'BUN' && (function () {\n  var version = globalThis.Bun.version.split('.');\n  return version.length < 3 || version[0] === '0' && (version[1] < 3 || version[1] === '3' && version[2] === '0');\n})();\n\n// IE9- / Bun 0.3.0- setTimeout / setInterval / setImmediate additional parameters fix\n// https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#timers\n// https://github.com/oven-sh/bun/issues/1633\nmodule.exports = function (scheduler, hasTimeArg) {\n  var firstParamIndex = hasTimeArg ? 2 : 1;\n  return WRAP ? function (handler, timeout /* , ...arguments */) {\n    var boundArgs = validateArgumentsLength(arguments.length, 1) > firstParamIndex;\n    var fn = isCallable(handler) ? handler : Function(handler);\n    var params = boundArgs ? arraySlice(arguments, firstParamIndex) : [];\n    var callback = boundArgs ? function () {\n      apply(fn, this, params);\n    } : fn;\n    return hasTimeArg ? scheduler(callback, timeout) : scheduler(callback);\n  } : scheduler;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/schedulers-fix.js?")},79504:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar NATIVE_BIND = __webpack_require__(40616);\n\nvar FunctionPrototype = Function.prototype;\nvar call = FunctionPrototype.call;\n// eslint-disable-next-line es/no-function-prototype-bind -- safe\nvar uncurryThisWithBind = NATIVE_BIND && FunctionPrototype.bind.bind(call, call);\n\nmodule.exports = NATIVE_BIND ? uncurryThisWithBind : function (fn) {\n  return function () {\n    return call.apply(fn, arguments);\n  };\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/function-uncurry-this.js?")},79577:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar arrayWith = __webpack_require__(39928);\nvar ArrayBufferViewCore = __webpack_require__(94644);\nvar isBigIntArray = __webpack_require__(18727);\nvar toIntegerOrInfinity = __webpack_require__(91291);\nvar toBigInt = __webpack_require__(75854);\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar getTypedArrayConstructor = ArrayBufferViewCore.getTypedArrayConstructor;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\nvar PROPER_ORDER = !!function () {\n  try {\n    // eslint-disable-next-line no-throw-literal, es/no-typed-arrays, es/no-array-prototype-with -- required for testing\n    new Int8Array(1)['with'](2, { valueOf: function () { throw 8; } });\n  } catch (error) {\n    // some early implementations, like WebKit, does not follow the final semantic\n    // https://github.com/tc39/proposal-change-array-by-copy/pull/86\n    return error === 8;\n  }\n}();\n\n// `%TypedArray%.prototype.with` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.with\nexportTypedArrayMethod('with', { 'with': function (index, value) {\n  var O = aTypedArray(this);\n  var relativeIndex = toIntegerOrInfinity(index);\n  var actualValue = isBigIntArray(O) ? toBigInt(value) : +value;\n  return arrayWith(O, getTypedArrayConstructor(O), relativeIndex, actualValue);\n} }['with'], !PROPER_ORDER);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.with.js?")},79739:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar getBuiltIn = __webpack_require__(97751);\nvar setToStringTag = __webpack_require__(10687);\n\nvar DOM_EXCEPTION = 'DOMException';\n\n// `DOMException.prototype[@@toStringTag]` property\nsetToStringTag(getBuiltIn(DOM_EXCEPTION), DOM_EXCEPTION);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/web.dom-exception.to-string-tag.js?")},79933:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// https://github.com/tc39/proposal-arraybuffer-transfer\n__webpack_require__(26280);\n__webpack_require__(27913);\n__webpack_require__(47801);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/proposals/array-buffer-transfer.js?")},79978:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar call = __webpack_require__(69565);\nvar uncurryThis = __webpack_require__(79504);\nvar requireObjectCoercible = __webpack_require__(67750);\nvar isCallable = __webpack_require__(94901);\nvar isNullOrUndefined = __webpack_require__(64117);\nvar isRegExp = __webpack_require__(60788);\nvar toString = __webpack_require__(655);\nvar getMethod = __webpack_require__(55966);\nvar getRegExpFlags = __webpack_require__(61034);\nvar getSubstitution = __webpack_require__(2478);\nvar wellKnownSymbol = __webpack_require__(78227);\nvar IS_PURE = __webpack_require__(96395);\n\nvar REPLACE = wellKnownSymbol('replace');\nvar $TypeError = TypeError;\nvar indexOf = uncurryThis(''.indexOf);\nvar replace = uncurryThis(''.replace);\nvar stringSlice = uncurryThis(''.slice);\nvar max = Math.max;\n\n// `String.prototype.replaceAll` method\n// https://tc39.es/ecma262/#sec-string.prototype.replaceall\n$({ target: 'String', proto: true }, {\n  replaceAll: function replaceAll(searchValue, replaceValue) {\n    var O = requireObjectCoercible(this);\n    var IS_REG_EXP, flags, replacer, string, searchString, functionalReplace, searchLength, advanceBy, position, replacement;\n    var endOfLastMatch = 0;\n    var result = '';\n    if (!isNullOrUndefined(searchValue)) {\n      IS_REG_EXP = isRegExp(searchValue);\n      if (IS_REG_EXP) {\n        flags = toString(requireObjectCoercible(getRegExpFlags(searchValue)));\n        if (!~indexOf(flags, 'g')) throw new $TypeError('`.replaceAll` does not allow non-global regexes');\n      }\n      replacer = getMethod(searchValue, REPLACE);\n      if (replacer) return call(replacer, searchValue, O, replaceValue);\n      if (IS_PURE && IS_REG_EXP) return replace(toString(O), searchValue, replaceValue);\n    }\n    string = toString(O);\n    searchString = toString(searchValue);\n    functionalReplace = isCallable(replaceValue);\n    if (!functionalReplace) replaceValue = toString(replaceValue);\n    searchLength = searchString.length;\n    advanceBy = max(1, searchLength);\n    position = indexOf(string, searchString);\n    while (position !== -1) {\n      replacement = functionalReplace\n        ? toString(replaceValue(searchString, position, string))\n        : getSubstitution(searchString, string, position, [], undefined, replaceValue);\n      result += stringSlice(string, endOfLastMatch, position) + replacement;\n      endOfLastMatch = position + searchLength;\n      position = position + advanceBy > string.length ? -1 : indexOf(string, searchString, position + advanceBy);\n    }\n    if (endOfLastMatch < string.length) {\n      result += stringSlice(string, endOfLastMatch);\n    }\n    return result;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.string.replace-all.js?")},80081:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar addToUnscopables = __webpack_require__(6469);\nvar $groupToMap = __webpack_require__(2952);\nvar IS_PURE = __webpack_require__(96395);\n\n// `Array.prototype.groupToMap` method\n// https://github.com/tc39/proposal-array-grouping\n$({ target: 'Array', proto: true, forced: IS_PURE }, {\n  groupToMap: $groupToMap\n});\n\naddToUnscopables('groupToMap');\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.array.group-to-map.js?")},80550:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar globalThis = __webpack_require__(44576);\n\nmodule.exports = globalThis.Promise;\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/promise-native-constructor.js?")},80630:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar uncurryThis = __webpack_require__(79504);\nvar fails = __webpack_require__(79039);\nvar thisNumberValue = __webpack_require__(31240);\n\nvar nativeToPrecision = uncurryThis(1.0.toPrecision);\n\nvar FORCED = fails(function () {\n  // IE7-\n  return nativeToPrecision(1, undefined) !== '1';\n}) || !fails(function () {\n  // V8 ~ Android 4.3-\n  nativeToPrecision({});\n});\n\n// `Number.prototype.toPrecision` method\n// https://tc39.es/ecma262/#sec-number.prototype.toprecision\n$({ target: 'Number', proto: true, forced: FORCED }, {\n  toPrecision: function toPrecision(precision) {\n    return precision === undefined\n      ? nativeToPrecision(thisNumberValue(this))\n      : nativeToPrecision(thisNumberValue(this), precision);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.number.to-precision.js?")},80741:module=>{"use strict";eval("\nvar ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `Math.trunc` method\n// https://tc39.es/ecma262/#sec-math.trunc\n// eslint-disable-next-line es/no-math-trunc -- safe\nmodule.exports = Math.trunc || function trunc(x) {\n  var n = +x;\n  return (n > 0 ? floor : ceil)(n);\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/math-trunc.js?")},80747:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar createNonEnumerableProperty = __webpack_require__(66699);\nvar clearErrorStack = __webpack_require__(38574);\nvar ERROR_STACK_INSTALLABLE = __webpack_require__(24659);\n\n// non-standard V8\nvar captureStackTrace = Error.captureStackTrace;\n\nmodule.exports = function (error, C, stack, dropEntries) {\n  if (ERROR_STACK_INSTALLABLE) {\n    if (captureStackTrace) captureStackTrace(error, C);\n    else createNonEnumerableProperty(error, 'stack', clearErrorStack(stack, dropEntries));\n  }\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/error-stack-install.js?")},80926:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar aCallable = __webpack_require__(79306);\nvar toObject = __webpack_require__(48981);\nvar IndexedObject = __webpack_require__(47055);\nvar lengthOfArrayLike = __webpack_require__(26198);\n\nvar $TypeError = TypeError;\n\nvar REDUCE_EMPTY = 'Reduce of empty array with no initial value';\n\n// `Array.prototype.{ reduce, reduceRight }` methods implementation\nvar createMethod = function (IS_RIGHT) {\n  return function (that, callbackfn, argumentsLength, memo) {\n    var O = toObject(that);\n    var self = IndexedObject(O);\n    var length = lengthOfArrayLike(O);\n    aCallable(callbackfn);\n    if (length === 0 && argumentsLength < 2) throw new $TypeError(REDUCE_EMPTY);\n    var index = IS_RIGHT ? length - 1 : 0;\n    var i = IS_RIGHT ? -1 : 1;\n    if (argumentsLength < 2) while (true) {\n      if (index in self) {\n        memo = self[index];\n        index += i;\n        break;\n      }\n      index += i;\n      if (IS_RIGHT ? index < 0 : length <= index) {\n        throw new $TypeError(REDUCE_EMPTY);\n      }\n    }\n    for (;IS_RIGHT ? index >= 0 : length > index; index += i) if (index in self) {\n      memo = callbackfn(memo, self[index], index, O);\n    }\n    return memo;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.reduce` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduce\n  left: createMethod(false),\n  // `Array.prototype.reduceRight` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduceright\n  right: createMethod(true)\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/array-reduce.js?")},80940:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";eval('\n\n__webpack_require__(84185);\nObject.defineProperty(exports, "__esModule", ({\n  value: true\n}));\nObject.defineProperty(exports, "PdfCore", ({\n  enumerable: true,\n  get: function get() {\n    return _PdfCore["default"];\n  }\n}));\nvar _PdfCore = _interopRequireDefault(__webpack_require__(73285));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { "default": e }; }\n\n//# sourceURL=webpack://ViewerJS/./src/pdf/core/index.js?')},81148:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar iterate = __webpack_require__(72652);\nvar aCallable = __webpack_require__(79306);\nvar anObject = __webpack_require__(28551);\nvar getIteratorDirect = __webpack_require__(1767);\n\n// `Iterator.prototype.every` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.every\n$({ target: 'Iterator', proto: true, real: true }, {\n  every: function every(predicate) {\n    anObject(this);\n    aCallable(predicate);\n    var record = getIteratorDirect(this);\n    var counter = 0;\n    return !iterate(record, function (value, stop) {\n      if (!predicate(value, counter++)) return stop();\n    }, { IS_RECORD: true, INTERRUPTED: true }).stopped;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.iterator.every.js?")},81202:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar globalThis = __webpack_require__(44576);\nvar defineWellKnownSymbol = __webpack_require__(70511);\nvar defineProperty = (__webpack_require__(24913).f);\nvar getOwnPropertyDescriptor = (__webpack_require__(77347).f);\n\nvar Symbol = globalThis.Symbol;\n\n// `Symbol.asyncDispose` well-known symbol\n// https://github.com/tc39/proposal-async-explicit-resource-management\ndefineWellKnownSymbol('asyncDispose');\n\nif (Symbol) {\n  var descriptor = getOwnPropertyDescriptor(Symbol, 'asyncDispose');\n  // workaround of NodeJS 20.4 bug\n  // https://github.com/nodejs/node/issues/48699\n  // and incorrect descriptor from some transpilers and userland helpers\n  if (descriptor.enumerable && descriptor.configurable && descriptor.writable) {\n    defineProperty(Symbol, 'asyncDispose', { value: descriptor.value, enumerable: false, configurable: false, writable: false });\n  }\n}\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.symbol.async-dispose.js?")},81278:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar DESCRIPTORS = __webpack_require__(43724);\nvar ownKeys = __webpack_require__(35031);\nvar toIndexedObject = __webpack_require__(25397);\nvar getOwnPropertyDescriptorModule = __webpack_require__(77347);\nvar createProperty = __webpack_require__(97040);\n\n// `Object.getOwnPropertyDescriptors` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptors\n$({ target: 'Object', stat: true, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object) {\n    var O = toIndexedObject(object);\n    var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n    var keys = ownKeys(O);\n    var result = {};\n    var index = 0;\n    var key, descriptor;\n    while (keys.length > index) {\n      descriptor = getOwnPropertyDescriptor(O, key = keys[index++]);\n      if (descriptor !== undefined) createProperty(result, key, descriptor);\n    }\n    return result;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.object.get-own-property-descriptors.js?")},81454:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(61701);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.iterator.map.js?")},81510:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar getBuiltIn = __webpack_require__(97751);\nvar hasOwn = __webpack_require__(39297);\nvar toString = __webpack_require__(655);\nvar shared = __webpack_require__(25745);\nvar NATIVE_SYMBOL_REGISTRY = __webpack_require__(91296);\n\nvar StringToSymbolRegistry = shared('string-to-symbol-registry');\nvar SymbolToStringRegistry = shared('symbol-to-string-registry');\n\n// `Symbol.for` method\n// https://tc39.es/ecma262/#sec-symbol.for\n$({ target: 'Symbol', stat: true, forced: !NATIVE_SYMBOL_REGISTRY }, {\n  'for': function (key) {\n    var string = toString(key);\n    if (hasOwn(StringToSymbolRegistry, string)) return StringToSymbolRegistry[string];\n    var symbol = getBuiltIn('Symbol')(string);\n    StringToSymbolRegistry[string] = symbol;\n    SymbolToStringRegistry[symbol] = string;\n    return symbol;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.symbol.for.js?")},81630:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar uncurryThis = __webpack_require__(79504);\nvar ArrayBufferViewCore = __webpack_require__(94644);\nvar $ArrayCopyWithin = __webpack_require__(57029);\n\nvar u$ArrayCopyWithin = uncurryThis($ArrayCopyWithin);\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.copyWithin` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.copywithin\nexportTypedArrayMethod('copyWithin', function copyWithin(target, start /* , end */) {\n  return u$ArrayCopyWithin(aTypedArray(this), target, start, arguments.length > 2 ? arguments[2] : undefined);\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.copy-within.js?")},81730:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar anObject = __webpack_require__(28551);\nvar AsyncFromSyncIterator = __webpack_require__(24074);\nvar WrapAsyncIterator = __webpack_require__(44690);\nvar getIteratorDirect = __webpack_require__(1767);\nvar IS_PURE = __webpack_require__(96395);\n\n// `Iterator.prototype.toAsync` method\n// https://github.com/tc39/proposal-async-iterator-helpers\n$({ target: 'Iterator', proto: true, real: true, forced: IS_PURE }, {\n  toAsync: function toAsync() {\n    return new WrapAsyncIterator(getIteratorDirect(new AsyncFromSyncIterator(getIteratorDirect(anObject(this)))));\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.iterator.to-async.js?")},82003:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar IS_PURE = __webpack_require__(96395);\nvar FORCED_PROMISE_CONSTRUCTOR = (__webpack_require__(10916).CONSTRUCTOR);\nvar NativePromiseConstructor = __webpack_require__(80550);\nvar getBuiltIn = __webpack_require__(97751);\nvar isCallable = __webpack_require__(94901);\nvar defineBuiltIn = __webpack_require__(36840);\n\nvar NativePromisePrototype = NativePromiseConstructor && NativePromiseConstructor.prototype;\n\n// `Promise.prototype.catch` method\n// https://tc39.es/ecma262/#sec-promise.prototype.catch\n$({ target: 'Promise', proto: true, forced: FORCED_PROMISE_CONSTRUCTOR, real: true }, {\n  'catch': function (onRejected) {\n    return this.then(undefined, onRejected);\n  }\n});\n\n// makes sure that native promise-based APIs `Promise#catch` properly works with patched `Promise#then`\nif (!IS_PURE && isCallable(NativePromiseConstructor)) {\n  var method = getBuiltIn('Promise').prototype['catch'];\n  if (NativePromisePrototype['catch'] !== method) {\n    defineBuiltIn(NativePromisePrototype, 'catch', method, { unsafe: true });\n  }\n}\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.promise.catch.js?")},82326:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\n\n// eslint-disable-next-line es/no-math-asinh -- required for testing\nvar $asinh = Math.asinh;\nvar log = Math.log;\nvar sqrt = Math.sqrt;\n\nfunction asinh(x) {\n  var n = +x;\n  return !isFinite(n) || n === 0 ? n : n < 0 ? -asinh(-n) : log(n + sqrt(n * n + 1));\n}\n\nvar FORCED = !($asinh && 1 / $asinh(0) > 0);\n\n// `Math.asinh` method\n// https://tc39.es/ecma262/#sec-math.asinh\n// Tor Browser bug: Math.asinh(0) -> -0\n$({ target: 'Math', stat: true, forced: FORCED }, {\n  asinh: asinh\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.math.asinh.js?")},82485:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";eval('\n\n__webpack_require__(52675);\n__webpack_require__(89463);\n__webpack_require__(2259);\n__webpack_require__(45700);\n__webpack_require__(23418);\n__webpack_require__(94490);\n__webpack_require__(34782);\n__webpack_require__(89572);\n__webpack_require__(23288);\n__webpack_require__(62010);\n__webpack_require__(59904);\n__webpack_require__(84185);\n__webpack_require__(40875);\n__webpack_require__(10287);\n__webpack_require__(3362);\n__webpack_require__(27495);\n__webpack_require__(38781);\nfunction _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nObject.defineProperty(exports, "__esModule", ({\n  value: true\n}));\nexports.Renderer = exports.PageSectionView = exports.ElementBuilder = void 0;\n__webpack_require__(88431);\n__webpack_require__(2008);\n__webpack_require__(51629);\n__webpack_require__(64346);\n__webpack_require__(23792);\n__webpack_require__(62062);\n__webpack_require__(15086);\n__webpack_require__(26910);\n__webpack_require__(36033);\n__webpack_require__(2892);\n__webpack_require__(26099);\n__webpack_require__(31415);\n__webpack_require__(47764);\n__webpack_require__(42762);\n__webpack_require__(30958);\n__webpack_require__(23500);\n__webpack_require__(62953);\n__webpack_require__(76031);\nvar _ui = __webpack_require__(32604);\nvar _viewerType = __webpack_require__(87312);\nvar _Annotation = __webpack_require__(75056);\nvar _TextLayer = __webpack_require__(88244);\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a \'" + n + "\' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }\nfunction _classPrivateMethodInitSpec(e, a) { _checkPrivateRedeclaration(e, a), a.add(e); }\nfunction _checkPrivateRedeclaration(e, t) { if (t.has(e)) throw new TypeError("Cannot initialize the same private elements twice on an object"); }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _assertClassBrand(e, t, n) { if ("function" == typeof e ? e === t : e.has(t)) return arguments.length < 3 ? t : n; throw new TypeError("Private element is not present on this object"); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }\nfunction _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }\nif (!Element.prototype.replaceChildren) {\n  Element.prototype.replaceChildren = function () {\n    while (this.firstChild) {\n      this.removeChild(this.firstChild);\n    }\n    for (var _len = arguments.length, children = new Array(_len), _key = 0; _key < _len; _key++) {\n      children[_key] = arguments[_key];\n    }\n    for (var _i = 0, _children = children; _i < _children.length; _i++) {\n      var child = _children[_i];\n      // 문자열인 경우 텍스트 노드로 변환\n      this.appendChild(child instanceof Node ? child : document.createTextNode(String(child)));\n    }\n  };\n}\nfunction visualizeRects(rects, selectionContainer) {\n  if (Array.isArray(rects)) {\n    rects.forEach(function (_ref) {\n      var rect = _ref.rect;\n      var highlightDiv = document.createElement(\'div\');\n      highlightDiv.style.position = \'absolute\';\n      highlightDiv.style.top = rect.top + window.scrollY + \'px\';\n      highlightDiv.style.left = rect.left + window.scrollX + \'px\';\n      highlightDiv.style.width = rect.width + \'px\';\n      highlightDiv.style.height = rect.height + \'px\';\n      highlightDiv.style.backgroundColor = \'rgba(255, 255, 0, 0.4)\'; // 노란 형광펜\n      highlightDiv.style.pointerEvents = \'none\'; // 텍스트 클릭 방해하지 않도록\n      highlightDiv.style.zIndex = \'10\'; // 필요 시 z-index 조정\n\n      selectionContainer.appendChild(highlightDiv);\n    });\n  } else {\n    var highlightDiv = document.createElement(\'div\');\n    highlightDiv.style.position = \'absolute\';\n    highlightDiv.style.top = rects.top + window.scrollY + \'px\';\n    highlightDiv.style.left = rects.left + window.scrollX + \'px\';\n    highlightDiv.style.width = rects.width + \'px\';\n    highlightDiv.style.height = rects.height + \'px\';\n    highlightDiv.style.backgroundColor = \'rgba(255, 255, 0, 0.4)\'; // 노란 형광펜\n    highlightDiv.style.pointerEvents = \'none\'; // 텍스트 클릭 방해하지 않도록\n    highlightDiv.style.zIndex = \'10\'; // 필요 시 z-index 조정\n\n    selectionContainer.appendChild(highlightDiv);\n  }\n}\nvar Renderer = exports.Renderer = /*#__PURE__*/function () {\n  function Renderer(viewerContainer, scrollBody, totalPages, perfomance, renderFunction) {\n    var onRenderComplete = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : null;\n    var onRenderedTask = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : null;\n    _classCallCheck(this, Renderer);\n    this.viewerContainer = viewerContainer; // 렌더링할 컨테이너\n    this.scrollBody = scrollBody; // 렌더링할 컨테이너\n    this.totalPages = totalPages; // 총 페이지 수\n    this.renderFunction = renderFunction; // 페이지를 렌더링하는 함수\n    this.renderQueue = []; // 렌더링 작업 큐\n    this.isRendering = false; // 현재 렌더링 중인지 확인\n    this.currentTask = null; // 현재 실행 중인 태스크\n    this.isDual = false;\n    this.onRenderComplete = onRenderComplete; // 모든 렌더링 완료 시 호출할 콜백\n    this.onRenderedTask = onRenderedTask;\n    this.perfomance = perfomance;\n    this.visiblePageCount = this.perfomance.deviceType == \'pc\' ? 4 : 2;\n  }\n  return _createClass(Renderer, [{\n    key: "destroy",\n    value: function destroy() {\n      this.viewerContainer = null;\n      this.scrollBody = null;\n      this.totalPages = null;\n      this.renderFunction = null;\n      this.renderQueue = null;\n      this.isRendering = null;\n      this.currentTask = null;\n      this.isDual = null;\n      this.onRenderComplete = null;\n      this.onRenderedTask = null;\n      this.perfomance = null;\n      this.visiblePageCount = null;\n    }\n    // 작업 추가\n  }, {\n    key: "enqueue",\n    value: function enqueue(pageIndex) {\n      var priority = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var task = {\n        pageIndex: pageIndex,\n        priority: priority,\n        cancelled: false // 태스크 취소 상태\n      };\n\n      // 이미 큐에 있는 작업은 추가하지 않음\n      if (this.renderQueue.some(function (t) {\n        return t.pageIndex === pageIndex;\n      })) {\n        return;\n      }\n      this.renderQueue.push(task);\n      this.renderQueue.sort(function (a, b) {\n        return a.priority - b.priority;\n      }); // 우선순위로 정렬\n      this.processQueue();\n    }\n  }, {\n    key: "isComplete",\n    value: function isComplete() {\n      if (this.isRendering || this.renderQueue.length === 0) {\n        // 모든 렌더링이 끝났다면 onRenderComplete 호출\n        if (!this.isRendering && this.renderQueue.length === 0) {\n          return true;\n        }\n      }\n      return false;\n    }\n\n    // 작업 큐 처리\n  }, {\n    key: "processQueue",\n    value: function processQueue() {\n      var _this = this;\n      if (this.isRendering || this.renderQueue.length === 0) {\n        // 모든 렌더링이 끝났다면 onRenderComplete 호출\n        if (!this.isRendering && this.renderQueue.length === 0 && this.onRenderComplete) {\n          this.onRenderComplete();\n        }\n        return;\n      }\n      this.isRendering = true;\n      var task = this.renderQueue.shift(); // 가장 높은 우선순위 작업 가져오기\n      this.currentTask = task; // 현재 실행 중인 태스크 저장\n\n      // 태스크가 취소되었는지 확인\n      if (task.cancelled) {\n        this.isRendering = false;\n        this.processQueue(); // 다음 작업 처리\n        return;\n      }\n      this.renderFunction(task.pageIndex).then(function () {\n        _this.isRendering = false;\n        _this.processQueue(); // 다음 작업 처리\n      })["catch"](function (err) {\n        console.error(\'Rendering failed:\', err, task.pageIndex);\n        _this.isRendering = false;\n        _this.processQueue();\n      });\n    }\n\n    // 태스크 취소\n  }, {\n    key: "cancelTask",\n    value: function cancelTask(pageIndex) {\n      // 큐에서 취소\n      this.renderQueue = this.renderQueue.filter(function (task) {\n        if (task.pageIndex === pageIndex) {\n          task.cancelled = true;\n          return false;\n        }\n        return true;\n      });\n\n      // 현재 실행 중인 태스크 취소\n      if (this.currentTask && this.currentTask.pageIndex === pageIndex) {\n        this.currentTask.cancelled = true;\n      }\n    }\n    /**\n     * 보이는 페이지 기준 앞뒤 2 페이지 씩 추가로드 요청한다.\n     * @param {number} page\n     */\n  }, {\n    key: "prioritizeVisiblePages",\n    value: function prioritizeVisiblePages(page) {\n      var _this2 = this,\n        _this$currentTask;\n      var viewport = this.viewerContainer.getBoundingClientRect();\n      var pageHeight = viewport.height; // 페이지 높이\n      var currentPage = page || Math.floor(this.viewerContainer.scrollTop / pageHeight);\n      var visiblePageCount = this.visiblePageCount; // 앞뒤 페이지씩 로드\n      var pagesToRender = new Set(); // 중복 방지용 Set\n\n      var root = document.documentElement;\n      var scaleFactor = getComputedStyle(root).getPropertyValue(\'--total-scale-factor\').trim();\n\n      // 현재 페이지와 앞뒤 페이지 추가\n      var scale = Math.floor(Number(scaleFactor));\n      // visiblePageCount -= Math.floor(Number(scaleFactor));\n      // if (visiblePageCount == 0) {\n      //   visiblePageCount = 1;\n      // }\n      if (scale > 2.5) {\n        visiblePageCount = 1;\n      }\n      for (var i = -visiblePageCount; i <= visiblePageCount; i++) {\n        var pageIndex = currentPage + i;\n        if (pageIndex >= 0 && pageIndex < this.totalPages) {\n          pagesToRender.add(pageIndex);\n        }\n      }\n\n      // 기존 큐의 모든 작업을 확인하여 필요한 작업만 남기기\n      this.renderQueue = this.renderQueue.filter(function (task) {\n        if (pagesToRender.has(task.pageIndex)) {\n          return true; // 유지\n        } else {\n          task.cancelled = true; // 취소\n          return false; // 제거\n        }\n      });\n\n      // 현재 실행 중인 태스크가 보이는 페이지에 없으면 취소\n      if (this.currentTask && !pagesToRender.has(this.currentTask.pageIndex)) {\n        this.currentTask.cancelled = true;\n      }\n\n      // 보이지 않는 페이지의 요소 제거\n      if (typeof this.onRenderedTask == \'function\') {\n        this.onRenderedTask(pagesToRender);\n      }\n\n      // 새로운 페이지를 렌더링 큐에 추가\n      pagesToRender.forEach(function (pageIndex) {\n        _this2.enqueue(pageIndex, 0); // 우선순위 높게 추가\n      });\n\n      // 현재 실행 중인 태스크가 취소되었을 경우 다음 작업 실행\n      if ((_this$currentTask = this.currentTask) !== null && _this$currentTask !== void 0 && _this$currentTask.cancelled) {\n        this.isRendering = false;\n        this.processQueue();\n      }\n    }\n  }]);\n}();\nvar ElementBuilder = exports.ElementBuilder = /*#__PURE__*/function () {\n  function ElementBuilder() {\n    _classCallCheck(this, ElementBuilder);\n    this.elements = {};\n    this.callbackOpt = {\n      onClickViewMode: null,\n      onClickAnnotaion: null\n    };\n  }\n  return _createClass(ElementBuilder, [{\n    key: "createPDFViewer",\n    value: function createPDFViewer(containerId) {\n      if (!this.elements.container && containerId) {\n        this.elements.container = document.getElementById(containerId);\n        if (!this.elements.container) {\n          throw new Error(\'해당 viewerId를 찾을 수 없습니다.\');\n        }\n      } else {\n        throw new Error(\'viewerId를 지정해야합니다.\');\n      }\n      this.elements.container.replaceChildren();\n      this.elements.documentContainer = document.createElement(\'div\');\n      this.elements.documentContainer.className = \'document-content-container\';\n      this.elements.documentContainer.style = \'width: 100%; height: 100%; display: flex; align-items: center; overflow: hidden;\';\n      this.elements.measurementContainer = document.createElement(\'div\');\n      this.elements.measurementContainer.style = \'flex-direction: column; flex:1; width: 100%; height: 100%\';\n      this.elements.documentScrollContainer = document.createElement(\'div\');\n      this.elements.documentScrollContainer.id = \'documentScrollContainer\';\n      this.elements.documentScrollContainer.style = \'display: flex; flex-direction: column; flex: 1; width: 100%; height: 100%; overflow: auto; overscroll-behavior: none;\';\n      this.elements.virtualListWidthContainer = document.createElement(\'div\');\n      this.elements.virtualListWidthContainer.id = \'virtualListWidthContainer\';\n      this.elements.virtualListWidthContainer.style = \'cursor: default; margin: auto; outline: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); width: 568px\';\n      this.elements.virtualListHeightContainer = document.createElement(\'div\');\n      this.elements.virtualListHeightContainer.id = \'virtualListHeightContainer\';\n      this.elements.virtualListHeightContainer.style = \'position: relative; overflow: hidden; width: 100%; will-change: transform; height: 7146px;\';\n      this.elements.virtualListBody = document.createElement(\'div\');\n      this.elements.virtualListBody.id = \'virtualListBody\';\n      this.elements.virtualListBody.style = \'position: absolute; top: 0; left: 0; height:100%; width: 100%; overflow: visible;\';\n      this.elements.documentContainer.appendChild(this.elements.measurementContainer);\n      this.elements.measurementContainer.appendChild(this.elements.documentScrollContainer);\n      this.elements.documentScrollContainer.appendChild(this.elements.virtualListWidthContainer);\n      this.elements.virtualListWidthContainer.appendChild(this.elements.virtualListHeightContainer);\n      this.elements.virtualListHeightContainer.appendChild(this.elements.virtualListBody);\n      for (var key in this.elements) {\n        (0, _ui.disableUserSelect)(this.elements[key]);\n      }\n      this.elements.container.appendChild(this.elements.documentContainer);\n    }\n\n    /**\n     * 캔버스 생성\n     */\n  }, {\n    key: "createCanvas",\n    value: function createCanvas() {\n      var canvas = document.createElement(\'canvas\');\n      canvas.style.position = \'absolute\';\n      canvas.style.filter = \'none\';\n      return canvas;\n    }\n  }, {\n    key: "disableTouch",\n    value: function disableTouch() {\n      for (var key in this.elements) {\n        (0, _ui.disableTouchAction)(this.elements[key]);\n      }\n    }\n  }, {\n    key: "activeTouch",\n    value: function activeTouch() {\n      for (var key in this.elements) {\n        (0, _ui.activeTouchAction)(this.elements[key]);\n      }\n    }\n  }]);\n}();\n/**\n * 각페이지별 랜더링 객체\n */\nvar _PageSectionView_brand = /*#__PURE__*/new WeakSet();\nvar PageSectionView = exports.PageSectionView = /*#__PURE__*/function () {\n  function PageSectionView() {\n    var _this3 = this;\n    var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      pageNum = _ref2.pageNum,\n      id = _ref2.id,\n      pageInfo = _ref2.pageInfo,\n      viewBox = _ref2.viewBox,\n      rotation = _ref2.rotation,\n      requestAnnotationInvalidate = _ref2.requestAnnotationInvalidate;\n    _classCallCheck(this, PageSectionView);\n    /**\n     * 목표하는 사이즈의 크기를 재계산해준다.\n     * @param {*} targetRectWidth\n     * @param {*} targetHeight\n     * @param {*} width\n     * @param {*} height\n     * @returns\n     */\n    _classPrivateMethodInitSpec(this, _PageSectionView_brand);\n    _defineProperty(this, "upToText", function () {\n      _this3.swapElements(_this3.textContainer, _this3.annotationContainer);\n    });\n    _defineProperty(this, "upToAnno", function () {\n      _this3.swapElements(_this3.annotationContainer, _this3.textContainer);\n    });\n    _defineProperty(this, "swapElements", function (el1, el2) {\n      var parent = el1.parentNode;\n      var nextSibling = el1.nextSibling === el2 ? el1 : el1.nextSibling;\n      parent.insertBefore(el2, el1);\n      parent.insertBefore(el1, nextSibling);\n    });\n    /**\n     * 페이지 사이즈 계산.\n     * @param {number} targetWidth 너비\n     * @param {number} targetHeight 높이\n     * @param {boolean} isDualPage 양면\n     * @returns\n     */\n    _defineProperty(this, "calculatePageSize", function (targetWidth, targetHeight) {\n      var isDualPage = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var targetRectHeight = targetHeight;\n      var targetRectWidth = isDualPage ? targetWidth / 2 : width;\n\n      // target height에 맞춰 재정렬\n      var _this3$resizeToFitPar = _this3.resizeToFitParentHeight(_this3.viewBox, targetRectHeight, _this3.rotation),\n        width = _this3$resizeToFitPar.width,\n        height = _this3$resizeToFitPar.height;\n      var _assertClassBrand$cal = _assertClassBrand(_PageSectionView_brand, _this3, _calculatePageSize).call(_this3, targetRectWidth, targetRectHeight, width, height),\n        pageWidth = _assertClassBrand$cal.width,\n        pageHeight = _assertClassBrand$cal.height;\n      return {\n        pageWidth: pageWidth,\n        pageHeight: pageHeight\n      };\n    });\n    _defineProperty(this, "areArraysEqual", function (arr1, arr2) {\n      return arr1.length === arr2.length && arr1.every(function (v, i) {\n        return v === arr2[i];\n      });\n    });\n    this.id = id;\n    this.pageNum = pageNum;\n    this.pageInfo = pageInfo;\n    this.viewBox = viewBox;\n    this.rotation = rotation;\n    this.pageSize = {\n      width: 0,\n      height: 0\n    };\n    this.scale = 1;\n    this.requestAnnotationInvalidate = requestAnnotationInvalidate;\n    this.cacheCtx = null;\n    this.cacheSelectionCanvas = null;\n    this.textInfo = null;\n    this.taskStatus = _viewerType.TaskType.INIT;\n    /** @type {import(\'pdfjs-local/build/dist\').PDFPageProxy} */\n    this.pdfPage = null;\n    this.rendered = null;\n    this.renderTimeout = null;\n    this.annotations = null;\n    this.loadAnnotation = false;\n    this.annotationSizeMap = new Map();\n    this.viewport = null;\n    this.loadTextContents = false;\n    this.textContent = null;\n    this.textLayer = null;\n    this.renderingTimerTextLayer = null;\n\n    // element\n    this.element = document.createElement(\'div\');\n    this.element.dataset.section = \'pdfview\';\n    this.element.dataset.pdfpage = this.pageNum;\n    this.element.id = \'pageSectionView\' + pageNum;\n    this.element.style["float"] = \'left\';\n    this.element.style.position = \'relative\';\n    // this.element.style.backgroundColor = getRandomRGBA();\n\n    (0, _ui.disableUserSelect)(this.element);\n\n    //page\n    this.pageContainer = document.createElement(\'div\');\n    this.pageContainer.id = \'pageContainer\' + pageNum;\n    this.pageContainer.style.position = \'relative\';\n    (0, _ui.disableUserSelect)(this.pageContainer);\n\n    //selection\n    this.selectionContainer = document.createElement(\'div\');\n    this.selectionContainer.id = \'selectionContainer\' + pageNum;\n    this.selectionContainer.style.position = \'absolute\';\n    this.selectionContainer.style.left = 0;\n    this.selectionContainer.style.top = 0;\n    this.selectionContainer.dataset.pagenum = this.pageNum;\n    (0, _ui.disableUserSelect)(this.selectionContainer);\n\n    //text\n    this.textContainer = document.createElement(\'div\');\n    this.textContainer.id = \'textContainer\' + pageNum;\n    this.textContainer.classList.add(\'textLayer\');\n    this.textContainer.style.position = \'absolute\';\n    this.textContainer.style.left = 0;\n    this.textContainer.style.top = 0;\n    this.textContainer.dataset.pagenum = this.pageNum;\n    (0, _ui.disableUserSelect)(this.textContainer);\n\n    //annotation\n    this.annotationContainer = document.createElement(\'div\');\n    this.annotationContainer.id = \'annotationContainer\' + pageNum;\n    this.annotationContainer.style.position = \'absolute\';\n    this.annotationContainer.style.left = 0;\n    this.annotationContainer.style.top = 0;\n    (0, _ui.disableUserSelect)(this.annotationContainer);\n    this.element.appendChild(this.pageContainer);\n    this.element.appendChild(this.selectionContainer);\n    this.element.appendChild(this.annotationContainer);\n    this.element.appendChild(this.textContainer);\n  }\n  return _createClass(PageSectionView, [{\n    key: "clear",\n    value:\n    /**\n     * canvas 초기화\n     */\n    function clear() {\n      var isReset = this.reset();\n      if (!isReset) {\n        return;\n      }\n      if (this.renderTimeout) {\n        clearTimeout(this.renderTimeout);\n        this.renderTimeout = null;\n      }\n      var canvas = this.pageContainer.querySelector(\'canvas\');\n      if (canvas) {\n        var ctx = canvas.getContext(\'2d\'); // 2D 컨텍스트 해제\n        if (ctx) {\n          ctx.clearRect(0, 0, canvas.width, canvas.height);\n        }\n        canvas.width = 0; // 크기 초기화\n        canvas.height = 0;\n        canvas.remove(); // DOM에서 제거\n        canvas = null; // 참조 해제\n      }\n      // if (this.pdfPage) {\n      //   try {\n      //     this.pdfPage.cleanup();\n      //     // this.pdfPage = null;\n      //   } catch (err) {}\n      // }\n      if (this.rendered) {\n        try {\n          this.rendered.cancel();\n          this.rendered = null;\n        } catch (err) {}\n      }\n    }\n    /**\n     * task 초기화\n     */\n  }, {\n    key: "reset",\n    value: function reset() {\n      if (this.taskStatus == _viewerType.TaskType.COMPLETE || this.taskStatus == _viewerType.TaskType.LOADING) {\n        this.taskStatus = _viewerType.TaskType.INIT;\n        return true;\n      }\n      return false;\n    }\n\n    /**\n     * 사이즈 사전계산\n     * @param {DOMRect} targetRect 조정하고 싶은 사이즈\n     * @param {boolean} isDualPage 너비부분이 양면 사이즈일 경우.\n     * @param {number} scale 현재 유저 스케일\n     * @param {boolean} isFitWidth 현재 유저 스케일\n     */\n  }, {\n    key: "preCalc",\n    value: function preCalc(targetRect, isDualPage, scale) {\n      this.scale = scale;\n      var targetHeight = targetRect ? targetRect.height : window.innerHeight;\n      var targetRectWidth = isDualPage ? (targetRect === null || targetRect === void 0 ? void 0 : targetRect.width) / 2 : targetRect === null || targetRect === void 0 ? void 0 : targetRect.width;\n\n      // target height에 맞춰 재정렬\n      var _this$resizeToFitPare = this.resizeToFitParentHeight(this.viewBox, targetHeight, this.rotation),\n        width = _this$resizeToFitPare.width,\n        height = _this$resizeToFitPare.height;\n      var _assertClassBrand$cal2 = _assertClassBrand(_PageSectionView_brand, this, _calculatePageSize).call(this, targetRectWidth, targetHeight, width, height),\n        pageWidth = _assertClassBrand$cal2.width,\n        pageHeight = _assertClassBrand$cal2.height;\n      // console.log(this.pageSize.width, pageWidth);\n      // console.log(this.pageSize.height, pageHeight);\n      // const isSame =\n      //   this.pageSize.width == pageWidth && this.pageSize.height == pageHeight;\n      this.pageSize.width = pageWidth;\n      this.pageSize.height = pageHeight;\n      // return isSame;\n    }\n  }, {\n    key: "update",\n    value:\n    /**\n     * 현재 사이즈 ui update\n     * @param {boolean} isFrequentlyCall 호출이 잦을 경우 몇개는 사이즈 조정을 안함.\n     */\n    function update() {\n      var isFrequentlyCall = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var widthPx = this.pageSize.width + \'px\';\n      var heightPx = this.pageSize.height + \'px\';\n      this.element.style.width = widthPx;\n      this.element.style.height = heightPx;\n      this.pageContainer.style.width = widthPx;\n      this.pageContainer.style.height = heightPx;\n      var canvas = this.pageContainer.querySelector(\'canvas\');\n      if (canvas) {\n        canvas.style.width = widthPx;\n        canvas.style.height = heightPx;\n      }\n      if (isFrequentlyCall) {\n        this.clearSelection();\n      } else {\n        this.textContainer.style.width = widthPx;\n        this.textContainer.style.height = heightPx;\n        this.annotationContainer.style.width = widthPx;\n        this.annotationContainer.style.height = heightPx;\n        this.selectionContainer.style.width = widthPx;\n        this.selectionContainer.style.height = heightPx;\n\n        // annotation ui update\n        this.annotationUpdate();\n        // text ui update\n        this.textContentUpdate();\n      }\n    }\n  }, {\n    key: "setTextContent",\n    value: function setTextContent(textContent) {\n      if (textContent) {\n        this.textContent = textContent;\n        this.textLayer = new _TextLayer.TextLayer({\n          textContentSource: this.textContent,\n          container: this.textContainer,\n          viewport: this.viewport,\n          scale: this.scale,\n          rotation: this.rotation,\n          canvasStyleWidth: this.pageSize.width,\n          canvasStyleHeight: this.pageSize.height\n        });\n        this.textLayer.render();\n      }\n      this.textContentUpdate();\n    }\n  }, {\n    key: "textContentUpdate",\n    value: function textContentUpdate() {\n      var _this4 = this;\n      this.clearSelection();\n      this.textContainer.replaceChildren();\n      // this.textContainer.style.display = \'none\';\n      if (this.renderingTimerTextLayer) {\n        clearTimeout(this.renderingTimerTextLayer);\n        this.renderingTimerTextLayer = null;\n      }\n      this.renderingTimerTextLayer = setTimeout(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var _this4$textLayer;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              // this.textContainer.style.display = null;\n              if (_this4.textLayer) {\n                _this4.textContainer.replaceChildren();\n                (_this4$textLayer = _this4.textLayer) === null || _this4$textLayer === void 0 || _this4$textLayer.update2({\n                  container: _this4.textContainer,\n                  viewport: _this4.viewport,\n                  canvasStyleWidth: _this4.pageSize.width,\n                  canvasStyleHeight: _this4.pageSize.height\n                });\n\n                // this.textInfoUpdate(true);\n                _this4.textInfo = (0, _ui.getTextRects)(_this4.textContainer, _this4.textContainer.parentElement);\n                _this4.clearSelection();\n              }\n              _this4.textContainer.replaceChildren();\n              _this4.renderingTimerTextLayer = null;\n            case 3:\n            case "end":\n              return _context.stop();\n          }\n        }, _callee);\n      })), 500);\n    }\n  }, {\n    key: "textInfoUpdate",\n    value: function textInfoUpdate() {\n      var _this$viewport, _this$viewport2;\n      var dataOnly = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      this.clearSelection();\n      var widthPx = this.pageSize.width + \'px\';\n      var heightPx = this.pageSize.height + \'px\';\n      var w = Math.floor((_this$viewport = this.viewport) === null || _this$viewport === void 0 ? void 0 : _this$viewport.width);\n      var h = Math.floor((_this$viewport2 = this.viewport) === null || _this$viewport2 === void 0 ? void 0 : _this$viewport2.height);\n      if (this.cacheSelectionCanvas) {\n        this.cacheSelectionCanvas.style.width = widthPx;\n        this.cacheSelectionCanvas.style.height = heightPx;\n        this.cacheSelectionCanvas.width = w;\n        this.cacheSelectionCanvas.height = h;\n        this.cacheSelectionCanvas.dataset.pagenum = this.pageNum;\n        this.cacheSelectionCanvas.dataset.scale = this.scale;\n        this.cacheSelectionCanvas.dataset.rotation = this.rotation;\n      } else {\n        this.cacheSelectionCanvas = document.createElement(\'canvas\');\n        this.cacheSelectionCanvas.style.width = widthPx;\n        this.cacheSelectionCanvas.style.height = heightPx;\n        this.cacheSelectionCanvas.width = w;\n        this.cacheSelectionCanvas.height = h;\n        this.cacheSelectionCanvas.style.position = \'absolute\';\n        this.cacheSelectionCanvas.style.left = 0;\n        this.cacheSelectionCanvas.style.top = 0;\n        this.cacheSelectionCanvas.dataset.pagenum = this.pageNum;\n        this.cacheSelectionCanvas.dataset.scale = this.scale;\n        this.cacheSelectionCanvas.dataset.rotation = this.rotation;\n        this.selectionContainer.appendChild(this.cacheSelectionCanvas);\n      }\n      //디버깅 레이어\n      // this.textInfo.forEach(info => {\n      //   visualizeRects(info.rect, this.selectionContainer);\n      // });\n    }\n    /**\n     * selection제거\n     */\n  }, {\n    key: "clearSelection",\n    value: function clearSelection() {\n      if (!this.cacheSelectionCanvas) {\n        return;\n      }\n      if (this.cacheSelectionCanvas.width != null) {\n        this.cacheSelectionCanvas.width = 0;\n        this.cacheSelectionCanvas.height = 0;\n      }\n      // const ctx = this.cacheSelectionCanvas.getContext(\'2d\');\n      // ctx.clearRect(\n      //   0,\n      //   0,\n      //   this.cacheSelectionCanvas.width,\n      //   this.cacheSelectionCanvas.height,\n      // );\n    }\n    /**\n     * selection그리기 함수\n     * @param {Array} selectionInfo\n     */\n  }, {\n    key: "drawSelection",\n    value: function drawSelection(selectionInfo) {\n      if (selectionInfo.length == 0) {\n        return;\n      }\n      (0, _ui.drawTextRectsOnCanvas)({\n        canvas: this.cacheSelectionCanvas,\n        rectList: selectionInfo,\n        originalWidth: this.pageSize.width,\n        originalHeight: this.pageSize.height\n      });\n    }\n  }, {\n    key: "getTextInfo",\n    value: function getTextInfo() {\n      // console.log(\'info\', this.textInfo);\n      // this.textInfo = getTextRects(\n      //   this.textContainer,\n      //   this.textContainer.parentElement,\n      // );\n      return this.textInfo;\n    }\n    /**\n     *\n     * @param {AnnotationFactory} annotations\n     */\n  }, {\n    key: "setAnnotation",\n    value: function setAnnotation(annotations) {\n      var _this5 = this;\n      if (Array.isArray(annotations)) {\n        this.annotations = annotations.map(function (anno) {\n          return _Annotation.AnnotationFactory.create(anno, _this5.pageNum);\n        });\n      }\n      this.annotationUpdate();\n    }\n    /**\n     * annotation업데이트\n     */\n  }, {\n    key: "annotationUpdate",\n    value: function annotationUpdate() {\n      var _this$viewport3,\n        _this$viewport4,\n        _this$annotations,\n        _this6 = this;\n      var box = this.annotationContainer.firstChild;\n      var widthPx = this.pageSize.width + \'px\';\n      var heightPx = this.pageSize.height + \'px\';\n      var canvas = null;\n      var w = Math.floor((_this$viewport3 = this.viewport) === null || _this$viewport3 === void 0 ? void 0 : _this$viewport3.width);\n      var h = Math.floor((_this$viewport4 = this.viewport) === null || _this$viewport4 === void 0 ? void 0 : _this$viewport4.height);\n      if (box) {\n        canvas = box;\n        canvas.style.width = widthPx;\n        canvas.style.height = heightPx;\n        canvas.width = w;\n        canvas.height = h;\n        canvas.dataset.pagenum = this.pageNum;\n        canvas.dataset.scale = this.scale;\n        canvas.dataset.rotation = this.rotation;\n      } else {\n        canvas = document.createElement(\'canvas\');\n        canvas.style.width = widthPx;\n        canvas.style.height = heightPx;\n        canvas.width = w;\n        canvas.height = h;\n        canvas.style.position = \'absolute\';\n        canvas.style.left = 0;\n        canvas.style.top = 0;\n        canvas.dataset.pagenum = this.pageNum;\n        canvas.dataset.scale = this.scale;\n        canvas.dataset.rotation = this.rotation;\n        this.cacheCtx = canvas.getContext(\'2d\');\n        this.annotationContainer.appendChild(canvas);\n      }\n      (_this$annotations = this.annotations) === null || _this$annotations === void 0 || _this$annotations.forEach(function (annotation) {\n        var size = (0, _ui.getPdfScreenRect)(_this6.viewBox, annotation.rect, _this6.pageSize.width, _this6.pageSize.height);\n        annotation.size = size;\n      });\n\n      // this.annotations?.forEach(annotation => {\n      //   console.log(annotation);\n      //   AnnotationFactory.drawAnnotation({\n      //     ctx: this.cacheCtx,\n      //     canvasRect: this.viewport.viewBox,\n      //     canvasWidth: this.viewport.width,\n      //     canvasHeight: this.viewport.height,\n      //     annotation: annotation,\n      //     scale: this.scale,\n      //     rotation: this.rotation,\n      //   });\n      // });\n      canvas = null;\n    }\n\n    /**\n     * 상위 parent 높이에 맞춰 리사이즈값을 재계산해서 돌려준다.\n     */\n  }, {\n    key: "resizeToFitParentHeight",\n    value: function resizeToFitParentHeight(originalArray, parentHeight) {\n      var rotation = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var _originalArray = _slicedToArray(originalArray, 4),\n        llxParent = _originalArray[0],\n        llyParent = _originalArray[1],\n        urxParent = _originalArray[2],\n        uryParent = _originalArray[3];\n      // 원본 배열에서 넓이와 높이 추출\n      var originalWidth = rotation == 90 || rotation == 270 ? uryParent - llyParent : urxParent - llxParent;\n      var originalHeight = rotation == 90 || rotation == 270 ? urxParent - llxParent : uryParent - llyParent;\n\n      // 부모 높이에 맞는 비율 계산\n      var aspectRatio = originalWidth / originalHeight;\n\n      // 부모 높이에 맞춰 새로운 높이 계산 (부모 높이 그대로 사용)\n      var newHeight = parentHeight;\n\n      // 부모 높이에 맞는 새로운 넓이 계산 (비율 유지)\n      var newWidth = newHeight * aspectRatio;\n\n      // 새로 계산된 사이즈를 반환\n      return {\n        width: newWidth,\n        height: newHeight\n      };\n    }\n    /**\n     * 상위 parent 너비에 맞춰 리사이즈값을 재계산해서 돌려준다.\n     */\n  }, {\n    key: "resizeToFitParentWidth",\n    value: function resizeToFitParentWidth(originalArray, parentWidth) {\n      var rotation = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var _originalArray2 = _slicedToArray(originalArray, 4),\n        llxParent = _originalArray2[0],\n        llyParent = _originalArray2[1],\n        urxParent = _originalArray2[2],\n        uryParent = _originalArray2[3];\n\n      // 원본 배열에서 넓이와 높이 추출\n      var originalWidth = rotation == 0 || rotation == 180 ? uryParent - llyParent : urxParent - llxParent;\n      var originalHeight = rotation == 0 || rotation == 180 ? urxParent - llxParent : uryParent - llyParent;\n\n      // 원본 넓이에 맞는 비율 계산\n      var aspectRatio = originalWidth / originalHeight;\n\n      // 부모 넓이에 맞춰 새로운 넓이 계산 (부모 넓이 그대로 사용)\n      var newWidth = parentWidth;\n\n      // 부모 넓이에 맞는 새로운 높이 계산 (비율 유지)\n      var newHeight = newWidth / aspectRatio;\n\n      // 새로 계산된 사이즈를 반환\n      return {\n        width: newWidth,\n        height: newHeight\n      };\n    }\n  }]);\n}();\nfunction _calculatePageSize(targetRectWidth, targetHeight, width, height) {\n  var imageAspectRatio = width / height;\n  var pageWidth, pageHeight;\n  if (width > height) {\n    // 가로가 더 긴 경우\n    var targetWidthForResize = Math.min(targetRectWidth, width);\n    pageWidth = targetWidthForResize;\n    pageHeight = targetWidthForResize / imageAspectRatio;\n    if (pageHeight > targetHeight) {\n      pageHeight = targetHeight;\n      pageWidth = targetHeight * imageAspectRatio;\n    }\n  } else {\n    // 세로가 더 긴 경우\n    pageHeight = Math.min(targetHeight, height);\n    pageWidth = pageHeight * imageAspectRatio;\n    if (pageWidth > targetRectWidth) {\n      pageWidth = targetRectWidth;\n      pageHeight = targetRectWidth / imageAspectRatio;\n    }\n  }\n  return {\n    width: pageWidth,\n    height: pageHeight\n  };\n}\n\n//# sourceURL=webpack://ViewerJS/./src/pdf/core/Renderer.js?')},82750:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// https://github.com/tc39/proposal-async-explicit-resource-management\nvar $ = __webpack_require__(46518);\nvar DESCRIPTORS = __webpack_require__(43724);\nvar getBuiltIn = __webpack_require__(97751);\nvar aCallable = __webpack_require__(79306);\nvar anInstance = __webpack_require__(90679);\nvar defineBuiltIn = __webpack_require__(36840);\nvar defineBuiltIns = __webpack_require__(56279);\nvar defineBuiltInAccessor = __webpack_require__(62106);\nvar wellKnownSymbol = __webpack_require__(78227);\nvar InternalStateModule = __webpack_require__(91181);\nvar addDisposableResource = __webpack_require__(91021);\nvar V8_VERSION = __webpack_require__(39519);\n\nvar Promise = getBuiltIn('Promise');\nvar SuppressedError = getBuiltIn('SuppressedError');\nvar $ReferenceError = ReferenceError;\n\nvar ASYNC_DISPOSE = wellKnownSymbol('asyncDispose');\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\n\nvar ASYNC_DISPOSABLE_STACK = 'AsyncDisposableStack';\nvar setInternalState = InternalStateModule.set;\nvar getAsyncDisposableStackInternalState = InternalStateModule.getterFor(ASYNC_DISPOSABLE_STACK);\n\nvar HINT = 'async-dispose';\nvar DISPOSED = 'disposed';\nvar PENDING = 'pending';\n\nvar getPendingAsyncDisposableStackInternalState = function (stack) {\n  var internalState = getAsyncDisposableStackInternalState(stack);\n  if (internalState.state === DISPOSED) throw new $ReferenceError(ASYNC_DISPOSABLE_STACK + ' already disposed');\n  return internalState;\n};\n\nvar $AsyncDisposableStack = function AsyncDisposableStack() {\n  setInternalState(anInstance(this, AsyncDisposableStackPrototype), {\n    type: ASYNC_DISPOSABLE_STACK,\n    state: PENDING,\n    stack: []\n  });\n\n  if (!DESCRIPTORS) this.disposed = false;\n};\n\nvar AsyncDisposableStackPrototype = $AsyncDisposableStack.prototype;\n\ndefineBuiltIns(AsyncDisposableStackPrototype, {\n  disposeAsync: function disposeAsync() {\n    var asyncDisposableStack = this;\n    return new Promise(function (resolve, reject) {\n      var internalState = getAsyncDisposableStackInternalState(asyncDisposableStack);\n      if (internalState.state === DISPOSED) return resolve(undefined);\n      internalState.state = DISPOSED;\n      if (!DESCRIPTORS) asyncDisposableStack.disposed = true;\n      var stack = internalState.stack;\n      var i = stack.length;\n      var thrown = false;\n      var suppressed;\n\n      var handleError = function (result) {\n        if (thrown) {\n          suppressed = new SuppressedError(result, suppressed);\n        } else {\n          thrown = true;\n          suppressed = result;\n        }\n\n        loop();\n      };\n\n      var loop = function () {\n        if (i) {\n          var disposeMethod = stack[--i];\n          stack[i] = null;\n          try {\n            Promise.resolve(disposeMethod()).then(loop, handleError);\n          } catch (error) {\n            handleError(error);\n          }\n        } else {\n          internalState.stack = null;\n          thrown ? reject(suppressed) : resolve(undefined);\n        }\n      };\n\n      loop();\n    });\n  },\n  use: function use(value) {\n    addDisposableResource(getPendingAsyncDisposableStackInternalState(this), value, HINT);\n    return value;\n  },\n  adopt: function adopt(value, onDispose) {\n    var internalState = getPendingAsyncDisposableStackInternalState(this);\n    aCallable(onDispose);\n    addDisposableResource(internalState, undefined, HINT, function () {\n      return onDispose(value);\n    });\n    return value;\n  },\n  defer: function defer(onDispose) {\n    var internalState = getPendingAsyncDisposableStackInternalState(this);\n    aCallable(onDispose);\n    addDisposableResource(internalState, undefined, HINT, onDispose);\n  },\n  move: function move() {\n    var internalState = getPendingAsyncDisposableStackInternalState(this);\n    var newAsyncDisposableStack = new $AsyncDisposableStack();\n    getAsyncDisposableStackInternalState(newAsyncDisposableStack).stack = internalState.stack;\n    internalState.stack = [];\n    internalState.state = DISPOSED;\n    if (!DESCRIPTORS) this.disposed = true;\n    return newAsyncDisposableStack;\n  }\n});\n\nif (DESCRIPTORS) defineBuiltInAccessor(AsyncDisposableStackPrototype, 'disposed', {\n  configurable: true,\n  get: function disposed() {\n    return getAsyncDisposableStackInternalState(this).state === DISPOSED;\n  }\n});\n\ndefineBuiltIn(AsyncDisposableStackPrototype, ASYNC_DISPOSE, AsyncDisposableStackPrototype.disposeAsync, { name: 'disposeAsync' });\ndefineBuiltIn(AsyncDisposableStackPrototype, TO_STRING_TAG, ASYNC_DISPOSABLE_STACK, { nonWritable: true });\n\n// https://github.com/tc39/proposal-explicit-resource-management/issues/256\n// can't be detected synchronously\nvar SYNC_DISPOSE_RETURNING_PROMISE_RESOLUTION_BUG = V8_VERSION && V8_VERSION < 136;\n\n$({ global: true, constructor: true, forced: SYNC_DISPOSE_RETURNING_PROMISE_RESOLUTION_BUG }, {\n  AsyncDisposableStack: $AsyncDisposableStack\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.async-disposable-stack.constructor.js?")},82839:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar globalThis = __webpack_require__(44576);\n\nvar navigator = globalThis.navigator;\nvar userAgent = navigator && navigator.userAgent;\n\nmodule.exports = userAgent ? String(userAgent) : '';\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/environment-user-agent.js?")},83063:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// https://github.com/zloirock/core-js/issues/280\nvar userAgent = __webpack_require__(82839);\n\nmodule.exports = /Version\\/10(?:\\.\\d+){1,2}(?: [\\w./]+)?(?: Mobile\\/\\w+)? Safari\\//.test(userAgent);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/string-pad-webkit-bug.js?")},83142:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar defineWellKnownSymbol = __webpack_require__(70511);\n\n// `Symbol.matchAll` well-known symbol\n// https://tc39.es/ecma262/#sec-symbol.matchall\ndefineWellKnownSymbol('matchAll');\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.symbol.match-all.js?")},83237:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar defineWellKnownSymbol = __webpack_require__(70511);\n\n// `Symbol.replace` well-known symbol\n// https://tc39.es/ecma262/#sec-symbol.replace\ndefineWellKnownSymbol('replace');\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.symbol.replace.js?")},83440:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar aSet = __webpack_require__(97080);\nvar SetHelpers = __webpack_require__(94402);\nvar clone = __webpack_require__(89286);\nvar size = __webpack_require__(25170);\nvar getSetRecord = __webpack_require__(83789);\nvar iterateSet = __webpack_require__(38469);\nvar iterateSimple = __webpack_require__(40507);\n\nvar has = SetHelpers.has;\nvar remove = SetHelpers.remove;\n\n// `Set.prototype.difference` method\n// https://github.com/tc39/proposal-set-methods\nmodule.exports = function difference(other) {\n  var O = aSet(this);\n  var otherRec = getSetRecord(other);\n  var result = clone(O);\n  if (size(O) <= otherRec.size) iterateSet(O, function (e) {\n    if (otherRec.includes(e)) remove(result, e);\n  });\n  else iterateSimple(otherRec.getIterator(), function (e) {\n    if (has(O, e)) remove(result, e);\n  });\n  return result;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/set-difference.js?")},83635:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar fails = __webpack_require__(79039);\nvar globalThis = __webpack_require__(44576);\n\n// babel-minify and Closure Compiler transpiles RegExp('.', 's') -> /./s and it causes SyntaxError\nvar $RegExp = globalThis.RegExp;\n\nmodule.exports = fails(function () {\n  var re = $RegExp('.', 's');\n  return !(re.dotAll && re.test('\\n') && re.flags === 's');\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/regexp-unsupported-dot-all.js?")},83650:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar aSet = __webpack_require__(97080);\nvar SetHelpers = __webpack_require__(94402);\nvar clone = __webpack_require__(89286);\nvar getSetRecord = __webpack_require__(83789);\nvar iterateSimple = __webpack_require__(40507);\n\nvar add = SetHelpers.add;\nvar has = SetHelpers.has;\nvar remove = SetHelpers.remove;\n\n// `Set.prototype.symmetricDifference` method\n// https://github.com/tc39/proposal-set-methods\nmodule.exports = function symmetricDifference(other) {\n  var O = aSet(this);\n  var keysIter = getSetRecord(other).getIterator();\n  var result = clone(O);\n  iterateSimple(keysIter, function (e) {\n    if (has(O, e)) remove(result, e);\n    else add(result, e);\n  });\n  return result;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/set-symmetric-difference.js?")},83789:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar aCallable = __webpack_require__(79306);\nvar anObject = __webpack_require__(28551);\nvar call = __webpack_require__(69565);\nvar toIntegerOrInfinity = __webpack_require__(91291);\nvar getIteratorDirect = __webpack_require__(1767);\n\nvar INVALID_SIZE = 'Invalid size';\nvar $RangeError = RangeError;\nvar $TypeError = TypeError;\nvar max = Math.max;\n\nvar SetRecord = function (set, intSize) {\n  this.set = set;\n  this.size = max(intSize, 0);\n  this.has = aCallable(set.has);\n  this.keys = aCallable(set.keys);\n};\n\nSetRecord.prototype = {\n  getIterator: function () {\n    return getIteratorDirect(anObject(call(this.keys, this.set)));\n  },\n  includes: function (it) {\n    return call(this.has, this.set, it);\n  }\n};\n\n// `GetSetRecord` abstract operation\n// https://tc39.es/proposal-set-methods/#sec-getsetrecord\nmodule.exports = function (obj) {\n  anObject(obj);\n  var numSize = +obj.size;\n  // NOTE: If size is undefined, then numSize will be NaN\n  // eslint-disable-next-line no-self-compare -- NaN check\n  if (numSize !== numSize) throw new $TypeError(INVALID_SIZE);\n  var intSize = toIntegerOrInfinity(numSize);\n  if (intSize < 0) throw new $RangeError(INVALID_SIZE);\n  return new SetRecord(obj, intSize);\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/get-set-record.js?")},83851:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar fails = __webpack_require__(79039);\nvar toIndexedObject = __webpack_require__(25397);\nvar nativeGetOwnPropertyDescriptor = (__webpack_require__(77347).f);\nvar DESCRIPTORS = __webpack_require__(43724);\n\nvar FORCED = !DESCRIPTORS || fails(function () { nativeGetOwnPropertyDescriptor(1); });\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\n$({ target: 'Object', stat: true, forced: FORCED, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptor: function getOwnPropertyDescriptor(it, key) {\n    return nativeGetOwnPropertyDescriptor(toIndexedObject(it), key);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.object.get-own-property-descriptor.js?")},83972:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar isObject = __webpack_require__(20034);\n\nvar $String = String;\nvar $TypeError = TypeError;\n\nmodule.exports = function (argument) {\n  if (argument === undefined || isObject(argument)) return argument;\n  throw new $TypeError($String(argument) + ' is not an object or undefined');\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/an-object-or-undefined.js?")},84185:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar DESCRIPTORS = __webpack_require__(43724);\nvar defineProperty = (__webpack_require__(24913).f);\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\n// eslint-disable-next-line es/no-object-defineproperty -- safe\n$({ target: 'Object', stat: true, forced: Object.defineProperty !== defineProperty, sham: !DESCRIPTORS }, {\n  defineProperty: defineProperty\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.object.define-property.js?")},84208:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(78347);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.object.has-own.js?")},84215:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n/* global Bun, Deno -- detection */\nvar globalThis = __webpack_require__(44576);\nvar userAgent = __webpack_require__(82839);\nvar classof = __webpack_require__(22195);\n\nvar userAgentStartsWith = function (string) {\n  return userAgent.slice(0, string.length) === string;\n};\n\nmodule.exports = (function () {\n  if (userAgentStartsWith('Bun/')) return 'BUN';\n  if (userAgentStartsWith('Cloudflare-Workers')) return 'CLOUDFLARE';\n  if (userAgentStartsWith('Deno/')) return 'DENO';\n  if (userAgentStartsWith('Node.js/')) return 'NODE';\n  if (globalThis.Bun && typeof Bun.version == 'string') return 'BUN';\n  if (globalThis.Deno && typeof Deno.version == 'object') return 'DENO';\n  if (classof(globalThis.process) === 'process') return 'NODE';\n  if (globalThis.window && globalThis.document) return 'BROWSER';\n  return 'REST';\n})();\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/environment.js?")},84270:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar call = __webpack_require__(69565);\nvar isCallable = __webpack_require__(94901);\nvar isObject = __webpack_require__(20034);\n\nvar $TypeError = TypeError;\n\n// `OrdinaryToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-ordinarytoprimitive\nmodule.exports = function (input, pref) {\n  var fn, val;\n  if (pref === 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  if (isCallable(fn = input.valueOf) && !isObject(val = call(fn, input))) return val;\n  if (pref !== 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  throw new $TypeError(\"Can't convert object to primitive value\");\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/ordinary-to-primitive.js?")},84315:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n__webpack_require__(52675);\n__webpack_require__(89463);\n__webpack_require__(66412);\n__webpack_require__(60193);\n__webpack_require__(92168);\n__webpack_require__(2259);\n__webpack_require__(86964);\n__webpack_require__(83142);\n__webpack_require__(83237);\n__webpack_require__(61833);\n__webpack_require__(67947);\n__webpack_require__(31073);\n__webpack_require__(45700);\n__webpack_require__(78125);\n__webpack_require__(20326);\n__webpack_require__(16280);\n__webpack_require__(76918);\n__webpack_require__(30067);\n__webpack_require__(4294);\n__webpack_require__(18107);\n__webpack_require__(28706);\n__webpack_require__(26835);\n__webpack_require__(88431);\n__webpack_require__(33771);\n__webpack_require__(2008);\n__webpack_require__(50113);\n__webpack_require__(48980);\n__webpack_require__(10838);\n__webpack_require__(13451);\n__webpack_require__(46449);\n__webpack_require__(78350);\n__webpack_require__(51629);\n__webpack_require__(23418);\n__webpack_require__(74423);\n__webpack_require__(25276);\n__webpack_require__(64346);\n__webpack_require__(23792);\n__webpack_require__(48598);\n__webpack_require__(8921);\n__webpack_require__(62062);\n__webpack_require__(31051);\n__webpack_require__(44114);\n__webpack_require__(72712);\n__webpack_require__(18863);\n__webpack_require__(94490);\n__webpack_require__(34782);\n__webpack_require__(15086);\n__webpack_require__(26910);\n__webpack_require__(87478);\n__webpack_require__(54554);\n__webpack_require__(9678);\n__webpack_require__(57145);\n__webpack_require__(71658);\n__webpack_require__(93514);\n__webpack_require__(30237);\n__webpack_require__(13609);\n__webpack_require__(11558);\n__webpack_require__(54743);\n__webpack_require__(46761);\n__webpack_require__(11745);\n__webpack_require__(38309);\n__webpack_require__(10255);\n__webpack_require__(3995);\n__webpack_require__(16573);\n__webpack_require__(78100);\n__webpack_require__(77936);\n__webpack_require__(61699);\n__webpack_require__(59089);\n__webpack_require__(91191);\n__webpack_require__(93515);\n__webpack_require__(1688);\n__webpack_require__(60739);\n__webpack_require__(89572);\n__webpack_require__(23288);\n__webpack_require__(36456);\n__webpack_require__(94170);\n__webpack_require__(48957);\n__webpack_require__(62010);\n__webpack_require__(55081);\n__webpack_require__(18111);\n__webpack_require__(29314);\n__webpack_require__(81148);\n__webpack_require__(22489);\n__webpack_require__(20116);\n__webpack_require__(30531);\n__webpack_require__(7588);\n__webpack_require__(49603);\n__webpack_require__(61701);\n__webpack_require__(18237);\n__webpack_require__(13579);\n__webpack_require__(54972);\n__webpack_require__(61806);\n__webpack_require__(33110);\n__webpack_require__(4731);\n__webpack_require__(36033);\n__webpack_require__(47072);\n__webpack_require__(93153);\n__webpack_require__(82326);\n__webpack_require__(36389);\n__webpack_require__(64444);\n__webpack_require__(8085);\n__webpack_require__(77762);\n__webpack_require__(65070);\n__webpack_require__(60605);\n__webpack_require__(4360);\n__webpack_require__(39469);\n__webpack_require__(72152);\n__webpack_require__(75376);\n__webpack_require__(56624);\n__webpack_require__(11367);\n__webpack_require__(5914);\n__webpack_require__(78553);\n__webpack_require__(98690);\n__webpack_require__(60479);\n__webpack_require__(70761);\n__webpack_require__(2892);\n__webpack_require__(45374);\n__webpack_require__(25428);\n__webpack_require__(32637);\n__webpack_require__(40150);\n__webpack_require__(59149);\n__webpack_require__(64601);\n__webpack_require__(44435);\n__webpack_require__(87220);\n__webpack_require__(25843);\n__webpack_require__(62337);\n__webpack_require__(9868);\n__webpack_require__(80630);\n__webpack_require__(69085);\n__webpack_require__(59904);\n__webpack_require__(17427);\n__webpack_require__(67945);\n__webpack_require__(84185);\n__webpack_require__(87607);\n__webpack_require__(5506);\n__webpack_require__(52811);\n__webpack_require__(53921);\n__webpack_require__(83851);\n__webpack_require__(81278);\n__webpack_require__(1480);\n__webpack_require__(40875);\n__webpack_require__(77691);\n__webpack_require__(78347);\n__webpack_require__(29908);\n__webpack_require__(94052);\n__webpack_require__(94003);\n__webpack_require__(221);\n__webpack_require__(79432);\n__webpack_require__(9220);\n__webpack_require__(7904);\n__webpack_require__(93967);\n__webpack_require__(63548);\n__webpack_require__(93941);\n__webpack_require__(10287);\n__webpack_require__(26099);\n__webpack_require__(16034);\n__webpack_require__(78459);\n__webpack_require__(58940);\n__webpack_require__(3362);\n__webpack_require__(96167);\n__webpack_require__(93518);\n__webpack_require__(9391);\n__webpack_require__(31689);\n__webpack_require__(14628);\n__webpack_require__(39796);\n__webpack_require__(60825);\n__webpack_require__(87411);\n__webpack_require__(21211);\n__webpack_require__(40888);\n__webpack_require__(9065);\n__webpack_require__(86565);\n__webpack_require__(32812);\n__webpack_require__(84634);\n__webpack_require__(71137);\n__webpack_require__(30985);\n__webpack_require__(34268);\n__webpack_require__(34873);\n__webpack_require__(15472);\n__webpack_require__(84864);\n__webpack_require__(96069);\n__webpack_require__(57465);\n__webpack_require__(27495);\n__webpack_require__(69479);\n__webpack_require__(87745);\n__webpack_require__(90906);\n__webpack_require__(38781);\n__webpack_require__(31415);\n__webpack_require__(17642);\n__webpack_require__(58004);\n__webpack_require__(33853);\n__webpack_require__(45876);\n__webpack_require__(32475);\n__webpack_require__(15024);\n__webpack_require__(31698);\n__webpack_require__(67357);\n__webpack_require__(23860);\n__webpack_require__(99449);\n__webpack_require__(27337);\n__webpack_require__(21699);\n__webpack_require__(42043);\n__webpack_require__(47764);\n__webpack_require__(71761);\n__webpack_require__(28543);\n__webpack_require__(35701);\n__webpack_require__(68156);\n__webpack_require__(85906);\n__webpack_require__(42781);\n__webpack_require__(25440);\n__webpack_require__(79978);\n__webpack_require__(5746);\n__webpack_require__(90744);\n__webpack_require__(11392);\n__webpack_require__(50375);\n__webpack_require__(67438);\n__webpack_require__(42762);\n__webpack_require__(39202);\n__webpack_require__(43359);\n__webpack_require__(89907);\n__webpack_require__(11898);\n__webpack_require__(35490);\n__webpack_require__(5745);\n__webpack_require__(94298);\n__webpack_require__(60268);\n__webpack_require__(69546);\n__webpack_require__(20781);\n__webpack_require__(50778);\n__webpack_require__(89195);\n__webpack_require__(46276);\n__webpack_require__(48718);\n__webpack_require__(16308);\n__webpack_require__(34594);\n__webpack_require__(29833);\n__webpack_require__(46594);\n__webpack_require__(72107);\n__webpack_require__(95477);\n__webpack_require__(21489);\n__webpack_require__(22134);\n__webpack_require__(3690);\n__webpack_require__(61740);\n__webpack_require__(48140);\n__webpack_require__(81630);\n__webpack_require__(72170);\n__webpack_require__(75044);\n__webpack_require__(69539);\n__webpack_require__(31694);\n__webpack_require__(89955);\n__webpack_require__(21903);\n__webpack_require__(91134);\n__webpack_require__(33206);\n__webpack_require__(48345);\n__webpack_require__(44496);\n__webpack_require__(66651);\n__webpack_require__(12887);\n__webpack_require__(19369);\n__webpack_require__(66812);\n__webpack_require__(8995);\n__webpack_require__(52568);\n__webpack_require__(31575);\n__webpack_require__(36072);\n__webpack_require__(88747);\n__webpack_require__(28845);\n__webpack_require__(29423);\n__webpack_require__(57301);\n__webpack_require__(373);\n__webpack_require__(86614);\n__webpack_require__(41405);\n__webpack_require__(37467);\n__webpack_require__(44732);\n__webpack_require__(33684);\n__webpack_require__(79577);\n__webpack_require__(88267);\n__webpack_require__(73772);\n__webpack_require__(30958);\n__webpack_require__(2945);\n__webpack_require__(42207);\n__webpack_require__(23500);\n__webpack_require__(62953);\n__webpack_require__(55815);\n__webpack_require__(64979);\n__webpack_require__(79739);\n__webpack_require__(59848);\n__webpack_require__(122);\n__webpack_require__(13611);\n__webpack_require__(71678);\n__webpack_require__(76031);\n__webpack_require__(3296);\n__webpack_require__(2222);\n__webpack_require__(45781);\n__webpack_require__(27208);\n__webpack_require__(48408);\n__webpack_require__(14603);\n__webpack_require__(47566);\n__webpack_require__(98721);\n\nmodule.exports = __webpack_require__(19167);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/stable/index.js?")},84373:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar toObject = __webpack_require__(48981);\nvar toAbsoluteIndex = __webpack_require__(35610);\nvar lengthOfArrayLike = __webpack_require__(26198);\n\n// `Array.prototype.fill` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.fill\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = lengthOfArrayLike(O);\n  var argumentsLength = arguments.length;\n  var index = toAbsoluteIndex(argumentsLength > 1 ? arguments[1] : undefined, length);\n  var end = argumentsLength > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/array-fill.js?")},84428:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar wellKnownSymbol = __webpack_require__(78227);\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var called = 0;\n  var iteratorWithReturn = {\n    next: function () {\n      return { done: !!called++ };\n    },\n    'return': function () {\n      SAFE_CLOSING = true;\n    }\n  };\n  iteratorWithReturn[ITERATOR] = function () {\n    return this;\n  };\n  // eslint-disable-next-line es/no-array-from, no-throw-literal -- required for testing\n  Array.from(iteratorWithReturn, function () { throw 2; });\n} catch (error) { /* empty */ }\n\nmodule.exports = function (exec, SKIP_CLOSING) {\n  try {\n    if (!SKIP_CLOSING && !SAFE_CLOSING) return false;\n  } catch (error) { return false; } // workaround of old WebKit + `eval` bug\n  var ITERATION_SUPPORT = false;\n  try {\n    var object = {};\n    object[ITERATOR] = function () {\n      return {\n        next: function () {\n          return { done: ITERATION_SUPPORT = true };\n        }\n      };\n    };\n    exec(object);\n  } catch (error) { /* empty */ }\n  return ITERATION_SUPPORT;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/check-correctness-of-iteration.js?")},84606:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar tryToString = __webpack_require__(16823);\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (O, P) {\n  if (!delete O[P]) throw new $TypeError('Cannot delete property ' + tryToString(P) + ' of ' + tryToString(O));\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/delete-property-or-throw.js?")},84634:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar anObject = __webpack_require__(28551);\nvar $isExtensible = __webpack_require__(34124);\n\n// `Reflect.isExtensible` method\n// https://tc39.es/ecma262/#sec-reflect.isextensible\n$({ target: 'Reflect', stat: true }, {\n  isExtensible: function isExtensible(target) {\n    anObject(target);\n    return $isExtensible(target);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.reflect.is-extensible.js?")},84864:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar DESCRIPTORS = __webpack_require__(43724);\nvar globalThis = __webpack_require__(44576);\nvar uncurryThis = __webpack_require__(79504);\nvar isForced = __webpack_require__(92796);\nvar inheritIfRequired = __webpack_require__(23167);\nvar createNonEnumerableProperty = __webpack_require__(66699);\nvar create = __webpack_require__(2360);\nvar getOwnPropertyNames = (__webpack_require__(38480).f);\nvar isPrototypeOf = __webpack_require__(1625);\nvar isRegExp = __webpack_require__(60788);\nvar toString = __webpack_require__(655);\nvar getRegExpFlags = __webpack_require__(61034);\nvar stickyHelpers = __webpack_require__(58429);\nvar proxyAccessor = __webpack_require__(11056);\nvar defineBuiltIn = __webpack_require__(36840);\nvar fails = __webpack_require__(79039);\nvar hasOwn = __webpack_require__(39297);\nvar enforceInternalState = (__webpack_require__(91181).enforce);\nvar setSpecies = __webpack_require__(87633);\nvar wellKnownSymbol = __webpack_require__(78227);\nvar UNSUPPORTED_DOT_ALL = __webpack_require__(83635);\nvar UNSUPPORTED_NCG = __webpack_require__(18814);\n\nvar MATCH = wellKnownSymbol('match');\nvar NativeRegExp = globalThis.RegExp;\nvar RegExpPrototype = NativeRegExp.prototype;\nvar SyntaxError = globalThis.SyntaxError;\nvar exec = uncurryThis(RegExpPrototype.exec);\nvar charAt = uncurryThis(''.charAt);\nvar replace = uncurryThis(''.replace);\nvar stringIndexOf = uncurryThis(''.indexOf);\nvar stringSlice = uncurryThis(''.slice);\n// TODO: Use only proper RegExpIdentifierName\nvar IS_NCG = /^\\?<[^\\s\\d!#%&*+<=>@^][^\\s!#%&*+<=>@^]*>/;\nvar re1 = /a/g;\nvar re2 = /a/g;\n\n// \"new\" should create a new object, old webkit bug\nvar CORRECT_NEW = new NativeRegExp(re1) !== re1;\n\nvar MISSED_STICKY = stickyHelpers.MISSED_STICKY;\nvar UNSUPPORTED_Y = stickyHelpers.UNSUPPORTED_Y;\n\nvar BASE_FORCED = DESCRIPTORS &&\n  (!CORRECT_NEW || MISSED_STICKY || UNSUPPORTED_DOT_ALL || UNSUPPORTED_NCG || fails(function () {\n    re2[MATCH] = false;\n    // RegExp constructor can alter flags and IsRegExp works correct with @@match\n    // eslint-disable-next-line sonarjs/inconsistent-function-call -- required for testing\n    return NativeRegExp(re1) !== re1 || NativeRegExp(re2) === re2 || String(NativeRegExp(re1, 'i')) !== '/a/i';\n  }));\n\nvar handleDotAll = function (string) {\n  var length = string.length;\n  var index = 0;\n  var result = '';\n  var brackets = false;\n  var chr;\n  for (; index <= length; index++) {\n    chr = charAt(string, index);\n    if (chr === '\\\\') {\n      result += chr + charAt(string, ++index);\n      continue;\n    }\n    if (!brackets && chr === '.') {\n      result += '[\\\\s\\\\S]';\n    } else {\n      if (chr === '[') {\n        brackets = true;\n      } else if (chr === ']') {\n        brackets = false;\n      } result += chr;\n    }\n  } return result;\n};\n\nvar handleNCG = function (string) {\n  var length = string.length;\n  var index = 0;\n  var result = '';\n  var named = [];\n  var names = create(null);\n  var brackets = false;\n  var ncg = false;\n  var groupid = 0;\n  var groupname = '';\n  var chr;\n  for (; index <= length; index++) {\n    chr = charAt(string, index);\n    if (chr === '\\\\') {\n      chr += charAt(string, ++index);\n    } else if (chr === ']') {\n      brackets = false;\n    } else if (!brackets) switch (true) {\n      case chr === '[':\n        brackets = true;\n        break;\n      case chr === '(':\n        result += chr;\n        // ignore non-capturing groups\n        if (stringSlice(string, index + 1, index + 3) === '?:') {\n          continue;\n        }\n        if (exec(IS_NCG, stringSlice(string, index + 1))) {\n          index += 2;\n          ncg = true;\n        }\n        groupid++;\n        continue;\n      case chr === '>' && ncg:\n        if (groupname === '' || hasOwn(names, groupname)) {\n          throw new SyntaxError('Invalid capture group name');\n        }\n        names[groupname] = true;\n        named[named.length] = [groupname, groupid];\n        ncg = false;\n        groupname = '';\n        continue;\n    }\n    if (ncg) groupname += chr;\n    else result += chr;\n  } return [result, named];\n};\n\n// `RegExp` constructor\n// https://tc39.es/ecma262/#sec-regexp-constructor\nif (isForced('RegExp', BASE_FORCED)) {\n  var RegExpWrapper = function RegExp(pattern, flags) {\n    var thisIsRegExp = isPrototypeOf(RegExpPrototype, this);\n    var patternIsRegExp = isRegExp(pattern);\n    var flagsAreUndefined = flags === undefined;\n    var groups = [];\n    var rawPattern = pattern;\n    var rawFlags, dotAll, sticky, handled, result, state;\n\n    if (!thisIsRegExp && patternIsRegExp && flagsAreUndefined && pattern.constructor === RegExpWrapper) {\n      return pattern;\n    }\n\n    if (patternIsRegExp || isPrototypeOf(RegExpPrototype, pattern)) {\n      pattern = pattern.source;\n      if (flagsAreUndefined) flags = getRegExpFlags(rawPattern);\n    }\n\n    pattern = pattern === undefined ? '' : toString(pattern);\n    flags = flags === undefined ? '' : toString(flags);\n    rawPattern = pattern;\n\n    if (UNSUPPORTED_DOT_ALL && 'dotAll' in re1) {\n      dotAll = !!flags && stringIndexOf(flags, 's') > -1;\n      if (dotAll) flags = replace(flags, /s/g, '');\n    }\n\n    rawFlags = flags;\n\n    if (MISSED_STICKY && 'sticky' in re1) {\n      sticky = !!flags && stringIndexOf(flags, 'y') > -1;\n      if (sticky && UNSUPPORTED_Y) flags = replace(flags, /y/g, '');\n    }\n\n    if (UNSUPPORTED_NCG) {\n      handled = handleNCG(pattern);\n      pattern = handled[0];\n      groups = handled[1];\n    }\n\n    result = inheritIfRequired(NativeRegExp(pattern, flags), thisIsRegExp ? this : RegExpPrototype, RegExpWrapper);\n\n    if (dotAll || sticky || groups.length) {\n      state = enforceInternalState(result);\n      if (dotAll) {\n        state.dotAll = true;\n        state.raw = RegExpWrapper(handleDotAll(pattern), rawFlags);\n      }\n      if (sticky) state.sticky = true;\n      if (groups.length) state.groups = groups;\n    }\n\n    if (pattern !== rawPattern) try {\n      // fails in old engines, but we have no alternatives for unsupported regex syntax\n      createNonEnumerableProperty(result, 'source', rawPattern === '' ? '(?:)' : rawPattern);\n    } catch (error) { /* empty */ }\n\n    return result;\n  };\n\n  for (var keys = getOwnPropertyNames(NativeRegExp), index = 0; keys.length > index;) {\n    proxyAccessor(RegExpWrapper, NativeRegExp, keys[index++]);\n  }\n\n  RegExpPrototype.constructor = RegExpWrapper;\n  RegExpWrapper.prototype = RegExpPrototype;\n  defineBuiltIn(globalThis, 'RegExp', RegExpWrapper, { constructor: true });\n}\n\n// https://tc39.es/ecma262/#sec-get-regexp-@@species\nsetSpecies('RegExp');\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.regexp.constructor.js?")},84916:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar getBuiltIn = __webpack_require__(97751);\n\nvar createSetLike = function (size) {\n  return {\n    size: size,\n    has: function () {\n      return false;\n    },\n    keys: function () {\n      return {\n        next: function () {\n          return { done: true };\n        }\n      };\n    }\n  };\n};\n\nvar createSetLikeWithInfinitySize = function (size) {\n  return {\n    size: size,\n    has: function () {\n      return true;\n    },\n    keys: function () {\n      throw new Error('e');\n    }\n  };\n};\n\nmodule.exports = function (name, callback) {\n  var Set = getBuiltIn('Set');\n  try {\n    new Set()[name](createSetLike(0));\n    try {\n      // late spec change, early WebKit ~ Safari 17.0 beta implementation does not pass it\n      // https://github.com/tc39/proposal-set-methods/pull/88\n      new Set()[name](createSetLike(-1));\n      return false;\n    } catch (error2) {\n      if (!callback) return true;\n      // early V8 implementation bug\n      // https://issues.chromium.org/issues/351332634\n      try {\n        new Set()[name](createSetLikeWithInfinitySize(-Infinity));\n        return false;\n      } catch (error) {\n        var set = new Set();\n        set.add(1);\n        set.add(2);\n        return callback(set[name](createSetLikeWithInfinitySize(Infinity)));\n      }\n    }\n  } catch (error) {\n    return false;\n  }\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/set-method-accept-set-like.js?")},85901:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(11558);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.array.with.js?")},85906:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar uncurryThis = __webpack_require__(79504);\nvar toIndexedObject = __webpack_require__(25397);\nvar toObject = __webpack_require__(48981);\nvar toString = __webpack_require__(655);\nvar lengthOfArrayLike = __webpack_require__(26198);\n\nvar push = uncurryThis([].push);\nvar join = uncurryThis([].join);\n\n// `String.raw` method\n// https://tc39.es/ecma262/#sec-string.raw\n$({ target: 'String', stat: true }, {\n  raw: function raw(template) {\n    var rawTemplate = toIndexedObject(toObject(template).raw);\n    var literalSegments = lengthOfArrayLike(rawTemplate);\n    if (!literalSegments) return '';\n    var argumentsLength = arguments.length;\n    var elements = [];\n    var i = 0;\n    while (true) {\n      push(elements, toString(rawTemplate[i++]));\n      if (i === literalSegments) return join(elements, '');\n      if (i < argumentsLength) push(elements, toString(arguments[i]));\n    }\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.string.raw.js?")},86368:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar globalThis = __webpack_require__(44576);\nvar clearImmediate = (__webpack_require__(59225).clear);\n\n// `clearImmediate` method\n// http://w3c.github.io/setImmediate/#si-clearImmediate\n$({ global: true, bind: true, enumerable: true, forced: globalThis.clearImmediate !== clearImmediate }, {\n  clearImmediate: clearImmediate\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/web.clear-immediate.js?")},86565:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar anObject = __webpack_require__(28551);\nvar objectGetPrototypeOf = __webpack_require__(42787);\nvar CORRECT_PROTOTYPE_GETTER = __webpack_require__(12211);\n\n// `Reflect.getPrototypeOf` method\n// https://tc39.es/ecma262/#sec-reflect.getprototypeof\n$({ target: 'Reflect', stat: true, sham: !CORRECT_PROTOTYPE_GETTER }, {\n  getPrototypeOf: function getPrototypeOf(target) {\n    return objectGetPrototypeOf(anObject(target));\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.reflect.get-prototype-of.js?")},86614:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar ArrayBufferViewCore = __webpack_require__(94644);\nvar toLength = __webpack_require__(18014);\nvar toAbsoluteIndex = __webpack_require__(35610);\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar getTypedArrayConstructor = ArrayBufferViewCore.getTypedArrayConstructor;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.subarray` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.subarray\nexportTypedArrayMethod('subarray', function subarray(begin, end) {\n  var O = aTypedArray(this);\n  var length = O.length;\n  var beginIndex = toAbsoluteIndex(begin, length);\n  var C = getTypedArrayConstructor(O);\n  return new C(\n    O.buffer,\n    O.byteOffset + beginIndex * O.BYTES_PER_ELEMENT,\n    toLength((end === undefined ? length : toAbsoluteIndex(end, length)) - beginIndex)\n  );\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.subarray.js?")},86938:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar create = __webpack_require__(2360);\nvar defineBuiltInAccessor = __webpack_require__(62106);\nvar defineBuiltIns = __webpack_require__(56279);\nvar bind = __webpack_require__(76080);\nvar anInstance = __webpack_require__(90679);\nvar isNullOrUndefined = __webpack_require__(64117);\nvar iterate = __webpack_require__(72652);\nvar defineIterator = __webpack_require__(51088);\nvar createIterResultObject = __webpack_require__(62529);\nvar setSpecies = __webpack_require__(87633);\nvar DESCRIPTORS = __webpack_require__(43724);\nvar fastKey = (__webpack_require__(3451).fastKey);\nvar InternalStateModule = __webpack_require__(91181);\n\nvar setInternalState = InternalStateModule.set;\nvar internalStateGetterFor = InternalStateModule.getterFor;\n\nmodule.exports = {\n  getConstructor: function (wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER) {\n    var Constructor = wrapper(function (that, iterable) {\n      anInstance(that, Prototype);\n      setInternalState(that, {\n        type: CONSTRUCTOR_NAME,\n        index: create(null),\n        first: null,\n        last: null,\n        size: 0\n      });\n      if (!DESCRIPTORS) that.size = 0;\n      if (!isNullOrUndefined(iterable)) iterate(iterable, that[ADDER], { that: that, AS_ENTRIES: IS_MAP });\n    });\n\n    var Prototype = Constructor.prototype;\n\n    var getInternalState = internalStateGetterFor(CONSTRUCTOR_NAME);\n\n    var define = function (that, key, value) {\n      var state = getInternalState(that);\n      var entry = getEntry(that, key);\n      var previous, index;\n      // change existing entry\n      if (entry) {\n        entry.value = value;\n      // create new entry\n      } else {\n        state.last = entry = {\n          index: index = fastKey(key, true),\n          key: key,\n          value: value,\n          previous: previous = state.last,\n          next: null,\n          removed: false\n        };\n        if (!state.first) state.first = entry;\n        if (previous) previous.next = entry;\n        if (DESCRIPTORS) state.size++;\n        else that.size++;\n        // add to index\n        if (index !== 'F') state.index[index] = entry;\n      } return that;\n    };\n\n    var getEntry = function (that, key) {\n      var state = getInternalState(that);\n      // fast case\n      var index = fastKey(key);\n      var entry;\n      if (index !== 'F') return state.index[index];\n      // frozen object case\n      for (entry = state.first; entry; entry = entry.next) {\n        if (entry.key === key) return entry;\n      }\n    };\n\n    defineBuiltIns(Prototype, {\n      // `{ Map, Set }.prototype.clear()` methods\n      // https://tc39.es/ecma262/#sec-map.prototype.clear\n      // https://tc39.es/ecma262/#sec-set.prototype.clear\n      clear: function clear() {\n        var that = this;\n        var state = getInternalState(that);\n        var entry = state.first;\n        while (entry) {\n          entry.removed = true;\n          if (entry.previous) entry.previous = entry.previous.next = null;\n          entry = entry.next;\n        }\n        state.first = state.last = null;\n        state.index = create(null);\n        if (DESCRIPTORS) state.size = 0;\n        else that.size = 0;\n      },\n      // `{ Map, Set }.prototype.delete(key)` methods\n      // https://tc39.es/ecma262/#sec-map.prototype.delete\n      // https://tc39.es/ecma262/#sec-set.prototype.delete\n      'delete': function (key) {\n        var that = this;\n        var state = getInternalState(that);\n        var entry = getEntry(that, key);\n        if (entry) {\n          var next = entry.next;\n          var prev = entry.previous;\n          delete state.index[entry.index];\n          entry.removed = true;\n          if (prev) prev.next = next;\n          if (next) next.previous = prev;\n          if (state.first === entry) state.first = next;\n          if (state.last === entry) state.last = prev;\n          if (DESCRIPTORS) state.size--;\n          else that.size--;\n        } return !!entry;\n      },\n      // `{ Map, Set }.prototype.forEach(callbackfn, thisArg = undefined)` methods\n      // https://tc39.es/ecma262/#sec-map.prototype.foreach\n      // https://tc39.es/ecma262/#sec-set.prototype.foreach\n      forEach: function forEach(callbackfn /* , that = undefined */) {\n        var state = getInternalState(this);\n        var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n        var entry;\n        while (entry = entry ? entry.next : state.first) {\n          boundFunction(entry.value, entry.key, this);\n          // revert to the last existing entry\n          while (entry && entry.removed) entry = entry.previous;\n        }\n      },\n      // `{ Map, Set}.prototype.has(key)` methods\n      // https://tc39.es/ecma262/#sec-map.prototype.has\n      // https://tc39.es/ecma262/#sec-set.prototype.has\n      has: function has(key) {\n        return !!getEntry(this, key);\n      }\n    });\n\n    defineBuiltIns(Prototype, IS_MAP ? {\n      // `Map.prototype.get(key)` method\n      // https://tc39.es/ecma262/#sec-map.prototype.get\n      get: function get(key) {\n        var entry = getEntry(this, key);\n        return entry && entry.value;\n      },\n      // `Map.prototype.set(key, value)` method\n      // https://tc39.es/ecma262/#sec-map.prototype.set\n      set: function set(key, value) {\n        return define(this, key === 0 ? 0 : key, value);\n      }\n    } : {\n      // `Set.prototype.add(value)` method\n      // https://tc39.es/ecma262/#sec-set.prototype.add\n      add: function add(value) {\n        return define(this, value = value === 0 ? 0 : value, value);\n      }\n    });\n    if (DESCRIPTORS) defineBuiltInAccessor(Prototype, 'size', {\n      configurable: true,\n      get: function () {\n        return getInternalState(this).size;\n      }\n    });\n    return Constructor;\n  },\n  setStrong: function (Constructor, CONSTRUCTOR_NAME, IS_MAP) {\n    var ITERATOR_NAME = CONSTRUCTOR_NAME + ' Iterator';\n    var getInternalCollectionState = internalStateGetterFor(CONSTRUCTOR_NAME);\n    var getInternalIteratorState = internalStateGetterFor(ITERATOR_NAME);\n    // `{ Map, Set }.prototype.{ keys, values, entries, @@iterator }()` methods\n    // https://tc39.es/ecma262/#sec-map.prototype.entries\n    // https://tc39.es/ecma262/#sec-map.prototype.keys\n    // https://tc39.es/ecma262/#sec-map.prototype.values\n    // https://tc39.es/ecma262/#sec-map.prototype-@@iterator\n    // https://tc39.es/ecma262/#sec-set.prototype.entries\n    // https://tc39.es/ecma262/#sec-set.prototype.keys\n    // https://tc39.es/ecma262/#sec-set.prototype.values\n    // https://tc39.es/ecma262/#sec-set.prototype-@@iterator\n    defineIterator(Constructor, CONSTRUCTOR_NAME, function (iterated, kind) {\n      setInternalState(this, {\n        type: ITERATOR_NAME,\n        target: iterated,\n        state: getInternalCollectionState(iterated),\n        kind: kind,\n        last: null\n      });\n    }, function () {\n      var state = getInternalIteratorState(this);\n      var kind = state.kind;\n      var entry = state.last;\n      // revert to the last existing entry\n      while (entry && entry.removed) entry = entry.previous;\n      // get next entry\n      if (!state.target || !(state.last = entry = entry ? entry.next : state.state.first)) {\n        // or finish the iteration\n        state.target = null;\n        return createIterResultObject(undefined, true);\n      }\n      // return step by kind\n      if (kind === 'keys') return createIterResultObject(entry.key, false);\n      if (kind === 'values') return createIterResultObject(entry.value, false);\n      return createIterResultObject([entry.key, entry.value], false);\n    }, IS_MAP ? 'entries' : 'values', !IS_MAP, true);\n\n    // `{ Map, Set }.prototype[@@species]` accessors\n    // https://tc39.es/ecma262/#sec-get-map-@@species\n    // https://tc39.es/ecma262/#sec-get-set-@@species\n    setSpecies(CONSTRUCTOR_NAME);\n  }\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/collection-strong.js?")},86964:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar defineWellKnownSymbol = __webpack_require__(70511);\n\n// `Symbol.match` well-known symbol\n// https://tc39.es/ecma262/#sec-symbol.match\ndefineWellKnownSymbol('match');\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.symbol.match.js?")},86994:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar $toArray = (__webpack_require__(36639).toArray);\n\n// `AsyncIterator.prototype.toArray` method\n// https://github.com/tc39/proposal-async-iterator-helpers\n$({ target: 'AsyncIterator', proto: true, real: true }, {\n  toArray: function toArray() {\n    return $toArray(this, undefined, []);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.async-iterator.to-array.js?")},87042:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// https://github.com/tc39/proposal-promise-try\n__webpack_require__(47628);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/proposals/promise-try.js?")},87220:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar parseFloat = __webpack_require__(33904);\n\n// `Number.parseFloat` method\n// https://tc39.es/ecma262/#sec-number.parseFloat\n// eslint-disable-next-line es/no-number-parsefloat -- required for testing\n$({ target: 'Number', stat: true, forced: Number.parseFloat !== parseFloat }, {\n  parseFloat: parseFloat\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.number.parse-float.js?")},87312:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";eval("\n\n__webpack_require__(84185);\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.TaskType = exports.PageMode = exports.FileType = void 0;\n/**\n * @enum {string}\n */\nvar PageMode = exports.PageMode = {\n  SINGLE: 'single',\n  DUAL: 'dual',\n  FIRST_DUAL: 'firstdual',\n  SCROLL: 'scroll'\n};\n\n/**\n * @enum {string}\n */\nvar FileType = exports.FileType = {\n  EPUB: 'epub',\n  PDF: 'pdf',\n  COMIC: 'comic'\n};\n\n/**\n * @enum {string}\n */\nvar TaskType = exports.TaskType = {\n  INIT: 'i',\n  LOADING: 'l',\n  COMPLETE: 'c'\n};\n\n//# sourceURL=webpack://ViewerJS/./src/pdf/types/viewerType.js?")},87411:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar DESCRIPTORS = __webpack_require__(43724);\nvar anObject = __webpack_require__(28551);\nvar toPropertyKey = __webpack_require__(56969);\nvar definePropertyModule = __webpack_require__(24913);\nvar fails = __webpack_require__(79039);\n\n// MS Edge has broken Reflect.defineProperty - throwing instead of returning false\nvar ERROR_INSTEAD_OF_FALSE = fails(function () {\n  // eslint-disable-next-line es/no-reflect -- required for testing\n  Reflect.defineProperty(definePropertyModule.f({}, 1, { value: 1 }), 1, { value: 2 });\n});\n\n// `Reflect.defineProperty` method\n// https://tc39.es/ecma262/#sec-reflect.defineproperty\n$({ target: 'Reflect', stat: true, forced: ERROR_INSTEAD_OF_FALSE, sham: !DESCRIPTORS }, {\n  defineProperty: function defineProperty(target, propertyKey, attributes) {\n    anObject(target);\n    var key = toPropertyKey(propertyKey);\n    anObject(attributes);\n    try {\n      definePropertyModule.f(target, key, attributes);\n      return true;\n    } catch (error) {\n      return false;\n    }\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.reflect.define-property.js?")},87433:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar isArray = __webpack_require__(34376);\nvar isConstructor = __webpack_require__(33517);\nvar isObject = __webpack_require__(20034);\nvar wellKnownSymbol = __webpack_require__(78227);\n\nvar SPECIES = wellKnownSymbol('species');\nvar $Array = Array;\n\n// a part of `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray) {\n  var C;\n  if (isArray(originalArray)) {\n    C = originalArray.constructor;\n    // cross-realm fallback\n    if (isConstructor(C) && (C === $Array || isArray(C.prototype))) C = undefined;\n    else if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? $Array : C;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/array-species-constructor.js?")},87478:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar setSpecies = __webpack_require__(87633);\n\n// `Array[@@species]` getter\n// https://tc39.es/ecma262/#sec-get-array-@@species\nsetSpecies('Array');\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array.species.js?")},87607:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar DESCRIPTORS = __webpack_require__(43724);\nvar FORCED = __webpack_require__(42551);\nvar aCallable = __webpack_require__(79306);\nvar toObject = __webpack_require__(48981);\nvar definePropertyModule = __webpack_require__(24913);\n\n// `Object.prototype.__defineSetter__` method\n// https://tc39.es/ecma262/#sec-object.prototype.__defineSetter__\nif (DESCRIPTORS) {\n  $({ target: 'Object', proto: true, forced: FORCED }, {\n    __defineSetter__: function __defineSetter__(P, setter) {\n      definePropertyModule.f(toObject(this), P, { set: aCallable(setter), enumerable: true, configurable: true });\n    }\n  });\n}\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.object.define-setter.js?")},87633:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar getBuiltIn = __webpack_require__(97751);\nvar defineBuiltInAccessor = __webpack_require__(62106);\nvar wellKnownSymbol = __webpack_require__(78227);\nvar DESCRIPTORS = __webpack_require__(43724);\n\nvar SPECIES = wellKnownSymbol('species');\n\nmodule.exports = function (CONSTRUCTOR_NAME) {\n  var Constructor = getBuiltIn(CONSTRUCTOR_NAME);\n\n  if (DESCRIPTORS && Constructor && !Constructor[SPECIES]) {\n    defineBuiltInAccessor(Constructor, SPECIES, {\n      configurable: true,\n      get: function () { return this; }\n    });\n  }\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/set-species.js?")},87745:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar DESCRIPTORS = __webpack_require__(43724);\nvar MISSED_STICKY = (__webpack_require__(58429).MISSED_STICKY);\nvar classof = __webpack_require__(22195);\nvar defineBuiltInAccessor = __webpack_require__(62106);\nvar getInternalState = (__webpack_require__(91181).get);\n\nvar RegExpPrototype = RegExp.prototype;\nvar $TypeError = TypeError;\n\n// `RegExp.prototype.sticky` getter\n// https://tc39.es/ecma262/#sec-get-regexp.prototype.sticky\nif (DESCRIPTORS && MISSED_STICKY) {\n  defineBuiltInAccessor(RegExpPrototype, 'sticky', {\n    configurable: true,\n    get: function sticky() {\n      if (this === RegExpPrototype) return;\n      // We can't use InternalStateModule.getterFor because\n      // we don't add metadata for regexps created by a literal.\n      if (classof(this) === 'RegExp') {\n        return !!getInternalState(this).sticky;\n      }\n      throw new $TypeError('Incompatible receiver, RegExp required');\n    }\n  });\n}\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.regexp.sticky.js?")},88177:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\nvar $ = __webpack_require__(46518);\nvar arrayMethodIsStrict = __webpack_require__(34598);\nvar addToUnscopables = __webpack_require__(6469);\nvar $groupToMap = __webpack_require__(2952);\nvar IS_PURE = __webpack_require__(96395);\n\n// `Array.prototype.groupByToMap` method\n// https://github.com/tc39/proposal-array-grouping\n// https://bugs.webkit.org/show_bug.cgi?id=236541\n$({ target: 'Array', proto: true, name: 'groupToMap', forced: IS_PURE || !arrayMethodIsStrict('groupByToMap') }, {\n  groupByToMap: $groupToMap\n});\n\naddToUnscopables('groupByToMap');\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.array.group-by-to-map.js?")},88244:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";eval("\n\n__webpack_require__(52675);\n__webpack_require__(89463);\n__webpack_require__(2259);\n__webpack_require__(23418);\n__webpack_require__(64346);\n__webpack_require__(34782);\n__webpack_require__(23288);\n__webpack_require__(62010);\n__webpack_require__(38781);\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.TextLayer = void 0;\n__webpack_require__(45700);\n__webpack_require__(28706);\n__webpack_require__(74423);\n__webpack_require__(23792);\n__webpack_require__(89572);\n__webpack_require__(36033);\n__webpack_require__(39469);\n__webpack_require__(2892);\n__webpack_require__(9868);\n__webpack_require__(69085);\n__webpack_require__(59904);\n__webpack_require__(84185);\n__webpack_require__(79432);\n__webpack_require__(26099);\n__webpack_require__(3362);\n__webpack_require__(27495);\n__webpack_require__(31415);\n__webpack_require__(21699);\n__webpack_require__(47764);\n__webpack_require__(73772);\n__webpack_require__(30958);\n__webpack_require__(62480);\n__webpack_require__(62953);\nvar _ui = __webpack_require__(32604);\nvar _TextLayer;\nfunction _createForOfIteratorHelper(r, e) { var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t[\"return\"] || t[\"return\"](); } finally { if (u) throw o; } } }; }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _classPrivateMethodInitSpec(e, a) { _checkPrivateRedeclaration(e, a), a.add(e); }\nfunction _classPrivateFieldInitSpec(e, t, a) { _checkPrivateRedeclaration(e, t), t.set(e, a); }\nfunction _checkPrivateRedeclaration(e, t) { if (t.has(e)) throw new TypeError(\"Cannot initialize the same private elements twice on an object\"); }\nfunction _classPrivateFieldGet(s, a) { return s.get(_assertClassBrand(s, a)); }\nfunction _classPrivateFieldSet(s, a, r) { return s.set(_assertClassBrand(s, a), r), r; }\nfunction _assertClassBrand(e, t, n) { if (\"function\" == typeof e ? e === t : e.has(t)) return arguments.length < 3 ? t : n; throw new TypeError(\"Private element is not present on this object\"); }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar FeatureTest = /*#__PURE__*/function () {\n  function FeatureTest() {\n    _classCallCheck(this, FeatureTest);\n  }\n  return _createClass(FeatureTest, null, [{\n    key: \"isLittleEndian\",\n    get: function get() {\n      return shadow(this, 'isLittleEndian', isLittleEndian());\n    }\n  }, {\n    key: \"isEvalSupported\",\n    get: function get() {\n      return shadow(this, 'isEvalSupported', isEvalSupported());\n    }\n  }, {\n    key: \"isOffscreenCanvasSupported\",\n    get: function get() {\n      return shadow(this, 'isOffscreenCanvasSupported', typeof OffscreenCanvas !== 'undefined');\n    }\n  }, {\n    key: \"isImageDecoderSupported\",\n    get: function get() {\n      return shadow(this, 'isImageDecoderSupported', typeof ImageDecoder !== 'undefined');\n    }\n  }, {\n    key: \"platform\",\n    get: function get() {\n      var _navigator, _navigator2;\n      if (typeof PDFJSDev !== 'undefined' && PDFJSDev.test('MOZCENTRAL') || typeof navigator !== 'undefined' && typeof ((_navigator = navigator) === null || _navigator === void 0 ? void 0 : _navigator.platform) === 'string' && typeof ((_navigator2 = navigator) === null || _navigator2 === void 0 ? void 0 : _navigator2.userAgent) === 'string') {\n        var _navigator3 = navigator,\n          platform = _navigator3.platform,\n          userAgent = _navigator3.userAgent;\n        return shadow(this, 'platform', {\n          isAndroid: userAgent.includes('Android'),\n          isLinux: platform.includes('Linux'),\n          isMac: platform.includes('Mac'),\n          isWindows: platform.includes('Win'),\n          isFirefox: typeof PDFJSDev !== 'undefined' && PDFJSDev.test('MOZCENTRAL') || userAgent.includes('Firefox')\n        });\n      }\n      return shadow(this, 'platform', {\n        isAndroid: false,\n        isLinux: false,\n        isMac: false,\n        isWindows: false,\n        isFirefox: false\n      });\n    }\n  }, {\n    key: \"isCSSRoundSupported\",\n    get: function get() {\n      var _globalThis$CSS, _globalThis$CSS$suppo;\n      return shadow(this, 'isCSSRoundSupported', (_globalThis$CSS = globalThis.CSS) === null || _globalThis$CSS === void 0 || (_globalThis$CSS$suppo = _globalThis$CSS.supports) === null || _globalThis$CSS$suppo === void 0 ? void 0 : _globalThis$CSS$suppo.call(_globalThis$CSS, 'width: round(1.5px, 1px)'));\n    }\n  }]);\n}();\nfunction transform(m1, m2) {\n  return [m1[0] * m2[0] + m1[2] * m2[1], m1[1] * m2[0] + m1[3] * m2[1], m1[0] * m2[2] + m1[2] * m2[3], m1[1] * m2[2] + m1[3] * m2[3], m1[0] * m2[4] + m1[2] * m2[5] + m1[4], m1[1] * m2[4] + m1[3] * m2[5] + m1[5]];\n}\nfunction shadow(obj, prop, value) {\n  var nonSerializable = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  Object.defineProperty(obj, prop, {\n    value: value,\n    enumerable: !nonSerializable,\n    configurable: true,\n    writable: false\n  });\n  return value;\n}\n\n/**\n * @param {HTMLDivElement} div\n * @param {PageViewport} viewport\n * @param {boolean} mustFlip\n * @param {boolean} mustRotate\n */\nfunction setLayerDimensions(div, viewport) {\n  var mustFlip = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var mustRotate = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n  // if (viewport instanceof PageViewport) {\n  var _viewport$rawDims = viewport.rawDims,\n    pageWidth = _viewport$rawDims.pageWidth,\n    pageHeight = _viewport$rawDims.pageHeight;\n  var style = div.style;\n  var useRound = FeatureTest.isCSSRoundSupported;\n  var w = \"var(--total-scale-factor) * \".concat(pageWidth, \"px\"),\n    h = \"var(--total-scale-factor) * \".concat(pageHeight, \"px\");\n  var widthStr = useRound ? \"round(down, \".concat(w, \", var(--scale-round-x))\") : \"calc(\".concat(w, \")\"),\n    heightStr = useRound ? \"round(down, \".concat(h, \", var(--scale-round-y))\") : \"calc(\".concat(h, \")\");\n  if (!mustFlip || viewport.rotation % 180 === 0) {\n    style.width = widthStr;\n    style.height = heightStr;\n  } else {\n    style.width = heightStr;\n    style.height = widthStr;\n  }\n  // }\n\n  if (mustRotate) {\n    div.setAttribute('data-main-rotation', viewport.rotation);\n  }\n}\nvar MAX_TEXT_DIVS_TO_RENDER = 100000;\nvar DEFAULT_FONT_SIZE = 30;\nvar _capability = /*#__PURE__*/new WeakMap();\nvar _container = /*#__PURE__*/new WeakMap();\nvar _disableProcessItems = /*#__PURE__*/new WeakMap();\nvar _fontInspectorEnabled = /*#__PURE__*/new WeakMap();\nvar _lang = /*#__PURE__*/new WeakMap();\nvar _layoutTextParams = /*#__PURE__*/new WeakMap();\nvar _pageHeight = /*#__PURE__*/new WeakMap();\nvar _pageWidth = /*#__PURE__*/new WeakMap();\nvar _canvasWidth = /*#__PURE__*/new WeakMap();\nvar _canvasHeight = /*#__PURE__*/new WeakMap();\nvar _reader = /*#__PURE__*/new WeakMap();\nvar _rootContainer = /*#__PURE__*/new WeakMap();\nvar _rotation = /*#__PURE__*/new WeakMap();\nvar _scale = /*#__PURE__*/new WeakMap();\nvar _styleCache = /*#__PURE__*/new WeakMap();\nvar _textContentItemsStr = /*#__PURE__*/new WeakMap();\nvar _textContentSource = /*#__PURE__*/new WeakMap();\nvar _textDivs = /*#__PURE__*/new WeakMap();\nvar _textDivProperties = /*#__PURE__*/new WeakMap();\nvar _transform = /*#__PURE__*/new WeakMap();\nvar _rawDims = /*#__PURE__*/new WeakMap();\nvar _viewBox = /*#__PURE__*/new WeakMap();\nvar _TextLayer_brand = /*#__PURE__*/new WeakSet();\nvar TextLayer = exports.TextLayer = /*#__PURE__*/function () {\n  /**\n   * @param {TextLayerParameters} options\n   */\n  function TextLayer(_ref) {\n    var _globalThis$FontInspe,\n      _this = this;\n    var textContentSource = _ref.textContentSource,\n      container = _ref.container,\n      viewport = _ref.viewport,\n      userScale = _ref.userScale,\n      canvasStyleWidth = _ref.canvasStyleWidth,\n      canvasStyleHeight = _ref.canvasStyleHeight;\n    _classCallCheck(this, TextLayer);\n    _classPrivateMethodInitSpec(this, _TextLayer_brand);\n    _classPrivateFieldInitSpec(this, _capability, Promise.withResolvers());\n    _classPrivateFieldInitSpec(this, _container, null);\n    _classPrivateFieldInitSpec(this, _disableProcessItems, false);\n    _classPrivateFieldInitSpec(this, _fontInspectorEnabled, !!((_globalThis$FontInspe = globalThis.FontInspector) !== null && _globalThis$FontInspe !== void 0 && _globalThis$FontInspe.enabled));\n    _classPrivateFieldInitSpec(this, _lang, null);\n    _classPrivateFieldInitSpec(this, _layoutTextParams, null);\n    _classPrivateFieldInitSpec(this, _pageHeight, 0);\n    _classPrivateFieldInitSpec(this, _pageWidth, 0);\n    _classPrivateFieldInitSpec(this, _canvasWidth, 0);\n    _classPrivateFieldInitSpec(this, _canvasHeight, 0);\n    _classPrivateFieldInitSpec(this, _reader, null);\n    _classPrivateFieldInitSpec(this, _rootContainer, null);\n    _classPrivateFieldInitSpec(this, _rotation, 0);\n    _classPrivateFieldInitSpec(this, _scale, 0);\n    _classPrivateFieldInitSpec(this, _styleCache, Object.create(null));\n    _classPrivateFieldInitSpec(this, _textContentItemsStr, []);\n    _classPrivateFieldInitSpec(this, _textContentSource, null);\n    _classPrivateFieldInitSpec(this, _textDivs, []);\n    _classPrivateFieldInitSpec(this, _textDivProperties, new WeakMap());\n    _classPrivateFieldInitSpec(this, _transform, null);\n    _classPrivateFieldInitSpec(this, _rawDims, null);\n    _classPrivateFieldInitSpec(this, _viewBox, null);\n    _defineProperty(this, \"getRect\", function (textDiv) {\n      var _classPrivateFieldGet2 = _classPrivateFieldGet(_textDivProperties, _this).get(textDiv),\n        canvasWidth = _classPrivateFieldGet2.canvasWidth,\n        hasText = _classPrivateFieldGet2.hasText,\n        hasEOL = _classPrivateFieldGet2.hasEOL,\n        fontSize = _classPrivateFieldGet2.fontSize,\n        geomTransform = _classPrivateFieldGet2.geomTransform,\n        width = _classPrivateFieldGet2.width,\n        height = _classPrivateFieldGet2.height,\n        fontName = _classPrivateFieldGet2.fontName;\n      var _classPrivateFieldGet3 = _classPrivateFieldGet(_rawDims, _this),\n        pageWidth = _classPrivateFieldGet3.pageWidth,\n        pageHeight = _classPrivateFieldGet3.pageHeight,\n        pageX = _classPrivateFieldGet3.pageX,\n        pageY = _classPrivateFieldGet3.pageY;\n      var scaleX = _classPrivateFieldGet(_pageWidth, _this) / pageWidth;\n      var scaleY = _classPrivateFieldGet(_pageHeight, _this) / pageHeight;\n      var scale = Math.max(scaleX, scaleY);\n      var tx = transform(_classPrivateFieldGet(_transform, _this), geomTransform);\n      var angle = 0;\n      var fontAscent = 0;\n      if (_classPrivateFieldGet(_styleCache, _this) && Object.keys(_classPrivateFieldGet(_styleCache, _this)).length > 0) {\n        var style = _classPrivateFieldGet(_styleCache, _this)[fontName];\n        angle = Math.atan2(tx[1], tx[0]);\n        if (style.vertical) {\n          angle += Math.PI / 2;\n        }\n        var fontFamily = _classPrivateFieldGet(_fontInspectorEnabled, _this) && style.fontSubstitution || style.fontFamily;\n        var fontHeight2 = Math.hypot(tx[2], tx[3]);\n        fontAscent = fontHeight2 * _getAscent.call(TextLayer, fontFamily, style, _classPrivateFieldGet(_lang, _this));\n        var left, top;\n        if (angle === 0) {\n          // left = (tx[4] - pageX) * scale;\n          // top = (tx[5] - pageY - fontAscent) * scale;\n          //text Layer가 밀리는 현상 왜 지워야 되는지 모르겟다.\n          left = tx[4] * scale;\n          top = (tx[5] - fontAscent) * scale;\n        } else {\n          left = (tx[4] - pageX + fontAscent * Math.sin(angle)) * scale;\n          top = (tx[5] - pageY - fontAscent * Math.cos(angle)) * scale;\n        }\n        var width2 = width * scale;\n        var height2 = height * scale;\n        var fontHeight = Math.hypot(tx[2], tx[3]);\n        var fontSizee = _minFontSize._ * fontHeight;\n        return {\n          left: left.toFixed(2),\n          top: top.toFixed(2),\n          width: width2.toFixed(2),\n          height: height2.toFixed(2),\n          fontHeight: fontSizee.toFixed(2) * scale,\n          angle: angle * (180 / Math.PI),\n          scale: scale\n        };\n      }\n      return null;\n    });\n    if (textContentSource instanceof ReadableStream) {\n      _classPrivateFieldSet(_textContentSource, this, textContentSource);\n    } else if (_typeof(textContentSource) === 'object') {\n      _classPrivateFieldSet(_textContentSource, this, new ReadableStream({\n        start: function start(controller) {\n          controller.enqueue(textContentSource);\n          controller.close();\n        }\n      }));\n    } else {\n      throw new Error('No \"textContentSource\" parameter specified.');\n    }\n    _classPrivateFieldSet(_container, this, _classPrivateFieldSet(_rootContainer, this, container));\n    _classPrivateFieldSet(_scale, this, viewport.scale * userScale);\n    _classPrivateFieldSet(_rawDims, this, viewport.rawDims);\n    _classPrivateFieldSet(_viewBox, this, viewport.viewBox);\n    _classPrivateFieldSet(_rotation, this, viewport.rotation);\n    _classPrivateFieldSet(_layoutTextParams, this, {\n      div: null,\n      properties: null,\n      ctx: null\n    });\n    var _viewport$rawDims2 = viewport.rawDims,\n      _pageWidth2 = _viewport$rawDims2.pageWidth,\n      _pageHeight2 = _viewport$rawDims2.pageHeight,\n      _pageX = _viewport$rawDims2.pageX,\n      _pageY = _viewport$rawDims2.pageY;\n    // console.log('viewport.rawDims', viewport.rawDims);\n    _classPrivateFieldSet(_transform, this, [1, 0, 0, -1, -_pageX, _pageY + _pageHeight2]);\n    _classPrivateFieldSet(_pageWidth, this, canvasStyleWidth);\n    _classPrivateFieldSet(_pageHeight, this, canvasStyleHeight);\n    _classPrivateFieldSet(_canvasWidth, this, Math.floor(viewport.width));\n    _classPrivateFieldSet(_canvasHeight, this, Math.floor(viewport.height));\n    _ensureMinFontSizeComputed.call(TextLayer);\n  }\n  return _createClass(TextLayer, [{\n    key: \"render\",\n    value:\n    /**\n     * Render the textLayer.\n     * @returns {Promise}\n     */\n    function render() {\n      var _this2 = this;\n      var _pump = function pump() {\n        _classPrivateFieldGet(_reader, _this2).read().then(function (_ref2) {\n          var _classPrivateFieldGet4;\n          var value = _ref2.value,\n            done = _ref2.done;\n          if (done) {\n            _classPrivateFieldGet(_capability, _this2).resolve();\n            return;\n          }\n          (_classPrivateFieldGet4 = _classPrivateFieldGet(_lang, _this2)) !== null && _classPrivateFieldGet4 !== void 0 ? _classPrivateFieldGet4 : _classPrivateFieldSet(_lang, _this2, value.lang);\n          Object.assign(_classPrivateFieldGet(_styleCache, _this2), value.styles);\n          _assertClassBrand(_TextLayer_brand, _this2, _processItems).call(_this2, value.items);\n          _pump();\n        }, _classPrivateFieldGet(_capability, _this2).reject);\n      };\n      _classPrivateFieldSet(_reader, this, _classPrivateFieldGet(_textContentSource, this).getReader());\n      _pendingTextLayers._.add(this);\n      _pump();\n      return _classPrivateFieldGet(_capability, this).promise;\n    }\n\n    /**\n     * Update a previously rendered textLayer, if necessary.\n     * @param {TextLayerUpdateParameters} options\n     * @returns {undefined}\n     */\n  }, {\n    key: \"update\",\n    value: function update(_ref3) {\n      var viewport = _ref3.viewport,\n        _ref3$onBefore = _ref3.onBefore,\n        onBefore = _ref3$onBefore === void 0 ? null : _ref3$onBefore;\n      var scale = viewport.scale;\n      var rotation = viewport.rotation;\n      if (rotation !== _classPrivateFieldGet(_rotation, this)) {\n        onBefore === null || onBefore === void 0 || onBefore();\n        _classPrivateFieldSet(_rotation, this, rotation);\n        setLayerDimensions(_classPrivateFieldGet(_rootContainer, this), {\n          rotation: rotation\n        });\n      }\n      if (scale !== _classPrivateFieldGet(_scale, this)) {\n        onBefore === null || onBefore === void 0 || onBefore();\n        _classPrivateFieldSet(_scale, this, scale);\n        var params = {\n          div: null,\n          properties: null,\n          ctx: _getCtx.call(TextLayer, _classPrivateFieldGet(_lang, this))\n        };\n        var _iterator = _createForOfIteratorHelper(_classPrivateFieldGet(_textDivs, this)),\n          _step;\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var div = _step.value;\n            params.properties = _classPrivateFieldGet(_textDivProperties, this).get(div);\n            params.div = div;\n            _assertClassBrand(_TextLayer_brand, this, _layout).call(this, params);\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      }\n    }\n\n    /**\n     * Cancel rendering of the textLayer.\n     * @returns {undefined}\n     */\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      var _classPrivateFieldGet5;\n      var abortEx = new AbortException('TextLayer task cancelled.');\n      (_classPrivateFieldGet5 = _classPrivateFieldGet(_reader, this)) === null || _classPrivateFieldGet5 === void 0 || _classPrivateFieldGet5.cancel(abortEx)[\"catch\"](function () {\n        // Avoid \"Uncaught promise\" messages in the console.\n      });\n      _classPrivateFieldSet(_reader, this, null);\n      _classPrivateFieldGet(_capability, this).reject(abortEx);\n    }\n\n    /**\n     * @type {Array<HTMLElement>} HTML elements that correspond to the text items\n     *   of the textContent input.\n     *   This is output and will initially be set to an empty array.\n     */\n  }, {\n    key: \"textDivs\",\n    get: function get() {\n      return _classPrivateFieldGet(_textDivs, this);\n    }\n\n    /**\n     * @type {Array<string>} Strings that correspond to the `str` property of\n     *   the text items of the textContent input.\n     *   This is output and will initially be set to an empty array\n     */\n  }, {\n    key: \"textContentItemsStr\",\n    get: function get() {\n      return _classPrivateFieldGet(_textContentItemsStr, this);\n    }\n  }, {\n    key: \"update2\",\n    value: function update2(_ref4) {\n      var container = _ref4.container,\n        canvasStyleWidth = _ref4.canvasStyleWidth,\n        canvasStyleHeight = _ref4.canvasStyleHeight;\n      _classPrivateFieldSet(_pageWidth, this, canvasStyleWidth);\n      _classPrivateFieldSet(_pageHeight, this, canvasStyleHeight);\n      var params = {\n        div: null,\n        properties: null,\n        ctx: _getCtx.call(TextLayer, _classPrivateFieldGet(_lang, this))\n      };\n      var fragment = document.createDocumentFragment();\n      var _iterator2 = _createForOfIteratorHelper(_classPrivateFieldGet(_textDivs, this)),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var textDiv = _step2.value;\n          fragment.appendChild(textDiv);\n          var _ref5 = this.getRect(textDiv) || {},\n            left = _ref5.left,\n            top = _ref5.top,\n            width = _ref5.width,\n            height = _ref5.height,\n            fontHeight = _ref5.fontHeight,\n            scale = _ref5.scale;\n          params.div = textDiv;\n          params.properties = _classPrivateFieldGet(_textDivProperties, this).get(textDiv);\n          params.scale = scale;\n          textDiv.style.left = left + 'px';\n          textDiv.style.top = top + 'px';\n          textDiv.style.fontSize = fontHeight + 'px';\n          _assertClassBrand(_TextLayer_brand, this, _layout).call(this, params);\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n      container.appendChild(fragment);\n      fragment = null;\n    }\n  }], [{\n    key: \"fontFamilyMap\",\n    get: function get() {\n      var _FeatureTest$platform = FeatureTest.platform,\n        isWindows = _FeatureTest$platform.isWindows,\n        isFirefox = _FeatureTest$platform.isFirefox;\n      return shadow(this, 'fontFamilyMap', new Map([['sans-serif', \"\".concat(isWindows && isFirefox ? 'Calibri, ' : '', \"sans-serif\")], ['monospace', \"\".concat(isWindows && isFirefox ? 'Lucida Console, ' : '', \"monospace\")]]));\n    }\n  }, {\n    key: \"cleanup\",\n    value:\n    /**\n     * Clean-up global textLayer data.\n     * @returns {undefined}\n     */\n    function cleanup() {\n      if (_assertClassBrand(TextLayer, this, _pendingTextLayers)._.size > 0) {\n        return;\n      }\n      _assertClassBrand(TextLayer, this, _ascentCache)._.clear();\n      var _iterator3 = _createForOfIteratorHelper(_assertClassBrand(TextLayer, this, _canvasContexts)._.values()),\n        _step3;\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var canvas = _step3.value.canvas;\n          canvas.remove();\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n      _assertClassBrand(TextLayer, this, _canvasContexts)._.clear();\n    }\n  }]);\n}();\n_TextLayer = TextLayer;\nfunction _processItems(items) {\n  var _classPrivateFieldGet6, _classPrivateFieldGet7;\n  if (_classPrivateFieldGet(_disableProcessItems, this)) {\n    return;\n  }\n  (_classPrivateFieldGet7 = (_classPrivateFieldGet6 = _classPrivateFieldGet(_layoutTextParams, this)).ctx) !== null && _classPrivateFieldGet7 !== void 0 ? _classPrivateFieldGet7 : _classPrivateFieldGet6.ctx = _getCtx.call(_TextLayer, _classPrivateFieldGet(_lang, this));\n  var textDivs = _classPrivateFieldGet(_textDivs, this),\n    textContentItemsStr = _classPrivateFieldGet(_textContentItemsStr, this);\n  var _iterator4 = _createForOfIteratorHelper(items),\n    _step4;\n  try {\n    for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n      var item = _step4.value;\n      // No point in rendering many divs as it would make the browser\n      // unusable even after the divs are rendered.\n      if (textDivs.length > MAX_TEXT_DIVS_TO_RENDER) {\n        warn('Ignoring additional textDivs for performance reasons.');\n        _classPrivateFieldSet(_disableProcessItems, this, true); // Avoid multiple warnings for one page.\n        return;\n      }\n      if (item.str === undefined) {\n        if (item.type === 'beginMarkedContentProps' || item.type === 'beginMarkedContent') {\n          var parent = _classPrivateFieldGet(_container, this);\n          _classPrivateFieldSet(_container, this, document.createElement('span'));\n          _classPrivateFieldGet(_container, this).classList.add('markedContent');\n          if (item.id !== null) {\n            _classPrivateFieldGet(_container, this).setAttribute('id', \"\".concat(item.id));\n          }\n          parent.append(_classPrivateFieldGet(_container, this));\n        } else if (item.type === 'endMarkedContent') {\n          _classPrivateFieldSet(_container, this, _classPrivateFieldGet(_container, this).parentNode);\n        }\n        continue;\n      }\n      textContentItemsStr.push(item.str);\n      _assertClassBrand(_TextLayer_brand, this, _appendText).call(this, item);\n    }\n  } catch (err) {\n    _iterator4.e(err);\n  } finally {\n    _iterator4.f();\n  }\n}\nfunction _appendText(geom) {\n  var _classPrivateFieldGet8;\n  var textDiv = document.createElement('span');\n  _classPrivateFieldGet(_textDivs, this).push(textDiv);\n  // console.log(geom);\n  var textDivProperties = {\n    angle: 0,\n    canvasWidth: 0,\n    hasText: geom.str !== '',\n    hasEOL: geom.hasEOL,\n    fontSize: 0,\n    geomTransform: geom.transform,\n    width: geom.width,\n    height: geom.height,\n    fontName: geom.fontName\n  };\n  var tx = transform(_classPrivateFieldGet(_transform, this), geom.transform);\n  var fontHeight2 = Math.hypot(tx[2], tx[3]);\n  var fontSizee = _minFontSize._ * fontHeight2;\n  if (_classPrivateFieldGet(_styleCache, this) && Object.keys(_classPrivateFieldGet(_styleCache, this)).length > 0) {\n    var angle2 = 0;\n    var style = _classPrivateFieldGet(_styleCache, this)[geom.fontName];\n    angle2 = Math.atan2(tx[1], tx[0]);\n    if (style.vertical) {\n      angle2 += Math.PI / 2;\n    }\n    textDivProperties.angle = angle2 * (180 / Math.PI);\n  }\n  textDivProperties.fontSize = fontSizee;\n  textDivProperties.canvasWidth = geom.width;\n  _classPrivateFieldGet(_textDivProperties, this).set(textDiv, textDivProperties);\n  var _this$getRect = this.getRect(textDiv),\n    left = _this$getRect.left,\n    top = _this$getRect.top,\n    width = _this$getRect.width,\n    height = _this$getRect.height,\n    fontHeight = _this$getRect.fontHeight,\n    angle = _this$getRect.angle;\n  textDiv.style.left = left + 'px';\n  textDiv.style.top = top + 'px';\n  textDiv.style.fontSize = fontHeight + 'px';\n  textDiv.style.fontFamily = (_classPrivateFieldGet8 = _classPrivateFieldGet(_styleCache, this)[geom.fontName]) === null || _classPrivateFieldGet8 === void 0 ? void 0 : _classPrivateFieldGet8.fontFamily;\n  textDiv.style.padding = '0px';\n  textDiv.style.margin = '0px';\n  textDiv.style.transform = 'translate(0px, 0px) rotate(0deg)';\n  textDiv.style.transformOrigin = 'left top';\n  textDiv.style.appearance = 'none';\n  textDiv.style.borderStyle = 'solid';\n  textDiv.style.borderColor = 'rgba(0, 0, 0, 0)';\n  textDiv.style.borderWidth = '0px';\n  textDiv.style.borderRadius = '0px';\n  textDiv.style.position = 'absolute';\n  // textDiv.style.backgroundColor = 'green';\n  textDiv.style.opacity = 0;\n  // textDiv.style.opacity = 1;\n  textDiv.textContent = (0, _ui.removeNullCharacters)(geom.str);\n  textDiv.style.whiteSpace = 'pre';\n  textDiv.style.cursor = 'text';\n  textDiv.style.transformOrigin = '0% 0%';\n  textDiv.dir = geom.dir;\n  textDiv.style.visibility = 'hidden';\n  if (textDivProperties.hasText) {\n    _classPrivateFieldGet(_container, this).append(textDiv);\n  }\n  if (geom.hasEOL) {\n    var br = document.createElement('br');\n    br.setAttribute('role', 'presentation');\n    _classPrivateFieldGet(_container, this).append(br);\n  }\n}\nfunction _layout(params) {\n  var div = params.div,\n    properties = params.properties,\n    ctx = params.ctx,\n    scale = params.scale;\n  var style = div.style;\n  var transform = '';\n  if (_minFontSize._ > 1) {\n    transform = \"scale(\".concat(1 / _minFontSize._, \")\");\n  }\n  if (properties.canvasWidth !== 0 && properties.hasText) {\n    var fontFamily = style.fontFamily;\n    var canvasWidth = properties.canvasWidth,\n      fontSize = properties.fontSize;\n    _ensureCtxFont.call(_TextLayer, ctx, fontSize * scale, fontFamily);\n    // Only measure the width for multi-char text divs, see `appendText`.\n    var _ctx$measureText = ctx.measureText(div.textContent),\n      width = _ctx$measureText.width;\n    if (width > 0) {\n      transform = \"scaleX(\".concat(canvasWidth * scale / width, \") \").concat(transform);\n    }\n  }\n  if (properties.angle !== 0) {\n    transform = \"rotate(\".concat(properties.angle, \"deg) \").concat(transform);\n  }\n  if (transform.length > 0) {\n    style.transform = transform;\n  }\n}\nfunction _getCtx() {\n  var lang = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  var ctx = _assertClassBrand(_TextLayer, this, _canvasContexts)._.get(lang || (lang = ''));\n  if (!ctx) {\n    // We don't use an OffscreenCanvas here because we use serif/sans serif\n    // fonts with it and they depends on the locale.\n    // In Firefox, the <html> element get a lang attribute that depends on\n    // what Fluent returns for the locale and the OffscreenCanvas uses\n    // the OS locale.\n    // Those two locales can be different and consequently the used fonts will\n    // be different (see bug 1869001).\n    // Ideally, we should use in the text layer the fonts we've in the pdf (or\n    // their replacements when they aren't embedded) and then we can use an\n    // OffscreenCanvas.\n    var canvas = document.createElement('canvas');\n    canvas.className = 'hiddenCanvasElement';\n    canvas.lang = lang;\n    document.body.append(canvas);\n    ctx = canvas.getContext('2d', {\n      alpha: false,\n      willReadFrequently: true\n    });\n    _assertClassBrand(_TextLayer, this, _canvasContexts)._.set(lang, ctx);\n\n    // Also, initialize state for the `#ensureCtxFont` method.\n    _assertClassBrand(_TextLayer, this, _canvasCtxFonts)._.set(ctx, {\n      size: 0,\n      family: ''\n    });\n  }\n  return ctx;\n}\nfunction _ensureCtxFont(ctx, size, family) {\n  var cached = _assertClassBrand(_TextLayer, this, _canvasCtxFonts)._.get(ctx);\n  if (size === cached.size && family === cached.family) {\n    return; // The font is already set.\n  }\n  ctx.font = \"\".concat(size, \"px \").concat(family);\n  cached.size = size;\n  cached.family = family;\n}\n/**\n * Compute the minimum font size enforced by the browser.\n */\nfunction _ensureMinFontSizeComputed() {\n  if (_assertClassBrand(_TextLayer, this, _minFontSize)._ !== null) {\n    return;\n  }\n  var div = document.createElement('div');\n  div.style.opacity = 0;\n  div.style.lineHeight = 1;\n  div.style.fontSize = '1px';\n  div.style.position = 'absolute';\n  div.textContent = 'X';\n  document.body.append(div);\n  // In `display:block` elements contain a single line of text,\n  // the height matches the line height (which, when set to 1,\n  // matches the actual font size).\n  _minFontSize._ = _assertClassBrand(_TextLayer, this, div.getBoundingClientRect().height);\n  div.remove();\n}\nfunction _getAscent(fontFamily, style, lang) {\n  var cachedAscent = _assertClassBrand(_TextLayer, this, _ascentCache)._.get(fontFamily);\n  if (cachedAscent) {\n    return cachedAscent;\n  }\n  var ctx = _assertClassBrand(_TextLayer, this, _getCtx).call(this, lang);\n  ctx.canvas.width = ctx.canvas.height = DEFAULT_FONT_SIZE;\n  _assertClassBrand(_TextLayer, this, _ensureCtxFont).call(this, ctx, DEFAULT_FONT_SIZE, fontFamily);\n  var metrics = ctx.measureText('');\n  var ascent = metrics.fontBoundingBoxAscent;\n  var descent = Math.abs(metrics.fontBoundingBoxDescent);\n  ctx.canvas.width = ctx.canvas.height = 0;\n  var ratio = 0.8; // DEFAULT_FONT_ASCENT\n\n  if (ascent) {\n    ratio = ascent / (ascent + descent);\n  } else {\n    if (style.ascent) {\n      ratio = style.ascent;\n    } else if (style.descent) {\n      ratio = 1 + style.descent;\n    }\n  }\n  _assertClassBrand(_TextLayer, this, _ascentCache)._.set(fontFamily, ratio);\n  return ratio;\n}\nvar _ascentCache = {\n  _: new Map()\n};\nvar _canvasContexts = {\n  _: new Map()\n};\nvar _canvasCtxFonts = {\n  _: new WeakMap()\n};\nvar _minFontSize = {\n  _: null\n};\nvar _pendingTextLayers = {\n  _: new Set()\n};\n\n//# sourceURL=webpack://ViewerJS/./src/pdf/core/TextLayer.js?")},88267:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar uncurryThis = __webpack_require__(79504);\nvar toString = __webpack_require__(655);\n\nvar fromCharCode = String.fromCharCode;\nvar charAt = uncurryThis(''.charAt);\nvar exec = uncurryThis(/./.exec);\nvar stringSlice = uncurryThis(''.slice);\n\nvar hex2 = /^[\\da-f]{2}$/i;\nvar hex4 = /^[\\da-f]{4}$/i;\n\n// `unescape` method\n// https://tc39.es/ecma262/#sec-unescape-string\n$({ global: true }, {\n  unescape: function unescape(string) {\n    var str = toString(string);\n    var result = '';\n    var length = str.length;\n    var index = 0;\n    var chr, part;\n    while (index < length) {\n      chr = charAt(str, index++);\n      if (chr === '%') {\n        if (charAt(str, index) === 'u') {\n          part = stringSlice(str, index + 1, index + 5);\n          if (exec(hex4, part)) {\n            result += fromCharCode(parseInt(part, 16));\n            index += 5;\n            continue;\n          }\n        } else {\n          part = stringSlice(str, index, index + 2);\n          if (exec(hex2, part)) {\n            result += fromCharCode(parseInt(part, 16));\n            index += 2;\n            continue;\n          }\n        }\n      }\n      result += chr;\n    } return result;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.unescape.js?")},88431:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar $every = (__webpack_require__(59213).every);\nvar arrayMethodIsStrict = __webpack_require__(34598);\n\nvar STRICT_METHOD = arrayMethodIsStrict('every');\n\n// `Array.prototype.every` method\n// https://tc39.es/ecma262/#sec-array.prototype.every\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD }, {\n  every: function every(callbackfn /* , thisArg */) {\n    return $every(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array.every.js?")},88490:module=>{"use strict";eval("\n// IEEE754 conversions based on https://github.com/feross/ieee754\nvar $Array = Array;\nvar abs = Math.abs;\nvar pow = Math.pow;\nvar floor = Math.floor;\nvar log = Math.log;\nvar LN2 = Math.LN2;\n\nvar pack = function (number, mantissaLength, bytes) {\n  var buffer = $Array(bytes);\n  var exponentLength = bytes * 8 - mantissaLength - 1;\n  var eMax = (1 << exponentLength) - 1;\n  var eBias = eMax >> 1;\n  var rt = mantissaLength === 23 ? pow(2, -24) - pow(2, -77) : 0;\n  var sign = number < 0 || number === 0 && 1 / number < 0 ? 1 : 0;\n  var index = 0;\n  var exponent, mantissa, c;\n  number = abs(number);\n  // eslint-disable-next-line no-self-compare -- NaN check\n  if (number !== number || number === Infinity) {\n    // eslint-disable-next-line no-self-compare -- NaN check\n    mantissa = number !== number ? 1 : 0;\n    exponent = eMax;\n  } else {\n    exponent = floor(log(number) / LN2);\n    c = pow(2, -exponent);\n    if (number * c < 1) {\n      exponent--;\n      c *= 2;\n    }\n    if (exponent + eBias >= 1) {\n      number += rt / c;\n    } else {\n      number += rt * pow(2, 1 - eBias);\n    }\n    if (number * c >= 2) {\n      exponent++;\n      c /= 2;\n    }\n    if (exponent + eBias >= eMax) {\n      mantissa = 0;\n      exponent = eMax;\n    } else if (exponent + eBias >= 1) {\n      mantissa = (number * c - 1) * pow(2, mantissaLength);\n      exponent += eBias;\n    } else {\n      mantissa = number * pow(2, eBias - 1) * pow(2, mantissaLength);\n      exponent = 0;\n    }\n  }\n  while (mantissaLength >= 8) {\n    buffer[index++] = mantissa & 255;\n    mantissa /= 256;\n    mantissaLength -= 8;\n  }\n  exponent = exponent << mantissaLength | mantissa;\n  exponentLength += mantissaLength;\n  while (exponentLength > 0) {\n    buffer[index++] = exponent & 255;\n    exponent /= 256;\n    exponentLength -= 8;\n  }\n  buffer[index - 1] |= sign * 128;\n  return buffer;\n};\n\nvar unpack = function (buffer, mantissaLength) {\n  var bytes = buffer.length;\n  var exponentLength = bytes * 8 - mantissaLength - 1;\n  var eMax = (1 << exponentLength) - 1;\n  var eBias = eMax >> 1;\n  var nBits = exponentLength - 7;\n  var index = bytes - 1;\n  var sign = buffer[index--];\n  var exponent = sign & 127;\n  var mantissa;\n  sign >>= 7;\n  while (nBits > 0) {\n    exponent = exponent * 256 + buffer[index--];\n    nBits -= 8;\n  }\n  mantissa = exponent & (1 << -nBits) - 1;\n  exponent >>= -nBits;\n  nBits += mantissaLength;\n  while (nBits > 0) {\n    mantissa = mantissa * 256 + buffer[index--];\n    nBits -= 8;\n  }\n  if (exponent === 0) {\n    exponent = 1 - eBias;\n  } else if (exponent === eMax) {\n    return mantissa ? NaN : sign ? -Infinity : Infinity;\n  } else {\n    mantissa += pow(2, mantissaLength);\n    exponent -= eBias;\n  } return (sign ? -1 : 1) * mantissa * pow(2, exponent - mantissaLength);\n};\n\nmodule.exports = {\n  pack: pack,\n  unpack: unpack\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/ieee754.js?")},88727:module=>{"use strict";eval("\n// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/enum-bug-keys.js?")},88747:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar ArrayBufferViewCore = __webpack_require__(94644);\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\nvar floor = Math.floor;\n\n// `%TypedArray%.prototype.reverse` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.reverse\nexportTypedArrayMethod('reverse', function reverse() {\n  var that = this;\n  var length = aTypedArray(that).length;\n  var middle = floor(length / 2);\n  var index = 0;\n  var value;\n  while (index < middle) {\n    value = that[index];\n    that[index++] = that[--length];\n    that[length] = value;\n  } return that;\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.reverse.js?")},89195:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar createHTML = __webpack_require__(77240);\nvar forcedStringHTMLMethod = __webpack_require__(23061);\n\n// `String.prototype.small` method\n// https://tc39.es/ecma262/#sec-string.prototype.small\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('small') }, {\n  small: function small() {\n    return createHTML(this, 'small', '', '');\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.string.small.js?")},89228:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4` since it's moved to entry points\n__webpack_require__(27495);\nvar call = __webpack_require__(69565);\nvar defineBuiltIn = __webpack_require__(36840);\nvar regexpExec = __webpack_require__(57323);\nvar fails = __webpack_require__(79039);\nvar wellKnownSymbol = __webpack_require__(78227);\nvar createNonEnumerableProperty = __webpack_require__(66699);\n\nvar SPECIES = wellKnownSymbol('species');\nvar RegExpPrototype = RegExp.prototype;\n\nmodule.exports = function (KEY, exec, FORCED, SHAM) {\n  var SYMBOL = wellKnownSymbol(KEY);\n\n  var DELEGATES_TO_SYMBOL = !fails(function () {\n    // String methods call symbol-named RegExp methods\n    var O = {};\n    O[SYMBOL] = function () { return 7; };\n    return ''[KEY](O) !== 7;\n  });\n\n  var DELEGATES_TO_EXEC = DELEGATES_TO_SYMBOL && !fails(function () {\n    // Symbol-named RegExp methods call .exec\n    var execCalled = false;\n    var re = /a/;\n\n    if (KEY === 'split') {\n      // We can't use real regex here since it causes deoptimization\n      // and serious performance degradation in V8\n      // https://github.com/zloirock/core-js/issues/306\n      re = {};\n      // RegExp[@@split] doesn't call the regex's exec method, but first creates\n      // a new one. We need to return the patched regex when creating the new one.\n      re.constructor = {};\n      re.constructor[SPECIES] = function () { return re; };\n      re.flags = '';\n      re[SYMBOL] = /./[SYMBOL];\n    }\n\n    re.exec = function () {\n      execCalled = true;\n      return null;\n    };\n\n    re[SYMBOL]('');\n    return !execCalled;\n  });\n\n  if (\n    !DELEGATES_TO_SYMBOL ||\n    !DELEGATES_TO_EXEC ||\n    FORCED\n  ) {\n    var nativeRegExpMethod = /./[SYMBOL];\n    var methods = exec(SYMBOL, ''[KEY], function (nativeMethod, regexp, str, arg2, forceStringMethod) {\n      var $exec = regexp.exec;\n      if ($exec === regexpExec || $exec === RegExpPrototype.exec) {\n        if (DELEGATES_TO_SYMBOL && !forceStringMethod) {\n          // The native String method already delegates to @@method (this\n          // polyfilled function), leasing to infinite recursion.\n          // We avoid it by directly calling the native @@method method.\n          return { done: true, value: call(nativeRegExpMethod, regexp, str, arg2) };\n        }\n        return { done: true, value: call(nativeMethod, str, regexp, arg2) };\n      }\n      return { done: false };\n    });\n\n    defineBuiltIn(String.prototype, KEY, methods[0]);\n    defineBuiltIn(RegExpPrototype, SYMBOL, methods[1]);\n  }\n\n  if (SHAM) createNonEnumerableProperty(RegExpPrototype[SYMBOL], 'sham', true);\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js?")},89286:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar SetHelpers = __webpack_require__(94402);\nvar iterate = __webpack_require__(38469);\n\nvar Set = SetHelpers.Set;\nvar add = SetHelpers.add;\n\nmodule.exports = function (set) {\n  var result = new Set();\n  iterate(set, function (it) {\n    add(result, it);\n  });\n  return result;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/set-clone.js?")},89429:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar globalThis = __webpack_require__(44576);\nvar IS_NODE = __webpack_require__(16193);\n\nmodule.exports = function (name) {\n  if (IS_NODE) {\n    try {\n      return globalThis.process.getBuiltinModule(name);\n    } catch (error) { /* empty */ }\n    try {\n      // eslint-disable-next-line no-new-func -- safe\n      return Function('return require(\"' + name + '\")')();\n    } catch (error) { /* empty */ }\n  }\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/get-built-in-node-module.js?")},89463:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("// `Symbol.prototype.description` getter\n// https://tc39.es/ecma262/#sec-symbol.prototype.description\n\nvar $ = __webpack_require__(46518);\nvar DESCRIPTORS = __webpack_require__(43724);\nvar globalThis = __webpack_require__(44576);\nvar uncurryThis = __webpack_require__(79504);\nvar hasOwn = __webpack_require__(39297);\nvar isCallable = __webpack_require__(94901);\nvar isPrototypeOf = __webpack_require__(1625);\nvar toString = __webpack_require__(655);\nvar defineBuiltInAccessor = __webpack_require__(62106);\nvar copyConstructorProperties = __webpack_require__(77740);\n\nvar NativeSymbol = globalThis.Symbol;\nvar SymbolPrototype = NativeSymbol && NativeSymbol.prototype;\n\nif (DESCRIPTORS && isCallable(NativeSymbol) && (!('description' in SymbolPrototype) ||\n  // Safari 12 bug\n  NativeSymbol().description !== undefined\n)) {\n  var EmptyStringDescriptionStore = {};\n  // wrap Symbol constructor for correct work with undefined description\n  var SymbolWrapper = function Symbol() {\n    var description = arguments.length < 1 || arguments[0] === undefined ? undefined : toString(arguments[0]);\n    var result = isPrototypeOf(SymbolPrototype, this)\n      // eslint-disable-next-line sonarjs/inconsistent-function-call -- ok\n      ? new NativeSymbol(description)\n      // in Edge 13, String(Symbol(undefined)) === 'Symbol(undefined)'\n      : description === undefined ? NativeSymbol() : NativeSymbol(description);\n    if (description === '') EmptyStringDescriptionStore[result] = true;\n    return result;\n  };\n\n  copyConstructorProperties(SymbolWrapper, NativeSymbol);\n  SymbolWrapper.prototype = SymbolPrototype;\n  SymbolPrototype.constructor = SymbolWrapper;\n\n  var NATIVE_SYMBOL = String(NativeSymbol('description detection')) === 'Symbol(description detection)';\n  var thisSymbolValue = uncurryThis(SymbolPrototype.valueOf);\n  var symbolDescriptiveString = uncurryThis(SymbolPrototype.toString);\n  var regexp = /^Symbol\\((.*)\\)[^)]+$/;\n  var replace = uncurryThis(''.replace);\n  var stringSlice = uncurryThis(''.slice);\n\n  defineBuiltInAccessor(SymbolPrototype, 'description', {\n    configurable: true,\n    get: function description() {\n      var symbol = thisSymbolValue(this);\n      if (hasOwn(EmptyStringDescriptionStore, symbol)) return '';\n      var string = symbolDescriptiveString(symbol);\n      var desc = NATIVE_SYMBOL ? stringSlice(string, 7, -1) : replace(string, regexp, '$1');\n      return desc === '' ? undefined : desc;\n    }\n  });\n\n  $({ global: true, constructor: true, forced: true }, {\n    Symbol: SymbolWrapper\n  });\n}\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.symbol.description.js?")},89544:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar userAgent = __webpack_require__(82839);\n\n// eslint-disable-next-line redos/no-vulnerable -- safe\nmodule.exports = /(?:ipad|iphone|ipod).*applewebkit/i.test(userAgent);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/environment-is-ios.js?")},89572:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar hasOwn = __webpack_require__(39297);\nvar defineBuiltIn = __webpack_require__(36840);\nvar dateToPrimitive = __webpack_require__(53640);\nvar wellKnownSymbol = __webpack_require__(78227);\n\nvar TO_PRIMITIVE = wellKnownSymbol('toPrimitive');\nvar DatePrototype = Date.prototype;\n\n// `Date.prototype[@@toPrimitive]` method\n// https://tc39.es/ecma262/#sec-date.prototype-@@toprimitive\nif (!hasOwn(DatePrototype, TO_PRIMITIVE)) {\n  defineBuiltIn(DatePrototype, TO_PRIMITIVE, dateToPrimitive);\n}\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.date.to-primitive.js?")},89907:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar createHTML = __webpack_require__(77240);\nvar forcedStringHTMLMethod = __webpack_require__(23061);\n\n// `String.prototype.anchor` method\n// https://tc39.es/ecma262/#sec-string.prototype.anchor\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('anchor') }, {\n  anchor: function anchor(name) {\n    return createHTML(this, 'a', 'name', name);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.string.anchor.js?")},89955:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar ArrayBufferViewCore = __webpack_require__(94644);\nvar $findIndex = (__webpack_require__(59213).findIndex);\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.findIndex` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.findindex\nexportTypedArrayMethod('findIndex', function findIndex(predicate /* , thisArg */) {\n  return $findIndex(aTypedArray(this), predicate, arguments.length > 1 ? arguments[1] : undefined);\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.find-index.js?")},90235:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $forEach = (__webpack_require__(59213).forEach);\nvar arrayMethodIsStrict = __webpack_require__(34598);\n\nvar STRICT_METHOD = arrayMethodIsStrict('forEach');\n\n// `Array.prototype.forEach` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.foreach\nmodule.exports = !STRICT_METHOD ? function forEach(callbackfn /* , thisArg */) {\n  return $forEach(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n// eslint-disable-next-line es/no-array-prototype-foreach -- safe\n} : [].forEach;\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/array-for-each.js?")},90537:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar NativePromiseConstructor = __webpack_require__(80550);\nvar checkCorrectnessOfIteration = __webpack_require__(84428);\nvar FORCED_PROMISE_CONSTRUCTOR = (__webpack_require__(10916).CONSTRUCTOR);\n\nmodule.exports = FORCED_PROMISE_CONSTRUCTOR || !checkCorrectnessOfIteration(function (iterable) {\n  NativePromiseConstructor.all(iterable).then(undefined, function () { /* empty */ });\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/promise-statics-incorrect-iteration.js?")},90679:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar isPrototypeOf = __webpack_require__(1625);\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (it, Prototype) {\n  if (isPrototypeOf(Prototype, it)) return it;\n  throw new $TypeError('Incorrect invocation');\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/an-instance.js?")},90744:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar call = __webpack_require__(69565);\nvar uncurryThis = __webpack_require__(79504);\nvar fixRegExpWellKnownSymbolLogic = __webpack_require__(89228);\nvar anObject = __webpack_require__(28551);\nvar isNullOrUndefined = __webpack_require__(64117);\nvar requireObjectCoercible = __webpack_require__(67750);\nvar speciesConstructor = __webpack_require__(2293);\nvar advanceStringIndex = __webpack_require__(57829);\nvar toLength = __webpack_require__(18014);\nvar toString = __webpack_require__(655);\nvar getMethod = __webpack_require__(55966);\nvar regExpExec = __webpack_require__(56682);\nvar stickyHelpers = __webpack_require__(58429);\nvar fails = __webpack_require__(79039);\n\nvar UNSUPPORTED_Y = stickyHelpers.UNSUPPORTED_Y;\nvar MAX_UINT32 = 0xFFFFFFFF;\nvar min = Math.min;\nvar push = uncurryThis([].push);\nvar stringSlice = uncurryThis(''.slice);\n\n// Chrome 51 has a buggy \"split\" implementation when RegExp#exec !== nativeExec\n// Weex JS has frozen built-in prototypes, so use try / catch wrapper\nvar SPLIT_WORKS_WITH_OVERWRITTEN_EXEC = !fails(function () {\n  // eslint-disable-next-line regexp/no-empty-group -- required for testing\n  var re = /(?:)/;\n  var originalExec = re.exec;\n  re.exec = function () { return originalExec.apply(this, arguments); };\n  var result = 'ab'.split(re);\n  return result.length !== 2 || result[0] !== 'a' || result[1] !== 'b';\n});\n\nvar BUGGY = 'abbc'.split(/(b)*/)[1] === 'c' ||\n  // eslint-disable-next-line regexp/no-empty-group -- required for testing\n  'test'.split(/(?:)/, -1).length !== 4 ||\n  'ab'.split(/(?:ab)*/).length !== 2 ||\n  '.'.split(/(.?)(.?)/).length !== 4 ||\n  // eslint-disable-next-line regexp/no-empty-capturing-group, regexp/no-empty-group -- required for testing\n  '.'.split(/()()/).length > 1 ||\n  ''.split(/.?/).length;\n\n// @@split logic\nfixRegExpWellKnownSymbolLogic('split', function (SPLIT, nativeSplit, maybeCallNative) {\n  var internalSplit = '0'.split(undefined, 0).length ? function (separator, limit) {\n    return separator === undefined && limit === 0 ? [] : call(nativeSplit, this, separator, limit);\n  } : nativeSplit;\n\n  return [\n    // `String.prototype.split` method\n    // https://tc39.es/ecma262/#sec-string.prototype.split\n    function split(separator, limit) {\n      var O = requireObjectCoercible(this);\n      var splitter = isNullOrUndefined(separator) ? undefined : getMethod(separator, SPLIT);\n      return splitter\n        ? call(splitter, separator, O, limit)\n        : call(internalSplit, toString(O), separator, limit);\n    },\n    // `RegExp.prototype[@@split]` method\n    // https://tc39.es/ecma262/#sec-regexp.prototype-@@split\n    //\n    // NOTE: This cannot be properly polyfilled in engines that don't support\n    // the 'y' flag.\n    function (string, limit) {\n      var rx = anObject(this);\n      var S = toString(string);\n\n      if (!BUGGY) {\n        var res = maybeCallNative(internalSplit, rx, S, limit, internalSplit !== nativeSplit);\n        if (res.done) return res.value;\n      }\n\n      var C = speciesConstructor(rx, RegExp);\n      var unicodeMatching = rx.unicode;\n      var flags = (rx.ignoreCase ? 'i' : '') +\n                  (rx.multiline ? 'm' : '') +\n                  (rx.unicode ? 'u' : '') +\n                  (UNSUPPORTED_Y ? 'g' : 'y');\n      // ^(? + rx + ) is needed, in combination with some S slicing, to\n      // simulate the 'y' flag.\n      var splitter = new C(UNSUPPORTED_Y ? '^(?:' + rx.source + ')' : rx, flags);\n      var lim = limit === undefined ? MAX_UINT32 : limit >>> 0;\n      if (lim === 0) return [];\n      if (S.length === 0) return regExpExec(splitter, S) === null ? [S] : [];\n      var p = 0;\n      var q = 0;\n      var A = [];\n      while (q < S.length) {\n        splitter.lastIndex = UNSUPPORTED_Y ? 0 : q;\n        var z = regExpExec(splitter, UNSUPPORTED_Y ? stringSlice(S, q) : S);\n        var e;\n        if (\n          z === null ||\n          (e = min(toLength(splitter.lastIndex + (UNSUPPORTED_Y ? q : 0)), S.length)) === p\n        ) {\n          q = advanceStringIndex(S, q, unicodeMatching);\n        } else {\n          push(A, stringSlice(S, p, q));\n          if (A.length === lim) return A;\n          for (var i = 1; i <= z.length - 1; i++) {\n            push(A, z[i]);\n            if (A.length === lim) return A;\n          }\n          q = p = e;\n        }\n      }\n      push(A, stringSlice(S, p));\n      return A;\n    }\n  ];\n}, BUGGY || !SPLIT_WORKS_WITH_OVERWRITTEN_EXEC, UNSUPPORTED_Y);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.string.split.js?")},90757:module=>{"use strict";eval("\nmodule.exports = function (a, b) {\n  try {\n    // eslint-disable-next-line no-console -- safe\n    arguments.length === 1 ? console.error(a) : console.error(a, b);\n  } catch (error) { /* empty */ }\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/host-report-errors.js?")},90906:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4` since it's moved to entry points\n__webpack_require__(27495);\nvar $ = __webpack_require__(46518);\nvar call = __webpack_require__(69565);\nvar isCallable = __webpack_require__(94901);\nvar anObject = __webpack_require__(28551);\nvar toString = __webpack_require__(655);\n\nvar DELEGATES_TO_EXEC = function () {\n  var execCalled = false;\n  var re = /[ac]/;\n  re.exec = function () {\n    execCalled = true;\n    return /./.exec.apply(this, arguments);\n  };\n  return re.test('abc') === true && execCalled;\n}();\n\nvar nativeTest = /./.test;\n\n// `RegExp.prototype.test` method\n// https://tc39.es/ecma262/#sec-regexp.prototype.test\n$({ target: 'RegExp', proto: true, forced: !DELEGATES_TO_EXEC }, {\n  test: function (S) {\n    var R = anObject(this);\n    var string = toString(S);\n    var exec = R.exec;\n    if (!isCallable(exec)) return call(nativeTest, R, string);\n    var result = call(exec, R, string);\n    if (result === null) return false;\n    anObject(result);\n    return true;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.regexp.test.js?")},91021:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar getBuiltIn = __webpack_require__(97751);\nvar call = __webpack_require__(69565);\nvar uncurryThis = __webpack_require__(79504);\nvar bind = __webpack_require__(76080);\nvar anObject = __webpack_require__(28551);\nvar aCallable = __webpack_require__(79306);\nvar isNullOrUndefined = __webpack_require__(64117);\nvar getMethod = __webpack_require__(55966);\nvar wellKnownSymbol = __webpack_require__(78227);\n\nvar ASYNC_DISPOSE = wellKnownSymbol('asyncDispose');\nvar DISPOSE = wellKnownSymbol('dispose');\n\nvar push = uncurryThis([].push);\n\n// `GetDisposeMethod` abstract operation\n// https://tc39.es/proposal-explicit-resource-management/#sec-getdisposemethod\nvar getDisposeMethod = function (V, hint) {\n  if (hint === 'async-dispose') {\n    var method = getMethod(V, ASYNC_DISPOSE);\n    if (method !== undefined) return method;\n    method = getMethod(V, DISPOSE);\n    if (method === undefined) return method;\n    return function () {\n      var O = this;\n      var Promise = getBuiltIn('Promise');\n      return new Promise(function (resolve) {\n        call(method, O);\n        resolve(undefined);\n      });\n    };\n  } return getMethod(V, DISPOSE);\n};\n\n// `CreateDisposableResource` abstract operation\n// https://tc39.es/proposal-explicit-resource-management/#sec-createdisposableresource\nvar createDisposableResource = function (V, hint, method) {\n  if (arguments.length < 3 && !isNullOrUndefined(V)) {\n    method = aCallable(getDisposeMethod(anObject(V), hint));\n  }\n\n  return method === undefined ? function () {\n    return undefined;\n  } : bind(method, V);\n};\n\n// `AddDisposableResource` abstract operation\n// https://tc39.es/proposal-explicit-resource-management/#sec-adddisposableresource\nmodule.exports = function (disposable, V, hint, method) {\n  var resource;\n  if (arguments.length < 4) {\n    // When `V`` is either `null` or `undefined` and hint is `async-dispose`,\n    // we record that the resource was evaluated to ensure we will still perform an `Await` when resources are later disposed.\n    if (isNullOrUndefined(V) && hint === 'sync-dispose') return;\n    resource = createDisposableResource(V, hint);\n  } else {\n    resource = createDisposableResource(undefined, hint, method);\n  }\n\n  push(disposable.stack, resource);\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/add-disposable-resource.js?")},91134:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar ArrayBufferViewCore = __webpack_require__(94644);\nvar $findLastIndex = (__webpack_require__(43839).findLastIndex);\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.findLastIndex` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.findlastindex\nexportTypedArrayMethod('findLastIndex', function findLastIndex(predicate /* , thisArg */) {\n  return $findLastIndex(aTypedArray(this), predicate, arguments.length > 1 ? arguments[1] : undefined);\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.find-last-index.js?")},91181:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar NATIVE_WEAK_MAP = __webpack_require__(58622);\nvar globalThis = __webpack_require__(44576);\nvar isObject = __webpack_require__(20034);\nvar createNonEnumerableProperty = __webpack_require__(66699);\nvar hasOwn = __webpack_require__(39297);\nvar shared = __webpack_require__(77629);\nvar sharedKey = __webpack_require__(66119);\nvar hiddenKeys = __webpack_require__(30421);\n\nvar OBJECT_ALREADY_INITIALIZED = 'Object already initialized';\nvar TypeError = globalThis.TypeError;\nvar WeakMap = globalThis.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw new TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP || shared.state) {\n  var store = shared.state || (shared.state = new WeakMap());\n  /* eslint-disable no-self-assign -- prototype methods protection */\n  store.get = store.get;\n  store.has = store.has;\n  store.set = store.set;\n  /* eslint-enable no-self-assign -- prototype methods protection */\n  set = function (it, metadata) {\n    if (store.has(it)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    store.set(it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return store.get(it) || {};\n  };\n  has = function (it) {\n    return store.has(it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    if (hasOwn(it, STATE)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return hasOwn(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return hasOwn(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/internal-state.js?")},91189:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// https://github.com/tc39/proposal-set-methods\n__webpack_require__(43375);\n__webpack_require__(39225);\n__webpack_require__(13972);\n__webpack_require__(99209);\n__webpack_require__(25714);\n__webpack_require__(66197);\n__webpack_require__(17561);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/proposals/set-methods-v2.js?")},91191:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar uncurryThis = __webpack_require__(79504);\nvar toIntegerOrInfinity = __webpack_require__(91291);\n\nvar DatePrototype = Date.prototype;\nvar thisTimeValue = uncurryThis(DatePrototype.getTime);\nvar setFullYear = uncurryThis(DatePrototype.setFullYear);\n\n// `Date.prototype.setYear` method\n// https://tc39.es/ecma262/#sec-date.prototype.setyear\n$({ target: 'Date', proto: true }, {\n  setYear: function setYear(year) {\n    // validate\n    thisTimeValue(this);\n    var yi = toIntegerOrInfinity(year);\n    var yyyy = yi >= 0 && yi <= 99 ? yi + 1900 : yi;\n    return setFullYear(this, yyyy);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.date.set-year.js?")},91291:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar trunc = __webpack_require__(80741);\n\n// `ToIntegerOrInfinity` abstract operation\n// https://tc39.es/ecma262/#sec-tointegerorinfinity\nmodule.exports = function (argument) {\n  var number = +argument;\n  // eslint-disable-next-line no-self-compare -- NaN check\n  return number !== number || number === 0 ? 0 : trunc(number);\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/to-integer-or-infinity.js?")},91296:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar NATIVE_SYMBOL = __webpack_require__(4495);\n\n/* eslint-disable es/no-symbol -- safe */\nmodule.exports = NATIVE_SYMBOL && !!Symbol['for'] && !!Symbol.keyFor;\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/symbol-registry-detection.js?")},91625:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar uncurryThis = __webpack_require__(79504);\nvar defineBuiltIns = __webpack_require__(56279);\nvar getWeakData = (__webpack_require__(3451).getWeakData);\nvar anInstance = __webpack_require__(90679);\nvar anObject = __webpack_require__(28551);\nvar isNullOrUndefined = __webpack_require__(64117);\nvar isObject = __webpack_require__(20034);\nvar iterate = __webpack_require__(72652);\nvar ArrayIterationModule = __webpack_require__(59213);\nvar hasOwn = __webpack_require__(39297);\nvar InternalStateModule = __webpack_require__(91181);\n\nvar setInternalState = InternalStateModule.set;\nvar internalStateGetterFor = InternalStateModule.getterFor;\nvar find = ArrayIterationModule.find;\nvar findIndex = ArrayIterationModule.findIndex;\nvar splice = uncurryThis([].splice);\nvar id = 0;\n\n// fallback for uncaught frozen keys\nvar uncaughtFrozenStore = function (state) {\n  return state.frozen || (state.frozen = new UncaughtFrozenStore());\n};\n\nvar UncaughtFrozenStore = function () {\n  this.entries = [];\n};\n\nvar findUncaughtFrozen = function (store, key) {\n  return find(store.entries, function (it) {\n    return it[0] === key;\n  });\n};\n\nUncaughtFrozenStore.prototype = {\n  get: function (key) {\n    var entry = findUncaughtFrozen(this, key);\n    if (entry) return entry[1];\n  },\n  has: function (key) {\n    return !!findUncaughtFrozen(this, key);\n  },\n  set: function (key, value) {\n    var entry = findUncaughtFrozen(this, key);\n    if (entry) entry[1] = value;\n    else this.entries.push([key, value]);\n  },\n  'delete': function (key) {\n    var index = findIndex(this.entries, function (it) {\n      return it[0] === key;\n    });\n    if (~index) splice(this.entries, index, 1);\n    return !!~index;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function (wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER) {\n    var Constructor = wrapper(function (that, iterable) {\n      anInstance(that, Prototype);\n      setInternalState(that, {\n        type: CONSTRUCTOR_NAME,\n        id: id++,\n        frozen: null\n      });\n      if (!isNullOrUndefined(iterable)) iterate(iterable, that[ADDER], { that: that, AS_ENTRIES: IS_MAP });\n    });\n\n    var Prototype = Constructor.prototype;\n\n    var getInternalState = internalStateGetterFor(CONSTRUCTOR_NAME);\n\n    var define = function (that, key, value) {\n      var state = getInternalState(that);\n      var data = getWeakData(anObject(key), true);\n      if (data === true) uncaughtFrozenStore(state).set(key, value);\n      else data[state.id] = value;\n      return that;\n    };\n\n    defineBuiltIns(Prototype, {\n      // `{ WeakMap, WeakSet }.prototype.delete(key)` methods\n      // https://tc39.es/ecma262/#sec-weakmap.prototype.delete\n      // https://tc39.es/ecma262/#sec-weakset.prototype.delete\n      'delete': function (key) {\n        var state = getInternalState(this);\n        if (!isObject(key)) return false;\n        var data = getWeakData(key);\n        if (data === true) return uncaughtFrozenStore(state)['delete'](key);\n        return data && hasOwn(data, state.id) && delete data[state.id];\n      },\n      // `{ WeakMap, WeakSet }.prototype.has(key)` methods\n      // https://tc39.es/ecma262/#sec-weakmap.prototype.has\n      // https://tc39.es/ecma262/#sec-weakset.prototype.has\n      has: function has(key) {\n        var state = getInternalState(this);\n        if (!isObject(key)) return false;\n        var data = getWeakData(key);\n        if (data === true) return uncaughtFrozenStore(state).has(key);\n        return data && hasOwn(data, state.id);\n      }\n    });\n\n    defineBuiltIns(Prototype, IS_MAP ? {\n      // `WeakMap.prototype.get(key)` method\n      // https://tc39.es/ecma262/#sec-weakmap.prototype.get\n      get: function get(key) {\n        var state = getInternalState(this);\n        if (isObject(key)) {\n          var data = getWeakData(key);\n          if (data === true) return uncaughtFrozenStore(state).get(key);\n          if (data) return data[state.id];\n        }\n      },\n      // `WeakMap.prototype.set(key, value)` method\n      // https://tc39.es/ecma262/#sec-weakmap.prototype.set\n      set: function set(key, value) {\n        return define(this, key, value);\n      }\n    } : {\n      // `WeakSet.prototype.add(value)` method\n      // https://tc39.es/ecma262/#sec-weakset.prototype.add\n      add: function add(value) {\n        return define(this, value, true);\n      }\n    });\n\n    return Constructor;\n  }\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/collection-weak.js?")},91706:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(21903);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.typed-array.find-last.js?")},91955:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar globalThis = __webpack_require__(44576);\nvar safeGetBuiltIn = __webpack_require__(93389);\nvar bind = __webpack_require__(76080);\nvar macrotask = (__webpack_require__(59225).set);\nvar Queue = __webpack_require__(18265);\nvar IS_IOS = __webpack_require__(89544);\nvar IS_IOS_PEBBLE = __webpack_require__(44265);\nvar IS_WEBOS_WEBKIT = __webpack_require__(7860);\nvar IS_NODE = __webpack_require__(16193);\n\nvar MutationObserver = globalThis.MutationObserver || globalThis.WebKitMutationObserver;\nvar document = globalThis.document;\nvar process = globalThis.process;\nvar Promise = globalThis.Promise;\nvar microtask = safeGetBuiltIn('queueMicrotask');\nvar notify, toggle, node, promise, then;\n\n// modern engines have queueMicrotask method\nif (!microtask) {\n  var queue = new Queue();\n\n  var flush = function () {\n    var parent, fn;\n    if (IS_NODE && (parent = process.domain)) parent.exit();\n    while (fn = queue.get()) try {\n      fn();\n    } catch (error) {\n      if (queue.head) notify();\n      throw error;\n    }\n    if (parent) parent.enter();\n  };\n\n  // browsers with MutationObserver, except iOS - https://github.com/zloirock/core-js/issues/339\n  // also except WebOS Webkit https://github.com/zloirock/core-js/issues/898\n  if (!IS_IOS && !IS_NODE && !IS_WEBOS_WEBKIT && MutationObserver && document) {\n    toggle = true;\n    node = document.createTextNode('');\n    new MutationObserver(flush).observe(node, { characterData: true });\n    notify = function () {\n      node.data = toggle = !toggle;\n    };\n  // environments with maybe non-completely correct, but existent Promise\n  } else if (!IS_IOS_PEBBLE && Promise && Promise.resolve) {\n    // Promise.resolve without an argument throws an error in LG WebOS 2\n    promise = Promise.resolve(undefined);\n    // workaround of WebKit ~ iOS Safari 10.1 bug\n    promise.constructor = Promise;\n    then = bind(promise.then, promise);\n    notify = function () {\n      then(flush);\n    };\n  // Node.js without promises\n  } else if (IS_NODE) {\n    notify = function () {\n      process.nextTick(flush);\n    };\n  // for other environments - macrotask based on:\n  // - setImmediate\n  // - MessageChannel\n  // - window.postMessage\n  // - onreadystatechange\n  // - setTimeout\n  } else {\n    // `webpack` dev server bug on IE global methods - use bind(fn, global)\n    macrotask = bind(macrotask, globalThis);\n    notify = function () {\n      macrotask(flush);\n    };\n  }\n\n  microtask = function (fn) {\n    if (!queue.head) notify();\n    queue.add(fn);\n  };\n}\n\nmodule.exports = microtask;\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/microtask.js?")},92059:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar call = __webpack_require__(69565);\nvar perform = __webpack_require__(1103);\nvar anObject = __webpack_require__(28551);\nvar create = __webpack_require__(2360);\nvar createNonEnumerableProperty = __webpack_require__(66699);\nvar defineBuiltIns = __webpack_require__(56279);\nvar wellKnownSymbol = __webpack_require__(78227);\nvar InternalStateModule = __webpack_require__(91181);\nvar getBuiltIn = __webpack_require__(97751);\nvar getMethod = __webpack_require__(55966);\nvar AsyncIteratorPrototype = __webpack_require__(53982);\nvar createIterResultObject = __webpack_require__(62529);\nvar iteratorClose = __webpack_require__(9539);\n\nvar Promise = getBuiltIn('Promise');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar ASYNC_ITERATOR_HELPER = 'AsyncIteratorHelper';\nvar WRAP_FOR_VALID_ASYNC_ITERATOR = 'WrapForValidAsyncIterator';\nvar setInternalState = InternalStateModule.set;\n\nvar createAsyncIteratorProxyPrototype = function (IS_ITERATOR) {\n  var IS_GENERATOR = !IS_ITERATOR;\n  var getInternalState = InternalStateModule.getterFor(IS_ITERATOR ? WRAP_FOR_VALID_ASYNC_ITERATOR : ASYNC_ITERATOR_HELPER);\n\n  var getStateOrEarlyExit = function (that) {\n    var stateCompletion = perform(function () {\n      return getInternalState(that);\n    });\n\n    var stateError = stateCompletion.error;\n    var state = stateCompletion.value;\n\n    if (stateError || (IS_GENERATOR && state.done)) {\n      return { exit: true, value: stateError ? Promise.reject(state) : Promise.resolve(createIterResultObject(undefined, true)) };\n    } return { exit: false, value: state };\n  };\n\n  return defineBuiltIns(create(AsyncIteratorPrototype), {\n    next: function next() {\n      var stateCompletion = getStateOrEarlyExit(this);\n      var state = stateCompletion.value;\n      if (stateCompletion.exit) return state;\n      var handlerCompletion = perform(function () {\n        return anObject(state.nextHandler(Promise));\n      });\n      var handlerError = handlerCompletion.error;\n      var value = handlerCompletion.value;\n      if (handlerError) state.done = true;\n      return handlerError ? Promise.reject(value) : Promise.resolve(value);\n    },\n    'return': function () {\n      var stateCompletion = getStateOrEarlyExit(this);\n      var state = stateCompletion.value;\n      if (stateCompletion.exit) return state;\n      state.done = true;\n      var iterator = state.iterator;\n      var returnMethod, result;\n      var completion = perform(function () {\n        if (state.inner) try {\n          iteratorClose(state.inner.iterator, 'normal');\n        } catch (error) {\n          return iteratorClose(iterator, 'throw', error);\n        }\n        return getMethod(iterator, 'return');\n      });\n      returnMethod = result = completion.value;\n      if (completion.error) return Promise.reject(result);\n      if (returnMethod === undefined) return Promise.resolve(createIterResultObject(undefined, true));\n      completion = perform(function () {\n        return call(returnMethod, iterator);\n      });\n      result = completion.value;\n      if (completion.error) return Promise.reject(result);\n      return IS_ITERATOR ? Promise.resolve(result) : Promise.resolve(result).then(function (resolved) {\n        anObject(resolved);\n        return createIterResultObject(undefined, true);\n      });\n    }\n  });\n};\n\nvar WrapForValidAsyncIteratorPrototype = createAsyncIteratorProxyPrototype(true);\nvar AsyncIteratorHelperPrototype = createAsyncIteratorProxyPrototype(false);\n\ncreateNonEnumerableProperty(AsyncIteratorHelperPrototype, TO_STRING_TAG, 'Async Iterator Helper');\n\nmodule.exports = function (nextHandler, IS_ITERATOR) {\n  var AsyncIteratorProxy = function AsyncIterator(record, state) {\n    if (state) {\n      state.iterator = record.iterator;\n      state.next = record.next;\n    } else state = record;\n    state.type = IS_ITERATOR ? WRAP_FOR_VALID_ASYNC_ITERATOR : ASYNC_ITERATOR_HELPER;\n    state.nextHandler = nextHandler;\n    state.counter = 0;\n    state.done = false;\n    setInternalState(this, state);\n  };\n\n  AsyncIteratorProxy.prototype = IS_ITERATOR ? WrapForValidAsyncIteratorPrototype : AsyncIteratorHelperPrototype;\n\n  return AsyncIteratorProxy;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/async-iterator-create-proxy.js?")},92140:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar wellKnownSymbol = __webpack_require__(78227);\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/to-string-tag-support.js?")},92168:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar defineWellKnownSymbol = __webpack_require__(70511);\n\n// `Symbol.isConcatSpreadable` well-known symbol\n// https://tc39.es/ecma262/#sec-symbol.isconcatspreadable\ndefineWellKnownSymbol('isConcatSpreadable');\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.symbol.is-concat-spreadable.js?")},92405:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar collection = __webpack_require__(16468);\nvar collectionStrong = __webpack_require__(86938);\n\n// `Set` constructor\n// https://tc39.es/ecma262/#sec-set-objects\ncollection('Set', function (init) {\n  return function Set() { return init(this, arguments.length ? arguments[0] : undefined); };\n}, collectionStrong);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.set.constructor.js?")},92744:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar fails = __webpack_require__(79039);\n\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-object-isextensible, es/no-object-preventextensions -- required for testing\n  return Object.isExtensible(Object.preventExtensions({}));\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/freezing.js?")},92796:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar fails = __webpack_require__(79039);\nvar isCallable = __webpack_require__(94901);\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value === POLYFILL ? true\n    : value === NATIVE ? false\n    : isCallable(detection) ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/is-forced.js?")},92804:module=>{"use strict";eval("\nvar commonAlphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\nvar base64Alphabet = commonAlphabet + '+/';\nvar base64UrlAlphabet = commonAlphabet + '-_';\n\nvar inverse = function (characters) {\n  // TODO: use `Object.create(null)` in `core-js@4`\n  var result = {};\n  var index = 0;\n  for (; index < 64; index++) result[characters.charAt(index)] = index;\n  return result;\n};\n\nmodule.exports = {\n  i2c: base64Alphabet,\n  c2i: inverse(base64Alphabet),\n  i2cUrl: base64UrlAlphabet,\n  c2iUrl: inverse(base64UrlAlphabet)\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/base64-map.js?")},93153:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar log1p = __webpack_require__(7740);\n\n// eslint-disable-next-line es/no-math-acosh -- required for testing\nvar $acosh = Math.acosh;\nvar log = Math.log;\nvar sqrt = Math.sqrt;\nvar LN2 = Math.LN2;\n\nvar FORCED = !$acosh\n  // V8 bug: https://code.google.com/p/v8/issues/detail?id=3509\n  || Math.floor($acosh(Number.MAX_VALUE)) !== 710\n  // Tor Browser bug: Math.acosh(Infinity) -> NaN\n  || $acosh(Infinity) !== Infinity;\n\n// `Math.acosh` method\n// https://tc39.es/ecma262/#sec-math.acosh\n$({ target: 'Math', stat: true, forced: FORCED }, {\n  acosh: function acosh(x) {\n    var n = +x;\n    return n < 1 ? NaN : n > 94906265.62425156\n      ? log(n) + LN2\n      : log1p(n - 1 + sqrt(n - 1) * sqrt(n + 1));\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.math.acosh.js?")},93389:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar globalThis = __webpack_require__(44576);\nvar DESCRIPTORS = __webpack_require__(43724);\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Avoid NodeJS experimental warning\nmodule.exports = function (name) {\n  if (!DESCRIPTORS) return globalThis[name];\n  var descriptor = getOwnPropertyDescriptor(globalThis, name);\n  return descriptor && descriptor.value;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/safe-get-built-in.js?")},93438:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar anObject = __webpack_require__(28551);\nvar isObject = __webpack_require__(20034);\nvar newPromiseCapability = __webpack_require__(36043);\n\nmodule.exports = function (C, x) {\n  anObject(C);\n  if (isObject(x) && x.constructor === C) return x;\n  var promiseCapability = newPromiseCapability.f(C);\n  var resolve = promiseCapability.resolve;\n  resolve(x);\n  return promiseCapability.promise;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/promise-resolve.js?")},93514:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// this method was added to unscopables after implementation\n// in popular engines, so it's moved to a separate module\nvar addToUnscopables = __webpack_require__(6469);\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('flat');\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array.unscopables.flat.js?")},93515:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\n\n// `Date.prototype.toGMTString` method\n// https://tc39.es/ecma262/#sec-date.prototype.togmtstring\n$({ target: 'Date', proto: true }, {\n  toGMTString: Date.prototype.toUTCString\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.date.to-gmt-string.js?")},93518:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar call = __webpack_require__(69565);\nvar aCallable = __webpack_require__(79306);\nvar getBuiltIn = __webpack_require__(97751);\nvar newPromiseCapabilityModule = __webpack_require__(36043);\nvar perform = __webpack_require__(1103);\nvar iterate = __webpack_require__(72652);\nvar PROMISE_STATICS_INCORRECT_ITERATION = __webpack_require__(90537);\n\nvar PROMISE_ANY_ERROR = 'No one promise resolved';\n\n// `Promise.any` method\n// https://tc39.es/ecma262/#sec-promise.any\n$({ target: 'Promise', stat: true, forced: PROMISE_STATICS_INCORRECT_ITERATION }, {\n  any: function any(iterable) {\n    var C = this;\n    var AggregateError = getBuiltIn('AggregateError');\n    var capability = newPromiseCapabilityModule.f(C);\n    var resolve = capability.resolve;\n    var reject = capability.reject;\n    var result = perform(function () {\n      var promiseResolve = aCallable(C.resolve);\n      var errors = [];\n      var counter = 0;\n      var remaining = 1;\n      var alreadyResolved = false;\n      iterate(iterable, function (promise) {\n        var index = counter++;\n        var alreadyRejected = false;\n        remaining++;\n        call(promiseResolve, C, promise).then(function (value) {\n          if (alreadyRejected || alreadyResolved) return;\n          alreadyResolved = true;\n          resolve(value);\n        }, function (error) {\n          if (alreadyRejected || alreadyResolved) return;\n          alreadyRejected = true;\n          errors[index] = error;\n          --remaining || reject(new AggregateError(errors, PROMISE_ANY_ERROR));\n        });\n      });\n      --remaining || reject(new AggregateError(errors, PROMISE_ANY_ERROR));\n    });\n    if (result.error) reject(result.value);\n    return capability.promise;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.promise.any.js?")},93854:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// https://github.com/tc39/proposal-array-grouping\n__webpack_require__(46058);\n__webpack_require__(80081);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/proposals/array-grouping-stage-3-2.js?")},93941:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar isObject = __webpack_require__(20034);\nvar onFreeze = (__webpack_require__(3451).onFreeze);\nvar FREEZING = __webpack_require__(92744);\nvar fails = __webpack_require__(79039);\n\n// eslint-disable-next-line es/no-object-seal -- safe\nvar $seal = Object.seal;\nvar FAILS_ON_PRIMITIVES = fails(function () { $seal(1); });\n\n// `Object.seal` method\n// https://tc39.es/ecma262/#sec-object.seal\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES, sham: !FREEZING }, {\n  seal: function seal(it) {\n    return $seal && isObject(it) ? $seal(onFreeze(it)) : it;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.object.seal.js?")},93967:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar isObject = __webpack_require__(20034);\nvar onFreeze = (__webpack_require__(3451).onFreeze);\nvar FREEZING = __webpack_require__(92744);\nvar fails = __webpack_require__(79039);\n\n// eslint-disable-next-line es/no-object-preventextensions -- safe\nvar $preventExtensions = Object.preventExtensions;\nvar FAILS_ON_PRIMITIVES = fails(function () { $preventExtensions(1); });\n\n// `Object.preventExtensions` method\n// https://tc39.es/ecma262/#sec-object.preventextensions\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES, sham: !FREEZING }, {\n  preventExtensions: function preventExtensions(it) {\n    return $preventExtensions && isObject(it) ? $preventExtensions(onFreeze(it)) : it;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.object.prevent-extensions.js?")},94003:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar fails = __webpack_require__(79039);\nvar isObject = __webpack_require__(20034);\nvar classof = __webpack_require__(22195);\nvar ARRAY_BUFFER_NON_EXTENSIBLE = __webpack_require__(15652);\n\n// eslint-disable-next-line es/no-object-isfrozen -- safe\nvar $isFrozen = Object.isFrozen;\n\nvar FORCED = ARRAY_BUFFER_NON_EXTENSIBLE || fails(function () { $isFrozen(1); });\n\n// `Object.isFrozen` method\n// https://tc39.es/ecma262/#sec-object.isfrozen\n$({ target: 'Object', stat: true, forced: FORCED }, {\n  isFrozen: function isFrozen(it) {\n    if (!isObject(it)) return true;\n    if (ARRAY_BUFFER_NON_EXTENSIBLE && classof(it) === 'ArrayBuffer') return true;\n    return $isFrozen ? $isFrozen(it) : false;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.object.is-frozen.js?")},94052:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar $isExtensible = __webpack_require__(34124);\n\n// `Object.isExtensible` method\n// https://tc39.es/ecma262/#sec-object.isextensible\n// eslint-disable-next-line es/no-object-isextensible -- safe\n$({ target: 'Object', stat: true, forced: Object.isExtensible !== $isExtensible }, {\n  isExtensible: $isExtensible\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.object.is-extensible.js?")},94170:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\nvar $ = __webpack_require__(46518);\nvar bind = __webpack_require__(30566);\n\n// `Function.prototype.bind` method\n// https://tc39.es/ecma262/#sec-function.prototype.bind\n// eslint-disable-next-line es/no-function-prototype-bind -- detection\n$({ target: 'Function', proto: true, forced: Function.bind !== bind }, {\n  bind: bind\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.function.bind.js?")},94298:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar createHTML = __webpack_require__(77240);\nvar forcedStringHTMLMethod = __webpack_require__(23061);\n\n// `String.prototype.fixed` method\n// https://tc39.es/ecma262/#sec-string.prototype.fixed\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('fixed') }, {\n  fixed: function fixed() {\n    return createHTML(this, 'tt', '', '');\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.string.fixed.js?")},94402:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar uncurryThis = __webpack_require__(79504);\n\n// eslint-disable-next-line es/no-set -- safe\nvar SetPrototype = Set.prototype;\n\nmodule.exports = {\n  // eslint-disable-next-line es/no-set -- safe\n  Set: Set,\n  add: uncurryThis(SetPrototype.add),\n  has: uncurryThis(SetPrototype.has),\n  remove: uncurryThis(SetPrototype['delete']),\n  proto: SetPrototype\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/set-helpers.js?")},94483:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar globalThis = __webpack_require__(44576);\nvar getBuiltInNodeModule = __webpack_require__(89429);\nvar PROPER_STRUCTURED_CLONE_TRANSFER = __webpack_require__(1548);\n\nvar structuredClone = globalThis.structuredClone;\nvar $ArrayBuffer = globalThis.ArrayBuffer;\nvar $MessageChannel = globalThis.MessageChannel;\nvar detach = false;\nvar WorkerThreads, channel, buffer, $detach;\n\nif (PROPER_STRUCTURED_CLONE_TRANSFER) {\n  detach = function (transferable) {\n    structuredClone(transferable, { transfer: [transferable] });\n  };\n} else if ($ArrayBuffer) try {\n  if (!$MessageChannel) {\n    WorkerThreads = getBuiltInNodeModule('worker_threads');\n    if (WorkerThreads) $MessageChannel = WorkerThreads.MessageChannel;\n  }\n\n  if ($MessageChannel) {\n    channel = new $MessageChannel();\n    buffer = new $ArrayBuffer(2);\n\n    $detach = function (transferable) {\n      channel.port1.postMessage(null, [transferable]);\n    };\n\n    if (buffer.byteLength === 2) {\n      $detach(buffer);\n      if (buffer.byteLength === 0) detach = $detach;\n    }\n  }\n} catch (error) { /* empty */ }\n\nmodule.exports = detach;\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/detach-transferable.js?")},94490:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar uncurryThis = __webpack_require__(79504);\nvar isArray = __webpack_require__(34376);\n\nvar nativeReverse = uncurryThis([].reverse);\nvar test = [1, 2];\n\n// `Array.prototype.reverse` method\n// https://tc39.es/ecma262/#sec-array.prototype.reverse\n// fix for Safari 12.0 bug\n// https://bugs.webkit.org/show_bug.cgi?id=188794\n$({ target: 'Array', proto: true, forced: String(test) === String(test.reverse()) }, {\n  reverse: function reverse() {\n    // eslint-disable-next-line no-self-assign -- dirty hack\n    if (isArray(this)) this.length = this.length;\n    return nativeReverse(this);\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.array.reverse.js?")},94644:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar NATIVE_ARRAY_BUFFER = __webpack_require__(77811);\nvar DESCRIPTORS = __webpack_require__(43724);\nvar globalThis = __webpack_require__(44576);\nvar isCallable = __webpack_require__(94901);\nvar isObject = __webpack_require__(20034);\nvar hasOwn = __webpack_require__(39297);\nvar classof = __webpack_require__(36955);\nvar tryToString = __webpack_require__(16823);\nvar createNonEnumerableProperty = __webpack_require__(66699);\nvar defineBuiltIn = __webpack_require__(36840);\nvar defineBuiltInAccessor = __webpack_require__(62106);\nvar isPrototypeOf = __webpack_require__(1625);\nvar getPrototypeOf = __webpack_require__(42787);\nvar setPrototypeOf = __webpack_require__(52967);\nvar wellKnownSymbol = __webpack_require__(78227);\nvar uid = __webpack_require__(33392);\nvar InternalStateModule = __webpack_require__(91181);\n\nvar enforceInternalState = InternalStateModule.enforce;\nvar getInternalState = InternalStateModule.get;\nvar Int8Array = globalThis.Int8Array;\nvar Int8ArrayPrototype = Int8Array && Int8Array.prototype;\nvar Uint8ClampedArray = globalThis.Uint8ClampedArray;\nvar Uint8ClampedArrayPrototype = Uint8ClampedArray && Uint8ClampedArray.prototype;\nvar TypedArray = Int8Array && getPrototypeOf(Int8Array);\nvar TypedArrayPrototype = Int8ArrayPrototype && getPrototypeOf(Int8ArrayPrototype);\nvar ObjectPrototype = Object.prototype;\nvar TypeError = globalThis.TypeError;\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar TYPED_ARRAY_TAG = uid('TYPED_ARRAY_TAG');\nvar TYPED_ARRAY_CONSTRUCTOR = 'TypedArrayConstructor';\n// Fixing native typed arrays in Opera Presto crashes the browser, see #595\nvar NATIVE_ARRAY_BUFFER_VIEWS = NATIVE_ARRAY_BUFFER && !!setPrototypeOf && classof(globalThis.opera) !== 'Opera';\nvar TYPED_ARRAY_TAG_REQUIRED = false;\nvar NAME, Constructor, Prototype;\n\nvar TypedArrayConstructorsList = {\n  Int8Array: 1,\n  Uint8Array: 1,\n  Uint8ClampedArray: 1,\n  Int16Array: 2,\n  Uint16Array: 2,\n  Int32Array: 4,\n  Uint32Array: 4,\n  Float32Array: 4,\n  Float64Array: 8\n};\n\nvar BigIntArrayConstructorsList = {\n  BigInt64Array: 8,\n  BigUint64Array: 8\n};\n\nvar isView = function isView(it) {\n  if (!isObject(it)) return false;\n  var klass = classof(it);\n  return klass === 'DataView'\n    || hasOwn(TypedArrayConstructorsList, klass)\n    || hasOwn(BigIntArrayConstructorsList, klass);\n};\n\nvar getTypedArrayConstructor = function (it) {\n  var proto = getPrototypeOf(it);\n  if (!isObject(proto)) return;\n  var state = getInternalState(proto);\n  return (state && hasOwn(state, TYPED_ARRAY_CONSTRUCTOR)) ? state[TYPED_ARRAY_CONSTRUCTOR] : getTypedArrayConstructor(proto);\n};\n\nvar isTypedArray = function (it) {\n  if (!isObject(it)) return false;\n  var klass = classof(it);\n  return hasOwn(TypedArrayConstructorsList, klass)\n    || hasOwn(BigIntArrayConstructorsList, klass);\n};\n\nvar aTypedArray = function (it) {\n  if (isTypedArray(it)) return it;\n  throw new TypeError('Target is not a typed array');\n};\n\nvar aTypedArrayConstructor = function (C) {\n  if (isCallable(C) && (!setPrototypeOf || isPrototypeOf(TypedArray, C))) return C;\n  throw new TypeError(tryToString(C) + ' is not a typed array constructor');\n};\n\nvar exportTypedArrayMethod = function (KEY, property, forced, options) {\n  if (!DESCRIPTORS) return;\n  if (forced) for (var ARRAY in TypedArrayConstructorsList) {\n    var TypedArrayConstructor = globalThis[ARRAY];\n    if (TypedArrayConstructor && hasOwn(TypedArrayConstructor.prototype, KEY)) try {\n      delete TypedArrayConstructor.prototype[KEY];\n    } catch (error) {\n      // old WebKit bug - some methods are non-configurable\n      try {\n        TypedArrayConstructor.prototype[KEY] = property;\n      } catch (error2) { /* empty */ }\n    }\n  }\n  if (!TypedArrayPrototype[KEY] || forced) {\n    defineBuiltIn(TypedArrayPrototype, KEY, forced ? property\n      : NATIVE_ARRAY_BUFFER_VIEWS && Int8ArrayPrototype[KEY] || property, options);\n  }\n};\n\nvar exportTypedArrayStaticMethod = function (KEY, property, forced) {\n  var ARRAY, TypedArrayConstructor;\n  if (!DESCRIPTORS) return;\n  if (setPrototypeOf) {\n    if (forced) for (ARRAY in TypedArrayConstructorsList) {\n      TypedArrayConstructor = globalThis[ARRAY];\n      if (TypedArrayConstructor && hasOwn(TypedArrayConstructor, KEY)) try {\n        delete TypedArrayConstructor[KEY];\n      } catch (error) { /* empty */ }\n    }\n    if (!TypedArray[KEY] || forced) {\n      // V8 ~ Chrome 49-50 `%TypedArray%` methods are non-writable non-configurable\n      try {\n        return defineBuiltIn(TypedArray, KEY, forced ? property : NATIVE_ARRAY_BUFFER_VIEWS && TypedArray[KEY] || property);\n      } catch (error) { /* empty */ }\n    } else return;\n  }\n  for (ARRAY in TypedArrayConstructorsList) {\n    TypedArrayConstructor = globalThis[ARRAY];\n    if (TypedArrayConstructor && (!TypedArrayConstructor[KEY] || forced)) {\n      defineBuiltIn(TypedArrayConstructor, KEY, property);\n    }\n  }\n};\n\nfor (NAME in TypedArrayConstructorsList) {\n  Constructor = globalThis[NAME];\n  Prototype = Constructor && Constructor.prototype;\n  if (Prototype) enforceInternalState(Prototype)[TYPED_ARRAY_CONSTRUCTOR] = Constructor;\n  else NATIVE_ARRAY_BUFFER_VIEWS = false;\n}\n\nfor (NAME in BigIntArrayConstructorsList) {\n  Constructor = globalThis[NAME];\n  Prototype = Constructor && Constructor.prototype;\n  if (Prototype) enforceInternalState(Prototype)[TYPED_ARRAY_CONSTRUCTOR] = Constructor;\n}\n\n// WebKit bug - typed arrays constructors prototype is Object.prototype\nif (!NATIVE_ARRAY_BUFFER_VIEWS || !isCallable(TypedArray) || TypedArray === Function.prototype) {\n  // eslint-disable-next-line no-shadow -- safe\n  TypedArray = function TypedArray() {\n    throw new TypeError('Incorrect invocation');\n  };\n  if (NATIVE_ARRAY_BUFFER_VIEWS) for (NAME in TypedArrayConstructorsList) {\n    if (globalThis[NAME]) setPrototypeOf(globalThis[NAME], TypedArray);\n  }\n}\n\nif (!NATIVE_ARRAY_BUFFER_VIEWS || !TypedArrayPrototype || TypedArrayPrototype === ObjectPrototype) {\n  TypedArrayPrototype = TypedArray.prototype;\n  if (NATIVE_ARRAY_BUFFER_VIEWS) for (NAME in TypedArrayConstructorsList) {\n    if (globalThis[NAME]) setPrototypeOf(globalThis[NAME].prototype, TypedArrayPrototype);\n  }\n}\n\n// WebKit bug - one more object in Uint8ClampedArray prototype chain\nif (NATIVE_ARRAY_BUFFER_VIEWS && getPrototypeOf(Uint8ClampedArrayPrototype) !== TypedArrayPrototype) {\n  setPrototypeOf(Uint8ClampedArrayPrototype, TypedArrayPrototype);\n}\n\nif (DESCRIPTORS && !hasOwn(TypedArrayPrototype, TO_STRING_TAG)) {\n  TYPED_ARRAY_TAG_REQUIRED = true;\n  defineBuiltInAccessor(TypedArrayPrototype, TO_STRING_TAG, {\n    configurable: true,\n    get: function () {\n      return isObject(this) ? this[TYPED_ARRAY_TAG] : undefined;\n    }\n  });\n  for (NAME in TypedArrayConstructorsList) if (globalThis[NAME]) {\n    createNonEnumerableProperty(globalThis[NAME], TYPED_ARRAY_TAG, NAME);\n  }\n}\n\nmodule.exports = {\n  NATIVE_ARRAY_BUFFER_VIEWS: NATIVE_ARRAY_BUFFER_VIEWS,\n  TYPED_ARRAY_TAG: TYPED_ARRAY_TAG_REQUIRED && TYPED_ARRAY_TAG,\n  aTypedArray: aTypedArray,\n  aTypedArrayConstructor: aTypedArrayConstructor,\n  exportTypedArrayMethod: exportTypedArrayMethod,\n  exportTypedArrayStaticMethod: exportTypedArrayStaticMethod,\n  getTypedArrayConstructor: getTypedArrayConstructor,\n  isView: isView,\n  isTypedArray: isTypedArray,\n  TypedArray: TypedArray,\n  TypedArrayPrototype: TypedArrayPrototype\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/array-buffer-view-core.js?")},94901:module=>{"use strict";eval("\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot\nvar documentAll = typeof document == 'object' && document.all;\n\n// `IsCallable` abstract operation\n// https://tc39.es/ecma262/#sec-iscallable\n// eslint-disable-next-line unicorn/no-typeof-undefined -- required for testing\nmodule.exports = typeof documentAll == 'undefined' && documentAll !== undefined ? function (argument) {\n  return typeof argument == 'function' || argument === documentAll;\n} : function (argument) {\n  return typeof argument == 'function';\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/is-callable.js?")},95115:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(10838);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.array.find-last.js?")},95175:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// https://github.com/tc39/proposal-regex-escaping\n__webpack_require__(37108);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/proposals/regexp-escaping.js?")},95477:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar createTypedArrayConstructor = __webpack_require__(15823);\n\n// `Int32Array` constructor\n// https://tc39.es/ecma262/#sec-typedarray-objects\ncreateTypedArrayConstructor('Int32', function (init) {\n  return function Int32Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.typed-array.int32-array.js?")},95636:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar globalThis = __webpack_require__(44576);\nvar uncurryThis = __webpack_require__(79504);\nvar uncurryThisAccessor = __webpack_require__(46706);\nvar toIndex = __webpack_require__(57696);\nvar notDetached = __webpack_require__(55169);\nvar arrayBufferByteLength = __webpack_require__(67394);\nvar detachTransferable = __webpack_require__(94483);\nvar PROPER_STRUCTURED_CLONE_TRANSFER = __webpack_require__(1548);\n\nvar structuredClone = globalThis.structuredClone;\nvar ArrayBuffer = globalThis.ArrayBuffer;\nvar DataView = globalThis.DataView;\nvar min = Math.min;\nvar ArrayBufferPrototype = ArrayBuffer.prototype;\nvar DataViewPrototype = DataView.prototype;\nvar slice = uncurryThis(ArrayBufferPrototype.slice);\nvar isResizable = uncurryThisAccessor(ArrayBufferPrototype, 'resizable', 'get');\nvar maxByteLength = uncurryThisAccessor(ArrayBufferPrototype, 'maxByteLength', 'get');\nvar getInt8 = uncurryThis(DataViewPrototype.getInt8);\nvar setInt8 = uncurryThis(DataViewPrototype.setInt8);\n\nmodule.exports = (PROPER_STRUCTURED_CLONE_TRANSFER || detachTransferable) && function (arrayBuffer, newLength, preserveResizability) {\n  var byteLength = arrayBufferByteLength(arrayBuffer);\n  var newByteLength = newLength === undefined ? byteLength : toIndex(newLength);\n  var fixedLength = !isResizable || !isResizable(arrayBuffer);\n  var newBuffer;\n  notDetached(arrayBuffer);\n  if (PROPER_STRUCTURED_CLONE_TRANSFER) {\n    arrayBuffer = structuredClone(arrayBuffer, { transfer: [arrayBuffer] });\n    if (byteLength === newByteLength && (preserveResizability || fixedLength)) return arrayBuffer;\n  }\n  if (byteLength >= newByteLength && (!preserveResizability || fixedLength)) {\n    newBuffer = slice(arrayBuffer, 0, newByteLength);\n  } else {\n    var options = preserveResizability && !fixedLength && maxByteLength ? { maxByteLength: maxByteLength(arrayBuffer) } : undefined;\n    newBuffer = new ArrayBuffer(newByteLength, options);\n    var a = new DataView(arrayBuffer);\n    var b = new DataView(newBuffer);\n    var copyLength = min(newByteLength, byteLength);\n    for (var i = 0; i < copyLength; i++) setInt8(b, i, getInt8(a, i));\n  }\n  if (!PROPER_STRUCTURED_CLONE_TRANSFER) detachTransferable(arrayBuffer);\n  return newBuffer;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/array-buffer-transfer.js?")},95819:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// https://github.com/tc39/proposal-string-replaceall\n__webpack_require__(12041);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/proposals/string-replace-all-stage-4.js?")},96069:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar uncurryThis = __webpack_require__(79504);\nvar aString = __webpack_require__(63463);\nvar hasOwn = __webpack_require__(39297);\nvar padStart = (__webpack_require__(60533).start);\nvar WHITESPACES = __webpack_require__(47452);\n\nvar $Array = Array;\nvar $escape = RegExp.escape;\nvar charAt = uncurryThis(''.charAt);\nvar charCodeAt = uncurryThis(''.charCodeAt);\nvar numberToString = uncurryThis(1.1.toString);\nvar join = uncurryThis([].join);\nvar FIRST_DIGIT_OR_ASCII = /^[0-9a-z]/i;\nvar SYNTAX_SOLIDUS = /^[$()*+./?[\\\\\\]^{|}]/;\nvar OTHER_PUNCTUATORS_AND_WHITESPACES = RegExp('^[!\"#%&\\',\\\\-:;<=>@`~' + WHITESPACES + ']');\nvar exec = uncurryThis(FIRST_DIGIT_OR_ASCII.exec);\n\nvar ControlEscape = {\n  '\\u0009': 't',\n  '\\u000A': 'n',\n  '\\u000B': 'v',\n  '\\u000C': 'f',\n  '\\u000D': 'r'\n};\n\nvar escapeChar = function (chr) {\n  var hex = numberToString(charCodeAt(chr, 0), 16);\n  return hex.length < 3 ? '\\\\x' + padStart(hex, 2, '0') : '\\\\u' + padStart(hex, 4, '0');\n};\n\n// Avoiding the use of polyfills of the previous iteration of this proposal\nvar FORCED = !$escape || $escape('ab') !== '\\\\x61b';\n\n// `RegExp.escape` method\n// https://tc39.es/ecma262/#sec-regexp.escape\n$({ target: 'RegExp', stat: true, forced: FORCED }, {\n  escape: function escape(S) {\n    aString(S);\n    var length = S.length;\n    var result = $Array(length);\n\n    for (var i = 0; i < length; i++) {\n      var chr = charAt(S, i);\n      if (i === 0 && exec(FIRST_DIGIT_OR_ASCII, chr)) {\n        result[i] = escapeChar(chr);\n      } else if (hasOwn(ControlEscape, chr)) {\n        result[i] = '\\\\' + ControlEscape[chr];\n      } else if (exec(SYNTAX_SOLIDUS, chr)) {\n        result[i] = '\\\\' + chr;\n      } else if (exec(OTHER_PUNCTUATORS_AND_WHITESPACES, chr)) {\n        result[i] = escapeChar(chr);\n      } else {\n        var charCode = charCodeAt(chr, 0);\n        // single UTF-16 code unit\n        if ((charCode & 0xF800) !== 0xD800) result[i] = chr;\n        // unpaired surrogate\n        else if (charCode >= 0xDC00 || i + 1 >= length || (charCodeAt(S, i + 1) & 0xFC00) !== 0xDC00) result[i] = escapeChar(chr);\n        // surrogate pair\n        else {\n          result[i] = chr;\n          result[++i] = charAt(S, i);\n        }\n      }\n    }\n\n    return join(result, '');\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.regexp.escape.js?")},96167:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar call = __webpack_require__(69565);\nvar aCallable = __webpack_require__(79306);\nvar newPromiseCapabilityModule = __webpack_require__(36043);\nvar perform = __webpack_require__(1103);\nvar iterate = __webpack_require__(72652);\nvar PROMISE_STATICS_INCORRECT_ITERATION = __webpack_require__(90537);\n\n// `Promise.allSettled` method\n// https://tc39.es/ecma262/#sec-promise.allsettled\n$({ target: 'Promise', stat: true, forced: PROMISE_STATICS_INCORRECT_ITERATION }, {\n  allSettled: function allSettled(iterable) {\n    var C = this;\n    var capability = newPromiseCapabilityModule.f(C);\n    var resolve = capability.resolve;\n    var reject = capability.reject;\n    var result = perform(function () {\n      var promiseResolve = aCallable(C.resolve);\n      var values = [];\n      var counter = 0;\n      var remaining = 1;\n      iterate(iterable, function (promise) {\n        var index = counter++;\n        var alreadyCalled = false;\n        remaining++;\n        call(promiseResolve, C, promise).then(function (value) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[index] = { status: 'fulfilled', value: value };\n          --remaining || resolve(values);\n        }, function (error) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[index] = { status: 'rejected', reason: error };\n          --remaining || resolve(values);\n        });\n      });\n      --remaining || resolve(values);\n    });\n    if (result.error) reject(result.value);\n    return capability.promise;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.promise.all-settled.js?")},96319:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar anObject = __webpack_require__(28551);\nvar iteratorClose = __webpack_require__(9539);\n\n// call something on iterator step with safe closing on error\nmodule.exports = function (iterator, fn, value, ENTRIES) {\n  try {\n    return ENTRIES ? fn(anObject(value)[0], value[1]) : fn(value);\n  } catch (error) {\n    iteratorClose(iterator, 'throw', error);\n  }\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/call-with-safe-iteration-closing.js?")},96395:module=>{"use strict";eval("\nmodule.exports = false;\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/is-pure.js?")},96801:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";eval("\nvar DESCRIPTORS = __webpack_require__(43724);\nvar V8_PROTOTYPE_DEFINE_BUG = __webpack_require__(48686);\nvar definePropertyModule = __webpack_require__(24913);\nvar anObject = __webpack_require__(28551);\nvar toIndexedObject = __webpack_require__(25397);\nvar objectKeys = __webpack_require__(71072);\n\n// `Object.defineProperties` method\n// https://tc39.es/ecma262/#sec-object.defineproperties\n// eslint-disable-next-line es/no-object-defineproperties -- safe\nexports.f = DESCRIPTORS && !V8_PROTOTYPE_DEFINE_BUG ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var props = toIndexedObject(Properties);\n  var keys = objectKeys(Properties);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) definePropertyModule.f(O, key = keys[index++], props[key]);\n  return O;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/object-define-properties.js?")},96837:module=>{"use strict";eval("\nvar $TypeError = TypeError;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF; // 2 ** 53 - 1 == 9007199254740991\n\nmodule.exports = function (it) {\n  if (it > MAX_SAFE_INTEGER) throw $TypeError('Maximum allowed index exceeded');\n  return it;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/does-not-exceed-safe-integer.js?")},96847:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(91134);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.typed-array.find-last-index.js?")},97040:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar DESCRIPTORS = __webpack_require__(43724);\nvar definePropertyModule = __webpack_require__(24913);\nvar createPropertyDescriptor = __webpack_require__(6980);\n\nmodule.exports = function (object, key, value) {\n  if (DESCRIPTORS) definePropertyModule.f(object, key, createPropertyDescriptor(0, value));\n  else object[key] = value;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/create-property.js?")},97080:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar has = (__webpack_require__(94402).has);\n\n// Perform ? RequireInternalSlot(M, [[SetData]])\nmodule.exports = function (it) {\n  has(it);\n  return it;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/a-set.js?")},97751:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar globalThis = __webpack_require__(44576);\nvar isCallable = __webpack_require__(94901);\n\nvar aFunction = function (argument) {\n  return isCallable(argument) ? argument : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(globalThis[namespace]) : globalThis[namespace] && globalThis[namespace][method];\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/get-built-in.js?")},97812:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar hasOwn = __webpack_require__(39297);\nvar isSymbol = __webpack_require__(10757);\nvar tryToString = __webpack_require__(16823);\nvar shared = __webpack_require__(25745);\nvar NATIVE_SYMBOL_REGISTRY = __webpack_require__(91296);\n\nvar SymbolToStringRegistry = shared('symbol-to-string-registry');\n\n// `Symbol.keyFor` method\n// https://tc39.es/ecma262/#sec-symbol.keyfor\n$({ target: 'Symbol', stat: true, forced: !NATIVE_SYMBOL_REGISTRY }, {\n  keyFor: function keyFor(sym) {\n    if (!isSymbol(sym)) throw new TypeError(tryToString(sym) + ' is not a symbol');\n    if (hasOwn(SymbolToStringRegistry, sym)) return SymbolToStringRegistry[sym];\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.symbol.key-for.js?")},97818:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// https://github.com/tc39/proposal-is-usv-string\n__webpack_require__(44590);\n__webpack_require__(51755);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/proposals/well-formed-unicode-strings.js?")},97916:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar bind = __webpack_require__(76080);\nvar call = __webpack_require__(69565);\nvar toObject = __webpack_require__(48981);\nvar callWithSafeIterationClosing = __webpack_require__(96319);\nvar isArrayIteratorMethod = __webpack_require__(44209);\nvar isConstructor = __webpack_require__(33517);\nvar lengthOfArrayLike = __webpack_require__(26198);\nvar createProperty = __webpack_require__(97040);\nvar getIterator = __webpack_require__(70081);\nvar getIteratorMethod = __webpack_require__(50851);\n\nvar $Array = Array;\n\n// `Array.from` method implementation\n// https://tc39.es/ecma262/#sec-array.from\nmodule.exports = function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n  var O = toObject(arrayLike);\n  var IS_CONSTRUCTOR = isConstructor(this);\n  var argumentsLength = arguments.length;\n  var mapfn = argumentsLength > 1 ? arguments[1] : undefined;\n  var mapping = mapfn !== undefined;\n  if (mapping) mapfn = bind(mapfn, argumentsLength > 2 ? arguments[2] : undefined);\n  var iteratorMethod = getIteratorMethod(O);\n  var index = 0;\n  var length, result, step, iterator, next, value;\n  // if the target is not iterable or it's an array with the default iterator - use a simple case\n  if (iteratorMethod && !(this === $Array && isArrayIteratorMethod(iteratorMethod))) {\n    result = IS_CONSTRUCTOR ? new this() : [];\n    iterator = getIterator(O, iteratorMethod);\n    next = iterator.next;\n    for (;!(step = call(next, iterator)).done; index++) {\n      value = mapping ? callWithSafeIterationClosing(iterator, mapfn, [step.value, index], true) : step.value;\n      createProperty(result, index, value);\n    }\n  } else {\n    length = lengthOfArrayLike(O);\n    result = IS_CONSTRUCTOR ? new this(length) : $Array(length);\n    for (;length > index; index++) {\n      value = mapping ? mapfn(O[index], index) : O[index];\n      createProperty(result, index, value);\n    }\n  }\n  result.length = index;\n  return result;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/array-from.js?")},98406:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: in core-js@4, move /modules/ dependencies to public entries for better optimization by tools like `preset-env`\n__webpack_require__(23792);\n__webpack_require__(27337);\nvar $ = __webpack_require__(46518);\nvar globalThis = __webpack_require__(44576);\nvar safeGetBuiltIn = __webpack_require__(93389);\nvar getBuiltIn = __webpack_require__(97751);\nvar call = __webpack_require__(69565);\nvar uncurryThis = __webpack_require__(79504);\nvar DESCRIPTORS = __webpack_require__(43724);\nvar USE_NATIVE_URL = __webpack_require__(67416);\nvar defineBuiltIn = __webpack_require__(36840);\nvar defineBuiltInAccessor = __webpack_require__(62106);\nvar defineBuiltIns = __webpack_require__(56279);\nvar setToStringTag = __webpack_require__(10687);\nvar createIteratorConstructor = __webpack_require__(33994);\nvar InternalStateModule = __webpack_require__(91181);\nvar anInstance = __webpack_require__(90679);\nvar isCallable = __webpack_require__(94901);\nvar hasOwn = __webpack_require__(39297);\nvar bind = __webpack_require__(76080);\nvar classof = __webpack_require__(36955);\nvar anObject = __webpack_require__(28551);\nvar isObject = __webpack_require__(20034);\nvar $toString = __webpack_require__(655);\nvar create = __webpack_require__(2360);\nvar createPropertyDescriptor = __webpack_require__(6980);\nvar getIterator = __webpack_require__(70081);\nvar getIteratorMethod = __webpack_require__(50851);\nvar createIterResultObject = __webpack_require__(62529);\nvar validateArgumentsLength = __webpack_require__(22812);\nvar wellKnownSymbol = __webpack_require__(78227);\nvar arraySort = __webpack_require__(74488);\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar URL_SEARCH_PARAMS = 'URLSearchParams';\nvar URL_SEARCH_PARAMS_ITERATOR = URL_SEARCH_PARAMS + 'Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalParamsState = InternalStateModule.getterFor(URL_SEARCH_PARAMS);\nvar getInternalIteratorState = InternalStateModule.getterFor(URL_SEARCH_PARAMS_ITERATOR);\n\nvar nativeFetch = safeGetBuiltIn('fetch');\nvar NativeRequest = safeGetBuiltIn('Request');\nvar Headers = safeGetBuiltIn('Headers');\nvar RequestPrototype = NativeRequest && NativeRequest.prototype;\nvar HeadersPrototype = Headers && Headers.prototype;\nvar TypeError = globalThis.TypeError;\nvar encodeURIComponent = globalThis.encodeURIComponent;\nvar fromCharCode = String.fromCharCode;\nvar fromCodePoint = getBuiltIn('String', 'fromCodePoint');\nvar $parseInt = parseInt;\nvar charAt = uncurryThis(''.charAt);\nvar join = uncurryThis([].join);\nvar push = uncurryThis([].push);\nvar replace = uncurryThis(''.replace);\nvar shift = uncurryThis([].shift);\nvar splice = uncurryThis([].splice);\nvar split = uncurryThis(''.split);\nvar stringSlice = uncurryThis(''.slice);\nvar exec = uncurryThis(/./.exec);\n\nvar plus = /\\+/g;\nvar FALLBACK_REPLACER = '\\uFFFD';\nvar VALID_HEX = /^[0-9a-f]+$/i;\n\nvar parseHexOctet = function (string, start) {\n  var substr = stringSlice(string, start, start + 2);\n  if (!exec(VALID_HEX, substr)) return NaN;\n\n  return $parseInt(substr, 16);\n};\n\nvar getLeadingOnes = function (octet) {\n  var count = 0;\n  for (var mask = 0x80; mask > 0 && (octet & mask) !== 0; mask >>= 1) {\n    count++;\n  }\n  return count;\n};\n\nvar utf8Decode = function (octets) {\n  var codePoint = null;\n\n  switch (octets.length) {\n    case 1:\n      codePoint = octets[0];\n      break;\n    case 2:\n      codePoint = (octets[0] & 0x1F) << 6 | (octets[1] & 0x3F);\n      break;\n    case 3:\n      codePoint = (octets[0] & 0x0F) << 12 | (octets[1] & 0x3F) << 6 | (octets[2] & 0x3F);\n      break;\n    case 4:\n      codePoint = (octets[0] & 0x07) << 18 | (octets[1] & 0x3F) << 12 | (octets[2] & 0x3F) << 6 | (octets[3] & 0x3F);\n      break;\n  }\n\n  return codePoint > 0x10FFFF ? null : codePoint;\n};\n\nvar decode = function (input) {\n  input = replace(input, plus, ' ');\n  var length = input.length;\n  var result = '';\n  var i = 0;\n\n  while (i < length) {\n    var decodedChar = charAt(input, i);\n\n    if (decodedChar === '%') {\n      if (charAt(input, i + 1) === '%' || i + 3 > length) {\n        result += '%';\n        i++;\n        continue;\n      }\n\n      var octet = parseHexOctet(input, i + 1);\n\n      // eslint-disable-next-line no-self-compare -- NaN check\n      if (octet !== octet) {\n        result += decodedChar;\n        i++;\n        continue;\n      }\n\n      i += 2;\n      var byteSequenceLength = getLeadingOnes(octet);\n\n      if (byteSequenceLength === 0) {\n        decodedChar = fromCharCode(octet);\n      } else {\n        if (byteSequenceLength === 1 || byteSequenceLength > 4) {\n          result += FALLBACK_REPLACER;\n          i++;\n          continue;\n        }\n\n        var octets = [octet];\n        var sequenceIndex = 1;\n\n        while (sequenceIndex < byteSequenceLength) {\n          i++;\n          if (i + 3 > length || charAt(input, i) !== '%') break;\n\n          var nextByte = parseHexOctet(input, i + 1);\n\n          // eslint-disable-next-line no-self-compare -- NaN check\n          if (nextByte !== nextByte) {\n            i += 3;\n            break;\n          }\n          if (nextByte > 191 || nextByte < 128) break;\n\n          push(octets, nextByte);\n          i += 2;\n          sequenceIndex++;\n        }\n\n        if (octets.length !== byteSequenceLength) {\n          result += FALLBACK_REPLACER;\n          continue;\n        }\n\n        var codePoint = utf8Decode(octets);\n        if (codePoint === null) {\n          result += FALLBACK_REPLACER;\n        } else {\n          decodedChar = fromCodePoint(codePoint);\n        }\n      }\n    }\n\n    result += decodedChar;\n    i++;\n  }\n\n  return result;\n};\n\nvar find = /[!'()~]|%20/g;\n\nvar replacements = {\n  '!': '%21',\n  \"'\": '%27',\n  '(': '%28',\n  ')': '%29',\n  '~': '%7E',\n  '%20': '+'\n};\n\nvar replacer = function (match) {\n  return replacements[match];\n};\n\nvar serialize = function (it) {\n  return replace(encodeURIComponent(it), find, replacer);\n};\n\nvar URLSearchParamsIterator = createIteratorConstructor(function Iterator(params, kind) {\n  setInternalState(this, {\n    type: URL_SEARCH_PARAMS_ITERATOR,\n    target: getInternalParamsState(params).entries,\n    index: 0,\n    kind: kind\n  });\n}, URL_SEARCH_PARAMS, function next() {\n  var state = getInternalIteratorState(this);\n  var target = state.target;\n  var index = state.index++;\n  if (!target || index >= target.length) {\n    state.target = null;\n    return createIterResultObject(undefined, true);\n  }\n  var entry = target[index];\n  switch (state.kind) {\n    case 'keys': return createIterResultObject(entry.key, false);\n    case 'values': return createIterResultObject(entry.value, false);\n  } return createIterResultObject([entry.key, entry.value], false);\n}, true);\n\nvar URLSearchParamsState = function (init) {\n  this.entries = [];\n  this.url = null;\n\n  if (init !== undefined) {\n    if (isObject(init)) this.parseObject(init);\n    else this.parseQuery(typeof init == 'string' ? charAt(init, 0) === '?' ? stringSlice(init, 1) : init : $toString(init));\n  }\n};\n\nURLSearchParamsState.prototype = {\n  type: URL_SEARCH_PARAMS,\n  bindURL: function (url) {\n    this.url = url;\n    this.update();\n  },\n  parseObject: function (object) {\n    var entries = this.entries;\n    var iteratorMethod = getIteratorMethod(object);\n    var iterator, next, step, entryIterator, entryNext, first, second;\n\n    if (iteratorMethod) {\n      iterator = getIterator(object, iteratorMethod);\n      next = iterator.next;\n      while (!(step = call(next, iterator)).done) {\n        entryIterator = getIterator(anObject(step.value));\n        entryNext = entryIterator.next;\n        if (\n          (first = call(entryNext, entryIterator)).done ||\n          (second = call(entryNext, entryIterator)).done ||\n          !call(entryNext, entryIterator).done\n        ) throw new TypeError('Expected sequence with length 2');\n        push(entries, { key: $toString(first.value), value: $toString(second.value) });\n      }\n    } else for (var key in object) if (hasOwn(object, key)) {\n      push(entries, { key: key, value: $toString(object[key]) });\n    }\n  },\n  parseQuery: function (query) {\n    if (query) {\n      var entries = this.entries;\n      var attributes = split(query, '&');\n      var index = 0;\n      var attribute, entry;\n      while (index < attributes.length) {\n        attribute = attributes[index++];\n        if (attribute.length) {\n          entry = split(attribute, '=');\n          push(entries, {\n            key: decode(shift(entry)),\n            value: decode(join(entry, '='))\n          });\n        }\n      }\n    }\n  },\n  serialize: function () {\n    var entries = this.entries;\n    var result = [];\n    var index = 0;\n    var entry;\n    while (index < entries.length) {\n      entry = entries[index++];\n      push(result, serialize(entry.key) + '=' + serialize(entry.value));\n    } return join(result, '&');\n  },\n  update: function () {\n    this.entries.length = 0;\n    this.parseQuery(this.url.query);\n  },\n  updateURL: function () {\n    if (this.url) this.url.update();\n  }\n};\n\n// `URLSearchParams` constructor\n// https://url.spec.whatwg.org/#interface-urlsearchparams\nvar URLSearchParamsConstructor = function URLSearchParams(/* init */) {\n  anInstance(this, URLSearchParamsPrototype);\n  var init = arguments.length > 0 ? arguments[0] : undefined;\n  var state = setInternalState(this, new URLSearchParamsState(init));\n  if (!DESCRIPTORS) this.size = state.entries.length;\n};\n\nvar URLSearchParamsPrototype = URLSearchParamsConstructor.prototype;\n\ndefineBuiltIns(URLSearchParamsPrototype, {\n  // `URLSearchParams.prototype.append` method\n  // https://url.spec.whatwg.org/#dom-urlsearchparams-append\n  append: function append(name, value) {\n    var state = getInternalParamsState(this);\n    validateArgumentsLength(arguments.length, 2);\n    push(state.entries, { key: $toString(name), value: $toString(value) });\n    if (!DESCRIPTORS) this.length++;\n    state.updateURL();\n  },\n  // `URLSearchParams.prototype.delete` method\n  // https://url.spec.whatwg.org/#dom-urlsearchparams-delete\n  'delete': function (name /* , value */) {\n    var state = getInternalParamsState(this);\n    var length = validateArgumentsLength(arguments.length, 1);\n    var entries = state.entries;\n    var key = $toString(name);\n    var $value = length < 2 ? undefined : arguments[1];\n    var value = $value === undefined ? $value : $toString($value);\n    var index = 0;\n    while (index < entries.length) {\n      var entry = entries[index];\n      if (entry.key === key && (value === undefined || entry.value === value)) {\n        splice(entries, index, 1);\n        if (value !== undefined) break;\n      } else index++;\n    }\n    if (!DESCRIPTORS) this.size = entries.length;\n    state.updateURL();\n  },\n  // `URLSearchParams.prototype.get` method\n  // https://url.spec.whatwg.org/#dom-urlsearchparams-get\n  get: function get(name) {\n    var entries = getInternalParamsState(this).entries;\n    validateArgumentsLength(arguments.length, 1);\n    var key = $toString(name);\n    var index = 0;\n    for (; index < entries.length; index++) {\n      if (entries[index].key === key) return entries[index].value;\n    }\n    return null;\n  },\n  // `URLSearchParams.prototype.getAll` method\n  // https://url.spec.whatwg.org/#dom-urlsearchparams-getall\n  getAll: function getAll(name) {\n    var entries = getInternalParamsState(this).entries;\n    validateArgumentsLength(arguments.length, 1);\n    var key = $toString(name);\n    var result = [];\n    var index = 0;\n    for (; index < entries.length; index++) {\n      if (entries[index].key === key) push(result, entries[index].value);\n    }\n    return result;\n  },\n  // `URLSearchParams.prototype.has` method\n  // https://url.spec.whatwg.org/#dom-urlsearchparams-has\n  has: function has(name /* , value */) {\n    var entries = getInternalParamsState(this).entries;\n    var length = validateArgumentsLength(arguments.length, 1);\n    var key = $toString(name);\n    var $value = length < 2 ? undefined : arguments[1];\n    var value = $value === undefined ? $value : $toString($value);\n    var index = 0;\n    while (index < entries.length) {\n      var entry = entries[index++];\n      if (entry.key === key && (value === undefined || entry.value === value)) return true;\n    }\n    return false;\n  },\n  // `URLSearchParams.prototype.set` method\n  // https://url.spec.whatwg.org/#dom-urlsearchparams-set\n  set: function set(name, value) {\n    var state = getInternalParamsState(this);\n    validateArgumentsLength(arguments.length, 1);\n    var entries = state.entries;\n    var found = false;\n    var key = $toString(name);\n    var val = $toString(value);\n    var index = 0;\n    var entry;\n    for (; index < entries.length; index++) {\n      entry = entries[index];\n      if (entry.key === key) {\n        if (found) splice(entries, index--, 1);\n        else {\n          found = true;\n          entry.value = val;\n        }\n      }\n    }\n    if (!found) push(entries, { key: key, value: val });\n    if (!DESCRIPTORS) this.size = entries.length;\n    state.updateURL();\n  },\n  // `URLSearchParams.prototype.sort` method\n  // https://url.spec.whatwg.org/#dom-urlsearchparams-sort\n  sort: function sort() {\n    var state = getInternalParamsState(this);\n    arraySort(state.entries, function (a, b) {\n      return a.key > b.key ? 1 : -1;\n    });\n    state.updateURL();\n  },\n  // `URLSearchParams.prototype.forEach` method\n  forEach: function forEach(callback /* , thisArg */) {\n    var entries = getInternalParamsState(this).entries;\n    var boundFunction = bind(callback, arguments.length > 1 ? arguments[1] : undefined);\n    var index = 0;\n    var entry;\n    while (index < entries.length) {\n      entry = entries[index++];\n      boundFunction(entry.value, entry.key, this);\n    }\n  },\n  // `URLSearchParams.prototype.keys` method\n  keys: function keys() {\n    return new URLSearchParamsIterator(this, 'keys');\n  },\n  // `URLSearchParams.prototype.values` method\n  values: function values() {\n    return new URLSearchParamsIterator(this, 'values');\n  },\n  // `URLSearchParams.prototype.entries` method\n  entries: function entries() {\n    return new URLSearchParamsIterator(this, 'entries');\n  }\n}, { enumerable: true });\n\n// `URLSearchParams.prototype[@@iterator]` method\ndefineBuiltIn(URLSearchParamsPrototype, ITERATOR, URLSearchParamsPrototype.entries, { name: 'entries' });\n\n// `URLSearchParams.prototype.toString` method\n// https://url.spec.whatwg.org/#urlsearchparams-stringification-behavior\ndefineBuiltIn(URLSearchParamsPrototype, 'toString', function toString() {\n  return getInternalParamsState(this).serialize();\n}, { enumerable: true });\n\n// `URLSearchParams.prototype.size` getter\n// https://github.com/whatwg/url/pull/734\nif (DESCRIPTORS) defineBuiltInAccessor(URLSearchParamsPrototype, 'size', {\n  get: function size() {\n    return getInternalParamsState(this).entries.length;\n  },\n  configurable: true,\n  enumerable: true\n});\n\nsetToStringTag(URLSearchParamsConstructor, URL_SEARCH_PARAMS);\n\n$({ global: true, constructor: true, forced: !USE_NATIVE_URL }, {\n  URLSearchParams: URLSearchParamsConstructor\n});\n\n// Wrap `fetch` and `Request` for correct work with polyfilled `URLSearchParams`\nif (!USE_NATIVE_URL && isCallable(Headers)) {\n  var headersHas = uncurryThis(HeadersPrototype.has);\n  var headersSet = uncurryThis(HeadersPrototype.set);\n\n  var wrapRequestOptions = function (init) {\n    if (isObject(init)) {\n      var body = init.body;\n      var headers;\n      if (classof(body) === URL_SEARCH_PARAMS) {\n        headers = init.headers ? new Headers(init.headers) : new Headers();\n        if (!headersHas(headers, 'content-type')) {\n          headersSet(headers, 'content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n        return create(init, {\n          body: createPropertyDescriptor(0, $toString(body)),\n          headers: createPropertyDescriptor(0, headers)\n        });\n      }\n    } return init;\n  };\n\n  if (isCallable(nativeFetch)) {\n    $({ global: true, enumerable: true, dontCallGetSet: true, forced: true }, {\n      fetch: function fetch(input /* , init */) {\n        return nativeFetch(input, arguments.length > 1 ? wrapRequestOptions(arguments[1]) : {});\n      }\n    });\n  }\n\n  if (isCallable(NativeRequest)) {\n    var RequestConstructor = function Request(input /* , init */) {\n      anInstance(this, RequestPrototype);\n      return new NativeRequest(input, arguments.length > 1 ? wrapRequestOptions(arguments[1]) : {});\n    };\n\n    RequestPrototype.constructor = RequestConstructor;\n    RequestConstructor.prototype = RequestPrototype;\n\n    $({ global: true, constructor: true, dontCallGetSet: true, forced: true }, {\n      Request: RequestConstructor\n    });\n  }\n}\n\nmodule.exports = {\n  URLSearchParams: URLSearchParamsConstructor,\n  getState: getInternalParamsState\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/web.url-search-params.constructor.js?")},98690:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar expm1 = __webpack_require__(53250);\n\nvar exp = Math.exp;\n\n// `Math.tanh` method\n// https://tc39.es/ecma262/#sec-math.tanh\n$({ target: 'Math', stat: true }, {\n  tanh: function tanh(x) {\n    var n = +x;\n    var a = expm1(n);\n    var b = expm1(-n);\n    return a === Infinity ? 1 : b === Infinity ? -1 : (a - b) / (exp(n) + exp(-n));\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.math.tanh.js?")},98721:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar DESCRIPTORS = __webpack_require__(43724);\nvar uncurryThis = __webpack_require__(79504);\nvar defineBuiltInAccessor = __webpack_require__(62106);\n\nvar URLSearchParamsPrototype = URLSearchParams.prototype;\nvar forEach = uncurryThis(URLSearchParamsPrototype.forEach);\n\n// `URLSearchParams.prototype.size` getter\n// https://github.com/whatwg/url/pull/734\nif (DESCRIPTORS && !('size' in URLSearchParamsPrototype)) {\n  defineBuiltInAccessor(URLSearchParamsPrototype, 'size', {\n    get: function size() {\n      var count = 0;\n      forEach(this, function () { count++; });\n      return count;\n    },\n    configurable: true,\n    enumerable: true\n  });\n}\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/web.url-search-params.size.js?")},98992:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(18111);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.iterator.constructor.js?")},99209:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\n// TODO: Remove from `core-js@4`\n__webpack_require__(45876);\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/esnext.set.is-subset-of.v2.js?")},99449:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval("\nvar $ = __webpack_require__(46518);\nvar uncurryThis = __webpack_require__(27476);\nvar getOwnPropertyDescriptor = (__webpack_require__(77347).f);\nvar toLength = __webpack_require__(18014);\nvar toString = __webpack_require__(655);\nvar notARegExp = __webpack_require__(60511);\nvar requireObjectCoercible = __webpack_require__(67750);\nvar correctIsRegExpLogic = __webpack_require__(41436);\nvar IS_PURE = __webpack_require__(96395);\n\nvar slice = uncurryThis(''.slice);\nvar min = Math.min;\n\nvar CORRECT_IS_REGEXP_LOGIC = correctIsRegExpLogic('endsWith');\n// https://github.com/zloirock/core-js/pull/702\nvar MDN_POLYFILL_BUG = !IS_PURE && !CORRECT_IS_REGEXP_LOGIC && !!function () {\n  var descriptor = getOwnPropertyDescriptor(String.prototype, 'endsWith');\n  return descriptor && !descriptor.writable;\n}();\n\n// `String.prototype.endsWith` method\n// https://tc39.es/ecma262/#sec-string.prototype.endswith\n$({ target: 'String', proto: true, forced: !MDN_POLYFILL_BUG && !CORRECT_IS_REGEXP_LOGIC }, {\n  endsWith: function endsWith(searchString /* , endPosition = @length */) {\n    var that = toString(requireObjectCoercible(this));\n    notARegExp(searchString);\n    var endPosition = arguments.length > 1 ? arguments[1] : undefined;\n    var len = that.length;\n    var end = endPosition === undefined ? len : min(toLength(endPosition), len);\n    var search = toString(searchString);\n    return slice(that, end - search.length, end) === search;\n  }\n});\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/modules/es.string.ends-with.js?")},99590:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval('\nvar toIntegerOrInfinity = __webpack_require__(91291);\n\nvar $RangeError = RangeError;\n\nmodule.exports = function (it) {\n  var result = toIntegerOrInfinity(it);\n  if (result < 0) throw new $RangeError("The argument can\'t be less than 0");\n  return result;\n};\n\n\n//# sourceURL=webpack://ViewerJS/./node_modules/core-js/internals/to-positive-integer.js?')}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.exports}__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(80940);return __webpack_exports__})()));